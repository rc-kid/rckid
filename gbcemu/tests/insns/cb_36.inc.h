    TEST(gbcemu, opcode_cb_36) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 36 0000
        gbc.setState(0xca24, 0x326c, 0x9260, 0xb4dd, 0xef55, 0x915b, 0x0, 0x1);
        gbc.writeMem(0x915b, { 0x89 });
        gbc.writeMem(0xca24, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x326c);
        EXPECT(gbc.pc(), 0xca26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x915b), 0x98);
        EXPECT(gbc.readMem(0xca24), 0xcb);
        EXPECT(gbc.readMem(0xca25), 0x36);
        // CB 36 0001
        gbc.setState(0xa0e3, 0xdf7a, 0x25a0, 0x1470, 0xcb3e, 0xacb0, 0x1, 0x0);
        gbc.writeMem(0xa0e3, { 0xcb, 0x36 });
        gbc.writeMem(0xacb0, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdf7a);
        EXPECT(gbc.pc(), 0xa0e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0e3), 0xcb);
        EXPECT(gbc.readMem(0xa0e4), 0x36);
        EXPECT(gbc.readMem(0xacb0), 0x1e);
        // CB 36 0005
        gbc.setState(0x6520, 0xf79b, 0xee30, 0x1c68, 0xd2b, 0xa180, 0x1, 0x1);
        gbc.writeMem(0x6520, { 0xcb, 0x36 });
        gbc.writeMem(0xa180, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf79b);
        EXPECT(gbc.pc(), 0x6522);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa180), 0x1f);
        // CB 36 0007
        gbc.setState(0xd9c7, 0x8fed, 0x8920, 0x2488, 0xca54, 0x9ff0, 0x1, 0x1);
        gbc.writeMem(0x9ff0, { 0xc2 });
        gbc.writeMem(0xd9c7, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8fed);
        EXPECT(gbc.pc(), 0xd9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff0), 0x2c);
        EXPECT(gbc.readMem(0xd9c7), 0xcb);
        EXPECT(gbc.readMem(0xd9c8), 0x36);
        // CB 36 0009
        gbc.setState(0xdd84, 0xd907, 0xfa0, 0x6221, 0x8daf, 0x8d7f, 0x1, 0x1);
        gbc.writeMem(0x8d7f, { 0x4b });
        gbc.writeMem(0xdd84, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd907);
        EXPECT(gbc.pc(), 0xdd86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7f), 0xb4);
        EXPECT(gbc.readMem(0xdd84), 0xcb);
        EXPECT(gbc.readMem(0xdd85), 0x36);
        // CB 36 000A
        gbc.setState(0x9a00, 0x4de1, 0x6080, 0x99f1, 0xd3d, 0xfb52, 0x0, 0x1);
        gbc.writeMem(0x9a00, { 0xcb, 0x36 });
        gbc.writeMem(0xfb52, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4de1);
        EXPECT(gbc.pc(), 0x9a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a00), 0xcb);
        EXPECT(gbc.readMem(0x9a01), 0x36);
        EXPECT(gbc.readMem(0xfb52), 0x6f);
        // CB 36 000E
        gbc.setState(0x6959, 0x3ad8, 0xd600, 0xa99b, 0xe7c7, 0x8084, 0x0, 0x0);
        gbc.writeMem(0x6959, { 0xcb, 0x36 });
        gbc.writeMem(0x8084, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3ad8);
        EXPECT(gbc.pc(), 0x695b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8084), 0xe0);
        // CB 36 0011
        gbc.setState(0x9f3, 0xca12, 0x9d70, 0xb756, 0xcc63, 0xfcc1, 0x1, 0x0);
        gbc.writeMem(0x9f3, { 0xcb, 0x36 });
        gbc.writeMem(0xfcc1, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xca12);
        EXPECT(gbc.pc(), 0x9f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfcc1), 0x70);
        // CB 36 0014
        gbc.setState(0x764b, 0x67d1, 0x1060, 0x313c, 0x3d46, 0xcb1d, 0x1, 0x1);
        gbc.writeMem(0x764b, { 0xcb, 0x36 });
        gbc.writeMem(0xcb1d, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x67d1);
        EXPECT(gbc.pc(), 0x764d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb1d), 0x42);
        // CB 36 0016
        gbc.setState(0x6ee2, 0x7b7, 0x6020, 0xfa28, 0x4108, 0xbb6b, 0x0, 0x0);
        gbc.writeMem(0x6ee2, { 0xcb, 0x36 });
        gbc.writeMem(0xbb6b, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7b7);
        EXPECT(gbc.pc(), 0x6ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb6b), 0x4e);
        // CB 36 0017
        gbc.setState(0x2940, 0xa044, 0xa30, 0x95a6, 0x75b8, 0xf4fb, 0x1, 0x1);
        gbc.writeMem(0x2940, { 0xcb, 0x36 });
        gbc.writeMem(0xf4fb, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa044);
        EXPECT(gbc.pc(), 0x2942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf4fb), 0xc0);
        // CB 36 0019
        gbc.setState(0x980b, 0xc37d, 0x2e90, 0x4910, 0xe763, 0xf404, 0x0, 0x1);
        gbc.writeMem(0x980b, { 0xcb, 0x36 });
        gbc.writeMem(0xf404, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc37d);
        EXPECT(gbc.pc(), 0x980d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980b), 0xcb);
        EXPECT(gbc.readMem(0x980c), 0x36);
        EXPECT(gbc.readMem(0xf404), 0x7b);
        // CB 36 001A
        gbc.setState(0x8315, 0x2129, 0x7580, 0xbc2f, 0x2713, 0xf639, 0x1, 0x1);
        gbc.writeMem(0x8315, { 0xcb, 0x36 });
        gbc.writeMem(0xf639, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2129);
        EXPECT(gbc.pc(), 0x8317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8315), 0xcb);
        EXPECT(gbc.readMem(0x8316), 0x36);
        EXPECT(gbc.readMem(0xf639), 0xaf);
        // CB 36 001C
        gbc.setState(0x8d96, 0x1da1, 0xe100, 0xdef9, 0x1289, 0xa6db, 0x0, 0x1);
        gbc.writeMem(0x8d96, { 0xcb, 0x36 });
        gbc.writeMem(0xa6db, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x1da1);
        EXPECT(gbc.pc(), 0x8d98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d96), 0xcb);
        EXPECT(gbc.readMem(0x8d97), 0x36);
        EXPECT(gbc.readMem(0xa6db), 0x79);
        // CB 36 0020
        gbc.setState(0x2138, 0x19bd, 0xe910, 0x4c88, 0xc41a, 0xc46d, 0x0, 0x1);
        gbc.writeMem(0x2138, { 0xcb, 0x36 });
        gbc.writeMem(0xc46d, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x19bd);
        EXPECT(gbc.pc(), 0x213a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc46d), 0xef);
        // CB 36 0021
        gbc.setState(0x6a6, 0x9c83, 0xae0, 0x6f47, 0x9f0a, 0x9325, 0x0, 0x0);
        gbc.writeMem(0x6a6, { 0xcb, 0x36 });
        gbc.writeMem(0x9325, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9c83);
        EXPECT(gbc.pc(), 0x6a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9325), 0xc6);
        // CB 36 0022
        gbc.setState(0x5042, 0x14ab, 0x52f0, 0x95db, 0x28a8, 0xed06, 0x1, 0x0);
        gbc.writeMem(0x5042, { 0xcb, 0x36 });
        gbc.writeMem(0xed06, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x14ab);
        EXPECT(gbc.pc(), 0x5044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed06), 0xc7);
        // CB 36 0024
        gbc.setState(0xa822, 0x6753, 0x6990, 0x5be1, 0x14d3, 0xa2aa, 0x0, 0x0);
        gbc.writeMem(0xa2aa, { 0x47 });
        gbc.writeMem(0xa822, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6753);
        EXPECT(gbc.pc(), 0xa824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2aa), 0x74);
        EXPECT(gbc.readMem(0xa822), 0xcb);
        EXPECT(gbc.readMem(0xa823), 0x36);
        // CB 36 0025
        gbc.setState(0x5983, 0x1ca6, 0xb120, 0x2b4a, 0xeabf, 0xb4c5, 0x0, 0x1);
        gbc.writeMem(0x5983, { 0xcb, 0x36 });
        gbc.writeMem(0xb4c5, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1ca6);
        EXPECT(gbc.pc(), 0x5985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4c5), 0x6e);
        // CB 36 0027
        gbc.setState(0x2eb3, 0xb4f1, 0x62e0, 0xef91, 0x96c2, 0x8b4b, 0x0, 0x1);
        gbc.writeMem(0x2eb3, { 0xcb, 0x36 });
        gbc.writeMem(0x8b4b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb4f1);
        EXPECT(gbc.pc(), 0x2eb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b4b), 0x9e);
        // CB 36 002C
        gbc.setState(0x3f33, 0x4fa1, 0x8830, 0xf522, 0x5190, 0x8dad, 0x1, 0x0);
        gbc.writeMem(0x3f33, { 0xcb, 0x36 });
        gbc.writeMem(0x8dad, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4fa1);
        EXPECT(gbc.pc(), 0x3f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dad), 0x27);
        // CB 36 002F
        gbc.setState(0x834, 0xc43b, 0x6670, 0x60a1, 0xe7cb, 0xd85a, 0x1, 0x1);
        gbc.writeMem(0x834, { 0xcb, 0x36 });
        gbc.writeMem(0xd85a, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc43b);
        EXPECT(gbc.pc(), 0x836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85a), 0x50);
        // CB 36 0030
        gbc.setState(0x4be0, 0x2e83, 0xee80, 0x3988, 0xf7bb, 0xce43, 0x0, 0x1);
        gbc.writeMem(0x4be0, { 0xcb, 0x36 });
        gbc.writeMem(0xce43, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2e83);
        EXPECT(gbc.pc(), 0x4be2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce43), 0x27);
        // CB 36 0032
        gbc.setState(0x78da, 0x9ed8, 0x9cf0, 0x1f53, 0x242e, 0xe7a7, 0x1, 0x0);
        gbc.writeMem(0x78da, { 0xcb, 0x36 });
        gbc.writeMem(0xe7a7, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9ed8);
        EXPECT(gbc.pc(), 0x78dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a7), 0x41);
        // CB 36 0033
        gbc.setState(0xe6ef, 0x638f, 0xe510, 0x70cd, 0x1224, 0xae2f, 0x0, 0x1);
        gbc.writeMem(0xae2f, { 0x25 });
        gbc.writeMem(0xe6ef, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x638f);
        EXPECT(gbc.pc(), 0xe6f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae2f), 0x52);
        EXPECT(gbc.readMem(0xe6ef), 0xcb);
        EXPECT(gbc.readMem(0xe6f0), 0x36);
        // CB 36 0037
        gbc.setState(0x694, 0x5735, 0x7cf0, 0xd73d, 0x537b, 0xc3cc, 0x1, 0x0);
        gbc.writeMem(0x694, { 0xcb, 0x36 });
        gbc.writeMem(0xc3cc, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5735);
        EXPECT(gbc.pc(), 0x696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3cc), 0x27);
        // CB 36 003B
        gbc.setState(0x3c04, 0x81d6, 0x9440, 0xe8a7, 0x5b2f, 0x906c, 0x1, 0x0);
        gbc.writeMem(0x3c04, { 0xcb, 0x36 });
        gbc.writeMem(0x906c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x81d6);
        EXPECT(gbc.pc(), 0x3c06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906c), 0x48);
        // CB 36 003D
        gbc.setState(0x2c98, 0xeda3, 0x64a0, 0x1f93, 0x6316, 0xa656, 0x0, 0x0);
        gbc.writeMem(0x2c98, { 0xcb, 0x36 });
        gbc.writeMem(0xa656, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xeda3);
        EXPECT(gbc.pc(), 0x2c9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa656), 0xa0);
        // CB 36 003F
        gbc.setState(0x566e, 0x2dea, 0x2b70, 0x228e, 0x9295, 0x9dcf, 0x1, 0x1);
        gbc.writeMem(0x566e, { 0xcb, 0x36 });
        gbc.writeMem(0x9dcf, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2dea);
        EXPECT(gbc.pc(), 0x5670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dcf), 0xa2);
        // CB 36 0040
        gbc.setState(0x8184, 0x7464, 0xfbc0, 0x86d5, 0xe4ae, 0xc030, 0x1, 0x0);
        gbc.writeMem(0x8184, { 0xcb, 0x36 });
        gbc.writeMem(0xc030, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7464);
        EXPECT(gbc.pc(), 0x8186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8184), 0xcb);
        EXPECT(gbc.readMem(0x8185), 0x36);
        EXPECT(gbc.readMem(0xc030), 0x4c);
        // CB 36 0041
        gbc.setState(0x511, 0x1880, 0xc5e0, 0x53bc, 0x8dc4, 0xdb28, 0x0, 0x1);
        gbc.writeMem(0x511, { 0xcb, 0x36 });
        gbc.writeMem(0xdb28, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1880);
        EXPECT(gbc.pc(), 0x513);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb28), 0x68);
        // CB 36 0042
        gbc.setState(0x149e, 0xe1bf, 0x4de0, 0x2e55, 0x38fa, 0x2d17, 0x1, 0x0);
        gbc.writeMem(0x149e, { 0xcb, 0x36 });
        gbc.writeMem(0x2d17, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe1bf);
        EXPECT(gbc.pc(), 0x14a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0043
        gbc.setState(0x75b7, 0x7560, 0xcb70, 0x4408, 0xb37f, 0xd320, 0x0, 0x0);
        gbc.writeMem(0x75b7, { 0xcb, 0x36 });
        gbc.writeMem(0xd320, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7560);
        EXPECT(gbc.pc(), 0x75b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd320), 0xa0);
        // CB 36 0045
        gbc.setState(0x837b, 0x9e6d, 0xb1d0, 0x4500, 0xec30, 0xb77c, 0x1, 0x0);
        gbc.writeMem(0x837b, { 0xcb, 0x36 });
        gbc.writeMem(0xb77c, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9e6d);
        EXPECT(gbc.pc(), 0x837d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x837b), 0xcb);
        EXPECT(gbc.readMem(0x837c), 0x36);
        EXPECT(gbc.readMem(0xb77c), 0x71);
        // CB 36 0048
        gbc.setState(0x94f4, 0x822d, 0x8630, 0x2058, 0x38c, 0xa0f3, 0x1, 0x1);
        gbc.writeMem(0x94f4, { 0xcb, 0x36 });
        gbc.writeMem(0xa0f3, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x822d);
        EXPECT(gbc.pc(), 0x94f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f4), 0xcb);
        EXPECT(gbc.readMem(0x94f5), 0x36);
        EXPECT(gbc.readMem(0xa0f3), 0x8d);
        // CB 36 004A
        gbc.setState(0xdac9, 0x5fde, 0xdb40, 0xc5d8, 0x8bde, 0xf07c, 0x0, 0x0);
        gbc.writeMem(0xdac9, { 0xcb, 0x36 });
        gbc.writeMem(0xf07c, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5fde);
        EXPECT(gbc.pc(), 0xdacb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac9), 0xcb);
        EXPECT(gbc.readMem(0xdaca), 0x36);
        EXPECT(gbc.readMem(0xf07c), 0x47);
        // CB 36 004B
        gbc.setState(0x86c3, 0x19fe, 0x9760, 0xfb92, 0xbfa4, 0xed0e, 0x1, 0x1);
        gbc.writeMem(0x86c3, { 0xcb, 0x36 });
        gbc.writeMem(0xed0e, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x19fe);
        EXPECT(gbc.pc(), 0x86c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86c3), 0xcb);
        EXPECT(gbc.readMem(0x86c4), 0x36);
        EXPECT(gbc.readMem(0xed0e), 0x42);
        // CB 36 004D
        gbc.setState(0xd66f, 0xabda, 0x6300, 0xab9e, 0x41b3, 0xcf5f, 0x0, 0x1);
        gbc.writeMem(0xcf5f, { 0x7f });
        gbc.writeMem(0xd66f, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xabda);
        EXPECT(gbc.pc(), 0xd671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf5f), 0xf7);
        EXPECT(gbc.readMem(0xd66f), 0xcb);
        EXPECT(gbc.readMem(0xd670), 0x36);
        // CB 36 004E
        gbc.setState(0x8788, 0xe1c7, 0x1aa0, 0xf17, 0x5682, 0xb07a, 0x0, 0x1);
        gbc.writeMem(0x8788, { 0xcb, 0x36 });
        gbc.writeMem(0xb07a, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe1c7);
        EXPECT(gbc.pc(), 0x878a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8788), 0xcb);
        EXPECT(gbc.readMem(0x8789), 0x36);
        EXPECT(gbc.readMem(0xb07a), 0x82);
        // CB 36 0054
        gbc.setState(0xd260, 0x216c, 0x3fd0, 0x1cef, 0x16d5, 0xca31, 0x1, 0x0);
        gbc.writeMem(0xca31, { 0x57 });
        gbc.writeMem(0xd260, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x216c);
        EXPECT(gbc.pc(), 0xd262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca31), 0x75);
        EXPECT(gbc.readMem(0xd260), 0xcb);
        EXPECT(gbc.readMem(0xd261), 0x36);
        // CB 36 0056
        gbc.setState(0x7620, 0x9e1d, 0x7530, 0x8eb9, 0x9a79, 0xd25c, 0x0, 0x0);
        gbc.writeMem(0x7620, { 0xcb, 0x36 });
        gbc.writeMem(0xd25c, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9e1d);
        EXPECT(gbc.pc(), 0x7622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd25c), 0xaf);
        // CB 36 0059
        gbc.setState(0x6426, 0xd9c, 0x30, 0x8fcf, 0x2ea8, 0xc582, 0x1, 0x0);
        gbc.writeMem(0x6426, { 0xcb, 0x36 });
        gbc.writeMem(0xc582, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd9c);
        EXPECT(gbc.pc(), 0x6428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc582), 0x8f);
        // CB 36 005A
        gbc.setState(0xd3c6, 0x6bb4, 0xdf00, 0x3b8f, 0x51b8, 0x9b2c, 0x1, 0x0);
        gbc.writeMem(0x9b2c, { 0x9a });
        gbc.writeMem(0xd3c6, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6bb4);
        EXPECT(gbc.pc(), 0xd3c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b2c), 0xa9);
        EXPECT(gbc.readMem(0xd3c6), 0xcb);
        EXPECT(gbc.readMem(0xd3c7), 0x36);
        // CB 36 005B
        gbc.setState(0x76a0, 0xbb1c, 0xa710, 0xf548, 0x2dc2, 0xbd27, 0x1, 0x1);
        gbc.writeMem(0x76a0, { 0xcb, 0x36 });
        gbc.writeMem(0xbd27, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbb1c);
        EXPECT(gbc.pc(), 0x76a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd27), 0xd7);
        // CB 36 005D
        gbc.setState(0x21b, 0xfab6, 0x5c20, 0x56e8, 0xa845, 0x8c3d, 0x1, 0x1);
        gbc.writeMem(0x21b, { 0xcb, 0x36 });
        gbc.writeMem(0x8c3d, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfab6);
        EXPECT(gbc.pc(), 0x21d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3d), 0x19);
        // CB 36 005E
        gbc.setState(0x28ac, 0x95b1, 0x6990, 0xeab3, 0x7683, 0x81a9, 0x1, 0x0);
        gbc.writeMem(0x28ac, { 0xcb, 0x36 });
        gbc.writeMem(0x81a9, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x95b1);
        EXPECT(gbc.pc(), 0x28ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a9), 0xe0);
        // CB 36 0060
        gbc.setState(0x265e, 0x8823, 0x4c0, 0x97a3, 0xa35f, 0x4d17, 0x1, 0x1);
        gbc.writeMem(0x265e, { 0xcb, 0x36 });
        gbc.writeMem(0x4d17, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8823);
        EXPECT(gbc.pc(), 0x2660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0065
        gbc.setState(0x9854, 0x4eda, 0xdbf0, 0xf709, 0x7ab7, 0xfaa6, 0x1, 0x0);
        gbc.writeMem(0x9854, { 0xcb, 0x36 });
        gbc.writeMem(0xfaa6, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4eda);
        EXPECT(gbc.pc(), 0x9856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9854), 0xcb);
        EXPECT(gbc.readMem(0x9855), 0x36);
        EXPECT(gbc.readMem(0xfaa6), 0x50);
        // CB 36 0068
        gbc.setState(0xa77b, 0xed7, 0xe9d0, 0x59ee, 0x6135, 0xebf7, 0x0, 0x0);
        gbc.writeMem(0xa77b, { 0xcb, 0x36 });
        gbc.writeMem(0xebf7, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xed7);
        EXPECT(gbc.pc(), 0xa77d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77b), 0xcb);
        EXPECT(gbc.readMem(0xa77c), 0x36);
        EXPECT(gbc.readMem(0xebf7), 0x5e);
        // CB 36 006A
        gbc.setState(0x47c2, 0xda, 0xe3d0, 0xfc47, 0xef, 0xd627, 0x0, 0x0);
        gbc.writeMem(0x47c2, { 0xcb, 0x36 });
        gbc.writeMem(0xd627, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xda);
        EXPECT(gbc.pc(), 0x47c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd627), 0x5f);
        // CB 36 006B
        gbc.setState(0xb864, 0x7656, 0x3bf0, 0xe3de, 0xfa27, 0xe543, 0x1, 0x1);
        gbc.writeMem(0xb864, { 0xcb, 0x36 });
        gbc.writeMem(0xe543, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7656);
        EXPECT(gbc.pc(), 0xb866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb864), 0xcb);
        EXPECT(gbc.readMem(0xb865), 0x36);
        EXPECT(gbc.readMem(0xe543), 0x7a);
        // CB 36 006F
        gbc.setState(0xb0f6, 0x68f3, 0xea00, 0x8089, 0xaa5e, 0xafa8, 0x1, 0x1);
        gbc.writeMem(0xafa8, { 0xf3 });
        gbc.writeMem(0xb0f6, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x68f3);
        EXPECT(gbc.pc(), 0xb0f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa8), 0x3f);
        EXPECT(gbc.readMem(0xb0f6), 0xcb);
        EXPECT(gbc.readMem(0xb0f7), 0x36);
        // CB 36 0070
        gbc.setState(0x4033, 0x4a41, 0x580, 0xe965, 0x3d66, 0x9244, 0x0, 0x1);
        gbc.writeMem(0x4033, { 0xcb, 0x36 });
        gbc.writeMem(0x9244, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4a41);
        EXPECT(gbc.pc(), 0x4035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9244), 0x70);
        // CB 36 0071
        gbc.setState(0x5fd3, 0xed5d, 0xe3b0, 0x1aff, 0xf2dc, 0xa132, 0x1, 0x1);
        gbc.writeMem(0x5fd3, { 0xcb, 0x36 });
        gbc.writeMem(0xa132, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xed5d);
        EXPECT(gbc.pc(), 0x5fd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa132), 0xeb);
        // CB 36 0072
        gbc.setState(0x30f9, 0x3747, 0x3e10, 0xa4f, 0xf13c, 0xf9f6, 0x0, 0x1);
        gbc.writeMem(0x30f9, { 0xcb, 0x36 });
        gbc.writeMem(0xf9f6, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3747);
        EXPECT(gbc.pc(), 0x30fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9f6), 0xd6);
        // CB 36 0073
        gbc.setState(0xa82, 0x7a68, 0x1de0, 0xc91e, 0x3588, 0xce58, 0x1, 0x0);
        gbc.writeMem(0xa82, { 0xcb, 0x36 });
        gbc.writeMem(0xce58, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7a68);
        EXPECT(gbc.pc(), 0xa84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce58), 0xcc);
        // CB 36 0074
        gbc.setState(0xe310, 0x7e4, 0x51c0, 0xef5d, 0xc730, 0x9d32, 0x1, 0x1);
        gbc.writeMem(0x9d32, { 0xf9 });
        gbc.writeMem(0xe310, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7e4);
        EXPECT(gbc.pc(), 0xe312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d32), 0x9f);
        EXPECT(gbc.readMem(0xe310), 0xcb);
        EXPECT(gbc.readMem(0xe311), 0x36);
        // CB 36 0075
        gbc.setState(0x111b, 0x7c84, 0x26b0, 0x212f, 0xd98e, 0xc151, 0x1, 0x0);
        gbc.writeMem(0x111b, { 0xcb, 0x36 });
        gbc.writeMem(0xc151, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7c84);
        EXPECT(gbc.pc(), 0x111d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc151), 0xe2);
        // CB 36 0076
        gbc.setState(0x95e1, 0x62c2, 0x4340, 0xc304, 0xa01c, 0xc74f, 0x0, 0x0);
        gbc.writeMem(0x95e1, { 0xcb, 0x36 });
        gbc.writeMem(0xc74f, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x62c2);
        EXPECT(gbc.pc(), 0x95e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e1), 0xcb);
        EXPECT(gbc.readMem(0x95e2), 0x36);
        EXPECT(gbc.readMem(0xc74f), 0x42);
        // CB 36 0077
        gbc.setState(0x370e, 0xc291, 0x41b0, 0xd44a, 0x3f60, 0xf0ae, 0x1, 0x0);
        gbc.writeMem(0x370e, { 0xcb, 0x36 });
        gbc.writeMem(0xf0ae, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc291);
        EXPECT(gbc.pc(), 0x3710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf0ae), 0x32);
        // CB 36 0078
        gbc.setState(0x21e1, 0x66be, 0x4dd0, 0xc04c, 0xc2a, 0x68e6, 0x1, 0x0);
        gbc.writeMem(0x21e1, { 0xcb, 0x36 });
        gbc.writeMem(0x68e6, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x66be);
        EXPECT(gbc.pc(), 0x21e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0079
        gbc.setState(0x9535, 0xcef4, 0xb660, 0x6187, 0xcd37, 0x8ca9, 0x1, 0x1);
        gbc.writeMem(0x8ca9, { 0x32 });
        gbc.writeMem(0x9535, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xcef4);
        EXPECT(gbc.pc(), 0x9537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca9), 0x23);
        EXPECT(gbc.readMem(0x9535), 0xcb);
        EXPECT(gbc.readMem(0x9536), 0x36);
        // CB 36 007B
        gbc.setState(0x6507, 0x1ccf, 0xd70, 0xf30b, 0xf2ee, 0xf8d0, 0x1, 0x0);
        gbc.writeMem(0x6507, { 0xcb, 0x36 });
        gbc.writeMem(0xf8d0, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1ccf);
        EXPECT(gbc.pc(), 0x6509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8d0), 0x49);
        // CB 36 007C
        gbc.setState(0xce75, 0x7e68, 0xc940, 0x5c5d, 0x1dc0, 0xb67b, 0x0, 0x1);
        gbc.writeMem(0xb67b, { 0x14 });
        gbc.writeMem(0xce75, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7e68);
        EXPECT(gbc.pc(), 0xce77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb67b), 0x41);
        EXPECT(gbc.readMem(0xce75), 0xcb);
        EXPECT(gbc.readMem(0xce76), 0x36);
        // CB 36 0080
        gbc.setState(0x3044, 0x26a4, 0x2df0, 0xf578, 0xc8ec, 0xf87a, 0x0, 0x1);
        gbc.writeMem(0x3044, { 0xcb, 0x36 });
        gbc.writeMem(0xf87a, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x26a4);
        EXPECT(gbc.pc(), 0x3046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf87a), 0xc5);
        // CB 36 0084
        gbc.setState(0x28e4, 0x4742, 0xbff0, 0xe5ce, 0xd6dd, 0xc218, 0x1, 0x1);
        gbc.writeMem(0x28e4, { 0xcb, 0x36 });
        gbc.writeMem(0xc218, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4742);
        EXPECT(gbc.pc(), 0x28e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc218), 0x5c);
        // CB 36 0086
        gbc.setState(0x7824, 0x43d3, 0xa350, 0x3898, 0x4c1c, 0x9511, 0x1, 0x0);
        gbc.writeMem(0x7824, { 0xcb, 0x36 });
        gbc.writeMem(0x9511, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x43d3);
        EXPECT(gbc.pc(), 0x7826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9511), 0x41);
        // CB 36 0087
        gbc.setState(0xdc2b, 0xf3ec, 0xfff0, 0x2cd5, 0xf107, 0x589d, 0x1, 0x1);
        gbc.writeMem(0x589d, { 0x88 });
        gbc.writeMem(0xdc2b, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf3ec);
        EXPECT(gbc.pc(), 0xdc2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc2b), 0xcb);
        EXPECT(gbc.readMem(0xdc2c), 0x36);
        // CB 36 0088
        gbc.setState(0x7058, 0x3296, 0xdf70, 0xb1a7, 0xd6ed, 0xeb8e, 0x1, 0x1);
        gbc.writeMem(0x7058, { 0xcb, 0x36 });
        gbc.writeMem(0xeb8e, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3296);
        EXPECT(gbc.pc(), 0x705a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb8e), 0x3);
        // CB 36 0089
        gbc.setState(0x7775, 0x64c4, 0xc370, 0x6a3b, 0x5fc7, 0x9e6f, 0x1, 0x0);
        gbc.writeMem(0x7775, { 0xcb, 0x36 });
        gbc.writeMem(0x9e6f, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x64c4);
        EXPECT(gbc.pc(), 0x7777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e6f), 0xa7);
        // CB 36 008B
        gbc.setState(0xc896, 0x4a1f, 0x31b0, 0x486b, 0x83f7, 0xb0bb, 0x1, 0x0);
        gbc.writeMem(0xb0bb, { 0xd3 });
        gbc.writeMem(0xc896, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4a1f);
        EXPECT(gbc.pc(), 0xc898);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0bb), 0x3d);
        EXPECT(gbc.readMem(0xc896), 0xcb);
        EXPECT(gbc.readMem(0xc897), 0x36);
        // CB 36 008C
        gbc.setState(0x9adf, 0xb5aa, 0xd7e0, 0x5ec2, 0x577a, 0x88ad, 0x1, 0x0);
        gbc.writeMem(0x88ad, { 0x6 });
        gbc.writeMem(0x9adf, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb5aa);
        EXPECT(gbc.pc(), 0x9ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ad), 0x60);
        EXPECT(gbc.readMem(0x9adf), 0xcb);
        EXPECT(gbc.readMem(0x9ae0), 0x36);
        // CB 36 008E
        gbc.setState(0x67ba, 0xdf5e, 0xea30, 0xffe0, 0x65dc, 0x92c2, 0x0, 0x0);
        gbc.writeMem(0x67ba, { 0xcb, 0x36 });
        gbc.writeMem(0x92c2, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdf5e);
        EXPECT(gbc.pc(), 0x67bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c2), 0xd8);
        // CB 36 008F
        gbc.setState(0xde33, 0x3876, 0x2cd0, 0x462d, 0x6353, 0xa031, 0x0, 0x0);
        gbc.writeMem(0xa031, { 0xdb });
        gbc.writeMem(0xde33, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3876);
        EXPECT(gbc.pc(), 0xde35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa031), 0xbd);
        EXPECT(gbc.readMem(0xde33), 0xcb);
        EXPECT(gbc.readMem(0xde34), 0x36);
        // CB 36 0090
        gbc.setState(0x36b7, 0xe913, 0x5d30, 0x1136, 0x349b, 0xa0df, 0x0, 0x1);
        gbc.writeMem(0x36b7, { 0xcb, 0x36 });
        gbc.writeMem(0xa0df, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe913);
        EXPECT(gbc.pc(), 0x36b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0df), 0x63);
        // CB 36 0091
        gbc.setState(0xb353, 0x697f, 0x7430, 0x143f, 0x7ba2, 0xa3da, 0x1, 0x0);
        gbc.writeMem(0xa3da, { 0xe1 });
        gbc.writeMem(0xb353, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x697f);
        EXPECT(gbc.pc(), 0xb355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3da), 0x1e);
        EXPECT(gbc.readMem(0xb353), 0xcb);
        EXPECT(gbc.readMem(0xb354), 0x36);
        // CB 36 0093
        gbc.setState(0x8b1d, 0x6a75, 0x7650, 0x7238, 0xd038, 0x9942, 0x0, 0x0);
        gbc.writeMem(0x8b1d, { 0xcb, 0x36 });
        gbc.writeMem(0x9942, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6a75);
        EXPECT(gbc.pc(), 0x8b1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b1d), 0xcb);
        EXPECT(gbc.readMem(0x8b1e), 0x36);
        EXPECT(gbc.readMem(0x9942), 0x21);
        // CB 36 0095
        gbc.setState(0xcc12, 0x6484, 0x8240, 0x99d5, 0x8c36, 0xf6dc, 0x0, 0x0);
        gbc.writeMem(0xcc12, { 0xcb, 0x36 });
        gbc.writeMem(0xf6dc, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x6484);
        EXPECT(gbc.pc(), 0xcc14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc12), 0xcb);
        EXPECT(gbc.readMem(0xcc13), 0x36);
        EXPECT(gbc.readMem(0xf6dc), 0x43);
        // CB 36 0097
        gbc.setState(0x850a, 0x23e0, 0xbfb0, 0x8bc3, 0xd251, 0xb0fe, 0x1, 0x0);
        gbc.writeMem(0x850a, { 0xcb, 0x36 });
        gbc.writeMem(0xb0fe, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x23e0);
        EXPECT(gbc.pc(), 0x850c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850a), 0xcb);
        EXPECT(gbc.readMem(0x850b), 0x36);
        EXPECT(gbc.readMem(0xb0fe), 0x9f);
        // CB 36 0098
        gbc.setState(0x4e, 0x83a6, 0x3e00, 0x8b89, 0x1273, 0xe9be, 0x0, 0x1);
        gbc.writeMem(0x4e, { 0xcb, 0x36 });
        gbc.writeMem(0xe9be, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x83a6);
        EXPECT(gbc.pc(), 0x50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9be), 0xf3);
        // CB 36 009D
        gbc.setState(0xb5c, 0xe00, 0xf830, 0x267f, 0x4b27, 0xc860, 0x0, 0x1);
        gbc.writeMem(0xb5c, { 0xcb, 0x36 });
        gbc.writeMem(0xc860, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe00);
        EXPECT(gbc.pc(), 0xb5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc860), 0x1);
        // CB 36 009E
        gbc.setState(0x2f5d, 0xb9e6, 0x29e0, 0x5f75, 0x7667, 0xf444, 0x1, 0x0);
        gbc.writeMem(0x2f5d, { 0xcb, 0x36 });
        gbc.writeMem(0xf444, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb9e6);
        EXPECT(gbc.pc(), 0x2f5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf444), 0xc7);
        // CB 36 00A1
        gbc.setState(0xee51, 0x3ae5, 0x5620, 0xa731, 0x11b8, 0x9280, 0x0, 0x0);
        gbc.writeMem(0x9280, { 0x1 });
        gbc.writeMem(0xee51, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3ae5);
        EXPECT(gbc.pc(), 0xee53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9280), 0x10);
        EXPECT(gbc.readMem(0xee51), 0xcb);
        EXPECT(gbc.readMem(0xee52), 0x36);
        // CB 36 00A3
        gbc.setState(0x372, 0xd319, 0x2b50, 0xaa5f, 0xeb91, 0x8828, 0x1, 0x1);
        gbc.writeMem(0x372, { 0xcb, 0x36 });
        gbc.writeMem(0x8828, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd319);
        EXPECT(gbc.pc(), 0x374);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8828), 0xf6);
        // CB 36 00A4
        gbc.setState(0x9cda, 0xd296, 0x6a00, 0xf468, 0xe86f, 0xb9b1, 0x0, 0x1);
        gbc.writeMem(0x9cda, { 0xcb, 0x36 });
        gbc.writeMem(0xb9b1, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd296);
        EXPECT(gbc.pc(), 0x9cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cda), 0xcb);
        EXPECT(gbc.readMem(0x9cdb), 0x36);
        EXPECT(gbc.readMem(0xb9b1), 0xde);
        // CB 36 00A6
        gbc.setState(0xd2ab, 0x1fda, 0xee70, 0x6bad, 0xd5fc, 0xd173, 0x0, 0x0);
        gbc.writeMem(0xd173, { 0x5d });
        gbc.writeMem(0xd2ab, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1fda);
        EXPECT(gbc.pc(), 0xd2ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd173), 0xd5);
        EXPECT(gbc.readMem(0xd2ab), 0xcb);
        EXPECT(gbc.readMem(0xd2ac), 0x36);
        // CB 36 00A7
        gbc.setState(0xe591, 0xd2f3, 0x2890, 0xbffd, 0xd304, 0x85e1, 0x1, 0x1);
        gbc.writeMem(0x85e1, { 0x57 });
        gbc.writeMem(0xe591, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd2f3);
        EXPECT(gbc.pc(), 0xe593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e1), 0x75);
        EXPECT(gbc.readMem(0xe591), 0xcb);
        EXPECT(gbc.readMem(0xe592), 0x36);
        // CB 36 00A9
        gbc.setState(0xea6, 0xef15, 0x5cd0, 0x9918, 0x61e3, 0xea15, 0x1, 0x1);
        gbc.writeMem(0xea6, { 0xcb, 0x36 });
        gbc.writeMem(0xea15, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xef15);
        EXPECT(gbc.pc(), 0xea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea15), 0x69);
        // CB 36 00AA
        gbc.setState(0x91a5, 0x2c34, 0x290, 0x5826, 0xd7b6, 0xc335, 0x1, 0x1);
        gbc.writeMem(0x91a5, { 0xcb, 0x36 });
        gbc.writeMem(0xc335, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2c34);
        EXPECT(gbc.pc(), 0x91a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a5), 0xcb);
        EXPECT(gbc.readMem(0x91a6), 0x36);
        EXPECT(gbc.readMem(0xc335), 0x1d);
        // CB 36 00AD
        gbc.setState(0x330, 0x5923, 0xa8d0, 0xcfa4, 0xdf2f, 0xd6f0, 0x1, 0x1);
        gbc.writeMem(0x330, { 0xcb, 0x36 });
        gbc.writeMem(0xd6f0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5923);
        EXPECT(gbc.pc(), 0x332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6f0), 0xc4);
        // CB 36 00AE
        gbc.setState(0x797e, 0xe75, 0x3980, 0x7633, 0x3f8a, 0xa443, 0x0, 0x1);
        gbc.writeMem(0x797e, { 0xcb, 0x36 });
        gbc.writeMem(0xa443, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe75);
        EXPECT(gbc.pc(), 0x7980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa443), 0xec);
        // CB 36 00B0
        gbc.setState(0x6fc, 0x771d, 0x41a0, 0x435f, 0x4863, 0x9088, 0x0, 0x1);
        gbc.writeMem(0x6fc, { 0xcb, 0x36 });
        gbc.writeMem(0x9088, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x771d);
        EXPECT(gbc.pc(), 0x6fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9088), 0xbd);
        // CB 36 00B1
        gbc.setState(0x3415, 0x77c6, 0xa4b0, 0x6e89, 0x14ca, 0xc031, 0x1, 0x0);
        gbc.writeMem(0x3415, { 0xcb, 0x36 });
        gbc.writeMem(0xc031, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x77c6);
        EXPECT(gbc.pc(), 0x3417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc031), 0xd);
        // CB 36 00B2
        gbc.setState(0x5ff8, 0xf016, 0x18a0, 0x9a8, 0xd182, 0xbb2f, 0x1, 0x0);
        gbc.writeMem(0x5ff8, { 0xcb, 0x36 });
        gbc.writeMem(0xbb2f, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf016);
        EXPECT(gbc.pc(), 0x5ffa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb2f), 0x72);
        // CB 36 00B3
        gbc.setState(0x8e09, 0xbb8f, 0x3410, 0x8d30, 0x9773, 0x948f, 0x0, 0x1);
        gbc.writeMem(0x8e09, { 0xcb, 0x36 });
        gbc.writeMem(0x948f, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xbb8f);
        EXPECT(gbc.pc(), 0x8e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e09), 0xcb);
        EXPECT(gbc.readMem(0x8e0a), 0x36);
        EXPECT(gbc.readMem(0x948f), 0x5c);
        // CB 36 00B7
        gbc.setState(0x890e, 0xe910, 0xc200, 0x8cae, 0xb25b, 0x828d, 0x0, 0x0);
        gbc.writeMem(0x828d, { 0x52 });
        gbc.writeMem(0x890e, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe910);
        EXPECT(gbc.pc(), 0x8910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x828d), 0x25);
        EXPECT(gbc.readMem(0x890e), 0xcb);
        EXPECT(gbc.readMem(0x890f), 0x36);
        // CB 36 00B8
        gbc.setState(0xa827, 0x268b, 0x4480, 0x8c4c, 0xdcfc, 0xe7ca, 0x1, 0x1);
        gbc.writeMem(0xa827, { 0xcb, 0x36 });
        gbc.writeMem(0xe7ca, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x268b);
        EXPECT(gbc.pc(), 0xa829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa827), 0xcb);
        EXPECT(gbc.readMem(0xa828), 0x36);
        EXPECT(gbc.readMem(0xe7ca), 0x67);
        // CB 36 00BA
        gbc.setState(0x43c7, 0x6cda, 0xd050, 0x698e, 0xf293, 0xd00a, 0x1, 0x0);
        gbc.writeMem(0x43c7, { 0xcb, 0x36 });
        gbc.writeMem(0xd00a, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6cda);
        EXPECT(gbc.pc(), 0x43c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd00a), 0x14);
        // CB 36 00BB
        gbc.setState(0x9442, 0x2653, 0xc650, 0x6cb, 0xe512, 0x5567, 0x1, 0x1);
        gbc.writeMem(0x5567, { 0xaa });
        gbc.writeMem(0x9442, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2653);
        EXPECT(gbc.pc(), 0x9444);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9442), 0xcb);
        EXPECT(gbc.readMem(0x9443), 0x36);
        // CB 36 00BD
        gbc.setState(0x708f, 0xd20f, 0x93a0, 0x204e, 0xb32b, 0x9b7a, 0x1, 0x0);
        gbc.writeMem(0x708f, { 0xcb, 0x36 });
        gbc.writeMem(0x9b7a, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd20f);
        EXPECT(gbc.pc(), 0x7091);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b7a), 0xa);
        // CB 36 00BF
        gbc.setState(0x264c, 0x92f5, 0x9fc0, 0xc436, 0xc53e, 0x9392, 0x1, 0x1);
        gbc.writeMem(0x264c, { 0xcb, 0x36 });
        gbc.writeMem(0x9392, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x92f5);
        EXPECT(gbc.pc(), 0x264e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9392), 0xb1);
        // CB 36 00C1
        gbc.setState(0x5fa9, 0x2042, 0x190, 0x5956, 0x425f, 0xe89a, 0x0, 0x1);
        gbc.writeMem(0x5fa9, { 0xcb, 0x36 });
        gbc.writeMem(0xe89a, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2042);
        EXPECT(gbc.pc(), 0x5fab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe89a), 0xc1);
        // CB 36 00C2
        gbc.setState(0x747, 0x4683, 0x64a0, 0x208b, 0x695d, 0x9dc1, 0x0, 0x0);
        gbc.writeMem(0x747, { 0xcb, 0x36 });
        gbc.writeMem(0x9dc1, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4683);
        EXPECT(gbc.pc(), 0x749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc1), 0xd3);
        // CB 36 00C3
        gbc.setState(0xa327, 0x6386, 0x2ba0, 0x3788, 0xfaf6, 0xfae1, 0x0, 0x0);
        gbc.writeMem(0xa327, { 0xcb, 0x36 });
        gbc.writeMem(0xfae1, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6386);
        EXPECT(gbc.pc(), 0xa329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa327), 0xcb);
        EXPECT(gbc.readMem(0xa328), 0x36);
        EXPECT(gbc.readMem(0xfae1), 0x8);
        // CB 36 00C7
        gbc.setState(0x9ae8, 0xd67c, 0xd340, 0x31d4, 0xce1a, 0xdde5, 0x0, 0x1);
        gbc.writeMem(0x9ae8, { 0xcb, 0x36 });
        gbc.writeMem(0xdde5, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd67c);
        EXPECT(gbc.pc(), 0x9aea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae8), 0xcb);
        EXPECT(gbc.readMem(0x9ae9), 0x36);
        EXPECT(gbc.readMem(0xdde5), 0x47);
        // CB 36 00C9
        gbc.setState(0x2cbe, 0xb753, 0xff60, 0x1eda, 0x3a0, 0xf678, 0x1, 0x1);
        gbc.writeMem(0x2cbe, { 0xcb, 0x36 });
        gbc.writeMem(0xf678, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb753);
        EXPECT(gbc.pc(), 0x2cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf678), 0xf8);
        // CB 36 00CB
        gbc.setState(0x48ba, 0xc6a2, 0x4f40, 0xb504, 0x4702, 0xd196, 0x1, 0x1);
        gbc.writeMem(0x48ba, { 0xcb, 0x36 });
        gbc.writeMem(0xd196, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc6a2);
        EXPECT(gbc.pc(), 0x48bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd196), 0x6e);
        // CB 36 00CC
        gbc.setState(0x7774, 0x5272, 0x7b90, 0x443d, 0x217e, 0xb4cd, 0x0, 0x1);
        gbc.writeMem(0x7774, { 0xcb, 0x36 });
        gbc.writeMem(0xb4cd, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5272);
        EXPECT(gbc.pc(), 0x7776);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4cd), 0xdd);
        // CB 36 00D1
        gbc.setState(0x95ca, 0x5e2a, 0x94b0, 0x44c1, 0x3020, 0x9b00, 0x1, 0x1);
        gbc.writeMem(0x95ca, { 0xcb, 0x36 });
        gbc.writeMem(0x9b00, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5e2a);
        EXPECT(gbc.pc(), 0x95cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ca), 0xcb);
        EXPECT(gbc.readMem(0x95cb), 0x36);
        EXPECT(gbc.readMem(0x9b00), 0x97);
        // CB 36 00D2
        gbc.setState(0x7993, 0xc4a1, 0xcbe0, 0x5f3f, 0xcf50, 0xfeab, 0x0, 0x0);
        gbc.writeMem(0x7993, { 0xcb, 0x36 });
        gbc.writeMem(0xfeab, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc4a1);
        EXPECT(gbc.pc(), 0x7995);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfeab), 0xbc);
        // CB 36 00D3
        gbc.setState(0x410a, 0xd5e0, 0x4cf0, 0xac76, 0xeca3, 0xf1b2, 0x1, 0x0);
        gbc.writeMem(0x410a, { 0xcb, 0x36 });
        gbc.writeMem(0xf1b2, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd5e0);
        EXPECT(gbc.pc(), 0x410c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf1b2), 0x46);
        // CB 36 00D4
        gbc.setState(0xd723, 0xd576, 0x1f10, 0xb7dc, 0x430e, 0x88ae, 0x0, 0x0);
        gbc.writeMem(0x88ae, { 0xb1 });
        gbc.writeMem(0xd723, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd576);
        EXPECT(gbc.pc(), 0xd725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ae), 0x1b);
        EXPECT(gbc.readMem(0xd723), 0xcb);
        EXPECT(gbc.readMem(0xd724), 0x36);
        // CB 36 00D7
        gbc.setState(0xc93a, 0x4471, 0xcaf0, 0xbb8f, 0x2ba1, 0x7a9f, 0x1, 0x1);
        gbc.writeMem(0x7a9f, { 0x33 });
        gbc.writeMem(0xc93a, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4471);
        EXPECT(gbc.pc(), 0xc93c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc93a), 0xcb);
        EXPECT(gbc.readMem(0xc93b), 0x36);
        // CB 36 00D9
        gbc.setState(0x3229, 0xb249, 0xd740, 0xd64b, 0xd233, 0xa375, 0x1, 0x0);
        gbc.writeMem(0x3229, { 0xcb, 0x36 });
        gbc.writeMem(0xa375, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb249);
        EXPECT(gbc.pc(), 0x322b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa375), 0x1e);
        // CB 36 00DC
        gbc.setState(0x3f9f, 0x704a, 0x3330, 0xe209, 0x40d4, 0xba17, 0x1, 0x0);
        gbc.writeMem(0x3f9f, { 0xcb, 0x36 });
        gbc.writeMem(0xba17, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x704a);
        EXPECT(gbc.pc(), 0x3fa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba17), 0xca);
        // CB 36 00E2
        gbc.setState(0x30b9, 0x178e, 0x8b50, 0xd617, 0x282b, 0x9d45, 0x0, 0x0);
        gbc.writeMem(0x30b9, { 0xcb, 0x36 });
        gbc.writeMem(0x9d45, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x178e);
        EXPECT(gbc.pc(), 0x30bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d45), 0xaf);
        // CB 36 00E4
        gbc.setState(0x1991, 0x6d1, 0xfda0, 0x86b5, 0xf0ac, 0xd279, 0x0, 0x0);
        gbc.writeMem(0x1991, { 0xcb, 0x36 });
        gbc.writeMem(0xd279, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6d1);
        EXPECT(gbc.pc(), 0x1993);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd279), 0xb9);
        // CB 36 00E5
        gbc.setState(0x4df0, 0xc5dd, 0x67a0, 0x5d7e, 0x7c61, 0x8c0e, 0x0, 0x1);
        gbc.writeMem(0x4df0, { 0xcb, 0x36 });
        gbc.writeMem(0x8c0e, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc5dd);
        EXPECT(gbc.pc(), 0x4df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c0e), 0x21);
        // CB 36 00E8
        gbc.setState(0x1c20, 0x43f1, 0xe800, 0x4001, 0x8bc, 0x805c, 0x0, 0x0);
        gbc.writeMem(0x1c20, { 0xcb, 0x36 });
        gbc.writeMem(0x805c, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x43f1);
        EXPECT(gbc.pc(), 0x1c22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x805c), 0xa0);
        // CB 36 00E9
        gbc.setState(0x3245, 0x5, 0x4a10, 0x2283, 0x9b10, 0xf9e0, 0x1, 0x0);
        gbc.writeMem(0x3245, { 0xcb, 0x36 });
        gbc.writeMem(0xf9e0, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5);
        EXPECT(gbc.pc(), 0x3247);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9e0), 0xdd);
        // CB 36 00EE
        gbc.setState(0x74fb, 0x18e2, 0x4770, 0x1d81, 0x160b, 0xffc8, 0x1, 0x0);
        gbc.writeMem(0x74fb, { 0xcb, 0x36 });
        gbc.writeMem(0xffc8, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x18e2);
        EXPECT(gbc.pc(), 0x74fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc8), 0xa7);
        // CB 36 00EF
        gbc.setState(0x9bcb, 0x9390, 0x8250, 0xf5b1, 0xfd18, 0x6c3f, 0x0, 0x1);
        gbc.writeMem(0x6c3f, { 0x22 });
        gbc.writeMem(0x9bcb, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9390);
        EXPECT(gbc.pc(), 0x9bcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bcb), 0xcb);
        EXPECT(gbc.readMem(0x9bcc), 0x36);
        // CB 36 00F0
        gbc.setState(0x61fa, 0x730b, 0x8ca0, 0x37d9, 0x3f2, 0x34dd, 0x1, 0x1);
        gbc.writeMem(0x34dd, { 0x22 });
        gbc.writeMem(0x61fa, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x730b);
        EXPECT(gbc.pc(), 0x61fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 00F1
        gbc.setState(0x15e3, 0x6077, 0x4a40, 0x7e34, 0xe9c6, 0xb026, 0x0, 0x1);
        gbc.writeMem(0x15e3, { 0xcb, 0x36 });
        gbc.writeMem(0xb026, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6077);
        EXPECT(gbc.pc(), 0x15e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb026), 0x28);
        // CB 36 00F3
        gbc.setState(0xb3d6, 0xc9f6, 0xeb50, 0xf96c, 0x3561, 0x9eb4, 0x1, 0x0);
        gbc.writeMem(0x9eb4, { 0x7d });
        gbc.writeMem(0xb3d6, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc9f6);
        EXPECT(gbc.pc(), 0xb3d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb4), 0xd7);
        EXPECT(gbc.readMem(0xb3d6), 0xcb);
        EXPECT(gbc.readMem(0xb3d7), 0x36);
        // CB 36 00F4
        gbc.setState(0x58c9, 0xfcdd, 0xc2d0, 0x2d54, 0xf517, 0xa410, 0x1, 0x1);
        gbc.writeMem(0x58c9, { 0xcb, 0x36 });
        gbc.writeMem(0xa410, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xfcdd);
        EXPECT(gbc.pc(), 0x58cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa410), 0xc9);
        // CB 36 00F5
        gbc.setState(0xd28f, 0x375d, 0x3290, 0x11b2, 0x2c79, 0xb19, 0x1, 0x0);
        gbc.writeMem(0xb19, { 0xaa });
        gbc.writeMem(0xd28f, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x375d);
        EXPECT(gbc.pc(), 0xd291);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd28f), 0xcb);
        EXPECT(gbc.readMem(0xd290), 0x36);
        // CB 36 00F6
        gbc.setState(0x1125, 0x1434, 0xedc0, 0x5981, 0xabd9, 0xaaad, 0x0, 0x1);
        gbc.writeMem(0x1125, { 0xcb, 0x36 });
        gbc.writeMem(0xaaad, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1434);
        EXPECT(gbc.pc(), 0x1127);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaad), 0x4a);
        // CB 36 00F7
        gbc.setState(0x3775, 0x1fb, 0x38d0, 0x53b6, 0x9318, 0xd8dd, 0x1, 0x0);
        gbc.writeMem(0x3775, { 0xcb, 0x36 });
        gbc.writeMem(0xd8dd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1fb);
        EXPECT(gbc.pc(), 0x3777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8dd), 0x74);
        // CB 36 00F8
        gbc.setState(0xc1dd, 0x2880, 0x87a0, 0x2811, 0x8620, 0xffd7, 0x1, 0x0);
        gbc.writeMem(0xc1dd, { 0xcb, 0x36 });
        gbc.writeMem(0xffd7, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2880);
        EXPECT(gbc.pc(), 0xc1df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1dd), 0xcb);
        EXPECT(gbc.readMem(0xc1de), 0x36);
        EXPECT(gbc.readMem(0xffd7), 0x69);
        // CB 36 00FB
        gbc.setState(0xb6fc, 0x6178, 0x7970, 0x5198, 0x1955, 0xd6cb, 0x0, 0x0);
        gbc.writeMem(0xb6fc, { 0xcb, 0x36 });
        gbc.writeMem(0xd6cb, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6178);
        EXPECT(gbc.pc(), 0xb6fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6fc), 0xcb);
        EXPECT(gbc.readMem(0xb6fd), 0x36);
        EXPECT(gbc.readMem(0xd6cb), 0x33);
        // CB 36 00FF
        gbc.setState(0xd69, 0x5a9c, 0xbe20, 0x6bf3, 0xa114, 0xab59, 0x1, 0x1);
        gbc.writeMem(0xd69, { 0xcb, 0x36 });
        gbc.writeMem(0xab59, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5a9c);
        EXPECT(gbc.pc(), 0xd6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab59), 0x5e);
        // CB 36 0100
        gbc.setState(0x4b1a, 0xeab8, 0x37b0, 0xbcbd, 0x5de4, 0x91c1, 0x0, 0x0);
        gbc.writeMem(0x4b1a, { 0xcb, 0x36 });
        gbc.writeMem(0x91c1, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xeab8);
        EXPECT(gbc.pc(), 0x4b1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c1), 0x94);
        // CB 36 0101
        gbc.setState(0x1697, 0xa738, 0xf820, 0x4006, 0xadc9, 0xf183, 0x0, 0x1);
        gbc.writeMem(0x1697, { 0xcb, 0x36 });
        gbc.writeMem(0xf183, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa738);
        EXPECT(gbc.pc(), 0x1699);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf183), 0xd2);
        // CB 36 0105
        gbc.setState(0xc5a9, 0x309c, 0xbbc0, 0xa9f8, 0x347c, 0xa373, 0x1, 0x0);
        gbc.writeMem(0xa373, { 0xef });
        gbc.writeMem(0xc5a9, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x309c);
        EXPECT(gbc.pc(), 0xc5ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa373), 0xfe);
        EXPECT(gbc.readMem(0xc5a9), 0xcb);
        EXPECT(gbc.readMem(0xc5aa), 0x36);
        // CB 36 0106
        gbc.setState(0x8bb6, 0xd80d, 0xf7e0, 0x6b3f, 0xd30e, 0xd97c, 0x0, 0x1);
        gbc.writeMem(0x8bb6, { 0xcb, 0x36 });
        gbc.writeMem(0xd97c, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd80d);
        EXPECT(gbc.pc(), 0x8bb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb6), 0xcb);
        EXPECT(gbc.readMem(0x8bb7), 0x36);
        EXPECT(gbc.readMem(0xd97c), 0x3);
        // CB 36 0107
        gbc.setState(0xa41e, 0x768e, 0xd840, 0xb21f, 0x7d35, 0xdd8a, 0x1, 0x1);
        gbc.writeMem(0xa41e, { 0xcb, 0x36 });
        gbc.writeMem(0xdd8a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x768e);
        EXPECT(gbc.pc(), 0xa420);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa41e), 0xcb);
        EXPECT(gbc.readMem(0xa41f), 0x36);
        EXPECT(gbc.readMem(0xdd8a), 0x3b);
        // CB 36 0109
        gbc.setState(0x4af3, 0xb566, 0x4910, 0xe8fb, 0xf9c9, 0xb585, 0x1, 0x1);
        gbc.writeMem(0x4af3, { 0xcb, 0x36 });
        gbc.writeMem(0xb585, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb566);
        EXPECT(gbc.pc(), 0x4af5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb585), 0x65);
        // CB 36 0112
        gbc.setState(0x5fcf, 0x27d6, 0x8560, 0x8cac, 0x10ae, 0xecb9, 0x1, 0x1);
        gbc.writeMem(0x5fcf, { 0xcb, 0x36 });
        gbc.writeMem(0xecb9, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x27d6);
        EXPECT(gbc.pc(), 0x5fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb9), 0xc1);
        // CB 36 0113
        gbc.setState(0xbc7, 0x47be, 0xa770, 0xcc71, 0x2018, 0x968a, 0x1, 0x0);
        gbc.writeMem(0xbc7, { 0xcb, 0x36 });
        gbc.writeMem(0x968a, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x47be);
        EXPECT(gbc.pc(), 0xbc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x968a), 0x33);
        // CB 36 0114
        gbc.setState(0x15da, 0xfa68, 0xce00, 0xe46b, 0x7e6c, 0xfbf9, 0x1, 0x0);
        gbc.writeMem(0x15da, { 0xcb, 0x36 });
        gbc.writeMem(0xfbf9, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfa68);
        EXPECT(gbc.pc(), 0x15dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfbf9), 0x47);
        // CB 36 0115
        gbc.setState(0x5961, 0xf04a, 0x9c80, 0xe315, 0xf156, 0x9fe2, 0x1, 0x0);
        gbc.writeMem(0x5961, { 0xcb, 0x36 });
        gbc.writeMem(0x9fe2, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf04a);
        EXPECT(gbc.pc(), 0x5963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fe2), 0xe3);
        // CB 36 0116
        gbc.setState(0xe3c4, 0x41e1, 0xd070, 0xc7e3, 0xac65, 0xe58d, 0x1, 0x1);
        gbc.writeMem(0xe3c4, { 0xcb, 0x36 });
        gbc.writeMem(0xe58d, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x41e1);
        EXPECT(gbc.pc(), 0xe3c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c4), 0xcb);
        EXPECT(gbc.readMem(0xe3c5), 0x36);
        EXPECT(gbc.readMem(0xe58d), 0x6e);
        // CB 36 0118
        gbc.setState(0xcc16, 0xa6a2, 0x4050, 0xdbeb, 0xd249, 0xa8ba, 0x0, 0x1);
        gbc.writeMem(0xa8ba, { 0x50 });
        gbc.writeMem(0xcc16, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa6a2);
        EXPECT(gbc.pc(), 0xcc18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ba), 0x5);
        EXPECT(gbc.readMem(0xcc16), 0xcb);
        EXPECT(gbc.readMem(0xcc17), 0x36);
        // CB 36 011C
        gbc.setState(0x4301, 0x1cc9, 0x4a00, 0xb479, 0xc081, 0xf070, 0x0, 0x0);
        gbc.writeMem(0x4301, { 0xcb, 0x36 });
        gbc.writeMem(0xf070, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1cc9);
        EXPECT(gbc.pc(), 0x4303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf070), 0x90);
        // CB 36 011F
        gbc.setState(0x342a, 0xf122, 0x2f10, 0xd787, 0xc78a, 0xd6e3, 0x1, 0x1);
        gbc.writeMem(0x342a, { 0xcb, 0x36 });
        gbc.writeMem(0xd6e3, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf122);
        EXPECT(gbc.pc(), 0x342c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e3), 0xee);
        // CB 36 0120
        gbc.setState(0xc7a0, 0x7f53, 0x3220, 0xeb18, 0xbff5, 0xd524, 0x0, 0x0);
        gbc.writeMem(0xc7a0, { 0xcb, 0x36 });
        gbc.writeMem(0xd524, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7f53);
        EXPECT(gbc.pc(), 0xc7a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7a0), 0xcb);
        EXPECT(gbc.readMem(0xc7a1), 0x36);
        EXPECT(gbc.readMem(0xd524), 0x20);
        // CB 36 0121
        gbc.setState(0xbf4c, 0xeede, 0x24e0, 0xfac9, 0x6581, 0xcdd3, 0x0, 0x0);
        gbc.writeMem(0xbf4c, { 0xcb, 0x36 });
        gbc.writeMem(0xcdd3, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xeede);
        EXPECT(gbc.pc(), 0xbf4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf4c), 0xcb);
        EXPECT(gbc.readMem(0xbf4d), 0x36);
        EXPECT(gbc.readMem(0xcdd3), 0xa4);
        // CB 36 0122
        gbc.setState(0x8c94, 0x643f, 0xde00, 0xe0d3, 0xa6af, 0xf301, 0x1, 0x0);
        gbc.writeMem(0x8c94, { 0xcb, 0x36 });
        gbc.writeMem(0xf301, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x643f);
        EXPECT(gbc.pc(), 0x8c96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c94), 0xcb);
        EXPECT(gbc.readMem(0x8c95), 0x36);
        EXPECT(gbc.readMem(0xf301), 0x96);
        // CB 36 0127
        gbc.setState(0xe449, 0x3b6b, 0xcde0, 0x461c, 0x13e1, 0x8c09, 0x0, 0x0);
        gbc.writeMem(0x8c09, { 0x16 });
        gbc.writeMem(0xe449, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3b6b);
        EXPECT(gbc.pc(), 0xe44b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c09), 0x61);
        EXPECT(gbc.readMem(0xe449), 0xcb);
        EXPECT(gbc.readMem(0xe44a), 0x36);
        // CB 36 0128
        gbc.setState(0x4b2e, 0x2ac7, 0x5770, 0x896c, 0x138e, 0x36ce, 0x1, 0x0);
        gbc.writeMem(0x36ce, { 0x33 });
        gbc.writeMem(0x4b2e, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2ac7);
        EXPECT(gbc.pc(), 0x4b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0129
        gbc.setState(0x8ba1, 0xaf40, 0xaf30, 0xa8ca, 0xf69b, 0xac30, 0x0, 0x0);
        gbc.writeMem(0x8ba1, { 0xcb, 0x36 });
        gbc.writeMem(0xac30, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xaf40);
        EXPECT(gbc.pc(), 0x8ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ba1), 0xcb);
        EXPECT(gbc.readMem(0x8ba2), 0x36);
        EXPECT(gbc.readMem(0xac30), 0xa4);
        // CB 36 012B
        gbc.setState(0xb2f8, 0xa7d9, 0x7e0, 0xb22d, 0x928b, 0x839b, 0x0, 0x0);
        gbc.writeMem(0x839b, { 0xa2 });
        gbc.writeMem(0xb2f8, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa7d9);
        EXPECT(gbc.pc(), 0xb2fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x839b), 0x2a);
        EXPECT(gbc.readMem(0xb2f8), 0xcb);
        EXPECT(gbc.readMem(0xb2f9), 0x36);
        // CB 36 012C
        gbc.setState(0xcb1c, 0x2bf3, 0x8d80, 0x2309, 0x53a6, 0x9ed5, 0x1, 0x0);
        gbc.writeMem(0x9ed5, { 0xb0 });
        gbc.writeMem(0xcb1c, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2bf3);
        EXPECT(gbc.pc(), 0xcb1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed5), 0xb);
        EXPECT(gbc.readMem(0xcb1c), 0xcb);
        EXPECT(gbc.readMem(0xcb1d), 0x36);
        // CB 36 012D
        gbc.setState(0x1488, 0x90b5, 0xa6b0, 0x24dc, 0x778c, 0x153f, 0x0, 0x0);
        gbc.writeMem(0x1488, { 0xcb, 0x36 });
        gbc.writeMem(0x153f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x90b5);
        EXPECT(gbc.pc(), 0x148a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 012F
        gbc.setState(0x6a6, 0x62f9, 0xfda0, 0x399d, 0x1b97, 0xc25f, 0x0, 0x0);
        gbc.writeMem(0x6a6, { 0xcb, 0x36 });
        gbc.writeMem(0xc25f, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x62f9);
        EXPECT(gbc.pc(), 0x6a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25f), 0xe7);
        // CB 36 0131
        gbc.setState(0x93b4, 0x5639, 0x4940, 0xcf49, 0x4290, 0xc31c, 0x0, 0x1);
        gbc.writeMem(0x93b4, { 0xcb, 0x36 });
        gbc.writeMem(0xc31c, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5639);
        EXPECT(gbc.pc(), 0x93b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93b4), 0xcb);
        EXPECT(gbc.readMem(0x93b5), 0x36);
        EXPECT(gbc.readMem(0xc31c), 0x6);
        // CB 36 0132
        gbc.setState(0x2d43, 0x1b08, 0xaaf0, 0xe64c, 0xfb8f, 0xd4c7, 0x1, 0x1);
        gbc.writeMem(0x2d43, { 0xcb, 0x36 });
        gbc.writeMem(0xd4c7, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1b08);
        EXPECT(gbc.pc(), 0x2d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c7), 0xec);
        // CB 36 0134
        gbc.setState(0xb72b, 0x22d5, 0xc350, 0xad58, 0xb241, 0xae56, 0x1, 0x0);
        gbc.writeMem(0xae56, { 0x78 });
        gbc.writeMem(0xb72b, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x22d5);
        EXPECT(gbc.pc(), 0xb72d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae56), 0x87);
        EXPECT(gbc.readMem(0xb72b), 0xcb);
        EXPECT(gbc.readMem(0xb72c), 0x36);
        // CB 36 0135
        gbc.setState(0x43ec, 0xc5d3, 0xd0, 0x8e91, 0xc95f, 0xddab, 0x0, 0x0);
        gbc.writeMem(0x43ec, { 0xcb, 0x36 });
        gbc.writeMem(0xddab, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc5d3);
        EXPECT(gbc.pc(), 0x43ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddab), 0x8d);
        // CB 36 0136
        gbc.setState(0x27ff, 0x5f5a, 0xfa20, 0x2456, 0x645, 0xcd15, 0x1, 0x1);
        gbc.writeMem(0x27ff, { 0xcb, 0x36 });
        gbc.writeMem(0xcd15, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5f5a);
        EXPECT(gbc.pc(), 0x2801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd15), 0x66);
        // CB 36 0137
        gbc.setState(0xddca, 0xc011, 0x1790, 0xc153, 0x4209, 0x269f, 0x0, 0x1);
        gbc.writeMem(0x269f, { 0xbb });
        gbc.writeMem(0xddca, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc011);
        EXPECT(gbc.pc(), 0xddcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddca), 0xcb);
        EXPECT(gbc.readMem(0xddcb), 0x36);
        // CB 36 0138
        gbc.setState(0xbea8, 0x9b9f, 0x2210, 0xfcc5, 0x15e6, 0x93a5, 0x1, 0x0);
        gbc.writeMem(0x93a5, { 0x54 });
        gbc.writeMem(0xbea8, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9b9f);
        EXPECT(gbc.pc(), 0xbeaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93a5), 0x45);
        EXPECT(gbc.readMem(0xbea8), 0xcb);
        EXPECT(gbc.readMem(0xbea9), 0x36);
        // CB 36 013A
        gbc.setState(0x8199, 0xf51, 0xaa80, 0xa7a9, 0xa5ed, 0xb355, 0x0, 0x0);
        gbc.writeMem(0x8199, { 0xcb, 0x36 });
        gbc.writeMem(0xb355, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf51);
        EXPECT(gbc.pc(), 0x819b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8199), 0xcb);
        EXPECT(gbc.readMem(0x819a), 0x36);
        EXPECT(gbc.readMem(0xb355), 0xbe);
        // CB 36 013C
        gbc.setState(0x9191, 0x2dcb, 0x2c90, 0xb425, 0xf950, 0xe3db, 0x1, 0x1);
        gbc.writeMem(0x9191, { 0xcb, 0x36 });
        gbc.writeMem(0xe3db, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2dcb);
        EXPECT(gbc.pc(), 0x9193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9191), 0xcb);
        EXPECT(gbc.readMem(0x9192), 0x36);
        EXPECT(gbc.readMem(0xe3db), 0x7a);
        // CB 36 0140
        gbc.setState(0xeba3, 0xea1c, 0x5300, 0xe203, 0x2971, 0x664d, 0x1, 0x1);
        gbc.writeMem(0x664d, { 0xcc });
        gbc.writeMem(0xeba3, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xea1c);
        EXPECT(gbc.pc(), 0xeba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeba3), 0xcb);
        EXPECT(gbc.readMem(0xeba4), 0x36);
        // CB 36 0144
        gbc.setState(0xad8f, 0x23ab, 0x57a0, 0x85e1, 0x7a3e, 0xa41b, 0x0, 0x1);
        gbc.writeMem(0xa41b, { 0x86 });
        gbc.writeMem(0xad8f, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x23ab);
        EXPECT(gbc.pc(), 0xad91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa41b), 0x68);
        EXPECT(gbc.readMem(0xad8f), 0xcb);
        EXPECT(gbc.readMem(0xad90), 0x36);
        // CB 36 0147
        gbc.setState(0x9574, 0x3ffc, 0x6890, 0x7dc3, 0x46c5, 0xc437, 0x1, 0x1);
        gbc.writeMem(0x9574, { 0xcb, 0x36 });
        gbc.writeMem(0xc437, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3ffc);
        EXPECT(gbc.pc(), 0x9576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9574), 0xcb);
        EXPECT(gbc.readMem(0x9575), 0x36);
        EXPECT(gbc.readMem(0xc437), 0x3c);
        // CB 36 0148
        gbc.setState(0x30b0, 0x27d, 0xe3c0, 0x16fa, 0xcd6f, 0x82e3, 0x1, 0x0);
        gbc.writeMem(0x30b0, { 0xcb, 0x36 });
        gbc.writeMem(0x82e3, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x27d);
        EXPECT(gbc.pc(), 0x30b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82e3), 0xe7);
        // CB 36 014A
        gbc.setState(0x1afd, 0x8761, 0x15f0, 0x2d11, 0x7d14, 0xd2c6, 0x1, 0x0);
        gbc.writeMem(0x1afd, { 0xcb, 0x36 });
        gbc.writeMem(0xd2c6, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8761);
        EXPECT(gbc.pc(), 0x1aff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2c6), 0x13);
        // CB 36 014C
        gbc.setState(0x3d5e, 0x930e, 0xfb60, 0x3306, 0x5f7c, 0xe567, 0x0, 0x1);
        gbc.writeMem(0x3d5e, { 0xcb, 0x36 });
        gbc.writeMem(0xe567, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x930e);
        EXPECT(gbc.pc(), 0x3d60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe567), 0xb2);
        // CB 36 014D
        gbc.setState(0x9721, 0x9a51, 0xf870, 0xe21, 0x2074, 0xe390, 0x1, 0x0);
        gbc.writeMem(0x9721, { 0xcb, 0x36 });
        gbc.writeMem(0xe390, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9a51);
        EXPECT(gbc.pc(), 0x9723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9721), 0xcb);
        EXPECT(gbc.readMem(0x9722), 0x36);
        EXPECT(gbc.readMem(0xe390), 0xb3);
        // CB 36 014F
        gbc.setState(0x86a8, 0xca13, 0xf620, 0xe022, 0x19e2, 0xda46, 0x1, 0x1);
        gbc.writeMem(0x86a8, { 0xcb, 0x36 });
        gbc.writeMem(0xda46, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xca13);
        EXPECT(gbc.pc(), 0x86aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a8), 0xcb);
        EXPECT(gbc.readMem(0x86a9), 0x36);
        EXPECT(gbc.readMem(0xda46), 0xdc);
        // CB 36 0151
        gbc.setState(0x7e23, 0x4f54, 0x9430, 0x9cf3, 0x5cdb, 0xc758, 0x1, 0x0);
        gbc.writeMem(0x7e23, { 0xcb, 0x36 });
        gbc.writeMem(0xc758, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4f54);
        EXPECT(gbc.pc(), 0x7e25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc758), 0xef);
        // CB 36 0152
        gbc.setState(0xd436, 0xf306, 0x8ae0, 0x469d, 0x3e0f, 0xba99, 0x1, 0x0);
        gbc.writeMem(0xba99, { 0xb7 });
        gbc.writeMem(0xd436, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf306);
        EXPECT(gbc.pc(), 0xd438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba99), 0x7b);
        EXPECT(gbc.readMem(0xd436), 0xcb);
        EXPECT(gbc.readMem(0xd437), 0x36);
        // CB 36 0154
        gbc.setState(0x6409, 0x463b, 0x1fb0, 0xa6de, 0x5daf, 0xa1be, 0x0, 0x0);
        gbc.writeMem(0x6409, { 0xcb, 0x36 });
        gbc.writeMem(0xa1be, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x463b);
        EXPECT(gbc.pc(), 0x640b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1be), 0x19);
        // CB 36 0157
        gbc.setState(0x2878, 0xc823, 0x4c0, 0x4f0e, 0x208b, 0xab36, 0x0, 0x0);
        gbc.writeMem(0x2878, { 0xcb, 0x36 });
        gbc.writeMem(0xab36, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc823);
        EXPECT(gbc.pc(), 0x287a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab36), 0x4a);
        // CB 36 015A
        gbc.setState(0x8a54, 0xfa39, 0x6d30, 0xdeb4, 0xe29e, 0x98a3, 0x1, 0x1);
        gbc.writeMem(0x8a54, { 0xcb, 0x36 });
        gbc.writeMem(0x98a3, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xfa39);
        EXPECT(gbc.pc(), 0x8a56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a54), 0xcb);
        EXPECT(gbc.readMem(0x8a55), 0x36);
        EXPECT(gbc.readMem(0x98a3), 0x44);
        // CB 36 015B
        gbc.setState(0x1f44, 0x5782, 0x87e0, 0x5848, 0x8323, 0xf2a2, 0x0, 0x0);
        gbc.writeMem(0x1f44, { 0xcb, 0x36 });
        gbc.writeMem(0xf2a2, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5782);
        EXPECT(gbc.pc(), 0x1f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2a2), 0xd2);
        // CB 36 015D
        gbc.setState(0x3889, 0xe910, 0xd90, 0xe931, 0x10bf, 0x92fc, 0x1, 0x0);
        gbc.writeMem(0x3889, { 0xcb, 0x36 });
        gbc.writeMem(0x92fc, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe910);
        EXPECT(gbc.pc(), 0x388b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92fc), 0x7e);
        // CB 36 015E
        gbc.setState(0xc52d, 0xf148, 0x2030, 0x3fc8, 0x402c, 0xca8b, 0x0, 0x0);
        gbc.writeMem(0xc52d, { 0xcb, 0x36 });
        gbc.writeMem(0xca8b, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf148);
        EXPECT(gbc.pc(), 0xc52f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc52d), 0xcb);
        EXPECT(gbc.readMem(0xc52e), 0x36);
        EXPECT(gbc.readMem(0xca8b), 0xad);
        // CB 36 0161
        gbc.setState(0x7fe2, 0x5205, 0xdff0, 0x1276, 0x2f3f, 0x82bb, 0x1, 0x1);
        gbc.writeMem(0x7fe2, { 0xcb, 0x36 });
        gbc.writeMem(0x82bb, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5205);
        EXPECT(gbc.pc(), 0x7fe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82bb), 0x12);
        // CB 36 0162
        gbc.setState(0xb6f2, 0xdb34, 0x76d0, 0xfac9, 0xae53, 0xb0c4, 0x0, 0x1);
        gbc.writeMem(0xb0c4, { 0x1e });
        gbc.writeMem(0xb6f2, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xdb34);
        EXPECT(gbc.pc(), 0xb6f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c4), 0xe1);
        EXPECT(gbc.readMem(0xb6f2), 0xcb);
        EXPECT(gbc.readMem(0xb6f3), 0x36);
        // CB 36 0163
        gbc.setState(0xc1fa, 0x5af0, 0x3e40, 0x2414, 0xea0f, 0xcdb9, 0x1, 0x0);
        gbc.writeMem(0xc1fa, { 0xcb, 0x36 });
        gbc.writeMem(0xcdb9, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5af0);
        EXPECT(gbc.pc(), 0xc1fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1fa), 0xcb);
        EXPECT(gbc.readMem(0xc1fb), 0x36);
        EXPECT(gbc.readMem(0xcdb9), 0x81);
        // CB 36 0164
        gbc.setState(0x5e4d, 0xcd98, 0xd610, 0xee52, 0x872c, 0x3ca5, 0x1, 0x0);
        gbc.writeMem(0x3ca5, { 0x77 });
        gbc.writeMem(0x5e4d, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcd98);
        EXPECT(gbc.pc(), 0x5e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0165
        gbc.setState(0x201e, 0xe6c2, 0xbe0, 0x7b65, 0x2cbe, 0xed9f, 0x0, 0x1);
        gbc.writeMem(0x201e, { 0xcb, 0x36 });
        gbc.writeMem(0xed9f, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe6c2);
        EXPECT(gbc.pc(), 0x2020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9f), 0xa9);
        // CB 36 0166
        gbc.setState(0x902b, 0xbfc2, 0x6780, 0x345b, 0x8879, 0x9d85, 0x0, 0x1);
        gbc.writeMem(0x902b, { 0xcb, 0x36 });
        gbc.writeMem(0x9d85, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xbfc2);
        EXPECT(gbc.pc(), 0x902d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x902b), 0xcb);
        EXPECT(gbc.readMem(0x902c), 0x36);
        EXPECT(gbc.readMem(0x9d85), 0x4c);
        // CB 36 016B
        gbc.setState(0x806a, 0x94b3, 0xd970, 0x733e, 0xb9c9, 0xf577, 0x0, 0x1);
        gbc.writeMem(0x806a, { 0xcb, 0x36 });
        gbc.writeMem(0xf577, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x94b3);
        EXPECT(gbc.pc(), 0x806c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x806a), 0xcb);
        EXPECT(gbc.readMem(0x806b), 0x36);
        EXPECT(gbc.readMem(0xf577), 0x5c);
        // CB 36 016D
        gbc.setState(0xdd0a, 0xd032, 0xb4d0, 0xb687, 0xebc, 0xef9c, 0x0, 0x0);
        gbc.writeMem(0xdd0a, { 0xcb, 0x36 });
        gbc.writeMem(0xef9c, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd032);
        EXPECT(gbc.pc(), 0xdd0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd0a), 0xcb);
        EXPECT(gbc.readMem(0xdd0b), 0x36);
        EXPECT(gbc.readMem(0xef9c), 0x55);
        // CB 36 016E
        gbc.setState(0x9cb2, 0xd3d2, 0x5790, 0x68d9, 0x535, 0x9547, 0x1, 0x0);
        gbc.writeMem(0x9547, { 0x39 });
        gbc.writeMem(0x9cb2, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd3d2);
        EXPECT(gbc.pc(), 0x9cb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9547), 0x93);
        EXPECT(gbc.readMem(0x9cb2), 0xcb);
        EXPECT(gbc.readMem(0x9cb3), 0x36);
        // CB 36 016F
        gbc.setState(0xaa09, 0x60af, 0xe920, 0x7690, 0xe973, 0x160e, 0x0, 0x0);
        gbc.writeMem(0x160e, { 0xcc });
        gbc.writeMem(0xaa09, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x60af);
        EXPECT(gbc.pc(), 0xaa0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa09), 0xcb);
        EXPECT(gbc.readMem(0xaa0a), 0x36);
        // CB 36 0170
        gbc.setState(0x6d07, 0x457, 0xe480, 0x2229, 0xc51d, 0xe202, 0x0, 0x0);
        gbc.writeMem(0x6d07, { 0xcb, 0x36 });
        gbc.writeMem(0xe202, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x457);
        EXPECT(gbc.pc(), 0x6d09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe202), 0x3a);
        // CB 36 0172
        gbc.setState(0xd2fe, 0xcf3f, 0xd980, 0x3218, 0x5759, 0x8166, 0x0, 0x1);
        gbc.writeMem(0x8166, { 0xb5 });
        gbc.writeMem(0xd2fe, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xcf3f);
        EXPECT(gbc.pc(), 0xd300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8166), 0x5b);
        EXPECT(gbc.readMem(0xd2fe), 0xcb);
        EXPECT(gbc.readMem(0xd2ff), 0x36);
        // CB 36 0174
        gbc.setState(0xa32a, 0x2f1a, 0x3840, 0x39d4, 0x61a8, 0xbf6e, 0x0, 0x1);
        gbc.writeMem(0xa32a, { 0xcb, 0x36 });
        gbc.writeMem(0xbf6e, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2f1a);
        EXPECT(gbc.pc(), 0xa32c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa32a), 0xcb);
        EXPECT(gbc.readMem(0xa32b), 0x36);
        EXPECT(gbc.readMem(0xbf6e), 0xa);
        // CB 36 0175
        gbc.setState(0x7394, 0x125b, 0x15c0, 0xacbc, 0x4677, 0xcc84, 0x0, 0x1);
        gbc.writeMem(0x7394, { 0xcb, 0x36 });
        gbc.writeMem(0xcc84, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x125b);
        EXPECT(gbc.pc(), 0x7396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc84), 0x36);
        // CB 36 0176
        gbc.setState(0x66b0, 0x7309, 0x61b0, 0xd768, 0x43e0, 0xd0fa, 0x0, 0x1);
        gbc.writeMem(0x66b0, { 0xcb, 0x36 });
        gbc.writeMem(0xd0fa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7309);
        EXPECT(gbc.pc(), 0x66b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0fa), 0x3f);
        // CB 36 017B
        gbc.setState(0x8b64, 0xf69f, 0x51a0, 0x349, 0xc5e1, 0xe0b1, 0x1, 0x1);
        gbc.writeMem(0x8b64, { 0xcb, 0x36 });
        gbc.writeMem(0xe0b1, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf69f);
        EXPECT(gbc.pc(), 0x8b66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b64), 0xcb);
        EXPECT(gbc.readMem(0x8b65), 0x36);
        EXPECT(gbc.readMem(0xe0b1), 0x4e);
        // CB 36 017E
        gbc.setState(0x9260, 0x1efa, 0x6ff0, 0x437, 0x53cd, 0xffb5, 0x0, 0x1);
        gbc.writeMem(0x9260, { 0xcb, 0x36 });
        gbc.writeMem(0xffb5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1efa);
        EXPECT(gbc.pc(), 0x9262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9260), 0xcb);
        EXPECT(gbc.readMem(0x9261), 0x36);
        EXPECT(gbc.readMem(0xffb5), 0xb1);
        // CB 36 0181
        gbc.setState(0x3ac9, 0x82e5, 0x9d00, 0xa109, 0xc543, 0xcb52, 0x0, 0x1);
        gbc.writeMem(0x3ac9, { 0xcb, 0x36 });
        gbc.writeMem(0xcb52, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x82e5);
        EXPECT(gbc.pc(), 0x3acb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb52), 0x68);
        // CB 36 0182
        gbc.setState(0xa62d, 0x33db, 0x8a70, 0xeed8, 0x9e16, 0xee81, 0x0, 0x0);
        gbc.writeMem(0xa62d, { 0xcb, 0x36 });
        gbc.writeMem(0xee81, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x33db);
        EXPECT(gbc.pc(), 0xa62f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa62d), 0xcb);
        EXPECT(gbc.readMem(0xa62e), 0x36);
        EXPECT(gbc.readMem(0xee81), 0xd);
        // CB 36 0183
        gbc.setState(0x3060, 0xad53, 0x430, 0x55ec, 0xde6b, 0xc10d, 0x0, 0x0);
        gbc.writeMem(0x3060, { 0xcb, 0x36 });
        gbc.writeMem(0xc10d, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xad53);
        EXPECT(gbc.pc(), 0x3062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc10d), 0x93);
        // CB 36 0184
        gbc.setState(0x49d3, 0xa9ce, 0x46c0, 0x61ce, 0xe8f4, 0x1681, 0x0, 0x0);
        gbc.writeMem(0x1681, { 0x44 });
        gbc.writeMem(0x49d3, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa9ce);
        EXPECT(gbc.pc(), 0x49d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0187
        gbc.setState(0x419c, 0x6d7b, 0x8e60, 0xcef0, 0xd7bd, 0xa1ea, 0x1, 0x0);
        gbc.writeMem(0x419c, { 0xcb, 0x36 });
        gbc.writeMem(0xa1ea, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6d7b);
        EXPECT(gbc.pc(), 0x419e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ea), 0x6f);
        // CB 36 018B
        gbc.setState(0xd385, 0xa649, 0xf300, 0x5a04, 0xb26d, 0xd9c0, 0x0, 0x1);
        gbc.writeMem(0xd385, { 0xcb, 0x36 });
        gbc.writeMem(0xd9c0, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa649);
        EXPECT(gbc.pc(), 0xd387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd385), 0xcb);
        EXPECT(gbc.readMem(0xd386), 0x36);
        EXPECT(gbc.readMem(0xd9c0), 0xe5);
        // CB 36 018C
        gbc.setState(0x351e, 0x19fa, 0xe470, 0xa4fb, 0xc358, 0x91eb, 0x1, 0x1);
        gbc.writeMem(0x351e, { 0xcb, 0x36 });
        gbc.writeMem(0x91eb, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x19fa);
        EXPECT(gbc.pc(), 0x3520);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91eb), 0xb9);
        // CB 36 018E
        gbc.setState(0x5cd5, 0x47f, 0x4a90, 0x9d3c, 0x30a6, 0x954c, 0x1, 0x0);
        gbc.writeMem(0x5cd5, { 0xcb, 0x36 });
        gbc.writeMem(0x954c, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x47f);
        EXPECT(gbc.pc(), 0x5cd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x954c), 0x4e);
        // CB 36 018F
        gbc.setState(0x6361, 0xc350, 0x2510, 0x7111, 0xb2e7, 0xd580, 0x1, 0x0);
        gbc.writeMem(0x6361, { 0xcb, 0x36 });
        gbc.writeMem(0xd580, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc350);
        EXPECT(gbc.pc(), 0x6363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd580), 0xbb);
        // CB 36 0193
        gbc.setState(0xead1, 0x77f6, 0xfa70, 0x1c97, 0xe822, 0xc1b8, 0x0, 0x0);
        gbc.writeMem(0xc1b8, { 0xa9 });
        gbc.writeMem(0xead1, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x77f6);
        EXPECT(gbc.pc(), 0xead3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b8), 0x9a);
        EXPECT(gbc.readMem(0xead1), 0xcb);
        EXPECT(gbc.readMem(0xead2), 0x36);
        // CB 36 0195
        gbc.setState(0x1f9c, 0xc129, 0xf050, 0x44f9, 0xe034, 0x9951, 0x0, 0x0);
        gbc.writeMem(0x1f9c, { 0xcb, 0x36 });
        gbc.writeMem(0x9951, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc129);
        EXPECT(gbc.pc(), 0x1f9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9951), 0xa1);
        // CB 36 0197
        gbc.setState(0xdbe1, 0x5fb7, 0xd930, 0x64b0, 0xbb1a, 0xa4e3, 0x0, 0x1);
        gbc.writeMem(0xa4e3, { 0x22 });
        gbc.writeMem(0xdbe1, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5fb7);
        EXPECT(gbc.pc(), 0xdbe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e3), 0x22);
        EXPECT(gbc.readMem(0xdbe1), 0xcb);
        EXPECT(gbc.readMem(0xdbe2), 0x36);
        // CB 36 0198
        gbc.setState(0x335f, 0x9086, 0xb370, 0x6893, 0xa93d, 0xc01e, 0x1, 0x1);
        gbc.writeMem(0x335f, { 0xcb, 0x36 });
        gbc.writeMem(0xc01e, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9086);
        EXPECT(gbc.pc(), 0x3361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc01e), 0xfc);
        // CB 36 019A
        gbc.setState(0xe12f, 0xda92, 0x8280, 0xae4b, 0x3853, 0xa794, 0x0, 0x0);
        gbc.writeMem(0xa794, { 0x21 });
        gbc.writeMem(0xe12f, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xda92);
        EXPECT(gbc.pc(), 0xe131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa794), 0x12);
        EXPECT(gbc.readMem(0xe12f), 0xcb);
        EXPECT(gbc.readMem(0xe130), 0x36);
        // CB 36 019C
        gbc.setState(0x3fd6, 0xc4c7, 0x86f0, 0x51ea, 0x3a3c, 0xf00a, 0x1, 0x1);
        gbc.writeMem(0x3fd6, { 0xcb, 0x36 });
        gbc.writeMem(0xf00a, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc4c7);
        EXPECT(gbc.pc(), 0x3fd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf00a), 0xf2);
        // CB 36 01A2
        gbc.setState(0xddc9, 0xef6e, 0x8100, 0x4273, 0x2b1b, 0xefea, 0x1, 0x1);
        gbc.writeMem(0xddc9, { 0xcb, 0x36 });
        gbc.writeMem(0xefea, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xef6e);
        EXPECT(gbc.pc(), 0xddcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddc9), 0xcb);
        EXPECT(gbc.readMem(0xddca), 0x36);
        EXPECT(gbc.readMem(0xefea), 0x9d);
        // CB 36 01A5
        gbc.setState(0x49b5, 0x309f, 0x80e0, 0x7162, 0x5321, 0xc7ad, 0x0, 0x0);
        gbc.writeMem(0x49b5, { 0xcb, 0x36 });
        gbc.writeMem(0xc7ad, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x309f);
        EXPECT(gbc.pc(), 0x49b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ad), 0xab);
        // CB 36 01A7
        gbc.setState(0x4867, 0x18c0, 0x1030, 0x70e3, 0x1846, 0x957f, 0x0, 0x1);
        gbc.writeMem(0x4867, { 0xcb, 0x36 });
        gbc.writeMem(0x957f, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x18c0);
        EXPECT(gbc.pc(), 0x4869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957f), 0x6c);
        // CB 36 01A9
        gbc.setState(0x4555, 0xa114, 0x7d60, 0xbc15, 0xecac, 0xb132, 0x1, 0x0);
        gbc.writeMem(0x4555, { 0xcb, 0x36 });
        gbc.writeMem(0xb132, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa114);
        EXPECT(gbc.pc(), 0x4557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb132), 0xda);
        // CB 36 01AB
        gbc.setState(0x6f2b, 0x5ef2, 0x91c0, 0x1f8e, 0xd01e, 0xce1f, 0x1, 0x1);
        gbc.writeMem(0x6f2b, { 0xcb, 0x36 });
        gbc.writeMem(0xce1f, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5ef2);
        EXPECT(gbc.pc(), 0x6f2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce1f), 0x8c);
        // CB 36 01AF
        gbc.setState(0x6da8, 0x139d, 0x56f0, 0x3705, 0x8fa8, 0xd3ac, 0x0, 0x1);
        gbc.writeMem(0x6da8, { 0xcb, 0x36 });
        gbc.writeMem(0xd3ac, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x139d);
        EXPECT(gbc.pc(), 0x6daa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ac), 0xde);
        // CB 36 01B4
        gbc.setState(0xc64b, 0xb6d, 0x24a0, 0x6104, 0x797, 0xa628, 0x1, 0x0);
        gbc.writeMem(0xa628, { 0x4b });
        gbc.writeMem(0xc64b, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb6d);
        EXPECT(gbc.pc(), 0xc64d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa628), 0xb4);
        EXPECT(gbc.readMem(0xc64b), 0xcb);
        EXPECT(gbc.readMem(0xc64c), 0x36);
        // CB 36 01B5
        gbc.setState(0x8bd7, 0x70fc, 0xdcf0, 0xa37f, 0x4826, 0xe587, 0x0, 0x0);
        gbc.writeMem(0x8bd7, { 0xcb, 0x36 });
        gbc.writeMem(0xe587, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x70fc);
        EXPECT(gbc.pc(), 0x8bd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd7), 0xcb);
        EXPECT(gbc.readMem(0x8bd8), 0x36);
        EXPECT(gbc.readMem(0xe587), 0x0);
        // CB 36 01B6
        gbc.setState(0x7abd, 0x2ea1, 0x6a90, 0xad97, 0x783, 0x96d1, 0x1, 0x0);
        gbc.writeMem(0x7abd, { 0xcb, 0x36 });
        gbc.writeMem(0x96d1, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2ea1);
        EXPECT(gbc.pc(), 0x7abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d1), 0xa4);
        // CB 36 01B7
        gbc.setState(0x15e2, 0x9b1f, 0x3cf0, 0xe234, 0x920, 0xdb6e, 0x0, 0x1);
        gbc.writeMem(0x15e2, { 0xcb, 0x36 });
        gbc.writeMem(0xdb6e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9b1f);
        EXPECT(gbc.pc(), 0x15e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb6e), 0xbf);
        // CB 36 01B8
        gbc.setState(0x880d, 0x6491, 0x4a90, 0xaafb, 0x1041, 0xc18e, 0x1, 0x0);
        gbc.writeMem(0x880d, { 0xcb, 0x36 });
        gbc.writeMem(0xc18e, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6491);
        EXPECT(gbc.pc(), 0x880f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x880d), 0xcb);
        EXPECT(gbc.readMem(0x880e), 0x36);
        EXPECT(gbc.readMem(0xc18e), 0x22);
        // CB 36 01BC
        gbc.setState(0xc61f, 0x4452, 0x53f0, 0x72ec, 0x56ae, 0xfc81, 0x0, 0x0);
        gbc.writeMem(0xc61f, { 0xcb, 0x36 });
        gbc.writeMem(0xfc81, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x4452);
        EXPECT(gbc.pc(), 0xc621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61f), 0xcb);
        EXPECT(gbc.readMem(0xc620), 0x36);
        EXPECT(gbc.readMem(0xfc81), 0xe4);
        // CB 36 01BD
        gbc.setState(0x5798, 0x6c8d, 0xb8d0, 0xc867, 0xa97c, 0x8f50, 0x1, 0x1);
        gbc.writeMem(0x5798, { 0xcb, 0x36 });
        gbc.writeMem(0x8f50, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6c8d);
        EXPECT(gbc.pc(), 0x579a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f50), 0xa1);
        // CB 36 01BE
        gbc.setState(0x96e7, 0xdd55, 0x60f0, 0xc13, 0xfb3, 0x9e3b, 0x0, 0x1);
        gbc.writeMem(0x96e7, { 0xcb, 0x36 });
        gbc.writeMem(0x9e3b, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdd55);
        EXPECT(gbc.pc(), 0x96e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e7), 0xcb);
        EXPECT(gbc.readMem(0x96e8), 0x36);
        EXPECT(gbc.readMem(0x9e3b), 0x33);
        // CB 36 01C0
        gbc.setState(0x5ad5, 0x5cb7, 0xc5c0, 0xd21d, 0x9df3, 0xe26c, 0x1, 0x0);
        gbc.writeMem(0x5ad5, { 0xcb, 0x36 });
        gbc.writeMem(0xe26c, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5cb7);
        EXPECT(gbc.pc(), 0x5ad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe26c), 0x20);
        // CB 36 01C1
        gbc.setState(0x661c, 0x21bd, 0x74b0, 0xc25c, 0x1e13, 0xf7a8, 0x1, 0x0);
        gbc.writeMem(0x661c, { 0xcb, 0x36 });
        gbc.writeMem(0xf7a8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x21bd);
        EXPECT(gbc.pc(), 0x661e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf7a8), 0xf3);
        // CB 36 01C2
        gbc.setState(0xef70, 0x55a9, 0x4e50, 0x9310, 0xed10, 0xdb23, 0x1, 0x1);
        gbc.writeMem(0xdb23, { 0x2d });
        gbc.writeMem(0xef70, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x55a9);
        EXPECT(gbc.pc(), 0xef72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb23), 0xd2);
        EXPECT(gbc.readMem(0xef70), 0xcb);
        EXPECT(gbc.readMem(0xef71), 0x36);
        // CB 36 01C3
        gbc.setState(0x1c83, 0xd1d7, 0x6110, 0x5f30, 0x5037, 0xf66e, 0x1, 0x0);
        gbc.writeMem(0x1c83, { 0xcb, 0x36 });
        gbc.writeMem(0xf66e, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd1d7);
        EXPECT(gbc.pc(), 0x1c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf66e), 0xa6);
        // CB 36 01C4
        gbc.setState(0xaa08, 0x8cde, 0xe020, 0x6fc5, 0x8768, 0xc9ac, 0x1, 0x1);
        gbc.writeMem(0xaa08, { 0xcb, 0x36 });
        gbc.writeMem(0xc9ac, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8cde);
        EXPECT(gbc.pc(), 0xaa0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa08), 0xcb);
        EXPECT(gbc.readMem(0xaa09), 0x36);
        EXPECT(gbc.readMem(0xc9ac), 0xa7);
        // CB 36 01C6
        gbc.setState(0x41c9, 0x889c, 0x8320, 0xfdc0, 0xe5ce, 0x936f, 0x1, 0x0);
        gbc.writeMem(0x41c9, { 0xcb, 0x36 });
        gbc.writeMem(0x936f, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x889c);
        EXPECT(gbc.pc(), 0x41cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x936f), 0xd);
        // CB 36 01CB
        gbc.setState(0x21e7, 0x5e6d, 0xfbb0, 0xfad9, 0x309c, 0xdc8a, 0x1, 0x0);
        gbc.writeMem(0x21e7, { 0xcb, 0x36 });
        gbc.writeMem(0xdc8a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5e6d);
        EXPECT(gbc.pc(), 0x21e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc8a), 0x5e);
        // CB 36 01CD
        gbc.setState(0xce48, 0x82bd, 0xdda0, 0x1cc1, 0x2c42, 0xb25e, 0x0, 0x0);
        gbc.writeMem(0xb25e, { 0x6d });
        gbc.writeMem(0xce48, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x82bd);
        EXPECT(gbc.pc(), 0xce4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb25e), 0xd6);
        EXPECT(gbc.readMem(0xce48), 0xcb);
        EXPECT(gbc.readMem(0xce49), 0x36);
        // CB 36 01D0
        gbc.setState(0x3474, 0xf503, 0x72c0, 0x4cb9, 0xccd4, 0xd07e, 0x0, 0x1);
        gbc.writeMem(0x3474, { 0xcb, 0x36 });
        gbc.writeMem(0xd07e, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf503);
        EXPECT(gbc.pc(), 0x3476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd07e), 0x25);
        // CB 36 01D1
        gbc.setState(0x7228, 0x8d4d, 0x4c20, 0x7849, 0x1a08, 0xca0d, 0x1, 0x0);
        gbc.writeMem(0x7228, { 0xcb, 0x36 });
        gbc.writeMem(0xca0d, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8d4d);
        EXPECT(gbc.pc(), 0x722a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca0d), 0xba);
        // CB 36 01D9
        gbc.setState(0x58db, 0xa54e, 0x70a0, 0x9c71, 0x4f6d, 0x8dfd, 0x0, 0x1);
        gbc.writeMem(0x58db, { 0xcb, 0x36 });
        gbc.writeMem(0x8dfd, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa54e);
        EXPECT(gbc.pc(), 0x58dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dfd), 0x4e);
        // CB 36 01DB
        gbc.setState(0x3b65, 0xcf7e, 0xade0, 0x3a1d, 0x7791, 0xcde7, 0x0, 0x1);
        gbc.writeMem(0x3b65, { 0xcb, 0x36 });
        gbc.writeMem(0xcde7, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xcf7e);
        EXPECT(gbc.pc(), 0x3b67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde7), 0x79);
        // CB 36 01DD
        gbc.setState(0x8a63, 0x63be, 0x4930, 0x929, 0x26fe, 0xddd6, 0x1, 0x1);
        gbc.writeMem(0x8a63, { 0xcb, 0x36 });
        gbc.writeMem(0xddd6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x63be);
        EXPECT(gbc.pc(), 0x8a65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a63), 0xcb);
        EXPECT(gbc.readMem(0x8a64), 0x36);
        EXPECT(gbc.readMem(0xddd6), 0x9f);
        // CB 36 01DF
        gbc.setState(0x2e15, 0x805b, 0xd0e0, 0x2b1e, 0x3b27, 0xdae8, 0x0, 0x1);
        gbc.writeMem(0x2e15, { 0xcb, 0x36 });
        gbc.writeMem(0xdae8, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x805b);
        EXPECT(gbc.pc(), 0x2e17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae8), 0x6);
        // CB 36 01E0
        gbc.setState(0x5ca2, 0x9915, 0x63d0, 0x11ec, 0x48af, 0xe5ce, 0x0, 0x1);
        gbc.writeMem(0x5ca2, { 0xcb, 0x36 });
        gbc.writeMem(0xe5ce, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9915);
        EXPECT(gbc.pc(), 0x5ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ce), 0x95);
        // CB 36 01E4
        gbc.setState(0x31aa, 0xb802, 0x3e70, 0x1cb0, 0x2e4e, 0xb129, 0x1, 0x0);
        gbc.writeMem(0x31aa, { 0xcb, 0x36 });
        gbc.writeMem(0xb129, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb802);
        EXPECT(gbc.pc(), 0x31ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb129), 0xe7);
        // CB 36 01E6
        gbc.setState(0xb731, 0x7740, 0xd4f0, 0x79c3, 0xfe53, 0xeb8b, 0x0, 0x1);
        gbc.writeMem(0xb731, { 0xcb, 0x36 });
        gbc.writeMem(0xeb8b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7740);
        EXPECT(gbc.pc(), 0xb733);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb731), 0xcb);
        EXPECT(gbc.readMem(0xb732), 0x36);
        EXPECT(gbc.readMem(0xeb8b), 0x9f);
        // CB 36 01E7
        gbc.setState(0x693e, 0x4dca, 0x8ec0, 0xc4da, 0xc339, 0xbcc6, 0x0, 0x0);
        gbc.writeMem(0x693e, { 0xcb, 0x36 });
        gbc.writeMem(0xbcc6, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4dca);
        EXPECT(gbc.pc(), 0x6940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcc6), 0xaf);
        // CB 36 01E8
        gbc.setState(0xd467, 0x51e1, 0x5380, 0x469b, 0x391f, 0xbbeb, 0x0, 0x0);
        gbc.writeMem(0xbbeb, { 0x6a });
        gbc.writeMem(0xd467, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x51e1);
        EXPECT(gbc.pc(), 0xd469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbeb), 0xa6);
        EXPECT(gbc.readMem(0xd467), 0xcb);
        EXPECT(gbc.readMem(0xd468), 0x36);
        // CB 36 01E9
        gbc.setState(0xaae, 0x226e, 0x7780, 0x6fb7, 0xeb33, 0x881e, 0x0, 0x0);
        gbc.writeMem(0xaae, { 0xcb, 0x36 });
        gbc.writeMem(0x881e, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x226e);
        EXPECT(gbc.pc(), 0xab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x881e), 0x45);
        // CB 36 01EC
        gbc.setState(0x9f37, 0x3e99, 0x9570, 0xb4d1, 0xb847, 0xedb8, 0x0, 0x0);
        gbc.writeMem(0x9f37, { 0xcb, 0x36 });
        gbc.writeMem(0xedb8, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3e99);
        EXPECT(gbc.pc(), 0x9f39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f37), 0xcb);
        EXPECT(gbc.readMem(0x9f38), 0x36);
        EXPECT(gbc.readMem(0xedb8), 0x19);
        // CB 36 01ED
        gbc.setState(0x2f39, 0x7d3a, 0x3920, 0x8cfb, 0x68cb, 0x923a, 0x0, 0x0);
        gbc.writeMem(0x2f39, { 0xcb, 0x36 });
        gbc.writeMem(0x923a, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x7d3a);
        EXPECT(gbc.pc(), 0x2f3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x923a), 0x3);
        // CB 36 01EF
        gbc.setState(0x28c7, 0xba93, 0x5030, 0xd9cc, 0x9170, 0xf606, 0x0, 0x1);
        gbc.writeMem(0x28c7, { 0xcb, 0x36 });
        gbc.writeMem(0xf606, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xba93);
        EXPECT(gbc.pc(), 0x28c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf606), 0xdb);
        // CB 36 01F1
        gbc.setState(0x46d4, 0xf488, 0x9e90, 0x7612, 0xa3d2, 0x8e9f, 0x1, 0x0);
        gbc.writeMem(0x46d4, { 0xcb, 0x36 });
        gbc.writeMem(0x8e9f, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf488);
        EXPECT(gbc.pc(), 0x46d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e9f), 0xef);
        // CB 36 01F2
        gbc.setState(0xc100, 0xee12, 0xc830, 0x3c02, 0xc4e8, 0xa985, 0x1, 0x0);
        gbc.writeMem(0xa985, { 0x99 });
        gbc.writeMem(0xc100, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xee12);
        EXPECT(gbc.pc(), 0xc102);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa985), 0x99);
        EXPECT(gbc.readMem(0xc100), 0xcb);
        EXPECT(gbc.readMem(0xc101), 0x36);
        // CB 36 01F3
        gbc.setState(0x9736, 0x352d, 0x580, 0x9b97, 0xbb87, 0x8b0f, 0x1, 0x1);
        gbc.writeMem(0x8b0f, { 0xd2 });
        gbc.writeMem(0x9736, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x352d);
        EXPECT(gbc.pc(), 0x9738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b0f), 0x2d);
        EXPECT(gbc.readMem(0x9736), 0xcb);
        EXPECT(gbc.readMem(0x9737), 0x36);
        // CB 36 01F4
        gbc.setState(0x2dd2, 0x2764, 0x5a10, 0xc49b, 0x3866, 0xce36, 0x1, 0x1);
        gbc.writeMem(0x2dd2, { 0xcb, 0x36 });
        gbc.writeMem(0xce36, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2764);
        EXPECT(gbc.pc(), 0x2dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce36), 0x6d);
        // CB 36 01F5
        gbc.setState(0x8259, 0x3f01, 0xb2b0, 0x80ca, 0x6883, 0xa2e7, 0x1, 0x0);
        gbc.writeMem(0x8259, { 0xcb, 0x36 });
        gbc.writeMem(0xa2e7, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3f01);
        EXPECT(gbc.pc(), 0x825b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8259), 0xcb);
        EXPECT(gbc.readMem(0x825a), 0x36);
        EXPECT(gbc.readMem(0xa2e7), 0xcf);
        // CB 36 01F7
        gbc.setState(0x7799, 0x84c9, 0x2c60, 0x60e7, 0xbac0, 0xb556, 0x1, 0x0);
        gbc.writeMem(0x7799, { 0xcb, 0x36 });
        gbc.writeMem(0xb556, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x84c9);
        EXPECT(gbc.pc(), 0x779b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb556), 0x5b);
        // CB 36 01F8
        gbc.setState(0x4d94, 0x91fb, 0x6940, 0x6856, 0x2c, 0x8fef, 0x1, 0x1);
        gbc.writeMem(0x4d94, { 0xcb, 0x36 });
        gbc.writeMem(0x8fef, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x91fb);
        EXPECT(gbc.pc(), 0x4d96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fef), 0xed);
        // CB 36 01F9
        gbc.setState(0x55f1, 0x5cf, 0x520, 0xd65a, 0x82ad, 0xdf94, 0x0, 0x0);
        gbc.writeMem(0x55f1, { 0xcb, 0x36 });
        gbc.writeMem(0xdf94, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5cf);
        EXPECT(gbc.pc(), 0x55f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf94), 0x44);
        // CB 36 01FB
        gbc.setState(0x5eb5, 0xfd7, 0xb900, 0xbeea, 0xa665, 0xe8be, 0x0, 0x1);
        gbc.writeMem(0x5eb5, { 0xcb, 0x36 });
        gbc.writeMem(0xe8be, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfd7);
        EXPECT(gbc.pc(), 0x5eb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8be), 0xe1);
        // CB 36 01FC
        gbc.setState(0x7a3f, 0xea94, 0x1980, 0x5427, 0x5e2a, 0x1ebe, 0x0, 0x1);
        gbc.writeMem(0x1ebe, { 0x66 });
        gbc.writeMem(0x7a3f, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xea94);
        EXPECT(gbc.pc(), 0x7a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 01FD
        gbc.setState(0xeb82, 0xb8e9, 0x82f0, 0xe48f, 0xb6f2, 0xf73f, 0x1, 0x0);
        gbc.writeMem(0xeb82, { 0xcb, 0x36 });
        gbc.writeMem(0xf73f, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb8e9);
        EXPECT(gbc.pc(), 0xeb84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb82), 0xcb);
        EXPECT(gbc.readMem(0xeb83), 0x36);
        EXPECT(gbc.readMem(0xf73f), 0xfa);
        // CB 36 01FF
        gbc.setState(0xb97c, 0x3129, 0xe220, 0x88a5, 0x2796, 0xfcb1, 0x0, 0x0);
        gbc.writeMem(0xb97c, { 0xcb, 0x36 });
        gbc.writeMem(0xfcb1, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3129);
        EXPECT(gbc.pc(), 0xb97e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97c), 0xcb);
        EXPECT(gbc.readMem(0xb97d), 0x36);
        EXPECT(gbc.readMem(0xfcb1), 0xf);
        // CB 36 0200
        gbc.setState(0x79bd, 0xdd44, 0x1650, 0x1145, 0x3965, 0xebeb, 0x0, 0x1);
        gbc.writeMem(0x79bd, { 0xcb, 0x36 });
        gbc.writeMem(0xebeb, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdd44);
        EXPECT(gbc.pc(), 0x79bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebeb), 0xd7);
        // CB 36 0205
        gbc.setState(0x6223, 0xef4a, 0x7ea0, 0xa78e, 0xc0b0, 0xe84a, 0x1, 0x0);
        gbc.writeMem(0x6223, { 0xcb, 0x36 });
        gbc.writeMem(0xe84a, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xef4a);
        EXPECT(gbc.pc(), 0x6225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe84a), 0x14);
        // CB 36 0209
        gbc.setState(0x2444, 0x4d8b, 0x8f40, 0xba58, 0xf45a, 0x89f9, 0x1, 0x1);
        gbc.writeMem(0x2444, { 0xcb, 0x36 });
        gbc.writeMem(0x89f9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4d8b);
        EXPECT(gbc.pc(), 0x2446);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89f9), 0x4);
        // CB 36 020A
        gbc.setState(0x6a6e, 0x2e8e, 0x9670, 0x2b73, 0x143, 0xccb5, 0x1, 0x1);
        gbc.writeMem(0x6a6e, { 0xcb, 0x36 });
        gbc.writeMem(0xccb5, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2e8e);
        EXPECT(gbc.pc(), 0x6a70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb5), 0x61);
        // CB 36 020C
        gbc.setState(0xe1f1, 0x8fed, 0x5ef0, 0xc95b, 0x696c, 0xf41d, 0x0, 0x0);
        gbc.writeMem(0xe1f1, { 0xcb, 0x36 });
        gbc.writeMem(0xf41d, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8fed);
        EXPECT(gbc.pc(), 0xe1f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f1), 0xcb);
        EXPECT(gbc.readMem(0xe1f2), 0x36);
        EXPECT(gbc.readMem(0xf41d), 0x1d);
        // CB 36 0210
        gbc.setState(0xf69, 0x99a7, 0x9580, 0x9dac, 0x25f6, 0xe769, 0x0, 0x1);
        gbc.writeMem(0xf69, { 0xcb, 0x36 });
        gbc.writeMem(0xe769, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x99a7);
        EXPECT(gbc.pc(), 0xf6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe769), 0x66);
        // CB 36 0216
        gbc.setState(0xc9ae, 0xaf76, 0x36e0, 0xa639, 0x13d3, 0xe07e, 0x0, 0x1);
        gbc.writeMem(0xc9ae, { 0xcb, 0x36 });
        gbc.writeMem(0xe07e, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xaf76);
        EXPECT(gbc.pc(), 0xc9b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ae), 0xcb);
        EXPECT(gbc.readMem(0xc9af), 0x36);
        EXPECT(gbc.readMem(0xe07e), 0x2b);
        // CB 36 0217
        gbc.setState(0x87a8, 0x7ac9, 0x5680, 0xfa54, 0x4a65, 0x929e, 0x0, 0x0);
        gbc.writeMem(0x87a8, { 0xcb, 0x36 });
        gbc.writeMem(0x929e, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7ac9);
        EXPECT(gbc.pc(), 0x87aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a8), 0xcb);
        EXPECT(gbc.readMem(0x87a9), 0x36);
        EXPECT(gbc.readMem(0x929e), 0xcc);
        // CB 36 0219
        gbc.setState(0x2199, 0xfc51, 0x5e0, 0x684a, 0x9067, 0x8a86, 0x1, 0x1);
        gbc.writeMem(0x2199, { 0xcb, 0x36 });
        gbc.writeMem(0x8a86, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xfc51);
        EXPECT(gbc.pc(), 0x219b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a86), 0x34);
        // CB 36 021C
        gbc.setState(0x10c3, 0x609, 0x8b50, 0x8276, 0x3dae, 0xc11b, 0x0, 0x0);
        gbc.writeMem(0x10c3, { 0xcb, 0x36 });
        gbc.writeMem(0xc11b, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x609);
        EXPECT(gbc.pc(), 0x10c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11b), 0xa4);
        // CB 36 021E
        gbc.setState(0xc887, 0x962b, 0x470, 0xc70f, 0x9c90, 0xcfe6, 0x1, 0x1);
        gbc.writeMem(0xc887, { 0xcb, 0x36 });
        gbc.writeMem(0xcfe6, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x962b);
        EXPECT(gbc.pc(), 0xc889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc887), 0xcb);
        EXPECT(gbc.readMem(0xc888), 0x36);
        EXPECT(gbc.readMem(0xcfe6), 0x6);
        // CB 36 0220
        gbc.setState(0x6dbb, 0xc8fa, 0x8510, 0x335, 0xc7b0, 0xa9e1, 0x0, 0x1);
        gbc.writeMem(0x6dbb, { 0xcb, 0x36 });
        gbc.writeMem(0xa9e1, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc8fa);
        EXPECT(gbc.pc(), 0x6dbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e1), 0xdc);
        // CB 36 0221
        gbc.setState(0x2c38, 0x9945, 0x46d0, 0x9b6b, 0x777d, 0xe39f, 0x0, 0x1);
        gbc.writeMem(0x2c38, { 0xcb, 0x36 });
        gbc.writeMem(0xe39f, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9945);
        EXPECT(gbc.pc(), 0x2c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe39f), 0x8f);
        // CB 36 0222
        gbc.setState(0xc71b, 0xfe6b, 0xeb90, 0x666b, 0x89a5, 0xd318, 0x1, 0x1);
        gbc.writeMem(0xc71b, { 0xcb, 0x36 });
        gbc.writeMem(0xd318, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xfe6b);
        EXPECT(gbc.pc(), 0xc71d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc71b), 0xcb);
        EXPECT(gbc.readMem(0xc71c), 0x36);
        EXPECT(gbc.readMem(0xd318), 0x49);
        // CB 36 0223
        gbc.setState(0x5ef2, 0xf2a2, 0x3bc0, 0xe907, 0x6c91, 0xa8c9, 0x0, 0x1);
        gbc.writeMem(0x5ef2, { 0xcb, 0x36 });
        gbc.writeMem(0xa8c9, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf2a2);
        EXPECT(gbc.pc(), 0x5ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c9), 0xc6);
        // CB 36 0224
        gbc.setState(0x6094, 0x12f0, 0x4050, 0xd229, 0xc8a4, 0xc7d9, 0x0, 0x0);
        gbc.writeMem(0x6094, { 0xcb, 0x36 });
        gbc.writeMem(0xc7d9, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x12f0);
        EXPECT(gbc.pc(), 0x6096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d9), 0x7f);
        // CB 36 022C
        gbc.setState(0x5a26, 0x93de, 0x45d0, 0x6cb0, 0x9797, 0xbbb0, 0x0, 0x1);
        gbc.writeMem(0x5a26, { 0xcb, 0x36 });
        gbc.writeMem(0xbbb0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x93de);
        EXPECT(gbc.pc(), 0x5a28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb0), 0x9c);
        // CB 36 022E
        gbc.setState(0x3ba4, 0xc918, 0xaed0, 0x763e, 0x1668, 0xc19c, 0x1, 0x1);
        gbc.writeMem(0x3ba4, { 0xcb, 0x36 });
        gbc.writeMem(0xc19c, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc918);
        EXPECT(gbc.pc(), 0x3ba6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc19c), 0x60);
        // CB 36 0235
        gbc.setState(0x48dd, 0xca19, 0x8df0, 0xf7c0, 0xc3a1, 0xf4be, 0x0, 0x0);
        gbc.writeMem(0x48dd, { 0xcb, 0x36 });
        gbc.writeMem(0xf4be, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xca19);
        EXPECT(gbc.pc(), 0x48df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf4be), 0x58);
        // CB 36 0237
        gbc.setState(0x340d, 0xcd58, 0x3570, 0x8f4f, 0xefe3, 0xe712, 0x1, 0x0);
        gbc.writeMem(0x340d, { 0xcb, 0x36 });
        gbc.writeMem(0xe712, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xcd58);
        EXPECT(gbc.pc(), 0x340f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe712), 0xd2);
        // CB 36 0238
        gbc.setState(0x47e7, 0xfaa1, 0xb9d0, 0xf91b, 0xa631, 0xf29e, 0x0, 0x1);
        gbc.writeMem(0x47e7, { 0xcb, 0x36 });
        gbc.writeMem(0xf29e, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xfaa1);
        EXPECT(gbc.pc(), 0x47e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf29e), 0x77);
        // CB 36 023A
        gbc.setState(0x1765, 0x8aed, 0x4880, 0x4e78, 0xd09d, 0xee1a, 0x1, 0x1);
        gbc.writeMem(0x1765, { 0xcb, 0x36 });
        gbc.writeMem(0xee1a, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8aed);
        EXPECT(gbc.pc(), 0x1767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee1a), 0xab);
        // CB 36 023B
        gbc.setState(0x8982, 0xb332, 0x7af0, 0xa3d2, 0x98c7, 0xc480, 0x1, 0x0);
        gbc.writeMem(0x8982, { 0xcb, 0x36 });
        gbc.writeMem(0xc480, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb332);
        EXPECT(gbc.pc(), 0x8984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8982), 0xcb);
        EXPECT(gbc.readMem(0x8983), 0x36);
        EXPECT(gbc.readMem(0xc480), 0x7d);
        // CB 36 023C
        gbc.setState(0x5651, 0xdff, 0x32f0, 0xf673, 0xb2ab, 0x9805, 0x0, 0x0);
        gbc.writeMem(0x5651, { 0xcb, 0x36 });
        gbc.writeMem(0x9805, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdff);
        EXPECT(gbc.pc(), 0x5653);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9805), 0xfa);
        // CB 36 023D
        gbc.setState(0xc497, 0x59bd, 0x70d0, 0x1d04, 0xe61d, 0x6243, 0x1, 0x1);
        gbc.writeMem(0x6243, { 0xdd });
        gbc.writeMem(0xc497, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x59bd);
        EXPECT(gbc.pc(), 0xc499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc497), 0xcb);
        EXPECT(gbc.readMem(0xc498), 0x36);
        // CB 36 023E
        gbc.setState(0xb821, 0x725c, 0xa7c0, 0xa4bf, 0xd2a8, 0xc5e0, 0x0, 0x1);
        gbc.writeMem(0xb821, { 0xcb, 0x36 });
        gbc.writeMem(0xc5e0, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x725c);
        EXPECT(gbc.pc(), 0xb823);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb821), 0xcb);
        EXPECT(gbc.readMem(0xb822), 0x36);
        EXPECT(gbc.readMem(0xc5e0), 0xa3);
        // CB 36 023F
        gbc.setState(0x3b46, 0xd76e, 0xd950, 0xd106, 0xa30c, 0xe6e1, 0x0, 0x1);
        gbc.writeMem(0x3b46, { 0xcb, 0x36 });
        gbc.writeMem(0xe6e1, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd76e);
        EXPECT(gbc.pc(), 0x3b48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e1), 0xe0);
        // CB 36 0242
        gbc.setState(0xcee0, 0x48ea, 0x93d0, 0xf365, 0xb484, 0x9c8d, 0x1, 0x1);
        gbc.writeMem(0x9c8d, { 0xd0 });
        gbc.writeMem(0xcee0, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x48ea);
        EXPECT(gbc.pc(), 0xcee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c8d), 0xd);
        EXPECT(gbc.readMem(0xcee0), 0xcb);
        EXPECT(gbc.readMem(0xcee1), 0x36);
        // CB 36 0243
        gbc.setState(0xe7cc, 0x26a4, 0x41b0, 0xfbf1, 0xda0b, 0x8175, 0x0, 0x0);
        gbc.writeMem(0x8175, { 0xa2 });
        gbc.writeMem(0xe7cc, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x26a4);
        EXPECT(gbc.pc(), 0xe7ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8175), 0x2a);
        EXPECT(gbc.readMem(0xe7cc), 0xcb);
        EXPECT(gbc.readMem(0xe7cd), 0x36);
        // CB 36 0245
        gbc.setState(0x969f, 0x29a9, 0x13f0, 0xb040, 0x71d2, 0x89d7, 0x0, 0x0);
        gbc.writeMem(0x89d7, { 0x73 });
        gbc.writeMem(0x969f, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x29a9);
        EXPECT(gbc.pc(), 0x96a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d7), 0x37);
        EXPECT(gbc.readMem(0x969f), 0xcb);
        EXPECT(gbc.readMem(0x96a0), 0x36);
        // CB 36 0246
        gbc.setState(0x62b9, 0xcf43, 0xcbe0, 0x4085, 0xfe23, 0xf1f0, 0x1, 0x0);
        gbc.writeMem(0x62b9, { 0xcb, 0x36 });
        gbc.writeMem(0xf1f0, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xcf43);
        EXPECT(gbc.pc(), 0x62bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf1f0), 0x2e);
        // CB 36 0247
        gbc.setState(0xe5c9, 0x12e8, 0xddb0, 0x8cb8, 0xb15a, 0xa1c9, 0x1, 0x1);
        gbc.writeMem(0xa1c9, { 0xaa });
        gbc.writeMem(0xe5c9, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x12e8);
        EXPECT(gbc.pc(), 0xe5cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c9), 0xaa);
        EXPECT(gbc.readMem(0xe5c9), 0xcb);
        EXPECT(gbc.readMem(0xe5ca), 0x36);
        // CB 36 024B
        gbc.setState(0xc34a, 0xcd8d, 0x7a20, 0xb990, 0xd327, 0xfe56, 0x0, 0x0);
        gbc.writeMem(0xc34a, { 0xcb, 0x36 });
        gbc.writeMem(0xfe56, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcd8d);
        EXPECT(gbc.pc(), 0xc34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc34a), 0xcb);
        EXPECT(gbc.readMem(0xc34b), 0x36);
        EXPECT(gbc.readMem(0xfe56), 0xb);
        // CB 36 024D
        gbc.setState(0xe27b, 0xb8fe, 0xe7e0, 0xec53, 0x20d6, 0x9ed5, 0x1, 0x1);
        gbc.writeMem(0x9ed5, { 0xb0 });
        gbc.writeMem(0xe27b, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb8fe);
        EXPECT(gbc.pc(), 0xe27d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed5), 0xb);
        EXPECT(gbc.readMem(0xe27b), 0xcb);
        EXPECT(gbc.readMem(0xe27c), 0x36);
        // CB 36 024F
        gbc.setState(0x32fe, 0x204b, 0x52c0, 0xc2cc, 0x451c, 0xb8cf, 0x1, 0x1);
        gbc.writeMem(0x32fe, { 0xcb, 0x36 });
        gbc.writeMem(0xb8cf, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x204b);
        EXPECT(gbc.pc(), 0x3300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8cf), 0xed);
        // CB 36 0250
        gbc.setState(0x9bb8, 0x2a46, 0x7de0, 0x5c59, 0xcff, 0xda19, 0x1, 0x0);
        gbc.writeMem(0x9bb8, { 0xcb, 0x36 });
        gbc.writeMem(0xda19, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2a46);
        EXPECT(gbc.pc(), 0x9bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb8), 0xcb);
        EXPECT(gbc.readMem(0x9bb9), 0x36);
        EXPECT(gbc.readMem(0xda19), 0x36);
        // CB 36 0251
        gbc.setState(0xeaf2, 0x3a51, 0xe160, 0x70c3, 0xe340, 0xade2, 0x0, 0x1);
        gbc.writeMem(0xade2, { 0xab });
        gbc.writeMem(0xeaf2, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3a51);
        EXPECT(gbc.pc(), 0xeaf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xade2), 0xba);
        EXPECT(gbc.readMem(0xeaf2), 0xcb);
        EXPECT(gbc.readMem(0xeaf3), 0x36);
        // CB 36 0254
        gbc.setState(0xa89, 0x48d6, 0x1060, 0x628a, 0x78ab, 0x171b, 0x1, 0x0);
        gbc.writeMem(0xa89, { 0xcb, 0x36 });
        gbc.writeMem(0x171b, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x48d6);
        EXPECT(gbc.pc(), 0xa8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0258
        gbc.setState(0xa08e, 0xf9, 0xd450, 0x2faf, 0xe553, 0xdb2f, 0x0, 0x1);
        gbc.writeMem(0xa08e, { 0xcb, 0x36 });
        gbc.writeMem(0xdb2f, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf9);
        EXPECT(gbc.pc(), 0xa090);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08e), 0xcb);
        EXPECT(gbc.readMem(0xa08f), 0x36);
        EXPECT(gbc.readMem(0xdb2f), 0x14);
        // CB 36 025A
        gbc.setState(0x67c0, 0x556e, 0xe620, 0x4ede, 0x4321, 0x97b5, 0x0, 0x0);
        gbc.writeMem(0x67c0, { 0xcb, 0x36 });
        gbc.writeMem(0x97b5, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x556e);
        EXPECT(gbc.pc(), 0x67c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97b5), 0x10);
        // CB 36 025C
        gbc.setState(0x14a3, 0x6f81, 0x8dc0, 0xf595, 0x7ef9, 0xfb72, 0x1, 0x1);
        gbc.writeMem(0x14a3, { 0xcb, 0x36 });
        gbc.writeMem(0xfb72, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6f81);
        EXPECT(gbc.pc(), 0x14a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb72), 0xaf);
        // CB 36 025F
        gbc.setState(0xc1f9, 0x5ec6, 0x20a0, 0xda31, 0x5a5f, 0xf859, 0x0, 0x0);
        gbc.writeMem(0xc1f9, { 0xcb, 0x36 });
        gbc.writeMem(0xf859, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5ec6);
        EXPECT(gbc.pc(), 0xc1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1f9), 0xcb);
        EXPECT(gbc.readMem(0xc1fa), 0x36);
        EXPECT(gbc.readMem(0xf859), 0xaf);
        // CB 36 0261
        gbc.setState(0x5801, 0x6b49, 0x6940, 0x5376, 0xfbd1, 0xf902, 0x1, 0x0);
        gbc.writeMem(0x5801, { 0xcb, 0x36 });
        gbc.writeMem(0xf902, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6b49);
        EXPECT(gbc.pc(), 0x5803);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf902), 0x80);
        // CB 36 0262
        gbc.setState(0x2978, 0xeb1e, 0x59a0, 0x952e, 0x2fb9, 0x8c5d, 0x1, 0x0);
        gbc.writeMem(0x2978, { 0xcb, 0x36 });
        gbc.writeMem(0x8c5d, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xeb1e);
        EXPECT(gbc.pc(), 0x297a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c5d), 0xd1);
        // CB 36 0264
        gbc.setState(0xa60b, 0x6935, 0xf730, 0xf7e9, 0x5b84, 0xa02a, 0x1, 0x1);
        gbc.writeMem(0xa02a, { 0x69 });
        gbc.writeMem(0xa60b, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6935);
        EXPECT(gbc.pc(), 0xa60d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02a), 0x96);
        EXPECT(gbc.readMem(0xa60b), 0xcb);
        EXPECT(gbc.readMem(0xa60c), 0x36);
        // CB 36 0265
        gbc.setState(0xe55c, 0x8b21, 0xe170, 0x6528, 0x3936, 0xe3fd, 0x0, 0x0);
        gbc.writeMem(0xe3fd, { 0x39 });
        gbc.writeMem(0xe55c, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8b21);
        EXPECT(gbc.pc(), 0xe55e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3fd), 0x93);
        EXPECT(gbc.readMem(0xe55c), 0xcb);
        EXPECT(gbc.readMem(0xe55d), 0x36);
        // CB 36 0266
        gbc.setState(0x3c87, 0x1c03, 0x9500, 0xc0a4, 0xbb3f, 0xe5ff, 0x1, 0x0);
        gbc.writeMem(0x3c87, { 0xcb, 0x36 });
        gbc.writeMem(0xe5ff, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1c03);
        EXPECT(gbc.pc(), 0x3c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ff), 0xbb);
        // CB 36 0269
        gbc.setState(0xced3, 0xcc3c, 0x92f0, 0xd24b, 0x1660, 0xd8f1, 0x1, 0x1);
        gbc.writeMem(0xced3, { 0xcb, 0x36 });
        gbc.writeMem(0xd8f1, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcc3c);
        EXPECT(gbc.pc(), 0xced5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xced3), 0xcb);
        EXPECT(gbc.readMem(0xced4), 0x36);
        EXPECT(gbc.readMem(0xd8f1), 0xe7);
        // CB 36 026A
        gbc.setState(0xafb8, 0x990b, 0x6300, 0x8cd8, 0x648c, 0xa32e, 0x0, 0x1);
        gbc.writeMem(0xa32e, { 0xc6 });
        gbc.writeMem(0xafb8, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x990b);
        EXPECT(gbc.pc(), 0xafba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa32e), 0x6c);
        EXPECT(gbc.readMem(0xafb8), 0xcb);
        EXPECT(gbc.readMem(0xafb9), 0x36);
        // CB 36 026C
        gbc.setState(0x8e88, 0x82f4, 0xdfb0, 0xfed, 0x7e86, 0x250f, 0x0, 0x0);
        gbc.writeMem(0x250f, { 0x33 });
        gbc.writeMem(0x8e88, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x82f4);
        EXPECT(gbc.pc(), 0x8e8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e88), 0xcb);
        EXPECT(gbc.readMem(0x8e89), 0x36);
        // CB 36 026D
        gbc.setState(0xb8e4, 0xcbf3, 0xa4a0, 0xf5ac, 0x400b, 0xac20, 0x1, 0x1);
        gbc.writeMem(0xac20, { 0x3f });
        gbc.writeMem(0xb8e4, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcbf3);
        EXPECT(gbc.pc(), 0xb8e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac20), 0xf3);
        EXPECT(gbc.readMem(0xb8e4), 0xcb);
        EXPECT(gbc.readMem(0xb8e5), 0x36);
        // CB 36 026E
        gbc.setState(0x476d, 0x6fa8, 0x3b50, 0x1916, 0x8519, 0xe46f, 0x0, 0x0);
        gbc.writeMem(0x476d, { 0xcb, 0x36 });
        gbc.writeMem(0xe46f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6fa8);
        EXPECT(gbc.pc(), 0x476f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46f), 0xaa);
        // CB 36 0270
        gbc.setState(0x8725, 0x93ea, 0x9dc0, 0x89f1, 0xaf70, 0xfd4e, 0x1, 0x1);
        gbc.writeMem(0x8725, { 0xcb, 0x36 });
        gbc.writeMem(0xfd4e, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x93ea);
        EXPECT(gbc.pc(), 0x8727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8725), 0xcb);
        EXPECT(gbc.readMem(0x8726), 0x36);
        EXPECT(gbc.readMem(0xfd4e), 0x57);
        // CB 36 0274
        gbc.setState(0x260d, 0xbca3, 0xaa70, 0x89ff, 0xb197, 0xbe6b, 0x1, 0x0);
        gbc.writeMem(0x260d, { 0xcb, 0x36 });
        gbc.writeMem(0xbe6b, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbca3);
        EXPECT(gbc.pc(), 0x260f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe6b), 0x37);
        // CB 36 0275
        gbc.setState(0x3627, 0xa17c, 0x4a10, 0xc0e6, 0x997c, 0xd51b, 0x1, 0x1);
        gbc.writeMem(0x3627, { 0xcb, 0x36 });
        gbc.writeMem(0xd51b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa17c);
        EXPECT(gbc.pc(), 0x3629);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd51b), 0x2a);
        // CB 36 0277
        gbc.setState(0xc7a7, 0xc067, 0x67e0, 0xf11f, 0x4f85, 0x834b, 0x0, 0x1);
        gbc.writeMem(0x834b, { 0x74 });
        gbc.writeMem(0xc7a7, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc067);
        EXPECT(gbc.pc(), 0xc7a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x834b), 0x47);
        EXPECT(gbc.readMem(0xc7a7), 0xcb);
        EXPECT(gbc.readMem(0xc7a8), 0x36);
        // CB 36 0278
        gbc.setState(0xbe44, 0x536b, 0xe410, 0x5fd9, 0xd19f, 0xdf2f, 0x0, 0x0);
        gbc.writeMem(0xbe44, { 0xcb, 0x36 });
        gbc.writeMem(0xdf2f, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x536b);
        EXPECT(gbc.pc(), 0xbe46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe44), 0xcb);
        EXPECT(gbc.readMem(0xbe45), 0x36);
        EXPECT(gbc.readMem(0xdf2f), 0xdc);
        // CB 36 0279
        gbc.setState(0x6755, 0x3e6f, 0x1670, 0x2721, 0x318b, 0xa53f, 0x0, 0x1);
        gbc.writeMem(0x6755, { 0xcb, 0x36 });
        gbc.writeMem(0xa53f, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3e6f);
        EXPECT(gbc.pc(), 0x6757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa53f), 0x1e);
        // CB 36 027B
        gbc.setState(0x3823, 0x23e0, 0xd8f0, 0x716b, 0xe503, 0xa238, 0x1, 0x1);
        gbc.writeMem(0x3823, { 0xcb, 0x36 });
        gbc.writeMem(0xa238, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x23e0);
        EXPECT(gbc.pc(), 0x3825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa238), 0x53);
        // CB 36 0280
        gbc.setState(0xe58, 0xded4, 0xcbc0, 0x436c, 0xdd5, 0xa2fa, 0x0, 0x0);
        gbc.writeMem(0xe58, { 0xcb, 0x36 });
        gbc.writeMem(0xa2fa, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xded4);
        EXPECT(gbc.pc(), 0xe5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2fa), 0x3b);
        // CB 36 0281
        gbc.setState(0x63b2, 0xa43b, 0xa620, 0x1def, 0x63b6, 0x8d95, 0x0, 0x0);
        gbc.writeMem(0x63b2, { 0xcb, 0x36 });
        gbc.writeMem(0x8d95, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa43b);
        EXPECT(gbc.pc(), 0x63b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d95), 0xcf);
        // CB 36 0282
        gbc.setState(0xd40a, 0x16fd, 0x4d10, 0xd21f, 0x3786, 0x9362, 0x0, 0x1);
        gbc.writeMem(0x9362, { 0x89 });
        gbc.writeMem(0xd40a, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x16fd);
        EXPECT(gbc.pc(), 0xd40c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9362), 0x98);
        EXPECT(gbc.readMem(0xd40a), 0xcb);
        EXPECT(gbc.readMem(0xd40b), 0x36);
        // CB 36 0283
        gbc.setState(0x31d8, 0x5f80, 0x95f0, 0xd99c, 0x1ae0, 0xf887, 0x1, 0x0);
        gbc.writeMem(0x31d8, { 0xcb, 0x36 });
        gbc.writeMem(0xf887, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5f80);
        EXPECT(gbc.pc(), 0x31da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf887), 0x5a);
        // CB 36 0284
        gbc.setState(0xe108, 0xe314, 0x1d90, 0x4497, 0xe336, 0x9250, 0x0, 0x0);
        gbc.writeMem(0x9250, { 0x4a });
        gbc.writeMem(0xe108, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe314);
        EXPECT(gbc.pc(), 0xe10a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9250), 0xa4);
        EXPECT(gbc.readMem(0xe108), 0xcb);
        EXPECT(gbc.readMem(0xe109), 0x36);
        // CB 36 0287
        gbc.setState(0x6b9, 0xa235, 0x6350, 0x1303, 0x91f5, 0xdf46, 0x1, 0x1);
        gbc.writeMem(0x6b9, { 0xcb, 0x36 });
        gbc.writeMem(0xdf46, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa235);
        EXPECT(gbc.pc(), 0x6bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf46), 0x1a);
        // CB 36 0288
        gbc.setState(0x5715, 0xc71f, 0xe110, 0x4260, 0xab5f, 0xb1a5, 0x0, 0x0);
        gbc.writeMem(0x5715, { 0xcb, 0x36 });
        gbc.writeMem(0xb1a5, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc71f);
        EXPECT(gbc.pc(), 0x5717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a5), 0xd7);
        // CB 36 028A
        gbc.setState(0xe5c0, 0x832e, 0xf200, 0x2564, 0xc6ca, 0xeeeb, 0x0, 0x0);
        gbc.writeMem(0xe5c0, { 0xcb, 0x36 });
        gbc.writeMem(0xeeeb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x832e);
        EXPECT(gbc.pc(), 0xe5c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c0), 0xcb);
        EXPECT(gbc.readMem(0xe5c1), 0x36);
        EXPECT(gbc.readMem(0xeeeb), 0x46);
        // CB 36 028B
        gbc.setState(0xcfa0, 0xefb4, 0xbfd0, 0x5e82, 0x8cb8, 0xd8cb, 0x0, 0x0);
        gbc.writeMem(0xcfa0, { 0xcb, 0x36 });
        gbc.writeMem(0xd8cb, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xefb4);
        EXPECT(gbc.pc(), 0xcfa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa0), 0xcb);
        EXPECT(gbc.readMem(0xcfa1), 0x36);
        EXPECT(gbc.readMem(0xd8cb), 0xf8);
        // CB 36 028C
        gbc.setState(0xc712, 0x6aca, 0xbca0, 0xf0f1, 0x947c, 0xdfbb, 0x0, 0x1);
        gbc.writeMem(0xc712, { 0xcb, 0x36 });
        gbc.writeMem(0xdfbb, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6aca);
        EXPECT(gbc.pc(), 0xc714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc712), 0xcb);
        EXPECT(gbc.readMem(0xc713), 0x36);
        EXPECT(gbc.readMem(0xdfbb), 0x1a);
        // CB 36 028F
        gbc.setState(0xe162, 0xbb3e, 0xdff0, 0xc2b5, 0x6825, 0x9ed0, 0x1, 0x1);
        gbc.writeMem(0x9ed0, { 0x71 });
        gbc.writeMem(0xe162, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xbb3e);
        EXPECT(gbc.pc(), 0xe164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed0), 0x17);
        EXPECT(gbc.readMem(0xe162), 0xcb);
        EXPECT(gbc.readMem(0xe163), 0x36);
        // CB 36 0290
        gbc.setState(0x9aec, 0xce85, 0xc810, 0x8bb, 0x88f8, 0xf045, 0x0, 0x0);
        gbc.writeMem(0x9aec, { 0xcb, 0x36 });
        gbc.writeMem(0xf045, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xce85);
        EXPECT(gbc.pc(), 0x9aee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aec), 0xcb);
        EXPECT(gbc.readMem(0x9aed), 0x36);
        EXPECT(gbc.readMem(0xf045), 0xdd);
        // CB 36 0291
        gbc.setState(0x42aa, 0x3463, 0x3140, 0xeca7, 0x481f, 0xb8eb, 0x1, 0x1);
        gbc.writeMem(0x42aa, { 0xcb, 0x36 });
        gbc.writeMem(0xb8eb, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3463);
        EXPECT(gbc.pc(), 0x42ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8eb), 0x8c);
        // CB 36 0292
        gbc.setState(0x32b5, 0x7720, 0x1660, 0x3df7, 0x256b, 0xf512, 0x1, 0x1);
        gbc.writeMem(0x32b5, { 0xcb, 0x36 });
        gbc.writeMem(0xf512, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7720);
        EXPECT(gbc.pc(), 0x32b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf512), 0x89);
        // CB 36 0293
        gbc.setState(0xc0e1, 0xd4a1, 0x28a0, 0x65de, 0x58eb, 0xa4ca, 0x0, 0x1);
        gbc.writeMem(0xa4ca, { 0x80 });
        gbc.writeMem(0xc0e1, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd4a1);
        EXPECT(gbc.pc(), 0xc0e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ca), 0x8);
        EXPECT(gbc.readMem(0xc0e1), 0xcb);
        EXPECT(gbc.readMem(0xc0e2), 0x36);
        // CB 36 0296
        gbc.setState(0xe6c1, 0xe377, 0x4650, 0x522d, 0x2a7b, 0xa76f, 0x1, 0x1);
        gbc.writeMem(0xa76f, { 0x7b });
        gbc.writeMem(0xe6c1, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe377);
        EXPECT(gbc.pc(), 0xe6c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa76f), 0xb7);
        EXPECT(gbc.readMem(0xe6c1), 0xcb);
        EXPECT(gbc.readMem(0xe6c2), 0x36);
        // CB 36 0298
        gbc.setState(0xe0b4, 0x1ff9, 0xbb0, 0x19bb, 0xfb2, 0xed43, 0x1, 0x1);
        gbc.writeMem(0xe0b4, { 0xcb, 0x36 });
        gbc.writeMem(0xed43, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1ff9);
        EXPECT(gbc.pc(), 0xe0b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0b4), 0xcb);
        EXPECT(gbc.readMem(0xe0b5), 0x36);
        EXPECT(gbc.readMem(0xed43), 0xc1);
        // CB 36 029A
        gbc.setState(0x5388, 0xa653, 0x2620, 0x306e, 0xaf48, 0xbd36, 0x0, 0x0);
        gbc.writeMem(0x5388, { 0xcb, 0x36 });
        gbc.writeMem(0xbd36, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa653);
        EXPECT(gbc.pc(), 0x538a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd36), 0xa8);
        // CB 36 029B
        gbc.setState(0xcc48, 0xc02, 0x2fe0, 0xdc07, 0x575f, 0x9832, 0x1, 0x1);
        gbc.writeMem(0x9832, { 0xb4 });
        gbc.writeMem(0xcc48, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc02);
        EXPECT(gbc.pc(), 0xcc4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9832), 0x4b);
        EXPECT(gbc.readMem(0xcc48), 0xcb);
        EXPECT(gbc.readMem(0xcc49), 0x36);
        // CB 36 029F
        gbc.setState(0x2c3e, 0xa123, 0xb6e0, 0x6329, 0x4dc2, 0xf7fa, 0x1, 0x1);
        gbc.writeMem(0x2c3e, { 0xcb, 0x36 });
        gbc.writeMem(0xf7fa, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa123);
        EXPECT(gbc.pc(), 0x2c40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf7fa), 0x14);
        // CB 36 02A0
        gbc.setState(0x1081, 0xb366, 0xca10, 0xe61c, 0xc83e, 0xd61c, 0x0, 0x1);
        gbc.writeMem(0x1081, { 0xcb, 0x36 });
        gbc.writeMem(0xd61c, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb366);
        EXPECT(gbc.pc(), 0x1083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd61c), 0xfe);
        // CB 36 02A2
        gbc.setState(0xc19, 0xaf2c, 0xf5e0, 0xdb32, 0x4d5b, 0xc25b, 0x1, 0x1);
        gbc.writeMem(0xc19, { 0xcb, 0x36 });
        gbc.writeMem(0xc25b, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xaf2c);
        EXPECT(gbc.pc(), 0xc1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25b), 0x88);
        // CB 36 02A3
        gbc.setState(0xc610, 0x2719, 0xd1d0, 0x16c0, 0x12a1, 0xc471, 0x1, 0x0);
        gbc.writeMem(0xc471, { 0xeb });
        gbc.writeMem(0xc610, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2719);
        EXPECT(gbc.pc(), 0xc612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc471), 0xbe);
        EXPECT(gbc.readMem(0xc610), 0xcb);
        EXPECT(gbc.readMem(0xc611), 0x36);
        // CB 36 02A4
        gbc.setState(0xe14b, 0xd9db, 0x3ca0, 0xbe58, 0x600c, 0x317a, 0x1, 0x0);
        gbc.writeMem(0x317a, { 0x11 });
        gbc.writeMem(0xe14b, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd9db);
        EXPECT(gbc.pc(), 0xe14d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe14b), 0xcb);
        EXPECT(gbc.readMem(0xe14c), 0x36);
        // CB 36 02A5
        gbc.setState(0x9165, 0x78ec, 0xd5b0, 0x9e7a, 0x9cb5, 0xe0e0, 0x0, 0x0);
        gbc.writeMem(0x9165, { 0xcb, 0x36 });
        gbc.writeMem(0xe0e0, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x78ec);
        EXPECT(gbc.pc(), 0x9167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9165), 0xcb);
        EXPECT(gbc.readMem(0x9166), 0x36);
        EXPECT(gbc.readMem(0xe0e0), 0x4a);
        // CB 36 02A7
        gbc.setState(0xcdaa, 0xf3fb, 0x6330, 0x3697, 0x62d7, 0xb745, 0x0, 0x0);
        gbc.writeMem(0xb745, { 0xd5 });
        gbc.writeMem(0xcdaa, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf3fb);
        EXPECT(gbc.pc(), 0xcdac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb745), 0x5d);
        EXPECT(gbc.readMem(0xcdaa), 0xcb);
        EXPECT(gbc.readMem(0xcdab), 0x36);
        // CB 36 02A8
        gbc.setState(0xb466, 0x2fe2, 0xe40, 0x85d0, 0xe27d, 0xb3dc, 0x0, 0x1);
        gbc.writeMem(0xb3dc, { 0xa1 });
        gbc.writeMem(0xb466, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2fe2);
        EXPECT(gbc.pc(), 0xb468);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3dc), 0x1a);
        EXPECT(gbc.readMem(0xb466), 0xcb);
        EXPECT(gbc.readMem(0xb467), 0x36);
        // CB 36 02A9
        gbc.setState(0x6925, 0x883f, 0xe970, 0x8e3, 0x7f93, 0xd621, 0x0, 0x1);
        gbc.writeMem(0x6925, { 0xcb, 0x36 });
        gbc.writeMem(0xd621, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x883f);
        EXPECT(gbc.pc(), 0x6927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd621), 0x99);
        // CB 36 02AA
        gbc.setState(0x9517, 0xc993, 0x5a90, 0x9c75, 0xa98c, 0xd2ab, 0x0, 0x1);
        gbc.writeMem(0x9517, { 0xcb, 0x36 });
        gbc.writeMem(0xd2ab, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc993);
        EXPECT(gbc.pc(), 0x9519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9517), 0xcb);
        EXPECT(gbc.readMem(0x9518), 0x36);
        EXPECT(gbc.readMem(0xd2ab), 0x47);
        // CB 36 02AC
        gbc.setState(0x1d4, 0x7645, 0xfa10, 0x8ad3, 0x346, 0x9942, 0x0, 0x1);
        gbc.writeMem(0x1d4, { 0xcb, 0x36 });
        gbc.writeMem(0x9942, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7645);
        EXPECT(gbc.pc(), 0x1d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9942), 0x21);
        // CB 36 02AE
        gbc.setState(0x2c3, 0xd0d0, 0xc80, 0x13a5, 0xe231, 0xdb39, 0x0, 0x1);
        gbc.writeMem(0x2c3, { 0xcb, 0x36 });
        gbc.writeMem(0xdb39, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd0d0);
        EXPECT(gbc.pc(), 0x2c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb39), 0x6);
        // CB 36 02B1
        gbc.setState(0x4ccc, 0x13ce, 0x8ec0, 0x6e4c, 0x4b05, 0xd3d3, 0x0, 0x1);
        gbc.writeMem(0x4ccc, { 0xcb, 0x36 });
        gbc.writeMem(0xd3d3, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x13ce);
        EXPECT(gbc.pc(), 0x4cce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d3), 0x40);
        // CB 36 02B4
        gbc.setState(0x77bc, 0x503b, 0x4b50, 0xaa2f, 0x7b95, 0xbb86, 0x0, 0x0);
        gbc.writeMem(0x77bc, { 0xcb, 0x36 });
        gbc.writeMem(0xbb86, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x503b);
        EXPECT(gbc.pc(), 0x77be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb86), 0xff);
        // CB 36 02B6
        gbc.setState(0x6fb5, 0x7d5f, 0x4a40, 0x9c6b, 0x1ad6, 0xe4a3, 0x0, 0x1);
        gbc.writeMem(0x6fb5, { 0xcb, 0x36 });
        gbc.writeMem(0xe4a3, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7d5f);
        EXPECT(gbc.pc(), 0x6fb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4a3), 0xe2);
        // CB 36 02B9
        gbc.setState(0xed55, 0x7e85, 0x9070, 0xc6a6, 0x9b08, 0x8bc6, 0x1, 0x1);
        gbc.writeMem(0x8bc6, { 0xc0 });
        gbc.writeMem(0xed55, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7e85);
        EXPECT(gbc.pc(), 0xed57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bc6), 0xc);
        EXPECT(gbc.readMem(0xed55), 0xcb);
        EXPECT(gbc.readMem(0xed56), 0x36);
        // CB 36 02BB
        gbc.setState(0x26d4, 0x1080, 0xc6d0, 0x341a, 0x675a, 0xa405, 0x0, 0x0);
        gbc.writeMem(0x26d4, { 0xcb, 0x36 });
        gbc.writeMem(0xa405, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1080);
        EXPECT(gbc.pc(), 0x26d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa405), 0x65);
        // CB 36 02BC
        gbc.setState(0x62ab, 0xe38b, 0x3d70, 0xb5a0, 0xa2ff, 0xbbe3, 0x1, 0x0);
        gbc.writeMem(0x62ab, { 0xcb, 0x36 });
        gbc.writeMem(0xbbe3, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe38b);
        EXPECT(gbc.pc(), 0x62ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe3), 0x76);
        // CB 36 02BF
        gbc.setState(0x622e, 0x2b81, 0x7c0, 0x41f2, 0xd821, 0xbcd2, 0x1, 0x0);
        gbc.writeMem(0x622e, { 0xcb, 0x36 });
        gbc.writeMem(0xbcd2, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2b81);
        EXPECT(gbc.pc(), 0x6230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd2), 0xd2);
        // CB 36 02C4
        gbc.setState(0x7aae, 0xb4d1, 0xf6a0, 0x5b76, 0x3ca9, 0xaca9, 0x0, 0x1);
        gbc.writeMem(0x7aae, { 0xcb, 0x36 });
        gbc.writeMem(0xaca9, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb4d1);
        EXPECT(gbc.pc(), 0x7ab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca9), 0xfa);
        // CB 36 02C6
        gbc.setState(0xa1b4, 0xa52d, 0x6150, 0x28dd, 0xb57a, 0xee7d, 0x1, 0x0);
        gbc.writeMem(0xa1b4, { 0xcb, 0x36 });
        gbc.writeMem(0xee7d, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa52d);
        EXPECT(gbc.pc(), 0xa1b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1b4), 0xcb);
        EXPECT(gbc.readMem(0xa1b5), 0x36);
        EXPECT(gbc.readMem(0xee7d), 0xd8);
        // CB 36 02C8
        gbc.setState(0xc16e, 0xd2bd, 0x2210, 0x62ac, 0x5504, 0xae74, 0x1, 0x0);
        gbc.writeMem(0xae74, { 0x4b });
        gbc.writeMem(0xc16e, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd2bd);
        EXPECT(gbc.pc(), 0xc170);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae74), 0xb4);
        EXPECT(gbc.readMem(0xc16e), 0xcb);
        EXPECT(gbc.readMem(0xc16f), 0x36);
        // CB 36 02C9
        gbc.setState(0x6e89, 0x6254, 0xc370, 0x9f48, 0x1ff9, 0x965b, 0x1, 0x1);
        gbc.writeMem(0x6e89, { 0xcb, 0x36 });
        gbc.writeMem(0x965b, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6254);
        EXPECT(gbc.pc(), 0x6e8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x965b), 0x92);
        // CB 36 02CA
        gbc.setState(0x631, 0x6fd7, 0x9140, 0x9e8a, 0x157f, 0xe78b, 0x0, 0x1);
        gbc.writeMem(0x631, { 0xcb, 0x36 });
        gbc.writeMem(0xe78b, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6fd7);
        EXPECT(gbc.pc(), 0x633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78b), 0x17);
        // CB 36 02CD
        gbc.setState(0x6b33, 0x92fd, 0x79f0, 0xdc74, 0x37d3, 0xf04f, 0x0, 0x1);
        gbc.writeMem(0x6b33, { 0xcb, 0x36 });
        gbc.writeMem(0xf04f, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x92fd);
        EXPECT(gbc.pc(), 0x6b35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf04f), 0xf5);
        // CB 36 02CE
        gbc.setState(0xb3e2, 0x5ae7, 0x8c20, 0x39ca, 0x5410, 0x9f8e, 0x1, 0x1);
        gbc.writeMem(0x9f8e, { 0x9f });
        gbc.writeMem(0xb3e2, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5ae7);
        EXPECT(gbc.pc(), 0xb3e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f8e), 0xf9);
        EXPECT(gbc.readMem(0xb3e2), 0xcb);
        EXPECT(gbc.readMem(0xb3e3), 0x36);
        // CB 36 02D1
        gbc.setState(0x50bd, 0x5855, 0xa9d0, 0x89e1, 0xdb6c, 0xa9af, 0x1, 0x1);
        gbc.writeMem(0x50bd, { 0xcb, 0x36 });
        gbc.writeMem(0xa9af, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5855);
        EXPECT(gbc.pc(), 0x50bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9af), 0xd5);
        // CB 36 02D2
        gbc.setState(0x5ce7, 0x5701, 0xba60, 0xaa4f, 0xe0eb, 0xb7d9, 0x1, 0x0);
        gbc.writeMem(0x5ce7, { 0xcb, 0x36 });
        gbc.writeMem(0xb7d9, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5701);
        EXPECT(gbc.pc(), 0x5ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d9), 0xae);
        // CB 36 02D5
        gbc.setState(0x16e4, 0xa8cc, 0xb640, 0xc761, 0xdabd, 0xd93e, 0x0, 0x1);
        gbc.writeMem(0x16e4, { 0xcb, 0x36 });
        gbc.writeMem(0xd93e, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa8cc);
        EXPECT(gbc.pc(), 0x16e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd93e), 0x31);
        // CB 36 02D6
        gbc.setState(0xf9a, 0x78c5, 0x8510, 0xbc16, 0x14a9, 0xcb0d, 0x1, 0x1);
        gbc.writeMem(0xf9a, { 0xcb, 0x36 });
        gbc.writeMem(0xcb0d, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x78c5);
        EXPECT(gbc.pc(), 0xf9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb0d), 0x27);
        // CB 36 02D7
        gbc.setState(0x3f57, 0x253e, 0xe4f0, 0xebff, 0x5b, 0xc1d3, 0x0, 0x1);
        gbc.writeMem(0x3f57, { 0xcb, 0x36 });
        gbc.writeMem(0xc1d3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x253e);
        EXPECT(gbc.pc(), 0x3f59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1d3), 0xd0);
        // CB 36 02DA
        gbc.setState(0x1ac0, 0x5124, 0x5eb0, 0xd203, 0x6367, 0xba32, 0x0, 0x0);
        gbc.writeMem(0x1ac0, { 0xcb, 0x36 });
        gbc.writeMem(0xba32, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5124);
        EXPECT(gbc.pc(), 0x1ac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba32), 0x61);
        // CB 36 02DB
        gbc.setState(0x7a73, 0xbf79, 0x2220, 0xf6de, 0x3564, 0x9314, 0x1, 0x1);
        gbc.writeMem(0x7a73, { 0xcb, 0x36 });
        gbc.writeMem(0x9314, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xbf79);
        EXPECT(gbc.pc(), 0x7a75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9314), 0xb3);
        // CB 36 02DD
        gbc.setState(0xe63f, 0xa3d0, 0x1c30, 0xc0db, 0x7b38, 0xdab3, 0x0, 0x0);
        gbc.writeMem(0xdab3, { 0xe2 });
        gbc.writeMem(0xe63f, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa3d0);
        EXPECT(gbc.pc(), 0xe641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdab3), 0x2e);
        EXPECT(gbc.readMem(0xe63f), 0xcb);
        EXPECT(gbc.readMem(0xe640), 0x36);
        // CB 36 02DE
        gbc.setState(0xb1d0, 0x9e43, 0xf100, 0x84f3, 0x3fa1, 0xc0c4, 0x1, 0x0);
        gbc.writeMem(0xb1d0, { 0xcb, 0x36 });
        gbc.writeMem(0xc0c4, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9e43);
        EXPECT(gbc.pc(), 0xb1d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1d0), 0xcb);
        EXPECT(gbc.readMem(0xb1d1), 0x36);
        EXPECT(gbc.readMem(0xc0c4), 0xdd);
        // CB 36 02E0
        gbc.setState(0xc63, 0xc6e7, 0x2f40, 0x1e01, 0xd7c4, 0xdda7, 0x1, 0x1);
        gbc.writeMem(0xc63, { 0xcb, 0x36 });
        gbc.writeMem(0xdda7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc6e7);
        EXPECT(gbc.pc(), 0xc65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdda7), 0xf7);
        // CB 36 02E2
        gbc.setState(0xe671, 0xe303, 0x2cc0, 0x6a5d, 0xbe22, 0xbe3a, 0x1, 0x0);
        gbc.writeMem(0xbe3a, { 0x4 });
        gbc.writeMem(0xe671, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe303);
        EXPECT(gbc.pc(), 0xe673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe3a), 0x40);
        EXPECT(gbc.readMem(0xe671), 0xcb);
        EXPECT(gbc.readMem(0xe672), 0x36);
        // CB 36 02E7
        gbc.setState(0xe68d, 0xe2f1, 0x26a0, 0xd809, 0x2c50, 0xce68, 0x1, 0x1);
        gbc.writeMem(0xce68, { 0xc4 });
        gbc.writeMem(0xe68d, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe2f1);
        EXPECT(gbc.pc(), 0xe68f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce68), 0x4c);
        EXPECT(gbc.readMem(0xe68d), 0xcb);
        EXPECT(gbc.readMem(0xe68e), 0x36);
        // CB 36 02EA
        gbc.setState(0x5517, 0xf989, 0x4580, 0xa8a7, 0xf866, 0x9313, 0x1, 0x0);
        gbc.writeMem(0x5517, { 0xcb, 0x36 });
        gbc.writeMem(0x9313, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf989);
        EXPECT(gbc.pc(), 0x5519);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9313), 0xeb);
        // CB 36 02EB
        gbc.setState(0x6169, 0xf05c, 0xca90, 0x248f, 0x2dcc, 0xbd6a, 0x1, 0x0);
        gbc.writeMem(0x6169, { 0xcb, 0x36 });
        gbc.writeMem(0xbd6a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf05c);
        EXPECT(gbc.pc(), 0x616b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6a), 0xc4);
        // CB 36 02EC
        gbc.setState(0x80a7, 0x261a, 0xc0f0, 0xfeee, 0x9203, 0xaa12, 0x1, 0x1);
        gbc.writeMem(0x80a7, { 0xcb, 0x36 });
        gbc.writeMem(0xaa12, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x261a);
        EXPECT(gbc.pc(), 0x80a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a7), 0xcb);
        EXPECT(gbc.readMem(0x80a8), 0x36);
        EXPECT(gbc.readMem(0xaa12), 0x2a);
        // CB 36 02ED
        gbc.setState(0xa88d, 0x4684, 0x70, 0xc117, 0x565d, 0x7cd8, 0x0, 0x0);
        gbc.writeMem(0x7cd8, { 0x11 });
        gbc.writeMem(0xa88d, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4684);
        EXPECT(gbc.pc(), 0xa88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa88d), 0xcb);
        EXPECT(gbc.readMem(0xa88e), 0x36);
        // CB 36 02F0
        gbc.setState(0xb397, 0x4813, 0xd7b0, 0x718, 0xbfae, 0x3e95, 0x1, 0x1);
        gbc.writeMem(0x3e95, { 0x33 });
        gbc.writeMem(0xb397, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4813);
        EXPECT(gbc.pc(), 0xb399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb397), 0xcb);
        EXPECT(gbc.readMem(0xb398), 0x36);
        // CB 36 02F1
        gbc.setState(0xcacf, 0x9ac0, 0xb080, 0xa4bd, 0xfd9d, 0xe6fd, 0x1, 0x0);
        gbc.writeMem(0xcacf, { 0xcb, 0x36 });
        gbc.writeMem(0xe6fd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9ac0);
        EXPECT(gbc.pc(), 0xcad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcacf), 0xcb);
        EXPECT(gbc.readMem(0xcad0), 0x36);
        EXPECT(gbc.readMem(0xe6fd), 0xf9);
        // CB 36 02F2
        gbc.setState(0x6d91, 0x96, 0xa090, 0xed40, 0xb162, 0xa0b1, 0x0, 0x1);
        gbc.writeMem(0x6d91, { 0xcb, 0x36 });
        gbc.writeMem(0xa0b1, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x96);
        EXPECT(gbc.pc(), 0x6d93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0b1), 0xa8);
        // CB 36 02F3
        gbc.setState(0x1202, 0x7ec7, 0xcd40, 0x24b4, 0x7833, 0xf2e6, 0x1, 0x1);
        gbc.writeMem(0x1202, { 0xcb, 0x36 });
        gbc.writeMem(0xf2e6, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7ec7);
        EXPECT(gbc.pc(), 0x1204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2e6), 0x1);
        // CB 36 02F4
        gbc.setState(0x35dd, 0x6ddc, 0x6d60, 0xcb43, 0xf4de, 0xeb1c, 0x1, 0x1);
        gbc.writeMem(0x35dd, { 0xcb, 0x36 });
        gbc.writeMem(0xeb1c, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x6ddc);
        EXPECT(gbc.pc(), 0x35df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb1c), 0x44);
        // CB 36 02F8
        gbc.setState(0xb806, 0x1740, 0xbc20, 0x8c47, 0xe07c, 0xeb14, 0x1, 0x1);
        gbc.writeMem(0xb806, { 0xcb, 0x36 });
        gbc.writeMem(0xeb14, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1740);
        EXPECT(gbc.pc(), 0xb808);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb806), 0xcb);
        EXPECT(gbc.readMem(0xb807), 0x36);
        EXPECT(gbc.readMem(0xeb14), 0xc8);
        // CB 36 02FA
        gbc.setState(0xed3, 0xf5b4, 0x6790, 0xda6e, 0x2551, 0xfc89, 0x0, 0x0);
        gbc.writeMem(0xed3, { 0xcb, 0x36 });
        gbc.writeMem(0xfc89, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf5b4);
        EXPECT(gbc.pc(), 0xed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc89), 0x41);
        // CB 36 02FC
        gbc.setState(0x667e, 0xd2d2, 0x3030, 0xa789, 0x9369, 0xad8c, 0x1, 0x1);
        gbc.writeMem(0x667e, { 0xcb, 0x36 });
        gbc.writeMem(0xad8c, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd2d2);
        EXPECT(gbc.pc(), 0x6680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8c), 0x18);
        // CB 36 02FF
        gbc.setState(0x8ed1, 0xeb64, 0xbf00, 0xd341, 0x5e2b, 0xe649, 0x1, 0x0);
        gbc.writeMem(0x8ed1, { 0xcb, 0x36 });
        gbc.writeMem(0xe649, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xeb64);
        EXPECT(gbc.pc(), 0x8ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed1), 0xcb);
        EXPECT(gbc.readMem(0x8ed2), 0x36);
        EXPECT(gbc.readMem(0xe649), 0x89);
        // CB 36 0303
        gbc.setState(0x7a2a, 0xe93d, 0x10b0, 0xf8c, 0x4048, 0xaa05, 0x0, 0x0);
        gbc.writeMem(0x7a2a, { 0xcb, 0x36 });
        gbc.writeMem(0xaa05, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe93d);
        EXPECT(gbc.pc(), 0x7a2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa05), 0x91);
        // CB 36 0306
        gbc.setState(0x4838, 0x5229, 0x3e10, 0xe181, 0x9e42, 0x99ab, 0x1, 0x0);
        gbc.writeMem(0x4838, { 0xcb, 0x36 });
        gbc.writeMem(0x99ab, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5229);
        EXPECT(gbc.pc(), 0x483a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ab), 0xbc);
        // CB 36 0307
        gbc.setState(0xba87, 0x2227, 0x77d0, 0x12bb, 0xe9db, 0xefba, 0x0, 0x0);
        gbc.writeMem(0xba87, { 0xcb, 0x36 });
        gbc.writeMem(0xefba, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2227);
        EXPECT(gbc.pc(), 0xba89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba87), 0xcb);
        EXPECT(gbc.readMem(0xba88), 0x36);
        EXPECT(gbc.readMem(0xefba), 0xc2);
        // CB 36 0309
        gbc.setState(0x4089, 0x3db3, 0x870, 0x9eb, 0x940f, 0x87c5, 0x1, 0x0);
        gbc.writeMem(0x4089, { 0xcb, 0x36 });
        gbc.writeMem(0x87c5, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3db3);
        EXPECT(gbc.pc(), 0x408b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c5), 0xec);
        // CB 36 030B
        gbc.setState(0x25fd, 0x7f6d, 0xeb90, 0x312a, 0x2569, 0xced0, 0x0, 0x0);
        gbc.writeMem(0x25fd, { 0xcb, 0x36 });
        gbc.writeMem(0xced0, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7f6d);
        EXPECT(gbc.pc(), 0x25ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xced0), 0xee);
        // CB 36 030D
        gbc.setState(0x185c, 0xe939, 0xefc0, 0x6d7b, 0x2e1c, 0xe105, 0x1, 0x0);
        gbc.writeMem(0x185c, { 0xcb, 0x36 });
        gbc.writeMem(0xe105, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe939);
        EXPECT(gbc.pc(), 0x185e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe105), 0xae);
        // CB 36 030E
        gbc.setState(0x7c8d, 0xbc3c, 0xddc0, 0xa4fb, 0x56c2, 0xaf45, 0x0, 0x0);
        gbc.writeMem(0x7c8d, { 0xcb, 0x36 });
        gbc.writeMem(0xaf45, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbc3c);
        EXPECT(gbc.pc(), 0x7c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf45), 0xfd);
        // CB 36 0313
        gbc.setState(0x5d6e, 0x2d4c, 0x6b0, 0x6a6d, 0x826b, 0xbbac, 0x0, 0x1);
        gbc.writeMem(0x5d6e, { 0xcb, 0x36 });
        gbc.writeMem(0xbbac, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2d4c);
        EXPECT(gbc.pc(), 0x5d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbac), 0x19);
        // CB 36 0314
        gbc.setState(0x997f, 0x2818, 0xb040, 0x9815, 0xb908, 0xfb07, 0x1, 0x1);
        gbc.writeMem(0x997f, { 0xcb, 0x36 });
        gbc.writeMem(0xfb07, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2818);
        EXPECT(gbc.pc(), 0x9981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x997f), 0xcb);
        EXPECT(gbc.readMem(0x9980), 0x36);
        EXPECT(gbc.readMem(0xfb07), 0xa7);
        // CB 36 0316
        gbc.setState(0x9c26, 0x4444, 0xc4d0, 0x5720, 0x96da, 0xd207, 0x0, 0x1);
        gbc.writeMem(0x9c26, { 0xcb, 0x36 });
        gbc.writeMem(0xd207, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4444);
        EXPECT(gbc.pc(), 0x9c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c26), 0xcb);
        EXPECT(gbc.readMem(0x9c27), 0x36);
        EXPECT(gbc.readMem(0xd207), 0x61);
        // CB 36 0317
        gbc.setState(0x814c, 0x8012, 0x18e0, 0xd5bd, 0xcf7f, 0x90c6, 0x0, 0x1);
        gbc.writeMem(0x814c, { 0xcb, 0x36 });
        gbc.writeMem(0x90c6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8012);
        EXPECT(gbc.pc(), 0x814e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x814c), 0xcb);
        EXPECT(gbc.readMem(0x814d), 0x36);
        EXPECT(gbc.readMem(0x90c6), 0x9c);
        // CB 36 0318
        gbc.setState(0xb7e2, 0xf501, 0x1cb0, 0x23e9, 0x416d, 0x92da, 0x1, 0x0);
        gbc.writeMem(0x92da, { 0xa6 });
        gbc.writeMem(0xb7e2, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf501);
        EXPECT(gbc.pc(), 0xb7e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92da), 0x6a);
        EXPECT(gbc.readMem(0xb7e2), 0xcb);
        EXPECT(gbc.readMem(0xb7e3), 0x36);
        // CB 36 0319
        gbc.setState(0x73e, 0x5c88, 0x9f80, 0x7bfa, 0x3e54, 0x7767, 0x0, 0x0);
        gbc.writeMem(0x73e, { 0xcb, 0x36 });
        gbc.writeMem(0x7767, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x5c88);
        EXPECT(gbc.pc(), 0x740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 031B
        gbc.setState(0xb42, 0xdd97, 0x4b80, 0xa400, 0x2055, 0xc964, 0x0, 0x0);
        gbc.writeMem(0xb42, { 0xcb, 0x36 });
        gbc.writeMem(0xc964, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdd97);
        EXPECT(gbc.pc(), 0xb44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc964), 0x51);
        // CB 36 031D
        gbc.setState(0x43d2, 0xc4a9, 0x7a60, 0x7614, 0xd579, 0xdb56, 0x0, 0x1);
        gbc.writeMem(0x43d2, { 0xcb, 0x36 });
        gbc.writeMem(0xdb56, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc4a9);
        EXPECT(gbc.pc(), 0x43d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb56), 0x4e);
        // CB 36 031F
        gbc.setState(0x4b33, 0xf32a, 0xe170, 0x96fb, 0xa97d, 0xc187, 0x1, 0x1);
        gbc.writeMem(0x4b33, { 0xcb, 0x36 });
        gbc.writeMem(0xc187, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf32a);
        EXPECT(gbc.pc(), 0x4b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc187), 0xad);
        // CB 36 0320
        gbc.setState(0x63fe, 0xa111, 0xa010, 0xf8f7, 0x9c4, 0xd8ea, 0x0, 0x1);
        gbc.writeMem(0x63fe, { 0xcb, 0x36 });
        gbc.writeMem(0xd8ea, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa111);
        EXPECT(gbc.pc(), 0x6400);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ea), 0x2c);
        // CB 36 0327
        gbc.setState(0x4bfd, 0x341, 0x5000, 0xc9ae, 0xe1b2, 0x269f, 0x1, 0x0);
        gbc.writeMem(0x269f, { 0xbb });
        gbc.writeMem(0x4bfd, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x341);
        EXPECT(gbc.pc(), 0x4bff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 032B
        gbc.setState(0xdbbb, 0xc519, 0x6550, 0x1e35, 0x87b2, 0xd672, 0x1, 0x1);
        gbc.writeMem(0xd672, { 0xb9 });
        gbc.writeMem(0xdbbb, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc519);
        EXPECT(gbc.pc(), 0xdbbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd672), 0x9b);
        EXPECT(gbc.readMem(0xdbbb), 0xcb);
        EXPECT(gbc.readMem(0xdbbc), 0x36);
        // CB 36 032C
        gbc.setState(0x4838, 0xdbb2, 0xd630, 0x3602, 0xb0be, 0xb619, 0x0, 0x0);
        gbc.writeMem(0x4838, { 0xcb, 0x36 });
        gbc.writeMem(0xb619, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdbb2);
        EXPECT(gbc.pc(), 0x483a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb619), 0x45);
        // CB 36 032D
        gbc.setState(0x3d43, 0xf593, 0xb00, 0x9eee, 0x74a0, 0xce51, 0x0, 0x1);
        gbc.writeMem(0x3d43, { 0xcb, 0x36 });
        gbc.writeMem(0xce51, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf593);
        EXPECT(gbc.pc(), 0x3d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce51), 0xf3);
        // CB 36 032F
        gbc.setState(0xc8a1, 0x1ec0, 0x32d0, 0xd3ad, 0x50b0, 0xa427, 0x1, 0x0);
        gbc.writeMem(0xa427, { 0xed });
        gbc.writeMem(0xc8a1, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1ec0);
        EXPECT(gbc.pc(), 0xc8a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa427), 0xde);
        EXPECT(gbc.readMem(0xc8a1), 0xcb);
        EXPECT(gbc.readMem(0xc8a2), 0x36);
        // CB 36 0330
        gbc.setState(0x9be2, 0x53a3, 0xc4c0, 0xa063, 0xa8b9, 0xa698, 0x1, 0x1);
        gbc.writeMem(0x9be2, { 0xcb, 0x36 });
        gbc.writeMem(0xa698, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x53a3);
        EXPECT(gbc.pc(), 0x9be4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be2), 0xcb);
        EXPECT(gbc.readMem(0x9be3), 0x36);
        EXPECT(gbc.readMem(0xa698), 0xd9);
        // CB 36 0334
        gbc.setState(0x7fab, 0xc058, 0x3a10, 0xc567, 0xb7ac, 0xe6a2, 0x0, 0x1);
        gbc.writeMem(0x7fab, { 0xcb, 0x36 });
        gbc.writeMem(0xe6a2, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc058);
        EXPECT(gbc.pc(), 0x7fad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a2), 0xec);
        // CB 36 0336
        gbc.setState(0xe07a, 0xcd6b, 0x60c0, 0x26cc, 0x3da4, 0x530a, 0x0, 0x0);
        gbc.writeMem(0x530a, { 0x44 });
        gbc.writeMem(0xe07a, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcd6b);
        EXPECT(gbc.pc(), 0xe07c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07a), 0xcb);
        EXPECT(gbc.readMem(0xe07b), 0x36);
        // CB 36 0337
        gbc.setState(0x1369, 0xf47, 0xb050, 0x3043, 0xd031, 0x1667, 0x0, 0x1);
        gbc.writeMem(0x1369, { 0xcb, 0x36 });
        gbc.writeMem(0x1667, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf47);
        EXPECT(gbc.pc(), 0x136b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0338
        gbc.setState(0x4a44, 0xbc45, 0x62f0, 0x34cc, 0x7b24, 0xe41f, 0x1, 0x0);
        gbc.writeMem(0x4a44, { 0xcb, 0x36 });
        gbc.writeMem(0xe41f, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xbc45);
        EXPECT(gbc.pc(), 0x4a46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe41f), 0xdd);
        // CB 36 0339
        gbc.setState(0xef8c, 0x21a9, 0x49f0, 0xc665, 0x7fab, 0xaba3, 0x1, 0x0);
        gbc.writeMem(0xaba3, { 0xe });
        gbc.writeMem(0xef8c, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x21a9);
        EXPECT(gbc.pc(), 0xef8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaba3), 0xe0);
        EXPECT(gbc.readMem(0xef8c), 0xcb);
        EXPECT(gbc.readMem(0xef8d), 0x36);
        // CB 36 033C
        gbc.setState(0x42fd, 0x2855, 0xc8e0, 0x69ea, 0x1e60, 0xc6dd, 0x0, 0x1);
        gbc.writeMem(0x42fd, { 0xcb, 0x36 });
        gbc.writeMem(0xc6dd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2855);
        EXPECT(gbc.pc(), 0x42ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6dd), 0x9a);
        // CB 36 033D
        gbc.setState(0x91c3, 0x6ac5, 0x3ab0, 0x4629, 0x6cee, 0xcf0c, 0x1, 0x0);
        gbc.writeMem(0x91c3, { 0xcb, 0x36 });
        gbc.writeMem(0xcf0c, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6ac5);
        EXPECT(gbc.pc(), 0x91c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c3), 0xcb);
        EXPECT(gbc.readMem(0x91c4), 0x36);
        EXPECT(gbc.readMem(0xcf0c), 0xb2);
        // CB 36 033E
        gbc.setState(0x7bc2, 0xd93, 0xbc60, 0xc931, 0xa9b9, 0xda30, 0x0, 0x0);
        gbc.writeMem(0x7bc2, { 0xcb, 0x36 });
        gbc.writeMem(0xda30, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd93);
        EXPECT(gbc.pc(), 0x7bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda30), 0x3);
        // CB 36 033F
        gbc.setState(0x59e8, 0x791f, 0xb3c0, 0x36d5, 0x37fb, 0x8850, 0x1, 0x0);
        gbc.writeMem(0x59e8, { 0xcb, 0x36 });
        gbc.writeMem(0x8850, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x791f);
        EXPECT(gbc.pc(), 0x59ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8850), 0x4c);
        // CB 36 0340
        gbc.setState(0xdb7a, 0xb4ed, 0xfe70, 0xc62d, 0x5afc, 0xcfe8, 0x0, 0x1);
        gbc.writeMem(0xcfe8, { 0xee });
        gbc.writeMem(0xdb7a, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb4ed);
        EXPECT(gbc.pc(), 0xdb7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe8), 0xee);
        EXPECT(gbc.readMem(0xdb7a), 0xcb);
        EXPECT(gbc.readMem(0xdb7b), 0x36);
        // CB 36 0341
        gbc.setState(0x126c, 0xc307, 0x40a0, 0x4fd, 0x8310, 0xe5c9, 0x0, 0x1);
        gbc.writeMem(0x126c, { 0xcb, 0x36 });
        gbc.writeMem(0xe5c9, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc307);
        EXPECT(gbc.pc(), 0x126e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c9), 0x79);
        // CB 36 0342
        gbc.setState(0xde37, 0x2852, 0x44d0, 0x5f05, 0xef96, 0xef7d, 0x1, 0x1);
        gbc.writeMem(0xde37, { 0xcb, 0x36 });
        gbc.writeMem(0xef7d, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2852);
        EXPECT(gbc.pc(), 0xde39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde37), 0xcb);
        EXPECT(gbc.readMem(0xde38), 0x36);
        EXPECT(gbc.readMem(0xef7d), 0x49);
        // CB 36 0343
        gbc.setState(0xb92b, 0xbae5, 0xeb50, 0x95f4, 0xb1c1, 0xcb21, 0x1, 0x0);
        gbc.writeMem(0xb92b, { 0xcb, 0x36 });
        gbc.writeMem(0xcb21, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xbae5);
        EXPECT(gbc.pc(), 0xb92d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb92b), 0xcb);
        EXPECT(gbc.readMem(0xb92c), 0x36);
        EXPECT(gbc.readMem(0xcb21), 0x2a);
        // CB 36 0347
        gbc.setState(0x1c00, 0xfb87, 0xac10, 0xd5a9, 0xbf74, 0xd85a, 0x0, 0x1);
        gbc.writeMem(0x1c00, { 0xcb, 0x36 });
        gbc.writeMem(0xd85a, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfb87);
        EXPECT(gbc.pc(), 0x1c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85a), 0x50);
        // CB 36 0348
        gbc.setState(0x4121, 0xde39, 0xeee0, 0x102, 0x40b, 0xe022, 0x0, 0x0);
        gbc.writeMem(0x4121, { 0xcb, 0x36 });
        gbc.writeMem(0xe022, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xde39);
        EXPECT(gbc.pc(), 0x4123);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe022), 0xdb);
        // CB 36 034A
        gbc.setState(0xe20e, 0x8921, 0xf6a0, 0x6c4a, 0xf359, 0xa781, 0x0, 0x0);
        gbc.writeMem(0xa781, { 0xca });
        gbc.writeMem(0xe20e, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8921);
        EXPECT(gbc.pc(), 0xe210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa781), 0xac);
        EXPECT(gbc.readMem(0xe20e), 0xcb);
        EXPECT(gbc.readMem(0xe20f), 0x36);
        // CB 36 034C
        gbc.setState(0x40ae, 0x5275, 0xa940, 0xea9e, 0x6952, 0x671b, 0x1, 0x1);
        gbc.writeMem(0x40ae, { 0xcb, 0x36 });
        gbc.writeMem(0x671b, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5275);
        EXPECT(gbc.pc(), 0x40b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 034D
        gbc.setState(0xa757, 0x6d6c, 0x9da0, 0x1169, 0x9b46, 0xd887, 0x0, 0x0);
        gbc.writeMem(0xa757, { 0xcb, 0x36 });
        gbc.writeMem(0xd887, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6d6c);
        EXPECT(gbc.pc(), 0xa759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa757), 0xcb);
        EXPECT(gbc.readMem(0xa758), 0x36);
        EXPECT(gbc.readMem(0xd887), 0x84);
        // CB 36 034E
        gbc.setState(0xbecb, 0x304b, 0x1f90, 0xa581, 0xaa15, 0xfcd4, 0x0, 0x0);
        gbc.writeMem(0xbecb, { 0xcb, 0x36 });
        gbc.writeMem(0xfcd4, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x304b);
        EXPECT(gbc.pc(), 0xbecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbecb), 0xcb);
        EXPECT(gbc.readMem(0xbecc), 0x36);
        EXPECT(gbc.readMem(0xfcd4), 0xc1);
        // CB 36 0350
        gbc.setState(0x99ef, 0x80dc, 0x9c80, 0xd7ad, 0xb723, 0xa8cf, 0x1, 0x0);
        gbc.writeMem(0x99ef, { 0xcb, 0x36 });
        gbc.writeMem(0xa8cf, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x80dc);
        EXPECT(gbc.pc(), 0x99f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ef), 0xcb);
        EXPECT(gbc.readMem(0x99f0), 0x36);
        EXPECT(gbc.readMem(0xa8cf), 0x6a);
        // CB 36 0351
        gbc.setState(0x6fe2, 0xcfb1, 0xdc80, 0xb3eb, 0xec0d, 0x887d, 0x0, 0x1);
        gbc.writeMem(0x6fe2, { 0xcb, 0x36 });
        gbc.writeMem(0x887d, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xcfb1);
        EXPECT(gbc.pc(), 0x6fe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x887d), 0xd6);
        // CB 36 0357
        gbc.setState(0x4308, 0x71e1, 0x4be0, 0x6d76, 0x6468, 0xa235, 0x0, 0x0);
        gbc.writeMem(0x4308, { 0xcb, 0x36 });
        gbc.writeMem(0xa235, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x71e1);
        EXPECT(gbc.pc(), 0x430a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa235), 0x16);
        // CB 36 0358
        gbc.setState(0x7b21, 0x157c, 0x7960, 0x3579, 0xf02f, 0x9ef7, 0x0, 0x1);
        gbc.writeMem(0x7b21, { 0xcb, 0x36 });
        gbc.writeMem(0x9ef7, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x157c);
        EXPECT(gbc.pc(), 0x7b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef7), 0xc0);
        // CB 36 035B
        gbc.setState(0x333e, 0x1dc2, 0x92e0, 0x3212, 0xb85, 0xafa5, 0x0, 0x0);
        gbc.writeMem(0x333e, { 0xcb, 0x36 });
        gbc.writeMem(0xafa5, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x1dc2);
        EXPECT(gbc.pc(), 0x3340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa5), 0xac);
        // CB 36 035D
        gbc.setState(0xc4f1, 0x723a, 0xbf40, 0x6bda, 0xddf9, 0xf9df, 0x0, 0x1);
        gbc.writeMem(0xc4f1, { 0xcb, 0x36 });
        gbc.writeMem(0xf9df, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x723a);
        EXPECT(gbc.pc(), 0xc4f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4f1), 0xcb);
        EXPECT(gbc.readMem(0xc4f2), 0x36);
        EXPECT(gbc.readMem(0xf9df), 0x3f);
        // CB 36 0360
        gbc.setState(0x93f2, 0xe7a8, 0x7770, 0x571, 0xd5da, 0xf8c9, 0x1, 0x0);
        gbc.writeMem(0x93f2, { 0xcb, 0x36 });
        gbc.writeMem(0xf8c9, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe7a8);
        EXPECT(gbc.pc(), 0x93f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f2), 0xcb);
        EXPECT(gbc.readMem(0x93f3), 0x36);
        EXPECT(gbc.readMem(0xf8c9), 0x46);
        // CB 36 0362
        gbc.setState(0x4d49, 0xb11d, 0xdfa0, 0xff2c, 0x8b7c, 0x844e, 0x0, 0x1);
        gbc.writeMem(0x4d49, { 0xcb, 0x36 });
        gbc.writeMem(0x844e, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb11d);
        EXPECT(gbc.pc(), 0x4d4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x844e), 0x5c);
        // CB 36 0363
        gbc.setState(0x5553, 0xb072, 0x11b0, 0x161b, 0x701a, 0x8954, 0x1, 0x0);
        gbc.writeMem(0x5553, { 0xcb, 0x36 });
        gbc.writeMem(0x8954, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb072);
        EXPECT(gbc.pc(), 0x5555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8954), 0x9f);
        // CB 36 0366
        gbc.setState(0xe6c6, 0x708d, 0x9f0, 0xbce3, 0xecf0, 0xbc11, 0x0, 0x1);
        gbc.writeMem(0xbc11, { 0xb0 });
        gbc.writeMem(0xe6c6, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x708d);
        EXPECT(gbc.pc(), 0xe6c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc11), 0xb);
        EXPECT(gbc.readMem(0xe6c6), 0xcb);
        EXPECT(gbc.readMem(0xe6c7), 0x36);
        // CB 36 0367
        gbc.setState(0x2ef2, 0xb806, 0xf1a0, 0x4847, 0xc4cf, 0xc420, 0x0, 0x0);
        gbc.writeMem(0x2ef2, { 0xcb, 0x36 });
        gbc.writeMem(0xc420, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb806);
        EXPECT(gbc.pc(), 0x2ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc420), 0x17);
        // CB 36 036F
        gbc.setState(0x1c44, 0xd559, 0x160, 0x65e9, 0x4fda, 0x89e5, 0x1, 0x0);
        gbc.writeMem(0x1c44, { 0xcb, 0x36 });
        gbc.writeMem(0x89e5, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd559);
        EXPECT(gbc.pc(), 0x1c46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e5), 0x99);
        // CB 36 0374
        gbc.setState(0x8f9e, 0x121b, 0xb5c0, 0xa4ca, 0x2101, 0xc5c3, 0x0, 0x0);
        gbc.writeMem(0x8f9e, { 0xcb, 0x36 });
        gbc.writeMem(0xc5c3, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x121b);
        EXPECT(gbc.pc(), 0x8fa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f9e), 0xcb);
        EXPECT(gbc.readMem(0x8f9f), 0x36);
        EXPECT(gbc.readMem(0xc5c3), 0x5e);
        // CB 36 0376
        gbc.setState(0xd886, 0x272a, 0x5e0, 0x1cd2, 0x8e35, 0xbbc6, 0x0, 0x0);
        gbc.writeMem(0xbbc6, { 0xcc });
        gbc.writeMem(0xd886, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x272a);
        EXPECT(gbc.pc(), 0xd888);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbc6), 0xcc);
        EXPECT(gbc.readMem(0xd886), 0xcb);
        EXPECT(gbc.readMem(0xd887), 0x36);
        // CB 36 0377
        gbc.setState(0x7e14, 0x448, 0x2590, 0x86c5, 0xd38e, 0xfdc8, 0x0, 0x1);
        gbc.writeMem(0x7e14, { 0xcb, 0x36 });
        gbc.writeMem(0xfdc8, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x448);
        EXPECT(gbc.pc(), 0x7e16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdc8), 0x91);
        // CB 36 037B
        gbc.setState(0x46bf, 0xf53c, 0x6b80, 0xd8a6, 0xe09e, 0xfebe, 0x0, 0x0);
        gbc.writeMem(0x46bf, { 0xcb, 0x36 });
        gbc.writeMem(0xfebe, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf53c);
        EXPECT(gbc.pc(), 0x46c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfebe), 0xc);
        // CB 36 037D
        gbc.setState(0xa5fe, 0xd63, 0xb4c0, 0xd138, 0xe569, 0xd482, 0x0, 0x0);
        gbc.writeMem(0xa5fe, { 0xcb, 0x36 });
        gbc.writeMem(0xd482, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd63);
        EXPECT(gbc.pc(), 0xa600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fe), 0xcb);
        EXPECT(gbc.readMem(0xa5ff), 0x36);
        EXPECT(gbc.readMem(0xd482), 0xd);
        // CB 36 037E
        gbc.setState(0x1c94, 0x6005, 0xd560, 0xb8c2, 0xfe04, 0xfd6e, 0x1, 0x0);
        gbc.writeMem(0x1c94, { 0xcb, 0x36 });
        gbc.writeMem(0xfd6e, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6005);
        EXPECT(gbc.pc(), 0x1c96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd6e), 0x4f);
        // CB 36 037F
        gbc.setState(0x4fce, 0x7448, 0x7180, 0x2590, 0xc3fa, 0xb6b5, 0x0, 0x1);
        gbc.writeMem(0x4fce, { 0xcb, 0x36 });
        gbc.writeMem(0xb6b5, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7448);
        EXPECT(gbc.pc(), 0x4fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b5), 0x3a);
        // CB 36 0381
        gbc.setState(0x1bf6, 0x9953, 0xc760, 0x6de2, 0x2c07, 0xa172, 0x0, 0x0);
        gbc.writeMem(0x1bf6, { 0xcb, 0x36 });
        gbc.writeMem(0xa172, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9953);
        EXPECT(gbc.pc(), 0x1bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa172), 0xa3);
        // CB 36 0382
        gbc.setState(0x487a, 0x1090, 0xb110, 0x5682, 0xa396, 0xddec, 0x0, 0x0);
        gbc.writeMem(0x487a, { 0xcb, 0x36 });
        gbc.writeMem(0xddec, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1090);
        EXPECT(gbc.pc(), 0x487c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddec), 0x4a);
        // CB 36 0383
        gbc.setState(0x1798, 0x907, 0x9600, 0x2e9d, 0x3eca, 0xac59, 0x1, 0x0);
        gbc.writeMem(0x1798, { 0xcb, 0x36 });
        gbc.writeMem(0xac59, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x907);
        EXPECT(gbc.pc(), 0x179a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac59), 0x6d);
        // CB 36 0384
        gbc.setState(0x30c0, 0xb80, 0xefc0, 0x66ee, 0x6660, 0xfa3b, 0x1, 0x0);
        gbc.writeMem(0x30c0, { 0xcb, 0x36 });
        gbc.writeMem(0xfa3b, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb80);
        EXPECT(gbc.pc(), 0x30c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa3b), 0xb4);
        // CB 36 0385
        gbc.setState(0x8df4, 0xdb1f, 0xaea0, 0xb128, 0x1c56, 0x36ce, 0x0, 0x1);
        gbc.writeMem(0x36ce, { 0x33 });
        gbc.writeMem(0x8df4, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xdb1f);
        EXPECT(gbc.pc(), 0x8df6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8df4), 0xcb);
        EXPECT(gbc.readMem(0x8df5), 0x36);
        // CB 36 0389
        gbc.setState(0xaad8, 0xa16f, 0x57c0, 0xfbe2, 0xfefc, 0x9cbd, 0x0, 0x1);
        gbc.writeMem(0x9cbd, { 0x4c });
        gbc.writeMem(0xaad8, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa16f);
        EXPECT(gbc.pc(), 0xaada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cbd), 0xc4);
        EXPECT(gbc.readMem(0xaad8), 0xcb);
        EXPECT(gbc.readMem(0xaad9), 0x36);
        // CB 36 038B
        gbc.setState(0x9fcd, 0x2c70, 0xe6d0, 0xef48, 0xd9b4, 0xff04, 0x0, 0x0);
        gbc.writeMem(0x9fcd, { 0xcb, 0x36 });
        gbc.writeMem(0xff04, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2c70);
        EXPECT(gbc.pc(), 0x9fcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fcd), 0xcb);
        EXPECT(gbc.readMem(0x9fce), 0x36);
        EXPECT(gbc.readMem(0xff04), 0x95);
        // CB 36 038C
        gbc.setState(0x891a, 0x71c5, 0x6dd0, 0x2a15, 0x860d, 0xd3b5, 0x1, 0x1);
        gbc.writeMem(0x891a, { 0xcb, 0x36 });
        gbc.writeMem(0xd3b5, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x71c5);
        EXPECT(gbc.pc(), 0x891c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x891a), 0xcb);
        EXPECT(gbc.readMem(0x891b), 0x36);
        EXPECT(gbc.readMem(0xd3b5), 0x72);
        // CB 36 038E
        gbc.setState(0x42bb, 0x7114, 0xe2e0, 0x5946, 0xec06, 0xb81b, 0x1, 0x1);
        gbc.writeMem(0x42bb, { 0xcb, 0x36 });
        gbc.writeMem(0xb81b, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x7114);
        EXPECT(gbc.pc(), 0x42bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb81b), 0xf);
        // CB 36 038F
        gbc.setState(0x43e3, 0xa940, 0x3f10, 0xd58d, 0xe9cf, 0x75dd, 0x1, 0x1);
        gbc.writeMem(0x43e3, { 0xcb, 0x36 });
        gbc.writeMem(0x75dd, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa940);
        EXPECT(gbc.pc(), 0x43e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 36 0394
        gbc.setState(0xe98c, 0xac64, 0x60a0, 0x9ce9, 0x801a, 0x81e4, 0x1, 0x0);
        gbc.writeMem(0x81e4, { 0x5 });
        gbc.writeMem(0xe98c, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xac64);
        EXPECT(gbc.pc(), 0xe98e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e4), 0x50);
        EXPECT(gbc.readMem(0xe98c), 0xcb);
        EXPECT(gbc.readMem(0xe98d), 0x36);
        // CB 36 0396
        gbc.setState(0xc3c1, 0xe163, 0xd000, 0xd3b5, 0xdce6, 0xa5b5, 0x0, 0x1);
        gbc.writeMem(0xa5b5, { 0xc5 });
        gbc.writeMem(0xc3c1, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe163);
        EXPECT(gbc.pc(), 0xc3c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5b5), 0x5c);
        EXPECT(gbc.readMem(0xc3c1), 0xcb);
        EXPECT(gbc.readMem(0xc3c2), 0x36);
        // CB 36 0397
        gbc.setState(0x53a2, 0xb8e4, 0xcfd0, 0xe21a, 0x29a, 0xd3b7, 0x0, 0x0);
        gbc.writeMem(0x53a2, { 0xcb, 0x36 });
        gbc.writeMem(0xd3b7, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb8e4);
        EXPECT(gbc.pc(), 0x53a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b7), 0x4e);
        // CB 36 0399
        gbc.setState(0x9a8b, 0x127f, 0x98e0, 0xb00a, 0x33c, 0xc4ae, 0x1, 0x0);
        gbc.writeMem(0x9a8b, { 0xcb, 0x36 });
        gbc.writeMem(0xc4ae, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x127f);
        EXPECT(gbc.pc(), 0x9a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a8b), 0xcb);
        EXPECT(gbc.readMem(0x9a8c), 0x36);
        EXPECT(gbc.readMem(0xc4ae), 0x2c);
        // CB 36 039B
        gbc.setState(0x477f, 0xf70, 0xc270, 0xf67b, 0x340d, 0xd4f5, 0x1, 0x0);
        gbc.writeMem(0x477f, { 0xcb, 0x36 });
        gbc.writeMem(0xd4f5, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf70);
        EXPECT(gbc.pc(), 0x4781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f5), 0x8e);
        // CB 36 039C
        gbc.setState(0x3773, 0x1cab, 0x9270, 0x9deb, 0xbd4e, 0xd266, 0x0, 0x1);
        gbc.writeMem(0x3773, { 0xcb, 0x36 });
        gbc.writeMem(0xd266, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1cab);
        EXPECT(gbc.pc(), 0x3775);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd266), 0x9d);
        // CB 36 039E
        gbc.setState(0x720a, 0x1d95, 0x5910, 0x5dca, 0x574c, 0xb7e6, 0x0, 0x1);
        gbc.writeMem(0x720a, { 0xcb, 0x36 });
        gbc.writeMem(0xb7e6, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1d95);
        EXPECT(gbc.pc(), 0x720c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e6), 0x81);
        // CB 36 039F
        gbc.setState(0xe304, 0x44c0, 0xbb60, 0xfddf, 0x1017, 0xa312, 0x1, 0x1);
        gbc.writeMem(0xa312, { 0x5f });
        gbc.writeMem(0xe304, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x44c0);
        EXPECT(gbc.pc(), 0xe306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa312), 0xf5);
        EXPECT(gbc.readMem(0xe304), 0xcb);
        EXPECT(gbc.readMem(0xe305), 0x36);
        // CB 36 03A0
        gbc.setState(0xea29, 0x52cf, 0xf50, 0x62e3, 0x713d, 0x835f, 0x1, 0x1);
        gbc.writeMem(0x835f, { 0x27 });
        gbc.writeMem(0xea29, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x52cf);
        EXPECT(gbc.pc(), 0xea2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x835f), 0x72);
        EXPECT(gbc.readMem(0xea29), 0xcb);
        EXPECT(gbc.readMem(0xea2a), 0x36);
        // CB 36 03A1
        gbc.setState(0xbae8, 0x9c1a, 0x4b50, 0xb1bf, 0x8899, 0xbde8, 0x0, 0x0);
        gbc.writeMem(0xbae8, { 0xcb, 0x36 });
        gbc.writeMem(0xbde8, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9c1a);
        EXPECT(gbc.pc(), 0xbaea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbae8), 0xcb);
        EXPECT(gbc.readMem(0xbae9), 0x36);
        EXPECT(gbc.readMem(0xbde8), 0x33);
        // CB 36 03A2
        gbc.setState(0xc76b, 0x68f2, 0x4040, 0x449d, 0x2d96, 0xc313, 0x0, 0x1);
        gbc.writeMem(0xc313, { 0xea });
        gbc.writeMem(0xc76b, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x68f2);
        EXPECT(gbc.pc(), 0xc76d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc313), 0xae);
        EXPECT(gbc.readMem(0xc76b), 0xcb);
        EXPECT(gbc.readMem(0xc76c), 0x36);
        // CB 36 03A3
        gbc.setState(0x8fe4, 0xaa6a, 0x28e0, 0xcf25, 0x19b3, 0xe74f, 0x1, 0x1);
        gbc.writeMem(0x8fe4, { 0xcb, 0x36 });
        gbc.writeMem(0xe74f, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xaa6a);
        EXPECT(gbc.pc(), 0x8fe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe4), 0xcb);
        EXPECT(gbc.readMem(0x8fe5), 0x36);
        EXPECT(gbc.readMem(0xe74f), 0x2b);
        // CB 36 03A5
        gbc.setState(0xce35, 0x9990, 0xacd0, 0x44a, 0xa9c9, 0xcd36, 0x0, 0x1);
        gbc.writeMem(0xcd36, { 0x72 });
        gbc.writeMem(0xce35, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9990);
        EXPECT(gbc.pc(), 0xce37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd36), 0x27);
        EXPECT(gbc.readMem(0xce35), 0xcb);
        EXPECT(gbc.readMem(0xce36), 0x36);
        // CB 36 03A8
        gbc.setState(0xe3b7, 0xc4dd, 0x5d30, 0x8503, 0xbaae, 0x32ed, 0x0, 0x0);
        gbc.writeMem(0x32ed, { 0xff });
        gbc.writeMem(0xe3b7, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc4dd);
        EXPECT(gbc.pc(), 0xe3b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b7), 0xcb);
        EXPECT(gbc.readMem(0xe3b8), 0x36);
        // CB 36 03A9
        gbc.setState(0x4b9b, 0xaf1d, 0xaf80, 0xe098, 0x17d1, 0x8534, 0x0, 0x1);
        gbc.writeMem(0x4b9b, { 0xcb, 0x36 });
        gbc.writeMem(0x8534, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xaf1d);
        EXPECT(gbc.pc(), 0x4b9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8534), 0x83);
        // CB 36 03AA
        gbc.setState(0xa7e1, 0xfcda, 0x9d80, 0xfb1e, 0xa69b, 0xded7, 0x0, 0x1);
        gbc.writeMem(0xa7e1, { 0xcb, 0x36 });
        gbc.writeMem(0xded7, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xfcda);
        EXPECT(gbc.pc(), 0xa7e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e1), 0xcb);
        EXPECT(gbc.readMem(0xa7e2), 0x36);
        EXPECT(gbc.readMem(0xded7), 0xe4);
        // CB 36 03AC
        gbc.setState(0x9ba1, 0x76e, 0xe780, 0xa7d1, 0xbf8, 0xe6f3, 0x0, 0x0);
        gbc.writeMem(0x9ba1, { 0xcb, 0x36 });
        gbc.writeMem(0xe6f3, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x76e);
        EXPECT(gbc.pc(), 0x9ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba1), 0xcb);
        EXPECT(gbc.readMem(0x9ba2), 0x36);
        EXPECT(gbc.readMem(0xe6f3), 0x7f);
        // CB 36 03AD
        gbc.setState(0x757d, 0x61c7, 0x5810, 0x57a2, 0xe68c, 0xe4c1, 0x1, 0x1);
        gbc.writeMem(0x757d, { 0xcb, 0x36 });
        gbc.writeMem(0xe4c1, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x61c7);
        EXPECT(gbc.pc(), 0x757f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c1), 0xb2);
        // CB 36 03B8
        gbc.setState(0x798b, 0xc8d0, 0x45e0, 0x4802, 0x7aa0, 0xa5d5, 0x1, 0x1);
        gbc.writeMem(0x798b, { 0xcb, 0x36 });
        gbc.writeMem(0xa5d5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc8d0);
        EXPECT(gbc.pc(), 0x798d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5d5), 0xdb);
        // CB 36 03B9
        gbc.setState(0x6e12, 0xb01d, 0x23c0, 0x9a25, 0xbd56, 0xaf4a, 0x0, 0x0);
        gbc.writeMem(0x6e12, { 0xcb, 0x36 });
        gbc.writeMem(0xaf4a, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb01d);
        EXPECT(gbc.pc(), 0x6e14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf4a), 0xf);
        // CB 36 03BB
        gbc.setState(0x98e5, 0xc4e9, 0x1a40, 0x7dbd, 0x207d, 0xfcb3, 0x0, 0x1);
        gbc.writeMem(0x98e5, { 0xcb, 0x36 });
        gbc.writeMem(0xfcb3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc4e9);
        EXPECT(gbc.pc(), 0x98e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e5), 0xcb);
        EXPECT(gbc.readMem(0x98e6), 0x36);
        EXPECT(gbc.readMem(0xfcb3), 0x48);
        // CB 36 03BC
        gbc.setState(0xde9d, 0x49b5, 0xe880, 0x45a2, 0x9e60, 0x83dc, 0x1, 0x0);
        gbc.writeMem(0x83dc, { 0x98 });
        gbc.writeMem(0xde9d, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x49b5);
        EXPECT(gbc.pc(), 0xde9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83dc), 0x89);
        EXPECT(gbc.readMem(0xde9d), 0xcb);
        EXPECT(gbc.readMem(0xde9e), 0x36);
        // CB 36 03BE
        gbc.setState(0xe615, 0x1a67, 0x4bd0, 0xa17e, 0x9483, 0xf6fa, 0x0, 0x0);
        gbc.writeMem(0xe615, { 0xcb, 0x36 });
        gbc.writeMem(0xf6fa, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1a67);
        EXPECT(gbc.pc(), 0xe617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe615), 0xcb);
        EXPECT(gbc.readMem(0xe616), 0x36);
        EXPECT(gbc.readMem(0xf6fa), 0x5b);
        // CB 36 03C3
        gbc.setState(0x237a, 0xb883, 0xfa80, 0xdadf, 0x139, 0xfd5a, 0x0, 0x0);
        gbc.writeMem(0x237a, { 0xcb, 0x36 });
        gbc.writeMem(0xfd5a, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb883);
        EXPECT(gbc.pc(), 0x237c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd5a), 0x46);
        // CB 36 03C4
        gbc.setState(0x65c7, 0x4ba6, 0x43a0, 0x355c, 0x1188, 0xed02, 0x0, 0x0);
        gbc.writeMem(0x65c7, { 0xcb, 0x36 });
        gbc.writeMem(0xed02, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4ba6);
        EXPECT(gbc.pc(), 0x65c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed02), 0x77);
        // CB 36 03C5
        gbc.setState(0xecaf, 0x2b0, 0x6460, 0x6640, 0x894d, 0xacab, 0x1, 0x1);
        gbc.writeMem(0xacab, { 0xa7 });
        gbc.writeMem(0xecaf, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2b0);
        EXPECT(gbc.pc(), 0xecb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacab), 0x7a);
        EXPECT(gbc.readMem(0xecaf), 0xcb);
        EXPECT(gbc.readMem(0xecb0), 0x36);
        // CB 36 03C6
        gbc.setState(0x9817, 0xc15f, 0x8570, 0xcdf8, 0xd7dc, 0xd52d, 0x0, 0x1);
        gbc.writeMem(0x9817, { 0xcb, 0x36 });
        gbc.writeMem(0xd52d, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc15f);
        EXPECT(gbc.pc(), 0x9819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9817), 0xcb);
        EXPECT(gbc.readMem(0x9818), 0x36);
        EXPECT(gbc.readMem(0xd52d), 0x6e);
        // CB 36 03C7
        gbc.setState(0xae6b, 0x10b, 0x480, 0xd5a4, 0x636, 0xf3e6, 0x1, 0x1);
        gbc.writeMem(0xae6b, { 0xcb, 0x36 });
        gbc.writeMem(0xf3e6, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x10b);
        EXPECT(gbc.pc(), 0xae6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae6b), 0xcb);
        EXPECT(gbc.readMem(0xae6c), 0x36);
        EXPECT(gbc.readMem(0xf3e6), 0x3c);
        // CB 36 03C8
        gbc.setState(0x72a1, 0x8f45, 0x700, 0x23a2, 0xa996, 0x9054, 0x1, 0x0);
        gbc.writeMem(0x72a1, { 0xcb, 0x36 });
        gbc.writeMem(0x9054, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8f45);
        EXPECT(gbc.pc(), 0x72a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9054), 0xe7);
        // CB 36 03C9
        gbc.setState(0x2d38, 0x7f20, 0x7ab0, 0xaa97, 0x9afc, 0xdf0f, 0x0, 0x0);
        gbc.writeMem(0x2d38, { 0xcb, 0x36 });
        gbc.writeMem(0xdf0f, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7f20);
        EXPECT(gbc.pc(), 0x2d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf0f), 0x2f);
        // CB 36 03CB
        gbc.setState(0xcfa3, 0xff64, 0x2440, 0xed1e, 0xeb30, 0x82b0, 0x1, 0x0);
        gbc.writeMem(0x82b0, { 0x11 });
        gbc.writeMem(0xcfa3, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xff64);
        EXPECT(gbc.pc(), 0xcfa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b0), 0x11);
        EXPECT(gbc.readMem(0xcfa3), 0xcb);
        EXPECT(gbc.readMem(0xcfa4), 0x36);
        // CB 36 03CC
        gbc.setState(0xb490, 0x50a5, 0x3300, 0x1585, 0x2f94, 0x91d6, 0x1, 0x0);
        gbc.writeMem(0x91d6, { 0x65 });
        gbc.writeMem(0xb490, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x50a5);
        EXPECT(gbc.pc(), 0xb492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91d6), 0x56);
        EXPECT(gbc.readMem(0xb490), 0xcb);
        EXPECT(gbc.readMem(0xb491), 0x36);
        // CB 36 03CD
        gbc.setState(0x2d6e, 0x4469, 0xfdf0, 0xd684, 0x11df, 0xb763, 0x0, 0x1);
        gbc.writeMem(0x2d6e, { 0xcb, 0x36 });
        gbc.writeMem(0xb763, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4469);
        EXPECT(gbc.pc(), 0x2d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb763), 0x1f);
        // CB 36 03D0
        gbc.setState(0x92fc, 0xe0ab, 0xe460, 0x3cf6, 0xb084, 0xadf0, 0x1, 0x1);
        gbc.writeMem(0x92fc, { 0xcb, 0x36 });
        gbc.writeMem(0xadf0, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe0ab);
        EXPECT(gbc.pc(), 0x92fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92fc), 0xcb);
        EXPECT(gbc.readMem(0x92fd), 0x36);
        EXPECT(gbc.readMem(0xadf0), 0xb0);
        // CB 36 03D2
        gbc.setState(0x482a, 0x209b, 0xd2b0, 0x9569, 0x2ab2, 0xde96, 0x0, 0x1);
        gbc.writeMem(0x482a, { 0xcb, 0x36 });
        gbc.writeMem(0xde96, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x209b);
        EXPECT(gbc.pc(), 0x482c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde96), 0x6b);
        // CB 36 03D4
        gbc.setState(0x7496, 0xd3b0, 0xb3b0, 0xb52a, 0xaea0, 0xb682, 0x1, 0x0);
        gbc.writeMem(0x7496, { 0xcb, 0x36 });
        gbc.writeMem(0xb682, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd3b0);
        EXPECT(gbc.pc(), 0x7498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb682), 0x13);
        // CB 36 03D5
        gbc.setState(0x459a, 0xe624, 0xb00, 0x963c, 0xe620, 0xb70a, 0x1, 0x1);
        gbc.writeMem(0x459a, { 0xcb, 0x36 });
        gbc.writeMem(0xb70a, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe624);
        EXPECT(gbc.pc(), 0x459c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70a), 0xa9);
        // CB 36 03D7
        gbc.setState(0x5631, 0xd48b, 0xe240, 0x89a6, 0xa78e, 0xb4af, 0x0, 0x0);
        gbc.writeMem(0x5631, { 0xcb, 0x36 });
        gbc.writeMem(0xb4af, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd48b);
        EXPECT(gbc.pc(), 0x5633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4af), 0x91);
        // CB 36 03DC
        gbc.setState(0x3b37, 0xc587, 0x22e0, 0xbd52, 0x70cc, 0xa4f3, 0x0, 0x0);
        gbc.writeMem(0x3b37, { 0xcb, 0x36 });
        gbc.writeMem(0xa4f3, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc587);
        EXPECT(gbc.pc(), 0x3b39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f3), 0xcd);
        // CB 36 03DF
        gbc.setState(0x422f, 0xe710, 0x19a0, 0x964e, 0x743c, 0x9c6a, 0x1, 0x1);
        gbc.writeMem(0x422f, { 0xcb, 0x36 });
        gbc.writeMem(0x9c6a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe710);
        EXPECT(gbc.pc(), 0x4231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c6a), 0x2a);
        // CB 36 03E0
        gbc.setState(0x6f36, 0x3d3e, 0x7bc0, 0x938e, 0x8871, 0xbef3, 0x1, 0x0);
        gbc.writeMem(0x6f36, { 0xcb, 0x36 });
        gbc.writeMem(0xbef3, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3d3e);
        EXPECT(gbc.pc(), 0x6f38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbef3), 0x5b);
        // CB 36 03E4
        gbc.setState(0xd720, 0xdfdd, 0x5650, 0x9be2, 0xd974, 0xd5a2, 0x0, 0x0);
        gbc.writeMem(0xd5a2, { 0x6d });
        gbc.writeMem(0xd720, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xdfdd);
        EXPECT(gbc.pc(), 0xd722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a2), 0xd6);
        EXPECT(gbc.readMem(0xd720), 0xcb);
        EXPECT(gbc.readMem(0xd721), 0x36);
        // CB 36 03E5
        gbc.setState(0x8d86, 0xf6e, 0x1d10, 0x8bad, 0xd743, 0x84d6, 0x1, 0x0);
        gbc.writeMem(0x84d6, { 0xfd });
        gbc.writeMem(0x8d86, { 0xcb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf6e);
        EXPECT(gbc.pc(), 0x8d88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d6), 0xdf);
        EXPECT(gbc.readMem(0x8d86), 0xcb);
        EXPECT(gbc.readMem(0x8d87), 0x36);
    }
