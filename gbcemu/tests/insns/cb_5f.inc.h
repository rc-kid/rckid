    TEST(gbcemu, opcode_cb_5f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 5F 0000
        gbc.setState(0x6c82, 0x28e5, 0xa60, 0x35de, 0x9cb, 0xe4d7, 0x0, 0x1);
        gbc.writeMem(0x6c82, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x28e5);
        EXPECT(gbc.pc(), 0x6c84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0001
        gbc.setState(0x6d0, 0x8ce2, 0x1450, 0xa4dc, 0x57de, 0xcdd8, 0x1, 0x0);
        gbc.writeMem(0x6d0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x8ce2);
        EXPECT(gbc.pc(), 0x6d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0002
        gbc.setState(0x69fc, 0x2bd6, 0x2120, 0x2d09, 0x4fec, 0xda2a, 0x1, 0x0);
        gbc.writeMem(0x69fc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2bd6);
        EXPECT(gbc.pc(), 0x69fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0004
        gbc.setState(0xcdaa, 0x1e9b, 0x17c0, 0xc10e, 0xf050, 0x281e, 0x0, 0x0);
        gbc.writeMem(0xcdaa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1e9b);
        EXPECT(gbc.pc(), 0xcdac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdaa), 0xcb);
        EXPECT(gbc.readMem(0xcdab), 0x5f);
        // CB 5F 0005
        gbc.setState(0x372b, 0xba12, 0x24f0, 0xea13, 0x40fe, 0x8632, 0x1, 0x1);
        gbc.writeMem(0x372b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xba12);
        EXPECT(gbc.pc(), 0x372d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0006
        gbc.setState(0x9932, 0xb8dd, 0xd8f0, 0xa4ea, 0x834b, 0xaab3, 0x0, 0x0);
        gbc.writeMem(0x9932, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb8dd);
        EXPECT(gbc.pc(), 0x9934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9932), 0xcb);
        EXPECT(gbc.readMem(0x9933), 0x5f);
        // CB 5F 0007
        gbc.setState(0x7a3c, 0x59d3, 0x89e0, 0x6471, 0x19f5, 0xb37a, 0x0, 0x0);
        gbc.writeMem(0x7a3c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x59d3);
        EXPECT(gbc.pc(), 0x7a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0008
        gbc.setState(0xa8fd, 0x89d6, 0x1910, 0x5d07, 0xf99c, 0x6e6d, 0x0, 0x0);
        gbc.writeMem(0xa8fd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x89d6);
        EXPECT(gbc.pc(), 0xa8ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8fd), 0xcb);
        EXPECT(gbc.readMem(0xa8fe), 0x5f);
        // CB 5F 0009
        gbc.setState(0xdba4, 0xcc1, 0xa8e0, 0x79c5, 0xdc4b, 0xeef8, 0x1, 0x0);
        gbc.writeMem(0xdba4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xcc1);
        EXPECT(gbc.pc(), 0xdba6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba4), 0xcb);
        EXPECT(gbc.readMem(0xdba5), 0x5f);
        // CB 5F 000A
        gbc.setState(0xb5e7, 0xd6c4, 0xd860, 0x5909, 0x3968, 0xaaf7, 0x1, 0x1);
        gbc.writeMem(0xb5e7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd6c4);
        EXPECT(gbc.pc(), 0xb5e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5e7), 0xcb);
        EXPECT(gbc.readMem(0xb5e8), 0x5f);
        // CB 5F 000B
        gbc.setState(0x44fe, 0x18f2, 0x29f0, 0xcc11, 0x2b1c, 0x896e, 0x0, 0x1);
        gbc.writeMem(0x44fe, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x18f2);
        EXPECT(gbc.pc(), 0x4500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 000C
        gbc.setState(0x6fca, 0x5269, 0x22c0, 0x8866, 0x5405, 0x87c1, 0x0, 0x0);
        gbc.writeMem(0x6fca, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5269);
        EXPECT(gbc.pc(), 0x6fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 000D
        gbc.setState(0x768d, 0x9f7c, 0x7770, 0x5fb, 0x30b3, 0x4e52, 0x0, 0x1);
        gbc.writeMem(0x768d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9f7c);
        EXPECT(gbc.pc(), 0x768f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 000E
        gbc.setState(0x4ee7, 0xc55a, 0x17d0, 0x4362, 0xbd09, 0xb4a9, 0x0, 0x1);
        gbc.writeMem(0x4ee7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc55a);
        EXPECT(gbc.pc(), 0x4ee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 000F
        gbc.setState(0x5517, 0x7368, 0x7490, 0x6471, 0xf873, 0x8e1, 0x1, 0x0);
        gbc.writeMem(0x5517, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7368);
        EXPECT(gbc.pc(), 0x5519);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0010
        gbc.setState(0x45ba, 0xa4d5, 0x7210, 0xeeaa, 0x919e, 0x8e56, 0x1, 0x0);
        gbc.writeMem(0x45ba, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa4d5);
        EXPECT(gbc.pc(), 0x45bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0011
        gbc.setState(0x806a, 0x4817, 0xac70, 0xe713, 0x9bb7, 0x904f, 0x0, 0x0);
        gbc.writeMem(0x806a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4817);
        EXPECT(gbc.pc(), 0x806c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x806a), 0xcb);
        EXPECT(gbc.readMem(0x806b), 0x5f);
        // CB 5F 0012
        gbc.setState(0x712d, 0x9b44, 0xd5f0, 0x419a, 0x6c34, 0x7ea2, 0x0, 0x1);
        gbc.writeMem(0x712d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9b44);
        EXPECT(gbc.pc(), 0x712f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0013
        gbc.setState(0x961c, 0xfd5b, 0x8df0, 0x115f, 0x8720, 0xab82, 0x0, 0x1);
        gbc.writeMem(0x961c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xfd5b);
        EXPECT(gbc.pc(), 0x961e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x961c), 0xcb);
        EXPECT(gbc.readMem(0x961d), 0x5f);
        // CB 5F 0014
        gbc.setState(0x8732, 0x1ae9, 0xf2b0, 0x964b, 0xb158, 0xc5df, 0x0, 0x0);
        gbc.writeMem(0x8732, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x1ae9);
        EXPECT(gbc.pc(), 0x8734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8732), 0xcb);
        EXPECT(gbc.readMem(0x8733), 0x5f);
        // CB 5F 0015
        gbc.setState(0x2c61, 0x8657, 0x5b00, 0x8a29, 0x5eff, 0x2f42, 0x1, 0x1);
        gbc.writeMem(0x2c61, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8657);
        EXPECT(gbc.pc(), 0x2c63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0016
        gbc.setState(0xe20d, 0xe439, 0x5d30, 0x38a7, 0x8c1d, 0xfd35, 0x0, 0x1);
        gbc.writeMem(0xe20d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe439);
        EXPECT(gbc.pc(), 0xe20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe20d), 0xcb);
        EXPECT(gbc.readMem(0xe20e), 0x5f);
        // CB 5F 0017
        gbc.setState(0x54a2, 0x7ef1, 0xb7e0, 0x172e, 0x86c6, 0xfc2d, 0x0, 0x0);
        gbc.writeMem(0x54a2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7ef1);
        EXPECT(gbc.pc(), 0x54a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0018
        gbc.setState(0xd5f7, 0x96c2, 0xdda0, 0x8566, 0x451, 0x6333, 0x0, 0x0);
        gbc.writeMem(0xd5f7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x96c2);
        EXPECT(gbc.pc(), 0xd5f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f7), 0xcb);
        EXPECT(gbc.readMem(0xd5f8), 0x5f);
        // CB 5F 0019
        gbc.setState(0x4c50, 0xb474, 0x50b0, 0x82eb, 0xa8ca, 0xf224, 0x0, 0x0);
        gbc.writeMem(0x4c50, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb474);
        EXPECT(gbc.pc(), 0x4c52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 001A
        gbc.setState(0xdabc, 0x7146, 0x62f0, 0x65b8, 0x6bce, 0xeabd, 0x1, 0x1);
        gbc.writeMem(0xdabc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7146);
        EXPECT(gbc.pc(), 0xdabe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdabc), 0xcb);
        EXPECT(gbc.readMem(0xdabd), 0x5f);
        // CB 5F 001C
        gbc.setState(0x1345, 0xdfa9, 0xcad0, 0x41d9, 0xcedb, 0xb658, 0x1, 0x1);
        gbc.writeMem(0x1345, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xdfa9);
        EXPECT(gbc.pc(), 0x1347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 001D
        gbc.setState(0x5ec4, 0x2964, 0xcf70, 0x36c0, 0x74cd, 0xe595, 0x0, 0x1);
        gbc.writeMem(0x5ec4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2964);
        EXPECT(gbc.pc(), 0x5ec6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 001E
        gbc.setState(0x62d2, 0xc8b2, 0x5d20, 0xf548, 0x31d8, 0xfb52, 0x1, 0x1);
        gbc.writeMem(0x62d2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc8b2);
        EXPECT(gbc.pc(), 0x62d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 001F
        gbc.setState(0x15b3, 0x9483, 0xa170, 0x95d6, 0x688, 0x7246, 0x1, 0x0);
        gbc.writeMem(0x15b3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9483);
        EXPECT(gbc.pc(), 0x15b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0020
        gbc.setState(0xa882, 0x34b7, 0x59e0, 0xa573, 0x1e69, 0xd49d, 0x0, 0x0);
        gbc.writeMem(0xa882, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x34b7);
        EXPECT(gbc.pc(), 0xa884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa882), 0xcb);
        EXPECT(gbc.readMem(0xa883), 0x5f);
        // CB 5F 0021
        gbc.setState(0x8308, 0xa9d0, 0xc9c0, 0x7f69, 0x205a, 0xdc58, 0x1, 0x1);
        gbc.writeMem(0x8308, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa9d0);
        EXPECT(gbc.pc(), 0x830a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8308), 0xcb);
        EXPECT(gbc.readMem(0x8309), 0x5f);
        // CB 5F 0022
        gbc.setState(0x7882, 0xfe14, 0xc5a0, 0xfd40, 0x5ea9, 0x2948, 0x0, 0x0);
        gbc.writeMem(0x7882, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfe14);
        EXPECT(gbc.pc(), 0x7884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0023
        gbc.setState(0xde44, 0x6e7, 0xdd00, 0x2d17, 0x330c, 0xcb98, 0x1, 0x1);
        gbc.writeMem(0xde44, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6e7);
        EXPECT(gbc.pc(), 0xde46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde44), 0xcb);
        EXPECT(gbc.readMem(0xde45), 0x5f);
        // CB 5F 0024
        gbc.setState(0x385a, 0x7f10, 0x6290, 0x379, 0x5a29, 0x5853, 0x1, 0x1);
        gbc.writeMem(0x385a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7f10);
        EXPECT(gbc.pc(), 0x385c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0025
        gbc.setState(0x6d90, 0xf59e, 0xc410, 0x87b6, 0x6b3a, 0x73d, 0x0, 0x1);
        gbc.writeMem(0x6d90, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf59e);
        EXPECT(gbc.pc(), 0x6d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0026
        gbc.setState(0xc950, 0x163c, 0xa1f0, 0x2150, 0x9506, 0x4b7e, 0x0, 0x1);
        gbc.writeMem(0xc950, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x163c);
        EXPECT(gbc.pc(), 0xc952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc950), 0xcb);
        EXPECT(gbc.readMem(0xc951), 0x5f);
        // CB 5F 0028
        gbc.setState(0x6357, 0xee35, 0x33c0, 0x249c, 0xc679, 0x55d1, 0x0, 0x1);
        gbc.writeMem(0x6357, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xee35);
        EXPECT(gbc.pc(), 0x6359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0029
        gbc.setState(0x3d16, 0xfded, 0xa530, 0xd936, 0x5563, 0xebff, 0x1, 0x1);
        gbc.writeMem(0x3d16, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfded);
        EXPECT(gbc.pc(), 0x3d18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 002B
        gbc.setState(0x38ea, 0x88f3, 0x8240, 0x463d, 0x861f, 0x2ab2, 0x0, 0x0);
        gbc.writeMem(0x38ea, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x88f3);
        EXPECT(gbc.pc(), 0x38ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 002C
        gbc.setState(0x268a, 0xe3cc, 0x34a0, 0xc6f8, 0x7d76, 0x93ed, 0x0, 0x1);
        gbc.writeMem(0x268a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe3cc);
        EXPECT(gbc.pc(), 0x268c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 002D
        gbc.setState(0xeabb, 0x5465, 0x1d60, 0xaa7b, 0x165d, 0xba26, 0x1, 0x0);
        gbc.writeMem(0xeabb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5465);
        EXPECT(gbc.pc(), 0xeabd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeabb), 0xcb);
        EXPECT(gbc.readMem(0xeabc), 0x5f);
        // CB 5F 002E
        gbc.setState(0xb418, 0x7c3f, 0xaa70, 0x553b, 0x9f37, 0x68b0, 0x1, 0x1);
        gbc.writeMem(0xb418, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7c3f);
        EXPECT(gbc.pc(), 0xb41a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb418), 0xcb);
        EXPECT(gbc.readMem(0xb419), 0x5f);
        // CB 5F 002F
        gbc.setState(0x2f56, 0xb39c, 0xa630, 0x511c, 0xd122, 0x9391, 0x1, 0x0);
        gbc.writeMem(0x2f56, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb39c);
        EXPECT(gbc.pc(), 0x2f58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0030
        gbc.setState(0x1a48, 0x199f, 0x6010, 0xd855, 0x4f79, 0xe148, 0x1, 0x1);
        gbc.writeMem(0x1a48, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x199f);
        EXPECT(gbc.pc(), 0x1a4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0031
        gbc.setState(0x9c3d, 0x512b, 0x6df0, 0x8320, 0x39ae, 0x53b5, 0x0, 0x1);
        gbc.writeMem(0x9c3d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x512b);
        EXPECT(gbc.pc(), 0x9c3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c3d), 0xcb);
        EXPECT(gbc.readMem(0x9c3e), 0x5f);
        // CB 5F 0032
        gbc.setState(0xdced, 0xc61, 0x6020, 0xe227, 0x7469, 0x2d7a, 0x0, 0x0);
        gbc.writeMem(0xdced, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc61);
        EXPECT(gbc.pc(), 0xdcef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdced), 0xcb);
        EXPECT(gbc.readMem(0xdcee), 0x5f);
        // CB 5F 0033
        gbc.setState(0x83f0, 0x4460, 0x2ee0, 0x67af, 0x6ed3, 0x66b0, 0x1, 0x0);
        gbc.writeMem(0x83f0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4460);
        EXPECT(gbc.pc(), 0x83f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f0), 0xcb);
        EXPECT(gbc.readMem(0x83f1), 0x5f);
        // CB 5F 0034
        gbc.setState(0x7654, 0x6db3, 0x4d70, 0x847a, 0xb0ca, 0x549c, 0x1, 0x0);
        gbc.writeMem(0x7654, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6db3);
        EXPECT(gbc.pc(), 0x7656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0035
        gbc.setState(0x1fe, 0x22c5, 0x8850, 0x7b9a, 0xb799, 0x8cde, 0x1, 0x0);
        gbc.writeMem(0x1fe, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x22c5);
        EXPECT(gbc.pc(), 0x200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0036
        gbc.setState(0x4ade, 0x7a55, 0x3920, 0xb97e, 0x372c, 0x18e1, 0x0, 0x0);
        gbc.writeMem(0x4ade, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7a55);
        EXPECT(gbc.pc(), 0x4ae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0037
        gbc.setState(0x5aa, 0x4cf7, 0xc7f0, 0xd2cd, 0xac95, 0x5051, 0x1, 0x0);
        gbc.writeMem(0x5aa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4cf7);
        EXPECT(gbc.pc(), 0x5ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0038
        gbc.setState(0x2e0b, 0xa87c, 0x4490, 0x50c, 0xc745, 0x6cda, 0x1, 0x0);
        gbc.writeMem(0x2e0b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa87c);
        EXPECT(gbc.pc(), 0x2e0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0039
        gbc.setState(0x98d8, 0x186a, 0x6a40, 0xe84e, 0xee73, 0xca06, 0x0, 0x1);
        gbc.writeMem(0x98d8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x186a);
        EXPECT(gbc.pc(), 0x98da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d8), 0xcb);
        EXPECT(gbc.readMem(0x98d9), 0x5f);
        // CB 5F 003A
        gbc.setState(0xa321, 0xdbcc, 0x2e30, 0x1cbe, 0x48a2, 0x8dc8, 0x0, 0x1);
        gbc.writeMem(0xa321, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdbcc);
        EXPECT(gbc.pc(), 0xa323);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa321), 0xcb);
        EXPECT(gbc.readMem(0xa322), 0x5f);
        // CB 5F 003B
        gbc.setState(0x1de9, 0xc33a, 0xb840, 0x7c47, 0x9485, 0xa468, 0x1, 0x1);
        gbc.writeMem(0x1de9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc33a);
        EXPECT(gbc.pc(), 0x1deb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 003C
        gbc.setState(0x44eb, 0x993b, 0x4410, 0x3643, 0xe790, 0x4b3e, 0x0, 0x0);
        gbc.writeMem(0x44eb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x993b);
        EXPECT(gbc.pc(), 0x44ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 003D
        gbc.setState(0xe636, 0x9fa9, 0xde90, 0x483a, 0xc1af, 0x5a95, 0x0, 0x1);
        gbc.writeMem(0xe636, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9fa9);
        EXPECT(gbc.pc(), 0xe638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe636), 0xcb);
        EXPECT(gbc.readMem(0xe637), 0x5f);
        // CB 5F 003E
        gbc.setState(0x7a8e, 0xd3b5, 0x9230, 0xb41f, 0x9d69, 0x3141, 0x0, 0x0);
        gbc.writeMem(0x7a8e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd3b5);
        EXPECT(gbc.pc(), 0x7a90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 003F
        gbc.setState(0x42b0, 0xe453, 0xff00, 0x9907, 0x3e4c, 0x9200, 0x0, 0x1);
        gbc.writeMem(0x42b0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe453);
        EXPECT(gbc.pc(), 0x42b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0040
        gbc.setState(0x1698, 0xa353, 0xff30, 0xd8d1, 0xea0a, 0xd96c, 0x1, 0x1);
        gbc.writeMem(0x1698, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa353);
        EXPECT(gbc.pc(), 0x169a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0041
        gbc.setState(0x2d63, 0x50cb, 0x5ff0, 0x1f0e, 0x427f, 0xf835, 0x0, 0x0);
        gbc.writeMem(0x2d63, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x50cb);
        EXPECT(gbc.pc(), 0x2d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0042
        gbc.setState(0x1137, 0x88ab, 0x2b10, 0x13bb, 0x279c, 0xb377, 0x0, 0x1);
        gbc.writeMem(0x1137, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x88ab);
        EXPECT(gbc.pc(), 0x1139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0043
        gbc.setState(0xdad0, 0x65d, 0x2050, 0x533d, 0x9e78, 0x6b7e, 0x1, 0x1);
        gbc.writeMem(0xdad0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x65d);
        EXPECT(gbc.pc(), 0xdad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdad0), 0xcb);
        EXPECT(gbc.readMem(0xdad1), 0x5f);
        // CB 5F 0044
        gbc.setState(0x6908, 0x12f9, 0x7690, 0xb19, 0xeadd, 0x292e, 0x1, 0x0);
        gbc.writeMem(0x6908, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x12f9);
        EXPECT(gbc.pc(), 0x690a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0045
        gbc.setState(0x9954, 0x5518, 0x2af0, 0xf52, 0xc1ec, 0x9191, 0x0, 0x1);
        gbc.writeMem(0x9954, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5518);
        EXPECT(gbc.pc(), 0x9956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9954), 0xcb);
        EXPECT(gbc.readMem(0x9955), 0x5f);
        // CB 5F 0046
        gbc.setState(0x99fd, 0xa91e, 0x10, 0x2fd, 0xc5d, 0xd75a, 0x0, 0x0);
        gbc.writeMem(0x99fd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa91e);
        EXPECT(gbc.pc(), 0x99ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99fd), 0xcb);
        EXPECT(gbc.readMem(0x99fe), 0x5f);
        // CB 5F 0047
        gbc.setState(0x9317, 0xafc7, 0x4240, 0xe4dd, 0x15eb, 0xc8ac, 0x0, 0x1);
        gbc.writeMem(0x9317, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xafc7);
        EXPECT(gbc.pc(), 0x9319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9317), 0xcb);
        EXPECT(gbc.readMem(0x9318), 0x5f);
        // CB 5F 0048
        gbc.setState(0xde05, 0x73a, 0xc5f0, 0x5a78, 0x298c, 0x2fc3, 0x1, 0x0);
        gbc.writeMem(0xde05, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x73a);
        EXPECT(gbc.pc(), 0xde07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde05), 0xcb);
        EXPECT(gbc.readMem(0xde06), 0x5f);
        // CB 5F 0049
        gbc.setState(0x63a9, 0xd1f5, 0xca30, 0x359f, 0xb741, 0x2cf3, 0x1, 0x1);
        gbc.writeMem(0x63a9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xd1f5);
        EXPECT(gbc.pc(), 0x63ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 004A
        gbc.setState(0x81fc, 0xe5ba, 0xb180, 0x828b, 0xbd47, 0x1e3c, 0x0, 0x1);
        gbc.writeMem(0x81fc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe5ba);
        EXPECT(gbc.pc(), 0x81fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81fc), 0xcb);
        EXPECT(gbc.readMem(0x81fd), 0x5f);
        // CB 5F 004B
        gbc.setState(0xa970, 0xc4e, 0x69d0, 0xde71, 0x3ce8, 0x6014, 0x0, 0x1);
        gbc.writeMem(0xa970, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc4e);
        EXPECT(gbc.pc(), 0xa972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa970), 0xcb);
        EXPECT(gbc.readMem(0xa971), 0x5f);
        // CB 5F 004C
        gbc.setState(0xb6b6, 0xa809, 0x45b0, 0x86ab, 0xacc0, 0x348d, 0x0, 0x1);
        gbc.writeMem(0xb6b6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa809);
        EXPECT(gbc.pc(), 0xb6b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6b6), 0xcb);
        EXPECT(gbc.readMem(0xb6b7), 0x5f);
        // CB 5F 004D
        gbc.setState(0x841e, 0x7f75, 0xc670, 0xe682, 0x14fb, 0xe5fb, 0x0, 0x0);
        gbc.writeMem(0x841e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7f75);
        EXPECT(gbc.pc(), 0x8420);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x841e), 0xcb);
        EXPECT(gbc.readMem(0x841f), 0x5f);
        // CB 5F 004E
        gbc.setState(0x7efd, 0xdd07, 0x89d0, 0xb8a0, 0x8057, 0xc3eb, 0x1, 0x1);
        gbc.writeMem(0x7efd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdd07);
        EXPECT(gbc.pc(), 0x7eff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 004F
        gbc.setState(0x3d83, 0xa7e, 0x8fa0, 0x7fb2, 0xe13c, 0x1873, 0x1, 0x0);
        gbc.writeMem(0x3d83, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa7e);
        EXPECT(gbc.pc(), 0x3d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0050
        gbc.setState(0x3dac, 0x8e9c, 0x8670, 0x4b9b, 0x24fc, 0x57b4, 0x1, 0x1);
        gbc.writeMem(0x3dac, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8e9c);
        EXPECT(gbc.pc(), 0x3dae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0051
        gbc.setState(0x4a4c, 0x1290, 0x1ad0, 0x5716, 0xbf42, 0x68c4, 0x0, 0x1);
        gbc.writeMem(0x4a4c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1290);
        EXPECT(gbc.pc(), 0x4a4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0052
        gbc.setState(0x49cf, 0xeb18, 0x3290, 0x99fc, 0x168c, 0xbd52, 0x1, 0x0);
        gbc.writeMem(0x49cf, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xeb18);
        EXPECT(gbc.pc(), 0x49d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0053
        gbc.setState(0x3643, 0x578, 0x8850, 0xa24d, 0x5889, 0xf063, 0x0, 0x0);
        gbc.writeMem(0x3643, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x578);
        EXPECT(gbc.pc(), 0x3645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0054
        gbc.setState(0xf4b, 0xc194, 0xaf60, 0xccc9, 0x4a6a, 0xa5e, 0x0, 0x0);
        gbc.writeMem(0xf4b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc194);
        EXPECT(gbc.pc(), 0xf4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0055
        gbc.setState(0xb3d8, 0x121b, 0xc5b0, 0x3c9b, 0x163b, 0x2be6, 0x1, 0x1);
        gbc.writeMem(0xb3d8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x121b);
        EXPECT(gbc.pc(), 0xb3da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d8), 0xcb);
        EXPECT(gbc.readMem(0xb3d9), 0x5f);
        // CB 5F 0056
        gbc.setState(0x3b4c, 0x1091, 0x8190, 0x9fec, 0x184, 0xa344, 0x1, 0x0);
        gbc.writeMem(0x3b4c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x1091);
        EXPECT(gbc.pc(), 0x3b4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0057
        gbc.setState(0x3d53, 0x614, 0x8910, 0xb42c, 0x854, 0xe302, 0x1, 0x0);
        gbc.writeMem(0x3d53, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x614);
        EXPECT(gbc.pc(), 0x3d55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0058
        gbc.setState(0x8d62, 0x9bc6, 0x60b0, 0xff6b, 0xfbee, 0xf66b, 0x0, 0x0);
        gbc.writeMem(0x8d62, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x9bc6);
        EXPECT(gbc.pc(), 0x8d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d62), 0xcb);
        EXPECT(gbc.readMem(0x8d63), 0x5f);
        // CB 5F 0059
        gbc.setState(0xa618, 0x26d6, 0xf910, 0x72a1, 0x5f0d, 0x529e, 0x0, 0x0);
        gbc.writeMem(0xa618, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x26d6);
        EXPECT(gbc.pc(), 0xa61a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa618), 0xcb);
        EXPECT(gbc.readMem(0xa619), 0x5f);
        // CB 5F 005A
        gbc.setState(0x2798, 0xdc6, 0x9ad0, 0x472a, 0xa5a1, 0xe8fc, 0x1, 0x0);
        gbc.writeMem(0x2798, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xdc6);
        EXPECT(gbc.pc(), 0x279a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 005B
        gbc.setState(0x2f9a, 0xdaa1, 0xbbe0, 0x89c2, 0x77ce, 0xd8c8, 0x0, 0x1);
        gbc.writeMem(0x2f9a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdaa1);
        EXPECT(gbc.pc(), 0x2f9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 005C
        gbc.setState(0xd0e1, 0x4b4, 0x78a0, 0x737a, 0x3ef8, 0xee54, 0x0, 0x0);
        gbc.writeMem(0xd0e1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4b4);
        EXPECT(gbc.pc(), 0xd0e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0e1), 0xcb);
        EXPECT(gbc.readMem(0xd0e2), 0x5f);
        // CB 5F 005D
        gbc.setState(0x7ad6, 0x1511, 0x3770, 0x110b, 0x725f, 0x45ab, 0x0, 0x1);
        gbc.writeMem(0x7ad6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1511);
        EXPECT(gbc.pc(), 0x7ad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 005E
        gbc.setState(0xca61, 0xd065, 0xea40, 0xc89c, 0x26e1, 0x67e8, 0x0, 0x1);
        gbc.writeMem(0xca61, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd065);
        EXPECT(gbc.pc(), 0xca63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca61), 0xcb);
        EXPECT(gbc.readMem(0xca62), 0x5f);
        // CB 5F 005F
        gbc.setState(0xed91, 0x5295, 0x3070, 0x507e, 0xef1a, 0xbcf2, 0x0, 0x1);
        gbc.writeMem(0xed91, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5295);
        EXPECT(gbc.pc(), 0xed93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed91), 0xcb);
        EXPECT(gbc.readMem(0xed92), 0x5f);
        // CB 5F 0060
        gbc.setState(0x371e, 0xbbf7, 0xc2b0, 0x4bb3, 0xab1c, 0x6527, 0x1, 0x1);
        gbc.writeMem(0x371e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbbf7);
        EXPECT(gbc.pc(), 0x3720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0061
        gbc.setState(0xc2fa, 0xe794, 0xc0b0, 0x6f47, 0xeab5, 0x8ad2, 0x0, 0x1);
        gbc.writeMem(0xc2fa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe794);
        EXPECT(gbc.pc(), 0xc2fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2fa), 0xcb);
        EXPECT(gbc.readMem(0xc2fb), 0x5f);
        // CB 5F 0062
        gbc.setState(0x9707, 0xe43b, 0x19d0, 0x1f90, 0xb8a3, 0x5c74, 0x0, 0x0);
        gbc.writeMem(0x9707, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe43b);
        EXPECT(gbc.pc(), 0x9709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9707), 0xcb);
        EXPECT(gbc.readMem(0x9708), 0x5f);
        // CB 5F 0063
        gbc.setState(0x1cf1, 0x9434, 0xbab0, 0xba27, 0x89b, 0x1d8b, 0x0, 0x1);
        gbc.writeMem(0x1cf1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9434);
        EXPECT(gbc.pc(), 0x1cf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0064
        gbc.setState(0x4e48, 0xf331, 0x620, 0xe13c, 0x43c, 0xfba9, 0x0, 0x0);
        gbc.writeMem(0x4e48, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf331);
        EXPECT(gbc.pc(), 0x4e4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0065
        gbc.setState(0xecab, 0xbe71, 0x1b70, 0x221e, 0xa72d, 0x67af, 0x0, 0x0);
        gbc.writeMem(0xecab, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xbe71);
        EXPECT(gbc.pc(), 0xecad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecab), 0xcb);
        EXPECT(gbc.readMem(0xecac), 0x5f);
        // CB 5F 0066
        gbc.setState(0x6a82, 0x2e8f, 0xa120, 0xcba8, 0xbb72, 0x426d, 0x0, 0x1);
        gbc.writeMem(0x6a82, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2e8f);
        EXPECT(gbc.pc(), 0x6a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0067
        gbc.setState(0xc328, 0x7c4c, 0x350, 0x14ba, 0x2a2e, 0xf292, 0x0, 0x1);
        gbc.writeMem(0xc328, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7c4c);
        EXPECT(gbc.pc(), 0xc32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc328), 0xcb);
        EXPECT(gbc.readMem(0xc329), 0x5f);
        // CB 5F 0068
        gbc.setState(0xae12, 0x727d, 0x8df0, 0x5116, 0x32a1, 0xee9a, 0x0, 0x0);
        gbc.writeMem(0xae12, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x727d);
        EXPECT(gbc.pc(), 0xae14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae12), 0xcb);
        EXPECT(gbc.readMem(0xae13), 0x5f);
        // CB 5F 0069
        gbc.setState(0x3695, 0xf1de, 0x6420, 0xb573, 0x7c11, 0x4469, 0x0, 0x0);
        gbc.writeMem(0x3695, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf1de);
        EXPECT(gbc.pc(), 0x3697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 006A
        gbc.setState(0x4e, 0x3580, 0xb8a0, 0x5d11, 0x935d, 0x7435, 0x0, 0x0);
        gbc.writeMem(0x4e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3580);
        EXPECT(gbc.pc(), 0x50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 006B
        gbc.setState(0xdf8, 0x446f, 0xa140, 0x395a, 0xc5fa, 0x1ec5, 0x0, 0x1);
        gbc.writeMem(0xdf8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x446f);
        EXPECT(gbc.pc(), 0xdfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 006C
        gbc.setState(0x654d, 0xcd46, 0xd800, 0x5dba, 0x31e9, 0xc251, 0x1, 0x1);
        gbc.writeMem(0x654d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xcd46);
        EXPECT(gbc.pc(), 0x654f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 006D
        gbc.setState(0x921b, 0xc0cb, 0x50b0, 0xfaac, 0xf947, 0x10fe, 0x0, 0x0);
        gbc.writeMem(0x921b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc0cb);
        EXPECT(gbc.pc(), 0x921d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x921b), 0xcb);
        EXPECT(gbc.readMem(0x921c), 0x5f);
        // CB 5F 006E
        gbc.setState(0x724f, 0x7b34, 0xfdb0, 0x3999, 0xd437, 0x55c5, 0x0, 0x0);
        gbc.writeMem(0x724f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7b34);
        EXPECT(gbc.pc(), 0x7251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 006F
        gbc.setState(0x7914, 0x121, 0x3420, 0x6491, 0xa563, 0xc4e0, 0x1, 0x1);
        gbc.writeMem(0x7914, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x121);
        EXPECT(gbc.pc(), 0x7916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0070
        gbc.setState(0x4f9e, 0xb352, 0x5fe0, 0xde02, 0xd95a, 0x3b7f, 0x1, 0x1);
        gbc.writeMem(0x4f9e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb352);
        EXPECT(gbc.pc(), 0x4fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0071
        gbc.setState(0x5cee, 0xb6c2, 0x8c50, 0xb52, 0xe785, 0xa6b, 0x1, 0x0);
        gbc.writeMem(0x5cee, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb6c2);
        EXPECT(gbc.pc(), 0x5cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0072
        gbc.setState(0x2705, 0xc4bf, 0xf9b0, 0x5961, 0xb8d8, 0xdbf6, 0x1, 0x0);
        gbc.writeMem(0x2705, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc4bf);
        EXPECT(gbc.pc(), 0x2707);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0073
        gbc.setState(0x5f8b, 0xa943, 0x9e40, 0xe4ee, 0xc2ca, 0xc493, 0x0, 0x1);
        gbc.writeMem(0x5f8b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa943);
        EXPECT(gbc.pc(), 0x5f8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0074
        gbc.setState(0xce34, 0x8805, 0x140, 0x55fc, 0xec2, 0xfa99, 0x1, 0x0);
        gbc.writeMem(0xce34, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8805);
        EXPECT(gbc.pc(), 0xce36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce34), 0xcb);
        EXPECT(gbc.readMem(0xce35), 0x5f);
        // CB 5F 0076
        gbc.setState(0xe1cd, 0x7914, 0x76a0, 0x4dc7, 0xc37f, 0x6aa9, 0x1, 0x0);
        gbc.writeMem(0xe1cd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7914);
        EXPECT(gbc.pc(), 0xe1cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1cd), 0xcb);
        EXPECT(gbc.readMem(0xe1ce), 0x5f);
        // CB 5F 0077
        gbc.setState(0x98f2, 0xac02, 0x3230, 0x8c7f, 0xcf0b, 0xce, 0x1, 0x0);
        gbc.writeMem(0x98f2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xac02);
        EXPECT(gbc.pc(), 0x98f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f2), 0xcb);
        EXPECT(gbc.readMem(0x98f3), 0x5f);
        // CB 5F 0078
        gbc.setState(0x181d, 0x2128, 0xb4a0, 0x8380, 0x8817, 0x8afb, 0x0, 0x0);
        gbc.writeMem(0x181d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2128);
        EXPECT(gbc.pc(), 0x181f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0079
        gbc.setState(0xefbe, 0x8a8a, 0xbe90, 0xfcf6, 0x299c, 0x8985, 0x0, 0x0);
        gbc.writeMem(0xefbe, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8a8a);
        EXPECT(gbc.pc(), 0xefc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefbe), 0xcb);
        EXPECT(gbc.readMem(0xefbf), 0x5f);
        // CB 5F 007A
        gbc.setState(0x6758, 0x624c, 0xa8d0, 0x7744, 0xf2d9, 0x9736, 0x1, 0x1);
        gbc.writeMem(0x6758, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x624c);
        EXPECT(gbc.pc(), 0x675a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 007B
        gbc.setState(0x174a, 0xe330, 0xe160, 0x8904, 0x8bfc, 0x49c1, 0x0, 0x0);
        gbc.writeMem(0x174a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe330);
        EXPECT(gbc.pc(), 0x174c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 007C
        gbc.setState(0x3c40, 0xdb27, 0xc390, 0x7aab, 0x632, 0x32ca, 0x1, 0x1);
        gbc.writeMem(0x3c40, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xdb27);
        EXPECT(gbc.pc(), 0x3c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 007D
        gbc.setState(0x152e, 0xb852, 0x76a0, 0xf91d, 0x220c, 0x7329, 0x0, 0x0);
        gbc.writeMem(0x152e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb852);
        EXPECT(gbc.pc(), 0x1530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 007E
        gbc.setState(0xf09, 0x7ea5, 0x6b90, 0x6aa7, 0x7626, 0xa89a, 0x0, 0x1);
        gbc.writeMem(0xf09, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7ea5);
        EXPECT(gbc.pc(), 0xf0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 007F
        gbc.setState(0xafa4, 0x12e9, 0xf0e0, 0x1098, 0xff0a, 0x9fb6, 0x0, 0x0);
        gbc.writeMem(0xafa4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x12e9);
        EXPECT(gbc.pc(), 0xafa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa4), 0xcb);
        EXPECT(gbc.readMem(0xafa5), 0x5f);
        // CB 5F 0080
        gbc.setState(0x16be, 0xa4cb, 0x9980, 0xce8f, 0x71ed, 0xd84c, 0x1, 0x0);
        gbc.writeMem(0x16be, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa4cb);
        EXPECT(gbc.pc(), 0x16c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0081
        gbc.setState(0x4a26, 0x4a01, 0xb050, 0x4ad9, 0x30fd, 0x4390, 0x1, 0x0);
        gbc.writeMem(0x4a26, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4a01);
        EXPECT(gbc.pc(), 0x4a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0082
        gbc.setState(0xc74, 0xc950, 0x20f0, 0x7076, 0x3dc4, 0x1a56, 0x0, 0x1);
        gbc.writeMem(0xc74, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc950);
        EXPECT(gbc.pc(), 0xc76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0083
        gbc.setState(0xeea6, 0xa8ea, 0x58d0, 0xf9eb, 0x4736, 0xafaa, 0x0, 0x1);
        gbc.writeMem(0xeea6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa8ea);
        EXPECT(gbc.pc(), 0xeea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea6), 0xcb);
        EXPECT(gbc.readMem(0xeea7), 0x5f);
        // CB 5F 0084
        gbc.setState(0x87dc, 0x61b6, 0x3f0, 0xfbf, 0x8727, 0xffbd, 0x0, 0x1);
        gbc.writeMem(0x87dc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x61b6);
        EXPECT(gbc.pc(), 0x87de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87dc), 0xcb);
        EXPECT(gbc.readMem(0x87dd), 0x5f);
        // CB 5F 0085
        gbc.setState(0x2672, 0xb7bd, 0xb860, 0x55d6, 0x58c6, 0x6745, 0x1, 0x1);
        gbc.writeMem(0x2672, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xb7bd);
        EXPECT(gbc.pc(), 0x2674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0086
        gbc.setState(0x6d0a, 0x27bf, 0x5370, 0x1007, 0xb483, 0xd2ba, 0x0, 0x0);
        gbc.writeMem(0x6d0a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x27bf);
        EXPECT(gbc.pc(), 0x6d0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0087
        gbc.setState(0xc35d, 0xc4e7, 0x3da0, 0xe0f8, 0x5170, 0xe87c, 0x0, 0x0);
        gbc.writeMem(0xc35d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc4e7);
        EXPECT(gbc.pc(), 0xc35f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc35d), 0xcb);
        EXPECT(gbc.readMem(0xc35e), 0x5f);
        // CB 5F 0088
        gbc.setState(0x5515, 0x6030, 0x2180, 0x1978, 0x66a5, 0x9ac0, 0x0, 0x1);
        gbc.writeMem(0x5515, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6030);
        EXPECT(gbc.pc(), 0x5517);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0089
        gbc.setState(0x4149, 0x694d, 0xb000, 0xc93b, 0xeea4, 0xa222, 0x1, 0x0);
        gbc.writeMem(0x4149, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x694d);
        EXPECT(gbc.pc(), 0x414b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 008A
        gbc.setState(0xab27, 0x98c2, 0x8390, 0xd8ce, 0x4020, 0x80af, 0x1, 0x0);
        gbc.writeMem(0xab27, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x98c2);
        EXPECT(gbc.pc(), 0xab29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab27), 0xcb);
        EXPECT(gbc.readMem(0xab28), 0x5f);
        // CB 5F 008B
        gbc.setState(0x8dfa, 0x3cae, 0x83a0, 0x3912, 0x1103, 0x2636, 0x0, 0x1);
        gbc.writeMem(0x8dfa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3cae);
        EXPECT(gbc.pc(), 0x8dfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dfa), 0xcb);
        EXPECT(gbc.readMem(0x8dfb), 0x5f);
        // CB 5F 008C
        gbc.setState(0xbf90, 0x6999, 0x7460, 0xe2a, 0x5f7e, 0xcabe, 0x1, 0x0);
        gbc.writeMem(0xbf90, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6999);
        EXPECT(gbc.pc(), 0xbf92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf90), 0xcb);
        EXPECT(gbc.readMem(0xbf91), 0x5f);
        // CB 5F 008D
        gbc.setState(0x9955, 0x28c, 0xef10, 0xc127, 0xa5cc, 0x349b, 0x1, 0x1);
        gbc.writeMem(0x9955, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x28c);
        EXPECT(gbc.pc(), 0x9957);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9955), 0xcb);
        EXPECT(gbc.readMem(0x9956), 0x5f);
        // CB 5F 008E
        gbc.setState(0x237c, 0x5b3, 0x8720, 0xa71f, 0xdd52, 0x1bac, 0x0, 0x0);
        gbc.writeMem(0x237c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5b3);
        EXPECT(gbc.pc(), 0x237e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 008F
        gbc.setState(0xa3a0, 0x4ea1, 0x7b20, 0x2f4b, 0x5c6d, 0x5aa8, 0x0, 0x1);
        gbc.writeMem(0xa3a0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4ea1);
        EXPECT(gbc.pc(), 0xa3a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a0), 0xcb);
        EXPECT(gbc.readMem(0xa3a1), 0x5f);
        // CB 5F 0090
        gbc.setState(0x328e, 0x73fb, 0x51b0, 0xd029, 0x37f9, 0x1e6e, 0x0, 0x1);
        gbc.writeMem(0x328e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x73fb);
        EXPECT(gbc.pc(), 0x3290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0091
        gbc.setState(0x5db4, 0xd308, 0xd800, 0xddb, 0x6a99, 0xefb6, 0x0, 0x1);
        gbc.writeMem(0x5db4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd308);
        EXPECT(gbc.pc(), 0x5db6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0092
        gbc.setState(0xd3d2, 0x1d89, 0xc8d0, 0x638e, 0x8cb7, 0x3255, 0x0, 0x0);
        gbc.writeMem(0xd3d2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1d89);
        EXPECT(gbc.pc(), 0xd3d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3d2), 0xcb);
        EXPECT(gbc.readMem(0xd3d3), 0x5f);
        // CB 5F 0093
        gbc.setState(0x6937, 0x7b9, 0x4d30, 0xdb7a, 0x95b1, 0x42e0, 0x0, 0x0);
        gbc.writeMem(0x6937, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7b9);
        EXPECT(gbc.pc(), 0x6939);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0094
        gbc.setState(0xd86, 0xfd6e, 0x7450, 0x57ef, 0x8d4, 0x9c6e, 0x0, 0x1);
        gbc.writeMem(0xd86, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfd6e);
        EXPECT(gbc.pc(), 0xd88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0096
        gbc.setState(0xaa87, 0xdacd, 0xd900, 0xb2cd, 0x2c8b, 0xb7e0, 0x0, 0x0);
        gbc.writeMem(0xaa87, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xdacd);
        EXPECT(gbc.pc(), 0xaa89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa87), 0xcb);
        EXPECT(gbc.readMem(0xaa88), 0x5f);
        // CB 5F 0097
        gbc.setState(0xdc1f, 0x3849, 0x7aa0, 0x51e4, 0x6ef7, 0x653c, 0x0, 0x0);
        gbc.writeMem(0xdc1f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3849);
        EXPECT(gbc.pc(), 0xdc21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1f), 0xcb);
        EXPECT(gbc.readMem(0xdc20), 0x5f);
        // CB 5F 0098
        gbc.setState(0x6f14, 0x671b, 0xf270, 0x31fe, 0x34ee, 0x8a8e, 0x1, 0x1);
        gbc.writeMem(0x6f14, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x671b);
        EXPECT(gbc.pc(), 0x6f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0099
        gbc.setState(0xa40c, 0x407b, 0xc690, 0x81a1, 0xc858, 0x2110, 0x1, 0x1);
        gbc.writeMem(0xa40c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x407b);
        EXPECT(gbc.pc(), 0xa40e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa40c), 0xcb);
        EXPECT(gbc.readMem(0xa40d), 0x5f);
        // CB 5F 009A
        gbc.setState(0xc5ad, 0xff7c, 0xdfc0, 0x7f18, 0xc88, 0x89bf, 0x1, 0x1);
        gbc.writeMem(0xc5ad, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xff7c);
        EXPECT(gbc.pc(), 0xc5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ad), 0xcb);
        EXPECT(gbc.readMem(0xc5ae), 0x5f);
        // CB 5F 009B
        gbc.setState(0x4a0e, 0x1dd3, 0x7dc0, 0xb251, 0xa395, 0xd5a2, 0x0, 0x1);
        gbc.writeMem(0x4a0e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1dd3);
        EXPECT(gbc.pc(), 0x4a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 009C
        gbc.setState(0x4512, 0xf1c, 0xfa50, 0xce28, 0xeac6, 0x94b7, 0x0, 0x0);
        gbc.writeMem(0x4512, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf1c);
        EXPECT(gbc.pc(), 0x4514);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 009D
        gbc.setState(0x51ec, 0xa4d9, 0x8330, 0x4b70, 0xe08b, 0x6016, 0x1, 0x0);
        gbc.writeMem(0x51ec, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa4d9);
        EXPECT(gbc.pc(), 0x51ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 009E
        gbc.setState(0x6f8c, 0xcb22, 0xbdb0, 0xf767, 0x3e5b, 0xb3d2, 0x1, 0x0);
        gbc.writeMem(0x6f8c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xcb22);
        EXPECT(gbc.pc(), 0x6f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 009F
        gbc.setState(0x1518, 0xd6d0, 0xf910, 0x2bc0, 0x5757, 0x5bbb, 0x1, 0x0);
        gbc.writeMem(0x1518, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd6d0);
        EXPECT(gbc.pc(), 0x151a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00A0
        gbc.setState(0x4cad, 0xab6c, 0xa230, 0xc897, 0x44b1, 0x5926, 0x1, 0x0);
        gbc.writeMem(0x4cad, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xab6c);
        EXPECT(gbc.pc(), 0x4caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00A1
        gbc.setState(0xbe81, 0x27e3, 0x6400, 0x593e, 0xe474, 0xedf3, 0x1, 0x1);
        gbc.writeMem(0xbe81, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x27e3);
        EXPECT(gbc.pc(), 0xbe83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe81), 0xcb);
        EXPECT(gbc.readMem(0xbe82), 0x5f);
        // CB 5F 00A2
        gbc.setState(0xdb8d, 0x8415, 0x6590, 0x6cfb, 0x8bae, 0x566b, 0x0, 0x0);
        gbc.writeMem(0xdb8d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8415);
        EXPECT(gbc.pc(), 0xdb8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb8d), 0xcb);
        EXPECT(gbc.readMem(0xdb8e), 0x5f);
        // CB 5F 00A3
        gbc.setState(0xd16f, 0xec0a, 0xaf60, 0x276, 0x48be, 0xe335, 0x0, 0x0);
        gbc.writeMem(0xd16f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xec0a);
        EXPECT(gbc.pc(), 0xd171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd16f), 0xcb);
        EXPECT(gbc.readMem(0xd170), 0x5f);
        // CB 5F 00A4
        gbc.setState(0x7b13, 0x70, 0x18a0, 0x5a10, 0xfd49, 0xfaf3, 0x0, 0x1);
        gbc.writeMem(0x7b13, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x70);
        EXPECT(gbc.pc(), 0x7b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00A5
        gbc.setState(0xc1d7, 0x6674, 0x1800, 0x80c9, 0x7f35, 0x286b, 0x1, 0x1);
        gbc.writeMem(0xc1d7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6674);
        EXPECT(gbc.pc(), 0xc1d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1d7), 0xcb);
        EXPECT(gbc.readMem(0xc1d8), 0x5f);
        // CB 5F 00A6
        gbc.setState(0x5c32, 0xccec, 0xc200, 0x88a1, 0xa304, 0x1f35, 0x0, 0x1);
        gbc.writeMem(0x5c32, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xccec);
        EXPECT(gbc.pc(), 0x5c34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00A7
        gbc.setState(0x2e24, 0x37b7, 0x2f50, 0x75d8, 0x1e19, 0x5fe5, 0x1, 0x1);
        gbc.writeMem(0x2e24, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x37b7);
        EXPECT(gbc.pc(), 0x2e26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00A8
        gbc.setState(0xebd, 0x47bf, 0x170, 0x9751, 0x77cc, 0x2c7f, 0x1, 0x1);
        gbc.writeMem(0xebd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x47bf);
        EXPECT(gbc.pc(), 0xebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00A9
        gbc.setState(0x5c54, 0xa40c, 0x9f20, 0x66c, 0x297f, 0xa894, 0x0, 0x1);
        gbc.writeMem(0x5c54, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa40c);
        EXPECT(gbc.pc(), 0x5c56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00AA
        gbc.setState(0x211, 0x71b8, 0x7f70, 0xd039, 0xf495, 0xe659, 0x1, 0x1);
        gbc.writeMem(0x211, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x71b8);
        EXPECT(gbc.pc(), 0x213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00AB
        gbc.setState(0x5a04, 0xeb37, 0xab40, 0x6d59, 0xb65b, 0x7c9f, 0x1, 0x0);
        gbc.writeMem(0x5a04, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xeb37);
        EXPECT(gbc.pc(), 0x5a06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00AC
        gbc.setState(0x62ca, 0xe743, 0x18c0, 0xe77c, 0x888c, 0x3ad, 0x0, 0x1);
        gbc.writeMem(0x62ca, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe743);
        EXPECT(gbc.pc(), 0x62cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00AD
        gbc.setState(0x464e, 0x647f, 0x39f0, 0x86a2, 0x93fa, 0x9dfa, 0x1, 0x1);
        gbc.writeMem(0x464e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x647f);
        EXPECT(gbc.pc(), 0x4650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00AE
        gbc.setState(0x251, 0xaba9, 0xdd10, 0xfeeb, 0x6891, 0x2b32, 0x1, 0x0);
        gbc.writeMem(0x251, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xaba9);
        EXPECT(gbc.pc(), 0x253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00AF
        gbc.setState(0xc79b, 0xb73f, 0xf760, 0xa6b5, 0xf96e, 0x5612, 0x1, 0x1);
        gbc.writeMem(0xc79b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb73f);
        EXPECT(gbc.pc(), 0xc79d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc79b), 0xcb);
        EXPECT(gbc.readMem(0xc79c), 0x5f);
        // CB 5F 00B0
        gbc.setState(0x30c5, 0x11d8, 0x5570, 0xd237, 0x19e7, 0x76b8, 0x0, 0x0);
        gbc.writeMem(0x30c5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x11d8);
        EXPECT(gbc.pc(), 0x30c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00B1
        gbc.setState(0x81b, 0x11ec, 0x4e70, 0xd252, 0x7b3a, 0x6903, 0x1, 0x0);
        gbc.writeMem(0x81b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x11ec);
        EXPECT(gbc.pc(), 0x81d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00B2
        gbc.setState(0x2d95, 0xb403, 0x80d0, 0xf6e9, 0x7955, 0x9234, 0x0, 0x1);
        gbc.writeMem(0x2d95, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb403);
        EXPECT(gbc.pc(), 0x2d97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00B3
        gbc.setState(0x539a, 0xd7c4, 0xf220, 0xa8e8, 0xe3b3, 0xe36b, 0x0, 0x1);
        gbc.writeMem(0x539a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd7c4);
        EXPECT(gbc.pc(), 0x539c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00B4
        gbc.setState(0x89e4, 0x3123, 0xda30, 0x9112, 0xdbe7, 0xd879, 0x0, 0x1);
        gbc.writeMem(0x89e4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3123);
        EXPECT(gbc.pc(), 0x89e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e4), 0xcb);
        EXPECT(gbc.readMem(0x89e5), 0x5f);
        // CB 5F 00B5
        gbc.setState(0x3969, 0xc9cc, 0x1a10, 0x26ac, 0xbf93, 0xef16, 0x1, 0x1);
        gbc.writeMem(0x3969, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc9cc);
        EXPECT(gbc.pc(), 0x396b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00B6
        gbc.setState(0xcc37, 0x32b9, 0x3e30, 0x7bd7, 0x4dda, 0x3cde, 0x1, 0x0);
        gbc.writeMem(0xcc37, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x32b9);
        EXPECT(gbc.pc(), 0xcc39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc37), 0xcb);
        EXPECT(gbc.readMem(0xcc38), 0x5f);
        // CB 5F 00B7
        gbc.setState(0x2d8f, 0xd580, 0x640, 0x8121, 0x3098, 0x66b3, 0x0, 0x0);
        gbc.writeMem(0x2d8f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd580);
        EXPECT(gbc.pc(), 0x2d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00B8
        gbc.setState(0xef4d, 0x1e9b, 0x18e0, 0x1b1b, 0x6b58, 0xbe15, 0x1, 0x0);
        gbc.writeMem(0xef4d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1e9b);
        EXPECT(gbc.pc(), 0xef4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4d), 0xcb);
        EXPECT(gbc.readMem(0xef4e), 0x5f);
        // CB 5F 00B9
        gbc.setState(0xe73, 0xcbb0, 0xad90, 0x77c, 0x28d9, 0xe0e8, 0x0, 0x0);
        gbc.writeMem(0xe73, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xcbb0);
        EXPECT(gbc.pc(), 0xe75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00BA
        gbc.setState(0x7646, 0xf34d, 0x7e70, 0xc725, 0x3baa, 0x3b28, 0x1, 0x1);
        gbc.writeMem(0x7646, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf34d);
        EXPECT(gbc.pc(), 0x7648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00BB
        gbc.setState(0x9219, 0xd34a, 0xa300, 0xb51f, 0xe3ba, 0x814a, 0x1, 0x0);
        gbc.writeMem(0x9219, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd34a);
        EXPECT(gbc.pc(), 0x921b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9219), 0xcb);
        EXPECT(gbc.readMem(0x921a), 0x5f);
        // CB 5F 00BC
        gbc.setState(0xd2ac, 0xab91, 0xec0, 0x6b3f, 0x4c8, 0x7f0, 0x0, 0x0);
        gbc.writeMem(0xd2ac, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xab91);
        EXPECT(gbc.pc(), 0xd2ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ac), 0xcb);
        EXPECT(gbc.readMem(0xd2ad), 0x5f);
        // CB 5F 00BD
        gbc.setState(0xb580, 0x177e, 0x7160, 0x5a61, 0xe4dd, 0xd423, 0x1, 0x0);
        gbc.writeMem(0xb580, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x177e);
        EXPECT(gbc.pc(), 0xb582);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb580), 0xcb);
        EXPECT(gbc.readMem(0xb581), 0x5f);
        // CB 5F 00BE
        gbc.setState(0x436e, 0x4069, 0xf140, 0x4d0a, 0x2cb6, 0x98d4, 0x0, 0x1);
        gbc.writeMem(0x436e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4069);
        EXPECT(gbc.pc(), 0x4370);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00BF
        gbc.setState(0x681, 0xdc5, 0x3860, 0xd92, 0x3945, 0xec8d, 0x1, 0x1);
        gbc.writeMem(0x681, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xdc5);
        EXPECT(gbc.pc(), 0x683);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00C0
        gbc.setState(0x4fb6, 0xa9d8, 0x8880, 0xa252, 0x7766, 0x7aeb, 0x1, 0x0);
        gbc.writeMem(0x4fb6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa9d8);
        EXPECT(gbc.pc(), 0x4fb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00C1
        gbc.setState(0xa19b, 0x2712, 0x6400, 0x8bec, 0xd78a, 0xf9e5, 0x1, 0x0);
        gbc.writeMem(0xa19b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2712);
        EXPECT(gbc.pc(), 0xa19d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa19b), 0xcb);
        EXPECT(gbc.readMem(0xa19c), 0x5f);
        // CB 5F 00C2
        gbc.setState(0xadc7, 0x534b, 0x6480, 0x4406, 0x76c, 0xa7e1, 0x1, 0x0);
        gbc.writeMem(0xadc7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x534b);
        EXPECT(gbc.pc(), 0xadc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc7), 0xcb);
        EXPECT(gbc.readMem(0xadc8), 0x5f);
        // CB 5F 00C3
        gbc.setState(0x9939, 0x7de9, 0x730, 0x3e14, 0x1d1c, 0x2f48, 0x0, 0x0);
        gbc.writeMem(0x9939, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7de9);
        EXPECT(gbc.pc(), 0x993b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9939), 0xcb);
        EXPECT(gbc.readMem(0x993a), 0x5f);
        // CB 5F 00C4
        gbc.setState(0xad44, 0x19a1, 0xd8e0, 0x43e8, 0xdc5d, 0xe3eb, 0x0, 0x0);
        gbc.writeMem(0xad44, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x19a1);
        EXPECT(gbc.pc(), 0xad46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad44), 0xcb);
        EXPECT(gbc.readMem(0xad45), 0x5f);
        // CB 5F 00C5
        gbc.setState(0xbddc, 0x38ae, 0xa20, 0xa2fe, 0x88c5, 0x5212, 0x1, 0x0);
        gbc.writeMem(0xbddc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x38ae);
        EXPECT(gbc.pc(), 0xbdde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbddc), 0xcb);
        EXPECT(gbc.readMem(0xbddd), 0x5f);
        // CB 5F 00C6
        gbc.setState(0x4d78, 0xe0ef, 0x83d0, 0xfe2b, 0x962f, 0x774d, 0x0, 0x1);
        gbc.writeMem(0x4d78, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe0ef);
        EXPECT(gbc.pc(), 0x4d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00C7
        gbc.setState(0x1e35, 0xe65a, 0xf820, 0x2480, 0x6a65, 0x8aed, 0x1, 0x1);
        gbc.writeMem(0x1e35, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe65a);
        EXPECT(gbc.pc(), 0x1e37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00C8
        gbc.setState(0xb8c, 0xc74d, 0x1280, 0x8ea, 0xeaea, 0x4950, 0x1, 0x0);
        gbc.writeMem(0xb8c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc74d);
        EXPECT(gbc.pc(), 0xb8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00C9
        gbc.setState(0x2fe6, 0xfdb7, 0xf5c0, 0xb859, 0x3723, 0x658f, 0x1, 0x0);
        gbc.writeMem(0x2fe6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xfdb7);
        EXPECT(gbc.pc(), 0x2fe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00CA
        gbc.setState(0x2486, 0xc14e, 0xe100, 0xfcca, 0x442a, 0x93c7, 0x1, 0x0);
        gbc.writeMem(0x2486, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc14e);
        EXPECT(gbc.pc(), 0x2488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00CC
        gbc.setState(0x559a, 0xdc1f, 0xcc60, 0x929, 0x4f57, 0xf0c0, 0x1, 0x0);
        gbc.writeMem(0x559a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xdc1f);
        EXPECT(gbc.pc(), 0x559c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00CD
        gbc.setState(0x963e, 0x2032, 0x8060, 0xd2d1, 0x8b35, 0x1e46, 0x1, 0x0);
        gbc.writeMem(0x963e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2032);
        EXPECT(gbc.pc(), 0x9640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x963e), 0xcb);
        EXPECT(gbc.readMem(0x963f), 0x5f);
        // CB 5F 00D0
        gbc.setState(0x14fd, 0x7a58, 0x5b70, 0x993a, 0x1c, 0xbb14, 0x1, 0x0);
        gbc.writeMem(0x14fd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7a58);
        EXPECT(gbc.pc(), 0x14ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00D1
        gbc.setState(0xb01e, 0xabc3, 0x2b50, 0x7989, 0xbde6, 0xdfa6, 0x0, 0x0);
        gbc.writeMem(0xb01e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xabc3);
        EXPECT(gbc.pc(), 0xb020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb01e), 0xcb);
        EXPECT(gbc.readMem(0xb01f), 0x5f);
        // CB 5F 00D2
        gbc.setState(0x8ff0, 0xc76f, 0xf3a0, 0x6220, 0x7322, 0x3dc3, 0x1, 0x0);
        gbc.writeMem(0x8ff0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc76f);
        EXPECT(gbc.pc(), 0x8ff2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ff0), 0xcb);
        EXPECT(gbc.readMem(0x8ff1), 0x5f);
        // CB 5F 00D3
        gbc.setState(0x2b49, 0xee7a, 0xfba0, 0xe3ee, 0x3264, 0x76b9, 0x0, 0x1);
        gbc.writeMem(0x2b49, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xee7a);
        EXPECT(gbc.pc(), 0x2b4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00D4
        gbc.setState(0x60ec, 0x4b57, 0x25a0, 0xf774, 0x55a9, 0x422, 0x0, 0x0);
        gbc.writeMem(0x60ec, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4b57);
        EXPECT(gbc.pc(), 0x60ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00D5
        gbc.setState(0xe73, 0xf3f4, 0x44e0, 0xd4fa, 0x93a8, 0xb4d0, 0x0, 0x1);
        gbc.writeMem(0xe73, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf3f4);
        EXPECT(gbc.pc(), 0xe75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00D7
        gbc.setState(0x9849, 0x6eaa, 0x5c20, 0xe12a, 0x7190, 0xe6f4, 0x1, 0x1);
        gbc.writeMem(0x9849, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6eaa);
        EXPECT(gbc.pc(), 0x984b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9849), 0xcb);
        EXPECT(gbc.readMem(0x984a), 0x5f);
        // CB 5F 00D8
        gbc.setState(0xe9f, 0x68b0, 0xfc70, 0xc88a, 0xe767, 0xf600, 0x0, 0x0);
        gbc.writeMem(0xe9f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x68b0);
        EXPECT(gbc.pc(), 0xea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00D9
        gbc.setState(0x4a47, 0x2859, 0xec50, 0x9a71, 0xc0c3, 0xdb2e, 0x1, 0x1);
        gbc.writeMem(0x4a47, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2859);
        EXPECT(gbc.pc(), 0x4a49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00DA
        gbc.setState(0xa513, 0x113f, 0x9010, 0x4faf, 0x9cad, 0xb943, 0x0, 0x1);
        gbc.writeMem(0xa513, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x113f);
        EXPECT(gbc.pc(), 0xa515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa513), 0xcb);
        EXPECT(gbc.readMem(0xa514), 0x5f);
        // CB 5F 00DB
        gbc.setState(0x2daa, 0x586, 0x9060, 0x3167, 0x2a, 0xfd3f, 0x0, 0x1);
        gbc.writeMem(0x2daa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x586);
        EXPECT(gbc.pc(), 0x2dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00DC
        gbc.setState(0xda8c, 0xd5e1, 0x12b0, 0x88b, 0xa0ec, 0xbbff, 0x0, 0x1);
        gbc.writeMem(0xda8c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd5e1);
        EXPECT(gbc.pc(), 0xda8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda8c), 0xcb);
        EXPECT(gbc.readMem(0xda8d), 0x5f);
        // CB 5F 00DD
        gbc.setState(0xe32c, 0x3184, 0x5ce0, 0x4091, 0xa7c7, 0x3e3f, 0x1, 0x1);
        gbc.writeMem(0xe32c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3184);
        EXPECT(gbc.pc(), 0xe32e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe32c), 0xcb);
        EXPECT(gbc.readMem(0xe32d), 0x5f);
        // CB 5F 00DE
        gbc.setState(0xb2, 0xc242, 0xcc10, 0x2b45, 0x683, 0x42f7, 0x1, 0x1);
        gbc.writeMem(0xb2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc242);
        EXPECT(gbc.pc(), 0xb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00DF
        gbc.setState(0x64c1, 0x7b73, 0xa180, 0x8de, 0x428e, 0x3eef, 0x1, 0x0);
        gbc.writeMem(0x64c1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x7b73);
        EXPECT(gbc.pc(), 0x64c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00E1
        gbc.setState(0x9113, 0xe56d, 0xe250, 0x3663, 0x4e94, 0xdc14, 0x1, 0x0);
        gbc.writeMem(0x9113, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe56d);
        EXPECT(gbc.pc(), 0x9115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9113), 0xcb);
        EXPECT(gbc.readMem(0x9114), 0x5f);
        // CB 5F 00E2
        gbc.setState(0x2aa4, 0xa339, 0x4c30, 0x9304, 0xfbb5, 0x246b, 0x1, 0x1);
        gbc.writeMem(0x2aa4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa339);
        EXPECT(gbc.pc(), 0x2aa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00E3
        gbc.setState(0xa974, 0x4db6, 0x8540, 0x2a50, 0xf21b, 0x891a, 0x0, 0x1);
        gbc.writeMem(0xa974, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4db6);
        EXPECT(gbc.pc(), 0xa976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa974), 0xcb);
        EXPECT(gbc.readMem(0xa975), 0x5f);
        // CB 5F 00E4
        gbc.setState(0x9eab, 0x3063, 0x75b0, 0xac41, 0xda45, 0xe19c, 0x1, 0x0);
        gbc.writeMem(0x9eab, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3063);
        EXPECT(gbc.pc(), 0x9ead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eab), 0xcb);
        EXPECT(gbc.readMem(0x9eac), 0x5f);
        // CB 5F 00E5
        gbc.setState(0xa89, 0x705e, 0x2150, 0x7c07, 0x721c, 0xf32e, 0x0, 0x0);
        gbc.writeMem(0xa89, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x705e);
        EXPECT(gbc.pc(), 0xa8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00E6
        gbc.setState(0x21fb, 0x76c4, 0x8d0, 0x2e1f, 0xe78a, 0xd67, 0x1, 0x0);
        gbc.writeMem(0x21fb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x76c4);
        EXPECT(gbc.pc(), 0x21fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00E7
        gbc.setState(0xac5a, 0x5212, 0x3cf0, 0x7352, 0xf2e3, 0x1beb, 0x1, 0x1);
        gbc.writeMem(0xac5a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5212);
        EXPECT(gbc.pc(), 0xac5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac5a), 0xcb);
        EXPECT(gbc.readMem(0xac5b), 0x5f);
        // CB 5F 00E8
        gbc.setState(0x4195, 0x7c00, 0xbdf0, 0xe5ed, 0x6941, 0x71e4, 0x0, 0x0);
        gbc.writeMem(0x4195, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7c00);
        EXPECT(gbc.pc(), 0x4197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00E9
        gbc.setState(0xc4c7, 0x747d, 0x4940, 0xb06d, 0x151, 0xbc48, 0x1, 0x1);
        gbc.writeMem(0xc4c7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x747d);
        EXPECT(gbc.pc(), 0xc4c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4c7), 0xcb);
        EXPECT(gbc.readMem(0xc4c8), 0x5f);
        // CB 5F 00EA
        gbc.setState(0x428a, 0xda05, 0x89a0, 0xb017, 0x1c9b, 0xefa8, 0x1, 0x1);
        gbc.writeMem(0x428a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xda05);
        EXPECT(gbc.pc(), 0x428c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00EB
        gbc.setState(0x28f7, 0xf61d, 0x8fe0, 0x5c6b, 0x3d21, 0xa3e5, 0x0, 0x0);
        gbc.writeMem(0x28f7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf61d);
        EXPECT(gbc.pc(), 0x28f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00EC
        gbc.setState(0x52ff, 0xa532, 0x5790, 0xf019, 0xa1e0, 0x1777, 0x0, 0x1);
        gbc.writeMem(0x52ff, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa532);
        EXPECT(gbc.pc(), 0x5301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00ED
        gbc.setState(0xbf33, 0xea47, 0xd7d0, 0xb34b, 0x408a, 0xbaef, 0x0, 0x1);
        gbc.writeMem(0xbf33, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xea47);
        EXPECT(gbc.pc(), 0xbf35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf33), 0xcb);
        EXPECT(gbc.readMem(0xbf34), 0x5f);
        // CB 5F 00EE
        gbc.setState(0x73d8, 0xaeb9, 0xa560, 0x7d13, 0x3eab, 0x6c7f, 0x0, 0x0);
        gbc.writeMem(0x73d8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xaeb9);
        EXPECT(gbc.pc(), 0x73da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00EF
        gbc.setState(0x2aca, 0xb6d9, 0xbdc0, 0x503a, 0x66e, 0x4da2, 0x0, 0x1);
        gbc.writeMem(0x2aca, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb6d9);
        EXPECT(gbc.pc(), 0x2acc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00F0
        gbc.setState(0xdaed, 0x5a55, 0x75c0, 0xc3b, 0xf039, 0xa43b, 0x1, 0x1);
        gbc.writeMem(0xdaed, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5a55);
        EXPECT(gbc.pc(), 0xdaef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaed), 0xcb);
        EXPECT(gbc.readMem(0xdaee), 0x5f);
        // CB 5F 00F1
        gbc.setState(0x75ee, 0xc0c1, 0x2e0, 0x2cde, 0x123f, 0xc929, 0x1, 0x0);
        gbc.writeMem(0x75ee, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc0c1);
        EXPECT(gbc.pc(), 0x75f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00F2
        gbc.setState(0x6785, 0x49b3, 0x6da0, 0x4ecb, 0x7c46, 0x299f, 0x1, 0x0);
        gbc.writeMem(0x6785, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x49b3);
        EXPECT(gbc.pc(), 0x6787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 00F5
        gbc.setState(0xb562, 0xde11, 0x5700, 0x88a6, 0xb569, 0xdd3b, 0x0, 0x1);
        gbc.writeMem(0xb562, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xde11);
        EXPECT(gbc.pc(), 0xb564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb562), 0xcb);
        EXPECT(gbc.readMem(0xb563), 0x5f);
        // CB 5F 00F7
        gbc.setState(0x6a09, 0x59d, 0x3430, 0x8bc2, 0xf9a6, 0x7d58, 0x1, 0x0);
        gbc.writeMem(0x6a09, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x59d);
        EXPECT(gbc.pc(), 0x6a0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00F8
        gbc.setState(0xe337, 0x95cf, 0x98d0, 0xdd2a, 0x6b9c, 0x963d, 0x1, 0x1);
        gbc.writeMem(0xe337, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x95cf);
        EXPECT(gbc.pc(), 0xe339);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe337), 0xcb);
        EXPECT(gbc.readMem(0xe338), 0x5f);
        // CB 5F 00F9
        gbc.setState(0xd17b, 0x3cb5, 0xbe80, 0x1014, 0xefd2, 0xdb54, 0x0, 0x0);
        gbc.writeMem(0xd17b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3cb5);
        EXPECT(gbc.pc(), 0xd17d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd17b), 0xcb);
        EXPECT(gbc.readMem(0xd17c), 0x5f);
        // CB 5F 00FA
        gbc.setState(0x341f, 0xe58b, 0x60f0, 0x741e, 0x53d8, 0xb5a2, 0x0, 0x0);
        gbc.writeMem(0x341f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xe58b);
        EXPECT(gbc.pc(), 0x3421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 00FB
        gbc.setState(0xb05d, 0x8bfb, 0xa540, 0x2e7b, 0x683f, 0xd6d6, 0x1, 0x1);
        gbc.writeMem(0xb05d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8bfb);
        EXPECT(gbc.pc(), 0xb05f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb05d), 0xcb);
        EXPECT(gbc.readMem(0xb05e), 0x5f);
        // CB 5F 00FC
        gbc.setState(0x84cf, 0xbddc, 0x18b0, 0xfcd6, 0x96a5, 0x1310, 0x0, 0x0);
        gbc.writeMem(0x84cf, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbddc);
        EXPECT(gbc.pc(), 0x84d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84cf), 0xcb);
        EXPECT(gbc.readMem(0x84d0), 0x5f);
        // CB 5F 00FD
        gbc.setState(0xbd97, 0xfcb2, 0x2b00, 0xda4d, 0xa1fc, 0xb060, 0x0, 0x1);
        gbc.writeMem(0xbd97, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xfcb2);
        EXPECT(gbc.pc(), 0xbd99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd97), 0xcb);
        EXPECT(gbc.readMem(0xbd98), 0x5f);
        // CB 5F 00FE
        gbc.setState(0xe626, 0x7b98, 0xf950, 0x81f5, 0x5510, 0xe860, 0x1, 0x1);
        gbc.writeMem(0xe626, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7b98);
        EXPECT(gbc.pc(), 0xe628);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe626), 0xcb);
        EXPECT(gbc.readMem(0xe627), 0x5f);
        // CB 5F 00FF
        gbc.setState(0xbfd3, 0x1749, 0xb890, 0x659e, 0x1baf, 0xa8c8, 0x0, 0x1);
        gbc.writeMem(0xbfd3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1749);
        EXPECT(gbc.pc(), 0xbfd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfd3), 0xcb);
        EXPECT(gbc.readMem(0xbfd4), 0x5f);
        // CB 5F 0101
        gbc.setState(0x120e, 0xd411, 0x9240, 0x852d, 0xb44a, 0x33e, 0x0, 0x1);
        gbc.writeMem(0x120e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd411);
        EXPECT(gbc.pc(), 0x1210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0102
        gbc.setState(0x825, 0x9715, 0xf480, 0x26d4, 0x3c83, 0xe678, 0x1, 0x0);
        gbc.writeMem(0x825, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9715);
        EXPECT(gbc.pc(), 0x827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0103
        gbc.setState(0xa823, 0x263, 0x6770, 0x2f72, 0x8a4a, 0xa7aa, 0x1, 0x0);
        gbc.writeMem(0xa823, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x263);
        EXPECT(gbc.pc(), 0xa825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa823), 0xcb);
        EXPECT(gbc.readMem(0xa824), 0x5f);
        // CB 5F 0105
        gbc.setState(0x43c7, 0xb435, 0x1e50, 0xe6fe, 0x3d3a, 0x6281, 0x0, 0x0);
        gbc.writeMem(0x43c7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb435);
        EXPECT(gbc.pc(), 0x43c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0107
        gbc.setState(0x9314, 0x1478, 0x3940, 0xea6c, 0xcc53, 0x9612, 0x0, 0x1);
        gbc.writeMem(0x9314, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1478);
        EXPECT(gbc.pc(), 0x9316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9314), 0xcb);
        EXPECT(gbc.readMem(0x9315), 0x5f);
        // CB 5F 0108
        gbc.setState(0xc1af, 0x5540, 0x4880, 0x7a45, 0xf8e3, 0xb0bc, 0x0, 0x0);
        gbc.writeMem(0xc1af, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5540);
        EXPECT(gbc.pc(), 0xc1b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1af), 0xcb);
        EXPECT(gbc.readMem(0xc1b0), 0x5f);
        // CB 5F 0109
        gbc.setState(0xbfa0, 0x375d, 0x3390, 0x68dd, 0xb546, 0x1734, 0x1, 0x0);
        gbc.writeMem(0xbfa0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x375d);
        EXPECT(gbc.pc(), 0xbfa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa0), 0xcb);
        EXPECT(gbc.readMem(0xbfa1), 0x5f);
        // CB 5F 010A
        gbc.setState(0x258f, 0x494a, 0x5980, 0xb2ea, 0x8dba, 0x521e, 0x0, 0x0);
        gbc.writeMem(0x258f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x494a);
        EXPECT(gbc.pc(), 0x2591);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 010B
        gbc.setState(0x7dce, 0xca46, 0xf9d0, 0xed63, 0x4c59, 0xfddf, 0x0, 0x0);
        gbc.writeMem(0x7dce, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xca46);
        EXPECT(gbc.pc(), 0x7dd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 010D
        gbc.setState(0xedb7, 0xf5d5, 0xce40, 0xcaf7, 0x73c, 0x2e7c, 0x1, 0x1);
        gbc.writeMem(0xedb7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf5d5);
        EXPECT(gbc.pc(), 0xedb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedb7), 0xcb);
        EXPECT(gbc.readMem(0xedb8), 0x5f);
        // CB 5F 010E
        gbc.setState(0x9643, 0x405a, 0x8d60, 0x3867, 0x67f5, 0x8d0f, 0x1, 0x1);
        gbc.writeMem(0x9643, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x405a);
        EXPECT(gbc.pc(), 0x9645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9643), 0xcb);
        EXPECT(gbc.readMem(0x9644), 0x5f);
        // CB 5F 010F
        gbc.setState(0x3a83, 0xe985, 0x900, 0xcb87, 0x5ba8, 0xeae, 0x0, 0x0);
        gbc.writeMem(0x3a83, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe985);
        EXPECT(gbc.pc(), 0x3a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0110
        gbc.setState(0x124f, 0x374b, 0x2610, 0xce90, 0xf3ed, 0x21fd, 0x1, 0x0);
        gbc.writeMem(0x124f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x374b);
        EXPECT(gbc.pc(), 0x1251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0111
        gbc.setState(0x1963, 0xa413, 0x71e0, 0x1f66, 0x6538, 0xee2e, 0x0, 0x1);
        gbc.writeMem(0x1963, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa413);
        EXPECT(gbc.pc(), 0x1965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0112
        gbc.setState(0xe645, 0xccb, 0xd430, 0x385, 0x29a9, 0x4717, 0x1, 0x0);
        gbc.writeMem(0xe645, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xccb);
        EXPECT(gbc.pc(), 0xe647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe645), 0xcb);
        EXPECT(gbc.readMem(0xe646), 0x5f);
        // CB 5F 0113
        gbc.setState(0xc785, 0xc747, 0x6370, 0xdf10, 0x5be6, 0x8cb3, 0x1, 0x1);
        gbc.writeMem(0xc785, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc747);
        EXPECT(gbc.pc(), 0xc787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc785), 0xcb);
        EXPECT(gbc.readMem(0xc786), 0x5f);
        // CB 5F 0114
        gbc.setState(0xc6f9, 0x4510, 0x5050, 0x736c, 0x7b63, 0xf880, 0x1, 0x0);
        gbc.writeMem(0xc6f9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4510);
        EXPECT(gbc.pc(), 0xc6fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6f9), 0xcb);
        EXPECT(gbc.readMem(0xc6fa), 0x5f);
        // CB 5F 0115
        gbc.setState(0xdad9, 0x1fc6, 0x90c0, 0x918f, 0x861f, 0x7264, 0x1, 0x0);
        gbc.writeMem(0xdad9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1fc6);
        EXPECT(gbc.pc(), 0xdadb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdad9), 0xcb);
        EXPECT(gbc.readMem(0xdada), 0x5f);
        // CB 5F 0116
        gbc.setState(0xa4b0, 0x9e6e, 0x30f0, 0xe012, 0x376b, 0xd7e0, 0x0, 0x1);
        gbc.writeMem(0xa4b0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9e6e);
        EXPECT(gbc.pc(), 0xa4b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4b0), 0xcb);
        EXPECT(gbc.readMem(0xa4b1), 0x5f);
        // CB 5F 0117
        gbc.setState(0x1755, 0xe5e7, 0xea0, 0xc3b, 0xe612, 0x905, 0x0, 0x0);
        gbc.writeMem(0x1755, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe5e7);
        EXPECT(gbc.pc(), 0x1757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0118
        gbc.setState(0x993b, 0xfe87, 0xcc20, 0x1e6e, 0xb648, 0x9d38, 0x1, 0x1);
        gbc.writeMem(0x993b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xfe87);
        EXPECT(gbc.pc(), 0x993d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x993b), 0xcb);
        EXPECT(gbc.readMem(0x993c), 0x5f);
        // CB 5F 0119
        gbc.setState(0x9950, 0x929d, 0x2830, 0x6c2d, 0x507d, 0x5a15, 0x1, 0x0);
        gbc.writeMem(0x9950, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x929d);
        EXPECT(gbc.pc(), 0x9952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9950), 0xcb);
        EXPECT(gbc.readMem(0x9951), 0x5f);
        // CB 5F 011A
        gbc.setState(0x521, 0x3892, 0x8f30, 0x7bb8, 0x43b6, 0x359c, 0x0, 0x1);
        gbc.writeMem(0x521, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3892);
        EXPECT(gbc.pc(), 0x523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 011C
        gbc.setState(0xe270, 0x794b, 0x7520, 0x37e1, 0x7301, 0xec29, 0x1, 0x0);
        gbc.writeMem(0xe270, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x794b);
        EXPECT(gbc.pc(), 0xe272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe270), 0xcb);
        EXPECT(gbc.readMem(0xe271), 0x5f);
        // CB 5F 011D
        gbc.setState(0x3e47, 0xc0c5, 0x4f90, 0xa973, 0xb86b, 0xefa2, 0x1, 0x0);
        gbc.writeMem(0x3e47, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc0c5);
        EXPECT(gbc.pc(), 0x3e49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 011E
        gbc.setState(0xdf1, 0x4767, 0x98a0, 0xb896, 0xcbb2, 0x3345, 0x0, 0x0);
        gbc.writeMem(0xdf1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4767);
        EXPECT(gbc.pc(), 0xdf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 011F
        gbc.setState(0x55a1, 0x3893, 0x96e0, 0xa8b7, 0xaee6, 0x807e, 0x1, 0x1);
        gbc.writeMem(0x55a1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3893);
        EXPECT(gbc.pc(), 0x55a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0120
        gbc.setState(0x1f6b, 0x9c2d, 0xa7c0, 0xbb38, 0x8687, 0xcf03, 0x1, 0x0);
        gbc.writeMem(0x1f6b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9c2d);
        EXPECT(gbc.pc(), 0x1f6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0121
        gbc.setState(0x579f, 0xfc1c, 0x4a50, 0xa0da, 0x1eea, 0x9450, 0x0, 0x1);
        gbc.writeMem(0x579f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xfc1c);
        EXPECT(gbc.pc(), 0x57a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0122
        gbc.setState(0xcf5a, 0xae5f, 0x2390, 0x3e3a, 0xbe82, 0xca27, 0x1, 0x1);
        gbc.writeMem(0xcf5a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xae5f);
        EXPECT(gbc.pc(), 0xcf5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf5a), 0xcb);
        EXPECT(gbc.readMem(0xcf5b), 0x5f);
        // CB 5F 0123
        gbc.setState(0x7bb5, 0x6e9c, 0x79e0, 0x7363, 0xb8d5, 0x7873, 0x1, 0x0);
        gbc.writeMem(0x7bb5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6e9c);
        EXPECT(gbc.pc(), 0x7bb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0125
        gbc.setState(0xbc83, 0xeae5, 0xf640, 0x19a2, 0xc038, 0x99bc, 0x0, 0x0);
        gbc.writeMem(0xbc83, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xeae5);
        EXPECT(gbc.pc(), 0xbc85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc83), 0xcb);
        EXPECT(gbc.readMem(0xbc84), 0x5f);
        // CB 5F 0126
        gbc.setState(0x22c6, 0x248d, 0xf6e0, 0x8d40, 0xf6ab, 0x2775, 0x1, 0x0);
        gbc.writeMem(0x22c6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x248d);
        EXPECT(gbc.pc(), 0x22c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0127
        gbc.setState(0x805a, 0x5a98, 0xce40, 0xad36, 0x6840, 0xa610, 0x1, 0x0);
        gbc.writeMem(0x805a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5a98);
        EXPECT(gbc.pc(), 0x805c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x805a), 0xcb);
        EXPECT(gbc.readMem(0x805b), 0x5f);
        // CB 5F 0128
        gbc.setState(0xd47a, 0x4ff7, 0xa2f0, 0xf1c2, 0x5cee, 0xa4d3, 0x1, 0x1);
        gbc.writeMem(0xd47a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4ff7);
        EXPECT(gbc.pc(), 0xd47c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd47a), 0xcb);
        EXPECT(gbc.readMem(0xd47b), 0x5f);
        // CB 5F 0129
        gbc.setState(0xc941, 0x5dc7, 0xd6d0, 0x5abc, 0x52a1, 0xb983, 0x1, 0x0);
        gbc.writeMem(0xc941, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5dc7);
        EXPECT(gbc.pc(), 0xc943);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc941), 0xcb);
        EXPECT(gbc.readMem(0xc942), 0x5f);
        // CB 5F 012A
        gbc.setState(0xb95, 0xf5f8, 0xd30, 0x4815, 0x65a4, 0x8609, 0x0, 0x0);
        gbc.writeMem(0xb95, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf5f8);
        EXPECT(gbc.pc(), 0xb97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 012B
        gbc.setState(0xc52f, 0xda85, 0x69f0, 0x312b, 0xdff4, 0xa291, 0x0, 0x0);
        gbc.writeMem(0xc52f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xda85);
        EXPECT(gbc.pc(), 0xc531);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc52f), 0xcb);
        EXPECT(gbc.readMem(0xc530), 0x5f);
        // CB 5F 012C
        gbc.setState(0x55ee, 0xd636, 0xf750, 0xd39d, 0x7ca2, 0xc42, 0x0, 0x0);
        gbc.writeMem(0x55ee, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd636);
        EXPECT(gbc.pc(), 0x55f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 012D
        gbc.setState(0x3bc1, 0x3362, 0xb6d0, 0x183e, 0x851b, 0xc963, 0x0, 0x0);
        gbc.writeMem(0x3bc1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x3362);
        EXPECT(gbc.pc(), 0x3bc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 012E
        gbc.setState(0xc119, 0x72fa, 0x9560, 0x9fdf, 0x2166, 0x9feb, 0x1, 0x1);
        gbc.writeMem(0xc119, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x72fa);
        EXPECT(gbc.pc(), 0xc11b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc119), 0xcb);
        EXPECT(gbc.readMem(0xc11a), 0x5f);
        // CB 5F 012F
        gbc.setState(0xb4d8, 0x12c, 0x9e50, 0x938, 0xcd63, 0xfd6, 0x0, 0x0);
        gbc.writeMem(0xb4d8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x12c);
        EXPECT(gbc.pc(), 0xb4da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4d8), 0xcb);
        EXPECT(gbc.readMem(0xb4d9), 0x5f);
        // CB 5F 0130
        gbc.setState(0x5f88, 0x313c, 0x3f80, 0x52d, 0xbc0c, 0x2718, 0x1, 0x1);
        gbc.writeMem(0x5f88, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x313c);
        EXPECT(gbc.pc(), 0x5f8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0131
        gbc.setState(0x11f1, 0x2001, 0x9330, 0x9c0d, 0xe711, 0xf0fa, 0x1, 0x1);
        gbc.writeMem(0x11f1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2001);
        EXPECT(gbc.pc(), 0x11f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0132
        gbc.setState(0xd647, 0xf0b7, 0x86e0, 0xc698, 0xa683, 0x7b5b, 0x0, 0x0);
        gbc.writeMem(0xd647, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf0b7);
        EXPECT(gbc.pc(), 0xd649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd647), 0xcb);
        EXPECT(gbc.readMem(0xd648), 0x5f);
        // CB 5F 0133
        gbc.setState(0x49f4, 0xe0d1, 0xee90, 0x112, 0x95cb, 0x350e, 0x1, 0x1);
        gbc.writeMem(0x49f4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe0d1);
        EXPECT(gbc.pc(), 0x49f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0134
        gbc.setState(0x2964, 0xb855, 0xb240, 0x7df5, 0xbed6, 0x555d, 0x0, 0x1);
        gbc.writeMem(0x2964, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb855);
        EXPECT(gbc.pc(), 0x2966);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0135
        gbc.setState(0x6b6b, 0xe91, 0xe000, 0x7077, 0xeb49, 0xb6a8, 0x1, 0x0);
        gbc.writeMem(0x6b6b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe91);
        EXPECT(gbc.pc(), 0x6b6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0136
        gbc.setState(0x143d, 0x2805, 0xdb90, 0xc1c5, 0xaca8, 0x7550, 0x0, 0x0);
        gbc.writeMem(0x143d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2805);
        EXPECT(gbc.pc(), 0x143f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0137
        gbc.setState(0x2c4a, 0x7919, 0xca80, 0x5a, 0xd8ee, 0x44e6, 0x0, 0x0);
        gbc.writeMem(0x2c4a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7919);
        EXPECT(gbc.pc(), 0x2c4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0138
        gbc.setState(0x7a7a, 0x7428, 0x2190, 0xdac4, 0xca10, 0xb90d, 0x1, 0x0);
        gbc.writeMem(0x7a7a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7428);
        EXPECT(gbc.pc(), 0x7a7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0139
        gbc.setState(0x8898, 0xe61f, 0x2dd0, 0x2cdd, 0x8b46, 0xaaf6, 0x1, 0x1);
        gbc.writeMem(0x8898, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe61f);
        EXPECT(gbc.pc(), 0x889a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8898), 0xcb);
        EXPECT(gbc.readMem(0x8899), 0x5f);
        // CB 5F 013A
        gbc.setState(0x8071, 0x5174, 0xa860, 0xd67, 0x2fc6, 0x7517, 0x0, 0x0);
        gbc.writeMem(0x8071, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5174);
        EXPECT(gbc.pc(), 0x8073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8071), 0xcb);
        EXPECT(gbc.readMem(0x8072), 0x5f);
        // CB 5F 013B
        gbc.setState(0xc820, 0x6d98, 0xb6e0, 0x4d85, 0x3ce0, 0x9dfa, 0x0, 0x1);
        gbc.writeMem(0xc820, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6d98);
        EXPECT(gbc.pc(), 0xc822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc820), 0xcb);
        EXPECT(gbc.readMem(0xc821), 0x5f);
        // CB 5F 013C
        gbc.setState(0xc0f9, 0x7955, 0x9f70, 0x68ac, 0xedf6, 0x2615, 0x0, 0x0);
        gbc.writeMem(0xc0f9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7955);
        EXPECT(gbc.pc(), 0xc0fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0f9), 0xcb);
        EXPECT(gbc.readMem(0xc0fa), 0x5f);
        // CB 5F 013D
        gbc.setState(0x8cbc, 0x396f, 0xa9a0, 0x564c, 0xedf2, 0x5364, 0x1, 0x0);
        gbc.writeMem(0x8cbc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x396f);
        EXPECT(gbc.pc(), 0x8cbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cbc), 0xcb);
        EXPECT(gbc.readMem(0x8cbd), 0x5f);
        // CB 5F 013E
        gbc.setState(0xae8a, 0x685a, 0x35d0, 0xa957, 0x9e6f, 0x8988, 0x1, 0x0);
        gbc.writeMem(0xae8a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x685a);
        EXPECT(gbc.pc(), 0xae8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae8a), 0xcb);
        EXPECT(gbc.readMem(0xae8b), 0x5f);
        // CB 5F 013F
        gbc.setState(0x8ab7, 0xff80, 0xcd50, 0xb4b3, 0x5698, 0x32cf, 0x1, 0x0);
        gbc.writeMem(0x8ab7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xff80);
        EXPECT(gbc.pc(), 0x8ab9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ab7), 0xcb);
        EXPECT(gbc.readMem(0x8ab8), 0x5f);
        // CB 5F 0140
        gbc.setState(0x24ba, 0x8e25, 0xadb0, 0x32d1, 0x7906, 0x23b0, 0x1, 0x0);
        gbc.writeMem(0x24ba, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8e25);
        EXPECT(gbc.pc(), 0x24bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0141
        gbc.setState(0x5773, 0xdd93, 0x9740, 0xd4ca, 0xb6c4, 0x7a9, 0x0, 0x1);
        gbc.writeMem(0x5773, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdd93);
        EXPECT(gbc.pc(), 0x5775);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0142
        gbc.setState(0x73dc, 0xb77b, 0x1320, 0x79c5, 0x3184, 0x667, 0x0, 0x0);
        gbc.writeMem(0x73dc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb77b);
        EXPECT(gbc.pc(), 0x73de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0143
        gbc.setState(0x5eb6, 0xa41d, 0xb740, 0xb7df, 0x66f6, 0x4ded, 0x0, 0x0);
        gbc.writeMem(0x5eb6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa41d);
        EXPECT(gbc.pc(), 0x5eb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0144
        gbc.setState(0xeb20, 0x478e, 0x4c50, 0x7d36, 0xad3e, 0xac5a, 0x0, 0x1);
        gbc.writeMem(0xeb20, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x478e);
        EXPECT(gbc.pc(), 0xeb22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb20), 0xcb);
        EXPECT(gbc.readMem(0xeb21), 0x5f);
        // CB 5F 0145
        gbc.setState(0x60be, 0x9525, 0x4410, 0xfd93, 0x88f7, 0xa61d, 0x1, 0x1);
        gbc.writeMem(0x60be, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9525);
        EXPECT(gbc.pc(), 0x60c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0146
        gbc.setState(0x2a34, 0xda50, 0x1640, 0x7f91, 0xc9e3, 0xf6e4, 0x0, 0x1);
        gbc.writeMem(0x2a34, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xda50);
        EXPECT(gbc.pc(), 0x2a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0147
        gbc.setState(0xa071, 0x8c06, 0x3990, 0x6e2d, 0x9a1d, 0xe441, 0x0, 0x1);
        gbc.writeMem(0xa071, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8c06);
        EXPECT(gbc.pc(), 0xa073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa071), 0xcb);
        EXPECT(gbc.readMem(0xa072), 0x5f);
        // CB 5F 0148
        gbc.setState(0x8491, 0x2c8b, 0x7360, 0x1330, 0x5681, 0x5535, 0x0, 0x1);
        gbc.writeMem(0x8491, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2c8b);
        EXPECT(gbc.pc(), 0x8493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8491), 0xcb);
        EXPECT(gbc.readMem(0x8492), 0x5f);
        // CB 5F 0149
        gbc.setState(0x27b7, 0x1ffb, 0xd2e0, 0x94b6, 0xbefe, 0xeee0, 0x1, 0x1);
        gbc.writeMem(0x27b7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1ffb);
        EXPECT(gbc.pc(), 0x27b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 014A
        gbc.setState(0x8e32, 0x9222, 0x4420, 0x23bc, 0xe076, 0x5dcd, 0x1, 0x1);
        gbc.writeMem(0x8e32, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9222);
        EXPECT(gbc.pc(), 0x8e34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e32), 0xcb);
        EXPECT(gbc.readMem(0x8e33), 0x5f);
        // CB 5F 014B
        gbc.setState(0x6493, 0x2677, 0x2bf0, 0x52da, 0xaa65, 0xbadd, 0x1, 0x0);
        gbc.writeMem(0x6493, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2677);
        EXPECT(gbc.pc(), 0x6495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 014C
        gbc.setState(0x4785, 0x337, 0xa90, 0x86c, 0xb2ad, 0x175b, 0x0, 0x0);
        gbc.writeMem(0x4785, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x337);
        EXPECT(gbc.pc(), 0x4787);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 014D
        gbc.setState(0x7993, 0xc126, 0x38b0, 0x3d8c, 0xf92c, 0x93c4, 0x1, 0x0);
        gbc.writeMem(0x7993, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc126);
        EXPECT(gbc.pc(), 0x7995);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 014E
        gbc.setState(0x970b, 0x49ce, 0x2850, 0x75cb, 0xbf4c, 0xd46f, 0x0, 0x1);
        gbc.writeMem(0x970b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x49ce);
        EXPECT(gbc.pc(), 0x970d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x970b), 0xcb);
        EXPECT(gbc.readMem(0x970c), 0x5f);
        // CB 5F 014F
        gbc.setState(0x94f2, 0x286d, 0xd2e0, 0x65a1, 0xdba0, 0x9a94, 0x0, 0x0);
        gbc.writeMem(0x94f2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x286d);
        EXPECT(gbc.pc(), 0x94f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f2), 0xcb);
        EXPECT(gbc.readMem(0x94f3), 0x5f);
        // CB 5F 0150
        gbc.setState(0xcf08, 0xa0e3, 0x60e0, 0xdbd8, 0xbdcd, 0x4f03, 0x0, 0x0);
        gbc.writeMem(0xcf08, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa0e3);
        EXPECT(gbc.pc(), 0xcf0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf08), 0xcb);
        EXPECT(gbc.readMem(0xcf09), 0x5f);
        // CB 5F 0151
        gbc.setState(0xaee, 0xe986, 0x2bf0, 0x1201, 0xc704, 0xca08, 0x0, 0x0);
        gbc.writeMem(0xaee, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe986);
        EXPECT(gbc.pc(), 0xaf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0152
        gbc.setState(0x3de1, 0xe6de, 0xc790, 0xc146, 0xa6e8, 0x3d05, 0x1, 0x1);
        gbc.writeMem(0x3de1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe6de);
        EXPECT(gbc.pc(), 0x3de3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0153
        gbc.setState(0x67ad, 0xb1f5, 0xd6d0, 0xed89, 0xb836, 0xdc86, 0x0, 0x0);
        gbc.writeMem(0x67ad, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb1f5);
        EXPECT(gbc.pc(), 0x67af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0154
        gbc.setState(0xd1aa, 0x4ec0, 0xe1a0, 0xc518, 0x19bc, 0xf0, 0x0, 0x1);
        gbc.writeMem(0xd1aa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4ec0);
        EXPECT(gbc.pc(), 0xd1ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1aa), 0xcb);
        EXPECT(gbc.readMem(0xd1ab), 0x5f);
        // CB 5F 0155
        gbc.setState(0x73bf, 0x8788, 0x8a00, 0x304b, 0xe8cc, 0x3381, 0x1, 0x1);
        gbc.writeMem(0x73bf, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8788);
        EXPECT(gbc.pc(), 0x73c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0156
        gbc.setState(0x3af7, 0x1fe7, 0xfa60, 0xc512, 0x4add, 0x570f, 0x0, 0x0);
        gbc.writeMem(0x3af7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1fe7);
        EXPECT(gbc.pc(), 0x3af9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0157
        gbc.setState(0xd99, 0x8e33, 0xe550, 0x28ba, 0xad2f, 0xc8d7, 0x1, 0x1);
        gbc.writeMem(0xd99, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8e33);
        EXPECT(gbc.pc(), 0xd9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0158
        gbc.setState(0x9460, 0xf43a, 0xf730, 0x5578, 0x71e5, 0xebd9, 0x0, 0x1);
        gbc.writeMem(0x9460, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf43a);
        EXPECT(gbc.pc(), 0x9462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9460), 0xcb);
        EXPECT(gbc.readMem(0x9461), 0x5f);
        // CB 5F 0159
        gbc.setState(0xc89b, 0x8216, 0xe050, 0xdf67, 0x8ca4, 0xf53a, 0x1, 0x1);
        gbc.writeMem(0xc89b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8216);
        EXPECT(gbc.pc(), 0xc89d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc89b), 0xcb);
        EXPECT(gbc.readMem(0xc89c), 0x5f);
        // CB 5F 015A
        gbc.setState(0x58e7, 0x45b, 0x65c0, 0xa04a, 0x16e9, 0xf374, 0x1, 0x0);
        gbc.writeMem(0x58e7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x45b);
        EXPECT(gbc.pc(), 0x58e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 015B
        gbc.setState(0x77b, 0xfae3, 0x4c50, 0x83eb, 0x57eb, 0x986a, 0x0, 0x1);
        gbc.writeMem(0x77b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfae3);
        EXPECT(gbc.pc(), 0x77d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 015C
        gbc.setState(0x29fd, 0xbf6c, 0x75c0, 0x798a, 0x8e93, 0xbccc, 0x1, 0x1);
        gbc.writeMem(0x29fd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbf6c);
        EXPECT(gbc.pc(), 0x29ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 015D
        gbc.setState(0x6466, 0xe0b9, 0xcd30, 0x6b24, 0x9bff, 0x771b, 0x1, 0x0);
        gbc.writeMem(0x6466, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe0b9);
        EXPECT(gbc.pc(), 0x6468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 015E
        gbc.setState(0x84e4, 0x901a, 0x55a0, 0x5c57, 0x9d49, 0x3b61, 0x1, 0x1);
        gbc.writeMem(0x84e4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x901a);
        EXPECT(gbc.pc(), 0x84e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84e4), 0xcb);
        EXPECT(gbc.readMem(0x84e5), 0x5f);
        // CB 5F 015F
        gbc.setState(0x19a7, 0xea8c, 0xcf20, 0x6bbd, 0x8fa0, 0x9136, 0x1, 0x1);
        gbc.writeMem(0x19a7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xea8c);
        EXPECT(gbc.pc(), 0x19a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0160
        gbc.setState(0xaac8, 0xf895, 0xbf50, 0x27f7, 0xd479, 0x4179, 0x1, 0x0);
        gbc.writeMem(0xaac8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf895);
        EXPECT(gbc.pc(), 0xaaca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaac8), 0xcb);
        EXPECT(gbc.readMem(0xaac9), 0x5f);
        // CB 5F 0161
        gbc.setState(0xa7c4, 0xbd46, 0x5d70, 0x5635, 0x3440, 0xd27b, 0x1, 0x1);
        gbc.writeMem(0xa7c4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xbd46);
        EXPECT(gbc.pc(), 0xa7c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7c4), 0xcb);
        EXPECT(gbc.readMem(0xa7c5), 0x5f);
        // CB 5F 0163
        gbc.setState(0x3078, 0x9c25, 0xab30, 0x9d0d, 0xc837, 0xa9b6, 0x0, 0x1);
        gbc.writeMem(0x3078, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9c25);
        EXPECT(gbc.pc(), 0x307a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0164
        gbc.setState(0x3f8c, 0xc9e9, 0x7ad0, 0x68b1, 0xe0d2, 0x2b6d, 0x1, 0x0);
        gbc.writeMem(0x3f8c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc9e9);
        EXPECT(gbc.pc(), 0x3f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0165
        gbc.setState(0x775b, 0xd820, 0x1a50, 0xc1c8, 0x79ec, 0x949b, 0x0, 0x0);
        gbc.writeMem(0x775b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd820);
        EXPECT(gbc.pc(), 0x775d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0166
        gbc.setState(0x7f9, 0xe8f2, 0x6f70, 0xbe55, 0xd19d, 0xd7c9, 0x1, 0x0);
        gbc.writeMem(0x7f9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe8f2);
        EXPECT(gbc.pc(), 0x7fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0167
        gbc.setState(0xcd91, 0xfbe7, 0xf7f0, 0xcec1, 0xbc42, 0x4f3c, 0x0, 0x0);
        gbc.writeMem(0xcd91, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfbe7);
        EXPECT(gbc.pc(), 0xcd93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd91), 0xcb);
        EXPECT(gbc.readMem(0xcd92), 0x5f);
        // CB 5F 0168
        gbc.setState(0x6912, 0x835b, 0x1470, 0x2bf0, 0x46e3, 0xb5d6, 0x1, 0x0);
        gbc.writeMem(0x6912, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x835b);
        EXPECT(gbc.pc(), 0x6914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0169
        gbc.setState(0x2032, 0xb69e, 0x70, 0xf56, 0xcb4, 0xb597, 0x0, 0x1);
        gbc.writeMem(0x2032, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb69e);
        EXPECT(gbc.pc(), 0x2034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 016A
        gbc.setState(0xde77, 0x6278, 0xb4c0, 0xed82, 0x4421, 0x415a, 0x0, 0x0);
        gbc.writeMem(0xde77, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6278);
        EXPECT(gbc.pc(), 0xde79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde77), 0xcb);
        EXPECT(gbc.readMem(0xde78), 0x5f);
        // CB 5F 016B
        gbc.setState(0xdf0a, 0x3c8, 0x5660, 0x9b17, 0xdd1b, 0xaba8, 0x0, 0x0);
        gbc.writeMem(0xdf0a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3c8);
        EXPECT(gbc.pc(), 0xdf0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf0a), 0xcb);
        EXPECT(gbc.readMem(0xdf0b), 0x5f);
        // CB 5F 016C
        gbc.setState(0xb03b, 0x6f4d, 0x1340, 0x29cf, 0xb81d, 0x65a1, 0x0, 0x1);
        gbc.writeMem(0xb03b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6f4d);
        EXPECT(gbc.pc(), 0xb03d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03b), 0xcb);
        EXPECT(gbc.readMem(0xb03c), 0x5f);
        // CB 5F 016E
        gbc.setState(0x6e37, 0x711e, 0x38a0, 0x6d4d, 0xbffb, 0xfeb0, 0x1, 0x0);
        gbc.writeMem(0x6e37, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x711e);
        EXPECT(gbc.pc(), 0x6e39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 016F
        gbc.setState(0xb779, 0xa56a, 0xc310, 0x674a, 0x96b5, 0xcfee, 0x0, 0x1);
        gbc.writeMem(0xb779, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa56a);
        EXPECT(gbc.pc(), 0xb77b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb779), 0xcb);
        EXPECT(gbc.readMem(0xb77a), 0x5f);
        // CB 5F 0170
        gbc.setState(0x9863, 0x1590, 0xa030, 0x90fe, 0x85c3, 0xa0e3, 0x1, 0x1);
        gbc.writeMem(0x9863, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1590);
        EXPECT(gbc.pc(), 0x9865);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9863), 0xcb);
        EXPECT(gbc.readMem(0x9864), 0x5f);
        // CB 5F 0171
        gbc.setState(0x13c7, 0x9915, 0x220, 0x3a2d, 0x16ad, 0x506f, 0x0, 0x0);
        gbc.writeMem(0x13c7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9915);
        EXPECT(gbc.pc(), 0x13c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0172
        gbc.setState(0x24a, 0x2ca6, 0xb530, 0xe06f, 0x2a46, 0x7b0b, 0x0, 0x1);
        gbc.writeMem(0x24a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2ca6);
        EXPECT(gbc.pc(), 0x24c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0173
        gbc.setState(0x3d83, 0x9813, 0x1b80, 0xa84c, 0x123c, 0xc1d6, 0x0, 0x1);
        gbc.writeMem(0x3d83, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9813);
        EXPECT(gbc.pc(), 0x3d85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0174
        gbc.setState(0x26ae, 0x30f1, 0xe540, 0xd4ea, 0x9308, 0x54fd, 0x1, 0x0);
        gbc.writeMem(0x26ae, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x30f1);
        EXPECT(gbc.pc(), 0x26b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0175
        gbc.setState(0x3aca, 0xe594, 0x4e20, 0x13c2, 0xbd6f, 0x6e04, 0x0, 0x1);
        gbc.writeMem(0x3aca, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe594);
        EXPECT(gbc.pc(), 0x3acc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0176
        gbc.setState(0xf26, 0xccea, 0x79c0, 0xe601, 0xdac4, 0x7f8d, 0x1, 0x1);
        gbc.writeMem(0xf26, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xccea);
        EXPECT(gbc.pc(), 0xf28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0177
        gbc.setState(0x80c, 0x22ce, 0xb720, 0xc106, 0x63d2, 0x1d04, 0x1, 0x0);
        gbc.writeMem(0x80c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x22ce);
        EXPECT(gbc.pc(), 0x80e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0179
        gbc.setState(0x7cff, 0xfc94, 0x1a50, 0x8be5, 0xee48, 0x14bc, 0x1, 0x1);
        gbc.writeMem(0x7cff, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfc94);
        EXPECT(gbc.pc(), 0x7d01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 017A
        gbc.setState(0xe45e, 0xda11, 0xcc0, 0x5002, 0x886, 0x16bc, 0x0, 0x0);
        gbc.writeMem(0xe45e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xda11);
        EXPECT(gbc.pc(), 0xe460);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe45e), 0xcb);
        EXPECT(gbc.readMem(0xe45f), 0x5f);
        // CB 5F 017B
        gbc.setState(0xd4f9, 0x2fe3, 0x4120, 0xd8c2, 0x4bb3, 0x2847, 0x1, 0x1);
        gbc.writeMem(0xd4f9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2fe3);
        EXPECT(gbc.pc(), 0xd4fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f9), 0xcb);
        EXPECT(gbc.readMem(0xd4fa), 0x5f);
        // CB 5F 017C
        gbc.setState(0x9a70, 0xe52d, 0x2590, 0x6eba, 0x2cf4, 0x2da2, 0x1, 0x1);
        gbc.writeMem(0x9a70, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xe52d);
        EXPECT(gbc.pc(), 0x9a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a70), 0xcb);
        EXPECT(gbc.readMem(0x9a71), 0x5f);
        // CB 5F 017D
        gbc.setState(0xe1a1, 0xfce7, 0x13d0, 0xa609, 0x4d78, 0x89e2, 0x1, 0x1);
        gbc.writeMem(0xe1a1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xfce7);
        EXPECT(gbc.pc(), 0xe1a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1a1), 0xcb);
        EXPECT(gbc.readMem(0xe1a2), 0x5f);
        // CB 5F 017F
        gbc.setState(0x579c, 0x9034, 0xa350, 0x4b26, 0xfa06, 0xdc04, 0x0, 0x0);
        gbc.writeMem(0x579c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9034);
        EXPECT(gbc.pc(), 0x579e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0180
        gbc.setState(0x967b, 0xe60c, 0xc930, 0xb4e5, 0x6e04, 0x54da, 0x1, 0x0);
        gbc.writeMem(0x967b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe60c);
        EXPECT(gbc.pc(), 0x967d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x967b), 0xcb);
        EXPECT(gbc.readMem(0x967c), 0x5f);
        // CB 5F 0181
        gbc.setState(0xa646, 0xbb6b, 0x8a30, 0x9038, 0x3d6, 0x9440, 0x1, 0x1);
        gbc.writeMem(0xa646, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbb6b);
        EXPECT(gbc.pc(), 0xa648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa646), 0xcb);
        EXPECT(gbc.readMem(0xa647), 0x5f);
        // CB 5F 0182
        gbc.setState(0x5ee, 0xfcf6, 0xb5f0, 0x1da4, 0x4ae4, 0x9fcb, 0x1, 0x1);
        gbc.writeMem(0x5ee, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xfcf6);
        EXPECT(gbc.pc(), 0x5f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0184
        gbc.setState(0x54d, 0x3549, 0xc8e0, 0x8988, 0x4bc4, 0x9116, 0x1, 0x1);
        gbc.writeMem(0x54d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3549);
        EXPECT(gbc.pc(), 0x54f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0185
        gbc.setState(0x878b, 0xfa32, 0x8f20, 0xe945, 0x7442, 0xeb36, 0x0, 0x1);
        gbc.writeMem(0x878b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xfa32);
        EXPECT(gbc.pc(), 0x878d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x878b), 0xcb);
        EXPECT(gbc.readMem(0x878c), 0x5f);
        // CB 5F 0186
        gbc.setState(0x45ae, 0xb6df, 0x4c60, 0x3b29, 0xd254, 0xb936, 0x0, 0x1);
        gbc.writeMem(0x45ae, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xb6df);
        EXPECT(gbc.pc(), 0x45b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0187
        gbc.setState(0xc277, 0xf94e, 0xf240, 0x9ca9, 0x6ce7, 0x7de1, 0x0, 0x1);
        gbc.writeMem(0xc277, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf94e);
        EXPECT(gbc.pc(), 0xc279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc277), 0xcb);
        EXPECT(gbc.readMem(0xc278), 0x5f);
        // CB 5F 0188
        gbc.setState(0x8c99, 0x87a1, 0x5440, 0x727b, 0x20e5, 0xa4d7, 0x0, 0x0);
        gbc.writeMem(0x8c99, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x87a1);
        EXPECT(gbc.pc(), 0x8c9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c99), 0xcb);
        EXPECT(gbc.readMem(0x8c9a), 0x5f);
        // CB 5F 0189
        gbc.setState(0x21, 0x4894, 0x39d0, 0x72bd, 0x8ab9, 0xa6f4, 0x1, 0x1);
        gbc.writeMem(0x21, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4894);
        EXPECT(gbc.pc(), 0x23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 018A
        gbc.setState(0x614d, 0x6681, 0x6830, 0xdbb6, 0x5cd7, 0x1ba8, 0x0, 0x1);
        gbc.writeMem(0x614d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6681);
        EXPECT(gbc.pc(), 0x614f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 018B
        gbc.setState(0xc039, 0xc47f, 0xaa10, 0xc799, 0xbc81, 0xd95, 0x1, 0x0);
        gbc.writeMem(0xc039, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc47f);
        EXPECT(gbc.pc(), 0xc03b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc039), 0xcb);
        EXPECT(gbc.readMem(0xc03a), 0x5f);
        // CB 5F 018C
        gbc.setState(0xaf87, 0xecc8, 0x87f0, 0x269, 0xdb18, 0x8c9a, 0x0, 0x1);
        gbc.writeMem(0xaf87, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xecc8);
        EXPECT(gbc.pc(), 0xaf89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf87), 0xcb);
        EXPECT(gbc.readMem(0xaf88), 0x5f);
        // CB 5F 018D
        gbc.setState(0xea01, 0x2dd2, 0x64b0, 0x26bd, 0x7095, 0xfdf, 0x0, 0x1);
        gbc.writeMem(0xea01, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2dd2);
        EXPECT(gbc.pc(), 0xea03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea01), 0xcb);
        EXPECT(gbc.readMem(0xea02), 0x5f);
        // CB 5F 018E
        gbc.setState(0x4de1, 0x452d, 0x52b0, 0x87bb, 0x2186, 0x807a, 0x0, 0x0);
        gbc.writeMem(0x4de1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x452d);
        EXPECT(gbc.pc(), 0x4de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 018F
        gbc.setState(0xd894, 0xf449, 0xca0, 0xf978, 0xc541, 0x3004, 0x1, 0x0);
        gbc.writeMem(0xd894, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf449);
        EXPECT(gbc.pc(), 0xd896);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd894), 0xcb);
        EXPECT(gbc.readMem(0xd895), 0x5f);
        // CB 5F 0190
        gbc.setState(0x5f99, 0x6264, 0x3480, 0xba79, 0xa795, 0x66fa, 0x1, 0x0);
        gbc.writeMem(0x5f99, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6264);
        EXPECT(gbc.pc(), 0x5f9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0191
        gbc.setState(0x66ed, 0x181e, 0x6010, 0xabf7, 0xa6b0, 0x5463, 0x1, 0x0);
        gbc.writeMem(0x66ed, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x181e);
        EXPECT(gbc.pc(), 0x66ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0192
        gbc.setState(0xd56, 0xd3e9, 0xa050, 0x44be, 0xb962, 0xc3b0, 0x1, 0x1);
        gbc.writeMem(0xd56, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd3e9);
        EXPECT(gbc.pc(), 0xd58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0193
        gbc.setState(0x352e, 0xaaf1, 0x7570, 0x4bf9, 0x76a, 0x552b, 0x1, 0x1);
        gbc.writeMem(0x352e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xaaf1);
        EXPECT(gbc.pc(), 0x3530);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0194
        gbc.setState(0x6b42, 0x9900, 0x7e80, 0xd8c9, 0x147b, 0xa07d, 0x0, 0x0);
        gbc.writeMem(0x6b42, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9900);
        EXPECT(gbc.pc(), 0x6b44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0195
        gbc.setState(0x1a0e, 0x3d4e, 0xb420, 0x9f9c, 0xef99, 0xcc33, 0x0, 0x0);
        gbc.writeMem(0x1a0e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3d4e);
        EXPECT(gbc.pc(), 0x1a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0196
        gbc.setState(0xc6ef, 0xd31, 0x9570, 0x3743, 0x1e3, 0xe86d, 0x1, 0x1);
        gbc.writeMem(0xc6ef, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd31);
        EXPECT(gbc.pc(), 0xc6f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ef), 0xcb);
        EXPECT(gbc.readMem(0xc6f0), 0x5f);
        // CB 5F 0197
        gbc.setState(0xb221, 0x5791, 0x60c0, 0xcc8e, 0xe4ee, 0xdd1, 0x1, 0x1);
        gbc.writeMem(0xb221, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5791);
        EXPECT(gbc.pc(), 0xb223);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb221), 0xcb);
        EXPECT(gbc.readMem(0xb222), 0x5f);
        // CB 5F 0198
        gbc.setState(0xee3a, 0x2ced, 0x3930, 0x51c, 0xa024, 0x7e35, 0x1, 0x1);
        gbc.writeMem(0xee3a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2ced);
        EXPECT(gbc.pc(), 0xee3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee3a), 0xcb);
        EXPECT(gbc.readMem(0xee3b), 0x5f);
        // CB 5F 0199
        gbc.setState(0x384, 0x46d2, 0x8780, 0xf4f5, 0x5ceb, 0xfdf4, 0x0, 0x0);
        gbc.writeMem(0x384, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x46d2);
        EXPECT(gbc.pc(), 0x386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 019B
        gbc.setState(0x7516, 0x1771, 0x9580, 0x17f6, 0x8165, 0x6dd, 0x0, 0x0);
        gbc.writeMem(0x7516, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1771);
        EXPECT(gbc.pc(), 0x7518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 019C
        gbc.setState(0x5332, 0xae6f, 0x2ef0, 0x6e65, 0x7c74, 0x51bb, 0x1, 0x0);
        gbc.writeMem(0x5332, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xae6f);
        EXPECT(gbc.pc(), 0x5334);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 019E
        gbc.setState(0xafe0, 0x6616, 0x840, 0xfd2e, 0xee2b, 0x6766, 0x0, 0x0);
        gbc.writeMem(0xafe0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6616);
        EXPECT(gbc.pc(), 0xafe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe0), 0xcb);
        EXPECT(gbc.readMem(0xafe1), 0x5f);
        // CB 5F 019F
        gbc.setState(0xc68b, 0xaa26, 0xef20, 0x25e7, 0x77ee, 0x70ec, 0x1, 0x0);
        gbc.writeMem(0xc68b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xaa26);
        EXPECT(gbc.pc(), 0xc68d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc68b), 0xcb);
        EXPECT(gbc.readMem(0xc68c), 0x5f);
        // CB 5F 01A0
        gbc.setState(0xa766, 0xa129, 0x1490, 0xffba, 0xae25, 0xb274, 0x0, 0x0);
        gbc.writeMem(0xa766, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa129);
        EXPECT(gbc.pc(), 0xa768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa766), 0xcb);
        EXPECT(gbc.readMem(0xa767), 0x5f);
        // CB 5F 01A1
        gbc.setState(0x1152, 0x1a05, 0x4c10, 0x6b08, 0xcdf, 0xe893, 0x1, 0x0);
        gbc.writeMem(0x1152, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1a05);
        EXPECT(gbc.pc(), 0x1154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01A2
        gbc.setState(0xb64, 0x2664, 0x3840, 0x8a71, 0x2afa, 0xd498, 0x1, 0x1);
        gbc.writeMem(0xb64, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2664);
        EXPECT(gbc.pc(), 0xb66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01A3
        gbc.setState(0x6734, 0xf22b, 0x7b70, 0x4169, 0x307b, 0x20a1, 0x0, 0x1);
        gbc.writeMem(0x6734, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf22b);
        EXPECT(gbc.pc(), 0x6736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01A4
        gbc.setState(0x8cb7, 0x1bd, 0x7c30, 0x594c, 0x8fee, 0x2b40, 0x0, 0x0);
        gbc.writeMem(0x8cb7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1bd);
        EXPECT(gbc.pc(), 0x8cb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cb7), 0xcb);
        EXPECT(gbc.readMem(0x8cb8), 0x5f);
        // CB 5F 01A5
        gbc.setState(0xbb21, 0x2fea, 0xb390, 0x5867, 0x7df9, 0xe241, 0x0, 0x1);
        gbc.writeMem(0xbb21, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2fea);
        EXPECT(gbc.pc(), 0xbb23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb21), 0xcb);
        EXPECT(gbc.readMem(0xbb22), 0x5f);
        // CB 5F 01A6
        gbc.setState(0xdca1, 0xe68, 0x7640, 0xa18b, 0x9c5e, 0x9f4, 0x1, 0x1);
        gbc.writeMem(0xdca1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe68);
        EXPECT(gbc.pc(), 0xdca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdca1), 0xcb);
        EXPECT(gbc.readMem(0xdca2), 0x5f);
        // CB 5F 01A7
        gbc.setState(0x786a, 0xcdb7, 0xd540, 0x6461, 0x4dea, 0xaa5e, 0x0, 0x1);
        gbc.writeMem(0x786a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcdb7);
        EXPECT(gbc.pc(), 0x786c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01A8
        gbc.setState(0x3ec9, 0xcbdf, 0x2710, 0xc31a, 0x95d2, 0xa0fc, 0x0, 0x0);
        gbc.writeMem(0x3ec9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xcbdf);
        EXPECT(gbc.pc(), 0x3ecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01A9
        gbc.setState(0xcba3, 0x9f5b, 0x130, 0x2d85, 0xa884, 0xe4ad, 0x1, 0x1);
        gbc.writeMem(0xcba3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9f5b);
        EXPECT(gbc.pc(), 0xcba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba3), 0xcb);
        EXPECT(gbc.readMem(0xcba4), 0x5f);
        // CB 5F 01AA
        gbc.setState(0x8d09, 0x84a7, 0x32c0, 0x9cec, 0xfaa9, 0xc51b, 0x0, 0x0);
        gbc.writeMem(0x8d09, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x84a7);
        EXPECT(gbc.pc(), 0x8d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d09), 0xcb);
        EXPECT(gbc.readMem(0x8d0a), 0x5f);
        // CB 5F 01AC
        gbc.setState(0x7b95, 0x3102, 0x2a60, 0xaf2d, 0x8bf7, 0xe161, 0x1, 0x1);
        gbc.writeMem(0x7b95, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3102);
        EXPECT(gbc.pc(), 0x7b97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01AD
        gbc.setState(0x9cf8, 0x96a4, 0xf720, 0x613c, 0x692a, 0x94a, 0x0, 0x1);
        gbc.writeMem(0x9cf8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x96a4);
        EXPECT(gbc.pc(), 0x9cfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf8), 0xcb);
        EXPECT(gbc.readMem(0x9cf9), 0x5f);
        // CB 5F 01AE
        gbc.setState(0x19af, 0x20f7, 0xf910, 0x27a7, 0x23f2, 0x4182, 0x0, 0x1);
        gbc.writeMem(0x19af, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x20f7);
        EXPECT(gbc.pc(), 0x19b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01AF
        gbc.setState(0x2f2e, 0xfdb6, 0x3840, 0xeba1, 0x9abc, 0x570c, 0x1, 0x1);
        gbc.writeMem(0x2f2e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfdb6);
        EXPECT(gbc.pc(), 0x2f30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01B0
        gbc.setState(0x64a1, 0x9eaf, 0x3120, 0x3c32, 0x11d2, 0xbd7b, 0x1, 0x0);
        gbc.writeMem(0x64a1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9eaf);
        EXPECT(gbc.pc(), 0x64a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01B1
        gbc.setState(0xe366, 0xe072, 0xd570, 0xb578, 0x7965, 0x8740, 0x0, 0x0);
        gbc.writeMem(0xe366, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe072);
        EXPECT(gbc.pc(), 0xe368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe366), 0xcb);
        EXPECT(gbc.readMem(0xe367), 0x5f);
        // CB 5F 01B2
        gbc.setState(0x795a, 0xa457, 0xd700, 0x4128, 0x5718, 0x8ae9, 0x0, 0x0);
        gbc.writeMem(0x795a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa457);
        EXPECT(gbc.pc(), 0x795c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01B4
        gbc.setState(0x3558, 0x32ff, 0xc400, 0x3904, 0x28f0, 0x3b8f, 0x1, 0x1);
        gbc.writeMem(0x3558, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x32ff);
        EXPECT(gbc.pc(), 0x355a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01B5
        gbc.setState(0xdd9d, 0xbaad, 0xd7f0, 0x1890, 0x67ce, 0x5e56, 0x0, 0x0);
        gbc.writeMem(0xdd9d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbaad);
        EXPECT(gbc.pc(), 0xdd9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd9d), 0xcb);
        EXPECT(gbc.readMem(0xdd9e), 0x5f);
        // CB 5F 01B6
        gbc.setState(0x826a, 0x45e6, 0xb1f0, 0x6123, 0xff3, 0x6ccb, 0x0, 0x0);
        gbc.writeMem(0x826a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x45e6);
        EXPECT(gbc.pc(), 0x826c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x826a), 0xcb);
        EXPECT(gbc.readMem(0x826b), 0x5f);
        // CB 5F 01B7
        gbc.setState(0xd231, 0xbb9b, 0x3870, 0xd594, 0xbbf, 0xc1ff, 0x0, 0x1);
        gbc.writeMem(0xd231, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbb9b);
        EXPECT(gbc.pc(), 0xd233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd231), 0xcb);
        EXPECT(gbc.readMem(0xd232), 0x5f);
        // CB 5F 01B8
        gbc.setState(0x2e7c, 0xe781, 0x6e70, 0x8f38, 0x976f, 0x1298, 0x1, 0x1);
        gbc.writeMem(0x2e7c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe781);
        EXPECT(gbc.pc(), 0x2e7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01B9
        gbc.setState(0x333d, 0x6862, 0x5040, 0x3346, 0x7e02, 0x9e5c, 0x0, 0x0);
        gbc.writeMem(0x333d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6862);
        EXPECT(gbc.pc(), 0x333f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01BA
        gbc.setState(0x3cf3, 0x8190, 0x4030, 0x8f7f, 0x28b0, 0x3420, 0x1, 0x0);
        gbc.writeMem(0x3cf3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8190);
        EXPECT(gbc.pc(), 0x3cf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01BB
        gbc.setState(0x389e, 0xfcae, 0xf800, 0x73cf, 0x7992, 0xb346, 0x1, 0x1);
        gbc.writeMem(0x389e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xfcae);
        EXPECT(gbc.pc(), 0x38a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01BC
        gbc.setState(0x47c4, 0xb638, 0x49a0, 0x49f7, 0x907f, 0x6995, 0x0, 0x1);
        gbc.writeMem(0x47c4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb638);
        EXPECT(gbc.pc(), 0x47c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01BD
        gbc.setState(0xe0c9, 0xec31, 0xf300, 0x8ab6, 0xa94f, 0x6c4f, 0x0, 0x1);
        gbc.writeMem(0xe0c9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xec31);
        EXPECT(gbc.pc(), 0xe0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0c9), 0xcb);
        EXPECT(gbc.readMem(0xe0ca), 0x5f);
        // CB 5F 01BE
        gbc.setState(0x298b, 0xb0d5, 0x5050, 0xd934, 0xc02d, 0x13f9, 0x0, 0x1);
        gbc.writeMem(0x298b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb0d5);
        EXPECT(gbc.pc(), 0x298d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01BF
        gbc.setState(0xd97c, 0x3332, 0xcda0, 0x3ea0, 0x954, 0x7beb, 0x1, 0x0);
        gbc.writeMem(0xd97c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3332);
        EXPECT(gbc.pc(), 0xd97e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97c), 0xcb);
        EXPECT(gbc.readMem(0xd97d), 0x5f);
        // CB 5F 01C0
        gbc.setState(0x669c, 0x72ee, 0xe050, 0xee2a, 0x3dc, 0xb94, 0x1, 0x1);
        gbc.writeMem(0x669c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x72ee);
        EXPECT(gbc.pc(), 0x669e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01C1
        gbc.setState(0x6e1, 0xc83e, 0xe7d0, 0xeb03, 0xf1f, 0x9bda, 0x1, 0x1);
        gbc.writeMem(0x6e1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc83e);
        EXPECT(gbc.pc(), 0x6e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01C2
        gbc.setState(0xe299, 0xc1f3, 0x5470, 0x6372, 0x9f81, 0x23cf, 0x0, 0x0);
        gbc.writeMem(0xe299, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc1f3);
        EXPECT(gbc.pc(), 0xe29b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe299), 0xcb);
        EXPECT(gbc.readMem(0xe29a), 0x5f);
        // CB 5F 01C3
        gbc.setState(0x6b0d, 0x56f2, 0x27e0, 0xb0bf, 0x3714, 0x7931, 0x1, 0x1);
        gbc.writeMem(0x6b0d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x56f2);
        EXPECT(gbc.pc(), 0x6b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01C4
        gbc.setState(0x71eb, 0x283b, 0xcfb0, 0x6d81, 0xaa2a, 0x33f5, 0x0, 0x1);
        gbc.writeMem(0x71eb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x283b);
        EXPECT(gbc.pc(), 0x71ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01C5
        gbc.setState(0x45f6, 0x357b, 0x3a80, 0xab1, 0x5b5d, 0x21b5, 0x0, 0x0);
        gbc.writeMem(0x45f6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x357b);
        EXPECT(gbc.pc(), 0x45f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01C6
        gbc.setState(0x6b5, 0x5dd7, 0xbc50, 0x576e, 0xb57f, 0x7016, 0x1, 0x1);
        gbc.writeMem(0x6b5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5dd7);
        EXPECT(gbc.pc(), 0x6b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01C7
        gbc.setState(0x5fc7, 0x73f7, 0xa1a0, 0x417b, 0x1e8b, 0xf53a, 0x0, 0x1);
        gbc.writeMem(0x5fc7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x73f7);
        EXPECT(gbc.pc(), 0x5fc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01C8
        gbc.setState(0xe482, 0xfafa, 0x98d0, 0x12d5, 0x19d8, 0x2ec, 0x1, 0x0);
        gbc.writeMem(0xe482, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfafa);
        EXPECT(gbc.pc(), 0xe484);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe482), 0xcb);
        EXPECT(gbc.readMem(0xe483), 0x5f);
        // CB 5F 01C9
        gbc.setState(0x9310, 0xaabd, 0x4340, 0x8666, 0xf370, 0x1598, 0x1, 0x0);
        gbc.writeMem(0x9310, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xaabd);
        EXPECT(gbc.pc(), 0x9312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9310), 0xcb);
        EXPECT(gbc.readMem(0x9311), 0x5f);
        // CB 5F 01CA
        gbc.setState(0x38ef, 0x35e6, 0xf380, 0x9700, 0xb794, 0x695a, 0x1, 0x1);
        gbc.writeMem(0x38ef, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x35e6);
        EXPECT(gbc.pc(), 0x38f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01CB
        gbc.setState(0x43ae, 0xebeb, 0x35c0, 0xc57d, 0x4a3e, 0x85a4, 0x1, 0x1);
        gbc.writeMem(0x43ae, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xebeb);
        EXPECT(gbc.pc(), 0x43b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01CC
        gbc.setState(0xa306, 0x2d1d, 0xca00, 0x6cb6, 0x123, 0x2234, 0x0, 0x0);
        gbc.writeMem(0xa306, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2d1d);
        EXPECT(gbc.pc(), 0xa308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa306), 0xcb);
        EXPECT(gbc.readMem(0xa307), 0x5f);
        // CB 5F 01CD
        gbc.setState(0x8eda, 0x2ef3, 0x2d00, 0xbc64, 0x4849, 0xc2cd, 0x0, 0x0);
        gbc.writeMem(0x8eda, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2ef3);
        EXPECT(gbc.pc(), 0x8edc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eda), 0xcb);
        EXPECT(gbc.readMem(0x8edb), 0x5f);
        // CB 5F 01CE
        gbc.setState(0xa45c, 0x2a0, 0x9070, 0xbe05, 0x5adf, 0x9343, 0x0, 0x1);
        gbc.writeMem(0xa45c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2a0);
        EXPECT(gbc.pc(), 0xa45e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa45c), 0xcb);
        EXPECT(gbc.readMem(0xa45d), 0x5f);
        // CB 5F 01CF
        gbc.setState(0x39e7, 0xcead, 0xb190, 0x48e3, 0x5d48, 0x1840, 0x1, 0x1);
        gbc.writeMem(0x39e7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xcead);
        EXPECT(gbc.pc(), 0x39e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01D0
        gbc.setState(0x8856, 0x22c3, 0xafc0, 0xff74, 0x818c, 0xde98, 0x1, 0x1);
        gbc.writeMem(0x8856, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x22c3);
        EXPECT(gbc.pc(), 0x8858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8856), 0xcb);
        EXPECT(gbc.readMem(0x8857), 0x5f);
        // CB 5F 01D1
        gbc.setState(0x93d5, 0x5606, 0xa1c0, 0xd3eb, 0x3e36, 0x2d38, 0x1, 0x1);
        gbc.writeMem(0x93d5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5606);
        EXPECT(gbc.pc(), 0x93d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93d5), 0xcb);
        EXPECT(gbc.readMem(0x93d6), 0x5f);
        // CB 5F 01D2
        gbc.setState(0x473a, 0xd483, 0x69f0, 0x5087, 0xd3f4, 0x816f, 0x1, 0x1);
        gbc.writeMem(0x473a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd483);
        EXPECT(gbc.pc(), 0x473c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01D4
        gbc.setState(0xec8d, 0x2a02, 0xb940, 0x4dcd, 0x1887, 0x3a9, 0x1, 0x1);
        gbc.writeMem(0xec8d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2a02);
        EXPECT(gbc.pc(), 0xec8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec8d), 0xcb);
        EXPECT(gbc.readMem(0xec8e), 0x5f);
        // CB 5F 01D5
        gbc.setState(0x7279, 0x64e6, 0x47b0, 0x8e1b, 0xadb6, 0x8dbb, 0x1, 0x0);
        gbc.writeMem(0x7279, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x64e6);
        EXPECT(gbc.pc(), 0x727b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01D6
        gbc.setState(0x44c5, 0x5c03, 0x4e00, 0x3ef4, 0x46cf, 0x2a4d, 0x1, 0x1);
        gbc.writeMem(0x44c5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5c03);
        EXPECT(gbc.pc(), 0x44c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01D7
        gbc.setState(0xe235, 0xf036, 0xf250, 0x502d, 0xf98d, 0xac81, 0x0, 0x1);
        gbc.writeMem(0xe235, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf036);
        EXPECT(gbc.pc(), 0xe237);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe235), 0xcb);
        EXPECT(gbc.readMem(0xe236), 0x5f);
        // CB 5F 01D8
        gbc.setState(0xbaed, 0x70cc, 0x5c70, 0xff3e, 0xc593, 0x15be, 0x1, 0x0);
        gbc.writeMem(0xbaed, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x70cc);
        EXPECT(gbc.pc(), 0xbaef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaed), 0xcb);
        EXPECT(gbc.readMem(0xbaee), 0x5f);
        // CB 5F 01D9
        gbc.setState(0xe9b8, 0x24d0, 0xdca0, 0x1dec, 0x1ac8, 0xf606, 0x0, 0x0);
        gbc.writeMem(0xe9b8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x24d0);
        EXPECT(gbc.pc(), 0xe9ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b8), 0xcb);
        EXPECT(gbc.readMem(0xe9b9), 0x5f);
        // CB 5F 01DA
        gbc.setState(0x726a, 0x8892, 0xdf60, 0x781f, 0x203a, 0xcd58, 0x0, 0x1);
        gbc.writeMem(0x726a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8892);
        EXPECT(gbc.pc(), 0x726c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01DB
        gbc.setState(0x3be1, 0x1044, 0x3d90, 0x6c07, 0x409d, 0x36d9, 0x1, 0x0);
        gbc.writeMem(0x3be1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1044);
        EXPECT(gbc.pc(), 0x3be3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01DC
        gbc.setState(0x301c, 0xab89, 0x8aa0, 0xe610, 0x58c2, 0x1983, 0x1, 0x1);
        gbc.writeMem(0x301c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xab89);
        EXPECT(gbc.pc(), 0x301e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01DD
        gbc.setState(0xbff7, 0x97a4, 0xf60, 0x69ea, 0xed9c, 0xdc54, 0x1, 0x1);
        gbc.writeMem(0xbff7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x97a4);
        EXPECT(gbc.pc(), 0xbff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff7), 0xcb);
        EXPECT(gbc.readMem(0xbff8), 0x5f);
        // CB 5F 01DE
        gbc.setState(0x6f1c, 0x8970, 0x2d0, 0x1c01, 0xd1cf, 0xa45, 0x0, 0x1);
        gbc.writeMem(0x6f1c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8970);
        EXPECT(gbc.pc(), 0x6f1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01DF
        gbc.setState(0xb789, 0xca10, 0xfcb0, 0xd40b, 0x65cc, 0x9c6e, 0x1, 0x0);
        gbc.writeMem(0xb789, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xca10);
        EXPECT(gbc.pc(), 0xb78b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb789), 0xcb);
        EXPECT(gbc.readMem(0xb78a), 0x5f);
        // CB 5F 01E0
        gbc.setState(0xc4e, 0xfc3d, 0x22a0, 0x66f8, 0x868f, 0x290, 0x1, 0x1);
        gbc.writeMem(0xc4e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xfc3d);
        EXPECT(gbc.pc(), 0xc50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01E1
        gbc.setState(0x2a34, 0x9373, 0x3450, 0x6dab, 0xe123, 0xdfc6, 0x1, 0x1);
        gbc.writeMem(0x2a34, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9373);
        EXPECT(gbc.pc(), 0x2a36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01E2
        gbc.setState(0xad9e, 0x38b8, 0x2020, 0x4ddc, 0xe7ae, 0x83a2, 0x0, 0x1);
        gbc.writeMem(0xad9e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x38b8);
        EXPECT(gbc.pc(), 0xada0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad9e), 0xcb);
        EXPECT(gbc.readMem(0xad9f), 0x5f);
        // CB 5F 01E3
        gbc.setState(0xb825, 0xa555, 0x7e00, 0xfe8, 0x998a, 0xa21c, 0x0, 0x0);
        gbc.writeMem(0xb825, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa555);
        EXPECT(gbc.pc(), 0xb827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb825), 0xcb);
        EXPECT(gbc.readMem(0xb826), 0x5f);
        // CB 5F 01E4
        gbc.setState(0xdb85, 0xdc93, 0x4530, 0x7537, 0x5883, 0x8a98, 0x0, 0x1);
        gbc.writeMem(0xdb85, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xdc93);
        EXPECT(gbc.pc(), 0xdb87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb85), 0xcb);
        EXPECT(gbc.readMem(0xdb86), 0x5f);
        // CB 5F 01E5
        gbc.setState(0xcf65, 0x309e, 0xbe80, 0x5054, 0x53ef, 0x2820, 0x0, 0x1);
        gbc.writeMem(0xcf65, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x309e);
        EXPECT(gbc.pc(), 0xcf67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf65), 0xcb);
        EXPECT(gbc.readMem(0xcf66), 0x5f);
        // CB 5F 01E7
        gbc.setState(0x8f2e, 0x69aa, 0x7140, 0x5c0b, 0xd909, 0xcbce, 0x1, 0x0);
        gbc.writeMem(0x8f2e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x69aa);
        EXPECT(gbc.pc(), 0x8f30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f2e), 0xcb);
        EXPECT(gbc.readMem(0x8f2f), 0x5f);
        // CB 5F 01E8
        gbc.setState(0x32e4, 0xf18a, 0xe040, 0x1d2e, 0xd355, 0xba2d, 0x1, 0x0);
        gbc.writeMem(0x32e4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf18a);
        EXPECT(gbc.pc(), 0x32e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01E9
        gbc.setState(0x6665, 0x4277, 0xb4c0, 0x9157, 0xf22e, 0xefaf, 0x1, 0x0);
        gbc.writeMem(0x6665, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4277);
        EXPECT(gbc.pc(), 0x6667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01EA
        gbc.setState(0x9474, 0x9c0d, 0x2390, 0xbccf, 0x7322, 0x776, 0x0, 0x0);
        gbc.writeMem(0x9474, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9c0d);
        EXPECT(gbc.pc(), 0x9476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9474), 0xcb);
        EXPECT(gbc.readMem(0x9475), 0x5f);
        // CB 5F 01EB
        gbc.setState(0x1be1, 0xc690, 0x87b0, 0x79b6, 0xa71d, 0xec0e, 0x1, 0x1);
        gbc.writeMem(0x1be1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc690);
        EXPECT(gbc.pc(), 0x1be3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01EC
        gbc.setState(0xc7a8, 0x53e9, 0xed0, 0x2c7a, 0xf28b, 0x6aa8, 0x0, 0x0);
        gbc.writeMem(0xc7a8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x53e9);
        EXPECT(gbc.pc(), 0xc7aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7a8), 0xcb);
        EXPECT(gbc.readMem(0xc7a9), 0x5f);
        // CB 5F 01ED
        gbc.setState(0x93c4, 0x66f1, 0xe2e0, 0xa169, 0x194, 0xca39, 0x1, 0x1);
        gbc.writeMem(0x93c4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x66f1);
        EXPECT(gbc.pc(), 0x93c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c4), 0xcb);
        EXPECT(gbc.readMem(0x93c5), 0x5f);
        // CB 5F 01EE
        gbc.setState(0x6c14, 0x54c0, 0xd7e0, 0x29b3, 0x41fa, 0x17a5, 0x1, 0x1);
        gbc.writeMem(0x6c14, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x54c0);
        EXPECT(gbc.pc(), 0x6c16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01EF
        gbc.setState(0x9568, 0xda94, 0x67a0, 0xc7cd, 0x4317, 0x746c, 0x0, 0x1);
        gbc.writeMem(0x9568, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xda94);
        EXPECT(gbc.pc(), 0x956a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9568), 0xcb);
        EXPECT(gbc.readMem(0x9569), 0x5f);
        // CB 5F 01F0
        gbc.setState(0xcdf3, 0x13fe, 0x3560, 0xefaf, 0x2663, 0x7df0, 0x1, 0x0);
        gbc.writeMem(0xcdf3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x13fe);
        EXPECT(gbc.pc(), 0xcdf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf3), 0xcb);
        EXPECT(gbc.readMem(0xcdf4), 0x5f);
        // CB 5F 01F1
        gbc.setState(0x705a, 0xedee, 0x2cd0, 0xc247, 0xb687, 0xd38, 0x0, 0x1);
        gbc.writeMem(0x705a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xedee);
        EXPECT(gbc.pc(), 0x705c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01F2
        gbc.setState(0x9c3c, 0x8d1d, 0x8ff0, 0xaeba, 0x578e, 0x7144, 0x0, 0x1);
        gbc.writeMem(0x9c3c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8d1d);
        EXPECT(gbc.pc(), 0x9c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c3c), 0xcb);
        EXPECT(gbc.readMem(0x9c3d), 0x5f);
        // CB 5F 01F3
        gbc.setState(0x2b74, 0xfc71, 0x1980, 0xc971, 0x5bcf, 0x3e6d, 0x1, 0x1);
        gbc.writeMem(0x2b74, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfc71);
        EXPECT(gbc.pc(), 0x2b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01F4
        gbc.setState(0xdff7, 0x72b8, 0x650, 0xe944, 0x7327, 0x2e51, 0x1, 0x0);
        gbc.writeMem(0xdff7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x72b8);
        EXPECT(gbc.pc(), 0xdff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdff7), 0xcb);
        EXPECT(gbc.readMem(0xdff8), 0x5f);
        // CB 5F 01F5
        gbc.setState(0x18e1, 0x4c09, 0xba40, 0x8e93, 0x15ff, 0x85cd, 0x1, 0x0);
        gbc.writeMem(0x18e1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4c09);
        EXPECT(gbc.pc(), 0x18e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01F6
        gbc.setState(0xe6e1, 0x7096, 0x9760, 0x32be, 0xa29, 0xfaf4, 0x0, 0x0);
        gbc.writeMem(0xe6e1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7096);
        EXPECT(gbc.pc(), 0xe6e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e1), 0xcb);
        EXPECT(gbc.readMem(0xe6e2), 0x5f);
        // CB 5F 01F7
        gbc.setState(0x9937, 0x53bd, 0x4550, 0xc4df, 0x331d, 0x6881, 0x0, 0x0);
        gbc.writeMem(0x9937, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x53bd);
        EXPECT(gbc.pc(), 0x9939);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9937), 0xcb);
        EXPECT(gbc.readMem(0x9938), 0x5f);
        // CB 5F 01F8
        gbc.setState(0x722, 0xa7a3, 0x9d0, 0x4a01, 0xc9d8, 0xdd07, 0x1, 0x1);
        gbc.writeMem(0x722, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa7a3);
        EXPECT(gbc.pc(), 0x724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01F9
        gbc.setState(0x65ea, 0x18d4, 0x7080, 0x4dff, 0xae49, 0x50d, 0x1, 0x0);
        gbc.writeMem(0x65ea, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x18d4);
        EXPECT(gbc.pc(), 0x65ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01FA
        gbc.setState(0x78c7, 0x6e53, 0x9440, 0x47de, 0x4dec, 0x49a4, 0x1, 0x1);
        gbc.writeMem(0x78c7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6e53);
        EXPECT(gbc.pc(), 0x78c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01FB
        gbc.setState(0xccc3, 0xa6c4, 0x93d0, 0x3aa2, 0x370c, 0xc78e, 0x0, 0x1);
        gbc.writeMem(0xccc3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa6c4);
        EXPECT(gbc.pc(), 0xccc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc3), 0xcb);
        EXPECT(gbc.readMem(0xccc4), 0x5f);
        // CB 5F 01FC
        gbc.setState(0x2ed9, 0x4b8d, 0xdd60, 0x635f, 0x117c, 0xc619, 0x1, 0x0);
        gbc.writeMem(0x2ed9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4b8d);
        EXPECT(gbc.pc(), 0x2edb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 01FD
        gbc.setState(0xedcf, 0x897e, 0x7280, 0xedd2, 0xa74, 0x4e98, 0x1, 0x1);
        gbc.writeMem(0xedcf, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x897e);
        EXPECT(gbc.pc(), 0xedd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedcf), 0xcb);
        EXPECT(gbc.readMem(0xedd0), 0x5f);
        // CB 5F 01FE
        gbc.setState(0x3c79, 0xde53, 0xb270, 0x610a, 0x9d06, 0x211c, 0x0, 0x0);
        gbc.writeMem(0x3c79, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xde53);
        EXPECT(gbc.pc(), 0x3c7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 01FF
        gbc.setState(0xe73f, 0x638c, 0x5d30, 0xfe9c, 0x3894, 0x4b2f, 0x0, 0x1);
        gbc.writeMem(0xe73f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x638c);
        EXPECT(gbc.pc(), 0xe741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe73f), 0xcb);
        EXPECT(gbc.readMem(0xe740), 0x5f);
        // CB 5F 0200
        gbc.setState(0x300a, 0x955c, 0x5d80, 0x30ca, 0xe87, 0xbe62, 0x1, 0x0);
        gbc.writeMem(0x300a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x955c);
        EXPECT(gbc.pc(), 0x300c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0201
        gbc.setState(0x2cfb, 0x68d3, 0x7ba0, 0x5b52, 0x7952, 0xba10, 0x1, 0x0);
        gbc.writeMem(0x2cfb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x68d3);
        EXPECT(gbc.pc(), 0x2cfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0202
        gbc.setState(0x1886, 0x489a, 0xf1e0, 0x2e3b, 0x2427, 0x10ff, 0x0, 0x0);
        gbc.writeMem(0x1886, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x489a);
        EXPECT(gbc.pc(), 0x1888);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0203
        gbc.setState(0x5cdd, 0xd208, 0x7b80, 0x3752, 0x74ff, 0x1769, 0x1, 0x0);
        gbc.writeMem(0x5cdd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd208);
        EXPECT(gbc.pc(), 0x5cdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0204
        gbc.setState(0xcff6, 0xdeb1, 0x1250, 0xa881, 0xd7f1, 0x4bec, 0x1, 0x0);
        gbc.writeMem(0xcff6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xdeb1);
        EXPECT(gbc.pc(), 0xcff8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcff6), 0xcb);
        EXPECT(gbc.readMem(0xcff7), 0x5f);
        // CB 5F 0205
        gbc.setState(0xe108, 0x4a87, 0xbca0, 0xe018, 0x436c, 0xd85f, 0x0, 0x0);
        gbc.writeMem(0xe108, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4a87);
        EXPECT(gbc.pc(), 0xe10a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe108), 0xcb);
        EXPECT(gbc.readMem(0xe109), 0x5f);
        // CB 5F 0207
        gbc.setState(0x112d, 0x3bc8, 0x76f0, 0x88e2, 0xafdc, 0xe88e, 0x0, 0x1);
        gbc.writeMem(0x112d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3bc8);
        EXPECT(gbc.pc(), 0x112f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0208
        gbc.setState(0x4443, 0x65d1, 0xbda0, 0x4688, 0x65db, 0x29d9, 0x0, 0x1);
        gbc.writeMem(0x4443, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x65d1);
        EXPECT(gbc.pc(), 0x4445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0209
        gbc.setState(0x3d3a, 0x3b88, 0x3d70, 0xa678, 0xac7, 0x4d1f, 0x0, 0x1);
        gbc.writeMem(0x3d3a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3b88);
        EXPECT(gbc.pc(), 0x3d3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 020A
        gbc.setState(0x4001, 0xd327, 0xc590, 0xd095, 0xe20, 0xdb3f, 0x1, 0x0);
        gbc.writeMem(0x4001, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd327);
        EXPECT(gbc.pc(), 0x4003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 020B
        gbc.setState(0x6ae4, 0xd91a, 0x3c60, 0xf3cc, 0x4fa0, 0xe63a, 0x0, 0x0);
        gbc.writeMem(0x6ae4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd91a);
        EXPECT(gbc.pc(), 0x6ae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 020C
        gbc.setState(0x282d, 0xda9, 0xc310, 0x51da, 0x6949, 0xb43d, 0x0, 0x0);
        gbc.writeMem(0x282d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xda9);
        EXPECT(gbc.pc(), 0x282f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 020E
        gbc.setState(0xba14, 0x6dc3, 0x95c0, 0x1dfa, 0x2f53, 0xd59d, 0x0, 0x1);
        gbc.writeMem(0xba14, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6dc3);
        EXPECT(gbc.pc(), 0xba16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba14), 0xcb);
        EXPECT(gbc.readMem(0xba15), 0x5f);
        // CB 5F 020F
        gbc.setState(0x6fd5, 0xc94d, 0xf1e0, 0xe372, 0x53ed, 0xb401, 0x0, 0x0);
        gbc.writeMem(0x6fd5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc94d);
        EXPECT(gbc.pc(), 0x6fd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0210
        gbc.setState(0x29cb, 0xa2dc, 0xb180, 0x2be6, 0x8bc7, 0x834e, 0x0, 0x0);
        gbc.writeMem(0x29cb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa2dc);
        EXPECT(gbc.pc(), 0x29cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0211
        gbc.setState(0xa3b0, 0x2092, 0xc930, 0xf83c, 0x222d, 0x62cc, 0x0, 0x0);
        gbc.writeMem(0xa3b0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2092);
        EXPECT(gbc.pc(), 0xa3b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3b0), 0xcb);
        EXPECT(gbc.readMem(0xa3b1), 0x5f);
        // CB 5F 0212
        gbc.setState(0x6583, 0xe42a, 0x220, 0x1734, 0xce04, 0xe8f3, 0x1, 0x1);
        gbc.writeMem(0x6583, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe42a);
        EXPECT(gbc.pc(), 0x6585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0213
        gbc.setState(0x6cbd, 0x6bbb, 0x1ad0, 0x70c3, 0x492, 0xad93, 0x1, 0x1);
        gbc.writeMem(0x6cbd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6bbb);
        EXPECT(gbc.pc(), 0x6cbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0214
        gbc.setState(0x5298, 0x74dc, 0x67b0, 0xcc03, 0xe039, 0x77e, 0x1, 0x0);
        gbc.writeMem(0x5298, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x74dc);
        EXPECT(gbc.pc(), 0x529a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0215
        gbc.setState(0x23d0, 0xc040, 0xc950, 0xdec7, 0x92fa, 0x1492, 0x0, 0x0);
        gbc.writeMem(0x23d0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc040);
        EXPECT(gbc.pc(), 0x23d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0216
        gbc.setState(0x21b5, 0xd24, 0x7d80, 0xb224, 0x526c, 0x599a, 0x1, 0x1);
        gbc.writeMem(0x21b5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd24);
        EXPECT(gbc.pc(), 0x21b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0217
        gbc.setState(0xa59, 0x2018, 0xd4f0, 0x37, 0x29e9, 0x983f, 0x1, 0x1);
        gbc.writeMem(0xa59, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2018);
        EXPECT(gbc.pc(), 0xa5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0218
        gbc.setState(0x3183, 0xd64f, 0x5fd0, 0xdf6c, 0xb80d, 0x31b6, 0x1, 0x1);
        gbc.writeMem(0x3183, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd64f);
        EXPECT(gbc.pc(), 0x3185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0219
        gbc.setState(0xbe24, 0xc75d, 0xc80, 0x903, 0x348a, 0x2f04, 0x1, 0x0);
        gbc.writeMem(0xbe24, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc75d);
        EXPECT(gbc.pc(), 0xbe26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe24), 0xcb);
        EXPECT(gbc.readMem(0xbe25), 0x5f);
        // CB 5F 021A
        gbc.setState(0xa185, 0xec42, 0xd320, 0x4b97, 0xad45, 0xf9bb, 0x1, 0x1);
        gbc.writeMem(0xa185, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xec42);
        EXPECT(gbc.pc(), 0xa187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa185), 0xcb);
        EXPECT(gbc.readMem(0xa186), 0x5f);
        // CB 5F 021B
        gbc.setState(0x39f5, 0x96b3, 0x3b40, 0x3918, 0xa404, 0x571e, 0x0, 0x1);
        gbc.writeMem(0x39f5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x96b3);
        EXPECT(gbc.pc(), 0x39f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 021C
        gbc.setState(0xbd87, 0x7bdf, 0xdc20, 0x56f3, 0x7ecc, 0xef2c, 0x1, 0x0);
        gbc.writeMem(0xbd87, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7bdf);
        EXPECT(gbc.pc(), 0xbd89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd87), 0xcb);
        EXPECT(gbc.readMem(0xbd88), 0x5f);
        // CB 5F 021D
        gbc.setState(0x84e2, 0x92ce, 0x79a0, 0x17c, 0xff20, 0x133, 0x1, 0x0);
        gbc.writeMem(0x84e2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x92ce);
        EXPECT(gbc.pc(), 0x84e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84e2), 0xcb);
        EXPECT(gbc.readMem(0x84e3), 0x5f);
        // CB 5F 021E
        gbc.setState(0xa162, 0xbc75, 0xe210, 0xaae2, 0xb702, 0xc28d, 0x0, 0x1);
        gbc.writeMem(0xa162, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbc75);
        EXPECT(gbc.pc(), 0xa164);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa162), 0xcb);
        EXPECT(gbc.readMem(0xa163), 0x5f);
        // CB 5F 0220
        gbc.setState(0xcf5c, 0xe864, 0x8100, 0x9fed, 0xca7, 0xc10b, 0x0, 0x1);
        gbc.writeMem(0xcf5c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe864);
        EXPECT(gbc.pc(), 0xcf5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf5c), 0xcb);
        EXPECT(gbc.readMem(0xcf5d), 0x5f);
        // CB 5F 0221
        gbc.setState(0xc3aa, 0x8497, 0x1820, 0x7fb5, 0xdcd0, 0xa006, 0x0, 0x1);
        gbc.writeMem(0xc3aa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8497);
        EXPECT(gbc.pc(), 0xc3ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3aa), 0xcb);
        EXPECT(gbc.readMem(0xc3ab), 0x5f);
        // CB 5F 0222
        gbc.setState(0x3ec, 0xd1cd, 0xa150, 0x56cc, 0xd693, 0xf72b, 0x1, 0x0);
        gbc.writeMem(0x3ec, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd1cd);
        EXPECT(gbc.pc(), 0x3ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0223
        gbc.setState(0xe8f3, 0xcb51, 0x5900, 0x5ea6, 0xbc24, 0x506d, 0x0, 0x0);
        gbc.writeMem(0xe8f3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xcb51);
        EXPECT(gbc.pc(), 0xe8f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f3), 0xcb);
        EXPECT(gbc.readMem(0xe8f4), 0x5f);
        // CB 5F 0224
        gbc.setState(0xc268, 0xc3c0, 0x7300, 0x8027, 0x5d94, 0x6d5b, 0x0, 0x1);
        gbc.writeMem(0xc268, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc3c0);
        EXPECT(gbc.pc(), 0xc26a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc268), 0xcb);
        EXPECT(gbc.readMem(0xc269), 0x5f);
        // CB 5F 0225
        gbc.setState(0xdb70, 0xb39, 0xc1e0, 0xe7bc, 0x18a, 0x348c, 0x1, 0x0);
        gbc.writeMem(0xdb70, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb39);
        EXPECT(gbc.pc(), 0xdb72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb70), 0xcb);
        EXPECT(gbc.readMem(0xdb71), 0x5f);
        // CB 5F 0226
        gbc.setState(0x4fbb, 0x66bf, 0x21d0, 0x68ed, 0x8762, 0x871f, 0x0, 0x0);
        gbc.writeMem(0x4fbb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x66bf);
        EXPECT(gbc.pc(), 0x4fbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0227
        gbc.setState(0xa42c, 0x4aa8, 0x39c0, 0xb70a, 0xf2a9, 0xf698, 0x1, 0x1);
        gbc.writeMem(0xa42c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4aa8);
        EXPECT(gbc.pc(), 0xa42e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42c), 0xcb);
        EXPECT(gbc.readMem(0xa42d), 0x5f);
        // CB 5F 0228
        gbc.setState(0x898a, 0x2151, 0xaf40, 0x8f1a, 0xcf6, 0xea75, 0x1, 0x0);
        gbc.writeMem(0x898a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2151);
        EXPECT(gbc.pc(), 0x898c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x898a), 0xcb);
        EXPECT(gbc.readMem(0x898b), 0x5f);
        // CB 5F 022A
        gbc.setState(0x2eb2, 0x9379, 0xe310, 0x5440, 0xe90, 0xb667, 0x1, 0x1);
        gbc.writeMem(0x2eb2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9379);
        EXPECT(gbc.pc(), 0x2eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 022B
        gbc.setState(0x4ffe, 0x6258, 0x71a0, 0xef64, 0xc95b, 0xd3ca, 0x0, 0x1);
        gbc.writeMem(0x4ffe, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6258);
        EXPECT(gbc.pc(), 0x5000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 022C
        gbc.setState(0xd473, 0x28b1, 0x1360, 0xee52, 0x6a60, 0xf6a1, 0x1, 0x1);
        gbc.writeMem(0xd473, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x28b1);
        EXPECT(gbc.pc(), 0xd475);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd473), 0xcb);
        EXPECT(gbc.readMem(0xd474), 0x5f);
        // CB 5F 022D
        gbc.setState(0xc6a8, 0x46b8, 0x6820, 0x4adf, 0x9052, 0x88bf, 0x1, 0x0);
        gbc.writeMem(0xc6a8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x46b8);
        EXPECT(gbc.pc(), 0xc6aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a8), 0xcb);
        EXPECT(gbc.readMem(0xc6a9), 0x5f);
        // CB 5F 022E
        gbc.setState(0x5b96, 0xf2a4, 0xf70, 0x670c, 0xcead, 0xd64b, 0x1, 0x1);
        gbc.writeMem(0x5b96, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf2a4);
        EXPECT(gbc.pc(), 0x5b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 022F
        gbc.setState(0x5692, 0x6027, 0xb8a0, 0x7c32, 0x5993, 0xe4d8, 0x0, 0x1);
        gbc.writeMem(0x5692, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6027);
        EXPECT(gbc.pc(), 0x5694);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0230
        gbc.setState(0x9f82, 0x636b, 0x3360, 0x4e28, 0x6b6c, 0x52e1, 0x0, 0x0);
        gbc.writeMem(0x9f82, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x636b);
        EXPECT(gbc.pc(), 0x9f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f82), 0xcb);
        EXPECT(gbc.readMem(0x9f83), 0x5f);
        // CB 5F 0232
        gbc.setState(0x903, 0x2b9c, 0xaaf0, 0x34db, 0x4000, 0x1394, 0x1, 0x0);
        gbc.writeMem(0x903, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2b9c);
        EXPECT(gbc.pc(), 0x905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0233
        gbc.setState(0xabd, 0xd624, 0x2c50, 0xbd, 0xf7a7, 0x25f4, 0x0, 0x0);
        gbc.writeMem(0xabd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd624);
        EXPECT(gbc.pc(), 0xabf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0234
        gbc.setState(0x137d, 0x4da1, 0x9350, 0x9f22, 0x97b, 0xe6bb, 0x0, 0x1);
        gbc.writeMem(0x137d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4da1);
        EXPECT(gbc.pc(), 0x137f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0235
        gbc.setState(0x2ca3, 0x6c25, 0x780, 0xf78d, 0xc984, 0x2e4f, 0x1, 0x0);
        gbc.writeMem(0x2ca3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6c25);
        EXPECT(gbc.pc(), 0x2ca5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0236
        gbc.setState(0x35b3, 0xdccc, 0x2aa0, 0x223, 0x2bab, 0x407e, 0x0, 0x1);
        gbc.writeMem(0x35b3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xdccc);
        EXPECT(gbc.pc(), 0x35b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0237
        gbc.setState(0xcdac, 0x3b14, 0x100, 0x61fa, 0xa5e7, 0xd71c, 0x1, 0x0);
        gbc.writeMem(0xcdac, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3b14);
        EXPECT(gbc.pc(), 0xcdae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdac), 0xcb);
        EXPECT(gbc.readMem(0xcdad), 0x5f);
        // CB 5F 0238
        gbc.setState(0xe02a, 0x9e60, 0xfc0, 0x6e79, 0xe398, 0xa223, 0x0, 0x0);
        gbc.writeMem(0xe02a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9e60);
        EXPECT(gbc.pc(), 0xe02c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02a), 0xcb);
        EXPECT(gbc.readMem(0xe02b), 0x5f);
        // CB 5F 0239
        gbc.setState(0x46c6, 0x12a5, 0x21c0, 0xb8f5, 0x420f, 0x89b6, 0x0, 0x1);
        gbc.writeMem(0x46c6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x12a5);
        EXPECT(gbc.pc(), 0x46c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 023A
        gbc.setState(0x95f7, 0xb57a, 0x6470, 0xe9e6, 0xeaa, 0x3187, 0x0, 0x1);
        gbc.writeMem(0x95f7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb57a);
        EXPECT(gbc.pc(), 0x95f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f7), 0xcb);
        EXPECT(gbc.readMem(0x95f8), 0x5f);
        // CB 5F 023B
        gbc.setState(0xec35, 0xf1c6, 0x9920, 0xd597, 0xcac7, 0x9142, 0x1, 0x0);
        gbc.writeMem(0xec35, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf1c6);
        EXPECT(gbc.pc(), 0xec37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec35), 0xcb);
        EXPECT(gbc.readMem(0xec36), 0x5f);
        // CB 5F 023C
        gbc.setState(0x388, 0xf885, 0x9ec0, 0x777d, 0x34bb, 0xabdf, 0x0, 0x1);
        gbc.writeMem(0x388, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf885);
        EXPECT(gbc.pc(), 0x38a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 023D
        gbc.setState(0x4a9d, 0xb847, 0xc090, 0xd1d, 0xf0d8, 0xe56b, 0x1, 0x0);
        gbc.writeMem(0x4a9d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb847);
        EXPECT(gbc.pc(), 0x4a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 023E
        gbc.setState(0x2e47, 0x3ee8, 0x2a0, 0xc922, 0x31f7, 0x7396, 0x1, 0x0);
        gbc.writeMem(0x2e47, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3ee8);
        EXPECT(gbc.pc(), 0x2e49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 023F
        gbc.setState(0xb3d4, 0x8ed8, 0x5480, 0x2e37, 0x73ac, 0x4f29, 0x1, 0x1);
        gbc.writeMem(0xb3d4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8ed8);
        EXPECT(gbc.pc(), 0xb3d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d4), 0xcb);
        EXPECT(gbc.readMem(0xb3d5), 0x5f);
        // CB 5F 0240
        gbc.setState(0xe9b2, 0x1a3, 0xcd60, 0x1a0a, 0x7ebb, 0xe1ee, 0x0, 0x1);
        gbc.writeMem(0xe9b2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1a3);
        EXPECT(gbc.pc(), 0xe9b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b2), 0xcb);
        EXPECT(gbc.readMem(0xe9b3), 0x5f);
        // CB 5F 0241
        gbc.setState(0xb6c7, 0xacbc, 0xddf0, 0x6433, 0x24da, 0x920, 0x0, 0x0);
        gbc.writeMem(0xb6c7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xacbc);
        EXPECT(gbc.pc(), 0xb6c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c7), 0xcb);
        EXPECT(gbc.readMem(0xb6c8), 0x5f);
        // CB 5F 0242
        gbc.setState(0x9bb4, 0x1e2b, 0x1670, 0x8846, 0x988b, 0xeb49, 0x0, 0x1);
        gbc.writeMem(0x9bb4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1e2b);
        EXPECT(gbc.pc(), 0x9bb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb4), 0xcb);
        EXPECT(gbc.readMem(0x9bb5), 0x5f);
        // CB 5F 0243
        gbc.setState(0x6091, 0xb1fa, 0xef60, 0x522b, 0x26f5, 0x9491, 0x0, 0x0);
        gbc.writeMem(0x6091, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb1fa);
        EXPECT(gbc.pc(), 0x6093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0244
        gbc.setState(0x6eb4, 0xae8d, 0xe8d0, 0x6bb2, 0xd6b3, 0xd859, 0x1, 0x1);
        gbc.writeMem(0x6eb4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xae8d);
        EXPECT(gbc.pc(), 0x6eb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0245
        gbc.setState(0x33e2, 0x35c7, 0x1250, 0x84af, 0xdd8c, 0x3a30, 0x0, 0x0);
        gbc.writeMem(0x33e2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x35c7);
        EXPECT(gbc.pc(), 0x33e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0246
        gbc.setState(0x3bb4, 0x285c, 0x2f80, 0x92, 0x8b42, 0x595a, 0x1, 0x0);
        gbc.writeMem(0x3bb4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x285c);
        EXPECT(gbc.pc(), 0x3bb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0247
        gbc.setState(0xe046, 0xe1f4, 0x2870, 0x7242, 0x8a1d, 0x269, 0x0, 0x1);
        gbc.writeMem(0xe046, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe1f4);
        EXPECT(gbc.pc(), 0xe048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe046), 0xcb);
        EXPECT(gbc.readMem(0xe047), 0x5f);
        // CB 5F 0249
        gbc.setState(0x13fa, 0x4c58, 0x8150, 0xf9b8, 0x34d9, 0xf6ea, 0x1, 0x0);
        gbc.writeMem(0x13fa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4c58);
        EXPECT(gbc.pc(), 0x13fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 024B
        gbc.setState(0x3361, 0xe996, 0x1ff0, 0xec75, 0x345b, 0x29db, 0x0, 0x0);
        gbc.writeMem(0x3361, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe996);
        EXPECT(gbc.pc(), 0x3363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 024C
        gbc.setState(0xbf78, 0xb8a6, 0xc450, 0xf6c, 0xf564, 0x2131, 0x0, 0x0);
        gbc.writeMem(0xbf78, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb8a6);
        EXPECT(gbc.pc(), 0xbf7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf78), 0xcb);
        EXPECT(gbc.readMem(0xbf79), 0x5f);
        // CB 5F 024D
        gbc.setState(0x46a9, 0xf574, 0x90a0, 0x933, 0xc915, 0x4657, 0x1, 0x0);
        gbc.writeMem(0x46a9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf574);
        EXPECT(gbc.pc(), 0x46ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 024E
        gbc.setState(0x4305, 0x83e9, 0xd200, 0xec5c, 0xf540, 0xdd81, 0x0, 0x0);
        gbc.writeMem(0x4305, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x83e9);
        EXPECT(gbc.pc(), 0x4307);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 024F
        gbc.setState(0xc088, 0x3cdc, 0x6f30, 0x74b0, 0x95e5, 0xe36f, 0x1, 0x0);
        gbc.writeMem(0xc088, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x3cdc);
        EXPECT(gbc.pc(), 0xc08a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc088), 0xcb);
        EXPECT(gbc.readMem(0xc089), 0x5f);
        // CB 5F 0250
        gbc.setState(0x3122, 0x139, 0x5e90, 0x48c, 0x7d17, 0xa659, 0x1, 0x0);
        gbc.writeMem(0x3122, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x139);
        EXPECT(gbc.pc(), 0x3124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0251
        gbc.setState(0x5ee5, 0x9128, 0xe750, 0xc35, 0xa9a, 0xe7ff, 0x1, 0x0);
        gbc.writeMem(0x5ee5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x9128);
        EXPECT(gbc.pc(), 0x5ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0252
        gbc.setState(0xa620, 0x3159, 0xf0a0, 0xc00b, 0x15e2, 0xe062, 0x0, 0x1);
        gbc.writeMem(0xa620, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3159);
        EXPECT(gbc.pc(), 0xa622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa620), 0xcb);
        EXPECT(gbc.readMem(0xa621), 0x5f);
        // CB 5F 0253
        gbc.setState(0xd92f, 0x6fd6, 0x73a0, 0x2cfa, 0xa96, 0xae88, 0x0, 0x0);
        gbc.writeMem(0xd92f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6fd6);
        EXPECT(gbc.pc(), 0xd931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd92f), 0xcb);
        EXPECT(gbc.readMem(0xd930), 0x5f);
        // CB 5F 0254
        gbc.setState(0xe601, 0xdcf0, 0xba60, 0xaff2, 0x1862, 0xbcce, 0x0, 0x1);
        gbc.writeMem(0xe601, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xdcf0);
        EXPECT(gbc.pc(), 0xe603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe601), 0xcb);
        EXPECT(gbc.readMem(0xe602), 0x5f);
        // CB 5F 0255
        gbc.setState(0x570, 0x666b, 0xda40, 0x2512, 0xa1fb, 0x48c9, 0x1, 0x0);
        gbc.writeMem(0x570, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x666b);
        EXPECT(gbc.pc(), 0x572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0256
        gbc.setState(0xa09f, 0x72a3, 0x8250, 0x883, 0xef8d, 0xd265, 0x0, 0x0);
        gbc.writeMem(0xa09f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x72a3);
        EXPECT(gbc.pc(), 0xa0a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa09f), 0xcb);
        EXPECT(gbc.readMem(0xa0a0), 0x5f);
        // CB 5F 0257
        gbc.setState(0x74cd, 0xfdf4, 0x1ed0, 0xfa90, 0x6c38, 0x5b29, 0x0, 0x1);
        gbc.writeMem(0x74cd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfdf4);
        EXPECT(gbc.pc(), 0x74cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0258
        gbc.setState(0x9781, 0x2df2, 0x3b0, 0x1d87, 0x79a, 0x9a4, 0x0, 0x0);
        gbc.writeMem(0x9781, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2df2);
        EXPECT(gbc.pc(), 0x9783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9781), 0xcb);
        EXPECT(gbc.readMem(0x9782), 0x5f);
        // CB 5F 0259
        gbc.setState(0x1a49, 0x5c28, 0xfd80, 0xa67b, 0xdf3e, 0xda1a, 0x0, 0x0);
        gbc.writeMem(0x1a49, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5c28);
        EXPECT(gbc.pc(), 0x1a4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 025A
        gbc.setState(0x8dd2, 0x875a, 0x7270, 0x8cba, 0xb9f1, 0x7af4, 0x0, 0x0);
        gbc.writeMem(0x8dd2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x875a);
        EXPECT(gbc.pc(), 0x8dd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd2), 0xcb);
        EXPECT(gbc.readMem(0x8dd3), 0x5f);
        // CB 5F 025B
        gbc.setState(0x4611, 0x23d3, 0xec00, 0x9cd3, 0x20de, 0xf8f1, 0x0, 0x1);
        gbc.writeMem(0x4611, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x23d3);
        EXPECT(gbc.pc(), 0x4613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 025C
        gbc.setState(0x157, 0xc488, 0x7050, 0x87fb, 0xa71f, 0x5d26, 0x1, 0x1);
        gbc.writeMem(0x157, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc488);
        EXPECT(gbc.pc(), 0x159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 025D
        gbc.setState(0xbac7, 0xe79e, 0x6870, 0xa619, 0xb08, 0x7160, 0x1, 0x0);
        gbc.writeMem(0xbac7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe79e);
        EXPECT(gbc.pc(), 0xbac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbac7), 0xcb);
        EXPECT(gbc.readMem(0xbac8), 0x5f);
        // CB 5F 025E
        gbc.setState(0xdae, 0xb859, 0x4aa0, 0xe3fa, 0xef5a, 0x88e2, 0x0, 0x1);
        gbc.writeMem(0xdae, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb859);
        EXPECT(gbc.pc(), 0xdb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 025F
        gbc.setState(0x28c6, 0x5d1f, 0xb180, 0xa02a, 0x203e, 0x15fa, 0x0, 0x0);
        gbc.writeMem(0x28c6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5d1f);
        EXPECT(gbc.pc(), 0x28c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0260
        gbc.setState(0x13a3, 0x99ba, 0xc3c0, 0x4ea3, 0xb32, 0xe9c1, 0x0, 0x1);
        gbc.writeMem(0x13a3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x99ba);
        EXPECT(gbc.pc(), 0x13a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0261
        gbc.setState(0xcb97, 0x7234, 0x6c90, 0x7e58, 0xf4b6, 0xcdb0, 0x0, 0x1);
        gbc.writeMem(0xcb97, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7234);
        EXPECT(gbc.pc(), 0xcb99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb97), 0xcb);
        EXPECT(gbc.readMem(0xcb98), 0x5f);
        // CB 5F 0262
        gbc.setState(0xd500, 0xdf2e, 0x7aa0, 0xb638, 0x4fa9, 0x483d, 0x0, 0x1);
        gbc.writeMem(0xd500, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xdf2e);
        EXPECT(gbc.pc(), 0xd502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd500), 0xcb);
        EXPECT(gbc.readMem(0xd501), 0x5f);
        // CB 5F 0263
        gbc.setState(0x4729, 0x1e91, 0xa260, 0x5dce, 0x5150, 0xcfad, 0x1, 0x0);
        gbc.writeMem(0x4729, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1e91);
        EXPECT(gbc.pc(), 0x472b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0264
        gbc.setState(0xa4ad, 0x53cc, 0xee30, 0x10a0, 0x984c, 0xcb67, 0x1, 0x0);
        gbc.writeMem(0xa4ad, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x53cc);
        EXPECT(gbc.pc(), 0xa4af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4ad), 0xcb);
        EXPECT(gbc.readMem(0xa4ae), 0x5f);
        // CB 5F 0265
        gbc.setState(0x74ea, 0xdd5, 0xbe80, 0x3d30, 0x3014, 0x2708, 0x0, 0x1);
        gbc.writeMem(0x74ea, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xdd5);
        EXPECT(gbc.pc(), 0x74ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0266
        gbc.setState(0x2694, 0x753c, 0xbbf0, 0xd43c, 0x9c59, 0x2218, 0x1, 0x1);
        gbc.writeMem(0x2694, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x753c);
        EXPECT(gbc.pc(), 0x2696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0267
        gbc.setState(0xc82c, 0xf07a, 0x49d0, 0x3386, 0x7c1b, 0x37ff, 0x1, 0x1);
        gbc.writeMem(0xc82c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf07a);
        EXPECT(gbc.pc(), 0xc82e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc82c), 0xcb);
        EXPECT(gbc.readMem(0xc82d), 0x5f);
        // CB 5F 0268
        gbc.setState(0x8d24, 0x2a1, 0x6c80, 0x9f66, 0x4bc4, 0x6014, 0x0, 0x0);
        gbc.writeMem(0x8d24, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2a1);
        EXPECT(gbc.pc(), 0x8d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d24), 0xcb);
        EXPECT(gbc.readMem(0x8d25), 0x5f);
        // CB 5F 0269
        gbc.setState(0xc290, 0x15ff, 0x9e0, 0x7e67, 0x4b2b, 0xe5ef, 0x0, 0x0);
        gbc.writeMem(0xc290, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x15ff);
        EXPECT(gbc.pc(), 0xc292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc290), 0xcb);
        EXPECT(gbc.readMem(0xc291), 0x5f);
        // CB 5F 026A
        gbc.setState(0x980c, 0x1262, 0x950, 0x8ad4, 0x80ae, 0xacae, 0x0, 0x1);
        gbc.writeMem(0x980c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1262);
        EXPECT(gbc.pc(), 0x980e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x980c), 0xcb);
        EXPECT(gbc.readMem(0x980d), 0x5f);
        // CB 5F 026B
        gbc.setState(0x4a35, 0xe62b, 0xb190, 0x25e, 0xf322, 0x837e, 0x1, 0x0);
        gbc.writeMem(0x4a35, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe62b);
        EXPECT(gbc.pc(), 0x4a37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 026C
        gbc.setState(0xae70, 0xb0c, 0xc330, 0xc632, 0x3795, 0x1f58, 0x0, 0x0);
        gbc.writeMem(0xae70, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb0c);
        EXPECT(gbc.pc(), 0xae72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae70), 0xcb);
        EXPECT(gbc.readMem(0xae71), 0x5f);
        // CB 5F 026D
        gbc.setState(0x453a, 0x8517, 0x6420, 0xc798, 0xab17, 0x90fa, 0x0, 0x1);
        gbc.writeMem(0x453a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8517);
        EXPECT(gbc.pc(), 0x453c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 026E
        gbc.setState(0xe85d, 0xc711, 0x7cc0, 0x260a, 0x1a26, 0x48b3, 0x1, 0x1);
        gbc.writeMem(0xe85d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc711);
        EXPECT(gbc.pc(), 0xe85f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe85d), 0xcb);
        EXPECT(gbc.readMem(0xe85e), 0x5f);
        // CB 5F 026F
        gbc.setState(0x3609, 0x7388, 0xb610, 0xd587, 0x28b6, 0xfa25, 0x0, 0x1);
        gbc.writeMem(0x3609, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7388);
        EXPECT(gbc.pc(), 0x360b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0270
        gbc.setState(0x66b5, 0x162a, 0x6f90, 0x7a80, 0x21c6, 0xb0c2, 0x1, 0x1);
        gbc.writeMem(0x66b5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x162a);
        EXPECT(gbc.pc(), 0x66b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0271
        gbc.setState(0x9ad1, 0x4034, 0x8e20, 0x3952, 0x54a0, 0x7e14, 0x0, 0x0);
        gbc.writeMem(0x9ad1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4034);
        EXPECT(gbc.pc(), 0x9ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ad1), 0xcb);
        EXPECT(gbc.readMem(0x9ad2), 0x5f);
        // CB 5F 0272
        gbc.setState(0x2849, 0x2011, 0x1220, 0x3cf8, 0x6b29, 0xb421, 0x1, 0x0);
        gbc.writeMem(0x2849, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2011);
        EXPECT(gbc.pc(), 0x284b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0273
        gbc.setState(0x52e6, 0x6e2, 0xd7d0, 0x9bf7, 0x7e83, 0x1c5, 0x1, 0x0);
        gbc.writeMem(0x52e6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6e2);
        EXPECT(gbc.pc(), 0x52e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0274
        gbc.setState(0x39d3, 0x8859, 0x3780, 0x3b5e, 0x422e, 0x7bb9, 0x0, 0x0);
        gbc.writeMem(0x39d3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8859);
        EXPECT(gbc.pc(), 0x39d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0275
        gbc.setState(0x5827, 0x6792, 0x5b00, 0xef41, 0x7b4a, 0x7c85, 0x0, 0x0);
        gbc.writeMem(0x5827, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6792);
        EXPECT(gbc.pc(), 0x5829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0276
        gbc.setState(0x6a38, 0x223b, 0x4000, 0x4edb, 0xe0c4, 0x81c, 0x0, 0x1);
        gbc.writeMem(0x6a38, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x223b);
        EXPECT(gbc.pc(), 0x6a3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0277
        gbc.setState(0xa03f, 0x9ce, 0xcd50, 0x3bdc, 0xd4cb, 0x7e49, 0x1, 0x1);
        gbc.writeMem(0xa03f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9ce);
        EXPECT(gbc.pc(), 0xa041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03f), 0xcb);
        EXPECT(gbc.readMem(0xa040), 0x5f);
        // CB 5F 0278
        gbc.setState(0x7656, 0x13fe, 0x3dd0, 0x8c60, 0xa143, 0x6f27, 0x0, 0x0);
        gbc.writeMem(0x7656, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x13fe);
        EXPECT(gbc.pc(), 0x7658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0279
        gbc.setState(0xda37, 0x99b6, 0x2150, 0x3945, 0x1f80, 0x1659, 0x0, 0x0);
        gbc.writeMem(0xda37, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x99b6);
        EXPECT(gbc.pc(), 0xda39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda37), 0xcb);
        EXPECT(gbc.readMem(0xda38), 0x5f);
        // CB 5F 027A
        gbc.setState(0x4431, 0x23c1, 0x5f0, 0xd66f, 0x1090, 0xc32f, 0x0, 0x0);
        gbc.writeMem(0x4431, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x23c1);
        EXPECT(gbc.pc(), 0x4433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 027B
        gbc.setState(0x9846, 0x4a10, 0x18b0, 0xc939, 0x9093, 0x79af, 0x0, 0x0);
        gbc.writeMem(0x9846, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4a10);
        EXPECT(gbc.pc(), 0x9848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9846), 0xcb);
        EXPECT(gbc.readMem(0x9847), 0x5f);
        // CB 5F 027C
        gbc.setState(0x3268, 0x9fd8, 0x3790, 0xa023, 0xa827, 0x43e, 0x0, 0x0);
        gbc.writeMem(0x3268, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9fd8);
        EXPECT(gbc.pc(), 0x326a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 027E
        gbc.setState(0x59c0, 0x6320, 0xea30, 0x83e0, 0x7499, 0xb9ab, 0x1, 0x0);
        gbc.writeMem(0x59c0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6320);
        EXPECT(gbc.pc(), 0x59c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 027F
        gbc.setState(0x507c, 0x972f, 0xdf20, 0xfaeb, 0x4db0, 0xdf28, 0x1, 0x0);
        gbc.writeMem(0x507c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x972f);
        EXPECT(gbc.pc(), 0x507e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0280
        gbc.setState(0xb3e8, 0xd98f, 0xbee0, 0x6c0b, 0x6b6e, 0xf3d6, 0x1, 0x1);
        gbc.writeMem(0xb3e8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd98f);
        EXPECT(gbc.pc(), 0xb3ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3e8), 0xcb);
        EXPECT(gbc.readMem(0xb3e9), 0x5f);
        // CB 5F 0281
        gbc.setState(0xd65e, 0xfdd2, 0x47b0, 0x150b, 0x8b28, 0x2fce, 0x1, 0x1);
        gbc.writeMem(0xd65e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfdd2);
        EXPECT(gbc.pc(), 0xd660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd65e), 0xcb);
        EXPECT(gbc.readMem(0xd65f), 0x5f);
        // CB 5F 0284
        gbc.setState(0xe1b4, 0x37ba, 0x1770, 0x3fc5, 0x15ef, 0xb0fd, 0x1, 0x0);
        gbc.writeMem(0xe1b4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x37ba);
        EXPECT(gbc.pc(), 0xe1b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1b4), 0xcb);
        EXPECT(gbc.readMem(0xe1b5), 0x5f);
        // CB 5F 0285
        gbc.setState(0xd961, 0xeea, 0x830, 0x3b3a, 0x980f, 0x7b82, 0x1, 0x0);
        gbc.writeMem(0xd961, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xeea);
        EXPECT(gbc.pc(), 0xd963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd961), 0xcb);
        EXPECT(gbc.readMem(0xd962), 0x5f);
        // CB 5F 0286
        gbc.setState(0x7aa, 0x24ca, 0xb130, 0x162, 0x3697, 0x5156, 0x0, 0x0);
        gbc.writeMem(0x7aa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x24ca);
        EXPECT(gbc.pc(), 0x7ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0287
        gbc.setState(0x1280, 0xd971, 0x9c50, 0x5d0, 0x1d23, 0x71af, 0x0, 0x0);
        gbc.writeMem(0x1280, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd971);
        EXPECT(gbc.pc(), 0x1282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0288
        gbc.setState(0x2b13, 0xd60e, 0x5e70, 0x10b5, 0x2fa6, 0xa044, 0x0, 0x0);
        gbc.writeMem(0x2b13, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd60e);
        EXPECT(gbc.pc(), 0x2b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0289
        gbc.setState(0x62a, 0x7491, 0xc370, 0x8d70, 0x21ab, 0xc3b9, 0x0, 0x0);
        gbc.writeMem(0x62a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7491);
        EXPECT(gbc.pc(), 0x62c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 028A
        gbc.setState(0xaee4, 0x4133, 0x9830, 0xbf21, 0xa476, 0x38e1, 0x1, 0x0);
        gbc.writeMem(0xaee4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4133);
        EXPECT(gbc.pc(), 0xaee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaee4), 0xcb);
        EXPECT(gbc.readMem(0xaee5), 0x5f);
        // CB 5F 028B
        gbc.setState(0x1f8d, 0x8b0f, 0xfb90, 0xe649, 0xc8a3, 0x1452, 0x0, 0x1);
        gbc.writeMem(0x1f8d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8b0f);
        EXPECT(gbc.pc(), 0x1f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 028C
        gbc.setState(0xe35e, 0x5724, 0x4b30, 0xec06, 0xc692, 0x9dbe, 0x1, 0x0);
        gbc.writeMem(0xe35e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5724);
        EXPECT(gbc.pc(), 0xe360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe35e), 0xcb);
        EXPECT(gbc.readMem(0xe35f), 0x5f);
        // CB 5F 028D
        gbc.setState(0x1126, 0x32ec, 0x3b50, 0xcfad, 0xf7af, 0x809b, 0x0, 0x0);
        gbc.writeMem(0x1126, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x32ec);
        EXPECT(gbc.pc(), 0x1128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 028E
        gbc.setState(0x7448, 0x9111, 0x9c20, 0x352a, 0xf0a2, 0xe5, 0x1, 0x0);
        gbc.writeMem(0x7448, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9111);
        EXPECT(gbc.pc(), 0x744a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 028F
        gbc.setState(0xe89d, 0x5e19, 0x870, 0x8b54, 0x2d3c, 0xbcf2, 0x0, 0x0);
        gbc.writeMem(0xe89d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5e19);
        EXPECT(gbc.pc(), 0xe89f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe89d), 0xcb);
        EXPECT(gbc.readMem(0xe89e), 0x5f);
        // CB 5F 0290
        gbc.setState(0xbba, 0x6ea9, 0xfe40, 0x9830, 0x2553, 0x8a7e, 0x0, 0x0);
        gbc.writeMem(0xbba, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6ea9);
        EXPECT(gbc.pc(), 0xbbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0291
        gbc.setState(0xe98d, 0xd8b8, 0x2870, 0xe33f, 0xf8ea, 0xf8d, 0x0, 0x1);
        gbc.writeMem(0xe98d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd8b8);
        EXPECT(gbc.pc(), 0xe98f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe98d), 0xcb);
        EXPECT(gbc.readMem(0xe98e), 0x5f);
        // CB 5F 0292
        gbc.setState(0xdbac, 0x980, 0x56c0, 0x1ed0, 0x1266, 0x8d92, 0x0, 0x1);
        gbc.writeMem(0xdbac, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x980);
        EXPECT(gbc.pc(), 0xdbae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbac), 0xcb);
        EXPECT(gbc.readMem(0xdbad), 0x5f);
        // CB 5F 0293
        gbc.setState(0xda71, 0xff44, 0x2640, 0xae80, 0x5b7b, 0xef80, 0x0, 0x0);
        gbc.writeMem(0xda71, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xff44);
        EXPECT(gbc.pc(), 0xda73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda71), 0xcb);
        EXPECT(gbc.readMem(0xda72), 0x5f);
        // CB 5F 0294
        gbc.setState(0x5bb7, 0x7797, 0x3200, 0x683e, 0x8f63, 0x9e19, 0x1, 0x1);
        gbc.writeMem(0x5bb7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7797);
        EXPECT(gbc.pc(), 0x5bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0295
        gbc.setState(0x40c2, 0x6897, 0xd090, 0x2450, 0xa7c6, 0x9870, 0x0, 0x1);
        gbc.writeMem(0x40c2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6897);
        EXPECT(gbc.pc(), 0x40c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0296
        gbc.setState(0x3f8, 0x4f94, 0x3670, 0x9f9e, 0x680, 0xa23e, 0x1, 0x0);
        gbc.writeMem(0x3f8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4f94);
        EXPECT(gbc.pc(), 0x3fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0297
        gbc.setState(0x8786, 0x9a26, 0x77b0, 0xaec6, 0xc70c, 0xcca7, 0x0, 0x1);
        gbc.writeMem(0x8786, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9a26);
        EXPECT(gbc.pc(), 0x8788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8786), 0xcb);
        EXPECT(gbc.readMem(0x8787), 0x5f);
        // CB 5F 0298
        gbc.setState(0xd335, 0x23d5, 0x68b0, 0x2bb, 0xd2f8, 0xeefc, 0x0, 0x1);
        gbc.writeMem(0xd335, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x23d5);
        EXPECT(gbc.pc(), 0xd337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd335), 0xcb);
        EXPECT(gbc.readMem(0xd336), 0x5f);
        // CB 5F 0299
        gbc.setState(0xea22, 0x5952, 0x18a0, 0x7b04, 0x6e01, 0xaed1, 0x0, 0x0);
        gbc.writeMem(0xea22, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5952);
        EXPECT(gbc.pc(), 0xea24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea22), 0xcb);
        EXPECT(gbc.readMem(0xea23), 0x5f);
        // CB 5F 029A
        gbc.setState(0x78fa, 0x792a, 0x1de0, 0xa64, 0x9e6a, 0x7eae, 0x1, 0x0);
        gbc.writeMem(0x78fa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x792a);
        EXPECT(gbc.pc(), 0x78fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 029B
        gbc.setState(0x6fd4, 0xce1, 0x6ec0, 0xd521, 0xa4ff, 0xf8f9, 0x0, 0x0);
        gbc.writeMem(0x6fd4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xce1);
        EXPECT(gbc.pc(), 0x6fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 029C
        gbc.setState(0x16b4, 0xe270, 0xdb70, 0x9cc1, 0x4a40, 0x7739, 0x0, 0x0);
        gbc.writeMem(0x16b4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe270);
        EXPECT(gbc.pc(), 0x16b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 029D
        gbc.setState(0x8a05, 0xb3af, 0x2b50, 0xc609, 0x8318, 0x9c8d, 0x1, 0x0);
        gbc.writeMem(0x8a05, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb3af);
        EXPECT(gbc.pc(), 0x8a07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a05), 0xcb);
        EXPECT(gbc.readMem(0x8a06), 0x5f);
        // CB 5F 029E
        gbc.setState(0xa446, 0x444e, 0xc4b0, 0xc183, 0xfad6, 0x247a, 0x0, 0x1);
        gbc.writeMem(0xa446, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x444e);
        EXPECT(gbc.pc(), 0xa448);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa446), 0xcb);
        EXPECT(gbc.readMem(0xa447), 0x5f);
        // CB 5F 029F
        gbc.setState(0x1e6d, 0x5876, 0x88e0, 0x115e, 0x8e7b, 0x7622, 0x1, 0x0);
        gbc.writeMem(0x1e6d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5876);
        EXPECT(gbc.pc(), 0x1e6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02A0
        gbc.setState(0xeb4b, 0x553b, 0xc070, 0x4672, 0x9886, 0x6c41, 0x1, 0x1);
        gbc.writeMem(0xeb4b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x553b);
        EXPECT(gbc.pc(), 0xeb4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb4b), 0xcb);
        EXPECT(gbc.readMem(0xeb4c), 0x5f);
        // CB 5F 02A1
        gbc.setState(0x4211, 0xea24, 0x7360, 0xb23b, 0xaf99, 0xbabc, 0x1, 0x0);
        gbc.writeMem(0x4211, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xea24);
        EXPECT(gbc.pc(), 0x4213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02A2
        gbc.setState(0xa0de, 0xf59e, 0x8a10, 0x3d89, 0x9102, 0xc58c, 0x0, 0x1);
        gbc.writeMem(0xa0de, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf59e);
        EXPECT(gbc.pc(), 0xa0e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0de), 0xcb);
        EXPECT(gbc.readMem(0xa0df), 0x5f);
        // CB 5F 02A3
        gbc.setState(0x8370, 0x1be6, 0x7b30, 0xa141, 0x1008, 0xd5e1, 0x1, 0x0);
        gbc.writeMem(0x8370, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1be6);
        EXPECT(gbc.pc(), 0x8372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8370), 0xcb);
        EXPECT(gbc.readMem(0x8371), 0x5f);
        // CB 5F 02A4
        gbc.setState(0x4158, 0xd536, 0xb840, 0x14ad, 0xdd22, 0xef9f, 0x1, 0x0);
        gbc.writeMem(0x4158, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd536);
        EXPECT(gbc.pc(), 0x415a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02A5
        gbc.setState(0xcbb, 0xc36e, 0x1420, 0x2e67, 0xa7ba, 0x318b, 0x1, 0x0);
        gbc.writeMem(0xcbb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc36e);
        EXPECT(gbc.pc(), 0xcbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02A6
        gbc.setState(0x46e0, 0x2600, 0x8e80, 0x7f22, 0xda78, 0x55e4, 0x1, 0x1);
        gbc.writeMem(0x46e0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2600);
        EXPECT(gbc.pc(), 0x46e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02A7
        gbc.setState(0x2027, 0x4c14, 0x6550, 0xd3a2, 0xb253, 0x981a, 0x1, 0x1);
        gbc.writeMem(0x2027, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4c14);
        EXPECT(gbc.pc(), 0x2029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02A8
        gbc.setState(0xc21, 0x24d8, 0x3150, 0x34fe, 0xe0c3, 0x9be8, 0x0, 0x1);
        gbc.writeMem(0xc21, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x24d8);
        EXPECT(gbc.pc(), 0xc23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02A9
        gbc.setState(0x3731, 0xb39, 0xc0b0, 0x4c94, 0xdb3a, 0x3b9d, 0x0, 0x1);
        gbc.writeMem(0x3731, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb39);
        EXPECT(gbc.pc(), 0x3733);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02AA
        gbc.setState(0x558, 0x44e5, 0x4b00, 0x264e, 0x18a6, 0x9235, 0x1, 0x0);
        gbc.writeMem(0x558, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x44e5);
        EXPECT(gbc.pc(), 0x55a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02AB
        gbc.setState(0xac9b, 0xe092, 0x5b10, 0xd034, 0xd0eb, 0x6049, 0x0, 0x1);
        gbc.writeMem(0xac9b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe092);
        EXPECT(gbc.pc(), 0xac9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac9b), 0xcb);
        EXPECT(gbc.readMem(0xac9c), 0x5f);
        // CB 5F 02AC
        gbc.setState(0x71a3, 0xaf95, 0x5090, 0x10, 0xd039, 0x5e0e, 0x0, 0x1);
        gbc.writeMem(0x71a3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xaf95);
        EXPECT(gbc.pc(), 0x71a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02AD
        gbc.setState(0x1fc0, 0xa2ad, 0xa3c0, 0x850a, 0x222c, 0xb1bc, 0x0, 0x0);
        gbc.writeMem(0x1fc0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa2ad);
        EXPECT(gbc.pc(), 0x1fc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02AE
        gbc.setState(0x7f02, 0xc659, 0xdc60, 0x61e6, 0x19e2, 0x6249, 0x0, 0x0);
        gbc.writeMem(0x7f02, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc659);
        EXPECT(gbc.pc(), 0x7f04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02AF
        gbc.setState(0x35a4, 0x4400, 0xde50, 0xb1ec, 0x24b2, 0x61f, 0x0, 0x0);
        gbc.writeMem(0x35a4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4400);
        EXPECT(gbc.pc(), 0x35a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02B0
        gbc.setState(0x1614, 0x792d, 0xed0, 0x18e2, 0xc3d9, 0x4c33, 0x0, 0x1);
        gbc.writeMem(0x1614, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x792d);
        EXPECT(gbc.pc(), 0x1616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02B1
        gbc.setState(0xb911, 0x6712, 0xa210, 0xde33, 0xf055, 0xba0d, 0x0, 0x0);
        gbc.writeMem(0xb911, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6712);
        EXPECT(gbc.pc(), 0xb913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb911), 0xcb);
        EXPECT(gbc.readMem(0xb912), 0x5f);
        // CB 5F 02B2
        gbc.setState(0xb6b4, 0x5c4, 0x9490, 0x8d3b, 0x2b08, 0xf30a, 0x0, 0x1);
        gbc.writeMem(0xb6b4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5c4);
        EXPECT(gbc.pc(), 0xb6b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6b4), 0xcb);
        EXPECT(gbc.readMem(0xb6b5), 0x5f);
        // CB 5F 02B3
        gbc.setState(0xcc27, 0xdf12, 0x74b0, 0xf615, 0x1424, 0x4a94, 0x0, 0x0);
        gbc.writeMem(0xcc27, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xdf12);
        EXPECT(gbc.pc(), 0xcc29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc27), 0xcb);
        EXPECT(gbc.readMem(0xcc28), 0x5f);
        // CB 5F 02B4
        gbc.setState(0xdb57, 0x8076, 0xc6f0, 0xd65a, 0x2709, 0x248, 0x1, 0x0);
        gbc.writeMem(0xdb57, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8076);
        EXPECT(gbc.pc(), 0xdb59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb57), 0xcb);
        EXPECT(gbc.readMem(0xdb58), 0x5f);
        // CB 5F 02B5
        gbc.setState(0x1647, 0xcc09, 0x5b30, 0xe6b9, 0x4fb5, 0x4993, 0x0, 0x1);
        gbc.writeMem(0x1647, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xcc09);
        EXPECT(gbc.pc(), 0x1649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02B6
        gbc.setState(0x806d, 0x63c4, 0xfcb0, 0xea98, 0x5b64, 0x79ed, 0x0, 0x1);
        gbc.writeMem(0x806d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x63c4);
        EXPECT(gbc.pc(), 0x806f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x806d), 0xcb);
        EXPECT(gbc.readMem(0x806e), 0x5f);
        // CB 5F 02B7
        gbc.setState(0x1eef, 0xaecd, 0x6780, 0x94e3, 0x55b4, 0x2abf, 0x0, 0x0);
        gbc.writeMem(0x1eef, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xaecd);
        EXPECT(gbc.pc(), 0x1ef1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02B8
        gbc.setState(0x9a3e, 0xeb3a, 0xf440, 0xc0ea, 0xd747, 0x7f53, 0x1, 0x0);
        gbc.writeMem(0x9a3e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xeb3a);
        EXPECT(gbc.pc(), 0x9a40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a3e), 0xcb);
        EXPECT(gbc.readMem(0x9a3f), 0x5f);
        // CB 5F 02B9
        gbc.setState(0xad20, 0xa0ac, 0x7390, 0xaa5b, 0x899, 0x2488, 0x0, 0x1);
        gbc.writeMem(0xad20, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa0ac);
        EXPECT(gbc.pc(), 0xad22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad20), 0xcb);
        EXPECT(gbc.readMem(0xad21), 0x5f);
        // CB 5F 02BA
        gbc.setState(0xd722, 0xc75, 0x1c70, 0x72fd, 0x1b1, 0x75b3, 0x0, 0x1);
        gbc.writeMem(0xd722, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc75);
        EXPECT(gbc.pc(), 0xd724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd722), 0xcb);
        EXPECT(gbc.readMem(0xd723), 0x5f);
        // CB 5F 02BB
        gbc.setState(0xd90a, 0x7d71, 0x1b40, 0xa620, 0x2534, 0x953, 0x1, 0x1);
        gbc.writeMem(0xd90a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7d71);
        EXPECT(gbc.pc(), 0xd90c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd90a), 0xcb);
        EXPECT(gbc.readMem(0xd90b), 0x5f);
        // CB 5F 02BC
        gbc.setState(0x76c6, 0x1f7, 0x50, 0xf656, 0x9c5b, 0xe43c, 0x0, 0x0);
        gbc.writeMem(0x76c6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1f7);
        EXPECT(gbc.pc(), 0x76c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02BD
        gbc.setState(0x75a2, 0xca4b, 0xe950, 0x97a8, 0xd35d, 0xf969, 0x1, 0x1);
        gbc.writeMem(0x75a2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xca4b);
        EXPECT(gbc.pc(), 0x75a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02BE
        gbc.setState(0x362f, 0x2c89, 0xb490, 0x58c9, 0x6a5e, 0xc146, 0x0, 0x1);
        gbc.writeMem(0x362f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2c89);
        EXPECT(gbc.pc(), 0x3631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02BF
        gbc.setState(0x26cc, 0xf527, 0xf2d0, 0xd9f8, 0xef5c, 0xe2d6, 0x1, 0x0);
        gbc.writeMem(0x26cc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf527);
        EXPECT(gbc.pc(), 0x26ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02C0
        gbc.setState(0xe4a1, 0x878e, 0x5090, 0x241d, 0x86c2, 0xa737, 0x0, 0x1);
        gbc.writeMem(0xe4a1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x878e);
        EXPECT(gbc.pc(), 0xe4a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a1), 0xcb);
        EXPECT(gbc.readMem(0xe4a2), 0x5f);
        // CB 5F 02C1
        gbc.setState(0xe10b, 0xce91, 0x9300, 0xd62a, 0x4a85, 0xd857, 0x1, 0x1);
        gbc.writeMem(0xe10b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xce91);
        EXPECT(gbc.pc(), 0xe10d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe10b), 0xcb);
        EXPECT(gbc.readMem(0xe10c), 0x5f);
        // CB 5F 02C2
        gbc.setState(0x69c3, 0xcfea, 0x7f80, 0x90de, 0xbb9c, 0x9b90, 0x0, 0x1);
        gbc.writeMem(0x69c3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcfea);
        EXPECT(gbc.pc(), 0x69c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02C3
        gbc.setState(0x66ae, 0xe5ff, 0x3830, 0xcbbc, 0x6f36, 0x3623, 0x0, 0x0);
        gbc.writeMem(0x66ae, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe5ff);
        EXPECT(gbc.pc(), 0x66b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02C4
        gbc.setState(0xe6be, 0x94eb, 0x5b90, 0x2df3, 0x6632, 0xe7c7, 0x1, 0x0);
        gbc.writeMem(0xe6be, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x94eb);
        EXPECT(gbc.pc(), 0xe6c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6be), 0xcb);
        EXPECT(gbc.readMem(0xe6bf), 0x5f);
        // CB 5F 02C5
        gbc.setState(0xa27c, 0x8f7, 0x6110, 0xe1b2, 0x8077, 0x62b7, 0x1, 0x1);
        gbc.writeMem(0xa27c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8f7);
        EXPECT(gbc.pc(), 0xa27e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa27c), 0xcb);
        EXPECT(gbc.readMem(0xa27d), 0x5f);
        // CB 5F 02C7
        gbc.setState(0x455e, 0x68e3, 0xd180, 0xc844, 0xcd15, 0xc1d1, 0x0, 0x1);
        gbc.writeMem(0x455e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x68e3);
        EXPECT(gbc.pc(), 0x4560);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02C8
        gbc.setState(0x22d4, 0x715d, 0x35f0, 0x8bc3, 0xd4ce, 0x9d0b, 0x1, 0x0);
        gbc.writeMem(0x22d4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x715d);
        EXPECT(gbc.pc(), 0x22d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02C9
        gbc.setState(0x9a85, 0xfbb6, 0xa110, 0x99f7, 0x9549, 0x7425, 0x1, 0x0);
        gbc.writeMem(0x9a85, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfbb6);
        EXPECT(gbc.pc(), 0x9a87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a85), 0xcb);
        EXPECT(gbc.readMem(0x9a86), 0x5f);
        // CB 5F 02CA
        gbc.setState(0xa277, 0x9f00, 0x23b0, 0x1295, 0xf032, 0x5e7c, 0x1, 0x1);
        gbc.writeMem(0xa277, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9f00);
        EXPECT(gbc.pc(), 0xa279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa277), 0xcb);
        EXPECT(gbc.readMem(0xa278), 0x5f);
        // CB 5F 02CB
        gbc.setState(0xc708, 0x2383, 0x6cd0, 0x879, 0x3f59, 0x97d7, 0x0, 0x0);
        gbc.writeMem(0xc708, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2383);
        EXPECT(gbc.pc(), 0xc70a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc708), 0xcb);
        EXPECT(gbc.readMem(0xc709), 0x5f);
        // CB 5F 02CC
        gbc.setState(0x91df, 0x4d64, 0xac90, 0xcd96, 0x2a8d, 0x974f, 0x1, 0x1);
        gbc.writeMem(0x91df, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4d64);
        EXPECT(gbc.pc(), 0x91e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91df), 0xcb);
        EXPECT(gbc.readMem(0x91e0), 0x5f);
        // CB 5F 02CE
        gbc.setState(0x245c, 0x49a1, 0xf8f0, 0x40a0, 0xa137, 0x597f, 0x1, 0x1);
        gbc.writeMem(0x245c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x49a1);
        EXPECT(gbc.pc(), 0x245e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02CF
        gbc.setState(0x3448, 0x524c, 0x220, 0xe34b, 0x35ad, 0xe402, 0x1, 0x0);
        gbc.writeMem(0x3448, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x524c);
        EXPECT(gbc.pc(), 0x344a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02D1
        gbc.setState(0xaac1, 0xd722, 0x4040, 0xf447, 0xbb8, 0xdb95, 0x1, 0x0);
        gbc.writeMem(0xaac1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd722);
        EXPECT(gbc.pc(), 0xaac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac1), 0xcb);
        EXPECT(gbc.readMem(0xaac2), 0x5f);
        // CB 5F 02D2
        gbc.setState(0xe2a0, 0x14db, 0xa570, 0x50e2, 0xd6ba, 0xeeba, 0x1, 0x1);
        gbc.writeMem(0xe2a0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x14db);
        EXPECT(gbc.pc(), 0xe2a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2a0), 0xcb);
        EXPECT(gbc.readMem(0xe2a1), 0x5f);
        // CB 5F 02D5
        gbc.setState(0xc698, 0xb7d3, 0xe7f0, 0x5c3c, 0xd61a, 0xcc0e, 0x0, 0x0);
        gbc.writeMem(0xc698, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb7d3);
        EXPECT(gbc.pc(), 0xc69a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc698), 0xcb);
        EXPECT(gbc.readMem(0xc699), 0x5f);
        // CB 5F 02D6
        gbc.setState(0x4580, 0xe0e8, 0x4f70, 0x56c, 0xb9f7, 0x3be0, 0x0, 0x1);
        gbc.writeMem(0x4580, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe0e8);
        EXPECT(gbc.pc(), 0x4582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02D7
        gbc.setState(0x3f5b, 0x34e2, 0x68f0, 0x7633, 0x2474, 0x6894, 0x1, 0x0);
        gbc.writeMem(0x3f5b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x34e2);
        EXPECT(gbc.pc(), 0x3f5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02D8
        gbc.setState(0x1c29, 0x533c, 0x8460, 0xafbf, 0xcae7, 0x615e, 0x0, 0x1);
        gbc.writeMem(0x1c29, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x533c);
        EXPECT(gbc.pc(), 0x1c2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02D9
        gbc.setState(0xa2c5, 0x9099, 0x2550, 0xb520, 0xecba, 0x4aa1, 0x1, 0x0);
        gbc.writeMem(0xa2c5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9099);
        EXPECT(gbc.pc(), 0xa2c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c5), 0xcb);
        EXPECT(gbc.readMem(0xa2c6), 0x5f);
        // CB 5F 02DA
        gbc.setState(0xcb42, 0xda8e, 0x1a30, 0x5676, 0xf42c, 0xe9b, 0x0, 0x0);
        gbc.writeMem(0xcb42, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xda8e);
        EXPECT(gbc.pc(), 0xcb44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb42), 0xcb);
        EXPECT(gbc.readMem(0xcb43), 0x5f);
        // CB 5F 02DB
        gbc.setState(0x88c5, 0x67f2, 0x9c30, 0x251d, 0x4ed, 0x95d0, 0x0, 0x1);
        gbc.writeMem(0x88c5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x67f2);
        EXPECT(gbc.pc(), 0x88c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88c5), 0xcb);
        EXPECT(gbc.readMem(0x88c6), 0x5f);
        // CB 5F 02DC
        gbc.setState(0x8836, 0x864e, 0x49c0, 0x2436, 0x253d, 0x3d46, 0x0, 0x1);
        gbc.writeMem(0x8836, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x864e);
        EXPECT(gbc.pc(), 0x8838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8836), 0xcb);
        EXPECT(gbc.readMem(0x8837), 0x5f);
        // CB 5F 02DD
        gbc.setState(0xa234, 0x613c, 0x28c0, 0xbcd, 0x7d39, 0xeb5b, 0x0, 0x1);
        gbc.writeMem(0xa234, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x613c);
        EXPECT(gbc.pc(), 0xa236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa234), 0xcb);
        EXPECT(gbc.readMem(0xa235), 0x5f);
        // CB 5F 02DE
        gbc.setState(0xd917, 0x8c5f, 0x4b80, 0x661, 0xa290, 0xdb9d, 0x0, 0x0);
        gbc.writeMem(0xd917, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8c5f);
        EXPECT(gbc.pc(), 0xd919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd917), 0xcb);
        EXPECT(gbc.readMem(0xd918), 0x5f);
        // CB 5F 02DF
        gbc.setState(0xa824, 0xc7f3, 0xa660, 0x7be8, 0x203e, 0xb41c, 0x0, 0x0);
        gbc.writeMem(0xa824, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc7f3);
        EXPECT(gbc.pc(), 0xa826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa824), 0xcb);
        EXPECT(gbc.readMem(0xa825), 0x5f);
        // CB 5F 02E0
        gbc.setState(0xc82b, 0x56e7, 0x6740, 0x5e03, 0xcd5b, 0x492f, 0x1, 0x1);
        gbc.writeMem(0xc82b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x56e7);
        EXPECT(gbc.pc(), 0xc82d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc82b), 0xcb);
        EXPECT(gbc.readMem(0xc82c), 0x5f);
        // CB 5F 02E2
        gbc.setState(0xab83, 0xe801, 0x1090, 0x8a7b, 0x4d93, 0x51c8, 0x1, 0x0);
        gbc.writeMem(0xab83, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe801);
        EXPECT(gbc.pc(), 0xab85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab83), 0xcb);
        EXPECT(gbc.readMem(0xab84), 0x5f);
        // CB 5F 02E3
        gbc.setState(0xa6d0, 0x48dc, 0xb370, 0x116a, 0x5610, 0xd431, 0x0, 0x1);
        gbc.writeMem(0xa6d0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x48dc);
        EXPECT(gbc.pc(), 0xa6d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6d0), 0xcb);
        EXPECT(gbc.readMem(0xa6d1), 0x5f);
        // CB 5F 02E4
        gbc.setState(0x4628, 0x1788, 0xece0, 0xf797, 0x3325, 0x7bee, 0x0, 0x1);
        gbc.writeMem(0x4628, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1788);
        EXPECT(gbc.pc(), 0x462a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02E6
        gbc.setState(0x2d26, 0x1cbd, 0x8410, 0x602f, 0x8b6b, 0xede3, 0x0, 0x1);
        gbc.writeMem(0x2d26, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1cbd);
        EXPECT(gbc.pc(), 0x2d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02E7
        gbc.setState(0xd8be, 0x1d53, 0x9b10, 0x2d25, 0xbbc1, 0x894c, 0x1, 0x0);
        gbc.writeMem(0xd8be, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1d53);
        EXPECT(gbc.pc(), 0xd8c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8be), 0xcb);
        EXPECT(gbc.readMem(0xd8bf), 0x5f);
        // CB 5F 02E8
        gbc.setState(0x958b, 0x9c16, 0x97d0, 0xa211, 0xe325, 0x326c, 0x1, 0x1);
        gbc.writeMem(0x958b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9c16);
        EXPECT(gbc.pc(), 0x958d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x958b), 0xcb);
        EXPECT(gbc.readMem(0x958c), 0x5f);
        // CB 5F 02E9
        gbc.setState(0x92d1, 0x9f75, 0x6e0, 0x4da1, 0xf147, 0x6e95, 0x0, 0x0);
        gbc.writeMem(0x92d1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9f75);
        EXPECT(gbc.pc(), 0x92d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92d1), 0xcb);
        EXPECT(gbc.readMem(0x92d2), 0x5f);
        // CB 5F 02EB
        gbc.setState(0x6fa4, 0xb6d7, 0xf070, 0x1e2b, 0x4996, 0x373d, 0x0, 0x0);
        gbc.writeMem(0x6fa4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb6d7);
        EXPECT(gbc.pc(), 0x6fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02EC
        gbc.setState(0x390a, 0x8b63, 0x3190, 0xae89, 0x9721, 0xb20a, 0x0, 0x0);
        gbc.writeMem(0x390a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8b63);
        EXPECT(gbc.pc(), 0x390c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02ED
        gbc.setState(0x789f, 0xadba, 0x75b0, 0x3dfd, 0x33d8, 0x18f8, 0x0, 0x0);
        gbc.writeMem(0x789f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xadba);
        EXPECT(gbc.pc(), 0x78a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02EE
        gbc.setState(0x59a7, 0xe3ad, 0xfa40, 0xe17a, 0xd00e, 0x2885, 0x0, 0x0);
        gbc.writeMem(0x59a7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe3ad);
        EXPECT(gbc.pc(), 0x59a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02EF
        gbc.setState(0x5c60, 0xbf3a, 0xcf00, 0xb6cf, 0xbef0, 0xd3ce, 0x0, 0x0);
        gbc.writeMem(0x5c60, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbf3a);
        EXPECT(gbc.pc(), 0x5c62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02F0
        gbc.setState(0xb750, 0x620f, 0x8400, 0xfbc7, 0x3619, 0xee13, 0x1, 0x0);
        gbc.writeMem(0xb750, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x620f);
        EXPECT(gbc.pc(), 0xb752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb750), 0xcb);
        EXPECT(gbc.readMem(0xb751), 0x5f);
        // CB 5F 02F1
        gbc.setState(0xad5a, 0x7a1e, 0xb6b0, 0x6f78, 0x561e, 0xf886, 0x1, 0x0);
        gbc.writeMem(0xad5a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7a1e);
        EXPECT(gbc.pc(), 0xad5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad5a), 0xcb);
        EXPECT(gbc.readMem(0xad5b), 0x5f);
        // CB 5F 02F2
        gbc.setState(0x3ac, 0xd358, 0xa3e0, 0xbdee, 0x9621, 0x801, 0x0, 0x0);
        gbc.writeMem(0x3ac, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd358);
        EXPECT(gbc.pc(), 0x3ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02F3
        gbc.setState(0x42e5, 0x50e9, 0xd730, 0xb11d, 0xc3d0, 0x1853, 0x1, 0x0);
        gbc.writeMem(0x42e5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x50e9);
        EXPECT(gbc.pc(), 0x42e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02F4
        gbc.setState(0xf75, 0x7447, 0xc020, 0x905c, 0xed9d, 0xd824, 0x0, 0x0);
        gbc.writeMem(0xf75, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7447);
        EXPECT(gbc.pc(), 0xf77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02F5
        gbc.setState(0x3eef, 0x84de, 0x5640, 0x29ab, 0xb250, 0x992b, 0x1, 0x1);
        gbc.writeMem(0x3eef, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x84de);
        EXPECT(gbc.pc(), 0x3ef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02F6
        gbc.setState(0xb1a, 0x9e48, 0x7b30, 0x3617, 0x8d8d, 0xf151, 0x1, 0x1);
        gbc.writeMem(0xb1a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9e48);
        EXPECT(gbc.pc(), 0xb1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02F7
        gbc.setState(0x482a, 0x4247, 0x23b0, 0x9e01, 0x107f, 0xbdfc, 0x1, 0x0);
        gbc.writeMem(0x482a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4247);
        EXPECT(gbc.pc(), 0x482c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02F8
        gbc.setState(0xc96c, 0xac53, 0xc310, 0xf3c1, 0x83c5, 0xff7a, 0x0, 0x0);
        gbc.writeMem(0xc96c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xac53);
        EXPECT(gbc.pc(), 0xc96e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc96c), 0xcb);
        EXPECT(gbc.readMem(0xc96d), 0x5f);
        // CB 5F 02F9
        gbc.setState(0x595b, 0x2bcd, 0xfaa0, 0x4044, 0xb046, 0x745d, 0x0, 0x0);
        gbc.writeMem(0x595b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2bcd);
        EXPECT(gbc.pc(), 0x595d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 02FA
        gbc.setState(0xcb50, 0xd8e5, 0xd2d0, 0x1754, 0x1845, 0xded, 0x0, 0x0);
        gbc.writeMem(0xcb50, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd8e5);
        EXPECT(gbc.pc(), 0xcb52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb50), 0xcb);
        EXPECT(gbc.readMem(0xcb51), 0x5f);
        // CB 5F 02FB
        gbc.setState(0xdbf2, 0xc55f, 0x9240, 0x7129, 0x5ddb, 0xeee1, 0x1, 0x1);
        gbc.writeMem(0xdbf2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc55f);
        EXPECT(gbc.pc(), 0xdbf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf2), 0xcb);
        EXPECT(gbc.readMem(0xdbf3), 0x5f);
        // CB 5F 02FC
        gbc.setState(0x1cda, 0x6b40, 0x7bd0, 0x2a26, 0x73b6, 0x10a6, 0x0, 0x0);
        gbc.writeMem(0x1cda, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6b40);
        EXPECT(gbc.pc(), 0x1cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 02FD
        gbc.setState(0x2495, 0xb25a, 0x1ee0, 0x12, 0xcf17, 0x6130, 0x1, 0x0);
        gbc.writeMem(0x2495, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb25a);
        EXPECT(gbc.pc(), 0x2497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0300
        gbc.setState(0x728e, 0x2153, 0xbcb0, 0x38a4, 0x6310, 0xccb5, 0x0, 0x1);
        gbc.writeMem(0x728e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2153);
        EXPECT(gbc.pc(), 0x7290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0301
        gbc.setState(0x4de2, 0x3fb8, 0x4000, 0xfc0b, 0x823b, 0x711c, 0x1, 0x1);
        gbc.writeMem(0x4de2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3fb8);
        EXPECT(gbc.pc(), 0x4de4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0302
        gbc.setState(0x9cf4, 0x1deb, 0x4270, 0xd372, 0xa4a6, 0x6572, 0x1, 0x1);
        gbc.writeMem(0x9cf4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1deb);
        EXPECT(gbc.pc(), 0x9cf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cf4), 0xcb);
        EXPECT(gbc.readMem(0x9cf5), 0x5f);
        // CB 5F 0303
        gbc.setState(0x9a1e, 0x1651, 0x7ff0, 0xb9bc, 0x508a, 0x1d78, 0x0, 0x1);
        gbc.writeMem(0x9a1e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1651);
        EXPECT(gbc.pc(), 0x9a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a1e), 0xcb);
        EXPECT(gbc.readMem(0x9a1f), 0x5f);
        // CB 5F 0305
        gbc.setState(0x9f9e, 0x39a2, 0x5880, 0x94d8, 0x550a, 0x9122, 0x1, 0x0);
        gbc.writeMem(0x9f9e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x39a2);
        EXPECT(gbc.pc(), 0x9fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f9e), 0xcb);
        EXPECT(gbc.readMem(0x9f9f), 0x5f);
        // CB 5F 0306
        gbc.setState(0xd41b, 0x2746, 0xcde0, 0x51a3, 0xb848, 0x16c9, 0x1, 0x1);
        gbc.writeMem(0xd41b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2746);
        EXPECT(gbc.pc(), 0xd41d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41b), 0xcb);
        EXPECT(gbc.readMem(0xd41c), 0x5f);
        // CB 5F 0307
        gbc.setState(0x277, 0x863f, 0x530, 0x72b7, 0xbe00, 0x2e1f, 0x0, 0x0);
        gbc.writeMem(0x277, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x863f);
        EXPECT(gbc.pc(), 0x279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0308
        gbc.setState(0xe2fd, 0x5f14, 0x3720, 0xa3c8, 0xd05c, 0xb464, 0x1, 0x0);
        gbc.writeMem(0xe2fd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5f14);
        EXPECT(gbc.pc(), 0xe2ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2fd), 0xcb);
        EXPECT(gbc.readMem(0xe2fe), 0x5f);
        // CB 5F 0309
        gbc.setState(0xc1b6, 0x82a0, 0x6560, 0x6940, 0x6102, 0x35c5, 0x1, 0x1);
        gbc.writeMem(0xc1b6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x82a0);
        EXPECT(gbc.pc(), 0xc1b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b6), 0xcb);
        EXPECT(gbc.readMem(0xc1b7), 0x5f);
        // CB 5F 030A
        gbc.setState(0xb1c4, 0xe8cb, 0x44c0, 0x6971, 0xa2d3, 0xeb12, 0x0, 0x1);
        gbc.writeMem(0xb1c4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe8cb);
        EXPECT(gbc.pc(), 0xb1c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c4), 0xcb);
        EXPECT(gbc.readMem(0xb1c5), 0x5f);
        // CB 5F 030B
        gbc.setState(0xae8a, 0x9aeb, 0x3880, 0xbcb0, 0x8744, 0x5f7e, 0x1, 0x1);
        gbc.writeMem(0xae8a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9aeb);
        EXPECT(gbc.pc(), 0xae8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae8a), 0xcb);
        EXPECT(gbc.readMem(0xae8b), 0x5f);
        // CB 5F 030C
        gbc.setState(0xe7c0, 0x8fde, 0x2040, 0x32c0, 0x2874, 0x72d, 0x0, 0x0);
        gbc.writeMem(0xe7c0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8fde);
        EXPECT(gbc.pc(), 0xe7c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c0), 0xcb);
        EXPECT(gbc.readMem(0xe7c1), 0x5f);
        // CB 5F 030E
        gbc.setState(0xd4d7, 0x7fae, 0x4bf0, 0x4c0, 0x6444, 0xef31, 0x1, 0x1);
        gbc.writeMem(0xd4d7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7fae);
        EXPECT(gbc.pc(), 0xd4d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4d7), 0xcb);
        EXPECT(gbc.readMem(0xd4d8), 0x5f);
        // CB 5F 030F
        gbc.setState(0x37c, 0x64b4, 0xab70, 0x9e84, 0xceac, 0xaa1a, 0x1, 0x1);
        gbc.writeMem(0x37c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x64b4);
        EXPECT(gbc.pc(), 0x37e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0310
        gbc.setState(0x50c7, 0xbcaa, 0x9970, 0x3f9, 0x796, 0xef0, 0x0, 0x0);
        gbc.writeMem(0x50c7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xbcaa);
        EXPECT(gbc.pc(), 0x50c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0311
        gbc.setState(0x2d0f, 0x3ba, 0xb270, 0x1178, 0x4ef3, 0xce7f, 0x0, 0x0);
        gbc.writeMem(0x2d0f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3ba);
        EXPECT(gbc.pc(), 0x2d11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0312
        gbc.setState(0x907, 0xcdb8, 0x17d0, 0x6476, 0x8f03, 0x32b0, 0x1, 0x1);
        gbc.writeMem(0x907, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xcdb8);
        EXPECT(gbc.pc(), 0x909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0313
        gbc.setState(0x801d, 0xc32b, 0x5df0, 0xd6d, 0x708d, 0x2d4c, 0x0, 0x0);
        gbc.writeMem(0x801d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xc32b);
        EXPECT(gbc.pc(), 0x801f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x801d), 0xcb);
        EXPECT(gbc.readMem(0x801e), 0x5f);
        // CB 5F 0314
        gbc.setState(0xa2ba, 0x5756, 0xc630, 0x2a5f, 0x5158, 0x1b28, 0x0, 0x1);
        gbc.writeMem(0xa2ba, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x5756);
        EXPECT(gbc.pc(), 0xa2bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ba), 0xcb);
        EXPECT(gbc.readMem(0xa2bb), 0x5f);
        // CB 5F 0315
        gbc.setState(0x1d8, 0x539, 0xaf20, 0xcf70, 0x1d22, 0x46f3, 0x1, 0x1);
        gbc.writeMem(0x1d8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x539);
        EXPECT(gbc.pc(), 0x1da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0316
        gbc.setState(0x85f8, 0x2931, 0x3de0, 0x422f, 0x440c, 0x122e, 0x0, 0x0);
        gbc.writeMem(0x85f8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2931);
        EXPECT(gbc.pc(), 0x85fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f8), 0xcb);
        EXPECT(gbc.readMem(0x85f9), 0x5f);
        // CB 5F 0317
        gbc.setState(0x48ac, 0xd9eb, 0x26e0, 0x9062, 0x5b69, 0xf1b4, 0x1, 0x0);
        gbc.writeMem(0x48ac, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd9eb);
        EXPECT(gbc.pc(), 0x48ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0318
        gbc.setState(0x8790, 0xd31c, 0x4240, 0x68a5, 0x8f93, 0x8bf7, 0x0, 0x1);
        gbc.writeMem(0x8790, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd31c);
        EXPECT(gbc.pc(), 0x8792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8790), 0xcb);
        EXPECT(gbc.readMem(0x8791), 0x5f);
        // CB 5F 0319
        gbc.setState(0x6005, 0xd8ce, 0x95d0, 0xf7de, 0xeccc, 0x1618, 0x1, 0x1);
        gbc.writeMem(0x6005, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd8ce);
        EXPECT(gbc.pc(), 0x6007);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 031A
        gbc.setState(0x1991, 0x34d6, 0x6d40, 0xfda4, 0xfb5a, 0x3da0, 0x1, 0x1);
        gbc.writeMem(0x1991, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x34d6);
        EXPECT(gbc.pc(), 0x1993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 031B
        gbc.setState(0x1b66, 0xb89, 0x9bf0, 0xc0c6, 0x6c, 0x7adb, 0x0, 0x1);
        gbc.writeMem(0x1b66, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb89);
        EXPECT(gbc.pc(), 0x1b68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 031C
        gbc.setState(0x7b62, 0xd83c, 0x7060, 0x753f, 0xdfdb, 0x9640, 0x1, 0x0);
        gbc.writeMem(0x7b62, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd83c);
        EXPECT(gbc.pc(), 0x7b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 031D
        gbc.setState(0x1340, 0xd4ef, 0xc8e0, 0x385e, 0xb22e, 0xfe3f, 0x1, 0x0);
        gbc.writeMem(0x1340, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd4ef);
        EXPECT(gbc.pc(), 0x1342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 031E
        gbc.setState(0x9b1c, 0xa4ac, 0x5980, 0x1855, 0x2006, 0x662f, 0x1, 0x0);
        gbc.writeMem(0x9b1c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa4ac);
        EXPECT(gbc.pc(), 0x9b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1c), 0xcb);
        EXPECT(gbc.readMem(0x9b1d), 0x5f);
        // CB 5F 031F
        gbc.setState(0x2c4e, 0x5f30, 0x7540, 0x9004, 0xede2, 0xaad0, 0x0, 0x0);
        gbc.writeMem(0x2c4e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5f30);
        EXPECT(gbc.pc(), 0x2c50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0320
        gbc.setState(0x4649, 0xd2ad, 0x5500, 0xad85, 0x38bc, 0xff4b, 0x1, 0x0);
        gbc.writeMem(0x4649, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd2ad);
        EXPECT(gbc.pc(), 0x464b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0321
        gbc.setState(0xba, 0x1867, 0x8f30, 0xe1fb, 0x5875, 0xe0b4, 0x1, 0x1);
        gbc.writeMem(0xba, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1867);
        EXPECT(gbc.pc(), 0xbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0322
        gbc.setState(0x59d2, 0x161b, 0xa710, 0x9885, 0xf5f4, 0xef7d, 0x1, 0x1);
        gbc.writeMem(0x59d2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x161b);
        EXPECT(gbc.pc(), 0x59d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0323
        gbc.setState(0x3380, 0x89e6, 0x8180, 0x3658, 0x88ac, 0x981d, 0x1, 0x0);
        gbc.writeMem(0x3380, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x89e6);
        EXPECT(gbc.pc(), 0x3382);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0324
        gbc.setState(0x2956, 0x8576, 0x1730, 0xd26a, 0xce9d, 0x7285, 0x1, 0x0);
        gbc.writeMem(0x2956, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8576);
        EXPECT(gbc.pc(), 0x2958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0325
        gbc.setState(0x7ee9, 0x3ca7, 0xcb10, 0x24e6, 0x665c, 0x399d, 0x0, 0x0);
        gbc.writeMem(0x7ee9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3ca7);
        EXPECT(gbc.pc(), 0x7eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0326
        gbc.setState(0x8b8c, 0x9e41, 0x2920, 0x719c, 0x7e55, 0xd9c, 0x0, 0x1);
        gbc.writeMem(0x8b8c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9e41);
        EXPECT(gbc.pc(), 0x8b8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b8c), 0xcb);
        EXPECT(gbc.readMem(0x8b8d), 0x5f);
        // CB 5F 0327
        gbc.setState(0xb888, 0x87d8, 0x9b70, 0x4bbb, 0x105d, 0x3af5, 0x1, 0x1);
        gbc.writeMem(0xb888, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x87d8);
        EXPECT(gbc.pc(), 0xb88a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb888), 0xcb);
        EXPECT(gbc.readMem(0xb889), 0x5f);
        // CB 5F 0328
        gbc.setState(0xeee4, 0x2842, 0x3440, 0xae5a, 0x9757, 0xcf57, 0x1, 0x1);
        gbc.writeMem(0xeee4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2842);
        EXPECT(gbc.pc(), 0xeee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee4), 0xcb);
        EXPECT(gbc.readMem(0xeee5), 0x5f);
        // CB 5F 0329
        gbc.setState(0xb285, 0x6258, 0x9230, 0xf15, 0x29d0, 0xd357, 0x0, 0x1);
        gbc.writeMem(0xb285, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6258);
        EXPECT(gbc.pc(), 0xb287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb285), 0xcb);
        EXPECT(gbc.readMem(0xb286), 0x5f);
        // CB 5F 032A
        gbc.setState(0xd857, 0xf21d, 0x6f0, 0x9b73, 0xc259, 0x5612, 0x0, 0x1);
        gbc.writeMem(0xd857, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf21d);
        EXPECT(gbc.pc(), 0xd859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd857), 0xcb);
        EXPECT(gbc.readMem(0xd858), 0x5f);
        // CB 5F 032B
        gbc.setState(0x73f9, 0xf15b, 0x9cd0, 0xf0ab, 0x7f99, 0xf3bd, 0x0, 0x0);
        gbc.writeMem(0x73f9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf15b);
        EXPECT(gbc.pc(), 0x73fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 032C
        gbc.setState(0x735a, 0x80fd, 0x90a0, 0xee25, 0x9a8b, 0x1b6b, 0x0, 0x0);
        gbc.writeMem(0x735a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x80fd);
        EXPECT(gbc.pc(), 0x735c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 032D
        gbc.setState(0x5774, 0x59e, 0x4b40, 0xfe4f, 0xd04b, 0x1a77, 0x0, 0x0);
        gbc.writeMem(0x5774, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x59e);
        EXPECT(gbc.pc(), 0x5776);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 032E
        gbc.setState(0x4c88, 0xb85, 0xac50, 0x6868, 0x7447, 0x23f9, 0x0, 0x0);
        gbc.writeMem(0x4c88, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb85);
        EXPECT(gbc.pc(), 0x4c8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 032F
        gbc.setState(0xe173, 0x5b40, 0x6950, 0x47a5, 0xf52d, 0xc619, 0x1, 0x1);
        gbc.writeMem(0xe173, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5b40);
        EXPECT(gbc.pc(), 0xe175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe173), 0xcb);
        EXPECT(gbc.readMem(0xe174), 0x5f);
        // CB 5F 0330
        gbc.setState(0x1943, 0x19cf, 0x1970, 0x1779, 0xad38, 0x3e7c, 0x1, 0x0);
        gbc.writeMem(0x1943, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x19cf);
        EXPECT(gbc.pc(), 0x1945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0331
        gbc.setState(0x3afa, 0xfb19, 0x9160, 0xd654, 0xba79, 0x78e5, 0x0, 0x1);
        gbc.writeMem(0x3afa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xfb19);
        EXPECT(gbc.pc(), 0x3afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0332
        gbc.setState(0xd6b1, 0xef6c, 0x2540, 0x11a, 0x7d32, 0x9f0e, 0x1, 0x1);
        gbc.writeMem(0xd6b1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xef6c);
        EXPECT(gbc.pc(), 0xd6b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b1), 0xcb);
        EXPECT(gbc.readMem(0xd6b2), 0x5f);
        // CB 5F 0333
        gbc.setState(0xe54d, 0xb2af, 0x2040, 0x5929, 0x7843, 0x7706, 0x1, 0x0);
        gbc.writeMem(0xe54d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb2af);
        EXPECT(gbc.pc(), 0xe54f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54d), 0xcb);
        EXPECT(gbc.readMem(0xe54e), 0x5f);
        // CB 5F 0334
        gbc.setState(0xb, 0x7ab9, 0x4250, 0x1d16, 0xd54a, 0xb8da, 0x1, 0x1);
        gbc.writeMem(0xb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7ab9);
        EXPECT(gbc.pc(), 0xd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0335
        gbc.setState(0x1c3f, 0x8796, 0x7670, 0xa745, 0xcd0, 0xd726, 0x1, 0x0);
        gbc.writeMem(0x1c3f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8796);
        EXPECT(gbc.pc(), 0x1c41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0336
        gbc.setState(0x5112, 0x43eb, 0xeae0, 0x3389, 0x1858, 0xb4ad, 0x0, 0x1);
        gbc.writeMem(0x5112, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x43eb);
        EXPECT(gbc.pc(), 0x5114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0337
        gbc.setState(0x8947, 0x8c83, 0x1430, 0xd45b, 0x1d54, 0xf5b2, 0x0, 0x0);
        gbc.writeMem(0x8947, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8c83);
        EXPECT(gbc.pc(), 0x8949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8947), 0xcb);
        EXPECT(gbc.readMem(0x8948), 0x5f);
        // CB 5F 0338
        gbc.setState(0xc0ae, 0x13d2, 0x69b0, 0x73a2, 0x9e47, 0x1128, 0x1, 0x0);
        gbc.writeMem(0xc0ae, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x13d2);
        EXPECT(gbc.pc(), 0xc0b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ae), 0xcb);
        EXPECT(gbc.readMem(0xc0af), 0x5f);
        // CB 5F 0339
        gbc.setState(0xc973, 0x47f5, 0xf820, 0xb4d0, 0xdf40, 0x20c, 0x1, 0x1);
        gbc.writeMem(0xc973, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x47f5);
        EXPECT(gbc.pc(), 0xc975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc973), 0xcb);
        EXPECT(gbc.readMem(0xc974), 0x5f);
        // CB 5F 033A
        gbc.setState(0xc89a, 0x237e, 0xcea0, 0x8254, 0xebb6, 0x71f, 0x1, 0x1);
        gbc.writeMem(0xc89a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x237e);
        EXPECT(gbc.pc(), 0xc89c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc89a), 0xcb);
        EXPECT(gbc.readMem(0xc89b), 0x5f);
        // CB 5F 033B
        gbc.setState(0xcce4, 0xac43, 0x4540, 0x504a, 0xac35, 0xbd7c, 0x1, 0x0);
        gbc.writeMem(0xcce4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xac43);
        EXPECT(gbc.pc(), 0xcce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce4), 0xcb);
        EXPECT(gbc.readMem(0xcce5), 0x5f);
        // CB 5F 033C
        gbc.setState(0x797d, 0x8e1a, 0x9b00, 0x6d91, 0xaf11, 0xea7f, 0x0, 0x1);
        gbc.writeMem(0x797d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8e1a);
        EXPECT(gbc.pc(), 0x797f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 033D
        gbc.setState(0xc00f, 0xaa1d, 0x2fa0, 0xc2ee, 0xa499, 0x9846, 0x1, 0x0);
        gbc.writeMem(0xc00f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xaa1d);
        EXPECT(gbc.pc(), 0xc011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc00f), 0xcb);
        EXPECT(gbc.readMem(0xc010), 0x5f);
        // CB 5F 033E
        gbc.setState(0xa3e8, 0xd155, 0x4b80, 0xb46d, 0x8a76, 0x5d2f, 0x1, 0x1);
        gbc.writeMem(0xa3e8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd155);
        EXPECT(gbc.pc(), 0xa3ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e8), 0xcb);
        EXPECT(gbc.readMem(0xa3e9), 0x5f);
        // CB 5F 033F
        gbc.setState(0x57bb, 0x32fe, 0x8f30, 0x5c87, 0x986c, 0x6c8a, 0x1, 0x0);
        gbc.writeMem(0x57bb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x32fe);
        EXPECT(gbc.pc(), 0x57bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0340
        gbc.setState(0xdcdb, 0x783d, 0x2b00, 0x6979, 0xd6df, 0xb766, 0x0, 0x0);
        gbc.writeMem(0xdcdb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x783d);
        EXPECT(gbc.pc(), 0xdcdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcdb), 0xcb);
        EXPECT(gbc.readMem(0xdcdc), 0x5f);
        // CB 5F 0341
        gbc.setState(0x7a4e, 0xab01, 0xc7c0, 0x18f6, 0x77e, 0x5a31, 0x1, 0x1);
        gbc.writeMem(0x7a4e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xab01);
        EXPECT(gbc.pc(), 0x7a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0342
        gbc.setState(0xded2, 0xf1ab, 0x5270, 0xeaf2, 0x16f8, 0xd6bb, 0x1, 0x0);
        gbc.writeMem(0xded2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf1ab);
        EXPECT(gbc.pc(), 0xded4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xded2), 0xcb);
        EXPECT(gbc.readMem(0xded3), 0x5f);
        // CB 5F 0344
        gbc.setState(0xa45b, 0xda3c, 0xa400, 0x5c8, 0xe3a0, 0x3e98, 0x0, 0x1);
        gbc.writeMem(0xa45b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xda3c);
        EXPECT(gbc.pc(), 0xa45d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45b), 0xcb);
        EXPECT(gbc.readMem(0xa45c), 0x5f);
        // CB 5F 0345
        gbc.setState(0xb89b, 0x80d8, 0x4d90, 0xc39c, 0x589e, 0x5c1e, 0x1, 0x0);
        gbc.writeMem(0xb89b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x80d8);
        EXPECT(gbc.pc(), 0xb89d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb89b), 0xcb);
        EXPECT(gbc.readMem(0xb89c), 0x5f);
        // CB 5F 0346
        gbc.setState(0xe08d, 0xd5d9, 0x2390, 0x3a24, 0xaf8f, 0x1534, 0x0, 0x0);
        gbc.writeMem(0xe08d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd5d9);
        EXPECT(gbc.pc(), 0xe08f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe08d), 0xcb);
        EXPECT(gbc.readMem(0xe08e), 0x5f);
        // CB 5F 0347
        gbc.setState(0x8103, 0xb68a, 0x1040, 0x8159, 0x791a, 0x2ca4, 0x0, 0x1);
        gbc.writeMem(0x8103, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb68a);
        EXPECT(gbc.pc(), 0x8105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8103), 0xcb);
        EXPECT(gbc.readMem(0x8104), 0x5f);
        // CB 5F 0348
        gbc.setState(0x80b, 0xc13, 0x7c80, 0xcb20, 0x382b, 0xa1be, 0x0, 0x0);
        gbc.writeMem(0x80b, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc13);
        EXPECT(gbc.pc(), 0x80d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0349
        gbc.setState(0xb8b8, 0xd317, 0x4800, 0x5032, 0x242a, 0x89ed, 0x1, 0x0);
        gbc.writeMem(0xb8b8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd317);
        EXPECT(gbc.pc(), 0xb8ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8b8), 0xcb);
        EXPECT(gbc.readMem(0xb8b9), 0x5f);
        // CB 5F 034A
        gbc.setState(0x91a2, 0xe3a7, 0xc410, 0xf95b, 0x6527, 0x11dc, 0x0, 0x1);
        gbc.writeMem(0x91a2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe3a7);
        EXPECT(gbc.pc(), 0x91a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a2), 0xcb);
        EXPECT(gbc.readMem(0x91a3), 0x5f);
        // CB 5F 034B
        gbc.setState(0x3df8, 0xd725, 0x240, 0xbf64, 0x284d, 0x70bf, 0x1, 0x0);
        gbc.writeMem(0x3df8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd725);
        EXPECT(gbc.pc(), 0x3dfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 034C
        gbc.setState(0x48dd, 0xc0ae, 0xeef0, 0x8a67, 0x1bc9, 0x602a, 0x1, 0x1);
        gbc.writeMem(0x48dd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc0ae);
        EXPECT(gbc.pc(), 0x48df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 034D
        gbc.setState(0x5409, 0x82d1, 0x24e0, 0x8291, 0x2fa7, 0xfeef, 0x1, 0x1);
        gbc.writeMem(0x5409, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x82d1);
        EXPECT(gbc.pc(), 0x540b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 034E
        gbc.setState(0x7ea1, 0xe41, 0x1d00, 0xa30, 0x44f2, 0x1f62, 0x0, 0x0);
        gbc.writeMem(0x7ea1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe41);
        EXPECT(gbc.pc(), 0x7ea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0350
        gbc.setState(0x5781, 0x9bd6, 0xd4b0, 0x8f1d, 0xee50, 0x248b, 0x0, 0x1);
        gbc.writeMem(0x5781, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9bd6);
        EXPECT(gbc.pc(), 0x5783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0351
        gbc.setState(0xd93c, 0xc0b1, 0x3e30, 0x3042, 0x57a5, 0x5ad4, 0x1, 0x1);
        gbc.writeMem(0xd93c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc0b1);
        EXPECT(gbc.pc(), 0xd93e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd93c), 0xcb);
        EXPECT(gbc.readMem(0xd93d), 0x5f);
        // CB 5F 0352
        gbc.setState(0xda12, 0xcebe, 0x49e0, 0x70cd, 0xf90b, 0x7357, 0x0, 0x1);
        gbc.writeMem(0xda12, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xcebe);
        EXPECT(gbc.pc(), 0xda14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda12), 0xcb);
        EXPECT(gbc.readMem(0xda13), 0x5f);
        // CB 5F 0353
        gbc.setState(0xa58, 0xe6f0, 0x99c0, 0x3ef2, 0xf498, 0x9ac6, 0x1, 0x1);
        gbc.writeMem(0xa58, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe6f0);
        EXPECT(gbc.pc(), 0xa5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0354
        gbc.setState(0x7fda, 0x3a30, 0x270, 0xd13e, 0x44d7, 0x70fb, 0x0, 0x1);
        gbc.writeMem(0x7fda, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3a30);
        EXPECT(gbc.pc(), 0x7fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0355
        gbc.setState(0xd939, 0xfee9, 0xde00, 0x760, 0xbf65, 0x69c6, 0x1, 0x1);
        gbc.writeMem(0xd939, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfee9);
        EXPECT(gbc.pc(), 0xd93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd939), 0xcb);
        EXPECT(gbc.readMem(0xd93a), 0x5f);
        // CB 5F 0356
        gbc.setState(0xbfe6, 0x7ea5, 0x48a0, 0x1e44, 0x9d8e, 0xc0b9, 0x0, 0x1);
        gbc.writeMem(0xbfe6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7ea5);
        EXPECT(gbc.pc(), 0xbfe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe6), 0xcb);
        EXPECT(gbc.readMem(0xbfe7), 0x5f);
        // CB 5F 0357
        gbc.setState(0x45c0, 0x326e, 0x7990, 0xcdf8, 0x15e, 0xd10b, 0x1, 0x1);
        gbc.writeMem(0x45c0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x326e);
        EXPECT(gbc.pc(), 0x45c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0358
        gbc.setState(0x2c9, 0x3557, 0x6280, 0xd6db, 0xbd4a, 0x7cd0, 0x1, 0x0);
        gbc.writeMem(0x2c9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3557);
        EXPECT(gbc.pc(), 0x2cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0359
        gbc.setState(0x3e86, 0xfc60, 0xfc90, 0xbdaf, 0x6837, 0xdbdc, 0x1, 0x1);
        gbc.writeMem(0x3e86, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfc60);
        EXPECT(gbc.pc(), 0x3e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 035A
        gbc.setState(0x9d56, 0xb59d, 0xb2c0, 0x46af, 0xbda9, 0xc959, 0x0, 0x1);
        gbc.writeMem(0x9d56, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb59d);
        EXPECT(gbc.pc(), 0x9d58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d56), 0xcb);
        EXPECT(gbc.readMem(0x9d57), 0x5f);
        // CB 5F 035B
        gbc.setState(0x67f2, 0x8077, 0x3c50, 0x7664, 0x2f90, 0xc7e4, 0x0, 0x1);
        gbc.writeMem(0x67f2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8077);
        EXPECT(gbc.pc(), 0x67f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 035C
        gbc.setState(0xe05d, 0x7bec, 0xb090, 0xcca, 0xa1c0, 0x4a66, 0x0, 0x1);
        gbc.writeMem(0xe05d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7bec);
        EXPECT(gbc.pc(), 0xe05f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe05d), 0xcb);
        EXPECT(gbc.readMem(0xe05e), 0x5f);
        // CB 5F 035D
        gbc.setState(0xde64, 0x8cd1, 0x6ae0, 0x3679, 0xdb5c, 0xfeda, 0x1, 0x1);
        gbc.writeMem(0xde64, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8cd1);
        EXPECT(gbc.pc(), 0xde66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde64), 0xcb);
        EXPECT(gbc.readMem(0xde65), 0x5f);
        // CB 5F 035E
        gbc.setState(0xd28d, 0xf0fb, 0x9fc0, 0xd31a, 0x1637, 0x5138, 0x1, 0x0);
        gbc.writeMem(0xd28d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf0fb);
        EXPECT(gbc.pc(), 0xd28f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd28d), 0xcb);
        EXPECT(gbc.readMem(0xd28e), 0x5f);
        // CB 5F 035F
        gbc.setState(0x180f, 0x8b70, 0x8580, 0x95d1, 0x7cd3, 0x16e9, 0x1, 0x0);
        gbc.writeMem(0x180f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8b70);
        EXPECT(gbc.pc(), 0x1811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0360
        gbc.setState(0x4f1f, 0xc72d, 0x4e50, 0x4984, 0x90fc, 0x1ba8, 0x0, 0x0);
        gbc.writeMem(0x4f1f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc72d);
        EXPECT(gbc.pc(), 0x4f21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0361
        gbc.setState(0x417c, 0xa853, 0xeb40, 0xffa2, 0x70f0, 0xa76a, 0x0, 0x0);
        gbc.writeMem(0x417c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa853);
        EXPECT(gbc.pc(), 0x417e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0362
        gbc.setState(0x1a71, 0xed0d, 0xfec0, 0x936a, 0x6211, 0x2c15, 0x1, 0x1);
        gbc.writeMem(0x1a71, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xed0d);
        EXPECT(gbc.pc(), 0x1a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0363
        gbc.setState(0x2545, 0x7564, 0x1b0, 0x1ad1, 0xdb76, 0x89de, 0x0, 0x0);
        gbc.writeMem(0x2545, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7564);
        EXPECT(gbc.pc(), 0x2547);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0364
        gbc.setState(0xe078, 0x7193, 0x8f70, 0x3134, 0x26e4, 0x6309, 0x0, 0x1);
        gbc.writeMem(0xe078, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7193);
        EXPECT(gbc.pc(), 0xe07a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe078), 0xcb);
        EXPECT(gbc.readMem(0xe079), 0x5f);
        // CB 5F 0365
        gbc.setState(0x101d, 0x7919, 0x3f20, 0xc13e, 0xabcc, 0x7219, 0x1, 0x0);
        gbc.writeMem(0x101d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7919);
        EXPECT(gbc.pc(), 0x101f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0366
        gbc.setState(0xb1ca, 0xa43e, 0xdce0, 0xb43f, 0x11d9, 0x6388, 0x1, 0x1);
        gbc.writeMem(0xb1ca, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa43e);
        EXPECT(gbc.pc(), 0xb1cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ca), 0xcb);
        EXPECT(gbc.readMem(0xb1cb), 0x5f);
        // CB 5F 0367
        gbc.setState(0x4678, 0x244b, 0x2050, 0xbc0e, 0x6092, 0xddcd, 0x1, 0x0);
        gbc.writeMem(0x4678, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x244b);
        EXPECT(gbc.pc(), 0x467a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0368
        gbc.setState(0x6e81, 0xeb6a, 0x8bf0, 0x7c60, 0x6419, 0xa0e9, 0x1, 0x1);
        gbc.writeMem(0x6e81, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xeb6a);
        EXPECT(gbc.pc(), 0x6e83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0369
        gbc.setState(0xc01e, 0x7a0b, 0xdbe0, 0x3b1d, 0xf4f8, 0x8862, 0x0, 0x0);
        gbc.writeMem(0xc01e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x7a0b);
        EXPECT(gbc.pc(), 0xc020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc01e), 0xcb);
        EXPECT(gbc.readMem(0xc01f), 0x5f);
        // CB 5F 036A
        gbc.setState(0xb91d, 0xc547, 0x5670, 0x7869, 0x1a9e, 0x3648, 0x0, 0x0);
        gbc.writeMem(0xb91d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc547);
        EXPECT(gbc.pc(), 0xb91f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb91d), 0xcb);
        EXPECT(gbc.readMem(0xb91e), 0x5f);
        // CB 5F 036B
        gbc.setState(0x92db, 0xadee, 0xfb70, 0x22b5, 0xb158, 0xe53c, 0x0, 0x0);
        gbc.writeMem(0x92db, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xadee);
        EXPECT(gbc.pc(), 0x92dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92db), 0xcb);
        EXPECT(gbc.readMem(0x92dc), 0x5f);
        // CB 5F 036C
        gbc.setState(0xabe5, 0x8506, 0x68d0, 0xfa77, 0x6f12, 0x60a3, 0x1, 0x1);
        gbc.writeMem(0xabe5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8506);
        EXPECT(gbc.pc(), 0xabe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabe5), 0xcb);
        EXPECT(gbc.readMem(0xabe6), 0x5f);
        // CB 5F 036D
        gbc.setState(0x8305, 0xdfb4, 0x55c0, 0xaf0c, 0x2672, 0x438e, 0x1, 0x1);
        gbc.writeMem(0x8305, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xdfb4);
        EXPECT(gbc.pc(), 0x8307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8305), 0xcb);
        EXPECT(gbc.readMem(0x8306), 0x5f);
        // CB 5F 036E
        gbc.setState(0x151e, 0xb751, 0x1f70, 0xcbd1, 0x1e7, 0x138e, 0x0, 0x0);
        gbc.writeMem(0x151e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb751);
        EXPECT(gbc.pc(), 0x1520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 036F
        gbc.setState(0x405c, 0x3fb5, 0xd680, 0xfe7b, 0xe9c3, 0x782d, 0x0, 0x0);
        gbc.writeMem(0x405c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3fb5);
        EXPECT(gbc.pc(), 0x405e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0370
        gbc.setState(0x1398, 0x3227, 0x2f00, 0xc408, 0xd652, 0x3ac, 0x0, 0x1);
        gbc.writeMem(0x1398, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3227);
        EXPECT(gbc.pc(), 0x139a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0371
        gbc.setState(0x2cf3, 0xee3e, 0x2460, 0xc30d, 0x3e84, 0x5f70, 0x1, 0x0);
        gbc.writeMem(0x2cf3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xee3e);
        EXPECT(gbc.pc(), 0x2cf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0372
        gbc.setState(0xb3e7, 0x18a6, 0x31b0, 0xae46, 0x1e7f, 0xc834, 0x0, 0x0);
        gbc.writeMem(0xb3e7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x18a6);
        EXPECT(gbc.pc(), 0xb3e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e7), 0xcb);
        EXPECT(gbc.readMem(0xb3e8), 0x5f);
        // CB 5F 0373
        gbc.setState(0x3226, 0x54f0, 0xca40, 0xcb25, 0xa62c, 0xe0c7, 0x1, 0x1);
        gbc.writeMem(0x3226, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x54f0);
        EXPECT(gbc.pc(), 0x3228);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0374
        gbc.setState(0x168, 0x345, 0x6f10, 0xbba, 0xf01a, 0x60b5, 0x1, 0x0);
        gbc.writeMem(0x168, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x345);
        EXPECT(gbc.pc(), 0x16a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0375
        gbc.setState(0x163, 0x7834, 0x95b0, 0xb7da, 0x992f, 0x2fc9, 0x0, 0x1);
        gbc.writeMem(0x163, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7834);
        EXPECT(gbc.pc(), 0x165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0377
        gbc.setState(0xea2, 0xc0ef, 0xcbc0, 0x360e, 0x2b85, 0xe3cb, 0x1, 0x0);
        gbc.writeMem(0xea2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc0ef);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0378
        gbc.setState(0x339c, 0x5d36, 0xff60, 0xa0f4, 0xbd83, 0x739c, 0x0, 0x1);
        gbc.writeMem(0x339c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5d36);
        EXPECT(gbc.pc(), 0x339e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0379
        gbc.setState(0x706c, 0xc8be, 0xa9c0, 0xe0b2, 0xab7a, 0x143a, 0x1, 0x0);
        gbc.writeMem(0x706c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc8be);
        EXPECT(gbc.pc(), 0x706e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 037A
        gbc.setState(0x317c, 0x48b7, 0xc0b0, 0x278, 0xcce6, 0x3611, 0x0, 0x0);
        gbc.writeMem(0x317c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x48b7);
        EXPECT(gbc.pc(), 0x317e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 037B
        gbc.setState(0x5604, 0x70f, 0x5200, 0x8d4c, 0x95a, 0xbb59, 0x1, 0x0);
        gbc.writeMem(0x5604, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x70f);
        EXPECT(gbc.pc(), 0x5606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 037C
        gbc.setState(0x317f, 0x42e2, 0x13a0, 0xa9c6, 0xeaef, 0xfa26, 0x1, 0x1);
        gbc.writeMem(0x317f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x42e2);
        EXPECT(gbc.pc(), 0x3181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 037D
        gbc.setState(0x46c5, 0x6928, 0x6d20, 0x7d59, 0xb55a, 0x8ebf, 0x0, 0x0);
        gbc.writeMem(0x46c5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6928);
        EXPECT(gbc.pc(), 0x46c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 037E
        gbc.setState(0x6578, 0x94e0, 0x28b0, 0x3fa7, 0x3bd, 0x1b8e, 0x1, 0x0);
        gbc.writeMem(0x6578, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x94e0);
        EXPECT(gbc.pc(), 0x657a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 037F
        gbc.setState(0xcf51, 0xa434, 0xd2b0, 0xf125, 0x36b8, 0xd2f1, 0x0, 0x0);
        gbc.writeMem(0xcf51, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa434);
        EXPECT(gbc.pc(), 0xcf53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf51), 0xcb);
        EXPECT(gbc.readMem(0xcf52), 0x5f);
        // CB 5F 0380
        gbc.setState(0x7a4d, 0x5fb6, 0xbe70, 0x400b, 0x269, 0xf6cc, 0x0, 0x0);
        gbc.writeMem(0x7a4d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5fb6);
        EXPECT(gbc.pc(), 0x7a4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0381
        gbc.setState(0x803e, 0x21b5, 0x9380, 0x5774, 0x5fdb, 0xa860, 0x1, 0x0);
        gbc.writeMem(0x803e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x21b5);
        EXPECT(gbc.pc(), 0x8040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x803e), 0xcb);
        EXPECT(gbc.readMem(0x803f), 0x5f);
        // CB 5F 0382
        gbc.setState(0x5ef9, 0xa59a, 0x47a0, 0x6e5c, 0xc2c7, 0xe6f9, 0x0, 0x1);
        gbc.writeMem(0x5ef9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa59a);
        EXPECT(gbc.pc(), 0x5efb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0383
        gbc.setState(0xa8e2, 0x483f, 0x8d50, 0x21b7, 0xf50d, 0x5cfc, 0x1, 0x1);
        gbc.writeMem(0xa8e2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x483f);
        EXPECT(gbc.pc(), 0xa8e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8e2), 0xcb);
        EXPECT(gbc.readMem(0xa8e3), 0x5f);
        // CB 5F 0384
        gbc.setState(0xa29c, 0xd4a3, 0xb630, 0x9d27, 0x757b, 0x2f98, 0x1, 0x1);
        gbc.writeMem(0xa29c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd4a3);
        EXPECT(gbc.pc(), 0xa29e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29c), 0xcb);
        EXPECT(gbc.readMem(0xa29d), 0x5f);
        // CB 5F 0385
        gbc.setState(0x3691, 0x8656, 0x7530, 0xacbc, 0x2190, 0xc930, 0x0, 0x1);
        gbc.writeMem(0x3691, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8656);
        EXPECT(gbc.pc(), 0x3693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0386
        gbc.setState(0xb93f, 0xa13f, 0x75a0, 0x3e08, 0xf41a, 0x9d14, 0x1, 0x1);
        gbc.writeMem(0xb93f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa13f);
        EXPECT(gbc.pc(), 0xb941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93f), 0xcb);
        EXPECT(gbc.readMem(0xb940), 0x5f);
        // CB 5F 0387
        gbc.setState(0xa2f9, 0x2a5a, 0x3b80, 0x4696, 0x6288, 0x7e95, 0x0, 0x1);
        gbc.writeMem(0xa2f9, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2a5a);
        EXPECT(gbc.pc(), 0xa2fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f9), 0xcb);
        EXPECT(gbc.readMem(0xa2fa), 0x5f);
        // CB 5F 0389
        gbc.setState(0x732, 0x47a4, 0xaab0, 0x973e, 0xb700, 0x5d58, 0x0, 0x1);
        gbc.writeMem(0x732, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x47a4);
        EXPECT(gbc.pc(), 0x734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 038A
        gbc.setState(0xb130, 0xdc09, 0xa490, 0xfb0f, 0xd5e6, 0x1ec6, 0x0, 0x0);
        gbc.writeMem(0xb130, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xdc09);
        EXPECT(gbc.pc(), 0xb132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb130), 0xcb);
        EXPECT(gbc.readMem(0xb131), 0x5f);
        // CB 5F 038B
        gbc.setState(0xc1ca, 0x8657, 0xffb0, 0x69ef, 0x8b28, 0xd693, 0x0, 0x1);
        gbc.writeMem(0xc1ca, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8657);
        EXPECT(gbc.pc(), 0xc1cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ca), 0xcb);
        EXPECT(gbc.readMem(0xc1cb), 0x5f);
        // CB 5F 038D
        gbc.setState(0xb5be, 0x8415, 0xb420, 0x5c3b, 0x12a6, 0x9427, 0x0, 0x1);
        gbc.writeMem(0xb5be, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8415);
        EXPECT(gbc.pc(), 0xb5c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5be), 0xcb);
        EXPECT(gbc.readMem(0xb5bf), 0x5f);
        // CB 5F 038E
        gbc.setState(0x73c1, 0xb75c, 0x9b30, 0x28b4, 0xa89e, 0x743a, 0x1, 0x1);
        gbc.writeMem(0x73c1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xb75c);
        EXPECT(gbc.pc(), 0x73c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 038F
        gbc.setState(0x6af0, 0xdd8f, 0x2c50, 0x4660, 0x9b27, 0x7799, 0x1, 0x0);
        gbc.writeMem(0x6af0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xdd8f);
        EXPECT(gbc.pc(), 0x6af2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0390
        gbc.setState(0x8f4a, 0xe878, 0x7600, 0xdb9b, 0x1a8f, 0xf64b, 0x1, 0x1);
        gbc.writeMem(0x8f4a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe878);
        EXPECT(gbc.pc(), 0x8f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f4a), 0xcb);
        EXPECT(gbc.readMem(0x8f4b), 0x5f);
        // CB 5F 0391
        gbc.setState(0xd847, 0x356e, 0x18d0, 0x9e16, 0xc1eb, 0xbbcd, 0x0, 0x0);
        gbc.writeMem(0xd847, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x356e);
        EXPECT(gbc.pc(), 0xd849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd847), 0xcb);
        EXPECT(gbc.readMem(0xd848), 0x5f);
        // CB 5F 0392
        gbc.setState(0x391a, 0x7725, 0xafc0, 0xac8a, 0x83b, 0x68cf, 0x0, 0x1);
        gbc.writeMem(0x391a, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7725);
        EXPECT(gbc.pc(), 0x391c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0393
        gbc.setState(0x1814, 0x60d0, 0x51e0, 0xa990, 0xc8f6, 0x41d3, 0x1, 0x1);
        gbc.writeMem(0x1814, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x60d0);
        EXPECT(gbc.pc(), 0x1816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0394
        gbc.setState(0x3ac4, 0xb4c1, 0x34c0, 0x757f, 0xf1e3, 0xc01d, 0x0, 0x1);
        gbc.writeMem(0x3ac4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb4c1);
        EXPECT(gbc.pc(), 0x3ac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 0395
        gbc.setState(0xb9a4, 0x2702, 0x4730, 0x2e0c, 0x28c3, 0xbe26, 0x1, 0x0);
        gbc.writeMem(0xb9a4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2702);
        EXPECT(gbc.pc(), 0xb9a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9a4), 0xcb);
        EXPECT(gbc.readMem(0xb9a5), 0x5f);
        // CB 5F 0396
        gbc.setState(0x4104, 0xab23, 0xa3f0, 0xc2b3, 0x279f, 0x4855, 0x0, 0x0);
        gbc.writeMem(0x4104, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xab23);
        EXPECT(gbc.pc(), 0x4106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 0397
        gbc.setState(0xc7d8, 0x5f5d, 0x1a50, 0x339d, 0xf667, 0x807f, 0x0, 0x0);
        gbc.writeMem(0xc7d8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5f5d);
        EXPECT(gbc.pc(), 0xc7da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7d8), 0xcb);
        EXPECT(gbc.readMem(0xc7d9), 0x5f);
        // CB 5F 0399
        gbc.setState(0x30b5, 0x3eff, 0x81e0, 0xe7e, 0x87bc, 0x25a, 0x1, 0x1);
        gbc.writeMem(0x30b5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3eff);
        EXPECT(gbc.pc(), 0x30b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 039A
        gbc.setState(0xa217, 0x45d, 0x55a0, 0x2eac, 0x4fbd, 0x488, 0x0, 0x0);
        gbc.writeMem(0xa217, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x45d);
        EXPECT(gbc.pc(), 0xa219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa217), 0xcb);
        EXPECT(gbc.readMem(0xa218), 0x5f);
        // CB 5F 039C
        gbc.setState(0x882d, 0x7df8, 0xc2f0, 0x46fb, 0x9fce, 0x3902, 0x0, 0x0);
        gbc.writeMem(0x882d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7df8);
        EXPECT(gbc.pc(), 0x882f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x882d), 0xcb);
        EXPECT(gbc.readMem(0x882e), 0x5f);
        // CB 5F 039D
        gbc.setState(0x9220, 0xc08a, 0x5c60, 0xc333, 0x4d65, 0x59f0, 0x0, 0x0);
        gbc.writeMem(0x9220, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc08a);
        EXPECT(gbc.pc(), 0x9222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9220), 0xcb);
        EXPECT(gbc.readMem(0x9221), 0x5f);
        // CB 5F 039E
        gbc.setState(0xa0fc, 0x18a7, 0x18d0, 0xd5c6, 0x8564, 0x11c2, 0x0, 0x0);
        gbc.writeMem(0xa0fc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x18a7);
        EXPECT(gbc.pc(), 0xa0fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0fc), 0xcb);
        EXPECT(gbc.readMem(0xa0fd), 0x5f);
        // CB 5F 039F
        gbc.setState(0xba1c, 0x46ea, 0x44f0, 0x5041, 0xd835, 0x6d98, 0x0, 0x1);
        gbc.writeMem(0xba1c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x46ea);
        EXPECT(gbc.pc(), 0xba1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba1c), 0xcb);
        EXPECT(gbc.readMem(0xba1d), 0x5f);
        // CB 5F 03A0
        gbc.setState(0x9dab, 0x5edf, 0x7ae0, 0xde80, 0x295e, 0x2ab1, 0x1, 0x0);
        gbc.writeMem(0x9dab, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5edf);
        EXPECT(gbc.pc(), 0x9dad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dab), 0xcb);
        EXPECT(gbc.readMem(0x9dac), 0x5f);
        // CB 5F 03A1
        gbc.setState(0x8e03, 0xca13, 0x2680, 0x102d, 0xeaf4, 0x3c79, 0x1, 0x1);
        gbc.writeMem(0x8e03, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xca13);
        EXPECT(gbc.pc(), 0x8e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e03), 0xcb);
        EXPECT(gbc.readMem(0x8e04), 0x5f);
        // CB 5F 03A2
        gbc.setState(0xefc1, 0x3469, 0xa610, 0x60c3, 0xd524, 0xc392, 0x0, 0x0);
        gbc.writeMem(0xefc1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3469);
        EXPECT(gbc.pc(), 0xefc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefc1), 0xcb);
        EXPECT(gbc.readMem(0xefc2), 0x5f);
        // CB 5F 03A3
        gbc.setState(0xd9ad, 0x1bab, 0xf6f0, 0x75a2, 0x9e15, 0xb168, 0x1, 0x0);
        gbc.writeMem(0xd9ad, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1bab);
        EXPECT(gbc.pc(), 0xd9af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ad), 0xcb);
        EXPECT(gbc.readMem(0xd9ae), 0x5f);
        // CB 5F 03A4
        gbc.setState(0x24b6, 0xa98b, 0x7730, 0x6814, 0x8a22, 0x7302, 0x0, 0x0);
        gbc.writeMem(0x24b6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa98b);
        EXPECT(gbc.pc(), 0x24b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03A5
        gbc.setState(0x900c, 0x4b60, 0xef0, 0xa9b3, 0x3cff, 0x7ce0, 0x1, 0x1);
        gbc.writeMem(0x900c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4b60);
        EXPECT(gbc.pc(), 0x900e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x900c), 0xcb);
        EXPECT(gbc.readMem(0x900d), 0x5f);
        // CB 5F 03A6
        gbc.setState(0xde46, 0x2ce9, 0xcda0, 0xf5e3, 0x797c, 0x1799, 0x0, 0x1);
        gbc.writeMem(0xde46, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2ce9);
        EXPECT(gbc.pc(), 0xde48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde46), 0xcb);
        EXPECT(gbc.readMem(0xde47), 0x5f);
        // CB 5F 03A7
        gbc.setState(0x5d6, 0xfbd7, 0x7880, 0x1637, 0xfdba, 0x14e0, 0x1, 0x1);
        gbc.writeMem(0x5d6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfbd7);
        EXPECT(gbc.pc(), 0x5d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03A8
        gbc.setState(0xe55, 0x8f47, 0x2570, 0x83cf, 0x5820, 0xae48, 0x1, 0x0);
        gbc.writeMem(0xe55, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8f47);
        EXPECT(gbc.pc(), 0xe57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03A9
        gbc.setState(0x98e0, 0x2deb, 0xda80, 0x74dc, 0xcd7b, 0xb611, 0x0, 0x0);
        gbc.writeMem(0x98e0, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2deb);
        EXPECT(gbc.pc(), 0x98e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e0), 0xcb);
        EXPECT(gbc.readMem(0x98e1), 0x5f);
        // CB 5F 03AA
        gbc.setState(0xc7e8, 0xf54a, 0xc360, 0x4262, 0x3556, 0xab3b, 0x0, 0x0);
        gbc.writeMem(0xc7e8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf54a);
        EXPECT(gbc.pc(), 0xc7ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7e8), 0xcb);
        EXPECT(gbc.readMem(0xc7e9), 0x5f);
        // CB 5F 03AB
        gbc.setState(0x87bf, 0xf6d2, 0xb090, 0xac0a, 0xb14d, 0x4a30, 0x0, 0x0);
        gbc.writeMem(0x87bf, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf6d2);
        EXPECT(gbc.pc(), 0x87c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87bf), 0xcb);
        EXPECT(gbc.readMem(0x87c0), 0x5f);
        // CB 5F 03AC
        gbc.setState(0xa236, 0x9cf7, 0x1a50, 0x845b, 0x1b19, 0x4d97, 0x0, 0x0);
        gbc.writeMem(0xa236, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9cf7);
        EXPECT(gbc.pc(), 0xa238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa236), 0xcb);
        EXPECT(gbc.readMem(0xa237), 0x5f);
        // CB 5F 03AE
        gbc.setState(0x5a43, 0xa3ef, 0x21c0, 0x5d65, 0x16d1, 0x72d, 0x1, 0x0);
        gbc.writeMem(0x5a43, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa3ef);
        EXPECT(gbc.pc(), 0x5a45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03AF
        gbc.setState(0xaa17, 0xd7f8, 0x4b60, 0x1b91, 0xe460, 0x118f, 0x1, 0x1);
        gbc.writeMem(0xaa17, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd7f8);
        EXPECT(gbc.pc(), 0xaa19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa17), 0xcb);
        EXPECT(gbc.readMem(0xaa18), 0x5f);
        // CB 5F 03B0
        gbc.setState(0x2be1, 0xf41a, 0xf130, 0x5ec2, 0xb9be, 0xe0a1, 0x0, 0x0);
        gbc.writeMem(0x2be1, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf41a);
        EXPECT(gbc.pc(), 0x2be3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03B1
        gbc.setState(0x60fd, 0x7996, 0x3d70, 0x7a88, 0x3f88, 0xda2d, 0x1, 0x0);
        gbc.writeMem(0x60fd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7996);
        EXPECT(gbc.pc(), 0x60ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03B2
        gbc.setState(0x2370, 0x9cf5, 0x2d50, 0x2ab2, 0xd85, 0xc42c, 0x0, 0x1);
        gbc.writeMem(0x2370, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9cf5);
        EXPECT(gbc.pc(), 0x2372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03B3
        gbc.setState(0x636f, 0x6590, 0x2300, 0x4824, 0x6bf9, 0xb3ca, 0x0, 0x1);
        gbc.writeMem(0x636f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6590);
        EXPECT(gbc.pc(), 0x6371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03B4
        gbc.setState(0x885f, 0x67f9, 0x7e40, 0x86c7, 0xfe9e, 0xe0fc, 0x1, 0x1);
        gbc.writeMem(0x885f, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x67f9);
        EXPECT(gbc.pc(), 0x8861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885f), 0xcb);
        EXPECT(gbc.readMem(0x8860), 0x5f);
        // CB 5F 03B5
        gbc.setState(0x2e17, 0xbb62, 0x48e0, 0x2b89, 0x481a, 0x175a, 0x1, 0x1);
        gbc.writeMem(0x2e17, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbb62);
        EXPECT(gbc.pc(), 0x2e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03B6
        gbc.setState(0x37, 0x362e, 0x8550, 0xd207, 0x72db, 0x176b, 0x0, 0x0);
        gbc.writeMem(0x37, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x362e);
        EXPECT(gbc.pc(), 0x39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03B7
        gbc.setState(0xd840, 0xfd49, 0x17a0, 0xb543, 0x2e6c, 0x4cbe, 0x1, 0x0);
        gbc.writeMem(0xd840, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfd49);
        EXPECT(gbc.pc(), 0xd842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd840), 0xcb);
        EXPECT(gbc.readMem(0xd841), 0x5f);
        // CB 5F 03B8
        gbc.setState(0xae30, 0x8e77, 0xd1f0, 0x56e5, 0x505e, 0xc9b7, 0x0, 0x0);
        gbc.writeMem(0xae30, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8e77);
        EXPECT(gbc.pc(), 0xae32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae30), 0xcb);
        EXPECT(gbc.readMem(0xae31), 0x5f);
        // CB 5F 03B9
        gbc.setState(0x9b14, 0x217a, 0xd820, 0x86c8, 0xe73b, 0xacc5, 0x0, 0x0);
        gbc.writeMem(0x9b14, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x217a);
        EXPECT(gbc.pc(), 0x9b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b14), 0xcb);
        EXPECT(gbc.readMem(0x9b15), 0x5f);
        // CB 5F 03BA
        gbc.setState(0xadfc, 0xf77, 0x38f0, 0xea7b, 0x720c, 0x5389, 0x0, 0x1);
        gbc.writeMem(0xadfc, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf77);
        EXPECT(gbc.pc(), 0xadfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadfc), 0xcb);
        EXPECT(gbc.readMem(0xadfd), 0x5f);
        // CB 5F 03BC
        gbc.setState(0x60e4, 0x3db4, 0x8760, 0x45c8, 0x9a6a, 0xf489, 0x1, 0x0);
        gbc.writeMem(0x60e4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3db4);
        EXPECT(gbc.pc(), 0x60e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03BD
        gbc.setState(0xdb3, 0x5e5, 0x6ba0, 0x15c0, 0x2f9c, 0x4433, 0x0, 0x1);
        gbc.writeMem(0xdb3, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5e5);
        EXPECT(gbc.pc(), 0xdb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03BE
        gbc.setState(0x7a9c, 0x4da6, 0x5230, 0x7778, 0x2e24, 0x4b9a, 0x0, 0x1);
        gbc.writeMem(0x7a9c, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4da6);
        EXPECT(gbc.pc(), 0x7a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03C0
        gbc.setState(0x94e4, 0xbf90, 0x7b80, 0xb76a, 0x2c7, 0x7adc, 0x1, 0x0);
        gbc.writeMem(0x94e4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xbf90);
        EXPECT(gbc.pc(), 0x94e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e4), 0xcb);
        EXPECT(gbc.readMem(0x94e5), 0x5f);
        // CB 5F 03C1
        gbc.setState(0xb6d8, 0x5ec, 0x8890, 0x4e28, 0x9d5e, 0x2e77, 0x1, 0x1);
        gbc.writeMem(0xb6d8, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5ec);
        EXPECT(gbc.pc(), 0xb6da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d8), 0xcb);
        EXPECT(gbc.readMem(0xb6d9), 0x5f);
        // CB 5F 03C2
        gbc.setState(0xc438, 0x697e, 0x1020, 0x2c49, 0x4a8a, 0x9b6a, 0x1, 0x0);
        gbc.writeMem(0xc438, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x697e);
        EXPECT(gbc.pc(), 0xc43a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc438), 0xcb);
        EXPECT(gbc.readMem(0xc439), 0x5f);
        // CB 5F 03C3
        gbc.setState(0x66cd, 0x8b13, 0x1f60, 0xeff5, 0x8cca, 0xb0e, 0x1, 0x1);
        gbc.writeMem(0x66cd, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8b13);
        EXPECT(gbc.pc(), 0x66cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03C4
        gbc.setState(0x9244, 0x4cb5, 0x48e0, 0xef7f, 0xaa7f, 0x2e35, 0x0, 0x0);
        gbc.writeMem(0x9244, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4cb5);
        EXPECT(gbc.pc(), 0x9246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9244), 0xcb);
        EXPECT(gbc.readMem(0x9245), 0x5f);
        // CB 5F 03C5
        gbc.setState(0x7d34, 0xe52d, 0x6b70, 0x65bd, 0xb319, 0x9b05, 0x1, 0x1);
        gbc.writeMem(0x7d34, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe52d);
        EXPECT(gbc.pc(), 0x7d36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03C6
        gbc.setState(0xd44d, 0x2fb1, 0x5da0, 0xd3cf, 0xbb81, 0x8beb, 0x1, 0x0);
        gbc.writeMem(0xd44d, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2fb1);
        EXPECT(gbc.pc(), 0xd44f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd44d), 0xcb);
        EXPECT(gbc.readMem(0xd44e), 0x5f);
        // CB 5F 03C7
        gbc.setState(0x73aa, 0x6b1c, 0x77b0, 0x557b, 0xace0, 0xf1f1, 0x1, 0x0);
        gbc.writeMem(0x73aa, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6b1c);
        EXPECT(gbc.pc(), 0x73ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03C8
        gbc.setState(0xe616, 0xf053, 0x6080, 0x27bb, 0x9f, 0xd634, 0x0, 0x0);
        gbc.writeMem(0xe616, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf053);
        EXPECT(gbc.pc(), 0xe618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe616), 0xcb);
        EXPECT(gbc.readMem(0xe617), 0x5f);
        // CB 5F 03C9
        gbc.setState(0x40b6, 0xf3ad, 0xa440, 0xce83, 0x8bb1, 0x2f23, 0x0, 0x1);
        gbc.writeMem(0x40b6, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf3ad);
        EXPECT(gbc.pc(), 0x40b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03CA
        gbc.setState(0x6c42, 0x99cd, 0x5310, 0xb7dc, 0x14ee, 0x114f, 0x1, 0x1);
        gbc.writeMem(0x6c42, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x99cd);
        EXPECT(gbc.pc(), 0x6c44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03CB
        gbc.setState(0x1927, 0x58ce, 0x3a60, 0xcb3c, 0x6e0f, 0xb01c, 0x1, 0x0);
        gbc.writeMem(0x1927, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x58ce);
        EXPECT(gbc.pc(), 0x1929);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03CC
        gbc.setState(0xe04, 0x31d3, 0x2cb0, 0x61da, 0xe40b, 0xc8a9, 0x0, 0x1);
        gbc.writeMem(0xe04, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x31d3);
        EXPECT(gbc.pc(), 0xe06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03CD
        gbc.setState(0x1382, 0x3aa6, 0x29c0, 0xd717, 0xc845, 0x450b, 0x0, 0x1);
        gbc.writeMem(0x1382, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3aa6);
        EXPECT(gbc.pc(), 0x1384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03CE
        gbc.setState(0x67e7, 0xf951, 0xdc00, 0xfff8, 0x67ab, 0x9c9a, 0x0, 0x1);
        gbc.writeMem(0x67e7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf951);
        EXPECT(gbc.pc(), 0x67e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03CF
        gbc.setState(0xb65, 0x42b8, 0xd150, 0x3571, 0xda60, 0xb20c, 0x0, 0x0);
        gbc.writeMem(0xb65, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x42b8);
        EXPECT(gbc.pc(), 0xb67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03D0
        gbc.setState(0x3c62, 0x81a4, 0xd030, 0x32db, 0xe239, 0xc38e, 0x0, 0x0);
        gbc.writeMem(0x3c62, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x81a4);
        EXPECT(gbc.pc(), 0x3c64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03D1
        gbc.setState(0x27da, 0xfc79, 0xb4c0, 0xaa7b, 0xb5, 0x5fe1, 0x0, 0x0);
        gbc.writeMem(0x27da, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xfc79);
        EXPECT(gbc.pc(), 0x27dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03D2
        gbc.setState(0x5837, 0xb682, 0x2e70, 0x8d18, 0x56c7, 0x8c82, 0x1, 0x1);
        gbc.writeMem(0x5837, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb682);
        EXPECT(gbc.pc(), 0x5839);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03D3
        gbc.setState(0x95d4, 0x9389, 0x9810, 0x3f90, 0xe433, 0xdb5b, 0x0, 0x1);
        gbc.writeMem(0x95d4, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9389);
        EXPECT(gbc.pc(), 0x95d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95d4), 0xcb);
        EXPECT(gbc.readMem(0x95d5), 0x5f);
        // CB 5F 03D4
        gbc.setState(0xcde5, 0x6bbc, 0x6840, 0xe6bc, 0x794e, 0xe802, 0x0, 0x1);
        gbc.writeMem(0xcde5, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6bbc);
        EXPECT(gbc.pc(), 0xcde7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde5), 0xcb);
        EXPECT(gbc.readMem(0xcde6), 0x5f);
        // CB 5F 03D5
        gbc.setState(0x51f2, 0x1d58, 0xb9d0, 0xd1a6, 0x3a33, 0xccb5, 0x1, 0x1);
        gbc.writeMem(0x51f2, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1d58);
        EXPECT(gbc.pc(), 0x51f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03D6
        gbc.setState(0xc902, 0x7319, 0x50a0, 0xedad, 0x157f, 0xe87f, 0x0, 0x1);
        gbc.writeMem(0xc902, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7319);
        EXPECT(gbc.pc(), 0xc904);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc902), 0xcb);
        EXPECT(gbc.readMem(0xc903), 0x5f);
        // CB 5F 03D7
        gbc.setState(0x5434, 0x314e, 0x8300, 0x6e0c, 0x5b7, 0xd68e, 0x0, 0x1);
        gbc.writeMem(0x5434, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x314e);
        EXPECT(gbc.pc(), 0x5436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03D8
        gbc.setState(0xd632, 0xc965, 0x7350, 0x3e03, 0xa0e3, 0x3c0c, 0x1, 0x0);
        gbc.writeMem(0xd632, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc965);
        EXPECT(gbc.pc(), 0xd634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd632), 0xcb);
        EXPECT(gbc.readMem(0xd633), 0x5f);
        // CB 5F 03D9
        gbc.setState(0xa6eb, 0x2244, 0x12e0, 0x98a5, 0x9d20, 0xea1a, 0x0, 0x1);
        gbc.writeMem(0xa6eb, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2244);
        EXPECT(gbc.pc(), 0xa6ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6eb), 0xcb);
        EXPECT(gbc.readMem(0xa6ec), 0x5f);
        // CB 5F 03DA
        gbc.setState(0xe519, 0x3fe9, 0xb160, 0x5ea, 0xfff1, 0x8779, 0x1, 0x0);
        gbc.writeMem(0xe519, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3fe9);
        EXPECT(gbc.pc(), 0xe51b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe519), 0xcb);
        EXPECT(gbc.readMem(0xe51a), 0x5f);
        // CB 5F 03DB
        gbc.setState(0xba66, 0x9754, 0x1540, 0xd49f, 0x3a7c, 0xc745, 0x1, 0x0);
        gbc.writeMem(0xba66, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9754);
        EXPECT(gbc.pc(), 0xba68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba66), 0xcb);
        EXPECT(gbc.readMem(0xba67), 0x5f);
        // CB 5F 03DD
        gbc.setState(0xbd7, 0x9c35, 0x4e90, 0x6fcc, 0x52cb, 0x32cd, 0x0, 0x0);
        gbc.writeMem(0xbd7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9c35);
        EXPECT(gbc.pc(), 0xbd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03DE
        gbc.setState(0xd560, 0x6b94, 0xbe60, 0x1d4, 0xb841, 0x7a06, 0x0, 0x1);
        gbc.writeMem(0xd560, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x6b94);
        EXPECT(gbc.pc(), 0xd562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd560), 0xcb);
        EXPECT(gbc.readMem(0xd561), 0x5f);
        // CB 5F 03DF
        gbc.setState(0x9659, 0x4999, 0x9300, 0x63ac, 0x467, 0x7b4d, 0x1, 0x1);
        gbc.writeMem(0x9659, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4999);
        EXPECT(gbc.pc(), 0x965b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9659), 0xcb);
        EXPECT(gbc.readMem(0x965a), 0x5f);
        // CB 5F 03E0
        gbc.setState(0x1524, 0xc324, 0x4be0, 0x3edd, 0x9bb7, 0x96a5, 0x1, 0x1);
        gbc.writeMem(0x1524, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc324);
        EXPECT(gbc.pc(), 0x1526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03E1
        gbc.setState(0x5962, 0x8173, 0x2850, 0xe03, 0x9599, 0xa1b7, 0x0, 0x0);
        gbc.writeMem(0x5962, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8173);
        EXPECT(gbc.pc(), 0x5964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 5F 03E2
        gbc.setState(0x8563, 0xd066, 0x5430, 0x8964, 0x7a51, 0xc464, 0x1, 0x0);
        gbc.writeMem(0x8563, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd066);
        EXPECT(gbc.pc(), 0x8565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8563), 0xcb);
        EXPECT(gbc.readMem(0x8564), 0x5f);
        // CB 5F 03E3
        gbc.setState(0x4b7, 0x6514, 0x7e60, 0xda8c, 0x4ae0, 0x6eb2, 0x0, 0x1);
        gbc.writeMem(0x4b7, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6514);
        EXPECT(gbc.pc(), 0x4b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03E4
        gbc.setState(0x8c06, 0x9029, 0xf010, 0xb6a5, 0x695c, 0xf00f, 0x0, 0x1);
        gbc.writeMem(0x8c06, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9029);
        EXPECT(gbc.pc(), 0x8c08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c06), 0xcb);
        EXPECT(gbc.readMem(0x8c07), 0x5f);
        // CB 5F 03E5
        gbc.setState(0x4c47, 0xa947, 0x9200, 0xf5ca, 0xd02b, 0x7f1c, 0x1, 0x0);
        gbc.writeMem(0x4c47, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa947);
        EXPECT(gbc.pc(), 0x4c49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 5F 03E7
        gbc.setState(0xee2e, 0x63a, 0x3b00, 0xe8d8, 0xa3ec, 0xd0a9, 0x0, 0x0);
        gbc.writeMem(0xee2e, { 0xcb, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x63a);
        EXPECT(gbc.pc(), 0xee30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee2e), 0xcb);
        EXPECT(gbc.readMem(0xee2f), 0x5f);
    }
