#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_b1)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_b1) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // B1 0001
        gbc.setState(0x4e95, 0x35bd, 0x2f10, 0x3b71, 0xc231, 0xfb52, 0x1, 0x1);
        gbc.writeMem(0x4e95, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x35bd);
        EXPECT(gbc.pc(), 0x4e96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0002
        gbc.setState(0x4e58, 0xaa0a, 0xe60, 0x1205, 0x3297, 0x1b01, 0x1, 0x0);
        gbc.writeMem(0x4e58, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xaa0a);
        EXPECT(gbc.pc(), 0x4e59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0003
        gbc.setState(0x86a7, 0x5e0, 0x72f0, 0x3d45, 0x44a8, 0x28e9, 0x1, 0x0);
        gbc.writeMem(0x86a7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5e0);
        EXPECT(gbc.pc(), 0x86a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a7), 0xb1);
        // B1 0004
        gbc.setState(0x1c4, 0xac4d, 0x7b10, 0xde78, 0x4d43, 0xee59, 0x0, 0x0);
        gbc.writeMem(0x1c4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xac4d);
        EXPECT(gbc.pc(), 0x1c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0005
        gbc.setState(0xd23e, 0xa757, 0xe160, 0x8065, 0x97cf, 0xcb1, 0x1, 0x0);
        gbc.writeMem(0xd23e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa757);
        EXPECT(gbc.pc(), 0xd23f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd23e), 0xb1);
        // B1 0007
        gbc.setState(0x97bf, 0x4d43, 0xa630, 0xc5f1, 0x660b, 0x8156, 0x0, 0x1);
        gbc.writeMem(0x97bf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4d43);
        EXPECT(gbc.pc(), 0x97c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97bf), 0xb1);
        // B1 0008
        gbc.setState(0x3e88, 0xe17d, 0xffa0, 0xf2eb, 0x5001, 0x12be, 0x0, 0x0);
        gbc.writeMem(0x3e88, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe17d);
        EXPECT(gbc.pc(), 0x3e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0009
        gbc.setState(0x4bc7, 0xddc5, 0x8a10, 0x98b7, 0x6d91, 0xa64d, 0x0, 0x1);
        gbc.writeMem(0x4bc7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xddc5);
        EXPECT(gbc.pc(), 0x4bc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 000A
        gbc.setState(0x8f8e, 0x9552, 0x2a10, 0x112a, 0x90fa, 0x22ec, 0x0, 0x0);
        gbc.writeMem(0x8f8e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9552);
        EXPECT(gbc.pc(), 0x8f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f8e), 0xb1);
        // B1 000B
        gbc.setState(0xcbf2, 0x4b81, 0x86b0, 0xa082, 0x5a17, 0xb9a0, 0x0, 0x1);
        gbc.writeMem(0xcbf2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4b81);
        EXPECT(gbc.pc(), 0xcbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbf2), 0xb1);
        // B1 000C
        gbc.setState(0x7a69, 0x51b0, 0x2dc0, 0x97c2, 0x7737, 0x2a91, 0x1, 0x1);
        gbc.writeMem(0x7a69, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x51b0);
        EXPECT(gbc.pc(), 0x7a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 000D
        gbc.setState(0xe076, 0xb3ba, 0x9530, 0xa50a, 0x367a, 0x6243, 0x0, 0x0);
        gbc.writeMem(0xe076, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb3ba);
        EXPECT(gbc.pc(), 0xe077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe076), 0xb1);
        // B1 000E
        gbc.setState(0x501c, 0xdf47, 0xa1c0, 0xf0fa, 0xf8e2, 0xbdca, 0x1, 0x0);
        gbc.writeMem(0x501c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xdf47);
        EXPECT(gbc.pc(), 0x501d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 000F
        gbc.setState(0x69f0, 0x611d, 0xcf00, 0x2d8f, 0x1dbc, 0x8fb3, 0x0, 0x1);
        gbc.writeMem(0x69f0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x611d);
        EXPECT(gbc.pc(), 0x69f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0010
        gbc.setState(0xbd5d, 0xf0ea, 0x5870, 0xe6c7, 0x13c8, 0xc9e9, 0x1, 0x0);
        gbc.writeMem(0xbd5d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf0ea);
        EXPECT(gbc.pc(), 0xbd5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd5d), 0xb1);
        // B1 0011
        gbc.setState(0x511c, 0xc50c, 0x6670, 0xb683, 0xe179, 0xc60, 0x0, 0x0);
        gbc.writeMem(0x511c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc50c);
        EXPECT(gbc.pc(), 0x511d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0012
        gbc.setState(0x2d27, 0x83c4, 0xb9d0, 0xf0c4, 0x2e26, 0x11e6, 0x0, 0x0);
        gbc.writeMem(0x2d27, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x83c4);
        EXPECT(gbc.pc(), 0x2d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0013
        gbc.setState(0xe9bf, 0xdd68, 0xb690, 0x9c34, 0x25b6, 0xac25, 0x1, 0x1);
        gbc.writeMem(0xe9bf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xdd68);
        EXPECT(gbc.pc(), 0xe9c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9bf), 0xb1);
        // B1 0014
        gbc.setState(0xef25, 0xf778, 0x8da0, 0x5199, 0xd529, 0x708c, 0x0, 0x1);
        gbc.writeMem(0xef25, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf778);
        EXPECT(gbc.pc(), 0xef26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef25), 0xb1);
        // B1 0015
        gbc.setState(0xb6d4, 0xf01c, 0xee70, 0x7fc3, 0x9095, 0x21e3, 0x0, 0x0);
        gbc.writeMem(0xb6d4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf01c);
        EXPECT(gbc.pc(), 0xb6d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6d4), 0xb1);
        // B1 0017
        gbc.setState(0xbfcc, 0x7cc, 0xd050, 0x7486, 0xe0e7, 0x76ba, 0x1, 0x0);
        gbc.writeMem(0xbfcc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x7cc);
        EXPECT(gbc.pc(), 0xbfcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfcc), 0xb1);
        // B1 0018
        gbc.setState(0x8575, 0x350c, 0x8080, 0x47d9, 0x1703, 0x9eb4, 0x1, 0x0);
        gbc.writeMem(0x8575, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x350c);
        EXPECT(gbc.pc(), 0x8576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8575), 0xb1);
        // B1 0019
        gbc.setState(0xbec8, 0x5c76, 0x6f00, 0x2a0e, 0x10fb, 0xa732, 0x1, 0x0);
        gbc.writeMem(0xbec8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5c76);
        EXPECT(gbc.pc(), 0xbec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbec8), 0xb1);
        // B1 001A
        gbc.setState(0xc2a0, 0xcb8b, 0x6430, 0x29a8, 0xcdad, 0x938a, 0x1, 0x0);
        gbc.writeMem(0xc2a0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcb8b);
        EXPECT(gbc.pc(), 0xc2a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2a0), 0xb1);
        // B1 001B
        gbc.setState(0x7439, 0xf648, 0x1aa0, 0x8e6a, 0xa442, 0x42a, 0x1, 0x1);
        gbc.writeMem(0x7439, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf648);
        EXPECT(gbc.pc(), 0x743a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 001C
        gbc.setState(0x96b5, 0xcc73, 0x6550, 0x5d37, 0x3042, 0xfc42, 0x1, 0x0);
        gbc.writeMem(0x96b5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xcc73);
        EXPECT(gbc.pc(), 0x96b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96b5), 0xb1);
        // B1 001E
        gbc.setState(0xd206, 0x2470, 0xc260, 0x2637, 0x725e, 0xd42c, 0x0, 0x0);
        gbc.writeMem(0xd206, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2470);
        EXPECT(gbc.pc(), 0xd207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd206), 0xb1);
        // B1 001F
        gbc.setState(0xb74c, 0xc767, 0x7ff0, 0x590c, 0x35b3, 0x9354, 0x0, 0x0);
        gbc.writeMem(0xb74c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc767);
        EXPECT(gbc.pc(), 0xb74d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb74c), 0xb1);
        // B1 0020
        gbc.setState(0x45a3, 0x2019, 0xa430, 0xaff1, 0xf475, 0xeee2, 0x0, 0x1);
        gbc.writeMem(0x45a3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2019);
        EXPECT(gbc.pc(), 0x45a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0021
        gbc.setState(0xd448, 0x555f, 0x8900, 0xcfdf, 0x1b1a, 0xdbfb, 0x0, 0x0);
        gbc.writeMem(0xd448, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x555f);
        EXPECT(gbc.pc(), 0xd449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd448), 0xb1);
        // B1 0022
        gbc.setState(0x6dca, 0xfab5, 0xc750, 0x37dd, 0xadb5, 0xa408, 0x1, 0x1);
        gbc.writeMem(0x6dca, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfab5);
        EXPECT(gbc.pc(), 0x6dcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0023
        gbc.setState(0x79cf, 0x6425, 0xc960, 0xfc45, 0x95a6, 0x9460, 0x1, 0x0);
        gbc.writeMem(0x79cf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6425);
        EXPECT(gbc.pc(), 0x79d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0024
        gbc.setState(0x78f, 0xf1a3, 0x6a70, 0x1a8a, 0x77a6, 0x53e1, 0x0, 0x0);
        gbc.writeMem(0x78f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf1a3);
        EXPECT(gbc.pc(), 0x790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0025
        gbc.setState(0xb859, 0x64c3, 0x1810, 0x7cf5, 0xb8ed, 0x4218, 0x0, 0x1);
        gbc.writeMem(0xb859, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x64c3);
        EXPECT(gbc.pc(), 0xb85a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb859), 0xb1);
        // B1 0026
        gbc.setState(0x5e31, 0xadd9, 0xef00, 0xdc66, 0x85ec, 0xd631, 0x0, 0x1);
        gbc.writeMem(0x5e31, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xadd9);
        EXPECT(gbc.pc(), 0x5e32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0027
        gbc.setState(0xecf3, 0x4816, 0x26d0, 0xff4a, 0x648d, 0xf1d7, 0x1, 0x1);
        gbc.writeMem(0xecf3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4816);
        EXPECT(gbc.pc(), 0xecf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecf3), 0xb1);
        // B1 0028
        gbc.setState(0x95ea, 0xf76b, 0xa480, 0x3507, 0x546a, 0x285f, 0x0, 0x0);
        gbc.writeMem(0x95ea, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf76b);
        EXPECT(gbc.pc(), 0x95eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ea), 0xb1);
        // B1 0029
        gbc.setState(0xebf1, 0x32d8, 0x1d30, 0x4b15, 0x5e02, 0x9194, 0x0, 0x1);
        gbc.writeMem(0xebf1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x32d8);
        EXPECT(gbc.pc(), 0xebf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf1), 0xb1);
        // B1 002A
        gbc.setState(0xd78, 0x85b4, 0x6e20, 0xa4ea, 0xb611, 0x98f, 0x1, 0x1);
        gbc.writeMem(0xd78, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x85b4);
        EXPECT(gbc.pc(), 0xd79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 002B
        gbc.setState(0xd060, 0x1cbe, 0xc760, 0xc7e6, 0x78bc, 0x46f8, 0x1, 0x1);
        gbc.writeMem(0xd060, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1cbe);
        EXPECT(gbc.pc(), 0xd061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd060), 0xb1);
        // B1 002C
        gbc.setState(0xd3ba, 0xcb0e, 0x17d0, 0xf66f, 0x98ad, 0xc341, 0x0, 0x1);
        gbc.writeMem(0xd3ba, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcb0e);
        EXPECT(gbc.pc(), 0xd3bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ba), 0xb1);
        // B1 002D
        gbc.setState(0x399, 0x532e, 0xfc90, 0x8759, 0xa49b, 0xfd5f, 0x1, 0x1);
        gbc.writeMem(0x399, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x532e);
        EXPECT(gbc.pc(), 0x39a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 002E
        gbc.setState(0xa4b, 0x1d19, 0xd4b0, 0x1fe5, 0x5b50, 0xc6af, 0x0, 0x1);
        gbc.writeMem(0xa4b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1d19);
        EXPECT(gbc.pc(), 0xa4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 002F
        gbc.setState(0x10fc, 0xae1f, 0x84d0, 0xbcc4, 0xba40, 0x8072, 0x1, 0x0);
        gbc.writeMem(0x10fc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xae1f);
        EXPECT(gbc.pc(), 0x10fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0030
        gbc.setState(0xd0e3, 0x7931, 0x1e70, 0xef3b, 0xf034, 0x1aa9, 0x0, 0x0);
        gbc.writeMem(0xd0e3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7931);
        EXPECT(gbc.pc(), 0xd0e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0e3), 0xb1);
        // B1 0031
        gbc.setState(0xa8eb, 0x9725, 0xa530, 0x7740, 0x14e5, 0xe10b, 0x1, 0x1);
        gbc.writeMem(0xa8eb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9725);
        EXPECT(gbc.pc(), 0xa8ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8eb), 0xb1);
        // B1 0032
        gbc.setState(0xa85e, 0xd910, 0x1fd0, 0x2614, 0x7e31, 0x618d, 0x1, 0x1);
        gbc.writeMem(0xa85e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd910);
        EXPECT(gbc.pc(), 0xa85f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa85e), 0xb1);
        // B1 0033
        gbc.setState(0xdd6, 0xd3bd, 0xf1b0, 0x11e7, 0xcf9, 0xf3d4, 0x0, 0x1);
        gbc.writeMem(0xdd6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd3bd);
        EXPECT(gbc.pc(), 0xdd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0034
        gbc.setState(0xe15c, 0xe9c7, 0xc5b0, 0xfb1, 0x5db, 0x8643, 0x1, 0x0);
        gbc.writeMem(0xe15c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe9c7);
        EXPECT(gbc.pc(), 0xe15d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe15c), 0xb1);
        // B1 0035
        gbc.setState(0x7fd8, 0x3969, 0x9df0, 0x4e6b, 0xc4cc, 0x1491, 0x0, 0x1);
        gbc.writeMem(0x7fd8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3969);
        EXPECT(gbc.pc(), 0x7fd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0037
        gbc.setState(0xc264, 0x55d3, 0x1890, 0x96c2, 0xc2b5, 0x3c7, 0x0, 0x0);
        gbc.writeMem(0xc264, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x55d3);
        EXPECT(gbc.pc(), 0xc265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc264), 0xb1);
        // B1 0038
        gbc.setState(0x8858, 0xb092, 0xe5c0, 0xb1a9, 0xfe8d, 0x444a, 0x1, 0x0);
        gbc.writeMem(0x8858, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb092);
        EXPECT(gbc.pc(), 0x8859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8858), 0xb1);
        // B1 0039
        gbc.setState(0xc804, 0xabcd, 0x72b0, 0xecb5, 0xfde1, 0x41ec, 0x0, 0x1);
        gbc.writeMem(0xc804, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xabcd);
        EXPECT(gbc.pc(), 0xc805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc804), 0xb1);
        // B1 003A
        gbc.setState(0x91a9, 0x75c6, 0xa60, 0x3173, 0x2e9e, 0x53e2, 0x1, 0x0);
        gbc.writeMem(0x91a9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x75c6);
        EXPECT(gbc.pc(), 0x91aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a9), 0xb1);
        // B1 003B
        gbc.setState(0x3bfd, 0x36b0, 0x7fc0, 0x9039, 0xca74, 0x263b, 0x1, 0x0);
        gbc.writeMem(0x3bfd, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x36b0);
        EXPECT(gbc.pc(), 0x3bfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 003C
        gbc.setState(0x3cec, 0x5119, 0x2e0, 0xfb27, 0xa314, 0xec50, 0x0, 0x1);
        gbc.writeMem(0x3cec, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5119);
        EXPECT(gbc.pc(), 0x3ced);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 003D
        gbc.setState(0xcb6e, 0xe645, 0xaa90, 0xf935, 0x318f, 0xbac8, 0x1, 0x1);
        gbc.writeMem(0xcb6e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe645);
        EXPECT(gbc.pc(), 0xcb6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb6e), 0xb1);
        // B1 003E
        gbc.setState(0x4003, 0xa816, 0x75c0, 0x4a66, 0x1272, 0x91a2, 0x1, 0x0);
        gbc.writeMem(0x4003, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa816);
        EXPECT(gbc.pc(), 0x4004);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 003F
        gbc.setState(0xd69e, 0x83ed, 0x8600, 0x1d93, 0x76d5, 0x29f7, 0x0, 0x1);
        gbc.writeMem(0xd69e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x83ed);
        EXPECT(gbc.pc(), 0xd69f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69e), 0xb1);
        // B1 0040
        gbc.setState(0xeee5, 0x1a60, 0x1110, 0x66e7, 0x455c, 0x123e, 0x0, 0x1);
        gbc.writeMem(0xeee5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1a60);
        EXPECT(gbc.pc(), 0xeee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee5), 0xb1);
        // B1 0041
        gbc.setState(0x997, 0x1f05, 0xc710, 0x55d9, 0x9e68, 0x9c0a, 0x0, 0x0);
        gbc.writeMem(0x997, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1f05);
        EXPECT(gbc.pc(), 0x998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0042
        gbc.setState(0x2e5d, 0xef91, 0xd6b0, 0xee58, 0x19dc, 0xf358, 0x1, 0x1);
        gbc.writeMem(0x2e5d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xef91);
        EXPECT(gbc.pc(), 0x2e5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0044
        gbc.setState(0xd5a4, 0x25bc, 0x70c0, 0xa642, 0x98d8, 0x273e, 0x0, 0x0);
        gbc.writeMem(0xd5a4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x25bc);
        EXPECT(gbc.pc(), 0xd5a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a4), 0xb1);
        // B1 0046
        gbc.setState(0xc7b2, 0x688b, 0x3970, 0x14dd, 0xa07a, 0xae40, 0x1, 0x0);
        gbc.writeMem(0xc7b2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x688b);
        EXPECT(gbc.pc(), 0xc7b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b2), 0xb1);
        // B1 0047
        gbc.setState(0x1369, 0xd724, 0x8c10, 0xf849, 0xf91e, 0xefa7, 0x1, 0x1);
        gbc.writeMem(0x1369, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd724);
        EXPECT(gbc.pc(), 0x136a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0049
        gbc.setState(0xb457, 0x9ab6, 0x3990, 0x7890, 0x8c85, 0x2593, 0x1, 0x1);
        gbc.writeMem(0xb457, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9ab6);
        EXPECT(gbc.pc(), 0xb458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb457), 0xb1);
        // B1 004A
        gbc.setState(0x149b, 0x532, 0x24c0, 0x8d0a, 0x3561, 0x2783, 0x0, 0x0);
        gbc.writeMem(0x149b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x532);
        EXPECT(gbc.pc(), 0x149c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 004C
        gbc.setState(0xce7b, 0x6ef6, 0x89e0, 0x9625, 0x61cb, 0x9516, 0x1, 0x1);
        gbc.writeMem(0xce7b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6ef6);
        EXPECT(gbc.pc(), 0xce7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce7b), 0xb1);
        // B1 004D
        gbc.setState(0x45ef, 0x5c02, 0x9db0, 0x26db, 0x7b3a, 0x5473, 0x0, 0x0);
        gbc.writeMem(0x45ef, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5c02);
        EXPECT(gbc.pc(), 0x45f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 004F
        gbc.setState(0xb5f4, 0xdbcf, 0xd560, 0x57ac, 0x12f1, 0x3ecd, 0x1, 0x1);
        gbc.writeMem(0xb5f4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xdbcf);
        EXPECT(gbc.pc(), 0xb5f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5f4), 0xb1);
        // B1 0050
        gbc.setState(0x3280, 0x6843, 0x4680, 0x865d, 0x8a0b, 0x2e92, 0x1, 0x1);
        gbc.writeMem(0x3280, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6843);
        EXPECT(gbc.pc(), 0x3281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0051
        gbc.setState(0xeb32, 0xcf2, 0x9fc0, 0xb6f9, 0x3956, 0x23b5, 0x1, 0x1);
        gbc.writeMem(0xeb32, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xcf2);
        EXPECT(gbc.pc(), 0xeb33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb32), 0xb1);
        // B1 0053
        gbc.setState(0x7e22, 0x7d32, 0x6060, 0x4e0e, 0xbf44, 0xcab2, 0x1, 0x1);
        gbc.writeMem(0x7e22, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7d32);
        EXPECT(gbc.pc(), 0x7e23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0054
        gbc.setState(0x7474, 0xb3e3, 0xf870, 0x4014, 0x7c0c, 0x8e96, 0x0, 0x0);
        gbc.writeMem(0x7474, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb3e3);
        EXPECT(gbc.pc(), 0x7475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0055
        gbc.setState(0x1ed7, 0x9047, 0xcfa0, 0x12d5, 0x585a, 0xc2a, 0x1, 0x1);
        gbc.writeMem(0x1ed7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9047);
        EXPECT(gbc.pc(), 0x1ed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0056
        gbc.setState(0x488e, 0xdc12, 0x34a0, 0x12ba, 0x1a2a, 0xff0c, 0x0, 0x0);
        gbc.writeMem(0x488e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xdc12);
        EXPECT(gbc.pc(), 0x488f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0057
        gbc.setState(0xba87, 0x7766, 0x4020, 0x6d05, 0x4a54, 0xbc74, 0x1, 0x1);
        gbc.writeMem(0xba87, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7766);
        EXPECT(gbc.pc(), 0xba88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba87), 0xb1);
        // B1 0058
        gbc.setState(0xc7d7, 0x198b, 0xe7f0, 0xa2f2, 0xfa3a, 0xf172, 0x1, 0x1);
        gbc.writeMem(0xc7d7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x198b);
        EXPECT(gbc.pc(), 0xc7d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d7), 0xb1);
        // B1 0059
        gbc.setState(0x5178, 0xacf0, 0xfc60, 0xc69d, 0x4b0a, 0xe27f, 0x0, 0x0);
        gbc.writeMem(0x5178, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xacf0);
        EXPECT(gbc.pc(), 0x5179);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 005A
        gbc.setState(0xeea6, 0x3592, 0xce40, 0xaa7c, 0xe926, 0x138e, 0x0, 0x0);
        gbc.writeMem(0xeea6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3592);
        EXPECT(gbc.pc(), 0xeea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea6), 0xb1);
        // B1 005B
        gbc.setState(0x60b5, 0xa5ee, 0x3f60, 0x9975, 0x51c1, 0x6172, 0x0, 0x1);
        gbc.writeMem(0x60b5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa5ee);
        EXPECT(gbc.pc(), 0x60b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 005C
        gbc.setState(0x10de, 0x9934, 0x4a40, 0x9d4a, 0x179c, 0xd663, 0x0, 0x0);
        gbc.writeMem(0x10de, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9934);
        EXPECT(gbc.pc(), 0x10df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 005D
        gbc.setState(0xe06e, 0x60a1, 0x740, 0xbe7b, 0x802d, 0xda31, 0x1, 0x1);
        gbc.writeMem(0xe06e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x60a1);
        EXPECT(gbc.pc(), 0xe06f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe06e), 0xb1);
        // B1 005E
        gbc.setState(0xd562, 0x9022, 0x55d0, 0x5d31, 0x1670, 0x1852, 0x1, 0x0);
        gbc.writeMem(0xd562, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9022);
        EXPECT(gbc.pc(), 0xd563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd562), 0xb1);
        // B1 005F
        gbc.setState(0x456a, 0x43a, 0x87e0, 0x4859, 0xc9bc, 0x3d0a, 0x0, 0x1);
        gbc.writeMem(0x456a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x43a);
        EXPECT(gbc.pc(), 0x456b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0060
        gbc.setState(0x1c72, 0x3803, 0xb600, 0xf993, 0xf09a, 0xe318, 0x0, 0x1);
        gbc.writeMem(0x1c72, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3803);
        EXPECT(gbc.pc(), 0x1c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0061
        gbc.setState(0xa7e0, 0x7d78, 0x3fe0, 0xf104, 0x7cc3, 0xd504, 0x1, 0x0);
        gbc.writeMem(0xa7e0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7d78);
        EXPECT(gbc.pc(), 0xa7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e0), 0xb1);
        // B1 0062
        gbc.setState(0x2db6, 0x5663, 0x4790, 0x2201, 0xf48, 0xecbd, 0x1, 0x1);
        gbc.writeMem(0x2db6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5663);
        EXPECT(gbc.pc(), 0x2db7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0063
        gbc.setState(0x598, 0xf3d5, 0xb2c0, 0xd0e0, 0x3424, 0xc866, 0x1, 0x0);
        gbc.writeMem(0x598, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf3d5);
        EXPECT(gbc.pc(), 0x599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0064
        gbc.setState(0x856d, 0xfd7, 0x3cc0, 0xe14d, 0x95c3, 0x9691, 0x0, 0x0);
        gbc.writeMem(0x856d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xfd7);
        EXPECT(gbc.pc(), 0x856e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856d), 0xb1);
        // B1 0065
        gbc.setState(0x9c01, 0x3941, 0x84c0, 0xa36d, 0x73a0, 0x4b57, 0x0, 0x0);
        gbc.writeMem(0x9c01, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3941);
        EXPECT(gbc.pc(), 0x9c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c01), 0xb1);
        // B1 0066
        gbc.setState(0x7c13, 0xfa7c, 0xba30, 0xde27, 0x5f74, 0xb501, 0x1, 0x1);
        gbc.writeMem(0x7c13, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xfa7c);
        EXPECT(gbc.pc(), 0x7c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0067
        gbc.setState(0xe471, 0x6c35, 0x3830, 0xec29, 0x1d27, 0x2c16, 0x0, 0x1);
        gbc.writeMem(0xe471, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6c35);
        EXPECT(gbc.pc(), 0xe472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe471), 0xb1);
        // B1 0068
        gbc.setState(0x3a40, 0x7702, 0x9f40, 0x94b5, 0x1fea, 0xb816, 0x0, 0x1);
        gbc.writeMem(0x3a40, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7702);
        EXPECT(gbc.pc(), 0x3a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0069
        gbc.setState(0xd9fe, 0x127, 0xb840, 0xb214, 0xb7db, 0x6912, 0x1, 0x0);
        gbc.writeMem(0xd9fe, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x127);
        EXPECT(gbc.pc(), 0xd9ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fe), 0xb1);
        // B1 006A
        gbc.setState(0x19c6, 0x8eec, 0x3ad0, 0xe92a, 0x80dd, 0xf457, 0x0, 0x1);
        gbc.writeMem(0x19c6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8eec);
        EXPECT(gbc.pc(), 0x19c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 006B
        gbc.setState(0x30dc, 0xcef7, 0x7fa0, 0x49fc, 0x67b9, 0xa02f, 0x0, 0x0);
        gbc.writeMem(0x30dc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcef7);
        EXPECT(gbc.pc(), 0x30dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 006C
        gbc.setState(0x1b27, 0x809b, 0x16e0, 0xd2c5, 0x8495, 0x7509, 0x0, 0x1);
        gbc.writeMem(0x1b27, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x809b);
        EXPECT(gbc.pc(), 0x1b28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 006D
        gbc.setState(0xab2f, 0x36fe, 0x55f0, 0x5098, 0x1823, 0x860d, 0x0, 0x1);
        gbc.writeMem(0xab2f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x36fe);
        EXPECT(gbc.pc(), 0xab30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2f), 0xb1);
        // B1 006F
        gbc.setState(0xc102, 0xc64, 0xc1a0, 0xe7a6, 0x655e, 0x9e38, 0x0, 0x0);
        gbc.writeMem(0xc102, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xc64);
        EXPECT(gbc.pc(), 0xc103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc102), 0xb1);
        // B1 0070
        gbc.setState(0xe26, 0x5c4a, 0x3b20, 0xae84, 0xae58, 0xbe29, 0x0, 0x1);
        gbc.writeMem(0xe26, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5c4a);
        EXPECT(gbc.pc(), 0xe27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0071
        gbc.setState(0x7bd4, 0x560, 0x3ed0, 0x97f6, 0x8b69, 0xc7c, 0x1, 0x1);
        gbc.writeMem(0x7bd4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x560);
        EXPECT(gbc.pc(), 0x7bd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0072
        gbc.setState(0x1d17, 0x9001, 0xb2b0, 0x1cb, 0x28ec, 0x6699, 0x1, 0x0);
        gbc.writeMem(0x1d17, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9001);
        EXPECT(gbc.pc(), 0x1d18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0073
        gbc.setState(0x53eb, 0x8c46, 0x78e0, 0xd150, 0x410b, 0xe256, 0x1, 0x1);
        gbc.writeMem(0x53eb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8c46);
        EXPECT(gbc.pc(), 0x53ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0074
        gbc.setState(0x8241, 0xf289, 0xa560, 0xeacb, 0x9716, 0xe4e9, 0x1, 0x0);
        gbc.writeMem(0x8241, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf289);
        EXPECT(gbc.pc(), 0x8242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8241), 0xb1);
        // B1 0075
        gbc.setState(0x957c, 0x797f, 0xd940, 0xb965, 0xdcf0, 0xcce5, 0x1, 0x1);
        gbc.writeMem(0x957c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x797f);
        EXPECT(gbc.pc(), 0x957d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957c), 0xb1);
        // B1 0076
        gbc.setState(0x66b9, 0x3e5e, 0xeee0, 0xb1e0, 0xeea0, 0x4e61, 0x0, 0x0);
        gbc.writeMem(0x66b9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3e5e);
        EXPECT(gbc.pc(), 0x66ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0077
        gbc.setState(0x89d7, 0x644a, 0xbe30, 0xcb56, 0x2fcd, 0xe6bc, 0x0, 0x0);
        gbc.writeMem(0x89d7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x644a);
        EXPECT(gbc.pc(), 0x89d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d7), 0xb1);
        // B1 0078
        gbc.setState(0x78de, 0x721d, 0xd6d0, 0xaae7, 0xe5b9, 0xc014, 0x0, 0x1);
        gbc.writeMem(0x78de, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x721d);
        EXPECT(gbc.pc(), 0x78df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 007A
        gbc.setState(0xac5e, 0x34bf, 0xcd30, 0x564f, 0xf651, 0x628c, 0x1, 0x1);
        gbc.writeMem(0xac5e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x34bf);
        EXPECT(gbc.pc(), 0xac5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5e), 0xb1);
        // B1 007B
        gbc.setState(0x23c2, 0xc4f0, 0x4810, 0x230b, 0x7a8a, 0xf5a2, 0x0, 0x0);
        gbc.writeMem(0x23c2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc4f0);
        EXPECT(gbc.pc(), 0x23c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 007D
        gbc.setState(0xb796, 0xb65e, 0x9370, 0x322d, 0xc0fd, 0xe495, 0x0, 0x1);
        gbc.writeMem(0xb796, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb65e);
        EXPECT(gbc.pc(), 0xb797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb796), 0xb1);
        // B1 007E
        gbc.setState(0x150f, 0xe9bb, 0xa940, 0x5555, 0x2e2d, 0xe2bc, 0x0, 0x1);
        gbc.writeMem(0x150f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe9bb);
        EXPECT(gbc.pc(), 0x1510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 007F
        gbc.setState(0x8aa, 0x9539, 0x17e0, 0x583c, 0xf889, 0x71a5, 0x1, 0x1);
        gbc.writeMem(0x8aa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9539);
        EXPECT(gbc.pc(), 0x8ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0080
        gbc.setState(0xd96f, 0x6360, 0x7030, 0x1c84, 0x4329, 0x76a6, 0x1, 0x1);
        gbc.writeMem(0xd96f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6360);
        EXPECT(gbc.pc(), 0xd970);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd96f), 0xb1);
        // B1 0081
        gbc.setState(0xe0d8, 0x6e88, 0xaff0, 0x2388, 0x8506, 0xb09c, 0x1, 0x1);
        gbc.writeMem(0xe0d8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6e88);
        EXPECT(gbc.pc(), 0xe0d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d8), 0xb1);
        // B1 0082
        gbc.setState(0x3a09, 0x47a5, 0x5760, 0x7084, 0x3f88, 0x1e05, 0x0, 0x0);
        gbc.writeMem(0x3a09, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x47a5);
        EXPECT(gbc.pc(), 0x3a0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0083
        gbc.setState(0x4a6d, 0xe00b, 0x6a40, 0x9fe3, 0xdfa0, 0x4e17, 0x1, 0x0);
        gbc.writeMem(0x4a6d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe00b);
        EXPECT(gbc.pc(), 0x4a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0084
        gbc.setState(0xa6, 0xe394, 0x49c0, 0x3bb4, 0xdc17, 0x43e7, 0x1, 0x1);
        gbc.writeMem(0xa6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe394);
        EXPECT(gbc.pc(), 0xa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0085
        gbc.setState(0x7a52, 0xa3ba, 0xaa30, 0x3ef3, 0x6718, 0x67b9, 0x1, 0x0);
        gbc.writeMem(0x7a52, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa3ba);
        EXPECT(gbc.pc(), 0x7a53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0086
        gbc.setState(0xe7f5, 0xba66, 0x4230, 0xe010, 0xa2c0, 0x4d2c, 0x1, 0x0);
        gbc.writeMem(0xe7f5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xba66);
        EXPECT(gbc.pc(), 0xe7f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f5), 0xb1);
        // B1 0087
        gbc.setState(0xce3d, 0xa602, 0xdba0, 0x63e0, 0xf289, 0xf6e3, 0x1, 0x1);
        gbc.writeMem(0xce3d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa602);
        EXPECT(gbc.pc(), 0xce3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce3d), 0xb1);
        // B1 0088
        gbc.setState(0x5a11, 0xcccd, 0x7d80, 0xb0e8, 0xfef1, 0x9359, 0x0, 0x1);
        gbc.writeMem(0x5a11, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xcccd);
        EXPECT(gbc.pc(), 0x5a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0089
        gbc.setState(0xcd54, 0x7251, 0xde50, 0x789f, 0x3e52, 0xe74e, 0x0, 0x1);
        gbc.writeMem(0xcd54, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7251);
        EXPECT(gbc.pc(), 0xcd55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd54), 0xb1);
        // B1 008A
        gbc.setState(0xdac0, 0x5648, 0x4990, 0x7ade, 0x3276, 0x6d84, 0x1, 0x0);
        gbc.writeMem(0xdac0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5648);
        EXPECT(gbc.pc(), 0xdac1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac0), 0xb1);
        // B1 008B
        gbc.setState(0x9736, 0xfd73, 0xc80, 0x47e7, 0xbb89, 0x8ce5, 0x0, 0x1);
        gbc.writeMem(0x9736, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xfd73);
        EXPECT(gbc.pc(), 0x9737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9736), 0xb1);
        // B1 008C
        gbc.setState(0x82ea, 0xb7cd, 0x2ec0, 0x1b48, 0x741f, 0x3c99, 0x0, 0x1);
        gbc.writeMem(0x82ea, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb7cd);
        EXPECT(gbc.pc(), 0x82eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82ea), 0xb1);
        // B1 008D
        gbc.setState(0x1204, 0x7fea, 0x27f0, 0xe5e9, 0xc42a, 0xff6b, 0x0, 0x1);
        gbc.writeMem(0x1204, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7fea);
        EXPECT(gbc.pc(), 0x1205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 008E
        gbc.setState(0x9acb, 0xb3d3, 0x5c00, 0x8af7, 0xf1e, 0xb540, 0x1, 0x1);
        gbc.writeMem(0x9acb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb3d3);
        EXPECT(gbc.pc(), 0x9acc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9acb), 0xb1);
        // B1 008F
        gbc.setState(0x8d, 0x55ac, 0x51b0, 0xd5d1, 0x2f30, 0xea8b, 0x1, 0x1);
        gbc.writeMem(0x8d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x55ac);
        EXPECT(gbc.pc(), 0x8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0090
        gbc.setState(0xc9e8, 0xe85d, 0xfe30, 0xb69c, 0x9027, 0x10ba, 0x1, 0x1);
        gbc.writeMem(0xc9e8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe85d);
        EXPECT(gbc.pc(), 0xc9e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e8), 0xb1);
        // B1 0091
        gbc.setState(0xc16, 0xf6b4, 0x3e40, 0xb652, 0x6063, 0xaa56, 0x1, 0x0);
        gbc.writeMem(0xc16, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf6b4);
        EXPECT(gbc.pc(), 0xc17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0092
        gbc.setState(0x3d0a, 0x13fe, 0xdaa0, 0x1540, 0xcffd, 0x64b2, 0x0, 0x1);
        gbc.writeMem(0x3d0a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x13fe);
        EXPECT(gbc.pc(), 0x3d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0093
        gbc.setState(0x77e5, 0x62db, 0x2a0, 0xb490, 0x5f8f, 0x40fb, 0x1, 0x0);
        gbc.writeMem(0x77e5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x62db);
        EXPECT(gbc.pc(), 0x77e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0094
        gbc.setState(0x81dc, 0x36cd, 0xcf10, 0x8685, 0x79c3, 0x15b9, 0x0, 0x0);
        gbc.writeMem(0x81dc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x36cd);
        EXPECT(gbc.pc(), 0x81dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81dc), 0xb1);
        // B1 0095
        gbc.setState(0x73ab, 0x1ef8, 0xbcc0, 0x6f8e, 0x3e9, 0xe2a, 0x1, 0x0);
        gbc.writeMem(0x73ab, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1ef8);
        EXPECT(gbc.pc(), 0x73ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0096
        gbc.setState(0xf9, 0xc2b4, 0xbca0, 0x7bd6, 0xefc8, 0x20f5, 0x0, 0x0);
        gbc.writeMem(0xf9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc2b4);
        EXPECT(gbc.pc(), 0xfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0097
        gbc.setState(0x51b6, 0xf75d, 0x3510, 0x2e52, 0xdfe0, 0x9b16, 0x0, 0x0);
        gbc.writeMem(0x51b6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf75d);
        EXPECT(gbc.pc(), 0x51b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0098
        gbc.setState(0x4631, 0x59de, 0x2200, 0xbf8, 0x7d04, 0x76cf, 0x1, 0x1);
        gbc.writeMem(0x4631, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x59de);
        EXPECT(gbc.pc(), 0x4632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0099
        gbc.setState(0x6611, 0x4070, 0x4180, 0xc86e, 0x548a, 0x2fcd, 0x1, 0x0);
        gbc.writeMem(0x6611, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4070);
        EXPECT(gbc.pc(), 0x6612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 009A
        gbc.setState(0x9e35, 0x99f7, 0x2d0, 0xebf6, 0xac86, 0x819c, 0x0, 0x0);
        gbc.writeMem(0x9e35, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x99f7);
        EXPECT(gbc.pc(), 0x9e36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e35), 0xb1);
        // B1 009B
        gbc.setState(0x8a5a, 0x8bfb, 0x6360, 0xaa3e, 0xe1ff, 0xfb92, 0x0, 0x0);
        gbc.writeMem(0x8a5a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8bfb);
        EXPECT(gbc.pc(), 0x8a5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a5a), 0xb1);
        // B1 009C
        gbc.setState(0x9008, 0x5a26, 0xff80, 0x440c, 0x5879, 0xc9d, 0x0, 0x1);
        gbc.writeMem(0x9008, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5a26);
        EXPECT(gbc.pc(), 0x9009);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9008), 0xb1);
        // B1 009D
        gbc.setState(0x8a65, 0xf7d8, 0x1bb0, 0xfbf0, 0x6fe7, 0xe1b, 0x0, 0x0);
        gbc.writeMem(0x8a65, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf7d8);
        EXPECT(gbc.pc(), 0x8a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a65), 0xb1);
        // B1 009E
        gbc.setState(0x3bcb, 0xe967, 0xec60, 0x286f, 0xdaac, 0x644c, 0x0, 0x1);
        gbc.writeMem(0x3bcb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe967);
        EXPECT(gbc.pc(), 0x3bcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 009F
        gbc.setState(0xcc4f, 0xb260, 0xf660, 0x5dc0, 0xf212, 0xcfb, 0x1, 0x0);
        gbc.writeMem(0xcc4f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb260);
        EXPECT(gbc.pc(), 0xcc50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc4f), 0xb1);
        // B1 00A0
        gbc.setState(0xab44, 0xc579, 0xb7e0, 0x9c28, 0xfef8, 0x4b17, 0x0, 0x1);
        gbc.writeMem(0xab44, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc579);
        EXPECT(gbc.pc(), 0xab45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab44), 0xb1);
        // B1 00A1
        gbc.setState(0xa2ce, 0x1153, 0x18f0, 0x913a, 0xc9c, 0xc325, 0x0, 0x0);
        gbc.writeMem(0xa2ce, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1153);
        EXPECT(gbc.pc(), 0xa2cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2ce), 0xb1);
        // B1 00A2
        gbc.setState(0x5cd1, 0x46ba, 0xef60, 0x67a4, 0xd137, 0x7f5e, 0x1, 0x0);
        gbc.writeMem(0x5cd1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x46ba);
        EXPECT(gbc.pc(), 0x5cd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00A3
        gbc.setState(0x65f9, 0x64f0, 0x13d0, 0xd1e2, 0xff69, 0x2b74, 0x1, 0x0);
        gbc.writeMem(0x65f9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x64f0);
        EXPECT(gbc.pc(), 0x65fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00A4
        gbc.setState(0x4133, 0xa585, 0x9090, 0xccd6, 0xbaf9, 0xa317, 0x1, 0x1);
        gbc.writeMem(0x4133, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa585);
        EXPECT(gbc.pc(), 0x4134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00A5
        gbc.setState(0xf0a, 0x97e, 0x8e0, 0xd4cb, 0xb411, 0x24a, 0x0, 0x0);
        gbc.writeMem(0xf0a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x97e);
        EXPECT(gbc.pc(), 0xf0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00A6
        gbc.setState(0x77fb, 0x6c6, 0x9f70, 0x4c36, 0xf23f, 0xdc4a, 0x0, 0x0);
        gbc.writeMem(0x77fb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6c6);
        EXPECT(gbc.pc(), 0x77fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00A7
        gbc.setState(0xed97, 0x8d0c, 0x1630, 0x77aa, 0x539b, 0x2662, 0x0, 0x1);
        gbc.writeMem(0xed97, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8d0c);
        EXPECT(gbc.pc(), 0xed98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed97), 0xb1);
        // B1 00A8
        gbc.setState(0xe019, 0x105d, 0x8b20, 0x17b9, 0x9fe9, 0x541a, 0x1, 0x0);
        gbc.writeMem(0xe019, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x105d);
        EXPECT(gbc.pc(), 0xe01a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe019), 0xb1);
        // B1 00A9
        gbc.setState(0x26d0, 0xbfa9, 0x1ce0, 0x1c74, 0xc22b, 0x6269, 0x0, 0x1);
        gbc.writeMem(0x26d0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbfa9);
        EXPECT(gbc.pc(), 0x26d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00AA
        gbc.setState(0xcf19, 0xaad4, 0xea30, 0x9ac6, 0x2dc6, 0x5110, 0x0, 0x1);
        gbc.writeMem(0xcf19, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xaad4);
        EXPECT(gbc.pc(), 0xcf1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf19), 0xb1);
        // B1 00AB
        gbc.setState(0x1b3d, 0x7f63, 0x23c0, 0xc03f, 0x8b89, 0x94fa, 0x0, 0x1);
        gbc.writeMem(0x1b3d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7f63);
        EXPECT(gbc.pc(), 0x1b3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00AC
        gbc.setState(0xcd01, 0x279a, 0x2a10, 0x6cb8, 0x5465, 0xf1e8, 0x0, 0x0);
        gbc.writeMem(0xcd01, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x279a);
        EXPECT(gbc.pc(), 0xcd02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd01), 0xb1);
        // B1 00AD
        gbc.setState(0xd35c, 0xb2, 0x97e0, 0x458a, 0x674e, 0xa785, 0x0, 0x1);
        gbc.writeMem(0xd35c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb2);
        EXPECT(gbc.pc(), 0xd35d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd35c), 0xb1);
        // B1 00AE
        gbc.setState(0xbf82, 0xc9cf, 0xd3b0, 0x714e, 0xcd32, 0x7d7f, 0x0, 0x0);
        gbc.writeMem(0xbf82, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc9cf);
        EXPECT(gbc.pc(), 0xbf83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf82), 0xb1);
        // B1 00AF
        gbc.setState(0x7999, 0xb61a, 0x6e50, 0xe5ed, 0xbd36, 0x2c81, 0x1, 0x1);
        gbc.writeMem(0x7999, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb61a);
        EXPECT(gbc.pc(), 0x799a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00B1
        gbc.setState(0xaad5, 0x641c, 0x1280, 0x2d89, 0xbb6f, 0x6909, 0x0, 0x0);
        gbc.writeMem(0xaad5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x641c);
        EXPECT(gbc.pc(), 0xaad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad5), 0xb1);
        // B1 00B2
        gbc.setState(0x242b, 0xb237, 0xbb60, 0xfb49, 0x44c3, 0xc708, 0x0, 0x1);
        gbc.writeMem(0x242b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb237);
        EXPECT(gbc.pc(), 0x242c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00B3
        gbc.setState(0x13b0, 0x51a6, 0xe320, 0xf92f, 0x5bc1, 0x1734, 0x0, 0x1);
        gbc.writeMem(0x13b0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x51a6);
        EXPECT(gbc.pc(), 0x13b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00B4
        gbc.setState(0x2d91, 0xe872, 0x2b00, 0xbf7b, 0xb1bf, 0x1460, 0x0, 0x0);
        gbc.writeMem(0x2d91, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe872);
        EXPECT(gbc.pc(), 0x2d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00B5
        gbc.setState(0xa972, 0xfded, 0xcdd0, 0xfe54, 0xe2cf, 0x4dd5, 0x1, 0x0);
        gbc.writeMem(0xa972, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xfded);
        EXPECT(gbc.pc(), 0xa973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa972), 0xb1);
        // B1 00B6
        gbc.setState(0x5e1d, 0xb2f4, 0x4a90, 0xe34a, 0x4b3b, 0x7c14, 0x1, 0x1);
        gbc.writeMem(0x5e1d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb2f4);
        EXPECT(gbc.pc(), 0x5e1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00B7
        gbc.setState(0x2b, 0xda26, 0xbde0, 0xfb89, 0xe945, 0xa7dd, 0x1, 0x1);
        gbc.writeMem(0x2b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xda26);
        EXPECT(gbc.pc(), 0x2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00B8
        gbc.setState(0x12a, 0x83fa, 0x3800, 0x7ed6, 0xaf8a, 0x232d, 0x0, 0x0);
        gbc.writeMem(0x12a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x83fa);
        EXPECT(gbc.pc(), 0x12b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00B9
        gbc.setState(0xcf63, 0xbf82, 0x710, 0xfd55, 0x1fd5, 0x4d72, 0x1, 0x0);
        gbc.writeMem(0xcf63, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xbf82);
        EXPECT(gbc.pc(), 0xcf64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf63), 0xb1);
        // B1 00BB
        gbc.setState(0x2f6f, 0xd451, 0x1fa0, 0x9e07, 0x9246, 0xc0df, 0x0, 0x1);
        gbc.writeMem(0x2f6f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd451);
        EXPECT(gbc.pc(), 0x2f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00BC
        gbc.setState(0xe41a, 0xc199, 0x83f0, 0x5cdb, 0xf26, 0x5999, 0x1, 0x0);
        gbc.writeMem(0xe41a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc199);
        EXPECT(gbc.pc(), 0xe41b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe41a), 0xb1);
        // B1 00BD
        gbc.setState(0xc830, 0x43ce, 0x44a0, 0x4ba7, 0xf673, 0xd01a, 0x1, 0x1);
        gbc.writeMem(0xc830, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x43ce);
        EXPECT(gbc.pc(), 0xc831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc830), 0xb1);
        // B1 00BE
        gbc.setState(0x5c0, 0xdc75, 0xf010, 0x41b9, 0x14af, 0x5f0a, 0x1, 0x1);
        gbc.writeMem(0x5c0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xdc75);
        EXPECT(gbc.pc(), 0x5c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00BF
        gbc.setState(0x96f2, 0x952d, 0x4510, 0x3d98, 0xa8db, 0xcdec, 0x1, 0x0);
        gbc.writeMem(0x96f2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x952d);
        EXPECT(gbc.pc(), 0x96f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f2), 0xb1);
        // B1 00C0
        gbc.setState(0x4b85, 0xe070, 0x8030, 0x5741, 0xfccd, 0x64a1, 0x0, 0x1);
        gbc.writeMem(0x4b85, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe070);
        EXPECT(gbc.pc(), 0x4b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00C2
        gbc.setState(0x672e, 0x77de, 0x5240, 0x1d01, 0x2c79, 0x8cec, 0x1, 0x1);
        gbc.writeMem(0x672e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x77de);
        EXPECT(gbc.pc(), 0x672f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00C3
        gbc.setState(0x54b6, 0xdc6a, 0xbf80, 0x54d2, 0x4311, 0x8278, 0x0, 0x0);
        gbc.writeMem(0x54b6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xdc6a);
        EXPECT(gbc.pc(), 0x54b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00C4
        gbc.setState(0x306e, 0xa4d6, 0x58d0, 0xe25d, 0x3438, 0x30eb, 0x1, 0x1);
        gbc.writeMem(0x306e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa4d6);
        EXPECT(gbc.pc(), 0x306f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00C5
        gbc.setState(0x7c58, 0xebac, 0x50e0, 0x338b, 0x3546, 0xcf06, 0x0, 0x0);
        gbc.writeMem(0x7c58, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xebac);
        EXPECT(gbc.pc(), 0x7c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00C6
        gbc.setState(0xc319, 0x5bff, 0x49b0, 0xad78, 0xeeea, 0x9ff1, 0x0, 0x0);
        gbc.writeMem(0xc319, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5bff);
        EXPECT(gbc.pc(), 0xc31a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc319), 0xb1);
        // B1 00C7
        gbc.setState(0xaede, 0xa94c, 0xdfa0, 0xb578, 0xe1c2, 0xefc3, 0x1, 0x0);
        gbc.writeMem(0xaede, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa94c);
        EXPECT(gbc.pc(), 0xaedf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaede), 0xb1);
        // B1 00C8
        gbc.setState(0xc125, 0x3577, 0x51a0, 0x4c4, 0xa10b, 0x931f, 0x1, 0x1);
        gbc.writeMem(0xc125, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3577);
        EXPECT(gbc.pc(), 0xc126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc125), 0xb1);
        // B1 00C9
        gbc.setState(0xd958, 0xf984, 0x7590, 0xb2b0, 0x9834, 0x72e8, 0x0, 0x1);
        gbc.writeMem(0xd958, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf984);
        EXPECT(gbc.pc(), 0xd959);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd958), 0xb1);
        // B1 00CA
        gbc.setState(0x44dc, 0x8eb5, 0xaac0, 0xac3f, 0xf91c, 0xa5e3, 0x1, 0x1);
        gbc.writeMem(0x44dc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8eb5);
        EXPECT(gbc.pc(), 0x44dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00CB
        gbc.setState(0xcf5a, 0x6d10, 0x4c20, 0xc8d0, 0xcf15, 0xd51d, 0x0, 0x1);
        gbc.writeMem(0xcf5a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6d10);
        EXPECT(gbc.pc(), 0xcf5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf5a), 0xb1);
        // B1 00CC
        gbc.setState(0x471d, 0xbca3, 0x3070, 0x2d01, 0x15b9, 0xde50, 0x1, 0x1);
        gbc.writeMem(0x471d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbca3);
        EXPECT(gbc.pc(), 0x471e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00CD
        gbc.setState(0xd577, 0x66e6, 0xa190, 0xeb8c, 0xfad, 0x19d3, 0x0, 0x0);
        gbc.writeMem(0xd577, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x66e6);
        EXPECT(gbc.pc(), 0xd578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd577), 0xb1);
        // B1 00CE
        gbc.setState(0x324c, 0xd6fb, 0x9870, 0x9bac, 0xcb59, 0x9b, 0x0, 0x0);
        gbc.writeMem(0x324c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd6fb);
        EXPECT(gbc.pc(), 0x324d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00CF
        gbc.setState(0x49cb, 0xe357, 0x7760, 0x32e2, 0x158d, 0x8973, 0x1, 0x1);
        gbc.writeMem(0x49cb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe357);
        EXPECT(gbc.pc(), 0x49cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00D0
        gbc.setState(0x7de0, 0xccaa, 0x5200, 0x11ea, 0xdef1, 0x3236, 0x1, 0x1);
        gbc.writeMem(0x7de0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xccaa);
        EXPECT(gbc.pc(), 0x7de1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00D1
        gbc.setState(0x8ee, 0x578c, 0x22c0, 0x2a36, 0x2880, 0xcc59, 0x1, 0x1);
        gbc.writeMem(0x8ee, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x578c);
        EXPECT(gbc.pc(), 0x8ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00D2
        gbc.setState(0x23f2, 0xd1, 0xbe70, 0xb1f0, 0xc988, 0x15f0, 0x1, 0x0);
        gbc.writeMem(0x23f2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd1);
        EXPECT(gbc.pc(), 0x23f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00D3
        gbc.setState(0x74da, 0x49c4, 0xecb0, 0x413, 0x2d72, 0x3cfa, 0x1, 0x1);
        gbc.writeMem(0x74da, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x49c4);
        EXPECT(gbc.pc(), 0x74db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00D4
        gbc.setState(0xb724, 0x64e3, 0xdac0, 0x97ae, 0x2d1, 0xc940, 0x0, 0x0);
        gbc.writeMem(0xb724, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x64e3);
        EXPECT(gbc.pc(), 0xb725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb724), 0xb1);
        // B1 00D5
        gbc.setState(0x1429, 0x2352, 0xec80, 0xaddb, 0x6d2a, 0x3e3b, 0x0, 0x0);
        gbc.writeMem(0x1429, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2352);
        EXPECT(gbc.pc(), 0x142a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00D6
        gbc.setState(0x5311, 0x229e, 0x2b40, 0xab11, 0x4caf, 0x9115, 0x1, 0x1);
        gbc.writeMem(0x5311, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x229e);
        EXPECT(gbc.pc(), 0x5312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00D7
        gbc.setState(0x40df, 0x507a, 0xf7b0, 0xc896, 0x55b6, 0x3392, 0x1, 0x0);
        gbc.writeMem(0x40df, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x507a);
        EXPECT(gbc.pc(), 0x40e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00D8
        gbc.setState(0x819a, 0x7c40, 0x6bd0, 0xf511, 0xa7b9, 0x4d03, 0x0, 0x0);
        gbc.writeMem(0x819a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7c40);
        EXPECT(gbc.pc(), 0x819b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x819a), 0xb1);
        // B1 00D9
        gbc.setState(0x7605, 0xa1fa, 0x4570, 0xd8c3, 0x8205, 0xcf8d, 0x0, 0x0);
        gbc.writeMem(0x7605, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa1fa);
        EXPECT(gbc.pc(), 0x7606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00DA
        gbc.setState(0x8300, 0xaaf0, 0x3d10, 0x9100, 0xc28d, 0xd5bf, 0x1, 0x0);
        gbc.writeMem(0x8300, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xaaf0);
        EXPECT(gbc.pc(), 0x8301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8300), 0xb1);
        // B1 00DB
        gbc.setState(0xb4e3, 0x68bd, 0x9380, 0x4a27, 0x8495, 0xe8be, 0x0, 0x1);
        gbc.writeMem(0xb4e3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x68bd);
        EXPECT(gbc.pc(), 0xb4e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e3), 0xb1);
        // B1 00DC
        gbc.setState(0x7a7b, 0xf5ef, 0x6e30, 0xf4dc, 0x3eee, 0x7c3c, 0x0, 0x1);
        gbc.writeMem(0x7a7b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xf5ef);
        EXPECT(gbc.pc(), 0x7a7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00DD
        gbc.setState(0xa66, 0xa346, 0xf3c0, 0x5f84, 0x5397, 0xb4f2, 0x0, 0x0);
        gbc.writeMem(0xa66, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xa346);
        EXPECT(gbc.pc(), 0xa67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00DE
        gbc.setState(0xc513, 0x82fd, 0x9a00, 0x5c55, 0x555c, 0xea4a, 0x0, 0x0);
        gbc.writeMem(0xc513, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x82fd);
        EXPECT(gbc.pc(), 0xc514);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc513), 0xb1);
        // B1 00E0
        gbc.setState(0x1921, 0xec59, 0x8130, 0x31e4, 0x3fbb, 0xd445, 0x0, 0x1);
        gbc.writeMem(0x1921, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xec59);
        EXPECT(gbc.pc(), 0x1922);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00E1
        gbc.setState(0x5a3d, 0xcff3, 0xf760, 0x8038, 0x4302, 0x20bb, 0x1, 0x0);
        gbc.writeMem(0x5a3d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xcff3);
        EXPECT(gbc.pc(), 0x5a3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00E2
        gbc.setState(0x45bc, 0xcb40, 0x2780, 0xd3c1, 0xfd71, 0x183, 0x1, 0x1);
        gbc.writeMem(0x45bc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xcb40);
        EXPECT(gbc.pc(), 0x45bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00E3
        gbc.setState(0x9182, 0x90b, 0x5430, 0xbbaf, 0xdeab, 0x2712, 0x0, 0x0);
        gbc.writeMem(0x9182, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x90b);
        EXPECT(gbc.pc(), 0x9183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9182), 0xb1);
        // B1 00E5
        gbc.setState(0xd77a, 0xc152, 0xec90, 0x6305, 0x339, 0xc285, 0x1, 0x1);
        gbc.writeMem(0xd77a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc152);
        EXPECT(gbc.pc(), 0xd77b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd77a), 0xb1);
        // B1 00E6
        gbc.setState(0xdbd6, 0x338d, 0x2210, 0xea7e, 0xca47, 0xddbc, 0x0, 0x1);
        gbc.writeMem(0xdbd6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x338d);
        EXPECT(gbc.pc(), 0xdbd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd6), 0xb1);
        // B1 00E7
        gbc.setState(0xc9e5, 0x829b, 0x9d20, 0x5520, 0x9f9d, 0xe77b, 0x1, 0x0);
        gbc.writeMem(0xc9e5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x829b);
        EXPECT(gbc.pc(), 0xc9e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e5), 0xb1);
        // B1 00E8
        gbc.setState(0xedf6, 0x84d4, 0xab20, 0x540a, 0x32ed, 0xe5ab, 0x0, 0x1);
        gbc.writeMem(0xedf6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x84d4);
        EXPECT(gbc.pc(), 0xedf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf6), 0xb1);
        // B1 00E9
        gbc.setState(0xd820, 0x415f, 0xb6c0, 0xc72a, 0x89da, 0x4e30, 0x0, 0x0);
        gbc.writeMem(0xd820, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x415f);
        EXPECT(gbc.pc(), 0xd821);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd820), 0xb1);
        // B1 00EA
        gbc.setState(0x41f6, 0xfedd, 0x7360, 0xe173, 0x97bb, 0x4779, 0x1, 0x0);
        gbc.writeMem(0x41f6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xfedd);
        EXPECT(gbc.pc(), 0x41f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00EB
        gbc.setState(0xd436, 0x55bc, 0x4360, 0x898f, 0xf214, 0x1e3e, 0x1, 0x0);
        gbc.writeMem(0xd436, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x55bc);
        EXPECT(gbc.pc(), 0xd437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd436), 0xb1);
        // B1 00EC
        gbc.setState(0x287a, 0xbabd, 0xb130, 0x34f4, 0xd65, 0x9987, 0x1, 0x1);
        gbc.writeMem(0x287a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xbabd);
        EXPECT(gbc.pc(), 0x287b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00ED
        gbc.setState(0x2aeb, 0x1400, 0x2a50, 0x92b0, 0xc76d, 0xea9b, 0x1, 0x0);
        gbc.writeMem(0x2aeb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1400);
        EXPECT(gbc.pc(), 0x2aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00EE
        gbc.setState(0x4dc3, 0x3a7e, 0x5e80, 0x7f7c, 0x2783, 0xa8d8, 0x0, 0x1);
        gbc.writeMem(0x4dc3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3a7e);
        EXPECT(gbc.pc(), 0x4dc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00EF
        gbc.setState(0x9e2a, 0x1d7d, 0xdb0, 0x4a76, 0xb22b, 0x6142, 0x0, 0x1);
        gbc.writeMem(0x9e2a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1d7d);
        EXPECT(gbc.pc(), 0x9e2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e2a), 0xb1);
        // B1 00F0
        gbc.setState(0x605a, 0x57c7, 0x80, 0xe461, 0xe53a, 0x6997, 0x1, 0x1);
        gbc.writeMem(0x605a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x57c7);
        EXPECT(gbc.pc(), 0x605b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00F1
        gbc.setState(0x18a4, 0x2856, 0xbf30, 0x525a, 0x3afd, 0xfb4e, 0x0, 0x1);
        gbc.writeMem(0x18a4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2856);
        EXPECT(gbc.pc(), 0x18a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00F2
        gbc.setState(0xc356, 0x85ff, 0x61f0, 0x7f54, 0x3d16, 0xe60c, 0x0, 0x1);
        gbc.writeMem(0xc356, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x85ff);
        EXPECT(gbc.pc(), 0xc357);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc356), 0xb1);
        // B1 00F3
        gbc.setState(0x1c, 0xb7f5, 0x6870, 0x2e78, 0x7cfa, 0xd769, 0x0, 0x1);
        gbc.writeMem(0x1c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb7f5);
        EXPECT(gbc.pc(), 0x1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00F4
        gbc.setState(0x93dd, 0x3248, 0xfb60, 0xafee, 0xe0e5, 0x8a1c, 0x1, 0x0);
        gbc.writeMem(0x93dd, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3248);
        EXPECT(gbc.pc(), 0x93de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93dd), 0xb1);
        // B1 00F5
        gbc.setState(0x5ec0, 0x480b, 0x4070, 0xd9f3, 0xb80b, 0x54fa, 0x1, 0x1);
        gbc.writeMem(0x5ec0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x480b);
        EXPECT(gbc.pc(), 0x5ec1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00F6
        gbc.setState(0xe469, 0xef91, 0x27b0, 0x10ef, 0xc125, 0x4338, 0x1, 0x1);
        gbc.writeMem(0xe469, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xef91);
        EXPECT(gbc.pc(), 0xe46a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe469), 0xb1);
        // B1 00F7
        gbc.setState(0xc758, 0x60e4, 0x7df0, 0xdc62, 0xfd9d, 0x4952, 0x1, 0x0);
        gbc.writeMem(0xc758, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x60e4);
        EXPECT(gbc.pc(), 0xc759);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc758), 0xb1);
        // B1 00F8
        gbc.setState(0x5f9d, 0xb3a3, 0x7130, 0x8d24, 0x6f3e, 0x393, 0x0, 0x0);
        gbc.writeMem(0x5f9d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb3a3);
        EXPECT(gbc.pc(), 0x5f9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00F9
        gbc.setState(0xd36b, 0xa49b, 0x70b0, 0xfa89, 0x9bf, 0x6bf3, 0x0, 0x1);
        gbc.writeMem(0xd36b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa49b);
        EXPECT(gbc.pc(), 0xd36c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd36b), 0xb1);
        // B1 00FA
        gbc.setState(0x4ff8, 0xe5d3, 0x1570, 0xfb00, 0x96fd, 0x2b25, 0x0, 0x1);
        gbc.writeMem(0x4ff8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe5d3);
        EXPECT(gbc.pc(), 0x4ff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00FB
        gbc.setState(0x8a9f, 0x4517, 0xa080, 0x9eee, 0xdba5, 0xf9a7, 0x1, 0x0);
        gbc.writeMem(0x8a9f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4517);
        EXPECT(gbc.pc(), 0x8aa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a9f), 0xb1);
        // B1 00FC
        gbc.setState(0xa0a2, 0x57a5, 0x64d0, 0x878c, 0xc960, 0x5a5, 0x1, 0x1);
        gbc.writeMem(0xa0a2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x57a5);
        EXPECT(gbc.pc(), 0xa0a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0a2), 0xb1);
        // B1 00FD
        gbc.setState(0x52f9, 0x5951, 0x3050, 0xe878, 0x8e62, 0xe1bf, 0x1, 0x0);
        gbc.writeMem(0x52f9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5951);
        EXPECT(gbc.pc(), 0x52fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 00FE
        gbc.setState(0xe9e7, 0xd3fe, 0x4b80, 0x71c5, 0x4136, 0x2093, 0x1, 0x1);
        gbc.writeMem(0xe9e7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd3fe);
        EXPECT(gbc.pc(), 0xe9e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9e7), 0xb1);
        // B1 00FF
        gbc.setState(0x71d5, 0x6c19, 0x4600, 0xca5e, 0xbb40, 0xc15c, 0x0, 0x0);
        gbc.writeMem(0x71d5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6c19);
        EXPECT(gbc.pc(), 0x71d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0100
        gbc.setState(0x1bbb, 0x5e79, 0xf3e0, 0x874d, 0x6783, 0xe837, 0x1, 0x0);
        gbc.writeMem(0x1bbb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5e79);
        EXPECT(gbc.pc(), 0x1bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0101
        gbc.setState(0x9fd7, 0x93b2, 0x5930, 0x968d, 0x9b90, 0xd55e, 0x0, 0x1);
        gbc.writeMem(0x9fd7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x93b2);
        EXPECT(gbc.pc(), 0x9fd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fd7), 0xb1);
        // B1 0102
        gbc.setState(0x7692, 0x8d1, 0x1e10, 0x202, 0xd7d2, 0xe952, 0x0, 0x1);
        gbc.writeMem(0x7692, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8d1);
        EXPECT(gbc.pc(), 0x7693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0103
        gbc.setState(0x343d, 0x8e03, 0x17c0, 0xb6d2, 0x9472, 0xa802, 0x1, 0x0);
        gbc.writeMem(0x343d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8e03);
        EXPECT(gbc.pc(), 0x343e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0104
        gbc.setState(0xb019, 0xc38e, 0x7a70, 0xa40, 0xdc56, 0xb324, 0x0, 0x0);
        gbc.writeMem(0xb019, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc38e);
        EXPECT(gbc.pc(), 0xb01a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb019), 0xb1);
        // B1 0106
        gbc.setState(0x4e46, 0x8bd7, 0xa150, 0x64f2, 0x7bbf, 0xe559, 0x1, 0x0);
        gbc.writeMem(0x4e46, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8bd7);
        EXPECT(gbc.pc(), 0x4e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0107
        gbc.setState(0xc950, 0x8ab6, 0x3120, 0xc141, 0xc448, 0xac80, 0x1, 0x1);
        gbc.writeMem(0xc950, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8ab6);
        EXPECT(gbc.pc(), 0xc951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc950), 0xb1);
        // B1 0108
        gbc.setState(0xeb74, 0x47ce, 0x1410, 0x336d, 0x6a18, 0x2cb8, 0x1, 0x1);
        gbc.writeMem(0xeb74, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x47ce);
        EXPECT(gbc.pc(), 0xeb75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb74), 0xb1);
        // B1 010A
        gbc.setState(0x7e9c, 0xac13, 0x1860, 0x10a2, 0xd6a9, 0x8ff7, 0x1, 0x1);
        gbc.writeMem(0x7e9c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xac13);
        EXPECT(gbc.pc(), 0x7e9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 010B
        gbc.setState(0x698f, 0x936, 0x5e0, 0xb66e, 0xc015, 0x5e73, 0x0, 0x1);
        gbc.writeMem(0x698f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x936);
        EXPECT(gbc.pc(), 0x6990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 010C
        gbc.setState(0x365b, 0xb665, 0x8a90, 0x8aa2, 0xe18a, 0x6857, 0x1, 0x1);
        gbc.writeMem(0x365b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb665);
        EXPECT(gbc.pc(), 0x365c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 010D
        gbc.setState(0xbf3b, 0x9935, 0x8240, 0x9f27, 0xbcc1, 0x1211, 0x1, 0x0);
        gbc.writeMem(0xbf3b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9935);
        EXPECT(gbc.pc(), 0xbf3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf3b), 0xb1);
        // B1 010E
        gbc.setState(0xa6c9, 0x8347, 0x26d0, 0x49bd, 0x3f4d, 0x3154, 0x1, 0x1);
        gbc.writeMem(0xa6c9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8347);
        EXPECT(gbc.pc(), 0xa6ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c9), 0xb1);
        // B1 010F
        gbc.setState(0xe1a9, 0x560f, 0xedd0, 0x1cad, 0x3518, 0xee4, 0x1, 0x0);
        gbc.writeMem(0xe1a9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x560f);
        EXPECT(gbc.pc(), 0xe1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1a9), 0xb1);
        // B1 0110
        gbc.setState(0x9, 0x53af, 0x96d0, 0x7aa7, 0x54f2, 0xe04a, 0x0, 0x0);
        gbc.writeMem(0x9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x53af);
        EXPECT(gbc.pc(), 0xa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0111
        gbc.setState(0xc993, 0xd6d3, 0x3800, 0x3cbb, 0x6a07, 0xe380, 0x0, 0x0);
        gbc.writeMem(0xc993, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd6d3);
        EXPECT(gbc.pc(), 0xc994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc993), 0xb1);
        // B1 0112
        gbc.setState(0x85ee, 0x5246, 0xb490, 0xa081, 0x9352, 0xcda1, 0x1, 0x0);
        gbc.writeMem(0x85ee, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5246);
        EXPECT(gbc.pc(), 0x85ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ee), 0xb1);
        // B1 0114
        gbc.setState(0x60f3, 0xc4f3, 0x6f0, 0xace7, 0x9caa, 0xc74d, 0x1, 0x0);
        gbc.writeMem(0x60f3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc4f3);
        EXPECT(gbc.pc(), 0x60f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0115
        gbc.setState(0x1abc, 0xda3b, 0x87e0, 0x5a0f, 0xd773, 0x1cd4, 0x0, 0x1);
        gbc.writeMem(0x1abc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xda3b);
        EXPECT(gbc.pc(), 0x1abd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0116
        gbc.setState(0xe978, 0x2d1c, 0x1090, 0x598f, 0xdb91, 0x9518, 0x0, 0x0);
        gbc.writeMem(0xe978, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2d1c);
        EXPECT(gbc.pc(), 0xe979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe978), 0xb1);
        // B1 0117
        gbc.setState(0x418, 0xbb9b, 0xb810, 0x3899, 0xb681, 0x3a3c, 0x1, 0x1);
        gbc.writeMem(0x418, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xbb9b);
        EXPECT(gbc.pc(), 0x419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0118
        gbc.setState(0xc25d, 0x2f70, 0x5a60, 0x5ab7, 0x16ac, 0xdfcb, 0x1, 0x1);
        gbc.writeMem(0xc25d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2f70);
        EXPECT(gbc.pc(), 0xc25e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25d), 0xb1);
        // B1 0119
        gbc.setState(0xb798, 0xdee7, 0xa190, 0xd56c, 0x117e, 0xb618, 0x0, 0x1);
        gbc.writeMem(0xb798, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdee7);
        EXPECT(gbc.pc(), 0xb799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb798), 0xb1);
        // B1 011A
        gbc.setState(0xc2d4, 0x23ce, 0xa150, 0x3c40, 0x76b, 0x6dd7, 0x1, 0x1);
        gbc.writeMem(0xc2d4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x23ce);
        EXPECT(gbc.pc(), 0xc2d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d4), 0xb1);
        // B1 011B
        gbc.setState(0x1fcb, 0x3c42, 0x1200, 0xc99d, 0x1664, 0x6cd, 0x0, 0x0);
        gbc.writeMem(0x1fcb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3c42);
        EXPECT(gbc.pc(), 0x1fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 011D
        gbc.setState(0x9deb, 0xd27a, 0x5de0, 0x3472, 0xc85a, 0x7be0, 0x0, 0x1);
        gbc.writeMem(0x9deb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd27a);
        EXPECT(gbc.pc(), 0x9dec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9deb), 0xb1);
        // B1 011E
        gbc.setState(0x5877, 0x4943, 0xaa00, 0x9eb9, 0xac99, 0xf7b8, 0x1, 0x1);
        gbc.writeMem(0x5877, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4943);
        EXPECT(gbc.pc(), 0x5878);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 011F
        gbc.setState(0xc539, 0x6bf3, 0x7920, 0xed3a, 0x94f7, 0x4d7b, 0x0, 0x0);
        gbc.writeMem(0xc539, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6bf3);
        EXPECT(gbc.pc(), 0xc53a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc539), 0xb1);
        // B1 0121
        gbc.setState(0x24f9, 0x60aa, 0xa560, 0x65b1, 0x275f, 0x1d5f, 0x0, 0x1);
        gbc.writeMem(0x24f9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x60aa);
        EXPECT(gbc.pc(), 0x24fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0122
        gbc.setState(0x6e3, 0x6ea3, 0xbdf0, 0x4d08, 0x502b, 0xc68b, 0x0, 0x1);
        gbc.writeMem(0x6e3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6ea3);
        EXPECT(gbc.pc(), 0x6e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0123
        gbc.setState(0x170b, 0xeb8c, 0x56c0, 0xc9c2, 0xe692, 0x66b4, 0x1, 0x1);
        gbc.writeMem(0x170b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xeb8c);
        EXPECT(gbc.pc(), 0x170c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0124
        gbc.setState(0x1c91, 0x28a4, 0x9940, 0x3fd4, 0x80b3, 0x595e, 0x1, 0x1);
        gbc.writeMem(0x1c91, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x28a4);
        EXPECT(gbc.pc(), 0x1c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0125
        gbc.setState(0x7347, 0x6a23, 0x6a20, 0x2391, 0xe906, 0x180f, 0x0, 0x1);
        gbc.writeMem(0x7347, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6a23);
        EXPECT(gbc.pc(), 0x7348);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0126
        gbc.setState(0x139f, 0xcbeb, 0x400, 0xec07, 0x3ff7, 0xfa38, 0x1, 0x1);
        gbc.writeMem(0x139f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xcbeb);
        EXPECT(gbc.pc(), 0x13a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0127
        gbc.setState(0x4506, 0x1882, 0xb9f0, 0x9d9a, 0x10b9, 0x264d, 0x0, 0x0);
        gbc.writeMem(0x4506, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1882);
        EXPECT(gbc.pc(), 0x4507);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0128
        gbc.setState(0xd605, 0xbbb9, 0xc210, 0x14f0, 0x9392, 0x9ca4, 0x1, 0x0);
        gbc.writeMem(0xd605, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xbbb9);
        EXPECT(gbc.pc(), 0xd606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd605), 0xb1);
        // B1 0129
        gbc.setState(0xc828, 0xf379, 0xbc40, 0xa64b, 0xaeec, 0x6459, 0x1, 0x0);
        gbc.writeMem(0xc828, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf379);
        EXPECT(gbc.pc(), 0xc829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc828), 0xb1);
        // B1 012B
        gbc.setState(0x8102, 0x29bf, 0x7b0, 0xa673, 0x7918, 0x5fac, 0x1, 0x1);
        gbc.writeMem(0x8102, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x29bf);
        EXPECT(gbc.pc(), 0x8103);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8102), 0xb1);
        // B1 012D
        gbc.setState(0xa71a, 0x1117, 0x41b0, 0xda39, 0xd102, 0xbe73, 0x1, 0x1);
        gbc.writeMem(0xa71a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1117);
        EXPECT(gbc.pc(), 0xa71b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa71a), 0xb1);
        // B1 012E
        gbc.setState(0xea78, 0xcfaa, 0xa3b0, 0x6b0f, 0xaeb, 0xf94c, 0x1, 0x1);
        gbc.writeMem(0xea78, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xcfaa);
        EXPECT(gbc.pc(), 0xea79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea78), 0xb1);
        // B1 012F
        gbc.setState(0x7b70, 0x9ed9, 0xddb0, 0x876a, 0xe18b, 0x71c9, 0x1, 0x0);
        gbc.writeMem(0x7b70, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9ed9);
        EXPECT(gbc.pc(), 0x7b71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0130
        gbc.setState(0xa23a, 0x28b9, 0xe060, 0x489c, 0x9d1a, 0x87b8, 0x1, 0x1);
        gbc.writeMem(0xa23a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x28b9);
        EXPECT(gbc.pc(), 0xa23b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa23a), 0xb1);
        // B1 0131
        gbc.setState(0x5805, 0xb5d5, 0xb200, 0x603a, 0xb42, 0x4fff, 0x1, 0x1);
        gbc.writeMem(0x5805, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb5d5);
        EXPECT(gbc.pc(), 0x5806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0132
        gbc.setState(0xd929, 0xae5c, 0x3f40, 0x8abb, 0x847c, 0xdff2, 0x0, 0x0);
        gbc.writeMem(0xd929, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xae5c);
        EXPECT(gbc.pc(), 0xd92a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd929), 0xb1);
        // B1 0133
        gbc.setState(0x7c54, 0x60f5, 0xac40, 0xca10, 0x8203, 0xf7f4, 0x0, 0x0);
        gbc.writeMem(0x7c54, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x60f5);
        EXPECT(gbc.pc(), 0x7c55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0134
        gbc.setState(0x67d5, 0x1ab5, 0xccb0, 0x7c, 0x2d48, 0x5b7c, 0x1, 0x0);
        gbc.writeMem(0x67d5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1ab5);
        EXPECT(gbc.pc(), 0x67d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0135
        gbc.setState(0x36f4, 0x16f2, 0xdad0, 0xe32, 0x1994, 0xf6d9, 0x1, 0x0);
        gbc.writeMem(0x36f4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x16f2);
        EXPECT(gbc.pc(), 0x36f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0136
        gbc.setState(0x97c7, 0x9f41, 0x6340, 0x6ca3, 0x8625, 0xe049, 0x1, 0x0);
        gbc.writeMem(0x97c7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9f41);
        EXPECT(gbc.pc(), 0x97c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c7), 0xb1);
        // B1 0137
        gbc.setState(0xaa98, 0x9ff0, 0xb7a0, 0x131f, 0x8c7d, 0x2df7, 0x0, 0x1);
        gbc.writeMem(0xaa98, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9ff0);
        EXPECT(gbc.pc(), 0xaa99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa98), 0xb1);
        // B1 0138
        gbc.setState(0xc810, 0x3474, 0x8b80, 0x9fd4, 0x8dbf, 0x5c4d, 0x1, 0x1);
        gbc.writeMem(0xc810, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3474);
        EXPECT(gbc.pc(), 0xc811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc810), 0xb1);
        // B1 0139
        gbc.setState(0xedca, 0x27f8, 0xdf50, 0xd774, 0x6b09, 0xfe57, 0x1, 0x0);
        gbc.writeMem(0xedca, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x27f8);
        EXPECT(gbc.pc(), 0xedcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedca), 0xb1);
        // B1 013A
        gbc.setState(0xd053, 0xa514, 0x2920, 0xaa23, 0x78d7, 0x209b, 0x0, 0x0);
        gbc.writeMem(0xd053, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa514);
        EXPECT(gbc.pc(), 0xd054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd053), 0xb1);
        // B1 013B
        gbc.setState(0x534f, 0x73, 0x5720, 0xf81d, 0x8ba6, 0xd461, 0x0, 0x1);
        gbc.writeMem(0x534f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x73);
        EXPECT(gbc.pc(), 0x5350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 013C
        gbc.setState(0x6bc9, 0x5451, 0xfd80, 0xd696, 0x1515, 0xbc86, 0x1, 0x1);
        gbc.writeMem(0x6bc9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5451);
        EXPECT(gbc.pc(), 0x6bca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 013D
        gbc.setState(0x5152, 0x78e4, 0x6000, 0xe302, 0xe167, 0x2051, 0x1, 0x0);
        gbc.writeMem(0x5152, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x78e4);
        EXPECT(gbc.pc(), 0x5153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 013E
        gbc.setState(0xc9a8, 0xebb1, 0x8de0, 0x99b5, 0x74a7, 0x1f23, 0x1, 0x1);
        gbc.writeMem(0xc9a8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xebb1);
        EXPECT(gbc.pc(), 0xc9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a8), 0xb1);
        // B1 013F
        gbc.setState(0x1c26, 0x8323, 0x5aa0, 0x77d5, 0x100b, 0xa9f2, 0x1, 0x1);
        gbc.writeMem(0x1c26, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x8323);
        EXPECT(gbc.pc(), 0x1c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0140
        gbc.setState(0x793d, 0x934a, 0x5920, 0xb00e, 0x7450, 0xfbb1, 0x0, 0x0);
        gbc.writeMem(0x793d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x934a);
        EXPECT(gbc.pc(), 0x793e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0141
        gbc.setState(0xb1e1, 0x2334, 0x6e50, 0x9753, 0x5374, 0x8772, 0x1, 0x1);
        gbc.writeMem(0xb1e1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2334);
        EXPECT(gbc.pc(), 0xb1e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e1), 0xb1);
        // B1 0142
        gbc.setState(0x28cc, 0x5e7f, 0xdfa0, 0xe0ed, 0x16b, 0xe9c3, 0x0, 0x0);
        gbc.writeMem(0x28cc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5e7f);
        EXPECT(gbc.pc(), 0x28cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0143
        gbc.setState(0x2e0e, 0x244, 0xd30, 0x16a1, 0xb52b, 0x9a4c, 0x0, 0x1);
        gbc.writeMem(0x2e0e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x244);
        EXPECT(gbc.pc(), 0x2e0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0144
        gbc.setState(0x4d86, 0xb6b8, 0x7940, 0x6c4a, 0x381b, 0xba0a, 0x1, 0x1);
        gbc.writeMem(0x4d86, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb6b8);
        EXPECT(gbc.pc(), 0x4d87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0145
        gbc.setState(0x31bb, 0xe856, 0x4c30, 0xfe9c, 0x1654, 0x57b8, 0x0, 0x0);
        gbc.writeMem(0x31bb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe856);
        EXPECT(gbc.pc(), 0x31bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0146
        gbc.setState(0x9be7, 0x1160, 0x4690, 0xfa75, 0x5d76, 0x8bea, 0x0, 0x0);
        gbc.writeMem(0x9be7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1160);
        EXPECT(gbc.pc(), 0x9be8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be7), 0xb1);
        // B1 0147
        gbc.setState(0xbe77, 0xef03, 0x2cd0, 0x9d57, 0xfa59, 0xd476, 0x1, 0x1);
        gbc.writeMem(0xbe77, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xef03);
        EXPECT(gbc.pc(), 0xbe78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe77), 0xb1);
        // B1 0148
        gbc.setState(0x4699, 0xdef3, 0x77a0, 0x9f64, 0xe2fd, 0xf2ff, 0x0, 0x1);
        gbc.writeMem(0x4699, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xdef3);
        EXPECT(gbc.pc(), 0x469a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0149
        gbc.setState(0x958b, 0x466b, 0xd720, 0x25e1, 0xfb4e, 0x2d05, 0x0, 0x1);
        gbc.writeMem(0x958b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x466b);
        EXPECT(gbc.pc(), 0x958c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958b), 0xb1);
        // B1 014A
        gbc.setState(0xee85, 0x335a, 0x74a0, 0xfc02, 0xabfa, 0x6e34, 0x0, 0x1);
        gbc.writeMem(0xee85, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x335a);
        EXPECT(gbc.pc(), 0xee86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee85), 0xb1);
        // B1 014B
        gbc.setState(0x4d65, 0x8b98, 0xb0d0, 0xd91d, 0xa983, 0x2c0c, 0x1, 0x1);
        gbc.writeMem(0x4d65, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8b98);
        EXPECT(gbc.pc(), 0x4d66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 014C
        gbc.setState(0x5323, 0x832e, 0xcdf0, 0xe45b, 0x54af, 0xe9d7, 0x0, 0x0);
        gbc.writeMem(0x5323, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x832e);
        EXPECT(gbc.pc(), 0x5324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 014D
        gbc.setState(0x46c0, 0xc3b5, 0xf930, 0xcb1f, 0x1d83, 0xdedc, 0x1, 0x1);
        gbc.writeMem(0x46c0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc3b5);
        EXPECT(gbc.pc(), 0x46c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 014E
        gbc.setState(0x7b87, 0x6a80, 0xe040, 0x418a, 0xc0af, 0x17ed, 0x1, 0x0);
        gbc.writeMem(0x7b87, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6a80);
        EXPECT(gbc.pc(), 0x7b88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 014F
        gbc.setState(0xd872, 0xc5ce, 0xb090, 0x625c, 0xcdc, 0x718b, 0x0, 0x1);
        gbc.writeMem(0xd872, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc5ce);
        EXPECT(gbc.pc(), 0xd873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd872), 0xb1);
        // B1 0150
        gbc.setState(0x4fcf, 0x712c, 0xad0, 0x7a97, 0xcff5, 0xf029, 0x1, 0x0);
        gbc.writeMem(0x4fcf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x712c);
        EXPECT(gbc.pc(), 0x4fd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0151
        gbc.setState(0x1940, 0x5743, 0xfae0, 0xca17, 0xbd82, 0xedd8, 0x0, 0x0);
        gbc.writeMem(0x1940, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5743);
        EXPECT(gbc.pc(), 0x1941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0152
        gbc.setState(0x4e30, 0x1441, 0x20f0, 0xbefc, 0x7b4c, 0xc7e6, 0x1, 0x0);
        gbc.writeMem(0x4e30, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1441);
        EXPECT(gbc.pc(), 0x4e31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0155
        gbc.setState(0xa1fa, 0x3916, 0x38c0, 0x44dc, 0xa01b, 0xf5ae, 0x0, 0x1);
        gbc.writeMem(0xa1fa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3916);
        EXPECT(gbc.pc(), 0xa1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1fa), 0xb1);
        // B1 0156
        gbc.setState(0x887b, 0xaa45, 0xf760, 0xd7d4, 0x5eff, 0xf9c3, 0x0, 0x0);
        gbc.writeMem(0x887b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xaa45);
        EXPECT(gbc.pc(), 0x887c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x887b), 0xb1);
        // B1 0157
        gbc.setState(0x525f, 0x615a, 0x8370, 0xd6a0, 0xad6d, 0x1a6e, 0x0, 0x1);
        gbc.writeMem(0x525f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x615a);
        EXPECT(gbc.pc(), 0x5260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0158
        gbc.setState(0xb795, 0x92d7, 0x9b60, 0xd53f, 0xd0a0, 0x9a54, 0x0, 0x1);
        gbc.writeMem(0xb795, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x92d7);
        EXPECT(gbc.pc(), 0xb796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb795), 0xb1);
        // B1 0159
        gbc.setState(0x958f, 0x628f, 0xa560, 0x5b51, 0x9f2f, 0x1296, 0x1, 0x0);
        gbc.writeMem(0x958f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x628f);
        EXPECT(gbc.pc(), 0x9590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958f), 0xb1);
        // B1 015A
        gbc.setState(0x6082, 0x2a65, 0x5810, 0xb895, 0x4713, 0x5580, 0x1, 0x0);
        gbc.writeMem(0x6082, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2a65);
        EXPECT(gbc.pc(), 0x6083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 015B
        gbc.setState(0x2af6, 0xdc90, 0x8070, 0xfc3f, 0x641e, 0xf504, 0x1, 0x1);
        gbc.writeMem(0x2af6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xdc90);
        EXPECT(gbc.pc(), 0x2af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 015C
        gbc.setState(0x821c, 0x2a26, 0xfc60, 0x4838, 0x280, 0x8ba2, 0x0, 0x1);
        gbc.writeMem(0x821c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2a26);
        EXPECT(gbc.pc(), 0x821d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821c), 0xb1);
        // B1 015D
        gbc.setState(0x8a93, 0x9b95, 0x7070, 0x4fa1, 0x6df6, 0x4755, 0x0, 0x0);
        gbc.writeMem(0x8a93, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9b95);
        EXPECT(gbc.pc(), 0x8a94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a93), 0xb1);
        // B1 015E
        gbc.setState(0xb405, 0x6060, 0x7d80, 0xdb55, 0xaed5, 0xd889, 0x0, 0x1);
        gbc.writeMem(0xb405, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6060);
        EXPECT(gbc.pc(), 0xb406);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb405), 0xb1);
        // B1 015F
        gbc.setState(0x742e, 0xa835, 0xd50, 0xb1d, 0x1646, 0xb63f, 0x1, 0x1);
        gbc.writeMem(0x742e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa835);
        EXPECT(gbc.pc(), 0x742f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0160
        gbc.setState(0x8933, 0xd670, 0xc570, 0xc2, 0x211b, 0x5a5c, 0x1, 0x0);
        gbc.writeMem(0x8933, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd670);
        EXPECT(gbc.pc(), 0x8934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8933), 0xb1);
        // B1 0161
        gbc.setState(0xe60d, 0x6340, 0xbca0, 0x4c3c, 0xc094, 0x2799, 0x1, 0x0);
        gbc.writeMem(0xe60d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6340);
        EXPECT(gbc.pc(), 0xe60e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe60d), 0xb1);
        // B1 0162
        gbc.setState(0xe60a, 0xe37c, 0x21d0, 0x95fd, 0x7ef4, 0xa5d3, 0x0, 0x0);
        gbc.writeMem(0xe60a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe37c);
        EXPECT(gbc.pc(), 0xe60b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe60a), 0xb1);
        // B1 0163
        gbc.setState(0xe92d, 0x50a2, 0xe0f0, 0x3d34, 0x6b83, 0x4f22, 0x0, 0x1);
        gbc.writeMem(0xe92d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x50a2);
        EXPECT(gbc.pc(), 0xe92e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe92d), 0xb1);
        // B1 0164
        gbc.setState(0x6c8c, 0xd1db, 0xc40, 0x26f2, 0x3ca, 0x9526, 0x0, 0x0);
        gbc.writeMem(0x6c8c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd1db);
        EXPECT(gbc.pc(), 0x6c8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0165
        gbc.setState(0xc9f3, 0xe3cd, 0x1e50, 0x1b44, 0xca05, 0x83f1, 0x1, 0x0);
        gbc.writeMem(0xc9f3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe3cd);
        EXPECT(gbc.pc(), 0xc9f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9f3), 0xb1);
        // B1 0166
        gbc.setState(0xca76, 0x8ae0, 0x6b80, 0x9fb3, 0xfa15, 0x8cba, 0x1, 0x1);
        gbc.writeMem(0xca76, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8ae0);
        EXPECT(gbc.pc(), 0xca77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca76), 0xb1);
        // B1 0167
        gbc.setState(0xb972, 0x3c3d, 0x6e50, 0x4899, 0xacfd, 0x1d84, 0x0, 0x1);
        gbc.writeMem(0xb972, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3c3d);
        EXPECT(gbc.pc(), 0xb973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb972), 0xb1);
        // B1 0168
        gbc.setState(0x6106, 0xb7f5, 0xddd0, 0xbb75, 0x1bfd, 0x2f52, 0x0, 0x0);
        gbc.writeMem(0x6106, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb7f5);
        EXPECT(gbc.pc(), 0x6107);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0169
        gbc.setState(0x7498, 0x3942, 0xc340, 0x71ff, 0xfe39, 0x4d01, 0x0, 0x0);
        gbc.writeMem(0x7498, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3942);
        EXPECT(gbc.pc(), 0x7499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 016A
        gbc.setState(0x35e0, 0x21e6, 0xdc90, 0x7cc9, 0x9a2c, 0xf15c, 0x0, 0x1);
        gbc.writeMem(0x35e0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x21e6);
        EXPECT(gbc.pc(), 0x35e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 016B
        gbc.setState(0x8776, 0xde70, 0x17a0, 0xcddf, 0x30cb, 0xc85b, 0x0, 0x0);
        gbc.writeMem(0x8776, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xde70);
        EXPECT(gbc.pc(), 0x8777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8776), 0xb1);
        // B1 016C
        gbc.setState(0x6310, 0x5057, 0x7970, 0x4118, 0x5053, 0x9833, 0x0, 0x0);
        gbc.writeMem(0x6310, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5057);
        EXPECT(gbc.pc(), 0x6311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 016D
        gbc.setState(0x23f2, 0x22bd, 0xa250, 0x2eb1, 0x51d, 0x679d, 0x1, 0x0);
        gbc.writeMem(0x23f2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x22bd);
        EXPECT(gbc.pc(), 0x23f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 016E
        gbc.setState(0x6821, 0xafa7, 0x9b00, 0xc6c, 0x1fee, 0x15c, 0x0, 0x1);
        gbc.writeMem(0x6821, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xafa7);
        EXPECT(gbc.pc(), 0x6822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 016F
        gbc.setState(0xe318, 0xab03, 0x730, 0xad56, 0x1919, 0xa3a, 0x1, 0x1);
        gbc.writeMem(0xe318, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xab03);
        EXPECT(gbc.pc(), 0xe319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe318), 0xb1);
        // B1 0170
        gbc.setState(0x7bf1, 0x3df9, 0x8150, 0xaca4, 0xe7b5, 0x79ed, 0x1, 0x0);
        gbc.writeMem(0x7bf1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3df9);
        EXPECT(gbc.pc(), 0x7bf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0171
        gbc.setState(0xb7ac, 0x645d, 0x2390, 0x3d8b, 0x968f, 0xd13f, 0x0, 0x0);
        gbc.writeMem(0xb7ac, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x645d);
        EXPECT(gbc.pc(), 0xb7ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ac), 0xb1);
        // B1 0172
        gbc.setState(0xe228, 0xef22, 0xfd70, 0x5604, 0x10fe, 0x5a5e, 0x0, 0x0);
        gbc.writeMem(0xe228, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xef22);
        EXPECT(gbc.pc(), 0xe229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe228), 0xb1);
        // B1 0173
        gbc.setState(0x8205, 0xab6, 0xacf0, 0xb1f7, 0xcc6d, 0x1503, 0x0, 0x1);
        gbc.writeMem(0x8205, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xab6);
        EXPECT(gbc.pc(), 0x8206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8205), 0xb1);
        // B1 0174
        gbc.setState(0x3459, 0x12af, 0xdab0, 0x4209, 0x681d, 0x60c, 0x1, 0x0);
        gbc.writeMem(0x3459, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x12af);
        EXPECT(gbc.pc(), 0x345a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0175
        gbc.setState(0x2b92, 0x4ba7, 0xb310, 0xbb18, 0x4ff8, 0x8faf, 0x1, 0x0);
        gbc.writeMem(0x2b92, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4ba7);
        EXPECT(gbc.pc(), 0x2b93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0176
        gbc.setState(0x9f79, 0xa517, 0xd30, 0x6118, 0x3d40, 0x622f, 0x1, 0x0);
        gbc.writeMem(0x9f79, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa517);
        EXPECT(gbc.pc(), 0x9f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f79), 0xb1);
        // B1 0177
        gbc.setState(0x364e, 0x9e93, 0x7b50, 0x4c64, 0xd5e6, 0xf2c4, 0x1, 0x1);
        gbc.writeMem(0x364e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9e93);
        EXPECT(gbc.pc(), 0x364f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0178
        gbc.setState(0x3f7d, 0x2522, 0xa200, 0xfaf0, 0xe96a, 0xb9dd, 0x0, 0x1);
        gbc.writeMem(0x3f7d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2522);
        EXPECT(gbc.pc(), 0x3f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0179
        gbc.setState(0xd7a4, 0xa092, 0x8600, 0x78aa, 0x15b7, 0xd41, 0x1, 0x1);
        gbc.writeMem(0xd7a4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa092);
        EXPECT(gbc.pc(), 0xd7a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a4), 0xb1);
        // B1 017A
        gbc.setState(0x8f38, 0x7d5b, 0x5630, 0x638, 0x2b8e, 0x748b, 0x1, 0x1);
        gbc.writeMem(0x8f38, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7d5b);
        EXPECT(gbc.pc(), 0x8f39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f38), 0xb1);
        // B1 017B
        gbc.setState(0x8ef, 0x8a42, 0xbf0, 0x6203, 0x38c0, 0x7c81, 0x0, 0x1);
        gbc.writeMem(0x8ef, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8a42);
        EXPECT(gbc.pc(), 0x8f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 017C
        gbc.setState(0xa16, 0x6455, 0xe4d0, 0x8dc2, 0x7907, 0x632b, 0x1, 0x1);
        gbc.writeMem(0xa16, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6455);
        EXPECT(gbc.pc(), 0xa17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 017D
        gbc.setState(0x731b, 0x3ee6, 0xa0c0, 0x3659, 0x43b3, 0x9351, 0x1, 0x0);
        gbc.writeMem(0x731b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3ee6);
        EXPECT(gbc.pc(), 0x731c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 017E
        gbc.setState(0x4def, 0xc21, 0xdd10, 0xa7dc, 0xb7fe, 0xcdff, 0x1, 0x1);
        gbc.writeMem(0x4def, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc21);
        EXPECT(gbc.pc(), 0x4df0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 017F
        gbc.setState(0xa091, 0x63ff, 0x7610, 0xd5d5, 0xe710, 0x58bb, 0x0, 0x1);
        gbc.writeMem(0xa091, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x63ff);
        EXPECT(gbc.pc(), 0xa092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa091), 0xb1);
        // B1 0180
        gbc.setState(0x831e, 0xef49, 0x16e0, 0x4fcc, 0x2147, 0xbe97, 0x0, 0x0);
        gbc.writeMem(0x831e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xef49);
        EXPECT(gbc.pc(), 0x831f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831e), 0xb1);
        // B1 0181
        gbc.setState(0x5353, 0x23c1, 0x60c0, 0xe8f5, 0x72b9, 0xfa89, 0x0, 0x1);
        gbc.writeMem(0x5353, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x23c1);
        EXPECT(gbc.pc(), 0x5354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0183
        gbc.setState(0x4ed0, 0xabd0, 0x2c70, 0x4a4c, 0xd4ac, 0xe28f, 0x0, 0x0);
        gbc.writeMem(0x4ed0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xabd0);
        EXPECT(gbc.pc(), 0x4ed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0184
        gbc.setState(0x3090, 0x476f, 0x9280, 0xf01, 0x6559, 0x13a8, 0x0, 0x1);
        gbc.writeMem(0x3090, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x476f);
        EXPECT(gbc.pc(), 0x3091);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0185
        gbc.setState(0x27ba, 0xec9e, 0x92a0, 0xe717, 0x7b02, 0x5ded, 0x1, 0x0);
        gbc.writeMem(0x27ba, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xec9e);
        EXPECT(gbc.pc(), 0x27bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0186
        gbc.setState(0xb6fc, 0xe7cb, 0x510, 0x2480, 0x88dd, 0x9078, 0x1, 0x0);
        gbc.writeMem(0xb6fc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe7cb);
        EXPECT(gbc.pc(), 0xb6fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6fc), 0xb1);
        // B1 0188
        gbc.setState(0xe0e6, 0x8fc1, 0x76e0, 0xab35, 0x5347, 0x5048, 0x1, 0x1);
        gbc.writeMem(0xe0e6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8fc1);
        EXPECT(gbc.pc(), 0xe0e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e6), 0xb1);
        // B1 0189
        gbc.setState(0x856d, 0x110d, 0x1820, 0xebe2, 0x9d87, 0xb732, 0x1, 0x0);
        gbc.writeMem(0x856d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x110d);
        EXPECT(gbc.pc(), 0x856e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856d), 0xb1);
        // B1 018A
        gbc.setState(0x6579, 0x7a31, 0x2cb0, 0x749e, 0x32f1, 0x7ba6, 0x0, 0x1);
        gbc.writeMem(0x6579, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7a31);
        EXPECT(gbc.pc(), 0x657a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 018B
        gbc.setState(0x4df5, 0x6f4c, 0x8e30, 0xa092, 0x268b, 0xafe3, 0x0, 0x0);
        gbc.writeMem(0x4df5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6f4c);
        EXPECT(gbc.pc(), 0x4df6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 018C
        gbc.setState(0xe4ff, 0x1677, 0x3df0, 0xad7c, 0xf765, 0x8e3b, 0x1, 0x0);
        gbc.writeMem(0xe4ff, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1677);
        EXPECT(gbc.pc(), 0xe500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ff), 0xb1);
        // B1 018D
        gbc.setState(0x4109, 0xbac, 0x5a90, 0xa951, 0xa651, 0xcc97, 0x1, 0x1);
        gbc.writeMem(0x4109, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbac);
        EXPECT(gbc.pc(), 0x410a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 018E
        gbc.setState(0x6e4a, 0xd462, 0xc960, 0x10e2, 0x71d5, 0x2f21, 0x1, 0x1);
        gbc.writeMem(0x6e4a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd462);
        EXPECT(gbc.pc(), 0x6e4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 018F
        gbc.setState(0xd636, 0xb6c6, 0xd790, 0x35ca, 0x8a90, 0xcbb6, 0x1, 0x0);
        gbc.writeMem(0xd636, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb6c6);
        EXPECT(gbc.pc(), 0xd637);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd636), 0xb1);
        // B1 0190
        gbc.setState(0x627c, 0x5072, 0x9890, 0x1139, 0x25b0, 0x10ad, 0x0, 0x0);
        gbc.writeMem(0x627c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5072);
        EXPECT(gbc.pc(), 0x627d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0191
        gbc.setState(0x315d, 0xd7c7, 0xe8b0, 0x76a6, 0xff03, 0xcbdc, 0x1, 0x1);
        gbc.writeMem(0x315d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd7c7);
        EXPECT(gbc.pc(), 0x315e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0192
        gbc.setState(0xc6c4, 0xcd39, 0xbe50, 0x8b34, 0x996f, 0x762d, 0x0, 0x1);
        gbc.writeMem(0xc6c4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xcd39);
        EXPECT(gbc.pc(), 0xc6c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c4), 0xb1);
        // B1 0193
        gbc.setState(0x3c4c, 0xb11d, 0x93a0, 0x17bd, 0x4238, 0x7518, 0x1, 0x0);
        gbc.writeMem(0x3c4c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb11d);
        EXPECT(gbc.pc(), 0x3c4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0194
        gbc.setState(0xe658, 0xeb45, 0x8c30, 0x1c0e, 0x14af, 0xb5a5, 0x0, 0x1);
        gbc.writeMem(0xe658, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xeb45);
        EXPECT(gbc.pc(), 0xe659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe658), 0xb1);
        // B1 0195
        gbc.setState(0x5f17, 0xd052, 0x6560, 0xc95a, 0xe949, 0x8589, 0x0, 0x1);
        gbc.writeMem(0x5f17, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd052);
        EXPECT(gbc.pc(), 0x5f18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0196
        gbc.setState(0x8501, 0x1947, 0xecd0, 0x9176, 0x9547, 0x1881, 0x1, 0x1);
        gbc.writeMem(0x8501, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1947);
        EXPECT(gbc.pc(), 0x8502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8501), 0xb1);
        // B1 0197
        gbc.setState(0xb498, 0x1030, 0x3fd0, 0xa54f, 0x4e53, 0xb104, 0x0, 0x0);
        gbc.writeMem(0xb498, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1030);
        EXPECT(gbc.pc(), 0xb499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb498), 0xb1);
        // B1 0198
        gbc.setState(0x2660, 0xe157, 0x6690, 0xf57e, 0x8ed9, 0xbbdb, 0x1, 0x1);
        gbc.writeMem(0x2660, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe157);
        EXPECT(gbc.pc(), 0x2661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0199
        gbc.setState(0x67f, 0x7dfc, 0x6500, 0x3c17, 0x1e74, 0xb994, 0x1, 0x0);
        gbc.writeMem(0x67f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7dfc);
        EXPECT(gbc.pc(), 0x680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 019A
        gbc.setState(0xd2f1, 0x1584, 0xba0, 0xbcde, 0x30b0, 0xa7f, 0x1, 0x0);
        gbc.writeMem(0xd2f1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1584);
        EXPECT(gbc.pc(), 0xd2f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2f1), 0xb1);
        // B1 019B
        gbc.setState(0x2a77, 0x26b3, 0x6a80, 0x802e, 0xe12a, 0x8eb6, 0x0, 0x0);
        gbc.writeMem(0x2a77, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x26b3);
        EXPECT(gbc.pc(), 0x2a78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 019C
        gbc.setState(0x3a69, 0x1d8e, 0x79c0, 0x4fc9, 0x2474, 0xae90, 0x1, 0x0);
        gbc.writeMem(0x3a69, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1d8e);
        EXPECT(gbc.pc(), 0x3a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 019D
        gbc.setState(0x1229, 0x4103, 0xd150, 0x7110, 0x1a06, 0x85fc, 0x0, 0x0);
        gbc.writeMem(0x1229, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4103);
        EXPECT(gbc.pc(), 0x122a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 019E
        gbc.setState(0x1489, 0xf61a, 0x3b10, 0x3c2c, 0x5e42, 0x4f46, 0x1, 0x1);
        gbc.writeMem(0x1489, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf61a);
        EXPECT(gbc.pc(), 0x148a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 019F
        gbc.setState(0xa7a9, 0xf8d0, 0x36d0, 0xffa8, 0x242e, 0x72ce, 0x0, 0x1);
        gbc.writeMem(0xa7a9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf8d0);
        EXPECT(gbc.pc(), 0xa7aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a9), 0xb1);
        // B1 01A0
        gbc.setState(0x4339, 0xf788, 0xb880, 0xd1a5, 0xd9, 0x655d, 0x0, 0x0);
        gbc.writeMem(0x4339, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf788);
        EXPECT(gbc.pc(), 0x433a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01A1
        gbc.setState(0x90ff, 0xe6e6, 0xc450, 0x3472, 0x6791, 0x4d64, 0x0, 0x1);
        gbc.writeMem(0x90ff, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe6e6);
        EXPECT(gbc.pc(), 0x9100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ff), 0xb1);
        // B1 01A2
        gbc.setState(0xd600, 0x2cf5, 0x1eb0, 0x5f3d, 0x51b0, 0x8219, 0x0, 0x1);
        gbc.writeMem(0xd600, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2cf5);
        EXPECT(gbc.pc(), 0xd601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd600), 0xb1);
        // B1 01A3
        gbc.setState(0xb01b, 0xa15b, 0xfe70, 0xf5c2, 0xf3f0, 0x78c9, 0x1, 0x0);
        gbc.writeMem(0xb01b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa15b);
        EXPECT(gbc.pc(), 0xb01c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01b), 0xb1);
        // B1 01A4
        gbc.setState(0xad61, 0xbf8c, 0x8fb0, 0xb017, 0xf377, 0x66bd, 0x1, 0x0);
        gbc.writeMem(0xad61, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xbf8c);
        EXPECT(gbc.pc(), 0xad62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad61), 0xb1);
        // B1 01A5
        gbc.setState(0xa83e, 0x4140, 0x6400, 0x1b5f, 0x3e67, 0xdcb9, 0x1, 0x1);
        gbc.writeMem(0xa83e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4140);
        EXPECT(gbc.pc(), 0xa83f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa83e), 0xb1);
        // B1 01A6
        gbc.setState(0xbb2a, 0xad0, 0x3800, 0xc443, 0x970f, 0x9900, 0x0, 0x1);
        gbc.writeMem(0xbb2a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xad0);
        EXPECT(gbc.pc(), 0xbb2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb2a), 0xb1);
        // B1 01A7
        gbc.setState(0x6096, 0xb025, 0x4710, 0x7909, 0xbd9, 0xeeb2, 0x1, 0x1);
        gbc.writeMem(0x6096, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb025);
        EXPECT(gbc.pc(), 0x6097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01A8
        gbc.setState(0x6b2b, 0x9cbd, 0x79a0, 0x535c, 0x285c, 0x32b6, 0x1, 0x1);
        gbc.writeMem(0x6b2b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9cbd);
        EXPECT(gbc.pc(), 0x6b2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01A9
        gbc.setState(0x917d, 0x79c9, 0x8fb0, 0x75e9, 0xcdb8, 0x33ff, 0x1, 0x0);
        gbc.writeMem(0x917d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x79c9);
        EXPECT(gbc.pc(), 0x917e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x917d), 0xb1);
        // B1 01AA
        gbc.setState(0x7724, 0x44bd, 0xf3a0, 0x126c, 0x8d52, 0x87ec, 0x1, 0x1);
        gbc.writeMem(0x7724, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x44bd);
        EXPECT(gbc.pc(), 0x7725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01AD
        gbc.setState(0x37a3, 0xd497, 0xb490, 0xc50c, 0xb87a, 0xd746, 0x0, 0x1);
        gbc.writeMem(0x37a3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd497);
        EXPECT(gbc.pc(), 0x37a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01AE
        gbc.setState(0xc2a9, 0xd037, 0x5140, 0xc129, 0x4b28, 0xd9b5, 0x0, 0x1);
        gbc.writeMem(0xc2a9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd037);
        EXPECT(gbc.pc(), 0xc2aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2a9), 0xb1);
        // B1 01AF
        gbc.setState(0x7eb5, 0x4e3d, 0x9d70, 0xe1a5, 0xc527, 0xaed, 0x0, 0x0);
        gbc.writeMem(0x7eb5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4e3d);
        EXPECT(gbc.pc(), 0x7eb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01B0
        gbc.setState(0x486e, 0x6044, 0x9660, 0xca02, 0x8245, 0x20a, 0x0, 0x1);
        gbc.writeMem(0x486e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6044);
        EXPECT(gbc.pc(), 0x486f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01B1
        gbc.setState(0xed83, 0x212e, 0x7f0, 0x73d0, 0x546f, 0x52be, 0x1, 0x0);
        gbc.writeMem(0xed83, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x212e);
        EXPECT(gbc.pc(), 0xed84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed83), 0xb1);
        // B1 01B2
        gbc.setState(0xc9ad, 0x659a, 0x2590, 0x1383, 0xd4fb, 0x5cb9, 0x1, 0x0);
        gbc.writeMem(0xc9ad, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x659a);
        EXPECT(gbc.pc(), 0xc9ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ad), 0xb1);
        // B1 01B3
        gbc.setState(0xc37, 0xc23f, 0x6ee0, 0x4b78, 0x45e4, 0x4a4b, 0x0, 0x1);
        gbc.writeMem(0xc37, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc23f);
        EXPECT(gbc.pc(), 0xc38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01B4
        gbc.setState(0x389e, 0x4877, 0xa050, 0x4f05, 0x353f, 0x8623, 0x0, 0x0);
        gbc.writeMem(0x389e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4877);
        EXPECT(gbc.pc(), 0x389f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01B5
        gbc.setState(0xab30, 0x3154, 0xb40, 0x9567, 0xb1ba, 0x4776, 0x1, 0x0);
        gbc.writeMem(0xab30, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3154);
        EXPECT(gbc.pc(), 0xab31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab30), 0xb1);
        // B1 01B6
        gbc.setState(0xeb8e, 0x4a8b, 0x4300, 0x5fce, 0x5d48, 0xcafb, 0x1, 0x0);
        gbc.writeMem(0xeb8e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4a8b);
        EXPECT(gbc.pc(), 0xeb8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb8e), 0xb1);
        // B1 01B7
        gbc.setState(0xc42f, 0x1249, 0x7ca0, 0xf578, 0x1e34, 0x99de, 0x0, 0x1);
        gbc.writeMem(0xc42f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1249);
        EXPECT(gbc.pc(), 0xc430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42f), 0xb1);
        // B1 01B8
        gbc.setState(0x9139, 0x1a44, 0xd570, 0x9cab, 0x502d, 0x7acc, 0x0, 0x1);
        gbc.writeMem(0x9139, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1a44);
        EXPECT(gbc.pc(), 0x913a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9139), 0xb1);
        // B1 01B9
        gbc.setState(0xedcc, 0xc76, 0xd9f0, 0x8522, 0x9bbe, 0x35d7, 0x0, 0x1);
        gbc.writeMem(0xedcc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc76);
        EXPECT(gbc.pc(), 0xedcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedcc), 0xb1);
        // B1 01BA
        gbc.setState(0x2f76, 0xe63a, 0x6890, 0xe706, 0x2b02, 0xe4c0, 0x0, 0x0);
        gbc.writeMem(0x2f76, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe63a);
        EXPECT(gbc.pc(), 0x2f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01BB
        gbc.setState(0x20cf, 0xb9ee, 0x3330, 0x3669, 0x430a, 0x5de2, 0x1, 0x1);
        gbc.writeMem(0x20cf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb9ee);
        EXPECT(gbc.pc(), 0x20d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01BC
        gbc.setState(0xef0b, 0xdb11, 0xe160, 0xa656, 0xc062, 0xc859, 0x0, 0x1);
        gbc.writeMem(0xef0b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xdb11);
        EXPECT(gbc.pc(), 0xef0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef0b), 0xb1);
        // B1 01BD
        gbc.setState(0x6509, 0xa266, 0x7630, 0x9c0a, 0xde78, 0x621, 0x1, 0x0);
        gbc.writeMem(0x6509, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa266);
        EXPECT(gbc.pc(), 0x650a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01BE
        gbc.setState(0xd71b, 0xa0c0, 0x94c0, 0xd198, 0x50da, 0xec70, 0x1, 0x0);
        gbc.writeMem(0xd71b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa0c0);
        EXPECT(gbc.pc(), 0xd71c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71b), 0xb1);
        // B1 01BF
        gbc.setState(0x1191, 0x1f05, 0x64f0, 0xc3a5, 0x4eae, 0x1034, 0x0, 0x1);
        gbc.writeMem(0x1191, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1f05);
        EXPECT(gbc.pc(), 0x1192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01C0
        gbc.setState(0xc6b6, 0x5122, 0x9ca0, 0xf712, 0xe09d, 0xb28a, 0x1, 0x0);
        gbc.writeMem(0xc6b6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5122);
        EXPECT(gbc.pc(), 0xc6b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6b6), 0xb1);
        // B1 01C1
        gbc.setState(0x95f, 0x2d04, 0xe8a0, 0xc962, 0x48fc, 0x49ac, 0x0, 0x0);
        gbc.writeMem(0x95f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2d04);
        EXPECT(gbc.pc(), 0x960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01C2
        gbc.setState(0x965f, 0x523a, 0x5130, 0xc8b3, 0x166d, 0x8509, 0x1, 0x1);
        gbc.writeMem(0x965f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x523a);
        EXPECT(gbc.pc(), 0x9660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x965f), 0xb1);
        // B1 01C3
        gbc.setState(0x473e, 0xf8a9, 0xe9e0, 0x12ae, 0xb34c, 0x15bf, 0x1, 0x0);
        gbc.writeMem(0x473e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf8a9);
        EXPECT(gbc.pc(), 0x473f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01C4
        gbc.setState(0xb999, 0xc93a, 0x35e0, 0xb799, 0xc49c, 0xbfad, 0x0, 0x0);
        gbc.writeMem(0xb999, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc93a);
        EXPECT(gbc.pc(), 0xb99a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb999), 0xb1);
        // B1 01C5
        gbc.setState(0x977a, 0xb2e, 0xcc80, 0xbc91, 0x6cc2, 0x2ad6, 0x1, 0x1);
        gbc.writeMem(0x977a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb2e);
        EXPECT(gbc.pc(), 0x977b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x977a), 0xb1);
        // B1 01C7
        gbc.setState(0x3b9d, 0xcd79, 0x8550, 0x606f, 0xfdb4, 0x1a7c, 0x0, 0x1);
        gbc.writeMem(0x3b9d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcd79);
        EXPECT(gbc.pc(), 0x3b9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01C8
        gbc.setState(0xfae, 0xcec8, 0xe690, 0x7539, 0xc105, 0x37c, 0x1, 0x1);
        gbc.writeMem(0xfae, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcec8);
        EXPECT(gbc.pc(), 0xfaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01C9
        gbc.setState(0xe27f, 0xe7ff, 0x7e60, 0x76ce, 0xdfa5, 0xeff0, 0x0, 0x1);
        gbc.writeMem(0xe27f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe7ff);
        EXPECT(gbc.pc(), 0xe280);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe27f), 0xb1);
        // B1 01CA
        gbc.setState(0xae0e, 0xcc28, 0xf3e0, 0xde8a, 0x822, 0x78d7, 0x1, 0x0);
        gbc.writeMem(0xae0e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcc28);
        EXPECT(gbc.pc(), 0xae0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae0e), 0xb1);
        // B1 01CB
        gbc.setState(0xe25b, 0xf242, 0x24d0, 0xf03, 0xf984, 0x8f1c, 0x0, 0x0);
        gbc.writeMem(0xe25b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf242);
        EXPECT(gbc.pc(), 0xe25c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe25b), 0xb1);
        // B1 01CC
        gbc.setState(0x1d9e, 0xfac0, 0x7eb0, 0xcb97, 0x440a, 0x53b0, 0x0, 0x1);
        gbc.writeMem(0x1d9e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xfac0);
        EXPECT(gbc.pc(), 0x1d9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01CD
        gbc.setState(0x2ac7, 0xe58c, 0x2270, 0x785f, 0x5d22, 0x22b8, 0x1, 0x0);
        gbc.writeMem(0x2ac7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe58c);
        EXPECT(gbc.pc(), 0x2ac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01CE
        gbc.setState(0xee43, 0xd2a0, 0x6940, 0xa59d, 0x895d, 0xae77, 0x0, 0x0);
        gbc.writeMem(0xee43, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd2a0);
        EXPECT(gbc.pc(), 0xee44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee43), 0xb1);
        // B1 01CF
        gbc.setState(0xe999, 0x9e9e, 0x1410, 0x34dc, 0xb630, 0x1376, 0x0, 0x1);
        gbc.writeMem(0xe999, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9e9e);
        EXPECT(gbc.pc(), 0xe99a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe999), 0xb1);
        // B1 01D0
        gbc.setState(0xde71, 0xe27d, 0xc4d0, 0xf486, 0xe3f3, 0x8c66, 0x0, 0x0);
        gbc.writeMem(0xde71, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe27d);
        EXPECT(gbc.pc(), 0xde72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde71), 0xb1);
        // B1 01D1
        gbc.setState(0x3b58, 0xf8cb, 0xa580, 0xc538, 0x7ab1, 0x66e0, 0x0, 0x0);
        gbc.writeMem(0x3b58, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf8cb);
        EXPECT(gbc.pc(), 0x3b59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01D2
        gbc.setState(0xe777, 0xc1da, 0x64f0, 0x41aa, 0x87c5, 0x6f53, 0x0, 0x0);
        gbc.writeMem(0xe777, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc1da);
        EXPECT(gbc.pc(), 0xe778);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe777), 0xb1);
        // B1 01D3
        gbc.setState(0xde2, 0x6d46, 0x87a0, 0x65c2, 0xe8f3, 0x9d6, 0x1, 0x0);
        gbc.writeMem(0xde2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6d46);
        EXPECT(gbc.pc(), 0xde3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01D4
        gbc.setState(0xafdc, 0x2e8e, 0x55f0, 0x314b, 0x3e35, 0x8523, 0x1, 0x1);
        gbc.writeMem(0xafdc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2e8e);
        EXPECT(gbc.pc(), 0xafdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafdc), 0xb1);
        // B1 01D5
        gbc.setState(0x4a0a, 0xddbf, 0xb520, 0x5653, 0x14b0, 0x2a49, 0x0, 0x1);
        gbc.writeMem(0x4a0a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xddbf);
        EXPECT(gbc.pc(), 0x4a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01D6
        gbc.setState(0xc99e, 0xa97d, 0xcdf0, 0x1e49, 0x65cc, 0x7e1, 0x1, 0x0);
        gbc.writeMem(0xc99e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa97d);
        EXPECT(gbc.pc(), 0xc99f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc99e), 0xb1);
        // B1 01D7
        gbc.setState(0xea5f, 0x97a9, 0x6060, 0x9d84, 0xba72, 0x4427, 0x1, 0x1);
        gbc.writeMem(0xea5f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x97a9);
        EXPECT(gbc.pc(), 0xea60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea5f), 0xb1);
        // B1 01D8
        gbc.setState(0xa22c, 0xbae1, 0x9560, 0xeb3f, 0xb354, 0x1867, 0x1, 0x0);
        gbc.writeMem(0xa22c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbae1);
        EXPECT(gbc.pc(), 0xa22d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa22c), 0xb1);
        // B1 01D9
        gbc.setState(0xb685, 0xe421, 0xf8f0, 0x24f5, 0xe4e4, 0x3481, 0x1, 0x1);
        gbc.writeMem(0xb685, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe421);
        EXPECT(gbc.pc(), 0xb686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb685), 0xb1);
        // B1 01DA
        gbc.setState(0x69e5, 0x8228, 0x2280, 0x31ad, 0xb33c, 0x8ab2, 0x0, 0x0);
        gbc.writeMem(0x69e5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8228);
        EXPECT(gbc.pc(), 0x69e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01DB
        gbc.setState(0x31ca, 0x6719, 0xc590, 0x6f90, 0x3328, 0x91b8, 0x0, 0x0);
        gbc.writeMem(0x31ca, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6719);
        EXPECT(gbc.pc(), 0x31cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01DC
        gbc.setState(0xcd65, 0xd53, 0xbb20, 0xfac2, 0xb17e, 0x2e2, 0x1, 0x0);
        gbc.writeMem(0xcd65, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd53);
        EXPECT(gbc.pc(), 0xcd66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd65), 0xb1);
        // B1 01DD
        gbc.setState(0xfbb, 0x816f, 0x7090, 0xefbc, 0x33ad, 0x1daf, 0x1, 0x1);
        gbc.writeMem(0xfbb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x816f);
        EXPECT(gbc.pc(), 0xfbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01DE
        gbc.setState(0x5970, 0x2908, 0x38a0, 0xe1a6, 0xfc5e, 0x9ab, 0x1, 0x0);
        gbc.writeMem(0x5970, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2908);
        EXPECT(gbc.pc(), 0x5971);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01DF
        gbc.setState(0x6298, 0x3eaa, 0xc530, 0x9260, 0xc4f0, 0x7b86, 0x1, 0x1);
        gbc.writeMem(0x6298, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3eaa);
        EXPECT(gbc.pc(), 0x6299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01E0
        gbc.setState(0xd2d2, 0xf79e, 0xbf10, 0x4f3b, 0xe049, 0xb538, 0x1, 0x0);
        gbc.writeMem(0xd2d2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf79e);
        EXPECT(gbc.pc(), 0xd2d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2d2), 0xb1);
        // B1 01E1
        gbc.setState(0xc4df, 0x273f, 0xac30, 0x78e5, 0xcda5, 0x5518, 0x1, 0x0);
        gbc.writeMem(0xc4df, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x273f);
        EXPECT(gbc.pc(), 0xc4e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4df), 0xb1);
        // B1 01E2
        gbc.setState(0x548d, 0xdf24, 0xda0, 0x9b11, 0x245, 0xf21a, 0x1, 0x0);
        gbc.writeMem(0x548d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xdf24);
        EXPECT(gbc.pc(), 0x548e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01E3
        gbc.setState(0x27d8, 0x586d, 0xc350, 0xdf5e, 0x5681, 0xcc73, 0x1, 0x1);
        gbc.writeMem(0x27d8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x586d);
        EXPECT(gbc.pc(), 0x27d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01E4
        gbc.setState(0x71d1, 0x6c38, 0x24c0, 0x4717, 0x2066, 0x505c, 0x0, 0x1);
        gbc.writeMem(0x71d1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6c38);
        EXPECT(gbc.pc(), 0x71d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01E5
        gbc.setState(0x9ca, 0xd5ea, 0xb560, 0xe5, 0xfff8, 0xd768, 0x1, 0x1);
        gbc.writeMem(0x9ca, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd5ea);
        EXPECT(gbc.pc(), 0x9cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01E6
        gbc.setState(0x87d9, 0x6755, 0xc0c0, 0xeb9a, 0x6d8b, 0xd741, 0x0, 0x0);
        gbc.writeMem(0x87d9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6755);
        EXPECT(gbc.pc(), 0x87da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d9), 0xb1);
        // B1 01E7
        gbc.setState(0x9a32, 0x1287, 0x390, 0xea7, 0xeb7c, 0x90d9, 0x1, 0x0);
        gbc.writeMem(0x9a32, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1287);
        EXPECT(gbc.pc(), 0x9a33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a32), 0xb1);
        // B1 01E8
        gbc.setState(0xa948, 0x800c, 0xdac0, 0xa563, 0x2a10, 0x95f0, 0x1, 0x1);
        gbc.writeMem(0xa948, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x800c);
        EXPECT(gbc.pc(), 0xa949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa948), 0xb1);
        // B1 01EA
        gbc.setState(0x780b, 0xee23, 0xc050, 0x2dcd, 0x1a80, 0x1a0f, 0x1, 0x1);
        gbc.writeMem(0x780b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xee23);
        EXPECT(gbc.pc(), 0x780c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01EB
        gbc.setState(0x95de, 0xe05d, 0xd520, 0x4802, 0x6881, 0x855b, 0x1, 0x1);
        gbc.writeMem(0x95de, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe05d);
        EXPECT(gbc.pc(), 0x95df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95de), 0xb1);
        // B1 01EC
        gbc.setState(0x55ad, 0x501e, 0x7650, 0x7da7, 0x30e8, 0x2781, 0x0, 0x0);
        gbc.writeMem(0x55ad, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x501e);
        EXPECT(gbc.pc(), 0x55ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01ED
        gbc.setState(0x7dd4, 0x68e2, 0x5490, 0x314, 0x9013, 0xa367, 0x0, 0x0);
        gbc.writeMem(0x7dd4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x68e2);
        EXPECT(gbc.pc(), 0x7dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01EE
        gbc.setState(0xd9b7, 0x8b2, 0xdfa0, 0xe747, 0x135f, 0x1e25, 0x1, 0x1);
        gbc.writeMem(0xd9b7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8b2);
        EXPECT(gbc.pc(), 0xd9b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9b7), 0xb1);
        // B1 01EF
        gbc.setState(0xcc16, 0x5828, 0xcc30, 0x238e, 0x92cd, 0xfa76, 0x0, 0x1);
        gbc.writeMem(0xcc16, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5828);
        EXPECT(gbc.pc(), 0xcc17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc16), 0xb1);
        // B1 01F0
        gbc.setState(0x4b26, 0xd04b, 0xb1a0, 0x4a7a, 0xe9b4, 0xfc51, 0x0, 0x0);
        gbc.writeMem(0x4b26, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd04b);
        EXPECT(gbc.pc(), 0x4b27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01F1
        gbc.setState(0x5744, 0x12d7, 0x74f0, 0x5388, 0x835e, 0x246a, 0x0, 0x1);
        gbc.writeMem(0x5744, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x12d7);
        EXPECT(gbc.pc(), 0x5745);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01F2
        gbc.setState(0xe6e0, 0x9a7d, 0x20d0, 0x674e, 0xf394, 0x5cda, 0x1, 0x0);
        gbc.writeMem(0xe6e0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9a7d);
        EXPECT(gbc.pc(), 0xe6e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e0), 0xb1);
        // B1 01F3
        gbc.setState(0x317d, 0x9f08, 0x1db0, 0x588c, 0x4ca6, 0xc436, 0x0, 0x0);
        gbc.writeMem(0x317d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9f08);
        EXPECT(gbc.pc(), 0x317e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01F4
        gbc.setState(0x8167, 0xf5b3, 0x7ed0, 0xb451, 0xad21, 0x3834, 0x1, 0x0);
        gbc.writeMem(0x8167, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf5b3);
        EXPECT(gbc.pc(), 0x8168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8167), 0xb1);
        // B1 01F5
        gbc.setState(0x26e8, 0xcddb, 0xb640, 0x857d, 0xf62e, 0xc9a, 0x0, 0x1);
        gbc.writeMem(0x26e8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xcddb);
        EXPECT(gbc.pc(), 0x26e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01F6
        gbc.setState(0xdb15, 0x4b5b, 0x2dd0, 0xce2a, 0x73a3, 0x5186, 0x1, 0x1);
        gbc.writeMem(0xdb15, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4b5b);
        EXPECT(gbc.pc(), 0xdb16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb15), 0xb1);
        // B1 01F7
        gbc.setState(0x9737, 0x6ef8, 0x2400, 0xbf1a, 0x49cd, 0xb15e, 0x1, 0x0);
        gbc.writeMem(0x9737, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6ef8);
        EXPECT(gbc.pc(), 0x9738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9737), 0xb1);
        // B1 01F8
        gbc.setState(0xecfb, 0xbaea, 0x1db0, 0xb05a, 0x57ae, 0xedeb, 0x0, 0x1);
        gbc.writeMem(0xecfb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbaea);
        EXPECT(gbc.pc(), 0xecfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecfb), 0xb1);
        // B1 01F9
        gbc.setState(0x13bb, 0x6746, 0x4e70, 0x542b, 0xa9be, 0xd3fd, 0x1, 0x1);
        gbc.writeMem(0x13bb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6746);
        EXPECT(gbc.pc(), 0x13bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01FA
        gbc.setState(0x8495, 0x35b1, 0xb9c0, 0x8416, 0xcb05, 0x7a34, 0x1, 0x1);
        gbc.writeMem(0x8495, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x35b1);
        EXPECT(gbc.pc(), 0x8496);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8495), 0xb1);
        // B1 01FB
        gbc.setState(0x90f8, 0x98c0, 0x2e80, 0x3dd8, 0x4d9b, 0x6369, 0x0, 0x1);
        gbc.writeMem(0x90f8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x98c0);
        EXPECT(gbc.pc(), 0x90f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f8), 0xb1);
        // B1 01FC
        gbc.setState(0x8bff, 0x9b9e, 0x8cb0, 0xf225, 0x36fd, 0x6027, 0x0, 0x1);
        gbc.writeMem(0x8bff, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9b9e);
        EXPECT(gbc.pc(), 0x8c00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bff), 0xb1);
        // B1 01FD
        gbc.setState(0x5a15, 0xdd65, 0x8730, 0x48e4, 0xe69d, 0x6661, 0x1, 0x1);
        gbc.writeMem(0x5a15, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xdd65);
        EXPECT(gbc.pc(), 0x5a16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 01FE
        gbc.setState(0x97c1, 0xfc7, 0x87f0, 0xdc83, 0xdbaa, 0x704, 0x0, 0x0);
        gbc.writeMem(0x97c1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfc7);
        EXPECT(gbc.pc(), 0x97c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c1), 0xb1);
        // B1 01FF
        gbc.setState(0xb0c4, 0x6bea, 0x6920, 0x6afc, 0x407d, 0x146a, 0x1, 0x1);
        gbc.writeMem(0xb0c4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6bea);
        EXPECT(gbc.pc(), 0xb0c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c4), 0xb1);
        // B1 0200
        gbc.setState(0x724b, 0x711f, 0xf390, 0xde1f, 0x17ad, 0x399b, 0x1, 0x0);
        gbc.writeMem(0x724b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x711f);
        EXPECT(gbc.pc(), 0x724c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0201
        gbc.setState(0x63b0, 0x6a23, 0xe050, 0xb04e, 0x28c1, 0xf874, 0x0, 0x1);
        gbc.writeMem(0x63b0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6a23);
        EXPECT(gbc.pc(), 0x63b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0202
        gbc.setState(0x4ceb, 0x738a, 0x8850, 0x3c5, 0x50cf, 0x8ec1, 0x1, 0x0);
        gbc.writeMem(0x4ceb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x738a);
        EXPECT(gbc.pc(), 0x4cec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0203
        gbc.setState(0xa2b7, 0x73d5, 0x4090, 0x6c6c, 0xedc4, 0x5b51, 0x0, 0x0);
        gbc.writeMem(0xa2b7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x73d5);
        EXPECT(gbc.pc(), 0xa2b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b7), 0xb1);
        // B1 0204
        gbc.setState(0x9d5a, 0x3927, 0xde50, 0x30f7, 0xbd1, 0x8bae, 0x1, 0x0);
        gbc.writeMem(0x9d5a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3927);
        EXPECT(gbc.pc(), 0x9d5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d5a), 0xb1);
        // B1 0205
        gbc.setState(0xc363, 0xe61a, 0x1340, 0x8cb5, 0x7334, 0x3992, 0x0, 0x1);
        gbc.writeMem(0xc363, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe61a);
        EXPECT(gbc.pc(), 0xc364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc363), 0xb1);
        // B1 0206
        gbc.setState(0xa364, 0x5b09, 0x5fa0, 0xae93, 0xac65, 0xda5f, 0x0, 0x0);
        gbc.writeMem(0xa364, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5b09);
        EXPECT(gbc.pc(), 0xa365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa364), 0xb1);
        // B1 0207
        gbc.setState(0x9a28, 0x3bf2, 0xf330, 0xc96d, 0xffab, 0x74ce, 0x0, 0x0);
        gbc.writeMem(0x9a28, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3bf2);
        EXPECT(gbc.pc(), 0x9a29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a28), 0xb1);
        // B1 0208
        gbc.setState(0x377, 0x2ff5, 0x8a40, 0x5696, 0x6905, 0x10dc, 0x1, 0x0);
        gbc.writeMem(0x377, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2ff5);
        EXPECT(gbc.pc(), 0x378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0209
        gbc.setState(0x9e9c, 0x76cd, 0xd070, 0x3fa3, 0x42eb, 0x2857, 0x0, 0x1);
        gbc.writeMem(0x9e9c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x76cd);
        EXPECT(gbc.pc(), 0x9e9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e9c), 0xb1);
        // B1 020A
        gbc.setState(0x3ca7, 0xfd36, 0xf6d0, 0x9b3a, 0xf5ef, 0x7d74, 0x0, 0x1);
        gbc.writeMem(0x3ca7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfd36);
        EXPECT(gbc.pc(), 0x3ca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 020B
        gbc.setState(0x8909, 0x4c5b, 0x8220, 0xd945, 0x2a33, 0x8d51, 0x0, 0x0);
        gbc.writeMem(0x8909, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4c5b);
        EXPECT(gbc.pc(), 0x890a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8909), 0xb1);
        // B1 020C
        gbc.setState(0x23aa, 0xdd8c, 0xf570, 0xccab, 0x88fa, 0xf4ab, 0x1, 0x0);
        gbc.writeMem(0x23aa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xdd8c);
        EXPECT(gbc.pc(), 0x23ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 020D
        gbc.setState(0x15ef, 0xed8, 0x2ce0, 0x4bef, 0x17f2, 0xf4a4, 0x0, 0x0);
        gbc.writeMem(0x15ef, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xed8);
        EXPECT(gbc.pc(), 0x15f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 020E
        gbc.setState(0xd6b3, 0x6acb, 0xf3f0, 0xec9e, 0x55dd, 0xf7d9, 0x0, 0x1);
        gbc.writeMem(0xd6b3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6acb);
        EXPECT(gbc.pc(), 0xd6b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b3), 0xb1);
        // B1 020F
        gbc.setState(0x15e3, 0x3cc8, 0xfbf0, 0x9c55, 0x3afb, 0xff78, 0x0, 0x0);
        gbc.writeMem(0x15e3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3cc8);
        EXPECT(gbc.pc(), 0x15e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0210
        gbc.setState(0x93a2, 0xb3aa, 0x1810, 0x658b, 0xd572, 0xc3fc, 0x1, 0x0);
        gbc.writeMem(0x93a2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb3aa);
        EXPECT(gbc.pc(), 0x93a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93a2), 0xb1);
        // B1 0211
        gbc.setState(0xefaa, 0xf2aa, 0x180, 0x75e6, 0x12c9, 0xdf84, 0x1, 0x0);
        gbc.writeMem(0xefaa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf2aa);
        EXPECT(gbc.pc(), 0xefab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefaa), 0xb1);
        // B1 0212
        gbc.setState(0x9aa, 0xe0e6, 0xb560, 0x7baa, 0x87a9, 0xec84, 0x0, 0x0);
        gbc.writeMem(0x9aa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe0e6);
        EXPECT(gbc.pc(), 0x9ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0213
        gbc.setState(0x39ff, 0x6851, 0x50d0, 0x858f, 0xa731, 0x85df, 0x0, 0x0);
        gbc.writeMem(0x39ff, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6851);
        EXPECT(gbc.pc(), 0x3a00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0215
        gbc.setState(0x947d, 0xd440, 0x6b80, 0xe1e7, 0xa3e3, 0xc369, 0x1, 0x1);
        gbc.writeMem(0x947d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd440);
        EXPECT(gbc.pc(), 0x947e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x947d), 0xb1);
        // B1 0216
        gbc.setState(0x417e, 0xc5d0, 0x3ba0, 0x6e8c, 0xbbb2, 0xd110, 0x1, 0x1);
        gbc.writeMem(0x417e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc5d0);
        EXPECT(gbc.pc(), 0x417f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0217
        gbc.setState(0xb6c2, 0x41a8, 0x26a0, 0x657d, 0x1a72, 0x9d2e, 0x0, 0x1);
        gbc.writeMem(0xb6c2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x41a8);
        EXPECT(gbc.pc(), 0xb6c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c2), 0xb1);
        // B1 0218
        gbc.setState(0x3abe, 0x60fa, 0xa1c0, 0x1a3f, 0x69db, 0xc488, 0x0, 0x1);
        gbc.writeMem(0x3abe, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x60fa);
        EXPECT(gbc.pc(), 0x3abf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0219
        gbc.setState(0x73b6, 0x9e0b, 0x2930, 0xb15c, 0x648a, 0xa300, 0x0, 0x0);
        gbc.writeMem(0x73b6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9e0b);
        EXPECT(gbc.pc(), 0x73b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 021A
        gbc.setState(0x1514, 0xd4d0, 0x410, 0xb732, 0x12d9, 0x3f14, 0x0, 0x0);
        gbc.writeMem(0x1514, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd4d0);
        EXPECT(gbc.pc(), 0x1515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 021B
        gbc.setState(0x1c93, 0x58a8, 0xb320, 0xed63, 0xe4c2, 0x9076, 0x0, 0x1);
        gbc.writeMem(0x1c93, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x58a8);
        EXPECT(gbc.pc(), 0x1c94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 021C
        gbc.setState(0xd39, 0xf2af, 0x67b0, 0x1cea, 0xd451, 0x61, 0x0, 0x1);
        gbc.writeMem(0xd39, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf2af);
        EXPECT(gbc.pc(), 0xd3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 021D
        gbc.setState(0xda53, 0xa1ff, 0x4de0, 0x1d42, 0xcb2b, 0x6955, 0x0, 0x1);
        gbc.writeMem(0xda53, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa1ff);
        EXPECT(gbc.pc(), 0xda54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda53), 0xb1);
        // B1 021E
        gbc.setState(0xbbb0, 0x4c82, 0xc1d0, 0x880d, 0xf3df, 0x928f, 0x0, 0x0);
        gbc.writeMem(0xbbb0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4c82);
        EXPECT(gbc.pc(), 0xbbb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb0), 0xb1);
        // B1 021F
        gbc.setState(0x8802, 0xdc5f, 0x3470, 0xdf32, 0x2c74, 0x36be, 0x0, 0x0);
        gbc.writeMem(0x8802, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xdc5f);
        EXPECT(gbc.pc(), 0x8803);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8802), 0xb1);
        // B1 0220
        gbc.setState(0x5b3f, 0x7dc9, 0x5230, 0xaca, 0x5ae4, 0xe0ba, 0x1, 0x1);
        gbc.writeMem(0x5b3f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x7dc9);
        EXPECT(gbc.pc(), 0x5b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0221
        gbc.setState(0x1dea, 0x9b2b, 0x8b50, 0xb93b, 0x9f41, 0x723e, 0x1, 0x1);
        gbc.writeMem(0x1dea, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9b2b);
        EXPECT(gbc.pc(), 0x1deb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0222
        gbc.setState(0xe78c, 0xf6f7, 0x7330, 0xec2b, 0x89a0, 0xe066, 0x1, 0x1);
        gbc.writeMem(0xe78c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf6f7);
        EXPECT(gbc.pc(), 0xe78d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78c), 0xb1);
        // B1 0223
        gbc.setState(0xc60, 0x703b, 0x4050, 0x1863, 0x668d, 0xa610, 0x1, 0x1);
        gbc.writeMem(0xc60, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x703b);
        EXPECT(gbc.pc(), 0xc61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0224
        gbc.setState(0xaaf5, 0xe469, 0xbd00, 0x2b50, 0xd904, 0xb134, 0x0, 0x1);
        gbc.writeMem(0xaaf5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe469);
        EXPECT(gbc.pc(), 0xaaf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf5), 0xb1);
        // B1 0225
        gbc.setState(0x7e76, 0x43af, 0x4d00, 0xd61c, 0x5dfa, 0xa000, 0x1, 0x0);
        gbc.writeMem(0x7e76, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x43af);
        EXPECT(gbc.pc(), 0x7e77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0226
        gbc.setState(0x34b7, 0x8df0, 0x4e10, 0xfdb3, 0x4a7b, 0x3cc8, 0x0, 0x1);
        gbc.writeMem(0x34b7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8df0);
        EXPECT(gbc.pc(), 0x34b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0227
        gbc.setState(0x196c, 0xd83d, 0x9290, 0x5545, 0xcf20, 0x28a0, 0x1, 0x1);
        gbc.writeMem(0x196c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd83d);
        EXPECT(gbc.pc(), 0x196d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0228
        gbc.setState(0xba0f, 0x76ee, 0xd970, 0x7311, 0x2015, 0x8b80, 0x1, 0x0);
        gbc.writeMem(0xba0f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x76ee);
        EXPECT(gbc.pc(), 0xba10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba0f), 0xb1);
        // B1 0229
        gbc.setState(0xb90c, 0x1ad6, 0xe280, 0xfd81, 0x206f, 0xc462, 0x0, 0x0);
        gbc.writeMem(0xb90c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1ad6);
        EXPECT(gbc.pc(), 0xb90d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb90c), 0xb1);
        // B1 022A
        gbc.setState(0x8fbc, 0x985f, 0x4070, 0x278, 0x865c, 0xcac4, 0x1, 0x0);
        gbc.writeMem(0x8fbc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x985f);
        EXPECT(gbc.pc(), 0x8fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fbc), 0xb1);
        // B1 022B
        gbc.setState(0x69ab, 0xefba, 0x3970, 0x73e8, 0x2b4e, 0xf07e, 0x1, 0x1);
        gbc.writeMem(0x69ab, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xefba);
        EXPECT(gbc.pc(), 0x69ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 022C
        gbc.setState(0xe0bc, 0xd332, 0xbaf0, 0x3719, 0xbe92, 0x65e5, 0x0, 0x1);
        gbc.writeMem(0xe0bc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd332);
        EXPECT(gbc.pc(), 0xe0bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0bc), 0xb1);
        // B1 022D
        gbc.setState(0xbacb, 0xe789, 0x1300, 0xfff, 0xdf8f, 0x5b1d, 0x1, 0x0);
        gbc.writeMem(0xbacb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe789);
        EXPECT(gbc.pc(), 0xbacc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbacb), 0xb1);
        // B1 022E
        gbc.setState(0x9783, 0x43f2, 0xf9e0, 0x5756, 0xed5e, 0x7c16, 0x0, 0x0);
        gbc.writeMem(0x9783, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x43f2);
        EXPECT(gbc.pc(), 0x9784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9783), 0xb1);
        // B1 022F
        gbc.setState(0x9790, 0x66a7, 0x4180, 0x6054, 0x116b, 0xb8d2, 0x0, 0x1);
        gbc.writeMem(0x9790, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x66a7);
        EXPECT(gbc.pc(), 0x9791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9790), 0xb1);
        // B1 0230
        gbc.setState(0xce9d, 0xf80c, 0x630, 0x47dd, 0x85d9, 0x1e54, 0x0, 0x0);
        gbc.writeMem(0xce9d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf80c);
        EXPECT(gbc.pc(), 0xce9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce9d), 0xb1);
        // B1 0231
        gbc.setState(0x4fa0, 0x191e, 0x29c0, 0xf1fc, 0xf81f, 0xa0f, 0x0, 0x0);
        gbc.writeMem(0x4fa0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x191e);
        EXPECT(gbc.pc(), 0x4fa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0232
        gbc.setState(0x8aa4, 0x4656, 0xd5f0, 0xa563, 0x5b23, 0x8ff2, 0x1, 0x1);
        gbc.writeMem(0x8aa4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4656);
        EXPECT(gbc.pc(), 0x8aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa4), 0xb1);
        // B1 0233
        gbc.setState(0x5628, 0x80a2, 0x8bc0, 0xddca, 0xf00a, 0x35df, 0x0, 0x1);
        gbc.writeMem(0x5628, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x80a2);
        EXPECT(gbc.pc(), 0x5629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0234
        gbc.setState(0x3aa0, 0x914d, 0x14b0, 0xe235, 0x5302, 0xc76c, 0x0, 0x1);
        gbc.writeMem(0x3aa0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x914d);
        EXPECT(gbc.pc(), 0x3aa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0235
        gbc.setState(0x91ba, 0xf7bf, 0x3c20, 0x96cd, 0xb86c, 0x147f, 0x0, 0x1);
        gbc.writeMem(0x91ba, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf7bf);
        EXPECT(gbc.pc(), 0x91bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ba), 0xb1);
        // B1 0236
        gbc.setState(0xc1, 0xc754, 0x4c30, 0x56b4, 0xc3b6, 0x7f8b, 0x1, 0x0);
        gbc.writeMem(0xc1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc754);
        EXPECT(gbc.pc(), 0xc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0237
        gbc.setState(0x378d, 0xe007, 0xc630, 0x1018, 0x1651, 0xb964, 0x0, 0x0);
        gbc.writeMem(0x378d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe007);
        EXPECT(gbc.pc(), 0x378e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0238
        gbc.setState(0xee1d, 0x6279, 0x5f30, 0xdd55, 0x67c8, 0x37ed, 0x0, 0x0);
        gbc.writeMem(0xee1d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6279);
        EXPECT(gbc.pc(), 0xee1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee1d), 0xb1);
        // B1 0239
        gbc.setState(0x14e6, 0x5dc8, 0x7250, 0xe2f2, 0xb438, 0x5395, 0x1, 0x0);
        gbc.writeMem(0x14e6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5dc8);
        EXPECT(gbc.pc(), 0x14e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 023A
        gbc.setState(0xa128, 0x26d8, 0x1040, 0xc3cc, 0x32b0, 0x9a18, 0x0, 0x1);
        gbc.writeMem(0xa128, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x26d8);
        EXPECT(gbc.pc(), 0xa129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa128), 0xb1);
        // B1 023B
        gbc.setState(0xe96, 0x1a4a, 0x4a30, 0x545b, 0x7569, 0xeb0f, 0x0, 0x0);
        gbc.writeMem(0xe96, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1a4a);
        EXPECT(gbc.pc(), 0xe97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 023C
        gbc.setState(0x2d96, 0x3b88, 0x8300, 0x68ff, 0xe0c1, 0x86b, 0x0, 0x1);
        gbc.writeMem(0x2d96, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3b88);
        EXPECT(gbc.pc(), 0x2d97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 023D
        gbc.setState(0xe76b, 0x7a69, 0xda70, 0x1ff0, 0x5aec, 0x4f28, 0x1, 0x0);
        gbc.writeMem(0xe76b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x7a69);
        EXPECT(gbc.pc(), 0xe76c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe76b), 0xb1);
        // B1 023E
        gbc.setState(0x312c, 0xc441, 0x3b30, 0x5027, 0xae2, 0x29ce, 0x1, 0x0);
        gbc.writeMem(0x312c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc441);
        EXPECT(gbc.pc(), 0x312d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 023F
        gbc.setState(0x4ced, 0xf7e6, 0x32e0, 0xa722, 0xb90, 0xa939, 0x0, 0x0);
        gbc.writeMem(0x4ced, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf7e6);
        EXPECT(gbc.pc(), 0x4cee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0240
        gbc.setState(0xc3b7, 0x4bba, 0x77f0, 0xdb78, 0x866a, 0xb64f, 0x1, 0x0);
        gbc.writeMem(0xc3b7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4bba);
        EXPECT(gbc.pc(), 0xc3b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b7), 0xb1);
        // B1 0241
        gbc.setState(0x1b98, 0x87da, 0xafa0, 0x653d, 0xd4b8, 0x4d57, 0x0, 0x1);
        gbc.writeMem(0x1b98, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x87da);
        EXPECT(gbc.pc(), 0x1b99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0242
        gbc.setState(0x8fcb, 0x1d13, 0x9e70, 0x69fc, 0x6a0, 0x94b5, 0x0, 0x1);
        gbc.writeMem(0x8fcb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1d13);
        EXPECT(gbc.pc(), 0x8fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fcb), 0xb1);
        // B1 0243
        gbc.setState(0x2ba7, 0x1cfc, 0xf0c0, 0x619a, 0x85c8, 0xca32, 0x0, 0x0);
        gbc.writeMem(0x2ba7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1cfc);
        EXPECT(gbc.pc(), 0x2ba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0244
        gbc.setState(0x931f, 0xdde3, 0x19f0, 0xf91c, 0x849, 0x3f6b, 0x0, 0x0);
        gbc.writeMem(0x931f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdde3);
        EXPECT(gbc.pc(), 0x9320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x931f), 0xb1);
        // B1 0245
        gbc.setState(0x204c, 0xf38f, 0x31e0, 0xff9a, 0x197d, 0xead8, 0x0, 0x0);
        gbc.writeMem(0x204c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf38f);
        EXPECT(gbc.pc(), 0x204d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0246
        gbc.setState(0x97d0, 0xd9af, 0x8a40, 0x2309, 0xc345, 0xb751, 0x1, 0x0);
        gbc.writeMem(0x97d0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd9af);
        EXPECT(gbc.pc(), 0x97d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d0), 0xb1);
        // B1 0247
        gbc.setState(0x2b50, 0xdfd1, 0x6ae0, 0x5410, 0x7ea3, 0x761, 0x0, 0x1);
        gbc.writeMem(0x2b50, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xdfd1);
        EXPECT(gbc.pc(), 0x2b51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0248
        gbc.setState(0xb675, 0xdd80, 0x2f60, 0xab80, 0x5545, 0x48b0, 0x1, 0x0);
        gbc.writeMem(0xb675, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdd80);
        EXPECT(gbc.pc(), 0xb676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb675), 0xb1);
        // B1 0249
        gbc.setState(0xe372, 0x51b2, 0x5bb0, 0x3d62, 0x6da6, 0x939a, 0x0, 0x1);
        gbc.writeMem(0xe372, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x51b2);
        EXPECT(gbc.pc(), 0xe373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe372), 0xb1);
        // B1 024A
        gbc.setState(0x1e9, 0x586d, 0x1ff0, 0x83ce, 0xe1ff, 0x915c, 0x1, 0x0);
        gbc.writeMem(0x1e9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x586d);
        EXPECT(gbc.pc(), 0x1ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 024B
        gbc.setState(0x4e63, 0xd534, 0xa310, 0xb70b, 0xdb7, 0xedb4, 0x1, 0x0);
        gbc.writeMem(0x4e63, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd534);
        EXPECT(gbc.pc(), 0x4e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 024C
        gbc.setState(0x55ba, 0x202b, 0xcc10, 0x8bb9, 0xd039, 0xb8b1, 0x1, 0x1);
        gbc.writeMem(0x55ba, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x202b);
        EXPECT(gbc.pc(), 0x55bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 024D
        gbc.setState(0x82fe, 0x4145, 0xe540, 0x7782, 0xac4d, 0x20af, 0x0, 0x0);
        gbc.writeMem(0x82fe, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4145);
        EXPECT(gbc.pc(), 0x82ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82fe), 0xb1);
        // B1 024E
        gbc.setState(0x5b33, 0xecfb, 0xfdb0, 0xc039, 0x6e29, 0x9801, 0x1, 0x1);
        gbc.writeMem(0x5b33, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xecfb);
        EXPECT(gbc.pc(), 0x5b34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0250
        gbc.setState(0x3aaa, 0x196, 0x79f0, 0x3b2f, 0x8694, 0x5d87, 0x1, 0x0);
        gbc.writeMem(0x3aaa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x196);
        EXPECT(gbc.pc(), 0x3aab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0251
        gbc.setState(0x92eb, 0xac9e, 0xb1b0, 0x2c30, 0xc00, 0xf01, 0x1, 0x1);
        gbc.writeMem(0x92eb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xac9e);
        EXPECT(gbc.pc(), 0x92ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92eb), 0xb1);
        // B1 0252
        gbc.setState(0x672, 0x9bae, 0x58e0, 0x3548, 0xf992, 0xf1e3, 0x0, 0x0);
        gbc.writeMem(0x672, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9bae);
        EXPECT(gbc.pc(), 0x673);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0253
        gbc.setState(0xecae, 0x936e, 0xcc00, 0xa9b7, 0x9a12, 0xaef6, 0x1, 0x0);
        gbc.writeMem(0xecae, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x936e);
        EXPECT(gbc.pc(), 0xecaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecae), 0xb1);
        // B1 0254
        gbc.setState(0xa3a0, 0x3f16, 0x910, 0xfbc9, 0xc96b, 0x9ba9, 0x0, 0x1);
        gbc.writeMem(0xa3a0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3f16);
        EXPECT(gbc.pc(), 0xa3a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a0), 0xb1);
        // B1 0255
        gbc.setState(0x1483, 0x8020, 0x1b70, 0xa07f, 0x6c00, 0xcb3, 0x0, 0x1);
        gbc.writeMem(0x1483, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8020);
        EXPECT(gbc.pc(), 0x1484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0256
        gbc.setState(0xa67f, 0x2187, 0x4b50, 0xb3c0, 0x77bc, 0x71c5, 0x1, 0x1);
        gbc.writeMem(0xa67f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2187);
        EXPECT(gbc.pc(), 0xa680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa67f), 0xb1);
        // B1 0257
        gbc.setState(0x8cc8, 0xf90, 0xed60, 0x6109, 0xb32c, 0xba33, 0x1, 0x1);
        gbc.writeMem(0x8cc8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf90);
        EXPECT(gbc.pc(), 0x8cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cc8), 0xb1);
        // B1 0258
        gbc.setState(0xaf46, 0xf60e, 0x6020, 0x4666, 0x99ed, 0x401, 0x0, 0x0);
        gbc.writeMem(0xaf46, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf60e);
        EXPECT(gbc.pc(), 0xaf47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf46), 0xb1);
        // B1 0259
        gbc.setState(0x12ba, 0x721, 0x2a70, 0xf30c, 0x2370, 0xba80, 0x0, 0x0);
        gbc.writeMem(0x12ba, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x721);
        EXPECT(gbc.pc(), 0x12bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 025A
        gbc.setState(0xc76d, 0x7a3c, 0x4a10, 0x55c4, 0xe112, 0x4b95, 0x0, 0x1);
        gbc.writeMem(0xc76d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7a3c);
        EXPECT(gbc.pc(), 0xc76e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc76d), 0xb1);
        // B1 025B
        gbc.setState(0xad45, 0x21fa, 0xd500, 0x23dd, 0xf552, 0xf02f, 0x0, 0x1);
        gbc.writeMem(0xad45, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x21fa);
        EXPECT(gbc.pc(), 0xad46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad45), 0xb1);
        // B1 025C
        gbc.setState(0x424d, 0x404a, 0xd170, 0x4b94, 0xfb28, 0xc93d, 0x0, 0x1);
        gbc.writeMem(0x424d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x404a);
        EXPECT(gbc.pc(), 0x424e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 025D
        gbc.setState(0x2aaa, 0x8349, 0x8300, 0xc481, 0x3a5, 0x5b55, 0x0, 0x0);
        gbc.writeMem(0x2aaa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8349);
        EXPECT(gbc.pc(), 0x2aab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 025E
        gbc.setState(0x4702, 0x9404, 0xb610, 0xe7d, 0x44fd, 0xa79a, 0x0, 0x1);
        gbc.writeMem(0x4702, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9404);
        EXPECT(gbc.pc(), 0x4703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 025F
        gbc.setState(0x850e, 0x3a9f, 0x2040, 0x59c0, 0x1c08, 0x8ba6, 0x0, 0x1);
        gbc.writeMem(0x850e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3a9f);
        EXPECT(gbc.pc(), 0x850f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850e), 0xb1);
        // B1 0260
        gbc.setState(0x9f6f, 0xdb07, 0x36f0, 0x4b73, 0x100, 0xc08a, 0x1, 0x0);
        gbc.writeMem(0x9f6f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xdb07);
        EXPECT(gbc.pc(), 0x9f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6f), 0xb1);
        // B1 0261
        gbc.setState(0x8684, 0x89da, 0x8a90, 0x4393, 0x7c36, 0x420f, 0x1, 0x1);
        gbc.writeMem(0x8684, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x89da);
        EXPECT(gbc.pc(), 0x8685);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8684), 0xb1);
        // B1 0262
        gbc.setState(0xd9e5, 0x6b9a, 0x1460, 0x935c, 0x327d, 0x8e79, 0x0, 0x1);
        gbc.writeMem(0xd9e5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6b9a);
        EXPECT(gbc.pc(), 0xd9e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e5), 0xb1);
        // B1 0263
        gbc.setState(0x38ef, 0x9f68, 0xcde0, 0xa3e, 0xd1c5, 0x89af, 0x1, 0x0);
        gbc.writeMem(0x38ef, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9f68);
        EXPECT(gbc.pc(), 0x38f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0264
        gbc.setState(0x4c6e, 0xde84, 0x7870, 0x83d6, 0x30bd, 0xba3a, 0x1, 0x0);
        gbc.writeMem(0x4c6e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xde84);
        EXPECT(gbc.pc(), 0x4c6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0265
        gbc.setState(0x4ea7, 0x1b42, 0x4a90, 0x7a5d, 0x52b7, 0xfb99, 0x0, 0x0);
        gbc.writeMem(0x4ea7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1b42);
        EXPECT(gbc.pc(), 0x4ea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0266
        gbc.setState(0x337e, 0xb404, 0xe860, 0x3f2a, 0xa596, 0x2207, 0x1, 0x1);
        gbc.writeMem(0x337e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb404);
        EXPECT(gbc.pc(), 0x337f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0267
        gbc.setState(0x7f81, 0xc112, 0x3ac0, 0x6de, 0xeaee, 0x8127, 0x1, 0x1);
        gbc.writeMem(0x7f81, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc112);
        EXPECT(gbc.pc(), 0x7f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0268
        gbc.setState(0xd8e9, 0xab4a, 0x1a60, 0x2a64, 0x143d, 0x445d, 0x1, 0x1);
        gbc.writeMem(0xd8e9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xab4a);
        EXPECT(gbc.pc(), 0xd8ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e9), 0xb1);
        // B1 0269
        gbc.setState(0x8bc, 0x40c1, 0xe040, 0xe555, 0xd6c, 0x9e47, 0x0, 0x0);
        gbc.writeMem(0x8bc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x40c1);
        EXPECT(gbc.pc(), 0x8bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 026A
        gbc.setState(0xa2f4, 0xb197, 0x4580, 0xde97, 0xdb83, 0x745b, 0x0, 0x1);
        gbc.writeMem(0xa2f4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb197);
        EXPECT(gbc.pc(), 0xa2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f4), 0xb1);
        // B1 026B
        gbc.setState(0xe11d, 0x615e, 0x7b40, 0xe370, 0xffd9, 0x6f3, 0x0, 0x1);
        gbc.writeMem(0xe11d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x615e);
        EXPECT(gbc.pc(), 0xe11e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe11d), 0xb1);
        // B1 026C
        gbc.setState(0xdb3d, 0x909e, 0x6ff0, 0x50af, 0xac0c, 0xffe7, 0x0, 0x1);
        gbc.writeMem(0xdb3d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x909e);
        EXPECT(gbc.pc(), 0xdb3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb3d), 0xb1);
        // B1 026E
        gbc.setState(0x4fc3, 0xceef, 0x3bd0, 0x3c20, 0x8708, 0x2481, 0x0, 0x1);
        gbc.writeMem(0x4fc3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xceef);
        EXPECT(gbc.pc(), 0x4fc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 026F
        gbc.setState(0xc654, 0xf668, 0x5fa0, 0xfe48, 0x9452, 0x1408, 0x1, 0x1);
        gbc.writeMem(0xc654, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf668);
        EXPECT(gbc.pc(), 0xc655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc654), 0xb1);
        // B1 0270
        gbc.setState(0x87c9, 0x5dac, 0x8e00, 0x92db, 0x4153, 0x6597, 0x0, 0x0);
        gbc.writeMem(0x87c9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5dac);
        EXPECT(gbc.pc(), 0x87ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c9), 0xb1);
        // B1 0271
        gbc.setState(0xbcad, 0x404a, 0x37e0, 0x5750, 0xda8f, 0x7876, 0x1, 0x0);
        gbc.writeMem(0xbcad, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x404a);
        EXPECT(gbc.pc(), 0xbcae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcad), 0xb1);
        // B1 0272
        gbc.setState(0x7acb, 0x4e36, 0xb100, 0x93e3, 0xc73d, 0x95b9, 0x0, 0x0);
        gbc.writeMem(0x7acb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4e36);
        EXPECT(gbc.pc(), 0x7acc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0273
        gbc.setState(0x115, 0x3964, 0xdf70, 0x5417, 0x6f6f, 0xf637, 0x0, 0x1);
        gbc.writeMem(0x115, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3964);
        EXPECT(gbc.pc(), 0x116);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0274
        gbc.setState(0xe4ac, 0xdbe8, 0xb090, 0xbe4f, 0xbc05, 0x575, 0x0, 0x0);
        gbc.writeMem(0xe4ac, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdbe8);
        EXPECT(gbc.pc(), 0xe4ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ac), 0xb1);
        // B1 0275
        gbc.setState(0x1092, 0x3a44, 0xf8a0, 0xa347, 0xf3f4, 0x513e, 0x1, 0x1);
        gbc.writeMem(0x1092, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3a44);
        EXPECT(gbc.pc(), 0x1093);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0276
        gbc.setState(0x4a82, 0x7c1f, 0x61f0, 0x7c5a, 0xa3a6, 0xeb28, 0x1, 0x0);
        gbc.writeMem(0x4a82, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x7c1f);
        EXPECT(gbc.pc(), 0x4a83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0277
        gbc.setState(0x138b, 0x978c, 0x6cf0, 0x6b81, 0x2b50, 0xcbd0, 0x1, 0x0);
        gbc.writeMem(0x138b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x978c);
        EXPECT(gbc.pc(), 0x138c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0278
        gbc.setState(0x7bf2, 0xf4a, 0xcdb0, 0x7d, 0xdf47, 0x6cb6, 0x0, 0x1);
        gbc.writeMem(0x7bf2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf4a);
        EXPECT(gbc.pc(), 0x7bf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 027A
        gbc.setState(0xcb00, 0xe246, 0xb630, 0xfb73, 0xd824, 0xd0f9, 0x0, 0x1);
        gbc.writeMem(0xcb00, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe246);
        EXPECT(gbc.pc(), 0xcb01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb00), 0xb1);
        // B1 027B
        gbc.setState(0x990d, 0x4c9e, 0x61c0, 0xfdb6, 0xc891, 0x2870, 0x1, 0x0);
        gbc.writeMem(0x990d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4c9e);
        EXPECT(gbc.pc(), 0x990e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x990d), 0xb1);
        // B1 027C
        gbc.setState(0x37f4, 0x7fdd, 0x2180, 0x12e1, 0xa4f6, 0xfe23, 0x1, 0x0);
        gbc.writeMem(0x37f4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7fdd);
        EXPECT(gbc.pc(), 0x37f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 027D
        gbc.setState(0xe09d, 0x9b2c, 0x6f90, 0x3063, 0xa2f5, 0xaba8, 0x1, 0x0);
        gbc.writeMem(0xe09d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9b2c);
        EXPECT(gbc.pc(), 0xe09e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe09d), 0xb1);
        // B1 027E
        gbc.setState(0x46c5, 0x7fbb, 0x18a0, 0x698c, 0xdee1, 0xc5c8, 0x1, 0x0);
        gbc.writeMem(0x46c5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7fbb);
        EXPECT(gbc.pc(), 0x46c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 027F
        gbc.setState(0x6e77, 0xbfb6, 0xa3d0, 0xf956, 0x771e, 0x29a9, 0x1, 0x0);
        gbc.writeMem(0x6e77, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbfb6);
        EXPECT(gbc.pc(), 0x6e78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0280
        gbc.setState(0x25c8, 0x8740, 0x8850, 0x9264, 0x1ba, 0x9a16, 0x0, 0x0);
        gbc.writeMem(0x25c8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8740);
        EXPECT(gbc.pc(), 0x25c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0281
        gbc.setState(0x47ec, 0xabde, 0x98e0, 0xcc26, 0xf9d5, 0xa159, 0x0, 0x1);
        gbc.writeMem(0x47ec, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xabde);
        EXPECT(gbc.pc(), 0x47ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0282
        gbc.setState(0xcadc, 0x78d, 0xdf60, 0xb0a4, 0x75d, 0xb7c7, 0x1, 0x1);
        gbc.writeMem(0xcadc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x78d);
        EXPECT(gbc.pc(), 0xcadd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcadc), 0xb1);
        // B1 0283
        gbc.setState(0xfd9, 0x9a03, 0xeaf0, 0x7130, 0xd9c9, 0x1d9e, 0x0, 0x1);
        gbc.writeMem(0xfd9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9a03);
        EXPECT(gbc.pc(), 0xfda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0284
        gbc.setState(0x4560, 0xdf04, 0x53f0, 0x18c0, 0x3585, 0x4067, 0x0, 0x1);
        gbc.writeMem(0x4560, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xdf04);
        EXPECT(gbc.pc(), 0x4561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0285
        gbc.setState(0x9c89, 0x6bc6, 0x9a20, 0x2c3f, 0x58e0, 0xb0db, 0x0, 0x0);
        gbc.writeMem(0x9c89, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6bc6);
        EXPECT(gbc.pc(), 0x9c8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c89), 0xb1);
        // B1 0286
        gbc.setState(0x5643, 0x762e, 0xa700, 0xd857, 0x8349, 0xebf4, 0x1, 0x0);
        gbc.writeMem(0x5643, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x762e);
        EXPECT(gbc.pc(), 0x5644);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0287
        gbc.setState(0x2bdb, 0x7bce, 0xe0e0, 0x1df4, 0xf013, 0xd4ed, 0x0, 0x0);
        gbc.writeMem(0x2bdb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7bce);
        EXPECT(gbc.pc(), 0x2bdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0288
        gbc.setState(0x763, 0xd70b, 0x40f0, 0xdb54, 0x7555, 0x3689, 0x1, 0x1);
        gbc.writeMem(0x763, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd70b);
        EXPECT(gbc.pc(), 0x764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0289
        gbc.setState(0x5c93, 0x6bd0, 0xd860, 0xb61e, 0x5a24, 0x659a, 0x0, 0x0);
        gbc.writeMem(0x5c93, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x6bd0);
        EXPECT(gbc.pc(), 0x5c94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 028A
        gbc.setState(0xe585, 0x7c80, 0x3760, 0x9fbc, 0xc4e9, 0x3ab4, 0x0, 0x1);
        gbc.writeMem(0xe585, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7c80);
        EXPECT(gbc.pc(), 0xe586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe585), 0xb1);
        // B1 028B
        gbc.setState(0x1397, 0x5c0, 0xf580, 0x1a5a, 0x87e7, 0xdc5e, 0x1, 0x1);
        gbc.writeMem(0x1397, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5c0);
        EXPECT(gbc.pc(), 0x1398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 028C
        gbc.setState(0x6ee4, 0x1190, 0xf4d0, 0x78a3, 0x35a6, 0xf446, 0x0, 0x0);
        gbc.writeMem(0x6ee4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1190);
        EXPECT(gbc.pc(), 0x6ee5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 028D
        gbc.setState(0x3f0b, 0xbe1d, 0x97e0, 0x5a47, 0xcfa, 0x1e05, 0x0, 0x1);
        gbc.writeMem(0x3f0b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xbe1d);
        EXPECT(gbc.pc(), 0x3f0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 028E
        gbc.setState(0x5a51, 0xfc6f, 0xcfc0, 0x60a0, 0xd14, 0xfbb6, 0x0, 0x0);
        gbc.writeMem(0x5a51, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xfc6f);
        EXPECT(gbc.pc(), 0x5a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 028F
        gbc.setState(0x863d, 0x6b86, 0x19c0, 0xd209, 0xbb2e, 0xec9b, 0x1, 0x0);
        gbc.writeMem(0x863d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6b86);
        EXPECT(gbc.pc(), 0x863e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863d), 0xb1);
        // B1 0290
        gbc.setState(0x7046, 0x36cb, 0x6f30, 0x7651, 0xd3df, 0x5d06, 0x0, 0x1);
        gbc.writeMem(0x7046, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x36cb);
        EXPECT(gbc.pc(), 0x7047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0291
        gbc.setState(0x5a84, 0x3bce, 0x59b0, 0xc305, 0xccb3, 0x7c4e, 0x0, 0x1);
        gbc.writeMem(0x5a84, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3bce);
        EXPECT(gbc.pc(), 0x5a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0292
        gbc.setState(0x6d88, 0xff38, 0x8780, 0x7955, 0x7cf3, 0x1c9, 0x1, 0x1);
        gbc.writeMem(0x6d88, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xff38);
        EXPECT(gbc.pc(), 0x6d89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0293
        gbc.setState(0x44ce, 0x7c0f, 0x6d70, 0x5f6a, 0xe427, 0x68b3, 0x1, 0x1);
        gbc.writeMem(0x44ce, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7c0f);
        EXPECT(gbc.pc(), 0x44cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0295
        gbc.setState(0x15c7, 0xc500, 0x84c0, 0x1322, 0x4eea, 0x1923, 0x1, 0x0);
        gbc.writeMem(0x15c7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc500);
        EXPECT(gbc.pc(), 0x15c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0296
        gbc.setState(0xdbd4, 0x3340, 0x5450, 0x10a, 0x566d, 0x6cb4, 0x1, 0x0);
        gbc.writeMem(0xdbd4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3340);
        EXPECT(gbc.pc(), 0xdbd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd4), 0xb1);
        // B1 0297
        gbc.setState(0x35be, 0xb0e7, 0xac0, 0xe73d, 0x2782, 0x4075, 0x0, 0x0);
        gbc.writeMem(0x35be, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb0e7);
        EXPECT(gbc.pc(), 0x35bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0298
        gbc.setState(0x340f, 0x497d, 0xa4b0, 0x4368, 0xa7a6, 0xf85c, 0x0, 0x1);
        gbc.writeMem(0x340f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x497d);
        EXPECT(gbc.pc(), 0x3410);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0299
        gbc.setState(0x8404, 0xcb4c, 0x3200, 0x40a0, 0x313a, 0x7827, 0x0, 0x1);
        gbc.writeMem(0x8404, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xcb4c);
        EXPECT(gbc.pc(), 0x8405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8404), 0xb1);
        // B1 029A
        gbc.setState(0xb53e, 0x2873, 0x7930, 0x21aa, 0x887b, 0x3325, 0x1, 0x1);
        gbc.writeMem(0xb53e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2873);
        EXPECT(gbc.pc(), 0xb53f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb53e), 0xb1);
        // B1 029B
        gbc.setState(0xc8b6, 0x6313, 0x1060, 0xd914, 0x62d6, 0x7d3a, 0x0, 0x0);
        gbc.writeMem(0xc8b6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6313);
        EXPECT(gbc.pc(), 0xc8b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b6), 0xb1);
        // B1 029C
        gbc.setState(0x70cd, 0xfef9, 0x4cf0, 0x8a69, 0xc7ca, 0x45e3, 0x1, 0x0);
        gbc.writeMem(0x70cd, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xfef9);
        EXPECT(gbc.pc(), 0x70ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 029F
        gbc.setState(0xbad3, 0x3dc8, 0x70b0, 0xacac, 0x34de, 0x5ed4, 0x1, 0x1);
        gbc.writeMem(0xbad3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3dc8);
        EXPECT(gbc.pc(), 0xbad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad3), 0xb1);
        // B1 02A0
        gbc.setState(0x406, 0x847d, 0xbbd0, 0xe708, 0x435c, 0xb46, 0x1, 0x0);
        gbc.writeMem(0x406, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x847d);
        EXPECT(gbc.pc(), 0x407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02A1
        gbc.setState(0xbf24, 0xb693, 0xede0, 0x16dd, 0x8547, 0x8fe4, 0x0, 0x0);
        gbc.writeMem(0xbf24, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb693);
        EXPECT(gbc.pc(), 0xbf25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf24), 0xb1);
        // B1 02A3
        gbc.setState(0x83f3, 0x3d54, 0x41c0, 0xab62, 0x8a6, 0x4f4e, 0x1, 0x1);
        gbc.writeMem(0x83f3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3d54);
        EXPECT(gbc.pc(), 0x83f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f3), 0xb1);
        // B1 02A4
        gbc.setState(0x29b5, 0xf3a5, 0x1730, 0xda72, 0xc518, 0x6db5, 0x0, 0x1);
        gbc.writeMem(0x29b5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf3a5);
        EXPECT(gbc.pc(), 0x29b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02A5
        gbc.setState(0x9b4a, 0x279a, 0x71a0, 0xd78a, 0x7be, 0x1b4e, 0x1, 0x0);
        gbc.writeMem(0x9b4a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x279a);
        EXPECT(gbc.pc(), 0x9b4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b4a), 0xb1);
        // B1 02A6
        gbc.setState(0x5d98, 0xa818, 0x6500, 0x6b7b, 0x39a6, 0x8b1c, 0x0, 0x0);
        gbc.writeMem(0x5d98, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa818);
        EXPECT(gbc.pc(), 0x5d99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02A7
        gbc.setState(0x4649, 0x10db, 0x3c20, 0x2e67, 0x3324, 0x568b, 0x0, 0x1);
        gbc.writeMem(0x4649, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x10db);
        EXPECT(gbc.pc(), 0x464a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02A8
        gbc.setState(0xaaaa, 0xd178, 0x2e60, 0x725a, 0xdeca, 0xd28c, 0x1, 0x0);
        gbc.writeMem(0xaaaa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd178);
        EXPECT(gbc.pc(), 0xaaab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaaa), 0xb1);
        // B1 02A9
        gbc.setState(0xe04c, 0xf333, 0xde40, 0x4c9d, 0x156e, 0x45c4, 0x1, 0x1);
        gbc.writeMem(0xe04c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf333);
        EXPECT(gbc.pc(), 0xe04d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04c), 0xb1);
        // B1 02AB
        gbc.setState(0xdb50, 0x87e7, 0xe460, 0x73e, 0x926d, 0xd545, 0x1, 0x0);
        gbc.writeMem(0xdb50, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x87e7);
        EXPECT(gbc.pc(), 0xdb51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb50), 0xb1);
        // B1 02AC
        gbc.setState(0x5b65, 0xdebb, 0xfd90, 0xdb6c, 0x8847, 0x4f5f, 0x1, 0x0);
        gbc.writeMem(0x5b65, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xdebb);
        EXPECT(gbc.pc(), 0x5b66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02AD
        gbc.setState(0xeedf, 0xbb7a, 0xd970, 0x2d80, 0x955c, 0xd567, 0x0, 0x0);
        gbc.writeMem(0xeedf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbb7a);
        EXPECT(gbc.pc(), 0xeee0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeedf), 0xb1);
        // B1 02AE
        gbc.setState(0xbeb4, 0xa1cf, 0x35e0, 0x1927, 0x794c, 0xbf4d, 0x1, 0x1);
        gbc.writeMem(0xbeb4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa1cf);
        EXPECT(gbc.pc(), 0xbeb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb4), 0xb1);
        // B1 02AF
        gbc.setState(0x1beb, 0xed38, 0xea80, 0x8c1b, 0x13bf, 0x3e75, 0x0, 0x1);
        gbc.writeMem(0x1beb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xed38);
        EXPECT(gbc.pc(), 0x1bec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02B0
        gbc.setState(0x89d, 0x714a, 0xf360, 0xabe4, 0x227a, 0xf1c1, 0x1, 0x0);
        gbc.writeMem(0x89d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x714a);
        EXPECT(gbc.pc(), 0x89e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02B1
        gbc.setState(0x9f2, 0xca69, 0xa60, 0xe00b, 0x7c7, 0xe6df, 0x0, 0x0);
        gbc.writeMem(0x9f2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xca69);
        EXPECT(gbc.pc(), 0x9f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02B4
        gbc.setState(0x618c, 0x29a6, 0xaf60, 0xb1f4, 0x9a0e, 0x656f, 0x1, 0x1);
        gbc.writeMem(0x618c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x29a6);
        EXPECT(gbc.pc(), 0x618d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02B5
        gbc.setState(0x35c7, 0xe095, 0xa0, 0x8b1f, 0xa51d, 0x63b7, 0x1, 0x0);
        gbc.writeMem(0x35c7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe095);
        EXPECT(gbc.pc(), 0x35c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02B6
        gbc.setState(0x6c39, 0x29da, 0x5e60, 0x4416, 0xce1b, 0x722f, 0x0, 0x0);
        gbc.writeMem(0x6c39, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x29da);
        EXPECT(gbc.pc(), 0x6c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02B7
        gbc.setState(0x5f03, 0x92be, 0x56b0, 0x1d3a, 0xd716, 0xad5b, 0x0, 0x0);
        gbc.writeMem(0x5f03, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x92be);
        EXPECT(gbc.pc(), 0x5f04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02B8
        gbc.setState(0x2366, 0xbae1, 0xb210, 0x9149, 0x99b5, 0xe749, 0x1, 0x1);
        gbc.writeMem(0x2366, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbae1);
        EXPECT(gbc.pc(), 0x2367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02B9
        gbc.setState(0x230f, 0xe3ba, 0x80d0, 0x5194, 0x28c8, 0x34f8, 0x1, 0x0);
        gbc.writeMem(0x230f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe3ba);
        EXPECT(gbc.pc(), 0x2310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02BA
        gbc.setState(0x4f9a, 0x7b8b, 0xba00, 0x1d50, 0xf35f, 0xba5, 0x0, 0x0);
        gbc.writeMem(0x4f9a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7b8b);
        EXPECT(gbc.pc(), 0x4f9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02BB
        gbc.setState(0x233c, 0xbe35, 0x6d60, 0x841c, 0x516d, 0xe4a9, 0x0, 0x0);
        gbc.writeMem(0x233c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbe35);
        EXPECT(gbc.pc(), 0x233d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02BC
        gbc.setState(0x6852, 0xac17, 0x8e60, 0xb2c4, 0xe7aa, 0x5687, 0x1, 0x0);
        gbc.writeMem(0x6852, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xac17);
        EXPECT(gbc.pc(), 0x6853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02BD
        gbc.setState(0x2052, 0x8f1, 0x2b0, 0xff0c, 0x88ce, 0xb6e4, 0x0, 0x1);
        gbc.writeMem(0x2052, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8f1);
        EXPECT(gbc.pc(), 0x2053);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02BE
        gbc.setState(0xde45, 0x75ac, 0xb990, 0xe1d5, 0xef47, 0xf617, 0x0, 0x1);
        gbc.writeMem(0xde45, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x75ac);
        EXPECT(gbc.pc(), 0xde46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde45), 0xb1);
        // B1 02BF
        gbc.setState(0x94ce, 0x3d23, 0xcc90, 0x414d, 0x1142, 0x6bd8, 0x1, 0x1);
        gbc.writeMem(0x94ce, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3d23);
        EXPECT(gbc.pc(), 0x94cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ce), 0xb1);
        // B1 02C0
        gbc.setState(0xb95e, 0x89a8, 0x3c20, 0x3f3, 0xb028, 0xcf2a, 0x0, 0x1);
        gbc.writeMem(0xb95e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x89a8);
        EXPECT(gbc.pc(), 0xb95f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb95e), 0xb1);
        // B1 02C1
        gbc.setState(0x6952, 0xeec2, 0xd9d0, 0xce15, 0x11a6, 0xd4eb, 0x0, 0x1);
        gbc.writeMem(0x6952, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xeec2);
        EXPECT(gbc.pc(), 0x6953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02C2
        gbc.setState(0x8d69, 0x2db, 0xae60, 0x502b, 0x6e01, 0x9ef3, 0x1, 0x1);
        gbc.writeMem(0x8d69, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2db);
        EXPECT(gbc.pc(), 0x8d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d69), 0xb1);
        // B1 02C3
        gbc.setState(0xb781, 0xf853, 0x29a0, 0xc7cb, 0x498e, 0xc1c9, 0x0, 0x1);
        gbc.writeMem(0xb781, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf853);
        EXPECT(gbc.pc(), 0xb782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb781), 0xb1);
        // B1 02C4
        gbc.setState(0xc355, 0x6a4a, 0x9420, 0xa635, 0x4736, 0x25b0, 0x1, 0x1);
        gbc.writeMem(0xc355, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6a4a);
        EXPECT(gbc.pc(), 0xc356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc355), 0xb1);
        // B1 02C5
        gbc.setState(0x5fe, 0x513a, 0x8d10, 0x1063, 0xb81b, 0x1466, 0x1, 0x1);
        gbc.writeMem(0x5fe, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x513a);
        EXPECT(gbc.pc(), 0x5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02C8
        gbc.setState(0x92f6, 0xe3fc, 0xdbf0, 0xe831, 0x443f, 0x161b, 0x1, 0x0);
        gbc.writeMem(0x92f6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe3fc);
        EXPECT(gbc.pc(), 0x92f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92f6), 0xb1);
        // B1 02C9
        gbc.setState(0x20da, 0x281b, 0x8730, 0x8c8a, 0x1a68, 0x49b1, 0x0, 0x1);
        gbc.writeMem(0x20da, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x281b);
        EXPECT(gbc.pc(), 0x20db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02CA
        gbc.setState(0x15a4, 0x98c2, 0x7d60, 0x6e83, 0xfe68, 0xe4c0, 0x1, 0x1);
        gbc.writeMem(0x15a4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x98c2);
        EXPECT(gbc.pc(), 0x15a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02CB
        gbc.setState(0x7095, 0x8608, 0x99e0, 0x81d1, 0x4585, 0x62ce, 0x1, 0x1);
        gbc.writeMem(0x7095, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8608);
        EXPECT(gbc.pc(), 0x7096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02CC
        gbc.setState(0x8552, 0x41e2, 0x9130, 0x52eb, 0xfd5e, 0x19a6, 0x1, 0x0);
        gbc.writeMem(0x8552, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x41e2);
        EXPECT(gbc.pc(), 0x8553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8552), 0xb1);
        // B1 02CD
        gbc.setState(0x7d99, 0x96d7, 0x6b40, 0x7ca2, 0x8954, 0xee1b, 0x1, 0x1);
        gbc.writeMem(0x7d99, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x96d7);
        EXPECT(gbc.pc(), 0x7d9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02CE
        gbc.setState(0xe4c3, 0x8724, 0x430, 0xea43, 0x172a, 0x79eb, 0x1, 0x0);
        gbc.writeMem(0xe4c3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8724);
        EXPECT(gbc.pc(), 0xe4c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c3), 0xb1);
        // B1 02CF
        gbc.setState(0xd202, 0xd007, 0xaa80, 0xa702, 0x65f1, 0xc4c5, 0x1, 0x1);
        gbc.writeMem(0xd202, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd007);
        EXPECT(gbc.pc(), 0xd203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd202), 0xb1);
        // B1 02D0
        gbc.setState(0x5977, 0x7095, 0xf560, 0xf905, 0x88a8, 0x7864, 0x0, 0x1);
        gbc.writeMem(0x5977, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7095);
        EXPECT(gbc.pc(), 0x5978);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02D1
        gbc.setState(0x3b6f, 0xea85, 0x7e10, 0x895d, 0x449d, 0x1316, 0x1, 0x0);
        gbc.writeMem(0x3b6f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xea85);
        EXPECT(gbc.pc(), 0x3b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02D2
        gbc.setState(0x1430, 0x5995, 0xf6d0, 0xd3bd, 0xea55, 0x4058, 0x1, 0x0);
        gbc.writeMem(0x1430, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5995);
        EXPECT(gbc.pc(), 0x1431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02D3
        gbc.setState(0xa6f5, 0xdf0, 0x170, 0x277, 0x283c, 0x8345, 0x1, 0x1);
        gbc.writeMem(0xa6f5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xdf0);
        EXPECT(gbc.pc(), 0xa6f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6f5), 0xb1);
        // B1 02D4
        gbc.setState(0x491e, 0x8a13, 0x3550, 0x8b3c, 0x5ef5, 0x78d7, 0x1, 0x1);
        gbc.writeMem(0x491e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8a13);
        EXPECT(gbc.pc(), 0x491f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02D5
        gbc.setState(0x582f, 0x3f4, 0x6ef0, 0x3a7d, 0x1817, 0x80f6, 0x1, 0x0);
        gbc.writeMem(0x582f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3f4);
        EXPECT(gbc.pc(), 0x5830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02D6
        gbc.setState(0x76fc, 0xc582, 0x25d0, 0x8b5, 0xa955, 0x294a, 0x0, 0x0);
        gbc.writeMem(0x76fc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc582);
        EXPECT(gbc.pc(), 0x76fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02D7
        gbc.setState(0x7393, 0xff25, 0x9840, 0x2d6a, 0xe234, 0xeaec, 0x0, 0x1);
        gbc.writeMem(0x7393, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xff25);
        EXPECT(gbc.pc(), 0x7394);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02D8
        gbc.setState(0xc2cb, 0xb626, 0x2480, 0xc77d, 0xc941, 0x9d14, 0x0, 0x0);
        gbc.writeMem(0xc2cb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb626);
        EXPECT(gbc.pc(), 0xc2cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2cb), 0xb1);
        // B1 02D9
        gbc.setState(0x73f0, 0xe3a4, 0x7dd0, 0x83b0, 0x1f9, 0x7ed0, 0x0, 0x0);
        gbc.writeMem(0x73f0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe3a4);
        EXPECT(gbc.pc(), 0x73f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02DB
        gbc.setState(0x3c8d, 0xe780, 0xcb30, 0x111a, 0xeac7, 0xe4ca, 0x0, 0x1);
        gbc.writeMem(0x3c8d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe780);
        EXPECT(gbc.pc(), 0x3c8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02DC
        gbc.setState(0x4ba8, 0x5d0c, 0x210, 0xe0ca, 0x80cc, 0xb2a, 0x0, 0x1);
        gbc.writeMem(0x4ba8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5d0c);
        EXPECT(gbc.pc(), 0x4ba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02DD
        gbc.setState(0x8e5e, 0x4b36, 0x2ec0, 0x99de, 0x79e9, 0x8893, 0x0, 0x1);
        gbc.writeMem(0x8e5e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4b36);
        EXPECT(gbc.pc(), 0x8e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5e), 0xb1);
        // B1 02DE
        gbc.setState(0x61b7, 0x2608, 0x6390, 0xcbb4, 0x9331, 0xceb5, 0x1, 0x0);
        gbc.writeMem(0x61b7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2608);
        EXPECT(gbc.pc(), 0x61b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02DF
        gbc.setState(0x236d, 0x41c1, 0xf3b0, 0xca96, 0xd820, 0xa12c, 0x0, 0x0);
        gbc.writeMem(0x236d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x41c1);
        EXPECT(gbc.pc(), 0x236e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02E0
        gbc.setState(0xd965, 0xc9a0, 0x5100, 0xe9d2, 0x7ebf, 0x86ee, 0x1, 0x0);
        gbc.writeMem(0xd965, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc9a0);
        EXPECT(gbc.pc(), 0xd966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd965), 0xb1);
        // B1 02E1
        gbc.setState(0x4eab, 0x622f, 0x3f60, 0x2ef6, 0x7e12, 0xf812, 0x0, 0x1);
        gbc.writeMem(0x4eab, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x622f);
        EXPECT(gbc.pc(), 0x4eac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02E3
        gbc.setState(0x9d79, 0x3b69, 0xc3e0, 0x156c, 0x5dbb, 0x7ddd, 0x0, 0x0);
        gbc.writeMem(0x9d79, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3b69);
        EXPECT(gbc.pc(), 0x9d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d79), 0xb1);
        // B1 02E4
        gbc.setState(0xa4ee, 0x72a6, 0x8a70, 0x873f, 0x922d, 0xf458, 0x0, 0x0);
        gbc.writeMem(0xa4ee, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x72a6);
        EXPECT(gbc.pc(), 0xa4ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ee), 0xb1);
        // B1 02E5
        gbc.setState(0xc43f, 0x2e81, 0x3780, 0xdbf5, 0xeeb8, 0x36d0, 0x0, 0x0);
        gbc.writeMem(0xc43f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2e81);
        EXPECT(gbc.pc(), 0xc440);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc43f), 0xb1);
        // B1 02E6
        gbc.setState(0x1d08, 0x77e6, 0xe720, 0x20c2, 0x2812, 0xe62e, 0x1, 0x0);
        gbc.writeMem(0x1d08, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x77e6);
        EXPECT(gbc.pc(), 0x1d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02E7
        gbc.setState(0x5809, 0x32cd, 0x62b0, 0x3909, 0xc8dc, 0xcd6e, 0x1, 0x1);
        gbc.writeMem(0x5809, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x32cd);
        EXPECT(gbc.pc(), 0x580a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02E8
        gbc.setState(0x4a1, 0xe2a9, 0x2cb0, 0xa266, 0xeb00, 0xb50b, 0x1, 0x0);
        gbc.writeMem(0x4a1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe2a9);
        EXPECT(gbc.pc(), 0x4a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02E9
        gbc.setState(0x36c2, 0x316b, 0x1e0, 0xe94e, 0xfe54, 0x2b5e, 0x1, 0x1);
        gbc.writeMem(0x36c2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x316b);
        EXPECT(gbc.pc(), 0x36c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02EA
        gbc.setState(0xba8c, 0x4584, 0x8670, 0x2cee, 0x1e14, 0x2ea8, 0x1, 0x0);
        gbc.writeMem(0xba8c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4584);
        EXPECT(gbc.pc(), 0xba8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba8c), 0xb1);
        // B1 02EB
        gbc.setState(0xa189, 0x1ff0, 0xc240, 0xf479, 0x3375, 0xbad, 0x0, 0x0);
        gbc.writeMem(0xa189, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1ff0);
        EXPECT(gbc.pc(), 0xa18a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa189), 0xb1);
        // B1 02EC
        gbc.setState(0x8e3d, 0xc60e, 0xb80, 0x6d10, 0x9071, 0x38a6, 0x1, 0x1);
        gbc.writeMem(0x8e3d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc60e);
        EXPECT(gbc.pc(), 0x8e3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e3d), 0xb1);
        // B1 02ED
        gbc.setState(0x893b, 0x9d2f, 0x2c40, 0xe8ae, 0x5c28, 0xd33c, 0x0, 0x1);
        gbc.writeMem(0x893b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9d2f);
        EXPECT(gbc.pc(), 0x893c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x893b), 0xb1);
        // B1 02EE
        gbc.setState(0x301f, 0xca33, 0xd1a0, 0x6ec5, 0xcfd3, 0x66a6, 0x1, 0x1);
        gbc.writeMem(0x301f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xca33);
        EXPECT(gbc.pc(), 0x3020);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02EF
        gbc.setState(0xb00d, 0x1365, 0x9840, 0x9734, 0x65aa, 0x127c, 0x1, 0x1);
        gbc.writeMem(0xb00d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1365);
        EXPECT(gbc.pc(), 0xb00e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb00d), 0xb1);
        // B1 02F1
        gbc.setState(0xe750, 0x4843, 0x8ec0, 0x3996, 0xcca7, 0xa6b4, 0x0, 0x1);
        gbc.writeMem(0xe750, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4843);
        EXPECT(gbc.pc(), 0xe751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe750), 0xb1);
        // B1 02F2
        gbc.setState(0x20fe, 0xfcfe, 0x5e30, 0x243, 0xd2c3, 0xb745, 0x0, 0x1);
        gbc.writeMem(0x20fe, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xfcfe);
        EXPECT(gbc.pc(), 0x20ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02F3
        gbc.setState(0x8e32, 0x2b50, 0x8f30, 0x6af0, 0xd940, 0x1e49, 0x0, 0x1);
        gbc.writeMem(0x8e32, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x2b50);
        EXPECT(gbc.pc(), 0x8e33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e32), 0xb1);
        // B1 02F4
        gbc.setState(0x783a, 0x128e, 0xaf00, 0x3877, 0x86d9, 0x3004, 0x1, 0x0);
        gbc.writeMem(0x783a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x128e);
        EXPECT(gbc.pc(), 0x783b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02F5
        gbc.setState(0x5e57, 0xd0b4, 0xbe0, 0x6f2, 0xcabe, 0xf32d, 0x1, 0x1);
        gbc.writeMem(0x5e57, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd0b4);
        EXPECT(gbc.pc(), 0x5e58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02F6
        gbc.setState(0xa78f, 0x6064, 0xea40, 0xf376, 0x1b20, 0x5d47, 0x1, 0x1);
        gbc.writeMem(0xa78f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6064);
        EXPECT(gbc.pc(), 0xa790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa78f), 0xb1);
        // B1 02F7
        gbc.setState(0xbda5, 0x3462, 0xcf80, 0xecdf, 0xad0a, 0x28e9, 0x1, 0x1);
        gbc.writeMem(0xbda5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3462);
        EXPECT(gbc.pc(), 0xbda6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda5), 0xb1);
        // B1 02F8
        gbc.setState(0x3941, 0x5da1, 0xf5f0, 0x6614, 0xa045, 0xfd7, 0x1, 0x0);
        gbc.writeMem(0x3941, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5da1);
        EXPECT(gbc.pc(), 0x3942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02F9
        gbc.setState(0x6133, 0x45ee, 0x99c0, 0xdfed, 0x209d, 0x7ad8, 0x1, 0x1);
        gbc.writeMem(0x6133, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x45ee);
        EXPECT(gbc.pc(), 0x6134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02FB
        gbc.setState(0x4230, 0xedfd, 0x3cf0, 0xb57d, 0x74ec, 0xe508, 0x1, 0x1);
        gbc.writeMem(0x4230, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xedfd);
        EXPECT(gbc.pc(), 0x4231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02FC
        gbc.setState(0x6f8, 0x1045, 0xd7b0, 0x9493, 0x6020, 0xc6bb, 0x0, 0x0);
        gbc.writeMem(0x6f8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1045);
        EXPECT(gbc.pc(), 0x6f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 02FD
        gbc.setState(0x8360, 0x9b77, 0xc750, 0xa1e6, 0xceda, 0xb08b, 0x0, 0x1);
        gbc.writeMem(0x8360, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9b77);
        EXPECT(gbc.pc(), 0x8361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8360), 0xb1);
        // B1 0300
        gbc.setState(0xda0e, 0x14f0, 0x6090, 0xf9b5, 0xebe5, 0x5936, 0x0, 0x0);
        gbc.writeMem(0xda0e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x14f0);
        EXPECT(gbc.pc(), 0xda0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda0e), 0xb1);
        // B1 0301
        gbc.setState(0x9302, 0xba09, 0xba50, 0xaada, 0x2d55, 0x20b0, 0x0, 0x1);
        gbc.writeMem(0x9302, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xba09);
        EXPECT(gbc.pc(), 0x9303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9302), 0xb1);
        // B1 0302
        gbc.setState(0xc6a5, 0x9d77, 0x9920, 0x7a36, 0xfb2, 0xf642, 0x1, 0x0);
        gbc.writeMem(0xc6a5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9d77);
        EXPECT(gbc.pc(), 0xc6a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a5), 0xb1);
        // B1 0303
        gbc.setState(0xb00e, 0x2c10, 0x2020, 0x7c66, 0x6460, 0x5cb6, 0x1, 0x1);
        gbc.writeMem(0xb00e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2c10);
        EXPECT(gbc.pc(), 0xb00f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb00e), 0xb1);
        // B1 0304
        gbc.setState(0x66e5, 0xa548, 0xa520, 0x1b07, 0xde79, 0x65a6, 0x1, 0x0);
        gbc.writeMem(0x66e5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa548);
        EXPECT(gbc.pc(), 0x66e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0305
        gbc.setState(0xc16e, 0xf329, 0x9000, 0xbb99, 0xefd6, 0x4ee2, 0x0, 0x0);
        gbc.writeMem(0xc16e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf329);
        EXPECT(gbc.pc(), 0xc16f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16e), 0xb1);
        // B1 0306
        gbc.setState(0xd9b7, 0xeb97, 0xdfb0, 0x835b, 0x372c, 0xa6fc, 0x0, 0x1);
        gbc.writeMem(0xd9b7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xeb97);
        EXPECT(gbc.pc(), 0xd9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9b7), 0xb1);
        // B1 0308
        gbc.setState(0x773a, 0xedd5, 0x76c0, 0xaa53, 0x28dd, 0x804, 0x0, 0x0);
        gbc.writeMem(0x773a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xedd5);
        EXPECT(gbc.pc(), 0x773b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0309
        gbc.setState(0xeb60, 0xf2e0, 0xba90, 0x4430, 0x86ab, 0xb147, 0x1, 0x0);
        gbc.writeMem(0xeb60, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf2e0);
        EXPECT(gbc.pc(), 0xeb61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb60), 0xb1);
        // B1 030A
        gbc.setState(0x20f8, 0x1fd6, 0xf160, 0xa640, 0xa223, 0x487a, 0x0, 0x1);
        gbc.writeMem(0x20f8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1fd6);
        EXPECT(gbc.pc(), 0x20f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 030B
        gbc.setState(0x425f, 0xabe, 0xf6a0, 0xb6f8, 0xe710, 0xb45e, 0x1, 0x1);
        gbc.writeMem(0x425f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xabe);
        EXPECT(gbc.pc(), 0x4260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 030C
        gbc.setState(0x2e26, 0x37b2, 0x24b0, 0x19e4, 0xdded, 0x9368, 0x1, 0x1);
        gbc.writeMem(0x2e26, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x37b2);
        EXPECT(gbc.pc(), 0x2e27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 030D
        gbc.setState(0x4895, 0xd7f3, 0x14c0, 0xc5aa, 0xee0c, 0xc69, 0x1, 0x1);
        gbc.writeMem(0x4895, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd7f3);
        EXPECT(gbc.pc(), 0x4896);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 030E
        gbc.setState(0xe4bd, 0x2a89, 0x52d0, 0x719a, 0xaf34, 0x9f1e, 0x1, 0x1);
        gbc.writeMem(0xe4bd, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2a89);
        EXPECT(gbc.pc(), 0xe4be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4bd), 0xb1);
        // B1 030F
        gbc.setState(0x3e84, 0xa17e, 0x6d70, 0x1387, 0xa18, 0x378b, 0x1, 0x1);
        gbc.writeMem(0x3e84, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa17e);
        EXPECT(gbc.pc(), 0x3e85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0310
        gbc.setState(0xd48c, 0xc35f, 0x1f40, 0x4ec4, 0xc8cd, 0xe828, 0x1, 0x0);
        gbc.writeMem(0xd48c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc35f);
        EXPECT(gbc.pc(), 0xd48d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd48c), 0xb1);
        // B1 0311
        gbc.setState(0x1ffe, 0xf523, 0x920, 0xd1c4, 0xa7a9, 0x8f03, 0x1, 0x0);
        gbc.writeMem(0x1ffe, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf523);
        EXPECT(gbc.pc(), 0x1fff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0312
        gbc.setState(0x95d9, 0x112b, 0x79d0, 0x8238, 0x4b06, 0x792a, 0x1, 0x1);
        gbc.writeMem(0x95d9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x112b);
        EXPECT(gbc.pc(), 0x95da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d9), 0xb1);
        // B1 0313
        gbc.setState(0xc82c, 0x6733, 0xcb60, 0x8ae0, 0x4767, 0x51e8, 0x0, 0x1);
        gbc.writeMem(0xc82c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6733);
        EXPECT(gbc.pc(), 0xc82d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc82c), 0xb1);
        // B1 0314
        gbc.setState(0x58fb, 0x1677, 0x89a0, 0xfd50, 0x1377, 0xab59, 0x1, 0x1);
        gbc.writeMem(0x58fb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1677);
        EXPECT(gbc.pc(), 0x58fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0315
        gbc.setState(0xcf3c, 0x28b5, 0x1c00, 0x6f1a, 0x39dc, 0x4f9f, 0x1, 0x0);
        gbc.writeMem(0xcf3c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x28b5);
        EXPECT(gbc.pc(), 0xcf3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf3c), 0xb1);
        // B1 0316
        gbc.setState(0x9010, 0x34da, 0xf6a0, 0x92b2, 0x24f6, 0x363f, 0x1, 0x0);
        gbc.writeMem(0x9010, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x34da);
        EXPECT(gbc.pc(), 0x9011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9010), 0xb1);
        // B1 0317
        gbc.setState(0x99d4, 0x9aac, 0x59f0, 0x109, 0x1400, 0x58b6, 0x1, 0x1);
        gbc.writeMem(0x99d4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9aac);
        EXPECT(gbc.pc(), 0x99d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99d4), 0xb1);
        // B1 0318
        gbc.setState(0x3e78, 0xcdb5, 0x6d80, 0x3fc3, 0x3dad, 0xc87e, 0x1, 0x1);
        gbc.writeMem(0x3e78, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xcdb5);
        EXPECT(gbc.pc(), 0x3e79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0319
        gbc.setState(0x145a, 0x2603, 0xf750, 0x99f6, 0x67e2, 0xae34, 0x1, 0x1);
        gbc.writeMem(0x145a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2603);
        EXPECT(gbc.pc(), 0x145b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 031A
        gbc.setState(0x5466, 0x2650, 0x57d0, 0xb63b, 0x9529, 0x68a5, 0x1, 0x0);
        gbc.writeMem(0x5466, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2650);
        EXPECT(gbc.pc(), 0x5467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 031B
        gbc.setState(0x7a88, 0x1a29, 0x2440, 0x42e0, 0xd09b, 0xafcf, 0x0, 0x1);
        gbc.writeMem(0x7a88, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x1a29);
        EXPECT(gbc.pc(), 0x7a89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 031D
        gbc.setState(0x10ff, 0x91d9, 0xace0, 0x69b5, 0xb77d, 0x4522, 0x0, 0x1);
        gbc.writeMem(0x10ff, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x91d9);
        EXPECT(gbc.pc(), 0x1100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 031E
        gbc.setState(0xa671, 0x1523, 0xa560, 0xb2d, 0x976e, 0x2d50, 0x1, 0x0);
        gbc.writeMem(0xa671, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x1523);
        EXPECT(gbc.pc(), 0xa672);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa671), 0xb1);
        // B1 031F
        gbc.setState(0x2dad, 0x1e6d, 0x88d0, 0xc9b5, 0x9795, 0x4c16, 0x1, 0x0);
        gbc.writeMem(0x2dad, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1e6d);
        EXPECT(gbc.pc(), 0x2dae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0320
        gbc.setState(0x52e1, 0x998f, 0xba30, 0x4ad0, 0x6264, 0xf7c1, 0x0, 0x1);
        gbc.writeMem(0x52e1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x998f);
        EXPECT(gbc.pc(), 0x52e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0321
        gbc.setState(0xde4f, 0xa171, 0xc2b0, 0xb56b, 0x30, 0xd7e5, 0x0, 0x1);
        gbc.writeMem(0xde4f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa171);
        EXPECT(gbc.pc(), 0xde50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde4f), 0xb1);
        // B1 0322
        gbc.setState(0x3160, 0x8fc8, 0x2660, 0xf845, 0x904d, 0xc393, 0x0, 0x1);
        gbc.writeMem(0x3160, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8fc8);
        EXPECT(gbc.pc(), 0x3161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0324
        gbc.setState(0x7c67, 0xee5, 0x3d30, 0xbb44, 0xd321, 0xd192, 0x0, 0x0);
        gbc.writeMem(0x7c67, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xee5);
        EXPECT(gbc.pc(), 0x7c68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0325
        gbc.setState(0xe7bf, 0x841b, 0xa4d0, 0x5830, 0x5b46, 0xd6c2, 0x1, 0x0);
        gbc.writeMem(0xe7bf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x841b);
        EXPECT(gbc.pc(), 0xe7c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7bf), 0xb1);
        // B1 0326
        gbc.setState(0x8076, 0x2ce7, 0x6d60, 0x3962, 0xb380, 0x113a, 0x0, 0x0);
        gbc.writeMem(0x8076, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2ce7);
        EXPECT(gbc.pc(), 0x8077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8076), 0xb1);
        // B1 0328
        gbc.setState(0x501b, 0x8065, 0x4820, 0x1292, 0xd110, 0x5cf3, 0x0, 0x1);
        gbc.writeMem(0x501b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8065);
        EXPECT(gbc.pc(), 0x501c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0329
        gbc.setState(0x2f4d, 0xce02, 0x5370, 0xb8f6, 0x590b, 0x8115, 0x0, 0x0);
        gbc.writeMem(0x2f4d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xce02);
        EXPECT(gbc.pc(), 0x2f4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 032A
        gbc.setState(0x807b, 0x148, 0x94c0, 0xf391, 0x9142, 0x2596, 0x1, 0x0);
        gbc.writeMem(0x807b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x148);
        EXPECT(gbc.pc(), 0x807c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807b), 0xb1);
        // B1 032B
        gbc.setState(0xde05, 0xfb8d, 0x6e00, 0x5018, 0x4cf3, 0xf31d, 0x0, 0x1);
        gbc.writeMem(0xde05, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfb8d);
        EXPECT(gbc.pc(), 0xde06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde05), 0xb1);
        // B1 032C
        gbc.setState(0xaf33, 0x43b8, 0x8c50, 0x4848, 0x4393, 0x6c7c, 0x1, 0x0);
        gbc.writeMem(0xaf33, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x43b8);
        EXPECT(gbc.pc(), 0xaf34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf33), 0xb1);
        // B1 032D
        gbc.setState(0xbc5f, 0xcfab, 0x9060, 0x28ac, 0x1629, 0xab53, 0x1, 0x1);
        gbc.writeMem(0xbc5f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xcfab);
        EXPECT(gbc.pc(), 0xbc60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5f), 0xb1);
        // B1 032E
        gbc.setState(0x610b, 0xe050, 0xe650, 0x69b6, 0x3ac7, 0x7e8a, 0x1, 0x1);
        gbc.writeMem(0x610b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe050);
        EXPECT(gbc.pc(), 0x610c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 032F
        gbc.setState(0x7890, 0x9671, 0xa340, 0x28b1, 0x919c, 0xda58, 0x1, 0x0);
        gbc.writeMem(0x7890, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9671);
        EXPECT(gbc.pc(), 0x7891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0330
        gbc.setState(0xb01a, 0xc382, 0x5060, 0xb842, 0x4ceb, 0x55e, 0x0, 0x1);
        gbc.writeMem(0xb01a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc382);
        EXPECT(gbc.pc(), 0xb01b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01a), 0xb1);
        // B1 0331
        gbc.setState(0x57, 0xefa8, 0x9540, 0x2aea, 0x33b3, 0xed81, 0x1, 0x1);
        gbc.writeMem(0x57, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xefa8);
        EXPECT(gbc.pc(), 0x58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0332
        gbc.setState(0x2ba2, 0x6d10, 0x97a0, 0x18da, 0xb0d1, 0xf3d4, 0x0, 0x0);
        gbc.writeMem(0x2ba2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6d10);
        EXPECT(gbc.pc(), 0x2ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0333
        gbc.setState(0x160e, 0xb816, 0x3220, 0x4628, 0xa82d, 0xe093, 0x1, 0x1);
        gbc.writeMem(0x160e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb816);
        EXPECT(gbc.pc(), 0x160f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0334
        gbc.setState(0x7914, 0xb59e, 0xd5d0, 0xa8f7, 0x2a4a, 0x70bc, 0x0, 0x0);
        gbc.writeMem(0x7914, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb59e);
        EXPECT(gbc.pc(), 0x7915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0335
        gbc.setState(0x82d6, 0x4ddd, 0x45b0, 0xa40e, 0x25, 0x4ff4, 0x0, 0x1);
        gbc.writeMem(0x82d6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4ddd);
        EXPECT(gbc.pc(), 0x82d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d6), 0xb1);
        // B1 0336
        gbc.setState(0x4e21, 0x3601, 0x2c10, 0xd3, 0x9ede, 0x32e5, 0x1, 0x1);
        gbc.writeMem(0x4e21, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3601);
        EXPECT(gbc.pc(), 0x4e22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0337
        gbc.setState(0x6b06, 0xcbb9, 0x11a0, 0xb8c, 0xfdb1, 0x18f6, 0x0, 0x0);
        gbc.writeMem(0x6b06, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xcbb9);
        EXPECT(gbc.pc(), 0x6b07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0338
        gbc.setState(0x86cc, 0xd220, 0xa760, 0x4fbe, 0xc06f, 0x18ce, 0x0, 0x1);
        gbc.writeMem(0x86cc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd220);
        EXPECT(gbc.pc(), 0x86cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86cc), 0xb1);
        // B1 0339
        gbc.setState(0xd81c, 0xc0d7, 0xb880, 0xcb8e, 0x199a, 0xaffa, 0x1, 0x1);
        gbc.writeMem(0xd81c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc0d7);
        EXPECT(gbc.pc(), 0xd81d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81c), 0xb1);
        // B1 033A
        gbc.setState(0x499a, 0xec69, 0xfa40, 0x89c8, 0x6baa, 0xb70e, 0x0, 0x0);
        gbc.writeMem(0x499a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xec69);
        EXPECT(gbc.pc(), 0x499b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 033B
        gbc.setState(0xd437, 0xf260, 0x8a0, 0xe038, 0x1be9, 0x8dfd, 0x0, 0x0);
        gbc.writeMem(0xd437, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf260);
        EXPECT(gbc.pc(), 0xd438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd437), 0xb1);
        // B1 033C
        gbc.setState(0x9a03, 0x6853, 0xb7e0, 0x8f71, 0xbbc4, 0xc898, 0x1, 0x1);
        gbc.writeMem(0x9a03, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6853);
        EXPECT(gbc.pc(), 0x9a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a03), 0xb1);
        // B1 033D
        gbc.setState(0x8640, 0x7345, 0x2e0, 0xe11, 0xeaa3, 0xf723, 0x0, 0x1);
        gbc.writeMem(0x8640, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7345);
        EXPECT(gbc.pc(), 0x8641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8640), 0xb1);
        // B1 033E
        gbc.setState(0xaa65, 0xe889, 0x5760, 0x6014, 0xc65c, 0xd967, 0x1, 0x1);
        gbc.writeMem(0xaa65, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe889);
        EXPECT(gbc.pc(), 0xaa66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa65), 0xb1);
        // B1 033F
        gbc.setState(0xa47e, 0xe623, 0x56d0, 0x767d, 0x737f, 0xd165, 0x0, 0x1);
        gbc.writeMem(0xa47e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe623);
        EXPECT(gbc.pc(), 0xa47f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa47e), 0xb1);
        // B1 0340
        gbc.setState(0xbea2, 0x867b, 0x79c0, 0xea7a, 0xeef9, 0x4b25, 0x1, 0x0);
        gbc.writeMem(0xbea2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x867b);
        EXPECT(gbc.pc(), 0xbea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea2), 0xb1);
        // B1 0341
        gbc.setState(0x2ee9, 0x5f61, 0xd780, 0x6de7, 0xa665, 0xe992, 0x0, 0x1);
        gbc.writeMem(0x2ee9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5f61);
        EXPECT(gbc.pc(), 0x2eea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0342
        gbc.setState(0x304d, 0xed21, 0xf350, 0xbebf, 0xf297, 0x1857, 0x1, 0x0);
        gbc.writeMem(0x304d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xed21);
        EXPECT(gbc.pc(), 0x304e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0343
        gbc.setState(0xba16, 0xa375, 0x9b00, 0xf785, 0x1be8, 0x8f8f, 0x1, 0x1);
        gbc.writeMem(0xba16, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa375);
        EXPECT(gbc.pc(), 0xba17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba16), 0xb1);
        // B1 0344
        gbc.setState(0x9cef, 0x8c2d, 0x7970, 0xf4ea, 0xff48, 0x76cb, 0x1, 0x1);
        gbc.writeMem(0x9cef, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8c2d);
        EXPECT(gbc.pc(), 0x9cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cef), 0xb1);
        // B1 0345
        gbc.setState(0xef11, 0x4330, 0x4230, 0xf5f8, 0x3a69, 0x5b7f, 0x1, 0x1);
        gbc.writeMem(0xef11, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4330);
        EXPECT(gbc.pc(), 0xef12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef11), 0xb1);
        // B1 0346
        gbc.setState(0x807a, 0x6880, 0x7320, 0xbc43, 0x1b34, 0x5bba, 0x0, 0x0);
        gbc.writeMem(0x807a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6880);
        EXPECT(gbc.pc(), 0x807b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807a), 0xb1);
        // B1 0347
        gbc.setState(0x8c92, 0x1704, 0x7de0, 0x9157, 0x6332, 0x13a4, 0x0, 0x0);
        gbc.writeMem(0x8c92, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x1704);
        EXPECT(gbc.pc(), 0x8c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c92), 0xb1);
        // B1 0348
        gbc.setState(0x595d, 0xbc2b, 0x7180, 0x62cc, 0xfcab, 0x9678, 0x0, 0x1);
        gbc.writeMem(0x595d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xbc2b);
        EXPECT(gbc.pc(), 0x595e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0349
        gbc.setState(0x9fb2, 0x5c52, 0x1d40, 0x5d2d, 0x56ad, 0x7504, 0x0, 0x0);
        gbc.writeMem(0x9fb2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5c52);
        EXPECT(gbc.pc(), 0x9fb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb2), 0xb1);
        // B1 034A
        gbc.setState(0x3b02, 0xe5fe, 0xbea0, 0x2e30, 0x2fed, 0xe323, 0x1, 0x1);
        gbc.writeMem(0x3b02, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe5fe);
        EXPECT(gbc.pc(), 0x3b03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 034B
        gbc.setState(0x3f6a, 0x94fb, 0x7bd0, 0x1ff2, 0xee4b, 0x1ad3, 0x0, 0x0);
        gbc.writeMem(0x3f6a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x94fb);
        EXPECT(gbc.pc(), 0x3f6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 034C
        gbc.setState(0x6873, 0xfa09, 0x7e00, 0x9fbb, 0x7a88, 0x1c7, 0x0, 0x1);
        gbc.writeMem(0x6873, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfa09);
        EXPECT(gbc.pc(), 0x6874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 034D
        gbc.setState(0xed72, 0x7f8b, 0xc120, 0x2916, 0xa615, 0x630c, 0x1, 0x0);
        gbc.writeMem(0xed72, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7f8b);
        EXPECT(gbc.pc(), 0xed73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed72), 0xb1);
        // B1 034E
        gbc.setState(0x8b86, 0xf649, 0xeb60, 0xf129, 0x1ce9, 0x5654, 0x1, 0x0);
        gbc.writeMem(0x8b86, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf649);
        EXPECT(gbc.pc(), 0x8b87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b86), 0xb1);
        // B1 034F
        gbc.setState(0xe2df, 0x7b62, 0x6dc0, 0xc844, 0xb0b0, 0x3f52, 0x0, 0x1);
        gbc.writeMem(0xe2df, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7b62);
        EXPECT(gbc.pc(), 0xe2e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2df), 0xb1);
        // B1 0350
        gbc.setState(0xd696, 0x1b44, 0xe750, 0xca4d, 0x43a8, 0x2e54, 0x1, 0x1);
        gbc.writeMem(0xd696, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1b44);
        EXPECT(gbc.pc(), 0xd697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd696), 0xb1);
        // B1 0351
        gbc.setState(0x86ca, 0x624f, 0xb220, 0x9ce3, 0x609d, 0xab8, 0x1, 0x0);
        gbc.writeMem(0x86ca, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x624f);
        EXPECT(gbc.pc(), 0x86cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86ca), 0xb1);
        // B1 0352
        gbc.setState(0x7625, 0xc822, 0x4180, 0xac66, 0x9b85, 0x339a, 0x0, 0x1);
        gbc.writeMem(0x7625, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc822);
        EXPECT(gbc.pc(), 0x7626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0353
        gbc.setState(0x9836, 0xd077, 0xf3d0, 0xe334, 0x5fd6, 0x1ada, 0x0, 0x0);
        gbc.writeMem(0x9836, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd077);
        EXPECT(gbc.pc(), 0x9837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9836), 0xb1);
        // B1 0354
        gbc.setState(0xd804, 0x12ab, 0x4e80, 0xf0ae, 0xa159, 0xb1ef, 0x0, 0x1);
        gbc.writeMem(0xd804, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x12ab);
        EXPECT(gbc.pc(), 0xd805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd804), 0xb1);
        // B1 0355
        gbc.setState(0x2ca2, 0x9ad1, 0xa310, 0xb784, 0x7c1f, 0xb530, 0x1, 0x0);
        gbc.writeMem(0x2ca2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x9ad1);
        EXPECT(gbc.pc(), 0x2ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0356
        gbc.setState(0xd6b6, 0x8a1a, 0x2a30, 0x8446, 0x3cb8, 0x9836, 0x0, 0x1);
        gbc.writeMem(0xd6b6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8a1a);
        EXPECT(gbc.pc(), 0xd6b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b6), 0xb1);
        // B1 0357
        gbc.setState(0x1e5f, 0xf5f4, 0x8f50, 0xe204, 0x8133, 0x3b1a, 0x1, 0x0);
        gbc.writeMem(0x1e5f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf5f4);
        EXPECT(gbc.pc(), 0x1e60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0358
        gbc.setState(0xbadf, 0xb774, 0x9060, 0x6f77, 0x2f8, 0xa862, 0x0, 0x0);
        gbc.writeMem(0xbadf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb774);
        EXPECT(gbc.pc(), 0xbae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbadf), 0xb1);
        // B1 0359
        gbc.setState(0x74cd, 0xc97f, 0xa5c0, 0x6276, 0x44f9, 0x36b3, 0x1, 0x1);
        gbc.writeMem(0x74cd, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc97f);
        EXPECT(gbc.pc(), 0x74ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 035A
        gbc.setState(0xed62, 0xa914, 0xf4b0, 0x296f, 0x7aa1, 0xdf7d, 0x1, 0x1);
        gbc.writeMem(0xed62, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa914);
        EXPECT(gbc.pc(), 0xed63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed62), 0xb1);
        // B1 035B
        gbc.setState(0x7781, 0xf8, 0xd490, 0xb70a, 0xe8c9, 0x5e2f, 0x1, 0x0);
        gbc.writeMem(0x7781, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf8);
        EXPECT(gbc.pc(), 0x7782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 035C
        gbc.setState(0xd1b8, 0x626d, 0x60f0, 0x433d, 0xbfe4, 0xb552, 0x0, 0x1);
        gbc.writeMem(0xd1b8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x626d);
        EXPECT(gbc.pc(), 0xd1b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b8), 0xb1);
        // B1 035D
        gbc.setState(0x9579, 0x16b6, 0x7550, 0xaf1d, 0x7399, 0xfe90, 0x0, 0x1);
        gbc.writeMem(0x9579, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x16b6);
        EXPECT(gbc.pc(), 0x957a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9579), 0xb1);
        // B1 035E
        gbc.setState(0x9022, 0xb12f, 0x3bb0, 0xe3ea, 0xbacb, 0xf0ea, 0x0, 0x1);
        gbc.writeMem(0x9022, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb12f);
        EXPECT(gbc.pc(), 0x9023);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9022), 0xb1);
        // B1 035F
        gbc.setState(0x4313, 0x765d, 0x8270, 0x598d, 0x1636, 0xd592, 0x0, 0x0);
        gbc.writeMem(0x4313, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x765d);
        EXPECT(gbc.pc(), 0x4314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0360
        gbc.setState(0x510, 0x374d, 0x91b0, 0x223b, 0x1232, 0x7d44, 0x0, 0x0);
        gbc.writeMem(0x510, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x374d);
        EXPECT(gbc.pc(), 0x511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0361
        gbc.setState(0xc8b3, 0x30c4, 0x2bd0, 0x57d3, 0x21b2, 0x16f4, 0x0, 0x0);
        gbc.writeMem(0xc8b3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x30c4);
        EXPECT(gbc.pc(), 0xc8b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b3), 0xb1);
        // B1 0362
        gbc.setState(0xcd3f, 0x555f, 0x2c80, 0x79eb, 0xf84, 0x6c6c, 0x0, 0x0);
        gbc.writeMem(0xcd3f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x555f);
        EXPECT(gbc.pc(), 0xcd40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd3f), 0xb1);
        // B1 0363
        gbc.setState(0xb48c, 0x6dc2, 0x99c0, 0xa279, 0xd798, 0x7512, 0x0, 0x1);
        gbc.writeMem(0xb48c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6dc2);
        EXPECT(gbc.pc(), 0xb48d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb48c), 0xb1);
        // B1 0364
        gbc.setState(0xcdf5, 0xdcb0, 0x3ed0, 0x212c, 0x7a77, 0xd64a, 0x1, 0x0);
        gbc.writeMem(0xcdf5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xdcb0);
        EXPECT(gbc.pc(), 0xcdf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf5), 0xb1);
        // B1 0365
        gbc.setState(0x32aa, 0x458, 0xdd30, 0x2c82, 0x62ee, 0xc4dc, 0x1, 0x1);
        gbc.writeMem(0x32aa, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x458);
        EXPECT(gbc.pc(), 0x32ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0366
        gbc.setState(0x7715, 0x8ff6, 0x1070, 0x3c2a, 0x79ff, 0xece, 0x1, 0x0);
        gbc.writeMem(0x7715, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8ff6);
        EXPECT(gbc.pc(), 0x7716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0367
        gbc.setState(0x3f1c, 0x50ac, 0x6b30, 0x3a6, 0x5498, 0x4f87, 0x1, 0x1);
        gbc.writeMem(0x3f1c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x50ac);
        EXPECT(gbc.pc(), 0x3f1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0368
        gbc.setState(0x527, 0xc4d, 0x5b80, 0x7b98, 0x97a6, 0x9241, 0x0, 0x0);
        gbc.writeMem(0x527, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc4d);
        EXPECT(gbc.pc(), 0x528);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0369
        gbc.setState(0xa4ab, 0x4658, 0x7720, 0x2fcc, 0x845a, 0x3614, 0x1, 0x1);
        gbc.writeMem(0xa4ab, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4658);
        EXPECT(gbc.pc(), 0xa4ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ab), 0xb1);
        // B1 036A
        gbc.setState(0x45e8, 0x667a, 0x8470, 0x42d1, 0x3369, 0xb4fa, 0x0, 0x1);
        gbc.writeMem(0x45e8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x667a);
        EXPECT(gbc.pc(), 0x45e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 036B
        gbc.setState(0xbf67, 0xa7af, 0xa600, 0xae52, 0x127, 0x33f3, 0x0, 0x0);
        gbc.writeMem(0xbf67, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa7af);
        EXPECT(gbc.pc(), 0xbf68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf67), 0xb1);
        // B1 036C
        gbc.setState(0xd31e, 0x9917, 0xbfc0, 0x70da, 0x2123, 0x1a29, 0x0, 0x0);
        gbc.writeMem(0xd31e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9917);
        EXPECT(gbc.pc(), 0xd31f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd31e), 0xb1);
        // B1 036D
        gbc.setState(0xc978, 0xc5f3, 0x58e0, 0xeb89, 0x9a77, 0x2fe8, 0x1, 0x1);
        gbc.writeMem(0xc978, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc5f3);
        EXPECT(gbc.pc(), 0xc979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc978), 0xb1);
        // B1 036E
        gbc.setState(0x6486, 0x9378, 0xc390, 0x1a3f, 0xe0ff, 0x8b8e, 0x1, 0x0);
        gbc.writeMem(0x6486, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9378);
        EXPECT(gbc.pc(), 0x6487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 036F
        gbc.setState(0x44f7, 0x215c, 0x47b0, 0x67bb, 0x9eb6, 0x2f8b, 0x1, 0x0);
        gbc.writeMem(0x44f7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x215c);
        EXPECT(gbc.pc(), 0x44f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0370
        gbc.setState(0x99b8, 0x2167, 0xa9e0, 0x56a5, 0xa56, 0x741c, 0x0, 0x1);
        gbc.writeMem(0x99b8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2167);
        EXPECT(gbc.pc(), 0x99b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b8), 0xb1);
        // B1 0371
        gbc.setState(0x4488, 0x7243, 0x4020, 0x3671, 0xa2fb, 0x468, 0x1, 0x0);
        gbc.writeMem(0x4488, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7243);
        EXPECT(gbc.pc(), 0x4489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0372
        gbc.setState(0x749, 0xc146, 0x5340, 0x7ed8, 0x86c8, 0xacd8, 0x0, 0x0);
        gbc.writeMem(0x749, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc146);
        EXPECT(gbc.pc(), 0x74a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0373
        gbc.setState(0x9a4a, 0x9d51, 0xaf20, 0xb481, 0x8a5e, 0x113e, 0x0, 0x1);
        gbc.writeMem(0x9a4a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9d51);
        EXPECT(gbc.pc(), 0x9a4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4a), 0xb1);
        // B1 0374
        gbc.setState(0x8b9f, 0xf8b5, 0xda00, 0x6b70, 0xbccd, 0xc70b, 0x0, 0x0);
        gbc.writeMem(0x8b9f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf8b5);
        EXPECT(gbc.pc(), 0x8ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b9f), 0xb1);
        // B1 0375
        gbc.setState(0xd443, 0x59b2, 0x2fd0, 0xabc5, 0x1697, 0x2ac7, 0x1, 0x0);
        gbc.writeMem(0xd443, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x59b2);
        EXPECT(gbc.pc(), 0xd444);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd443), 0xb1);
        // B1 0376
        gbc.setState(0xe1bc, 0x920f, 0xc3a0, 0xb885, 0xca63, 0x1b63, 0x0, 0x1);
        gbc.writeMem(0xe1bc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x920f);
        EXPECT(gbc.pc(), 0xe1bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1bc), 0xb1);
        // B1 0377
        gbc.setState(0x8b63, 0xcb79, 0xe410, 0x395c, 0x2216, 0xc129, 0x1, 0x1);
        gbc.writeMem(0x8b63, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcb79);
        EXPECT(gbc.pc(), 0x8b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b63), 0xb1);
        // B1 0378
        gbc.setState(0x28e5, 0xfbe4, 0x82f0, 0xdb51, 0x3ce8, 0x5846, 0x1, 0x0);
        gbc.writeMem(0x28e5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xfbe4);
        EXPECT(gbc.pc(), 0x28e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0379
        gbc.setState(0xba91, 0x40c5, 0xa0c0, 0x7217, 0xe7d9, 0x84b3, 0x0, 0x1);
        gbc.writeMem(0xba91, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x40c5);
        EXPECT(gbc.pc(), 0xba92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba91), 0xb1);
        // B1 037A
        gbc.setState(0xb5dd, 0x3826, 0x29e0, 0x5167, 0xb36a, 0xc9fe, 0x1, 0x1);
        gbc.writeMem(0xb5dd, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3826);
        EXPECT(gbc.pc(), 0xb5de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5dd), 0xb1);
        // B1 037B
        gbc.setState(0x25a7, 0x228e, 0x57a0, 0x63d0, 0x828d, 0x8e4, 0x0, 0x1);
        gbc.writeMem(0x25a7, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x228e);
        EXPECT(gbc.pc(), 0x25a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 037C
        gbc.setState(0xb6ba, 0x91ac, 0xffa0, 0x23c9, 0x7e1a, 0x693e, 0x1, 0x0);
        gbc.writeMem(0xb6ba, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x91ac);
        EXPECT(gbc.pc(), 0xb6bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ba), 0xb1);
        // B1 037D
        gbc.setState(0x8129, 0x2891, 0xae80, 0xfd99, 0x79ee, 0xcca5, 0x0, 0x1);
        gbc.writeMem(0x8129, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2891);
        EXPECT(gbc.pc(), 0x812a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8129), 0xb1);
        // B1 037E
        gbc.setState(0xa1a5, 0x7651, 0x6ba0, 0x9775, 0x2ccd, 0x46c4, 0x0, 0x1);
        gbc.writeMem(0xa1a5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7651);
        EXPECT(gbc.pc(), 0xa1a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a5), 0xb1);
        // B1 037F
        gbc.setState(0x6c95, 0x8b62, 0x29b0, 0x9f16, 0x1bf7, 0x7610, 0x1, 0x0);
        gbc.writeMem(0x6c95, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8b62);
        EXPECT(gbc.pc(), 0x6c96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0380
        gbc.setState(0xba93, 0xcdde, 0xca10, 0x31b, 0xdc9f, 0x8561, 0x0, 0x1);
        gbc.writeMem(0xba93, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xcdde);
        EXPECT(gbc.pc(), 0xba94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba93), 0xb1);
        // B1 0381
        gbc.setState(0xb8e, 0xfb51, 0x8e30, 0x1c40, 0xdb85, 0xd133, 0x0, 0x0);
        gbc.writeMem(0xb8e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfb51);
        EXPECT(gbc.pc(), 0xb8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0382
        gbc.setState(0xee7e, 0xd6d, 0x7120, 0x8381, 0x524f, 0x7886, 0x1, 0x0);
        gbc.writeMem(0xee7e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd6d);
        EXPECT(gbc.pc(), 0xee7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee7e), 0xb1);
        // B1 0383
        gbc.setState(0x13ab, 0x21d5, 0x1330, 0x6674, 0xf3ef, 0x33c3, 0x1, 0x1);
        gbc.writeMem(0x13ab, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x21d5);
        EXPECT(gbc.pc(), 0x13ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0384
        gbc.setState(0xed95, 0x4f4b, 0x7810, 0xdc70, 0x878f, 0xd620, 0x1, 0x0);
        gbc.writeMem(0xed95, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4f4b);
        EXPECT(gbc.pc(), 0xed96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed95), 0xb1);
        // B1 0386
        gbc.setState(0x3959, 0xb388, 0x7ac0, 0x4790, 0xc2f3, 0x7839, 0x0, 0x0);
        gbc.writeMem(0x3959, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb388);
        EXPECT(gbc.pc(), 0x395a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0387
        gbc.setState(0x29e5, 0x4847, 0xec30, 0xd3b8, 0xaa53, 0xb19f, 0x1, 0x1);
        gbc.writeMem(0x29e5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4847);
        EXPECT(gbc.pc(), 0x29e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0388
        gbc.setState(0xc6a2, 0x7011, 0x9510, 0xb738, 0xf82a, 0xb7e4, 0x0, 0x1);
        gbc.writeMem(0xc6a2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7011);
        EXPECT(gbc.pc(), 0xc6a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a2), 0xb1);
        // B1 0389
        gbc.setState(0x9b6, 0x27b4, 0x4a10, 0x9ecd, 0xa0e, 0x6014, 0x0, 0x1);
        gbc.writeMem(0x9b6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x27b4);
        EXPECT(gbc.pc(), 0x9b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 038A
        gbc.setState(0x55c8, 0xb519, 0x80d0, 0xc850, 0xe93f, 0x30b7, 0x1, 0x0);
        gbc.writeMem(0x55c8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb519);
        EXPECT(gbc.pc(), 0x55c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 038B
        gbc.setState(0x5a0e, 0x5a91, 0xa10, 0x2f2a, 0x71e3, 0x6238, 0x1, 0x1);
        gbc.writeMem(0x5a0e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5a91);
        EXPECT(gbc.pc(), 0x5a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 038C
        gbc.setState(0xad1a, 0x244b, 0xa720, 0x1303, 0xe1ee, 0x4b0e, 0x1, 0x0);
        gbc.writeMem(0xad1a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x244b);
        EXPECT(gbc.pc(), 0xad1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1a), 0xb1);
        // B1 038D
        gbc.setState(0x424b, 0x542d, 0xf110, 0xbfb6, 0x8fea, 0xd0d, 0x1, 0x1);
        gbc.writeMem(0x424b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x542d);
        EXPECT(gbc.pc(), 0x424c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 038E
        gbc.setState(0x9d72, 0x2a12, 0x1c60, 0x687a, 0x6d42, 0x38bb, 0x0, 0x0);
        gbc.writeMem(0x9d72, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2a12);
        EXPECT(gbc.pc(), 0x9d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d72), 0xb1);
        // B1 038F
        gbc.setState(0x5fa2, 0x9fc1, 0x5580, 0x8ed4, 0xb30f, 0x52ef, 0x1, 0x1);
        gbc.writeMem(0x5fa2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9fc1);
        EXPECT(gbc.pc(), 0x5fa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0390
        gbc.setState(0x471b, 0xc746, 0x3580, 0xcb52, 0x4073, 0x89e3, 0x0, 0x1);
        gbc.writeMem(0x471b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc746);
        EXPECT(gbc.pc(), 0x471c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0391
        gbc.setState(0xdecf, 0xc9ca, 0xeec0, 0xbb3a, 0x9fb3, 0x9ffd, 0x1, 0x1);
        gbc.writeMem(0xdecf, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc9ca);
        EXPECT(gbc.pc(), 0xded0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdecf), 0xb1);
        // B1 0392
        gbc.setState(0xce46, 0x4669, 0x8f70, 0x33c2, 0x9318, 0x66fb, 0x0, 0x1);
        gbc.writeMem(0xce46, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4669);
        EXPECT(gbc.pc(), 0xce47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce46), 0xb1);
        // B1 0393
        gbc.setState(0x7225, 0x97d5, 0x8190, 0x23ff, 0x324d, 0x5205, 0x1, 0x1);
        gbc.writeMem(0x7225, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x97d5);
        EXPECT(gbc.pc(), 0x7226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0394
        gbc.setState(0x4e62, 0xc406, 0x5440, 0x2cf8, 0x7697, 0x4877, 0x1, 0x0);
        gbc.writeMem(0x4e62, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc406);
        EXPECT(gbc.pc(), 0x4e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0395
        gbc.setState(0x60e1, 0xcd1c, 0x830, 0x2d6d, 0xa13a, 0x8d2a, 0x1, 0x1);
        gbc.writeMem(0x60e1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xcd1c);
        EXPECT(gbc.pc(), 0x60e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0396
        gbc.setState(0x131e, 0xdc1a, 0xe9c0, 0x493, 0x82f7, 0x1909, 0x1, 0x1);
        gbc.writeMem(0x131e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xdc1a);
        EXPECT(gbc.pc(), 0x131f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0397
        gbc.setState(0x7c0, 0x5953, 0x8c30, 0xdf0c, 0x8d23, 0xbe18, 0x1, 0x0);
        gbc.writeMem(0x7c0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5953);
        EXPECT(gbc.pc(), 0x7c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0398
        gbc.setState(0x602b, 0xfc49, 0xa150, 0x3fbe, 0x735, 0xe588, 0x0, 0x1);
        gbc.writeMem(0x602b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xfc49);
        EXPECT(gbc.pc(), 0x602c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 0399
        gbc.setState(0xdf6f, 0xa996, 0x84c0, 0xa95d, 0xf604, 0x7c46, 0x1, 0x1);
        gbc.writeMem(0xdf6f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa996);
        EXPECT(gbc.pc(), 0xdf70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf6f), 0xb1);
        // B1 039A
        gbc.setState(0x44d1, 0x814c, 0x5630, 0x868b, 0x18ea, 0x25f2, 0x0, 0x0);
        gbc.writeMem(0x44d1, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x814c);
        EXPECT(gbc.pc(), 0x44d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 039B
        gbc.setState(0x5e9a, 0x300f, 0x3fa0, 0x5e64, 0x13c0, 0xa0d5, 0x1, 0x0);
        gbc.writeMem(0x5e9a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x300f);
        EXPECT(gbc.pc(), 0x5e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 039C
        gbc.setState(0xb990, 0xce91, 0x2940, 0xe839, 0x3e67, 0x38be, 0x1, 0x1);
        gbc.writeMem(0xb990, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xce91);
        EXPECT(gbc.pc(), 0xb991);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb990), 0xb1);
        // B1 039D
        gbc.setState(0x1c7a, 0xe7d0, 0x5400, 0x7ca8, 0x9e37, 0x3230, 0x0, 0x1);
        gbc.writeMem(0x1c7a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe7d0);
        EXPECT(gbc.pc(), 0x1c7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 039E
        gbc.setState(0x5881, 0x8093, 0x3b20, 0xf1b6, 0xfc06, 0x2fed, 0x1, 0x1);
        gbc.writeMem(0x5881, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8093);
        EXPECT(gbc.pc(), 0x5882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 039F
        gbc.setState(0x6d9, 0x49d4, 0x56a0, 0x46e9, 0x43ea, 0x5c3f, 0x1, 0x0);
        gbc.writeMem(0x6d9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x49d4);
        EXPECT(gbc.pc(), 0x6da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03A0
        gbc.setState(0x4696, 0xd4c4, 0xa330, 0x17f3, 0x173, 0xfca6, 0x0, 0x1);
        gbc.writeMem(0x4696, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd4c4);
        EXPECT(gbc.pc(), 0x4697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03A1
        gbc.setState(0x9762, 0xc9c, 0xb40, 0xbf97, 0x35ad, 0x65d, 0x1, 0x0);
        gbc.writeMem(0x9762, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc9c);
        EXPECT(gbc.pc(), 0x9763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9762), 0xb1);
        // B1 03A2
        gbc.setState(0x5bab, 0x1113, 0x7cb0, 0xdf10, 0x4e3e, 0x97d0, 0x0, 0x0);
        gbc.writeMem(0x5bab, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1113);
        EXPECT(gbc.pc(), 0x5bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03A3
        gbc.setState(0xaaec, 0x4f53, 0xe950, 0x596, 0xc823, 0x7e86, 0x0, 0x1);
        gbc.writeMem(0xaaec, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4f53);
        EXPECT(gbc.pc(), 0xaaed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaec), 0xb1);
        // B1 03A4
        gbc.setState(0x432a, 0xb86f, 0x2c20, 0xf194, 0x27e2, 0xe0d3, 0x1, 0x0);
        gbc.writeMem(0x432a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb86f);
        EXPECT(gbc.pc(), 0x432b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03A6
        gbc.setState(0xacda, 0xe7e2, 0xa4e0, 0x8eb0, 0x3c26, 0xcae1, 0x1, 0x1);
        gbc.writeMem(0xacda, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe7e2);
        EXPECT(gbc.pc(), 0xacdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacda), 0xb1);
        // B1 03A7
        gbc.setState(0x9e26, 0x1ddf, 0xc0f0, 0x9a49, 0xe2af, 0x922d, 0x0, 0x0);
        gbc.writeMem(0x9e26, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1ddf);
        EXPECT(gbc.pc(), 0x9e27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e26), 0xb1);
        // B1 03A8
        gbc.setState(0xbe52, 0x25b1, 0x2440, 0xcdfb, 0xa80, 0x95c3, 0x1, 0x1);
        gbc.writeMem(0xbe52, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x25b1);
        EXPECT(gbc.pc(), 0xbe53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe52), 0xb1);
        // B1 03A9
        gbc.setState(0x5346, 0x2d3c, 0x48b0, 0xfb15, 0x9c29, 0xb588, 0x1, 0x1);
        gbc.writeMem(0x5346, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2d3c);
        EXPECT(gbc.pc(), 0x5347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03AA
        gbc.setState(0x10e8, 0x5a38, 0x7e00, 0x5c4b, 0xe420, 0x4704, 0x1, 0x0);
        gbc.writeMem(0x10e8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5a38);
        EXPECT(gbc.pc(), 0x10e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03AB
        gbc.setState(0x3fe3, 0xe632, 0x2910, 0x214e, 0x9c20, 0x57ea, 0x1, 0x1);
        gbc.writeMem(0x3fe3, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe632);
        EXPECT(gbc.pc(), 0x3fe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03AC
        gbc.setState(0xd5a2, 0xdaa6, 0xade0, 0x7903, 0xfb64, 0x4e0b, 0x0, 0x1);
        gbc.writeMem(0xd5a2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xdaa6);
        EXPECT(gbc.pc(), 0xd5a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a2), 0xb1);
        // B1 03AD
        gbc.setState(0x4a6c, 0x5da, 0x3330, 0x4a84, 0x2a5c, 0xb086, 0x1, 0x0);
        gbc.writeMem(0x4a6c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5da);
        EXPECT(gbc.pc(), 0x4a6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03AE
        gbc.setState(0xd96e, 0x7385, 0x4b40, 0xa7f1, 0xc95c, 0xab18, 0x0, 0x1);
        gbc.writeMem(0xd96e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7385);
        EXPECT(gbc.pc(), 0xd96f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd96e), 0xb1);
        // B1 03AF
        gbc.setState(0x9ea4, 0x69f, 0xefb0, 0x9b93, 0x30e3, 0xf85c, 0x1, 0x0);
        gbc.writeMem(0x9ea4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x69f);
        EXPECT(gbc.pc(), 0x9ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea4), 0xb1);
        // B1 03B0
        gbc.setState(0xac68, 0xb2be, 0xb560, 0x6832, 0x1fb6, 0xa22b, 0x1, 0x0);
        gbc.writeMem(0xac68, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb2be);
        EXPECT(gbc.pc(), 0xac69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac68), 0xb1);
        // B1 03B1
        gbc.setState(0x306d, 0xcf82, 0xbe70, 0xabd7, 0x8bae, 0xaaf7, 0x1, 0x0);
        gbc.writeMem(0x306d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xcf82);
        EXPECT(gbc.pc(), 0x306e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03B2
        gbc.setState(0x5b2e, 0x6518, 0xff60, 0x78d7, 0xb54e, 0x4b41, 0x0, 0x0);
        gbc.writeMem(0x5b2e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6518);
        EXPECT(gbc.pc(), 0x5b2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03B3
        gbc.setState(0x83a6, 0x85d4, 0xd1c0, 0x2046, 0x17ed, 0x7fe9, 0x1, 0x1);
        gbc.writeMem(0x83a6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x85d4);
        EXPECT(gbc.pc(), 0x83a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83a6), 0xb1);
        // B1 03B4
        gbc.setState(0xe3c8, 0x8fdc, 0x6aa0, 0x644, 0x9ed8, 0x2a8, 0x1, 0x1);
        gbc.writeMem(0xe3c8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8fdc);
        EXPECT(gbc.pc(), 0xe3c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c8), 0xb1);
        // B1 03B5
        gbc.setState(0x7c2d, 0xfa67, 0x6190, 0xf8fb, 0xc1df, 0x2e2, 0x0, 0x1);
        gbc.writeMem(0x7c2d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xfa67);
        EXPECT(gbc.pc(), 0x7c2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03B6
        gbc.setState(0x15e9, 0xc3dc, 0xf080, 0xc305, 0xbd8b, 0x360d, 0x1, 0x1);
        gbc.writeMem(0x15e9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc3dc);
        EXPECT(gbc.pc(), 0x15ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03B7
        gbc.setState(0x260a, 0x9de1, 0x4b00, 0xd8d8, 0x4145, 0x55fe, 0x0, 0x0);
        gbc.writeMem(0x260a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9de1);
        EXPECT(gbc.pc(), 0x260b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03B8
        gbc.setState(0xe3b, 0x41b1, 0xab00, 0x2242, 0xf79e, 0xb014, 0x0, 0x1);
        gbc.writeMem(0xe3b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x41b1);
        EXPECT(gbc.pc(), 0xe3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03B9
        gbc.setState(0xab03, 0x117, 0x6970, 0x4191, 0x97f6, 0xe78d, 0x1, 0x0);
        gbc.writeMem(0xab03, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x117);
        EXPECT(gbc.pc(), 0xab04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab03), 0xb1);
        // B1 03BA
        gbc.setState(0x66ee, 0xe5ba, 0x6460, 0xa1ef, 0x5323, 0xd3dd, 0x0, 0x1);
        gbc.writeMem(0x66ee, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe5ba);
        EXPECT(gbc.pc(), 0x66ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03BB
        gbc.setState(0x3c3d, 0xc27f, 0x7d60, 0xb25b, 0x252e, 0xa68c, 0x1, 0x0);
        gbc.writeMem(0x3c3d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xc27f);
        EXPECT(gbc.pc(), 0x3c3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03BC
        gbc.setState(0xb9cc, 0x25fb, 0x25a0, 0x2b4d, 0xf1a8, 0x246e, 0x0, 0x0);
        gbc.writeMem(0xb9cc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x25fb);
        EXPECT(gbc.pc(), 0xb9cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9cc), 0xb1);
        // B1 03BD
        gbc.setState(0xdb28, 0x73ae, 0x9000, 0x38fc, 0xc9db, 0x6b3f, 0x0, 0x0);
        gbc.writeMem(0xdb28, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x73ae);
        EXPECT(gbc.pc(), 0xdb29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb28), 0xb1);
        // B1 03BE
        gbc.setState(0x18a, 0xd637, 0x1b30, 0x1d13, 0x7108, 0x4c68, 0x0, 0x1);
        gbc.writeMem(0x18a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd637);
        EXPECT(gbc.pc(), 0x18b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03BF
        gbc.setState(0xce62, 0x7aa7, 0xd950, 0xdaa1, 0xcdb2, 0x99d4, 0x0, 0x0);
        gbc.writeMem(0xce62, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7aa7);
        EXPECT(gbc.pc(), 0xce63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce62), 0xb1);
        // B1 03C0
        gbc.setState(0xdcc5, 0x4c63, 0x6b00, 0x6658, 0xf7db, 0x73a1, 0x0, 0x0);
        gbc.writeMem(0xdcc5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4c63);
        EXPECT(gbc.pc(), 0xdcc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcc5), 0xb1);
        // B1 03C1
        gbc.setState(0xa940, 0xfe69, 0x8190, 0x9b19, 0xbd55, 0x8af5, 0x0, 0x1);
        gbc.writeMem(0xa940, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xfe69);
        EXPECT(gbc.pc(), 0xa941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa940), 0xb1);
        // B1 03C2
        gbc.setState(0x70c9, 0x2dc2, 0xd00, 0x57f7, 0x75ea, 0x91dd, 0x0, 0x1);
        gbc.writeMem(0x70c9, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2dc2);
        EXPECT(gbc.pc(), 0x70ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03C3
        gbc.setState(0x48b4, 0x7bb, 0x4870, 0x2e9f, 0xf97f, 0xb146, 0x1, 0x1);
        gbc.writeMem(0x48b4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7bb);
        EXPECT(gbc.pc(), 0x48b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03C4
        gbc.setState(0x337a, 0xa025, 0xde70, 0x354f, 0xa3d6, 0x6706, 0x1, 0x0);
        gbc.writeMem(0x337a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa025);
        EXPECT(gbc.pc(), 0x337b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03C6
        gbc.setState(0x69d0, 0x4a05, 0x70a0, 0x6628, 0xb0b, 0xbb45, 0x0, 0x1);
        gbc.writeMem(0x69d0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4a05);
        EXPECT(gbc.pc(), 0x69d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03C7
        gbc.setState(0x2250, 0x2ddf, 0x7560, 0x4925, 0x89d6, 0x9b28, 0x1, 0x0);
        gbc.writeMem(0x2250, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2ddf);
        EXPECT(gbc.pc(), 0x2251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03C8
        gbc.setState(0x4d3c, 0x1012, 0xd5b0, 0x9a6e, 0xbfc3, 0xbb6a, 0x1, 0x1);
        gbc.writeMem(0x4d3c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1012);
        EXPECT(gbc.pc(), 0x4d3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03C9
        gbc.setState(0x7ef6, 0x516c, 0xacb0, 0x62e4, 0x96ed, 0x799b, 0x1, 0x1);
        gbc.writeMem(0x7ef6, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x516c);
        EXPECT(gbc.pc(), 0x7ef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03CA
        gbc.setState(0xe32c, 0xa051, 0xeea0, 0xdb85, 0x8a4a, 0xd545, 0x0, 0x0);
        gbc.writeMem(0xe32c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa051);
        EXPECT(gbc.pc(), 0xe32d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe32c), 0xb1);
        // B1 03CB
        gbc.setState(0x80f4, 0xb9cc, 0x3fe0, 0x2b2a, 0x920, 0xc8c0, 0x1, 0x0);
        gbc.writeMem(0x80f4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb9cc);
        EXPECT(gbc.pc(), 0x80f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f4), 0xb1);
        // B1 03CC
        gbc.setState(0x779, 0x64f, 0x20f0, 0xd38e, 0xf573, 0x2ebb, 0x0, 0x1);
        gbc.writeMem(0x779, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x64f);
        EXPECT(gbc.pc(), 0x77a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03CD
        gbc.setState(0x5d77, 0x1114, 0x2010, 0x3220, 0x91c, 0xed5f, 0x0, 0x1);
        gbc.writeMem(0x5d77, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1114);
        EXPECT(gbc.pc(), 0x5d78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03CE
        gbc.setState(0x5e59, 0x1f8c, 0x4d00, 0x492e, 0x8333, 0xc693, 0x0, 0x0);
        gbc.writeMem(0x5e59, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1f8c);
        EXPECT(gbc.pc(), 0x5e5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03CF
        gbc.setState(0x1bfe, 0x22a4, 0xe9e0, 0xaf9, 0xd3b8, 0x3f6, 0x1, 0x0);
        gbc.writeMem(0x1bfe, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x22a4);
        EXPECT(gbc.pc(), 0x1bff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03D0
        gbc.setState(0xd63a, 0x6522, 0xcb80, 0x64e0, 0x681c, 0xb271, 0x0, 0x0);
        gbc.writeMem(0xd63a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6522);
        EXPECT(gbc.pc(), 0xd63b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd63a), 0xb1);
        // B1 03D1
        gbc.setState(0x62d2, 0xc629, 0xc540, 0xacab, 0x5755, 0x27bf, 0x1, 0x1);
        gbc.writeMem(0x62d2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc629);
        EXPECT(gbc.pc(), 0x62d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03D2
        gbc.setState(0x8a7a, 0xa361, 0x7930, 0x2feb, 0x265e, 0x6f3a, 0x1, 0x1);
        gbc.writeMem(0x8a7a, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa361);
        EXPECT(gbc.pc(), 0x8a7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a7a), 0xb1);
        // B1 03D3
        gbc.setState(0x1621, 0xe907, 0xa240, 0x98fb, 0xbda7, 0x9298, 0x0, 0x1);
        gbc.writeMem(0x1621, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe907);
        EXPECT(gbc.pc(), 0x1622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03D4
        gbc.setState(0x1ad5, 0x5e1a, 0x9590, 0x6ca7, 0x3b92, 0x25fc, 0x0, 0x0);
        gbc.writeMem(0x1ad5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5e1a);
        EXPECT(gbc.pc(), 0x1ad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03D5
        gbc.setState(0x8a2c, 0xc891, 0x85b0, 0xf5a8, 0x7af8, 0x37af, 0x1, 0x0);
        gbc.writeMem(0x8a2c, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xc891);
        EXPECT(gbc.pc(), 0x8a2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a2c), 0xb1);
        // B1 03D6
        gbc.setState(0xdb2d, 0x9f65, 0xdab0, 0x6666, 0x25d6, 0x25cb, 0x0, 0x0);
        gbc.writeMem(0xdb2d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9f65);
        EXPECT(gbc.pc(), 0xdb2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb2d), 0xb1);
        // B1 03D7
        gbc.setState(0xacd5, 0x787c, 0x8840, 0xc094, 0xa48e, 0x7c9d, 0x0, 0x1);
        gbc.writeMem(0xacd5, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x787c);
        EXPECT(gbc.pc(), 0xacd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd5), 0xb1);
        // B1 03D8
        gbc.setState(0xb703, 0x9ea2, 0xd4e0, 0x96c0, 0xf778, 0x44ce, 0x1, 0x1);
        gbc.writeMem(0xb703, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9ea2);
        EXPECT(gbc.pc(), 0xb704);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb703), 0xb1);
        // B1 03DA
        gbc.setState(0x875b, 0xcec6, 0xcc10, 0xa976, 0x2471, 0x4cb6, 0x0, 0x0);
        gbc.writeMem(0x875b, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xcec6);
        EXPECT(gbc.pc(), 0x875c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x875b), 0xb1);
        // B1 03DB
        gbc.setState(0x9f16, 0x28d7, 0xd730, 0xda74, 0x2d33, 0x9c1d, 0x0, 0x1);
        gbc.writeMem(0x9f16, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x28d7);
        EXPECT(gbc.pc(), 0x9f17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f16), 0xb1);
        // B1 03DC
        gbc.setState(0x44f, 0x65cb, 0x3950, 0x184f, 0x1560, 0x930f, 0x0, 0x1);
        gbc.writeMem(0x44f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x65cb);
        EXPECT(gbc.pc(), 0x450);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03DD
        gbc.setState(0xdb1e, 0x3bdd, 0x5340, 0x11bb, 0x8442, 0x67fc, 0x0, 0x0);
        gbc.writeMem(0xdb1e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3bdd);
        EXPECT(gbc.pc(), 0xdb1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb1e), 0xb1);
        // B1 03DE
        gbc.setState(0x53c4, 0x1ace, 0x3f70, 0x53b5, 0x5c39, 0xf909, 0x1, 0x1);
        gbc.writeMem(0x53c4, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1ace);
        EXPECT(gbc.pc(), 0x53c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03DF
        gbc.setState(0xc178, 0x1cce, 0xf7f0, 0x21f3, 0x718d, 0x9cfc, 0x1, 0x0);
        gbc.writeMem(0xc178, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1cce);
        EXPECT(gbc.pc(), 0xc179);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc178), 0xb1);
        // B1 03E0
        gbc.setState(0x47a2, 0xe6bd, 0x7f50, 0x36fc, 0x9063, 0x94ef, 0x1, 0x0);
        gbc.writeMem(0x47a2, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe6bd);
        EXPECT(gbc.pc(), 0x47a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03E1
        gbc.setState(0xcd3e, 0x9f17, 0x3ae0, 0xe05f, 0x5be7, 0xaede, 0x1, 0x0);
        gbc.writeMem(0xcd3e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9f17);
        EXPECT(gbc.pc(), 0xcd3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd3e), 0xb1);
        // B1 03E2
        gbc.setState(0xaffb, 0x4e7, 0x7720, 0x4bf3, 0xad14, 0xade0, 0x1, 0x1);
        gbc.writeMem(0xaffb, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4e7);
        EXPECT(gbc.pc(), 0xaffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaffb), 0xb1);
        // B1 03E3
        gbc.setState(0x55fe, 0xa24c, 0xabf0, 0x3da9, 0x74bd, 0x70df, 0x1, 0x0);
        gbc.writeMem(0x55fe, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa24c);
        EXPECT(gbc.pc(), 0x55ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03E4
        gbc.setState(0xd89, 0x4625, 0x67f0, 0x578d, 0xb559, 0xf37b, 0x1, 0x0);
        gbc.writeMem(0xd89, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4625);
        EXPECT(gbc.pc(), 0xd8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03E5
        gbc.setState(0x5d01, 0xa8d0, 0x10e0, 0x4972, 0x4e87, 0xe701, 0x0, 0x1);
        gbc.writeMem(0x5d01, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa8d0);
        EXPECT(gbc.pc(), 0x5d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B1 03E6
        gbc.setState(0xcdc8, 0xf9a6, 0x94e0, 0x7722, 0x6a8a, 0x4c84, 0x0, 0x0);
        gbc.writeMem(0xcdc8, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf9a6);
        EXPECT(gbc.pc(), 0xcdc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdc8), 0xb1);
    }
}
#endif
