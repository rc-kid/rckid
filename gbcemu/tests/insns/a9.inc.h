    TEST(gbcemu, opcode_a9) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // A9 0000
        gbc.setState(0x4ce8, 0x782f, 0x13b0, 0x791c, 0x6b61, 0x4f22, 0x1, 0x0);
        gbc.writeMem(0x4ce8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x782f);
        EXPECT(gbc.pc(), 0x4ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0001
        gbc.setState(0x630b, 0x79aa, 0x5000, 0x92b1, 0x8587, 0x3705, 0x0, 0x0);
        gbc.writeMem(0x630b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x79aa);
        EXPECT(gbc.pc(), 0x630c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0002
        gbc.setState(0x6b78, 0x7592, 0xa730, 0x8cc0, 0xe3e5, 0x50f4, 0x0, 0x1);
        gbc.writeMem(0x6b78, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7592);
        EXPECT(gbc.pc(), 0x6b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0003
        gbc.setState(0xbe93, 0x1dc0, 0xad30, 0x468, 0x23cf, 0xbcb9, 0x1, 0x1);
        gbc.writeMem(0xbe93, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1dc0);
        EXPECT(gbc.pc(), 0xbe94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe93), 0xa9);
        // A9 0004
        gbc.setState(0xb55d, 0x35d6, 0x8d10, 0xc7db, 0xd3eb, 0x76d3, 0x0, 0x0);
        gbc.writeMem(0xb55d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x35d6);
        EXPECT(gbc.pc(), 0xb55e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb55d), 0xa9);
        // A9 0005
        gbc.setState(0x6740, 0xe9f0, 0x4b00, 0x3c39, 0x6d7a, 0x980e, 0x0, 0x0);
        gbc.writeMem(0x6740, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe9f0);
        EXPECT(gbc.pc(), 0x6741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0006
        gbc.setState(0x539b, 0xcc1e, 0x9bb0, 0x3d69, 0xc247, 0xf86f, 0x0, 0x1);
        gbc.writeMem(0x539b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcc1e);
        EXPECT(gbc.pc(), 0x539c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0007
        gbc.setState(0x7e3, 0x8e14, 0xbc40, 0xe2ce, 0x1023, 0x2de9, 0x0, 0x1);
        gbc.writeMem(0x7e3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8e14);
        EXPECT(gbc.pc(), 0x7e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0008
        gbc.setState(0xbbfa, 0x1b87, 0x7b80, 0x89cc, 0xd63b, 0x8d45, 0x1, 0x0);
        gbc.writeMem(0xbbfa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1b87);
        EXPECT(gbc.pc(), 0xbbfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbfa), 0xa9);
        // A9 0009
        gbc.setState(0xbe9d, 0xce74, 0xace0, 0xd476, 0xbdd5, 0x778a, 0x0, 0x0);
        gbc.writeMem(0xbe9d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xce74);
        EXPECT(gbc.pc(), 0xbe9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe9d), 0xa9);
        // A9 000A
        gbc.setState(0x3f2, 0xfa02, 0x9640, 0x998f, 0x9f86, 0xc2f1, 0x1, 0x1);
        gbc.writeMem(0x3f2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xfa02);
        EXPECT(gbc.pc(), 0x3f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 000B
        gbc.setState(0x4ea9, 0x9523, 0xe250, 0x9a64, 0xeb31, 0xd814, 0x1, 0x1);
        gbc.writeMem(0x4ea9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9523);
        EXPECT(gbc.pc(), 0x4eaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 000C
        gbc.setState(0x26ff, 0x33bb, 0xdda0, 0x559f, 0x797, 0x6f24, 0x1, 0x0);
        gbc.writeMem(0x26ff, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x33bb);
        EXPECT(gbc.pc(), 0x2700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 000D
        gbc.setState(0x51c9, 0x2364, 0x8170, 0xd2fd, 0x1a74, 0x8ef7, 0x0, 0x1);
        gbc.writeMem(0x51c9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2364);
        EXPECT(gbc.pc(), 0x51ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 000E
        gbc.setState(0xd95b, 0x4318, 0xfa90, 0xe1f3, 0x1191, 0x7b94, 0x0, 0x0);
        gbc.writeMem(0xd95b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4318);
        EXPECT(gbc.pc(), 0xd95c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd95b), 0xa9);
        // A9 000F
        gbc.setState(0x93bb, 0xd96d, 0x93a0, 0x7eec, 0x1c84, 0xdfa9, 0x1, 0x1);
        gbc.writeMem(0x93bb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd96d);
        EXPECT(gbc.pc(), 0x93bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93bb), 0xa9);
        // A9 0010
        gbc.setState(0x175a, 0x2aba, 0x5440, 0xa4df, 0xdd3b, 0xc339, 0x1, 0x0);
        gbc.writeMem(0x175a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2aba);
        EXPECT(gbc.pc(), 0x175b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0011
        gbc.setState(0xaf74, 0xc088, 0x51a0, 0x81ef, 0x78d1, 0xb6df, 0x1, 0x1);
        gbc.writeMem(0xaf74, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc088);
        EXPECT(gbc.pc(), 0xaf75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf74), 0xa9);
        // A9 0012
        gbc.setState(0x5063, 0x7332, 0x3d40, 0x8a47, 0xb4c1, 0x9b40, 0x1, 0x0);
        gbc.writeMem(0x5063, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7332);
        EXPECT(gbc.pc(), 0x5064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0014
        gbc.setState(0x565e, 0x9a8b, 0x4de0, 0xf092, 0x468e, 0x1ca0, 0x0, 0x1);
        gbc.writeMem(0x565e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x9a8b);
        EXPECT(gbc.pc(), 0x565f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0015
        gbc.setState(0x8b68, 0xe2b2, 0x2cc0, 0x607d, 0x9a4e, 0x5fb7, 0x0, 0x1);
        gbc.writeMem(0x8b68, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe2b2);
        EXPECT(gbc.pc(), 0x8b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b68), 0xa9);
        // A9 0016
        gbc.setState(0x2acb, 0x42b5, 0xa7e0, 0x5925, 0x33c, 0x7eb7, 0x1, 0x1);
        gbc.writeMem(0x2acb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x42b5);
        EXPECT(gbc.pc(), 0x2acc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0017
        gbc.setState(0x2552, 0xc722, 0x9a0, 0x5048, 0xf1f5, 0x9ce6, 0x1, 0x1);
        gbc.writeMem(0x2552, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc722);
        EXPECT(gbc.pc(), 0x2553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0018
        gbc.setState(0xa9f8, 0xb255, 0x1980, 0x277d, 0x2403, 0xcf22, 0x0, 0x1);
        gbc.writeMem(0xa9f8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb255);
        EXPECT(gbc.pc(), 0xa9f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9f8), 0xa9);
        // A9 0019
        gbc.setState(0x3f40, 0xed0b, 0x59b0, 0xaeda, 0x72b3, 0xbda8, 0x1, 0x0);
        gbc.writeMem(0x3f40, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xed0b);
        EXPECT(gbc.pc(), 0x3f41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 001A
        gbc.setState(0x60c3, 0xa22d, 0x96a0, 0x3040, 0x163c, 0xe532, 0x0, 0x0);
        gbc.writeMem(0x60c3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa22d);
        EXPECT(gbc.pc(), 0x60c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 001B
        gbc.setState(0xe22a, 0xf21f, 0xcd30, 0xb9f9, 0x1266, 0xc3f8, 0x1, 0x0);
        gbc.writeMem(0xe22a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf21f);
        EXPECT(gbc.pc(), 0xe22b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe22a), 0xa9);
        // A9 001C
        gbc.setState(0x3b23, 0x17ae, 0x87d0, 0x85bf, 0xceef, 0x9d33, 0x0, 0x0);
        gbc.writeMem(0x3b23, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x17ae);
        EXPECT(gbc.pc(), 0x3b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 001D
        gbc.setState(0x2937, 0x7bf0, 0xa910, 0xc942, 0x255b, 0xc1df, 0x1, 0x1);
        gbc.writeMem(0x2937, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7bf0);
        EXPECT(gbc.pc(), 0x2938);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 001E
        gbc.setState(0xba0a, 0x1035, 0x1a00, 0x3420, 0x77b9, 0xf33a, 0x0, 0x1);
        gbc.writeMem(0xba0a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1035);
        EXPECT(gbc.pc(), 0xba0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba0a), 0xa9);
        // A9 001F
        gbc.setState(0xec24, 0x314d, 0x6800, 0x1302, 0x6a4f, 0x4cee, 0x1, 0x1);
        gbc.writeMem(0xec24, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x314d);
        EXPECT(gbc.pc(), 0xec25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec24), 0xa9);
        // A9 0020
        gbc.setState(0xec18, 0xf698, 0xaa20, 0xe4ca, 0xfe59, 0xbf35, 0x0, 0x1);
        gbc.writeMem(0xec18, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf698);
        EXPECT(gbc.pc(), 0xec19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec18), 0xa9);
        // A9 0021
        gbc.setState(0x6a17, 0x53c3, 0x36a0, 0x7446, 0x189a, 0x9472, 0x1, 0x1);
        gbc.writeMem(0x6a17, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x53c3);
        EXPECT(gbc.pc(), 0x6a18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0022
        gbc.setState(0xdce9, 0xb957, 0x5f90, 0x9c64, 0x6ed2, 0x6714, 0x0, 0x0);
        gbc.writeMem(0xdce9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb957);
        EXPECT(gbc.pc(), 0xdcea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce9), 0xa9);
        // A9 0023
        gbc.setState(0xdcc6, 0x9fdc, 0xa3e0, 0xaf72, 0xd8bf, 0x4a9c, 0x0, 0x0);
        gbc.writeMem(0xdcc6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9fdc);
        EXPECT(gbc.pc(), 0xdcc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcc6), 0xa9);
        // A9 0024
        gbc.setState(0xdf09, 0xb2da, 0x4760, 0x8c2a, 0xa777, 0xd520, 0x1, 0x0);
        gbc.writeMem(0xdf09, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb2da);
        EXPECT(gbc.pc(), 0xdf0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf09), 0xa9);
        // A9 0025
        gbc.setState(0x8dde, 0x33aa, 0xaaf0, 0x5eb0, 0x2b3f, 0x82d3, 0x1, 0x0);
        gbc.writeMem(0x8dde, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x33aa);
        EXPECT(gbc.pc(), 0x8ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dde), 0xa9);
        // A9 0026
        gbc.setState(0x1f06, 0x6659, 0xe300, 0x3556, 0xdadf, 0xb559, 0x1, 0x1);
        gbc.writeMem(0x1f06, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6659);
        EXPECT(gbc.pc(), 0x1f07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0027
        gbc.setState(0x1b81, 0xee81, 0x5bf0, 0xfbed, 0x9a3f, 0xeb48, 0x0, 0x1);
        gbc.writeMem(0x1b81, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xee81);
        EXPECT(gbc.pc(), 0x1b82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0028
        gbc.setState(0x4349, 0x2a09, 0x5e80, 0xc7a2, 0xd535, 0xa282, 0x1, 0x1);
        gbc.writeMem(0x4349, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2a09);
        EXPECT(gbc.pc(), 0x434a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0029
        gbc.setState(0x4a4f, 0x8d5, 0xb620, 0xdf59, 0x21b9, 0x5458, 0x1, 0x1);
        gbc.writeMem(0x4a4f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8d5);
        EXPECT(gbc.pc(), 0x4a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 002A
        gbc.setState(0x6db6, 0x47fb, 0xa9d0, 0x4b51, 0x296e, 0x6591, 0x0, 0x1);
        gbc.writeMem(0x6db6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x47fb);
        EXPECT(gbc.pc(), 0x6db7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 002B
        gbc.setState(0xdc5b, 0x5328, 0xceb0, 0xd700, 0xa9c, 0x944e, 0x0, 0x1);
        gbc.writeMem(0xdc5b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5328);
        EXPECT(gbc.pc(), 0xdc5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc5b), 0xa9);
        // A9 002C
        gbc.setState(0xd8d4, 0xa3c8, 0x4790, 0x9ae4, 0x8d0c, 0x5eab, 0x1, 0x1);
        gbc.writeMem(0xd8d4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa3c8);
        EXPECT(gbc.pc(), 0xd8d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8d4), 0xa9);
        // A9 002D
        gbc.setState(0x11c5, 0x5223, 0x7c80, 0x99a8, 0x2f7c, 0xcc6b, 0x0, 0x1);
        gbc.writeMem(0x11c5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5223);
        EXPECT(gbc.pc(), 0x11c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 002E
        gbc.setState(0x651a, 0xe69e, 0x600, 0x65de, 0xef7c, 0x31af, 0x1, 0x1);
        gbc.writeMem(0x651a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe69e);
        EXPECT(gbc.pc(), 0x651b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 002F
        gbc.setState(0x9cc4, 0xc33, 0x9fd0, 0x65ca, 0x7a90, 0x7d91, 0x0, 0x1);
        gbc.writeMem(0x9cc4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc33);
        EXPECT(gbc.pc(), 0x9cc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cc4), 0xa9);
        // A9 0030
        gbc.setState(0xcf3c, 0x9d9e, 0x5820, 0xb208, 0xae6d, 0xda12, 0x0, 0x1);
        gbc.writeMem(0xcf3c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9d9e);
        EXPECT(gbc.pc(), 0xcf3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf3c), 0xa9);
        // A9 0031
        gbc.setState(0xabf2, 0xd798, 0x4bf0, 0x6c9e, 0x4842, 0x9ae6, 0x1, 0x1);
        gbc.writeMem(0xabf2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd798);
        EXPECT(gbc.pc(), 0xabf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabf2), 0xa9);
        // A9 0032
        gbc.setState(0xb796, 0x11e2, 0x7870, 0x2c5d, 0xf8a4, 0x8fa4, 0x0, 0x1);
        gbc.writeMem(0xb796, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x11e2);
        EXPECT(gbc.pc(), 0xb797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb796), 0xa9);
        // A9 0033
        gbc.setState(0x7ebb, 0x1fe6, 0xf650, 0x1ff0, 0x65b, 0x66de, 0x0, 0x1);
        gbc.writeMem(0x7ebb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1fe6);
        EXPECT(gbc.pc(), 0x7ebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0034
        gbc.setState(0xc2a2, 0xad61, 0x6d90, 0x1097, 0x886, 0xc97f, 0x0, 0x1);
        gbc.writeMem(0xc2a2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xad61);
        EXPECT(gbc.pc(), 0xc2a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2a2), 0xa9);
        // A9 0035
        gbc.setState(0xb35d, 0x2d61, 0x30a0, 0xb7f9, 0x1af8, 0x69ef, 0x1, 0x1);
        gbc.writeMem(0xb35d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2d61);
        EXPECT(gbc.pc(), 0xb35e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb35d), 0xa9);
        // A9 0036
        gbc.setState(0xdd84, 0x4cae, 0x6770, 0x4236, 0x62b2, 0x932c, 0x1, 0x0);
        gbc.writeMem(0xdd84, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4cae);
        EXPECT(gbc.pc(), 0xdd85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd84), 0xa9);
        // A9 0037
        gbc.setState(0x4288, 0x7a8f, 0x64b0, 0x1214, 0x157c, 0xf6a, 0x0, 0x0);
        gbc.writeMem(0x4288, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7a8f);
        EXPECT(gbc.pc(), 0x4289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0038
        gbc.setState(0xedf1, 0xa018, 0x52a0, 0xec52, 0x306a, 0xf066, 0x1, 0x1);
        gbc.writeMem(0xedf1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa018);
        EXPECT(gbc.pc(), 0xedf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf1), 0xa9);
        // A9 0039
        gbc.setState(0x9ea6, 0xb815, 0x1240, 0x8826, 0xb043, 0x588c, 0x1, 0x0);
        gbc.writeMem(0x9ea6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb815);
        EXPECT(gbc.pc(), 0x9ea7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea6), 0xa9);
        // A9 003A
        gbc.setState(0xcd07, 0xcb3f, 0x9950, 0xfdec, 0x2a2c, 0xce25, 0x0, 0x1);
        gbc.writeMem(0xcd07, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xcb3f);
        EXPECT(gbc.pc(), 0xcd08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd07), 0xa9);
        // A9 003B
        gbc.setState(0x736f, 0x6939, 0x8ba0, 0x32a, 0xfaac, 0x57bb, 0x1, 0x0);
        gbc.writeMem(0x736f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6939);
        EXPECT(gbc.pc(), 0x7370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 003C
        gbc.setState(0xd0da, 0x9e92, 0x1140, 0xf4a3, 0x84ef, 0xafc, 0x1, 0x0);
        gbc.writeMem(0xd0da, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9e92);
        EXPECT(gbc.pc(), 0xd0db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0da), 0xa9);
        // A9 003D
        gbc.setState(0x3fd3, 0x6bd, 0x9330, 0x259, 0xcca9, 0xe66d, 0x1, 0x0);
        gbc.writeMem(0x3fd3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6bd);
        EXPECT(gbc.pc(), 0x3fd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 003E
        gbc.setState(0x554a, 0x2e60, 0xf590, 0x7e76, 0x9562, 0x506a, 0x0, 0x1);
        gbc.writeMem(0x554a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2e60);
        EXPECT(gbc.pc(), 0x554b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 003F
        gbc.setState(0x98f4, 0x3e3c, 0xfbf0, 0x9ea3, 0x9de6, 0xc42, 0x1, 0x1);
        gbc.writeMem(0x98f4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3e3c);
        EXPECT(gbc.pc(), 0x98f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f4), 0xa9);
        // A9 0040
        gbc.setState(0x10fb, 0xcca5, 0xe360, 0x2bbd, 0x9eec, 0xccee, 0x1, 0x1);
        gbc.writeMem(0x10fb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xcca5);
        EXPECT(gbc.pc(), 0x10fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0041
        gbc.setState(0xa624, 0x6ba3, 0x39a0, 0x2459, 0x1aa2, 0x21b5, 0x0, 0x1);
        gbc.writeMem(0xa624, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6ba3);
        EXPECT(gbc.pc(), 0xa625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa624), 0xa9);
        // A9 0042
        gbc.setState(0xb73d, 0x3f89, 0xda50, 0x8805, 0x3378, 0xc84f, 0x1, 0x0);
        gbc.writeMem(0xb73d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3f89);
        EXPECT(gbc.pc(), 0xb73e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb73d), 0xa9);
        // A9 0043
        gbc.setState(0x597d, 0xc11c, 0xac80, 0x4a9b, 0xd781, 0xe4fa, 0x0, 0x1);
        gbc.writeMem(0x597d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc11c);
        EXPECT(gbc.pc(), 0x597e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0044
        gbc.setState(0x68a8, 0x6535, 0xa180, 0xdc0b, 0xf1da, 0x8517, 0x0, 0x1);
        gbc.writeMem(0x68a8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6535);
        EXPECT(gbc.pc(), 0x68a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0045
        gbc.setState(0x2687, 0x83a5, 0x24f0, 0xe388, 0x6e1c, 0xf1aa, 0x1, 0x0);
        gbc.writeMem(0x2687, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x83a5);
        EXPECT(gbc.pc(), 0x2688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0046
        gbc.setState(0x8b2f, 0x88c, 0x5bf0, 0x5e36, 0xb97b, 0xaeab, 0x0, 0x1);
        gbc.writeMem(0x8b2f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x88c);
        EXPECT(gbc.pc(), 0x8b30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b2f), 0xa9);
        // A9 0047
        gbc.setState(0x1f62, 0xae09, 0x8d80, 0x1f59, 0x6895, 0xed59, 0x1, 0x1);
        gbc.writeMem(0x1f62, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xae09);
        EXPECT(gbc.pc(), 0x1f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0048
        gbc.setState(0x9faf, 0x2cd8, 0x5c30, 0x1d0f, 0xda87, 0xc498, 0x1, 0x0);
        gbc.writeMem(0x9faf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2cd8);
        EXPECT(gbc.pc(), 0x9fb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9faf), 0xa9);
        // A9 0049
        gbc.setState(0xe4fe, 0x884, 0x4990, 0x2c21, 0x5e59, 0x915d, 0x0, 0x0);
        gbc.writeMem(0xe4fe, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x884);
        EXPECT(gbc.pc(), 0xe4ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4fe), 0xa9);
        // A9 004A
        gbc.setState(0x3c9, 0x77a1, 0xe00, 0x16c4, 0xfdf9, 0xee48, 0x0, 0x1);
        gbc.writeMem(0x3c9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x77a1);
        EXPECT(gbc.pc(), 0x3ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 004B
        gbc.setState(0x1b1, 0xa837, 0xcf90, 0xa1af, 0x3517, 0xf81c, 0x0, 0x0);
        gbc.writeMem(0x1b1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa837);
        EXPECT(gbc.pc(), 0x1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 004C
        gbc.setState(0xbe7b, 0x75aa, 0x2460, 0x9364, 0x8e43, 0x2878, 0x0, 0x1);
        gbc.writeMem(0xbe7b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x75aa);
        EXPECT(gbc.pc(), 0xbe7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe7b), 0xa9);
        // A9 004D
        gbc.setState(0x2293, 0x2d7, 0xc2c0, 0xb6bf, 0x1125, 0xb62a, 0x0, 0x0);
        gbc.writeMem(0x2293, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2d7);
        EXPECT(gbc.pc(), 0x2294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 004E
        gbc.setState(0x9fe7, 0x56fb, 0xb210, 0xdd52, 0xb057, 0x6156, 0x0, 0x0);
        gbc.writeMem(0x9fe7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x56fb);
        EXPECT(gbc.pc(), 0x9fe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fe7), 0xa9);
        // A9 004F
        gbc.setState(0x192, 0x5538, 0xf010, 0x2ec3, 0xdb90, 0x4ec1, 0x0, 0x0);
        gbc.writeMem(0x192, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5538);
        EXPECT(gbc.pc(), 0x193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0050
        gbc.setState(0x19ff, 0x973d, 0x520, 0x498f, 0xe83b, 0xe9c2, 0x1, 0x0);
        gbc.writeMem(0x19ff, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x973d);
        EXPECT(gbc.pc(), 0x1a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0051
        gbc.setState(0x727b, 0xb4d5, 0x7450, 0x25d3, 0x520b, 0x8d5c, 0x0, 0x0);
        gbc.writeMem(0x727b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb4d5);
        EXPECT(gbc.pc(), 0x727c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0052
        gbc.setState(0xa09f, 0x67a, 0xf680, 0x4111, 0x7247, 0x6fd8, 0x0, 0x0);
        gbc.writeMem(0xa09f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x67a);
        EXPECT(gbc.pc(), 0xa0a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa09f), 0xa9);
        // A9 0053
        gbc.setState(0x70a6, 0x9590, 0x62b0, 0xc01f, 0xddf3, 0x9573, 0x0, 0x1);
        gbc.writeMem(0x70a6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9590);
        EXPECT(gbc.pc(), 0x70a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0054
        gbc.setState(0x4b73, 0x2d97, 0xe340, 0xe7db, 0xe671, 0xf20, 0x0, 0x0);
        gbc.writeMem(0x4b73, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2d97);
        EXPECT(gbc.pc(), 0x4b74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0055
        gbc.setState(0x466f, 0x499d, 0xba20, 0x85c7, 0x7c92, 0x6ca6, 0x0, 0x0);
        gbc.writeMem(0x466f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x499d);
        EXPECT(gbc.pc(), 0x4670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0056
        gbc.setState(0x6b19, 0x9307, 0x6330, 0x7a86, 0x5e64, 0xd140, 0x1, 0x1);
        gbc.writeMem(0x6b19, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9307);
        EXPECT(gbc.pc(), 0x6b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0057
        gbc.setState(0x1a7e, 0x4a63, 0xb790, 0xaf34, 0x2123, 0x91ae, 0x0, 0x1);
        gbc.writeMem(0x1a7e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4a63);
        EXPECT(gbc.pc(), 0x1a7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0058
        gbc.setState(0x1db2, 0x3109, 0xdb30, 0x94b1, 0xf80, 0x7afd, 0x0, 0x1);
        gbc.writeMem(0x1db2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3109);
        EXPECT(gbc.pc(), 0x1db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0059
        gbc.setState(0x382d, 0xa86d, 0xe90, 0xc4ae, 0xf1dd, 0xb8eb, 0x0, 0x0);
        gbc.writeMem(0x382d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa86d);
        EXPECT(gbc.pc(), 0x382e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 005A
        gbc.setState(0xdc5, 0x8edb, 0xc4d0, 0xb7c9, 0x51ab, 0xe91f, 0x0, 0x1);
        gbc.writeMem(0xdc5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x8edb);
        EXPECT(gbc.pc(), 0xdc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 005B
        gbc.setState(0x8036, 0x3d4a, 0x9dd0, 0xbbab, 0x2ab1, 0xbe37, 0x0, 0x0);
        gbc.writeMem(0x8036, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3d4a);
        EXPECT(gbc.pc(), 0x8037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8036), 0xa9);
        // A9 005C
        gbc.setState(0x22a, 0x33d8, 0x27e0, 0x9205, 0x6dfd, 0x669e, 0x0, 0x1);
        gbc.writeMem(0x22a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x33d8);
        EXPECT(gbc.pc(), 0x22b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 005D
        gbc.setState(0x2697, 0x4836, 0x2240, 0xf063, 0x4e5a, 0xe77b, 0x0, 0x0);
        gbc.writeMem(0x2697, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4836);
        EXPECT(gbc.pc(), 0x2698);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 005E
        gbc.setState(0xd442, 0xbe35, 0xbbb0, 0x8f34, 0x1584, 0x1846, 0x0, 0x0);
        gbc.writeMem(0xd442, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbe35);
        EXPECT(gbc.pc(), 0xd443);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd442), 0xa9);
        // A9 005F
        gbc.setState(0x8b36, 0xd353, 0xb320, 0xfaad, 0xd146, 0x3e18, 0x1, 0x0);
        gbc.writeMem(0x8b36, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd353);
        EXPECT(gbc.pc(), 0x8b37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b36), 0xa9);
        // A9 0060
        gbc.setState(0x2b86, 0x665c, 0x1010, 0xa6ba, 0xad1, 0xfa10, 0x0, 0x1);
        gbc.writeMem(0x2b86, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x665c);
        EXPECT(gbc.pc(), 0x2b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0061
        gbc.setState(0x4ac4, 0xaabf, 0x8100, 0x2857, 0xf427, 0xa8d, 0x1, 0x1);
        gbc.writeMem(0x4ac4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xaabf);
        EXPECT(gbc.pc(), 0x4ac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0062
        gbc.setState(0x45fe, 0x92c4, 0x1170, 0xc923, 0x2952, 0x1ba5, 0x1, 0x0);
        gbc.writeMem(0x45fe, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x92c4);
        EXPECT(gbc.pc(), 0x45ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0063
        gbc.setState(0x4c28, 0x2442, 0x7510, 0x3a75, 0xccbf, 0xaf62, 0x1, 0x0);
        gbc.writeMem(0x4c28, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2442);
        EXPECT(gbc.pc(), 0x4c29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0064
        gbc.setState(0x790a, 0x375c, 0xe7e0, 0x21fe, 0x2bea, 0xf8f8, 0x0, 0x0);
        gbc.writeMem(0x790a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x375c);
        EXPECT(gbc.pc(), 0x790b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0065
        gbc.setState(0xd0ee, 0x2ebf, 0xb1b0, 0xd0ae, 0xfafd, 0xf07c, 0x1, 0x0);
        gbc.writeMem(0xd0ee, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x2ebf);
        EXPECT(gbc.pc(), 0xd0ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ee), 0xa9);
        // A9 0066
        gbc.setState(0xdb02, 0x83aa, 0x1c00, 0x4485, 0xe70a, 0xbcf2, 0x1, 0x1);
        gbc.writeMem(0xdb02, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x83aa);
        EXPECT(gbc.pc(), 0xdb03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb02), 0xa9);
        // A9 0067
        gbc.setState(0x3d74, 0x1c3b, 0x4c80, 0xabfd, 0xd50b, 0xbeff, 0x1, 0x1);
        gbc.writeMem(0x3d74, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1c3b);
        EXPECT(gbc.pc(), 0x3d75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0068
        gbc.setState(0x4a02, 0x47d3, 0x1530, 0xea22, 0xf47, 0x1334, 0x1, 0x1);
        gbc.writeMem(0x4a02, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x47d3);
        EXPECT(gbc.pc(), 0x4a03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0069
        gbc.setState(0x650c, 0xf5a0, 0x3be0, 0xb261, 0xc5d9, 0x4c50, 0x0, 0x0);
        gbc.writeMem(0x650c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf5a0);
        EXPECT(gbc.pc(), 0x650d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 006A
        gbc.setState(0xe6d5, 0x9309, 0x9960, 0xe6b8, 0x6870, 0x659a, 0x1, 0x0);
        gbc.writeMem(0xe6d5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9309);
        EXPECT(gbc.pc(), 0xe6d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d5), 0xa9);
        // A9 006B
        gbc.setState(0xe6eb, 0xfad0, 0x7150, 0x4773, 0xc3d2, 0x8259, 0x1, 0x1);
        gbc.writeMem(0xe6eb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xfad0);
        EXPECT(gbc.pc(), 0xe6ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6eb), 0xa9);
        // A9 006C
        gbc.setState(0xfa8, 0x7eef, 0x8640, 0x9c57, 0xc05f, 0x5a84, 0x1, 0x0);
        gbc.writeMem(0xfa8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7eef);
        EXPECT(gbc.pc(), 0xfa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 006D
        gbc.setState(0xbee0, 0xf48f, 0xe320, 0x80d3, 0xe23b, 0x3784, 0x0, 0x0);
        gbc.writeMem(0xbee0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf48f);
        EXPECT(gbc.pc(), 0xbee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee0), 0xa9);
        // A9 006E
        gbc.setState(0xd106, 0xabc3, 0xd650, 0x2a10, 0x88f6, 0xab0a, 0x0, 0x1);
        gbc.writeMem(0xd106, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xabc3);
        EXPECT(gbc.pc(), 0xd107);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd106), 0xa9);
        // A9 006F
        gbc.setState(0x807b, 0xf27c, 0x8890, 0x7548, 0x4fca, 0x15ba, 0x1, 0x1);
        gbc.writeMem(0x807b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf27c);
        EXPECT(gbc.pc(), 0x807c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807b), 0xa9);
        // A9 0070
        gbc.setState(0x1ae5, 0x31b5, 0xa450, 0x65a6, 0xf473, 0xa64, 0x0, 0x0);
        gbc.writeMem(0x1ae5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x31b5);
        EXPECT(gbc.pc(), 0x1ae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0071
        gbc.setState(0xb22f, 0x952b, 0xc170, 0x450a, 0xd73d, 0xbd02, 0x0, 0x0);
        gbc.writeMem(0xb22f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x952b);
        EXPECT(gbc.pc(), 0xb230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb22f), 0xa9);
        // A9 0072
        gbc.setState(0x58b6, 0xcc4b, 0x1bd0, 0x5da, 0xe8e8, 0x87e1, 0x0, 0x0);
        gbc.writeMem(0x58b6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xcc4b);
        EXPECT(gbc.pc(), 0x58b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0073
        gbc.setState(0x8d2e, 0xa453, 0xf4e0, 0x1405, 0x3978, 0xfe09, 0x0, 0x0);
        gbc.writeMem(0x8d2e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa453);
        EXPECT(gbc.pc(), 0x8d2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d2e), 0xa9);
        // A9 0074
        gbc.setState(0xe600, 0x6283, 0xdc30, 0x229, 0x4f16, 0x4230, 0x1, 0x0);
        gbc.writeMem(0xe600, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6283);
        EXPECT(gbc.pc(), 0xe601);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe600), 0xa9);
        // A9 0075
        gbc.setState(0xa7e5, 0x6513, 0xfe20, 0x948a, 0xc22b, 0x450, 0x0, 0x1);
        gbc.writeMem(0xa7e5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6513);
        EXPECT(gbc.pc(), 0xa7e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e5), 0xa9);
        // A9 0076
        gbc.setState(0x4fba, 0x3b59, 0x66f0, 0xd600, 0xa942, 0x2dd8, 0x0, 0x1);
        gbc.writeMem(0x4fba, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3b59);
        EXPECT(gbc.pc(), 0x4fbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0077
        gbc.setState(0x4ea9, 0xdba8, 0xf210, 0x79e, 0x11d3, 0x4b0d, 0x1, 0x0);
        gbc.writeMem(0x4ea9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdba8);
        EXPECT(gbc.pc(), 0x4eaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0078
        gbc.setState(0xd3bc, 0x4506, 0x9980, 0xa939, 0xa37b, 0xd9e6, 0x1, 0x1);
        gbc.writeMem(0xd3bc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4506);
        EXPECT(gbc.pc(), 0xd3bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3bc), 0xa9);
        // A9 0079
        gbc.setState(0x4d6d, 0x18bd, 0x1010, 0xe89e, 0xedaf, 0x60cb, 0x1, 0x1);
        gbc.writeMem(0x4d6d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x18bd);
        EXPECT(gbc.pc(), 0x4d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 007A
        gbc.setState(0x2368, 0xe4ed, 0x300, 0x82c4, 0x8a02, 0xbbb3, 0x0, 0x1);
        gbc.writeMem(0x2368, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe4ed);
        EXPECT(gbc.pc(), 0x2369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 007B
        gbc.setState(0xbff1, 0x51ab, 0xbbc0, 0xa69f, 0x977a, 0x7710, 0x0, 0x0);
        gbc.writeMem(0xbff1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x51ab);
        EXPECT(gbc.pc(), 0xbff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff1), 0xa9);
        // A9 007C
        gbc.setState(0x2b64, 0xd907, 0x6d30, 0xc921, 0x5d23, 0x1be9, 0x1, 0x0);
        gbc.writeMem(0x2b64, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd907);
        EXPECT(gbc.pc(), 0x2b65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 007D
        gbc.setState(0xd6dd, 0x9984, 0x3820, 0x62bb, 0x56e4, 0x33b0, 0x1, 0x0);
        gbc.writeMem(0xd6dd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9984);
        EXPECT(gbc.pc(), 0xd6de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6dd), 0xa9);
        // A9 007E
        gbc.setState(0x869a, 0xd7c, 0x68f0, 0x5149, 0xea4c, 0x2ca8, 0x0, 0x0);
        gbc.writeMem(0x869a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd7c);
        EXPECT(gbc.pc(), 0x869b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x869a), 0xa9);
        // A9 007F
        gbc.setState(0xe753, 0x5782, 0xf9f0, 0x1fb4, 0x82b0, 0x61b6, 0x1, 0x0);
        gbc.writeMem(0xe753, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5782);
        EXPECT(gbc.pc(), 0xe754);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe753), 0xa9);
        // A9 0080
        gbc.setState(0xb413, 0x501e, 0x2630, 0x909f, 0x713b, 0xdc4f, 0x0, 0x0);
        gbc.writeMem(0xb413, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x501e);
        EXPECT(gbc.pc(), 0xb414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb413), 0xa9);
        // A9 0081
        gbc.setState(0xa826, 0x242, 0x9610, 0x666c, 0xb861, 0x80d9, 0x0, 0x0);
        gbc.writeMem(0xa826, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x242);
        EXPECT(gbc.pc(), 0xa827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa826), 0xa9);
        // A9 0082
        gbc.setState(0xcad, 0x32d, 0x5040, 0x2d11, 0xbed3, 0x630, 0x1, 0x0);
        gbc.writeMem(0xcad, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x32d);
        EXPECT(gbc.pc(), 0xcae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0083
        gbc.setState(0x566c, 0xa2dd, 0x6cf0, 0x6355, 0x8fa9, 0x45f5, 0x0, 0x1);
        gbc.writeMem(0x566c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa2dd);
        EXPECT(gbc.pc(), 0x566d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0084
        gbc.setState(0x158d, 0x42, 0x81d0, 0x7f21, 0xbe4a, 0xe50d, 0x1, 0x0);
        gbc.writeMem(0x158d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x42);
        EXPECT(gbc.pc(), 0x158e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0085
        gbc.setState(0xa5e1, 0x39ff, 0xecc0, 0xa732, 0x7657, 0x2125, 0x1, 0x0);
        gbc.writeMem(0xa5e1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x39ff);
        EXPECT(gbc.pc(), 0xa5e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e1), 0xa9);
        // A9 0086
        gbc.setState(0x61f2, 0xb89, 0xc900, 0x9b21, 0xd54d, 0xf584, 0x0, 0x1);
        gbc.writeMem(0x61f2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb89);
        EXPECT(gbc.pc(), 0x61f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0087
        gbc.setState(0x84b2, 0xfb77, 0x670, 0x1a0b, 0xab1c, 0x9543, 0x1, 0x0);
        gbc.writeMem(0x84b2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xfb77);
        EXPECT(gbc.pc(), 0x84b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b2), 0xa9);
        // A9 0088
        gbc.setState(0xdefc, 0x7a97, 0x28a0, 0xae2, 0x8196, 0x53ee, 0x0, 0x0);
        gbc.writeMem(0xdefc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7a97);
        EXPECT(gbc.pc(), 0xdefd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdefc), 0xa9);
        // A9 0089
        gbc.setState(0x2a6, 0xdf41, 0x7840, 0xab7c, 0x5183, 0x5d20, 0x1, 0x0);
        gbc.writeMem(0x2a6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xdf41);
        EXPECT(gbc.pc(), 0x2a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 008A
        gbc.setState(0x89af, 0x6e5f, 0x8610, 0x45cc, 0xc8f8, 0xbb82, 0x1, 0x1);
        gbc.writeMem(0x89af, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6e5f);
        EXPECT(gbc.pc(), 0x89b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89af), 0xa9);
        // A9 008B
        gbc.setState(0x1f8a, 0x5e3e, 0xaca0, 0x35b8, 0xbd17, 0xa8c1, 0x0, 0x0);
        gbc.writeMem(0x1f8a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5e3e);
        EXPECT(gbc.pc(), 0x1f8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 008C
        gbc.setState(0xa1f2, 0x9eb7, 0xe60, 0xc3b0, 0x5225, 0x29, 0x1, 0x0);
        gbc.writeMem(0xa1f2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9eb7);
        EXPECT(gbc.pc(), 0xa1f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f2), 0xa9);
        // A9 008D
        gbc.setState(0x6372, 0x3b9b, 0x3280, 0xb2cc, 0x7b43, 0xec23, 0x1, 0x1);
        gbc.writeMem(0x6372, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3b9b);
        EXPECT(gbc.pc(), 0x6373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 008E
        gbc.setState(0x3cbd, 0xd26c, 0x8610, 0xfa20, 0x2aa, 0x8f3c, 0x0, 0x0);
        gbc.writeMem(0x3cbd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd26c);
        EXPECT(gbc.pc(), 0x3cbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 008F
        gbc.setState(0x9e78, 0xa0a3, 0xd5a0, 0x152e, 0x3e20, 0x9d65, 0x0, 0x0);
        gbc.writeMem(0x9e78, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa0a3);
        EXPECT(gbc.pc(), 0x9e79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e78), 0xa9);
        // A9 0090
        gbc.setState(0xa776, 0xcf34, 0x90f0, 0x80dd, 0xdf3d, 0x66e8, 0x0, 0x0);
        gbc.writeMem(0xa776, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xcf34);
        EXPECT(gbc.pc(), 0xa777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa776), 0xa9);
        // A9 0091
        gbc.setState(0xb5c3, 0xb6cb, 0x9770, 0x1526, 0xe91d, 0xd5c8, 0x1, 0x1);
        gbc.writeMem(0xb5c3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb6cb);
        EXPECT(gbc.pc(), 0xb5c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c3), 0xa9);
        // A9 0092
        gbc.setState(0x831c, 0x4711, 0x11c0, 0x17fc, 0x2e2d, 0x8592, 0x1, 0x1);
        gbc.writeMem(0x831c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4711);
        EXPECT(gbc.pc(), 0x831d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831c), 0xa9);
        // A9 0093
        gbc.setState(0xa1d6, 0x723e, 0x84e0, 0x17cc, 0x3c44, 0x9741, 0x0, 0x1);
        gbc.writeMem(0xa1d6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x723e);
        EXPECT(gbc.pc(), 0xa1d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d6), 0xa9);
        // A9 0094
        gbc.setState(0xe79a, 0xdf83, 0xd8c0, 0x817, 0x33ca, 0xf00b, 0x1, 0x0);
        gbc.writeMem(0xe79a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xdf83);
        EXPECT(gbc.pc(), 0xe79b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe79a), 0xa9);
        // A9 0095
        gbc.setState(0x20a5, 0xb05d, 0x9380, 0xdb2d, 0x24d1, 0x2c3, 0x0, 0x1);
        gbc.writeMem(0x20a5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb05d);
        EXPECT(gbc.pc(), 0x20a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0096
        gbc.setState(0xdb4c, 0x9b18, 0xbe10, 0x8b51, 0x97e2, 0x5051, 0x0, 0x1);
        gbc.writeMem(0xdb4c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9b18);
        EXPECT(gbc.pc(), 0xdb4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb4c), 0xa9);
        // A9 0097
        gbc.setState(0xdd73, 0x28ca, 0x2d10, 0xfe4f, 0xa177, 0x6fd8, 0x1, 0x1);
        gbc.writeMem(0xdd73, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x28ca);
        EXPECT(gbc.pc(), 0xdd74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd73), 0xa9);
        // A9 0099
        gbc.setState(0x3ede, 0xbb59, 0x8d70, 0x22b8, 0xb02d, 0x8879, 0x1, 0x1);
        gbc.writeMem(0x3ede, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbb59);
        EXPECT(gbc.pc(), 0x3edf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 009B
        gbc.setState(0xbf88, 0xb51a, 0x5cf0, 0x3c54, 0x415f, 0xb3a5, 0x0, 0x0);
        gbc.writeMem(0xbf88, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb51a);
        EXPECT(gbc.pc(), 0xbf89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf88), 0xa9);
        // A9 009C
        gbc.setState(0x5aea, 0xa8d9, 0xe8f0, 0xcedd, 0x7bf5, 0xa4bf, 0x0, 0x1);
        gbc.writeMem(0x5aea, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa8d9);
        EXPECT(gbc.pc(), 0x5aeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 009D
        gbc.setState(0xb502, 0x6da5, 0x65c0, 0x18aa, 0x8279, 0xa841, 0x1, 0x1);
        gbc.writeMem(0xb502, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6da5);
        EXPECT(gbc.pc(), 0xb503);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb502), 0xa9);
        // A9 009E
        gbc.setState(0x97bf, 0x3877, 0xf3f0, 0xc0b6, 0x9cb3, 0x9d63, 0x0, 0x1);
        gbc.writeMem(0x97bf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x3877);
        EXPECT(gbc.pc(), 0x97c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97bf), 0xa9);
        // A9 009F
        gbc.setState(0xa430, 0xfbfd, 0xd40, 0x5c4a, 0x80f6, 0xed70, 0x1, 0x0);
        gbc.writeMem(0xa430, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xfbfd);
        EXPECT(gbc.pc(), 0xa431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa430), 0xa9);
        // A9 00A0
        gbc.setState(0x8b11, 0x8047, 0x3b80, 0xe22d, 0xf58c, 0xbba3, 0x0, 0x1);
        gbc.writeMem(0x8b11, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8047);
        EXPECT(gbc.pc(), 0x8b12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b11), 0xa9);
        // A9 00A1
        gbc.setState(0x6aa8, 0x68c2, 0x2c60, 0x999c, 0xe0fe, 0x8012, 0x0, 0x1);
        gbc.writeMem(0x6aa8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x68c2);
        EXPECT(gbc.pc(), 0x6aa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00A2
        gbc.setState(0xd37d, 0x33ab, 0xa7e0, 0x2ab1, 0x1626, 0xe587, 0x0, 0x0);
        gbc.writeMem(0xd37d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x33ab);
        EXPECT(gbc.pc(), 0xd37e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37d), 0xa9);
        // A9 00A3
        gbc.setState(0x817a, 0x83de, 0xd120, 0x6e38, 0xdcde, 0xc10b, 0x1, 0x1);
        gbc.writeMem(0x817a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x83de);
        EXPECT(gbc.pc(), 0x817b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x817a), 0xa9);
        // A9 00A4
        gbc.setState(0x9e47, 0xa92, 0xd190, 0x3580, 0xfaf1, 0xf24d, 0x1, 0x0);
        gbc.writeMem(0x9e47, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa92);
        EXPECT(gbc.pc(), 0x9e48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e47), 0xa9);
        // A9 00A5
        gbc.setState(0xa131, 0xdecd, 0xfd50, 0xd736, 0x8c79, 0x8f31, 0x1, 0x1);
        gbc.writeMem(0xa131, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xdecd);
        EXPECT(gbc.pc(), 0xa132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa131), 0xa9);
        // A9 00A6
        gbc.setState(0xa5ab, 0x8281, 0xc4a0, 0x317e, 0xb42f, 0xee95, 0x1, 0x1);
        gbc.writeMem(0xa5ab, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8281);
        EXPECT(gbc.pc(), 0xa5ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ab), 0xa9);
        // A9 00A7
        gbc.setState(0x5546, 0xd44a, 0x2200, 0xd539, 0xd4a9, 0x20d2, 0x1, 0x1);
        gbc.writeMem(0x5546, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd44a);
        EXPECT(gbc.pc(), 0x5547);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00A8
        gbc.setState(0x6cd2, 0xef30, 0xc840, 0x41ff, 0x5925, 0xa773, 0x0, 0x1);
        gbc.writeMem(0x6cd2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xef30);
        EXPECT(gbc.pc(), 0x6cd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00A9
        gbc.setState(0xc5, 0x1286, 0x6fc0, 0xc156, 0x21dc, 0xc27d, 0x0, 0x0);
        gbc.writeMem(0xc5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1286);
        EXPECT(gbc.pc(), 0xc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00AA
        gbc.setState(0x7519, 0xed8, 0x7e50, 0xccd9, 0xfa14, 0x690d, 0x1, 0x1);
        gbc.writeMem(0x7519, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xed8);
        EXPECT(gbc.pc(), 0x751a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00AC
        gbc.setState(0xbf0b, 0x32d2, 0x9970, 0x1afc, 0x1535, 0x1408, 0x0, 0x0);
        gbc.writeMem(0xbf0b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x32d2);
        EXPECT(gbc.pc(), 0xbf0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf0b), 0xa9);
        // A9 00AD
        gbc.setState(0x9974, 0x443a, 0xf8f0, 0xe1dd, 0x3a0f, 0x867c, 0x1, 0x0);
        gbc.writeMem(0x9974, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x443a);
        EXPECT(gbc.pc(), 0x9975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9974), 0xa9);
        // A9 00AE
        gbc.setState(0xca15, 0x66d6, 0x38f0, 0x3cd1, 0x8074, 0x483f, 0x0, 0x1);
        gbc.writeMem(0xca15, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x66d6);
        EXPECT(gbc.pc(), 0xca16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca15), 0xa9);
        // A9 00AF
        gbc.setState(0xafd1, 0x4e1b, 0xeb40, 0x502, 0x3918, 0xd538, 0x0, 0x0);
        gbc.writeMem(0xafd1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4e1b);
        EXPECT(gbc.pc(), 0xafd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd1), 0xa9);
        // A9 00B0
        gbc.setState(0xb344, 0xd6b3, 0x9ec0, 0x100a, 0xc053, 0x8838, 0x0, 0x1);
        gbc.writeMem(0xb344, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd6b3);
        EXPECT(gbc.pc(), 0xb345);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb344), 0xa9);
        // A9 00B2
        gbc.setState(0x447, 0x6931, 0xeac0, 0xe495, 0xa777, 0x3d18, 0x1, 0x1);
        gbc.writeMem(0x447, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6931);
        EXPECT(gbc.pc(), 0x448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00B3
        gbc.setState(0xd79d, 0x9942, 0xd0d0, 0xa96b, 0xe656, 0x2276, 0x0, 0x1);
        gbc.writeMem(0xd79d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9942);
        EXPECT(gbc.pc(), 0xd79e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd79d), 0xa9);
        // A9 00B4
        gbc.setState(0xd910, 0x351e, 0xb420, 0xb4c3, 0x1ac6, 0x45a6, 0x0, 0x1);
        gbc.writeMem(0xd910, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x351e);
        EXPECT(gbc.pc(), 0xd911);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd910), 0xa9);
        // A9 00B5
        gbc.setState(0xb6f2, 0x462e, 0x8f60, 0x4656, 0x6ead, 0x943a, 0x0, 0x1);
        gbc.writeMem(0xb6f2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x462e);
        EXPECT(gbc.pc(), 0xb6f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6f2), 0xa9);
        // A9 00B6
        gbc.setState(0x5df8, 0xe1cf, 0x2a50, 0xbe73, 0x848f, 0x4145, 0x1, 0x1);
        gbc.writeMem(0x5df8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe1cf);
        EXPECT(gbc.pc(), 0x5df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00B7
        gbc.setState(0x722b, 0x6460, 0x8fc0, 0x3baa, 0x9822, 0x6abd, 0x0, 0x1);
        gbc.writeMem(0x722b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6460);
        EXPECT(gbc.pc(), 0x722c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00B8
        gbc.setState(0xaf62, 0xfcf6, 0x59d0, 0x6524, 0xf758, 0x6467, 0x0, 0x0);
        gbc.writeMem(0xaf62, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfcf6);
        EXPECT(gbc.pc(), 0xaf63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf62), 0xa9);
        // A9 00B9
        gbc.setState(0xb091, 0xb466, 0xe110, 0xa109, 0x4dc5, 0x5dab, 0x0, 0x1);
        gbc.writeMem(0xb091, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb466);
        EXPECT(gbc.pc(), 0xb092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb091), 0xa9);
        // A9 00BA
        gbc.setState(0xea8d, 0x26dc, 0x5570, 0x63d2, 0x5776, 0x77c0, 0x0, 0x1);
        gbc.writeMem(0xea8d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x26dc);
        EXPECT(gbc.pc(), 0xea8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea8d), 0xa9);
        // A9 00BB
        gbc.setState(0xc947, 0xe3a6, 0xe560, 0x77f2, 0x26b9, 0x71b4, 0x1, 0x0);
        gbc.writeMem(0xc947, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe3a6);
        EXPECT(gbc.pc(), 0xc948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc947), 0xa9);
        // A9 00BC
        gbc.setState(0xd945, 0xceaa, 0x10, 0x88fa, 0xa634, 0x2348, 0x1, 0x0);
        gbc.writeMem(0xd945, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xceaa);
        EXPECT(gbc.pc(), 0xd946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd945), 0xa9);
        // A9 00BD
        gbc.setState(0x139a, 0x27ce, 0xe4c0, 0xc8ef, 0x5525, 0xe7e9, 0x1, 0x1);
        gbc.writeMem(0x139a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x27ce);
        EXPECT(gbc.pc(), 0x139b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00BE
        gbc.setState(0xd948, 0x3219, 0x9520, 0xc6ae, 0xc08d, 0xd18c, 0x0, 0x1);
        gbc.writeMem(0xd948, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3219);
        EXPECT(gbc.pc(), 0xd949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd948), 0xa9);
        // A9 00BF
        gbc.setState(0x36c9, 0x77f5, 0xa6e0, 0xc5a1, 0xe683, 0x8e0e, 0x0, 0x0);
        gbc.writeMem(0x36c9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x77f5);
        EXPECT(gbc.pc(), 0x36ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00C1
        gbc.setState(0xb206, 0x60c2, 0x2200, 0x97f7, 0xda5a, 0xd1b7, 0x0, 0x0);
        gbc.writeMem(0xb206, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x60c2);
        EXPECT(gbc.pc(), 0xb207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb206), 0xa9);
        // A9 00C2
        gbc.setState(0xb1fa, 0x37e4, 0x1ef0, 0x58a9, 0xe4e9, 0x60c9, 0x1, 0x0);
        gbc.writeMem(0xb1fa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x37e4);
        EXPECT(gbc.pc(), 0xb1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1fa), 0xa9);
        // A9 00C3
        gbc.setState(0x582b, 0x6b77, 0x8e50, 0x48f9, 0x1586, 0xd828, 0x1, 0x1);
        gbc.writeMem(0x582b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6b77);
        EXPECT(gbc.pc(), 0x582c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00C4
        gbc.setState(0x88e8, 0x39ff, 0x7940, 0xfaea, 0x4256, 0x854f, 0x1, 0x1);
        gbc.writeMem(0x88e8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x39ff);
        EXPECT(gbc.pc(), 0x88e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88e8), 0xa9);
        // A9 00C5
        gbc.setState(0x5430, 0xbb7a, 0x7740, 0xb849, 0x3c3c, 0x3de4, 0x0, 0x1);
        gbc.writeMem(0x5430, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xbb7a);
        EXPECT(gbc.pc(), 0x5431);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00C6
        gbc.setState(0xda32, 0x9d07, 0xf990, 0x5ea7, 0x16df, 0xb439, 0x1, 0x1);
        gbc.writeMem(0xda32, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9d07);
        EXPECT(gbc.pc(), 0xda33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda32), 0xa9);
        // A9 00C7
        gbc.setState(0xa967, 0x4cfd, 0xca50, 0x4dc6, 0xbe9d, 0x9021, 0x1, 0x1);
        gbc.writeMem(0xa967, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4cfd);
        EXPECT(gbc.pc(), 0xa968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa967), 0xa9);
        // A9 00C8
        gbc.setState(0xbbde, 0x4640, 0x7ed0, 0xe60, 0x468b, 0xcfb8, 0x0, 0x1);
        gbc.writeMem(0xbbde, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4640);
        EXPECT(gbc.pc(), 0xbbdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbde), 0xa9);
        // A9 00C9
        gbc.setState(0x7aa8, 0x881b, 0x7750, 0xbf2c, 0xbaa9, 0xd123, 0x1, 0x1);
        gbc.writeMem(0x7aa8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x881b);
        EXPECT(gbc.pc(), 0x7aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00CA
        gbc.setState(0xe0d2, 0xba20, 0x10e0, 0xfbb2, 0x2ddc, 0x384e, 0x1, 0x0);
        gbc.writeMem(0xe0d2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xba20);
        EXPECT(gbc.pc(), 0xe0d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d2), 0xa9);
        // A9 00CB
        gbc.setState(0xeaa5, 0x8b5b, 0xd460, 0xa0a2, 0xe8b9, 0x6e50, 0x1, 0x1);
        gbc.writeMem(0xeaa5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8b5b);
        EXPECT(gbc.pc(), 0xeaa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa5), 0xa9);
        // A9 00CC
        gbc.setState(0x2bb2, 0x8323, 0x4500, 0x7f, 0xf895, 0x8728, 0x0, 0x1);
        gbc.writeMem(0x2bb2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8323);
        EXPECT(gbc.pc(), 0x2bb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00CD
        gbc.setState(0xb1df, 0xe093, 0x1d40, 0x64cf, 0x3f1a, 0xf6c, 0x1, 0x0);
        gbc.writeMem(0xb1df, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe093);
        EXPECT(gbc.pc(), 0xb1e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1df), 0xa9);
        // A9 00CE
        gbc.setState(0x6efc, 0x6c45, 0x1f00, 0x1bf8, 0x556f, 0xdb20, 0x1, 0x1);
        gbc.writeMem(0x6efc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6c45);
        EXPECT(gbc.pc(), 0x6efd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00CF
        gbc.setState(0x83c9, 0x6937, 0x4280, 0xecb4, 0x2240, 0xf138, 0x0, 0x1);
        gbc.writeMem(0x83c9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6937);
        EXPECT(gbc.pc(), 0x83ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c9), 0xa9);
        // A9 00D0
        gbc.setState(0x23e9, 0x4f7e, 0xb850, 0x5f32, 0xf0aa, 0x9915, 0x1, 0x1);
        gbc.writeMem(0x23e9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4f7e);
        EXPECT(gbc.pc(), 0x23ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00D1
        gbc.setState(0xddda, 0x7974, 0x4000, 0xbb23, 0x11b, 0xbbaf, 0x0, 0x0);
        gbc.writeMem(0xddda, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7974);
        EXPECT(gbc.pc(), 0xdddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddda), 0xa9);
        // A9 00D2
        gbc.setState(0x857f, 0x3add, 0x47f0, 0xa61a, 0x2be2, 0x5c6c, 0x0, 0x1);
        gbc.writeMem(0x857f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3add);
        EXPECT(gbc.pc(), 0x8580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x857f), 0xa9);
        // A9 00D3
        gbc.setState(0x8133, 0x6c67, 0x7c00, 0x3c5f, 0x8741, 0x2a36, 0x1, 0x1);
        gbc.writeMem(0x8133, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6c67);
        EXPECT(gbc.pc(), 0x8134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8133), 0xa9);
        // A9 00D5
        gbc.setState(0xc4fd, 0x8158, 0xc680, 0xffd0, 0x217d, 0xbf6a, 0x0, 0x1);
        gbc.writeMem(0xc4fd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8158);
        EXPECT(gbc.pc(), 0xc4fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4fd), 0xa9);
        // A9 00D6
        gbc.setState(0xe6d7, 0x7c1, 0xd500, 0xc994, 0x479e, 0x7f25, 0x1, 0x0);
        gbc.writeMem(0xe6d7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7c1);
        EXPECT(gbc.pc(), 0xe6d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d7), 0xa9);
        // A9 00D7
        gbc.setState(0xb7d1, 0x82af, 0x1540, 0x274d, 0x471c, 0x90cf, 0x1, 0x0);
        gbc.writeMem(0xb7d1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x82af);
        EXPECT(gbc.pc(), 0xb7d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d1), 0xa9);
        // A9 00D8
        gbc.setState(0xb3b, 0x512f, 0xdd70, 0x4c3e, 0x2e57, 0xfdbf, 0x0, 0x1);
        gbc.writeMem(0xb3b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x512f);
        EXPECT(gbc.pc(), 0xb3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00DA
        gbc.setState(0x824a, 0x3cab, 0xf240, 0xc455, 0x81bc, 0xa9c8, 0x0, 0x1);
        gbc.writeMem(0x824a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3cab);
        EXPECT(gbc.pc(), 0x824b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x824a), 0xa9);
        // A9 00DB
        gbc.setState(0x12d1, 0xb8aa, 0x2bd0, 0xcb12, 0xa988, 0xae, 0x0, 0x0);
        gbc.writeMem(0x12d1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb8aa);
        EXPECT(gbc.pc(), 0x12d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00DC
        gbc.setState(0x5361, 0xb532, 0xde60, 0xcad8, 0x5b53, 0x91db, 0x1, 0x0);
        gbc.writeMem(0x5361, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb532);
        EXPECT(gbc.pc(), 0x5362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00DD
        gbc.setState(0x3fb7, 0x1f0f, 0xc310, 0x1edb, 0x56af, 0x1a2a, 0x0, 0x1);
        gbc.writeMem(0x3fb7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1f0f);
        EXPECT(gbc.pc(), 0x3fb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00DE
        gbc.setState(0xeb60, 0x548f, 0x3470, 0x77bb, 0xb7cb, 0x7b83, 0x1, 0x0);
        gbc.writeMem(0xeb60, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x548f);
        EXPECT(gbc.pc(), 0xeb61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb60), 0xa9);
        // A9 00DF
        gbc.setState(0x9427, 0x7a09, 0x40d0, 0xb2c4, 0xb3fe, 0x8357, 0x1, 0x1);
        gbc.writeMem(0x9427, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7a09);
        EXPECT(gbc.pc(), 0x9428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9427), 0xa9);
        // A9 00E0
        gbc.setState(0x18a6, 0x4789, 0x78d0, 0xd6cb, 0xf504, 0xf80f, 0x0, 0x0);
        gbc.writeMem(0x18a6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4789);
        EXPECT(gbc.pc(), 0x18a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00E1
        gbc.setState(0x4602, 0xd21f, 0x8630, 0xd070, 0x2da6, 0xb195, 0x1, 0x1);
        gbc.writeMem(0x4602, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd21f);
        EXPECT(gbc.pc(), 0x4603);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00E2
        gbc.setState(0xa935, 0xbbbe, 0xf6f0, 0x4976, 0x5aad, 0x8964, 0x1, 0x1);
        gbc.writeMem(0xa935, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xbbbe);
        EXPECT(gbc.pc(), 0xa936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa935), 0xa9);
        // A9 00E3
        gbc.setState(0x4160, 0xc76b, 0x7e10, 0x7c02, 0x5a3d, 0x2a4a, 0x0, 0x0);
        gbc.writeMem(0x4160, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc76b);
        EXPECT(gbc.pc(), 0x4161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00E4
        gbc.setState(0xb886, 0xc372, 0x6ab0, 0x6cee, 0x7a9, 0x460d, 0x0, 0x1);
        gbc.writeMem(0xb886, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc372);
        EXPECT(gbc.pc(), 0xb887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb886), 0xa9);
        // A9 00E5
        gbc.setState(0x37af, 0x5c5e, 0x21a0, 0xcf59, 0x6801, 0x399, 0x0, 0x0);
        gbc.writeMem(0x37af, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5c5e);
        EXPECT(gbc.pc(), 0x37b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00E6
        gbc.setState(0xc69b, 0x333a, 0x7640, 0x1395, 0x776a, 0xe8c6, 0x1, 0x0);
        gbc.writeMem(0xc69b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x333a);
        EXPECT(gbc.pc(), 0xc69c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc69b), 0xa9);
        // A9 00E7
        gbc.setState(0xc6a5, 0x35e0, 0x7030, 0xe362, 0x79a3, 0x4b8c, 0x0, 0x0);
        gbc.writeMem(0xc6a5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x35e0);
        EXPECT(gbc.pc(), 0xc6a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a5), 0xa9);
        // A9 00E8
        gbc.setState(0x1926, 0x10fb, 0x530, 0x64f2, 0x34a7, 0x2e0f, 0x0, 0x0);
        gbc.writeMem(0x1926, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x10fb);
        EXPECT(gbc.pc(), 0x1927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00E9
        gbc.setState(0x2a04, 0x4b64, 0x1680, 0x5626, 0x2305, 0x1125, 0x0, 0x0);
        gbc.writeMem(0x2a04, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4b64);
        EXPECT(gbc.pc(), 0x2a05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00EA
        gbc.setState(0x4849, 0x69d0, 0x6d0, 0xee82, 0x57cd, 0x1cbf, 0x0, 0x1);
        gbc.writeMem(0x4849, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x69d0);
        EXPECT(gbc.pc(), 0x484a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00EB
        gbc.setState(0xc55a, 0x6d6c, 0xc00, 0x7ce, 0xa6c4, 0x52a, 0x0, 0x1);
        gbc.writeMem(0xc55a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6d6c);
        EXPECT(gbc.pc(), 0xc55b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc55a), 0xa9);
        // A9 00EC
        gbc.setState(0x8fb, 0x2d9, 0x7c40, 0x8f99, 0xa12f, 0xee09, 0x0, 0x0);
        gbc.writeMem(0x8fb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2d9);
        EXPECT(gbc.pc(), 0x8fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00EE
        gbc.setState(0x5d33, 0x3aee, 0x3c50, 0x3a71, 0x640a, 0xae46, 0x1, 0x1);
        gbc.writeMem(0x5d33, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x3aee);
        EXPECT(gbc.pc(), 0x5d34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00EF
        gbc.setState(0x2993, 0xfe6, 0x1920, 0x69e2, 0xac1a, 0xfc76, 0x1, 0x1);
        gbc.writeMem(0x2993, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfe6);
        EXPECT(gbc.pc(), 0x2994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00F0
        gbc.setState(0xb94f, 0x35e, 0x6660, 0x5f8d, 0xf1b7, 0xd8ae, 0x0, 0x1);
        gbc.writeMem(0xb94f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x35e);
        EXPECT(gbc.pc(), 0xb950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb94f), 0xa9);
        // A9 00F1
        gbc.setState(0x485f, 0xc1c1, 0xe330, 0xc88e, 0xd3fb, 0x91b, 0x0, 0x0);
        gbc.writeMem(0x485f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc1c1);
        EXPECT(gbc.pc(), 0x4860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00F2
        gbc.setState(0x5707, 0x4523, 0xdb80, 0x6849, 0xb661, 0x6c7b, 0x0, 0x0);
        gbc.writeMem(0x5707, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4523);
        EXPECT(gbc.pc(), 0x5708);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00F3
        gbc.setState(0x8ed6, 0x213e, 0xce60, 0xbc5e, 0xfec4, 0x3a36, 0x0, 0x0);
        gbc.writeMem(0x8ed6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x213e);
        EXPECT(gbc.pc(), 0x8ed7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed6), 0xa9);
        // A9 00F4
        gbc.setState(0x273b, 0xf2c4, 0x42d0, 0x9079, 0x2be7, 0x124d, 0x1, 0x1);
        gbc.writeMem(0x273b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf2c4);
        EXPECT(gbc.pc(), 0x273c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00F5
        gbc.setState(0x8c00, 0x7264, 0xcfe0, 0x5459, 0x7511, 0xbc1f, 0x1, 0x0);
        gbc.writeMem(0x8c00, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7264);
        EXPECT(gbc.pc(), 0x8c01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c00), 0xa9);
        // A9 00F6
        gbc.setState(0xa0ac, 0x64f2, 0x3450, 0x1cf0, 0x36e7, 0x9d6c, 0x0, 0x1);
        gbc.writeMem(0xa0ac, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x64f2);
        EXPECT(gbc.pc(), 0xa0ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ac), 0xa9);
        // A9 00F7
        gbc.setState(0x57a4, 0xdb8f, 0x8a60, 0x6ef, 0xc9e6, 0xb1d9, 0x0, 0x0);
        gbc.writeMem(0x57a4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xdb8f);
        EXPECT(gbc.pc(), 0x57a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00F8
        gbc.setState(0x8449, 0xa5f3, 0x6b00, 0x3aa5, 0xdef4, 0x675a, 0x0, 0x1);
        gbc.writeMem(0x8449, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa5f3);
        EXPECT(gbc.pc(), 0x844a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8449), 0xa9);
        // A9 00F9
        gbc.setState(0xcea9, 0xb6ba, 0x58b0, 0x22a, 0xe7d5, 0x1a28, 0x1, 0x1);
        gbc.writeMem(0xcea9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb6ba);
        EXPECT(gbc.pc(), 0xceaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcea9), 0xa9);
        // A9 00FA
        gbc.setState(0xa596, 0x96de, 0xd060, 0x6e02, 0x9cb5, 0x5f73, 0x1, 0x0);
        gbc.writeMem(0xa596, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x96de);
        EXPECT(gbc.pc(), 0xa597);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa596), 0xa9);
        // A9 00FC
        gbc.setState(0xe5fa, 0x7ba8, 0x55f0, 0xd82f, 0x7fed, 0xeeb7, 0x1, 0x1);
        gbc.writeMem(0xe5fa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7ba8);
        EXPECT(gbc.pc(), 0xe5fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5fa), 0xa9);
        // A9 00FD
        gbc.setState(0x162a, 0xd0b9, 0x4b70, 0x56c4, 0xf136, 0xd00d, 0x0, 0x1);
        gbc.writeMem(0x162a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd0b9);
        EXPECT(gbc.pc(), 0x162b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 00FE
        gbc.setState(0x8346, 0xd49e, 0x16d0, 0xc7e4, 0xb227, 0x4200, 0x1, 0x1);
        gbc.writeMem(0x8346, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd49e);
        EXPECT(gbc.pc(), 0x8347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8346), 0xa9);
        // A9 00FF
        gbc.setState(0x92a7, 0x39f8, 0x62d0, 0x1585, 0xb365, 0xd646, 0x1, 0x0);
        gbc.writeMem(0x92a7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x39f8);
        EXPECT(gbc.pc(), 0x92a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92a7), 0xa9);
        // A9 0100
        gbc.setState(0x8707, 0xa38, 0xcb80, 0x27a5, 0x676e, 0x636b, 0x0, 0x1);
        gbc.writeMem(0x8707, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa38);
        EXPECT(gbc.pc(), 0x8708);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8707), 0xa9);
        // A9 0101
        gbc.setState(0x58c5, 0x2680, 0x8500, 0xe110, 0x170b, 0x2316, 0x1, 0x0);
        gbc.writeMem(0x58c5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2680);
        EXPECT(gbc.pc(), 0x58c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0102
        gbc.setState(0x3892, 0xe59e, 0xd210, 0xa569, 0xc775, 0xf245, 0x1, 0x1);
        gbc.writeMem(0x3892, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe59e);
        EXPECT(gbc.pc(), 0x3893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0103
        gbc.setState(0x9b33, 0xe9f6, 0x16c0, 0xe9b8, 0xe82c, 0x19d7, 0x0, 0x0);
        gbc.writeMem(0x9b33, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe9f6);
        EXPECT(gbc.pc(), 0x9b34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b33), 0xa9);
        // A9 0104
        gbc.setState(0x31c0, 0xfec, 0x1550, 0xb155, 0x5926, 0x8ea0, 0x0, 0x0);
        gbc.writeMem(0x31c0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfec);
        EXPECT(gbc.pc(), 0x31c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0105
        gbc.setState(0x85a6, 0xcb00, 0x89a0, 0xe323, 0xd35a, 0x7d23, 0x0, 0x1);
        gbc.writeMem(0x85a6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xcb00);
        EXPECT(gbc.pc(), 0x85a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a6), 0xa9);
        // A9 0106
        gbc.setState(0x33e8, 0x72f2, 0x8660, 0xdca4, 0x68dd, 0xb4b7, 0x1, 0x1);
        gbc.writeMem(0x33e8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x72f2);
        EXPECT(gbc.pc(), 0x33e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0107
        gbc.setState(0x9327, 0xbc1, 0x1ad0, 0x8d9a, 0xffb3, 0x5f77, 0x1, 0x0);
        gbc.writeMem(0x9327, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xbc1);
        EXPECT(gbc.pc(), 0x9328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9327), 0xa9);
        // A9 0108
        gbc.setState(0x637c, 0xade2, 0x2930, 0x9fc6, 0xe8f3, 0xf8d3, 0x0, 0x0);
        gbc.writeMem(0x637c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xade2);
        EXPECT(gbc.pc(), 0x637d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 010A
        gbc.setState(0x51e9, 0x64c2, 0x7c20, 0x11b, 0xc2ad, 0x3a76, 0x1, 0x1);
        gbc.writeMem(0x51e9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x64c2);
        EXPECT(gbc.pc(), 0x51ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 010B
        gbc.setState(0x679, 0xece5, 0xe930, 0x85fe, 0xb534, 0x450f, 0x1, 0x0);
        gbc.writeMem(0x679, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xece5);
        EXPECT(gbc.pc(), 0x67a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 010C
        gbc.setState(0xc2ef, 0x8561, 0xe160, 0x69c1, 0xe197, 0x7ed4, 0x1, 0x0);
        gbc.writeMem(0xc2ef, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8561);
        EXPECT(gbc.pc(), 0xc2f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ef), 0xa9);
        // A9 010D
        gbc.setState(0x3905, 0xe54a, 0x9650, 0x3052, 0x23e3, 0x4f51, 0x1, 0x1);
        gbc.writeMem(0x3905, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe54a);
        EXPECT(gbc.pc(), 0x3906);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 010F
        gbc.setState(0x40a2, 0xd175, 0x4cf0, 0x4643, 0x618d, 0x7a24, 0x0, 0x1);
        gbc.writeMem(0x40a2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd175);
        EXPECT(gbc.pc(), 0x40a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0110
        gbc.setState(0xe026, 0x471f, 0x6cb0, 0xdf48, 0xc9de, 0x81f7, 0x0, 0x1);
        gbc.writeMem(0xe026, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x471f);
        EXPECT(gbc.pc(), 0xe027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe026), 0xa9);
        // A9 0111
        gbc.setState(0x7022, 0x3f39, 0xee20, 0xfe7a, 0xdc24, 0x1732, 0x0, 0x0);
        gbc.writeMem(0x7022, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3f39);
        EXPECT(gbc.pc(), 0x7023);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0112
        gbc.setState(0xbce7, 0x1de0, 0xc890, 0xbcca, 0xfc70, 0x5f3b, 0x1, 0x1);
        gbc.writeMem(0xbce7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1de0);
        EXPECT(gbc.pc(), 0xbce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbce7), 0xa9);
        // A9 0113
        gbc.setState(0x25d9, 0xaa59, 0x3a00, 0x4d35, 0xb0db, 0xe562, 0x1, 0x1);
        gbc.writeMem(0x25d9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xaa59);
        EXPECT(gbc.pc(), 0x25da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0114
        gbc.setState(0x3d0, 0xb6bd, 0x9e00, 0x2a13, 0x12dc, 0xa4c5, 0x0, 0x0);
        gbc.writeMem(0x3d0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb6bd);
        EXPECT(gbc.pc(), 0x3d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0115
        gbc.setState(0x1150, 0x8de3, 0x13f0, 0xffd9, 0xd36e, 0xc86e, 0x0, 0x0);
        gbc.writeMem(0x1150, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8de3);
        EXPECT(gbc.pc(), 0x1151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0116
        gbc.setState(0x1cbe, 0xd01d, 0x7f0, 0xddb6, 0xb7ca, 0xf9e9, 0x0, 0x0);
        gbc.writeMem(0x1cbe, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd01d);
        EXPECT(gbc.pc(), 0x1cbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0117
        gbc.setState(0xe9e6, 0x61fd, 0xbb10, 0x288f, 0x5906, 0xb8b, 0x0, 0x0);
        gbc.writeMem(0xe9e6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x61fd);
        EXPECT(gbc.pc(), 0xe9e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9e6), 0xa9);
        // A9 0118
        gbc.setState(0xc210, 0x1335, 0x1100, 0x14fb, 0xacf2, 0x7486, 0x1, 0x1);
        gbc.writeMem(0xc210, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1335);
        EXPECT(gbc.pc(), 0xc211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc210), 0xa9);
        // A9 0119
        gbc.setState(0x915b, 0x4e06, 0x8530, 0xb004, 0xa7a, 0xec6e, 0x1, 0x0);
        gbc.writeMem(0x915b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4e06);
        EXPECT(gbc.pc(), 0x915c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x915b), 0xa9);
        // A9 011A
        gbc.setState(0x470b, 0xa952, 0xff00, 0x32f1, 0xbe42, 0x7f23, 0x1, 0x1);
        gbc.writeMem(0x470b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa952);
        EXPECT(gbc.pc(), 0x470c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 011C
        gbc.setState(0x48b1, 0x714f, 0xf880, 0xcd5e, 0x943e, 0x9e2f, 0x1, 0x1);
        gbc.writeMem(0x48b1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x714f);
        EXPECT(gbc.pc(), 0x48b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 011D
        gbc.setState(0xe971, 0x631, 0x5fc0, 0xf721, 0xd70f, 0xe3d, 0x0, 0x1);
        gbc.writeMem(0xe971, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x631);
        EXPECT(gbc.pc(), 0xe972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe971), 0xa9);
        // A9 011E
        gbc.setState(0x2b98, 0x1531, 0x3a0, 0xfe97, 0xccad, 0x14ec, 0x1, 0x0);
        gbc.writeMem(0x2b98, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1531);
        EXPECT(gbc.pc(), 0x2b99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 011F
        gbc.setState(0x5383, 0x1730, 0xd850, 0x3e54, 0x9c52, 0x1d9b, 0x0, 0x1);
        gbc.writeMem(0x5383, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1730);
        EXPECT(gbc.pc(), 0x5384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0120
        gbc.setState(0xc514, 0x40b0, 0xf5c0, 0x762e, 0x4a01, 0x440e, 0x1, 0x1);
        gbc.writeMem(0xc514, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x40b0);
        EXPECT(gbc.pc(), 0xc515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc514), 0xa9);
        // A9 0121
        gbc.setState(0x8070, 0x2a70, 0x8a0, 0x69be, 0x7eaf, 0xfdf9, 0x1, 0x1);
        gbc.writeMem(0x8070, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2a70);
        EXPECT(gbc.pc(), 0x8071);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8070), 0xa9);
        // A9 0122
        gbc.setState(0x162, 0x260a, 0x2a0, 0x8999, 0x85a4, 0xae51, 0x1, 0x0);
        gbc.writeMem(0x162, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x260a);
        EXPECT(gbc.pc(), 0x163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0123
        gbc.setState(0xbedc, 0x6b8d, 0x3540, 0x2ccc, 0xed1d, 0xff5a, 0x1, 0x1);
        gbc.writeMem(0xbedc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6b8d);
        EXPECT(gbc.pc(), 0xbedd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbedc), 0xa9);
        // A9 0124
        gbc.setState(0xd3e4, 0xcd18, 0x2f50, 0x4e9a, 0x6f9b, 0x1107, 0x0, 0x0);
        gbc.writeMem(0xd3e4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xcd18);
        EXPECT(gbc.pc(), 0xd3e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e4), 0xa9);
        // A9 0125
        gbc.setState(0xb077, 0x734e, 0x77d0, 0x8f9a, 0x80cb, 0xf46f, 0x1, 0x0);
        gbc.writeMem(0xb077, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x734e);
        EXPECT(gbc.pc(), 0xb078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb077), 0xa9);
        // A9 0126
        gbc.setState(0x32ec, 0xad08, 0x1990, 0xdfea, 0x1fd4, 0x5d69, 0x1, 0x0);
        gbc.writeMem(0x32ec, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xad08);
        EXPECT(gbc.pc(), 0x32ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0127
        gbc.setState(0xea19, 0xce74, 0x3ab0, 0x899f, 0xbf67, 0xa875, 0x0, 0x0);
        gbc.writeMem(0xea19, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xce74);
        EXPECT(gbc.pc(), 0xea1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea19), 0xa9);
        // A9 0129
        gbc.setState(0x3c6d, 0xba85, 0xcb00, 0xcb2c, 0x9fa4, 0x3b03, 0x0, 0x1);
        gbc.writeMem(0x3c6d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xba85);
        EXPECT(gbc.pc(), 0x3c6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 012A
        gbc.setState(0x9da4, 0x83a8, 0x1b20, 0x6755, 0xa758, 0x64ec, 0x1, 0x1);
        gbc.writeMem(0x9da4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x83a8);
        EXPECT(gbc.pc(), 0x9da5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da4), 0xa9);
        // A9 012C
        gbc.setState(0xbe2f, 0x77b5, 0xa4d0, 0x8e82, 0x3ea9, 0x43cf, 0x0, 0x1);
        gbc.writeMem(0xbe2f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x77b5);
        EXPECT(gbc.pc(), 0xbe30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe2f), 0xa9);
        // A9 012D
        gbc.setState(0x956c, 0x7844, 0x600, 0x82de, 0x852e, 0x7896, 0x1, 0x0);
        gbc.writeMem(0x956c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7844);
        EXPECT(gbc.pc(), 0x956d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x956c), 0xa9);
        // A9 012E
        gbc.setState(0x5c20, 0xa249, 0x8a70, 0xc4f, 0x381e, 0xbc4c, 0x0, 0x0);
        gbc.writeMem(0x5c20, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa249);
        EXPECT(gbc.pc(), 0x5c21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 012F
        gbc.setState(0xe65a, 0x3c9c, 0xdf30, 0x3179, 0x7af5, 0x45a5, 0x1, 0x0);
        gbc.writeMem(0xe65a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3c9c);
        EXPECT(gbc.pc(), 0xe65b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe65a), 0xa9);
        // A9 0130
        gbc.setState(0xbb91, 0xc9a1, 0x7f20, 0xfddb, 0xa9d3, 0x4461, 0x1, 0x1);
        gbc.writeMem(0xbb91, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc9a1);
        EXPECT(gbc.pc(), 0xbb92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb91), 0xa9);
        // A9 0131
        gbc.setState(0x464a, 0x8857, 0x3b0, 0x870a, 0x7ee9, 0xbfaa, 0x0, 0x1);
        gbc.writeMem(0x464a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8857);
        EXPECT(gbc.pc(), 0x464b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0132
        gbc.setState(0xee9, 0xba07, 0x7a10, 0x9742, 0x96b7, 0x8c67, 0x1, 0x1);
        gbc.writeMem(0xee9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xba07);
        EXPECT(gbc.pc(), 0xeea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0133
        gbc.setState(0x7abc, 0x317d, 0x7500, 0xa223, 0x5021, 0xb74c, 0x0, 0x0);
        gbc.writeMem(0x7abc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x317d);
        EXPECT(gbc.pc(), 0x7abd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0134
        gbc.setState(0x1acd, 0x4865, 0x130, 0x9161, 0x7d61, 0xc1d, 0x1, 0x0);
        gbc.writeMem(0x1acd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4865);
        EXPECT(gbc.pc(), 0x1ace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0135
        gbc.setState(0x812d, 0x837, 0xd830, 0xee0, 0x4f91, 0x1a68, 0x1, 0x0);
        gbc.writeMem(0x812d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x837);
        EXPECT(gbc.pc(), 0x812e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x812d), 0xa9);
        // A9 0136
        gbc.setState(0x16ca, 0xdac6, 0x40, 0xae05, 0x1349, 0x972a, 0x0, 0x0);
        gbc.writeMem(0x16ca, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdac6);
        EXPECT(gbc.pc(), 0x16cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0137
        gbc.setState(0x10b7, 0xe67d, 0xc770, 0xfc74, 0x2d83, 0xba34, 0x1, 0x0);
        gbc.writeMem(0x10b7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe67d);
        EXPECT(gbc.pc(), 0x10b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0138
        gbc.setState(0x57e6, 0x442, 0xccf0, 0xd58e, 0xc04f, 0xe471, 0x1, 0x0);
        gbc.writeMem(0x57e6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x442);
        EXPECT(gbc.pc(), 0x57e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0139
        gbc.setState(0x8193, 0x6c0, 0xc600, 0x487b, 0xc3e, 0xf16b, 0x0, 0x0);
        gbc.writeMem(0x8193, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6c0);
        EXPECT(gbc.pc(), 0x8194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8193), 0xa9);
        // A9 013B
        gbc.setState(0xc21a, 0x4ae3, 0x3b80, 0x438f, 0x17fd, 0x29c1, 0x0, 0x1);
        gbc.writeMem(0xc21a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4ae3);
        EXPECT(gbc.pc(), 0xc21b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc21a), 0xa9);
        // A9 013C
        gbc.setState(0x5ead, 0x882e, 0x5db0, 0xdfd3, 0xbd66, 0x4957, 0x0, 0x1);
        gbc.writeMem(0x5ead, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x882e);
        EXPECT(gbc.pc(), 0x5eae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 013D
        gbc.setState(0x75cb, 0x9d6d, 0x2b00, 0xbf9e, 0x61ee, 0xa1f1, 0x0, 0x0);
        gbc.writeMem(0x75cb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9d6d);
        EXPECT(gbc.pc(), 0x75cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 013E
        gbc.setState(0xd693, 0x859e, 0x1e0, 0xaccd, 0xcb84, 0xf077, 0x1, 0x1);
        gbc.writeMem(0xd693, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x859e);
        EXPECT(gbc.pc(), 0xd694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd693), 0xa9);
        // A9 013F
        gbc.setState(0x19c1, 0xcf91, 0x3680, 0xe089, 0xc11e, 0xc504, 0x0, 0x0);
        gbc.writeMem(0x19c1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xcf91);
        EXPECT(gbc.pc(), 0x19c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0140
        gbc.setState(0x45b2, 0x8176, 0xd1a0, 0x785, 0x415b, 0xe440, 0x1, 0x0);
        gbc.writeMem(0x45b2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8176);
        EXPECT(gbc.pc(), 0x45b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0141
        gbc.setState(0x4ceb, 0xf83f, 0x65c0, 0x8279, 0x157b, 0x1cde, 0x1, 0x1);
        gbc.writeMem(0x4ceb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf83f);
        EXPECT(gbc.pc(), 0x4cec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0143
        gbc.setState(0x6f0, 0x5d96, 0xc130, 0xe474, 0x1d3a, 0xb7ec, 0x1, 0x0);
        gbc.writeMem(0x6f0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5d96);
        EXPECT(gbc.pc(), 0x6f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0144
        gbc.setState(0x99ec, 0x2983, 0x7e00, 0xce4b, 0xa88d, 0x7560, 0x0, 0x1);
        gbc.writeMem(0x99ec, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2983);
        EXPECT(gbc.pc(), 0x99ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ec), 0xa9);
        // A9 0145
        gbc.setState(0x90cb, 0x4042, 0x8ba0, 0xff72, 0xb2d0, 0x752f, 0x1, 0x1);
        gbc.writeMem(0x90cb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4042);
        EXPECT(gbc.pc(), 0x90cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90cb), 0xa9);
        // A9 0147
        gbc.setState(0x6e51, 0x4532, 0xd20, 0xfb8a, 0xb94d, 0x1289, 0x1, 0x1);
        gbc.writeMem(0x6e51, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4532);
        EXPECT(gbc.pc(), 0x6e52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0148
        gbc.setState(0x7a9d, 0x3cfb, 0xf150, 0x1b04, 0x3bc4, 0xc695, 0x0, 0x1);
        gbc.writeMem(0x7a9d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3cfb);
        EXPECT(gbc.pc(), 0x7a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0149
        gbc.setState(0x64e8, 0x9688, 0x7010, 0x68e, 0xc20c, 0xfd3e, 0x1, 0x1);
        gbc.writeMem(0x64e8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9688);
        EXPECT(gbc.pc(), 0x64e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 014A
        gbc.setState(0x9c18, 0x972f, 0xf400, 0xf542, 0x9fb9, 0x9b82, 0x0, 0x1);
        gbc.writeMem(0x9c18, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x972f);
        EXPECT(gbc.pc(), 0x9c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c18), 0xa9);
        // A9 014B
        gbc.setState(0xb6b9, 0xda1e, 0x40f0, 0x951f, 0x475b, 0x97b2, 0x1, 0x1);
        gbc.writeMem(0xb6b9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xda1e);
        EXPECT(gbc.pc(), 0xb6ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b9), 0xa9);
        // A9 014C
        gbc.setState(0x638f, 0xb2e4, 0x1880, 0x4645, 0x6fa9, 0x6469, 0x0, 0x1);
        gbc.writeMem(0x638f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb2e4);
        EXPECT(gbc.pc(), 0x6390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 014D
        gbc.setState(0x99c0, 0x30e9, 0xa520, 0xa090, 0x3e99, 0xd40b, 0x0, 0x1);
        gbc.writeMem(0x99c0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x30e9);
        EXPECT(gbc.pc(), 0x99c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c0), 0xa9);
        // A9 014E
        gbc.setState(0x6122, 0xf4ff, 0x3670, 0x956, 0xea0a, 0x61fc, 0x1, 0x0);
        gbc.writeMem(0x6122, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf4ff);
        EXPECT(gbc.pc(), 0x6123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 014F
        gbc.setState(0x70df, 0xec1e, 0x41f0, 0x1da6, 0x34ea, 0x2f4, 0x0, 0x1);
        gbc.writeMem(0x70df, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xec1e);
        EXPECT(gbc.pc(), 0x70e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0150
        gbc.setState(0x5df9, 0x68f1, 0x34b0, 0xc557, 0x999, 0x1b34, 0x0, 0x1);
        gbc.writeMem(0x5df9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x68f1);
        EXPECT(gbc.pc(), 0x5dfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0151
        gbc.setState(0x2b4e, 0x65b5, 0x9400, 0x9ec4, 0xcb4a, 0x5120, 0x1, 0x0);
        gbc.writeMem(0x2b4e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x65b5);
        EXPECT(gbc.pc(), 0x2b4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0152
        gbc.setState(0xc623, 0x3b4d, 0x1290, 0xc112, 0x8249, 0x2f26, 0x1, 0x0);
        gbc.writeMem(0xc623, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x3b4d);
        EXPECT(gbc.pc(), 0xc624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc623), 0xa9);
        // A9 0153
        gbc.setState(0x17f, 0xda38, 0x9a90, 0x4320, 0x17fd, 0x853e, 0x0, 0x0);
        gbc.writeMem(0x17f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xda38);
        EXPECT(gbc.pc(), 0x180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0154
        gbc.setState(0x49ee, 0x8c71, 0x42e0, 0xf60d, 0x5ec7, 0x9941, 0x0, 0x0);
        gbc.writeMem(0x49ee, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8c71);
        EXPECT(gbc.pc(), 0x49ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0155
        gbc.setState(0x41a5, 0x9bd5, 0xc080, 0x4953, 0x3eaa, 0x5ac3, 0x1, 0x1);
        gbc.writeMem(0x41a5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9bd5);
        EXPECT(gbc.pc(), 0x41a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0156
        gbc.setState(0x7d72, 0x43a3, 0xf3d0, 0xb5b, 0xd4f6, 0x590, 0x0, 0x0);
        gbc.writeMem(0x7d72, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x43a3);
        EXPECT(gbc.pc(), 0x7d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0157
        gbc.setState(0x122f, 0xb1d1, 0x8e70, 0x177e, 0x2159, 0xbec6, 0x1, 0x0);
        gbc.writeMem(0x122f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb1d1);
        EXPECT(gbc.pc(), 0x1230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0158
        gbc.setState(0x4411, 0xc414, 0x810, 0x7337, 0xf7db, 0x67e8, 0x0, 0x1);
        gbc.writeMem(0x4411, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc414);
        EXPECT(gbc.pc(), 0x4412);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0159
        gbc.setState(0xd05c, 0x1698, 0xf520, 0x27a7, 0xad2f, 0x1902, 0x1, 0x0);
        gbc.writeMem(0xd05c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1698);
        EXPECT(gbc.pc(), 0xd05d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd05c), 0xa9);
        // A9 015A
        gbc.setState(0x8272, 0x33f0, 0x98a0, 0xebfa, 0xe274, 0xbba8, 0x0, 0x0);
        gbc.writeMem(0x8272, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x33f0);
        EXPECT(gbc.pc(), 0x8273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8272), 0xa9);
        // A9 015B
        gbc.setState(0xd8f, 0xa4c9, 0x5420, 0xabe7, 0x12fc, 0x557a, 0x1, 0x0);
        gbc.writeMem(0xd8f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa4c9);
        EXPECT(gbc.pc(), 0xd90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 015D
        gbc.setState(0x98, 0xb092, 0xf980, 0xc82e, 0xa575, 0xff15, 0x0, 0x1);
        gbc.writeMem(0x98, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb092);
        EXPECT(gbc.pc(), 0x99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 015E
        gbc.setState(0x6922, 0xe97e, 0xd260, 0x360, 0x5d56, 0xe648, 0x0, 0x1);
        gbc.writeMem(0x6922, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe97e);
        EXPECT(gbc.pc(), 0x6923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 015F
        gbc.setState(0xd242, 0xa685, 0x3ed0, 0x98a7, 0xeb8d, 0x8176, 0x0, 0x1);
        gbc.writeMem(0xd242, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa685);
        EXPECT(gbc.pc(), 0xd243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd242), 0xa9);
        // A9 0160
        gbc.setState(0x9fb4, 0x3206, 0x7880, 0xd3fd, 0x42f4, 0x113, 0x1, 0x0);
        gbc.writeMem(0x9fb4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3206);
        EXPECT(gbc.pc(), 0x9fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb4), 0xa9);
        // A9 0161
        gbc.setState(0x53c8, 0xede2, 0x3460, 0xed74, 0xfe72, 0xca57, 0x1, 0x0);
        gbc.writeMem(0x53c8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xede2);
        EXPECT(gbc.pc(), 0x53c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0162
        gbc.setState(0xd5b, 0x4475, 0x6ef0, 0x95cb, 0x1f28, 0x549c, 0x0, 0x0);
        gbc.writeMem(0xd5b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4475);
        EXPECT(gbc.pc(), 0xd5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0163
        gbc.setState(0x1f85, 0xc0e6, 0x37b0, 0xd57d, 0xb85e, 0xfb46, 0x0, 0x0);
        gbc.writeMem(0x1f85, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc0e6);
        EXPECT(gbc.pc(), 0x1f86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0164
        gbc.setState(0x476f, 0xd40b, 0x48a0, 0xc648, 0xa4b0, 0xb7a, 0x0, 0x0);
        gbc.writeMem(0x476f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd40b);
        EXPECT(gbc.pc(), 0x4770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0165
        gbc.setState(0xce4a, 0x17bc, 0x29e0, 0x5372, 0xcdd3, 0xbe34, 0x1, 0x1);
        gbc.writeMem(0xce4a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x17bc);
        EXPECT(gbc.pc(), 0xce4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce4a), 0xa9);
        // A9 0166
        gbc.setState(0x9014, 0x13c8, 0x3370, 0xce9f, 0x2191, 0x6b4f, 0x0, 0x1);
        gbc.writeMem(0x9014, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x13c8);
        EXPECT(gbc.pc(), 0x9015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9014), 0xa9);
        // A9 0167
        gbc.setState(0x63ad, 0x2c47, 0x8750, 0xcf44, 0xa4b9, 0xc7f, 0x1, 0x1);
        gbc.writeMem(0x63ad, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2c47);
        EXPECT(gbc.pc(), 0x63ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0168
        gbc.setState(0x5243, 0x9d7e, 0x3250, 0x9487, 0xaba9, 0x60a8, 0x1, 0x0);
        gbc.writeMem(0x5243, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9d7e);
        EXPECT(gbc.pc(), 0x5244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0169
        gbc.setState(0x7550, 0xc252, 0xab40, 0x474, 0x8b44, 0x36e3, 0x0, 0x0);
        gbc.writeMem(0x7550, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc252);
        EXPECT(gbc.pc(), 0x7551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 016A
        gbc.setState(0x7f4d, 0x72b4, 0xdb30, 0xa87, 0x67cc, 0x7453, 0x0, 0x1);
        gbc.writeMem(0x7f4d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x72b4);
        EXPECT(gbc.pc(), 0x7f4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 016B
        gbc.setState(0x1d76, 0xe771, 0xab60, 0x8e35, 0xf030, 0x1473, 0x1, 0x0);
        gbc.writeMem(0x1d76, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe771);
        EXPECT(gbc.pc(), 0x1d77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 016C
        gbc.setState(0x32d5, 0x672a, 0x250, 0xda7a, 0xaa82, 0x8cc5, 0x1, 0x1);
        gbc.writeMem(0x32d5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x672a);
        EXPECT(gbc.pc(), 0x32d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 016D
        gbc.setState(0x9be7, 0xd0cc, 0xcd0, 0x993c, 0x11ff, 0x809, 0x1, 0x1);
        gbc.writeMem(0x9be7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd0cc);
        EXPECT(gbc.pc(), 0x9be8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be7), 0xa9);
        // A9 016E
        gbc.setState(0x644f, 0x3dc5, 0xbea0, 0x7e3f, 0x70e6, 0xd2bb, 0x1, 0x1);
        gbc.writeMem(0x644f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3dc5);
        EXPECT(gbc.pc(), 0x6450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 016F
        gbc.setState(0xe252, 0x5f31, 0x1490, 0xdd89, 0xc26, 0x2940, 0x1, 0x1);
        gbc.writeMem(0xe252, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x5f31);
        EXPECT(gbc.pc(), 0xe253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe252), 0xa9);
        // A9 0170
        gbc.setState(0x8692, 0xdd74, 0x9b70, 0x42d8, 0x7f62, 0x64bc, 0x1, 0x1);
        gbc.writeMem(0x8692, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdd74);
        EXPECT(gbc.pc(), 0x8693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8692), 0xa9);
        // A9 0171
        gbc.setState(0x342a, 0x462, 0x8eb0, 0x1658, 0x7caa, 0x41a4, 0x0, 0x1);
        gbc.writeMem(0x342a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x462);
        EXPECT(gbc.pc(), 0x342b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0172
        gbc.setState(0x6f7d, 0x1d28, 0x5e90, 0xbe00, 0x936d, 0xf9ae, 0x1, 0x1);
        gbc.writeMem(0x6f7d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1d28);
        EXPECT(gbc.pc(), 0x6f7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0173
        gbc.setState(0x32c5, 0x819e, 0x92d0, 0x25ea, 0xa7aa, 0x6c40, 0x1, 0x1);
        gbc.writeMem(0x32c5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x819e);
        EXPECT(gbc.pc(), 0x32c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0174
        gbc.setState(0x4bf9, 0xf00a, 0x4b70, 0xbd89, 0xb197, 0x1fcf, 0x0, 0x0);
        gbc.writeMem(0x4bf9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf00a);
        EXPECT(gbc.pc(), 0x4bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0175
        gbc.setState(0x3c48, 0x68f, 0xe9d0, 0xcd2f, 0xe4b, 0x5548, 0x0, 0x1);
        gbc.writeMem(0x3c48, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x68f);
        EXPECT(gbc.pc(), 0x3c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0176
        gbc.setState(0x49e4, 0xaab5, 0x570, 0x300c, 0xe037, 0x99e4, 0x0, 0x0);
        gbc.writeMem(0x49e4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xaab5);
        EXPECT(gbc.pc(), 0x49e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0177
        gbc.setState(0xc27c, 0xcf5f, 0x39e0, 0x24a3, 0xa980, 0x11d3, 0x1, 0x1);
        gbc.writeMem(0xc27c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xcf5f);
        EXPECT(gbc.pc(), 0xc27d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc27c), 0xa9);
        // A9 0178
        gbc.setState(0xa03a, 0x8faa, 0xfd20, 0x83f4, 0x94dc, 0x3d8a, 0x1, 0x0);
        gbc.writeMem(0xa03a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8faa);
        EXPECT(gbc.pc(), 0xa03b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03a), 0xa9);
        // A9 0179
        gbc.setState(0xd29b, 0xd47, 0x33a0, 0x5af1, 0x8093, 0xc28e, 0x1, 0x0);
        gbc.writeMem(0xd29b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd47);
        EXPECT(gbc.pc(), 0xd29c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd29b), 0xa9);
        // A9 017A
        gbc.setState(0x9211, 0x27f8, 0x5640, 0x3d91, 0x347d, 0xf846, 0x1, 0x1);
        gbc.writeMem(0x9211, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x27f8);
        EXPECT(gbc.pc(), 0x9212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9211), 0xa9);
        // A9 017B
        gbc.setState(0x10cf, 0x595d, 0xb820, 0x6d70, 0xa1da, 0xa014, 0x0, 0x0);
        gbc.writeMem(0x10cf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x595d);
        EXPECT(gbc.pc(), 0x10d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 017C
        gbc.setState(0x40d5, 0x1581, 0xb9b0, 0x3797, 0xdf3b, 0x2ff1, 0x0, 0x1);
        gbc.writeMem(0x40d5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1581);
        EXPECT(gbc.pc(), 0x40d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 017D
        gbc.setState(0x61d6, 0x33d1, 0x3f20, 0x9301, 0xdde6, 0x1e0c, 0x1, 0x1);
        gbc.writeMem(0x61d6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x33d1);
        EXPECT(gbc.pc(), 0x61d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 017E
        gbc.setState(0xdf41, 0xa1cc, 0x5e70, 0x4f39, 0x4935, 0x4f11, 0x1, 0x0);
        gbc.writeMem(0xdf41, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa1cc);
        EXPECT(gbc.pc(), 0xdf42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf41), 0xa9);
        // A9 017F
        gbc.setState(0x6d0b, 0x6137, 0xb940, 0x706f, 0xcee8, 0x1bf0, 0x0, 0x1);
        gbc.writeMem(0x6d0b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6137);
        EXPECT(gbc.pc(), 0x6d0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0180
        gbc.setState(0x5080, 0xd0c, 0x2940, 0x7292, 0x2b2a, 0x5fcc, 0x0, 0x0);
        gbc.writeMem(0x5080, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd0c);
        EXPECT(gbc.pc(), 0x5081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0181
        gbc.setState(0x2dfa, 0x754b, 0x6830, 0xb926, 0xe5a9, 0xc82a, 0x1, 0x0);
        gbc.writeMem(0x2dfa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x754b);
        EXPECT(gbc.pc(), 0x2dfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0182
        gbc.setState(0x7d75, 0xa7a5, 0xf830, 0xc147, 0x1394, 0x86b6, 0x1, 0x1);
        gbc.writeMem(0x7d75, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa7a5);
        EXPECT(gbc.pc(), 0x7d76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0183
        gbc.setState(0xbfcf, 0xfafe, 0x2620, 0x5bec, 0x7d8b, 0x3c57, 0x1, 0x0);
        gbc.writeMem(0xbfcf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xfafe);
        EXPECT(gbc.pc(), 0xbfd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfcf), 0xa9);
        // A9 0184
        gbc.setState(0x5e2a, 0x6385, 0xf8a0, 0x4f3, 0x5a2f, 0x78a8, 0x0, 0x1);
        gbc.writeMem(0x5e2a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6385);
        EXPECT(gbc.pc(), 0x5e2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0185
        gbc.setState(0xcc7c, 0xf124, 0x3b30, 0xc23e, 0x48ae, 0x84eb, 0x1, 0x1);
        gbc.writeMem(0xcc7c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf124);
        EXPECT(gbc.pc(), 0xcc7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc7c), 0xa9);
        // A9 0187
        gbc.setState(0x8413, 0x6f66, 0x38b0, 0x4a2b, 0x8c10, 0x5e0b, 0x1, 0x1);
        gbc.writeMem(0x8413, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6f66);
        EXPECT(gbc.pc(), 0x8414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8413), 0xa9);
        // A9 0188
        gbc.setState(0x2e51, 0x5182, 0x1e10, 0x4993, 0xd25b, 0x8d71, 0x1, 0x0);
        gbc.writeMem(0x2e51, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5182);
        EXPECT(gbc.pc(), 0x2e52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0189
        gbc.setState(0xb664, 0x4ee0, 0x85e0, 0x65a8, 0xe776, 0xecef, 0x0, 0x1);
        gbc.writeMem(0xb664, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4ee0);
        EXPECT(gbc.pc(), 0xb665);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb664), 0xa9);
        // A9 018A
        gbc.setState(0xd918, 0xc0a1, 0xa540, 0x4ee, 0x47dd, 0xc53, 0x1, 0x0);
        gbc.writeMem(0xd918, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc0a1);
        EXPECT(gbc.pc(), 0xd919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd918), 0xa9);
        // A9 018B
        gbc.setState(0x5871, 0x6b05, 0x73b0, 0x80c0, 0x4599, 0x12eb, 0x1, 0x0);
        gbc.writeMem(0x5871, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6b05);
        EXPECT(gbc.pc(), 0x5872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 018C
        gbc.setState(0x1069, 0xe1c2, 0x3570, 0x66a0, 0xcd02, 0xe687, 0x0, 0x1);
        gbc.writeMem(0x1069, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe1c2);
        EXPECT(gbc.pc(), 0x106a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 018D
        gbc.setState(0x5ccd, 0xcf7c, 0x2c40, 0xdb18, 0xc55f, 0xb833, 0x0, 0x0);
        gbc.writeMem(0x5ccd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcf7c);
        EXPECT(gbc.pc(), 0x5cce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 018E
        gbc.setState(0xcc9d, 0x8d3, 0x5450, 0xaef4, 0xcd06, 0x46b3, 0x1, 0x0);
        gbc.writeMem(0xcc9d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8d3);
        EXPECT(gbc.pc(), 0xcc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc9d), 0xa9);
        // A9 0191
        gbc.setState(0xa568, 0x180c, 0xf0f0, 0x4375, 0x6c38, 0x8ed3, 0x1, 0x0);
        gbc.writeMem(0xa568, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x180c);
        EXPECT(gbc.pc(), 0xa569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa568), 0xa9);
        // A9 0192
        gbc.setState(0xb296, 0x2214, 0xf0e0, 0x9031, 0x282e, 0x2743, 0x1, 0x1);
        gbc.writeMem(0xb296, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2214);
        EXPECT(gbc.pc(), 0xb297);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb296), 0xa9);
        // A9 0193
        gbc.setState(0xa42b, 0x631f, 0x87e0, 0x937e, 0x4d56, 0x2c57, 0x0, 0x0);
        gbc.writeMem(0xa42b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x631f);
        EXPECT(gbc.pc(), 0xa42c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42b), 0xa9);
        // A9 0194
        gbc.setState(0x5885, 0x4ed1, 0xe0d0, 0x73d9, 0x513d, 0x5cdf, 0x0, 0x0);
        gbc.writeMem(0x5885, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4ed1);
        EXPECT(gbc.pc(), 0x5886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0195
        gbc.setState(0xe414, 0x7115, 0x1e00, 0x9aef, 0xfa30, 0x573, 0x1, 0x1);
        gbc.writeMem(0xe414, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7115);
        EXPECT(gbc.pc(), 0xe415);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe414), 0xa9);
        // A9 0196
        gbc.setState(0x9d6c, 0xf1d6, 0x97a0, 0xd32f, 0x312, 0xd3f8, 0x0, 0x1);
        gbc.writeMem(0x9d6c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf1d6);
        EXPECT(gbc.pc(), 0x9d6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d6c), 0xa9);
        // A9 0197
        gbc.setState(0xe1fb, 0xebf4, 0x2620, 0x26bc, 0x915f, 0x4d9f, 0x0, 0x1);
        gbc.writeMem(0xe1fb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xebf4);
        EXPECT(gbc.pc(), 0xe1fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1fb), 0xa9);
        // A9 0198
        gbc.setState(0x6d, 0x640c, 0xa680, 0xb2b9, 0xf3f3, 0xdfe1, 0x0, 0x1);
        gbc.writeMem(0x6d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x640c);
        EXPECT(gbc.pc(), 0x6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0199
        gbc.setState(0xa9a2, 0x54a4, 0x9190, 0xe484, 0xc46e, 0xd276, 0x1, 0x0);
        gbc.writeMem(0xa9a2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x54a4);
        EXPECT(gbc.pc(), 0xa9a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a2), 0xa9);
        // A9 019A
        gbc.setState(0xca7, 0x4353, 0x8aa0, 0x3e7a, 0xde19, 0xcbad, 0x1, 0x0);
        gbc.writeMem(0xca7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4353);
        EXPECT(gbc.pc(), 0xca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 019B
        gbc.setState(0x14df, 0x95e9, 0x44a0, 0x441f, 0x9649, 0x57fd, 0x1, 0x0);
        gbc.writeMem(0x14df, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x95e9);
        EXPECT(gbc.pc(), 0x14e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 019C
        gbc.setState(0xc223, 0xea7, 0x2550, 0xe41d, 0x5363, 0x4b7b, 0x0, 0x1);
        gbc.writeMem(0xc223, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xea7);
        EXPECT(gbc.pc(), 0xc224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc223), 0xa9);
        // A9 019D
        gbc.setState(0xb55e, 0xbbb, 0xecd0, 0xf6e, 0xe856, 0x7c51, 0x0, 0x1);
        gbc.writeMem(0xb55e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbbb);
        EXPECT(gbc.pc(), 0xb55f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb55e), 0xa9);
        // A9 019E
        gbc.setState(0x4424, 0xcdf0, 0x3020, 0x8a28, 0x6615, 0xe2ac, 0x1, 0x0);
        gbc.writeMem(0x4424, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xcdf0);
        EXPECT(gbc.pc(), 0x4425);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 019F
        gbc.setState(0x2365, 0xbede, 0x4ea0, 0xc7c0, 0x9ca3, 0xeb2, 0x1, 0x0);
        gbc.writeMem(0x2365, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbede);
        EXPECT(gbc.pc(), 0x2366);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01A0
        gbc.setState(0x82b8, 0x145f, 0xc150, 0x1301, 0x4915, 0x9b56, 0x1, 0x1);
        gbc.writeMem(0x82b8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x145f);
        EXPECT(gbc.pc(), 0x82b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b8), 0xa9);
        // A9 01A1
        gbc.setState(0xd872, 0x6262, 0xb020, 0x1cf0, 0x1a5e, 0x31ce, 0x1, 0x0);
        gbc.writeMem(0xd872, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6262);
        EXPECT(gbc.pc(), 0xd873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd872), 0xa9);
        // A9 01A2
        gbc.setState(0xe116, 0x2830, 0x6fc0, 0x92ad, 0x89cf, 0xc7a1, 0x0, 0x0);
        gbc.writeMem(0xe116, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x2830);
        EXPECT(gbc.pc(), 0xe117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe116), 0xa9);
        // A9 01A3
        gbc.setState(0xaac5, 0xa0ea, 0x9e40, 0xaba1, 0x8612, 0x3234, 0x0, 0x1);
        gbc.writeMem(0xaac5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa0ea);
        EXPECT(gbc.pc(), 0xaac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac5), 0xa9);
        // A9 01A4
        gbc.setState(0x33b0, 0x8ba8, 0x83a0, 0xc181, 0x4223, 0x5edd, 0x0, 0x0);
        gbc.writeMem(0x33b0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8ba8);
        EXPECT(gbc.pc(), 0x33b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01A5
        gbc.setState(0xed71, 0xc1d9, 0x22c0, 0x482f, 0x8756, 0xd7cf, 0x1, 0x0);
        gbc.writeMem(0xed71, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc1d9);
        EXPECT(gbc.pc(), 0xed72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed71), 0xa9);
        // A9 01A6
        gbc.setState(0x85fc, 0x30ba, 0x1f00, 0x6280, 0x8c99, 0x83a5, 0x1, 0x1);
        gbc.writeMem(0x85fc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x30ba);
        EXPECT(gbc.pc(), 0x85fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85fc), 0xa9);
        // A9 01A7
        gbc.setState(0x2fbc, 0x95c9, 0xdae0, 0x83bf, 0x1cc5, 0xd000, 0x0, 0x1);
        gbc.writeMem(0x2fbc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x95c9);
        EXPECT(gbc.pc(), 0x2fbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01A8
        gbc.setState(0xa84b, 0x2a89, 0xef80, 0xc304, 0x8387, 0x79dd, 0x1, 0x0);
        gbc.writeMem(0xa84b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2a89);
        EXPECT(gbc.pc(), 0xa84c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84b), 0xa9);
        // A9 01A9
        gbc.setState(0x997a, 0xcdd7, 0xe180, 0xe6aa, 0x21b8, 0x4de8, 0x1, 0x1);
        gbc.writeMem(0x997a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xcdd7);
        EXPECT(gbc.pc(), 0x997b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x997a), 0xa9);
        // A9 01AA
        gbc.setState(0x5d19, 0x3d51, 0x8120, 0xa570, 0x7aae, 0x58d5, 0x1, 0x1);
        gbc.writeMem(0x5d19, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3d51);
        EXPECT(gbc.pc(), 0x5d1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01AB
        gbc.setState(0xec8c, 0x90c4, 0x96e0, 0xebc6, 0x64b6, 0x2611, 0x1, 0x0);
        gbc.writeMem(0xec8c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x90c4);
        EXPECT(gbc.pc(), 0xec8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec8c), 0xa9);
        // A9 01AC
        gbc.setState(0xbe4d, 0x5e18, 0x4140, 0xd0a8, 0x5682, 0x1fb5, 0x0, 0x0);
        gbc.writeMem(0xbe4d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5e18);
        EXPECT(gbc.pc(), 0xbe4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe4d), 0xa9);
        // A9 01AD
        gbc.setState(0xa241, 0x2772, 0x910, 0x52d7, 0x40ca, 0xb8d3, 0x0, 0x0);
        gbc.writeMem(0xa241, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2772);
        EXPECT(gbc.pc(), 0xa242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa241), 0xa9);
        // A9 01AE
        gbc.setState(0x455f, 0xe63f, 0xba40, 0x55bc, 0xe9d9, 0xf9c1, 0x0, 0x1);
        gbc.writeMem(0x455f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe63f);
        EXPECT(gbc.pc(), 0x4560);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01AF
        gbc.setState(0x1187, 0xe818, 0x5c20, 0x5c17, 0x7d93, 0x9f38, 0x1, 0x1);
        gbc.writeMem(0x1187, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe818);
        EXPECT(gbc.pc(), 0x1188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01B0
        gbc.setState(0xc3a8, 0xf933, 0x670, 0x8b9, 0x33e9, 0x2006, 0x1, 0x0);
        gbc.writeMem(0xc3a8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf933);
        EXPECT(gbc.pc(), 0xc3a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a8), 0xa9);
        // A9 01B1
        gbc.setState(0x8368, 0x837c, 0x92b0, 0x3e79, 0xba09, 0xb70a, 0x1, 0x0);
        gbc.writeMem(0x8368, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x837c);
        EXPECT(gbc.pc(), 0x8369);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8368), 0xa9);
        // A9 01B2
        gbc.setState(0xeed0, 0x29d0, 0x2fa0, 0x4a7b, 0x9bf5, 0xf5b7, 0x0, 0x1);
        gbc.writeMem(0xeed0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x29d0);
        EXPECT(gbc.pc(), 0xeed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeed0), 0xa9);
        // A9 01B3
        gbc.setState(0x9ed8, 0x152f, 0x9270, 0x8f62, 0x392, 0xf4dc, 0x0, 0x1);
        gbc.writeMem(0x9ed8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x152f);
        EXPECT(gbc.pc(), 0x9ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed8), 0xa9);
        // A9 01B4
        gbc.setState(0xa24a, 0xbfd2, 0xa160, 0x4163, 0x4a28, 0x54bc, 0x1, 0x1);
        gbc.writeMem(0xa24a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xbfd2);
        EXPECT(gbc.pc(), 0xa24b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa24a), 0xa9);
        // A9 01B5
        gbc.setState(0xa8ba, 0x38d5, 0x7d50, 0x323d, 0xf2f3, 0xa477, 0x0, 0x0);
        gbc.writeMem(0xa8ba, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x38d5);
        EXPECT(gbc.pc(), 0xa8bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ba), 0xa9);
        // A9 01B6
        gbc.setState(0xdb8c, 0x869a, 0xff30, 0xd856, 0x63ae, 0x842c, 0x1, 0x0);
        gbc.writeMem(0xdb8c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x869a);
        EXPECT(gbc.pc(), 0xdb8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb8c), 0xa9);
        // A9 01B7
        gbc.setState(0xd4b5, 0x3aa8, 0xed80, 0xc6a1, 0x97a, 0x6638, 0x0, 0x0);
        gbc.writeMem(0xd4b5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3aa8);
        EXPECT(gbc.pc(), 0xd4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4b5), 0xa9);
        // A9 01B8
        gbc.setState(0x4da2, 0x85e5, 0x85f0, 0xda08, 0x7c25, 0x5e16, 0x1, 0x0);
        gbc.writeMem(0x4da2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x85e5);
        EXPECT(gbc.pc(), 0x4da3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01B9
        gbc.setState(0x18ab, 0xdcd5, 0x3640, 0x8dfe, 0xe040, 0x84c2, 0x0, 0x1);
        gbc.writeMem(0x18ab, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdcd5);
        EXPECT(gbc.pc(), 0x18ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01BA
        gbc.setState(0xb782, 0xf075, 0x25c0, 0xae54, 0x4dff, 0x792f, 0x0, 0x0);
        gbc.writeMem(0xb782, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf075);
        EXPECT(gbc.pc(), 0xb783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb782), 0xa9);
        // A9 01BB
        gbc.setState(0xbbb0, 0xddd4, 0x4fa0, 0xc4e0, 0x522e, 0x6839, 0x1, 0x0);
        gbc.writeMem(0xbbb0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xddd4);
        EXPECT(gbc.pc(), 0xbbb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb0), 0xa9);
        // A9 01BC
        gbc.setState(0x6c0, 0x11b6, 0x4880, 0xa40f, 0x3e56, 0x3988, 0x1, 0x1);
        gbc.writeMem(0x6c0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x11b6);
        EXPECT(gbc.pc(), 0x6c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01BD
        gbc.setState(0xb7aa, 0x7db6, 0xc3c0, 0x4a2d, 0xff45, 0xc03b, 0x0, 0x0);
        gbc.writeMem(0xb7aa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7db6);
        EXPECT(gbc.pc(), 0xb7ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7aa), 0xa9);
        // A9 01BE
        gbc.setState(0x99da, 0x680d, 0x8ef0, 0x7fcb, 0x412a, 0x51f5, 0x0, 0x1);
        gbc.writeMem(0x99da, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x680d);
        EXPECT(gbc.pc(), 0x99db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99da), 0xa9);
        // A9 01BF
        gbc.setState(0x466a, 0xb206, 0xba40, 0x88d3, 0x450a, 0xd8dd, 0x1, 0x1);
        gbc.writeMem(0x466a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb206);
        EXPECT(gbc.pc(), 0x466b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01C0
        gbc.setState(0x92f3, 0xa17f, 0x1c10, 0xf6ed, 0x4c46, 0xc77e, 0x1, 0x1);
        gbc.writeMem(0x92f3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa17f);
        EXPECT(gbc.pc(), 0x92f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92f3), 0xa9);
        // A9 01C1
        gbc.setState(0x430c, 0xb92c, 0xac00, 0x5ddd, 0x6803, 0x459, 0x0, 0x1);
        gbc.writeMem(0x430c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb92c);
        EXPECT(gbc.pc(), 0x430d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01C2
        gbc.setState(0x7734, 0xa064, 0x490, 0xc28d, 0x6ee1, 0x1e7a, 0x1, 0x0);
        gbc.writeMem(0x7734, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa064);
        EXPECT(gbc.pc(), 0x7735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01C3
        gbc.setState(0x5f64, 0x1259, 0xfc00, 0x2cb5, 0xfd5b, 0x5921, 0x0, 0x1);
        gbc.writeMem(0x5f64, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1259);
        EXPECT(gbc.pc(), 0x5f65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01C4
        gbc.setState(0xed0f, 0xa36, 0xda20, 0x4b50, 0x4af5, 0x63d0, 0x0, 0x0);
        gbc.writeMem(0xed0f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa36);
        EXPECT(gbc.pc(), 0xed10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed0f), 0xa9);
        // A9 01C5
        gbc.setState(0x67ae, 0xaa68, 0xacd0, 0x4fc, 0x37e5, 0xc925, 0x0, 0x0);
        gbc.writeMem(0x67ae, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xaa68);
        EXPECT(gbc.pc(), 0x67af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01C6
        gbc.setState(0xc886, 0xbae6, 0xa750, 0xc497, 0x5ba6, 0x22b2, 0x0, 0x0);
        gbc.writeMem(0xc886, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbae6);
        EXPECT(gbc.pc(), 0xc887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc886), 0xa9);
        // A9 01C7
        gbc.setState(0x9c4f, 0x9fb4, 0xa220, 0xfb61, 0xc498, 0xd43a, 0x1, 0x1);
        gbc.writeMem(0x9c4f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9fb4);
        EXPECT(gbc.pc(), 0x9c50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c4f), 0xa9);
        // A9 01C8
        gbc.setState(0x9d9f, 0xd64d, 0xfbb0, 0xcffe, 0x9fe0, 0x2919, 0x0, 0x1);
        gbc.writeMem(0x9d9f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd64d);
        EXPECT(gbc.pc(), 0x9da0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9f), 0xa9);
        // A9 01C9
        gbc.setState(0x28e7, 0x91f3, 0x9ca0, 0xc481, 0xa447, 0xac23, 0x1, 0x0);
        gbc.writeMem(0x28e7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x91f3);
        EXPECT(gbc.pc(), 0x28e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01CA
        gbc.setState(0x8203, 0x505b, 0x35a0, 0x8294, 0xed0b, 0xea7b, 0x0, 0x0);
        gbc.writeMem(0x8203, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x505b);
        EXPECT(gbc.pc(), 0x8204);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8203), 0xa9);
        // A9 01CB
        gbc.setState(0x32bc, 0x8af3, 0x530, 0xcb28, 0xbeb7, 0xa1fc, 0x1, 0x0);
        gbc.writeMem(0x32bc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8af3);
        EXPECT(gbc.pc(), 0x32bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01CC
        gbc.setState(0xc000, 0x6fd7, 0x9310, 0xdf17, 0x2a96, 0xd31c, 0x1, 0x1);
        gbc.writeMem(0xc000, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x6fd7);
        EXPECT(gbc.pc(), 0xc001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc000), 0xa9);
        // A9 01CD
        gbc.setState(0x87da, 0x4d55, 0xb570, 0x6b0f, 0x774f, 0xa388, 0x0, 0x0);
        gbc.writeMem(0x87da, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4d55);
        EXPECT(gbc.pc(), 0x87db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87da), 0xa9);
        // A9 01CE
        gbc.setState(0x685e, 0xd865, 0x8750, 0xc1fe, 0x2b78, 0x1787, 0x1, 0x1);
        gbc.writeMem(0x685e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd865);
        EXPECT(gbc.pc(), 0x685f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01CF
        gbc.setState(0xba28, 0xc3ed, 0x4220, 0x407b, 0x6210, 0x647f, 0x1, 0x0);
        gbc.writeMem(0xba28, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc3ed);
        EXPECT(gbc.pc(), 0xba29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba28), 0xa9);
        // A9 01D0
        gbc.setState(0x333, 0x28b, 0xd570, 0x944f, 0xd8f4, 0xa661, 0x1, 0x0);
        gbc.writeMem(0x333, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x28b);
        EXPECT(gbc.pc(), 0x334);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01D1
        gbc.setState(0x75c5, 0x577a, 0x79c0, 0xb4b1, 0xd7a4, 0x92b7, 0x0, 0x0);
        gbc.writeMem(0x75c5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x577a);
        EXPECT(gbc.pc(), 0x75c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01D2
        gbc.setState(0x4371, 0x345e, 0x4010, 0x9025, 0x5dcd, 0x7a6, 0x0, 0x1);
        gbc.writeMem(0x4371, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x345e);
        EXPECT(gbc.pc(), 0x4372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01D3
        gbc.setState(0x782c, 0xa42e, 0xf650, 0xe1c7, 0xd4b8, 0x2bc1, 0x0, 0x1);
        gbc.writeMem(0x782c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa42e);
        EXPECT(gbc.pc(), 0x782d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01D4
        gbc.setState(0x7339, 0xeb7a, 0xbe20, 0xfd93, 0x9939, 0xf24, 0x0, 0x0);
        gbc.writeMem(0x7339, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xeb7a);
        EXPECT(gbc.pc(), 0x733a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01D5
        gbc.setState(0x6bff, 0x3838, 0xfd30, 0xd10e, 0x3c0b, 0xdfa3, 0x0, 0x1);
        gbc.writeMem(0x6bff, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3838);
        EXPECT(gbc.pc(), 0x6c00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01D6
        gbc.setState(0x5b56, 0xab2d, 0x31e0, 0x6aa4, 0x5ade, 0xf213, 0x0, 0x1);
        gbc.writeMem(0x5b56, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xab2d);
        EXPECT(gbc.pc(), 0x5b57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01D7
        gbc.setState(0x7562, 0xcdcd, 0xd5f0, 0x532c, 0x6ebe, 0x3881, 0x1, 0x0);
        gbc.writeMem(0x7562, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xcdcd);
        EXPECT(gbc.pc(), 0x7563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01D8
        gbc.setState(0x9da1, 0x900b, 0xb140, 0x7b1c, 0x457, 0xe711, 0x0, 0x0);
        gbc.writeMem(0x9da1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x900b);
        EXPECT(gbc.pc(), 0x9da2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da1), 0xa9);
        // A9 01DA
        gbc.setState(0x892c, 0x550a, 0xe400, 0xa04f, 0xac7f, 0xe12c, 0x1, 0x0);
        gbc.writeMem(0x892c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x550a);
        EXPECT(gbc.pc(), 0x892d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x892c), 0xa9);
        // A9 01DC
        gbc.setState(0xc7cf, 0x743b, 0xd3f0, 0x562e, 0xc056, 0x5934, 0x0, 0x1);
        gbc.writeMem(0xc7cf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x743b);
        EXPECT(gbc.pc(), 0xc7d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7cf), 0xa9);
        // A9 01DD
        gbc.setState(0x601d, 0x67ce, 0x14f0, 0x4487, 0x94fb, 0xd5b5, 0x1, 0x0);
        gbc.writeMem(0x601d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x67ce);
        EXPECT(gbc.pc(), 0x601e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01DE
        gbc.setState(0x8333, 0xa3c, 0x93a0, 0x638a, 0x6532, 0x5ddb, 0x1, 0x0);
        gbc.writeMem(0x8333, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa3c);
        EXPECT(gbc.pc(), 0x8334);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8333), 0xa9);
        // A9 01DF
        gbc.setState(0xd074, 0x12d2, 0x1e80, 0x14ce, 0xb98, 0x5c63, 0x1, 0x0);
        gbc.writeMem(0xd074, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x12d2);
        EXPECT(gbc.pc(), 0xd075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd074), 0xa9);
        // A9 01E0
        gbc.setState(0x5da2, 0x5faf, 0x3f90, 0xf4de, 0x4734, 0x2690, 0x0, 0x1);
        gbc.writeMem(0x5da2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5faf);
        EXPECT(gbc.pc(), 0x5da3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01E1
        gbc.setState(0xc417, 0xb535, 0x4180, 0x7c11, 0xd41d, 0xf077, 0x1, 0x1);
        gbc.writeMem(0xc417, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb535);
        EXPECT(gbc.pc(), 0xc418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc417), 0xa9);
        // A9 01E2
        gbc.setState(0x4225, 0x8d72, 0x5ff0, 0x35aa, 0x2dfa, 0xe81b, 0x1, 0x0);
        gbc.writeMem(0x4225, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8d72);
        EXPECT(gbc.pc(), 0x4226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01E3
        gbc.setState(0x8e, 0x5e79, 0x35b0, 0xf287, 0xfad1, 0xa333, 0x1, 0x1);
        gbc.writeMem(0x8e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5e79);
        EXPECT(gbc.pc(), 0x8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01E4
        gbc.setState(0xc9b6, 0x9dc, 0x8660, 0xef28, 0x3cdc, 0xda0b, 0x0, 0x1);
        gbc.writeMem(0xc9b6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9dc);
        EXPECT(gbc.pc(), 0xc9b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b6), 0xa9);
        // A9 01E5
        gbc.setState(0xbb49, 0xf8f5, 0xa4e0, 0x6c6e, 0x2a07, 0x4ccf, 0x0, 0x0);
        gbc.writeMem(0xbb49, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf8f5);
        EXPECT(gbc.pc(), 0xbb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb49), 0xa9);
        // A9 01E7
        gbc.setState(0x92c6, 0xbb5f, 0x39b0, 0x9281, 0xa192, 0xc5de, 0x1, 0x1);
        gbc.writeMem(0x92c6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xbb5f);
        EXPECT(gbc.pc(), 0x92c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c6), 0xa9);
        // A9 01E8
        gbc.setState(0x6191, 0xf991, 0xbe90, 0xb601, 0xb973, 0xc447, 0x0, 0x0);
        gbc.writeMem(0x6191, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf991);
        EXPECT(gbc.pc(), 0x6192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01E9
        gbc.setState(0xcb68, 0x77b3, 0xf180, 0x3115, 0xd768, 0xebb2, 0x0, 0x0);
        gbc.writeMem(0xcb68, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x77b3);
        EXPECT(gbc.pc(), 0xcb69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb68), 0xa9);
        // A9 01EA
        gbc.setState(0x2d4, 0x877c, 0x4610, 0x7bd0, 0xca38, 0x650b, 0x1, 0x1);
        gbc.writeMem(0x2d4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x877c);
        EXPECT(gbc.pc(), 0x2d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01EB
        gbc.setState(0xab9f, 0x2bb3, 0xa750, 0xca4b, 0x10b9, 0x640e, 0x1, 0x1);
        gbc.writeMem(0xab9f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2bb3);
        EXPECT(gbc.pc(), 0xaba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab9f), 0xa9);
        // A9 01EC
        gbc.setState(0x903e, 0x6d12, 0x7520, 0x5b23, 0x413f, 0xbe78, 0x0, 0x1);
        gbc.writeMem(0x903e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6d12);
        EXPECT(gbc.pc(), 0x903f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903e), 0xa9);
        // A9 01ED
        gbc.setState(0xdb54, 0x56b6, 0x7060, 0x310e, 0xd8f8, 0x5809, 0x0, 0x0);
        gbc.writeMem(0xdb54, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x56b6);
        EXPECT(gbc.pc(), 0xdb55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb54), 0xa9);
        // A9 01EE
        gbc.setState(0x576a, 0x940, 0x3190, 0x9c26, 0x581e, 0x4f2d, 0x0, 0x0);
        gbc.writeMem(0x576a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x940);
        EXPECT(gbc.pc(), 0x576b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01EF
        gbc.setState(0x4a12, 0xa8ca, 0xa90, 0x5597, 0xe943, 0x2511, 0x1, 0x1);
        gbc.writeMem(0x4a12, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa8ca);
        EXPECT(gbc.pc(), 0x4a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01F0
        gbc.setState(0x1577, 0xa6fe, 0xeb00, 0x1041, 0x6415, 0xcb8a, 0x1, 0x0);
        gbc.writeMem(0x1577, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa6fe);
        EXPECT(gbc.pc(), 0x1578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01F1
        gbc.setState(0xa4ae, 0x7d36, 0x79c0, 0xc585, 0xdc5e, 0x61d4, 0x0, 0x0);
        gbc.writeMem(0xa4ae, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7d36);
        EXPECT(gbc.pc(), 0xa4af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ae), 0xa9);
        // A9 01F2
        gbc.setState(0x8214, 0xd629, 0xb960, 0xdfa6, 0xe688, 0x6ef8, 0x0, 0x1);
        gbc.writeMem(0x8214, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xd629);
        EXPECT(gbc.pc(), 0x8215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8214), 0xa9);
        // A9 01F3
        gbc.setState(0x8d8e, 0xe99c, 0xdf30, 0xc0eb, 0x86bf, 0xecc6, 0x0, 0x1);
        gbc.writeMem(0x8d8e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe99c);
        EXPECT(gbc.pc(), 0x8d8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d8e), 0xa9);
        // A9 01F4
        gbc.setState(0x11b5, 0x2c87, 0x2660, 0xc0c0, 0x8568, 0xa72d, 0x1, 0x0);
        gbc.writeMem(0x11b5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2c87);
        EXPECT(gbc.pc(), 0x11b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01F5
        gbc.setState(0x3a4e, 0xf942, 0x2c80, 0xe2cb, 0x244f, 0x93fa, 0x0, 0x0);
        gbc.writeMem(0x3a4e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf942);
        EXPECT(gbc.pc(), 0x3a4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01F6
        gbc.setState(0x7a20, 0x9539, 0xa520, 0x6735, 0xc210, 0x5db0, 0x1, 0x0);
        gbc.writeMem(0x7a20, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9539);
        EXPECT(gbc.pc(), 0x7a21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01F7
        gbc.setState(0xe345, 0xc78f, 0x3d80, 0x6d2d, 0xe0bd, 0xbe4b, 0x0, 0x0);
        gbc.writeMem(0xe345, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc78f);
        EXPECT(gbc.pc(), 0xe346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe345), 0xa9);
        // A9 01F8
        gbc.setState(0x453e, 0xa8f6, 0x2fa0, 0x52fc, 0x8b95, 0xdc1a, 0x1, 0x0);
        gbc.writeMem(0x453e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa8f6);
        EXPECT(gbc.pc(), 0x453f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01F9
        gbc.setState(0x354d, 0xea0c, 0xb150, 0xe8ca, 0xaf0a, 0x2dda, 0x1, 0x0);
        gbc.writeMem(0x354d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xea0c);
        EXPECT(gbc.pc(), 0x354e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01FA
        gbc.setState(0x2720, 0xc731, 0x5570, 0x808, 0x8a42, 0x3048, 0x0, 0x0);
        gbc.writeMem(0x2720, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc731);
        EXPECT(gbc.pc(), 0x2721);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01FB
        gbc.setState(0xb322, 0x33d5, 0xd790, 0xa979, 0xeedf, 0x8b2d, 0x0, 0x1);
        gbc.writeMem(0xb322, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x33d5);
        EXPECT(gbc.pc(), 0xb323);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb322), 0xa9);
        // A9 01FC
        gbc.setState(0x93cd, 0x7be0, 0x7f00, 0x3353, 0x2e6b, 0x3555, 0x0, 0x0);
        gbc.writeMem(0x93cd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7be0);
        EXPECT(gbc.pc(), 0x93ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93cd), 0xa9);
        // A9 01FD
        gbc.setState(0xbee6, 0x7b9d, 0x33d0, 0x6139, 0xf20, 0x3ba2, 0x0, 0x0);
        gbc.writeMem(0xbee6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7b9d);
        EXPECT(gbc.pc(), 0xbee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee6), 0xa9);
        // A9 01FE
        gbc.setState(0x1da5, 0xf92f, 0xb90, 0xcfc, 0xa4cf, 0x61d8, 0x0, 0x1);
        gbc.writeMem(0x1da5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf92f);
        EXPECT(gbc.pc(), 0x1da6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 01FF
        gbc.setState(0x32e, 0x65cc, 0xb570, 0x33d0, 0xc177, 0xbd98, 0x1, 0x0);
        gbc.writeMem(0x32e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x65cc);
        EXPECT(gbc.pc(), 0x32f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0201
        gbc.setState(0xb2f2, 0x8628, 0xa7b0, 0xa603, 0xc4e7, 0x90b4, 0x1, 0x0);
        gbc.writeMem(0xb2f2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8628);
        EXPECT(gbc.pc(), 0xb2f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2f2), 0xa9);
        // A9 0202
        gbc.setState(0xac0a, 0x9e2d, 0x6030, 0x71d0, 0x8d0a, 0x33bd, 0x0, 0x0);
        gbc.writeMem(0xac0a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9e2d);
        EXPECT(gbc.pc(), 0xac0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac0a), 0xa9);
        // A9 0203
        gbc.setState(0xa084, 0x16d6, 0x3d30, 0x9aff, 0xd12d, 0x2d01, 0x0, 0x1);
        gbc.writeMem(0xa084, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x16d6);
        EXPECT(gbc.pc(), 0xa085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa084), 0xa9);
        // A9 0204
        gbc.setState(0x8b3f, 0xfd3e, 0xdf80, 0x99ba, 0x8bb2, 0x815b, 0x1, 0x1);
        gbc.writeMem(0x8b3f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xfd3e);
        EXPECT(gbc.pc(), 0x8b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b3f), 0xa9);
        // A9 0206
        gbc.setState(0xd6b5, 0x18bc, 0x7c60, 0xcc2, 0x90c2, 0x4454, 0x0, 0x0);
        gbc.writeMem(0xd6b5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x18bc);
        EXPECT(gbc.pc(), 0xd6b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b5), 0xa9);
        // A9 0207
        gbc.setState(0x5d6b, 0xc637, 0x2e40, 0x1ef8, 0x3722, 0xd454, 0x0, 0x0);
        gbc.writeMem(0x5d6b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc637);
        EXPECT(gbc.pc(), 0x5d6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0208
        gbc.setState(0xdab, 0xf2cf, 0x1160, 0xc0cd, 0xde3e, 0xaa83, 0x0, 0x0);
        gbc.writeMem(0xdab, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf2cf);
        EXPECT(gbc.pc(), 0xdac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0209
        gbc.setState(0x4a22, 0xc741, 0x3d80, 0xb763, 0x85a4, 0xd29e, 0x1, 0x1);
        gbc.writeMem(0x4a22, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc741);
        EXPECT(gbc.pc(), 0x4a23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 020A
        gbc.setState(0x1e44, 0x1779, 0xf6f0, 0x7a42, 0x27f6, 0xc9b3, 0x0, 0x0);
        gbc.writeMem(0x1e44, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1779);
        EXPECT(gbc.pc(), 0x1e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 020B
        gbc.setState(0xc846, 0x241f, 0x86b0, 0x98b0, 0x1989, 0xf1b2, 0x1, 0x1);
        gbc.writeMem(0xc846, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x241f);
        EXPECT(gbc.pc(), 0xc847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc846), 0xa9);
        // A9 020C
        gbc.setState(0xa83e, 0xa35f, 0xe230, 0xd2d7, 0x4696, 0x7864, 0x1, 0x1);
        gbc.writeMem(0xa83e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa35f);
        EXPECT(gbc.pc(), 0xa83f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa83e), 0xa9);
        // A9 020D
        gbc.setState(0x9199, 0xb0e7, 0x99d0, 0xca87, 0x6e2b, 0xb46b, 0x0, 0x0);
        gbc.writeMem(0x9199, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb0e7);
        EXPECT(gbc.pc(), 0x919a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9199), 0xa9);
        // A9 020E
        gbc.setState(0x4424, 0xa444, 0x53b0, 0xbe9c, 0xa60c, 0xf578, 0x0, 0x1);
        gbc.writeMem(0x4424, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa444);
        EXPECT(gbc.pc(), 0x4425);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 020F
        gbc.setState(0xd34, 0x2957, 0x560, 0xa283, 0xedfe, 0x63f3, 0x0, 0x0);
        gbc.writeMem(0xd34, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2957);
        EXPECT(gbc.pc(), 0xd35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0210
        gbc.setState(0xed4e, 0x1833, 0x39a0, 0xb213, 0x6be6, 0x7da7, 0x1, 0x0);
        gbc.writeMem(0xed4e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1833);
        EXPECT(gbc.pc(), 0xed4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed4e), 0xa9);
        // A9 0211
        gbc.setState(0xa948, 0xed8b, 0x4ae0, 0x4e27, 0xa366, 0xf3ef, 0x0, 0x1);
        gbc.writeMem(0xa948, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xed8b);
        EXPECT(gbc.pc(), 0xa949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa948), 0xa9);
        // A9 0212
        gbc.setState(0x6a8, 0x2f22, 0x8d00, 0x72f7, 0xee3, 0xf97d, 0x1, 0x1);
        gbc.writeMem(0x6a8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2f22);
        EXPECT(gbc.pc(), 0x6a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0213
        gbc.setState(0x2036, 0x17a6, 0x69e0, 0x358b, 0x6ca4, 0xb41d, 0x0, 0x1);
        gbc.writeMem(0x2036, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x17a6);
        EXPECT(gbc.pc(), 0x2037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0214
        gbc.setState(0xf8d, 0xa143, 0xa390, 0x9143, 0x5059, 0xff09, 0x0, 0x1);
        gbc.writeMem(0xf8d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa143);
        EXPECT(gbc.pc(), 0xf8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0215
        gbc.setState(0xd12e, 0x5d6, 0x8420, 0x1336, 0x9138, 0xabcc, 0x1, 0x0);
        gbc.writeMem(0xd12e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5d6);
        EXPECT(gbc.pc(), 0xd12f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd12e), 0xa9);
        // A9 0216
        gbc.setState(0xaded, 0x30e, 0xb600, 0x5627, 0x8ff9, 0x795c, 0x0, 0x0);
        gbc.writeMem(0xaded, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x30e);
        EXPECT(gbc.pc(), 0xadee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaded), 0xa9);
        // A9 0217
        gbc.setState(0x858d, 0xe21a, 0x86d0, 0xc91b, 0x288d, 0x2de0, 0x0, 0x1);
        gbc.writeMem(0x858d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe21a);
        EXPECT(gbc.pc(), 0x858e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x858d), 0xa9);
        // A9 0218
        gbc.setState(0x1b47, 0x6982, 0x2fd0, 0x9ec5, 0xf9e6, 0x12f3, 0x0, 0x1);
        gbc.writeMem(0x1b47, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6982);
        EXPECT(gbc.pc(), 0x1b48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0219
        gbc.setState(0xa15c, 0x7bb7, 0x36d0, 0x117e, 0x653f, 0x434c, 0x0, 0x0);
        gbc.writeMem(0xa15c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7bb7);
        EXPECT(gbc.pc(), 0xa15d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15c), 0xa9);
        // A9 021A
        gbc.setState(0x2643, 0x48d6, 0xc680, 0xf022, 0xcb33, 0x2cd1, 0x1, 0x0);
        gbc.writeMem(0x2643, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x48d6);
        EXPECT(gbc.pc(), 0x2644);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 021B
        gbc.setState(0xe30e, 0xd23f, 0xaac0, 0xbdc9, 0xd79e, 0x2e17, 0x1, 0x0);
        gbc.writeMem(0xe30e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd23f);
        EXPECT(gbc.pc(), 0xe30f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe30e), 0xa9);
        // A9 021C
        gbc.setState(0xde1a, 0x3c34, 0xf0e0, 0xfc52, 0xb58e, 0xaaf6, 0x0, 0x0);
        gbc.writeMem(0xde1a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3c34);
        EXPECT(gbc.pc(), 0xde1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1a), 0xa9);
        // A9 021D
        gbc.setState(0x885b, 0xcf02, 0x2280, 0xc502, 0x1ffd, 0x6823, 0x1, 0x0);
        gbc.writeMem(0x885b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xcf02);
        EXPECT(gbc.pc(), 0x885c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885b), 0xa9);
        // A9 021E
        gbc.setState(0x517e, 0x53fa, 0xe1f0, 0xd14f, 0x41a6, 0xb19a, 0x0, 0x1);
        gbc.writeMem(0x517e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x53fa);
        EXPECT(gbc.pc(), 0x517f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 021F
        gbc.setState(0xdb2f, 0x66ec, 0x9b20, 0xb164, 0xdc96, 0x645, 0x1, 0x1);
        gbc.writeMem(0xdb2f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x66ec);
        EXPECT(gbc.pc(), 0xdb30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb2f), 0xa9);
        // A9 0220
        gbc.setState(0x1f0a, 0x9966, 0x9610, 0x9cd9, 0xadac, 0xc16, 0x0, 0x0);
        gbc.writeMem(0x1f0a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9966);
        EXPECT(gbc.pc(), 0x1f0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0221
        gbc.setState(0xb4e2, 0x555d, 0x1ac0, 0x73fd, 0x6e65, 0xfb4c, 0x0, 0x0);
        gbc.writeMem(0xb4e2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x555d);
        EXPECT(gbc.pc(), 0xb4e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e2), 0xa9);
        // A9 0222
        gbc.setState(0xcbc7, 0xdd8c, 0x85d0, 0x8a7f, 0x1ee1, 0xaeb9, 0x1, 0x1);
        gbc.writeMem(0xcbc7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xdd8c);
        EXPECT(gbc.pc(), 0xcbc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbc7), 0xa9);
        // A9 0223
        gbc.setState(0xa5fc, 0xef25, 0x5220, 0xeba4, 0x40ff, 0x453a, 0x0, 0x0);
        gbc.writeMem(0xa5fc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xef25);
        EXPECT(gbc.pc(), 0xa5fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fc), 0xa9);
        // A9 0224
        gbc.setState(0xbcb4, 0x5279, 0xfe30, 0xe488, 0xc506, 0xea0, 0x0, 0x0);
        gbc.writeMem(0xbcb4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5279);
        EXPECT(gbc.pc(), 0xbcb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb4), 0xa9);
        // A9 0225
        gbc.setState(0x8d7f, 0x668d, 0xfa50, 0x9b8e, 0x2785, 0xbd9e, 0x1, 0x0);
        gbc.writeMem(0x8d7f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x668d);
        EXPECT(gbc.pc(), 0x8d80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7f), 0xa9);
        // A9 0226
        gbc.setState(0x9c0f, 0xb826, 0x4c90, 0x9c49, 0xe32a, 0xc0d, 0x1, 0x0);
        gbc.writeMem(0x9c0f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb826);
        EXPECT(gbc.pc(), 0x9c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c0f), 0xa9);
        // A9 0227
        gbc.setState(0x7168, 0x2983, 0xfc70, 0x7970, 0xfe91, 0xe04a, 0x1, 0x0);
        gbc.writeMem(0x7168, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2983);
        EXPECT(gbc.pc(), 0x7169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0228
        gbc.setState(0x4cea, 0x42ef, 0x7510, 0xbaff, 0x281b, 0xbed8, 0x1, 0x0);
        gbc.writeMem(0x4cea, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x42ef);
        EXPECT(gbc.pc(), 0x4ceb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0229
        gbc.setState(0x5a6b, 0xde35, 0xfe00, 0x5730, 0x56cf, 0x9608, 0x0, 0x1);
        gbc.writeMem(0x5a6b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xde35);
        EXPECT(gbc.pc(), 0x5a6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 022A
        gbc.setState(0x38d2, 0xf9d7, 0x5bc0, 0x12c4, 0x2fed, 0xf5b2, 0x0, 0x1);
        gbc.writeMem(0x38d2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf9d7);
        EXPECT(gbc.pc(), 0x38d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 022B
        gbc.setState(0x943e, 0x6444, 0x60f0, 0x3010, 0x1f7, 0xed3c, 0x1, 0x1);
        gbc.writeMem(0x943e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x6444);
        EXPECT(gbc.pc(), 0x943f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x943e), 0xa9);
        // A9 022D
        gbc.setState(0x5a60, 0xdfe2, 0xa20, 0xa8c6, 0xa127, 0x9ef8, 0x0, 0x1);
        gbc.writeMem(0x5a60, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xdfe2);
        EXPECT(gbc.pc(), 0x5a61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 022E
        gbc.setState(0x88da, 0x28e3, 0xfa40, 0x4e06, 0x39a7, 0xc018, 0x1, 0x0);
        gbc.writeMem(0x88da, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x28e3);
        EXPECT(gbc.pc(), 0x88db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88da), 0xa9);
        // A9 022F
        gbc.setState(0x607a, 0x77b7, 0x3da0, 0xe362, 0x3211, 0x4882, 0x1, 0x1);
        gbc.writeMem(0x607a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x77b7);
        EXPECT(gbc.pc(), 0x607b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0230
        gbc.setState(0xe756, 0xe94c, 0x4500, 0x7a38, 0x6d68, 0x6f49, 0x1, 0x1);
        gbc.writeMem(0xe756, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe94c);
        EXPECT(gbc.pc(), 0xe757);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe756), 0xa9);
        // A9 0231
        gbc.setState(0x26d1, 0xf06, 0xe060, 0x211d, 0xc66e, 0x903b, 0x1, 0x1);
        gbc.writeMem(0x26d1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf06);
        EXPECT(gbc.pc(), 0x26d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0233
        gbc.setState(0x1f87, 0xe9e9, 0xb4c0, 0xadb8, 0x937e, 0xe841, 0x0, 0x1);
        gbc.writeMem(0x1f87, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe9e9);
        EXPECT(gbc.pc(), 0x1f88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0234
        gbc.setState(0x8a4d, 0xa39a, 0xbdf0, 0x5a48, 0x656e, 0xb98c, 0x0, 0x0);
        gbc.writeMem(0x8a4d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa39a);
        EXPECT(gbc.pc(), 0x8a4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a4d), 0xa9);
        // A9 0235
        gbc.setState(0x5593, 0xd9c3, 0x94d0, 0xba49, 0x7101, 0x9003, 0x0, 0x0);
        gbc.writeMem(0x5593, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd9c3);
        EXPECT(gbc.pc(), 0x5594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0236
        gbc.setState(0xceb, 0xdcde, 0xcc50, 0xad09, 0xbc1c, 0xf88, 0x1, 0x1);
        gbc.writeMem(0xceb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xdcde);
        EXPECT(gbc.pc(), 0xcec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0237
        gbc.setState(0x9b88, 0x9706, 0xd560, 0x5d78, 0x81ea, 0x624d, 0x1, 0x1);
        gbc.writeMem(0x9b88, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9706);
        EXPECT(gbc.pc(), 0x9b89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b88), 0xa9);
        // A9 0238
        gbc.setState(0xac5b, 0x6474, 0xe9f0, 0x3996, 0xba0b, 0xcd0c, 0x0, 0x1);
        gbc.writeMem(0xac5b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6474);
        EXPECT(gbc.pc(), 0xac5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5b), 0xa9);
        // A9 0239
        gbc.setState(0x99ad, 0x8688, 0x6210, 0x8e9d, 0x78a4, 0x5304, 0x1, 0x1);
        gbc.writeMem(0x99ad, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8688);
        EXPECT(gbc.pc(), 0x99ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ad), 0xa9);
        // A9 023A
        gbc.setState(0x3f29, 0xb913, 0x7ec0, 0xc691, 0x242e, 0x8797, 0x1, 0x1);
        gbc.writeMem(0x3f29, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb913);
        EXPECT(gbc.pc(), 0x3f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 023B
        gbc.setState(0x3920, 0xa9cb, 0xe680, 0x2c75, 0x89fe, 0xbdbe, 0x0, 0x0);
        gbc.writeMem(0x3920, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa9cb);
        EXPECT(gbc.pc(), 0x3921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 023C
        gbc.setState(0xda8e, 0xbd8, 0x2cd0, 0x4765, 0x17a0, 0x2368, 0x0, 0x1);
        gbc.writeMem(0xda8e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xbd8);
        EXPECT(gbc.pc(), 0xda8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda8e), 0xa9);
        // A9 023D
        gbc.setState(0x59b, 0x8dc0, 0x5580, 0xf901, 0xc333, 0x6141, 0x1, 0x0);
        gbc.writeMem(0x59b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8dc0);
        EXPECT(gbc.pc(), 0x59c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 023E
        gbc.setState(0x285a, 0x4ba1, 0x6a90, 0x75cd, 0x887c, 0x66f0, 0x0, 0x0);
        gbc.writeMem(0x285a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4ba1);
        EXPECT(gbc.pc(), 0x285b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 023F
        gbc.setState(0xbab9, 0xf53d, 0x3200, 0x94ad, 0x6f05, 0x6a77, 0x1, 0x1);
        gbc.writeMem(0xbab9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf53d);
        EXPECT(gbc.pc(), 0xbaba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab9), 0xa9);
        // A9 0240
        gbc.setState(0x4800, 0x9be, 0x1810, 0x1676, 0xd83d, 0xc433, 0x1, 0x1);
        gbc.writeMem(0x4800, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9be);
        EXPECT(gbc.pc(), 0x4801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0241
        gbc.setState(0x224f, 0x34a2, 0xe9d0, 0xcf1e, 0xfe57, 0x7ee6, 0x1, 0x0);
        gbc.writeMem(0x224f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x34a2);
        EXPECT(gbc.pc(), 0x2250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0243
        gbc.setState(0x2c44, 0xd296, 0x7240, 0xb55d, 0x5e09, 0x98ad, 0x0, 0x1);
        gbc.writeMem(0x2c44, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd296);
        EXPECT(gbc.pc(), 0x2c45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0244
        gbc.setState(0x51af, 0xacbe, 0x3830, 0x777d, 0x18fa, 0xcaac, 0x0, 0x1);
        gbc.writeMem(0x51af, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xacbe);
        EXPECT(gbc.pc(), 0x51b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0245
        gbc.setState(0x352f, 0xd934, 0x9e40, 0xea, 0xe5cc, 0x4217, 0x0, 0x0);
        gbc.writeMem(0x352f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd934);
        EXPECT(gbc.pc(), 0x3530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0246
        gbc.setState(0xe04a, 0xfdd9, 0x39b0, 0xfce0, 0x946d, 0x9070, 0x0, 0x0);
        gbc.writeMem(0xe04a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xfdd9);
        EXPECT(gbc.pc(), 0xe04b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04a), 0xa9);
        // A9 0248
        gbc.setState(0x4984, 0x3079, 0x6410, 0xc8b6, 0x4730, 0x9415, 0x1, 0x1);
        gbc.writeMem(0x4984, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3079);
        EXPECT(gbc.pc(), 0x4985);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0249
        gbc.setState(0xa5ca, 0xbef6, 0xb2c0, 0x4a14, 0x2df5, 0x3fba, 0x0, 0x1);
        gbc.writeMem(0xa5ca, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbef6);
        EXPECT(gbc.pc(), 0xa5cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ca), 0xa9);
        // A9 024B
        gbc.setState(0xb6bb, 0x9794, 0xc5d0, 0x458, 0xc63d, 0x9526, 0x1, 0x1);
        gbc.writeMem(0xb6bb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9794);
        EXPECT(gbc.pc(), 0xb6bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6bb), 0xa9);
        // A9 024C
        gbc.setState(0x4ff0, 0xaa82, 0x5060, 0x4f3e, 0xa31f, 0x26a0, 0x1, 0x1);
        gbc.writeMem(0x4ff0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xaa82);
        EXPECT(gbc.pc(), 0x4ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 024D
        gbc.setState(0x346e, 0x6bc4, 0x6c30, 0x854b, 0xdb34, 0x2af4, 0x0, 0x0);
        gbc.writeMem(0x346e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6bc4);
        EXPECT(gbc.pc(), 0x346f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 024E
        gbc.setState(0x6202, 0xb13d, 0x5520, 0x8031, 0x2251, 0xac2e, 0x1, 0x0);
        gbc.writeMem(0x6202, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb13d);
        EXPECT(gbc.pc(), 0x6203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 024F
        gbc.setState(0xe8a, 0xbd8e, 0x56a0, 0xf861, 0x73f0, 0x18a2, 0x1, 0x0);
        gbc.writeMem(0xe8a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbd8e);
        EXPECT(gbc.pc(), 0xe8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0250
        gbc.setState(0x8619, 0x4d73, 0x16a0, 0x69dd, 0x959b, 0x184b, 0x0, 0x0);
        gbc.writeMem(0x8619, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4d73);
        EXPECT(gbc.pc(), 0x861a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8619), 0xa9);
        // A9 0252
        gbc.setState(0x7190, 0x95e5, 0x6750, 0x6309, 0x5330, 0xa41f, 0x1, 0x0);
        gbc.writeMem(0x7190, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x95e5);
        EXPECT(gbc.pc(), 0x7191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0253
        gbc.setState(0xace2, 0x71e, 0x8d0, 0x94cb, 0xc549, 0xe46b, 0x1, 0x1);
        gbc.writeMem(0xace2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x71e);
        EXPECT(gbc.pc(), 0xace3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xace2), 0xa9);
        // A9 0254
        gbc.setState(0x6fad, 0x9fcc, 0xdf70, 0xa971, 0xf576, 0x2f06, 0x0, 0x0);
        gbc.writeMem(0x6fad, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9fcc);
        EXPECT(gbc.pc(), 0x6fae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0255
        gbc.setState(0x632f, 0xce6a, 0x40c0, 0xb272, 0x8028, 0x6eb4, 0x1, 0x1);
        gbc.writeMem(0x632f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xce6a);
        EXPECT(gbc.pc(), 0x6330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0256
        gbc.setState(0x4ff7, 0x314a, 0xcfe0, 0x2295, 0xa1f6, 0xa6cb, 0x0, 0x1);
        gbc.writeMem(0x4ff7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x314a);
        EXPECT(gbc.pc(), 0x4ff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0257
        gbc.setState(0x6a85, 0x7637, 0xaa10, 0x4334, 0x96aa, 0x47a8, 0x1, 0x1);
        gbc.writeMem(0x6a85, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7637);
        EXPECT(gbc.pc(), 0x6a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0259
        gbc.setState(0x6bd, 0xcee7, 0xe610, 0xb95a, 0x5d98, 0x262e, 0x1, 0x0);
        gbc.writeMem(0x6bd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xcee7);
        EXPECT(gbc.pc(), 0x6be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 025A
        gbc.setState(0x4733, 0x1ba6, 0x9090, 0xfc31, 0x5fe1, 0xd4d2, 0x0, 0x1);
        gbc.writeMem(0x4733, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1ba6);
        EXPECT(gbc.pc(), 0x4734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 025B
        gbc.setState(0x4ae6, 0xaaf, 0x61f0, 0x318f, 0x424c, 0x94f, 0x1, 0x0);
        gbc.writeMem(0x4ae6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xaaf);
        EXPECT(gbc.pc(), 0x4ae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 025C
        gbc.setState(0x84a9, 0x6d43, 0xc7a0, 0x291, 0x3a80, 0x3639, 0x1, 0x1);
        gbc.writeMem(0x84a9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6d43);
        EXPECT(gbc.pc(), 0x84aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84a9), 0xa9);
        // A9 025D
        gbc.setState(0x7e10, 0x334d, 0xb3e0, 0x20e7, 0x918, 0xa17, 0x1, 0x1);
        gbc.writeMem(0x7e10, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x334d);
        EXPECT(gbc.pc(), 0x7e11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 025E
        gbc.setState(0xd83b, 0x2d23, 0xbae0, 0x2bc2, 0x6d68, 0x223b, 0x0, 0x1);
        gbc.writeMem(0xd83b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2d23);
        EXPECT(gbc.pc(), 0xd83c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd83b), 0xa9);
        // A9 025F
        gbc.setState(0xe70f, 0xb037, 0x91a0, 0x693d, 0xb639, 0x58a0, 0x0, 0x1);
        gbc.writeMem(0xe70f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb037);
        EXPECT(gbc.pc(), 0xe710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70f), 0xa9);
        // A9 0260
        gbc.setState(0x4a52, 0x1361, 0xc780, 0xd19a, 0x896a, 0xfd51, 0x0, 0x1);
        gbc.writeMem(0x4a52, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1361);
        EXPECT(gbc.pc(), 0x4a53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0261
        gbc.setState(0x267e, 0x13da, 0x600, 0x18ce, 0xd105, 0x282f, 0x1, 0x0);
        gbc.writeMem(0x267e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x13da);
        EXPECT(gbc.pc(), 0x267f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0262
        gbc.setState(0x9aed, 0x614a, 0x3240, 0x44d0, 0xd11f, 0xacf8, 0x0, 0x0);
        gbc.writeMem(0x9aed, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x614a);
        EXPECT(gbc.pc(), 0x9aee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aed), 0xa9);
        // A9 0263
        gbc.setState(0x2057, 0x5042, 0xb390, 0xff35, 0xa92d, 0xef8c, 0x1, 0x1);
        gbc.writeMem(0x2057, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5042);
        EXPECT(gbc.pc(), 0x2058);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0264
        gbc.setState(0xc244, 0x3fc7, 0x7830, 0xe4ec, 0x6707, 0xe713, 0x0, 0x1);
        gbc.writeMem(0xc244, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3fc7);
        EXPECT(gbc.pc(), 0xc245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc244), 0xa9);
        // A9 0265
        gbc.setState(0x3d25, 0x627a, 0xe040, 0xbc44, 0x9c5c, 0x9146, 0x1, 0x1);
        gbc.writeMem(0x3d25, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x627a);
        EXPECT(gbc.pc(), 0x3d26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0266
        gbc.setState(0xd275, 0x6865, 0x9f00, 0x3b0b, 0x487a, 0x7db2, 0x0, 0x1);
        gbc.writeMem(0xd275, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6865);
        EXPECT(gbc.pc(), 0xd276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd275), 0xa9);
        // A9 0267
        gbc.setState(0xc1d9, 0x5b4e, 0xdf00, 0x8c2f, 0xb138, 0xe304, 0x0, 0x0);
        gbc.writeMem(0xc1d9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5b4e);
        EXPECT(gbc.pc(), 0xc1da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1d9), 0xa9);
        // A9 0268
        gbc.setState(0x2902, 0x156e, 0x1630, 0x3234, 0xc639, 0x4025, 0x1, 0x1);
        gbc.writeMem(0x2902, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x156e);
        EXPECT(gbc.pc(), 0x2903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0269
        gbc.setState(0x3f69, 0x95b3, 0xf310, 0x9c91, 0x74cd, 0x3ada, 0x1, 0x1);
        gbc.writeMem(0x3f69, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x95b3);
        EXPECT(gbc.pc(), 0x3f6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 026A
        gbc.setState(0x4241, 0xdf35, 0xdc70, 0x6cb3, 0x3e7d, 0x43d, 0x1, 0x1);
        gbc.writeMem(0x4241, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xdf35);
        EXPECT(gbc.pc(), 0x4242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 026B
        gbc.setState(0x135f, 0x44e0, 0xb210, 0xa4a3, 0x1b7d, 0x98fc, 0x0, 0x0);
        gbc.writeMem(0x135f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x44e0);
        EXPECT(gbc.pc(), 0x1360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 026C
        gbc.setState(0x6609, 0x5ce0, 0x43e0, 0x8276, 0x7232, 0x2c33, 0x0, 0x1);
        gbc.writeMem(0x6609, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5ce0);
        EXPECT(gbc.pc(), 0x660a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 026D
        gbc.setState(0x1fdd, 0x84b0, 0xbe50, 0xe3a8, 0x20fa, 0xe16c, 0x0, 0x1);
        gbc.writeMem(0x1fdd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x84b0);
        EXPECT(gbc.pc(), 0x1fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 026E
        gbc.setState(0xb4a9, 0xacea, 0x7d20, 0xefd, 0x92a, 0xfc1, 0x0, 0x0);
        gbc.writeMem(0xb4a9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xacea);
        EXPECT(gbc.pc(), 0xb4aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a9), 0xa9);
        // A9 026F
        gbc.setState(0x3495, 0x230e, 0x5d90, 0x93c3, 0x96a5, 0x6345, 0x0, 0x0);
        gbc.writeMem(0x3495, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x230e);
        EXPECT(gbc.pc(), 0x3496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0270
        gbc.setState(0x5764, 0x81d8, 0x10c0, 0xdce1, 0x7183, 0xd596, 0x0, 0x1);
        gbc.writeMem(0x5764, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x81d8);
        EXPECT(gbc.pc(), 0x5765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0271
        gbc.setState(0xad08, 0xf976, 0xfee0, 0xf2b, 0x91ef, 0x8522, 0x1, 0x0);
        gbc.writeMem(0xad08, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf976);
        EXPECT(gbc.pc(), 0xad09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad08), 0xa9);
        // A9 0272
        gbc.setState(0xc7c9, 0xc024, 0xe7c0, 0x2074, 0x9c19, 0xd75f, 0x1, 0x1);
        gbc.writeMem(0xc7c9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc024);
        EXPECT(gbc.pc(), 0xc7ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7c9), 0xa9);
        // A9 0273
        gbc.setState(0xe330, 0x2f8b, 0x3610, 0x1785, 0x1117, 0xa9d8, 0x0, 0x0);
        gbc.writeMem(0xe330, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2f8b);
        EXPECT(gbc.pc(), 0xe331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe330), 0xa9);
        // A9 0274
        gbc.setState(0x5f78, 0x4383, 0xc0c0, 0xb7a5, 0xc239, 0x4079, 0x0, 0x0);
        gbc.writeMem(0x5f78, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4383);
        EXPECT(gbc.pc(), 0x5f79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0275
        gbc.setState(0x809a, 0x1f8, 0xfd40, 0x85f3, 0x8411, 0xca15, 0x0, 0x0);
        gbc.writeMem(0x809a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1f8);
        EXPECT(gbc.pc(), 0x809b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x809a), 0xa9);
        // A9 0277
        gbc.setState(0x786f, 0xf9e2, 0x8ce0, 0x5d7b, 0x9038, 0x85b, 0x1, 0x0);
        gbc.writeMem(0x786f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf9e2);
        EXPECT(gbc.pc(), 0x7870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0278
        gbc.setState(0xb443, 0xe8b5, 0xc0, 0x6181, 0xb9c8, 0x78a4, 0x0, 0x0);
        gbc.writeMem(0xb443, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe8b5);
        EXPECT(gbc.pc(), 0xb444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb443), 0xa9);
        // A9 027A
        gbc.setState(0xae66, 0xb7fa, 0xae70, 0x6e72, 0xe3ac, 0x5f63, 0x0, 0x1);
        gbc.writeMem(0xae66, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb7fa);
        EXPECT(gbc.pc(), 0xae67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae66), 0xa9);
        // A9 027B
        gbc.setState(0x2a9c, 0x4b40, 0x7f0, 0x7c96, 0x6b0f, 0x94d3, 0x0, 0x1);
        gbc.writeMem(0x2a9c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4b40);
        EXPECT(gbc.pc(), 0x2a9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 027C
        gbc.setState(0x517f, 0xfb37, 0x5670, 0x8bd8, 0xaff3, 0x6374, 0x1, 0x0);
        gbc.writeMem(0x517f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfb37);
        EXPECT(gbc.pc(), 0x5180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 027D
        gbc.setState(0x259, 0x5554, 0x3160, 0x1c4, 0x7735, 0x4865, 0x0, 0x1);
        gbc.writeMem(0x259, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5554);
        EXPECT(gbc.pc(), 0x25a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 027E
        gbc.setState(0xbc52, 0xea2b, 0xbfc0, 0x3858, 0x482c, 0xaa60, 0x0, 0x1);
        gbc.writeMem(0xbc52, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xea2b);
        EXPECT(gbc.pc(), 0xbc53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc52), 0xa9);
        // A9 027F
        gbc.setState(0x42ce, 0x321d, 0x9d20, 0x7e8c, 0x49dd, 0x52c1, 0x0, 0x0);
        gbc.writeMem(0x42ce, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x321d);
        EXPECT(gbc.pc(), 0x42cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0280
        gbc.setState(0xd538, 0x98ce, 0x8480, 0x6cef, 0xd218, 0x13b9, 0x1, 0x0);
        gbc.writeMem(0xd538, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x98ce);
        EXPECT(gbc.pc(), 0xd539);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd538), 0xa9);
        // A9 0281
        gbc.setState(0xd72d, 0x628b, 0x3690, 0x644c, 0xe8e, 0x7ab9, 0x0, 0x0);
        gbc.writeMem(0xd72d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x628b);
        EXPECT(gbc.pc(), 0xd72e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd72d), 0xa9);
        // A9 0282
        gbc.setState(0xb4da, 0xf57, 0x2080, 0x9694, 0xb534, 0xf5a6, 0x0, 0x0);
        gbc.writeMem(0xb4da, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf57);
        EXPECT(gbc.pc(), 0xb4db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4da), 0xa9);
        // A9 0283
        gbc.setState(0x8f5f, 0x406e, 0xe050, 0xb7f1, 0xba72, 0xc9aa, 0x1, 0x0);
        gbc.writeMem(0x8f5f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x406e);
        EXPECT(gbc.pc(), 0x8f60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f5f), 0xa9);
        // A9 0284
        gbc.setState(0xc81, 0xf517, 0xccf0, 0x90f9, 0xba9f, 0xf392, 0x1, 0x1);
        gbc.writeMem(0xc81, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf517);
        EXPECT(gbc.pc(), 0xc82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0285
        gbc.setState(0x25c7, 0xa5e9, 0xf500, 0x5ebf, 0xbaa2, 0xace3, 0x0, 0x0);
        gbc.writeMem(0x25c7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa5e9);
        EXPECT(gbc.pc(), 0x25c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0286
        gbc.setState(0xb275, 0x7eca, 0x74c0, 0xfa27, 0x9c3e, 0xe506, 0x0, 0x0);
        gbc.writeMem(0xb275, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7eca);
        EXPECT(gbc.pc(), 0xb276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb275), 0xa9);
        // A9 0287
        gbc.setState(0xd736, 0xc3a6, 0xa20, 0xcd89, 0xbbc, 0xac85, 0x0, 0x0);
        gbc.writeMem(0xd736, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc3a6);
        EXPECT(gbc.pc(), 0xd737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd736), 0xa9);
        // A9 0288
        gbc.setState(0x9bed, 0x7700, 0xed30, 0xcc7f, 0xf6ab, 0x7c81, 0x0, 0x1);
        gbc.writeMem(0x9bed, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7700);
        EXPECT(gbc.pc(), 0x9bee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bed), 0xa9);
        // A9 0289
        gbc.setState(0x952f, 0x1def, 0x9630, 0xbee4, 0x3c45, 0x14f7, 0x0, 0x1);
        gbc.writeMem(0x952f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1def);
        EXPECT(gbc.pc(), 0x9530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952f), 0xa9);
        // A9 028A
        gbc.setState(0x1d4b, 0x40e4, 0x39d0, 0x577f, 0x2a0b, 0xf4b6, 0x1, 0x1);
        gbc.writeMem(0x1d4b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x40e4);
        EXPECT(gbc.pc(), 0x1d4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 028B
        gbc.setState(0x8263, 0x10b8, 0x9d30, 0x3fc7, 0x745f, 0x1e67, 0x0, 0x1);
        gbc.writeMem(0x8263, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x10b8);
        EXPECT(gbc.pc(), 0x8264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8263), 0xa9);
        // A9 028C
        gbc.setState(0x4a03, 0xf446, 0x2020, 0x97e6, 0x90b, 0xb81d, 0x0, 0x1);
        gbc.writeMem(0x4a03, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf446);
        EXPECT(gbc.pc(), 0x4a04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 028E
        gbc.setState(0xbfa7, 0x92f0, 0xcbc0, 0x2cf3, 0xdc70, 0xa32d, 0x0, 0x1);
        gbc.writeMem(0xbfa7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x92f0);
        EXPECT(gbc.pc(), 0xbfa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa7), 0xa9);
        // A9 028F
        gbc.setState(0x89ea, 0x5293, 0x3810, 0x29e5, 0xb5, 0x4d68, 0x1, 0x0);
        gbc.writeMem(0x89ea, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5293);
        EXPECT(gbc.pc(), 0x89eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ea), 0xa9);
        // A9 0290
        gbc.setState(0x5cd9, 0x5346, 0x9c80, 0xdb41, 0xe6d2, 0x5757, 0x0, 0x1);
        gbc.writeMem(0x5cd9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5346);
        EXPECT(gbc.pc(), 0x5cda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0291
        gbc.setState(0xd8fb, 0xa8ce, 0x920, 0x45a6, 0xdc5c, 0xfe02, 0x1, 0x0);
        gbc.writeMem(0xd8fb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa8ce);
        EXPECT(gbc.pc(), 0xd8fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8fb), 0xa9);
        // A9 0292
        gbc.setState(0x4bd4, 0x8153, 0xf370, 0x339c, 0x4d7, 0xb36e, 0x0, 0x0);
        gbc.writeMem(0x4bd4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8153);
        EXPECT(gbc.pc(), 0x4bd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0293
        gbc.setState(0x95a0, 0xab2a, 0x4030, 0x46a3, 0xbbfc, 0xf632, 0x1, 0x0);
        gbc.writeMem(0x95a0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xab2a);
        EXPECT(gbc.pc(), 0x95a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a0), 0xa9);
        // A9 0294
        gbc.setState(0xec5b, 0xe903, 0xb740, 0x5253, 0xabd9, 0xcfc7, 0x1, 0x1);
        gbc.writeMem(0xec5b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe903);
        EXPECT(gbc.pc(), 0xec5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec5b), 0xa9);
        // A9 0295
        gbc.setState(0x530f, 0xabb7, 0xfb20, 0x86f7, 0xbec5, 0x93c2, 0x1, 0x1);
        gbc.writeMem(0x530f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xabb7);
        EXPECT(gbc.pc(), 0x5310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0296
        gbc.setState(0xa67e, 0xea55, 0xbe80, 0x839, 0xf408, 0x7ce1, 0x0, 0x0);
        gbc.writeMem(0xa67e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xea55);
        EXPECT(gbc.pc(), 0xa67f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa67e), 0xa9);
        // A9 0298
        gbc.setState(0x4146, 0x6e2a, 0xfc80, 0x114a, 0xdb21, 0x8a77, 0x0, 0x0);
        gbc.writeMem(0x4146, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6e2a);
        EXPECT(gbc.pc(), 0x4147);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0299
        gbc.setState(0x548a, 0xed1e, 0xdad0, 0x89e3, 0x228a, 0xd907, 0x1, 0x0);
        gbc.writeMem(0x548a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xed1e);
        EXPECT(gbc.pc(), 0x548b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 029A
        gbc.setState(0x340, 0x1043, 0x71d0, 0x4b8, 0x85c0, 0xaa63, 0x0, 0x1);
        gbc.writeMem(0x340, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1043);
        EXPECT(gbc.pc(), 0x341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 029B
        gbc.setState(0xb49d, 0x4b82, 0x76b0, 0xaadd, 0x42f9, 0xa2d8, 0x1, 0x0);
        gbc.writeMem(0xb49d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4b82);
        EXPECT(gbc.pc(), 0xb49e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb49d), 0xa9);
        // A9 029C
        gbc.setState(0xd930, 0xad45, 0x65a0, 0xe6d0, 0xa55a, 0xc44d, 0x0, 0x0);
        gbc.writeMem(0xd930, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xad45);
        EXPECT(gbc.pc(), 0xd931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd930), 0xa9);
        // A9 029E
        gbc.setState(0x70d9, 0x5ae4, 0x74c0, 0xf665, 0xf02b, 0x6001, 0x1, 0x1);
        gbc.writeMem(0x70d9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5ae4);
        EXPECT(gbc.pc(), 0x70da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 029F
        gbc.setState(0x6bcd, 0xb75, 0x9c10, 0xabce, 0xe8df, 0x4ada, 0x0, 0x0);
        gbc.writeMem(0x6bcd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb75);
        EXPECT(gbc.pc(), 0x6bce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02A0
        gbc.setState(0x58ea, 0x5b39, 0x7d00, 0x534f, 0xc1ac, 0x59d8, 0x0, 0x1);
        gbc.writeMem(0x58ea, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5b39);
        EXPECT(gbc.pc(), 0x58eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02A1
        gbc.setState(0x660f, 0x3966, 0xc280, 0x1d64, 0x5cdd, 0x566b, 0x0, 0x1);
        gbc.writeMem(0x660f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3966);
        EXPECT(gbc.pc(), 0x6610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02A2
        gbc.setState(0x8f91, 0x5642, 0x3450, 0x9498, 0xa088, 0x1873, 0x1, 0x0);
        gbc.writeMem(0x8f91, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5642);
        EXPECT(gbc.pc(), 0x8f92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f91), 0xa9);
        // A9 02A3
        gbc.setState(0xecb0, 0xdbb7, 0x5240, 0x90fb, 0xeedf, 0xa967, 0x1, 0x1);
        gbc.writeMem(0xecb0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xdbb7);
        EXPECT(gbc.pc(), 0xecb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb0), 0xa9);
        // A9 02A4
        gbc.setState(0xc458, 0xcf2c, 0xf110, 0x90ea, 0xc478, 0xc30d, 0x1, 0x0);
        gbc.writeMem(0xc458, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcf2c);
        EXPECT(gbc.pc(), 0xc459);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc458), 0xa9);
        // A9 02A5
        gbc.setState(0x2c7f, 0x5bab, 0x1c40, 0xe895, 0x7e1e, 0x7c4f, 0x1, 0x0);
        gbc.writeMem(0x2c7f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5bab);
        EXPECT(gbc.pc(), 0x2c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02A7
        gbc.setState(0x93fc, 0xc50f, 0x4e00, 0x9b8b, 0xa552, 0x3e47, 0x0, 0x0);
        gbc.writeMem(0x93fc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc50f);
        EXPECT(gbc.pc(), 0x93fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93fc), 0xa9);
        // A9 02A8
        gbc.setState(0x8d58, 0xf605, 0x4a50, 0x969b, 0x7d6, 0xaa16, 0x0, 0x1);
        gbc.writeMem(0x8d58, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf605);
        EXPECT(gbc.pc(), 0x8d59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d58), 0xa9);
        // A9 02A9
        gbc.setState(0xf85, 0xa3be, 0x3460, 0xaa50, 0xb1bc, 0xcea3, 0x0, 0x0);
        gbc.writeMem(0xf85, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa3be);
        EXPECT(gbc.pc(), 0xf86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02AA
        gbc.setState(0x85bb, 0x701e, 0xdec0, 0xc51d, 0xc21a, 0x17a0, 0x1, 0x1);
        gbc.writeMem(0x85bb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x701e);
        EXPECT(gbc.pc(), 0x85bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85bb), 0xa9);
        // A9 02AB
        gbc.setState(0x983e, 0x76f2, 0xfd0, 0x169a, 0xebb8, 0xfc95, 0x1, 0x1);
        gbc.writeMem(0x983e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x76f2);
        EXPECT(gbc.pc(), 0x983f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x983e), 0xa9);
        // A9 02AC
        gbc.setState(0xaed0, 0x21d9, 0x2610, 0xbfca, 0x551a, 0x8eee, 0x0, 0x1);
        gbc.writeMem(0xaed0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x21d9);
        EXPECT(gbc.pc(), 0xaed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed0), 0xa9);
        // A9 02AD
        gbc.setState(0x4265, 0x58e6, 0x3590, 0x792, 0x1d1, 0x7743, 0x1, 0x1);
        gbc.writeMem(0x4265, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x58e6);
        EXPECT(gbc.pc(), 0x4266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02AE
        gbc.setState(0x80c3, 0x3a6b, 0x2de0, 0xf7da, 0x3126, 0x75be, 0x1, 0x0);
        gbc.writeMem(0x80c3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3a6b);
        EXPECT(gbc.pc(), 0x80c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c3), 0xa9);
        // A9 02AF
        gbc.setState(0xdb2d, 0xfe21, 0xe000, 0xe7de, 0x160a, 0x2193, 0x1, 0x0);
        gbc.writeMem(0xdb2d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xfe21);
        EXPECT(gbc.pc(), 0xdb2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb2d), 0xa9);
        // A9 02B0
        gbc.setState(0xb43c, 0x6ed2, 0x1bf0, 0x4b4f, 0x4c89, 0xd1cc, 0x0, 0x0);
        gbc.writeMem(0xb43c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x6ed2);
        EXPECT(gbc.pc(), 0xb43d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb43c), 0xa9);
        // A9 02B1
        gbc.setState(0xe7e8, 0x13, 0x8d10, 0xa1e5, 0xd8af, 0x18ea, 0x1, 0x1);
        gbc.writeMem(0xe7e8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x13);
        EXPECT(gbc.pc(), 0xe7e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e8), 0xa9);
        // A9 02B2
        gbc.setState(0xbbeb, 0xfaab, 0x31d0, 0x6193, 0xfd53, 0xbcb4, 0x0, 0x0);
        gbc.writeMem(0xbbeb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xfaab);
        EXPECT(gbc.pc(), 0xbbec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbeb), 0xa9);
        // A9 02B3
        gbc.setState(0x9600, 0x190a, 0xd370, 0x107, 0xb446, 0x6e94, 0x0, 0x0);
        gbc.writeMem(0x9600, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x190a);
        EXPECT(gbc.pc(), 0x9601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9600), 0xa9);
        // A9 02B5
        gbc.setState(0x7e41, 0xf918, 0xc950, 0x73e5, 0xeb1e, 0xe4a5, 0x0, 0x0);
        gbc.writeMem(0x7e41, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf918);
        EXPECT(gbc.pc(), 0x7e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02B6
        gbc.setState(0x6312, 0xf831, 0x6430, 0x82ec, 0xd315, 0xc753, 0x1, 0x0);
        gbc.writeMem(0x6312, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf831);
        EXPECT(gbc.pc(), 0x6313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02B8
        gbc.setState(0xc470, 0x3f81, 0xfbf0, 0xf1dd, 0xd3f3, 0xd8a8, 0x1, 0x0);
        gbc.writeMem(0xc470, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3f81);
        EXPECT(gbc.pc(), 0xc471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc470), 0xa9);
        // A9 02B9
        gbc.setState(0xdcbc, 0x4599, 0x2460, 0xd610, 0x35e7, 0x6e73, 0x1, 0x0);
        gbc.writeMem(0xdcbc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4599);
        EXPECT(gbc.pc(), 0xdcbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcbc), 0xa9);
        // A9 02BA
        gbc.setState(0x797f, 0x604d, 0x49e0, 0xff86, 0xce44, 0x5b37, 0x0, 0x1);
        gbc.writeMem(0x797f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x604d);
        EXPECT(gbc.pc(), 0x7980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02BB
        gbc.setState(0xcb8, 0xc953, 0x1b60, 0xe628, 0xb7f2, 0xd871, 0x0, 0x1);
        gbc.writeMem(0xcb8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc953);
        EXPECT(gbc.pc(), 0xcb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02BC
        gbc.setState(0x858a, 0x53c3, 0x8510, 0x708e, 0x8986, 0x76d2, 0x1, 0x0);
        gbc.writeMem(0x858a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x53c3);
        EXPECT(gbc.pc(), 0x858b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x858a), 0xa9);
        // A9 02BD
        gbc.setState(0x9f73, 0x298d, 0x9c0, 0xcfd7, 0x2fc1, 0xc7f3, 0x1, 0x1);
        gbc.writeMem(0x9f73, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x298d);
        EXPECT(gbc.pc(), 0x9f74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f73), 0xa9);
        // A9 02BE
        gbc.setState(0x1c86, 0x91ab, 0xd4b0, 0x3f52, 0xd470, 0xedba, 0x1, 0x0);
        gbc.writeMem(0x1c86, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x91ab);
        EXPECT(gbc.pc(), 0x1c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02BF
        gbc.setState(0x9, 0xf96f, 0xb370, 0x315d, 0xc686, 0x249, 0x1, 0x0);
        gbc.writeMem(0x9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf96f);
        EXPECT(gbc.pc(), 0xa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02C0
        gbc.setState(0x1fc1, 0xd7cb, 0x7850, 0xbb00, 0xf678, 0xc7c0, 0x1, 0x1);
        gbc.writeMem(0x1fc1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd7cb);
        EXPECT(gbc.pc(), 0x1fc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02C1
        gbc.setState(0x183d, 0xffab, 0x3880, 0x638f, 0x73bd, 0xfa99, 0x1, 0x0);
        gbc.writeMem(0x183d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xffab);
        EXPECT(gbc.pc(), 0x183e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02C3
        gbc.setState(0x7ecb, 0xe891, 0xf4f0, 0x468a, 0xde4, 0xcb4c, 0x0, 0x0);
        gbc.writeMem(0x7ecb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe891);
        EXPECT(gbc.pc(), 0x7ecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02C4
        gbc.setState(0x62d3, 0x1962, 0x8100, 0x9930, 0x7f1, 0xf591, 0x0, 0x0);
        gbc.writeMem(0x62d3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1962);
        EXPECT(gbc.pc(), 0x62d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02C5
        gbc.setState(0x547d, 0x54b8, 0x6d00, 0xff4e, 0xfaac, 0x4065, 0x0, 0x0);
        gbc.writeMem(0x547d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x54b8);
        EXPECT(gbc.pc(), 0x547e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02C6
        gbc.setState(0xa3f7, 0x13e, 0x4ef0, 0xe17, 0xf5b3, 0x6d80, 0x1, 0x1);
        gbc.writeMem(0xa3f7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x13e);
        EXPECT(gbc.pc(), 0xa3f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3f7), 0xa9);
        // A9 02C7
        gbc.setState(0x8ec9, 0x4b00, 0x4ee0, 0x454b, 0xc330, 0xb5b1, 0x1, 0x1);
        gbc.writeMem(0x8ec9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4b00);
        EXPECT(gbc.pc(), 0x8eca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec9), 0xa9);
        // A9 02C8
        gbc.setState(0xc695, 0x24b5, 0x7340, 0x8164, 0x80e3, 0x803a, 0x0, 0x0);
        gbc.writeMem(0xc695, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x24b5);
        EXPECT(gbc.pc(), 0xc696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc695), 0xa9);
        // A9 02C9
        gbc.setState(0xea20, 0x6e24, 0x27e0, 0x67dd, 0x398a, 0x4d39, 0x1, 0x1);
        gbc.writeMem(0xea20, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6e24);
        EXPECT(gbc.pc(), 0xea21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea20), 0xa9);
        // A9 02CA
        gbc.setState(0xdacd, 0x98f4, 0x3700, 0x2a54, 0xb471, 0xdde2, 0x1, 0x0);
        gbc.writeMem(0xdacd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x98f4);
        EXPECT(gbc.pc(), 0xdace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdacd), 0xa9);
        // A9 02CB
        gbc.setState(0x4146, 0xaf81, 0xe990, 0x6c1d, 0xfc9e, 0xc2a3, 0x0, 0x1);
        gbc.writeMem(0x4146, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xaf81);
        EXPECT(gbc.pc(), 0x4147);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02CC
        gbc.setState(0x62bf, 0xe264, 0xf700, 0xb7a3, 0xad98, 0x2a90, 0x0, 0x1);
        gbc.writeMem(0x62bf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe264);
        EXPECT(gbc.pc(), 0x62c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02CD
        gbc.setState(0xe84e, 0xcc16, 0xf680, 0x462e, 0xa21a, 0x769a, 0x1, 0x0);
        gbc.writeMem(0xe84e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xcc16);
        EXPECT(gbc.pc(), 0xe84f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe84e), 0xa9);
        // A9 02CE
        gbc.setState(0x2434, 0x499, 0x5bf0, 0x76e0, 0xb2f, 0x96f3, 0x1, 0x0);
        gbc.writeMem(0x2434, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x499);
        EXPECT(gbc.pc(), 0x2435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02CF
        gbc.setState(0x9bcc, 0xb19, 0x1a60, 0x877, 0x7ab1, 0xe7b7, 0x1, 0x1);
        gbc.writeMem(0x9bcc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb19);
        EXPECT(gbc.pc(), 0x9bcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bcc), 0xa9);
        // A9 02D0
        gbc.setState(0x6e4e, 0x80ad, 0xd0e0, 0xad85, 0x23e3, 0xde5d, 0x0, 0x0);
        gbc.writeMem(0x6e4e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x80ad);
        EXPECT(gbc.pc(), 0x6e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02D1
        gbc.setState(0x3a49, 0x546a, 0x8420, 0xd75a, 0xdf4c, 0x956, 0x1, 0x0);
        gbc.writeMem(0x3a49, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x546a);
        EXPECT(gbc.pc(), 0x3a4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02D2
        gbc.setState(0x16b7, 0x9e30, 0xf040, 0xbde7, 0xc698, 0x698f, 0x0, 0x1);
        gbc.writeMem(0x16b7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9e30);
        EXPECT(gbc.pc(), 0x16b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02D3
        gbc.setState(0xec0, 0x445f, 0xcb60, 0x8609, 0xc6b6, 0x4f46, 0x1, 0x1);
        gbc.writeMem(0xec0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x445f);
        EXPECT(gbc.pc(), 0xec1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02D4
        gbc.setState(0x4187, 0x640f, 0x3a40, 0xd67f, 0xeff4, 0x7f90, 0x0, 0x1);
        gbc.writeMem(0x4187, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x640f);
        EXPECT(gbc.pc(), 0x4188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02D5
        gbc.setState(0x6017, 0xade, 0x23b0, 0x6948, 0x7694, 0x900d, 0x1, 0x0);
        gbc.writeMem(0x6017, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xade);
        EXPECT(gbc.pc(), 0x6018);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02D6
        gbc.setState(0x376b, 0x46d6, 0xa70, 0xdbad, 0x5b0c, 0x3969, 0x0, 0x1);
        gbc.writeMem(0x376b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x46d6);
        EXPECT(gbc.pc(), 0x376c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02D7
        gbc.setState(0xd223, 0xcada, 0xa260, 0x8ea3, 0x5778, 0x5bf4, 0x1, 0x1);
        gbc.writeMem(0xd223, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcada);
        EXPECT(gbc.pc(), 0xd224);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd223), 0xa9);
        // A9 02D8
        gbc.setState(0x4c0d, 0xfd48, 0xa340, 0x80b9, 0x25bd, 0x596e, 0x0, 0x1);
        gbc.writeMem(0x4c0d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfd48);
        EXPECT(gbc.pc(), 0x4c0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02D9
        gbc.setState(0xe74a, 0x8b90, 0x1660, 0x9a25, 0x47ac, 0x8a88, 0x0, 0x0);
        gbc.writeMem(0xe74a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8b90);
        EXPECT(gbc.pc(), 0xe74b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe74a), 0xa9);
        // A9 02DA
        gbc.setState(0xa281, 0x9473, 0xfb50, 0x2787, 0x9141, 0x1ad0, 0x1, 0x1);
        gbc.writeMem(0xa281, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9473);
        EXPECT(gbc.pc(), 0xa282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa281), 0xa9);
        // A9 02DB
        gbc.setState(0x75dd, 0x7616, 0x2fc0, 0xf014, 0x4c12, 0x1fa5, 0x0, 0x1);
        gbc.writeMem(0x75dd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7616);
        EXPECT(gbc.pc(), 0x75de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02DC
        gbc.setState(0xa700, 0x67d0, 0x78e0, 0xf8c0, 0x4ace, 0x918c, 0x1, 0x1);
        gbc.writeMem(0xa700, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x67d0);
        EXPECT(gbc.pc(), 0xa701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa700), 0xa9);
        // A9 02DD
        gbc.setState(0x5848, 0x3776, 0x2c30, 0xf55b, 0x6a0b, 0x10f1, 0x0, 0x1);
        gbc.writeMem(0x5848, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3776);
        EXPECT(gbc.pc(), 0x5849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02DE
        gbc.setState(0x130d, 0x85be, 0x370, 0x6c68, 0xf94b, 0xd5f1, 0x0, 0x1);
        gbc.writeMem(0x130d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x85be);
        EXPECT(gbc.pc(), 0x130e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02DF
        gbc.setState(0xe74f, 0x846f, 0x83d0, 0x2510, 0x9fd2, 0x3783, 0x0, 0x0);
        gbc.writeMem(0xe74f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x846f);
        EXPECT(gbc.pc(), 0xe750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe74f), 0xa9);
        // A9 02E0
        gbc.setState(0x6a7a, 0x5e36, 0xfd60, 0xef4b, 0x7a62, 0x979a, 0x1, 0x0);
        gbc.writeMem(0x6a7a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5e36);
        EXPECT(gbc.pc(), 0x6a7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02E1
        gbc.setState(0x53be, 0x2826, 0x9540, 0xfb97, 0xe277, 0xa0ef, 0x1, 0x0);
        gbc.writeMem(0x53be, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2826);
        EXPECT(gbc.pc(), 0x53bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02E2
        gbc.setState(0x1191, 0xd855, 0x3190, 0x796a, 0x6dac, 0x7532, 0x1, 0x1);
        gbc.writeMem(0x1191, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd855);
        EXPECT(gbc.pc(), 0x1192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02E3
        gbc.setState(0x48cd, 0xcebb, 0xe570, 0xb2ca, 0x5f34, 0x2f34, 0x0, 0x1);
        gbc.writeMem(0x48cd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xcebb);
        EXPECT(gbc.pc(), 0x48ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02E4
        gbc.setState(0xc701, 0x2b95, 0x6a00, 0x93c8, 0xafd0, 0xb88, 0x0, 0x1);
        gbc.writeMem(0xc701, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2b95);
        EXPECT(gbc.pc(), 0xc702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc701), 0xa9);
        // A9 02E5
        gbc.setState(0x7c1, 0x2da7, 0x5870, 0x210e, 0x51a9, 0xf446, 0x1, 0x0);
        gbc.writeMem(0x7c1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2da7);
        EXPECT(gbc.pc(), 0x7c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02E6
        gbc.setState(0x3cbc, 0xabbc, 0x4f30, 0x727d, 0x52c5, 0x3bb7, 0x0, 0x1);
        gbc.writeMem(0x3cbc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xabbc);
        EXPECT(gbc.pc(), 0x3cbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02E7
        gbc.setState(0xb7eb, 0x5f16, 0x90d0, 0x426, 0x1df7, 0xbf5e, 0x1, 0x0);
        gbc.writeMem(0xb7eb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5f16);
        EXPECT(gbc.pc(), 0xb7ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7eb), 0xa9);
        // A9 02E8
        gbc.setState(0x6e93, 0x2eca, 0x48f0, 0x3fd3, 0xaa0e, 0xfd03, 0x1, 0x0);
        gbc.writeMem(0x6e93, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2eca);
        EXPECT(gbc.pc(), 0x6e94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02E9
        gbc.setState(0x7b5d, 0x9673, 0x6460, 0x4769, 0x5756, 0xec5b, 0x1, 0x0);
        gbc.writeMem(0x7b5d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9673);
        EXPECT(gbc.pc(), 0x7b5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02EB
        gbc.setState(0x8e2, 0xfd6d, 0x2060, 0x9e82, 0xe230, 0x866d, 0x1, 0x1);
        gbc.writeMem(0x8e2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfd6d);
        EXPECT(gbc.pc(), 0x8e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02ED
        gbc.setState(0xb5c9, 0x6d9b, 0x9e40, 0xe8e, 0xfc61, 0xa187, 0x0, 0x0);
        gbc.writeMem(0xb5c9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6d9b);
        EXPECT(gbc.pc(), 0xb5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c9), 0xa9);
        // A9 02EE
        gbc.setState(0x326b, 0xabaf, 0x9160, 0x5e38, 0x6056, 0x3989, 0x1, 0x1);
        gbc.writeMem(0x326b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xabaf);
        EXPECT(gbc.pc(), 0x326c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02EF
        gbc.setState(0xcbad, 0x7949, 0xa5d0, 0x821c, 0x4110, 0xa04e, 0x1, 0x0);
        gbc.writeMem(0xcbad, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7949);
        EXPECT(gbc.pc(), 0xcbae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbad), 0xa9);
        // A9 02F0
        gbc.setState(0x419c, 0xa5ec, 0x1060, 0x8cba, 0x9d5c, 0xf496, 0x0, 0x1);
        gbc.writeMem(0x419c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa5ec);
        EXPECT(gbc.pc(), 0x419d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02F1
        gbc.setState(0x408f, 0x4bf5, 0xd990, 0xb89e, 0x923c, 0x51f, 0x0, 0x0);
        gbc.writeMem(0x408f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4bf5);
        EXPECT(gbc.pc(), 0x4090);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02F2
        gbc.setState(0x5ac0, 0x7659, 0x4d10, 0x4787, 0x91c0, 0xf05f, 0x0, 0x1);
        gbc.writeMem(0x5ac0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7659);
        EXPECT(gbc.pc(), 0x5ac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02F3
        gbc.setState(0xafc, 0xd947, 0xcf30, 0x4f6c, 0x74c1, 0x29ba, 0x1, 0x1);
        gbc.writeMem(0xafc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd947);
        EXPECT(gbc.pc(), 0xafd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02F4
        gbc.setState(0x3374, 0x9d61, 0x920, 0xb3d5, 0x9a86, 0xbc08, 0x1, 0x1);
        gbc.writeMem(0x3374, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9d61);
        EXPECT(gbc.pc(), 0x3375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02F5
        gbc.setState(0x1785, 0x7397, 0x64c0, 0xe009, 0xc2d9, 0x9d16, 0x1, 0x1);
        gbc.writeMem(0x1785, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7397);
        EXPECT(gbc.pc(), 0x1786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02F6
        gbc.setState(0xe444, 0xcfc2, 0x1910, 0x7b50, 0x14ab, 0x620e, 0x1, 0x0);
        gbc.writeMem(0xe444, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xcfc2);
        EXPECT(gbc.pc(), 0xe445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe444), 0xa9);
        // A9 02F7
        gbc.setState(0x7aa1, 0x649, 0xd950, 0xc207, 0x2cb9, 0xdd47, 0x1, 0x1);
        gbc.writeMem(0x7aa1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x649);
        EXPECT(gbc.pc(), 0x7aa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02F8
        gbc.setState(0x8868, 0x15d9, 0xdf70, 0x1f91, 0xf4eb, 0x7474, 0x0, 0x1);
        gbc.writeMem(0x8868, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x15d9);
        EXPECT(gbc.pc(), 0x8869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8868), 0xa9);
        // A9 02F9
        gbc.setState(0xd379, 0xd2bc, 0x3d00, 0xce62, 0x63bd, 0xeb42, 0x0, 0x1);
        gbc.writeMem(0xd379, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd2bc);
        EXPECT(gbc.pc(), 0xd37a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd379), 0xa9);
        // A9 02FA
        gbc.setState(0x3037, 0x43be, 0x57b0, 0x71dc, 0x412c, 0xf859, 0x0, 0x1);
        gbc.writeMem(0x3037, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x43be);
        EXPECT(gbc.pc(), 0x3038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02FB
        gbc.setState(0x70c9, 0x9c55, 0xb4d0, 0x945a, 0x97d9, 0x6309, 0x1, 0x0);
        gbc.writeMem(0x70c9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9c55);
        EXPECT(gbc.pc(), 0x70ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 02FC
        gbc.setState(0xc3bd, 0x1fd8, 0x2e40, 0x7204, 0xe1c3, 0xc8e9, 0x1, 0x1);
        gbc.writeMem(0xc3bd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1fd8);
        EXPECT(gbc.pc(), 0xc3be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3bd), 0xa9);
        // A9 02FD
        gbc.setState(0x914e, 0xc0b8, 0x8a50, 0xf6db, 0xb21f, 0xdbdd, 0x1, 0x1);
        gbc.writeMem(0x914e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc0b8);
        EXPECT(gbc.pc(), 0x914f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914e), 0xa9);
        // A9 02FE
        gbc.setState(0xa8ab, 0x5fd3, 0xda50, 0xae87, 0xf1ff, 0xbd9d, 0x0, 0x0);
        gbc.writeMem(0xa8ab, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5fd3);
        EXPECT(gbc.pc(), 0xa8ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ab), 0xa9);
        // A9 02FF
        gbc.setState(0xa594, 0x8233, 0x6150, 0x892d, 0xde0a, 0x8880, 0x0, 0x0);
        gbc.writeMem(0xa594, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8233);
        EXPECT(gbc.pc(), 0xa595);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa594), 0xa9);
        // A9 0300
        gbc.setState(0x6cd7, 0x2897, 0x8190, 0xbb93, 0x7282, 0x1979, 0x1, 0x1);
        gbc.writeMem(0x6cd7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x2897);
        EXPECT(gbc.pc(), 0x6cd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0301
        gbc.setState(0x7954, 0xf8dd, 0xc420, 0x408f, 0x4248, 0x6c7b, 0x0, 0x0);
        gbc.writeMem(0x7954, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf8dd);
        EXPECT(gbc.pc(), 0x7955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0302
        gbc.setState(0x41bc, 0xb077, 0x81a0, 0x1296, 0x14ac, 0x63c3, 0x1, 0x1);
        gbc.writeMem(0x41bc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb077);
        EXPECT(gbc.pc(), 0x41bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0303
        gbc.setState(0xef5b, 0xb4ec, 0x2bc0, 0xcb52, 0xc37f, 0xd6f5, 0x1, 0x0);
        gbc.writeMem(0xef5b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb4ec);
        EXPECT(gbc.pc(), 0xef5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef5b), 0xa9);
        // A9 0304
        gbc.setState(0xc762, 0x295f, 0x7620, 0xa948, 0xd471, 0x98cc, 0x0, 0x0);
        gbc.writeMem(0xc762, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x295f);
        EXPECT(gbc.pc(), 0xc763);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc762), 0xa9);
        // A9 0305
        gbc.setState(0x4617, 0x81dd, 0x23e0, 0xd720, 0x9eb4, 0x868b, 0x0, 0x1);
        gbc.writeMem(0x4617, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x81dd);
        EXPECT(gbc.pc(), 0x4618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0306
        gbc.setState(0x47db, 0xc78c, 0x4d00, 0xa434, 0x94cc, 0x85b3, 0x0, 0x0);
        gbc.writeMem(0x47db, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc78c);
        EXPECT(gbc.pc(), 0x47dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0307
        gbc.setState(0x8712, 0x45be, 0x3090, 0x3946, 0x8de2, 0x29e6, 0x1, 0x1);
        gbc.writeMem(0x8712, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x45be);
        EXPECT(gbc.pc(), 0x8713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8712), 0xa9);
        // A9 0308
        gbc.setState(0xc95c, 0x2080, 0x14c0, 0xc0ba, 0x820d, 0x1893, 0x1, 0x1);
        gbc.writeMem(0xc95c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2080);
        EXPECT(gbc.pc(), 0xc95d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc95c), 0xa9);
        // A9 0309
        gbc.setState(0x7a47, 0xa883, 0x8e90, 0x6fb9, 0x2a59, 0xa1fb, 0x1, 0x1);
        gbc.writeMem(0x7a47, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa883);
        EXPECT(gbc.pc(), 0x7a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 030A
        gbc.setState(0x1fbc, 0x6449, 0x5c70, 0xb33a, 0xd5eb, 0xb846, 0x1, 0x0);
        gbc.writeMem(0x1fbc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6449);
        EXPECT(gbc.pc(), 0x1fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 030B
        gbc.setState(0xbc8d, 0x20ec, 0x6e50, 0x8ca4, 0xd82d, 0x4109, 0x0, 0x0);
        gbc.writeMem(0xbc8d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x20ec);
        EXPECT(gbc.pc(), 0xbc8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8d), 0xa9);
        // A9 030C
        gbc.setState(0x6b08, 0x95d4, 0x3e20, 0xcc4d, 0x7393, 0x8abd, 0x1, 0x0);
        gbc.writeMem(0x6b08, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x95d4);
        EXPECT(gbc.pc(), 0x6b09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 030D
        gbc.setState(0x9255, 0x1424, 0x72e0, 0x2c71, 0x73e2, 0xeec, 0x0, 0x0);
        gbc.writeMem(0x9255, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1424);
        EXPECT(gbc.pc(), 0x9256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9255), 0xa9);
        // A9 030E
        gbc.setState(0x9f7, 0xd252, 0xe6e0, 0xec64, 0xb55, 0x516, 0x0, 0x0);
        gbc.writeMem(0x9f7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd252);
        EXPECT(gbc.pc(), 0x9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 030F
        gbc.setState(0xa69e, 0x35ce, 0xb160, 0xcc87, 0x6059, 0x7835, 0x1, 0x0);
        gbc.writeMem(0xa69e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x35ce);
        EXPECT(gbc.pc(), 0xa69f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa69e), 0xa9);
        // A9 0310
        gbc.setState(0xb8aa, 0xd3df, 0x7070, 0x7f4c, 0xdf95, 0xe9d7, 0x0, 0x0);
        gbc.writeMem(0xb8aa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd3df);
        EXPECT(gbc.pc(), 0xb8ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8aa), 0xa9);
        // A9 0311
        gbc.setState(0xb4e9, 0x7b3c, 0xdfc0, 0xdfcb, 0xbace, 0x6ea4, 0x0, 0x1);
        gbc.writeMem(0xb4e9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7b3c);
        EXPECT(gbc.pc(), 0xb4ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e9), 0xa9);
        // A9 0312
        gbc.setState(0x9269, 0x4662, 0xb880, 0x2542, 0x1b4b, 0xef67, 0x0, 0x1);
        gbc.writeMem(0x9269, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4662);
        EXPECT(gbc.pc(), 0x926a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9269), 0xa9);
        // A9 0313
        gbc.setState(0xb3ed, 0xd6d4, 0x3dc0, 0x59e7, 0x3376, 0x2911, 0x1, 0x1);
        gbc.writeMem(0xb3ed, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd6d4);
        EXPECT(gbc.pc(), 0xb3ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ed), 0xa9);
        // A9 0314
        gbc.setState(0x96f4, 0x25f4, 0xa890, 0xd498, 0xa3, 0xbe95, 0x0, 0x0);
        gbc.writeMem(0x96f4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x25f4);
        EXPECT(gbc.pc(), 0x96f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f4), 0xa9);
        // A9 0315
        gbc.setState(0x250f, 0xf1bf, 0x6850, 0xc2b8, 0x3868, 0xbbf1, 0x1, 0x0);
        gbc.writeMem(0x250f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xf1bf);
        EXPECT(gbc.pc(), 0x2510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0316
        gbc.setState(0xe156, 0x70a7, 0x4280, 0x9051, 0x87f, 0x51d0, 0x1, 0x0);
        gbc.writeMem(0xe156, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x70a7);
        EXPECT(gbc.pc(), 0xe157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe156), 0xa9);
        // A9 0317
        gbc.setState(0x2914, 0x5b44, 0xa980, 0x9911, 0xa834, 0x49ba, 0x1, 0x1);
        gbc.writeMem(0x2914, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5b44);
        EXPECT(gbc.pc(), 0x2915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0318
        gbc.setState(0x987b, 0x914c, 0x8510, 0x5035, 0xaf90, 0x4d42, 0x0, 0x0);
        gbc.writeMem(0x987b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x914c);
        EXPECT(gbc.pc(), 0x987c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x987b), 0xa9);
        // A9 0319
        gbc.setState(0xda14, 0xfe17, 0x7070, 0xe2ae, 0xc56c, 0x74d3, 0x0, 0x1);
        gbc.writeMem(0xda14, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xfe17);
        EXPECT(gbc.pc(), 0xda15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda14), 0xa9);
        // A9 031A
        gbc.setState(0x5bcc, 0x3db, 0x2840, 0x7da5, 0xd20, 0x4f00, 0x0, 0x0);
        gbc.writeMem(0x5bcc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3db);
        EXPECT(gbc.pc(), 0x5bcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 031B
        gbc.setState(0xeac7, 0xaf69, 0x1160, 0x7b25, 0xa8d, 0xfbf7, 0x1, 0x1);
        gbc.writeMem(0xeac7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xaf69);
        EXPECT(gbc.pc(), 0xeac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeac7), 0xa9);
        // A9 031C
        gbc.setState(0x5eec, 0xbae4, 0x35a0, 0x6f40, 0xa5f9, 0x9b9b, 0x1, 0x0);
        gbc.writeMem(0x5eec, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xbae4);
        EXPECT(gbc.pc(), 0x5eed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 031E
        gbc.setState(0x8db0, 0x730f, 0x63e0, 0x1180, 0xfcd0, 0x7b4, 0x0, 0x1);
        gbc.writeMem(0x8db0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x730f);
        EXPECT(gbc.pc(), 0x8db1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db0), 0xa9);
        // A9 031F
        gbc.setState(0xc796, 0x1a90, 0x3c30, 0x6c2a, 0x835e, 0x9568, 0x1, 0x0);
        gbc.writeMem(0xc796, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1a90);
        EXPECT(gbc.pc(), 0xc797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc796), 0xa9);
        // A9 0320
        gbc.setState(0xccb5, 0xcdc7, 0xb9b0, 0xaa9, 0xf941, 0xa69, 0x0, 0x1);
        gbc.writeMem(0xccb5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcdc7);
        EXPECT(gbc.pc(), 0xccb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb5), 0xa9);
        // A9 0321
        gbc.setState(0xc236, 0xd372, 0x4c70, 0x43a9, 0x7c9a, 0x7db9, 0x1, 0x0);
        gbc.writeMem(0xc236, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd372);
        EXPECT(gbc.pc(), 0xc237);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc236), 0xa9);
        // A9 0322
        gbc.setState(0x8dc9, 0x75c5, 0x6970, 0x259c, 0xbd75, 0x7039, 0x0, 0x1);
        gbc.writeMem(0x8dc9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x75c5);
        EXPECT(gbc.pc(), 0x8dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc9), 0xa9);
        // A9 0323
        gbc.setState(0x9b24, 0x1643, 0x8ec0, 0xaa, 0xb0c1, 0x70f7, 0x1, 0x1);
        gbc.writeMem(0x9b24, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1643);
        EXPECT(gbc.pc(), 0x9b25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b24), 0xa9);
        // A9 0324
        gbc.setState(0x9597, 0x356, 0xcc0, 0xb88, 0x6fec, 0x5955, 0x1, 0x0);
        gbc.writeMem(0x9597, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x356);
        EXPECT(gbc.pc(), 0x9598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9597), 0xa9);
        // A9 0325
        gbc.setState(0xa5fa, 0x82e0, 0x2bc0, 0x8535, 0x9bc8, 0xa427, 0x1, 0x0);
        gbc.writeMem(0xa5fa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x82e0);
        EXPECT(gbc.pc(), 0xa5fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fa), 0xa9);
        // A9 0326
        gbc.setState(0xc1a2, 0x3493, 0x6fc0, 0xad70, 0x10ed, 0x7edf, 0x0, 0x1);
        gbc.writeMem(0xc1a2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3493);
        EXPECT(gbc.pc(), 0xc1a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a2), 0xa9);
        // A9 0327
        gbc.setState(0x9c8a, 0x16e3, 0xfd30, 0x6fd0, 0x89a5, 0x6d9a, 0x1, 0x0);
        gbc.writeMem(0x9c8a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x16e3);
        EXPECT(gbc.pc(), 0x9c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c8a), 0xa9);
        // A9 0328
        gbc.setState(0xdddd, 0x18bf, 0xcd90, 0xf24, 0x7af, 0x7a60, 0x0, 0x0);
        gbc.writeMem(0xdddd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x18bf);
        EXPECT(gbc.pc(), 0xddde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdddd), 0xa9);
        // A9 0329
        gbc.setState(0xb04f, 0x1df6, 0x54d0, 0xeb0a, 0x63a6, 0x14a8, 0x1, 0x0);
        gbc.writeMem(0xb04f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x1df6);
        EXPECT(gbc.pc(), 0xb050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb04f), 0xa9);
        // A9 032A
        gbc.setState(0xeafc, 0xb908, 0xa0b0, 0x39fd, 0x6bce, 0xeb7b, 0x0, 0x0);
        gbc.writeMem(0xeafc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb908);
        EXPECT(gbc.pc(), 0xeafd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeafc), 0xa9);
        // A9 032B
        gbc.setState(0xe487, 0x8be3, 0xf780, 0xb81e, 0xb27c, 0x24e0, 0x1, 0x1);
        gbc.writeMem(0xe487, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8be3);
        EXPECT(gbc.pc(), 0xe488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe487), 0xa9);
        // A9 032C
        gbc.setState(0x48cb, 0xab62, 0x5480, 0x3691, 0x5039, 0xe15c, 0x1, 0x1);
        gbc.writeMem(0x48cb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xab62);
        EXPECT(gbc.pc(), 0x48cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 032D
        gbc.setState(0xcfd6, 0x4581, 0xda40, 0x1177, 0xdead, 0x766f, 0x0, 0x0);
        gbc.writeMem(0xcfd6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x4581);
        EXPECT(gbc.pc(), 0xcfd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd6), 0xa9);
        // A9 032E
        gbc.setState(0x94a, 0x5667, 0xb850, 0x4c1e, 0xcd35, 0xc5ce, 0x0, 0x1);
        gbc.writeMem(0x94a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5667);
        EXPECT(gbc.pc(), 0x94b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 032F
        gbc.setState(0x6343, 0xbd34, 0x2be0, 0x14e9, 0x875c, 0x636, 0x0, 0x0);
        gbc.writeMem(0x6343, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbd34);
        EXPECT(gbc.pc(), 0x6344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0330
        gbc.setState(0x299f, 0x4608, 0xafb0, 0x7068, 0x44b2, 0x1e41, 0x1, 0x0);
        gbc.writeMem(0x299f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4608);
        EXPECT(gbc.pc(), 0x29a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0331
        gbc.setState(0xbfa6, 0xe054, 0x6990, 0x3263, 0x3295, 0x6818, 0x1, 0x1);
        gbc.writeMem(0xbfa6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe054);
        EXPECT(gbc.pc(), 0xbfa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa6), 0xa9);
        // A9 0332
        gbc.setState(0x90c0, 0xa279, 0x9a80, 0x5f4b, 0x59dd, 0x87c4, 0x1, 0x0);
        gbc.writeMem(0x90c0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa279);
        EXPECT(gbc.pc(), 0x90c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c0), 0xa9);
        // A9 0333
        gbc.setState(0x4c4f, 0xfaba, 0xaeb0, 0x2475, 0xc268, 0xcfd5, 0x1, 0x1);
        gbc.writeMem(0x4c4f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xfaba);
        EXPECT(gbc.pc(), 0x4c50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0334
        gbc.setState(0x8804, 0x3e48, 0x8a0, 0x80df, 0xda2d, 0x1dd2, 0x1, 0x1);
        gbc.writeMem(0x8804, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3e48);
        EXPECT(gbc.pc(), 0x8805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8804), 0xa9);
        // A9 0335
        gbc.setState(0x282, 0x55fe, 0x8950, 0xda2c, 0x69ca, 0x62a9, 0x1, 0x1);
        gbc.writeMem(0x282, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x55fe);
        EXPECT(gbc.pc(), 0x283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0337
        gbc.setState(0x8614, 0xcb79, 0xb430, 0x8da8, 0x4849, 0x60e9, 0x1, 0x1);
        gbc.writeMem(0x8614, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcb79);
        EXPECT(gbc.pc(), 0x8615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8614), 0xa9);
        // A9 0338
        gbc.setState(0xd39e, 0x9992, 0xaee0, 0xe046, 0xd36a, 0x9044, 0x0, 0x0);
        gbc.writeMem(0xd39e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9992);
        EXPECT(gbc.pc(), 0xd39f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd39e), 0xa9);
        // A9 0339
        gbc.setState(0x9cf1, 0xbff6, 0xc2d0, 0x200a, 0xd5e2, 0x8b8b, 0x0, 0x1);
        gbc.writeMem(0x9cf1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xbff6);
        EXPECT(gbc.pc(), 0x9cf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf1), 0xa9);
        // A9 033A
        gbc.setState(0xb528, 0x9995, 0xbcc0, 0xd482, 0xde0f, 0x5b94, 0x0, 0x0);
        gbc.writeMem(0xb528, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9995);
        EXPECT(gbc.pc(), 0xb529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb528), 0xa9);
        // A9 033B
        gbc.setState(0x81be, 0x22, 0xfc70, 0x41d3, 0x8b05, 0xd5a4, 0x1, 0x1);
        gbc.writeMem(0x81be, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x22);
        EXPECT(gbc.pc(), 0x81bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81be), 0xa9);
        // A9 033C
        gbc.setState(0xc42, 0x1bf4, 0x9110, 0x9f65, 0xf4e5, 0xd491, 0x0, 0x0);
        gbc.writeMem(0xc42, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1bf4);
        EXPECT(gbc.pc(), 0xc43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 033D
        gbc.setState(0x45dd, 0x341e, 0x5860, 0xf7cf, 0xf9f0, 0xdc0, 0x1, 0x1);
        gbc.writeMem(0x45dd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x341e);
        EXPECT(gbc.pc(), 0x45de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 033E
        gbc.setState(0xcb72, 0xba63, 0x7d00, 0xc028, 0xef8e, 0x6c6b, 0x1, 0x0);
        gbc.writeMem(0xcb72, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xba63);
        EXPECT(gbc.pc(), 0xcb73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb72), 0xa9);
        // A9 033F
        gbc.setState(0x7aaa, 0x5e77, 0xd2e0, 0xad52, 0xae74, 0x894a, 0x1, 0x0);
        gbc.writeMem(0x7aaa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5e77);
        EXPECT(gbc.pc(), 0x7aab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0340
        gbc.setState(0x3763, 0x235e, 0x7240, 0x4e70, 0x7d09, 0x61ea, 0x0, 0x1);
        gbc.writeMem(0x3763, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x235e);
        EXPECT(gbc.pc(), 0x3764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0341
        gbc.setState(0x9478, 0x6d37, 0x7900, 0x3322, 0x769c, 0x5ef6, 0x0, 0x1);
        gbc.writeMem(0x9478, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6d37);
        EXPECT(gbc.pc(), 0x9479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9478), 0xa9);
        // A9 0342
        gbc.setState(0xceae, 0x3480, 0x69b0, 0x565a, 0x75b9, 0xf237, 0x1, 0x0);
        gbc.writeMem(0xceae, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3480);
        EXPECT(gbc.pc(), 0xceaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceae), 0xa9);
        // A9 0343
        gbc.setState(0x6748, 0x9370, 0xbc60, 0x5d10, 0x30d6, 0x552f, 0x1, 0x1);
        gbc.writeMem(0x6748, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9370);
        EXPECT(gbc.pc(), 0x6749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0344
        gbc.setState(0xce65, 0x4615, 0xf5d0, 0x69d1, 0x48b, 0xf0ec, 0x1, 0x0);
        gbc.writeMem(0xce65, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4615);
        EXPECT(gbc.pc(), 0xce66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce65), 0xa9);
        // A9 0345
        gbc.setState(0xde21, 0x2511, 0x9270, 0xf9b7, 0x206b, 0x1cfc, 0x0, 0x1);
        gbc.writeMem(0xde21, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2511);
        EXPECT(gbc.pc(), 0xde22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde21), 0xa9);
        // A9 0346
        gbc.setState(0xed72, 0xd453, 0x3190, 0xbfef, 0xbb2b, 0xebd6, 0x0, 0x0);
        gbc.writeMem(0xed72, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd453);
        EXPECT(gbc.pc(), 0xed73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed72), 0xa9);
        // A9 0347
        gbc.setState(0x2ff3, 0x126b, 0x83d0, 0xecc2, 0xbeba, 0x695, 0x1, 0x1);
        gbc.writeMem(0x2ff3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x126b);
        EXPECT(gbc.pc(), 0x2ff4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0348
        gbc.setState(0x11f4, 0xe251, 0x2570, 0x174a, 0x8dba, 0x880d, 0x0, 0x1);
        gbc.writeMem(0x11f4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe251);
        EXPECT(gbc.pc(), 0x11f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0349
        gbc.setState(0x11f3, 0x22b8, 0x2220, 0x260b, 0x39ea, 0x2905, 0x0, 0x0);
        gbc.writeMem(0x11f3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x22b8);
        EXPECT(gbc.pc(), 0x11f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 034B
        gbc.setState(0x3691, 0xd8f3, 0x7f90, 0x9d0c, 0xe506, 0x9774, 0x1, 0x0);
        gbc.writeMem(0x3691, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd8f3);
        EXPECT(gbc.pc(), 0x3692);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 034C
        gbc.setState(0x7d63, 0x236c, 0xfd90, 0xfb64, 0x4293, 0x6c2f, 0x1, 0x0);
        gbc.writeMem(0x7d63, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x236c);
        EXPECT(gbc.pc(), 0x7d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 034D
        gbc.setState(0xd6a7, 0xc976, 0x1b80, 0xd525, 0x1db5, 0x9077, 0x1, 0x1);
        gbc.writeMem(0xd6a7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc976);
        EXPECT(gbc.pc(), 0xd6a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6a7), 0xa9);
        // A9 034E
        gbc.setState(0x4fac, 0x48d0, 0xbe70, 0x3cbf, 0xbcc, 0xcea1, 0x0, 0x1);
        gbc.writeMem(0x4fac, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x48d0);
        EXPECT(gbc.pc(), 0x4fad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 034F
        gbc.setState(0x126e, 0xffba, 0x4b70, 0xb3d3, 0x8943, 0xa13a, 0x1, 0x0);
        gbc.writeMem(0x126e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xffba);
        EXPECT(gbc.pc(), 0x126f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0350
        gbc.setState(0x1632, 0x168f, 0xe150, 0x7ec5, 0xd862, 0x4459, 0x0, 0x0);
        gbc.writeMem(0x1632, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x168f);
        EXPECT(gbc.pc(), 0x1633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0351
        gbc.setState(0xbb83, 0xafee, 0x1b50, 0x1c0d, 0x6acc, 0x5a02, 0x0, 0x1);
        gbc.writeMem(0xbb83, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xafee);
        EXPECT(gbc.pc(), 0xbb84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb83), 0xa9);
        // A9 0352
        gbc.setState(0xe1b4, 0xd15d, 0x5410, 0x2e65, 0x9df6, 0x2fb4, 0x1, 0x1);
        gbc.writeMem(0xe1b4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd15d);
        EXPECT(gbc.pc(), 0xe1b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b4), 0xa9);
        // A9 0353
        gbc.setState(0xb82b, 0x3954, 0x9c10, 0x6a38, 0xae7e, 0x94ae, 0x0, 0x0);
        gbc.writeMem(0xb82b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3954);
        EXPECT(gbc.pc(), 0xb82c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb82b), 0xa9);
        // A9 0355
        gbc.setState(0x73fa, 0x37b5, 0x3140, 0x66aa, 0x6036, 0xda44, 0x0, 0x0);
        gbc.writeMem(0x73fa, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x37b5);
        EXPECT(gbc.pc(), 0x73fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0356
        gbc.setState(0x6e77, 0x71e5, 0xdd40, 0xd680, 0xbd4a, 0x241, 0x1, 0x0);
        gbc.writeMem(0x6e77, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x71e5);
        EXPECT(gbc.pc(), 0x6e78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0357
        gbc.setState(0xe7bb, 0x2233, 0xa3f0, 0xb67f, 0x4cdc, 0x510f, 0x0, 0x0);
        gbc.writeMem(0xe7bb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2233);
        EXPECT(gbc.pc(), 0xe7bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7bb), 0xa9);
        // A9 0358
        gbc.setState(0x3a5e, 0xc1a6, 0x11c0, 0x3f5f, 0x1317, 0xab88, 0x0, 0x1);
        gbc.writeMem(0x3a5e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc1a6);
        EXPECT(gbc.pc(), 0x3a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0359
        gbc.setState(0x3708, 0xdd18, 0x2f50, 0x8bb4, 0xd27a, 0xdd18, 0x0, 0x1);
        gbc.writeMem(0x3708, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdd18);
        EXPECT(gbc.pc(), 0x3709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 035A
        gbc.setState(0xc878, 0x4a10, 0xdc70, 0x969d, 0xfab1, 0xc07a, 0x0, 0x1);
        gbc.writeMem(0xc878, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4a10);
        EXPECT(gbc.pc(), 0xc879);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc878), 0xa9);
        // A9 035B
        gbc.setState(0xa454, 0xbd52, 0x59a0, 0x3eb2, 0x2ba7, 0x48f1, 0x0, 0x0);
        gbc.writeMem(0xa454, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xbd52);
        EXPECT(gbc.pc(), 0xa455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa454), 0xa9);
        // A9 035D
        gbc.setState(0x128d, 0x6cd8, 0xe6a0, 0x84de, 0x6509, 0xb370, 0x1, 0x1);
        gbc.writeMem(0x128d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6cd8);
        EXPECT(gbc.pc(), 0x128e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 035E
        gbc.setState(0xe991, 0x3c0c, 0xe160, 0x4543, 0xaa39, 0xdada, 0x1, 0x1);
        gbc.writeMem(0xe991, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3c0c);
        EXPECT(gbc.pc(), 0xe992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe991), 0xa9);
        // A9 035F
        gbc.setState(0xad04, 0x7af1, 0x5b50, 0x86a6, 0xcf0b, 0xe3e0, 0x0, 0x0);
        gbc.writeMem(0xad04, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7af1);
        EXPECT(gbc.pc(), 0xad05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad04), 0xa9);
        // A9 0360
        gbc.setState(0xd8d2, 0xa407, 0x76c0, 0x478c, 0xb13, 0xc211, 0x1, 0x0);
        gbc.writeMem(0xd8d2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa407);
        EXPECT(gbc.pc(), 0xd8d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8d2), 0xa9);
        // A9 0361
        gbc.setState(0x1c3f, 0x9c6c, 0xfa0, 0x7fd2, 0x5417, 0x892d, 0x1, 0x1);
        gbc.writeMem(0x1c3f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9c6c);
        EXPECT(gbc.pc(), 0x1c40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0362
        gbc.setState(0x4341, 0x82f3, 0xdff0, 0xf9f7, 0x2a6b, 0xb9ef, 0x1, 0x0);
        gbc.writeMem(0x4341, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x82f3);
        EXPECT(gbc.pc(), 0x4342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0363
        gbc.setState(0x4675, 0x3c0a, 0x7e00, 0x99cd, 0xc049, 0x894c, 0x0, 0x0);
        gbc.writeMem(0x4675, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3c0a);
        EXPECT(gbc.pc(), 0x4676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0364
        gbc.setState(0x42c6, 0x8074, 0x4950, 0x9141, 0xcc26, 0x4b15, 0x1, 0x0);
        gbc.writeMem(0x42c6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8074);
        EXPECT(gbc.pc(), 0x42c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0366
        gbc.setState(0x7885, 0x9c1b, 0xbfd0, 0x6f14, 0x6394, 0x976, 0x0, 0x1);
        gbc.writeMem(0x7885, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9c1b);
        EXPECT(gbc.pc(), 0x7886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0367
        gbc.setState(0x57f3, 0xeff6, 0x96d0, 0xd9e5, 0x1199, 0x3a78, 0x0, 0x1);
        gbc.writeMem(0x57f3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xeff6);
        EXPECT(gbc.pc(), 0x57f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0368
        gbc.setState(0x12ae, 0x34e7, 0x1f60, 0x8b35, 0xef41, 0xd849, 0x1, 0x0);
        gbc.writeMem(0x12ae, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x34e7);
        EXPECT(gbc.pc(), 0x12af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0369
        gbc.setState(0x920e, 0xc98b, 0x4620, 0x6e27, 0xac77, 0x793c, 0x0, 0x0);
        gbc.writeMem(0x920e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc98b);
        EXPECT(gbc.pc(), 0x920f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x920e), 0xa9);
        // A9 036A
        gbc.setState(0xec12, 0x4ec6, 0x4e50, 0x9a53, 0xd23d, 0xe22b, 0x1, 0x0);
        gbc.writeMem(0xec12, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x4ec6);
        EXPECT(gbc.pc(), 0xec13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec12), 0xa9);
        // A9 036B
        gbc.setState(0xae8c, 0x89db, 0x55d0, 0xd603, 0xdec2, 0xe76, 0x1, 0x1);
        gbc.writeMem(0xae8c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x89db);
        EXPECT(gbc.pc(), 0xae8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae8c), 0xa9);
        // A9 036C
        gbc.setState(0x92b2, 0x5361, 0xb2b0, 0x511e, 0x2741, 0x552b, 0x1, 0x0);
        gbc.writeMem(0x92b2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5361);
        EXPECT(gbc.pc(), 0x92b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92b2), 0xa9);
        // A9 036D
        gbc.setState(0xae08, 0x2efb, 0x3060, 0x9c02, 0xf1f3, 0xac05, 0x1, 0x1);
        gbc.writeMem(0xae08, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2efb);
        EXPECT(gbc.pc(), 0xae09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae08), 0xa9);
        // A9 036E
        gbc.setState(0xe800, 0x1b19, 0xc270, 0x74ea, 0x94ca, 0xc5b, 0x1, 0x1);
        gbc.writeMem(0xe800, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1b19);
        EXPECT(gbc.pc(), 0xe801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe800), 0xa9);
        // A9 036F
        gbc.setState(0xc437, 0x6a4a, 0x3330, 0x7c16, 0xd913, 0x7e67, 0x1, 0x0);
        gbc.writeMem(0xc437, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6a4a);
        EXPECT(gbc.pc(), 0xc438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc437), 0xa9);
        // A9 0370
        gbc.setState(0x7885, 0xa912, 0xdf50, 0xc4cf, 0xed02, 0x1d5d, 0x0, 0x1);
        gbc.writeMem(0x7885, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa912);
        EXPECT(gbc.pc(), 0x7886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0371
        gbc.setState(0x6ab1, 0x7795, 0x7f10, 0xe085, 0xa51c, 0x9dc9, 0x1, 0x0);
        gbc.writeMem(0x6ab1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7795);
        EXPECT(gbc.pc(), 0x6ab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0372
        gbc.setState(0xae06, 0x393f, 0x81f0, 0x5bd7, 0x41d5, 0x5812, 0x1, 0x0);
        gbc.writeMem(0xae06, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x393f);
        EXPECT(gbc.pc(), 0xae07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae06), 0xa9);
        // A9 0373
        gbc.setState(0xeb33, 0x7076, 0x3e40, 0xaa14, 0x9035, 0x4a5f, 0x0, 0x0);
        gbc.writeMem(0xeb33, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7076);
        EXPECT(gbc.pc(), 0xeb34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb33), 0xa9);
        // A9 0374
        gbc.setState(0x89e3, 0xee74, 0xefa0, 0x4d77, 0xa655, 0x9594, 0x1, 0x0);
        gbc.writeMem(0x89e3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xee74);
        EXPECT(gbc.pc(), 0x89e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e3), 0xa9);
        // A9 0375
        gbc.setState(0x8bd1, 0x98f, 0x6940, 0x1ac5, 0x1dfd, 0x6cb1, 0x0, 0x0);
        gbc.writeMem(0x8bd1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x98f);
        EXPECT(gbc.pc(), 0x8bd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd1), 0xa9);
        // A9 0376
        gbc.setState(0x95a1, 0xda81, 0x47d0, 0x5a92, 0xe378, 0x97cd, 0x1, 0x1);
        gbc.writeMem(0x95a1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xda81);
        EXPECT(gbc.pc(), 0x95a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a1), 0xa9);
        // A9 0378
        gbc.setState(0x6ac6, 0x854d, 0x1270, 0x8e78, 0xcba5, 0x484d, 0x0, 0x1);
        gbc.writeMem(0x6ac6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x854d);
        EXPECT(gbc.pc(), 0x6ac7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0379
        gbc.setState(0xaa44, 0xd30b, 0x2810, 0x75fc, 0xce2a, 0x2123, 0x0, 0x0);
        gbc.writeMem(0xaa44, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd30b);
        EXPECT(gbc.pc(), 0xaa45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa44), 0xa9);
        // A9 037A
        gbc.setState(0xb2ac, 0xd875, 0xf5d0, 0xd67a, 0x2f08, 0x2b4c, 0x0, 0x1);
        gbc.writeMem(0xb2ac, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd875);
        EXPECT(gbc.pc(), 0xb2ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2ac), 0xa9);
        // A9 037B
        gbc.setState(0x9ed0, 0x9484, 0x6590, 0x7fd2, 0x405b, 0xe822, 0x0, 0x0);
        gbc.writeMem(0x9ed0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9484);
        EXPECT(gbc.pc(), 0x9ed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed0), 0xa9);
        // A9 037C
        gbc.setState(0x4b13, 0x76da, 0xca00, 0x9ec6, 0xf329, 0xd718, 0x1, 0x1);
        gbc.writeMem(0x4b13, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x76da);
        EXPECT(gbc.pc(), 0x4b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 037D
        gbc.setState(0x5b60, 0x8a74, 0x2670, 0x3c29, 0x7b86, 0x7f64, 0x1, 0x0);
        gbc.writeMem(0x5b60, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8a74);
        EXPECT(gbc.pc(), 0x5b61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 037E
        gbc.setState(0x2c14, 0x6b65, 0x27d0, 0x9b2c, 0x8c30, 0x82e1, 0x1, 0x0);
        gbc.writeMem(0x2c14, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6b65);
        EXPECT(gbc.pc(), 0x2c15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 037F
        gbc.setState(0xbb45, 0x48dc, 0xb9f0, 0xcd1e, 0x616e, 0x5f0e, 0x0, 0x1);
        gbc.writeMem(0xbb45, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x48dc);
        EXPECT(gbc.pc(), 0xbb46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb45), 0xa9);
        // A9 0380
        gbc.setState(0x2b56, 0x859f, 0xfed0, 0xc3e3, 0xa82e, 0x671b, 0x0, 0x0);
        gbc.writeMem(0x2b56, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x859f);
        EXPECT(gbc.pc(), 0x2b57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0381
        gbc.setState(0xbab4, 0x36c2, 0x28c0, 0x9017, 0x7aaf, 0xa1ed, 0x0, 0x0);
        gbc.writeMem(0xbab4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x36c2);
        EXPECT(gbc.pc(), 0xbab5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab4), 0xa9);
        // A9 0382
        gbc.setState(0x382e, 0x5ed8, 0x82f0, 0xa4fe, 0x4ecd, 0x1046, 0x0, 0x1);
        gbc.writeMem(0x382e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5ed8);
        EXPECT(gbc.pc(), 0x382f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0383
        gbc.setState(0x8940, 0x91a7, 0x7b40, 0x2689, 0xeff3, 0x5676, 0x0, 0x0);
        gbc.writeMem(0x8940, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x91a7);
        EXPECT(gbc.pc(), 0x8941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8940), 0xa9);
        // A9 0384
        gbc.setState(0xdf34, 0x1448, 0xb1a0, 0x415a, 0xc787, 0xdd63, 0x0, 0x0);
        gbc.writeMem(0xdf34, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1448);
        EXPECT(gbc.pc(), 0xdf35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf34), 0xa9);
        // A9 0385
        gbc.setState(0xb6ab, 0xc02f, 0xbb80, 0xa156, 0x2f8a, 0x67da, 0x1, 0x1);
        gbc.writeMem(0xb6ab, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc02f);
        EXPECT(gbc.pc(), 0xb6ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ab), 0xa9);
        // A9 0386
        gbc.setState(0x5099, 0x59a7, 0x4e0, 0xf054, 0x2a43, 0x6c69, 0x0, 0x0);
        gbc.writeMem(0x5099, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x59a7);
        EXPECT(gbc.pc(), 0x509a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0387
        gbc.setState(0x1c92, 0xd30, 0xc500, 0xe4d9, 0x3f0c, 0xe386, 0x0, 0x1);
        gbc.writeMem(0x1c92, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd30);
        EXPECT(gbc.pc(), 0x1c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0388
        gbc.setState(0xeecb, 0x6d74, 0xe6c0, 0xc5ff, 0x1128, 0x2bc5, 0x0, 0x0);
        gbc.writeMem(0xeecb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6d74);
        EXPECT(gbc.pc(), 0xeecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeecb), 0xa9);
        // A9 0389
        gbc.setState(0xbd98, 0xb52d, 0xad60, 0xb47f, 0x8fa, 0xf5df, 0x1, 0x0);
        gbc.writeMem(0xbd98, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb52d);
        EXPECT(gbc.pc(), 0xbd99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd98), 0xa9);
        // A9 038A
        gbc.setState(0x63a, 0x4d95, 0x3070, 0x2f14, 0x5fc1, 0xe5d0, 0x1, 0x1);
        gbc.writeMem(0x63a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4d95);
        EXPECT(gbc.pc(), 0x63b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 038B
        gbc.setState(0x7ba7, 0x1062, 0x9b0, 0x2e56, 0x17d3, 0xda1c, 0x0, 0x1);
        gbc.writeMem(0x7ba7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1062);
        EXPECT(gbc.pc(), 0x7ba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 038C
        gbc.setState(0x35b3, 0xfa37, 0x9df0, 0xbe73, 0x808e, 0x29ff, 0x0, 0x0);
        gbc.writeMem(0x35b3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfa37);
        EXPECT(gbc.pc(), 0x35b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 038D
        gbc.setState(0x43e0, 0x7135, 0xb2b0, 0xd5a9, 0xf37f, 0xa95, 0x1, 0x1);
        gbc.writeMem(0x43e0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7135);
        EXPECT(gbc.pc(), 0x43e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 038E
        gbc.setState(0x255a, 0xc133, 0xf00, 0x7fba, 0xcafd, 0x2a7f, 0x0, 0x0);
        gbc.writeMem(0x255a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc133);
        EXPECT(gbc.pc(), 0x255b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 038F
        gbc.setState(0xb0ca, 0xe4fa, 0x9c30, 0x5863, 0x3216, 0x8b11, 0x0, 0x0);
        gbc.writeMem(0xb0ca, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe4fa);
        EXPECT(gbc.pc(), 0xb0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ca), 0xa9);
        // A9 0390
        gbc.setState(0xe3f8, 0x64d2, 0x1000, 0x3996, 0xf01c, 0x9450, 0x0, 0x1);
        gbc.writeMem(0xe3f8, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x64d2);
        EXPECT(gbc.pc(), 0xe3f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3f8), 0xa9);
        // A9 0391
        gbc.setState(0xe8d1, 0x80e, 0x5190, 0xa4a7, 0xc90, 0x2b4b, 0x1, 0x0);
        gbc.writeMem(0xe8d1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x80e);
        EXPECT(gbc.pc(), 0xe8d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d1), 0xa9);
        // A9 0392
        gbc.setState(0xe0c3, 0xe2fd, 0xeb20, 0x4e32, 0x9248, 0x68d8, 0x1, 0x1);
        gbc.writeMem(0xe0c3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe2fd);
        EXPECT(gbc.pc(), 0xe0c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0c3), 0xa9);
        // A9 0393
        gbc.setState(0x2de9, 0x844, 0xa650, 0x4299, 0x2d36, 0xa221, 0x0, 0x0);
        gbc.writeMem(0x2de9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x844);
        EXPECT(gbc.pc(), 0x2dea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0394
        gbc.setState(0x8c97, 0xf20c, 0xe5c0, 0x27cd, 0xc1e3, 0x4f34, 0x0, 0x0);
        gbc.writeMem(0x8c97, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf20c);
        EXPECT(gbc.pc(), 0x8c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c97), 0xa9);
        // A9 0395
        gbc.setState(0x86c7, 0xe7fa, 0xf610, 0x9432, 0x96ef, 0xb08c, 0x0, 0x1);
        gbc.writeMem(0x86c7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xe7fa);
        EXPECT(gbc.pc(), 0x86c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86c7), 0xa9);
        // A9 0396
        gbc.setState(0xb347, 0x61a2, 0xe2a0, 0x72eb, 0x9e26, 0xb185, 0x1, 0x1);
        gbc.writeMem(0xb347, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x61a2);
        EXPECT(gbc.pc(), 0xb348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb347), 0xa9);
        // A9 0397
        gbc.setState(0x4ea7, 0x4e8a, 0x1d60, 0xb21e, 0xdbc4, 0x115f, 0x1, 0x1);
        gbc.writeMem(0x4ea7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4e8a);
        EXPECT(gbc.pc(), 0x4ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0398
        gbc.setState(0x5e81, 0x8e2a, 0xc540, 0x1dba, 0xc1c4, 0x534d, 0x1, 0x0);
        gbc.writeMem(0x5e81, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8e2a);
        EXPECT(gbc.pc(), 0x5e82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 0399
        gbc.setState(0xdcaf, 0x4f64, 0x3660, 0x2280, 0x2e38, 0x7844, 0x0, 0x1);
        gbc.writeMem(0xdcaf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4f64);
        EXPECT(gbc.pc(), 0xdcb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcaf), 0xa9);
        // A9 039A
        gbc.setState(0xd31e, 0x444b, 0x7c20, 0x4abf, 0x11f8, 0xe3f9, 0x0, 0x1);
        gbc.writeMem(0xd31e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x444b);
        EXPECT(gbc.pc(), 0xd31f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd31e), 0xa9);
        // A9 039B
        gbc.setState(0x81dd, 0xd26, 0x4000, 0x7ed4, 0xbb1a, 0x9a14, 0x1, 0x1);
        gbc.writeMem(0x81dd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd26);
        EXPECT(gbc.pc(), 0x81de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81dd), 0xa9);
        // A9 039C
        gbc.setState(0x8532, 0x1605, 0xd480, 0x8f2c, 0xa971, 0xd9c7, 0x0, 0x0);
        gbc.writeMem(0x8532, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1605);
        EXPECT(gbc.pc(), 0x8533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8532), 0xa9);
        // A9 039D
        gbc.setState(0x7054, 0x353c, 0x8940, 0xef7c, 0x3927, 0x7cde, 0x0, 0x0);
        gbc.writeMem(0x7054, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x353c);
        EXPECT(gbc.pc(), 0x7055);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 039E
        gbc.setState(0xe7b1, 0x6a49, 0xe610, 0xde58, 0xbf2b, 0x5799, 0x1, 0x1);
        gbc.writeMem(0xe7b1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6a49);
        EXPECT(gbc.pc(), 0xe7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7b1), 0xa9);
        // A9 039F
        gbc.setState(0xc441, 0x6bfe, 0x6f40, 0xe1c1, 0x5e41, 0x2878, 0x0, 0x1);
        gbc.writeMem(0xc441, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6bfe);
        EXPECT(gbc.pc(), 0xc442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc441), 0xa9);
        // A9 03A1
        gbc.setState(0x21f4, 0x2284, 0xb370, 0x8909, 0xa1b8, 0x5cba, 0x1, 0x1);
        gbc.writeMem(0x21f4, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2284);
        EXPECT(gbc.pc(), 0x21f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03A2
        gbc.setState(0xc35c, 0xbca6, 0x3cf0, 0x60dc, 0xc8ce, 0xc142, 0x1, 0x1);
        gbc.writeMem(0xc35c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xbca6);
        EXPECT(gbc.pc(), 0xc35d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc35c), 0xa9);
        // A9 03A3
        gbc.setState(0x263b, 0x5eb4, 0x8680, 0xd4f9, 0xb263, 0xa0d5, 0x1, 0x1);
        gbc.writeMem(0x263b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5eb4);
        EXPECT(gbc.pc(), 0x263c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03A4
        gbc.setState(0x7377, 0x61b6, 0x4840, 0x5077, 0x187a, 0x3ab9, 0x0, 0x1);
        gbc.writeMem(0x7377, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x61b6);
        EXPECT(gbc.pc(), 0x7378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03A5
        gbc.setState(0xef71, 0xfe58, 0x1f70, 0x854e, 0x8c69, 0xb554, 0x0, 0x1);
        gbc.writeMem(0xef71, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xfe58);
        EXPECT(gbc.pc(), 0xef72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef71), 0xa9);
        // A9 03A6
        gbc.setState(0x5d99, 0x3d00, 0x3db0, 0xa40, 0xf0df, 0xfdff, 0x1, 0x0);
        gbc.writeMem(0x5d99, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3d00);
        EXPECT(gbc.pc(), 0x5d9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03A7
        gbc.setState(0x8c3a, 0x3046, 0x1990, 0xaca, 0x8e3e, 0x4f67, 0x0, 0x0);
        gbc.writeMem(0x8c3a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x3046);
        EXPECT(gbc.pc(), 0x8c3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3a), 0xa9);
        // A9 03A8
        gbc.setState(0xa28a, 0x296a, 0x6cc0, 0x84c1, 0x150c, 0x98d0, 0x1, 0x1);
        gbc.writeMem(0xa28a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x296a);
        EXPECT(gbc.pc(), 0xa28b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa28a), 0xa9);
        // A9 03A9
        gbc.setState(0x5397, 0x9339, 0x7470, 0xc8b4, 0xe9d8, 0x9fe4, 0x0, 0x0);
        gbc.writeMem(0x5397, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9339);
        EXPECT(gbc.pc(), 0x5398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03AA
        gbc.setState(0x32b7, 0x9dc8, 0xe990, 0x404b, 0xc1b6, 0x1de3, 0x0, 0x1);
        gbc.writeMem(0x32b7, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9dc8);
        EXPECT(gbc.pc(), 0x32b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03AB
        gbc.setState(0xe222, 0xbfc3, 0xdca0, 0xffd8, 0x19ad, 0xd16e, 0x0, 0x1);
        gbc.writeMem(0xe222, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xbfc3);
        EXPECT(gbc.pc(), 0xe223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe222), 0xa9);
        // A9 03AC
        gbc.setState(0x179f, 0x4e6c, 0xc220, 0x286b, 0x72b3, 0x1939, 0x0, 0x1);
        gbc.writeMem(0x179f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4e6c);
        EXPECT(gbc.pc(), 0x17a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03AD
        gbc.setState(0xb8be, 0x561d, 0x5d0, 0x88cf, 0x5105, 0x58a2, 0x1, 0x0);
        gbc.writeMem(0xb8be, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x561d);
        EXPECT(gbc.pc(), 0xb8bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8be), 0xa9);
        // A9 03AE
        gbc.setState(0x9223, 0x2ccc, 0x9e70, 0xd85b, 0x686a, 0x7b06, 0x0, 0x0);
        gbc.writeMem(0x9223, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2ccc);
        EXPECT(gbc.pc(), 0x9224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9223), 0xa9);
        // A9 03AF
        gbc.setState(0xe15c, 0x913e, 0x8350, 0xfdfd, 0x8cde, 0x8eac, 0x1, 0x1);
        gbc.writeMem(0xe15c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x913e);
        EXPECT(gbc.pc(), 0xe15d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe15c), 0xa9);
        // A9 03B0
        gbc.setState(0xe9e9, 0xd06d, 0x3cf0, 0x9b32, 0xa3f8, 0x9b85, 0x1, 0x0);
        gbc.writeMem(0xe9e9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd06d);
        EXPECT(gbc.pc(), 0xe9ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9e9), 0xa9);
        // A9 03B1
        gbc.setState(0x67e6, 0xaf6d, 0xd030, 0xbc9f, 0x1ddc, 0x317d, 0x1, 0x1);
        gbc.writeMem(0x67e6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xaf6d);
        EXPECT(gbc.pc(), 0x67e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03B2
        gbc.setState(0xbeb0, 0x2fb9, 0x9210, 0xc867, 0xb95c, 0xb775, 0x0, 0x1);
        gbc.writeMem(0xbeb0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2fb9);
        EXPECT(gbc.pc(), 0xbeb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb0), 0xa9);
        // A9 03B4
        gbc.setState(0x5c72, 0xbb9d, 0x3bb0, 0xded2, 0xc62f, 0x6a1a, 0x0, 0x0);
        gbc.writeMem(0x5c72, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbb9d);
        EXPECT(gbc.pc(), 0x5c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03B5
        gbc.setState(0x8f9f, 0x2ab6, 0xe290, 0xd4b8, 0xde84, 0xe338, 0x0, 0x0);
        gbc.writeMem(0x8f9f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2ab6);
        EXPECT(gbc.pc(), 0x8fa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f9f), 0xa9);
        // A9 03B6
        gbc.setState(0x90b, 0xc49d, 0xff50, 0x88fc, 0xd59b, 0x5cb9, 0x1, 0x0);
        gbc.writeMem(0x90b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc49d);
        EXPECT(gbc.pc(), 0x90c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03B7
        gbc.setState(0xd43c, 0xa713, 0x2350, 0x4ba4, 0xb37c, 0xaa2b, 0x0, 0x1);
        gbc.writeMem(0xd43c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa713);
        EXPECT(gbc.pc(), 0xd43d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd43c), 0xa9);
        // A9 03B8
        gbc.setState(0x3239, 0xb95f, 0x4f50, 0x88b2, 0x313b, 0x5a3d, 0x1, 0x1);
        gbc.writeMem(0x3239, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb95f);
        EXPECT(gbc.pc(), 0x323a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03B9
        gbc.setState(0x3816, 0x8da1, 0x57a0, 0xe56e, 0x7eb0, 0x2990, 0x0, 0x1);
        gbc.writeMem(0x3816, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x8da1);
        EXPECT(gbc.pc(), 0x3817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03BA
        gbc.setState(0x8695, 0x6860, 0x17e0, 0xd731, 0x120a, 0xcb2b, 0x1, 0x0);
        gbc.writeMem(0x8695, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6860);
        EXPECT(gbc.pc(), 0x8696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8695), 0xa9);
        // A9 03BB
        gbc.setState(0x8446, 0x59ff, 0x550, 0xdb33, 0x3832, 0xce75, 0x1, 0x1);
        gbc.writeMem(0x8446, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x59ff);
        EXPECT(gbc.pc(), 0x8447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8446), 0xa9);
        // A9 03BC
        gbc.setState(0x334e, 0x6be2, 0xbfb0, 0xd8b0, 0xcff5, 0x5219, 0x1, 0x0);
        gbc.writeMem(0x334e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6be2);
        EXPECT(gbc.pc(), 0x334f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03BD
        gbc.setState(0xbfc3, 0x653b, 0xec80, 0x7cbd, 0x4a59, 0x3aba, 0x0, 0x1);
        gbc.writeMem(0xbfc3, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x653b);
        EXPECT(gbc.pc(), 0xbfc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc3), 0xa9);
        // A9 03BE
        gbc.setState(0x9474, 0x18e5, 0xa150, 0x630e, 0x4aff, 0xba86, 0x1, 0x0);
        gbc.writeMem(0x9474, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x18e5);
        EXPECT(gbc.pc(), 0x9475);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9474), 0xa9);
        // A9 03BF
        gbc.setState(0xc62f, 0x6976, 0xb9b0, 0xfa02, 0x6c14, 0x8cc8, 0x1, 0x1);
        gbc.writeMem(0xc62f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6976);
        EXPECT(gbc.pc(), 0xc630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc62f), 0xa9);
        // A9 03C0
        gbc.setState(0xc39f, 0xb447, 0x5390, 0xfaa3, 0xac01, 0xd006, 0x0, 0x1);
        gbc.writeMem(0xc39f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb447);
        EXPECT(gbc.pc(), 0xc3a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39f), 0xa9);
        // A9 03C1
        gbc.setState(0x4457, 0xfa37, 0x4bd0, 0xaa4c, 0x7fa, 0x50c, 0x1, 0x0);
        gbc.writeMem(0x4457, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfa37);
        EXPECT(gbc.pc(), 0x4458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03C2
        gbc.setState(0x8fad, 0xad03, 0x8700, 0x96ae, 0xcd9b, 0xf90a, 0x0, 0x1);
        gbc.writeMem(0x8fad, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xad03);
        EXPECT(gbc.pc(), 0x8fae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fad), 0xa9);
        // A9 03C3
        gbc.setState(0x7db0, 0x5f69, 0x9d30, 0xcc7d, 0x5b7e, 0x4c17, 0x0, 0x1);
        gbc.writeMem(0x7db0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5f69);
        EXPECT(gbc.pc(), 0x7db1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03C4
        gbc.setState(0x7f8b, 0x890b, 0x61e0, 0xc616, 0x3431, 0xfefa, 0x0, 0x1);
        gbc.writeMem(0x7f8b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x890b);
        EXPECT(gbc.pc(), 0x7f8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03C5
        gbc.setState(0x27c0, 0x263a, 0x2850, 0x6b95, 0x8beb, 0xdc79, 0x0, 0x0);
        gbc.writeMem(0x27c0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x263a);
        EXPECT(gbc.pc(), 0x27c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03C6
        gbc.setState(0x3d97, 0xd92f, 0x5f30, 0x27d1, 0x117, 0x4d7d, 0x0, 0x1);
        gbc.writeMem(0x3d97, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd92f);
        EXPECT(gbc.pc(), 0x3d98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03C7
        gbc.setState(0x68e6, 0x5940, 0xf630, 0x8a59, 0xd96b, 0x8408, 0x0, 0x0);
        gbc.writeMem(0x68e6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5940);
        EXPECT(gbc.pc(), 0x68e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03C8
        gbc.setState(0x3630, 0xf1e0, 0x2520, 0x3113, 0xb661, 0xf725, 0x1, 0x1);
        gbc.writeMem(0x3630, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf1e0);
        EXPECT(gbc.pc(), 0x3631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03C9
        gbc.setState(0x24dc, 0x6aaf, 0xb890, 0xcaf3, 0xf91b, 0xdbc6, 0x0, 0x1);
        gbc.writeMem(0x24dc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6aaf);
        EXPECT(gbc.pc(), 0x24dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03CB
        gbc.setState(0x9f44, 0xbfca, 0x61b0, 0x2540, 0xcca0, 0xc4a2, 0x0, 0x0);
        gbc.writeMem(0x9f44, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbfca);
        EXPECT(gbc.pc(), 0x9f45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f44), 0xa9);
        // A9 03CD
        gbc.setState(0xccb5, 0xaccc, 0x4720, 0x27c, 0xb076, 0xcd11, 0x1, 0x0);
        gbc.writeMem(0xccb5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xaccc);
        EXPECT(gbc.pc(), 0xccb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb5), 0xa9);
        // A9 03CE
        gbc.setState(0x1bf6, 0xd529, 0xfff0, 0xa5df, 0x83f6, 0x2876, 0x0, 0x1);
        gbc.writeMem(0x1bf6, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd529);
        EXPECT(gbc.pc(), 0x1bf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03CF
        gbc.setState(0x47b1, 0xdd16, 0xd4c0, 0x3b77, 0x6cc5, 0x4d2, 0x0, 0x1);
        gbc.writeMem(0x47b1, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xdd16);
        EXPECT(gbc.pc(), 0x47b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03D0
        gbc.setState(0x8566, 0x69a8, 0x82c0, 0xc06, 0x28ab, 0xeff2, 0x0, 0x1);
        gbc.writeMem(0x8566, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x69a8);
        EXPECT(gbc.pc(), 0x8567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8566), 0xa9);
        // A9 03D1
        gbc.setState(0x4a0b, 0x55e5, 0x4df0, 0x62e6, 0xe841, 0x7478, 0x1, 0x0);
        gbc.writeMem(0x4a0b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x55e5);
        EXPECT(gbc.pc(), 0x4a0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03D2
        gbc.setState(0xb0b9, 0x503e, 0x2fe0, 0x35bd, 0x1f3a, 0xf22d, 0x0, 0x1);
        gbc.writeMem(0xb0b9, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x503e);
        EXPECT(gbc.pc(), 0xb0ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0b9), 0xa9);
        // A9 03D4
        gbc.setState(0xcfcf, 0x8a21, 0xbd00, 0xa82e, 0x1425, 0xe4ab, 0x1, 0x0);
        gbc.writeMem(0xcfcf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8a21);
        EXPECT(gbc.pc(), 0xcfd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfcf), 0xa9);
        // A9 03D5
        gbc.setState(0xd1f, 0x56d2, 0xe040, 0x287c, 0xf707, 0xb845, 0x0, 0x1);
        gbc.writeMem(0xd1f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x56d2);
        EXPECT(gbc.pc(), 0xd20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03D6
        gbc.setState(0x3f05, 0xc206, 0x150, 0x1e8e, 0xec77, 0x68c9, 0x1, 0x1);
        gbc.writeMem(0x3f05, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc206);
        EXPECT(gbc.pc(), 0x3f06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03D7
        gbc.setState(0x6661, 0xf547, 0xba00, 0xa4bc, 0x70fc, 0x2022, 0x0, 0x1);
        gbc.writeMem(0x6661, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf547);
        EXPECT(gbc.pc(), 0x6662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03D8
        gbc.setState(0x4eaf, 0x9785, 0xab40, 0x6ba4, 0x936b, 0x3b88, 0x1, 0x1);
        gbc.writeMem(0x4eaf, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x9785);
        EXPECT(gbc.pc(), 0x4eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03D9
        gbc.setState(0x227b, 0xb065, 0xcd90, 0x4fb9, 0xdce7, 0xd11d, 0x1, 0x1);
        gbc.writeMem(0x227b, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb065);
        EXPECT(gbc.pc(), 0x227c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03DA
        gbc.setState(0xee68, 0x754c, 0x1e80, 0x1b4d, 0x74c, 0x2bc4, 0x1, 0x0);
        gbc.writeMem(0xee68, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x754c);
        EXPECT(gbc.pc(), 0xee69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee68), 0xa9);
        // A9 03DB
        gbc.setState(0x6e77, 0xfef6, 0xae50, 0x702f, 0x7a56, 0xfd87, 0x1, 0x1);
        gbc.writeMem(0x6e77, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfef6);
        EXPECT(gbc.pc(), 0x6e78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03DE
        gbc.setState(0x4f37, 0xae16, 0x3fa0, 0x836f, 0xbf8d, 0x5fcb, 0x1, 0x0);
        gbc.writeMem(0x4f37, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xae16);
        EXPECT(gbc.pc(), 0x4f38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03DF
        gbc.setState(0xd72, 0xcd02, 0xdf90, 0x6971, 0x5220, 0x1c73, 0x0, 0x1);
        gbc.writeMem(0xd72, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xcd02);
        EXPECT(gbc.pc(), 0xd73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03E1
        gbc.setState(0x5968, 0xf720, 0x9060, 0xeaae, 0x59ca, 0xcfe9, 0x1, 0x1);
        gbc.writeMem(0x5968, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf720);
        EXPECT(gbc.pc(), 0x5969);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03E2
        gbc.setState(0x76d0, 0x4a51, 0xa0b0, 0xe944, 0x36ef, 0x58b3, 0x0, 0x1);
        gbc.writeMem(0x76d0, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x4a51);
        EXPECT(gbc.pc(), 0x76d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03E3
        gbc.setState(0x609a, 0x872d, 0x2ac0, 0x9dd9, 0x1501, 0x84f1, 0x0, 0x0);
        gbc.writeMem(0x609a, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x872d);
        EXPECT(gbc.pc(), 0x609b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03E4
        gbc.setState(0xd5c, 0x8efc, 0x4280, 0x7c56, 0x45a9, 0x1518, 0x1, 0x0);
        gbc.writeMem(0xd5c, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8efc);
        EXPECT(gbc.pc(), 0xd5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03E5
        gbc.setState(0x2ccb, 0x316e, 0x89a0, 0xd302, 0x6d3, 0x3afe, 0x0, 0x0);
        gbc.writeMem(0x2ccb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x316e);
        EXPECT(gbc.pc(), 0x2ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // A9 03E6
        gbc.setState(0xeb3f, 0xbcd0, 0x7e70, 0x2aba, 0x6531, 0x4efe, 0x0, 0x1);
        gbc.writeMem(0xeb3f, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xbcd0);
        EXPECT(gbc.pc(), 0xeb40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb3f), 0xa9);
        // A9 03E7
        gbc.setState(0x6b55, 0x53d, 0x9c50, 0xee7d, 0xafec, 0x4f44, 0x1, 0x1);
        gbc.writeMem(0x6b55, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x53d);
        EXPECT(gbc.pc(), 0x6b56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
