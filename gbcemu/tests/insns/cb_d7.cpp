#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_d7)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_d7) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB D7 0000
        gbc.setState(0x4178, 0x95dd, 0x4550, 0xc9e, 0x9492, 0x8983, 0x1, 0x1);
        gbc.writeMem(0x4178, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x95dd);
        EXPECT(gbc.pc(), 0x417a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0001
        gbc.setState(0xd471, 0xcc55, 0x9490, 0xa91f, 0xf4b7, 0x9942, 0x0, 0x0);
        gbc.writeMem(0xd471, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xcc55);
        EXPECT(gbc.pc(), 0xd473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd471), 0xcb);
        EXPECT(gbc.readMem(0xd472), 0xd7);
        // CB D7 0002
        gbc.setState(0x4c1b, 0x423b, 0x6720, 0x34a, 0xc37b, 0xa33d, 0x1, 0x0);
        gbc.writeMem(0x4c1b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x423b);
        EXPECT(gbc.pc(), 0x4c1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0003
        gbc.setState(0x7ac0, 0x3d5b, 0x9430, 0x9789, 0x901, 0xa02b, 0x0, 0x0);
        gbc.writeMem(0x7ac0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3d5b);
        EXPECT(gbc.pc(), 0x7ac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0004
        gbc.setState(0xa9d8, 0xaf1, 0x9e70, 0x35ca, 0x38b, 0xa7b9, 0x1, 0x1);
        gbc.writeMem(0xa9d8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xaf1);
        EXPECT(gbc.pc(), 0xa9da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9d8), 0xcb);
        EXPECT(gbc.readMem(0xa9d9), 0xd7);
        // CB D7 0005
        gbc.setState(0xbada, 0x70bc, 0x4d30, 0x9ee6, 0x2352, 0x9d1d, 0x1, 0x0);
        gbc.writeMem(0xbada, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x70bc);
        EXPECT(gbc.pc(), 0xbadc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbada), 0xcb);
        EXPECT(gbc.readMem(0xbadb), 0xd7);
        // CB D7 0006
        gbc.setState(0x28e8, 0x510e, 0xf180, 0x680b, 0x195b, 0x6ba6, 0x0, 0x0);
        gbc.writeMem(0x28e8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x510e);
        EXPECT(gbc.pc(), 0x28ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0007
        gbc.setState(0xc815, 0x7749, 0x3d30, 0x7e5e, 0x84d4, 0x5b06, 0x1, 0x0);
        gbc.writeMem(0xc815, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7749);
        EXPECT(gbc.pc(), 0xc817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc815), 0xcb);
        EXPECT(gbc.readMem(0xc816), 0xd7);
        // CB D7 0008
        gbc.setState(0xcf00, 0xbb6a, 0x7070, 0xb87, 0xb7a4, 0x1607, 0x0, 0x1);
        gbc.writeMem(0xcf00, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xbb6a);
        EXPECT(gbc.pc(), 0xcf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf00), 0xcb);
        EXPECT(gbc.readMem(0xcf01), 0xd7);
        // CB D7 0009
        gbc.setState(0x9b4e, 0x1de7, 0x2490, 0x9d49, 0xac8b, 0xeaf5, 0x1, 0x0);
        gbc.writeMem(0x9b4e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1de7);
        EXPECT(gbc.pc(), 0x9b50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b4e), 0xcb);
        EXPECT(gbc.readMem(0x9b4f), 0xd7);
        // CB D7 000A
        gbc.setState(0x1663, 0x2940, 0x5b80, 0x662a, 0x9619, 0xb125, 0x0, 0x0);
        gbc.writeMem(0x1663, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2940);
        EXPECT(gbc.pc(), 0x1665);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 000B
        gbc.setState(0xe09e, 0x6b7, 0x18c0, 0xa0aa, 0x31a7, 0x69fd, 0x1, 0x1);
        gbc.writeMem(0xe09e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6b7);
        EXPECT(gbc.pc(), 0xe0a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe09e), 0xcb);
        EXPECT(gbc.readMem(0xe09f), 0xd7);
        // CB D7 000C
        gbc.setState(0x6b38, 0x4aff, 0xe400, 0x5e0a, 0x9c51, 0xa10f, 0x1, 0x0);
        gbc.writeMem(0x6b38, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4aff);
        EXPECT(gbc.pc(), 0x6b3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 000D
        gbc.setState(0x2aa, 0x9e03, 0xe190, 0x7987, 0xf78f, 0x76f0, 0x1, 0x0);
        gbc.writeMem(0x2aa, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9e03);
        EXPECT(gbc.pc(), 0x2ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 000E
        gbc.setState(0x28ad, 0x17ef, 0x8c70, 0x3c91, 0x4d18, 0x39f4, 0x1, 0x1);
        gbc.writeMem(0x28ad, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x17ef);
        EXPECT(gbc.pc(), 0x28af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 000F
        gbc.setState(0xce7c, 0x5077, 0xb3b0, 0x7c2, 0xabb2, 0x9ae7, 0x1, 0x1);
        gbc.writeMem(0xce7c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5077);
        EXPECT(gbc.pc(), 0xce7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce7c), 0xcb);
        EXPECT(gbc.readMem(0xce7d), 0xd7);
        // CB D7 0012
        gbc.setState(0xe3d2, 0xd681, 0x93f0, 0xd433, 0x9d3d, 0x3a3d, 0x0, 0x1);
        gbc.writeMem(0xe3d2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd681);
        EXPECT(gbc.pc(), 0xe3d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3d2), 0xcb);
        EXPECT(gbc.readMem(0xe3d3), 0xd7);
        // CB D7 0013
        gbc.setState(0x731, 0x11af, 0x3bb0, 0x47a, 0xcc1, 0x94ab, 0x1, 0x0);
        gbc.writeMem(0x731, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x11af);
        EXPECT(gbc.pc(), 0x733);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0014
        gbc.setState(0xd9b8, 0x116f, 0xd30, 0x1021, 0xe12d, 0x851, 0x1, 0x0);
        gbc.writeMem(0xd9b8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x116f);
        EXPECT(gbc.pc(), 0xd9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b8), 0xcb);
        EXPECT(gbc.readMem(0xd9b9), 0xd7);
        // CB D7 0015
        gbc.setState(0x3960, 0xa12b, 0x8400, 0xb761, 0x64b1, 0xd1db, 0x0, 0x1);
        gbc.writeMem(0x3960, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa12b);
        EXPECT(gbc.pc(), 0x3962);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0016
        gbc.setState(0x2857, 0x6e1b, 0xacd0, 0xc88d, 0x7009, 0x21a, 0x0, 0x0);
        gbc.writeMem(0x2857, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6e1b);
        EXPECT(gbc.pc(), 0x2859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0017
        gbc.setState(0x2d04, 0x39fc, 0x20e0, 0xca19, 0xfd17, 0xde44, 0x0, 0x0);
        gbc.writeMem(0x2d04, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x39fc);
        EXPECT(gbc.pc(), 0x2d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0018
        gbc.setState(0xb884, 0xd73, 0x3af0, 0x2266, 0x2561, 0x8150, 0x1, 0x1);
        gbc.writeMem(0xb884, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd73);
        EXPECT(gbc.pc(), 0xb886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb884), 0xcb);
        EXPECT(gbc.readMem(0xb885), 0xd7);
        // CB D7 0019
        gbc.setState(0x34d5, 0x10e, 0x4ac0, 0x97de, 0x8e2d, 0xc33, 0x0, 0x0);
        gbc.writeMem(0x34d5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x10e);
        EXPECT(gbc.pc(), 0x34d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 001A
        gbc.setState(0x9e3e, 0x93c2, 0x1ee0, 0x800e, 0x594c, 0x4858, 0x1, 0x0);
        gbc.writeMem(0x9e3e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x93c2);
        EXPECT(gbc.pc(), 0x9e40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e3e), 0xcb);
        EXPECT(gbc.readMem(0x9e3f), 0xd7);
        // CB D7 001B
        gbc.setState(0x283f, 0x4442, 0x94a0, 0x3416, 0x5a76, 0xc616, 0x1, 0x1);
        gbc.writeMem(0x283f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4442);
        EXPECT(gbc.pc(), 0x2841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 001C
        gbc.setState(0x7e24, 0x747e, 0x2a0, 0x8bfb, 0x926d, 0x26f9, 0x0, 0x0);
        gbc.writeMem(0x7e24, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x747e);
        EXPECT(gbc.pc(), 0x7e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 001D
        gbc.setState(0x80a6, 0x3a93, 0xdcb0, 0xa57e, 0xc634, 0xff11, 0x1, 0x1);
        gbc.writeMem(0x80a6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3a93);
        EXPECT(gbc.pc(), 0x80a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a6), 0xcb);
        EXPECT(gbc.readMem(0x80a7), 0xd7);
        // CB D7 001E
        gbc.setState(0x4925, 0x3d45, 0x8a90, 0x3892, 0x9614, 0xcbd3, 0x1, 0x0);
        gbc.writeMem(0x4925, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x3d45);
        EXPECT(gbc.pc(), 0x4927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0020
        gbc.setState(0x3667, 0x1cc1, 0xcce0, 0x73ba, 0xb690, 0xda02, 0x1, 0x1);
        gbc.writeMem(0x3667, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1cc1);
        EXPECT(gbc.pc(), 0x3669);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0021
        gbc.setState(0xe37c, 0x8920, 0xd950, 0x7862, 0x996a, 0x7245, 0x1, 0x1);
        gbc.writeMem(0xe37c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8920);
        EXPECT(gbc.pc(), 0xe37e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe37c), 0xcb);
        EXPECT(gbc.readMem(0xe37d), 0xd7);
        // CB D7 0022
        gbc.setState(0x18c7, 0xcb6e, 0xc770, 0xdb9c, 0x149e, 0x83cb, 0x0, 0x1);
        gbc.writeMem(0x18c7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcb6e);
        EXPECT(gbc.pc(), 0x18c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0023
        gbc.setState(0x67af, 0x13a0, 0xff00, 0x9e56, 0xaf63, 0xec1a, 0x1, 0x1);
        gbc.writeMem(0x67af, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x13a0);
        EXPECT(gbc.pc(), 0x67b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0024
        gbc.setState(0xe457, 0xe0c1, 0x3ef0, 0x3e56, 0x1a9f, 0x5876, 0x1, 0x1);
        gbc.writeMem(0xe457, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe0c1);
        EXPECT(gbc.pc(), 0xe459);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe457), 0xcb);
        EXPECT(gbc.readMem(0xe458), 0xd7);
        // CB D7 0025
        gbc.setState(0xcd95, 0xdef9, 0x23d0, 0x4d2e, 0x703, 0x4798, 0x1, 0x0);
        gbc.writeMem(0xcd95, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xdef9);
        EXPECT(gbc.pc(), 0xcd97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd95), 0xcb);
        EXPECT(gbc.readMem(0xcd96), 0xd7);
        // CB D7 0026
        gbc.setState(0x9c1f, 0x771a, 0x65b0, 0xd98e, 0xeb04, 0xab0b, 0x0, 0x1);
        gbc.writeMem(0x9c1f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x771a);
        EXPECT(gbc.pc(), 0x9c21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1f), 0xcb);
        EXPECT(gbc.readMem(0x9c20), 0xd7);
        // CB D7 0027
        gbc.setState(0x6783, 0x955c, 0xf680, 0x11f7, 0xba6f, 0x27ed, 0x1, 0x1);
        gbc.writeMem(0x6783, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x955c);
        EXPECT(gbc.pc(), 0x6785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0028
        gbc.setState(0x1462, 0x2523, 0x73a0, 0x1bc8, 0xd7c2, 0x78c9, 0x1, 0x0);
        gbc.writeMem(0x1462, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2523);
        EXPECT(gbc.pc(), 0x1464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0029
        gbc.setState(0x6565, 0xaf36, 0x8600, 0x9ea4, 0x1d58, 0x745c, 0x0, 0x1);
        gbc.writeMem(0x6565, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xaf36);
        EXPECT(gbc.pc(), 0x6567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 002B
        gbc.setState(0x2e53, 0x9c69, 0x7580, 0x54d3, 0xd9d7, 0xec7a, 0x0, 0x1);
        gbc.writeMem(0x2e53, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9c69);
        EXPECT(gbc.pc(), 0x2e55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 002C
        gbc.setState(0x6efc, 0xeb09, 0x47c0, 0xe2da, 0x5915, 0x1706, 0x1, 0x0);
        gbc.writeMem(0x6efc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xeb09);
        EXPECT(gbc.pc(), 0x6efe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 002D
        gbc.setState(0x3d85, 0xcce8, 0x85e0, 0x8233, 0x6c7e, 0xf20d, 0x0, 0x0);
        gbc.writeMem(0x3d85, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcce8);
        EXPECT(gbc.pc(), 0x3d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 002E
        gbc.setState(0x830b, 0xe1a9, 0x1090, 0xcae8, 0xd3f7, 0xc596, 0x0, 0x0);
        gbc.writeMem(0x830b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe1a9);
        EXPECT(gbc.pc(), 0x830d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x830b), 0xcb);
        EXPECT(gbc.readMem(0x830c), 0xd7);
        // CB D7 002F
        gbc.setState(0xd0b4, 0x2d2a, 0xefb0, 0xb09a, 0x3e3c, 0x296b, 0x1, 0x1);
        gbc.writeMem(0xd0b4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2d2a);
        EXPECT(gbc.pc(), 0xd0b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0b4), 0xcb);
        EXPECT(gbc.readMem(0xd0b5), 0xd7);
        // CB D7 0031
        gbc.setState(0xa07d, 0x7c0d, 0x490, 0x967b, 0x4620, 0xb06b, 0x0, 0x1);
        gbc.writeMem(0xa07d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7c0d);
        EXPECT(gbc.pc(), 0xa07f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa07d), 0xcb);
        EXPECT(gbc.readMem(0xa07e), 0xd7);
        // CB D7 0032
        gbc.setState(0x6d47, 0x9153, 0x6ce0, 0x3dab, 0x9500, 0x38e4, 0x0, 0x1);
        gbc.writeMem(0x6d47, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9153);
        EXPECT(gbc.pc(), 0x6d49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0033
        gbc.setState(0xb32b, 0x1e21, 0xce80, 0xb3be, 0x76b6, 0xdd, 0x1, 0x0);
        gbc.writeMem(0xb32b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1e21);
        EXPECT(gbc.pc(), 0xb32d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb32b), 0xcb);
        EXPECT(gbc.readMem(0xb32c), 0xd7);
        // CB D7 0034
        gbc.setState(0x53dd, 0xdefb, 0xe640, 0xa8be, 0x360e, 0xff6d, 0x1, 0x0);
        gbc.writeMem(0x53dd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xdefb);
        EXPECT(gbc.pc(), 0x53df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0036
        gbc.setState(0xa68b, 0x87e8, 0x2300, 0xaf28, 0xd0fb, 0x6f83, 0x0, 0x0);
        gbc.writeMem(0xa68b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x87e8);
        EXPECT(gbc.pc(), 0xa68d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68b), 0xcb);
        EXPECT(gbc.readMem(0xa68c), 0xd7);
        // CB D7 0037
        gbc.setState(0x959d, 0x9870, 0x1570, 0x67e7, 0x5a67, 0xcc73, 0x1, 0x0);
        gbc.writeMem(0x959d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9870);
        EXPECT(gbc.pc(), 0x959f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x959d), 0xcb);
        EXPECT(gbc.readMem(0x959e), 0xd7);
        // CB D7 0038
        gbc.setState(0x46f0, 0x5965, 0x8d90, 0xe2bf, 0xf8f3, 0xdb9b, 0x0, 0x1);
        gbc.writeMem(0x46f0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5965);
        EXPECT(gbc.pc(), 0x46f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 003C
        gbc.setState(0xc4ff, 0x7e7, 0x3a0, 0xf092, 0x8aba, 0xf732, 0x0, 0x1);
        gbc.writeMem(0xc4ff, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7e7);
        EXPECT(gbc.pc(), 0xc501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4ff), 0xcb);
        EXPECT(gbc.readMem(0xc500), 0xd7);
        // CB D7 003D
        gbc.setState(0xb5b3, 0xd227, 0x3450, 0x9868, 0xf65f, 0x8c86, 0x0, 0x1);
        gbc.writeMem(0xb5b3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd227);
        EXPECT(gbc.pc(), 0xb5b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b3), 0xcb);
        EXPECT(gbc.readMem(0xb5b4), 0xd7);
        // CB D7 003E
        gbc.setState(0x8d85, 0x5b6b, 0xef50, 0x2e87, 0xb03b, 0x2114, 0x1, 0x1);
        gbc.writeMem(0x8d85, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5b6b);
        EXPECT(gbc.pc(), 0x8d87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d85), 0xcb);
        EXPECT(gbc.readMem(0x8d86), 0xd7);
        // CB D7 003F
        gbc.setState(0x6fe4, 0xfebc, 0xac30, 0x17, 0x25b4, 0xb36e, 0x0, 0x0);
        gbc.writeMem(0x6fe4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfebc);
        EXPECT(gbc.pc(), 0x6fe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0040
        gbc.setState(0x4e86, 0x67b3, 0x9690, 0xb84b, 0xa9a7, 0x35bf, 0x0, 0x1);
        gbc.writeMem(0x4e86, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x67b3);
        EXPECT(gbc.pc(), 0x4e88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0041
        gbc.setState(0x3dd8, 0x7147, 0x4070, 0xce40, 0x2d, 0x9ba6, 0x0, 0x0);
        gbc.writeMem(0x3dd8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7147);
        EXPECT(gbc.pc(), 0x3dda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0042
        gbc.setState(0x625, 0xe35, 0xac00, 0xbcf7, 0x4f5b, 0xa57f, 0x1, 0x1);
        gbc.writeMem(0x625, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe35);
        EXPECT(gbc.pc(), 0x627);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0043
        gbc.setState(0x9b99, 0x4b0, 0xe890, 0xd3f1, 0x656e, 0xb39f, 0x1, 0x1);
        gbc.writeMem(0x9b99, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4b0);
        EXPECT(gbc.pc(), 0x9b9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b99), 0xcb);
        EXPECT(gbc.readMem(0x9b9a), 0xd7);
        // CB D7 0044
        gbc.setState(0x134a, 0xc176, 0xd150, 0x3fd8, 0xb06a, 0x9c15, 0x0, 0x1);
        gbc.writeMem(0x134a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc176);
        EXPECT(gbc.pc(), 0x134c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0045
        gbc.setState(0x12dc, 0xf997, 0x5880, 0x172c, 0x2668, 0xaff3, 0x1, 0x1);
        gbc.writeMem(0x12dc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf997);
        EXPECT(gbc.pc(), 0x12de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0046
        gbc.setState(0x2012, 0x733a, 0x79f0, 0x9470, 0xd3f8, 0xe938, 0x0, 0x1);
        gbc.writeMem(0x2012, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x733a);
        EXPECT(gbc.pc(), 0x2014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0047
        gbc.setState(0x77ee, 0x955c, 0x3bb0, 0x244c, 0x24cf, 0xac03, 0x1, 0x1);
        gbc.writeMem(0x77ee, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x955c);
        EXPECT(gbc.pc(), 0x77f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0048
        gbc.setState(0x65d4, 0x9f97, 0x69a0, 0x8ba7, 0x3d3d, 0x524d, 0x0, 0x0);
        gbc.writeMem(0x65d4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9f97);
        EXPECT(gbc.pc(), 0x65d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0049
        gbc.setState(0x3e3d, 0x291a, 0x6160, 0x2851, 0x9e37, 0xb335, 0x1, 0x0);
        gbc.writeMem(0x3e3d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x291a);
        EXPECT(gbc.pc(), 0x3e3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 004A
        gbc.setState(0x2089, 0xe6a0, 0x290, 0xe7e1, 0xfc3c, 0x1c9, 0x0, 0x0);
        gbc.writeMem(0x2089, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe6a0);
        EXPECT(gbc.pc(), 0x208b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 004B
        gbc.setState(0x6f1e, 0x2071, 0x1090, 0x53da, 0xb7f6, 0x6563, 0x1, 0x0);
        gbc.writeMem(0x6f1e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2071);
        EXPECT(gbc.pc(), 0x6f20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 004C
        gbc.setState(0x62ff, 0xd6db, 0x7f90, 0xa20a, 0xf8f, 0x6d0e, 0x0, 0x1);
        gbc.writeMem(0x62ff, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd6db);
        EXPECT(gbc.pc(), 0x6301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 004D
        gbc.setState(0xbf82, 0x2f89, 0x6140, 0x23b4, 0x8520, 0x92ed, 0x0, 0x0);
        gbc.writeMem(0xbf82, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2f89);
        EXPECT(gbc.pc(), 0xbf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf82), 0xcb);
        EXPECT(gbc.readMem(0xbf83), 0xd7);
        // CB D7 004E
        gbc.setState(0xc7ac, 0x1268, 0xcd90, 0xe6c2, 0x1eef, 0x282d, 0x1, 0x1);
        gbc.writeMem(0xc7ac, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1268);
        EXPECT(gbc.pc(), 0xc7ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ac), 0xcb);
        EXPECT(gbc.readMem(0xc7ad), 0xd7);
        // CB D7 004F
        gbc.setState(0xa85, 0xb365, 0x7fe0, 0xad05, 0x6a22, 0x2aed, 0x0, 0x1);
        gbc.writeMem(0xa85, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb365);
        EXPECT(gbc.pc(), 0xa87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0050
        gbc.setState(0x72e6, 0x801d, 0x31c0, 0xfb87, 0xc9d7, 0xe2a2, 0x1, 0x1);
        gbc.writeMem(0x72e6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x801d);
        EXPECT(gbc.pc(), 0x72e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0052
        gbc.setState(0x3d1f, 0xf559, 0xcb90, 0xea05, 0xbec, 0x960a, 0x1, 0x0);
        gbc.writeMem(0x3d1f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf559);
        EXPECT(gbc.pc(), 0x3d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0053
        gbc.setState(0x300b, 0x85b7, 0x2d50, 0xd7d, 0x1146, 0x7c5e, 0x1, 0x1);
        gbc.writeMem(0x300b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x85b7);
        EXPECT(gbc.pc(), 0x300d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0054
        gbc.setState(0x260b, 0xd414, 0x2d20, 0xe9b9, 0x5cf8, 0xbfdd, 0x0, 0x0);
        gbc.writeMem(0x260b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd414);
        EXPECT(gbc.pc(), 0x260d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0055
        gbc.setState(0x2ce8, 0xc74c, 0xecc0, 0x9c61, 0xd0cf, 0x359a, 0x1, 0x0);
        gbc.writeMem(0x2ce8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc74c);
        EXPECT(gbc.pc(), 0x2cea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0056
        gbc.setState(0x3956, 0xfc78, 0x4df0, 0xecc4, 0x3c91, 0x118e, 0x1, 0x0);
        gbc.writeMem(0x3956, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xfc78);
        EXPECT(gbc.pc(), 0x3958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0057
        gbc.setState(0xcbb8, 0x9c61, 0x2f80, 0x888c, 0x80a9, 0x4e60, 0x1, 0x0);
        gbc.writeMem(0xcbb8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9c61);
        EXPECT(gbc.pc(), 0xcbba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb8), 0xcb);
        EXPECT(gbc.readMem(0xcbb9), 0xd7);
        // CB D7 0058
        gbc.setState(0xd04c, 0x7878, 0x88d0, 0xc231, 0x952f, 0xf494, 0x0, 0x0);
        gbc.writeMem(0xd04c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7878);
        EXPECT(gbc.pc(), 0xd04e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd04c), 0xcb);
        EXPECT(gbc.readMem(0xd04d), 0xd7);
        // CB D7 0059
        gbc.setState(0x11af, 0xb339, 0xa640, 0x399c, 0x5157, 0x9fae, 0x1, 0x1);
        gbc.writeMem(0x11af, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb339);
        EXPECT(gbc.pc(), 0x11b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 005A
        gbc.setState(0xc5e9, 0xbbc3, 0xfe30, 0x9e08, 0x459c, 0x7799, 0x0, 0x1);
        gbc.writeMem(0xc5e9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbbc3);
        EXPECT(gbc.pc(), 0xc5eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5e9), 0xcb);
        EXPECT(gbc.readMem(0xc5ea), 0xd7);
        // CB D7 005B
        gbc.setState(0x2cc1, 0xbc9, 0xe5e0, 0xc78, 0x530, 0x1365, 0x0, 0x0);
        gbc.writeMem(0x2cc1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xbc9);
        EXPECT(gbc.pc(), 0x2cc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 005C
        gbc.setState(0x6cf1, 0xa73e, 0xdd20, 0x57b4, 0x8f2e, 0xfea6, 0x1, 0x1);
        gbc.writeMem(0x6cf1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa73e);
        EXPECT(gbc.pc(), 0x6cf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 005D
        gbc.setState(0x25b1, 0xf5f5, 0x8840, 0x9684, 0x4aa8, 0x1d1a, 0x1, 0x0);
        gbc.writeMem(0x25b1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf5f5);
        EXPECT(gbc.pc(), 0x25b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 005E
        gbc.setState(0x41ec, 0xe505, 0x7ff0, 0x36a9, 0x6e78, 0xbdc9, 0x1, 0x1);
        gbc.writeMem(0x41ec, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe505);
        EXPECT(gbc.pc(), 0x41ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 005F
        gbc.setState(0x899b, 0x187c, 0xf200, 0xb6be, 0x2d2, 0x5f45, 0x0, 0x1);
        gbc.writeMem(0x899b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x187c);
        EXPECT(gbc.pc(), 0x899d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x899b), 0xcb);
        EXPECT(gbc.readMem(0x899c), 0xd7);
        // CB D7 0060
        gbc.setState(0xab33, 0x3073, 0xe60, 0x9e10, 0x5b4c, 0xfc0b, 0x0, 0x0);
        gbc.writeMem(0xab33, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3073);
        EXPECT(gbc.pc(), 0xab35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab33), 0xcb);
        EXPECT(gbc.readMem(0xab34), 0xd7);
        // CB D7 0061
        gbc.setState(0xdf24, 0x22a2, 0x8ba0, 0xcfe5, 0x5165, 0xb417, 0x1, 0x0);
        gbc.writeMem(0xdf24, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x22a2);
        EXPECT(gbc.pc(), 0xdf26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf24), 0xcb);
        EXPECT(gbc.readMem(0xdf25), 0xd7);
        // CB D7 0062
        gbc.setState(0xaa2c, 0xf229, 0x1ed0, 0x643f, 0xebf4, 0x9fbd, 0x0, 0x1);
        gbc.writeMem(0xaa2c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf229);
        EXPECT(gbc.pc(), 0xaa2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa2c), 0xcb);
        EXPECT(gbc.readMem(0xaa2d), 0xd7);
        // CB D7 0063
        gbc.setState(0x42e4, 0x920, 0xb280, 0xc453, 0x4e8d, 0x1dd5, 0x1, 0x0);
        gbc.writeMem(0x42e4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x920);
        EXPECT(gbc.pc(), 0x42e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0064
        gbc.setState(0x427c, 0x4962, 0xadd0, 0xa15, 0xeac5, 0x7912, 0x1, 0x0);
        gbc.writeMem(0x427c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4962);
        EXPECT(gbc.pc(), 0x427e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0065
        gbc.setState(0x6ce7, 0x8759, 0x81f0, 0xd856, 0x27ac, 0xebb1, 0x0, 0x1);
        gbc.writeMem(0x6ce7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8759);
        EXPECT(gbc.pc(), 0x6ce9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0066
        gbc.setState(0x4278, 0xb53, 0x3630, 0x71ab, 0x91a5, 0xa3d7, 0x0, 0x1);
        gbc.writeMem(0x4278, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb53);
        EXPECT(gbc.pc(), 0x427a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0067
        gbc.setState(0xcc8c, 0xbbd6, 0xd7d0, 0x1b5c, 0xd61, 0xcd56, 0x1, 0x1);
        gbc.writeMem(0xcc8c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbbd6);
        EXPECT(gbc.pc(), 0xcc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc8c), 0xcb);
        EXPECT(gbc.readMem(0xcc8d), 0xd7);
        // CB D7 0068
        gbc.setState(0x3552, 0xfbdb, 0x8da0, 0x3bfb, 0x61f7, 0x5d22, 0x0, 0x1);
        gbc.writeMem(0x3552, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xfbdb);
        EXPECT(gbc.pc(), 0x3554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0069
        gbc.setState(0xa4c2, 0x6eff, 0x90c0, 0x17ff, 0xae8a, 0x1b71, 0x0, 0x1);
        gbc.writeMem(0xa4c2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6eff);
        EXPECT(gbc.pc(), 0xa4c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4c2), 0xcb);
        EXPECT(gbc.readMem(0xa4c3), 0xd7);
        // CB D7 006A
        gbc.setState(0x1130, 0xff5d, 0xed20, 0x9921, 0xfab, 0xd791, 0x0, 0x1);
        gbc.writeMem(0x1130, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xff5d);
        EXPECT(gbc.pc(), 0x1132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 006B
        gbc.setState(0x1158, 0x9211, 0xcbf0, 0x7115, 0x2541, 0x8a91, 0x1, 0x1);
        gbc.writeMem(0x1158, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9211);
        EXPECT(gbc.pc(), 0x115a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 006C
        gbc.setState(0x8584, 0x27d7, 0x9c60, 0xf370, 0xa8b6, 0xf147, 0x1, 0x1);
        gbc.writeMem(0x8584, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x27d7);
        EXPECT(gbc.pc(), 0x8586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8584), 0xcb);
        EXPECT(gbc.readMem(0x8585), 0xd7);
        // CB D7 006D
        gbc.setState(0x336d, 0x46a3, 0x9ed0, 0xe0cb, 0x55b1, 0xe691, 0x1, 0x1);
        gbc.writeMem(0x336d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x46a3);
        EXPECT(gbc.pc(), 0x336f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 006E
        gbc.setState(0x749f, 0xeb7c, 0x3670, 0xc759, 0x12d8, 0xc43d, 0x1, 0x0);
        gbc.writeMem(0x749f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xeb7c);
        EXPECT(gbc.pc(), 0x74a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0070
        gbc.setState(0xe049, 0xbf01, 0xe550, 0x9e25, 0xc2d0, 0xf068, 0x1, 0x0);
        gbc.writeMem(0xe049, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xbf01);
        EXPECT(gbc.pc(), 0xe04b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe049), 0xcb);
        EXPECT(gbc.readMem(0xe04a), 0xd7);
        // CB D7 0071
        gbc.setState(0x1a6b, 0xc3dc, 0xd220, 0xfbfb, 0x2bad, 0xe665, 0x0, 0x0);
        gbc.writeMem(0x1a6b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc3dc);
        EXPECT(gbc.pc(), 0x1a6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0072
        gbc.setState(0x9242, 0x5e3f, 0x9530, 0xff73, 0x8bea, 0x9b5d, 0x1, 0x1);
        gbc.writeMem(0x9242, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5e3f);
        EXPECT(gbc.pc(), 0x9244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9242), 0xcb);
        EXPECT(gbc.readMem(0x9243), 0xd7);
        // CB D7 0073
        gbc.setState(0x8180, 0x7b73, 0x59d0, 0x1220, 0x2d2, 0xce86, 0x1, 0x1);
        gbc.writeMem(0x8180, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7b73);
        EXPECT(gbc.pc(), 0x8182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8180), 0xcb);
        EXPECT(gbc.readMem(0x8181), 0xd7);
        // CB D7 0074
        gbc.setState(0xaa62, 0xc32e, 0xc8b0, 0x422a, 0x4b1e, 0xcaff, 0x0, 0x1);
        gbc.writeMem(0xaa62, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc32e);
        EXPECT(gbc.pc(), 0xaa64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa62), 0xcb);
        EXPECT(gbc.readMem(0xaa63), 0xd7);
        // CB D7 0075
        gbc.setState(0x56b8, 0xb761, 0x3510, 0xd504, 0x872a, 0xe30e, 0x0, 0x0);
        gbc.writeMem(0x56b8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb761);
        EXPECT(gbc.pc(), 0x56ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0076
        gbc.setState(0x17d3, 0x5dee, 0xc600, 0x9ba7, 0x8dbc, 0xfbaa, 0x1, 0x0);
        gbc.writeMem(0x17d3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5dee);
        EXPECT(gbc.pc(), 0x17d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0078
        gbc.setState(0xbfb6, 0x14ad, 0x8aa0, 0x8b6a, 0x3cd4, 0x4f23, 0x1, 0x0);
        gbc.writeMem(0xbfb6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x14ad);
        EXPECT(gbc.pc(), 0xbfb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb6), 0xcb);
        EXPECT(gbc.readMem(0xbfb7), 0xd7);
        // CB D7 0079
        gbc.setState(0x97d1, 0xd413, 0x52b0, 0x807c, 0xddb0, 0x4f02, 0x1, 0x1);
        gbc.writeMem(0x97d1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd413);
        EXPECT(gbc.pc(), 0x97d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97d1), 0xcb);
        EXPECT(gbc.readMem(0x97d2), 0xd7);
        // CB D7 007A
        gbc.setState(0x5bd8, 0xf4a8, 0x2dd0, 0xabe7, 0xfcb1, 0x3191, 0x0, 0x0);
        gbc.writeMem(0x5bd8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf4a8);
        EXPECT(gbc.pc(), 0x5bda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 007B
        gbc.setState(0x1c3e, 0xb921, 0xbf50, 0xd78, 0x34b8, 0x9529, 0x1, 0x0);
        gbc.writeMem(0x1c3e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb921);
        EXPECT(gbc.pc(), 0x1c40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 007C
        gbc.setState(0x8a74, 0x1d90, 0x27d0, 0xb98c, 0xbbcd, 0xcd01, 0x1, 0x1);
        gbc.writeMem(0x8a74, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1d90);
        EXPECT(gbc.pc(), 0x8a76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a74), 0xcb);
        EXPECT(gbc.readMem(0x8a75), 0xd7);
        // CB D7 007D
        gbc.setState(0x762c, 0x6e6e, 0x4690, 0x1059, 0x969e, 0xfd1c, 0x0, 0x1);
        gbc.writeMem(0x762c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x6e6e);
        EXPECT(gbc.pc(), 0x762e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 007E
        gbc.setState(0x5e76, 0x29cd, 0xc0c0, 0xed41, 0xceb3, 0x70d6, 0x0, 0x0);
        gbc.writeMem(0x5e76, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x29cd);
        EXPECT(gbc.pc(), 0x5e78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 007F
        gbc.setState(0x2c43, 0xfbe3, 0xc650, 0xc4d0, 0x1d91, 0xf4c7, 0x1, 0x0);
        gbc.writeMem(0x2c43, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfbe3);
        EXPECT(gbc.pc(), 0x2c45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0080
        gbc.setState(0x18d4, 0x418c, 0x89b0, 0x9ac, 0x281c, 0x93c, 0x0, 0x1);
        gbc.writeMem(0x18d4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x418c);
        EXPECT(gbc.pc(), 0x18d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0081
        gbc.setState(0x31f3, 0x766f, 0xeb0, 0x4ad1, 0x5567, 0xfad1, 0x0, 0x0);
        gbc.writeMem(0x31f3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x766f);
        EXPECT(gbc.pc(), 0x31f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0082
        gbc.setState(0x9f2a, 0xba34, 0xd340, 0xc163, 0xe03a, 0xcc8c, 0x1, 0x1);
        gbc.writeMem(0x9f2a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xba34);
        EXPECT(gbc.pc(), 0x9f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f2a), 0xcb);
        EXPECT(gbc.readMem(0x9f2b), 0xd7);
        // CB D7 0086
        gbc.setState(0x610e, 0x41ee, 0xab50, 0x53ea, 0x6382, 0x68cd, 0x1, 0x1);
        gbc.writeMem(0x610e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x41ee);
        EXPECT(gbc.pc(), 0x6110);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0087
        gbc.setState(0x971d, 0xccde, 0x10c0, 0x102b, 0x598a, 0x555d, 0x0, 0x0);
        gbc.writeMem(0x971d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xccde);
        EXPECT(gbc.pc(), 0x971f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x971d), 0xcb);
        EXPECT(gbc.readMem(0x971e), 0xd7);
        // CB D7 0088
        gbc.setState(0x4413, 0x2b19, 0x2360, 0xa94a, 0xc13e, 0x6fc2, 0x0, 0x1);
        gbc.writeMem(0x4413, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2b19);
        EXPECT(gbc.pc(), 0x4415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0089
        gbc.setState(0x9d12, 0x33, 0x9260, 0xc48f, 0xfb33, 0xdddb, 0x0, 0x1);
        gbc.writeMem(0x9d12, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x33);
        EXPECT(gbc.pc(), 0x9d14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d12), 0xcb);
        EXPECT(gbc.readMem(0x9d13), 0xd7);
        // CB D7 008A
        gbc.setState(0xcc81, 0x3d6, 0x96b0, 0x69ae, 0x75d2, 0x4e4f, 0x1, 0x0);
        gbc.writeMem(0xcc81, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3d6);
        EXPECT(gbc.pc(), 0xcc83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc81), 0xcb);
        EXPECT(gbc.readMem(0xcc82), 0xd7);
        // CB D7 008B
        gbc.setState(0xda58, 0xbd0f, 0x9640, 0xe0f, 0xa368, 0xd4a2, 0x0, 0x0);
        gbc.writeMem(0xda58, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbd0f);
        EXPECT(gbc.pc(), 0xda5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda58), 0xcb);
        EXPECT(gbc.readMem(0xda59), 0xd7);
        // CB D7 008C
        gbc.setState(0xdf2e, 0x5d6b, 0xafb0, 0x6610, 0xf97c, 0x84c0, 0x0, 0x1);
        gbc.writeMem(0xdf2e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5d6b);
        EXPECT(gbc.pc(), 0xdf30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2e), 0xcb);
        EXPECT(gbc.readMem(0xdf2f), 0xd7);
        // CB D7 008D
        gbc.setState(0x2e90, 0x16ea, 0x6900, 0xd2ba, 0xc427, 0xdf2b, 0x1, 0x0);
        gbc.writeMem(0x2e90, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x16ea);
        EXPECT(gbc.pc(), 0x2e92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 008E
        gbc.setState(0xb0f0, 0x579, 0xd990, 0xd865, 0x66aa, 0x206d, 0x1, 0x1);
        gbc.writeMem(0xb0f0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x579);
        EXPECT(gbc.pc(), 0xb0f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f0), 0xcb);
        EXPECT(gbc.readMem(0xb0f1), 0xd7);
        // CB D7 008F
        gbc.setState(0x1ca4, 0x5db1, 0xd90, 0xdf04, 0x43db, 0xcc91, 0x0, 0x1);
        gbc.writeMem(0x1ca4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5db1);
        EXPECT(gbc.pc(), 0x1ca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0090
        gbc.setState(0x71e8, 0x1896, 0xf0b0, 0x67f2, 0xd637, 0x2ee4, 0x1, 0x1);
        gbc.writeMem(0x71e8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1896);
        EXPECT(gbc.pc(), 0x71ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0091
        gbc.setState(0x884, 0xe2a2, 0xdae0, 0x8688, 0x6918, 0x2814, 0x0, 0x0);
        gbc.writeMem(0x884, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe2a2);
        EXPECT(gbc.pc(), 0x886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0092
        gbc.setState(0xbefc, 0x7ad, 0x5880, 0xafbe, 0xd4b7, 0x1736, 0x0, 0x0);
        gbc.writeMem(0xbefc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7ad);
        EXPECT(gbc.pc(), 0xbefe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefc), 0xcb);
        EXPECT(gbc.readMem(0xbefd), 0xd7);
        // CB D7 0093
        gbc.setState(0xda3e, 0x9576, 0x6f60, 0x96f, 0xa89c, 0x46ab, 0x1, 0x0);
        gbc.writeMem(0xda3e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9576);
        EXPECT(gbc.pc(), 0xda40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3e), 0xcb);
        EXPECT(gbc.readMem(0xda3f), 0xd7);
        // CB D7 0094
        gbc.setState(0x4fe8, 0xbb55, 0xad70, 0x5a1f, 0x1063, 0xe4b0, 0x0, 0x0);
        gbc.writeMem(0x4fe8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xbb55);
        EXPECT(gbc.pc(), 0x4fea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0095
        gbc.setState(0xa15c, 0xa9b8, 0xe280, 0x7d40, 0xaffc, 0x4bf4, 0x1, 0x1);
        gbc.writeMem(0xa15c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa9b8);
        EXPECT(gbc.pc(), 0xa15e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15c), 0xcb);
        EXPECT(gbc.readMem(0xa15d), 0xd7);
        // CB D7 0096
        gbc.setState(0x40fa, 0xb4a9, 0x19f0, 0xe65c, 0x442c, 0x8b19, 0x0, 0x1);
        gbc.writeMem(0x40fa, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb4a9);
        EXPECT(gbc.pc(), 0x40fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0097
        gbc.setState(0xc626, 0xac28, 0x390, 0xa243, 0x4c51, 0xbdfc, 0x1, 0x1);
        gbc.writeMem(0xc626, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xac28);
        EXPECT(gbc.pc(), 0xc628);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc626), 0xcb);
        EXPECT(gbc.readMem(0xc627), 0xd7);
        // CB D7 0098
        gbc.setState(0x61bd, 0x77d1, 0x8010, 0x90ab, 0x82cb, 0x11b8, 0x1, 0x0);
        gbc.writeMem(0x61bd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x77d1);
        EXPECT(gbc.pc(), 0x61bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0099
        gbc.setState(0x7c90, 0xbb0f, 0xbf60, 0x6bae, 0x284, 0x3645, 0x1, 0x0);
        gbc.writeMem(0x7c90, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbb0f);
        EXPECT(gbc.pc(), 0x7c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 009A
        gbc.setState(0x78b0, 0x2307, 0xa3e0, 0x358e, 0x6f5f, 0xa0cc, 0x1, 0x0);
        gbc.writeMem(0x78b0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2307);
        EXPECT(gbc.pc(), 0x78b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 009B
        gbc.setState(0x961b, 0xe979, 0x220, 0x82e, 0x67b8, 0x9419, 0x1, 0x1);
        gbc.writeMem(0x961b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe979);
        EXPECT(gbc.pc(), 0x961d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961b), 0xcb);
        EXPECT(gbc.readMem(0x961c), 0xd7);
        // CB D7 009C
        gbc.setState(0x3e6e, 0x85e6, 0x36b0, 0x39e1, 0xf148, 0xb2c0, 0x0, 0x0);
        gbc.writeMem(0x3e6e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x85e6);
        EXPECT(gbc.pc(), 0x3e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 009E
        gbc.setState(0xd962, 0xb163, 0x100, 0xd86, 0x6ffb, 0x72f8, 0x0, 0x1);
        gbc.writeMem(0xd962, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb163);
        EXPECT(gbc.pc(), 0xd964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd962), 0xcb);
        EXPECT(gbc.readMem(0xd963), 0xd7);
        // CB D7 009F
        gbc.setState(0xe412, 0xc7d9, 0x66f0, 0xd6e, 0x636, 0xb97, 0x1, 0x0);
        gbc.writeMem(0xe412, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc7d9);
        EXPECT(gbc.pc(), 0xe414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe412), 0xcb);
        EXPECT(gbc.readMem(0xe413), 0xd7);
        // CB D7 00A0
        gbc.setState(0x3432, 0x7779, 0x4270, 0xbaf3, 0x81cb, 0xaad0, 0x1, 0x0);
        gbc.writeMem(0x3432, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7779);
        EXPECT(gbc.pc(), 0x3434);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00A1
        gbc.setState(0xd197, 0x7aeb, 0x9b70, 0x5eb0, 0xa026, 0x85b5, 0x1, 0x1);
        gbc.writeMem(0xd197, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7aeb);
        EXPECT(gbc.pc(), 0xd199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd197), 0xcb);
        EXPECT(gbc.readMem(0xd198), 0xd7);
        // CB D7 00A2
        gbc.setState(0xb355, 0x14eb, 0x6800, 0xbca1, 0x579e, 0xff7d, 0x1, 0x0);
        gbc.writeMem(0xb355, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x14eb);
        EXPECT(gbc.pc(), 0xb357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb355), 0xcb);
        EXPECT(gbc.readMem(0xb356), 0xd7);
        // CB D7 00A3
        gbc.setState(0xd20b, 0x6ccf, 0x4e90, 0x2a18, 0xc693, 0x91c9, 0x1, 0x1);
        gbc.writeMem(0xd20b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6ccf);
        EXPECT(gbc.pc(), 0xd20d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd20b), 0xcb);
        EXPECT(gbc.readMem(0xd20c), 0xd7);
        // CB D7 00A4
        gbc.setState(0x9bd1, 0x4683, 0x53e0, 0x5385, 0x69e4, 0xde83, 0x0, 0x1);
        gbc.writeMem(0x9bd1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4683);
        EXPECT(gbc.pc(), 0x9bd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bd1), 0xcb);
        EXPECT(gbc.readMem(0x9bd2), 0xd7);
        // CB D7 00A5
        gbc.setState(0x4a72, 0xc8aa, 0xfc00, 0xe8f9, 0xbace, 0x2462, 0x0, 0x1);
        gbc.writeMem(0x4a72, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc8aa);
        EXPECT(gbc.pc(), 0x4a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00A6
        gbc.setState(0xd78d, 0x1b10, 0xc270, 0xfc0, 0xafe1, 0xc04, 0x0, 0x1);
        gbc.writeMem(0xd78d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1b10);
        EXPECT(gbc.pc(), 0xd78f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd78d), 0xcb);
        EXPECT(gbc.readMem(0xd78e), 0xd7);
        // CB D7 00A7
        gbc.setState(0xc9cc, 0xfa2e, 0x21d0, 0xc5bc, 0xebb1, 0xa11e, 0x0, 0x0);
        gbc.writeMem(0xc9cc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xfa2e);
        EXPECT(gbc.pc(), 0xc9ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9cc), 0xcb);
        EXPECT(gbc.readMem(0xc9cd), 0xd7);
        // CB D7 00A8
        gbc.setState(0x9000, 0xaed9, 0xa6d0, 0xbf67, 0x1b3c, 0xf7e9, 0x1, 0x1);
        gbc.writeMem(0x9000, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xaed9);
        EXPECT(gbc.pc(), 0x9002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9000), 0xcb);
        EXPECT(gbc.readMem(0x9001), 0xd7);
        // CB D7 00A9
        gbc.setState(0xe0f3, 0x34f8, 0x2200, 0x5f08, 0xd983, 0x5d17, 0x1, 0x1);
        gbc.writeMem(0xe0f3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x34f8);
        EXPECT(gbc.pc(), 0xe0f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0f3), 0xcb);
        EXPECT(gbc.readMem(0xe0f4), 0xd7);
        // CB D7 00AA
        gbc.setState(0x2bcc, 0xef15, 0x9310, 0x1e7, 0x620c, 0x2024, 0x1, 0x0);
        gbc.writeMem(0x2bcc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xef15);
        EXPECT(gbc.pc(), 0x2bce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00AB
        gbc.setState(0x31e7, 0x6991, 0xaf60, 0xc756, 0xaa1, 0x53d7, 0x1, 0x1);
        gbc.writeMem(0x31e7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6991);
        EXPECT(gbc.pc(), 0x31e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00AC
        gbc.setState(0xd4dd, 0x76c, 0x4650, 0x1c2a, 0xdf38, 0xed79, 0x0, 0x0);
        gbc.writeMem(0xd4dd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x76c);
        EXPECT(gbc.pc(), 0xd4df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4dd), 0xcb);
        EXPECT(gbc.readMem(0xd4de), 0xd7);
        // CB D7 00AD
        gbc.setState(0xbcbd, 0x45f7, 0xdb60, 0x75ac, 0xabb6, 0xd984, 0x0, 0x0);
        gbc.writeMem(0xbcbd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x45f7);
        EXPECT(gbc.pc(), 0xbcbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcbd), 0xcb);
        EXPECT(gbc.readMem(0xbcbe), 0xd7);
        // CB D7 00AE
        gbc.setState(0x88cb, 0x857b, 0x8050, 0x6b33, 0xde20, 0xa2c9, 0x0, 0x0);
        gbc.writeMem(0x88cb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x857b);
        EXPECT(gbc.pc(), 0x88cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88cb), 0xcb);
        EXPECT(gbc.readMem(0x88cc), 0xd7);
        // CB D7 00AF
        gbc.setState(0xecbf, 0xcbb7, 0x9950, 0x8de3, 0xcf2f, 0x3c37, 0x1, 0x1);
        gbc.writeMem(0xecbf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xcbb7);
        EXPECT(gbc.pc(), 0xecc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecbf), 0xcb);
        EXPECT(gbc.readMem(0xecc0), 0xd7);
        // CB D7 00B0
        gbc.setState(0xdf8e, 0x99da, 0x7f90, 0xd9bd, 0xd993, 0x9d07, 0x1, 0x1);
        gbc.writeMem(0xdf8e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x99da);
        EXPECT(gbc.pc(), 0xdf90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf8e), 0xcb);
        EXPECT(gbc.readMem(0xdf8f), 0xd7);
        // CB D7 00B1
        gbc.setState(0xb9b7, 0x553d, 0x5250, 0x1c6a, 0x4fe8, 0x15ed, 0x1, 0x1);
        gbc.writeMem(0xb9b7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x553d);
        EXPECT(gbc.pc(), 0xb9b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b7), 0xcb);
        EXPECT(gbc.readMem(0xb9b8), 0xd7);
        // CB D7 00B2
        gbc.setState(0x71f6, 0x2dd2, 0xa270, 0x491d, 0xc457, 0x6075, 0x1, 0x0);
        gbc.writeMem(0x71f6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2dd2);
        EXPECT(gbc.pc(), 0x71f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00B3
        gbc.setState(0x1670, 0xb6b7, 0x3360, 0xd818, 0x7a80, 0x501a, 0x1, 0x1);
        gbc.writeMem(0x1670, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb6b7);
        EXPECT(gbc.pc(), 0x1672);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00B4
        gbc.setState(0xb9bf, 0x2f20, 0x21f0, 0x4bb, 0xe049, 0xe63d, 0x1, 0x1);
        gbc.writeMem(0xb9bf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2f20);
        EXPECT(gbc.pc(), 0xb9c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9bf), 0xcb);
        EXPECT(gbc.readMem(0xb9c0), 0xd7);
        // CB D7 00B5
        gbc.setState(0xb2b8, 0x7350, 0x2540, 0x36be, 0x93f2, 0x2cf8, 0x0, 0x1);
        gbc.writeMem(0xb2b8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7350);
        EXPECT(gbc.pc(), 0xb2ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2b8), 0xcb);
        EXPECT(gbc.readMem(0xb2b9), 0xd7);
        // CB D7 00B6
        gbc.setState(0xe889, 0x359e, 0x6260, 0x7608, 0x12d5, 0x653f, 0x1, 0x1);
        gbc.writeMem(0xe889, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x359e);
        EXPECT(gbc.pc(), 0xe88b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe889), 0xcb);
        EXPECT(gbc.readMem(0xe88a), 0xd7);
        // CB D7 00B7
        gbc.setState(0x8b3a, 0x2b9a, 0x63b0, 0x9a20, 0xef9, 0x3b9a, 0x1, 0x1);
        gbc.writeMem(0x8b3a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2b9a);
        EXPECT(gbc.pc(), 0x8b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b3a), 0xcb);
        EXPECT(gbc.readMem(0x8b3b), 0xd7);
        // CB D7 00B8
        gbc.setState(0xab50, 0x930f, 0x4950, 0x4a7c, 0x1c0d, 0x662, 0x0, 0x0);
        gbc.writeMem(0xab50, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x930f);
        EXPECT(gbc.pc(), 0xab52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab50), 0xcb);
        EXPECT(gbc.readMem(0xab51), 0xd7);
        // CB D7 00B9
        gbc.setState(0x694a, 0xf2d1, 0xf6e0, 0x952, 0xc1ef, 0x1870, 0x0, 0x1);
        gbc.writeMem(0x694a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf2d1);
        EXPECT(gbc.pc(), 0x694c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00BA
        gbc.setState(0xef66, 0x6304, 0x85b0, 0x45f9, 0xce35, 0x83fd, 0x0, 0x1);
        gbc.writeMem(0xef66, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6304);
        EXPECT(gbc.pc(), 0xef68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef66), 0xcb);
        EXPECT(gbc.readMem(0xef67), 0xd7);
        // CB D7 00BB
        gbc.setState(0xa5cd, 0xd2c5, 0x5ec0, 0xca6a, 0x8442, 0xc385, 0x1, 0x1);
        gbc.writeMem(0xa5cd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd2c5);
        EXPECT(gbc.pc(), 0xa5cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5cd), 0xcb);
        EXPECT(gbc.readMem(0xa5ce), 0xd7);
        // CB D7 00BC
        gbc.setState(0x6ea6, 0xc148, 0xd0c0, 0xd8ea, 0x76f3, 0x2ade, 0x1, 0x0);
        gbc.writeMem(0x6ea6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc148);
        EXPECT(gbc.pc(), 0x6ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00BD
        gbc.setState(0xdcaf, 0xc088, 0x37d0, 0x2dac, 0x7504, 0x9af0, 0x0, 0x0);
        gbc.writeMem(0xdcaf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc088);
        EXPECT(gbc.pc(), 0xdcb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcaf), 0xcb);
        EXPECT(gbc.readMem(0xdcb0), 0xd7);
        // CB D7 00BE
        gbc.setState(0xa5a8, 0x39f7, 0xd50, 0x39d6, 0xd0a6, 0xcb8c, 0x0, 0x0);
        gbc.writeMem(0xa5a8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x39f7);
        EXPECT(gbc.pc(), 0xa5aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5a8), 0xcb);
        EXPECT(gbc.readMem(0xa5a9), 0xd7);
        // CB D7 00BF
        gbc.setState(0x4fdc, 0xfa79, 0xb6f0, 0xcba1, 0x809e, 0xc69b, 0x0, 0x1);
        gbc.writeMem(0x4fdc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xfa79);
        EXPECT(gbc.pc(), 0x4fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00C1
        gbc.setState(0x4f60, 0xf4c6, 0xf340, 0x6164, 0x1259, 0x3205, 0x0, 0x0);
        gbc.writeMem(0x4f60, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf4c6);
        EXPECT(gbc.pc(), 0x4f62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00C2
        gbc.setState(0xbdee, 0x4f3e, 0xbb20, 0x45d5, 0xaef2, 0xba20, 0x1, 0x0);
        gbc.writeMem(0xbdee, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4f3e);
        EXPECT(gbc.pc(), 0xbdf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdee), 0xcb);
        EXPECT(gbc.readMem(0xbdef), 0xd7);
        // CB D7 00C3
        gbc.setState(0xd850, 0xdcfa, 0x5e30, 0x3afa, 0x8cc, 0x8193, 0x1, 0x0);
        gbc.writeMem(0xd850, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdcfa);
        EXPECT(gbc.pc(), 0xd852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd850), 0xcb);
        EXPECT(gbc.readMem(0xd851), 0xd7);
        // CB D7 00C4
        gbc.setState(0x41ae, 0xdcdb, 0x680, 0x724d, 0xa675, 0xc973, 0x0, 0x1);
        gbc.writeMem(0x41ae, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xdcdb);
        EXPECT(gbc.pc(), 0x41b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00C5
        gbc.setState(0xd495, 0x3ed9, 0xfd60, 0x30c0, 0x5a08, 0x37d, 0x0, 0x1);
        gbc.writeMem(0xd495, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3ed9);
        EXPECT(gbc.pc(), 0xd497);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd495), 0xcb);
        EXPECT(gbc.readMem(0xd496), 0xd7);
        // CB D7 00C6
        gbc.setState(0xb22e, 0x6de8, 0xf770, 0x43e7, 0x33aa, 0xe723, 0x1, 0x0);
        gbc.writeMem(0xb22e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6de8);
        EXPECT(gbc.pc(), 0xb230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb22e), 0xcb);
        EXPECT(gbc.readMem(0xb22f), 0xd7);
        // CB D7 00C7
        gbc.setState(0x940f, 0xd43b, 0x1f10, 0x94f6, 0x7505, 0xb02a, 0x0, 0x1);
        gbc.writeMem(0x940f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd43b);
        EXPECT(gbc.pc(), 0x9411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940f), 0xcb);
        EXPECT(gbc.readMem(0x9410), 0xd7);
        // CB D7 00C8
        gbc.setState(0x5990, 0xb1d2, 0xf1d0, 0x19e3, 0x1420, 0x5082, 0x1, 0x0);
        gbc.writeMem(0x5990, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb1d2);
        EXPECT(gbc.pc(), 0x5992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00C9
        gbc.setState(0xabbb, 0x3c33, 0x200, 0x8619, 0xfef0, 0x31dd, 0x1, 0x1);
        gbc.writeMem(0xabbb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3c33);
        EXPECT(gbc.pc(), 0xabbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbb), 0xcb);
        EXPECT(gbc.readMem(0xabbc), 0xd7);
        // CB D7 00CA
        gbc.setState(0x92dc, 0xf8fc, 0xfc10, 0xe8a4, 0xf24, 0xe47b, 0x1, 0x0);
        gbc.writeMem(0x92dc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf8fc);
        EXPECT(gbc.pc(), 0x92de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92dc), 0xcb);
        EXPECT(gbc.readMem(0x92dd), 0xd7);
        // CB D7 00CB
        gbc.setState(0x6437, 0xb6c0, 0xde40, 0x966c, 0xd161, 0x6e59, 0x1, 0x1);
        gbc.writeMem(0x6437, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb6c0);
        EXPECT(gbc.pc(), 0x6439);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00CC
        gbc.setState(0xcd9f, 0x372b, 0x8d90, 0x39b3, 0xa695, 0x11db, 0x0, 0x1);
        gbc.writeMem(0xcd9f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x372b);
        EXPECT(gbc.pc(), 0xcda1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd9f), 0xcb);
        EXPECT(gbc.readMem(0xcda0), 0xd7);
        // CB D7 00CD
        gbc.setState(0x91b9, 0x384c, 0xca90, 0x1427, 0x5af4, 0x6315, 0x1, 0x1);
        gbc.writeMem(0x91b9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x384c);
        EXPECT(gbc.pc(), 0x91bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b9), 0xcb);
        EXPECT(gbc.readMem(0x91ba), 0xd7);
        // CB D7 00CE
        gbc.setState(0xd89d, 0x35fb, 0xb370, 0x24a1, 0x5814, 0x7d7c, 0x0, 0x1);
        gbc.writeMem(0xd89d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x35fb);
        EXPECT(gbc.pc(), 0xd89f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd89d), 0xcb);
        EXPECT(gbc.readMem(0xd89e), 0xd7);
        // CB D7 00CF
        gbc.setState(0x77c3, 0x86c6, 0x7bb0, 0x85, 0x2945, 0xeae9, 0x0, 0x0);
        gbc.writeMem(0x77c3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x86c6);
        EXPECT(gbc.pc(), 0x77c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00D0
        gbc.setState(0x2237, 0x8878, 0xc1e0, 0xf470, 0xd816, 0xb834, 0x0, 0x0);
        gbc.writeMem(0x2237, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8878);
        EXPECT(gbc.pc(), 0x2239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00D1
        gbc.setState(0x5949, 0x9840, 0x1820, 0xe440, 0xd7de, 0x5247, 0x0, 0x0);
        gbc.writeMem(0x5949, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9840);
        EXPECT(gbc.pc(), 0x594b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00D2
        gbc.setState(0x76c0, 0x5409, 0xfca0, 0x6b2b, 0xec8a, 0x9c39, 0x0, 0x0);
        gbc.writeMem(0x76c0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5409);
        EXPECT(gbc.pc(), 0x76c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00D3
        gbc.setState(0xb69c, 0x5892, 0x8840, 0x1d7c, 0x695d, 0xb649, 0x1, 0x1);
        gbc.writeMem(0xb69c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5892);
        EXPECT(gbc.pc(), 0xb69e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb69c), 0xcb);
        EXPECT(gbc.readMem(0xb69d), 0xd7);
        // CB D7 00D4
        gbc.setState(0x62aa, 0xeac9, 0x1a00, 0x8e32, 0xfba1, 0x86e, 0x1, 0x0);
        gbc.writeMem(0x62aa, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xeac9);
        EXPECT(gbc.pc(), 0x62ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00D5
        gbc.setState(0x43e1, 0x4a37, 0xc640, 0xe7dc, 0x8f1a, 0xfe65, 0x0, 0x0);
        gbc.writeMem(0x43e1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4a37);
        EXPECT(gbc.pc(), 0x43e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00D6
        gbc.setState(0x378f, 0xf9e3, 0x3f50, 0x19a8, 0x4532, 0x725f, 0x0, 0x1);
        gbc.writeMem(0x378f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf9e3);
        EXPECT(gbc.pc(), 0x3791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00D7
        gbc.setState(0x686, 0xa84e, 0x1ac0, 0x5c9d, 0x2100, 0xf5a4, 0x1, 0x0);
        gbc.writeMem(0x686, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa84e);
        EXPECT(gbc.pc(), 0x688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00D8
        gbc.setState(0xad65, 0x569, 0xb760, 0x9a58, 0x8c1c, 0x9796, 0x1, 0x1);
        gbc.writeMem(0xad65, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x569);
        EXPECT(gbc.pc(), 0xad67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad65), 0xcb);
        EXPECT(gbc.readMem(0xad66), 0xd7);
        // CB D7 00D9
        gbc.setState(0x191c, 0x575c, 0xb8d0, 0x1242, 0x9e00, 0xa74e, 0x1, 0x1);
        gbc.writeMem(0x191c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x575c);
        EXPECT(gbc.pc(), 0x191e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00DA
        gbc.setState(0xc3a5, 0xb568, 0xaf00, 0x6b38, 0x9be, 0xa8ca, 0x1, 0x0);
        gbc.writeMem(0xc3a5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb568);
        EXPECT(gbc.pc(), 0xc3a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a5), 0xcb);
        EXPECT(gbc.readMem(0xc3a6), 0xd7);
        // CB D7 00DB
        gbc.setState(0x9402, 0x2118, 0x42f0, 0x1911, 0x84f5, 0x2459, 0x0, 0x0);
        gbc.writeMem(0x9402, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2118);
        EXPECT(gbc.pc(), 0x9404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9402), 0xcb);
        EXPECT(gbc.readMem(0x9403), 0xd7);
        // CB D7 00DC
        gbc.setState(0x3b08, 0x7c5e, 0xb200, 0x3efd, 0x3586, 0xe46b, 0x0, 0x0);
        gbc.writeMem(0x3b08, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7c5e);
        EXPECT(gbc.pc(), 0x3b0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00DD
        gbc.setState(0x2d5a, 0x8a01, 0xc0b0, 0x9a93, 0xa236, 0x239f, 0x0, 0x0);
        gbc.writeMem(0x2d5a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8a01);
        EXPECT(gbc.pc(), 0x2d5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00DE
        gbc.setState(0xc880, 0xadf1, 0x75a0, 0xf265, 0x91d4, 0x32ad, 0x1, 0x0);
        gbc.writeMem(0xc880, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xadf1);
        EXPECT(gbc.pc(), 0xc882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc880), 0xcb);
        EXPECT(gbc.readMem(0xc881), 0xd7);
        // CB D7 00DF
        gbc.setState(0xd94a, 0xbf6c, 0x5e40, 0xde4b, 0x4cfe, 0x120d, 0x1, 0x0);
        gbc.writeMem(0xd94a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xbf6c);
        EXPECT(gbc.pc(), 0xd94c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd94a), 0xcb);
        EXPECT(gbc.readMem(0xd94b), 0xd7);
        // CB D7 00E0
        gbc.setState(0x2a3d, 0xa08d, 0x3b0, 0xddf, 0x53a0, 0x691a, 0x1, 0x1);
        gbc.writeMem(0x2a3d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa08d);
        EXPECT(gbc.pc(), 0x2a3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00E1
        gbc.setState(0xe943, 0x66a6, 0xe240, 0x1f3e, 0x8b7, 0x8c2f, 0x0, 0x1);
        gbc.writeMem(0xe943, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x66a6);
        EXPECT(gbc.pc(), 0xe945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe943), 0xcb);
        EXPECT(gbc.readMem(0xe944), 0xd7);
        // CB D7 00E2
        gbc.setState(0x61cd, 0x2d58, 0x7430, 0x1a84, 0xd4f4, 0x9660, 0x1, 0x1);
        gbc.writeMem(0x61cd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2d58);
        EXPECT(gbc.pc(), 0x61cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00E3
        gbc.setState(0x3e8f, 0xc567, 0x6f40, 0x397b, 0x4736, 0x7f32, 0x0, 0x1);
        gbc.writeMem(0x3e8f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc567);
        EXPECT(gbc.pc(), 0x3e91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00E4
        gbc.setState(0x9dab, 0xf669, 0x7b30, 0xe4e3, 0xeb1f, 0x72ad, 0x0, 0x1);
        gbc.writeMem(0x9dab, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf669);
        EXPECT(gbc.pc(), 0x9dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dab), 0xcb);
        EXPECT(gbc.readMem(0x9dac), 0xd7);
        // CB D7 00E5
        gbc.setState(0x4234, 0x7033, 0xeb90, 0x65b0, 0xb871, 0x4eab, 0x0, 0x0);
        gbc.writeMem(0x4234, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7033);
        EXPECT(gbc.pc(), 0x4236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00E7
        gbc.setState(0x9865, 0xe010, 0xafd0, 0xf68b, 0x8d95, 0xb385, 0x0, 0x1);
        gbc.writeMem(0x9865, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe010);
        EXPECT(gbc.pc(), 0x9867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9865), 0xcb);
        EXPECT(gbc.readMem(0x9866), 0xd7);
        // CB D7 00E8
        gbc.setState(0xa790, 0xc067, 0xf0b0, 0xd076, 0xc525, 0x5f26, 0x1, 0x0);
        gbc.writeMem(0xa790, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc067);
        EXPECT(gbc.pc(), 0xa792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa790), 0xcb);
        EXPECT(gbc.readMem(0xa791), 0xd7);
        // CB D7 00E9
        gbc.setState(0x7dd3, 0xf7ae, 0xdb90, 0x4c13, 0x9e50, 0x65a2, 0x0, 0x1);
        gbc.writeMem(0x7dd3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf7ae);
        EXPECT(gbc.pc(), 0x7dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00EA
        gbc.setState(0x1f2, 0x2fec, 0xc030, 0xb286, 0x8caf, 0xe609, 0x0, 0x0);
        gbc.writeMem(0x1f2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2fec);
        EXPECT(gbc.pc(), 0x1f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00EB
        gbc.setState(0x46ad, 0x89dc, 0xca20, 0x1630, 0x6d9f, 0x1496, 0x0, 0x1);
        gbc.writeMem(0x46ad, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x89dc);
        EXPECT(gbc.pc(), 0x46af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00EC
        gbc.setState(0xc6d7, 0x877a, 0x10, 0xaf55, 0x465c, 0x2626, 0x0, 0x0);
        gbc.writeMem(0xc6d7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x877a);
        EXPECT(gbc.pc(), 0xc6d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6d7), 0xcb);
        EXPECT(gbc.readMem(0xc6d8), 0xd7);
        // CB D7 00ED
        gbc.setState(0x3554, 0x70cc, 0xa5d0, 0xa322, 0x1867, 0x3483, 0x0, 0x0);
        gbc.writeMem(0x3554, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x70cc);
        EXPECT(gbc.pc(), 0x3556);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00EE
        gbc.setState(0xaf08, 0xfdf3, 0xca0, 0x68ad, 0xe951, 0x62e7, 0x1, 0x1);
        gbc.writeMem(0xaf08, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfdf3);
        EXPECT(gbc.pc(), 0xaf0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf08), 0xcb);
        EXPECT(gbc.readMem(0xaf09), 0xd7);
        // CB D7 00EF
        gbc.setState(0xdf36, 0x4266, 0x5c70, 0xf51c, 0xe4db, 0x5373, 0x1, 0x0);
        gbc.writeMem(0xdf36, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4266);
        EXPECT(gbc.pc(), 0xdf38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf36), 0xcb);
        EXPECT(gbc.readMem(0xdf37), 0xd7);
        // CB D7 00F0
        gbc.setState(0x8a1d, 0x166a, 0x2eb0, 0x25be, 0x7354, 0x133a, 0x0, 0x0);
        gbc.writeMem(0x8a1d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x166a);
        EXPECT(gbc.pc(), 0x8a1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a1d), 0xcb);
        EXPECT(gbc.readMem(0x8a1e), 0xd7);
        // CB D7 00F1
        gbc.setState(0xda18, 0x1772, 0x3cd0, 0x74c1, 0xafe3, 0x7596, 0x0, 0x1);
        gbc.writeMem(0xda18, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1772);
        EXPECT(gbc.pc(), 0xda1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda18), 0xcb);
        EXPECT(gbc.readMem(0xda19), 0xd7);
        // CB D7 00F2
        gbc.setState(0xcd7, 0xa8f7, 0xa80, 0xc958, 0xd308, 0xf3c5, 0x0, 0x0);
        gbc.writeMem(0xcd7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa8f7);
        EXPECT(gbc.pc(), 0xcd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00F3
        gbc.setState(0xcd44, 0xd725, 0xa0e0, 0x69f4, 0x5602, 0x72a6, 0x0, 0x1);
        gbc.writeMem(0xcd44, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd725);
        EXPECT(gbc.pc(), 0xcd46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd44), 0xcb);
        EXPECT(gbc.readMem(0xcd45), 0xd7);
        // CB D7 00F4
        gbc.setState(0xe398, 0x7c6b, 0x7490, 0xf289, 0x8b79, 0xe0f, 0x1, 0x0);
        gbc.writeMem(0xe398, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7c6b);
        EXPECT(gbc.pc(), 0xe39a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe398), 0xcb);
        EXPECT(gbc.readMem(0xe399), 0xd7);
        // CB D7 00F5
        gbc.setState(0xcb50, 0x9fad, 0x4e20, 0x6397, 0x3985, 0x620e, 0x1, 0x1);
        gbc.writeMem(0xcb50, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9fad);
        EXPECT(gbc.pc(), 0xcb52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb50), 0xcb);
        EXPECT(gbc.readMem(0xcb51), 0xd7);
        // CB D7 00F6
        gbc.setState(0xcf66, 0xcaef, 0x6ec0, 0x3086, 0xf938, 0x2a4d, 0x1, 0x0);
        gbc.writeMem(0xcf66, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xcaef);
        EXPECT(gbc.pc(), 0xcf68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf66), 0xcb);
        EXPECT(gbc.readMem(0xcf67), 0xd7);
        // CB D7 00F7
        gbc.setState(0xaccf, 0x7f5e, 0xbbb0, 0x6dda, 0x42fb, 0x17da, 0x1, 0x1);
        gbc.writeMem(0xaccf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7f5e);
        EXPECT(gbc.pc(), 0xacd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaccf), 0xcb);
        EXPECT(gbc.readMem(0xacd0), 0xd7);
        // CB D7 00F8
        gbc.setState(0x4976, 0x8f53, 0xe000, 0x40c6, 0x71b1, 0x9810, 0x0, 0x0);
        gbc.writeMem(0x4976, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8f53);
        EXPECT(gbc.pc(), 0x4978);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00F9
        gbc.setState(0x7e33, 0xeb5d, 0x8a0, 0xda24, 0x666d, 0xb783, 0x0, 0x1);
        gbc.writeMem(0x7e33, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xeb5d);
        EXPECT(gbc.pc(), 0x7e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 00FA
        gbc.setState(0x7d15, 0x5ef8, 0x6730, 0xa61a, 0xb079, 0x65bd, 0x1, 0x1);
        gbc.writeMem(0x7d15, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5ef8);
        EXPECT(gbc.pc(), 0x7d17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00FB
        gbc.setState(0x841d, 0xb826, 0xea10, 0x56df, 0x422f, 0xb85f, 0x1, 0x0);
        gbc.writeMem(0x841d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb826);
        EXPECT(gbc.pc(), 0x841f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x841d), 0xcb);
        EXPECT(gbc.readMem(0x841e), 0xd7);
        // CB D7 00FC
        gbc.setState(0x8df3, 0xb105, 0xfd0, 0x9282, 0x8f6, 0x40f1, 0x0, 0x0);
        gbc.writeMem(0x8df3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb105);
        EXPECT(gbc.pc(), 0x8df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df3), 0xcb);
        EXPECT(gbc.readMem(0x8df4), 0xd7);
        // CB D7 00FD
        gbc.setState(0x355e, 0xb541, 0x2110, 0x57c4, 0xf848, 0x4b76, 0x0, 0x0);
        gbc.writeMem(0x355e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb541);
        EXPECT(gbc.pc(), 0x3560);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00FE
        gbc.setState(0x7683, 0x4aa1, 0x9a50, 0x282b, 0xcd91, 0xeb3c, 0x1, 0x1);
        gbc.writeMem(0x7683, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4aa1);
        EXPECT(gbc.pc(), 0x7685);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 00FF
        gbc.setState(0x9ae8, 0x642b, 0xdb20, 0x7f40, 0x27f4, 0x4801, 0x1, 0x1);
        gbc.writeMem(0x9ae8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x642b);
        EXPECT(gbc.pc(), 0x9aea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae8), 0xcb);
        EXPECT(gbc.readMem(0x9ae9), 0xd7);
        // CB D7 0100
        gbc.setState(0x21b4, 0x575d, 0x5590, 0x52ff, 0x603e, 0x25a1, 0x0, 0x0);
        gbc.writeMem(0x21b4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x575d);
        EXPECT(gbc.pc(), 0x21b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0101
        gbc.setState(0x3db1, 0xa093, 0xadc0, 0x9ecf, 0x7b38, 0x2dba, 0x1, 0x1);
        gbc.writeMem(0x3db1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa093);
        EXPECT(gbc.pc(), 0x3db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0102
        gbc.setState(0xd2a6, 0x225e, 0x2050, 0xce2f, 0x857, 0x190f, 0x1, 0x0);
        gbc.writeMem(0xd2a6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x225e);
        EXPECT(gbc.pc(), 0xd2a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2a6), 0xcb);
        EXPECT(gbc.readMem(0xd2a7), 0xd7);
        // CB D7 0103
        gbc.setState(0xbd4b, 0xb067, 0x700, 0xbccc, 0x41a1, 0x83c0, 0x0, 0x1);
        gbc.writeMem(0xbd4b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb067);
        EXPECT(gbc.pc(), 0xbd4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4b), 0xcb);
        EXPECT(gbc.readMem(0xbd4c), 0xd7);
        // CB D7 0104
        gbc.setState(0x2d34, 0x769a, 0xc7d0, 0xc206, 0x6c00, 0x7d91, 0x0, 0x1);
        gbc.writeMem(0x2d34, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x769a);
        EXPECT(gbc.pc(), 0x2d36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0105
        gbc.setState(0x3671, 0x5c87, 0x1d90, 0xdcdf, 0x4756, 0x57f, 0x1, 0x1);
        gbc.writeMem(0x3671, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5c87);
        EXPECT(gbc.pc(), 0x3673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0106
        gbc.setState(0x5d9a, 0x164c, 0xdf80, 0x4e6, 0xf6ff, 0xa8b9, 0x1, 0x0);
        gbc.writeMem(0x5d9a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x164c);
        EXPECT(gbc.pc(), 0x5d9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0107
        gbc.setState(0xe308, 0x6fd3, 0xcab0, 0x1c22, 0x45bc, 0x39fc, 0x1, 0x1);
        gbc.writeMem(0xe308, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6fd3);
        EXPECT(gbc.pc(), 0xe30a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe308), 0xcb);
        EXPECT(gbc.readMem(0xe309), 0xd7);
        // CB D7 0108
        gbc.setState(0x9183, 0xae78, 0x8710, 0xcbe9, 0xdce6, 0xc132, 0x1, 0x0);
        gbc.writeMem(0x9183, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xae78);
        EXPECT(gbc.pc(), 0x9185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9183), 0xcb);
        EXPECT(gbc.readMem(0x9184), 0xd7);
        // CB D7 0109
        gbc.setState(0x587e, 0x981d, 0xba80, 0xaef2, 0x3d07, 0xe920, 0x0, 0x0);
        gbc.writeMem(0x587e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x981d);
        EXPECT(gbc.pc(), 0x5880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 010A
        gbc.setState(0x4852, 0x1943, 0xff80, 0x6645, 0xbb5e, 0x44d8, 0x1, 0x1);
        gbc.writeMem(0x4852, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x1943);
        EXPECT(gbc.pc(), 0x4854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 010B
        gbc.setState(0x815b, 0x6fd1, 0xc4b0, 0x9dfe, 0x8114, 0x6dce, 0x0, 0x1);
        gbc.writeMem(0x815b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6fd1);
        EXPECT(gbc.pc(), 0x815d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x815b), 0xcb);
        EXPECT(gbc.readMem(0x815c), 0xd7);
        // CB D7 010C
        gbc.setState(0x639e, 0x5f96, 0x4540, 0x13af, 0xbbe0, 0x9561, 0x0, 0x0);
        gbc.writeMem(0x639e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5f96);
        EXPECT(gbc.pc(), 0x63a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 010D
        gbc.setState(0x8889, 0xebd4, 0xb1c0, 0x2176, 0x179a, 0x882c, 0x1, 0x1);
        gbc.writeMem(0x8889, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xebd4);
        EXPECT(gbc.pc(), 0x888b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8889), 0xcb);
        EXPECT(gbc.readMem(0x888a), 0xd7);
        // CB D7 010E
        gbc.setState(0xe38f, 0x2a71, 0xf420, 0xa973, 0x2b32, 0xb11a, 0x0, 0x1);
        gbc.writeMem(0xe38f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2a71);
        EXPECT(gbc.pc(), 0xe391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38f), 0xcb);
        EXPECT(gbc.readMem(0xe390), 0xd7);
        // CB D7 010F
        gbc.setState(0x5fe9, 0x6f57, 0x6020, 0x2c8d, 0xf5e6, 0x4e76, 0x1, 0x0);
        gbc.writeMem(0x5fe9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6f57);
        EXPECT(gbc.pc(), 0x5feb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0110
        gbc.setState(0x5e92, 0x72a, 0x8950, 0xf3b7, 0x2407, 0x8970, 0x1, 0x0);
        gbc.writeMem(0x5e92, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x72a);
        EXPECT(gbc.pc(), 0x5e94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0111
        gbc.setState(0xbfdc, 0xa353, 0xbd40, 0x6716, 0x4b09, 0x756f, 0x1, 0x0);
        gbc.writeMem(0xbfdc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa353);
        EXPECT(gbc.pc(), 0xbfde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfdc), 0xcb);
        EXPECT(gbc.readMem(0xbfdd), 0xd7);
        // CB D7 0112
        gbc.setState(0xd013, 0x43c8, 0x72a0, 0xe1a0, 0x4848, 0xd3ea, 0x0, 0x0);
        gbc.writeMem(0xd013, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x43c8);
        EXPECT(gbc.pc(), 0xd015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd013), 0xcb);
        EXPECT(gbc.readMem(0xd014), 0xd7);
        // CB D7 0113
        gbc.setState(0x4eb6, 0x978b, 0x5b40, 0x59a8, 0xe6a5, 0x7662, 0x0, 0x0);
        gbc.writeMem(0x4eb6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x978b);
        EXPECT(gbc.pc(), 0x4eb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0114
        gbc.setState(0x360b, 0x4b6f, 0x4aa0, 0x33e8, 0x98c3, 0xdb4, 0x0, 0x1);
        gbc.writeMem(0x360b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4b6f);
        EXPECT(gbc.pc(), 0x360d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0116
        gbc.setState(0x7d3c, 0x84e4, 0x5580, 0xf6a, 0x81cb, 0x6770, 0x1, 0x0);
        gbc.writeMem(0x7d3c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x84e4);
        EXPECT(gbc.pc(), 0x7d3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0117
        gbc.setState(0x7c41, 0xa3ba, 0xa310, 0x7112, 0x33b8, 0x4b83, 0x0, 0x1);
        gbc.writeMem(0x7c41, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa3ba);
        EXPECT(gbc.pc(), 0x7c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0118
        gbc.setState(0x5ac8, 0xb50d, 0xd550, 0xc244, 0xf763, 0x1052, 0x1, 0x1);
        gbc.writeMem(0x5ac8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb50d);
        EXPECT(gbc.pc(), 0x5aca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0119
        gbc.setState(0x9bcf, 0x4a0, 0xba20, 0x6817, 0xc20c, 0x3d46, 0x0, 0x0);
        gbc.writeMem(0x9bcf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4a0);
        EXPECT(gbc.pc(), 0x9bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bcf), 0xcb);
        EXPECT(gbc.readMem(0x9bd0), 0xd7);
        // CB D7 011A
        gbc.setState(0xa722, 0xed54, 0x2bc0, 0x2803, 0x28c5, 0xd6fa, 0x0, 0x0);
        gbc.writeMem(0xa722, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xed54);
        EXPECT(gbc.pc(), 0xa724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa722), 0xcb);
        EXPECT(gbc.readMem(0xa723), 0xd7);
        // CB D7 011B
        gbc.setState(0xb722, 0x9667, 0x6be0, 0x5b4c, 0xa225, 0xeb0c, 0x1, 0x1);
        gbc.writeMem(0xb722, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9667);
        EXPECT(gbc.pc(), 0xb724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb722), 0xcb);
        EXPECT(gbc.readMem(0xb723), 0xd7);
        // CB D7 011C
        gbc.setState(0xb103, 0xc531, 0x1cc0, 0x3819, 0xfb25, 0xe978, 0x1, 0x1);
        gbc.writeMem(0xb103, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc531);
        EXPECT(gbc.pc(), 0xb105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb103), 0xcb);
        EXPECT(gbc.readMem(0xb104), 0xd7);
        // CB D7 011D
        gbc.setState(0x9c1c, 0x6a7d, 0x6740, 0x7b9a, 0xb178, 0xc305, 0x1, 0x0);
        gbc.writeMem(0x9c1c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6a7d);
        EXPECT(gbc.pc(), 0x9c1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c1c), 0xcb);
        EXPECT(gbc.readMem(0x9c1d), 0xd7);
        // CB D7 011E
        gbc.setState(0xc7, 0x7155, 0x1df0, 0x15ee, 0x976a, 0xb88d, 0x0, 0x1);
        gbc.writeMem(0xc7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7155);
        EXPECT(gbc.pc(), 0xc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 011F
        gbc.setState(0x34bc, 0x1a75, 0x2000, 0x6d9f, 0xdeb4, 0xa1ea, 0x1, 0x0);
        gbc.writeMem(0x34bc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1a75);
        EXPECT(gbc.pc(), 0x34be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0121
        gbc.setState(0x225e, 0xebd0, 0xd9c0, 0x614e, 0x83bb, 0x794a, 0x0, 0x1);
        gbc.writeMem(0x225e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xebd0);
        EXPECT(gbc.pc(), 0x2260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0122
        gbc.setState(0x1ddf, 0x6f09, 0x5a90, 0x4dd6, 0x7a55, 0x4b15, 0x1, 0x1);
        gbc.writeMem(0x1ddf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6f09);
        EXPECT(gbc.pc(), 0x1de1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0123
        gbc.setState(0xcfbe, 0x87a3, 0xb6c0, 0x4aaa, 0x1c03, 0x812, 0x1, 0x1);
        gbc.writeMem(0xcfbe, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x87a3);
        EXPECT(gbc.pc(), 0xcfc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfbe), 0xcb);
        EXPECT(gbc.readMem(0xcfbf), 0xd7);
        // CB D7 0124
        gbc.setState(0x809, 0xa59, 0xb9c0, 0x55d7, 0xcc2, 0x91f3, 0x1, 0x0);
        gbc.writeMem(0x809, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa59);
        EXPECT(gbc.pc(), 0x80b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0125
        gbc.setState(0x1b8a, 0x6771, 0x3be0, 0xdf8, 0xca69, 0xf353, 0x1, 0x1);
        gbc.writeMem(0x1b8a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6771);
        EXPECT(gbc.pc(), 0x1b8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0127
        gbc.setState(0xdd1e, 0x3509, 0x6c50, 0x4705, 0x6dfa, 0x50c4, 0x0, 0x1);
        gbc.writeMem(0xdd1e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3509);
        EXPECT(gbc.pc(), 0xdd20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd1e), 0xcb);
        EXPECT(gbc.readMem(0xdd1f), 0xd7);
        // CB D7 0128
        gbc.setState(0xb9b1, 0x6cad, 0x1670, 0x9053, 0x86c5, 0xcf86, 0x0, 0x0);
        gbc.writeMem(0xb9b1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6cad);
        EXPECT(gbc.pc(), 0xb9b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b1), 0xcb);
        EXPECT(gbc.readMem(0xb9b2), 0xd7);
        // CB D7 0129
        gbc.setState(0x46cd, 0x15fa, 0x60a0, 0x9504, 0x63df, 0xd101, 0x0, 0x1);
        gbc.writeMem(0x46cd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x15fa);
        EXPECT(gbc.pc(), 0x46cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 012A
        gbc.setState(0x64ed, 0x5e60, 0xd790, 0x8798, 0xfe00, 0xa517, 0x0, 0x1);
        gbc.writeMem(0x64ed, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5e60);
        EXPECT(gbc.pc(), 0x64ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 012B
        gbc.setState(0x6b1a, 0x6202, 0x8810, 0x82ef, 0x4484, 0x51c8, 0x0, 0x0);
        gbc.writeMem(0x6b1a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6202);
        EXPECT(gbc.pc(), 0x6b1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 012C
        gbc.setState(0x35b6, 0xedc, 0x97a0, 0xcc21, 0xa924, 0x42ab, 0x0, 0x1);
        gbc.writeMem(0x35b6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xedc);
        EXPECT(gbc.pc(), 0x35b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 012D
        gbc.setState(0x4e27, 0xaaa0, 0x3290, 0xf88e, 0x31d, 0xd554, 0x0, 0x1);
        gbc.writeMem(0x4e27, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xaaa0);
        EXPECT(gbc.pc(), 0x4e29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 012F
        gbc.setState(0x4dbf, 0x29d7, 0xece0, 0xce36, 0x509f, 0xdfb4, 0x1, 0x1);
        gbc.writeMem(0x4dbf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x29d7);
        EXPECT(gbc.pc(), 0x4dc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0130
        gbc.setState(0xc014, 0xff95, 0x84d0, 0x84cd, 0xf808, 0x5b5d, 0x0, 0x1);
        gbc.writeMem(0xc014, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xff95);
        EXPECT(gbc.pc(), 0xc016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc014), 0xcb);
        EXPECT(gbc.readMem(0xc015), 0xd7);
        // CB D7 0131
        gbc.setState(0x52ca, 0x7205, 0x5110, 0x180, 0x3f60, 0x3032, 0x0, 0x1);
        gbc.writeMem(0x52ca, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7205);
        EXPECT(gbc.pc(), 0x52cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0132
        gbc.setState(0x649f, 0x813c, 0x2890, 0xf320, 0x49a6, 0xad89, 0x1, 0x1);
        gbc.writeMem(0x649f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x813c);
        EXPECT(gbc.pc(), 0x64a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0133
        gbc.setState(0x15ee, 0x18bc, 0xb1a0, 0x6027, 0xf1a0, 0x4309, 0x0, 0x1);
        gbc.writeMem(0x15ee, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x18bc);
        EXPECT(gbc.pc(), 0x15f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0134
        gbc.setState(0x2a53, 0xfbd, 0x6660, 0x3d4c, 0xbcee, 0x5b37, 0x0, 0x0);
        gbc.writeMem(0x2a53, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xfbd);
        EXPECT(gbc.pc(), 0x2a55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0135
        gbc.setState(0x1fca, 0x82ff, 0x8cb0, 0x6d2, 0x43fc, 0xd86c, 0x1, 0x1);
        gbc.writeMem(0x1fca, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x82ff);
        EXPECT(gbc.pc(), 0x1fcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0136
        gbc.setState(0xb1ea, 0x72a3, 0x45b0, 0xd2b, 0x8066, 0xf55d, 0x1, 0x1);
        gbc.writeMem(0xb1ea, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x72a3);
        EXPECT(gbc.pc(), 0xb1ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1ea), 0xcb);
        EXPECT(gbc.readMem(0xb1eb), 0xd7);
        // CB D7 0137
        gbc.setState(0x77f1, 0x8ae4, 0xdd20, 0xaf36, 0xb41a, 0xc98c, 0x1, 0x0);
        gbc.writeMem(0x77f1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8ae4);
        EXPECT(gbc.pc(), 0x77f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0139
        gbc.setState(0xefe0, 0x17a0, 0xab30, 0xa9bc, 0xd09, 0xaabe, 0x0, 0x0);
        gbc.writeMem(0xefe0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x17a0);
        EXPECT(gbc.pc(), 0xefe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefe0), 0xcb);
        EXPECT(gbc.readMem(0xefe1), 0xd7);
        // CB D7 013A
        gbc.setState(0xbc9c, 0xb0d8, 0x5780, 0x9bd8, 0xa823, 0xcbf, 0x1, 0x1);
        gbc.writeMem(0xbc9c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb0d8);
        EXPECT(gbc.pc(), 0xbc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9c), 0xcb);
        EXPECT(gbc.readMem(0xbc9d), 0xd7);
        // CB D7 013C
        gbc.setState(0x760e, 0x60a2, 0xb530, 0xbd6b, 0xd9c5, 0x831b, 0x0, 0x1);
        gbc.writeMem(0x760e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x60a2);
        EXPECT(gbc.pc(), 0x7610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 013D
        gbc.setState(0x885, 0x929c, 0xca60, 0x58e, 0xd48d, 0x4870, 0x1, 0x0);
        gbc.writeMem(0x885, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x929c);
        EXPECT(gbc.pc(), 0x887);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 013E
        gbc.setState(0xc201, 0x7484, 0x1170, 0x5d4b, 0x8963, 0x388f, 0x1, 0x0);
        gbc.writeMem(0xc201, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7484);
        EXPECT(gbc.pc(), 0xc203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc201), 0xcb);
        EXPECT(gbc.readMem(0xc202), 0xd7);
        // CB D7 013F
        gbc.setState(0xb277, 0xaaaa, 0x3f40, 0x6871, 0x3cf4, 0x5338, 0x1, 0x0);
        gbc.writeMem(0xb277, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xaaaa);
        EXPECT(gbc.pc(), 0xb279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb277), 0xcb);
        EXPECT(gbc.readMem(0xb278), 0xd7);
        // CB D7 0140
        gbc.setState(0x852f, 0x8e64, 0x5d80, 0xb438, 0xc44a, 0xeed1, 0x1, 0x1);
        gbc.writeMem(0x852f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8e64);
        EXPECT(gbc.pc(), 0x8531);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x852f), 0xcb);
        EXPECT(gbc.readMem(0x8530), 0xd7);
        // CB D7 0141
        gbc.setState(0xa96f, 0x1177, 0xbe10, 0x884d, 0x7540, 0xd84f, 0x0, 0x1);
        gbc.writeMem(0xa96f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1177);
        EXPECT(gbc.pc(), 0xa971);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa96f), 0xcb);
        EXPECT(gbc.readMem(0xa970), 0xd7);
        // CB D7 0142
        gbc.setState(0x79d0, 0xaf94, 0xaca0, 0x241c, 0xb55e, 0x25d7, 0x1, 0x0);
        gbc.writeMem(0x79d0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xaf94);
        EXPECT(gbc.pc(), 0x79d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0143
        gbc.setState(0x3486, 0x8c2a, 0x2250, 0x534a, 0xa9f7, 0x8cff, 0x1, 0x0);
        gbc.writeMem(0x3486, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8c2a);
        EXPECT(gbc.pc(), 0x3488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0144
        gbc.setState(0xb804, 0x2729, 0xcac0, 0xf87c, 0xc20e, 0xa306, 0x1, 0x1);
        gbc.writeMem(0xb804, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2729);
        EXPECT(gbc.pc(), 0xb806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb804), 0xcb);
        EXPECT(gbc.readMem(0xb805), 0xd7);
        // CB D7 0146
        gbc.setState(0x68c9, 0x6b11, 0x5510, 0x631c, 0x613, 0x43fa, 0x0, 0x1);
        gbc.writeMem(0x68c9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6b11);
        EXPECT(gbc.pc(), 0x68cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0147
        gbc.setState(0xb619, 0xcf17, 0x9450, 0x1a53, 0x6085, 0x84a3, 0x1, 0x1);
        gbc.writeMem(0xb619, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcf17);
        EXPECT(gbc.pc(), 0xb61b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb619), 0xcb);
        EXPECT(gbc.readMem(0xb61a), 0xd7);
        // CB D7 0148
        gbc.setState(0xbcad, 0x950f, 0xaeb0, 0x8bf2, 0x2cba, 0x5779, 0x0, 0x0);
        gbc.writeMem(0xbcad, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x950f);
        EXPECT(gbc.pc(), 0xbcaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcad), 0xcb);
        EXPECT(gbc.readMem(0xbcae), 0xd7);
        // CB D7 0149
        gbc.setState(0xc1dd, 0x393e, 0xcb60, 0x45df, 0xd9e8, 0xc974, 0x1, 0x0);
        gbc.writeMem(0xc1dd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x393e);
        EXPECT(gbc.pc(), 0xc1df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1dd), 0xcb);
        EXPECT(gbc.readMem(0xc1de), 0xd7);
        // CB D7 014A
        gbc.setState(0xb66, 0x17c, 0xf50, 0x37fa, 0x1090, 0xd18c, 0x0, 0x1);
        gbc.writeMem(0xb66, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x17c);
        EXPECT(gbc.pc(), 0xb68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 014B
        gbc.setState(0xac5f, 0xf023, 0x2d10, 0x42dc, 0xf794, 0x9281, 0x0, 0x1);
        gbc.writeMem(0xac5f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf023);
        EXPECT(gbc.pc(), 0xac61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac5f), 0xcb);
        EXPECT(gbc.readMem(0xac60), 0xd7);
        // CB D7 014C
        gbc.setState(0x9685, 0xf6a4, 0x1b10, 0xe89f, 0x3dba, 0x2172, 0x1, 0x0);
        gbc.writeMem(0x9685, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf6a4);
        EXPECT(gbc.pc(), 0x9687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9685), 0xcb);
        EXPECT(gbc.readMem(0x9686), 0xd7);
        // CB D7 014D
        gbc.setState(0x4186, 0xa210, 0x6370, 0xd0fb, 0xf476, 0x8a6a, 0x1, 0x0);
        gbc.writeMem(0x4186, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa210);
        EXPECT(gbc.pc(), 0x4188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 014E
        gbc.setState(0x7ce9, 0x5c8c, 0x9ef0, 0xffb8, 0xb038, 0x14ec, 0x1, 0x0);
        gbc.writeMem(0x7ce9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5c8c);
        EXPECT(gbc.pc(), 0x7ceb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 014F
        gbc.setState(0xea2a, 0xd8c8, 0x35f0, 0x756, 0x82b6, 0xafd0, 0x1, 0x1);
        gbc.writeMem(0xea2a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd8c8);
        EXPECT(gbc.pc(), 0xea2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea2a), 0xcb);
        EXPECT(gbc.readMem(0xea2b), 0xd7);
        // CB D7 0150
        gbc.setState(0x2806, 0x6247, 0x59a0, 0xbc2, 0xa62c, 0x2a45, 0x0, 0x0);
        gbc.writeMem(0x2806, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6247);
        EXPECT(gbc.pc(), 0x2808);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0151
        gbc.setState(0x3e62, 0x9bcc, 0x370, 0xc26c, 0x18a3, 0x7fc2, 0x1, 0x0);
        gbc.writeMem(0x3e62, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9bcc);
        EXPECT(gbc.pc(), 0x3e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0152
        gbc.setState(0xef6e, 0x3b8d, 0xb40, 0xed5c, 0xd693, 0x1416, 0x1, 0x1);
        gbc.writeMem(0xef6e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3b8d);
        EXPECT(gbc.pc(), 0xef70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6e), 0xcb);
        EXPECT(gbc.readMem(0xef6f), 0xd7);
        // CB D7 0153
        gbc.setState(0xd73e, 0x4461, 0xee70, 0xe6c5, 0xfe57, 0x7c42, 0x1, 0x0);
        gbc.writeMem(0xd73e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4461);
        EXPECT(gbc.pc(), 0xd740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd73e), 0xcb);
        EXPECT(gbc.readMem(0xd73f), 0xd7);
        // CB D7 0154
        gbc.setState(0x89cd, 0xa4a8, 0x9540, 0xe1ab, 0x7e68, 0x3278, 0x1, 0x1);
        gbc.writeMem(0x89cd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa4a8);
        EXPECT(gbc.pc(), 0x89cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cd), 0xcb);
        EXPECT(gbc.readMem(0x89ce), 0xd7);
        // CB D7 0155
        gbc.setState(0x71b2, 0xb4e3, 0x27e0, 0x13aa, 0xbee3, 0xfe31, 0x1, 0x0);
        gbc.writeMem(0x71b2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb4e3);
        EXPECT(gbc.pc(), 0x71b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0156
        gbc.setState(0xaf99, 0x4ec8, 0xad00, 0xdaf2, 0xed6c, 0x2e78, 0x0, 0x1);
        gbc.writeMem(0xaf99, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4ec8);
        EXPECT(gbc.pc(), 0xaf9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf99), 0xcb);
        EXPECT(gbc.readMem(0xaf9a), 0xd7);
        // CB D7 0157
        gbc.setState(0x207f, 0xcaa8, 0x9b30, 0xf9d2, 0x990d, 0x9df1, 0x1, 0x0);
        gbc.writeMem(0x207f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcaa8);
        EXPECT(gbc.pc(), 0x2081);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0158
        gbc.setState(0xc0dd, 0x8e69, 0x8870, 0x2e24, 0x383e, 0x8fd, 0x1, 0x1);
        gbc.writeMem(0xc0dd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8e69);
        EXPECT(gbc.pc(), 0xc0df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0dd), 0xcb);
        EXPECT(gbc.readMem(0xc0de), 0xd7);
        // CB D7 0159
        gbc.setState(0x5029, 0xeac2, 0xb570, 0xde3c, 0xba0c, 0x299, 0x1, 0x1);
        gbc.writeMem(0x5029, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xeac2);
        EXPECT(gbc.pc(), 0x502b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 015A
        gbc.setState(0xa06f, 0x5979, 0x1590, 0xcf6d, 0x15e0, 0x3bf5, 0x0, 0x0);
        gbc.writeMem(0xa06f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5979);
        EXPECT(gbc.pc(), 0xa071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa06f), 0xcb);
        EXPECT(gbc.readMem(0xa070), 0xd7);
        // CB D7 015B
        gbc.setState(0xc6e8, 0xf51d, 0xd0e0, 0xfd87, 0x4c78, 0x99a9, 0x0, 0x0);
        gbc.writeMem(0xc6e8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf51d);
        EXPECT(gbc.pc(), 0xc6ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e8), 0xcb);
        EXPECT(gbc.readMem(0xc6e9), 0xd7);
        // CB D7 015C
        gbc.setState(0x65af, 0x589d, 0x6780, 0x6dac, 0xd6c3, 0x3e9, 0x0, 0x1);
        gbc.writeMem(0x65af, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x589d);
        EXPECT(gbc.pc(), 0x65b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 015D
        gbc.setState(0xe751, 0x5ede, 0x9db0, 0x7a2a, 0x97bb, 0x1062, 0x0, 0x1);
        gbc.writeMem(0xe751, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5ede);
        EXPECT(gbc.pc(), 0xe753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe751), 0xcb);
        EXPECT(gbc.readMem(0xe752), 0xd7);
        // CB D7 015E
        gbc.setState(0x7ff9, 0x6f08, 0x3110, 0xcfb2, 0xaf33, 0xd958, 0x0, 0x1);
        gbc.writeMem(0x7ff9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6f08);
        EXPECT(gbc.pc(), 0x7ffb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 015F
        gbc.setState(0xb13, 0x4fd6, 0xe2c0, 0xde7b, 0x77dd, 0x9ca1, 0x1, 0x1);
        gbc.writeMem(0xb13, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4fd6);
        EXPECT(gbc.pc(), 0xb15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0160
        gbc.setState(0xdbfb, 0x781f, 0x2990, 0x6a81, 0xc340, 0xe00, 0x1, 0x0);
        gbc.writeMem(0xdbfb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x781f);
        EXPECT(gbc.pc(), 0xdbfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbfb), 0xcb);
        EXPECT(gbc.readMem(0xdbfc), 0xd7);
        // CB D7 0161
        gbc.setState(0x7628, 0xd22f, 0xc680, 0x77f0, 0x7890, 0x67dc, 0x0, 0x0);
        gbc.writeMem(0x7628, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd22f);
        EXPECT(gbc.pc(), 0x762a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0162
        gbc.setState(0x3e8a, 0x30a8, 0xa910, 0xcfe2, 0xd685, 0x6292, 0x1, 0x1);
        gbc.writeMem(0x3e8a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x30a8);
        EXPECT(gbc.pc(), 0x3e8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0163
        gbc.setState(0x241b, 0x5fa1, 0xde30, 0x8e68, 0xfa4, 0xfb81, 0x1, 0x0);
        gbc.writeMem(0x241b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5fa1);
        EXPECT(gbc.pc(), 0x241d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0164
        gbc.setState(0x10dc, 0x9ac8, 0x53f0, 0xb29e, 0x8ecc, 0xfa03, 0x0, 0x0);
        gbc.writeMem(0x10dc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9ac8);
        EXPECT(gbc.pc(), 0x10de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0165
        gbc.setState(0x94f5, 0x45fd, 0x7120, 0x4fc9, 0xf36f, 0xe11b, 0x1, 0x1);
        gbc.writeMem(0x94f5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x45fd);
        EXPECT(gbc.pc(), 0x94f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f5), 0xcb);
        EXPECT(gbc.readMem(0x94f6), 0xd7);
        // CB D7 0166
        gbc.setState(0x7aa3, 0xb588, 0xa4b0, 0x795c, 0xfe30, 0x7ce8, 0x1, 0x1);
        gbc.writeMem(0x7aa3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb588);
        EXPECT(gbc.pc(), 0x7aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0167
        gbc.setState(0x50a, 0x167f, 0xfd30, 0xef10, 0x103a, 0xcc5c, 0x1, 0x1);
        gbc.writeMem(0x50a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x167f);
        EXPECT(gbc.pc(), 0x50c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0168
        gbc.setState(0x1b6f, 0x3cb7, 0x22d0, 0x436b, 0xc82a, 0x9940, 0x0, 0x0);
        gbc.writeMem(0x1b6f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3cb7);
        EXPECT(gbc.pc(), 0x1b71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0169
        gbc.setState(0xe0a1, 0xd77f, 0x3eb0, 0x4067, 0xec81, 0xb774, 0x1, 0x1);
        gbc.writeMem(0xe0a1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd77f);
        EXPECT(gbc.pc(), 0xe0a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a1), 0xcb);
        EXPECT(gbc.readMem(0xe0a2), 0xd7);
        // CB D7 016A
        gbc.setState(0x1658, 0x7d03, 0xe9f0, 0x44d, 0xac3c, 0x3d30, 0x0, 0x0);
        gbc.writeMem(0x1658, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7d03);
        EXPECT(gbc.pc(), 0x165a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 016B
        gbc.setState(0x5ef6, 0xa1e3, 0xd620, 0x5ff9, 0x467, 0x5e7f, 0x1, 0x1);
        gbc.writeMem(0x5ef6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa1e3);
        EXPECT(gbc.pc(), 0x5ef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 016C
        gbc.setState(0xdffe, 0xebb5, 0x2b00, 0xc3bb, 0x3c49, 0xf20c, 0x0, 0x0);
        gbc.writeMem(0xdffe, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xebb5);
        EXPECT(gbc.pc(), 0xe000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdffe), 0xcb);
        EXPECT(gbc.readMem(0xdfff), 0xd7);
        // CB D7 016F
        gbc.setState(0x62e0, 0x3e93, 0x1340, 0x241a, 0x6c92, 0xee7a, 0x1, 0x1);
        gbc.writeMem(0x62e0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3e93);
        EXPECT(gbc.pc(), 0x62e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0171
        gbc.setState(0xeda9, 0x5739, 0x9280, 0xb208, 0x39e4, 0xa3a4, 0x1, 0x1);
        gbc.writeMem(0xeda9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5739);
        EXPECT(gbc.pc(), 0xedab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeda9), 0xcb);
        EXPECT(gbc.readMem(0xedaa), 0xd7);
        // CB D7 0172
        gbc.setState(0x1678, 0xe465, 0x5470, 0x84d7, 0xd7b2, 0x3fe7, 0x0, 0x1);
        gbc.writeMem(0x1678, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe465);
        EXPECT(gbc.pc(), 0x167a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0173
        gbc.setState(0xb538, 0xeae4, 0xd190, 0x7a8b, 0x3fc4, 0x8f57, 0x0, 0x1);
        gbc.writeMem(0xb538, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xeae4);
        EXPECT(gbc.pc(), 0xb53a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb538), 0xcb);
        EXPECT(gbc.readMem(0xb539), 0xd7);
        // CB D7 0174
        gbc.setState(0x1944, 0x2936, 0xdeb0, 0xd0e8, 0x7c4d, 0x2aa9, 0x0, 0x1);
        gbc.writeMem(0x1944, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2936);
        EXPECT(gbc.pc(), 0x1946);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0175
        gbc.setState(0xa104, 0x6282, 0xea80, 0x310b, 0x9a4a, 0x9d82, 0x0, 0x1);
        gbc.writeMem(0xa104, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6282);
        EXPECT(gbc.pc(), 0xa106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa104), 0xcb);
        EXPECT(gbc.readMem(0xa105), 0xd7);
        // CB D7 0176
        gbc.setState(0xb8fb, 0x1065, 0xfa90, 0xbc18, 0x99b3, 0xf657, 0x0, 0x1);
        gbc.writeMem(0xb8fb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1065);
        EXPECT(gbc.pc(), 0xb8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8fb), 0xcb);
        EXPECT(gbc.readMem(0xb8fc), 0xd7);
        // CB D7 0177
        gbc.setState(0xa275, 0xcb40, 0x4430, 0xefe2, 0xd2fd, 0x2b31, 0x0, 0x1);
        gbc.writeMem(0xa275, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xcb40);
        EXPECT(gbc.pc(), 0xa277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa275), 0xcb);
        EXPECT(gbc.readMem(0xa276), 0xd7);
        // CB D7 0178
        gbc.setState(0xc8a7, 0x5b2a, 0x5a60, 0x5037, 0x1c93, 0x8402, 0x1, 0x1);
        gbc.writeMem(0xc8a7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5b2a);
        EXPECT(gbc.pc(), 0xc8a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a7), 0xcb);
        EXPECT(gbc.readMem(0xc8a8), 0xd7);
        // CB D7 0179
        gbc.setState(0x49a9, 0x44bb, 0x6840, 0xc5a9, 0x2983, 0x2e60, 0x1, 0x0);
        gbc.writeMem(0x49a9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x44bb);
        EXPECT(gbc.pc(), 0x49ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 017A
        gbc.setState(0x5355, 0xe332, 0xe0a0, 0xa955, 0xeb57, 0xb02c, 0x1, 0x0);
        gbc.writeMem(0x5355, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe332);
        EXPECT(gbc.pc(), 0x5357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 017B
        gbc.setState(0xd8ff, 0x6d37, 0x5850, 0xc37, 0x507e, 0xa2e9, 0x1, 0x0);
        gbc.writeMem(0xd8ff, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6d37);
        EXPECT(gbc.pc(), 0xd901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ff), 0xcb);
        EXPECT(gbc.readMem(0xd900), 0xd7);
        // CB D7 017C
        gbc.setState(0xe2fa, 0x2a2, 0x4360, 0xbb34, 0xeec4, 0x83e8, 0x1, 0x1);
        gbc.writeMem(0xe2fa, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2a2);
        EXPECT(gbc.pc(), 0xe2fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2fa), 0xcb);
        EXPECT(gbc.readMem(0xe2fb), 0xd7);
        // CB D7 017D
        gbc.setState(0x5bf8, 0x62e9, 0xbac0, 0x51e4, 0x2ab2, 0xd4a, 0x0, 0x1);
        gbc.writeMem(0x5bf8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x62e9);
        EXPECT(gbc.pc(), 0x5bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 017E
        gbc.setState(0x691, 0x299f, 0x9460, 0x8c75, 0x8024, 0xf64f, 0x1, 0x0);
        gbc.writeMem(0x691, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x299f);
        EXPECT(gbc.pc(), 0x693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 017F
        gbc.setState(0xe943, 0xb11, 0x21f0, 0xfdef, 0x5cb, 0x68de, 0x0, 0x1);
        gbc.writeMem(0xe943, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb11);
        EXPECT(gbc.pc(), 0xe945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe943), 0xcb);
        EXPECT(gbc.readMem(0xe944), 0xd7);
        // CB D7 0180
        gbc.setState(0x8c85, 0xdf1b, 0x67b0, 0x797a, 0x26ff, 0x2a67, 0x0, 0x0);
        gbc.writeMem(0x8c85, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xdf1b);
        EXPECT(gbc.pc(), 0x8c87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c85), 0xcb);
        EXPECT(gbc.readMem(0x8c86), 0xd7);
        // CB D7 0181
        gbc.setState(0x8fa1, 0x3be1, 0xf6a0, 0x10cc, 0x5919, 0x80c3, 0x1, 0x0);
        gbc.writeMem(0x8fa1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3be1);
        EXPECT(gbc.pc(), 0x8fa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa1), 0xcb);
        EXPECT(gbc.readMem(0x8fa2), 0xd7);
        // CB D7 0182
        gbc.setState(0x2da4, 0xef64, 0x6bf0, 0x77f2, 0xda8a, 0xead6, 0x0, 0x0);
        gbc.writeMem(0x2da4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xef64);
        EXPECT(gbc.pc(), 0x2da6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0183
        gbc.setState(0x1cef, 0xb70, 0xdf0, 0x8f6b, 0xb1ca, 0x2ad, 0x1, 0x0);
        gbc.writeMem(0x1cef, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb70);
        EXPECT(gbc.pc(), 0x1cf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0184
        gbc.setState(0x227c, 0x8949, 0xb250, 0x7f84, 0x47f8, 0xd739, 0x1, 0x0);
        gbc.writeMem(0x227c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8949);
        EXPECT(gbc.pc(), 0x227e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0186
        gbc.setState(0x670b, 0x440c, 0x4b30, 0x8915, 0x6116, 0xfa45, 0x0, 0x0);
        gbc.writeMem(0x670b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x440c);
        EXPECT(gbc.pc(), 0x670d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0187
        gbc.setState(0x6b12, 0x90fd, 0xc6d0, 0x8615, 0xa3ac, 0x2f49, 0x0, 0x1);
        gbc.writeMem(0x6b12, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x90fd);
        EXPECT(gbc.pc(), 0x6b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0188
        gbc.setState(0x691b, 0x94f5, 0x6540, 0x36d, 0xdc38, 0x7a2e, 0x1, 0x1);
        gbc.writeMem(0x691b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x94f5);
        EXPECT(gbc.pc(), 0x691d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 018A
        gbc.setState(0x7427, 0x7932, 0x7880, 0x9ee0, 0x7600, 0xc1ab, 0x0, 0x1);
        gbc.writeMem(0x7427, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7932);
        EXPECT(gbc.pc(), 0x7429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 018B
        gbc.setState(0x6667, 0xf132, 0x64a0, 0x1ef4, 0x3047, 0x797d, 0x0, 0x1);
        gbc.writeMem(0x6667, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf132);
        EXPECT(gbc.pc(), 0x6669);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 018C
        gbc.setState(0xde24, 0x6170, 0xea20, 0xcef, 0x2fe3, 0xc595, 0x1, 0x1);
        gbc.writeMem(0xde24, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6170);
        EXPECT(gbc.pc(), 0xde26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde24), 0xcb);
        EXPECT(gbc.readMem(0xde25), 0xd7);
        // CB D7 018D
        gbc.setState(0xab72, 0xe117, 0xf170, 0xd93, 0x6270, 0xc86b, 0x1, 0x1);
        gbc.writeMem(0xab72, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe117);
        EXPECT(gbc.pc(), 0xab74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab72), 0xcb);
        EXPECT(gbc.readMem(0xab73), 0xd7);
        // CB D7 018E
        gbc.setState(0x6f4b, 0xe575, 0xcaa0, 0x9339, 0x873a, 0xa630, 0x1, 0x1);
        gbc.writeMem(0x6f4b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe575);
        EXPECT(gbc.pc(), 0x6f4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 018F
        gbc.setState(0xb3a0, 0x7ccb, 0xd1b0, 0x5bc2, 0x3021, 0x48e3, 0x1, 0x1);
        gbc.writeMem(0xb3a0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7ccb);
        EXPECT(gbc.pc(), 0xb3a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a0), 0xcb);
        EXPECT(gbc.readMem(0xb3a1), 0xd7);
        // CB D7 0190
        gbc.setState(0x37a9, 0xfb19, 0x150, 0x16a5, 0x596a, 0xb2ca, 0x0, 0x0);
        gbc.writeMem(0x37a9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xfb19);
        EXPECT(gbc.pc(), 0x37ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0191
        gbc.setState(0x25a, 0x8558, 0x1fe0, 0xe21b, 0x73e7, 0xe491, 0x0, 0x1);
        gbc.writeMem(0x25a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8558);
        EXPECT(gbc.pc(), 0x25c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0192
        gbc.setState(0xaba, 0x4e7e, 0xe380, 0xa7b, 0xf54d, 0xd09c, 0x1, 0x0);
        gbc.writeMem(0xaba, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4e7e);
        EXPECT(gbc.pc(), 0xabc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0193
        gbc.setState(0x5c5, 0x46e4, 0x1730, 0xad0, 0x44b0, 0xa489, 0x0, 0x0);
        gbc.writeMem(0x5c5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x46e4);
        EXPECT(gbc.pc(), 0x5c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0194
        gbc.setState(0x386f, 0xc422, 0xc4b0, 0x630c, 0xbc86, 0x4fd, 0x1, 0x1);
        gbc.writeMem(0x386f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc422);
        EXPECT(gbc.pc(), 0x3871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0195
        gbc.setState(0xda8b, 0xdb04, 0x1ab0, 0xc59a, 0x5267, 0x11dc, 0x0, 0x1);
        gbc.writeMem(0xda8b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xdb04);
        EXPECT(gbc.pc(), 0xda8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda8b), 0xcb);
        EXPECT(gbc.readMem(0xda8c), 0xd7);
        // CB D7 0196
        gbc.setState(0x62a3, 0x4610, 0xf020, 0x5775, 0xadc5, 0x6c7a, 0x0, 0x1);
        gbc.writeMem(0x62a3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4610);
        EXPECT(gbc.pc(), 0x62a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0197
        gbc.setState(0x5e27, 0xd9bd, 0xc120, 0xb8bf, 0x973a, 0xb352, 0x0, 0x0);
        gbc.writeMem(0x5e27, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd9bd);
        EXPECT(gbc.pc(), 0x5e29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0198
        gbc.setState(0x45f, 0x995d, 0x17d0, 0xfb47, 0xf9f3, 0x1541, 0x1, 0x1);
        gbc.writeMem(0x45f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x995d);
        EXPECT(gbc.pc(), 0x461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0199
        gbc.setState(0x8c9d, 0xa98a, 0x1e0, 0xf269, 0xd98a, 0xdb4e, 0x0, 0x0);
        gbc.writeMem(0x8c9d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa98a);
        EXPECT(gbc.pc(), 0x8c9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9d), 0xcb);
        EXPECT(gbc.readMem(0x8c9e), 0xd7);
        // CB D7 019A
        gbc.setState(0xe1db, 0x424, 0x66d0, 0x4ba9, 0x2907, 0x8f57, 0x1, 0x1);
        gbc.writeMem(0xe1db, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x424);
        EXPECT(gbc.pc(), 0xe1dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1db), 0xcb);
        EXPECT(gbc.readMem(0xe1dc), 0xd7);
        // CB D7 019B
        gbc.setState(0x75fa, 0xeb43, 0x3280, 0x177d, 0xae65, 0xe54a, 0x1, 0x0);
        gbc.writeMem(0x75fa, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xeb43);
        EXPECT(gbc.pc(), 0x75fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 019C
        gbc.setState(0xd807, 0xe8b8, 0x83d0, 0x46a0, 0xf5f, 0x72b2, 0x0, 0x1);
        gbc.writeMem(0xd807, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe8b8);
        EXPECT(gbc.pc(), 0xd809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd807), 0xcb);
        EXPECT(gbc.readMem(0xd808), 0xd7);
        // CB D7 019D
        gbc.setState(0x3734, 0x8cf4, 0x5d0, 0xbe1d, 0x3d34, 0x5f62, 0x1, 0x1);
        gbc.writeMem(0x3734, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8cf4);
        EXPECT(gbc.pc(), 0x3736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 019E
        gbc.setState(0x8d29, 0x9934, 0x6d10, 0xcf3a, 0xe573, 0x8e, 0x1, 0x0);
        gbc.writeMem(0x8d29, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9934);
        EXPECT(gbc.pc(), 0x8d2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d29), 0xcb);
        EXPECT(gbc.readMem(0x8d2a), 0xd7);
        // CB D7 019F
        gbc.setState(0xbb28, 0xeaee, 0xbc80, 0x6044, 0x1a1f, 0xa2af, 0x1, 0x0);
        gbc.writeMem(0xbb28, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xeaee);
        EXPECT(gbc.pc(), 0xbb2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb28), 0xcb);
        EXPECT(gbc.readMem(0xbb29), 0xd7);
        // CB D7 01A0
        gbc.setState(0x5a2, 0x108c, 0x5420, 0xca6f, 0xa560, 0xf3c0, 0x0, 0x1);
        gbc.writeMem(0x5a2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x108c);
        EXPECT(gbc.pc(), 0x5a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01A1
        gbc.setState(0x7f7c, 0xdec9, 0xa70, 0x6b12, 0x882a, 0x4f, 0x0, 0x0);
        gbc.writeMem(0x7f7c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xdec9);
        EXPECT(gbc.pc(), 0x7f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01A4
        gbc.setState(0x524c, 0x812d, 0xf120, 0xb448, 0x82f1, 0xdd72, 0x1, 0x1);
        gbc.writeMem(0x524c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x812d);
        EXPECT(gbc.pc(), 0x524e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01A5
        gbc.setState(0xb2a7, 0xf091, 0xb130, 0x1f2b, 0x5cc8, 0xd5e2, 0x0, 0x0);
        gbc.writeMem(0xb2a7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf091);
        EXPECT(gbc.pc(), 0xb2a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a7), 0xcb);
        EXPECT(gbc.readMem(0xb2a8), 0xd7);
        // CB D7 01A6
        gbc.setState(0xac03, 0xf243, 0x4b30, 0xe7e4, 0xbb9b, 0x2670, 0x0, 0x0);
        gbc.writeMem(0xac03, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf243);
        EXPECT(gbc.pc(), 0xac05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac03), 0xcb);
        EXPECT(gbc.readMem(0xac04), 0xd7);
        // CB D7 01A7
        gbc.setState(0x7109, 0xa8ce, 0x6f50, 0x242c, 0x8a5, 0x2628, 0x1, 0x0);
        gbc.writeMem(0x7109, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xa8ce);
        EXPECT(gbc.pc(), 0x710b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01A8
        gbc.setState(0x8851, 0x4715, 0x950, 0x73f3, 0x912c, 0x7083, 0x0, 0x1);
        gbc.writeMem(0x8851, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4715);
        EXPECT(gbc.pc(), 0x8853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8851), 0xcb);
        EXPECT(gbc.readMem(0x8852), 0xd7);
        // CB D7 01A9
        gbc.setState(0x3525, 0x92f3, 0x1280, 0x411d, 0x8c14, 0x1b21, 0x0, 0x0);
        gbc.writeMem(0x3525, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x92f3);
        EXPECT(gbc.pc(), 0x3527);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01AA
        gbc.setState(0x8855, 0x63bb, 0x8e60, 0x2718, 0x7db, 0x852e, 0x0, 0x0);
        gbc.writeMem(0x8855, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x63bb);
        EXPECT(gbc.pc(), 0x8857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8855), 0xcb);
        EXPECT(gbc.readMem(0x8856), 0xd7);
        // CB D7 01AC
        gbc.setState(0xab85, 0x620a, 0xa290, 0x4dc2, 0x81e5, 0xc05f, 0x1, 0x0);
        gbc.writeMem(0xab85, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x620a);
        EXPECT(gbc.pc(), 0xab87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab85), 0xcb);
        EXPECT(gbc.readMem(0xab86), 0xd7);
        // CB D7 01AD
        gbc.setState(0x74ae, 0xa1e6, 0x3980, 0x2ffe, 0x878d, 0x305a, 0x0, 0x1);
        gbc.writeMem(0x74ae, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa1e6);
        EXPECT(gbc.pc(), 0x74b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01AE
        gbc.setState(0x2e4d, 0x7002, 0x8320, 0xbc77, 0x69ed, 0x64ff, 0x0, 0x0);
        gbc.writeMem(0x2e4d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x7002);
        EXPECT(gbc.pc(), 0x2e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01AF
        gbc.setState(0x71e, 0x59a0, 0x20f0, 0xe664, 0xdad7, 0xa6a8, 0x1, 0x0);
        gbc.writeMem(0x71e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x59a0);
        EXPECT(gbc.pc(), 0x720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01B1
        gbc.setState(0x8c05, 0xaa9, 0xff90, 0x2197, 0x25d4, 0xf8d1, 0x0, 0x1);
        gbc.writeMem(0x8c05, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xaa9);
        EXPECT(gbc.pc(), 0x8c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c05), 0xcb);
        EXPECT(gbc.readMem(0x8c06), 0xd7);
        // CB D7 01B2
        gbc.setState(0x779e, 0xff93, 0x6a90, 0x6e42, 0x7d14, 0x485c, 0x1, 0x1);
        gbc.writeMem(0x779e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xff93);
        EXPECT(gbc.pc(), 0x77a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01B3
        gbc.setState(0x2c0e, 0x4218, 0xf710, 0xf1f4, 0x1490, 0x7e47, 0x0, 0x0);
        gbc.writeMem(0x2c0e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4218);
        EXPECT(gbc.pc(), 0x2c10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01B4
        gbc.setState(0xef3e, 0x98ae, 0xba00, 0x1a95, 0x412a, 0x8fd5, 0x0, 0x0);
        gbc.writeMem(0xef3e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x98ae);
        EXPECT(gbc.pc(), 0xef40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef3e), 0xcb);
        EXPECT(gbc.readMem(0xef3f), 0xd7);
        // CB D7 01B5
        gbc.setState(0x1b36, 0x1580, 0xded0, 0x4b1e, 0xb37d, 0x2b97, 0x0, 0x1);
        gbc.writeMem(0x1b36, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1580);
        EXPECT(gbc.pc(), 0x1b38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01B6
        gbc.setState(0x8032, 0xfd3, 0x7ca0, 0xbdcb, 0x34c, 0xb6b2, 0x0, 0x0);
        gbc.writeMem(0x8032, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfd3);
        EXPECT(gbc.pc(), 0x8034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8032), 0xcb);
        EXPECT(gbc.readMem(0x8033), 0xd7);
        // CB D7 01B7
        gbc.setState(0x7576, 0x2448, 0x25d0, 0xaa52, 0x8fea, 0x68b7, 0x0, 0x1);
        gbc.writeMem(0x7576, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2448);
        EXPECT(gbc.pc(), 0x7578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01B8
        gbc.setState(0x4e59, 0x63c6, 0x4e70, 0x8883, 0x8af1, 0xee35, 0x1, 0x1);
        gbc.writeMem(0x4e59, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x63c6);
        EXPECT(gbc.pc(), 0x4e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01B9
        gbc.setState(0x930a, 0x40ec, 0x83d0, 0xdddb, 0xbbbb, 0xd744, 0x0, 0x1);
        gbc.writeMem(0x930a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x40ec);
        EXPECT(gbc.pc(), 0x930c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x930a), 0xcb);
        EXPECT(gbc.readMem(0x930b), 0xd7);
        // CB D7 01BB
        gbc.setState(0x83d6, 0x1b35, 0x8ef0, 0xe32c, 0xe95b, 0xd977, 0x0, 0x1);
        gbc.writeMem(0x83d6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1b35);
        EXPECT(gbc.pc(), 0x83d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83d6), 0xcb);
        EXPECT(gbc.readMem(0x83d7), 0xd7);
        // CB D7 01BC
        gbc.setState(0x54c9, 0x8ab8, 0xb680, 0xda56, 0x9152, 0x5f7e, 0x1, 0x0);
        gbc.writeMem(0x54c9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8ab8);
        EXPECT(gbc.pc(), 0x54cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01BD
        gbc.setState(0xa95d, 0x437c, 0x5740, 0x3c60, 0xa022, 0x384c, 0x0, 0x1);
        gbc.writeMem(0xa95d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x437c);
        EXPECT(gbc.pc(), 0xa95f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa95d), 0xcb);
        EXPECT(gbc.readMem(0xa95e), 0xd7);
        // CB D7 01BE
        gbc.setState(0x364c, 0xcbd2, 0x1a0, 0xc869, 0x8248, 0x43e2, 0x1, 0x0);
        gbc.writeMem(0x364c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcbd2);
        EXPECT(gbc.pc(), 0x364e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01BF
        gbc.setState(0xb1b6, 0x768a, 0xf080, 0x77b1, 0x3eb2, 0xb72, 0x0, 0x0);
        gbc.writeMem(0xb1b6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x768a);
        EXPECT(gbc.pc(), 0xb1b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1b6), 0xcb);
        EXPECT(gbc.readMem(0xb1b7), 0xd7);
        // CB D7 01C0
        gbc.setState(0x6bf5, 0xce87, 0x7a30, 0xc7a4, 0x4f5c, 0x17b2, 0x1, 0x0);
        gbc.writeMem(0x6bf5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xce87);
        EXPECT(gbc.pc(), 0x6bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01C1
        gbc.setState(0xec93, 0x20af, 0xf600, 0x6694, 0xee8c, 0x32d8, 0x1, 0x1);
        gbc.writeMem(0xec93, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x20af);
        EXPECT(gbc.pc(), 0xec95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec93), 0xcb);
        EXPECT(gbc.readMem(0xec94), 0xd7);
        // CB D7 01C2
        gbc.setState(0xc4d0, 0x3c62, 0xb920, 0x15b4, 0x93ac, 0x8b47, 0x1, 0x0);
        gbc.writeMem(0xc4d0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3c62);
        EXPECT(gbc.pc(), 0xc4d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d0), 0xcb);
        EXPECT(gbc.readMem(0xc4d1), 0xd7);
        // CB D7 01C3
        gbc.setState(0x818e, 0x2566, 0xe8e0, 0x8d50, 0xe244, 0x64b6, 0x1, 0x1);
        gbc.writeMem(0x818e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2566);
        EXPECT(gbc.pc(), 0x8190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818e), 0xcb);
        EXPECT(gbc.readMem(0x818f), 0xd7);
        // CB D7 01C4
        gbc.setState(0x115d, 0x6506, 0x9520, 0x4fe6, 0x9683, 0xf6e6, 0x1, 0x0);
        gbc.writeMem(0x115d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6506);
        EXPECT(gbc.pc(), 0x115f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01C5
        gbc.setState(0x1105, 0x9117, 0xec30, 0xf76e, 0x657c, 0x235, 0x1, 0x0);
        gbc.writeMem(0x1105, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9117);
        EXPECT(gbc.pc(), 0x1107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01C6
        gbc.setState(0x36d1, 0x3e4e, 0x7440, 0x7086, 0xaa70, 0xc902, 0x1, 0x1);
        gbc.writeMem(0x36d1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3e4e);
        EXPECT(gbc.pc(), 0x36d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01C7
        gbc.setState(0x77a8, 0x33d8, 0xd220, 0x54a4, 0x75ba, 0x6cb9, 0x1, 0x0);
        gbc.writeMem(0x77a8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x33d8);
        EXPECT(gbc.pc(), 0x77aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01C8
        gbc.setState(0x4abb, 0x295e, 0x7520, 0x282a, 0xaf0f, 0xe4e0, 0x1, 0x1);
        gbc.writeMem(0x4abb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x295e);
        EXPECT(gbc.pc(), 0x4abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01C9
        gbc.setState(0xbb94, 0xa634, 0xa810, 0x743e, 0x314, 0x8635, 0x1, 0x1);
        gbc.writeMem(0xbb94, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa634);
        EXPECT(gbc.pc(), 0xbb96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb94), 0xcb);
        EXPECT(gbc.readMem(0xbb95), 0xd7);
        // CB D7 01CA
        gbc.setState(0xaea9, 0x4f70, 0xf1a0, 0x929e, 0x284, 0xb9cf, 0x1, 0x1);
        gbc.writeMem(0xaea9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4f70);
        EXPECT(gbc.pc(), 0xaeab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea9), 0xcb);
        EXPECT(gbc.readMem(0xaeaa), 0xd7);
        // CB D7 01CB
        gbc.setState(0x1765, 0x8cee, 0xce70, 0x2147, 0x7df5, 0x65ca, 0x1, 0x1);
        gbc.writeMem(0x1765, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8cee);
        EXPECT(gbc.pc(), 0x1767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01CC
        gbc.setState(0x500e, 0x88e6, 0x9b80, 0x5611, 0x7693, 0x8a10, 0x0, 0x0);
        gbc.writeMem(0x500e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x88e6);
        EXPECT(gbc.pc(), 0x5010);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01CD
        gbc.setState(0x8ace, 0x23ae, 0xbba0, 0xbd11, 0x51a, 0xeb7a, 0x0, 0x1);
        gbc.writeMem(0x8ace, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x23ae);
        EXPECT(gbc.pc(), 0x8ad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ace), 0xcb);
        EXPECT(gbc.readMem(0x8acf), 0xd7);
        // CB D7 01CE
        gbc.setState(0xb5c8, 0x5b39, 0x3550, 0x5d74, 0x5d2d, 0x1c37, 0x0, 0x0);
        gbc.writeMem(0xb5c8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5b39);
        EXPECT(gbc.pc(), 0xb5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5c8), 0xcb);
        EXPECT(gbc.readMem(0xb5c9), 0xd7);
        // CB D7 01CF
        gbc.setState(0xb76a, 0x9287, 0x1680, 0x3eb8, 0x6d9d, 0xad8c, 0x0, 0x0);
        gbc.writeMem(0xb76a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9287);
        EXPECT(gbc.pc(), 0xb76c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb76a), 0xcb);
        EXPECT(gbc.readMem(0xb76b), 0xd7);
        // CB D7 01D1
        gbc.setState(0xe7c4, 0xf7d5, 0x3b50, 0xb7a7, 0x5219, 0xe43d, 0x0, 0x1);
        gbc.writeMem(0xe7c4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf7d5);
        EXPECT(gbc.pc(), 0xe7c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7c4), 0xcb);
        EXPECT(gbc.readMem(0xe7c5), 0xd7);
        // CB D7 01D2
        gbc.setState(0xa230, 0xbb0f, 0x1a20, 0x302a, 0x959c, 0xe5f, 0x1, 0x1);
        gbc.writeMem(0xa230, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbb0f);
        EXPECT(gbc.pc(), 0xa232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa230), 0xcb);
        EXPECT(gbc.readMem(0xa231), 0xd7);
        // CB D7 01D3
        gbc.setState(0x63cd, 0x2f2e, 0x1630, 0x5f8e, 0xea49, 0x6818, 0x1, 0x1);
        gbc.writeMem(0x63cd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2f2e);
        EXPECT(gbc.pc(), 0x63cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01D4
        gbc.setState(0x3b6, 0x81ab, 0xec90, 0xd667, 0xe57d, 0x153e, 0x0, 0x1);
        gbc.writeMem(0x3b6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x81ab);
        EXPECT(gbc.pc(), 0x3b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01D5
        gbc.setState(0x7aa3, 0xc42a, 0xd200, 0xd831, 0x211c, 0xba7a, 0x1, 0x0);
        gbc.writeMem(0x7aa3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc42a);
        EXPECT(gbc.pc(), 0x7aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01D6
        gbc.setState(0xb980, 0xffdb, 0xa30, 0xdf88, 0xd1a1, 0x66cb, 0x1, 0x1);
        gbc.writeMem(0xb980, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xffdb);
        EXPECT(gbc.pc(), 0xb982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb980), 0xcb);
        EXPECT(gbc.readMem(0xb981), 0xd7);
        // CB D7 01D7
        gbc.setState(0xd7f1, 0xf962, 0x6b0, 0xb449, 0x1121, 0x481e, 0x1, 0x0);
        gbc.writeMem(0xd7f1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf962);
        EXPECT(gbc.pc(), 0xd7f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f1), 0xcb);
        EXPECT(gbc.readMem(0xd7f2), 0xd7);
        // CB D7 01D8
        gbc.setState(0x541b, 0xa77e, 0xc70, 0x8fe7, 0xc282, 0x8f17, 0x0, 0x1);
        gbc.writeMem(0x541b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa77e);
        EXPECT(gbc.pc(), 0x541d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01DA
        gbc.setState(0xa91e, 0xec83, 0x96f0, 0x4131, 0x3ea5, 0x1fb9, 0x0, 0x1);
        gbc.writeMem(0xa91e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xec83);
        EXPECT(gbc.pc(), 0xa920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa91e), 0xcb);
        EXPECT(gbc.readMem(0xa91f), 0xd7);
        // CB D7 01DB
        gbc.setState(0xa4f7, 0x3d1e, 0x37c0, 0x8e8b, 0xbb28, 0x79d9, 0x0, 0x1);
        gbc.writeMem(0xa4f7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3d1e);
        EXPECT(gbc.pc(), 0xa4f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f7), 0xcb);
        EXPECT(gbc.readMem(0xa4f8), 0xd7);
        // CB D7 01DC
        gbc.setState(0x5006, 0x970f, 0xd620, 0xc630, 0xad7d, 0x1181, 0x1, 0x0);
        gbc.writeMem(0x5006, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x970f);
        EXPECT(gbc.pc(), 0x5008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01DD
        gbc.setState(0x782e, 0x8676, 0xcee0, 0x35ff, 0x2e7c, 0x90d5, 0x0, 0x1);
        gbc.writeMem(0x782e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8676);
        EXPECT(gbc.pc(), 0x7830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01DE
        gbc.setState(0x9d2e, 0x272b, 0x9bc0, 0x95c8, 0x6147, 0xef43, 0x1, 0x0);
        gbc.writeMem(0x9d2e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x272b);
        EXPECT(gbc.pc(), 0x9d30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d2e), 0xcb);
        EXPECT(gbc.readMem(0x9d2f), 0xd7);
        // CB D7 01DF
        gbc.setState(0x4fb7, 0x282c, 0x7980, 0x1dfe, 0x5344, 0x1466, 0x0, 0x0);
        gbc.writeMem(0x4fb7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x282c);
        EXPECT(gbc.pc(), 0x4fb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01E0
        gbc.setState(0x5586, 0x2815, 0xb990, 0x6fad, 0xad9c, 0x68c8, 0x0, 0x1);
        gbc.writeMem(0x5586, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2815);
        EXPECT(gbc.pc(), 0x5588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01E1
        gbc.setState(0x76c9, 0x81b8, 0x7350, 0x5f20, 0x4485, 0x196e, 0x0, 0x1);
        gbc.writeMem(0x76c9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x81b8);
        EXPECT(gbc.pc(), 0x76cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01E2
        gbc.setState(0xd74e, 0x791f, 0xf010, 0xc62d, 0x13cc, 0x6a60, 0x0, 0x1);
        gbc.writeMem(0xd74e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x791f);
        EXPECT(gbc.pc(), 0xd750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd74e), 0xcb);
        EXPECT(gbc.readMem(0xd74f), 0xd7);
        // CB D7 01E3
        gbc.setState(0x4b35, 0xc617, 0xd50, 0x8fe6, 0x8ea9, 0x4780, 0x1, 0x0);
        gbc.writeMem(0x4b35, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc617);
        EXPECT(gbc.pc(), 0x4b37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01E4
        gbc.setState(0x376, 0xbd8f, 0x780, 0xcbdf, 0x7fe8, 0x9d24, 0x1, 0x1);
        gbc.writeMem(0x376, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xbd8f);
        EXPECT(gbc.pc(), 0x378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01E5
        gbc.setState(0x970e, 0x892f, 0xcde0, 0xef05, 0x6602, 0x794b, 0x1, 0x0);
        gbc.writeMem(0x970e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x892f);
        EXPECT(gbc.pc(), 0x9710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970e), 0xcb);
        EXPECT(gbc.readMem(0x970f), 0xd7);
        // CB D7 01E6
        gbc.setState(0x60d2, 0xdae3, 0x6c00, 0xd5bf, 0x9bda, 0x284c, 0x1, 0x1);
        gbc.writeMem(0x60d2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xdae3);
        EXPECT(gbc.pc(), 0x60d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01E7
        gbc.setState(0x8034, 0xe5d, 0x5300, 0xa7f7, 0xd146, 0x51fe, 0x1, 0x1);
        gbc.writeMem(0x8034, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe5d);
        EXPECT(gbc.pc(), 0x8036);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8034), 0xcb);
        EXPECT(gbc.readMem(0x8035), 0xd7);
        // CB D7 01E8
        gbc.setState(0x3085, 0x6eeb, 0x7d50, 0xe8b1, 0x434b, 0x8871, 0x0, 0x1);
        gbc.writeMem(0x3085, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6eeb);
        EXPECT(gbc.pc(), 0x3087);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01E9
        gbc.setState(0x6a70, 0xcd0f, 0xe960, 0x8e0e, 0x26de, 0x5c95, 0x0, 0x1);
        gbc.writeMem(0x6a70, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xcd0f);
        EXPECT(gbc.pc(), 0x6a72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01EA
        gbc.setState(0xe503, 0x9129, 0xba10, 0x88c4, 0xb54a, 0x3fd7, 0x1, 0x0);
        gbc.writeMem(0xe503, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9129);
        EXPECT(gbc.pc(), 0xe505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe503), 0xcb);
        EXPECT(gbc.readMem(0xe504), 0xd7);
        // CB D7 01EB
        gbc.setState(0xeb88, 0xa469, 0x71b0, 0x470c, 0x54d5, 0x55a4, 0x1, 0x0);
        gbc.writeMem(0xeb88, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa469);
        EXPECT(gbc.pc(), 0xeb8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb88), 0xcb);
        EXPECT(gbc.readMem(0xeb89), 0xd7);
        // CB D7 01EC
        gbc.setState(0x8d24, 0x8e4e, 0x2410, 0x848c, 0x3fba, 0xbcd9, 0x0, 0x0);
        gbc.writeMem(0x8d24, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8e4e);
        EXPECT(gbc.pc(), 0x8d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d24), 0xcb);
        EXPECT(gbc.readMem(0x8d25), 0xd7);
        // CB D7 01ED
        gbc.setState(0x5355, 0xe658, 0xbf00, 0xd925, 0x8d01, 0x1bd3, 0x0, 0x1);
        gbc.writeMem(0x5355, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe658);
        EXPECT(gbc.pc(), 0x5357);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01EE
        gbc.setState(0xce75, 0x7501, 0x78e0, 0xcb6e, 0x47c4, 0xd731, 0x0, 0x1);
        gbc.writeMem(0xce75, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7501);
        EXPECT(gbc.pc(), 0xce77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce75), 0xcb);
        EXPECT(gbc.readMem(0xce76), 0xd7);
        // CB D7 01EF
        gbc.setState(0x5ce2, 0x2758, 0x2d20, 0x51e2, 0x63a1, 0x896a, 0x1, 0x1);
        gbc.writeMem(0x5ce2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2758);
        EXPECT(gbc.pc(), 0x5ce4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01F0
        gbc.setState(0xc3d2, 0x9d92, 0xc970, 0x9e81, 0xc095, 0xe02f, 0x0, 0x1);
        gbc.writeMem(0xc3d2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9d92);
        EXPECT(gbc.pc(), 0xc3d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3d2), 0xcb);
        EXPECT(gbc.readMem(0xc3d3), 0xd7);
        // CB D7 01F1
        gbc.setState(0xbf07, 0x81f5, 0x1b40, 0x508c, 0x7619, 0xee08, 0x1, 0x1);
        gbc.writeMem(0xbf07, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x81f5);
        EXPECT(gbc.pc(), 0xbf09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf07), 0xcb);
        EXPECT(gbc.readMem(0xbf08), 0xd7);
        // CB D7 01F2
        gbc.setState(0x963b, 0x5203, 0x7180, 0x3bdf, 0xcfb9, 0x6d00, 0x1, 0x0);
        gbc.writeMem(0x963b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5203);
        EXPECT(gbc.pc(), 0x963d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x963b), 0xcb);
        EXPECT(gbc.readMem(0x963c), 0xd7);
        // CB D7 01F3
        gbc.setState(0x32ac, 0xfcf1, 0xf360, 0xb1f3, 0x6f78, 0x45df, 0x1, 0x1);
        gbc.writeMem(0x32ac, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfcf1);
        EXPECT(gbc.pc(), 0x32ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01F4
        gbc.setState(0xcf2e, 0x8ef8, 0x9760, 0x7259, 0x2469, 0x33c, 0x0, 0x1);
        gbc.writeMem(0xcf2e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8ef8);
        EXPECT(gbc.pc(), 0xcf30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf2e), 0xcb);
        EXPECT(gbc.readMem(0xcf2f), 0xd7);
        // CB D7 01F6
        gbc.setState(0x9251, 0x9c3b, 0x5e0, 0x4626, 0xb2aa, 0xa1be, 0x1, 0x0);
        gbc.writeMem(0x9251, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9c3b);
        EXPECT(gbc.pc(), 0x9253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9251), 0xcb);
        EXPECT(gbc.readMem(0x9252), 0xd7);
        // CB D7 01F7
        gbc.setState(0x6814, 0xc082, 0x6aa0, 0xff90, 0x4707, 0x9026, 0x1, 0x0);
        gbc.writeMem(0x6814, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc082);
        EXPECT(gbc.pc(), 0x6816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01F8
        gbc.setState(0xb9d2, 0x3de7, 0xa5e0, 0xc6c8, 0x6bc4, 0xd303, 0x0, 0x1);
        gbc.writeMem(0xb9d2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3de7);
        EXPECT(gbc.pc(), 0xb9d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9d2), 0xcb);
        EXPECT(gbc.readMem(0xb9d3), 0xd7);
        // CB D7 01F9
        gbc.setState(0xda3d, 0x7d56, 0x2150, 0x4a3b, 0xebf9, 0x7963, 0x0, 0x0);
        gbc.writeMem(0xda3d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7d56);
        EXPECT(gbc.pc(), 0xda3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda3d), 0xcb);
        EXPECT(gbc.readMem(0xda3e), 0xd7);
        // CB D7 01FA
        gbc.setState(0xb57e, 0x9dea, 0x66c0, 0xfef7, 0x7205, 0x9224, 0x0, 0x0);
        gbc.writeMem(0xb57e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9dea);
        EXPECT(gbc.pc(), 0xb580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb57e), 0xcb);
        EXPECT(gbc.readMem(0xb57f), 0xd7);
        // CB D7 01FB
        gbc.setState(0xbb93, 0xcc26, 0x86c0, 0x725, 0x8745, 0x621d, 0x1, 0x1);
        gbc.writeMem(0xbb93, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcc26);
        EXPECT(gbc.pc(), 0xbb95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb93), 0xcb);
        EXPECT(gbc.readMem(0xbb94), 0xd7);
        // CB D7 01FC
        gbc.setState(0xedb5, 0xe090, 0xdd40, 0xec53, 0xac1f, 0xf742, 0x1, 0x1);
        gbc.writeMem(0xedb5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe090);
        EXPECT(gbc.pc(), 0xedb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedb5), 0xcb);
        EXPECT(gbc.readMem(0xedb6), 0xd7);
        // CB D7 01FD
        gbc.setState(0x7f6c, 0x288e, 0x4880, 0xd057, 0x4de8, 0xa7d3, 0x1, 0x1);
        gbc.writeMem(0x7f6c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x288e);
        EXPECT(gbc.pc(), 0x7f6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 01FE
        gbc.setState(0x273c, 0xf255, 0xbc50, 0xb55b, 0xbe4c, 0x73c7, 0x1, 0x0);
        gbc.writeMem(0x273c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf255);
        EXPECT(gbc.pc(), 0x273e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 01FF
        gbc.setState(0x75ed, 0x2949, 0x1540, 0xe79d, 0x3ea3, 0x98e4, 0x0, 0x1);
        gbc.writeMem(0x75ed, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2949);
        EXPECT(gbc.pc(), 0x75ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0200
        gbc.setState(0x8e8b, 0x2cd2, 0xcab0, 0x959f, 0xb5dd, 0x3d17, 0x1, 0x0);
        gbc.writeMem(0x8e8b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2cd2);
        EXPECT(gbc.pc(), 0x8e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e8b), 0xcb);
        EXPECT(gbc.readMem(0x8e8c), 0xd7);
        // CB D7 0201
        gbc.setState(0x57da, 0xe864, 0x2a0, 0x5076, 0x5bd6, 0xe204, 0x1, 0x0);
        gbc.writeMem(0x57da, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe864);
        EXPECT(gbc.pc(), 0x57dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0202
        gbc.setState(0xe3c6, 0x8ed9, 0x1370, 0x17d8, 0x8e05, 0xcd86, 0x1, 0x1);
        gbc.writeMem(0xe3c6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8ed9);
        EXPECT(gbc.pc(), 0xe3c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3c6), 0xcb);
        EXPECT(gbc.readMem(0xe3c7), 0xd7);
        // CB D7 0203
        gbc.setState(0x8fb4, 0x97df, 0xb900, 0xdbca, 0x9f4d, 0xb92d, 0x1, 0x0);
        gbc.writeMem(0x8fb4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x97df);
        EXPECT(gbc.pc(), 0x8fb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb4), 0xcb);
        EXPECT(gbc.readMem(0x8fb5), 0xd7);
        // CB D7 0204
        gbc.setState(0x1b20, 0x4583, 0xbc50, 0xb6d3, 0x6b49, 0xf673, 0x1, 0x0);
        gbc.writeMem(0x1b20, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4583);
        EXPECT(gbc.pc(), 0x1b22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0205
        gbc.setState(0x2066, 0xadf8, 0x2dc0, 0xed87, 0x2007, 0xba9f, 0x1, 0x1);
        gbc.writeMem(0x2066, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xadf8);
        EXPECT(gbc.pc(), 0x2068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0206
        gbc.setState(0x59a0, 0x29, 0x7f80, 0x944f, 0xff93, 0xea2d, 0x0, 0x1);
        gbc.writeMem(0x59a0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x29);
        EXPECT(gbc.pc(), 0x59a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0207
        gbc.setState(0x175c, 0x7ddc, 0x3b90, 0x357a, 0x556f, 0xef35, 0x1, 0x0);
        gbc.writeMem(0x175c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7ddc);
        EXPECT(gbc.pc(), 0x175e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0208
        gbc.setState(0xd78c, 0xfa1b, 0x9cc0, 0xc6fd, 0xd74f, 0xf586, 0x1, 0x1);
        gbc.writeMem(0xd78c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xfa1b);
        EXPECT(gbc.pc(), 0xd78e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd78c), 0xcb);
        EXPECT(gbc.readMem(0xd78d), 0xd7);
        // CB D7 0209
        gbc.setState(0xd963, 0x1268, 0x3050, 0xa351, 0x93c9, 0x399f, 0x0, 0x0);
        gbc.writeMem(0xd963, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1268);
        EXPECT(gbc.pc(), 0xd965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd963), 0xcb);
        EXPECT(gbc.readMem(0xd964), 0xd7);
        // CB D7 020A
        gbc.setState(0x1d83, 0xdee9, 0xa2c0, 0x10bc, 0xe896, 0x7fda, 0x1, 0x0);
        gbc.writeMem(0x1d83, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xdee9);
        EXPECT(gbc.pc(), 0x1d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 020B
        gbc.setState(0x3195, 0xcb9a, 0xf7c0, 0x11bb, 0xa70e, 0x6a52, 0x0, 0x0);
        gbc.writeMem(0x3195, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xcb9a);
        EXPECT(gbc.pc(), 0x3197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 020C
        gbc.setState(0x7780, 0xb867, 0x1eb0, 0x6ee5, 0xfb83, 0x1d8a, 0x1, 0x0);
        gbc.writeMem(0x7780, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb867);
        EXPECT(gbc.pc(), 0x7782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 020D
        gbc.setState(0x66c8, 0x2410, 0xdac0, 0x94a3, 0x68f5, 0x7c7d, 0x1, 0x1);
        gbc.writeMem(0x66c8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2410);
        EXPECT(gbc.pc(), 0x66ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 020E
        gbc.setState(0x19b6, 0x63f5, 0x58a0, 0xabc2, 0xb85d, 0x8169, 0x1, 0x0);
        gbc.writeMem(0x19b6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x63f5);
        EXPECT(gbc.pc(), 0x19b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 020F
        gbc.setState(0xc662, 0xd4c8, 0x4250, 0xc695, 0x908d, 0x55e7, 0x1, 0x0);
        gbc.writeMem(0xc662, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd4c8);
        EXPECT(gbc.pc(), 0xc664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc662), 0xcb);
        EXPECT(gbc.readMem(0xc663), 0xd7);
        // CB D7 0210
        gbc.setState(0x4adf, 0x4fc9, 0x9420, 0x9073, 0xd69b, 0x39bc, 0x1, 0x0);
        gbc.writeMem(0x4adf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4fc9);
        EXPECT(gbc.pc(), 0x4ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0211
        gbc.setState(0x500b, 0xfa26, 0xf4f0, 0x8d07, 0x95d0, 0x6389, 0x1, 0x1);
        gbc.writeMem(0x500b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xfa26);
        EXPECT(gbc.pc(), 0x500d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0212
        gbc.setState(0x8c5b, 0x72c5, 0x4650, 0xe32e, 0x498f, 0xe26e, 0x1, 0x0);
        gbc.writeMem(0x8c5b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x72c5);
        EXPECT(gbc.pc(), 0x8c5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c5b), 0xcb);
        EXPECT(gbc.readMem(0x8c5c), 0xd7);
        // CB D7 0214
        gbc.setState(0x62d4, 0xaab0, 0xa610, 0x650d, 0xd665, 0xc36d, 0x0, 0x1);
        gbc.writeMem(0x62d4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xaab0);
        EXPECT(gbc.pc(), 0x62d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0215
        gbc.setState(0x9f80, 0x9d90, 0x72c0, 0xd77f, 0x266b, 0x415d, 0x1, 0x0);
        gbc.writeMem(0x9f80, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9d90);
        EXPECT(gbc.pc(), 0x9f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f80), 0xcb);
        EXPECT(gbc.readMem(0x9f81), 0xd7);
        // CB D7 0216
        gbc.setState(0xe3ba, 0x87, 0x2d60, 0x313c, 0xc56b, 0x321c, 0x1, 0x0);
        gbc.writeMem(0xe3ba, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x87);
        EXPECT(gbc.pc(), 0xe3bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ba), 0xcb);
        EXPECT(gbc.readMem(0xe3bb), 0xd7);
        // CB D7 0218
        gbc.setState(0x9c38, 0x6559, 0x9ed0, 0xc8e9, 0xd68e, 0x5e38, 0x1, 0x1);
        gbc.writeMem(0x9c38, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6559);
        EXPECT(gbc.pc(), 0x9c3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c38), 0xcb);
        EXPECT(gbc.readMem(0x9c39), 0xd7);
        // CB D7 0219
        gbc.setState(0x4fd, 0x2829, 0xb980, 0x7a42, 0xe2c8, 0x252c, 0x1, 0x1);
        gbc.writeMem(0x4fd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2829);
        EXPECT(gbc.pc(), 0x4ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 021A
        gbc.setState(0xe3ae, 0xc571, 0xf290, 0xfc1c, 0x60ad, 0x9a11, 0x0, 0x0);
        gbc.writeMem(0xe3ae, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc571);
        EXPECT(gbc.pc(), 0xe3b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3ae), 0xcb);
        EXPECT(gbc.readMem(0xe3af), 0xd7);
        // CB D7 021B
        gbc.setState(0x303a, 0xa26f, 0xdaf0, 0x477b, 0xedb5, 0xa9fc, 0x0, 0x1);
        gbc.writeMem(0x303a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa26f);
        EXPECT(gbc.pc(), 0x303c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 021C
        gbc.setState(0x9727, 0x4442, 0x5600, 0xf829, 0xc6b0, 0x8f13, 0x0, 0x0);
        gbc.writeMem(0x9727, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4442);
        EXPECT(gbc.pc(), 0x9729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9727), 0xcb);
        EXPECT(gbc.readMem(0x9728), 0xd7);
        // CB D7 021D
        gbc.setState(0xcad3, 0x3f7c, 0xaa40, 0x2dd4, 0x1539, 0x8bde, 0x0, 0x1);
        gbc.writeMem(0xcad3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3f7c);
        EXPECT(gbc.pc(), 0xcad5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad3), 0xcb);
        EXPECT(gbc.readMem(0xcad4), 0xd7);
        // CB D7 021E
        gbc.setState(0x605b, 0x6d99, 0x440, 0x3ecc, 0x6b8d, 0xa173, 0x1, 0x1);
        gbc.writeMem(0x605b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6d99);
        EXPECT(gbc.pc(), 0x605d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 021F
        gbc.setState(0x5026, 0x7cb8, 0x4db0, 0xd04b, 0x4d9c, 0x2456, 0x0, 0x1);
        gbc.writeMem(0x5026, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7cb8);
        EXPECT(gbc.pc(), 0x5028);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0220
        gbc.setState(0x440f, 0x6a7b, 0xe810, 0xe494, 0xf3a1, 0x45c5, 0x1, 0x0);
        gbc.writeMem(0x440f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6a7b);
        EXPECT(gbc.pc(), 0x4411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0221
        gbc.setState(0xd29e, 0x7a01, 0x4f20, 0xd928, 0xb6fc, 0xa944, 0x0, 0x1);
        gbc.writeMem(0xd29e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7a01);
        EXPECT(gbc.pc(), 0xd2a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd29e), 0xcb);
        EXPECT(gbc.readMem(0xd29f), 0xd7);
        // CB D7 0222
        gbc.setState(0x40d2, 0x1f5a, 0x4760, 0x4e41, 0x61b5, 0xdcbb, 0x1, 0x1);
        gbc.writeMem(0x40d2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1f5a);
        EXPECT(gbc.pc(), 0x40d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0223
        gbc.setState(0xbf29, 0xd415, 0x85f0, 0xa19f, 0xdf51, 0xbcc0, 0x1, 0x1);
        gbc.writeMem(0xbf29, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd415);
        EXPECT(gbc.pc(), 0xbf2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf29), 0xcb);
        EXPECT(gbc.readMem(0xbf2a), 0xd7);
        // CB D7 0224
        gbc.setState(0x5b7f, 0x45c2, 0x3050, 0xf104, 0xb895, 0xa761, 0x1, 0x1);
        gbc.writeMem(0x5b7f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x45c2);
        EXPECT(gbc.pc(), 0x5b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0225
        gbc.setState(0x93da, 0xe862, 0xfe0, 0x4d10, 0x8e3c, 0x749b, 0x1, 0x1);
        gbc.writeMem(0x93da, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe862);
        EXPECT(gbc.pc(), 0x93dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93da), 0xcb);
        EXPECT(gbc.readMem(0x93db), 0xd7);
        // CB D7 0226
        gbc.setState(0x4ed4, 0x5810, 0x6750, 0xb60e, 0xc36d, 0x75bb, 0x0, 0x1);
        gbc.writeMem(0x4ed4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5810);
        EXPECT(gbc.pc(), 0x4ed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0227
        gbc.setState(0xe4a1, 0xcb53, 0x7ed0, 0x271d, 0xd83e, 0x70e2, 0x0, 0x0);
        gbc.writeMem(0xe4a1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcb53);
        EXPECT(gbc.pc(), 0xe4a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a1), 0xcb);
        EXPECT(gbc.readMem(0xe4a2), 0xd7);
        // CB D7 0228
        gbc.setState(0xd365, 0xbf50, 0x7ee0, 0xb1a5, 0x3471, 0xc2f5, 0x0, 0x0);
        gbc.writeMem(0xd365, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbf50);
        EXPECT(gbc.pc(), 0xd367);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd365), 0xcb);
        EXPECT(gbc.readMem(0xd366), 0xd7);
        // CB D7 0229
        gbc.setState(0x6429, 0x1d77, 0x5df0, 0xdad0, 0x4f86, 0x9764, 0x1, 0x0);
        gbc.writeMem(0x6429, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1d77);
        EXPECT(gbc.pc(), 0x642b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 022A
        gbc.setState(0x2ab4, 0x491b, 0x2e70, 0x66d2, 0x2e4e, 0xf9f, 0x0, 0x0);
        gbc.writeMem(0x2ab4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x491b);
        EXPECT(gbc.pc(), 0x2ab6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 022B
        gbc.setState(0xaa1d, 0x8151, 0x87c0, 0xda08, 0xd4b5, 0x6e0c, 0x0, 0x0);
        gbc.writeMem(0xaa1d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8151);
        EXPECT(gbc.pc(), 0xaa1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa1d), 0xcb);
        EXPECT(gbc.readMem(0xaa1e), 0xd7);
        // CB D7 022C
        gbc.setState(0xda30, 0x51a1, 0x24a0, 0xc5d0, 0xe331, 0x8778, 0x1, 0x0);
        gbc.writeMem(0xda30, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x51a1);
        EXPECT(gbc.pc(), 0xda32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda30), 0xcb);
        EXPECT(gbc.readMem(0xda31), 0xd7);
        // CB D7 022D
        gbc.setState(0xd058, 0x45b, 0xf540, 0x79a5, 0x53a8, 0xe56e, 0x0, 0x1);
        gbc.writeMem(0xd058, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x45b);
        EXPECT(gbc.pc(), 0xd05a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd058), 0xcb);
        EXPECT(gbc.readMem(0xd059), 0xd7);
        // CB D7 022E
        gbc.setState(0xc588, 0x63c6, 0x56b0, 0xf550, 0x52c4, 0x598b, 0x1, 0x1);
        gbc.writeMem(0xc588, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x63c6);
        EXPECT(gbc.pc(), 0xc58a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc588), 0xcb);
        EXPECT(gbc.readMem(0xc589), 0xd7);
        // CB D7 022F
        gbc.setState(0x36ee, 0xc9a0, 0x90e0, 0xfc11, 0x14b7, 0x34f0, 0x1, 0x1);
        gbc.writeMem(0x36ee, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc9a0);
        EXPECT(gbc.pc(), 0x36f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0230
        gbc.setState(0x27b6, 0xa987, 0xeb20, 0x2376, 0xc91f, 0xa49c, 0x1, 0x1);
        gbc.writeMem(0x27b6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa987);
        EXPECT(gbc.pc(), 0x27b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0232
        gbc.setState(0x5d8f, 0x63a7, 0xeb40, 0xb883, 0xdb9a, 0xfeae, 0x0, 0x0);
        gbc.writeMem(0x5d8f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x63a7);
        EXPECT(gbc.pc(), 0x5d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0233
        gbc.setState(0x996a, 0xf522, 0xe9e0, 0x2376, 0x6d33, 0x91c1, 0x0, 0x0);
        gbc.writeMem(0x996a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xf522);
        EXPECT(gbc.pc(), 0x996c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x996a), 0xcb);
        EXPECT(gbc.readMem(0x996b), 0xd7);
        // CB D7 0235
        gbc.setState(0xad2c, 0xad96, 0x1cd0, 0x25d0, 0xb937, 0x1350, 0x0, 0x0);
        gbc.writeMem(0xad2c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xad96);
        EXPECT(gbc.pc(), 0xad2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad2c), 0xcb);
        EXPECT(gbc.readMem(0xad2d), 0xd7);
        // CB D7 0236
        gbc.setState(0xc970, 0xd290, 0x66e0, 0xf1f6, 0xb940, 0x833f, 0x0, 0x0);
        gbc.writeMem(0xc970, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd290);
        EXPECT(gbc.pc(), 0xc972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc970), 0xcb);
        EXPECT(gbc.readMem(0xc971), 0xd7);
        // CB D7 0237
        gbc.setState(0x308b, 0x1978, 0xbe40, 0x9663, 0x31cb, 0xa4d0, 0x0, 0x1);
        gbc.writeMem(0x308b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1978);
        EXPECT(gbc.pc(), 0x308d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0238
        gbc.setState(0x59d3, 0x44a7, 0x5730, 0xfbf7, 0x1045, 0x6ca1, 0x1, 0x0);
        gbc.writeMem(0x59d3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x44a7);
        EXPECT(gbc.pc(), 0x59d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0239
        gbc.setState(0xe3a4, 0x499e, 0x3040, 0xa5e9, 0x3cb1, 0xa7bd, 0x1, 0x0);
        gbc.writeMem(0xe3a4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x499e);
        EXPECT(gbc.pc(), 0xe3a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a4), 0xcb);
        EXPECT(gbc.readMem(0xe3a5), 0xd7);
        // CB D7 023A
        gbc.setState(0x7697, 0x72f5, 0x8320, 0xdfbf, 0x27e4, 0x7a7e, 0x1, 0x0);
        gbc.writeMem(0x7697, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x72f5);
        EXPECT(gbc.pc(), 0x7699);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 023B
        gbc.setState(0x207, 0x6c06, 0x3e00, 0xb1e7, 0x813d, 0xa591, 0x0, 0x1);
        gbc.writeMem(0x207, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6c06);
        EXPECT(gbc.pc(), 0x209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 023C
        gbc.setState(0xde6d, 0xac49, 0xd370, 0x4dab, 0x7685, 0x4fff, 0x1, 0x0);
        gbc.writeMem(0xde6d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xac49);
        EXPECT(gbc.pc(), 0xde6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde6d), 0xcb);
        EXPECT(gbc.readMem(0xde6e), 0xd7);
        // CB D7 023D
        gbc.setState(0x2c07, 0xac1a, 0xeea0, 0xb460, 0xd739, 0x992b, 0x0, 0x0);
        gbc.writeMem(0x2c07, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xac1a);
        EXPECT(gbc.pc(), 0x2c09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 023F
        gbc.setState(0xb46f, 0x1079, 0x31d0, 0xfa9a, 0xcf77, 0x1af8, 0x0, 0x0);
        gbc.writeMem(0xb46f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1079);
        EXPECT(gbc.pc(), 0xb471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb46f), 0xcb);
        EXPECT(gbc.readMem(0xb470), 0xd7);
        // CB D7 0240
        gbc.setState(0xafc2, 0xc429, 0xdce0, 0x28e4, 0x5c75, 0xe01e, 0x1, 0x1);
        gbc.writeMem(0xafc2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc429);
        EXPECT(gbc.pc(), 0xafc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc2), 0xcb);
        EXPECT(gbc.readMem(0xafc3), 0xd7);
        // CB D7 0241
        gbc.setState(0x8197, 0xd8d8, 0x60e0, 0x4d54, 0x16fe, 0xb893, 0x0, 0x1);
        gbc.writeMem(0x8197, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd8d8);
        EXPECT(gbc.pc(), 0x8199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8197), 0xcb);
        EXPECT(gbc.readMem(0x8198), 0xd7);
        // CB D7 0242
        gbc.setState(0xc43e, 0xc8b1, 0x82a0, 0xb74b, 0xe701, 0x38b7, 0x0, 0x1);
        gbc.writeMem(0xc43e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc8b1);
        EXPECT(gbc.pc(), 0xc440);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc43e), 0xcb);
        EXPECT(gbc.readMem(0xc43f), 0xd7);
        // CB D7 0243
        gbc.setState(0xc9b6, 0x6dc4, 0x50c0, 0x1144, 0x906e, 0xa3dd, 0x1, 0x1);
        gbc.writeMem(0xc9b6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6dc4);
        EXPECT(gbc.pc(), 0xc9b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b6), 0xcb);
        EXPECT(gbc.readMem(0xc9b7), 0xd7);
        // CB D7 0244
        gbc.setState(0x3a2a, 0x893a, 0x3a00, 0x1b96, 0xef8d, 0x9c65, 0x1, 0x1);
        gbc.writeMem(0x3a2a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x893a);
        EXPECT(gbc.pc(), 0x3a2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0245
        gbc.setState(0x2e41, 0x59ab, 0x82b0, 0xbb20, 0x7958, 0x7fdd, 0x0, 0x0);
        gbc.writeMem(0x2e41, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x59ab);
        EXPECT(gbc.pc(), 0x2e43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0246
        gbc.setState(0xd735, 0xa6c6, 0x25d0, 0xda1c, 0xcf31, 0x4802, 0x1, 0x0);
        gbc.writeMem(0xd735, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa6c6);
        EXPECT(gbc.pc(), 0xd737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd735), 0xcb);
        EXPECT(gbc.readMem(0xd736), 0xd7);
        // CB D7 0247
        gbc.setState(0x4ba, 0x97e1, 0xf800, 0x1110, 0x8859, 0x4493, 0x0, 0x0);
        gbc.writeMem(0x4ba, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x97e1);
        EXPECT(gbc.pc(), 0x4bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0248
        gbc.setState(0x23db, 0x11eb, 0x4a20, 0x3ade, 0xa300, 0x5356, 0x1, 0x0);
        gbc.writeMem(0x23db, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x11eb);
        EXPECT(gbc.pc(), 0x23dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0249
        gbc.setState(0xe803, 0x474b, 0x6850, 0xac16, 0x9ab6, 0x58ae, 0x0, 0x1);
        gbc.writeMem(0xe803, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x474b);
        EXPECT(gbc.pc(), 0xe805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe803), 0xcb);
        EXPECT(gbc.readMem(0xe804), 0xd7);
        // CB D7 024A
        gbc.setState(0x4f, 0x2d0, 0x2270, 0xffa5, 0x51a, 0x87aa, 0x1, 0x0);
        gbc.writeMem(0x4f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x2d0);
        EXPECT(gbc.pc(), 0x51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 024B
        gbc.setState(0x78e5, 0x5d85, 0xd670, 0x64bc, 0x2ffe, 0xe353, 0x0, 0x0);
        gbc.writeMem(0x78e5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5d85);
        EXPECT(gbc.pc(), 0x78e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 024C
        gbc.setState(0x8372, 0xaa16, 0x8060, 0x77f7, 0x8950, 0x892a, 0x1, 0x0);
        gbc.writeMem(0x8372, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xaa16);
        EXPECT(gbc.pc(), 0x8374);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8372), 0xcb);
        EXPECT(gbc.readMem(0x8373), 0xd7);
        // CB D7 024D
        gbc.setState(0xa32c, 0xeaa6, 0x5b90, 0xe408, 0x3295, 0xe2f8, 0x1, 0x1);
        gbc.writeMem(0xa32c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xeaa6);
        EXPECT(gbc.pc(), 0xa32e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa32c), 0xcb);
        EXPECT(gbc.readMem(0xa32d), 0xd7);
        // CB D7 024E
        gbc.setState(0x6854, 0x8678, 0x29b0, 0x3053, 0x9425, 0x6d49, 0x0, 0x1);
        gbc.writeMem(0x6854, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8678);
        EXPECT(gbc.pc(), 0x6856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 024F
        gbc.setState(0x85a9, 0x2953, 0x90b0, 0xf782, 0x529c, 0x44c0, 0x1, 0x0);
        gbc.writeMem(0x85a9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2953);
        EXPECT(gbc.pc(), 0x85ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85a9), 0xcb);
        EXPECT(gbc.readMem(0x85aa), 0xd7);
        // CB D7 0250
        gbc.setState(0xd22c, 0xae18, 0x38c0, 0x97f3, 0xe38e, 0x77de, 0x1, 0x0);
        gbc.writeMem(0xd22c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xae18);
        EXPECT(gbc.pc(), 0xd22e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd22c), 0xcb);
        EXPECT(gbc.readMem(0xd22d), 0xd7);
        // CB D7 0251
        gbc.setState(0xe0bf, 0x4acf, 0xa70, 0xb7d4, 0xdb2a, 0x6dc4, 0x0, 0x1);
        gbc.writeMem(0xe0bf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4acf);
        EXPECT(gbc.pc(), 0xe0c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0bf), 0xcb);
        EXPECT(gbc.readMem(0xe0c0), 0xd7);
        // CB D7 0252
        gbc.setState(0xb0f, 0x29f9, 0xf960, 0x7f59, 0xdd4d, 0x1c9a, 0x0, 0x0);
        gbc.writeMem(0xb0f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x29f9);
        EXPECT(gbc.pc(), 0xb11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0253
        gbc.setState(0xbea4, 0x568b, 0x1180, 0xbbd, 0x95ef, 0xed75, 0x1, 0x1);
        gbc.writeMem(0xbea4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x568b);
        EXPECT(gbc.pc(), 0xbea6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea4), 0xcb);
        EXPECT(gbc.readMem(0xbea5), 0xd7);
        // CB D7 0254
        gbc.setState(0xe48c, 0xec6d, 0xf760, 0xa160, 0xbda7, 0x32c6, 0x0, 0x1);
        gbc.writeMem(0xe48c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xec6d);
        EXPECT(gbc.pc(), 0xe48e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe48c), 0xcb);
        EXPECT(gbc.readMem(0xe48d), 0xd7);
        // CB D7 0255
        gbc.setState(0x2d8b, 0x27ca, 0x8070, 0x3c40, 0x9d81, 0x5fcf, 0x0, 0x0);
        gbc.writeMem(0x2d8b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x27ca);
        EXPECT(gbc.pc(), 0x2d8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0256
        gbc.setState(0xa15f, 0xa3c8, 0x2200, 0xe36a, 0xb83, 0x1e55, 0x1, 0x0);
        gbc.writeMem(0xa15f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa3c8);
        EXPECT(gbc.pc(), 0xa161);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15f), 0xcb);
        EXPECT(gbc.readMem(0xa160), 0xd7);
        // CB D7 0257
        gbc.setState(0xc2e, 0xd15b, 0x9680, 0xf7de, 0x2b04, 0x418, 0x0, 0x1);
        gbc.writeMem(0xc2e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd15b);
        EXPECT(gbc.pc(), 0xc30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0258
        gbc.setState(0xaeba, 0xd978, 0x4bf0, 0x843d, 0x6932, 0xbefa, 0x0, 0x1);
        gbc.writeMem(0xaeba, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd978);
        EXPECT(gbc.pc(), 0xaebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeba), 0xcb);
        EXPECT(gbc.readMem(0xaebb), 0xd7);
        // CB D7 0259
        gbc.setState(0xe6ea, 0x76a5, 0x7670, 0x5dbd, 0x8eda, 0x741, 0x0, 0x0);
        gbc.writeMem(0xe6ea, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x76a5);
        EXPECT(gbc.pc(), 0xe6ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6ea), 0xcb);
        EXPECT(gbc.readMem(0xe6eb), 0xd7);
        // CB D7 025A
        gbc.setState(0xb28b, 0xa426, 0xb4e0, 0x136f, 0x5fb6, 0xbed, 0x1, 0x1);
        gbc.writeMem(0xb28b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa426);
        EXPECT(gbc.pc(), 0xb28d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28b), 0xcb);
        EXPECT(gbc.readMem(0xb28c), 0xd7);
        // CB D7 025B
        gbc.setState(0xb21c, 0x4ebd, 0x7790, 0x2485, 0xc276, 0x786c, 0x0, 0x0);
        gbc.writeMem(0xb21c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4ebd);
        EXPECT(gbc.pc(), 0xb21e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb21c), 0xcb);
        EXPECT(gbc.readMem(0xb21d), 0xd7);
        // CB D7 025D
        gbc.setState(0x5cb8, 0x16a7, 0x5e0, 0xd072, 0x9b94, 0xf08, 0x1, 0x1);
        gbc.writeMem(0x5cb8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x16a7);
        EXPECT(gbc.pc(), 0x5cba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 025E
        gbc.setState(0x1a20, 0x18a0, 0xdbd0, 0x2da4, 0x38f2, 0x9952, 0x1, 0x0);
        gbc.writeMem(0x1a20, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x18a0);
        EXPECT(gbc.pc(), 0x1a22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0260
        gbc.setState(0x635e, 0xa625, 0x2ba0, 0xa9d8, 0x223b, 0xf6e, 0x1, 0x0);
        gbc.writeMem(0x635e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa625);
        EXPECT(gbc.pc(), 0x6360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0261
        gbc.setState(0x207c, 0x83f6, 0x70f0, 0x3cc0, 0xa36c, 0xabad, 0x1, 0x0);
        gbc.writeMem(0x207c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x83f6);
        EXPECT(gbc.pc(), 0x207e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0262
        gbc.setState(0x879b, 0xbd36, 0x8530, 0x9ac, 0x7d51, 0x42ac, 0x1, 0x1);
        gbc.writeMem(0x879b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xbd36);
        EXPECT(gbc.pc(), 0x879d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x879b), 0xcb);
        EXPECT(gbc.readMem(0x879c), 0xd7);
        // CB D7 0263
        gbc.setState(0x7de7, 0x6790, 0x16f0, 0x6bff, 0x3ff1, 0x2961, 0x0, 0x1);
        gbc.writeMem(0x7de7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6790);
        EXPECT(gbc.pc(), 0x7de9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0264
        gbc.setState(0xc706, 0x4fa2, 0x10b0, 0x4346, 0xea99, 0x573a, 0x0, 0x1);
        gbc.writeMem(0xc706, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4fa2);
        EXPECT(gbc.pc(), 0xc708);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc706), 0xcb);
        EXPECT(gbc.readMem(0xc707), 0xd7);
        // CB D7 0265
        gbc.setState(0x4be7, 0x3f22, 0x3180, 0xf1ea, 0x2d5e, 0x4bc9, 0x1, 0x0);
        gbc.writeMem(0x4be7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3f22);
        EXPECT(gbc.pc(), 0x4be9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0266
        gbc.setState(0x5b3c, 0x3aaf, 0x7db0, 0xc36c, 0x5997, 0xefa0, 0x1, 0x0);
        gbc.writeMem(0x5b3c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3aaf);
        EXPECT(gbc.pc(), 0x5b3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0267
        gbc.setState(0x46c9, 0xa176, 0x2ee0, 0xfaf6, 0xa21f, 0x1736, 0x1, 0x0);
        gbc.writeMem(0x46c9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa176);
        EXPECT(gbc.pc(), 0x46cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0268
        gbc.setState(0x62d0, 0xb071, 0x9720, 0x212b, 0x45b3, 0x54d1, 0x0, 0x0);
        gbc.writeMem(0x62d0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb071);
        EXPECT(gbc.pc(), 0x62d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0269
        gbc.setState(0x3ed4, 0x2afe, 0xe0b0, 0xd27c, 0x3f42, 0x495, 0x1, 0x0);
        gbc.writeMem(0x3ed4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2afe);
        EXPECT(gbc.pc(), 0x3ed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 026A
        gbc.setState(0xe5ba, 0x2d6e, 0xfc20, 0xeb60, 0xc0f5, 0xe239, 0x1, 0x0);
        gbc.writeMem(0xe5ba, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2d6e);
        EXPECT(gbc.pc(), 0xe5bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ba), 0xcb);
        EXPECT(gbc.readMem(0xe5bb), 0xd7);
        // CB D7 026B
        gbc.setState(0x5bd5, 0xdef8, 0x26e0, 0x1080, 0x2c52, 0x574e, 0x1, 0x0);
        gbc.writeMem(0x5bd5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xdef8);
        EXPECT(gbc.pc(), 0x5bd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 026C
        gbc.setState(0x22c9, 0x72d9, 0xfaf0, 0x82bd, 0x6224, 0xf15c, 0x1, 0x0);
        gbc.writeMem(0x22c9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x72d9);
        EXPECT(gbc.pc(), 0x22cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 026D
        gbc.setState(0x80a6, 0x3149, 0x87a0, 0xc4, 0x9186, 0xbd73, 0x0, 0x0);
        gbc.writeMem(0x80a6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3149);
        EXPECT(gbc.pc(), 0x80a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a6), 0xcb);
        EXPECT(gbc.readMem(0x80a7), 0xd7);
        // CB D7 026E
        gbc.setState(0x2f26, 0x679, 0x1e30, 0xcf44, 0x405a, 0x290f, 0x0, 0x1);
        gbc.writeMem(0x2f26, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x679);
        EXPECT(gbc.pc(), 0x2f28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 026F
        gbc.setState(0x9dc1, 0x9c5, 0xe830, 0xab97, 0x9741, 0xe152, 0x0, 0x0);
        gbc.writeMem(0x9dc1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9c5);
        EXPECT(gbc.pc(), 0x9dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc1), 0xcb);
        EXPECT(gbc.readMem(0x9dc2), 0xd7);
        // CB D7 0270
        gbc.setState(0xb66, 0x645c, 0x7df0, 0x8f38, 0x6159, 0x7bdc, 0x0, 0x0);
        gbc.writeMem(0xb66, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x645c);
        EXPECT(gbc.pc(), 0xb68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0271
        gbc.setState(0x6085, 0xf2b9, 0x960, 0xbd2c, 0xfc93, 0x8d90, 0x1, 0x0);
        gbc.writeMem(0x6085, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf2b9);
        EXPECT(gbc.pc(), 0x6087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0272
        gbc.setState(0x926e, 0x9d0c, 0x790, 0xe555, 0x986f, 0x9454, 0x1, 0x0);
        gbc.writeMem(0x926e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9d0c);
        EXPECT(gbc.pc(), 0x9270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x926e), 0xcb);
        EXPECT(gbc.readMem(0x926f), 0xd7);
        // CB D7 0273
        gbc.setState(0x67c4, 0x97f0, 0xccb0, 0x53c7, 0xc120, 0xab44, 0x0, 0x1);
        gbc.writeMem(0x67c4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x97f0);
        EXPECT(gbc.pc(), 0x67c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0274
        gbc.setState(0xe7df, 0xd4f4, 0xb850, 0xba89, 0x3425, 0x8a4a, 0x0, 0x1);
        gbc.writeMem(0xe7df, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd4f4);
        EXPECT(gbc.pc(), 0xe7e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7df), 0xcb);
        EXPECT(gbc.readMem(0xe7e0), 0xd7);
        // CB D7 0275
        gbc.setState(0xad26, 0xd2db, 0x19c0, 0x49b3, 0x78b2, 0xe613, 0x0, 0x0);
        gbc.writeMem(0xad26, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd2db);
        EXPECT(gbc.pc(), 0xad28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad26), 0xcb);
        EXPECT(gbc.readMem(0xad27), 0xd7);
        // CB D7 0276
        gbc.setState(0x6a, 0x27ad, 0xe760, 0x3fec, 0x5c5f, 0xa4ed, 0x1, 0x0);
        gbc.writeMem(0x6a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x27ad);
        EXPECT(gbc.pc(), 0x6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0277
        gbc.setState(0x537e, 0xc224, 0xe1d0, 0xf065, 0x6c45, 0xb1f7, 0x1, 0x0);
        gbc.writeMem(0x537e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc224);
        EXPECT(gbc.pc(), 0x5380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0278
        gbc.setState(0x6a5b, 0x9f60, 0x4a40, 0x65c8, 0x26a8, 0xf071, 0x1, 0x1);
        gbc.writeMem(0x6a5b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9f60);
        EXPECT(gbc.pc(), 0x6a5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0279
        gbc.setState(0xdc1, 0x8fd7, 0xbb90, 0x2d5d, 0x4846, 0xdead, 0x1, 0x0);
        gbc.writeMem(0xdc1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8fd7);
        EXPECT(gbc.pc(), 0xdc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 027A
        gbc.setState(0xd746, 0xa668, 0x2600, 0x7adb, 0x248c, 0x1085, 0x1, 0x0);
        gbc.writeMem(0xd746, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa668);
        EXPECT(gbc.pc(), 0xd748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd746), 0xcb);
        EXPECT(gbc.readMem(0xd747), 0xd7);
        // CB D7 027B
        gbc.setState(0x2dd9, 0x84e2, 0xa640, 0x9b59, 0x24b6, 0x123d, 0x1, 0x0);
        gbc.writeMem(0x2dd9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x84e2);
        EXPECT(gbc.pc(), 0x2ddb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 027C
        gbc.setState(0x84b7, 0xa8db, 0x9ec0, 0x96f4, 0x8306, 0x727c, 0x1, 0x0);
        gbc.writeMem(0x84b7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa8db);
        EXPECT(gbc.pc(), 0x84b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b7), 0xcb);
        EXPECT(gbc.readMem(0x84b8), 0xd7);
        // CB D7 027D
        gbc.setState(0x244, 0xc21e, 0xe40, 0x2d5b, 0x3c56, 0xae92, 0x1, 0x1);
        gbc.writeMem(0x244, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc21e);
        EXPECT(gbc.pc(), 0x246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 027E
        gbc.setState(0xcdd9, 0xe3b3, 0xd410, 0x32b, 0x777c, 0xe78f, 0x1, 0x1);
        gbc.writeMem(0xcdd9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe3b3);
        EXPECT(gbc.pc(), 0xcddb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdd9), 0xcb);
        EXPECT(gbc.readMem(0xcdda), 0xd7);
        // CB D7 0280
        gbc.setState(0x42ae, 0xc6b1, 0xb10, 0x3182, 0xd211, 0x6fa, 0x1, 0x1);
        gbc.writeMem(0x42ae, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc6b1);
        EXPECT(gbc.pc(), 0x42b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0281
        gbc.setState(0xe46a, 0x58f6, 0xcec0, 0xa880, 0x74c5, 0xbcd6, 0x1, 0x0);
        gbc.writeMem(0xe46a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x58f6);
        EXPECT(gbc.pc(), 0xe46c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46a), 0xcb);
        EXPECT(gbc.readMem(0xe46b), 0xd7);
        // CB D7 0282
        gbc.setState(0x3af4, 0xe2f5, 0xc3d0, 0xa07a, 0xa9ca, 0x77c, 0x1, 0x1);
        gbc.writeMem(0x3af4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe2f5);
        EXPECT(gbc.pc(), 0x3af6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0283
        gbc.setState(0x6ebc, 0x4561, 0x6f10, 0x845e, 0xa49b, 0xa739, 0x0, 0x0);
        gbc.writeMem(0x6ebc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4561);
        EXPECT(gbc.pc(), 0x6ebe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0284
        gbc.setState(0xda79, 0x3998, 0xd1b0, 0xd587, 0x3af0, 0xb5e7, 0x1, 0x0);
        gbc.writeMem(0xda79, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3998);
        EXPECT(gbc.pc(), 0xda7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda79), 0xcb);
        EXPECT(gbc.readMem(0xda7a), 0xd7);
        // CB D7 0285
        gbc.setState(0x97ed, 0x15bf, 0x670, 0x55b5, 0xab3b, 0x6ac6, 0x1, 0x1);
        gbc.writeMem(0x97ed, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x15bf);
        EXPECT(gbc.pc(), 0x97ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97ed), 0xcb);
        EXPECT(gbc.readMem(0x97ee), 0xd7);
        // CB D7 0286
        gbc.setState(0x3d83, 0x294c, 0x2ca0, 0x4388, 0x90c9, 0xb96c, 0x1, 0x0);
        gbc.writeMem(0x3d83, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x294c);
        EXPECT(gbc.pc(), 0x3d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0287
        gbc.setState(0xe51b, 0xe709, 0x7100, 0x6ebb, 0xfbc2, 0x96aa, 0x1, 0x1);
        gbc.writeMem(0xe51b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe709);
        EXPECT(gbc.pc(), 0xe51d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe51b), 0xcb);
        EXPECT(gbc.readMem(0xe51c), 0xd7);
        // CB D7 0288
        gbc.setState(0xb7ca, 0x3444, 0xbf50, 0x7d85, 0xce86, 0x2b10, 0x1, 0x0);
        gbc.writeMem(0xb7ca, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3444);
        EXPECT(gbc.pc(), 0xb7cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ca), 0xcb);
        EXPECT(gbc.readMem(0xb7cb), 0xd7);
        // CB D7 028A
        gbc.setState(0xce05, 0x1484, 0x2f20, 0xcfe5, 0xaed8, 0x7314, 0x0, 0x0);
        gbc.writeMem(0xce05, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1484);
        EXPECT(gbc.pc(), 0xce07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce05), 0xcb);
        EXPECT(gbc.readMem(0xce06), 0xd7);
        // CB D7 028B
        gbc.setState(0x47d9, 0xfbe, 0xb90, 0xb4fe, 0x3382, 0x11e2, 0x0, 0x1);
        gbc.writeMem(0x47d9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xfbe);
        EXPECT(gbc.pc(), 0x47db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 028D
        gbc.setState(0xaf26, 0xd2ab, 0x6280, 0x4961, 0x4a2d, 0xa90, 0x1, 0x1);
        gbc.writeMem(0xaf26, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd2ab);
        EXPECT(gbc.pc(), 0xaf28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf26), 0xcb);
        EXPECT(gbc.readMem(0xaf27), 0xd7);
        // CB D7 028E
        gbc.setState(0x9a99, 0xbc4, 0x9580, 0x1658, 0xff37, 0x29dd, 0x1, 0x1);
        gbc.writeMem(0x9a99, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xbc4);
        EXPECT(gbc.pc(), 0x9a9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a99), 0xcb);
        EXPECT(gbc.readMem(0x9a9a), 0xd7);
        // CB D7 028F
        gbc.setState(0x108e, 0x14d1, 0x4c80, 0x8be2, 0xa719, 0x967a, 0x1, 0x1);
        gbc.writeMem(0x108e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x14d1);
        EXPECT(gbc.pc(), 0x1090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0290
        gbc.setState(0x8bd, 0x3d3f, 0x5cc0, 0x610d, 0xf38, 0xa9be, 0x1, 0x0);
        gbc.writeMem(0x8bd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3d3f);
        EXPECT(gbc.pc(), 0x8bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0291
        gbc.setState(0x9633, 0xa4cb, 0xca70, 0x9f82, 0xc929, 0xb880, 0x0, 0x1);
        gbc.writeMem(0x9633, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa4cb);
        EXPECT(gbc.pc(), 0x9635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9633), 0xcb);
        EXPECT(gbc.readMem(0x9634), 0xd7);
        // CB D7 0292
        gbc.setState(0x3fef, 0x2147, 0xbe0, 0x6804, 0xeca5, 0x23ed, 0x1, 0x1);
        gbc.writeMem(0x3fef, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2147);
        EXPECT(gbc.pc(), 0x3ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0294
        gbc.setState(0x312, 0x61e4, 0x1070, 0xa546, 0x8f93, 0x775, 0x0, 0x1);
        gbc.writeMem(0x312, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x61e4);
        EXPECT(gbc.pc(), 0x314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0295
        gbc.setState(0x6270, 0x3f9f, 0xc510, 0x36f1, 0x3eb6, 0x914c, 0x0, 0x0);
        gbc.writeMem(0x6270, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3f9f);
        EXPECT(gbc.pc(), 0x6272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0296
        gbc.setState(0xd875, 0x1ceb, 0x5000, 0xa383, 0xe7e8, 0xce73, 0x1, 0x0);
        gbc.writeMem(0xd875, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1ceb);
        EXPECT(gbc.pc(), 0xd877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd875), 0xcb);
        EXPECT(gbc.readMem(0xd876), 0xd7);
        // CB D7 0297
        gbc.setState(0x4d41, 0x6a7b, 0x91f0, 0xf36e, 0x917f, 0x4a5c, 0x0, 0x0);
        gbc.writeMem(0x4d41, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6a7b);
        EXPECT(gbc.pc(), 0x4d43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0298
        gbc.setState(0xb4ec, 0xf436, 0x9810, 0x97d6, 0xa806, 0x38cc, 0x0, 0x1);
        gbc.writeMem(0xb4ec, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf436);
        EXPECT(gbc.pc(), 0xb4ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4ec), 0xcb);
        EXPECT(gbc.readMem(0xb4ed), 0xd7);
        // CB D7 0299
        gbc.setState(0x2175, 0x329c, 0x5a20, 0xbb3e, 0x8fd5, 0x1acd, 0x1, 0x0);
        gbc.writeMem(0x2175, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x329c);
        EXPECT(gbc.pc(), 0x2177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 029A
        gbc.setState(0xe82e, 0x66bc, 0xfda0, 0x2cdc, 0x43cb, 0xed73, 0x1, 0x1);
        gbc.writeMem(0xe82e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x66bc);
        EXPECT(gbc.pc(), 0xe830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe82e), 0xcb);
        EXPECT(gbc.readMem(0xe82f), 0xd7);
        // CB D7 029B
        gbc.setState(0x36ed, 0xfd3f, 0x800, 0xd8f7, 0x7715, 0xc09e, 0x0, 0x1);
        gbc.writeMem(0x36ed, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xfd3f);
        EXPECT(gbc.pc(), 0x36ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 029C
        gbc.setState(0x1c16, 0x4295, 0x71e0, 0xbd52, 0x263e, 0xd7ab, 0x1, 0x1);
        gbc.writeMem(0x1c16, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4295);
        EXPECT(gbc.pc(), 0x1c18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 029D
        gbc.setState(0xc3b0, 0xa6a4, 0x35c0, 0x66f9, 0x1a40, 0x6464, 0x0, 0x0);
        gbc.writeMem(0xc3b0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa6a4);
        EXPECT(gbc.pc(), 0xc3b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b0), 0xcb);
        EXPECT(gbc.readMem(0xc3b1), 0xd7);
        // CB D7 029E
        gbc.setState(0x555e, 0x32cc, 0x57d0, 0x786f, 0x93f1, 0xa204, 0x1, 0x0);
        gbc.writeMem(0x555e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x32cc);
        EXPECT(gbc.pc(), 0x5560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 029F
        gbc.setState(0xcfe9, 0x20a0, 0xc7c0, 0x807e, 0x41da, 0x876c, 0x1, 0x1);
        gbc.writeMem(0xcfe9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x20a0);
        EXPECT(gbc.pc(), 0xcfeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe9), 0xcb);
        EXPECT(gbc.readMem(0xcfea), 0xd7);
        // CB D7 02A0
        gbc.setState(0xd3a, 0x2036, 0x3c40, 0xecc9, 0x281, 0x3196, 0x1, 0x1);
        gbc.writeMem(0xd3a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2036);
        EXPECT(gbc.pc(), 0xd3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02A1
        gbc.setState(0x54c, 0xef5c, 0xa550, 0x9521, 0x448, 0xaa60, 0x1, 0x0);
        gbc.writeMem(0x54c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xef5c);
        EXPECT(gbc.pc(), 0x54e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02A2
        gbc.setState(0xa6d0, 0x2ccb, 0x9df0, 0xcc5c, 0x519a, 0x223a, 0x0, 0x0);
        gbc.writeMem(0xa6d0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2ccb);
        EXPECT(gbc.pc(), 0xa6d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6d0), 0xcb);
        EXPECT(gbc.readMem(0xa6d1), 0xd7);
        // CB D7 02A4
        gbc.setState(0x7ae4, 0x9bf8, 0x71c0, 0x6c, 0x759f, 0xe41b, 0x0, 0x1);
        gbc.writeMem(0x7ae4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9bf8);
        EXPECT(gbc.pc(), 0x7ae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02A5
        gbc.setState(0xbc8a, 0x7759, 0xc660, 0xbcf5, 0xa13f, 0x4b6e, 0x0, 0x0);
        gbc.writeMem(0xbc8a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7759);
        EXPECT(gbc.pc(), 0xbc8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8a), 0xcb);
        EXPECT(gbc.readMem(0xbc8b), 0xd7);
        // CB D7 02A6
        gbc.setState(0x7c2a, 0xcd8, 0xee00, 0xbd43, 0x6fbe, 0x9128, 0x0, 0x0);
        gbc.writeMem(0x7c2a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xcd8);
        EXPECT(gbc.pc(), 0x7c2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02A7
        gbc.setState(0xb33, 0xf54f, 0x3b20, 0x9773, 0xd9d8, 0xb7d1, 0x0, 0x0);
        gbc.writeMem(0xb33, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf54f);
        EXPECT(gbc.pc(), 0xb35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02A8
        gbc.setState(0x7cc, 0xd308, 0xc090, 0x2eea, 0x9b7d, 0xf9ca, 0x1, 0x0);
        gbc.writeMem(0x7cc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd308);
        EXPECT(gbc.pc(), 0x7ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02A9
        gbc.setState(0xe20b, 0xfaf2, 0xe250, 0xde52, 0xa1e6, 0x8a81, 0x1, 0x0);
        gbc.writeMem(0xe20b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xfaf2);
        EXPECT(gbc.pc(), 0xe20d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe20b), 0xcb);
        EXPECT(gbc.readMem(0xe20c), 0xd7);
        // CB D7 02AA
        gbc.setState(0x4b75, 0xc5e0, 0x6c10, 0xa12b, 0x6547, 0x3089, 0x1, 0x1);
        gbc.writeMem(0x4b75, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc5e0);
        EXPECT(gbc.pc(), 0x4b77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02AB
        gbc.setState(0x4e59, 0x5adc, 0x3bf0, 0xcc89, 0x142f, 0xa11b, 0x1, 0x0);
        gbc.writeMem(0x4e59, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5adc);
        EXPECT(gbc.pc(), 0x4e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02AC
        gbc.setState(0x2d12, 0x399e, 0xc260, 0x2e95, 0x3ff, 0x2843, 0x1, 0x1);
        gbc.writeMem(0x2d12, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x399e);
        EXPECT(gbc.pc(), 0x2d14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02AD
        gbc.setState(0xbb0d, 0xf0a0, 0x65c0, 0x63ac, 0x6fa8, 0x144f, 0x1, 0x1);
        gbc.writeMem(0xbb0d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf0a0);
        EXPECT(gbc.pc(), 0xbb0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb0d), 0xcb);
        EXPECT(gbc.readMem(0xbb0e), 0xd7);
        // CB D7 02AE
        gbc.setState(0xdd51, 0xde69, 0xdcd0, 0x154b, 0xa02f, 0x93fa, 0x0, 0x1);
        gbc.writeMem(0xdd51, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xde69);
        EXPECT(gbc.pc(), 0xdd53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd51), 0xcb);
        EXPECT(gbc.readMem(0xdd52), 0xd7);
        // CB D7 02AF
        gbc.setState(0x7ae2, 0xef0e, 0x1e10, 0x2e5a, 0x9c0, 0x72b1, 0x0, 0x1);
        gbc.writeMem(0x7ae2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xef0e);
        EXPECT(gbc.pc(), 0x7ae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02B0
        gbc.setState(0xb30e, 0x9d9e, 0x7540, 0xa21d, 0x3b72, 0x6947, 0x1, 0x0);
        gbc.writeMem(0xb30e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9d9e);
        EXPECT(gbc.pc(), 0xb310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb30e), 0xcb);
        EXPECT(gbc.readMem(0xb30f), 0xd7);
        // CB D7 02B2
        gbc.setState(0x433b, 0x6e19, 0x2050, 0xfc9c, 0xbf0, 0x848f, 0x1, 0x1);
        gbc.writeMem(0x433b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6e19);
        EXPECT(gbc.pc(), 0x433d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02B3
        gbc.setState(0xabdf, 0x81be, 0x66d0, 0x790f, 0xdccc, 0xa82b, 0x1, 0x1);
        gbc.writeMem(0xabdf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x81be);
        EXPECT(gbc.pc(), 0xabe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabdf), 0xcb);
        EXPECT(gbc.readMem(0xabe0), 0xd7);
        // CB D7 02B4
        gbc.setState(0x35fe, 0xebca, 0xea60, 0x7a00, 0x37f, 0xbcf4, 0x1, 0x0);
        gbc.writeMem(0x35fe, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xebca);
        EXPECT(gbc.pc(), 0x3600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02B5
        gbc.setState(0x76b8, 0x9fe7, 0xbc30, 0xb8d4, 0xecb6, 0x3e3, 0x1, 0x1);
        gbc.writeMem(0x76b8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9fe7);
        EXPECT(gbc.pc(), 0x76ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02B6
        gbc.setState(0x9571, 0x598b, 0xf450, 0xe47d, 0xbea, 0xd0d7, 0x0, 0x0);
        gbc.writeMem(0x9571, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x598b);
        EXPECT(gbc.pc(), 0x9573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9571), 0xcb);
        EXPECT(gbc.readMem(0x9572), 0xd7);
        // CB D7 02B7
        gbc.setState(0x9019, 0xd2fa, 0xf940, 0xab10, 0x6535, 0xe5e8, 0x0, 0x0);
        gbc.writeMem(0x9019, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd2fa);
        EXPECT(gbc.pc(), 0x901b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9019), 0xcb);
        EXPECT(gbc.readMem(0x901a), 0xd7);
        // CB D7 02B8
        gbc.setState(0xbf35, 0x2d27, 0xb0b0, 0x926e, 0xe114, 0x136, 0x1, 0x1);
        gbc.writeMem(0xbf35, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2d27);
        EXPECT(gbc.pc(), 0xbf37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf35), 0xcb);
        EXPECT(gbc.readMem(0xbf36), 0xd7);
        // CB D7 02B9
        gbc.setState(0x2fa6, 0xd646, 0xc220, 0xf4e, 0xb77b, 0xb912, 0x0, 0x0);
        gbc.writeMem(0x2fa6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd646);
        EXPECT(gbc.pc(), 0x2fa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02BA
        gbc.setState(0x4816, 0x7277, 0xc560, 0x51d, 0x7ead, 0x7827, 0x0, 0x0);
        gbc.writeMem(0x4816, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7277);
        EXPECT(gbc.pc(), 0x4818);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02BB
        gbc.setState(0x11a6, 0x86e8, 0xf930, 0x6abf, 0xeda7, 0x4c83, 0x1, 0x0);
        gbc.writeMem(0x11a6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x86e8);
        EXPECT(gbc.pc(), 0x11a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02BC
        gbc.setState(0xd10f, 0xf5c3, 0x63f0, 0x6684, 0x73a5, 0xcce5, 0x0, 0x0);
        gbc.writeMem(0xd10f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf5c3);
        EXPECT(gbc.pc(), 0xd111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd10f), 0xcb);
        EXPECT(gbc.readMem(0xd110), 0xd7);
        // CB D7 02BD
        gbc.setState(0xc317, 0x5a23, 0x7710, 0x754b, 0x8794, 0x57f2, 0x1, 0x0);
        gbc.writeMem(0xc317, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5a23);
        EXPECT(gbc.pc(), 0xc319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc317), 0xcb);
        EXPECT(gbc.readMem(0xc318), 0xd7);
        // CB D7 02BE
        gbc.setState(0xe34e, 0x6aa3, 0x5ff0, 0x8525, 0x4b70, 0x82bc, 0x0, 0x1);
        gbc.writeMem(0xe34e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6aa3);
        EXPECT(gbc.pc(), 0xe350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe34e), 0xcb);
        EXPECT(gbc.readMem(0xe34f), 0xd7);
        // CB D7 02BF
        gbc.setState(0xad0b, 0xf1f, 0x93c0, 0xf3c5, 0x6b36, 0xdb70, 0x1, 0x0);
        gbc.writeMem(0xad0b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf1f);
        EXPECT(gbc.pc(), 0xad0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0b), 0xcb);
        EXPECT(gbc.readMem(0xad0c), 0xd7);
        // CB D7 02C0
        gbc.setState(0x8297, 0x4b79, 0xda00, 0x6f1c, 0x7c8e, 0xb980, 0x0, 0x0);
        gbc.writeMem(0x8297, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4b79);
        EXPECT(gbc.pc(), 0x8299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8297), 0xcb);
        EXPECT(gbc.readMem(0x8298), 0xd7);
        // CB D7 02C1
        gbc.setState(0x6669, 0xa0de, 0xa130, 0x9509, 0x3c6, 0xd7e8, 0x0, 0x1);
        gbc.writeMem(0x6669, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa0de);
        EXPECT(gbc.pc(), 0x666b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02C2
        gbc.setState(0x36ff, 0x913a, 0x90c0, 0x6905, 0xc2c0, 0x72c9, 0x0, 0x0);
        gbc.writeMem(0x36ff, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x913a);
        EXPECT(gbc.pc(), 0x3701);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02C3
        gbc.setState(0x6ab1, 0xd528, 0xb720, 0xf373, 0x6028, 0xc72b, 0x0, 0x1);
        gbc.writeMem(0x6ab1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd528);
        EXPECT(gbc.pc(), 0x6ab3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02C4
        gbc.setState(0x4c42, 0x37c8, 0x1560, 0x4eb8, 0x7fa8, 0x3a2e, 0x0, 0x1);
        gbc.writeMem(0x4c42, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x37c8);
        EXPECT(gbc.pc(), 0x4c44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02C5
        gbc.setState(0xbd5, 0x3ea3, 0xeef0, 0x9353, 0xc488, 0xfafe, 0x1, 0x1);
        gbc.writeMem(0xbd5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3ea3);
        EXPECT(gbc.pc(), 0xbd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02C6
        gbc.setState(0x79d8, 0x1712, 0xdcb0, 0x195d, 0x8151, 0x9a8c, 0x0, 0x1);
        gbc.writeMem(0x79d8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1712);
        EXPECT(gbc.pc(), 0x79da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02C7
        gbc.setState(0x2654, 0x77e3, 0xc400, 0xee43, 0x4b82, 0xa910, 0x1, 0x0);
        gbc.writeMem(0x2654, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x77e3);
        EXPECT(gbc.pc(), 0x2656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02C8
        gbc.setState(0x6ecc, 0x76d9, 0xd350, 0x2527, 0x71f8, 0xbe1a, 0x0, 0x0);
        gbc.writeMem(0x6ecc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x76d9);
        EXPECT(gbc.pc(), 0x6ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02C9
        gbc.setState(0xcaba, 0xca05, 0xb160, 0x52e2, 0x18f6, 0xf0c5, 0x1, 0x1);
        gbc.writeMem(0xcaba, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xca05);
        EXPECT(gbc.pc(), 0xcabc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaba), 0xcb);
        EXPECT(gbc.readMem(0xcabb), 0xd7);
        // CB D7 02CA
        gbc.setState(0xe7c7, 0x34b3, 0xf7b0, 0x2cc8, 0x133b, 0x8ed, 0x1, 0x1);
        gbc.writeMem(0xe7c7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x34b3);
        EXPECT(gbc.pc(), 0xe7c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7c7), 0xcb);
        EXPECT(gbc.readMem(0xe7c8), 0xd7);
        // CB D7 02CB
        gbc.setState(0xd07b, 0x3c25, 0xe6a0, 0xfa, 0x9f69, 0xb3d8, 0x1, 0x0);
        gbc.writeMem(0xd07b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3c25);
        EXPECT(gbc.pc(), 0xd07d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd07b), 0xcb);
        EXPECT(gbc.readMem(0xd07c), 0xd7);
        // CB D7 02CC
        gbc.setState(0xaf16, 0xd709, 0x2c40, 0xdd83, 0x2167, 0xff1a, 0x1, 0x1);
        gbc.writeMem(0xaf16, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd709);
        EXPECT(gbc.pc(), 0xaf18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf16), 0xcb);
        EXPECT(gbc.readMem(0xaf17), 0xd7);
        // CB D7 02CD
        gbc.setState(0x9e99, 0x71c5, 0xd4d0, 0xca03, 0x45fc, 0xcada, 0x1, 0x0);
        gbc.writeMem(0x9e99, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x71c5);
        EXPECT(gbc.pc(), 0x9e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e99), 0xcb);
        EXPECT(gbc.readMem(0x9e9a), 0xd7);
        // CB D7 02CE
        gbc.setState(0x2cad, 0xc7f9, 0x7b90, 0xa036, 0xaa97, 0x98a3, 0x1, 0x0);
        gbc.writeMem(0x2cad, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc7f9);
        EXPECT(gbc.pc(), 0x2caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02CF
        gbc.setState(0x302f, 0x80ff, 0x9e30, 0xb0e5, 0x8a33, 0xa383, 0x0, 0x1);
        gbc.writeMem(0x302f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x80ff);
        EXPECT(gbc.pc(), 0x3031);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02D0
        gbc.setState(0xdfbc, 0x61b5, 0x6130, 0xd2b4, 0xe54a, 0x25fd, 0x0, 0x1);
        gbc.writeMem(0xdfbc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x61b5);
        EXPECT(gbc.pc(), 0xdfbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfbc), 0xcb);
        EXPECT(gbc.readMem(0xdfbd), 0xd7);
        // CB D7 02D1
        gbc.setState(0x1d8a, 0x92b, 0x57f0, 0x4843, 0x6578, 0x6130, 0x1, 0x0);
        gbc.writeMem(0x1d8a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x92b);
        EXPECT(gbc.pc(), 0x1d8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02D2
        gbc.setState(0x24f4, 0x2255, 0x7410, 0xe664, 0x1874, 0x5c3e, 0x1, 0x0);
        gbc.writeMem(0x24f4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2255);
        EXPECT(gbc.pc(), 0x24f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02D3
        gbc.setState(0xa520, 0x5422, 0x1d90, 0x8fc6, 0x1c5d, 0x3125, 0x0, 0x0);
        gbc.writeMem(0xa520, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5422);
        EXPECT(gbc.pc(), 0xa522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa520), 0xcb);
        EXPECT(gbc.readMem(0xa521), 0xd7);
        // CB D7 02D4
        gbc.setState(0x5f76, 0xe8e8, 0x3ff0, 0xcbd4, 0xad22, 0x440, 0x0, 0x1);
        gbc.writeMem(0x5f76, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe8e8);
        EXPECT(gbc.pc(), 0x5f78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02D5
        gbc.setState(0x2ee2, 0xc371, 0xd820, 0x4b19, 0xa503, 0x537f, 0x1, 0x1);
        gbc.writeMem(0x2ee2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc371);
        EXPECT(gbc.pc(), 0x2ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02D6
        gbc.setState(0x71f8, 0xe908, 0x19c0, 0x9325, 0x75bc, 0xfb43, 0x0, 0x0);
        gbc.writeMem(0x71f8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe908);
        EXPECT(gbc.pc(), 0x71fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02D7
        gbc.setState(0x1b3c, 0x682c, 0x9ee0, 0x66e1, 0x4b32, 0x170f, 0x1, 0x1);
        gbc.writeMem(0x1b3c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x682c);
        EXPECT(gbc.pc(), 0x1b3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02D8
        gbc.setState(0xcb2f, 0x7fe4, 0x3870, 0x9cd8, 0xbd66, 0x82db, 0x0, 0x1);
        gbc.writeMem(0xcb2f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7fe4);
        EXPECT(gbc.pc(), 0xcb31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb2f), 0xcb);
        EXPECT(gbc.readMem(0xcb30), 0xd7);
        // CB D7 02D9
        gbc.setState(0x6306, 0x656, 0xb1c0, 0xca0, 0x973f, 0x91ed, 0x1, 0x0);
        gbc.writeMem(0x6306, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x656);
        EXPECT(gbc.pc(), 0x6308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02DA
        gbc.setState(0x870f, 0x184a, 0x9fa0, 0xbaa5, 0x3a88, 0x6a72, 0x0, 0x0);
        gbc.writeMem(0x870f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x184a);
        EXPECT(gbc.pc(), 0x8711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x870f), 0xcb);
        EXPECT(gbc.readMem(0x8710), 0xd7);
        // CB D7 02DB
        gbc.setState(0x983a, 0x5db0, 0x97f0, 0xddfb, 0x95e2, 0x26d7, 0x1, 0x0);
        gbc.writeMem(0x983a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5db0);
        EXPECT(gbc.pc(), 0x983c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x983a), 0xcb);
        EXPECT(gbc.readMem(0x983b), 0xd7);
        // CB D7 02DD
        gbc.setState(0x2435, 0x2e7b, 0xad20, 0x98ab, 0x70a3, 0x729a, 0x0, 0x0);
        gbc.writeMem(0x2435, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2e7b);
        EXPECT(gbc.pc(), 0x2437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02DE
        gbc.setState(0xbbef, 0x7940, 0x8dd0, 0x4762, 0x9731, 0xbb95, 0x1, 0x0);
        gbc.writeMem(0xbbef, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7940);
        EXPECT(gbc.pc(), 0xbbf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbef), 0xcb);
        EXPECT(gbc.readMem(0xbbf0), 0xd7);
        // CB D7 02DF
        gbc.setState(0xd811, 0x3932, 0x5ae0, 0x1a3e, 0xe036, 0xa918, 0x0, 0x1);
        gbc.writeMem(0xd811, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3932);
        EXPECT(gbc.pc(), 0xd813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd811), 0xcb);
        EXPECT(gbc.readMem(0xd812), 0xd7);
        // CB D7 02E0
        gbc.setState(0xd55e, 0xf7bd, 0x46a0, 0xabb9, 0x6f74, 0xc56c, 0x1, 0x1);
        gbc.writeMem(0xd55e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf7bd);
        EXPECT(gbc.pc(), 0xd560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd55e), 0xcb);
        EXPECT(gbc.readMem(0xd55f), 0xd7);
        // CB D7 02E2
        gbc.setState(0x3741, 0x21db, 0xaf40, 0x86fb, 0x3f73, 0xeee2, 0x1, 0x0);
        gbc.writeMem(0x3741, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x21db);
        EXPECT(gbc.pc(), 0x3743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02E3
        gbc.setState(0xe7b7, 0x8cab, 0xaaf0, 0x8db4, 0x87d2, 0x1967, 0x1, 0x1);
        gbc.writeMem(0xe7b7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8cab);
        EXPECT(gbc.pc(), 0xe7b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7b7), 0xcb);
        EXPECT(gbc.readMem(0xe7b8), 0xd7);
        // CB D7 02E4
        gbc.setState(0x8649, 0x4144, 0x3b80, 0xb65c, 0x6e8, 0x73f0, 0x0, 0x1);
        gbc.writeMem(0x8649, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4144);
        EXPECT(gbc.pc(), 0x864b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8649), 0xcb);
        EXPECT(gbc.readMem(0x864a), 0xd7);
        // CB D7 02E6
        gbc.setState(0xcccf, 0xef02, 0x9b10, 0x8eac, 0x37f2, 0x86ba, 0x0, 0x0);
        gbc.writeMem(0xcccf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xef02);
        EXPECT(gbc.pc(), 0xccd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcccf), 0xcb);
        EXPECT(gbc.readMem(0xccd0), 0xd7);
        // CB D7 02E7
        gbc.setState(0x3e4c, 0x6aee, 0x8010, 0xc857, 0x7c5f, 0xc76e, 0x1, 0x0);
        gbc.writeMem(0x3e4c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6aee);
        EXPECT(gbc.pc(), 0x3e4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02E8
        gbc.setState(0xb609, 0xf6df, 0x2eb0, 0xc970, 0x51ea, 0xa146, 0x1, 0x1);
        gbc.writeMem(0xb609, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf6df);
        EXPECT(gbc.pc(), 0xb60b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb609), 0xcb);
        EXPECT(gbc.readMem(0xb60a), 0xd7);
        // CB D7 02E9
        gbc.setState(0xa700, 0x4da6, 0x39a0, 0x202d, 0x409, 0x4152, 0x0, 0x1);
        gbc.writeMem(0xa700, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4da6);
        EXPECT(gbc.pc(), 0xa702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa700), 0xcb);
        EXPECT(gbc.readMem(0xa701), 0xd7);
        // CB D7 02EA
        gbc.setState(0x4f76, 0xaa13, 0x94d0, 0x68c2, 0xf697, 0x68ed, 0x1, 0x0);
        gbc.writeMem(0x4f76, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xaa13);
        EXPECT(gbc.pc(), 0x4f78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02EB
        gbc.setState(0x17a, 0x4c10, 0x11f0, 0x15b5, 0x48aa, 0x15f7, 0x0, 0x0);
        gbc.writeMem(0x17a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4c10);
        EXPECT(gbc.pc(), 0x17c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02EC
        gbc.setState(0xa7f5, 0x22c4, 0x4250, 0x33be, 0xd7cc, 0xa24c, 0x1, 0x0);
        gbc.writeMem(0xa7f5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x22c4);
        EXPECT(gbc.pc(), 0xa7f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7f5), 0xcb);
        EXPECT(gbc.readMem(0xa7f6), 0xd7);
        // CB D7 02ED
        gbc.setState(0xdda8, 0xb5c3, 0xb5e0, 0x1550, 0x892e, 0xd0ee, 0x0, 0x1);
        gbc.writeMem(0xdda8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb5c3);
        EXPECT(gbc.pc(), 0xddaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdda8), 0xcb);
        EXPECT(gbc.readMem(0xdda9), 0xd7);
        // CB D7 02EE
        gbc.setState(0x9655, 0xcf39, 0xbb50, 0x79de, 0x9959, 0x5b6, 0x1, 0x0);
        gbc.writeMem(0x9655, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xcf39);
        EXPECT(gbc.pc(), 0x9657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9655), 0xcb);
        EXPECT(gbc.readMem(0x9656), 0xd7);
        // CB D7 02EF
        gbc.setState(0xe781, 0x7be9, 0x9890, 0xe3f, 0x73c7, 0x7b60, 0x0, 0x1);
        gbc.writeMem(0xe781, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7be9);
        EXPECT(gbc.pc(), 0xe783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe781), 0xcb);
        EXPECT(gbc.readMem(0xe782), 0xd7);
        // CB D7 02F0
        gbc.setState(0xc872, 0xcb67, 0x1150, 0x1452, 0xdcec, 0x8bc4, 0x0, 0x0);
        gbc.writeMem(0xc872, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xcb67);
        EXPECT(gbc.pc(), 0xc874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc872), 0xcb);
        EXPECT(gbc.readMem(0xc873), 0xd7);
        // CB D7 02F1
        gbc.setState(0x3c31, 0x8976, 0xedb0, 0x7fc5, 0x6482, 0xaa3f, 0x0, 0x0);
        gbc.writeMem(0x3c31, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8976);
        EXPECT(gbc.pc(), 0x3c33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02F2
        gbc.setState(0x8ac5, 0xb9e9, 0x54e0, 0x6836, 0x943c, 0x7c2a, 0x1, 0x1);
        gbc.writeMem(0x8ac5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb9e9);
        EXPECT(gbc.pc(), 0x8ac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac5), 0xcb);
        EXPECT(gbc.readMem(0x8ac6), 0xd7);
        // CB D7 02F3
        gbc.setState(0xaa2e, 0xedb0, 0x1840, 0x36, 0x3fa8, 0x2800, 0x1, 0x1);
        gbc.writeMem(0xaa2e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xedb0);
        EXPECT(gbc.pc(), 0xaa30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa2e), 0xcb);
        EXPECT(gbc.readMem(0xaa2f), 0xd7);
        // CB D7 02F4
        gbc.setState(0xd55, 0x68fc, 0x42a0, 0xe7bf, 0x33ca, 0x7fa7, 0x1, 0x1);
        gbc.writeMem(0xd55, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x68fc);
        EXPECT(gbc.pc(), 0xd57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02F5
        gbc.setState(0x8c08, 0xf693, 0xeef0, 0xefd5, 0x7239, 0xb1a1, 0x1, 0x0);
        gbc.writeMem(0x8c08, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf693);
        EXPECT(gbc.pc(), 0x8c0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c08), 0xcb);
        EXPECT(gbc.readMem(0x8c09), 0xd7);
        // CB D7 02F6
        gbc.setState(0x2ecf, 0xd20f, 0xd720, 0xfcce, 0x3b9a, 0x6c7a, 0x1, 0x0);
        gbc.writeMem(0x2ecf, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd20f);
        EXPECT(gbc.pc(), 0x2ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02F7
        gbc.setState(0x5f73, 0x20e0, 0x90c0, 0xcfc5, 0x788b, 0x8639, 0x1, 0x0);
        gbc.writeMem(0x5f73, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x20e0);
        EXPECT(gbc.pc(), 0x5f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 02F8
        gbc.setState(0xcd7c, 0x8531, 0x460, 0x3ed4, 0x7e22, 0x18ac, 0x0, 0x1);
        gbc.writeMem(0xcd7c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8531);
        EXPECT(gbc.pc(), 0xcd7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd7c), 0xcb);
        EXPECT(gbc.readMem(0xcd7d), 0xd7);
        // CB D7 02F9
        gbc.setState(0xc85e, 0xec01, 0x1170, 0x6183, 0xb502, 0xc436, 0x1, 0x0);
        gbc.writeMem(0xc85e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xec01);
        EXPECT(gbc.pc(), 0xc860);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc85e), 0xcb);
        EXPECT(gbc.readMem(0xc85f), 0xd7);
        // CB D7 02FA
        gbc.setState(0x3f04, 0x34b5, 0xd710, 0xcfaf, 0xa4f4, 0x10e3, 0x1, 0x1);
        gbc.writeMem(0x3f04, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x34b5);
        EXPECT(gbc.pc(), 0x3f06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 02FB
        gbc.setState(0x82ab, 0x15f, 0x7610, 0xd820, 0xd6ab, 0x4082, 0x1, 0x0);
        gbc.writeMem(0x82ab, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x15f);
        EXPECT(gbc.pc(), 0x82ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ab), 0xcb);
        EXPECT(gbc.readMem(0x82ac), 0xd7);
        // CB D7 02FC
        gbc.setState(0xc468, 0xd403, 0x9480, 0xaf38, 0x1161, 0x3f28, 0x1, 0x0);
        gbc.writeMem(0xc468, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd403);
        EXPECT(gbc.pc(), 0xc46a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc468), 0xcb);
        EXPECT(gbc.readMem(0xc469), 0xd7);
        // CB D7 02FD
        gbc.setState(0x9813, 0xf53a, 0xdcf0, 0xb66e, 0x9a93, 0x9c21, 0x1, 0x0);
        gbc.writeMem(0x9813, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf53a);
        EXPECT(gbc.pc(), 0x9815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9813), 0xcb);
        EXPECT(gbc.readMem(0x9814), 0xd7);
        // CB D7 02FE
        gbc.setState(0x98f5, 0xbc94, 0x5f80, 0xb231, 0xf93e, 0x781, 0x1, 0x1);
        gbc.writeMem(0x98f5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbc94);
        EXPECT(gbc.pc(), 0x98f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f5), 0xcb);
        EXPECT(gbc.readMem(0x98f6), 0xd7);
        // CB D7 02FF
        gbc.setState(0x94f9, 0x5d32, 0xf3f0, 0x43e5, 0x7860, 0xd862, 0x1, 0x0);
        gbc.writeMem(0x94f9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5d32);
        EXPECT(gbc.pc(), 0x94fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94f9), 0xcb);
        EXPECT(gbc.readMem(0x94fa), 0xd7);
        // CB D7 0300
        gbc.setState(0xbd7c, 0x7ccc, 0x2dd0, 0x4cd7, 0xf4fa, 0x91c9, 0x1, 0x0);
        gbc.writeMem(0xbd7c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7ccc);
        EXPECT(gbc.pc(), 0xbd7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd7c), 0xcb);
        EXPECT(gbc.readMem(0xbd7d), 0xd7);
        // CB D7 0301
        gbc.setState(0x6248, 0xe847, 0x37c0, 0xb1c0, 0xd084, 0xa50b, 0x0, 0x0);
        gbc.writeMem(0x6248, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe847);
        EXPECT(gbc.pc(), 0x624a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0302
        gbc.setState(0x8075, 0xf8fc, 0x3cb0, 0x2e52, 0x41d3, 0xc810, 0x0, 0x1);
        gbc.writeMem(0x8075, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf8fc);
        EXPECT(gbc.pc(), 0x8077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8075), 0xcb);
        EXPECT(gbc.readMem(0x8076), 0xd7);
        // CB D7 0303
        gbc.setState(0x8515, 0x7429, 0xb950, 0x57b8, 0x9c4c, 0x2e9f, 0x1, 0x0);
        gbc.writeMem(0x8515, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7429);
        EXPECT(gbc.pc(), 0x8517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8515), 0xcb);
        EXPECT(gbc.readMem(0x8516), 0xd7);
        // CB D7 0304
        gbc.setState(0xd2a1, 0xeb00, 0xe4b0, 0xade2, 0x67b8, 0xdfce, 0x1, 0x0);
        gbc.writeMem(0xd2a1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xeb00);
        EXPECT(gbc.pc(), 0xd2a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2a1), 0xcb);
        EXPECT(gbc.readMem(0xd2a2), 0xd7);
        // CB D7 0305
        gbc.setState(0x2aad, 0xaa67, 0x7b60, 0xe30e, 0xb465, 0xc194, 0x1, 0x1);
        gbc.writeMem(0x2aad, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xaa67);
        EXPECT(gbc.pc(), 0x2aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0306
        gbc.setState(0xa1a4, 0x8a4c, 0x6120, 0x6c11, 0xa011, 0xcce9, 0x0, 0x1);
        gbc.writeMem(0xa1a4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8a4c);
        EXPECT(gbc.pc(), 0xa1a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a4), 0xcb);
        EXPECT(gbc.readMem(0xa1a5), 0xd7);
        // CB D7 0307
        gbc.setState(0x54f8, 0xfd47, 0x74a0, 0x772a, 0x7585, 0x32f7, 0x0, 0x0);
        gbc.writeMem(0x54f8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfd47);
        EXPECT(gbc.pc(), 0x54fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0309
        gbc.setState(0x6ce0, 0xd10e, 0x1a20, 0xec84, 0xcb12, 0x8e71, 0x1, 0x1);
        gbc.writeMem(0x6ce0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd10e);
        EXPECT(gbc.pc(), 0x6ce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 030A
        gbc.setState(0x62ba, 0x128d, 0xdfe0, 0x5412, 0x800f, 0x80, 0x1, 0x1);
        gbc.writeMem(0x62ba, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x128d);
        EXPECT(gbc.pc(), 0x62bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 030B
        gbc.setState(0x4494, 0xcb2, 0x7fc0, 0x9e5c, 0x854f, 0x6441, 0x0, 0x0);
        gbc.writeMem(0x4494, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcb2);
        EXPECT(gbc.pc(), 0x4496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 030C
        gbc.setState(0xd63a, 0x22d7, 0xe0d0, 0xd2e4, 0x556e, 0x5672, 0x1, 0x0);
        gbc.writeMem(0xd63a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x22d7);
        EXPECT(gbc.pc(), 0xd63c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd63a), 0xcb);
        EXPECT(gbc.readMem(0xd63b), 0xd7);
        // CB D7 030D
        gbc.setState(0x643f, 0x55a7, 0x4780, 0x306, 0xc8e0, 0x138e, 0x1, 0x0);
        gbc.writeMem(0x643f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x55a7);
        EXPECT(gbc.pc(), 0x6441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 030E
        gbc.setState(0xa452, 0x32be, 0x4990, 0x59e6, 0xfd26, 0x2ece, 0x0, 0x1);
        gbc.writeMem(0xa452, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x32be);
        EXPECT(gbc.pc(), 0xa454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa452), 0xcb);
        EXPECT(gbc.readMem(0xa453), 0xd7);
        // CB D7 030F
        gbc.setState(0x31fd, 0x23b5, 0xee30, 0xa9bb, 0xcef2, 0x59d3, 0x0, 0x0);
        gbc.writeMem(0x31fd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x23b5);
        EXPECT(gbc.pc(), 0x31ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0311
        gbc.setState(0x65f6, 0x96a3, 0x4990, 0x139f, 0x7fe5, 0xb632, 0x0, 0x1);
        gbc.writeMem(0x65f6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x96a3);
        EXPECT(gbc.pc(), 0x65f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0312
        gbc.setState(0xdb18, 0x73b, 0xb270, 0x8831, 0x16d0, 0xe1ee, 0x0, 0x0);
        gbc.writeMem(0xdb18, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x73b);
        EXPECT(gbc.pc(), 0xdb1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb18), 0xcb);
        EXPECT(gbc.readMem(0xdb19), 0xd7);
        // CB D7 0313
        gbc.setState(0xd06, 0xb50a, 0x1d10, 0xfde2, 0x4281, 0x50bd, 0x1, 0x1);
        gbc.writeMem(0xd06, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb50a);
        EXPECT(gbc.pc(), 0xd08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0314
        gbc.setState(0xdf89, 0x122b, 0x2c90, 0x4f3c, 0xc147, 0x18a9, 0x0, 0x1);
        gbc.writeMem(0xdf89, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x122b);
        EXPECT(gbc.pc(), 0xdf8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf89), 0xcb);
        EXPECT(gbc.readMem(0xdf8a), 0xd7);
        // CB D7 0315
        gbc.setState(0x4e84, 0x5ab7, 0x4350, 0x5538, 0x2187, 0x6ca8, 0x1, 0x1);
        gbc.writeMem(0x4e84, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x5ab7);
        EXPECT(gbc.pc(), 0x4e86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0316
        gbc.setState(0x6d6e, 0x4837, 0xc050, 0xee5b, 0x126f, 0xb3eb, 0x0, 0x0);
        gbc.writeMem(0x6d6e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4837);
        EXPECT(gbc.pc(), 0x6d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0317
        gbc.setState(0x6b66, 0xbe34, 0x5bd0, 0x290e, 0xa01b, 0xc835, 0x0, 0x1);
        gbc.writeMem(0x6b66, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xbe34);
        EXPECT(gbc.pc(), 0x6b68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0318
        gbc.setState(0x897c, 0x30d2, 0xdce0, 0x7d6b, 0x94aa, 0x5e45, 0x1, 0x0);
        gbc.writeMem(0x897c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x30d2);
        EXPECT(gbc.pc(), 0x897e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x897c), 0xcb);
        EXPECT(gbc.readMem(0x897d), 0xd7);
        // CB D7 031A
        gbc.setState(0x11af, 0xcaed, 0x3080, 0xd058, 0x47f, 0xf6e, 0x0, 0x1);
        gbc.writeMem(0x11af, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcaed);
        EXPECT(gbc.pc(), 0x11b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 031B
        gbc.setState(0xb395, 0xc59a, 0xa2e0, 0xb43f, 0xa5c6, 0xfd22, 0x0, 0x1);
        gbc.writeMem(0xb395, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc59a);
        EXPECT(gbc.pc(), 0xb397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb395), 0xcb);
        EXPECT(gbc.readMem(0xb396), 0xd7);
        // CB D7 031C
        gbc.setState(0x7ad8, 0x98fa, 0xf9e0, 0x261a, 0xf0e2, 0x7d5a, 0x1, 0x1);
        gbc.writeMem(0x7ad8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x98fa);
        EXPECT(gbc.pc(), 0x7ada);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 031D
        gbc.setState(0x2337, 0x591e, 0x6650, 0x3418, 0x46a4, 0xdb84, 0x0, 0x1);
        gbc.writeMem(0x2337, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x591e);
        EXPECT(gbc.pc(), 0x2339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 031E
        gbc.setState(0x2e0c, 0x83c8, 0x91c0, 0x500e, 0xe47, 0x169d, 0x0, 0x1);
        gbc.writeMem(0x2e0c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x83c8);
        EXPECT(gbc.pc(), 0x2e0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 031F
        gbc.setState(0xc67d, 0x72d9, 0x4f70, 0x2389, 0x5b, 0x63a3, 0x1, 0x1);
        gbc.writeMem(0xc67d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x72d9);
        EXPECT(gbc.pc(), 0xc67f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc67d), 0xcb);
        EXPECT(gbc.readMem(0xc67e), 0xd7);
        // CB D7 0320
        gbc.setState(0x2fcd, 0x5a4, 0xb250, 0x42f5, 0xc587, 0xfddd, 0x1, 0x0);
        gbc.writeMem(0x2fcd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5a4);
        EXPECT(gbc.pc(), 0x2fcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0321
        gbc.setState(0xbbd3, 0xd694, 0x8870, 0x261b, 0xed9, 0x5774, 0x0, 0x0);
        gbc.writeMem(0xbbd3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd694);
        EXPECT(gbc.pc(), 0xbbd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbd3), 0xcb);
        EXPECT(gbc.readMem(0xbbd4), 0xd7);
        // CB D7 0322
        gbc.setState(0x38c7, 0x9282, 0xd400, 0xb5fe, 0x6a14, 0x22fe, 0x1, 0x1);
        gbc.writeMem(0x38c7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9282);
        EXPECT(gbc.pc(), 0x38c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0323
        gbc.setState(0xb8f5, 0x4ca9, 0xc1a0, 0xb5fb, 0x50ce, 0x45f6, 0x1, 0x1);
        gbc.writeMem(0xb8f5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4ca9);
        EXPECT(gbc.pc(), 0xb8f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f5), 0xcb);
        EXPECT(gbc.readMem(0xb8f6), 0xd7);
        // CB D7 0324
        gbc.setState(0xad7f, 0xcbdc, 0xf3b0, 0x2032, 0x1328, 0xf04, 0x0, 0x0);
        gbc.writeMem(0xad7f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xcbdc);
        EXPECT(gbc.pc(), 0xad81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad7f), 0xcb);
        EXPECT(gbc.readMem(0xad80), 0xd7);
        // CB D7 0325
        gbc.setState(0x1d83, 0x1ad4, 0xe0b0, 0xbbf0, 0x83e2, 0xd415, 0x0, 0x0);
        gbc.writeMem(0x1d83, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1ad4);
        EXPECT(gbc.pc(), 0x1d85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0326
        gbc.setState(0xceac, 0x4e09, 0x4f60, 0x674a, 0xb265, 0xb1ec, 0x1, 0x1);
        gbc.writeMem(0xceac, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4e09);
        EXPECT(gbc.pc(), 0xceae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceac), 0xcb);
        EXPECT(gbc.readMem(0xcead), 0xd7);
        // CB D7 0327
        gbc.setState(0x999d, 0xe853, 0x4990, 0x111d, 0xe771, 0x62a8, 0x0, 0x1);
        gbc.writeMem(0x999d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe853);
        EXPECT(gbc.pc(), 0x999f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x999d), 0xcb);
        EXPECT(gbc.readMem(0x999e), 0xd7);
        // CB D7 0328
        gbc.setState(0x1a3d, 0xd427, 0xe900, 0x7d2e, 0x959e, 0x53a6, 0x0, 0x1);
        gbc.writeMem(0x1a3d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd427);
        EXPECT(gbc.pc(), 0x1a3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0329
        gbc.setState(0x9b07, 0x59c7, 0xfc30, 0x84ec, 0xe0db, 0x684b, 0x1, 0x0);
        gbc.writeMem(0x9b07, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x59c7);
        EXPECT(gbc.pc(), 0x9b09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b07), 0xcb);
        EXPECT(gbc.readMem(0x9b08), 0xd7);
        // CB D7 032A
        gbc.setState(0xea45, 0x7341, 0x2b00, 0xfe26, 0x84ad, 0x7d47, 0x0, 0x0);
        gbc.writeMem(0xea45, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7341);
        EXPECT(gbc.pc(), 0xea47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea45), 0xcb);
        EXPECT(gbc.readMem(0xea46), 0xd7);
        // CB D7 032B
        gbc.setState(0x2842, 0x3188, 0x48c0, 0x5e1c, 0x444e, 0x3d17, 0x0, 0x1);
        gbc.writeMem(0x2842, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3188);
        EXPECT(gbc.pc(), 0x2844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 032C
        gbc.setState(0xa7ce, 0x2d2c, 0xfa50, 0x9c04, 0x52b4, 0xe94d, 0x1, 0x0);
        gbc.writeMem(0xa7ce, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x2d2c);
        EXPECT(gbc.pc(), 0xa7d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ce), 0xcb);
        EXPECT(gbc.readMem(0xa7cf), 0xd7);
        // CB D7 032D
        gbc.setState(0x3a16, 0x8d4, 0x3ac0, 0x20fd, 0xc466, 0x4c41, 0x0, 0x0);
        gbc.writeMem(0x3a16, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8d4);
        EXPECT(gbc.pc(), 0x3a18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 032E
        gbc.setState(0x6cf7, 0x2671, 0x6b90, 0xaab8, 0xe988, 0x8a36, 0x0, 0x1);
        gbc.writeMem(0x6cf7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2671);
        EXPECT(gbc.pc(), 0x6cf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 032F
        gbc.setState(0xab8a, 0xf100, 0x5bf0, 0xa19e, 0xd766, 0x6f8, 0x1, 0x0);
        gbc.writeMem(0xab8a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf100);
        EXPECT(gbc.pc(), 0xab8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab8a), 0xcb);
        EXPECT(gbc.readMem(0xab8b), 0xd7);
        // CB D7 0331
        gbc.setState(0x1a6c, 0x5f01, 0x2b60, 0xd63b, 0x1251, 0xd2f4, 0x1, 0x1);
        gbc.writeMem(0x1a6c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5f01);
        EXPECT(gbc.pc(), 0x1a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0334
        gbc.setState(0xa547, 0xe9f8, 0xba70, 0x7ba5, 0x7f5d, 0xd334, 0x1, 0x0);
        gbc.writeMem(0xa547, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe9f8);
        EXPECT(gbc.pc(), 0xa549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa547), 0xcb);
        EXPECT(gbc.readMem(0xa548), 0xd7);
        // CB D7 0335
        gbc.setState(0x3d8c, 0xadad, 0x2d90, 0xd160, 0xa71, 0xc6f8, 0x1, 0x1);
        gbc.writeMem(0x3d8c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xadad);
        EXPECT(gbc.pc(), 0x3d8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0336
        gbc.setState(0x186f, 0x29c, 0xcf50, 0x1be6, 0xc575, 0xf0f6, 0x1, 0x1);
        gbc.writeMem(0x186f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x29c);
        EXPECT(gbc.pc(), 0x1871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0337
        gbc.setState(0x13c7, 0xf193, 0x5f60, 0x9422, 0xa6c0, 0x60a, 0x1, 0x0);
        gbc.writeMem(0x13c7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf193);
        EXPECT(gbc.pc(), 0x13c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0338
        gbc.setState(0xd50d, 0x9bd6, 0x86b0, 0x7b39, 0xd669, 0x29, 0x1, 0x0);
        gbc.writeMem(0xd50d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9bd6);
        EXPECT(gbc.pc(), 0xd50f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd50d), 0xcb);
        EXPECT(gbc.readMem(0xd50e), 0xd7);
        // CB D7 0339
        gbc.setState(0x164a, 0xbba0, 0x6ac0, 0x25dc, 0x2e9c, 0x8b72, 0x0, 0x0);
        gbc.writeMem(0x164a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xbba0);
        EXPECT(gbc.pc(), 0x164c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 033A
        gbc.setState(0x5040, 0xa2d5, 0x1fb0, 0xd25c, 0x19c1, 0xf794, 0x0, 0x0);
        gbc.writeMem(0x5040, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa2d5);
        EXPECT(gbc.pc(), 0x5042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 033B
        gbc.setState(0x762b, 0x9a73, 0x9310, 0xe60, 0x60a1, 0xbed7, 0x1, 0x1);
        gbc.writeMem(0x762b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9a73);
        EXPECT(gbc.pc(), 0x762d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 033C
        gbc.setState(0x1e96, 0xe0b9, 0xdf90, 0x373e, 0x5429, 0xabcf, 0x0, 0x0);
        gbc.writeMem(0x1e96, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe0b9);
        EXPECT(gbc.pc(), 0x1e98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 033D
        gbc.setState(0xa0d4, 0xebc, 0xd6f0, 0xd72, 0x801e, 0x46e5, 0x0, 0x1);
        gbc.writeMem(0xa0d4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xebc);
        EXPECT(gbc.pc(), 0xa0d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0d4), 0xcb);
        EXPECT(gbc.readMem(0xa0d5), 0xd7);
        // CB D7 033E
        gbc.setState(0x760f, 0xbb4a, 0x9af0, 0x94e5, 0x873f, 0x1b3d, 0x0, 0x1);
        gbc.writeMem(0x760f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xbb4a);
        EXPECT(gbc.pc(), 0x7611);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0340
        gbc.setState(0xcdca, 0xee20, 0x41f0, 0x9702, 0x5a92, 0x6a68, 0x0, 0x0);
        gbc.writeMem(0xcdca, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xee20);
        EXPECT(gbc.pc(), 0xcdcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdca), 0xcb);
        EXPECT(gbc.readMem(0xcdcb), 0xd7);
        // CB D7 0341
        gbc.setState(0x93e7, 0x86b, 0xd1d0, 0xdf32, 0x779, 0x8add, 0x0, 0x1);
        gbc.writeMem(0x93e7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x86b);
        EXPECT(gbc.pc(), 0x93e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e7), 0xcb);
        EXPECT(gbc.readMem(0x93e8), 0xd7);
        // CB D7 0342
        gbc.setState(0xcc8a, 0xf805, 0xd8b0, 0x6dbe, 0x808f, 0xc10b, 0x1, 0x0);
        gbc.writeMem(0xcc8a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf805);
        EXPECT(gbc.pc(), 0xcc8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc8a), 0xcb);
        EXPECT(gbc.readMem(0xcc8b), 0xd7);
        // CB D7 0343
        gbc.setState(0x42cb, 0x99b2, 0x10d0, 0x7326, 0x1db0, 0xf464, 0x1, 0x1);
        gbc.writeMem(0x42cb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x99b2);
        EXPECT(gbc.pc(), 0x42cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0344
        gbc.setState(0x2613, 0xfdd6, 0xdd0, 0xcfeb, 0x24a2, 0xf7b8, 0x1, 0x1);
        gbc.writeMem(0x2613, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xfdd6);
        EXPECT(gbc.pc(), 0x2615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0345
        gbc.setState(0xb292, 0xba14, 0xd6c0, 0xbe54, 0xf75c, 0xc7ca, 0x0, 0x1);
        gbc.writeMem(0xb292, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xba14);
        EXPECT(gbc.pc(), 0xb294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb292), 0xcb);
        EXPECT(gbc.readMem(0xb293), 0xd7);
        // CB D7 0346
        gbc.setState(0x4fa2, 0x9cbf, 0xb150, 0xc390, 0x4df5, 0x969a, 0x1, 0x0);
        gbc.writeMem(0x4fa2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9cbf);
        EXPECT(gbc.pc(), 0x4fa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0347
        gbc.setState(0xdc51, 0x39aa, 0xbe40, 0x38fb, 0x12b0, 0xe9c7, 0x1, 0x0);
        gbc.writeMem(0xdc51, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x39aa);
        EXPECT(gbc.pc(), 0xdc53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc51), 0xcb);
        EXPECT(gbc.readMem(0xdc52), 0xd7);
        // CB D7 0348
        gbc.setState(0xd98e, 0xe734, 0xb500, 0x7dcb, 0xfbe4, 0x86b, 0x1, 0x0);
        gbc.writeMem(0xd98e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe734);
        EXPECT(gbc.pc(), 0xd990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd98e), 0xcb);
        EXPECT(gbc.readMem(0xd98f), 0xd7);
        // CB D7 0349
        gbc.setState(0x734d, 0x56a6, 0xb0, 0x9ec6, 0x355c, 0x4076, 0x1, 0x0);
        gbc.writeMem(0x734d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x56a6);
        EXPECT(gbc.pc(), 0x734f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 034A
        gbc.setState(0xc009, 0xaf09, 0x9f50, 0x1e9b, 0xa8b0, 0xfa4a, 0x0, 0x1);
        gbc.writeMem(0xc009, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xaf09);
        EXPECT(gbc.pc(), 0xc00b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc009), 0xcb);
        EXPECT(gbc.readMem(0xc00a), 0xd7);
        // CB D7 034B
        gbc.setState(0x55b5, 0xf6d3, 0xf340, 0x9cc0, 0x4583, 0xaa92, 0x0, 0x0);
        gbc.writeMem(0x55b5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf6d3);
        EXPECT(gbc.pc(), 0x55b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 034C
        gbc.setState(0xc611, 0x136d, 0xda70, 0xa5be, 0x35f4, 0x5b4, 0x1, 0x0);
        gbc.writeMem(0xc611, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x136d);
        EXPECT(gbc.pc(), 0xc613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc611), 0xcb);
        EXPECT(gbc.readMem(0xc612), 0xd7);
        // CB D7 034D
        gbc.setState(0xdcfe, 0x618c, 0xaa70, 0x4f30, 0x1fe5, 0x144d, 0x1, 0x1);
        gbc.writeMem(0xdcfe, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x618c);
        EXPECT(gbc.pc(), 0xdd00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcfe), 0xcb);
        EXPECT(gbc.readMem(0xdcff), 0xd7);
        // CB D7 034E
        gbc.setState(0xd843, 0x4162, 0xe6e0, 0x402f, 0x97e, 0x5996, 0x0, 0x1);
        gbc.writeMem(0xd843, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4162);
        EXPECT(gbc.pc(), 0xd845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd843), 0xcb);
        EXPECT(gbc.readMem(0xd844), 0xd7);
        // CB D7 034F
        gbc.setState(0x3c01, 0xfefc, 0xdb60, 0x50c9, 0x26b2, 0x2317, 0x1, 0x1);
        gbc.writeMem(0x3c01, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfefc);
        EXPECT(gbc.pc(), 0x3c03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0351
        gbc.setState(0x677, 0xed83, 0x3160, 0xb1e5, 0x7223, 0xa443, 0x1, 0x1);
        gbc.writeMem(0x677, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xed83);
        EXPECT(gbc.pc(), 0x679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0352
        gbc.setState(0xaaff, 0xc7e3, 0x99b0, 0x8b0, 0xe0ae, 0x6227, 0x0, 0x1);
        gbc.writeMem(0xaaff, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc7e3);
        EXPECT(gbc.pc(), 0xab01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaff), 0xcb);
        EXPECT(gbc.readMem(0xab00), 0xd7);
        // CB D7 0353
        gbc.setState(0xd821, 0x2f99, 0x1d60, 0x5ee3, 0x8d89, 0x1a5d, 0x0, 0x1);
        gbc.writeMem(0xd821, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2f99);
        EXPECT(gbc.pc(), 0xd823);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd821), 0xcb);
        EXPECT(gbc.readMem(0xd822), 0xd7);
        // CB D7 0354
        gbc.setState(0xefe0, 0xf771, 0x4aa0, 0x8e05, 0x9628, 0x3e98, 0x1, 0x0);
        gbc.writeMem(0xefe0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf771);
        EXPECT(gbc.pc(), 0xefe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe0), 0xcb);
        EXPECT(gbc.readMem(0xefe1), 0xd7);
        // CB D7 0355
        gbc.setState(0x5fbb, 0x388c, 0xea60, 0x65c6, 0xc2d7, 0xef7e, 0x0, 0x0);
        gbc.writeMem(0x5fbb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x388c);
        EXPECT(gbc.pc(), 0x5fbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0356
        gbc.setState(0xe39b, 0x4af9, 0xc760, 0x3abd, 0xc113, 0x72c1, 0x1, 0x0);
        gbc.writeMem(0xe39b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4af9);
        EXPECT(gbc.pc(), 0xe39d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe39b), 0xcb);
        EXPECT(gbc.readMem(0xe39c), 0xd7);
        // CB D7 0358
        gbc.setState(0x9efe, 0xf216, 0xa790, 0x65cf, 0xde95, 0xc75a, 0x1, 0x0);
        gbc.writeMem(0x9efe, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf216);
        EXPECT(gbc.pc(), 0x9f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9efe), 0xcb);
        EXPECT(gbc.readMem(0x9eff), 0xd7);
        // CB D7 0359
        gbc.setState(0x7fc6, 0x8718, 0x3fb0, 0xc97c, 0xe440, 0xf657, 0x1, 0x0);
        gbc.writeMem(0x7fc6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8718);
        EXPECT(gbc.pc(), 0x7fc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 035A
        gbc.setState(0x1141, 0x59de, 0xb8c0, 0x6a12, 0xaba3, 0xfce0, 0x0, 0x1);
        gbc.writeMem(0x1141, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x59de);
        EXPECT(gbc.pc(), 0x1143);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 035B
        gbc.setState(0x29ab, 0x6cc8, 0x9ce0, 0x9b5d, 0xa8a6, 0x794d, 0x1, 0x1);
        gbc.writeMem(0x29ab, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6cc8);
        EXPECT(gbc.pc(), 0x29ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 035C
        gbc.setState(0x8ae6, 0x1cb2, 0xdb20, 0x2261, 0x48fb, 0x3317, 0x1, 0x0);
        gbc.writeMem(0x8ae6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1cb2);
        EXPECT(gbc.pc(), 0x8ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ae6), 0xcb);
        EXPECT(gbc.readMem(0x8ae7), 0xd7);
        // CB D7 035D
        gbc.setState(0x9055, 0x2231, 0x6dc0, 0xb9ef, 0x7cf, 0xc2b9, 0x1, 0x0);
        gbc.writeMem(0x9055, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2231);
        EXPECT(gbc.pc(), 0x9057);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9055), 0xcb);
        EXPECT(gbc.readMem(0x9056), 0xd7);
        // CB D7 035E
        gbc.setState(0x229, 0xd2fc, 0x2770, 0x133c, 0x7998, 0xaccd, 0x0, 0x1);
        gbc.writeMem(0x229, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd2fc);
        EXPECT(gbc.pc(), 0x22b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 035F
        gbc.setState(0xad82, 0x915b, 0xd080, 0xd00c, 0x2e3c, 0x775c, 0x1, 0x1);
        gbc.writeMem(0xad82, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x915b);
        EXPECT(gbc.pc(), 0xad84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad82), 0xcb);
        EXPECT(gbc.readMem(0xad83), 0xd7);
        // CB D7 0360
        gbc.setState(0x5504, 0x8af1, 0x710, 0x551f, 0x4793, 0xbd63, 0x1, 0x0);
        gbc.writeMem(0x5504, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8af1);
        EXPECT(gbc.pc(), 0x5506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0362
        gbc.setState(0xa0f1, 0x2e7e, 0x8b50, 0xcc9e, 0xc912, 0x116a, 0x0, 0x0);
        gbc.writeMem(0xa0f1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2e7e);
        EXPECT(gbc.pc(), 0xa0f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0f1), 0xcb);
        EXPECT(gbc.readMem(0xa0f2), 0xd7);
        // CB D7 0363
        gbc.setState(0x2cf1, 0x9c45, 0x64d0, 0x231a, 0x73c8, 0x561, 0x0, 0x0);
        gbc.writeMem(0x2cf1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9c45);
        EXPECT(gbc.pc(), 0x2cf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0364
        gbc.setState(0x53f4, 0x4022, 0x6f50, 0xf0c7, 0x1752, 0x4685, 0x0, 0x0);
        gbc.writeMem(0x53f4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4022);
        EXPECT(gbc.pc(), 0x53f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0365
        gbc.setState(0x9f0f, 0x1a94, 0x7a80, 0x8671, 0xc7dc, 0xa380, 0x0, 0x1);
        gbc.writeMem(0x9f0f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1a94);
        EXPECT(gbc.pc(), 0x9f11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f0f), 0xcb);
        EXPECT(gbc.readMem(0x9f10), 0xd7);
        // CB D7 0366
        gbc.setState(0x1e89, 0xf05f, 0x6380, 0x1854, 0x9778, 0x57cb, 0x1, 0x0);
        gbc.writeMem(0x1e89, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf05f);
        EXPECT(gbc.pc(), 0x1e8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0367
        gbc.setState(0x28ba, 0x26c8, 0x14d0, 0x6692, 0x9bde, 0xc1d6, 0x1, 0x1);
        gbc.writeMem(0x28ba, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x26c8);
        EXPECT(gbc.pc(), 0x28bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0368
        gbc.setState(0x1a82, 0x5b2a, 0x2110, 0xcb5e, 0x79a4, 0xa9c2, 0x0, 0x1);
        gbc.writeMem(0x1a82, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5b2a);
        EXPECT(gbc.pc(), 0x1a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0369
        gbc.setState(0x2485, 0xc7df, 0xbe0, 0x9b5b, 0xd05a, 0x63f9, 0x0, 0x1);
        gbc.writeMem(0x2485, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc7df);
        EXPECT(gbc.pc(), 0x2487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 036A
        gbc.setState(0x2301, 0xba17, 0x9cf0, 0x612f, 0x8ac2, 0xc6d2, 0x1, 0x1);
        gbc.writeMem(0x2301, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xba17);
        EXPECT(gbc.pc(), 0x2303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 036B
        gbc.setState(0x3411, 0xa47b, 0x60b0, 0xf225, 0xecc2, 0x78c7, 0x1, 0x1);
        gbc.writeMem(0x3411, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa47b);
        EXPECT(gbc.pc(), 0x3413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 036C
        gbc.setState(0x7c98, 0x1b99, 0x7410, 0x5e48, 0x3bbd, 0x11e5, 0x0, 0x0);
        gbc.writeMem(0x7c98, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1b99);
        EXPECT(gbc.pc(), 0x7c9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 036D
        gbc.setState(0x35dc, 0xcd87, 0xe0a0, 0x36bd, 0x43fe, 0xf72d, 0x1, 0x0);
        gbc.writeMem(0x35dc, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xcd87);
        EXPECT(gbc.pc(), 0x35de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 036E
        gbc.setState(0x387, 0x68ae, 0xe900, 0x2e21, 0xada, 0x9a99, 0x1, 0x1);
        gbc.writeMem(0x387, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x68ae);
        EXPECT(gbc.pc(), 0x389);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 036F
        gbc.setState(0x4817, 0x1e97, 0xbad0, 0xef17, 0xfbec, 0x8b63, 0x1, 0x0);
        gbc.writeMem(0x4817, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1e97);
        EXPECT(gbc.pc(), 0x4819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0370
        gbc.setState(0xc051, 0x5263, 0x39b0, 0xf9c6, 0x792f, 0x75ca, 0x0, 0x1);
        gbc.writeMem(0xc051, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5263);
        EXPECT(gbc.pc(), 0xc053);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc051), 0xcb);
        EXPECT(gbc.readMem(0xc052), 0xd7);
        // CB D7 0371
        gbc.setState(0x7250, 0xd46, 0xb0, 0x2bb5, 0x11a2, 0x312e, 0x0, 0x1);
        gbc.writeMem(0x7250, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd46);
        EXPECT(gbc.pc(), 0x7252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0372
        gbc.setState(0x6f10, 0xc40e, 0x4730, 0xb0c6, 0x32be, 0xd6fc, 0x1, 0x1);
        gbc.writeMem(0x6f10, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc40e);
        EXPECT(gbc.pc(), 0x6f12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0374
        gbc.setState(0x5fe1, 0xe50, 0x5f80, 0xf3f1, 0x5e77, 0xeb34, 0x1, 0x1);
        gbc.writeMem(0x5fe1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe50);
        EXPECT(gbc.pc(), 0x5fe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0375
        gbc.setState(0xa9a7, 0x7e26, 0xb480, 0x4f03, 0x5102, 0x4f55, 0x0, 0x0);
        gbc.writeMem(0xa9a7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7e26);
        EXPECT(gbc.pc(), 0xa9a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a7), 0xcb);
        EXPECT(gbc.readMem(0xa9a8), 0xd7);
        // CB D7 0376
        gbc.setState(0x7629, 0x2687, 0x4520, 0xffd1, 0xaefe, 0x78de, 0x1, 0x1);
        gbc.writeMem(0x7629, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2687);
        EXPECT(gbc.pc(), 0x762b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0377
        gbc.setState(0xab6, 0xdcc6, 0x6a90, 0x95bb, 0xedd6, 0xf107, 0x0, 0x1);
        gbc.writeMem(0xab6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdcc6);
        EXPECT(gbc.pc(), 0xab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0378
        gbc.setState(0x808b, 0x6aa8, 0x4a60, 0xcbf9, 0x65d3, 0x4f11, 0x1, 0x0);
        gbc.writeMem(0x808b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6aa8);
        EXPECT(gbc.pc(), 0x808d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808b), 0xcb);
        EXPECT(gbc.readMem(0x808c), 0xd7);
        // CB D7 0379
        gbc.setState(0xc1a3, 0x6269, 0xcda0, 0x214f, 0xfa88, 0xd738, 0x1, 0x1);
        gbc.writeMem(0xc1a3, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6269);
        EXPECT(gbc.pc(), 0xc1a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a3), 0xcb);
        EXPECT(gbc.readMem(0xc1a4), 0xd7);
        // CB D7 037A
        gbc.setState(0x8766, 0xa5cc, 0x3b50, 0xf3af, 0x1180, 0xa061, 0x0, 0x1);
        gbc.writeMem(0x8766, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa5cc);
        EXPECT(gbc.pc(), 0x8768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8766), 0xcb);
        EXPECT(gbc.readMem(0x8767), 0xd7);
        // CB D7 037B
        gbc.setState(0x9a77, 0xb7b8, 0x1c0, 0xc3a8, 0xf3d, 0x655, 0x1, 0x1);
        gbc.writeMem(0x9a77, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb7b8);
        EXPECT(gbc.pc(), 0x9a79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a77), 0xcb);
        EXPECT(gbc.readMem(0x9a78), 0xd7);
        // CB D7 037C
        gbc.setState(0xed16, 0x913e, 0xa310, 0x154a, 0xc43a, 0x267, 0x1, 0x0);
        gbc.writeMem(0xed16, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x913e);
        EXPECT(gbc.pc(), 0xed18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed16), 0xcb);
        EXPECT(gbc.readMem(0xed17), 0xd7);
        // CB D7 037D
        gbc.setState(0xc777, 0x74e0, 0xf8e0, 0x9bf2, 0x3509, 0x71d0, 0x0, 0x1);
        gbc.writeMem(0xc777, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x74e0);
        EXPECT(gbc.pc(), 0xc779);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc777), 0xcb);
        EXPECT(gbc.readMem(0xc778), 0xd7);
        // CB D7 037E
        gbc.setState(0x2607, 0x13a2, 0x3ad0, 0xdd8b, 0x45d6, 0x4c71, 0x1, 0x0);
        gbc.writeMem(0x2607, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x13a2);
        EXPECT(gbc.pc(), 0x2609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 037F
        gbc.setState(0x751d, 0x4d79, 0xea00, 0x3abb, 0x4cc2, 0xf44a, 0x0, 0x0);
        gbc.writeMem(0x751d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4d79);
        EXPECT(gbc.pc(), 0x751f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0380
        gbc.setState(0xa565, 0x30b, 0x9da0, 0xd46b, 0xdfa0, 0xf297, 0x0, 0x1);
        gbc.writeMem(0xa565, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x30b);
        EXPECT(gbc.pc(), 0xa567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa565), 0xcb);
        EXPECT(gbc.readMem(0xa566), 0xd7);
        // CB D7 0381
        gbc.setState(0x1684, 0x2a91, 0x5370, 0xc5d7, 0x70d4, 0x1d6e, 0x0, 0x0);
        gbc.writeMem(0x1684, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2a91);
        EXPECT(gbc.pc(), 0x1686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0382
        gbc.setState(0x3dd9, 0x3922, 0x7670, 0x6ed5, 0xace, 0x3924, 0x0, 0x1);
        gbc.writeMem(0x3dd9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3922);
        EXPECT(gbc.pc(), 0x3ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0383
        gbc.setState(0x7cc0, 0x1aa5, 0x8e0, 0x6264, 0xae4f, 0x6b0c, 0x0, 0x0);
        gbc.writeMem(0x7cc0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1aa5);
        EXPECT(gbc.pc(), 0x7cc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0384
        gbc.setState(0xa886, 0x6a76, 0xc9c0, 0xad68, 0xf5df, 0x5228, 0x1, 0x1);
        gbc.writeMem(0xa886, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6a76);
        EXPECT(gbc.pc(), 0xa888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa886), 0xcb);
        EXPECT(gbc.readMem(0xa887), 0xd7);
        // CB D7 0385
        gbc.setState(0x5035, 0x8e2b, 0x5050, 0x8605, 0xe6a0, 0x18aa, 0x0, 0x1);
        gbc.writeMem(0x5035, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8e2b);
        EXPECT(gbc.pc(), 0x5037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0386
        gbc.setState(0x487b, 0x1c0a, 0x32f0, 0xafb7, 0xacf0, 0x772c, 0x0, 0x0);
        gbc.writeMem(0x487b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1c0a);
        EXPECT(gbc.pc(), 0x487d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0387
        gbc.setState(0x20b9, 0xbd73, 0x690, 0x98d7, 0x862d, 0xded2, 0x0, 0x0);
        gbc.writeMem(0x20b9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbd73);
        EXPECT(gbc.pc(), 0x20bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0388
        gbc.setState(0xaa3b, 0x2b09, 0x6e10, 0x71fd, 0x90c9, 0x4355, 0x1, 0x1);
        gbc.writeMem(0xaa3b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2b09);
        EXPECT(gbc.pc(), 0xaa3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa3b), 0xcb);
        EXPECT(gbc.readMem(0xaa3c), 0xd7);
        // CB D7 0389
        gbc.setState(0xabe8, 0xd1df, 0x4bd0, 0xc20c, 0x196f, 0x1d77, 0x1, 0x1);
        gbc.writeMem(0xabe8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd1df);
        EXPECT(gbc.pc(), 0xabea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabe8), 0xcb);
        EXPECT(gbc.readMem(0xabe9), 0xd7);
        // CB D7 038A
        gbc.setState(0x186, 0xc7f2, 0x8cc0, 0xffde, 0x5391, 0x64c5, 0x1, 0x1);
        gbc.writeMem(0x186, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc7f2);
        EXPECT(gbc.pc(), 0x188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 038B
        gbc.setState(0x489a, 0x98d6, 0xfac0, 0xd7f8, 0xcfd5, 0x2cab, 0x1, 0x0);
        gbc.writeMem(0x489a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x98d6);
        EXPECT(gbc.pc(), 0x489c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 038C
        gbc.setState(0xd22f, 0x9e52, 0x2310, 0x208a, 0x46f6, 0xc016, 0x1, 0x1);
        gbc.writeMem(0xd22f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9e52);
        EXPECT(gbc.pc(), 0xd231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd22f), 0xcb);
        EXPECT(gbc.readMem(0xd230), 0xd7);
        // CB D7 038D
        gbc.setState(0x7948, 0xc9cf, 0x2170, 0x9897, 0xda3c, 0xcce5, 0x0, 0x1);
        gbc.writeMem(0x7948, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc9cf);
        EXPECT(gbc.pc(), 0x794a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 038F
        gbc.setState(0x8aad, 0x7edb, 0x5f80, 0xf8e8, 0xa2fa, 0x95f8, 0x1, 0x1);
        gbc.writeMem(0x8aad, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7edb);
        EXPECT(gbc.pc(), 0x8aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aad), 0xcb);
        EXPECT(gbc.readMem(0x8aae), 0xd7);
        // CB D7 0390
        gbc.setState(0xa925, 0x1846, 0xeee0, 0xf0b, 0x5f33, 0x8993, 0x1, 0x1);
        gbc.writeMem(0xa925, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1846);
        EXPECT(gbc.pc(), 0xa927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa925), 0xcb);
        EXPECT(gbc.readMem(0xa926), 0xd7);
        // CB D7 0391
        gbc.setState(0x4824, 0x3214, 0xe7c0, 0xed99, 0x1f96, 0x19c6, 0x1, 0x1);
        gbc.writeMem(0x4824, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3214);
        EXPECT(gbc.pc(), 0x4826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0392
        gbc.setState(0x1019, 0xf2ed, 0x7510, 0x4562, 0xecb4, 0xfaf4, 0x0, 0x0);
        gbc.writeMem(0x1019, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf2ed);
        EXPECT(gbc.pc(), 0x101b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0393
        gbc.setState(0x7c66, 0x4e05, 0x1900, 0xd719, 0x7a26, 0xf0a0, 0x0, 0x0);
        gbc.writeMem(0x7c66, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4e05);
        EXPECT(gbc.pc(), 0x7c68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0394
        gbc.setState(0x7461, 0x577b, 0xa500, 0xec48, 0x788b, 0xb261, 0x0, 0x0);
        gbc.writeMem(0x7461, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x577b);
        EXPECT(gbc.pc(), 0x7463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 0395
        gbc.setState(0xa233, 0xdf7b, 0xa0d0, 0x1d8, 0x4bb2, 0x7f19, 0x0, 0x0);
        gbc.writeMem(0xa233, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdf7b);
        EXPECT(gbc.pc(), 0xa235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa233), 0xcb);
        EXPECT(gbc.readMem(0xa234), 0xd7);
        // CB D7 0396
        gbc.setState(0x3271, 0x8d8c, 0x2bb0, 0x409e, 0x36c3, 0x1c87, 0x0, 0x0);
        gbc.writeMem(0x3271, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8d8c);
        EXPECT(gbc.pc(), 0x3273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 0398
        gbc.setState(0x8179, 0x232f, 0xd2e0, 0xfe3e, 0x7c74, 0x3e91, 0x0, 0x0);
        gbc.writeMem(0x8179, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x232f);
        EXPECT(gbc.pc(), 0x817b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8179), 0xcb);
        EXPECT(gbc.readMem(0x817a), 0xd7);
        // CB D7 0399
        gbc.setState(0x4d45, 0xdd4e, 0x8fb0, 0x34d8, 0xa60c, 0x7eae, 0x0, 0x1);
        gbc.writeMem(0x4d45, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xdd4e);
        EXPECT(gbc.pc(), 0x4d47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 039A
        gbc.setState(0x723e, 0x21b4, 0x2f60, 0x8744, 0x53e4, 0xdc90, 0x1, 0x0);
        gbc.writeMem(0x723e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x21b4);
        EXPECT(gbc.pc(), 0x7240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 039B
        gbc.setState(0x1c0c, 0x5a, 0x5ef0, 0x8ee2, 0x2cd1, 0x9f43, 0x1, 0x0);
        gbc.writeMem(0x1c0c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5a);
        EXPECT(gbc.pc(), 0x1c0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 039D
        gbc.setState(0x20a0, 0xb700, 0x36a0, 0xe1a4, 0x2cae, 0xc023, 0x1, 0x0);
        gbc.writeMem(0x20a0, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb700);
        EXPECT(gbc.pc(), 0x20a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 039E
        gbc.setState(0xd9c5, 0x1bfe, 0x3e50, 0x4a89, 0x8511, 0xa9e3, 0x1, 0x1);
        gbc.writeMem(0xd9c5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1bfe);
        EXPECT(gbc.pc(), 0xd9c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9c5), 0xcb);
        EXPECT(gbc.readMem(0xd9c6), 0xd7);
        // CB D7 039F
        gbc.setState(0x833, 0x8b1f, 0xe210, 0x7b1c, 0x5167, 0x3f63, 0x1, 0x0);
        gbc.writeMem(0x833, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8b1f);
        EXPECT(gbc.pc(), 0x835);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03A1
        gbc.setState(0x5803, 0x2b96, 0x86c0, 0xd941, 0xa668, 0x8941, 0x0, 0x0);
        gbc.writeMem(0x5803, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2b96);
        EXPECT(gbc.pc(), 0x5805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03A2
        gbc.setState(0xcf49, 0x624c, 0xd560, 0x9c92, 0x1ce9, 0xfe8a, 0x1, 0x1);
        gbc.writeMem(0xcf49, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x624c);
        EXPECT(gbc.pc(), 0xcf4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf49), 0xcb);
        EXPECT(gbc.readMem(0xcf4a), 0xd7);
        // CB D7 03A3
        gbc.setState(0x802b, 0xb9e2, 0xc560, 0x97db, 0x6212, 0x800, 0x0, 0x1);
        gbc.writeMem(0x802b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb9e2);
        EXPECT(gbc.pc(), 0x802d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x802b), 0xcb);
        EXPECT(gbc.readMem(0x802c), 0xd7);
        // CB D7 03A4
        gbc.setState(0xbf41, 0xe3b4, 0x5430, 0x8af3, 0xa70a, 0x6542, 0x0, 0x1);
        gbc.writeMem(0xbf41, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe3b4);
        EXPECT(gbc.pc(), 0xbf43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf41), 0xcb);
        EXPECT(gbc.readMem(0xbf42), 0xd7);
        // CB D7 03A5
        gbc.setState(0x10fb, 0xad54, 0xc420, 0xd46b, 0xd56e, 0x8501, 0x1, 0x1);
        gbc.writeMem(0x10fb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xad54);
        EXPECT(gbc.pc(), 0x10fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03A6
        gbc.setState(0xb1c1, 0xa002, 0x63f0, 0xd773, 0xcba, 0xc0a2, 0x1, 0x0);
        gbc.writeMem(0xb1c1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa002);
        EXPECT(gbc.pc(), 0xb1c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1c1), 0xcb);
        EXPECT(gbc.readMem(0xb1c2), 0xd7);
        // CB D7 03A7
        gbc.setState(0x6a19, 0x270f, 0xbb50, 0x33d0, 0x2151, 0x28d2, 0x0, 0x0);
        gbc.writeMem(0x6a19, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x270f);
        EXPECT(gbc.pc(), 0x6a1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03A8
        gbc.setState(0xc50d, 0xed39, 0x360, 0xb589, 0xa9ab, 0x7e33, 0x1, 0x1);
        gbc.writeMem(0xc50d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xed39);
        EXPECT(gbc.pc(), 0xc50f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc50d), 0xcb);
        EXPECT(gbc.readMem(0xc50e), 0xd7);
        // CB D7 03A9
        gbc.setState(0x835d, 0xa47e, 0xb880, 0xb418, 0x3874, 0xb639, 0x0, 0x0);
        gbc.writeMem(0x835d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa47e);
        EXPECT(gbc.pc(), 0x835f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x835d), 0xcb);
        EXPECT(gbc.readMem(0x835e), 0xd7);
        // CB D7 03AA
        gbc.setState(0xc534, 0x67d2, 0x7800, 0x1813, 0x5d2e, 0xb5cc, 0x0, 0x1);
        gbc.writeMem(0xc534, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x67d2);
        EXPECT(gbc.pc(), 0xc536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc534), 0xcb);
        EXPECT(gbc.readMem(0xc535), 0xd7);
        // CB D7 03AB
        gbc.setState(0xdeb1, 0x9ca0, 0xcda0, 0xdb4b, 0x8a38, 0x1a57, 0x1, 0x1);
        gbc.writeMem(0xdeb1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9ca0);
        EXPECT(gbc.pc(), 0xdeb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb1), 0xcb);
        EXPECT(gbc.readMem(0xdeb2), 0xd7);
        // CB D7 03AC
        gbc.setState(0x2029, 0xd38b, 0x4b20, 0x4641, 0x932e, 0x2ed, 0x0, 0x0);
        gbc.writeMem(0x2029, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd38b);
        EXPECT(gbc.pc(), 0x202b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03AD
        gbc.setState(0x34d4, 0x3be6, 0x2fe0, 0x79c0, 0xbad7, 0x5396, 0x0, 0x1);
        gbc.writeMem(0x34d4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3be6);
        EXPECT(gbc.pc(), 0x34d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03AE
        gbc.setState(0x528d, 0xe24b, 0x510, 0x340, 0x9670, 0x836c, 0x1, 0x1);
        gbc.writeMem(0x528d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe24b);
        EXPECT(gbc.pc(), 0x528f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03AF
        gbc.setState(0xc9a5, 0x622c, 0x7df0, 0x91cb, 0x557b, 0x3317, 0x1, 0x1);
        gbc.writeMem(0xc9a5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x622c);
        EXPECT(gbc.pc(), 0xc9a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a5), 0xcb);
        EXPECT(gbc.readMem(0xc9a6), 0xd7);
        // CB D7 03B0
        gbc.setState(0x438f, 0x1790, 0xb770, 0xccb6, 0xd966, 0x3cd6, 0x1, 0x0);
        gbc.writeMem(0x438f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1790);
        EXPECT(gbc.pc(), 0x4391);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03B1
        gbc.setState(0x8a07, 0xb4ec, 0xf9b0, 0x1efd, 0xb02c, 0x33a1, 0x1, 0x1);
        gbc.writeMem(0x8a07, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xb4ec);
        EXPECT(gbc.pc(), 0x8a09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a07), 0xcb);
        EXPECT(gbc.readMem(0x8a08), 0xd7);
        // CB D7 03B2
        gbc.setState(0x85e6, 0x5554, 0x6ef0, 0x69ff, 0x1e7f, 0xb1f, 0x0, 0x0);
        gbc.writeMem(0x85e6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5554);
        EXPECT(gbc.pc(), 0x85e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e6), 0xcb);
        EXPECT(gbc.readMem(0x85e7), 0xd7);
        // CB D7 03B3
        gbc.setState(0x53fb, 0x504a, 0xe970, 0xd7b1, 0xf2a4, 0xe4d7, 0x0, 0x0);
        gbc.writeMem(0x53fb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x504a);
        EXPECT(gbc.pc(), 0x53fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03B4
        gbc.setState(0xe427, 0xaecf, 0x62c0, 0xef55, 0x78c5, 0x8b48, 0x1, 0x0);
        gbc.writeMem(0xe427, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xaecf);
        EXPECT(gbc.pc(), 0xe429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe427), 0xcb);
        EXPECT(gbc.readMem(0xe428), 0xd7);
        // CB D7 03B5
        gbc.setState(0x49a8, 0xf978, 0x31d0, 0x7647, 0x3d95, 0x3129, 0x0, 0x1);
        gbc.writeMem(0x49a8, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf978);
        EXPECT(gbc.pc(), 0x49aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03B6
        gbc.setState(0x6880, 0xe315, 0x6780, 0xf722, 0xf148, 0x2d52, 0x0, 0x1);
        gbc.writeMem(0x6880, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe315);
        EXPECT(gbc.pc(), 0x6882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03B7
        gbc.setState(0x44ed, 0x94ef, 0x4d00, 0xa941, 0xe913, 0x3e57, 0x0, 0x1);
        gbc.writeMem(0x44ed, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x94ef);
        EXPECT(gbc.pc(), 0x44ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03B8
        gbc.setState(0xaa05, 0x4293, 0x4b90, 0xc7e1, 0xd403, 0x48d9, 0x1, 0x0);
        gbc.writeMem(0xaa05, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4293);
        EXPECT(gbc.pc(), 0xaa07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa05), 0xcb);
        EXPECT(gbc.readMem(0xaa06), 0xd7);
        // CB D7 03B9
        gbc.setState(0x58aa, 0x3af5, 0xff20, 0x288a, 0x4c1f, 0xd4ad, 0x1, 0x1);
        gbc.writeMem(0x58aa, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3af5);
        EXPECT(gbc.pc(), 0x58ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03BA
        gbc.setState(0x1abb, 0x9be3, 0x97d0, 0x4de5, 0x63a1, 0xec76, 0x1, 0x0);
        gbc.writeMem(0x1abb, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9be3);
        EXPECT(gbc.pc(), 0x1abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03BB
        gbc.setState(0x5d53, 0x681c, 0x1db0, 0xa551, 0xec25, 0x96de, 0x1, 0x1);
        gbc.writeMem(0x5d53, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x681c);
        EXPECT(gbc.pc(), 0x5d55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03BC
        gbc.setState(0x8abd, 0xe209, 0x6b80, 0x341, 0x254e, 0x291c, 0x1, 0x1);
        gbc.writeMem(0x8abd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe209);
        EXPECT(gbc.pc(), 0x8abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8abd), 0xcb);
        EXPECT(gbc.readMem(0x8abe), 0xd7);
        // CB D7 03BD
        gbc.setState(0x154, 0xdea, 0x7d60, 0xb353, 0x5f57, 0x3eeb, 0x0, 0x1);
        gbc.writeMem(0x154, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdea);
        EXPECT(gbc.pc(), 0x156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03BE
        gbc.setState(0x2db5, 0x7603, 0xbb20, 0x410e, 0xae5e, 0x36bc, 0x0, 0x0);
        gbc.writeMem(0x2db5, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7603);
        EXPECT(gbc.pc(), 0x2db7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03BF
        gbc.setState(0x5a9, 0x99d0, 0x96a0, 0x79b9, 0x7b18, 0xb769, 0x1, 0x1);
        gbc.writeMem(0x5a9, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x99d0);
        EXPECT(gbc.pc(), 0x5ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03C0
        gbc.setState(0x682e, 0xc95b, 0x1bc0, 0x67fb, 0x5a3d, 0xae1e, 0x1, 0x0);
        gbc.writeMem(0x682e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc95b);
        EXPECT(gbc.pc(), 0x6830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03C1
        gbc.setState(0xca9b, 0x356f, 0xcdc0, 0xf29b, 0x36c3, 0x4769, 0x1, 0x1);
        gbc.writeMem(0xca9b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x356f);
        EXPECT(gbc.pc(), 0xca9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca9b), 0xcb);
        EXPECT(gbc.readMem(0xca9c), 0xd7);
        // CB D7 03C2
        gbc.setState(0x4482, 0xa687, 0x7ea0, 0xb37e, 0x80ef, 0x8ec5, 0x1, 0x0);
        gbc.writeMem(0x4482, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa687);
        EXPECT(gbc.pc(), 0x4484);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03C3
        gbc.setState(0xc485, 0x60a5, 0x1df0, 0xf8c7, 0x36ee, 0xb61b, 0x0, 0x1);
        gbc.writeMem(0xc485, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x60a5);
        EXPECT(gbc.pc(), 0xc487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc485), 0xcb);
        EXPECT(gbc.readMem(0xc486), 0xd7);
        // CB D7 03C4
        gbc.setState(0x9f, 0x2465, 0x1280, 0xfff3, 0x249e, 0x53ef, 0x1, 0x1);
        gbc.writeMem(0x9f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2465);
        EXPECT(gbc.pc(), 0xa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03C5
        gbc.setState(0x114, 0x72a9, 0xd370, 0x990c, 0xa7c, 0x2e66, 0x0, 0x1);
        gbc.writeMem(0x114, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x72a9);
        EXPECT(gbc.pc(), 0x116);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03C6
        gbc.setState(0x3404, 0x28dc, 0x6ee0, 0x2fd4, 0x3a07, 0x3ca1, 0x1, 0x1);
        gbc.writeMem(0x3404, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x28dc);
        EXPECT(gbc.pc(), 0x3406);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03C7
        gbc.setState(0xbe77, 0x970e, 0xa960, 0x5943, 0x72b6, 0x315a, 0x1, 0x1);
        gbc.writeMem(0xbe77, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x970e);
        EXPECT(gbc.pc(), 0xbe79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe77), 0xcb);
        EXPECT(gbc.readMem(0xbe78), 0xd7);
        // CB D7 03C8
        gbc.setState(0xa51, 0x44e8, 0xa70, 0x8561, 0x635, 0xeda2, 0x1, 0x0);
        gbc.writeMem(0xa51, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x44e8);
        EXPECT(gbc.pc(), 0xa53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03C9
        gbc.setState(0x1669, 0x3082, 0xb460, 0xd55f, 0x7b1, 0x52cd, 0x1, 0x1);
        gbc.writeMem(0x1669, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3082);
        EXPECT(gbc.pc(), 0x166b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03CA
        gbc.setState(0x5917, 0x2b75, 0x8690, 0xaa94, 0xfb0a, 0x64cd, 0x1, 0x1);
        gbc.writeMem(0x5917, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2b75);
        EXPECT(gbc.pc(), 0x5919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03CB
        gbc.setState(0x7503, 0xd61e, 0x1130, 0x9401, 0x4e35, 0x75f6, 0x0, 0x1);
        gbc.writeMem(0x7503, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd61e);
        EXPECT(gbc.pc(), 0x7505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03CC
        gbc.setState(0xd0fd, 0x37f7, 0x92b0, 0x2faf, 0xe015, 0x6264, 0x1, 0x1);
        gbc.writeMem(0xd0fd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x37f7);
        EXPECT(gbc.pc(), 0xd0ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0fd), 0xcb);
        EXPECT(gbc.readMem(0xd0fe), 0xd7);
        // CB D7 03CD
        gbc.setState(0x6b78, 0xc451, 0xcab0, 0xf39f, 0x3678, 0x8493, 0x0, 0x0);
        gbc.writeMem(0x6b78, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc451);
        EXPECT(gbc.pc(), 0x6b7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03CE
        gbc.setState(0x1fe7, 0xfcf8, 0xe90, 0x6d07, 0xba25, 0x500a, 0x1, 0x1);
        gbc.writeMem(0x1fe7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfcf8);
        EXPECT(gbc.pc(), 0x1fe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03CF
        gbc.setState(0xdda2, 0x1d8, 0x4b50, 0x9394, 0xb001, 0xc2c1, 0x0, 0x1);
        gbc.writeMem(0xdda2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1d8);
        EXPECT(gbc.pc(), 0xdda4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdda2), 0xcb);
        EXPECT(gbc.readMem(0xdda3), 0xd7);
        // CB D7 03D0
        gbc.setState(0x8ad4, 0x34d0, 0x4aa0, 0xa4cd, 0x3cc5, 0xcfa0, 0x1, 0x1);
        gbc.writeMem(0x8ad4, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x34d0);
        EXPECT(gbc.pc(), 0x8ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ad4), 0xcb);
        EXPECT(gbc.readMem(0x8ad5), 0xd7);
        // CB D7 03D1
        gbc.setState(0x6b02, 0x73a7, 0x2e10, 0x8b36, 0x6450, 0xb32f, 0x1, 0x1);
        gbc.writeMem(0x6b02, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x73a7);
        EXPECT(gbc.pc(), 0x6b04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03D2
        gbc.setState(0xc5a7, 0xc3a4, 0x1330, 0x5e11, 0x8a66, 0x83ec, 0x1, 0x1);
        gbc.writeMem(0xc5a7, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc3a4);
        EXPECT(gbc.pc(), 0xc5a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5a7), 0xcb);
        EXPECT(gbc.readMem(0xc5a8), 0xd7);
        // CB D7 03D3
        gbc.setState(0x3446, 0x950d, 0x1760, 0x61c1, 0x7d17, 0x932b, 0x1, 0x1);
        gbc.writeMem(0x3446, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x950d);
        EXPECT(gbc.pc(), 0x3448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03D5
        gbc.setState(0x2059, 0x1d1a, 0x1400, 0xc3f8, 0xa559, 0x641d, 0x0, 0x1);
        gbc.writeMem(0x2059, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x1d1a);
        EXPECT(gbc.pc(), 0x205b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03D6
        gbc.setState(0xc8d6, 0x2e56, 0xcd60, 0x4f0, 0xc6cc, 0x2ee5, 0x1, 0x1);
        gbc.writeMem(0xc8d6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2e56);
        EXPECT(gbc.pc(), 0xc8d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d6), 0xcb);
        EXPECT(gbc.readMem(0xc8d7), 0xd7);
        // CB D7 03D7
        gbc.setState(0xe3d6, 0x4d8, 0x2530, 0x49b8, 0x9300, 0x5f, 0x0, 0x0);
        gbc.writeMem(0xe3d6, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4d8);
        EXPECT(gbc.pc(), 0xe3d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3d6), 0xcb);
        EXPECT(gbc.readMem(0xe3d7), 0xd7);
        // CB D7 03D9
        gbc.setState(0x374b, 0x84b1, 0x4ab0, 0x7, 0x999b, 0x28b4, 0x1, 0x0);
        gbc.writeMem(0x374b, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x84b1);
        EXPECT(gbc.pc(), 0x374d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03DA
        gbc.setState(0x52a, 0xb2fb, 0xa720, 0x9250, 0xdf61, 0xc71, 0x1, 0x0);
        gbc.writeMem(0x52a, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb2fb);
        EXPECT(gbc.pc(), 0x52c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03DB
        gbc.setState(0x426c, 0xe254, 0xcef0, 0x4084, 0x206b, 0x25aa, 0x1, 0x0);
        gbc.writeMem(0x426c, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe254);
        EXPECT(gbc.pc(), 0x426e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03DC
        gbc.setState(0x5c0e, 0x2f41, 0x80b0, 0x7d2e, 0x1686, 0xfbec, 0x1, 0x1);
        gbc.writeMem(0x5c0e, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2f41);
        EXPECT(gbc.pc(), 0x5c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03DD
        gbc.setState(0xcb5d, 0x4b44, 0x3a40, 0xe869, 0x20fd, 0x64df, 0x0, 0x0);
        gbc.writeMem(0xcb5d, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4b44);
        EXPECT(gbc.pc(), 0xcb5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb5d), 0xcb);
        EXPECT(gbc.readMem(0xcb5e), 0xd7);
        // CB D7 03DE
        gbc.setState(0x7c86, 0x8150, 0x7e50, 0x9d39, 0x4dff, 0xddc0, 0x0, 0x1);
        gbc.writeMem(0x7c86, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8150);
        EXPECT(gbc.pc(), 0x7c88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03DF
        gbc.setState(0x807f, 0xe63d, 0x7c20, 0xcfae, 0xa7fd, 0x7ef1, 0x0, 0x0);
        gbc.writeMem(0x807f, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe63d);
        EXPECT(gbc.pc(), 0x8081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807f), 0xcb);
        EXPECT(gbc.readMem(0x8080), 0xd7);
        // CB D7 03E0
        gbc.setState(0xba51, 0x34eb, 0x5300, 0x6235, 0xb0eb, 0x836a, 0x0, 0x0);
        gbc.writeMem(0xba51, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x34eb);
        EXPECT(gbc.pc(), 0xba53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba51), 0xcb);
        EXPECT(gbc.readMem(0xba52), 0xd7);
        // CB D7 03E1
        gbc.setState(0x2ad2, 0xd2c0, 0xbd80, 0x9a6d, 0x33a1, 0x37ad, 0x0, 0x0);
        gbc.writeMem(0x2ad2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd2c0);
        EXPECT(gbc.pc(), 0x2ad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03E2
        gbc.setState(0x57ff, 0x6334, 0x3530, 0x7419, 0x8ad3, 0xe2fb, 0x0, 0x0);
        gbc.writeMem(0x57ff, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6334);
        EXPECT(gbc.pc(), 0x5801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03E3
        gbc.setState(0x8de1, 0x2eab, 0x7fc0, 0xa248, 0xe776, 0x9e4c, 0x1, 0x0);
        gbc.writeMem(0x8de1, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2eab);
        EXPECT(gbc.pc(), 0x8de3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de1), 0xcb);
        EXPECT(gbc.readMem(0x8de2), 0xd7);
        // CB D7 03E4
        gbc.setState(0x13cd, 0x1b6a, 0x4260, 0x217e, 0xd0bf, 0x9f09, 0x1, 0x1);
        gbc.writeMem(0x13cd, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1b6a);
        EXPECT(gbc.pc(), 0x13cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB D7 03E5
        gbc.setState(0x1db2, 0x88c7, 0x390, 0x3878, 0x8e3c, 0xfc11, 0x0, 0x1);
        gbc.writeMem(0x1db2, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x88c7);
        EXPECT(gbc.pc(), 0x1db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB D7 03E7
        gbc.setState(0x1214, 0xb020, 0x4a0, 0xa94b, 0x28eb, 0x55f7, 0x1, 0x0);
        gbc.writeMem(0x1214, { 0xcb, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb020);
        EXPECT(gbc.pc(), 0x1216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
