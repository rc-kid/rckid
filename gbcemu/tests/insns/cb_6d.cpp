#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_6d)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_6d) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 6D 0000
        gbc.setState(0x28fd, 0xb355, 0x8540, 0x2c04, 0x445e, 0xba2, 0x1, 0x0);
        gbc.writeMem(0x28fd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb355);
        EXPECT(gbc.pc(), 0x28ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0001
        gbc.setState(0x4e59, 0x1cc2, 0x1e50, 0x63d7, 0x114f, 0x2980, 0x0, 0x0);
        gbc.writeMem(0x4e59, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1cc2);
        EXPECT(gbc.pc(), 0x4e5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0002
        gbc.setState(0x2057, 0xbef, 0x6d50, 0x3e06, 0xc659, 0xf688, 0x1, 0x1);
        gbc.writeMem(0x2057, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xbef);
        EXPECT(gbc.pc(), 0x2059);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0003
        gbc.setState(0xa2ca, 0x6cd9, 0x1db0, 0xa615, 0xd47b, 0x6244, 0x0, 0x1);
        gbc.writeMem(0xa2ca, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6cd9);
        EXPECT(gbc.pc(), 0xa2cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ca), 0xcb);
        EXPECT(gbc.readMem(0xa2cb), 0x6d);
        // CB 6D 0004
        gbc.setState(0x85f4, 0x7aa3, 0xc390, 0x7e68, 0x3655, 0x71ef, 0x1, 0x1);
        gbc.writeMem(0x85f4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x7aa3);
        EXPECT(gbc.pc(), 0x85f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85f4), 0xcb);
        EXPECT(gbc.readMem(0x85f5), 0x6d);
        // CB 6D 0005
        gbc.setState(0xc148, 0xf75, 0xa0d0, 0x8460, 0x1c74, 0xa97d, 0x0, 0x0);
        gbc.writeMem(0xc148, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf75);
        EXPECT(gbc.pc(), 0xc14a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc148), 0xcb);
        EXPECT(gbc.readMem(0xc149), 0x6d);
        // CB 6D 0006
        gbc.setState(0x7726, 0x464, 0xf4f0, 0x5deb, 0xe664, 0xce91, 0x1, 0x0);
        gbc.writeMem(0x7726, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x464);
        EXPECT(gbc.pc(), 0x7728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0007
        gbc.setState(0xb2e7, 0x6ba2, 0x2250, 0x7c3e, 0x681, 0xaf68, 0x0, 0x0);
        gbc.writeMem(0xb2e7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6ba2);
        EXPECT(gbc.pc(), 0xb2e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2e7), 0xcb);
        EXPECT(gbc.readMem(0xb2e8), 0x6d);
        // CB 6D 0008
        gbc.setState(0x1004, 0xe69a, 0xfe10, 0xeaf4, 0xf46b, 0x4b93, 0x0, 0x0);
        gbc.writeMem(0x1004, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe69a);
        EXPECT(gbc.pc(), 0x1006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0009
        gbc.setState(0x8bde, 0x3ee, 0x6a10, 0xac21, 0x5ea, 0x8837, 0x1, 0x1);
        gbc.writeMem(0x8bde, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3ee);
        EXPECT(gbc.pc(), 0x8be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bde), 0xcb);
        EXPECT(gbc.readMem(0x8bdf), 0x6d);
        // CB 6D 000A
        gbc.setState(0x2bce, 0x1299, 0x5f0, 0xf0b5, 0x8590, 0xf051, 0x1, 0x0);
        gbc.writeMem(0x2bce, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1299);
        EXPECT(gbc.pc(), 0x2bd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 000B
        gbc.setState(0xe16c, 0x91e, 0xd3d0, 0xb5a3, 0x46d5, 0x5ea5, 0x1, 0x1);
        gbc.writeMem(0xe16c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x91e);
        EXPECT(gbc.pc(), 0xe16e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe16c), 0xcb);
        EXPECT(gbc.readMem(0xe16d), 0x6d);
        // CB 6D 000C
        gbc.setState(0x55ef, 0xb8d2, 0x6480, 0x9ead, 0x2134, 0x1b6e, 0x0, 0x1);
        gbc.writeMem(0x55ef, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb8d2);
        EXPECT(gbc.pc(), 0x55f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 000E
        gbc.setState(0xdc55, 0xdecb, 0xbd80, 0x7385, 0xdf15, 0x23d7, 0x1, 0x0);
        gbc.writeMem(0xdc55, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xdecb);
        EXPECT(gbc.pc(), 0xdc57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc55), 0xcb);
        EXPECT(gbc.readMem(0xdc56), 0x6d);
        // CB 6D 0010
        gbc.setState(0x23fb, 0x8f05, 0xb370, 0x6dbb, 0x2598, 0xdaaa, 0x0, 0x1);
        gbc.writeMem(0x23fb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8f05);
        EXPECT(gbc.pc(), 0x23fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0011
        gbc.setState(0x1e01, 0xbace, 0x5890, 0x245f, 0x4b22, 0xb347, 0x0, 0x1);
        gbc.writeMem(0x1e01, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbace);
        EXPECT(gbc.pc(), 0x1e03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0012
        gbc.setState(0xe45d, 0x84b5, 0xd470, 0x43e1, 0xecb6, 0x1f32, 0x1, 0x0);
        gbc.writeMem(0xe45d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x84b5);
        EXPECT(gbc.pc(), 0xe45f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe45d), 0xcb);
        EXPECT(gbc.readMem(0xe45e), 0x6d);
        // CB 6D 0013
        gbc.setState(0x6163, 0xdd9d, 0x9180, 0x69fa, 0x2eb4, 0xf1a, 0x1, 0x0);
        gbc.writeMem(0x6163, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xdd9d);
        EXPECT(gbc.pc(), 0x6165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0016
        gbc.setState(0x3da9, 0xe03d, 0xab00, 0x8dbe, 0xd7a5, 0x463c, 0x1, 0x0);
        gbc.writeMem(0x3da9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe03d);
        EXPECT(gbc.pc(), 0x3dab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0017
        gbc.setState(0x7e56, 0x3112, 0x8010, 0x554d, 0x506b, 0xc632, 0x0, 0x0);
        gbc.writeMem(0x7e56, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3112);
        EXPECT(gbc.pc(), 0x7e58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0018
        gbc.setState(0x5efb, 0xcffd, 0x34a0, 0xd7e5, 0x80b6, 0xfdef, 0x0, 0x1);
        gbc.writeMem(0x5efb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xcffd);
        EXPECT(gbc.pc(), 0x5efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0019
        gbc.setState(0x86d5, 0xf45f, 0x3d00, 0x776f, 0xa692, 0xe21d, 0x1, 0x1);
        gbc.writeMem(0x86d5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf45f);
        EXPECT(gbc.pc(), 0x86d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d5), 0xcb);
        EXPECT(gbc.readMem(0x86d6), 0x6d);
        // CB 6D 001A
        gbc.setState(0x8abd, 0xd27, 0x4ad0, 0xff1d, 0x9e15, 0x35a0, 0x0, 0x1);
        gbc.writeMem(0x8abd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd27);
        EXPECT(gbc.pc(), 0x8abf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8abd), 0xcb);
        EXPECT(gbc.readMem(0x8abe), 0x6d);
        // CB 6D 001B
        gbc.setState(0x42d1, 0xe318, 0x4c60, 0xf2b3, 0x133f, 0x1fa2, 0x1, 0x1);
        gbc.writeMem(0x42d1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xe318);
        EXPECT(gbc.pc(), 0x42d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 001D
        gbc.setState(0xed66, 0x16d0, 0x82e0, 0x7048, 0x575, 0x37d1, 0x1, 0x0);
        gbc.writeMem(0xed66, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x16d0);
        EXPECT(gbc.pc(), 0xed68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed66), 0xcb);
        EXPECT(gbc.readMem(0xed67), 0x6d);
        // CB 6D 001E
        gbc.setState(0xe209, 0x9309, 0x4a60, 0xb96b, 0x316, 0x4a5e, 0x1, 0x0);
        gbc.writeMem(0xe209, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9309);
        EXPECT(gbc.pc(), 0xe20b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe209), 0xcb);
        EXPECT(gbc.readMem(0xe20a), 0x6d);
        // CB 6D 001F
        gbc.setState(0xeb56, 0x6c91, 0x12e0, 0x732a, 0xb1ca, 0x6748, 0x1, 0x0);
        gbc.writeMem(0xeb56, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6c91);
        EXPECT(gbc.pc(), 0xeb58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb56), 0xcb);
        EXPECT(gbc.readMem(0xeb57), 0x6d);
        // CB 6D 0021
        gbc.setState(0xa036, 0xff18, 0x4a40, 0x99f5, 0x5810, 0xa618, 0x1, 0x0);
        gbc.writeMem(0xa036, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xff18);
        EXPECT(gbc.pc(), 0xa038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa036), 0xcb);
        EXPECT(gbc.readMem(0xa037), 0x6d);
        // CB 6D 0022
        gbc.setState(0x1a53, 0x2988, 0x57f0, 0x6c20, 0x1842, 0xe161, 0x1, 0x1);
        gbc.writeMem(0x1a53, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2988);
        EXPECT(gbc.pc(), 0x1a55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0023
        gbc.setState(0x8140, 0x172a, 0x8950, 0x4a8a, 0x1096, 0x6a4b, 0x0, 0x1);
        gbc.writeMem(0x8140, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x172a);
        EXPECT(gbc.pc(), 0x8142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8140), 0xcb);
        EXPECT(gbc.readMem(0x8141), 0x6d);
        // CB 6D 0024
        gbc.setState(0xd84, 0x6b15, 0xc9b0, 0x9729, 0x7902, 0x97e5, 0x1, 0x1);
        gbc.writeMem(0xd84, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6b15);
        EXPECT(gbc.pc(), 0xd86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0025
        gbc.setState(0x240e, 0x5528, 0xe9e0, 0x4578, 0xffbc, 0x79b3, 0x1, 0x1);
        gbc.writeMem(0x240e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5528);
        EXPECT(gbc.pc(), 0x2410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0026
        gbc.setState(0x3965, 0xe56b, 0x6540, 0x1846, 0x87ea, 0x8585, 0x0, 0x1);
        gbc.writeMem(0x3965, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe56b);
        EXPECT(gbc.pc(), 0x3967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0027
        gbc.setState(0xe30b, 0x7571, 0xbec0, 0x5ebf, 0x7c31, 0xf7cc, 0x1, 0x1);
        gbc.writeMem(0xe30b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7571);
        EXPECT(gbc.pc(), 0xe30d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe30b), 0xcb);
        EXPECT(gbc.readMem(0xe30c), 0x6d);
        // CB 6D 0028
        gbc.setState(0xb1ee, 0x2706, 0x6780, 0xcb6c, 0x29f7, 0xca9f, 0x1, 0x0);
        gbc.writeMem(0xb1ee, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2706);
        EXPECT(gbc.pc(), 0xb1f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ee), 0xcb);
        EXPECT(gbc.readMem(0xb1ef), 0x6d);
        // CB 6D 002A
        gbc.setState(0xb063, 0xffde, 0x3760, 0xecd3, 0x717d, 0xf878, 0x0, 0x1);
        gbc.writeMem(0xb063, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xffde);
        EXPECT(gbc.pc(), 0xb065);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb063), 0xcb);
        EXPECT(gbc.readMem(0xb064), 0x6d);
        // CB 6D 002B
        gbc.setState(0x854b, 0x71b5, 0xef80, 0xe588, 0xe239, 0x93c4, 0x0, 0x1);
        gbc.writeMem(0x854b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x71b5);
        EXPECT(gbc.pc(), 0x854d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854b), 0xcb);
        EXPECT(gbc.readMem(0x854c), 0x6d);
        // CB 6D 002C
        gbc.setState(0xab45, 0x23b3, 0xa0d0, 0xb0cc, 0xafb3, 0x454e, 0x1, 0x1);
        gbc.writeMem(0xab45, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x23b3);
        EXPECT(gbc.pc(), 0xab47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab45), 0xcb);
        EXPECT(gbc.readMem(0xab46), 0x6d);
        // CB 6D 002D
        gbc.setState(0xa3b8, 0x73ec, 0x200, 0xcd74, 0x1702, 0xe1b5, 0x0, 0x1);
        gbc.writeMem(0xa3b8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x73ec);
        EXPECT(gbc.pc(), 0xa3ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b8), 0xcb);
        EXPECT(gbc.readMem(0xa3b9), 0x6d);
        // CB 6D 002E
        gbc.setState(0x8847, 0xe7a, 0x59d0, 0xc674, 0xfe81, 0x4ffc, 0x1, 0x0);
        gbc.writeMem(0x8847, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe7a);
        EXPECT(gbc.pc(), 0x8849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8847), 0xcb);
        EXPECT(gbc.readMem(0x8848), 0x6d);
        // CB 6D 002F
        gbc.setState(0xefeb, 0xf5bc, 0xae70, 0x286b, 0x7295, 0xaee, 0x1, 0x0);
        gbc.writeMem(0xefeb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf5bc);
        EXPECT(gbc.pc(), 0xefed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefeb), 0xcb);
        EXPECT(gbc.readMem(0xefec), 0x6d);
        // CB 6D 0030
        gbc.setState(0x5bdf, 0x2120, 0x24f0, 0x22d8, 0x9415, 0xfd76, 0x1, 0x0);
        gbc.writeMem(0x5bdf, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2120);
        EXPECT(gbc.pc(), 0x5be1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0032
        gbc.setState(0xc2ae, 0xf818, 0xa350, 0x711b, 0xf741, 0xdf73, 0x0, 0x1);
        gbc.writeMem(0xc2ae, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf818);
        EXPECT(gbc.pc(), 0xc2b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2ae), 0xcb);
        EXPECT(gbc.readMem(0xc2af), 0x6d);
        // CB 6D 0034
        gbc.setState(0x10f8, 0xb9c, 0x6370, 0x580e, 0x593c, 0x25d3, 0x1, 0x0);
        gbc.writeMem(0x10f8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb9c);
        EXPECT(gbc.pc(), 0x10fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0035
        gbc.setState(0x3655, 0xad0f, 0x70, 0x6df9, 0xdd71, 0xdbae, 0x0, 0x1);
        gbc.writeMem(0x3655, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xad0f);
        EXPECT(gbc.pc(), 0x3657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0036
        gbc.setState(0xb5a9, 0x356f, 0xac10, 0x4534, 0xb6e, 0x9bc0, 0x1, 0x1);
        gbc.writeMem(0xb5a9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x356f);
        EXPECT(gbc.pc(), 0xb5ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5a9), 0xcb);
        EXPECT(gbc.readMem(0xb5aa), 0x6d);
        // CB 6D 0037
        gbc.setState(0x4cd7, 0x1fd4, 0xfd70, 0xbb50, 0x87c, 0x144b, 0x1, 0x0);
        gbc.writeMem(0x4cd7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1fd4);
        EXPECT(gbc.pc(), 0x4cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0038
        gbc.setState(0x1f27, 0xcc01, 0x3250, 0x94ed, 0xf3db, 0x668c, 0x1, 0x1);
        gbc.writeMem(0x1f27, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcc01);
        EXPECT(gbc.pc(), 0x1f29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 003A
        gbc.setState(0xb4a, 0x9b95, 0x2ee0, 0xed9a, 0xcd13, 0x3664, 0x0, 0x0);
        gbc.writeMem(0xb4a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9b95);
        EXPECT(gbc.pc(), 0xb4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 003B
        gbc.setState(0x3445, 0xe85f, 0x9910, 0x5073, 0xc95b, 0x159f, 0x1, 0x1);
        gbc.writeMem(0x3445, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe85f);
        EXPECT(gbc.pc(), 0x3447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 003D
        gbc.setState(0x533d, 0x4b09, 0x9640, 0xda74, 0x5d8f, 0x2a, 0x0, 0x1);
        gbc.writeMem(0x533d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4b09);
        EXPECT(gbc.pc(), 0x533f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 003E
        gbc.setState(0xaa32, 0xf2ad, 0x20d0, 0xfefe, 0x6eb7, 0xa67b, 0x0, 0x0);
        gbc.writeMem(0xaa32, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf2ad);
        EXPECT(gbc.pc(), 0xaa34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa32), 0xcb);
        EXPECT(gbc.readMem(0xaa33), 0x6d);
        // CB 6D 003F
        gbc.setState(0x7d75, 0x6bf9, 0x9e00, 0x344d, 0xe168, 0xdcad, 0x1, 0x1);
        gbc.writeMem(0x7d75, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x6bf9);
        EXPECT(gbc.pc(), 0x7d77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0040
        gbc.setState(0xbb49, 0xebde, 0xf3c0, 0x97c9, 0xd267, 0x9d6b, 0x1, 0x1);
        gbc.writeMem(0xbb49, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xebde);
        EXPECT(gbc.pc(), 0xbb4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb49), 0xcb);
        EXPECT(gbc.readMem(0xbb4a), 0x6d);
        // CB 6D 0041
        gbc.setState(0x9a51, 0xe548, 0x9190, 0x292c, 0x9086, 0x6119, 0x1, 0x0);
        gbc.writeMem(0x9a51, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe548);
        EXPECT(gbc.pc(), 0x9a53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a51), 0xcb);
        EXPECT(gbc.readMem(0x9a52), 0x6d);
        // CB 6D 0042
        gbc.setState(0x3738, 0xd302, 0xb8f0, 0x1195, 0xcff8, 0x6572, 0x1, 0x1);
        gbc.writeMem(0x3738, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd302);
        EXPECT(gbc.pc(), 0x373a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0043
        gbc.setState(0x3cda, 0x6026, 0xde70, 0x19aa, 0x503, 0x2bb1, 0x0, 0x0);
        gbc.writeMem(0x3cda, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6026);
        EXPECT(gbc.pc(), 0x3cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0044
        gbc.setState(0x1a0a, 0x93f7, 0x8850, 0xca6c, 0xfa83, 0x4051, 0x0, 0x1);
        gbc.writeMem(0x1a0a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x93f7);
        EXPECT(gbc.pc(), 0x1a0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0045
        gbc.setState(0x4403, 0x12a4, 0xbc40, 0x8c0d, 0x6317, 0xbcde, 0x1, 0x1);
        gbc.writeMem(0x4403, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x12a4);
        EXPECT(gbc.pc(), 0x4405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0046
        gbc.setState(0x9720, 0x3b8e, 0xef10, 0xae5e, 0xd80a, 0xd17a, 0x0, 0x0);
        gbc.writeMem(0x9720, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3b8e);
        EXPECT(gbc.pc(), 0x9722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9720), 0xcb);
        EXPECT(gbc.readMem(0x9721), 0x6d);
        // CB 6D 0047
        gbc.setState(0x91a0, 0xf562, 0xcdb0, 0xd300, 0x7322, 0x37a0, 0x0, 0x1);
        gbc.writeMem(0x91a0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf562);
        EXPECT(gbc.pc(), 0x91a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a0), 0xcb);
        EXPECT(gbc.readMem(0x91a1), 0x6d);
        // CB 6D 0048
        gbc.setState(0x76e5, 0xda63, 0x9d60, 0xb691, 0x2a79, 0xb9fe, 0x1, 0x1);
        gbc.writeMem(0x76e5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xda63);
        EXPECT(gbc.pc(), 0x76e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0049
        gbc.setState(0x6772, 0x86d, 0xe7b0, 0x7e88, 0xa133, 0xab23, 0x0, 0x1);
        gbc.writeMem(0x6772, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x86d);
        EXPECT(gbc.pc(), 0x6774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 004A
        gbc.setState(0x8ad9, 0x35f6, 0xbef0, 0xb6e7, 0xa267, 0x65eb, 0x0, 0x1);
        gbc.writeMem(0x8ad9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x35f6);
        EXPECT(gbc.pc(), 0x8adb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad9), 0xcb);
        EXPECT(gbc.readMem(0x8ada), 0x6d);
        // CB 6D 004B
        gbc.setState(0xe8f9, 0x34d6, 0x6750, 0x6e05, 0x4563, 0x3e97, 0x0, 0x1);
        gbc.writeMem(0xe8f9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x34d6);
        EXPECT(gbc.pc(), 0xe8fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8f9), 0xcb);
        EXPECT(gbc.readMem(0xe8fa), 0x6d);
        // CB 6D 004C
        gbc.setState(0x6aed, 0x3805, 0xd7c0, 0xab5, 0x9fd6, 0x9dc8, 0x1, 0x1);
        gbc.writeMem(0x6aed, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3805);
        EXPECT(gbc.pc(), 0x6aef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 004D
        gbc.setState(0x3b58, 0xd4c1, 0x8080, 0xb6de, 0x40c8, 0x717b, 0x1, 0x1);
        gbc.writeMem(0x3b58, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd4c1);
        EXPECT(gbc.pc(), 0x3b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 004E
        gbc.setState(0xaf45, 0x1eae, 0xb150, 0xf6c, 0xb5c8, 0x1e23, 0x1, 0x0);
        gbc.writeMem(0xaf45, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1eae);
        EXPECT(gbc.pc(), 0xaf47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf45), 0xcb);
        EXPECT(gbc.readMem(0xaf46), 0x6d);
        // CB 6D 004F
        gbc.setState(0x1ca4, 0x66ed, 0x2b20, 0x9889, 0x4e79, 0xf0cc, 0x0, 0x0);
        gbc.writeMem(0x1ca4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x66ed);
        EXPECT(gbc.pc(), 0x1ca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0050
        gbc.setState(0x6e33, 0x5ec5, 0xa660, 0xa08c, 0x9622, 0x5b51, 0x1, 0x0);
        gbc.writeMem(0x6e33, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5ec5);
        EXPECT(gbc.pc(), 0x6e35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0051
        gbc.setState(0xd411, 0x6ec0, 0xa730, 0x6486, 0xc320, 0xf887, 0x0, 0x1);
        gbc.writeMem(0xd411, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6ec0);
        EXPECT(gbc.pc(), 0xd413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd411), 0xcb);
        EXPECT(gbc.readMem(0xd412), 0x6d);
        // CB 6D 0053
        gbc.setState(0x6093, 0x6859, 0xc6b0, 0x7c1b, 0x3f20, 0x22ed, 0x1, 0x0);
        gbc.writeMem(0x6093, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6859);
        EXPECT(gbc.pc(), 0x6095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0054
        gbc.setState(0x9efc, 0x8b21, 0x69c0, 0x1fda, 0x3fc2, 0x767, 0x0, 0x0);
        gbc.writeMem(0x9efc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8b21);
        EXPECT(gbc.pc(), 0x9efe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9efc), 0xcb);
        EXPECT(gbc.readMem(0x9efd), 0x6d);
        // CB 6D 0055
        gbc.setState(0xe8c9, 0x1ac6, 0xf2c0, 0x7a9f, 0x24c, 0xc68d, 0x0, 0x1);
        gbc.writeMem(0xe8c9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1ac6);
        EXPECT(gbc.pc(), 0xe8cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c9), 0xcb);
        EXPECT(gbc.readMem(0xe8ca), 0x6d);
        // CB 6D 0056
        gbc.setState(0x1cd3, 0x2357, 0x96f0, 0x93cd, 0xdf31, 0x200c, 0x0, 0x1);
        gbc.writeMem(0x1cd3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2357);
        EXPECT(gbc.pc(), 0x1cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0058
        gbc.setState(0x9701, 0xfdc3, 0x5f40, 0x6e4e, 0xe284, 0x6551, 0x1, 0x1);
        gbc.writeMem(0x9701, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfdc3);
        EXPECT(gbc.pc(), 0x9703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9701), 0xcb);
        EXPECT(gbc.readMem(0x9702), 0x6d);
        // CB 6D 0059
        gbc.setState(0x85df, 0x139d, 0x2d20, 0xd5c0, 0x990b, 0xc182, 0x0, 0x0);
        gbc.writeMem(0x85df, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x139d);
        EXPECT(gbc.pc(), 0x85e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85df), 0xcb);
        EXPECT(gbc.readMem(0x85e0), 0x6d);
        // CB 6D 005A
        gbc.setState(0x90df, 0xa161, 0xb7f0, 0x880d, 0x4ce2, 0x7e1e, 0x0, 0x0);
        gbc.writeMem(0x90df, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa161);
        EXPECT(gbc.pc(), 0x90e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90df), 0xcb);
        EXPECT(gbc.readMem(0x90e0), 0x6d);
        // CB 6D 005B
        gbc.setState(0xcaca, 0xfc29, 0x4f40, 0x2e7c, 0x300f, 0xcf00, 0x1, 0x1);
        gbc.writeMem(0xcaca, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfc29);
        EXPECT(gbc.pc(), 0xcacc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaca), 0xcb);
        EXPECT(gbc.readMem(0xcacb), 0x6d);
        // CB 6D 005C
        gbc.setState(0x1aa3, 0xa19d, 0x800, 0xba0e, 0xa678, 0x5c0b, 0x1, 0x1);
        gbc.writeMem(0x1aa3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa19d);
        EXPECT(gbc.pc(), 0x1aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 005D
        gbc.setState(0xcd57, 0xc957, 0xa840, 0x7c65, 0xc47b, 0x853c, 0x1, 0x1);
        gbc.writeMem(0xcd57, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc957);
        EXPECT(gbc.pc(), 0xcd59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd57), 0xcb);
        EXPECT(gbc.readMem(0xcd58), 0x6d);
        // CB 6D 005E
        gbc.setState(0x8b75, 0x3bc3, 0xa10, 0xb78c, 0x3a0c, 0xcccc, 0x0, 0x1);
        gbc.writeMem(0x8b75, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3bc3);
        EXPECT(gbc.pc(), 0x8b77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b75), 0xcb);
        EXPECT(gbc.readMem(0x8b76), 0x6d);
        // CB 6D 005F
        gbc.setState(0xd19d, 0x42, 0x16a0, 0xcc42, 0x9fcf, 0xac1, 0x0, 0x0);
        gbc.writeMem(0xd19d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x42);
        EXPECT(gbc.pc(), 0xd19f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd19d), 0xcb);
        EXPECT(gbc.readMem(0xd19e), 0x6d);
        // CB 6D 0060
        gbc.setState(0x6637, 0x4401, 0x6130, 0x916f, 0x3d35, 0xbece, 0x0, 0x1);
        gbc.writeMem(0x6637, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4401);
        EXPECT(gbc.pc(), 0x6639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0061
        gbc.setState(0x5288, 0x5ef1, 0x24a0, 0x32d1, 0xde68, 0x9b3b, 0x0, 0x1);
        gbc.writeMem(0x5288, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5ef1);
        EXPECT(gbc.pc(), 0x528a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0062
        gbc.setState(0x811c, 0x973f, 0x82f0, 0x9fee, 0x4d4e, 0x588f, 0x1, 0x0);
        gbc.writeMem(0x811c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x973f);
        EXPECT(gbc.pc(), 0x811e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x811c), 0xcb);
        EXPECT(gbc.readMem(0x811d), 0x6d);
        // CB 6D 0063
        gbc.setState(0xcb95, 0xe6f1, 0x50f0, 0xf873, 0xff4d, 0xedae, 0x0, 0x0);
        gbc.writeMem(0xcb95, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe6f1);
        EXPECT(gbc.pc(), 0xcb97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb95), 0xcb);
        EXPECT(gbc.readMem(0xcb96), 0x6d);
        // CB 6D 0064
        gbc.setState(0xe50d, 0x899, 0x57a0, 0xa857, 0xad08, 0xe342, 0x1, 0x0);
        gbc.writeMem(0xe50d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x899);
        EXPECT(gbc.pc(), 0xe50f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe50d), 0xcb);
        EXPECT(gbc.readMem(0xe50e), 0x6d);
        // CB 6D 0065
        gbc.setState(0xa7ca, 0x3f55, 0x54d0, 0x1646, 0xd779, 0x621a, 0x0, 0x1);
        gbc.writeMem(0xa7ca, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3f55);
        EXPECT(gbc.pc(), 0xa7cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ca), 0xcb);
        EXPECT(gbc.readMem(0xa7cb), 0x6d);
        // CB 6D 0066
        gbc.setState(0xc0d5, 0xaeb3, 0x7680, 0x35af, 0x46e6, 0x698b, 0x1, 0x0);
        gbc.writeMem(0xc0d5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xaeb3);
        EXPECT(gbc.pc(), 0xc0d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0d5), 0xcb);
        EXPECT(gbc.readMem(0xc0d6), 0x6d);
        // CB 6D 0067
        gbc.setState(0xbcde, 0xdc59, 0x5b30, 0x67a5, 0x3560, 0x8730, 0x1, 0x1);
        gbc.writeMem(0xbcde, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xdc59);
        EXPECT(gbc.pc(), 0xbce0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcde), 0xcb);
        EXPECT(gbc.readMem(0xbcdf), 0x6d);
        // CB 6D 0068
        gbc.setState(0x4d87, 0xe5df, 0x4000, 0x6074, 0xb1b3, 0x658b, 0x0, 0x1);
        gbc.writeMem(0x4d87, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe5df);
        EXPECT(gbc.pc(), 0x4d89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0069
        gbc.setState(0xc8e8, 0x764f, 0x7fc0, 0x8b23, 0x78e6, 0x2cf1, 0x1, 0x0);
        gbc.writeMem(0xc8e8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x764f);
        EXPECT(gbc.pc(), 0xc8ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e8), 0xcb);
        EXPECT(gbc.readMem(0xc8e9), 0x6d);
        // CB 6D 006A
        gbc.setState(0x16ba, 0x73be, 0xbb10, 0x9386, 0x388b, 0x62c4, 0x0, 0x0);
        gbc.writeMem(0x16ba, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x73be);
        EXPECT(gbc.pc(), 0x16bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 006B
        gbc.setState(0x46f, 0xbe2b, 0x6c90, 0x351f, 0x257, 0x535e, 0x1, 0x1);
        gbc.writeMem(0x46f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbe2b);
        EXPECT(gbc.pc(), 0x471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 006C
        gbc.setState(0x644, 0xa6a0, 0x71b0, 0x5c99, 0x14ff, 0xaf75, 0x0, 0x0);
        gbc.writeMem(0x644, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa6a0);
        EXPECT(gbc.pc(), 0x646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 006D
        gbc.setState(0xd0b, 0xac4d, 0x420, 0x687f, 0x9252, 0x13f0, 0x0, 0x1);
        gbc.writeMem(0xd0b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xac4d);
        EXPECT(gbc.pc(), 0xd0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 006E
        gbc.setState(0x766b, 0x6223, 0x5c90, 0xd568, 0x6efe, 0x1247, 0x1, 0x1);
        gbc.writeMem(0x766b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6223);
        EXPECT(gbc.pc(), 0x766d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 006F
        gbc.setState(0x6a09, 0xc305, 0xd0c0, 0x1338, 0x1bc6, 0xcf1, 0x1, 0x1);
        gbc.writeMem(0x6a09, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc305);
        EXPECT(gbc.pc(), 0x6a0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0070
        gbc.setState(0x6276, 0xe744, 0x2000, 0xd27c, 0xe5c8, 0xad9a, 0x0, 0x0);
        gbc.writeMem(0x6276, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe744);
        EXPECT(gbc.pc(), 0x6278);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0072
        gbc.setState(0x9580, 0x6dd4, 0xa030, 0x99c4, 0xe7c2, 0x9ef0, 0x0, 0x0);
        gbc.writeMem(0x9580, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6dd4);
        EXPECT(gbc.pc(), 0x9582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9580), 0xcb);
        EXPECT(gbc.readMem(0x9581), 0x6d);
        // CB 6D 0073
        gbc.setState(0x7ca3, 0x3afc, 0xbf40, 0xf394, 0x7c59, 0x64b0, 0x1, 0x0);
        gbc.writeMem(0x7ca3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3afc);
        EXPECT(gbc.pc(), 0x7ca5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0074
        gbc.setState(0x67e5, 0x515a, 0x7330, 0x5c8c, 0xc3c, 0xd4a1, 0x1, 0x1);
        gbc.writeMem(0x67e5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x515a);
        EXPECT(gbc.pc(), 0x67e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0075
        gbc.setState(0xac60, 0x831c, 0x9700, 0xd73a, 0x1f30, 0x8b7c, 0x1, 0x1);
        gbc.writeMem(0xac60, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x831c);
        EXPECT(gbc.pc(), 0xac62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac60), 0xcb);
        EXPECT(gbc.readMem(0xac61), 0x6d);
        // CB 6D 0076
        gbc.setState(0x77f4, 0x436e, 0xe9d0, 0x89d7, 0x36de, 0xac05, 0x1, 0x1);
        gbc.writeMem(0x77f4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x436e);
        EXPECT(gbc.pc(), 0x77f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0077
        gbc.setState(0x1d43, 0x5dea, 0x4010, 0xce6f, 0x6fb5, 0x616, 0x1, 0x1);
        gbc.writeMem(0x1d43, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5dea);
        EXPECT(gbc.pc(), 0x1d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0078
        gbc.setState(0xa99, 0x6a83, 0xac70, 0xe10, 0xfa05, 0xed3d, 0x1, 0x1);
        gbc.writeMem(0xa99, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6a83);
        EXPECT(gbc.pc(), 0xa9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0079
        gbc.setState(0xb9de, 0x727c, 0x6bb0, 0xcb76, 0xf83c, 0x144, 0x0, 0x1);
        gbc.writeMem(0xb9de, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x727c);
        EXPECT(gbc.pc(), 0xb9e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9de), 0xcb);
        EXPECT(gbc.readMem(0xb9df), 0x6d);
        // CB 6D 007A
        gbc.setState(0x4297, 0xf25e, 0xef40, 0x2419, 0x9b61, 0x7b19, 0x0, 0x0);
        gbc.writeMem(0x4297, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf25e);
        EXPECT(gbc.pc(), 0x4299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 007B
        gbc.setState(0x1528, 0x9e2a, 0xe860, 0x896d, 0xedc4, 0x9715, 0x1, 0x0);
        gbc.writeMem(0x1528, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9e2a);
        EXPECT(gbc.pc(), 0x152a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 007C
        gbc.setState(0xeaa1, 0xb59, 0x75a0, 0xa943, 0x2e3d, 0x3707, 0x0, 0x0);
        gbc.writeMem(0xeaa1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb59);
        EXPECT(gbc.pc(), 0xeaa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa1), 0xcb);
        EXPECT(gbc.readMem(0xeaa2), 0x6d);
        // CB 6D 007D
        gbc.setState(0x7720, 0x3f38, 0x19c0, 0x5fc3, 0x64d5, 0xc74d, 0x0, 0x0);
        gbc.writeMem(0x7720, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3f38);
        EXPECT(gbc.pc(), 0x7722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 007E
        gbc.setState(0x7346, 0xbe2c, 0xd080, 0x5e14, 0x687e, 0xf048, 0x0, 0x0);
        gbc.writeMem(0x7346, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbe2c);
        EXPECT(gbc.pc(), 0x7348);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 007F
        gbc.setState(0x921e, 0xa389, 0x5800, 0x20e6, 0xb783, 0xf795, 0x0, 0x1);
        gbc.writeMem(0x921e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa389);
        EXPECT(gbc.pc(), 0x9220);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x921e), 0xcb);
        EXPECT(gbc.readMem(0x921f), 0x6d);
        // CB 6D 0080
        gbc.setState(0x2dce, 0xebce, 0xa450, 0x3de9, 0xea11, 0x8084, 0x1, 0x0);
        gbc.writeMem(0x2dce, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xebce);
        EXPECT(gbc.pc(), 0x2dd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0081
        gbc.setState(0x428b, 0xcf63, 0x1470, 0x5664, 0xf08b, 0x8678, 0x1, 0x1);
        gbc.writeMem(0x428b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xcf63);
        EXPECT(gbc.pc(), 0x428d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0082
        gbc.setState(0xa3d, 0x741b, 0xeb90, 0xc782, 0xfcc0, 0x4c38, 0x0, 0x1);
        gbc.writeMem(0xa3d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x741b);
        EXPECT(gbc.pc(), 0xa3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0083
        gbc.setState(0x9b95, 0xc299, 0x68b0, 0xcd66, 0xa6e4, 0xb180, 0x1, 0x1);
        gbc.writeMem(0x9b95, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc299);
        EXPECT(gbc.pc(), 0x9b97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b95), 0xcb);
        EXPECT(gbc.readMem(0x9b96), 0x6d);
        // CB 6D 0084
        gbc.setState(0x16b4, 0x1ae9, 0xaf10, 0x8ebf, 0x95ae, 0xbe03, 0x1, 0x1);
        gbc.writeMem(0x16b4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1ae9);
        EXPECT(gbc.pc(), 0x16b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0085
        gbc.setState(0x5d75, 0x3dd9, 0x3e00, 0xaabf, 0x53f7, 0x26a6, 0x0, 0x1);
        gbc.writeMem(0x5d75, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3dd9);
        EXPECT(gbc.pc(), 0x5d77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0086
        gbc.setState(0x18a2, 0xc859, 0xbb50, 0x67, 0x6f95, 0x3863, 0x1, 0x0);
        gbc.writeMem(0x18a2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc859);
        EXPECT(gbc.pc(), 0x18a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0087
        gbc.setState(0x761, 0x520a, 0x780, 0xd207, 0xc7aa, 0xd9f2, 0x0, 0x1);
        gbc.writeMem(0x761, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x520a);
        EXPECT(gbc.pc(), 0x763);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0088
        gbc.setState(0xceab, 0xde95, 0x1eb0, 0x338a, 0x33cb, 0x50b0, 0x0, 0x0);
        gbc.writeMem(0xceab, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xde95);
        EXPECT(gbc.pc(), 0xcead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceab), 0xcb);
        EXPECT(gbc.readMem(0xceac), 0x6d);
        // CB 6D 008A
        gbc.setState(0xc012, 0x4fea, 0xba00, 0xf956, 0xde, 0x873d, 0x1, 0x0);
        gbc.writeMem(0xc012, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4fea);
        EXPECT(gbc.pc(), 0xc014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc012), 0xcb);
        EXPECT(gbc.readMem(0xc013), 0x6d);
        // CB 6D 008B
        gbc.setState(0x49a3, 0x322f, 0xbce0, 0xd180, 0xd1f2, 0x8f3, 0x0, 0x1);
        gbc.writeMem(0x49a3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x322f);
        EXPECT(gbc.pc(), 0x49a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 008C
        gbc.setState(0xa517, 0x1c4f, 0x1af0, 0x2e3b, 0xe3cd, 0xc95f, 0x0, 0x1);
        gbc.writeMem(0xa517, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1c4f);
        EXPECT(gbc.pc(), 0xa519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa517), 0xcb);
        EXPECT(gbc.readMem(0xa518), 0x6d);
        // CB 6D 008D
        gbc.setState(0x7b9c, 0xd8b7, 0x59d0, 0x644a, 0xf5ff, 0xdd1d, 0x0, 0x1);
        gbc.writeMem(0x7b9c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd8b7);
        EXPECT(gbc.pc(), 0x7b9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 008E
        gbc.setState(0x10ce, 0x9b3f, 0x7590, 0x6c08, 0xfc53, 0x7623, 0x1, 0x0);
        gbc.writeMem(0x10ce, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9b3f);
        EXPECT(gbc.pc(), 0x10d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 008F
        gbc.setState(0x473e, 0x14b2, 0x3440, 0xfbc8, 0x39f5, 0x3485, 0x0, 0x0);
        gbc.writeMem(0x473e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x14b2);
        EXPECT(gbc.pc(), 0x4740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0090
        gbc.setState(0xc540, 0x8c10, 0x92b0, 0xbddb, 0x77b2, 0x8b08, 0x0, 0x1);
        gbc.writeMem(0xc540, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8c10);
        EXPECT(gbc.pc(), 0xc542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc540), 0xcb);
        EXPECT(gbc.readMem(0xc541), 0x6d);
        // CB 6D 0091
        gbc.setState(0xddc0, 0x1e31, 0xef0, 0x9a51, 0x8e5a, 0xcfb9, 0x0, 0x1);
        gbc.writeMem(0xddc0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1e31);
        EXPECT(gbc.pc(), 0xddc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddc0), 0xcb);
        EXPECT(gbc.readMem(0xddc1), 0x6d);
        // CB 6D 0092
        gbc.setState(0x7192, 0x1476, 0x3960, 0xbae1, 0x6785, 0x5ea3, 0x1, 0x1);
        gbc.writeMem(0x7192, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1476);
        EXPECT(gbc.pc(), 0x7194);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0093
        gbc.setState(0xa1b0, 0xe755, 0x6880, 0x8ed3, 0xdfbf, 0x404a, 0x1, 0x1);
        gbc.writeMem(0xa1b0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe755);
        EXPECT(gbc.pc(), 0xa1b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1b0), 0xcb);
        EXPECT(gbc.readMem(0xa1b1), 0x6d);
        // CB 6D 0094
        gbc.setState(0x5204, 0xb7ac, 0x950, 0x48c7, 0x45b5, 0xea8b, 0x1, 0x1);
        gbc.writeMem(0x5204, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb7ac);
        EXPECT(gbc.pc(), 0x5206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0095
        gbc.setState(0xebb5, 0x7dae, 0x62a0, 0xe26b, 0x7fe3, 0x792d, 0x1, 0x1);
        gbc.writeMem(0xebb5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7dae);
        EXPECT(gbc.pc(), 0xebb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb5), 0xcb);
        EXPECT(gbc.readMem(0xebb6), 0x6d);
        // CB 6D 0096
        gbc.setState(0xa81b, 0xee76, 0xb80, 0x5945, 0x58eb, 0x12ed, 0x0, 0x1);
        gbc.writeMem(0xa81b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xee76);
        EXPECT(gbc.pc(), 0xa81d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa81b), 0xcb);
        EXPECT(gbc.readMem(0xa81c), 0x6d);
        // CB 6D 0097
        gbc.setState(0x4f7d, 0x611, 0xc700, 0x616d, 0xc250, 0x75b3, 0x0, 0x0);
        gbc.writeMem(0x4f7d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x611);
        EXPECT(gbc.pc(), 0x4f7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0098
        gbc.setState(0xc760, 0xe947, 0xb450, 0xc0d7, 0xffaa, 0xb570, 0x1, 0x1);
        gbc.writeMem(0xc760, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe947);
        EXPECT(gbc.pc(), 0xc762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc760), 0xcb);
        EXPECT(gbc.readMem(0xc761), 0x6d);
        // CB 6D 0099
        gbc.setState(0xceef, 0x3e1a, 0xbc40, 0x22aa, 0x1d8c, 0x2223, 0x1, 0x1);
        gbc.writeMem(0xceef, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3e1a);
        EXPECT(gbc.pc(), 0xcef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceef), 0xcb);
        EXPECT(gbc.readMem(0xcef0), 0x6d);
        // CB 6D 009B
        gbc.setState(0x8326, 0x24e6, 0x7220, 0x6121, 0x3fe5, 0x76e9, 0x0, 0x1);
        gbc.writeMem(0x8326, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x24e6);
        EXPECT(gbc.pc(), 0x8328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8326), 0xcb);
        EXPECT(gbc.readMem(0x8327), 0x6d);
        // CB 6D 009C
        gbc.setState(0x2400, 0xbc0f, 0x3d20, 0xbd23, 0x829e, 0x53e1, 0x1, 0x1);
        gbc.writeMem(0x2400, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xbc0f);
        EXPECT(gbc.pc(), 0x2402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 009E
        gbc.setState(0xcef2, 0xd469, 0xfec0, 0x7a63, 0x522a, 0x7a58, 0x0, 0x1);
        gbc.writeMem(0xcef2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xd469);
        EXPECT(gbc.pc(), 0xcef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef2), 0xcb);
        EXPECT(gbc.readMem(0xcef3), 0x6d);
        // CB 6D 009F
        gbc.setState(0x80f0, 0x83a9, 0x6610, 0x3fe3, 0xaafa, 0x3e38, 0x0, 0x0);
        gbc.writeMem(0x80f0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x83a9);
        EXPECT(gbc.pc(), 0x80f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80f0), 0xcb);
        EXPECT(gbc.readMem(0x80f1), 0x6d);
        // CB 6D 00A0
        gbc.setState(0xc618, 0x1700, 0x7060, 0x27db, 0xb191, 0xea7c, 0x1, 0x1);
        gbc.writeMem(0xc618, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1700);
        EXPECT(gbc.pc(), 0xc61a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc618), 0xcb);
        EXPECT(gbc.readMem(0xc619), 0x6d);
        // CB 6D 00A1
        gbc.setState(0xee6f, 0xb539, 0x8a90, 0x5ff, 0x5c42, 0x4534, 0x0, 0x1);
        gbc.writeMem(0xee6f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb539);
        EXPECT(gbc.pc(), 0xee71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee6f), 0xcb);
        EXPECT(gbc.readMem(0xee70), 0x6d);
        // CB 6D 00A2
        gbc.setState(0xb5bf, 0x59ca, 0xb690, 0xb16f, 0x666b, 0x5f66, 0x1, 0x0);
        gbc.writeMem(0xb5bf, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x59ca);
        EXPECT(gbc.pc(), 0xb5c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5bf), 0xcb);
        EXPECT(gbc.readMem(0xb5c0), 0x6d);
        // CB 6D 00A3
        gbc.setState(0x76a1, 0xb461, 0x4e50, 0x3b7d, 0xd544, 0x4ea2, 0x0, 0x0);
        gbc.writeMem(0x76a1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb461);
        EXPECT(gbc.pc(), 0x76a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00A4
        gbc.setState(0x7561, 0x658a, 0xb7e0, 0xc6e2, 0x631f, 0x2344, 0x0, 0x1);
        gbc.writeMem(0x7561, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x658a);
        EXPECT(gbc.pc(), 0x7563);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00A5
        gbc.setState(0x65ec, 0x241c, 0x4ed0, 0xcbcc, 0x11c9, 0xee5a, 0x0, 0x1);
        gbc.writeMem(0x65ec, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x241c);
        EXPECT(gbc.pc(), 0x65ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00A6
        gbc.setState(0xeb71, 0x8545, 0x9a0, 0x7c77, 0xe7c8, 0x8086, 0x1, 0x0);
        gbc.writeMem(0xeb71, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8545);
        EXPECT(gbc.pc(), 0xeb73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb71), 0xcb);
        EXPECT(gbc.readMem(0xeb72), 0x6d);
        // CB 6D 00A7
        gbc.setState(0x714c, 0x76ab, 0xa660, 0x53f3, 0x8844, 0xe393, 0x1, 0x1);
        gbc.writeMem(0x714c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x76ab);
        EXPECT(gbc.pc(), 0x714e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00A8
        gbc.setState(0x29c8, 0xcdaf, 0xd4c0, 0xf72d, 0x6a69, 0xc9fd, 0x0, 0x1);
        gbc.writeMem(0x29c8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xcdaf);
        EXPECT(gbc.pc(), 0x29ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00A9
        gbc.setState(0xe8b6, 0x6ea, 0x4e40, 0xb700, 0xcf82, 0xd8, 0x0, 0x0);
        gbc.writeMem(0xe8b6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6ea);
        EXPECT(gbc.pc(), 0xe8b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b6), 0xcb);
        EXPECT(gbc.readMem(0xe8b7), 0x6d);
        // CB 6D 00AA
        gbc.setState(0xb442, 0x390d, 0xff60, 0xdd15, 0xdd76, 0x96c1, 0x1, 0x0);
        gbc.writeMem(0xb442, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x390d);
        EXPECT(gbc.pc(), 0xb444);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb442), 0xcb);
        EXPECT(gbc.readMem(0xb443), 0x6d);
        // CB 6D 00AB
        gbc.setState(0x5b19, 0xdf16, 0x6020, 0x68f2, 0x221b, 0x87d5, 0x1, 0x0);
        gbc.writeMem(0x5b19, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdf16);
        EXPECT(gbc.pc(), 0x5b1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00AE
        gbc.setState(0xfeb, 0x6c66, 0x9b70, 0x524d, 0x3f6e, 0xc98a, 0x1, 0x0);
        gbc.writeMem(0xfeb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6c66);
        EXPECT(gbc.pc(), 0xfed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00AF
        gbc.setState(0x3b9c, 0x8999, 0x6450, 0x35c7, 0xb47e, 0xa4fd, 0x0, 0x1);
        gbc.writeMem(0x3b9c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8999);
        EXPECT(gbc.pc(), 0x3b9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00B0
        gbc.setState(0xbd34, 0x8341, 0xc1e0, 0xc770, 0x1b35, 0x1f29, 0x0, 0x0);
        gbc.writeMem(0xbd34, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8341);
        EXPECT(gbc.pc(), 0xbd36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd34), 0xcb);
        EXPECT(gbc.readMem(0xbd35), 0x6d);
        // CB 6D 00B2
        gbc.setState(0xbf51, 0x877d, 0x1f20, 0xccfb, 0x4ce6, 0x714e, 0x0, 0x0);
        gbc.writeMem(0xbf51, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x877d);
        EXPECT(gbc.pc(), 0xbf53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf51), 0xcb);
        EXPECT(gbc.readMem(0xbf52), 0x6d);
        // CB 6D 00B3
        gbc.setState(0x850, 0x51dc, 0x4b0, 0xfef4, 0x9df9, 0x5acd, 0x1, 0x0);
        gbc.writeMem(0x850, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x51dc);
        EXPECT(gbc.pc(), 0x852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00B4
        gbc.setState(0xea14, 0x96c0, 0x9870, 0xc2ab, 0x9a56, 0xf0c9, 0x1, 0x1);
        gbc.writeMem(0xea14, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x96c0);
        EXPECT(gbc.pc(), 0xea16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea14), 0xcb);
        EXPECT(gbc.readMem(0xea15), 0x6d);
        // CB 6D 00B5
        gbc.setState(0xe2d7, 0x710a, 0x4b80, 0xc584, 0x3710, 0x3ec9, 0x0, 0x1);
        gbc.writeMem(0xe2d7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x710a);
        EXPECT(gbc.pc(), 0xe2d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d7), 0xcb);
        EXPECT(gbc.readMem(0xe2d8), 0x6d);
        // CB 6D 00B6
        gbc.setState(0xe0ee, 0xc26c, 0xdcc0, 0x9aa5, 0xce25, 0xea8d, 0x1, 0x0);
        gbc.writeMem(0xe0ee, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc26c);
        EXPECT(gbc.pc(), 0xe0f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ee), 0xcb);
        EXPECT(gbc.readMem(0xe0ef), 0x6d);
        // CB 6D 00B7
        gbc.setState(0x80b9, 0x2287, 0x8f00, 0xb761, 0xccda, 0x81e, 0x0, 0x1);
        gbc.writeMem(0x80b9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2287);
        EXPECT(gbc.pc(), 0x80bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b9), 0xcb);
        EXPECT(gbc.readMem(0x80ba), 0x6d);
        // CB 6D 00B8
        gbc.setState(0xeb30, 0x4633, 0x50a0, 0xc5b9, 0x2077, 0x3a84, 0x1, 0x1);
        gbc.writeMem(0xeb30, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4633);
        EXPECT(gbc.pc(), 0xeb32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb30), 0xcb);
        EXPECT(gbc.readMem(0xeb31), 0x6d);
        // CB 6D 00B9
        gbc.setState(0x98b0, 0x38e1, 0x36f0, 0x9fdd, 0xb6d3, 0xc9ab, 0x0, 0x1);
        gbc.writeMem(0x98b0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x38e1);
        EXPECT(gbc.pc(), 0x98b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98b0), 0xcb);
        EXPECT(gbc.readMem(0x98b1), 0x6d);
        // CB 6D 00BA
        gbc.setState(0x90e4, 0x5cd0, 0xfb60, 0x365b, 0xfa9, 0xa90f, 0x0, 0x1);
        gbc.writeMem(0x90e4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5cd0);
        EXPECT(gbc.pc(), 0x90e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90e4), 0xcb);
        EXPECT(gbc.readMem(0x90e5), 0x6d);
        // CB 6D 00BB
        gbc.setState(0x19a6, 0x1bd3, 0xdad0, 0xaf77, 0x1242, 0xb648, 0x0, 0x0);
        gbc.writeMem(0x19a6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1bd3);
        EXPECT(gbc.pc(), 0x19a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00BC
        gbc.setState(0xdbf1, 0x45c2, 0xf0c0, 0x9394, 0xd410, 0x2b31, 0x0, 0x0);
        gbc.writeMem(0xdbf1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x45c2);
        EXPECT(gbc.pc(), 0xdbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf1), 0xcb);
        EXPECT(gbc.readMem(0xdbf2), 0x6d);
        // CB 6D 00BE
        gbc.setState(0x1735, 0x259a, 0xb6c0, 0xa83c, 0x68e3, 0xe9c0, 0x1, 0x0);
        gbc.writeMem(0x1735, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x259a);
        EXPECT(gbc.pc(), 0x1737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00BF
        gbc.setState(0x9ac6, 0xf10, 0x8150, 0x3768, 0xc5bd, 0x687f, 0x1, 0x1);
        gbc.writeMem(0x9ac6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf10);
        EXPECT(gbc.pc(), 0x9ac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac6), 0xcb);
        EXPECT(gbc.readMem(0x9ac7), 0x6d);
        // CB 6D 00C0
        gbc.setState(0x104b, 0x20eb, 0x3720, 0xdd31, 0x4e4d, 0x11a9, 0x0, 0x1);
        gbc.writeMem(0x104b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x20eb);
        EXPECT(gbc.pc(), 0x104d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00C1
        gbc.setState(0xa014, 0x3317, 0x1ee0, 0x2c67, 0x10e7, 0x840, 0x1, 0x0);
        gbc.writeMem(0xa014, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3317);
        EXPECT(gbc.pc(), 0xa016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa014), 0xcb);
        EXPECT(gbc.readMem(0xa015), 0x6d);
        // CB 6D 00C2
        gbc.setState(0x9b3, 0x1fb8, 0xcb90, 0xd0ff, 0x47f, 0xf101, 0x1, 0x0);
        gbc.writeMem(0x9b3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1fb8);
        EXPECT(gbc.pc(), 0x9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00C3
        gbc.setState(0x8247, 0xec62, 0x4dc0, 0xdc1a, 0xe0cb, 0x1382, 0x1, 0x1);
        gbc.writeMem(0x8247, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xec62);
        EXPECT(gbc.pc(), 0x8249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8247), 0xcb);
        EXPECT(gbc.readMem(0x8248), 0x6d);
        // CB 6D 00C4
        gbc.setState(0xaac3, 0x6c57, 0x9c70, 0xdfe6, 0xe8a9, 0xf002, 0x1, 0x0);
        gbc.writeMem(0xaac3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6c57);
        EXPECT(gbc.pc(), 0xaac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaac3), 0xcb);
        EXPECT(gbc.readMem(0xaac4), 0x6d);
        // CB 6D 00C5
        gbc.setState(0xa67, 0x390a, 0x20b0, 0x24a0, 0x516f, 0x73f6, 0x0, 0x1);
        gbc.writeMem(0xa67, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x390a);
        EXPECT(gbc.pc(), 0xa69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00C6
        gbc.setState(0x7835, 0x57e, 0x3670, 0x6106, 0x252e, 0x94ba, 0x0, 0x0);
        gbc.writeMem(0x7835, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x57e);
        EXPECT(gbc.pc(), 0x7837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00C7
        gbc.setState(0xdcb6, 0xb2cb, 0x1bb0, 0xec04, 0x3983, 0xc9cd, 0x1, 0x0);
        gbc.writeMem(0xdcb6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb2cb);
        EXPECT(gbc.pc(), 0xdcb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb6), 0xcb);
        EXPECT(gbc.readMem(0xdcb7), 0x6d);
        // CB 6D 00C8
        gbc.setState(0xe44b, 0x4e4, 0x99f0, 0x68c, 0x7aa9, 0x389e, 0x1, 0x1);
        gbc.writeMem(0xe44b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x4e4);
        EXPECT(gbc.pc(), 0xe44d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe44b), 0xcb);
        EXPECT(gbc.readMem(0xe44c), 0x6d);
        // CB 6D 00C9
        gbc.setState(0x92a4, 0x8a8f, 0xecb0, 0x9106, 0xacd4, 0x9239, 0x1, 0x1);
        gbc.writeMem(0x92a4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8a8f);
        EXPECT(gbc.pc(), 0x92a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92a4), 0xcb);
        EXPECT(gbc.readMem(0x92a5), 0x6d);
        // CB 6D 00CA
        gbc.setState(0x19cb, 0x1401, 0x37b0, 0xbb6f, 0x5b62, 0x44ef, 0x1, 0x1);
        gbc.writeMem(0x19cb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1401);
        EXPECT(gbc.pc(), 0x19cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00CB
        gbc.setState(0x3f3b, 0x1926, 0xf6f0, 0xf275, 0x64cb, 0xf34e, 0x1, 0x0);
        gbc.writeMem(0x3f3b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1926);
        EXPECT(gbc.pc(), 0x3f3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00CC
        gbc.setState(0x8a01, 0x6e4b, 0x8120, 0x9bbb, 0xde2a, 0xdd47, 0x0, 0x0);
        gbc.writeMem(0x8a01, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6e4b);
        EXPECT(gbc.pc(), 0x8a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a01), 0xcb);
        EXPECT(gbc.readMem(0x8a02), 0x6d);
        // CB 6D 00CD
        gbc.setState(0x8dec, 0x3cb6, 0x950, 0x9bb2, 0xad6f, 0x4f6, 0x1, 0x0);
        gbc.writeMem(0x8dec, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3cb6);
        EXPECT(gbc.pc(), 0x8dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dec), 0xcb);
        EXPECT(gbc.readMem(0x8ded), 0x6d);
        // CB 6D 00CE
        gbc.setState(0x8a33, 0xd9be, 0x700, 0x1aaa, 0x5309, 0x80ee, 0x0, 0x1);
        gbc.writeMem(0x8a33, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd9be);
        EXPECT(gbc.pc(), 0x8a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a33), 0xcb);
        EXPECT(gbc.readMem(0x8a34), 0x6d);
        // CB 6D 00CF
        gbc.setState(0x3a4e, 0xa3b0, 0x2ef0, 0xbf0f, 0x6ed5, 0xe96f, 0x0, 0x0);
        gbc.writeMem(0x3a4e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa3b0);
        EXPECT(gbc.pc(), 0x3a50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00D0
        gbc.setState(0xc0fd, 0xb917, 0xc950, 0xd769, 0x993c, 0x6681, 0x1, 0x1);
        gbc.writeMem(0xc0fd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb917);
        EXPECT(gbc.pc(), 0xc0ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0fd), 0xcb);
        EXPECT(gbc.readMem(0xc0fe), 0x6d);
        // CB 6D 00D1
        gbc.setState(0xb628, 0xc1b4, 0x8a30, 0x37f2, 0xed69, 0xedbf, 0x0, 0x0);
        gbc.writeMem(0xb628, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc1b4);
        EXPECT(gbc.pc(), 0xb62a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb628), 0xcb);
        EXPECT(gbc.readMem(0xb629), 0x6d);
        // CB 6D 00D2
        gbc.setState(0x1ec3, 0x7789, 0x8e60, 0xb82c, 0x27d9, 0x66b2, 0x1, 0x1);
        gbc.writeMem(0x1ec3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7789);
        EXPECT(gbc.pc(), 0x1ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00D3
        gbc.setState(0x53eb, 0x311, 0xd740, 0x1af, 0xd120, 0x80ef, 0x1, 0x1);
        gbc.writeMem(0x53eb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x311);
        EXPECT(gbc.pc(), 0x53ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00D4
        gbc.setState(0x5fbd, 0x5946, 0x60e0, 0x2533, 0xc62b, 0xf17c, 0x0, 0x1);
        gbc.writeMem(0x5fbd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5946);
        EXPECT(gbc.pc(), 0x5fbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00D5
        gbc.setState(0x14c9, 0x2e06, 0x2b50, 0x8998, 0xa201, 0xdce6, 0x1, 0x0);
        gbc.writeMem(0x14c9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2e06);
        EXPECT(gbc.pc(), 0x14cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00D6
        gbc.setState(0x1065, 0xd904, 0xb5a0, 0x9905, 0x773a, 0x516c, 0x0, 0x1);
        gbc.writeMem(0x1065, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd904);
        EXPECT(gbc.pc(), 0x1067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00D7
        gbc.setState(0xa9c3, 0x7a6d, 0x2810, 0x4272, 0x4e4a, 0x8139, 0x0, 0x0);
        gbc.writeMem(0xa9c3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7a6d);
        EXPECT(gbc.pc(), 0xa9c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9c3), 0xcb);
        EXPECT(gbc.readMem(0xa9c4), 0x6d);
        // CB 6D 00D8
        gbc.setState(0xa655, 0x5ae0, 0x4be0, 0x416, 0x6539, 0x9033, 0x1, 0x1);
        gbc.writeMem(0xa655, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5ae0);
        EXPECT(gbc.pc(), 0xa657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa655), 0xcb);
        EXPECT(gbc.readMem(0xa656), 0x6d);
        // CB 6D 00D9
        gbc.setState(0x9223, 0xf41c, 0x4340, 0x4a5d, 0xb276, 0xee3d, 0x0, 0x0);
        gbc.writeMem(0x9223, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf41c);
        EXPECT(gbc.pc(), 0x9225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9223), 0xcb);
        EXPECT(gbc.readMem(0x9224), 0x6d);
        // CB 6D 00DA
        gbc.setState(0x2ad0, 0x7b8d, 0xbf90, 0x7a98, 0xba94, 0xeaf3, 0x0, 0x0);
        gbc.writeMem(0x2ad0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7b8d);
        EXPECT(gbc.pc(), 0x2ad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00DB
        gbc.setState(0xd3d, 0x646f, 0x78c0, 0xb86f, 0xa86b, 0x4525, 0x0, 0x1);
        gbc.writeMem(0xd3d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x646f);
        EXPECT(gbc.pc(), 0xd3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00DC
        gbc.setState(0xd666, 0x96e3, 0x3410, 0x7992, 0x71e0, 0xcdfe, 0x0, 0x0);
        gbc.writeMem(0xd666, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x96e3);
        EXPECT(gbc.pc(), 0xd668);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd666), 0xcb);
        EXPECT(gbc.readMem(0xd667), 0x6d);
        // CB 6D 00DD
        gbc.setState(0x377a, 0x5f0d, 0x38c0, 0xd9cf, 0x1f5b, 0x5eac, 0x1, 0x1);
        gbc.writeMem(0x377a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5f0d);
        EXPECT(gbc.pc(), 0x377c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00DE
        gbc.setState(0xd955, 0xfbfb, 0xcbe0, 0x6d73, 0x7ab3, 0xb73d, 0x1, 0x1);
        gbc.writeMem(0xd955, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfbfb);
        EXPECT(gbc.pc(), 0xd957);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd955), 0xcb);
        EXPECT(gbc.readMem(0xd956), 0x6d);
        // CB 6D 00DF
        gbc.setState(0xe735, 0x6427, 0x2e90, 0x20a4, 0xdeef, 0xdd06, 0x0, 0x1);
        gbc.writeMem(0xe735, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x6427);
        EXPECT(gbc.pc(), 0xe737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe735), 0xcb);
        EXPECT(gbc.readMem(0xe736), 0x6d);
        // CB 6D 00E0
        gbc.setState(0x942c, 0x3b10, 0xb9d0, 0xb54e, 0x259b, 0x21f2, 0x0, 0x0);
        gbc.writeMem(0x942c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3b10);
        EXPECT(gbc.pc(), 0x942e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x942c), 0xcb);
        EXPECT(gbc.readMem(0x942d), 0x6d);
        // CB 6D 00E1
        gbc.setState(0x1cd2, 0x163d, 0xcc10, 0x45d, 0x660b, 0xa17d, 0x1, 0x1);
        gbc.writeMem(0x1cd2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x163d);
        EXPECT(gbc.pc(), 0x1cd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00E2
        gbc.setState(0x63fd, 0xb10f, 0x76f0, 0x7bd, 0x855e, 0xc621, 0x0, 0x0);
        gbc.writeMem(0x63fd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb10f);
        EXPECT(gbc.pc(), 0x63ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00E3
        gbc.setState(0x309f, 0xe45c, 0x480, 0xde99, 0x1986, 0xedd4, 0x1, 0x0);
        gbc.writeMem(0x309f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe45c);
        EXPECT(gbc.pc(), 0x30a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00E5
        gbc.setState(0x7df1, 0xfc94, 0xc210, 0x8dc9, 0x3b20, 0xe83f, 0x1, 0x0);
        gbc.writeMem(0x7df1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xfc94);
        EXPECT(gbc.pc(), 0x7df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00E6
        gbc.setState(0x8c13, 0x5da, 0x1410, 0x758f, 0xd73a, 0xa542, 0x0, 0x1);
        gbc.writeMem(0x8c13, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5da);
        EXPECT(gbc.pc(), 0x8c15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c13), 0xcb);
        EXPECT(gbc.readMem(0x8c14), 0x6d);
        // CB 6D 00E7
        gbc.setState(0x6ee2, 0x52d2, 0xcb00, 0x38ac, 0x4e34, 0xf780, 0x0, 0x0);
        gbc.writeMem(0x6ee2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x52d2);
        EXPECT(gbc.pc(), 0x6ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00E8
        gbc.setState(0xadef, 0xb042, 0x26c0, 0x583, 0x2282, 0xc8c9, 0x0, 0x1);
        gbc.writeMem(0xadef, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb042);
        EXPECT(gbc.pc(), 0xadf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadef), 0xcb);
        EXPECT(gbc.readMem(0xadf0), 0x6d);
        // CB 6D 00E9
        gbc.setState(0xa82, 0x5dfd, 0x20f0, 0x5fd6, 0x640c, 0x15b9, 0x0, 0x1);
        gbc.writeMem(0xa82, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5dfd);
        EXPECT(gbc.pc(), 0xa84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00EA
        gbc.setState(0xeb8c, 0x906d, 0xe900, 0xe219, 0x960e, 0x7cae, 0x1, 0x0);
        gbc.writeMem(0xeb8c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x906d);
        EXPECT(gbc.pc(), 0xeb8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb8c), 0xcb);
        EXPECT(gbc.readMem(0xeb8d), 0x6d);
        // CB 6D 00EB
        gbc.setState(0x2b70, 0x716d, 0x36e0, 0xd53a, 0xf64c, 0xb655, 0x0, 0x0);
        gbc.writeMem(0x2b70, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x716d);
        EXPECT(gbc.pc(), 0x2b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00EC
        gbc.setState(0x6972, 0x22a, 0x5020, 0xfa31, 0xd0ae, 0xee36, 0x1, 0x1);
        gbc.writeMem(0x6972, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x22a);
        EXPECT(gbc.pc(), 0x6974);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00ED
        gbc.setState(0xe900, 0x819f, 0x8d30, 0xb8b, 0x3c7f, 0x3321, 0x0, 0x0);
        gbc.writeMem(0xe900, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x819f);
        EXPECT(gbc.pc(), 0xe902);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe900), 0xcb);
        EXPECT(gbc.readMem(0xe901), 0x6d);
        // CB 6D 00EE
        gbc.setState(0x2ffc, 0x7b88, 0x5eb0, 0xfb51, 0x1001, 0xbb55, 0x1, 0x0);
        gbc.writeMem(0x2ffc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7b88);
        EXPECT(gbc.pc(), 0x2ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00EF
        gbc.setState(0x5b76, 0xeea0, 0xed50, 0xc83f, 0x8e45, 0xa8d0, 0x0, 0x0);
        gbc.writeMem(0x5b76, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xeea0);
        EXPECT(gbc.pc(), 0x5b78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 00F0
        gbc.setState(0x8e0a, 0x8821, 0xf4f0, 0xe062, 0xffc6, 0xa23f, 0x1, 0x1);
        gbc.writeMem(0x8e0a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8821);
        EXPECT(gbc.pc(), 0x8e0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e0a), 0xcb);
        EXPECT(gbc.readMem(0x8e0b), 0x6d);
        // CB 6D 00F1
        gbc.setState(0x449a, 0x34bc, 0xa0a0, 0x2b39, 0x1700, 0x21cc, 0x1, 0x0);
        gbc.writeMem(0x449a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x34bc);
        EXPECT(gbc.pc(), 0x449c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00F2
        gbc.setState(0xeb53, 0xeab4, 0xeed0, 0x4995, 0x4d37, 0xeec, 0x0, 0x1);
        gbc.writeMem(0xeb53, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xeab4);
        EXPECT(gbc.pc(), 0xeb55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb53), 0xcb);
        EXPECT(gbc.readMem(0xeb54), 0x6d);
        // CB 6D 00F3
        gbc.setState(0xb839, 0x1ca2, 0xfbb0, 0xa825, 0x3a2f, 0xc12f, 0x1, 0x1);
        gbc.writeMem(0xb839, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1ca2);
        EXPECT(gbc.pc(), 0xb83b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb839), 0xcb);
        EXPECT(gbc.readMem(0xb83a), 0x6d);
        // CB 6D 00F4
        gbc.setState(0xdfdd, 0xcaf3, 0xa410, 0x3739, 0x3216, 0x79d7, 0x0, 0x0);
        gbc.writeMem(0xdfdd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcaf3);
        EXPECT(gbc.pc(), 0xdfdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfdd), 0xcb);
        EXPECT(gbc.readMem(0xdfde), 0x6d);
        // CB 6D 00F5
        gbc.setState(0xdb06, 0x9534, 0x260, 0xd63f, 0xb7af, 0x8360, 0x1, 0x0);
        gbc.writeMem(0xdb06, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9534);
        EXPECT(gbc.pc(), 0xdb08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb06), 0xcb);
        EXPECT(gbc.readMem(0xdb07), 0x6d);
        // CB 6D 00F6
        gbc.setState(0xa3d, 0x8579, 0x21c0, 0x4abf, 0x917e, 0x7e10, 0x0, 0x0);
        gbc.writeMem(0xa3d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8579);
        EXPECT(gbc.pc(), 0xa3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00F7
        gbc.setState(0x87ba, 0x417d, 0x72e0, 0x3aec, 0xf627, 0x98a5, 0x0, 0x0);
        gbc.writeMem(0x87ba, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x417d);
        EXPECT(gbc.pc(), 0x87bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ba), 0xcb);
        EXPECT(gbc.readMem(0x87bb), 0x6d);
        // CB 6D 00F8
        gbc.setState(0x89eb, 0x7054, 0x9c00, 0x50f1, 0x44a3, 0x43f, 0x1, 0x0);
        gbc.writeMem(0x89eb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7054);
        EXPECT(gbc.pc(), 0x89ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89eb), 0xcb);
        EXPECT(gbc.readMem(0x89ec), 0x6d);
        // CB 6D 00F9
        gbc.setState(0x17e5, 0x9c31, 0x8a0, 0x846b, 0x1101, 0x25aa, 0x1, 0x1);
        gbc.writeMem(0x17e5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9c31);
        EXPECT(gbc.pc(), 0x17e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00FA
        gbc.setState(0xd7c1, 0x29b, 0xb780, 0xd15, 0x8728, 0xbf6f, 0x1, 0x1);
        gbc.writeMem(0xd7c1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x29b);
        EXPECT(gbc.pc(), 0xd7c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7c1), 0xcb);
        EXPECT(gbc.readMem(0xd7c2), 0x6d);
        // CB 6D 00FB
        gbc.setState(0xdc3, 0xe008, 0xf9a0, 0x5457, 0x8654, 0x251f, 0x1, 0x0);
        gbc.writeMem(0xdc3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe008);
        EXPECT(gbc.pc(), 0xdc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00FC
        gbc.setState(0x7595, 0x9713, 0xd120, 0xab, 0x44ba, 0xf4c7, 0x0, 0x0);
        gbc.writeMem(0x7595, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9713);
        EXPECT(gbc.pc(), 0x7597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00FD
        gbc.setState(0x11ac, 0xca79, 0xcbe0, 0x6e4d, 0x726b, 0xb168, 0x1, 0x1);
        gbc.writeMem(0x11ac, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xca79);
        EXPECT(gbc.pc(), 0x11ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 00FE
        gbc.setState(0x9efe, 0x7a73, 0x2df0, 0xece2, 0xef0f, 0x5b72, 0x0, 0x1);
        gbc.writeMem(0x9efe, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x7a73);
        EXPECT(gbc.pc(), 0x9f00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9efe), 0xcb);
        EXPECT(gbc.readMem(0x9eff), 0x6d);
        // CB 6D 00FF
        gbc.setState(0x4349, 0xa6cb, 0x1eb0, 0xde21, 0x1a8c, 0xa958, 0x0, 0x1);
        gbc.writeMem(0x4349, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa6cb);
        EXPECT(gbc.pc(), 0x434b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0100
        gbc.setState(0x67ff, 0x136e, 0xc090, 0x7d0, 0xff07, 0xaebf, 0x0, 0x0);
        gbc.writeMem(0x67ff, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x136e);
        EXPECT(gbc.pc(), 0x6801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0101
        gbc.setState(0xc45c, 0xc51d, 0x7d50, 0x2f90, 0xb509, 0x9b08, 0x1, 0x1);
        gbc.writeMem(0xc45c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc51d);
        EXPECT(gbc.pc(), 0xc45e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc45c), 0xcb);
        EXPECT(gbc.readMem(0xc45d), 0x6d);
        // CB 6D 0102
        gbc.setState(0x5472, 0xbe3a, 0x41b0, 0x79f5, 0x1023, 0x1e79, 0x1, 0x0);
        gbc.writeMem(0x5472, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbe3a);
        EXPECT(gbc.pc(), 0x5474);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0103
        gbc.setState(0x7fcf, 0x62b9, 0x1400, 0x9c27, 0xeab4, 0x5a40, 0x1, 0x1);
        gbc.writeMem(0x7fcf, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x62b9);
        EXPECT(gbc.pc(), 0x7fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0104
        gbc.setState(0xc98f, 0x3479, 0x9dc0, 0x481d, 0x8551, 0x3347, 0x0, 0x1);
        gbc.writeMem(0xc98f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3479);
        EXPECT(gbc.pc(), 0xc991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc98f), 0xcb);
        EXPECT(gbc.readMem(0xc990), 0x6d);
        // CB 6D 0105
        gbc.setState(0xbfd0, 0x6152, 0x3420, 0xf98e, 0x3133, 0xa16d, 0x1, 0x0);
        gbc.writeMem(0xbfd0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6152);
        EXPECT(gbc.pc(), 0xbfd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd0), 0xcb);
        EXPECT(gbc.readMem(0xbfd1), 0x6d);
        // CB 6D 0106
        gbc.setState(0xe54, 0xd054, 0x7130, 0xe6c4, 0xb2b1, 0xc4fe, 0x1, 0x1);
        gbc.writeMem(0xe54, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd054);
        EXPECT(gbc.pc(), 0xe56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0107
        gbc.setState(0xe35d, 0x98a4, 0xd480, 0x8e83, 0x7185, 0x1247, 0x0, 0x0);
        gbc.writeMem(0xe35d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x98a4);
        EXPECT(gbc.pc(), 0xe35f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe35d), 0xcb);
        EXPECT(gbc.readMem(0xe35e), 0x6d);
        // CB 6D 0108
        gbc.setState(0x2662, 0x76b0, 0x68d0, 0xc754, 0x5785, 0xdbb0, 0x1, 0x0);
        gbc.writeMem(0x2662, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x76b0);
        EXPECT(gbc.pc(), 0x2664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0109
        gbc.setState(0x3301, 0xc468, 0x86a0, 0x3ee6, 0x7700, 0x72ec, 0x1, 0x1);
        gbc.writeMem(0x3301, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc468);
        EXPECT(gbc.pc(), 0x3303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 010A
        gbc.setState(0xcd28, 0xa2c8, 0x300, 0xfb41, 0x1c08, 0x33c3, 0x0, 0x0);
        gbc.writeMem(0xcd28, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa2c8);
        EXPECT(gbc.pc(), 0xcd2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd28), 0xcb);
        EXPECT(gbc.readMem(0xcd29), 0x6d);
        // CB 6D 010B
        gbc.setState(0xd6a7, 0xfdc8, 0x1fd0, 0x5de9, 0xa61d, 0x7a1c, 0x1, 0x0);
        gbc.writeMem(0xd6a7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xfdc8);
        EXPECT(gbc.pc(), 0xd6a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a7), 0xcb);
        EXPECT(gbc.readMem(0xd6a8), 0x6d);
        // CB 6D 010C
        gbc.setState(0xee7e, 0xea17, 0x27b0, 0xf782, 0x5735, 0x30e6, 0x1, 0x0);
        gbc.writeMem(0xee7e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xea17);
        EXPECT(gbc.pc(), 0xee80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee7e), 0xcb);
        EXPECT(gbc.readMem(0xee7f), 0x6d);
        // CB 6D 010D
        gbc.setState(0x7f64, 0xd38e, 0x33e0, 0x4935, 0x8963, 0x9918, 0x1, 0x0);
        gbc.writeMem(0x7f64, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd38e);
        EXPECT(gbc.pc(), 0x7f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 010E
        gbc.setState(0xcaa3, 0x557c, 0x8c70, 0xc7ae, 0xc1f6, 0x24b, 0x0, 0x1);
        gbc.writeMem(0xcaa3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x557c);
        EXPECT(gbc.pc(), 0xcaa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaa3), 0xcb);
        EXPECT(gbc.readMem(0xcaa4), 0x6d);
        // CB 6D 010F
        gbc.setState(0x8b6c, 0xae17, 0xb460, 0x8cfa, 0x7e78, 0x1e63, 0x1, 0x1);
        gbc.writeMem(0x8b6c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xae17);
        EXPECT(gbc.pc(), 0x8b6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b6c), 0xcb);
        EXPECT(gbc.readMem(0x8b6d), 0x6d);
        // CB 6D 0110
        gbc.setState(0xa89e, 0xab7, 0xb2c0, 0xdd2c, 0x6285, 0xcb4d, 0x1, 0x1);
        gbc.writeMem(0xa89e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xab7);
        EXPECT(gbc.pc(), 0xa8a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa89e), 0xcb);
        EXPECT(gbc.readMem(0xa89f), 0x6d);
        // CB 6D 0111
        gbc.setState(0x32fc, 0xe4ba, 0xfd60, 0x31c0, 0xb285, 0xbd0, 0x0, 0x1);
        gbc.writeMem(0x32fc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe4ba);
        EXPECT(gbc.pc(), 0x32fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0112
        gbc.setState(0xbed, 0x1b4e, 0x12d0, 0x64f7, 0x7c10, 0xb8e, 0x1, 0x1);
        gbc.writeMem(0xbed, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1b4e);
        EXPECT(gbc.pc(), 0xbef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0113
        gbc.setState(0x2762, 0x11ce, 0x79d0, 0x79cf, 0xa92b, 0xc331, 0x0, 0x0);
        gbc.writeMem(0x2762, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x11ce);
        EXPECT(gbc.pc(), 0x2764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0114
        gbc.setState(0x74ef, 0xae02, 0x8cd0, 0xf27a, 0x7446, 0xfd1c, 0x0, 0x1);
        gbc.writeMem(0x74ef, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xae02);
        EXPECT(gbc.pc(), 0x74f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0115
        gbc.setState(0x1bbd, 0xe40f, 0x25b0, 0xff50, 0x41b4, 0x98f0, 0x0, 0x1);
        gbc.writeMem(0x1bbd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe40f);
        EXPECT(gbc.pc(), 0x1bbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0116
        gbc.setState(0x8bfa, 0xe67b, 0x50, 0x35c2, 0xe556, 0xa0db, 0x1, 0x0);
        gbc.writeMem(0x8bfa, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe67b);
        EXPECT(gbc.pc(), 0x8bfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bfa), 0xcb);
        EXPECT(gbc.readMem(0x8bfb), 0x6d);
        // CB 6D 0117
        gbc.setState(0xcd6, 0x8608, 0xdef0, 0x277d, 0xa47, 0xf899, 0x0, 0x1);
        gbc.writeMem(0xcd6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8608);
        EXPECT(gbc.pc(), 0xcd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0118
        gbc.setState(0xd70b, 0xaeb2, 0x3e20, 0x9ab4, 0xd0ff, 0xe0ed, 0x1, 0x1);
        gbc.writeMem(0xd70b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xaeb2);
        EXPECT(gbc.pc(), 0xd70d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd70b), 0xcb);
        EXPECT(gbc.readMem(0xd70c), 0x6d);
        // CB 6D 0119
        gbc.setState(0x8f14, 0xae7b, 0xaf10, 0x9ed3, 0xd5b9, 0xb777, 0x1, 0x0);
        gbc.writeMem(0x8f14, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xae7b);
        EXPECT(gbc.pc(), 0x8f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f14), 0xcb);
        EXPECT(gbc.readMem(0x8f15), 0x6d);
        // CB 6D 011A
        gbc.setState(0x155d, 0xb753, 0x84a0, 0x832, 0x27aa, 0x6a05, 0x0, 0x1);
        gbc.writeMem(0x155d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb753);
        EXPECT(gbc.pc(), 0x155f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 011B
        gbc.setState(0x5a08, 0x2883, 0xeae0, 0xffb3, 0xcd58, 0x6c70, 0x0, 0x0);
        gbc.writeMem(0x5a08, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x2883);
        EXPECT(gbc.pc(), 0x5a0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 011D
        gbc.setState(0x6f05, 0x4b1f, 0x66f0, 0xf9ff, 0xa356, 0xc92f, 0x1, 0x0);
        gbc.writeMem(0x6f05, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4b1f);
        EXPECT(gbc.pc(), 0x6f07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 011E
        gbc.setState(0x1b29, 0xb42e, 0x59e0, 0x1926, 0x9fb0, 0x3a7, 0x1, 0x1);
        gbc.writeMem(0x1b29, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb42e);
        EXPECT(gbc.pc(), 0x1b2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 011F
        gbc.setState(0x466, 0x4d, 0xd8f0, 0x6bef, 0xd108, 0xf9c1, 0x1, 0x1);
        gbc.writeMem(0x466, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4d);
        EXPECT(gbc.pc(), 0x468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0120
        gbc.setState(0x87f8, 0x679b, 0xe610, 0x5b32, 0xfe34, 0xc931, 0x1, 0x0);
        gbc.writeMem(0x87f8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x679b);
        EXPECT(gbc.pc(), 0x87fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f8), 0xcb);
        EXPECT(gbc.readMem(0x87f9), 0x6d);
        // CB 6D 0121
        gbc.setState(0xadf1, 0xf579, 0x55b0, 0xa6e7, 0x1284, 0x125c, 0x1, 0x1);
        gbc.writeMem(0xadf1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf579);
        EXPECT(gbc.pc(), 0xadf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf1), 0xcb);
        EXPECT(gbc.readMem(0xadf2), 0x6d);
        // CB 6D 0122
        gbc.setState(0x62e3, 0xe801, 0xa850, 0x22d6, 0xf7cd, 0xef1b, 0x1, 0x1);
        gbc.writeMem(0x62e3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe801);
        EXPECT(gbc.pc(), 0x62e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0123
        gbc.setState(0xbaa, 0x83f7, 0x9e20, 0xdf0d, 0xe0c7, 0xa244, 0x1, 0x0);
        gbc.writeMem(0xbaa, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x83f7);
        EXPECT(gbc.pc(), 0xbac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0124
        gbc.setState(0x5df0, 0xa0ef, 0x95b0, 0x57ef, 0x15ab, 0xb7e9, 0x1, 0x0);
        gbc.writeMem(0x5df0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa0ef);
        EXPECT(gbc.pc(), 0x5df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0125
        gbc.setState(0x8ef8, 0x5d43, 0x6a60, 0x1e3f, 0xde21, 0x22aa, 0x1, 0x0);
        gbc.writeMem(0x8ef8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5d43);
        EXPECT(gbc.pc(), 0x8efa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ef8), 0xcb);
        EXPECT(gbc.readMem(0x8ef9), 0x6d);
        // CB 6D 0126
        gbc.setState(0x85bd, 0x4b4a, 0xa070, 0xcc27, 0xaf2f, 0x5eb0, 0x1, 0x1);
        gbc.writeMem(0x85bd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4b4a);
        EXPECT(gbc.pc(), 0x85bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85bd), 0xcb);
        EXPECT(gbc.readMem(0x85be), 0x6d);
        // CB 6D 0127
        gbc.setState(0xc210, 0xabb3, 0x2d20, 0x8f9, 0x65e5, 0xdd24, 0x0, 0x1);
        gbc.writeMem(0xc210, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xabb3);
        EXPECT(gbc.pc(), 0xc212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc210), 0xcb);
        EXPECT(gbc.readMem(0xc211), 0x6d);
        // CB 6D 0128
        gbc.setState(0x180, 0x6dad, 0xf560, 0xa9a2, 0x5279, 0x536c, 0x0, 0x0);
        gbc.writeMem(0x180, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6dad);
        EXPECT(gbc.pc(), 0x182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0129
        gbc.setState(0x2941, 0x73e6, 0x3710, 0x9e41, 0x79e5, 0x60bb, 0x0, 0x0);
        gbc.writeMem(0x2941, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x73e6);
        EXPECT(gbc.pc(), 0x2943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 012A
        gbc.setState(0x826d, 0x4877, 0x7690, 0xf852, 0xa718, 0xa80a, 0x1, 0x0);
        gbc.writeMem(0x826d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4877);
        EXPECT(gbc.pc(), 0x826f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x826d), 0xcb);
        EXPECT(gbc.readMem(0x826e), 0x6d);
        // CB 6D 012B
        gbc.setState(0xe022, 0x19eb, 0xebd0, 0x5d1b, 0xb99, 0x46cd, 0x1, 0x1);
        gbc.writeMem(0xe022, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x19eb);
        EXPECT(gbc.pc(), 0xe024);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe022), 0xcb);
        EXPECT(gbc.readMem(0xe023), 0x6d);
        // CB 6D 012C
        gbc.setState(0x5e5e, 0x32d0, 0xbaf0, 0x819a, 0xad65, 0x2ab8, 0x0, 0x0);
        gbc.writeMem(0x5e5e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x32d0);
        EXPECT(gbc.pc(), 0x5e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 012D
        gbc.setState(0x7bed, 0x52cf, 0xdb10, 0x41df, 0xf247, 0xa17f, 0x0, 0x0);
        gbc.writeMem(0x7bed, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x52cf);
        EXPECT(gbc.pc(), 0x7bef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 012E
        gbc.setState(0x200, 0x2298, 0x3eb0, 0xd2f9, 0x1329, 0xaac9, 0x0, 0x0);
        gbc.writeMem(0x200, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2298);
        EXPECT(gbc.pc(), 0x202);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 012F
        gbc.setState(0x24af, 0xe9c5, 0x3b20, 0xce69, 0x461, 0x4926, 0x0, 0x1);
        gbc.writeMem(0x24af, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe9c5);
        EXPECT(gbc.pc(), 0x24b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0130
        gbc.setState(0x1d38, 0x2156, 0xe660, 0x4d27, 0x6c26, 0x38ba, 0x0, 0x0);
        gbc.writeMem(0x1d38, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2156);
        EXPECT(gbc.pc(), 0x1d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0131
        gbc.setState(0xc438, 0xcf6c, 0x9470, 0xbc3a, 0x4501, 0x402c, 0x1, 0x0);
        gbc.writeMem(0xc438, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xcf6c);
        EXPECT(gbc.pc(), 0xc43a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc438), 0xcb);
        EXPECT(gbc.readMem(0xc439), 0x6d);
        // CB 6D 0132
        gbc.setState(0x5c4, 0x9806, 0xc2b0, 0x79fb, 0xace7, 0xd36, 0x0, 0x1);
        gbc.writeMem(0x5c4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9806);
        EXPECT(gbc.pc(), 0x5c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0133
        gbc.setState(0xbe41, 0x7f8e, 0xe950, 0x7478, 0x594a, 0xab8e, 0x0, 0x1);
        gbc.writeMem(0xbe41, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7f8e);
        EXPECT(gbc.pc(), 0xbe43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe41), 0xcb);
        EXPECT(gbc.readMem(0xbe42), 0x6d);
        // CB 6D 0134
        gbc.setState(0x7514, 0xcad0, 0x850, 0xa60, 0x3ca4, 0x55b8, 0x0, 0x0);
        gbc.writeMem(0x7514, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xcad0);
        EXPECT(gbc.pc(), 0x7516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0135
        gbc.setState(0x79c0, 0xb895, 0xa4a0, 0xd7f3, 0x21da, 0xdc95, 0x1, 0x0);
        gbc.writeMem(0x79c0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb895);
        EXPECT(gbc.pc(), 0x79c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0136
        gbc.setState(0xc9a4, 0xa7cf, 0xfe30, 0x3689, 0xb192, 0xf92, 0x1, 0x1);
        gbc.writeMem(0xc9a4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa7cf);
        EXPECT(gbc.pc(), 0xc9a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a4), 0xcb);
        EXPECT(gbc.readMem(0xc9a5), 0x6d);
        // CB 6D 0137
        gbc.setState(0xe9a5, 0xbdf, 0x12f0, 0x154e, 0x3aeb, 0x40b2, 0x1, 0x0);
        gbc.writeMem(0xe9a5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbdf);
        EXPECT(gbc.pc(), 0xe9a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a5), 0xcb);
        EXPECT(gbc.readMem(0xe9a6), 0x6d);
        // CB 6D 0138
        gbc.setState(0xb199, 0xb9d6, 0x4ea0, 0xc73d, 0x5ff6, 0x6eab, 0x0, 0x1);
        gbc.writeMem(0xb199, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb9d6);
        EXPECT(gbc.pc(), 0xb19b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb199), 0xcb);
        EXPECT(gbc.readMem(0xb19a), 0x6d);
        // CB 6D 0139
        gbc.setState(0xa9b6, 0x587, 0xb8a0, 0xf7b2, 0x1239, 0x784d, 0x0, 0x0);
        gbc.writeMem(0xa9b6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x587);
        EXPECT(gbc.pc(), 0xa9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b6), 0xcb);
        EXPECT(gbc.readMem(0xa9b7), 0x6d);
        // CB 6D 013A
        gbc.setState(0x2f5e, 0x102b, 0xe820, 0x9983, 0x4cd6, 0xa7b7, 0x1, 0x0);
        gbc.writeMem(0x2f5e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x102b);
        EXPECT(gbc.pc(), 0x2f60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 013B
        gbc.setState(0x864e, 0x8366, 0x4fc0, 0xa1ea, 0xb8f9, 0xf05c, 0x0, 0x1);
        gbc.writeMem(0x864e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8366);
        EXPECT(gbc.pc(), 0x8650);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x864e), 0xcb);
        EXPECT(gbc.readMem(0x864f), 0x6d);
        // CB 6D 013C
        gbc.setState(0xecd1, 0x4153, 0xc920, 0xcb2e, 0x52ab, 0xbde2, 0x0, 0x0);
        gbc.writeMem(0xecd1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4153);
        EXPECT(gbc.pc(), 0xecd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecd1), 0xcb);
        EXPECT(gbc.readMem(0xecd2), 0x6d);
        // CB 6D 013D
        gbc.setState(0x2ee7, 0x6c0e, 0xafa0, 0xe7f5, 0xc0c7, 0xa43a, 0x0, 0x0);
        gbc.writeMem(0x2ee7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6c0e);
        EXPECT(gbc.pc(), 0x2ee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 013E
        gbc.setState(0xc0, 0xa375, 0xb570, 0x4890, 0x2f2d, 0x4a23, 0x1, 0x1);
        gbc.writeMem(0xc0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa375);
        EXPECT(gbc.pc(), 0xc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0140
        gbc.setState(0x5fae, 0x6ecb, 0x98c0, 0x213, 0xc7a, 0x59ab, 0x0, 0x0);
        gbc.writeMem(0x5fae, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6ecb);
        EXPECT(gbc.pc(), 0x5fb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0141
        gbc.setState(0x7ff4, 0x169b, 0xfe10, 0x4f10, 0x585a, 0xa3ac, 0x1, 0x1);
        gbc.writeMem(0x7ff4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x169b);
        EXPECT(gbc.pc(), 0x7ff6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0142
        gbc.setState(0x8a14, 0x31d0, 0x9030, 0xbec6, 0x8e2, 0xe297, 0x0, 0x1);
        gbc.writeMem(0x8a14, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x31d0);
        EXPECT(gbc.pc(), 0x8a16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a14), 0xcb);
        EXPECT(gbc.readMem(0x8a15), 0x6d);
        // CB 6D 0143
        gbc.setState(0x466e, 0xdd5a, 0x9e20, 0xe4e7, 0xb91d, 0x24c0, 0x1, 0x0);
        gbc.writeMem(0x466e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xdd5a);
        EXPECT(gbc.pc(), 0x4670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0144
        gbc.setState(0xe246, 0xc665, 0xfb00, 0xbe57, 0xcfc, 0xc135, 0x0, 0x1);
        gbc.writeMem(0xe246, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc665);
        EXPECT(gbc.pc(), 0xe248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe246), 0xcb);
        EXPECT(gbc.readMem(0xe247), 0x6d);
        // CB 6D 0145
        gbc.setState(0x985c, 0xb17d, 0x16d0, 0xa434, 0x7cef, 0xdcd9, 0x1, 0x1);
        gbc.writeMem(0x985c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb17d);
        EXPECT(gbc.pc(), 0x985e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x985c), 0xcb);
        EXPECT(gbc.readMem(0x985d), 0x6d);
        // CB 6D 0146
        gbc.setState(0x9bd, 0x3050, 0x130, 0xdf42, 0x4bad, 0x6cb9, 0x0, 0x1);
        gbc.writeMem(0x9bd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3050);
        EXPECT(gbc.pc(), 0x9bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0147
        gbc.setState(0x7d13, 0xce9d, 0x1620, 0x3a53, 0x9919, 0x8495, 0x0, 0x0);
        gbc.writeMem(0x7d13, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xce9d);
        EXPECT(gbc.pc(), 0x7d15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0148
        gbc.setState(0x7dba, 0x9c4e, 0xf900, 0x3638, 0x3658, 0xe8c4, 0x1, 0x1);
        gbc.writeMem(0x7dba, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9c4e);
        EXPECT(gbc.pc(), 0x7dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0149
        gbc.setState(0xcc69, 0xeae1, 0xb030, 0xfc40, 0xe991, 0xb911, 0x0, 0x0);
        gbc.writeMem(0xcc69, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xeae1);
        EXPECT(gbc.pc(), 0xcc6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc69), 0xcb);
        EXPECT(gbc.readMem(0xcc6a), 0x6d);
        // CB 6D 014A
        gbc.setState(0x9130, 0x49b0, 0xe900, 0xb0e0, 0xa9c6, 0x3756, 0x1, 0x0);
        gbc.writeMem(0x9130, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x49b0);
        EXPECT(gbc.pc(), 0x9132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9130), 0xcb);
        EXPECT(gbc.readMem(0x9131), 0x6d);
        // CB 6D 014B
        gbc.setState(0x7450, 0x386b, 0xd9a0, 0x2214, 0xc062, 0xc8ce, 0x1, 0x0);
        gbc.writeMem(0x7450, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x386b);
        EXPECT(gbc.pc(), 0x7452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 014C
        gbc.setState(0xaa40, 0x6ef9, 0x9840, 0x78e, 0x8f63, 0x3c9d, 0x0, 0x1);
        gbc.writeMem(0xaa40, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6ef9);
        EXPECT(gbc.pc(), 0xaa42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa40), 0xcb);
        EXPECT(gbc.readMem(0xaa41), 0x6d);
        // CB 6D 014D
        gbc.setState(0x5ebb, 0xaf93, 0x2c40, 0xf258, 0x9434, 0x68, 0x0, 0x1);
        gbc.writeMem(0x5ebb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xaf93);
        EXPECT(gbc.pc(), 0x5ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 014E
        gbc.setState(0x5c99, 0x9024, 0x5660, 0xfc30, 0x2ffc, 0x24a1, 0x1, 0x1);
        gbc.writeMem(0x5c99, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9024);
        EXPECT(gbc.pc(), 0x5c9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 014F
        gbc.setState(0xc0a6, 0xb747, 0x4630, 0x675d, 0x498, 0x9db9, 0x1, 0x1);
        gbc.writeMem(0xc0a6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb747);
        EXPECT(gbc.pc(), 0xc0a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0a6), 0xcb);
        EXPECT(gbc.readMem(0xc0a7), 0x6d);
        // CB 6D 0150
        gbc.setState(0xf9d, 0xa4e9, 0xc2b0, 0x199e, 0xa5f7, 0x620, 0x1, 0x1);
        gbc.writeMem(0xf9d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa4e9);
        EXPECT(gbc.pc(), 0xf9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0151
        gbc.setState(0x7504, 0x5d23, 0x7d0, 0xb4c5, 0x5dd6, 0x4f73, 0x0, 0x1);
        gbc.writeMem(0x7504, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5d23);
        EXPECT(gbc.pc(), 0x7506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0152
        gbc.setState(0x574f, 0x2b40, 0x1de0, 0x594, 0xe37a, 0xa927, 0x0, 0x1);
        gbc.writeMem(0x574f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2b40);
        EXPECT(gbc.pc(), 0x5751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0153
        gbc.setState(0x24ee, 0xf776, 0xced0, 0x127c, 0xbd17, 0x24d9, 0x1, 0x1);
        gbc.writeMem(0x24ee, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf776);
        EXPECT(gbc.pc(), 0x24f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0155
        gbc.setState(0xbc3f, 0xbe4c, 0x44b0, 0xcf62, 0xb171, 0x295b, 0x0, 0x1);
        gbc.writeMem(0xbc3f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbe4c);
        EXPECT(gbc.pc(), 0xbc41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc3f), 0xcb);
        EXPECT(gbc.readMem(0xbc40), 0x6d);
        // CB 6D 0156
        gbc.setState(0x2343, 0xc84f, 0xd4c0, 0xced4, 0x32c1, 0xaa7c, 0x1, 0x1);
        gbc.writeMem(0x2343, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc84f);
        EXPECT(gbc.pc(), 0x2345);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0157
        gbc.setState(0x294d, 0xc953, 0x2620, 0x5ccd, 0xfb61, 0x2ac7, 0x0, 0x1);
        gbc.writeMem(0x294d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc953);
        EXPECT(gbc.pc(), 0x294f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0158
        gbc.setState(0xd7aa, 0xf875, 0x8b70, 0x62b1, 0x451c, 0xc52c, 0x0, 0x0);
        gbc.writeMem(0xd7aa, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf875);
        EXPECT(gbc.pc(), 0xd7ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7aa), 0xcb);
        EXPECT(gbc.readMem(0xd7ab), 0x6d);
        // CB 6D 0159
        gbc.setState(0x1503, 0x2bc3, 0xddb0, 0x160a, 0xf96a, 0x8eca, 0x0, 0x0);
        gbc.writeMem(0x1503, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2bc3);
        EXPECT(gbc.pc(), 0x1505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 015A
        gbc.setState(0xc0db, 0xdf95, 0xe7e0, 0x6933, 0x5492, 0xb13a, 0x0, 0x1);
        gbc.writeMem(0xc0db, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdf95);
        EXPECT(gbc.pc(), 0xc0dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0db), 0xcb);
        EXPECT(gbc.readMem(0xc0dc), 0x6d);
        // CB 6D 015B
        gbc.setState(0xb106, 0xca4, 0x1b50, 0x6f81, 0xf774, 0x78ef, 0x1, 0x1);
        gbc.writeMem(0xb106, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xca4);
        EXPECT(gbc.pc(), 0xb108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb106), 0xcb);
        EXPECT(gbc.readMem(0xb107), 0x6d);
        // CB 6D 015C
        gbc.setState(0x130e, 0x804b, 0xfb70, 0x81e9, 0xcc3, 0x2e92, 0x0, 0x1);
        gbc.writeMem(0x130e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x804b);
        EXPECT(gbc.pc(), 0x1310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 015D
        gbc.setState(0xf15, 0x5b09, 0xc480, 0xf17e, 0x79db, 0x825, 0x0, 0x1);
        gbc.writeMem(0xf15, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5b09);
        EXPECT(gbc.pc(), 0xf17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 015E
        gbc.setState(0x4459, 0x9138, 0x3c60, 0xdc4c, 0xceef, 0x78a2, 0x1, 0x1);
        gbc.writeMem(0x4459, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9138);
        EXPECT(gbc.pc(), 0x445b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 015F
        gbc.setState(0xe694, 0x9331, 0x3190, 0xf32f, 0x5dc8, 0xb31d, 0x0, 0x0);
        gbc.writeMem(0xe694, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9331);
        EXPECT(gbc.pc(), 0xe696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe694), 0xcb);
        EXPECT(gbc.readMem(0xe695), 0x6d);
        // CB 6D 0160
        gbc.setState(0x90a6, 0x3206, 0xbd20, 0xaefc, 0x480, 0x21a9, 0x0, 0x1);
        gbc.writeMem(0x90a6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3206);
        EXPECT(gbc.pc(), 0x90a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90a6), 0xcb);
        EXPECT(gbc.readMem(0x90a7), 0x6d);
        // CB 6D 0161
        gbc.setState(0xa898, 0xe440, 0xd2e0, 0xde74, 0xcf7b, 0xc7c5, 0x0, 0x1);
        gbc.writeMem(0xa898, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe440);
        EXPECT(gbc.pc(), 0xa89a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa898), 0xcb);
        EXPECT(gbc.readMem(0xa899), 0x6d);
        // CB 6D 0162
        gbc.setState(0x1bfc, 0x1c53, 0x990, 0x4f2a, 0x1105, 0xd4b3, 0x0, 0x1);
        gbc.writeMem(0x1bfc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1c53);
        EXPECT(gbc.pc(), 0x1bfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0163
        gbc.setState(0xc019, 0x9bd3, 0xbd70, 0xbc54, 0x459e, 0x80f0, 0x0, 0x0);
        gbc.writeMem(0xc019, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9bd3);
        EXPECT(gbc.pc(), 0xc01b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc019), 0xcb);
        EXPECT(gbc.readMem(0xc01a), 0x6d);
        // CB 6D 0164
        gbc.setState(0x5b56, 0xc473, 0x1da0, 0x522b, 0x2266, 0xc21c, 0x0, 0x1);
        gbc.writeMem(0x5b56, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc473);
        EXPECT(gbc.pc(), 0x5b58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0165
        gbc.setState(0x5bfe, 0x4564, 0xf980, 0xda68, 0x3657, 0xf74e, 0x0, 0x0);
        gbc.writeMem(0x5bfe, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4564);
        EXPECT(gbc.pc(), 0x5c00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0167
        gbc.setState(0x4a11, 0x30da, 0x45d0, 0xa009, 0x104e, 0x53b, 0x1, 0x0);
        gbc.writeMem(0x4a11, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x30da);
        EXPECT(gbc.pc(), 0x4a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0168
        gbc.setState(0x949a, 0xe52d, 0x2670, 0x4d64, 0x3686, 0x8572, 0x0, 0x0);
        gbc.writeMem(0x949a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe52d);
        EXPECT(gbc.pc(), 0x949c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x949a), 0xcb);
        EXPECT(gbc.readMem(0x949b), 0x6d);
        // CB 6D 0169
        gbc.setState(0x14fc, 0x44cb, 0x13e0, 0x41c9, 0x3bdd, 0x1803, 0x0, 0x1);
        gbc.writeMem(0x14fc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x44cb);
        EXPECT(gbc.pc(), 0x14fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 016A
        gbc.setState(0x3f63, 0x42bc, 0x1a10, 0x475a, 0x5e7d, 0xc53e, 0x1, 0x1);
        gbc.writeMem(0x3f63, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x42bc);
        EXPECT(gbc.pc(), 0x3f65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 016B
        gbc.setState(0x597, 0x2271, 0x5c90, 0xd9f7, 0x9476, 0xbbec, 0x1, 0x0);
        gbc.writeMem(0x597, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2271);
        EXPECT(gbc.pc(), 0x599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 016C
        gbc.setState(0x561e, 0x6f8, 0x8e0, 0x6171, 0xa959, 0xb2b0, 0x1, 0x0);
        gbc.writeMem(0x561e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6f8);
        EXPECT(gbc.pc(), 0x5620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 016D
        gbc.setState(0x9746, 0xac68, 0xbd20, 0xef45, 0xadb6, 0x4104, 0x0, 0x1);
        gbc.writeMem(0x9746, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xac68);
        EXPECT(gbc.pc(), 0x9748);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9746), 0xcb);
        EXPECT(gbc.readMem(0x9747), 0x6d);
        // CB 6D 016E
        gbc.setState(0xdb05, 0x9f90, 0x6f0, 0x73d5, 0x972b, 0x95ea, 0x0, 0x0);
        gbc.writeMem(0xdb05, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9f90);
        EXPECT(gbc.pc(), 0xdb07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb05), 0xcb);
        EXPECT(gbc.readMem(0xdb06), 0x6d);
        // CB 6D 016F
        gbc.setState(0x816b, 0xfbb2, 0x7740, 0xbfe9, 0x408f, 0x4517, 0x0, 0x1);
        gbc.writeMem(0x816b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfbb2);
        EXPECT(gbc.pc(), 0x816d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x816b), 0xcb);
        EXPECT(gbc.readMem(0x816c), 0x6d);
        // CB 6D 0170
        gbc.setState(0xc454, 0x1612, 0x2660, 0xe538, 0xc4b2, 0x6eb8, 0x1, 0x0);
        gbc.writeMem(0xc454, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1612);
        EXPECT(gbc.pc(), 0xc456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc454), 0xcb);
        EXPECT(gbc.readMem(0xc455), 0x6d);
        // CB 6D 0171
        gbc.setState(0xefb9, 0x369, 0xcf60, 0xf600, 0xf2a6, 0x4625, 0x0, 0x0);
        gbc.writeMem(0xefb9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x369);
        EXPECT(gbc.pc(), 0xefbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefb9), 0xcb);
        EXPECT(gbc.readMem(0xefba), 0x6d);
        // CB 6D 0172
        gbc.setState(0xe63b, 0x7588, 0x3c00, 0x5e4a, 0x4d2e, 0xd512, 0x1, 0x1);
        gbc.writeMem(0xe63b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7588);
        EXPECT(gbc.pc(), 0xe63d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe63b), 0xcb);
        EXPECT(gbc.readMem(0xe63c), 0x6d);
        // CB 6D 0173
        gbc.setState(0x1501, 0xc596, 0x2130, 0x23cc, 0xb0d1, 0xc06a, 0x1, 0x0);
        gbc.writeMem(0x1501, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xc596);
        EXPECT(gbc.pc(), 0x1503);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0175
        gbc.setState(0xcb19, 0xcef1, 0x70, 0x4e53, 0x6d26, 0x318f, 0x0, 0x1);
        gbc.writeMem(0xcb19, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcef1);
        EXPECT(gbc.pc(), 0xcb1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb19), 0xcb);
        EXPECT(gbc.readMem(0xcb1a), 0x6d);
        // CB 6D 0176
        gbc.setState(0x9a9f, 0xf61d, 0xfb80, 0x7ce8, 0x19b, 0x16fd, 0x0, 0x0);
        gbc.writeMem(0x9a9f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf61d);
        EXPECT(gbc.pc(), 0x9aa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a9f), 0xcb);
        EXPECT(gbc.readMem(0x9aa0), 0x6d);
        // CB 6D 0177
        gbc.setState(0xc982, 0xe770, 0x6d70, 0x3b2a, 0x8b47, 0x4cb3, 0x0, 0x1);
        gbc.writeMem(0xc982, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe770);
        EXPECT(gbc.pc(), 0xc984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc982), 0xcb);
        EXPECT(gbc.readMem(0xc983), 0x6d);
        // CB 6D 0178
        gbc.setState(0xab6e, 0x8306, 0x1210, 0x6a1f, 0x1dea, 0x4618, 0x0, 0x1);
        gbc.writeMem(0xab6e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8306);
        EXPECT(gbc.pc(), 0xab70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab6e), 0xcb);
        EXPECT(gbc.readMem(0xab6f), 0x6d);
        // CB 6D 0179
        gbc.setState(0x7d6f, 0x47a5, 0x7f10, 0x81aa, 0xb5e0, 0xa075, 0x0, 0x0);
        gbc.writeMem(0x7d6f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x47a5);
        EXPECT(gbc.pc(), 0x7d71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 017A
        gbc.setState(0x35f, 0x493e, 0x450, 0x1cf, 0xbfd9, 0xcf72, 0x1, 0x1);
        gbc.writeMem(0x35f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x493e);
        EXPECT(gbc.pc(), 0x361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 017B
        gbc.setState(0x40ea, 0xc2d2, 0x5960, 0x3159, 0x2208, 0x5578, 0x1, 0x0);
        gbc.writeMem(0x40ea, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc2d2);
        EXPECT(gbc.pc(), 0x40ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 017C
        gbc.setState(0xd113, 0xc79c, 0xafc0, 0xaa81, 0xac42, 0x5a4f, 0x1, 0x1);
        gbc.writeMem(0xd113, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xc79c);
        EXPECT(gbc.pc(), 0xd115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd113), 0xcb);
        EXPECT(gbc.readMem(0xd114), 0x6d);
        // CB 6D 017D
        gbc.setState(0x50b9, 0xc2ce, 0x3680, 0x9167, 0xda6, 0x98c, 0x1, 0x1);
        gbc.writeMem(0x50b9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xc2ce);
        EXPECT(gbc.pc(), 0x50bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 017E
        gbc.setState(0x5f61, 0x3f20, 0xb4a0, 0x9d3, 0xf9f0, 0xe20c, 0x1, 0x0);
        gbc.writeMem(0x5f61, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3f20);
        EXPECT(gbc.pc(), 0x5f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 017F
        gbc.setState(0xa98e, 0x8715, 0x38a0, 0xc25d, 0x9580, 0x1232, 0x0, 0x1);
        gbc.writeMem(0xa98e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8715);
        EXPECT(gbc.pc(), 0xa990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa98e), 0xcb);
        EXPECT(gbc.readMem(0xa98f), 0x6d);
        // CB 6D 0180
        gbc.setState(0xc3ec, 0xd744, 0x8120, 0xe909, 0x43f1, 0xed01, 0x1, 0x0);
        gbc.writeMem(0xc3ec, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd744);
        EXPECT(gbc.pc(), 0xc3ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ec), 0xcb);
        EXPECT(gbc.readMem(0xc3ed), 0x6d);
        // CB 6D 0181
        gbc.setState(0x46b8, 0xdd10, 0xaea0, 0xb536, 0x2620, 0x4f40, 0x0, 0x1);
        gbc.writeMem(0x46b8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xdd10);
        EXPECT(gbc.pc(), 0x46ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0182
        gbc.setState(0xa9ea, 0xbae0, 0x5170, 0x6fa6, 0xddf0, 0x13e0, 0x1, 0x1);
        gbc.writeMem(0xa9ea, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xbae0);
        EXPECT(gbc.pc(), 0xa9ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9ea), 0xcb);
        EXPECT(gbc.readMem(0xa9eb), 0x6d);
        // CB 6D 0183
        gbc.setState(0x4d70, 0xcb01, 0xeb80, 0xaff7, 0x6a61, 0x9afd, 0x1, 0x0);
        gbc.writeMem(0x4d70, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xcb01);
        EXPECT(gbc.pc(), 0x4d72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0184
        gbc.setState(0x3c91, 0x446, 0x38f0, 0xa25e, 0xe66, 0x5977, 0x0, 0x0);
        gbc.writeMem(0x3c91, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x446);
        EXPECT(gbc.pc(), 0x3c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0185
        gbc.setState(0xea2a, 0xf6f6, 0xc0e0, 0x993f, 0xc6a6, 0x17f1, 0x1, 0x0);
        gbc.writeMem(0xea2a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xf6f6);
        EXPECT(gbc.pc(), 0xea2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea2a), 0xcb);
        EXPECT(gbc.readMem(0xea2b), 0x6d);
        // CB 6D 0186
        gbc.setState(0x8879, 0x4b53, 0x8ac0, 0x1b1d, 0xa017, 0x8524, 0x0, 0x0);
        gbc.writeMem(0x8879, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4b53);
        EXPECT(gbc.pc(), 0x887b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8879), 0xcb);
        EXPECT(gbc.readMem(0x887a), 0x6d);
        // CB 6D 0187
        gbc.setState(0x1790, 0xde, 0x6fd0, 0xa1db, 0x195e, 0x9031, 0x1, 0x0);
        gbc.writeMem(0x1790, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xde);
        EXPECT(gbc.pc(), 0x1792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0188
        gbc.setState(0x2d8a, 0x77a9, 0xcc90, 0x3e7c, 0x49a7, 0xc11, 0x1, 0x1);
        gbc.writeMem(0x2d8a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x77a9);
        EXPECT(gbc.pc(), 0x2d8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0189
        gbc.setState(0x4f38, 0x879c, 0x4390, 0xfbcb, 0xf12c, 0xe205, 0x0, 0x0);
        gbc.writeMem(0x4f38, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x879c);
        EXPECT(gbc.pc(), 0x4f3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 018A
        gbc.setState(0xd51c, 0x8ab1, 0xe2d0, 0x6677, 0xc730, 0x3a48, 0x0, 0x1);
        gbc.writeMem(0xd51c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8ab1);
        EXPECT(gbc.pc(), 0xd51e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd51c), 0xcb);
        EXPECT(gbc.readMem(0xd51d), 0x6d);
        // CB 6D 018B
        gbc.setState(0x2c4d, 0x2f86, 0xdfa0, 0x1adb, 0xc217, 0xd1ac, 0x1, 0x1);
        gbc.writeMem(0x2c4d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2f86);
        EXPECT(gbc.pc(), 0x2c4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 018C
        gbc.setState(0xba9d, 0xcf2f, 0xf350, 0x3620, 0x130f, 0xfde, 0x0, 0x0);
        gbc.writeMem(0xba9d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xcf2f);
        EXPECT(gbc.pc(), 0xba9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba9d), 0xcb);
        EXPECT(gbc.readMem(0xba9e), 0x6d);
        // CB 6D 018D
        gbc.setState(0x7c95, 0x92f9, 0xfe20, 0xfaf4, 0x8610, 0x22af, 0x0, 0x1);
        gbc.writeMem(0x7c95, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x92f9);
        EXPECT(gbc.pc(), 0x7c97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 018E
        gbc.setState(0x9622, 0xbe35, 0xab80, 0x177d, 0x2f81, 0x8d95, 0x1, 0x1);
        gbc.writeMem(0x9622, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbe35);
        EXPECT(gbc.pc(), 0x9624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9622), 0xcb);
        EXPECT(gbc.readMem(0x9623), 0x6d);
        // CB 6D 018F
        gbc.setState(0xe990, 0x7cb3, 0x80e0, 0xb9cc, 0xa9c2, 0x61d2, 0x0, 0x1);
        gbc.writeMem(0xe990, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7cb3);
        EXPECT(gbc.pc(), 0xe992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe990), 0xcb);
        EXPECT(gbc.readMem(0xe991), 0x6d);
        // CB 6D 0190
        gbc.setState(0x7f8e, 0x2358, 0x5000, 0xafa1, 0xcf5a, 0x540e, 0x1, 0x0);
        gbc.writeMem(0x7f8e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2358);
        EXPECT(gbc.pc(), 0x7f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0191
        gbc.setState(0x5dc9, 0xd6da, 0x2470, 0x1b29, 0xb79d, 0xb6c, 0x0, 0x0);
        gbc.writeMem(0x5dc9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd6da);
        EXPECT(gbc.pc(), 0x5dcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0192
        gbc.setState(0x6f6d, 0xa6b7, 0xfb60, 0x2232, 0x86ef, 0xfc78, 0x1, 0x1);
        gbc.writeMem(0x6f6d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa6b7);
        EXPECT(gbc.pc(), 0x6f6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0193
        gbc.setState(0x238a, 0x1bd4, 0x6290, 0xd57f, 0x68b2, 0x6a2d, 0x1, 0x0);
        gbc.writeMem(0x238a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1bd4);
        EXPECT(gbc.pc(), 0x238c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0194
        gbc.setState(0x169f, 0xfd12, 0xa260, 0xd64b, 0x2e22, 0x9e0b, 0x1, 0x1);
        gbc.writeMem(0x169f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfd12);
        EXPECT(gbc.pc(), 0x16a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0195
        gbc.setState(0x5313, 0xc83b, 0xf880, 0x2384, 0x22e5, 0x4ee0, 0x0, 0x1);
        gbc.writeMem(0x5313, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc83b);
        EXPECT(gbc.pc(), 0x5315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0196
        gbc.setState(0x369a, 0x63b6, 0x74e0, 0x4d38, 0x64ca, 0x8aa8, 0x0, 0x1);
        gbc.writeMem(0x369a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x63b6);
        EXPECT(gbc.pc(), 0x369c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0197
        gbc.setState(0xddd, 0x40ae, 0xf8f0, 0xf06a, 0xec6d, 0x4cd0, 0x0, 0x1);
        gbc.writeMem(0xddd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x40ae);
        EXPECT(gbc.pc(), 0xddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0198
        gbc.setState(0x643e, 0xb690, 0x3fe0, 0x3e80, 0x9d11, 0x5283, 0x1, 0x1);
        gbc.writeMem(0x643e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb690);
        EXPECT(gbc.pc(), 0x6440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0199
        gbc.setState(0x4e87, 0x3c17, 0xff50, 0xb240, 0x8da2, 0x63b7, 0x0, 0x0);
        gbc.writeMem(0x4e87, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3c17);
        EXPECT(gbc.pc(), 0x4e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 019A
        gbc.setState(0xee64, 0x6e96, 0x3420, 0xc2be, 0xc0e5, 0xbb25, 0x0, 0x1);
        gbc.writeMem(0xee64, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6e96);
        EXPECT(gbc.pc(), 0xee66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee64), 0xcb);
        EXPECT(gbc.readMem(0xee65), 0x6d);
        // CB 6D 019B
        gbc.setState(0x324b, 0x3a53, 0xe200, 0xdeb6, 0x1a3c, 0xe3a9, 0x1, 0x0);
        gbc.writeMem(0x324b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3a53);
        EXPECT(gbc.pc(), 0x324d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 019C
        gbc.setState(0x3343, 0x5cc4, 0xa360, 0x38b1, 0xc22, 0xbbb2, 0x1, 0x1);
        gbc.writeMem(0x3343, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5cc4);
        EXPECT(gbc.pc(), 0x3345);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 019D
        gbc.setState(0x2950, 0x755a, 0x2410, 0xa71b, 0x9879, 0xb25d, 0x1, 0x1);
        gbc.writeMem(0x2950, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x755a);
        EXPECT(gbc.pc(), 0x2952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 019E
        gbc.setState(0x450a, 0xc96b, 0xad40, 0x7e89, 0xc118, 0x19b3, 0x0, 0x1);
        gbc.writeMem(0x450a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc96b);
        EXPECT(gbc.pc(), 0x450c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01A0
        gbc.setState(0x1170, 0x6bf8, 0xa200, 0x7659, 0xfd19, 0x5669, 0x0, 0x0);
        gbc.writeMem(0x1170, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x6bf8);
        EXPECT(gbc.pc(), 0x1172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01A1
        gbc.setState(0xccba, 0xb863, 0x7cd0, 0x50ad, 0xd56e, 0x3b1e, 0x1, 0x1);
        gbc.writeMem(0xccba, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb863);
        EXPECT(gbc.pc(), 0xccbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccba), 0xcb);
        EXPECT(gbc.readMem(0xccbb), 0x6d);
        // CB 6D 01A2
        gbc.setState(0x593, 0x9325, 0x45f0, 0x5a02, 0xa59, 0xc7f5, 0x1, 0x0);
        gbc.writeMem(0x593, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9325);
        EXPECT(gbc.pc(), 0x595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01A3
        gbc.setState(0x8148, 0x31c5, 0x7cc0, 0x53f, 0xb265, 0x752f, 0x1, 0x0);
        gbc.writeMem(0x8148, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x31c5);
        EXPECT(gbc.pc(), 0x814a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8148), 0xcb);
        EXPECT(gbc.readMem(0x8149), 0x6d);
        // CB 6D 01A4
        gbc.setState(0x3e7d, 0xbdb7, 0x530, 0x925f, 0xd947, 0x9e27, 0x0, 0x1);
        gbc.writeMem(0x3e7d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbdb7);
        EXPECT(gbc.pc(), 0x3e7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01A5
        gbc.setState(0x2ef, 0x213, 0xb700, 0x24f7, 0x1a84, 0x167b, 0x1, 0x1);
        gbc.writeMem(0x2ef, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x213);
        EXPECT(gbc.pc(), 0x2f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01A6
        gbc.setState(0xca83, 0x7273, 0x80c0, 0xc834, 0xd5ac, 0xaab3, 0x0, 0x1);
        gbc.writeMem(0xca83, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7273);
        EXPECT(gbc.pc(), 0xca85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca83), 0xcb);
        EXPECT(gbc.readMem(0xca84), 0x6d);
        // CB 6D 01A7
        gbc.setState(0xd81f, 0x58dc, 0xa740, 0x49a2, 0xf271, 0x602a, 0x0, 0x0);
        gbc.writeMem(0xd81f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x58dc);
        EXPECT(gbc.pc(), 0xd821);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81f), 0xcb);
        EXPECT(gbc.readMem(0xd820), 0x6d);
        // CB 6D 01A8
        gbc.setState(0x7aeb, 0x5f9e, 0x13e0, 0x7dbd, 0x410f, 0x45ff, 0x0, 0x1);
        gbc.writeMem(0x7aeb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5f9e);
        EXPECT(gbc.pc(), 0x7aed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01A9
        gbc.setState(0x5b69, 0x7415, 0xd20, 0xe7f6, 0xbf, 0x2720, 0x0, 0x0);
        gbc.writeMem(0x5b69, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7415);
        EXPECT(gbc.pc(), 0x5b6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01AA
        gbc.setState(0x7181, 0xd9a, 0xc7c0, 0x87ec, 0x6cdb, 0x9f94, 0x0, 0x0);
        gbc.writeMem(0x7181, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd9a);
        EXPECT(gbc.pc(), 0x7183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01AB
        gbc.setState(0xc58e, 0xa57e, 0x680, 0xe17, 0x4304, 0x3a67, 0x1, 0x0);
        gbc.writeMem(0xc58e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xa57e);
        EXPECT(gbc.pc(), 0xc590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc58e), 0xcb);
        EXPECT(gbc.readMem(0xc58f), 0x6d);
        // CB 6D 01AC
        gbc.setState(0x42bb, 0xd132, 0xd470, 0x8855, 0xec20, 0xb147, 0x1, 0x1);
        gbc.writeMem(0x42bb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd132);
        EXPECT(gbc.pc(), 0x42bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01AD
        gbc.setState(0xde5e, 0x8091, 0xfd10, 0x453, 0xbd64, 0xf2ce, 0x0, 0x1);
        gbc.writeMem(0xde5e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8091);
        EXPECT(gbc.pc(), 0xde60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde5e), 0xcb);
        EXPECT(gbc.readMem(0xde5f), 0x6d);
        // CB 6D 01AE
        gbc.setState(0xa3c1, 0x2c95, 0xc6b0, 0xe720, 0x790b, 0xdda1, 0x1, 0x1);
        gbc.writeMem(0xa3c1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x2c95);
        EXPECT(gbc.pc(), 0xa3c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3c1), 0xcb);
        EXPECT(gbc.readMem(0xa3c2), 0x6d);
        // CB 6D 01AF
        gbc.setState(0xf46, 0x1d2f, 0x3a60, 0x9230, 0xbb31, 0xddf5, 0x0, 0x1);
        gbc.writeMem(0xf46, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1d2f);
        EXPECT(gbc.pc(), 0xf48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01B0
        gbc.setState(0xd188, 0xf928, 0xc320, 0x5d4b, 0x31, 0x809, 0x1, 0x0);
        gbc.writeMem(0xd188, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf928);
        EXPECT(gbc.pc(), 0xd18a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd188), 0xcb);
        EXPECT(gbc.readMem(0xd189), 0x6d);
        // CB 6D 01B1
        gbc.setState(0xcf9e, 0xe69c, 0x440, 0x89e7, 0xd60c, 0x5a68, 0x1, 0x0);
        gbc.writeMem(0xcf9e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe69c);
        EXPECT(gbc.pc(), 0xcfa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf9e), 0xcb);
        EXPECT(gbc.readMem(0xcf9f), 0x6d);
        // CB 6D 01B3
        gbc.setState(0x3a41, 0xb794, 0xb7c0, 0x4462, 0x10d8, 0x16f0, 0x1, 0x0);
        gbc.writeMem(0x3a41, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb794);
        EXPECT(gbc.pc(), 0x3a43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01B4
        gbc.setState(0x7e72, 0x2b9c, 0x4350, 0xd774, 0x95bf, 0xbf8c, 0x1, 0x1);
        gbc.writeMem(0x7e72, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2b9c);
        EXPECT(gbc.pc(), 0x7e74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01B5
        gbc.setState(0x2642, 0xe022, 0x5530, 0x4e66, 0xf94d, 0xf5a7, 0x1, 0x1);
        gbc.writeMem(0x2642, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe022);
        EXPECT(gbc.pc(), 0x2644);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01B6
        gbc.setState(0xecae, 0xda11, 0xa050, 0x6e1, 0x7667, 0x1606, 0x1, 0x1);
        gbc.writeMem(0xecae, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xda11);
        EXPECT(gbc.pc(), 0xecb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecae), 0xcb);
        EXPECT(gbc.readMem(0xecaf), 0x6d);
        // CB 6D 01B7
        gbc.setState(0xc321, 0x321, 0xff10, 0x30d8, 0x11dd, 0x20ca, 0x1, 0x1);
        gbc.writeMem(0xc321, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x321);
        EXPECT(gbc.pc(), 0xc323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc321), 0xcb);
        EXPECT(gbc.readMem(0xc322), 0x6d);
        // CB 6D 01B8
        gbc.setState(0x167a, 0x7f9a, 0x24a0, 0x63ed, 0xb436, 0x93a5, 0x0, 0x0);
        gbc.writeMem(0x167a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7f9a);
        EXPECT(gbc.pc(), 0x167c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01B9
        gbc.setState(0x3278, 0x568, 0x3b50, 0xc500, 0x665a, 0x3354, 0x1, 0x1);
        gbc.writeMem(0x3278, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x568);
        EXPECT(gbc.pc(), 0x327a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01BA
        gbc.setState(0x1681, 0x5abc, 0x1970, 0xc2e0, 0x7c00, 0xef24, 0x1, 0x0);
        gbc.writeMem(0x1681, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5abc);
        EXPECT(gbc.pc(), 0x1683);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01BB
        gbc.setState(0x73b3, 0x81da, 0xe1f0, 0x240b, 0x79b0, 0xa8fc, 0x0, 0x1);
        gbc.writeMem(0x73b3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x81da);
        EXPECT(gbc.pc(), 0x73b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01BC
        gbc.setState(0x6981, 0x5c26, 0x3fb0, 0x13c4, 0x9937, 0x333e, 0x0, 0x0);
        gbc.writeMem(0x6981, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5c26);
        EXPECT(gbc.pc(), 0x6983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01BD
        gbc.setState(0x793, 0x5658, 0xb6b0, 0xf413, 0x4a72, 0x2d0, 0x1, 0x1);
        gbc.writeMem(0x793, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5658);
        EXPECT(gbc.pc(), 0x795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01BE
        gbc.setState(0xd32a, 0x8ee9, 0x3950, 0x2799, 0x74bc, 0xa627, 0x1, 0x0);
        gbc.writeMem(0xd32a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8ee9);
        EXPECT(gbc.pc(), 0xd32c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd32a), 0xcb);
        EXPECT(gbc.readMem(0xd32b), 0x6d);
        // CB 6D 01BF
        gbc.setState(0x173e, 0x822a, 0x77f0, 0x6dc3, 0x8252, 0xd25a, 0x0, 0x1);
        gbc.writeMem(0x173e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x822a);
        EXPECT(gbc.pc(), 0x1740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01C0
        gbc.setState(0x18ee, 0x1839, 0xc1c0, 0xf01d, 0x319c, 0x8b77, 0x1, 0x0);
        gbc.writeMem(0x18ee, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1839);
        EXPECT(gbc.pc(), 0x18f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01C1
        gbc.setState(0xb818, 0xd5c, 0x8c70, 0x3df0, 0x6a63, 0x1a8f, 0x1, 0x1);
        gbc.writeMem(0xb818, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd5c);
        EXPECT(gbc.pc(), 0xb81a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb818), 0xcb);
        EXPECT(gbc.readMem(0xb819), 0x6d);
        // CB 6D 01C2
        gbc.setState(0xb4f1, 0x64ea, 0x48a0, 0xbd93, 0xcce3, 0xe0d8, 0x1, 0x0);
        gbc.writeMem(0xb4f1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x64ea);
        EXPECT(gbc.pc(), 0xb4f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4f1), 0xcb);
        EXPECT(gbc.readMem(0xb4f2), 0x6d);
        // CB 6D 01C3
        gbc.setState(0xc008, 0x6a6b, 0xc980, 0xea7a, 0x52c3, 0x9a13, 0x0, 0x1);
        gbc.writeMem(0xc008, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6a6b);
        EXPECT(gbc.pc(), 0xc00a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc008), 0xcb);
        EXPECT(gbc.readMem(0xc009), 0x6d);
        // CB 6D 01C4
        gbc.setState(0x433f, 0xc8f1, 0x170, 0x49b4, 0x8667, 0x12b6, 0x0, 0x1);
        gbc.writeMem(0x433f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc8f1);
        EXPECT(gbc.pc(), 0x4341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01C5
        gbc.setState(0x2d3c, 0xbb97, 0x3e40, 0x774b, 0x72f6, 0x2a08, 0x0, 0x1);
        gbc.writeMem(0x2d3c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xbb97);
        EXPECT(gbc.pc(), 0x2d3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01C6
        gbc.setState(0x4bdb, 0xeb3c, 0x2430, 0xe370, 0xfe02, 0xe7fd, 0x1, 0x1);
        gbc.writeMem(0x4bdb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xeb3c);
        EXPECT(gbc.pc(), 0x4bdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01C7
        gbc.setState(0x7851, 0xea22, 0x9680, 0x5352, 0xe75c, 0x2ac6, 0x1, 0x0);
        gbc.writeMem(0x7851, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xea22);
        EXPECT(gbc.pc(), 0x7853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01C8
        gbc.setState(0xc9b8, 0x4126, 0xb370, 0x371c, 0x1c28, 0x83d4, 0x1, 0x0);
        gbc.writeMem(0xc9b8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4126);
        EXPECT(gbc.pc(), 0xc9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9b8), 0xcb);
        EXPECT(gbc.readMem(0xc9b9), 0x6d);
        // CB 6D 01CA
        gbc.setState(0xd6df, 0x107, 0xc3a0, 0xffc1, 0x2d69, 0xa6f0, 0x0, 0x1);
        gbc.writeMem(0xd6df, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x107);
        EXPECT(gbc.pc(), 0xd6e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6df), 0xcb);
        EXPECT(gbc.readMem(0xd6e0), 0x6d);
        // CB 6D 01CB
        gbc.setState(0x49d1, 0xd8e2, 0x85a0, 0x35e7, 0x25d5, 0x351, 0x1, 0x1);
        gbc.writeMem(0x49d1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd8e2);
        EXPECT(gbc.pc(), 0x49d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01CC
        gbc.setState(0x22df, 0x6e21, 0x8610, 0xbd0e, 0x25d4, 0xb6a2, 0x0, 0x1);
        gbc.writeMem(0x22df, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6e21);
        EXPECT(gbc.pc(), 0x22e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01CD
        gbc.setState(0x5bd0, 0x782c, 0xf2e0, 0xfa12, 0x72a3, 0xadbc, 0x1, 0x1);
        gbc.writeMem(0x5bd0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x782c);
        EXPECT(gbc.pc(), 0x5bd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01CE
        gbc.setState(0x9099, 0x2591, 0xcff0, 0xcd2d, 0x2570, 0x2b01, 0x1, 0x0);
        gbc.writeMem(0x9099, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2591);
        EXPECT(gbc.pc(), 0x909b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9099), 0xcb);
        EXPECT(gbc.readMem(0x909a), 0x6d);
        // CB 6D 01CF
        gbc.setState(0x2f27, 0x75f, 0x91e0, 0x9fe8, 0x9432, 0xfa9c, 0x0, 0x1);
        gbc.writeMem(0x2f27, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x75f);
        EXPECT(gbc.pc(), 0x2f29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01D0
        gbc.setState(0x35c, 0xa1, 0xe6d0, 0x4b63, 0xf870, 0xdbda, 0x0, 0x1);
        gbc.writeMem(0x35c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa1);
        EXPECT(gbc.pc(), 0x35e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01D1
        gbc.setState(0x738c, 0xb849, 0xee70, 0xcfd1, 0xbe10, 0x87e9, 0x0, 0x1);
        gbc.writeMem(0x738c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb849);
        EXPECT(gbc.pc(), 0x738e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01D2
        gbc.setState(0x54b, 0x90b0, 0x88e0, 0xb4f9, 0x35b8, 0xd837, 0x1, 0x1);
        gbc.writeMem(0x54b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x90b0);
        EXPECT(gbc.pc(), 0x54d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01D3
        gbc.setState(0xb0ac, 0x93e1, 0xda0, 0x7d62, 0xd585, 0xf9f4, 0x1, 0x0);
        gbc.writeMem(0xb0ac, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x93e1);
        EXPECT(gbc.pc(), 0xb0ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ac), 0xcb);
        EXPECT(gbc.readMem(0xb0ad), 0x6d);
        // CB 6D 01D4
        gbc.setState(0x5efe, 0x7675, 0x26d0, 0xf4c, 0x27c3, 0x8f6a, 0x0, 0x1);
        gbc.writeMem(0x5efe, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7675);
        EXPECT(gbc.pc(), 0x5f00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01D5
        gbc.setState(0x852a, 0xa79f, 0x8580, 0x9778, 0x99b6, 0x9c74, 0x1, 0x0);
        gbc.writeMem(0x852a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa79f);
        EXPECT(gbc.pc(), 0x852c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x852a), 0xcb);
        EXPECT(gbc.readMem(0x852b), 0x6d);
        // CB 6D 01D6
        gbc.setState(0xd56f, 0x383b, 0x99f0, 0x3851, 0x2ec2, 0xb457, 0x1, 0x1);
        gbc.writeMem(0xd56f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x383b);
        EXPECT(gbc.pc(), 0xd571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd56f), 0xcb);
        EXPECT(gbc.readMem(0xd570), 0x6d);
        // CB 6D 01D7
        gbc.setState(0x5a8b, 0x10fd, 0x2c00, 0xd3cd, 0xf26, 0x8b7, 0x0, 0x0);
        gbc.writeMem(0x5a8b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x10fd);
        EXPECT(gbc.pc(), 0x5a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01D8
        gbc.setState(0x165, 0x9c6b, 0x51a0, 0x8989, 0x61d0, 0x7a07, 0x1, 0x1);
        gbc.writeMem(0x165, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9c6b);
        EXPECT(gbc.pc(), 0x167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01DA
        gbc.setState(0x3b03, 0x7e28, 0xae00, 0x3a81, 0x6f0e, 0x8795, 0x1, 0x1);
        gbc.writeMem(0x3b03, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7e28);
        EXPECT(gbc.pc(), 0x3b05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01DB
        gbc.setState(0xef75, 0x73b1, 0x9950, 0x3e36, 0x73d4, 0x1ca6, 0x0, 0x1);
        gbc.writeMem(0xef75, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x73b1);
        EXPECT(gbc.pc(), 0xef77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef75), 0xcb);
        EXPECT(gbc.readMem(0xef76), 0x6d);
        // CB 6D 01DC
        gbc.setState(0x8803, 0x913c, 0xb830, 0xd575, 0x3b0a, 0xe62c, 0x0, 0x0);
        gbc.writeMem(0x8803, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x913c);
        EXPECT(gbc.pc(), 0x8805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8803), 0xcb);
        EXPECT(gbc.readMem(0x8804), 0x6d);
        // CB 6D 01DD
        gbc.setState(0x7464, 0xd1b1, 0xbae0, 0x5be5, 0x35f7, 0xce72, 0x1, 0x0);
        gbc.writeMem(0x7464, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd1b1);
        EXPECT(gbc.pc(), 0x7466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01DF
        gbc.setState(0x8c61, 0xf6a2, 0x3d00, 0x5087, 0x5d86, 0x4e1d, 0x1, 0x1);
        gbc.writeMem(0x8c61, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf6a2);
        EXPECT(gbc.pc(), 0x8c63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c61), 0xcb);
        EXPECT(gbc.readMem(0x8c62), 0x6d);
        // CB 6D 01E0
        gbc.setState(0xf62, 0x6721, 0x1bd0, 0x9e6c, 0xc5d4, 0xf191, 0x1, 0x1);
        gbc.writeMem(0xf62, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6721);
        EXPECT(gbc.pc(), 0xf64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01E1
        gbc.setState(0x466e, 0x5c04, 0x21c0, 0x80b5, 0x7290, 0xa93, 0x0, 0x1);
        gbc.writeMem(0x466e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5c04);
        EXPECT(gbc.pc(), 0x4670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01E2
        gbc.setState(0xeccd, 0x8862, 0xefb0, 0x683e, 0xb19b, 0xbd5, 0x1, 0x0);
        gbc.writeMem(0xeccd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8862);
        EXPECT(gbc.pc(), 0xeccf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeccd), 0xcb);
        EXPECT(gbc.readMem(0xecce), 0x6d);
        // CB 6D 01E3
        gbc.setState(0x4b56, 0xdba3, 0xf170, 0xc220, 0x713e, 0x6e51, 0x0, 0x1);
        gbc.writeMem(0x4b56, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdba3);
        EXPECT(gbc.pc(), 0x4b58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01E4
        gbc.setState(0xc36b, 0x7fd9, 0x1ba0, 0xba33, 0x79ec, 0x5c80, 0x1, 0x0);
        gbc.writeMem(0xc36b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7fd9);
        EXPECT(gbc.pc(), 0xc36d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc36b), 0xcb);
        EXPECT(gbc.readMem(0xc36c), 0x6d);
        // CB 6D 01E5
        gbc.setState(0xa50c, 0x28d4, 0x410, 0xeb27, 0x6eef, 0xf69b, 0x1, 0x0);
        gbc.writeMem(0xa50c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x28d4);
        EXPECT(gbc.pc(), 0xa50e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50c), 0xcb);
        EXPECT(gbc.readMem(0xa50d), 0x6d);
        // CB 6D 01E6
        gbc.setState(0xa7ab, 0x59a4, 0x49d0, 0x61e4, 0xa345, 0xe8e6, 0x1, 0x1);
        gbc.writeMem(0xa7ab, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x59a4);
        EXPECT(gbc.pc(), 0xa7ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ab), 0xcb);
        EXPECT(gbc.readMem(0xa7ac), 0x6d);
        // CB 6D 01E7
        gbc.setState(0x7c7e, 0x759, 0x5f80, 0xb246, 0x10ed, 0xf4d7, 0x0, 0x0);
        gbc.writeMem(0x7c7e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x759);
        EXPECT(gbc.pc(), 0x7c80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01E8
        gbc.setState(0x5a91, 0xcd62, 0xdfb0, 0xe07b, 0x8055, 0x773d, 0x0, 0x1);
        gbc.writeMem(0x5a91, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xcd62);
        EXPECT(gbc.pc(), 0x5a93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01E9
        gbc.setState(0x3010, 0xb864, 0xe500, 0x6f12, 0x1747, 0x270d, 0x0, 0x0);
        gbc.writeMem(0x3010, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb864);
        EXPECT(gbc.pc(), 0x3012);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01EA
        gbc.setState(0xb889, 0xc1d7, 0x740, 0xc143, 0x98a5, 0x32e9, 0x0, 0x1);
        gbc.writeMem(0xb889, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc1d7);
        EXPECT(gbc.pc(), 0xb88b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb889), 0xcb);
        EXPECT(gbc.readMem(0xb88a), 0x6d);
        // CB 6D 01EB
        gbc.setState(0xa178, 0x1d7b, 0x8db0, 0x28e5, 0xd04b, 0xafb6, 0x0, 0x1);
        gbc.writeMem(0xa178, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1d7b);
        EXPECT(gbc.pc(), 0xa17a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa178), 0xcb);
        EXPECT(gbc.readMem(0xa179), 0x6d);
        // CB 6D 01EC
        gbc.setState(0x9f34, 0xae15, 0x1c40, 0xda5, 0xff86, 0x9720, 0x0, 0x0);
        gbc.writeMem(0x9f34, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xae15);
        EXPECT(gbc.pc(), 0x9f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f34), 0xcb);
        EXPECT(gbc.readMem(0x9f35), 0x6d);
        // CB 6D 01ED
        gbc.setState(0x55f2, 0x4c61, 0xef80, 0x4a8f, 0x78e, 0xc52c, 0x0, 0x1);
        gbc.writeMem(0x55f2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4c61);
        EXPECT(gbc.pc(), 0x55f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01EE
        gbc.setState(0x1293, 0xbec4, 0x3760, 0x6488, 0x100b, 0x4b06, 0x0, 0x1);
        gbc.writeMem(0x1293, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xbec4);
        EXPECT(gbc.pc(), 0x1295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01EF
        gbc.setState(0x2df4, 0xa85, 0xf0e0, 0x298c, 0xaec, 0x967a, 0x0, 0x0);
        gbc.writeMem(0x2df4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa85);
        EXPECT(gbc.pc(), 0x2df6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01F0
        gbc.setState(0x8070, 0x7340, 0x68d0, 0x13b2, 0x8957, 0x946a, 0x1, 0x0);
        gbc.writeMem(0x8070, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7340);
        EXPECT(gbc.pc(), 0x8072);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8070), 0xcb);
        EXPECT(gbc.readMem(0x8071), 0x6d);
        // CB 6D 01F1
        gbc.setState(0x69dd, 0x4357, 0xb1b0, 0xe1eb, 0x7257, 0x7c6d, 0x0, 0x0);
        gbc.writeMem(0x69dd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4357);
        EXPECT(gbc.pc(), 0x69df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01F2
        gbc.setState(0x72d0, 0xbaa5, 0x52f0, 0xec9, 0xa2fb, 0xd28d, 0x0, 0x1);
        gbc.writeMem(0x72d0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbaa5);
        EXPECT(gbc.pc(), 0x72d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01F3
        gbc.setState(0x8ba7, 0x130d, 0xb270, 0x840d, 0x9c46, 0xb43, 0x1, 0x1);
        gbc.writeMem(0x8ba7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x130d);
        EXPECT(gbc.pc(), 0x8ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba7), 0xcb);
        EXPECT(gbc.readMem(0x8ba8), 0x6d);
        // CB 6D 01F4
        gbc.setState(0x532c, 0xa5f6, 0x5a50, 0xddab, 0xcf6f, 0x710a, 0x0, 0x0);
        gbc.writeMem(0x532c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa5f6);
        EXPECT(gbc.pc(), 0x532e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01F5
        gbc.setState(0x5e7, 0x7372, 0x5590, 0xb6cc, 0x3fdf, 0xe77e, 0x0, 0x1);
        gbc.writeMem(0x5e7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7372);
        EXPECT(gbc.pc(), 0x5e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01F6
        gbc.setState(0x89e9, 0x58a5, 0x2600, 0xb74c, 0x8f79, 0x5297, 0x1, 0x1);
        gbc.writeMem(0x89e9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x58a5);
        EXPECT(gbc.pc(), 0x89eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e9), 0xcb);
        EXPECT(gbc.readMem(0x89ea), 0x6d);
        // CB 6D 01F7
        gbc.setState(0x26fc, 0xa9c0, 0xccc0, 0xda4, 0x55fd, 0x7d0d, 0x0, 0x0);
        gbc.writeMem(0x26fc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa9c0);
        EXPECT(gbc.pc(), 0x26fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01F8
        gbc.setState(0x5416, 0x6396, 0xc700, 0xb153, 0x9260, 0x182d, 0x0, 0x0);
        gbc.writeMem(0x5416, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x6396);
        EXPECT(gbc.pc(), 0x5418);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01F9
        gbc.setState(0xae6e, 0xe94c, 0xf220, 0x6a78, 0x8236, 0x4072, 0x0, 0x0);
        gbc.writeMem(0xae6e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe94c);
        EXPECT(gbc.pc(), 0xae70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae6e), 0xcb);
        EXPECT(gbc.readMem(0xae6f), 0x6d);
        // CB 6D 01FA
        gbc.setState(0x7f49, 0xf7, 0xb1b0, 0xf618, 0x92ed, 0x60b8, 0x0, 0x1);
        gbc.writeMem(0x7f49, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf7);
        EXPECT(gbc.pc(), 0x7f4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01FC
        gbc.setState(0x555b, 0x4735, 0x63d0, 0x7817, 0x38e6, 0x73d, 0x0, 0x1);
        gbc.writeMem(0x555b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4735);
        EXPECT(gbc.pc(), 0x555d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 01FD
        gbc.setState(0x4b58, 0xa47f, 0x400, 0x1888, 0xc077, 0x1e6, 0x1, 0x0);
        gbc.writeMem(0x4b58, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa47f);
        EXPECT(gbc.pc(), 0x4b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 01FE
        gbc.setState(0xbea8, 0x3729, 0x80d0, 0xa828, 0xcc0f, 0xd9a8, 0x1, 0x0);
        gbc.writeMem(0xbea8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3729);
        EXPECT(gbc.pc(), 0xbeaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbea8), 0xcb);
        EXPECT(gbc.readMem(0xbea9), 0x6d);
        // CB 6D 01FF
        gbc.setState(0x2006, 0xa8f7, 0x6aa0, 0x5afc, 0xf88f, 0x390a, 0x1, 0x0);
        gbc.writeMem(0x2006, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa8f7);
        EXPECT(gbc.pc(), 0x2008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0200
        gbc.setState(0x888d, 0xf853, 0xeca0, 0x1c0d, 0x4a4d, 0x5965, 0x1, 0x0);
        gbc.writeMem(0x888d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf853);
        EXPECT(gbc.pc(), 0x888f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x888d), 0xcb);
        EXPECT(gbc.readMem(0x888e), 0x6d);
        // CB 6D 0201
        gbc.setState(0x1f26, 0xf80, 0x4110, 0x8f60, 0x1367, 0x581d, 0x1, 0x0);
        gbc.writeMem(0x1f26, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf80);
        EXPECT(gbc.pc(), 0x1f28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0202
        gbc.setState(0x1835, 0xd35d, 0xcf20, 0xdbea, 0x96a4, 0x7bbd, 0x1, 0x1);
        gbc.writeMem(0x1835, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd35d);
        EXPECT(gbc.pc(), 0x1837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0203
        gbc.setState(0x3a7, 0x1238, 0x90c0, 0xc1e4, 0x7ff5, 0xe0ba, 0x1, 0x1);
        gbc.writeMem(0x3a7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1238);
        EXPECT(gbc.pc(), 0x3a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0204
        gbc.setState(0x2b3e, 0xb521, 0xb50, 0x4786, 0x1d00, 0x311b, 0x0, 0x0);
        gbc.writeMem(0x2b3e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb521);
        EXPECT(gbc.pc(), 0x2b40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0205
        gbc.setState(0x8530, 0x437e, 0x9060, 0x80de, 0x674b, 0xe8e8, 0x0, 0x0);
        gbc.writeMem(0x8530, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x437e);
        EXPECT(gbc.pc(), 0x8532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8530), 0xcb);
        EXPECT(gbc.readMem(0x8531), 0x6d);
        // CB 6D 0206
        gbc.setState(0x5f48, 0x9927, 0x1d50, 0x44ba, 0xadd4, 0x675a, 0x1, 0x1);
        gbc.writeMem(0x5f48, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9927);
        EXPECT(gbc.pc(), 0x5f4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0207
        gbc.setState(0x8490, 0x174d, 0xdfe0, 0x94f0, 0x5009, 0x7e6e, 0x0, 0x0);
        gbc.writeMem(0x8490, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x174d);
        EXPECT(gbc.pc(), 0x8492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8490), 0xcb);
        EXPECT(gbc.readMem(0x8491), 0x6d);
        // CB 6D 0208
        gbc.setState(0xb6a0, 0xab0e, 0xe8c0, 0x9a04, 0xe611, 0x5b81, 0x1, 0x0);
        gbc.writeMem(0xb6a0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xab0e);
        EXPECT(gbc.pc(), 0xb6a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a0), 0xcb);
        EXPECT(gbc.readMem(0xb6a1), 0x6d);
        // CB 6D 0209
        gbc.setState(0xcdcc, 0x47a5, 0xf560, 0xf5f4, 0x5c46, 0x84a0, 0x1, 0x0);
        gbc.writeMem(0xcdcc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x47a5);
        EXPECT(gbc.pc(), 0xcdce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdcc), 0xcb);
        EXPECT(gbc.readMem(0xcdcd), 0x6d);
        // CB 6D 020A
        gbc.setState(0xc2a4, 0x9c2d, 0xd6f0, 0x36d4, 0xa85b, 0x8dbd, 0x1, 0x0);
        gbc.writeMem(0xc2a4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9c2d);
        EXPECT(gbc.pc(), 0xc2a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a4), 0xcb);
        EXPECT(gbc.readMem(0xc2a5), 0x6d);
        // CB 6D 020B
        gbc.setState(0x7574, 0x87f, 0xcc40, 0x1bf7, 0x528b, 0xf97, 0x0, 0x1);
        gbc.writeMem(0x7574, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x87f);
        EXPECT(gbc.pc(), 0x7576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 020D
        gbc.setState(0x1329, 0xb52b, 0x8350, 0xc6b4, 0x18c8, 0x4977, 0x0, 0x0);
        gbc.writeMem(0x1329, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb52b);
        EXPECT(gbc.pc(), 0x132b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 020E
        gbc.setState(0x25a8, 0x67dd, 0x6270, 0x9f02, 0x8999, 0x5689, 0x1, 0x0);
        gbc.writeMem(0x25a8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x67dd);
        EXPECT(gbc.pc(), 0x25aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 020F
        gbc.setState(0xedf9, 0xee3d, 0x97f0, 0xee43, 0xadac, 0x2980, 0x1, 0x0);
        gbc.writeMem(0xedf9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xee3d);
        EXPECT(gbc.pc(), 0xedfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedf9), 0xcb);
        EXPECT(gbc.readMem(0xedfa), 0x6d);
        // CB 6D 0210
        gbc.setState(0x2bbd, 0x612f, 0xa2b0, 0xc06c, 0xdd66, 0xb9be, 0x0, 0x0);
        gbc.writeMem(0x2bbd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x612f);
        EXPECT(gbc.pc(), 0x2bbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0211
        gbc.setState(0x85a6, 0x3dca, 0x9dc0, 0x79ee, 0x1e3, 0xbbcb, 0x1, 0x1);
        gbc.writeMem(0x85a6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x3dca);
        EXPECT(gbc.pc(), 0x85a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a6), 0xcb);
        EXPECT(gbc.readMem(0x85a7), 0x6d);
        // CB 6D 0212
        gbc.setState(0xd8ae, 0x5998, 0xa7f0, 0xfea3, 0x5f8d, 0xe2d5, 0x1, 0x1);
        gbc.writeMem(0xd8ae, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5998);
        EXPECT(gbc.pc(), 0xd8b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ae), 0xcb);
        EXPECT(gbc.readMem(0xd8af), 0x6d);
        // CB 6D 0213
        gbc.setState(0xe584, 0x9a58, 0x26a0, 0xafdd, 0x6d4f, 0x8380, 0x1, 0x0);
        gbc.writeMem(0xe584, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9a58);
        EXPECT(gbc.pc(), 0xe586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe584), 0xcb);
        EXPECT(gbc.readMem(0xe585), 0x6d);
        // CB 6D 0216
        gbc.setState(0x725d, 0x62ab, 0x7e40, 0x5293, 0xc9c8, 0x8e8a, 0x1, 0x0);
        gbc.writeMem(0x725d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x62ab);
        EXPECT(gbc.pc(), 0x725f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0217
        gbc.setState(0xc32c, 0xb725, 0x9510, 0x1976, 0x5aca, 0xd8b3, 0x1, 0x1);
        gbc.writeMem(0xc32c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb725);
        EXPECT(gbc.pc(), 0xc32e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc32c), 0xcb);
        EXPECT(gbc.readMem(0xc32d), 0x6d);
        // CB 6D 0218
        gbc.setState(0x4ac8, 0x6b05, 0xdc70, 0xf29a, 0x5c50, 0xa782, 0x0, 0x0);
        gbc.writeMem(0x4ac8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6b05);
        EXPECT(gbc.pc(), 0x4aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0219
        gbc.setState(0xc5c2, 0xe2fe, 0xba0, 0xd890, 0xe310, 0x244, 0x0, 0x0);
        gbc.writeMem(0xc5c2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe2fe);
        EXPECT(gbc.pc(), 0xc5c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c2), 0xcb);
        EXPECT(gbc.readMem(0xc5c3), 0x6d);
        // CB 6D 021A
        gbc.setState(0xb652, 0x715c, 0xc1c0, 0x442, 0x77df, 0xf67a, 0x0, 0x1);
        gbc.writeMem(0xb652, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x715c);
        EXPECT(gbc.pc(), 0xb654);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb652), 0xcb);
        EXPECT(gbc.readMem(0xb653), 0x6d);
        // CB 6D 021B
        gbc.setState(0xbc45, 0x449, 0xe430, 0x98ad, 0x6b0d, 0x30fc, 0x1, 0x1);
        gbc.writeMem(0xbc45, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x449);
        EXPECT(gbc.pc(), 0xbc47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc45), 0xcb);
        EXPECT(gbc.readMem(0xbc46), 0x6d);
        // CB 6D 021C
        gbc.setState(0x6c6f, 0xa99, 0xfbe0, 0x2ff2, 0x292d, 0xc054, 0x0, 0x0);
        gbc.writeMem(0x6c6f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa99);
        EXPECT(gbc.pc(), 0x6c71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 021D
        gbc.setState(0xe539, 0xd0ed, 0x3380, 0x3bb9, 0xdd1d, 0x76cf, 0x0, 0x0);
        gbc.writeMem(0xe539, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd0ed);
        EXPECT(gbc.pc(), 0xe53b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe539), 0xcb);
        EXPECT(gbc.readMem(0xe53a), 0x6d);
        // CB 6D 021E
        gbc.setState(0x84cb, 0xdd7d, 0x9400, 0xd522, 0x102f, 0x81c2, 0x0, 0x0);
        gbc.writeMem(0x84cb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdd7d);
        EXPECT(gbc.pc(), 0x84cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84cb), 0xcb);
        EXPECT(gbc.readMem(0x84cc), 0x6d);
        // CB 6D 021F
        gbc.setState(0x4a3d, 0x93bc, 0x9230, 0xca22, 0x3f1, 0x2ad9, 0x0, 0x0);
        gbc.writeMem(0x4a3d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x93bc);
        EXPECT(gbc.pc(), 0x4a3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0220
        gbc.setState(0x2042, 0x960c, 0x4ee0, 0xc085, 0x339e, 0x36ac, 0x1, 0x0);
        gbc.writeMem(0x2042, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x960c);
        EXPECT(gbc.pc(), 0x2044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0221
        gbc.setState(0xbdae, 0x81c1, 0x5590, 0x80f, 0xf7d0, 0x5b1e, 0x1, 0x0);
        gbc.writeMem(0xbdae, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x81c1);
        EXPECT(gbc.pc(), 0xbdb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdae), 0xcb);
        EXPECT(gbc.readMem(0xbdaf), 0x6d);
        // CB 6D 0222
        gbc.setState(0xba28, 0x57d9, 0x6560, 0xf82a, 0x2dd, 0xed41, 0x1, 0x0);
        gbc.writeMem(0xba28, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x57d9);
        EXPECT(gbc.pc(), 0xba2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba28), 0xcb);
        EXPECT(gbc.readMem(0xba29), 0x6d);
        // CB 6D 0223
        gbc.setState(0xe415, 0x5efa, 0xe430, 0x1a63, 0x7b80, 0x2220, 0x0, 0x1);
        gbc.writeMem(0xe415, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5efa);
        EXPECT(gbc.pc(), 0xe417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe415), 0xcb);
        EXPECT(gbc.readMem(0xe416), 0x6d);
        // CB 6D 0224
        gbc.setState(0x50b9, 0xc58, 0xdda0, 0x7835, 0xd7c7, 0x49e3, 0x1, 0x0);
        gbc.writeMem(0x50b9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc58);
        EXPECT(gbc.pc(), 0x50bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0226
        gbc.setState(0x4c04, 0xccc5, 0x6430, 0x915e, 0x26c7, 0x52e, 0x0, 0x0);
        gbc.writeMem(0x4c04, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xccc5);
        EXPECT(gbc.pc(), 0x4c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0227
        gbc.setState(0xe872, 0x1b90, 0xd200, 0xfe29, 0x841f, 0xaedc, 0x1, 0x0);
        gbc.writeMem(0xe872, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1b90);
        EXPECT(gbc.pc(), 0xe874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe872), 0xcb);
        EXPECT(gbc.readMem(0xe873), 0x6d);
        // CB 6D 0228
        gbc.setState(0x5890, 0x1793, 0x5f0, 0xbd9c, 0x5a76, 0x4f4d, 0x0, 0x0);
        gbc.writeMem(0x5890, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1793);
        EXPECT(gbc.pc(), 0x5892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0229
        gbc.setState(0xd7e7, 0x4565, 0xb4f0, 0x74cb, 0x337b, 0xc46e, 0x1, 0x1);
        gbc.writeMem(0xd7e7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4565);
        EXPECT(gbc.pc(), 0xd7e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7e7), 0xcb);
        EXPECT(gbc.readMem(0xd7e8), 0x6d);
        // CB 6D 022A
        gbc.setState(0x400a, 0xf9a7, 0x5880, 0x6e7a, 0x9f3a, 0xe631, 0x1, 0x1);
        gbc.writeMem(0x400a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf9a7);
        EXPECT(gbc.pc(), 0x400c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 022B
        gbc.setState(0xdb02, 0x254b, 0x7d60, 0x5cff, 0xebe5, 0x9834, 0x1, 0x1);
        gbc.writeMem(0xdb02, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x254b);
        EXPECT(gbc.pc(), 0xdb04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb02), 0xcb);
        EXPECT(gbc.readMem(0xdb03), 0x6d);
        // CB 6D 022C
        gbc.setState(0x547d, 0x26b3, 0x8e90, 0x3056, 0x4d72, 0x7857, 0x1, 0x0);
        gbc.writeMem(0x547d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x26b3);
        EXPECT(gbc.pc(), 0x547f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 022D
        gbc.setState(0x53f2, 0xd95e, 0x9810, 0xe227, 0x9f70, 0x5c41, 0x0, 0x0);
        gbc.writeMem(0x53f2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd95e);
        EXPECT(gbc.pc(), 0x53f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 022E
        gbc.setState(0xb304, 0x5d4a, 0x6350, 0x159a, 0xcd58, 0xf8e9, 0x1, 0x1);
        gbc.writeMem(0xb304, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5d4a);
        EXPECT(gbc.pc(), 0xb306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb304), 0xcb);
        EXPECT(gbc.readMem(0xb305), 0x6d);
        // CB 6D 022F
        gbc.setState(0x442d, 0x8f1c, 0x7490, 0x678, 0xea14, 0xdf13, 0x1, 0x1);
        gbc.writeMem(0x442d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8f1c);
        EXPECT(gbc.pc(), 0x442f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0230
        gbc.setState(0x5c89, 0xb029, 0x4d0, 0xa2b5, 0x243c, 0x5587, 0x1, 0x1);
        gbc.writeMem(0x5c89, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb029);
        EXPECT(gbc.pc(), 0x5c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0231
        gbc.setState(0xb4dc, 0x850b, 0x9ea0, 0xc7b4, 0x4423, 0xecc2, 0x0, 0x1);
        gbc.writeMem(0xb4dc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x850b);
        EXPECT(gbc.pc(), 0xb4de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4dc), 0xcb);
        EXPECT(gbc.readMem(0xb4dd), 0x6d);
        // CB 6D 0232
        gbc.setState(0xc752, 0xa2b7, 0xf5d0, 0x1909, 0x8fdd, 0xe76c, 0x1, 0x1);
        gbc.writeMem(0xc752, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa2b7);
        EXPECT(gbc.pc(), 0xc754);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc752), 0xcb);
        EXPECT(gbc.readMem(0xc753), 0x6d);
        // CB 6D 0233
        gbc.setState(0x6174, 0xda60, 0x5a40, 0xde4a, 0xb1ff, 0x3c9, 0x0, 0x1);
        gbc.writeMem(0x6174, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xda60);
        EXPECT(gbc.pc(), 0x6176);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0234
        gbc.setState(0x58e8, 0x379e, 0xa490, 0x87b7, 0x4fce, 0x2f6f, 0x1, 0x0);
        gbc.writeMem(0x58e8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x379e);
        EXPECT(gbc.pc(), 0x58ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0235
        gbc.setState(0x380e, 0xafc9, 0x5270, 0xcbbc, 0xdd5b, 0x2b33, 0x1, 0x1);
        gbc.writeMem(0x380e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xafc9);
        EXPECT(gbc.pc(), 0x3810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0236
        gbc.setState(0x5a2b, 0x220c, 0xce10, 0xe8c4, 0xe858, 0x55a1, 0x1, 0x0);
        gbc.writeMem(0x5a2b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x220c);
        EXPECT(gbc.pc(), 0x5a2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0237
        gbc.setState(0x4ffe, 0xb587, 0x54f0, 0x98d6, 0x40bb, 0xf038, 0x0, 0x0);
        gbc.writeMem(0x4ffe, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb587);
        EXPECT(gbc.pc(), 0x5000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0238
        gbc.setState(0x9afc, 0xacfe, 0x1100, 0x2ef5, 0x28a1, 0xe15e, 0x1, 0x0);
        gbc.writeMem(0x9afc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xacfe);
        EXPECT(gbc.pc(), 0x9afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afc), 0xcb);
        EXPECT(gbc.readMem(0x9afd), 0x6d);
        // CB 6D 0239
        gbc.setState(0x9b1b, 0x4fef, 0x1500, 0x66f, 0xbdd3, 0xfdfe, 0x1, 0x1);
        gbc.writeMem(0x9b1b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4fef);
        EXPECT(gbc.pc(), 0x9b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1b), 0xcb);
        EXPECT(gbc.readMem(0x9b1c), 0x6d);
        // CB 6D 023A
        gbc.setState(0x8081, 0xd3cf, 0xb9b0, 0x712f, 0x1356, 0x90e9, 0x1, 0x0);
        gbc.writeMem(0x8081, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd3cf);
        EXPECT(gbc.pc(), 0x8083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8081), 0xcb);
        EXPECT(gbc.readMem(0x8082), 0x6d);
        // CB 6D 023B
        gbc.setState(0x314, 0x9ede, 0x620, 0xeca0, 0x99a0, 0xa5b, 0x1, 0x0);
        gbc.writeMem(0x314, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9ede);
        EXPECT(gbc.pc(), 0x316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 023C
        gbc.setState(0x5467, 0x6485, 0x77e0, 0xbaa5, 0xfb09, 0xfa3d, 0x0, 0x0);
        gbc.writeMem(0x5467, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6485);
        EXPECT(gbc.pc(), 0x5469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 023D
        gbc.setState(0x2a9c, 0x989c, 0xd600, 0xea1e, 0x778c, 0xc1e5, 0x0, 0x0);
        gbc.writeMem(0x2a9c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x989c);
        EXPECT(gbc.pc(), 0x2a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 023E
        gbc.setState(0xc414, 0x5658, 0xda20, 0xdddb, 0xce51, 0x92da, 0x0, 0x1);
        gbc.writeMem(0xc414, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5658);
        EXPECT(gbc.pc(), 0xc416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc414), 0xcb);
        EXPECT(gbc.readMem(0xc415), 0x6d);
        // CB 6D 023F
        gbc.setState(0x4c6c, 0x1831, 0x18f0, 0xf308, 0xd7c7, 0x89f, 0x1, 0x1);
        gbc.writeMem(0x4c6c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1831);
        EXPECT(gbc.pc(), 0x4c6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0240
        gbc.setState(0xaec, 0x2309, 0xfcc0, 0x511c, 0x6081, 0xacdd, 0x0, 0x1);
        gbc.writeMem(0xaec, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2309);
        EXPECT(gbc.pc(), 0xaee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0241
        gbc.setState(0xd8c5, 0x746a, 0x6150, 0x9de8, 0x7e03, 0xca01, 0x0, 0x0);
        gbc.writeMem(0xd8c5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x746a);
        EXPECT(gbc.pc(), 0xd8c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8c5), 0xcb);
        EXPECT(gbc.readMem(0xd8c6), 0x6d);
        // CB 6D 0242
        gbc.setState(0x6b88, 0x88b, 0x5cd0, 0xfe4c, 0x77bf, 0xa762, 0x0, 0x0);
        gbc.writeMem(0x6b88, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x88b);
        EXPECT(gbc.pc(), 0x6b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0243
        gbc.setState(0x3183, 0xc102, 0x41e0, 0xf2a8, 0xa4ab, 0x90ab, 0x0, 0x0);
        gbc.writeMem(0x3183, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc102);
        EXPECT(gbc.pc(), 0x3185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0244
        gbc.setState(0x5f8d, 0xf9a5, 0x1590, 0xccae, 0x697a, 0xea6a, 0x1, 0x1);
        gbc.writeMem(0x5f8d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf9a5);
        EXPECT(gbc.pc(), 0x5f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0245
        gbc.setState(0x3b92, 0xc8aa, 0x1e20, 0x6a2c, 0xc45f, 0x5a02, 0x0, 0x1);
        gbc.writeMem(0x3b92, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc8aa);
        EXPECT(gbc.pc(), 0x3b94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0246
        gbc.setState(0x662d, 0xb338, 0xcf00, 0xfec6, 0xe214, 0xff44, 0x0, 0x0);
        gbc.writeMem(0x662d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb338);
        EXPECT(gbc.pc(), 0x662f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0247
        gbc.setState(0xe350, 0xfdde, 0x4b10, 0xe3e1, 0xc35b, 0x688a, 0x1, 0x1);
        gbc.writeMem(0xe350, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfdde);
        EXPECT(gbc.pc(), 0xe352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe350), 0xcb);
        EXPECT(gbc.readMem(0xe351), 0x6d);
        // CB 6D 0248
        gbc.setState(0xd2c1, 0x2457, 0xeed0, 0x872c, 0x777d, 0x2647, 0x1, 0x0);
        gbc.writeMem(0xd2c1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2457);
        EXPECT(gbc.pc(), 0xd2c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2c1), 0xcb);
        EXPECT(gbc.readMem(0xd2c2), 0x6d);
        // CB 6D 0249
        gbc.setState(0xa45a, 0x13a5, 0x2010, 0xf276, 0x83a1, 0x4244, 0x1, 0x1);
        gbc.writeMem(0xa45a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x13a5);
        EXPECT(gbc.pc(), 0xa45c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa45a), 0xcb);
        EXPECT(gbc.readMem(0xa45b), 0x6d);
        // CB 6D 024A
        gbc.setState(0x8efb, 0x9f86, 0x3ca0, 0x5ac9, 0x45e8, 0x4308, 0x0, 0x1);
        gbc.writeMem(0x8efb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9f86);
        EXPECT(gbc.pc(), 0x8efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8efb), 0xcb);
        EXPECT(gbc.readMem(0x8efc), 0x6d);
        // CB 6D 024B
        gbc.setState(0xd0a1, 0x42ef, 0x32c0, 0x7080, 0x9f28, 0x521, 0x1, 0x0);
        gbc.writeMem(0xd0a1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x42ef);
        EXPECT(gbc.pc(), 0xd0a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0a1), 0xcb);
        EXPECT(gbc.readMem(0xd0a2), 0x6d);
        // CB 6D 024C
        gbc.setState(0xe680, 0x6f4c, 0x76b0, 0xc1ab, 0x7c31, 0x3ae1, 0x1, 0x1);
        gbc.writeMem(0xe680, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6f4c);
        EXPECT(gbc.pc(), 0xe682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe680), 0xcb);
        EXPECT(gbc.readMem(0xe681), 0x6d);
        // CB 6D 024E
        gbc.setState(0xc091, 0xbf6e, 0xe610, 0xe64c, 0xdce7, 0x67d8, 0x0, 0x1);
        gbc.writeMem(0xc091, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbf6e);
        EXPECT(gbc.pc(), 0xc093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc091), 0xcb);
        EXPECT(gbc.readMem(0xc092), 0x6d);
        // CB 6D 024F
        gbc.setState(0x975, 0x1277, 0x6940, 0xa1d8, 0x4509, 0x752e, 0x1, 0x0);
        gbc.writeMem(0x975, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1277);
        EXPECT(gbc.pc(), 0x977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0250
        gbc.setState(0x7613, 0xfa83, 0x9540, 0x32b4, 0xe366, 0xf60e, 0x0, 0x0);
        gbc.writeMem(0x7613, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfa83);
        EXPECT(gbc.pc(), 0x7615);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0251
        gbc.setState(0x67f2, 0x7341, 0x12e0, 0x1cc6, 0xa66d, 0xa48e, 0x0, 0x0);
        gbc.writeMem(0x67f2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7341);
        EXPECT(gbc.pc(), 0x67f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0252
        gbc.setState(0x219, 0xef19, 0xefb0, 0x7d03, 0x64e0, 0x93d0, 0x1, 0x0);
        gbc.writeMem(0x219, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xef19);
        EXPECT(gbc.pc(), 0x21b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0253
        gbc.setState(0x1077, 0x4d23, 0x2d0, 0xbdc1, 0xa0f0, 0x83f7, 0x0, 0x1);
        gbc.writeMem(0x1077, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4d23);
        EXPECT(gbc.pc(), 0x1079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0254
        gbc.setState(0x3dac, 0xf30e, 0xa7b0, 0x2039, 0xfad8, 0x6e50, 0x0, 0x0);
        gbc.writeMem(0x3dac, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf30e);
        EXPECT(gbc.pc(), 0x3dae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0255
        gbc.setState(0x778a, 0x5733, 0xd590, 0xd908, 0xc946, 0x6808, 0x0, 0x0);
        gbc.writeMem(0x778a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5733);
        EXPECT(gbc.pc(), 0x778c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0256
        gbc.setState(0xe740, 0x637, 0xa4a0, 0x5a3, 0x6ae3, 0xeeb6, 0x0, 0x1);
        gbc.writeMem(0xe740, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x637);
        EXPECT(gbc.pc(), 0xe742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe740), 0xcb);
        EXPECT(gbc.readMem(0xe741), 0x6d);
        // CB 6D 0257
        gbc.setState(0x71c1, 0xc02d, 0x7bc0, 0xefd2, 0x13ef, 0x2736, 0x1, 0x1);
        gbc.writeMem(0x71c1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc02d);
        EXPECT(gbc.pc(), 0x71c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0258
        gbc.setState(0xa131, 0xd88e, 0xd7c0, 0xfd6, 0x758, 0x9a4d, 0x0, 0x0);
        gbc.writeMem(0xa131, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd88e);
        EXPECT(gbc.pc(), 0xa133);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa131), 0xcb);
        EXPECT(gbc.readMem(0xa132), 0x6d);
        // CB 6D 025A
        gbc.setState(0xd01d, 0xe31d, 0x84c0, 0x2cd6, 0x95de, 0x7978, 0x1, 0x0);
        gbc.writeMem(0xd01d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe31d);
        EXPECT(gbc.pc(), 0xd01f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd01d), 0xcb);
        EXPECT(gbc.readMem(0xd01e), 0x6d);
        // CB 6D 025B
        gbc.setState(0x5cd8, 0x4c25, 0xc170, 0x6f97, 0xbdab, 0xb492, 0x0, 0x1);
        gbc.writeMem(0x5cd8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4c25);
        EXPECT(gbc.pc(), 0x5cda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 025C
        gbc.setState(0xb50f, 0x9edc, 0x5a20, 0x80e5, 0x963e, 0x3ef0, 0x0, 0x1);
        gbc.writeMem(0xb50f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9edc);
        EXPECT(gbc.pc(), 0xb511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb50f), 0xcb);
        EXPECT(gbc.readMem(0xb510), 0x6d);
        // CB 6D 025D
        gbc.setState(0x8d0c, 0xb9e4, 0xc170, 0x439, 0xdbbf, 0x61d1, 0x1, 0x1);
        gbc.writeMem(0x8d0c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb9e4);
        EXPECT(gbc.pc(), 0x8d0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d0c), 0xcb);
        EXPECT(gbc.readMem(0x8d0d), 0x6d);
        // CB 6D 025E
        gbc.setState(0x5dc0, 0xfcef, 0x74d0, 0x9290, 0x736d, 0x23d3, 0x1, 0x0);
        gbc.writeMem(0x5dc0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xfcef);
        EXPECT(gbc.pc(), 0x5dc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 025F
        gbc.setState(0x56bc, 0xa22c, 0x5e10, 0xb7b6, 0xc37d, 0x34b5, 0x0, 0x0);
        gbc.writeMem(0x56bc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa22c);
        EXPECT(gbc.pc(), 0x56be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0260
        gbc.setState(0x4fb, 0x2a6b, 0xfa40, 0xdfea, 0x6387, 0xdbd8, 0x0, 0x1);
        gbc.writeMem(0x4fb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2a6b);
        EXPECT(gbc.pc(), 0x4fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0262
        gbc.setState(0x36fe, 0x3c56, 0xbbc0, 0x7c70, 0x9749, 0xdf72, 0x0, 0x1);
        gbc.writeMem(0x36fe, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3c56);
        EXPECT(gbc.pc(), 0x3700);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0263
        gbc.setState(0x7a84, 0xd791, 0xff00, 0x2f03, 0xace, 0x5ece, 0x0, 0x0);
        gbc.writeMem(0x7a84, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd791);
        EXPECT(gbc.pc(), 0x7a86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0264
        gbc.setState(0x1d2e, 0xc154, 0x49c0, 0xf229, 0x7f68, 0xfbed, 0x1, 0x0);
        gbc.writeMem(0x1d2e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc154);
        EXPECT(gbc.pc(), 0x1d30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0265
        gbc.setState(0x9a59, 0xe936, 0xd1d0, 0xd801, 0xe853, 0x72d1, 0x0, 0x0);
        gbc.writeMem(0x9a59, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe936);
        EXPECT(gbc.pc(), 0x9a5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a59), 0xcb);
        EXPECT(gbc.readMem(0x9a5a), 0x6d);
        // CB 6D 0266
        gbc.setState(0x4413, 0xffce, 0x5fe0, 0x3e9f, 0x11ab, 0xd21f, 0x0, 0x0);
        gbc.writeMem(0x4413, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xffce);
        EXPECT(gbc.pc(), 0x4415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0267
        gbc.setState(0x96ea, 0x4cf9, 0xe120, 0x4bae, 0x6ef7, 0x7ce3, 0x0, 0x0);
        gbc.writeMem(0x96ea, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4cf9);
        EXPECT(gbc.pc(), 0x96ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ea), 0xcb);
        EXPECT(gbc.readMem(0x96eb), 0x6d);
        // CB 6D 0268
        gbc.setState(0x9bb9, 0xe782, 0xe050, 0xb5c4, 0x26ce, 0x8021, 0x1, 0x0);
        gbc.writeMem(0x9bb9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe782);
        EXPECT(gbc.pc(), 0x9bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb9), 0xcb);
        EXPECT(gbc.readMem(0x9bba), 0x6d);
        // CB 6D 0269
        gbc.setState(0x2438, 0x8d22, 0x3c80, 0xe046, 0x77b, 0x36b1, 0x1, 0x1);
        gbc.writeMem(0x2438, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8d22);
        EXPECT(gbc.pc(), 0x243a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 026A
        gbc.setState(0x22be, 0xa7d1, 0x9ec0, 0x3268, 0x1750, 0xc297, 0x0, 0x1);
        gbc.writeMem(0x22be, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xa7d1);
        EXPECT(gbc.pc(), 0x22c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 026B
        gbc.setState(0x5b8a, 0x2478, 0xf820, 0xf295, 0xa0cb, 0x5451, 0x0, 0x1);
        gbc.writeMem(0x5b8a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2478);
        EXPECT(gbc.pc(), 0x5b8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 026C
        gbc.setState(0xd4f3, 0xbbc5, 0xf0, 0x2576, 0xe8f7, 0xa6ef, 0x1, 0x1);
        gbc.writeMem(0xd4f3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xbbc5);
        EXPECT(gbc.pc(), 0xd4f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4f3), 0xcb);
        EXPECT(gbc.readMem(0xd4f4), 0x6d);
        // CB 6D 026D
        gbc.setState(0x5a98, 0x308b, 0x24c0, 0xb179, 0x2db9, 0x452d, 0x0, 0x0);
        gbc.writeMem(0x5a98, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x308b);
        EXPECT(gbc.pc(), 0x5a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 026E
        gbc.setState(0x242f, 0x86b, 0xdcf0, 0x4f26, 0x6841, 0x6795, 0x0, 0x0);
        gbc.writeMem(0x242f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x86b);
        EXPECT(gbc.pc(), 0x2431);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 026F
        gbc.setState(0x4ef6, 0x4f4d, 0x8960, 0xf9e8, 0x17e6, 0x9447, 0x0, 0x0);
        gbc.writeMem(0x4ef6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4f4d);
        EXPECT(gbc.pc(), 0x4ef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0270
        gbc.setState(0xbb24, 0x3410, 0xc7f0, 0xb8aa, 0xce49, 0xbdbc, 0x0, 0x1);
        gbc.writeMem(0xbb24, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3410);
        EXPECT(gbc.pc(), 0xbb26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb24), 0xcb);
        EXPECT(gbc.readMem(0xbb25), 0x6d);
        // CB 6D 0271
        gbc.setState(0x9105, 0x828, 0xdd00, 0x85b9, 0x2e84, 0xba25, 0x1, 0x0);
        gbc.writeMem(0x9105, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x828);
        EXPECT(gbc.pc(), 0x9107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9105), 0xcb);
        EXPECT(gbc.readMem(0x9106), 0x6d);
        // CB 6D 0272
        gbc.setState(0x3f50, 0xa25a, 0xcac0, 0xf5f2, 0x1123, 0x3280, 0x1, 0x1);
        gbc.writeMem(0x3f50, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa25a);
        EXPECT(gbc.pc(), 0x3f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0273
        gbc.setState(0x5d1d, 0xc590, 0x22b0, 0x88b8, 0xcf1c, 0x6fb1, 0x1, 0x1);
        gbc.writeMem(0x5d1d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc590);
        EXPECT(gbc.pc(), 0x5d1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0274
        gbc.setState(0x5b48, 0x3c2c, 0xaf30, 0xd72d, 0xc01c, 0x8ee5, 0x1, 0x1);
        gbc.writeMem(0x5b48, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3c2c);
        EXPECT(gbc.pc(), 0x5b4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0275
        gbc.setState(0x194, 0x81d5, 0xaf90, 0x872, 0xd748, 0xfcc7, 0x1, 0x0);
        gbc.writeMem(0x194, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x81d5);
        EXPECT(gbc.pc(), 0x196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0276
        gbc.setState(0x8fd7, 0xd2c0, 0xec0, 0x2f7e, 0x2658, 0xa5f5, 0x1, 0x1);
        gbc.writeMem(0x8fd7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd2c0);
        EXPECT(gbc.pc(), 0x8fd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fd7), 0xcb);
        EXPECT(gbc.readMem(0x8fd8), 0x6d);
        // CB 6D 0277
        gbc.setState(0xbca6, 0x12c5, 0x53f0, 0x19ad, 0x8c6f, 0xfc23, 0x1, 0x0);
        gbc.writeMem(0xbca6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x12c5);
        EXPECT(gbc.pc(), 0xbca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbca6), 0xcb);
        EXPECT(gbc.readMem(0xbca7), 0x6d);
        // CB 6D 0278
        gbc.setState(0xa768, 0x162f, 0x6600, 0x362b, 0xfddb, 0x6f41, 0x0, 0x0);
        gbc.writeMem(0xa768, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x162f);
        EXPECT(gbc.pc(), 0xa76a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa768), 0xcb);
        EXPECT(gbc.readMem(0xa769), 0x6d);
        // CB 6D 0279
        gbc.setState(0x4eb1, 0x213d, 0xf980, 0x1acb, 0x2e67, 0xea7f, 0x1, 0x1);
        gbc.writeMem(0x4eb1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x213d);
        EXPECT(gbc.pc(), 0x4eb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 027A
        gbc.setState(0x8781, 0x6e13, 0xb810, 0x4300, 0x76d8, 0x6c38, 0x0, 0x0);
        gbc.writeMem(0x8781, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6e13);
        EXPECT(gbc.pc(), 0x8783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8781), 0xcb);
        EXPECT(gbc.readMem(0x8782), 0x6d);
        // CB 6D 027B
        gbc.setState(0x196b, 0x9887, 0x5dd0, 0x2b4c, 0x403d, 0xea79, 0x1, 0x1);
        gbc.writeMem(0x196b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9887);
        EXPECT(gbc.pc(), 0x196d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 027C
        gbc.setState(0xc30f, 0x98fb, 0x8930, 0xd901, 0x9ff9, 0x6b8c, 0x0, 0x0);
        gbc.writeMem(0xc30f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x98fb);
        EXPECT(gbc.pc(), 0xc311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc30f), 0xcb);
        EXPECT(gbc.readMem(0xc310), 0x6d);
        // CB 6D 027D
        gbc.setState(0xc9c0, 0xb36, 0xc4a0, 0xe632, 0x6460, 0x9277, 0x1, 0x1);
        gbc.writeMem(0xc9c0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb36);
        EXPECT(gbc.pc(), 0xc9c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c0), 0xcb);
        EXPECT(gbc.readMem(0xc9c1), 0x6d);
        // CB 6D 027E
        gbc.setState(0x9ce6, 0xe55b, 0x2fa0, 0x5cba, 0x23a7, 0x92d0, 0x1, 0x1);
        gbc.writeMem(0x9ce6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe55b);
        EXPECT(gbc.pc(), 0x9ce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce6), 0xcb);
        EXPECT(gbc.readMem(0x9ce7), 0x6d);
        // CB 6D 027F
        gbc.setState(0x7f8b, 0xf03, 0x76f0, 0xd26f, 0xb8a3, 0x66b5, 0x0, 0x0);
        gbc.writeMem(0x7f8b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf03);
        EXPECT(gbc.pc(), 0x7f8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0280
        gbc.setState(0xee50, 0xc506, 0xf460, 0x6443, 0xd349, 0x5e03, 0x1, 0x1);
        gbc.writeMem(0xee50, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc506);
        EXPECT(gbc.pc(), 0xee52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee50), 0xcb);
        EXPECT(gbc.readMem(0xee51), 0x6d);
        // CB 6D 0281
        gbc.setState(0xe016, 0x82, 0x52b0, 0x7735, 0x90c5, 0xfe28, 0x1, 0x0);
        gbc.writeMem(0xe016, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x82);
        EXPECT(gbc.pc(), 0xe018);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe016), 0xcb);
        EXPECT(gbc.readMem(0xe017), 0x6d);
        // CB 6D 0283
        gbc.setState(0xeb27, 0x96cb, 0xeed0, 0xf28e, 0xb5b3, 0xaae3, 0x0, 0x0);
        gbc.writeMem(0xeb27, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x96cb);
        EXPECT(gbc.pc(), 0xeb29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb27), 0xcb);
        EXPECT(gbc.readMem(0xeb28), 0x6d);
        // CB 6D 0284
        gbc.setState(0xd6a9, 0x9f5b, 0x630, 0x72dc, 0x13b6, 0xcb52, 0x0, 0x1);
        gbc.writeMem(0xd6a9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9f5b);
        EXPECT(gbc.pc(), 0xd6ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a9), 0xcb);
        EXPECT(gbc.readMem(0xd6aa), 0x6d);
        // CB 6D 0285
        gbc.setState(0x4264, 0xd514, 0x300, 0x42f2, 0xe60e, 0xfb31, 0x0, 0x1);
        gbc.writeMem(0x4264, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xd514);
        EXPECT(gbc.pc(), 0x4266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0286
        gbc.setState(0x910c, 0x6642, 0xe7a0, 0x6474, 0xad4c, 0xd4fc, 0x0, 0x0);
        gbc.writeMem(0x910c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6642);
        EXPECT(gbc.pc(), 0x910e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x910c), 0xcb);
        EXPECT(gbc.readMem(0x910d), 0x6d);
        // CB 6D 0287
        gbc.setState(0x9e11, 0xc28a, 0x8840, 0x7d78, 0xcac6, 0x8dcb, 0x1, 0x0);
        gbc.writeMem(0x9e11, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc28a);
        EXPECT(gbc.pc(), 0x9e13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e11), 0xcb);
        EXPECT(gbc.readMem(0x9e12), 0x6d);
        // CB 6D 0288
        gbc.setState(0x8968, 0x4b7e, 0xabc0, 0xb674, 0x9043, 0xf282, 0x1, 0x1);
        gbc.writeMem(0x8968, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4b7e);
        EXPECT(gbc.pc(), 0x896a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8968), 0xcb);
        EXPECT(gbc.readMem(0x8969), 0x6d);
        // CB 6D 0289
        gbc.setState(0x9c03, 0x483b, 0x6e70, 0x44a4, 0x8bf0, 0xa9b8, 0x1, 0x0);
        gbc.writeMem(0x9c03, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x483b);
        EXPECT(gbc.pc(), 0x9c05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c03), 0xcb);
        EXPECT(gbc.readMem(0x9c04), 0x6d);
        // CB 6D 028A
        gbc.setState(0x46c7, 0x7274, 0x7210, 0xe44b, 0xa365, 0x6085, 0x0, 0x1);
        gbc.writeMem(0x46c7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7274);
        EXPECT(gbc.pc(), 0x46c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 028C
        gbc.setState(0x11de, 0xe5fa, 0x2700, 0xe0f6, 0x2603, 0xcadf, 0x1, 0x0);
        gbc.writeMem(0x11de, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe5fa);
        EXPECT(gbc.pc(), 0x11e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 028D
        gbc.setState(0x8b64, 0x77f4, 0xf080, 0x7cfd, 0x6de9, 0x4153, 0x1, 0x0);
        gbc.writeMem(0x8b64, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x77f4);
        EXPECT(gbc.pc(), 0x8b66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b64), 0xcb);
        EXPECT(gbc.readMem(0x8b65), 0x6d);
        // CB 6D 028F
        gbc.setState(0xe14f, 0x3084, 0xea20, 0xf319, 0x6a6a, 0xcbd9, 0x0, 0x0);
        gbc.writeMem(0xe14f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3084);
        EXPECT(gbc.pc(), 0xe151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe14f), 0xcb);
        EXPECT(gbc.readMem(0xe150), 0x6d);
        // CB 6D 0290
        gbc.setState(0x4593, 0x5284, 0xec70, 0x2c1b, 0x71d4, 0xc2a3, 0x1, 0x0);
        gbc.writeMem(0x4593, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5284);
        EXPECT(gbc.pc(), 0x4595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0291
        gbc.setState(0xc8a7, 0x297a, 0xc250, 0x20cb, 0xc700, 0x52d5, 0x0, 0x1);
        gbc.writeMem(0xc8a7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x297a);
        EXPECT(gbc.pc(), 0xc8a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a7), 0xcb);
        EXPECT(gbc.readMem(0xc8a8), 0x6d);
        // CB 6D 0292
        gbc.setState(0x5701, 0xb27f, 0x6cf0, 0x88fe, 0x3ec9, 0x5c7, 0x0, 0x1);
        gbc.writeMem(0x5701, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb27f);
        EXPECT(gbc.pc(), 0x5703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0293
        gbc.setState(0x1c0, 0xf287, 0x9640, 0x48f, 0x24c1, 0x77f9, 0x1, 0x1);
        gbc.writeMem(0x1c0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xf287);
        EXPECT(gbc.pc(), 0x1c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0294
        gbc.setState(0x44f6, 0xbf89, 0x5950, 0x4e64, 0x8ced, 0x3d3e, 0x1, 0x0);
        gbc.writeMem(0x44f6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xbf89);
        EXPECT(gbc.pc(), 0x44f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0295
        gbc.setState(0xda19, 0x1f16, 0x10f0, 0x307f, 0x4424, 0x5ff9, 0x1, 0x1);
        gbc.writeMem(0xda19, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1f16);
        EXPECT(gbc.pc(), 0xda1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda19), 0xcb);
        EXPECT(gbc.readMem(0xda1a), 0x6d);
        // CB 6D 0296
        gbc.setState(0x2f5d, 0x4a4f, 0xe360, 0xe21, 0xb0ee, 0xea06, 0x1, 0x1);
        gbc.writeMem(0x2f5d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4a4f);
        EXPECT(gbc.pc(), 0x2f5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0298
        gbc.setState(0xbfed, 0x401b, 0xea80, 0xc693, 0xfd29, 0xcb34, 0x1, 0x0);
        gbc.writeMem(0xbfed, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x401b);
        EXPECT(gbc.pc(), 0xbfef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfed), 0xcb);
        EXPECT(gbc.readMem(0xbfee), 0x6d);
        // CB 6D 0299
        gbc.setState(0x4462, 0x33e8, 0xe30, 0x5cc3, 0xf549, 0x65b3, 0x1, 0x1);
        gbc.writeMem(0x4462, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x33e8);
        EXPECT(gbc.pc(), 0x4464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 029A
        gbc.setState(0xceb, 0x7d52, 0xf000, 0x6554, 0x2536, 0xc166, 0x1, 0x0);
        gbc.writeMem(0xceb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7d52);
        EXPECT(gbc.pc(), 0xced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 029B
        gbc.setState(0x30a7, 0x42f2, 0xc4c0, 0x4fba, 0x7d02, 0x1a0a, 0x1, 0x1);
        gbc.writeMem(0x30a7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x42f2);
        EXPECT(gbc.pc(), 0x30a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 029C
        gbc.setState(0x981c, 0x8c46, 0xae20, 0xb9f7, 0xe8cc, 0x515, 0x0, 0x1);
        gbc.writeMem(0x981c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8c46);
        EXPECT(gbc.pc(), 0x981e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x981c), 0xcb);
        EXPECT(gbc.readMem(0x981d), 0x6d);
        // CB 6D 029D
        gbc.setState(0x8888, 0xbb1, 0x3bc0, 0x25c0, 0xb808, 0x1523, 0x0, 0x0);
        gbc.writeMem(0x8888, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xbb1);
        EXPECT(gbc.pc(), 0x888a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8888), 0xcb);
        EXPECT(gbc.readMem(0x8889), 0x6d);
        // CB 6D 029E
        gbc.setState(0x7aae, 0x945d, 0x86d0, 0x2a9e, 0xe717, 0x62a0, 0x0, 0x0);
        gbc.writeMem(0x7aae, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x945d);
        EXPECT(gbc.pc(), 0x7ab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 029F
        gbc.setState(0x5a68, 0x74f6, 0xd320, 0x7125, 0xa2ad, 0xaadc, 0x0, 0x1);
        gbc.writeMem(0x5a68, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x74f6);
        EXPECT(gbc.pc(), 0x5a6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02A0
        gbc.setState(0x7f36, 0xb251, 0xa9f0, 0xed27, 0x13b3, 0xfcad, 0x0, 0x1);
        gbc.writeMem(0x7f36, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb251);
        EXPECT(gbc.pc(), 0x7f38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02A1
        gbc.setState(0x60b2, 0x16e5, 0x3f90, 0x6b4a, 0xc5d2, 0x9fe9, 0x0, 0x1);
        gbc.writeMem(0x60b2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x16e5);
        EXPECT(gbc.pc(), 0x60b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02A2
        gbc.setState(0x819, 0x2a6a, 0x8140, 0xd37d, 0xdb75, 0x7029, 0x0, 0x0);
        gbc.writeMem(0x819, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2a6a);
        EXPECT(gbc.pc(), 0x81b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02A4
        gbc.setState(0xcd2e, 0xc763, 0x3de0, 0x148b, 0xccc3, 0x7614, 0x0, 0x0);
        gbc.writeMem(0xcd2e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc763);
        EXPECT(gbc.pc(), 0xcd30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd2e), 0xcb);
        EXPECT(gbc.readMem(0xcd2f), 0x6d);
        // CB 6D 02A5
        gbc.setState(0x120a, 0x36da, 0x6610, 0xb0b4, 0x604f, 0x224f, 0x0, 0x0);
        gbc.writeMem(0x120a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x36da);
        EXPECT(gbc.pc(), 0x120c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02A6
        gbc.setState(0xc845, 0xcae6, 0xdf50, 0xf96a, 0xae14, 0xb71d, 0x1, 0x1);
        gbc.writeMem(0xc845, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcae6);
        EXPECT(gbc.pc(), 0xc847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc845), 0xcb);
        EXPECT(gbc.readMem(0xc846), 0x6d);
        // CB 6D 02A7
        gbc.setState(0x5da5, 0x60db, 0x8210, 0x5799, 0x34da, 0x509a, 0x1, 0x0);
        gbc.writeMem(0x5da5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x60db);
        EXPECT(gbc.pc(), 0x5da7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02A8
        gbc.setState(0x1c24, 0xba24, 0x5900, 0x87f7, 0x6def, 0xef37, 0x1, 0x1);
        gbc.writeMem(0x1c24, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xba24);
        EXPECT(gbc.pc(), 0x1c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02A9
        gbc.setState(0x549d, 0x4613, 0xc1c0, 0x5393, 0x5d21, 0xd6ba, 0x0, 0x1);
        gbc.writeMem(0x549d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4613);
        EXPECT(gbc.pc(), 0x549f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02AA
        gbc.setState(0x34b5, 0x8694, 0xf790, 0x99d0, 0x48e5, 0x7ab9, 0x0, 0x0);
        gbc.writeMem(0x34b5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8694);
        EXPECT(gbc.pc(), 0x34b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02AB
        gbc.setState(0x8da1, 0x8712, 0x3d90, 0xa0aa, 0x5f0e, 0xd51d, 0x0, 0x0);
        gbc.writeMem(0x8da1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8712);
        EXPECT(gbc.pc(), 0x8da3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da1), 0xcb);
        EXPECT(gbc.readMem(0x8da2), 0x6d);
        // CB 6D 02AC
        gbc.setState(0xe2e2, 0x8834, 0x3f30, 0x969b, 0x7800, 0xb274, 0x1, 0x0);
        gbc.writeMem(0xe2e2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8834);
        EXPECT(gbc.pc(), 0xe2e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2e2), 0xcb);
        EXPECT(gbc.readMem(0xe2e3), 0x6d);
        // CB 6D 02AD
        gbc.setState(0xc345, 0x332f, 0xd60, 0x6b42, 0x3515, 0xf3b8, 0x1, 0x1);
        gbc.writeMem(0xc345, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x332f);
        EXPECT(gbc.pc(), 0xc347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc345), 0xcb);
        EXPECT(gbc.readMem(0xc346), 0x6d);
        // CB 6D 02AE
        gbc.setState(0x2a8b, 0x6ab6, 0xfa90, 0x1df0, 0xab00, 0xdea9, 0x1, 0x0);
        gbc.writeMem(0x2a8b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6ab6);
        EXPECT(gbc.pc(), 0x2a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02AF
        gbc.setState(0x9a55, 0xda78, 0x4b0, 0xd92f, 0xdc80, 0x82f, 0x1, 0x0);
        gbc.writeMem(0x9a55, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xda78);
        EXPECT(gbc.pc(), 0x9a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a55), 0xcb);
        EXPECT(gbc.readMem(0x9a56), 0x6d);
        // CB 6D 02B0
        gbc.setState(0x77da, 0x6a04, 0x2fe0, 0x7b26, 0xbd0b, 0x900a, 0x0, 0x1);
        gbc.writeMem(0x77da, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6a04);
        EXPECT(gbc.pc(), 0x77dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02B1
        gbc.setState(0xcedc, 0x1db3, 0xae90, 0x1a6c, 0xe059, 0xc167, 0x1, 0x0);
        gbc.writeMem(0xcedc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1db3);
        EXPECT(gbc.pc(), 0xcede);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcedc), 0xcb);
        EXPECT(gbc.readMem(0xcedd), 0x6d);
        // CB 6D 02B2
        gbc.setState(0x7e45, 0xccde, 0xa730, 0x9a56, 0x9a74, 0xfa59, 0x0, 0x0);
        gbc.writeMem(0x7e45, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xccde);
        EXPECT(gbc.pc(), 0x7e47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02B3
        gbc.setState(0xcf90, 0x9ebc, 0x4ab0, 0xf6dc, 0x5eee, 0xa5a6, 0x0, 0x0);
        gbc.writeMem(0xcf90, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9ebc);
        EXPECT(gbc.pc(), 0xcf92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf90), 0xcb);
        EXPECT(gbc.readMem(0xcf91), 0x6d);
        // CB 6D 02B4
        gbc.setState(0xe16a, 0xfad8, 0x9230, 0xb992, 0x43ed, 0x52b2, 0x1, 0x0);
        gbc.writeMem(0xe16a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfad8);
        EXPECT(gbc.pc(), 0xe16c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe16a), 0xcb);
        EXPECT(gbc.readMem(0xe16b), 0x6d);
        // CB 6D 02B6
        gbc.setState(0x9ca8, 0x8678, 0xe540, 0xf571, 0x68c5, 0x6965, 0x1, 0x0);
        gbc.writeMem(0x9ca8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8678);
        EXPECT(gbc.pc(), 0x9caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca8), 0xcb);
        EXPECT(gbc.readMem(0x9ca9), 0x6d);
        // CB 6D 02B7
        gbc.setState(0x5349, 0xd8b6, 0xa4f0, 0xfafe, 0x1b28, 0x6a6d, 0x0, 0x0);
        gbc.writeMem(0x5349, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd8b6);
        EXPECT(gbc.pc(), 0x534b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02B8
        gbc.setState(0x1cb4, 0x8fc9, 0xbe60, 0xfaf4, 0x1759, 0xf53e, 0x1, 0x1);
        gbc.writeMem(0x1cb4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8fc9);
        EXPECT(gbc.pc(), 0x1cb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02B9
        gbc.setState(0x8446, 0xcf47, 0xc470, 0xeac2, 0x29fb, 0xc05b, 0x0, 0x0);
        gbc.writeMem(0x8446, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xcf47);
        EXPECT(gbc.pc(), 0x8448);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8446), 0xcb);
        EXPECT(gbc.readMem(0x8447), 0x6d);
        // CB 6D 02BA
        gbc.setState(0xc464, 0x9de6, 0x3c20, 0x53a9, 0x2674, 0x3d8b, 0x1, 0x0);
        gbc.writeMem(0xc464, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9de6);
        EXPECT(gbc.pc(), 0xc466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc464), 0xcb);
        EXPECT(gbc.readMem(0xc465), 0x6d);
        // CB 6D 02BB
        gbc.setState(0x5eb1, 0x97e6, 0x7050, 0xac0a, 0x5eba, 0x4422, 0x0, 0x1);
        gbc.writeMem(0x5eb1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x97e6);
        EXPECT(gbc.pc(), 0x5eb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02BC
        gbc.setState(0x5fd2, 0x48e1, 0x7df0, 0xe710, 0x68ca, 0x2ce, 0x1, 0x1);
        gbc.writeMem(0x5fd2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x48e1);
        EXPECT(gbc.pc(), 0x5fd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02BD
        gbc.setState(0xac05, 0x1a13, 0xe990, 0xfda6, 0xf440, 0xf98d, 0x0, 0x1);
        gbc.writeMem(0xac05, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1a13);
        EXPECT(gbc.pc(), 0xac07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac05), 0xcb);
        EXPECT(gbc.readMem(0xac06), 0x6d);
        // CB 6D 02BF
        gbc.setState(0xd79, 0x9620, 0x6910, 0x9e85, 0x6a0c, 0xd12a, 0x1, 0x1);
        gbc.writeMem(0xd79, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9620);
        EXPECT(gbc.pc(), 0xd7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02C0
        gbc.setState(0xc7b9, 0x291, 0x26f0, 0x1c83, 0x2ec5, 0x5b58, 0x0, 0x1);
        gbc.writeMem(0xc7b9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x291);
        EXPECT(gbc.pc(), 0xc7bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b9), 0xcb);
        EXPECT(gbc.readMem(0xc7ba), 0x6d);
        // CB 6D 02C1
        gbc.setState(0xbada, 0x7c9f, 0xfc0, 0x578b, 0x9b1f, 0x859a, 0x0, 0x1);
        gbc.writeMem(0xbada, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7c9f);
        EXPECT(gbc.pc(), 0xbadc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbada), 0xcb);
        EXPECT(gbc.readMem(0xbadb), 0x6d);
        // CB 6D 02C2
        gbc.setState(0x5639, 0x3fc7, 0xe50, 0x4586, 0x169c, 0xef10, 0x0, 0x1);
        gbc.writeMem(0x5639, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3fc7);
        EXPECT(gbc.pc(), 0x563b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02C3
        gbc.setState(0x73d, 0xbfce, 0x92b0, 0xc93d, 0x2fe, 0xbdfe, 0x0, 0x0);
        gbc.writeMem(0x73d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xbfce);
        EXPECT(gbc.pc(), 0x73f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02C4
        gbc.setState(0xad84, 0x816d, 0xfb10, 0xc28a, 0xf1a6, 0x7c30, 0x0, 0x0);
        gbc.writeMem(0xad84, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x816d);
        EXPECT(gbc.pc(), 0xad86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad84), 0xcb);
        EXPECT(gbc.readMem(0xad85), 0x6d);
        // CB 6D 02C5
        gbc.setState(0x370f, 0x3888, 0x85c0, 0x2e7, 0xd307, 0x3fc0, 0x1, 0x0);
        gbc.writeMem(0x370f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3888);
        EXPECT(gbc.pc(), 0x3711);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02C6
        gbc.setState(0x6606, 0x86f4, 0x8750, 0xdeda, 0x8793, 0xfe3, 0x1, 0x0);
        gbc.writeMem(0x6606, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x86f4);
        EXPECT(gbc.pc(), 0x6608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02C7
        gbc.setState(0xa5fd, 0x7aad, 0x9c0, 0x9d6, 0xcf8b, 0xbebf, 0x0, 0x0);
        gbc.writeMem(0xa5fd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7aad);
        EXPECT(gbc.pc(), 0xa5ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fd), 0xcb);
        EXPECT(gbc.readMem(0xa5fe), 0x6d);
        // CB 6D 02C8
        gbc.setState(0xcd05, 0x1799, 0xe890, 0x4592, 0xe13a, 0xa867, 0x0, 0x1);
        gbc.writeMem(0xcd05, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1799);
        EXPECT(gbc.pc(), 0xcd07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd05), 0xcb);
        EXPECT(gbc.readMem(0xcd06), 0x6d);
        // CB 6D 02C9
        gbc.setState(0x4301, 0x962, 0x6830, 0xd143, 0x852d, 0x962b, 0x1, 0x0);
        gbc.writeMem(0x4301, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x962);
        EXPECT(gbc.pc(), 0x4303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02CA
        gbc.setState(0xbc56, 0xb775, 0xe190, 0x7b97, 0x9316, 0x8d6b, 0x1, 0x1);
        gbc.writeMem(0xbc56, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb775);
        EXPECT(gbc.pc(), 0xbc58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc56), 0xcb);
        EXPECT(gbc.readMem(0xbc57), 0x6d);
        // CB 6D 02CC
        gbc.setState(0xcb7a, 0x20e6, 0xc480, 0x7eae, 0x7498, 0xf75e, 0x0, 0x0);
        gbc.writeMem(0xcb7a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x20e6);
        EXPECT(gbc.pc(), 0xcb7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb7a), 0xcb);
        EXPECT(gbc.readMem(0xcb7b), 0x6d);
        // CB 6D 02CD
        gbc.setState(0xb306, 0x65, 0xf910, 0x3da4, 0xd422, 0x4e2c, 0x0, 0x0);
        gbc.writeMem(0xb306, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x65);
        EXPECT(gbc.pc(), 0xb308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb306), 0xcb);
        EXPECT(gbc.readMem(0xb307), 0x6d);
        // CB 6D 02CE
        gbc.setState(0x7edf, 0x6cb6, 0x29a0, 0x3486, 0x98bf, 0x9f6d, 0x1, 0x0);
        gbc.writeMem(0x7edf, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6cb6);
        EXPECT(gbc.pc(), 0x7ee1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02CF
        gbc.setState(0x922, 0x5dd3, 0xc450, 0x5e19, 0x30a2, 0x2745, 0x1, 0x0);
        gbc.writeMem(0x922, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5dd3);
        EXPECT(gbc.pc(), 0x924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02D0
        gbc.setState(0x8f03, 0xcf4b, 0xddf0, 0x69ef, 0xf92f, 0x1892, 0x0, 0x0);
        gbc.writeMem(0x8f03, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xcf4b);
        EXPECT(gbc.pc(), 0x8f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f03), 0xcb);
        EXPECT(gbc.readMem(0x8f04), 0x6d);
        // CB 6D 02D1
        gbc.setState(0xa0a5, 0x129b, 0x7470, 0x6e01, 0xf727, 0x9e8b, 0x0, 0x1);
        gbc.writeMem(0xa0a5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x129b);
        EXPECT(gbc.pc(), 0xa0a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0a5), 0xcb);
        EXPECT(gbc.readMem(0xa0a6), 0x6d);
        // CB 6D 02D2
        gbc.setState(0x2cef, 0x3e05, 0xc2d0, 0x8adf, 0xe160, 0x3bc1, 0x0, 0x0);
        gbc.writeMem(0x2cef, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3e05);
        EXPECT(gbc.pc(), 0x2cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02D3
        gbc.setState(0xdd4d, 0xbaee, 0xd2e0, 0x677c, 0xa01f, 0x3e07, 0x1, 0x0);
        gbc.writeMem(0xdd4d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xbaee);
        EXPECT(gbc.pc(), 0xdd4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd4d), 0xcb);
        EXPECT(gbc.readMem(0xdd4e), 0x6d);
        // CB 6D 02D4
        gbc.setState(0xa34b, 0x115, 0x8e30, 0xd5e8, 0xf9e3, 0xbe86, 0x0, 0x0);
        gbc.writeMem(0xa34b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x115);
        EXPECT(gbc.pc(), 0xa34d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa34b), 0xcb);
        EXPECT(gbc.readMem(0xa34c), 0x6d);
        // CB 6D 02D5
        gbc.setState(0x5bfb, 0x1a2b, 0xef60, 0x7f48, 0xc63a, 0x6dfd, 0x1, 0x1);
        gbc.writeMem(0x5bfb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1a2b);
        EXPECT(gbc.pc(), 0x5bfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02D6
        gbc.setState(0x24e0, 0xa0d0, 0x1420, 0xd1bb, 0xb749, 0x1db4, 0x1, 0x1);
        gbc.writeMem(0x24e0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa0d0);
        EXPECT(gbc.pc(), 0x24e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02D7
        gbc.setState(0xec2e, 0xba4f, 0xcf10, 0x80ea, 0xe5b6, 0xd274, 0x1, 0x0);
        gbc.writeMem(0xec2e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xba4f);
        EXPECT(gbc.pc(), 0xec30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec2e), 0xcb);
        EXPECT(gbc.readMem(0xec2f), 0x6d);
        // CB 6D 02D8
        gbc.setState(0x5d05, 0xce39, 0xc0d0, 0x7dc, 0x6371, 0xc7ee, 0x0, 0x1);
        gbc.writeMem(0x5d05, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xce39);
        EXPECT(gbc.pc(), 0x5d07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02D9
        gbc.setState(0x1694, 0x16cb, 0x6750, 0x8a16, 0x792b, 0x93e4, 0x1, 0x0);
        gbc.writeMem(0x1694, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x16cb);
        EXPECT(gbc.pc(), 0x1696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02DA
        gbc.setState(0x918f, 0x6c29, 0xcf90, 0x1337, 0xd72a, 0x1d7c, 0x0, 0x1);
        gbc.writeMem(0x918f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6c29);
        EXPECT(gbc.pc(), 0x9191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x918f), 0xcb);
        EXPECT(gbc.readMem(0x9190), 0x6d);
        // CB 6D 02DB
        gbc.setState(0xee42, 0xbf26, 0xbd80, 0xa29b, 0x6da7, 0xd09f, 0x1, 0x0);
        gbc.writeMem(0xee42, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xbf26);
        EXPECT(gbc.pc(), 0xee44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee42), 0xcb);
        EXPECT(gbc.readMem(0xee43), 0x6d);
        // CB 6D 02DC
        gbc.setState(0x2dda, 0xb518, 0x8140, 0x2a96, 0x5c8d, 0xa2d4, 0x1, 0x1);
        gbc.writeMem(0x2dda, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb518);
        EXPECT(gbc.pc(), 0x2ddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02DE
        gbc.setState(0x5524, 0xd9d, 0x5860, 0x676c, 0x3f7c, 0x5de1, 0x1, 0x0);
        gbc.writeMem(0x5524, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd9d);
        EXPECT(gbc.pc(), 0x5526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02DF
        gbc.setState(0x6e16, 0xe9ef, 0x2230, 0x2b22, 0x4057, 0x34b8, 0x1, 0x0);
        gbc.writeMem(0x6e16, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe9ef);
        EXPECT(gbc.pc(), 0x6e18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02E0
        gbc.setState(0xbb78, 0xe70a, 0x8600, 0xa2f6, 0x4310, 0xe5c7, 0x0, 0x1);
        gbc.writeMem(0xbb78, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe70a);
        EXPECT(gbc.pc(), 0xbb7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb78), 0xcb);
        EXPECT(gbc.readMem(0xbb79), 0x6d);
        // CB 6D 02E1
        gbc.setState(0xa059, 0x9eeb, 0x13a0, 0xbfe0, 0xc259, 0x311, 0x1, 0x1);
        gbc.writeMem(0xa059, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9eeb);
        EXPECT(gbc.pc(), 0xa05b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa059), 0xcb);
        EXPECT(gbc.readMem(0xa05a), 0x6d);
        // CB 6D 02E2
        gbc.setState(0x4ecc, 0xdf4, 0x1bf0, 0xb19e, 0x2538, 0x9290, 0x0, 0x0);
        gbc.writeMem(0x4ecc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdf4);
        EXPECT(gbc.pc(), 0x4ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02E3
        gbc.setState(0x155a, 0x971a, 0x2c50, 0xdaa6, 0x3d88, 0xca40, 0x1, 0x1);
        gbc.writeMem(0x155a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x971a);
        EXPECT(gbc.pc(), 0x155c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02E4
        gbc.setState(0xc74d, 0x7b8, 0xb020, 0x31cd, 0xad6f, 0x217, 0x1, 0x1);
        gbc.writeMem(0xc74d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7b8);
        EXPECT(gbc.pc(), 0xc74f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc74d), 0xcb);
        EXPECT(gbc.readMem(0xc74e), 0x6d);
        // CB 6D 02E5
        gbc.setState(0x9903, 0xdbf5, 0xcec0, 0x2766, 0x32a5, 0x46a8, 0x0, 0x0);
        gbc.writeMem(0x9903, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xdbf5);
        EXPECT(gbc.pc(), 0x9905);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9903), 0xcb);
        EXPECT(gbc.readMem(0x9904), 0x6d);
        // CB 6D 02E6
        gbc.setState(0xe49f, 0x70b9, 0x6630, 0x7072, 0x105f, 0x9f19, 0x0, 0x1);
        gbc.writeMem(0xe49f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x70b9);
        EXPECT(gbc.pc(), 0xe4a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe49f), 0xcb);
        EXPECT(gbc.readMem(0xe4a0), 0x6d);
        // CB 6D 02E7
        gbc.setState(0x557, 0x5510, 0xc770, 0x687b, 0xc3c8, 0x7028, 0x1, 0x1);
        gbc.writeMem(0x557, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x5510);
        EXPECT(gbc.pc(), 0x559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02E8
        gbc.setState(0x80af, 0x7ed4, 0xac70, 0x326a, 0x6be0, 0x68e1, 0x1, 0x0);
        gbc.writeMem(0x80af, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7ed4);
        EXPECT(gbc.pc(), 0x80b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80af), 0xcb);
        EXPECT(gbc.readMem(0x80b0), 0x6d);
        // CB 6D 02E9
        gbc.setState(0x80c, 0xe097, 0xeb60, 0xdc16, 0xb875, 0xd347, 0x1, 0x0);
        gbc.writeMem(0x80c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe097);
        EXPECT(gbc.pc(), 0x80e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02EA
        gbc.setState(0x5b6f, 0x2f36, 0xf4c0, 0xbbdd, 0xeace, 0x33f8, 0x0, 0x1);
        gbc.writeMem(0x5b6f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2f36);
        EXPECT(gbc.pc(), 0x5b71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02EB
        gbc.setState(0x9acb, 0xacb6, 0xf0, 0xb72, 0x2a8, 0xa609, 0x1, 0x0);
        gbc.writeMem(0x9acb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xacb6);
        EXPECT(gbc.pc(), 0x9acd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9acb), 0xcb);
        EXPECT(gbc.readMem(0x9acc), 0x6d);
        // CB 6D 02ED
        gbc.setState(0x613c, 0x3b21, 0x7e40, 0x8041, 0x9088, 0x41bd, 0x1, 0x0);
        gbc.writeMem(0x613c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3b21);
        EXPECT(gbc.pc(), 0x613e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02EE
        gbc.setState(0x1d93, 0x1c36, 0xe3d0, 0x7045, 0x5a8c, 0xef38, 0x1, 0x1);
        gbc.writeMem(0x1d93, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1c36);
        EXPECT(gbc.pc(), 0x1d95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02EF
        gbc.setState(0x677d, 0xaa77, 0xca90, 0x667b, 0x6eb2, 0xd65b, 0x1, 0x1);
        gbc.writeMem(0x677d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xaa77);
        EXPECT(gbc.pc(), 0x677f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02F0
        gbc.setState(0xd87d, 0x47dd, 0x7000, 0x5ae8, 0x64f6, 0x565b, 0x0, 0x1);
        gbc.writeMem(0xd87d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x47dd);
        EXPECT(gbc.pc(), 0xd87f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd87d), 0xcb);
        EXPECT(gbc.readMem(0xd87e), 0x6d);
        // CB 6D 02F1
        gbc.setState(0x67a, 0x5893, 0x38d0, 0xf039, 0x9b9f, 0x5ed, 0x0, 0x1);
        gbc.writeMem(0x67a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5893);
        EXPECT(gbc.pc(), 0x67c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02F2
        gbc.setState(0x946, 0xa161, 0x2370, 0x68f8, 0x1723, 0x8f7, 0x0, 0x0);
        gbc.writeMem(0x946, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa161);
        EXPECT(gbc.pc(), 0x948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02F3
        gbc.setState(0x4110, 0x4885, 0xf1f0, 0x5cbf, 0x9fe3, 0x5ada, 0x1, 0x0);
        gbc.writeMem(0x4110, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4885);
        EXPECT(gbc.pc(), 0x4112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02F4
        gbc.setState(0x7dfa, 0x94c2, 0x4650, 0x6431, 0xb090, 0x2767, 0x0, 0x0);
        gbc.writeMem(0x7dfa, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x94c2);
        EXPECT(gbc.pc(), 0x7dfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02F5
        gbc.setState(0x655c, 0x41a0, 0xf3c0, 0x35d0, 0xb056, 0xc8bf, 0x0, 0x1);
        gbc.writeMem(0x655c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x41a0);
        EXPECT(gbc.pc(), 0x655e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02F6
        gbc.setState(0x8b1d, 0x4b9c, 0x5c40, 0x95ba, 0xeb32, 0x39cb, 0x1, 0x1);
        gbc.writeMem(0x8b1d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4b9c);
        EXPECT(gbc.pc(), 0x8b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b1d), 0xcb);
        EXPECT(gbc.readMem(0x8b1e), 0x6d);
        // CB 6D 02F7
        gbc.setState(0xd668, 0x5ec8, 0x240, 0x6a12, 0x23fa, 0xd61, 0x0, 0x0);
        gbc.writeMem(0xd668, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5ec8);
        EXPECT(gbc.pc(), 0xd66a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd668), 0xcb);
        EXPECT(gbc.readMem(0xd669), 0x6d);
        // CB 6D 02F8
        gbc.setState(0xb5c8, 0x8419, 0xd230, 0xbb3b, 0xfc8f, 0x3d0b, 0x0, 0x0);
        gbc.writeMem(0xb5c8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8419);
        EXPECT(gbc.pc(), 0xb5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5c8), 0xcb);
        EXPECT(gbc.readMem(0xb5c9), 0x6d);
        // CB 6D 02F9
        gbc.setState(0x596a, 0x5742, 0xf2d0, 0x4413, 0xdb25, 0xddee, 0x1, 0x1);
        gbc.writeMem(0x596a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5742);
        EXPECT(gbc.pc(), 0x596c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 02FB
        gbc.setState(0xbd19, 0x4bd2, 0xf680, 0x156c, 0xfb44, 0x2aa8, 0x0, 0x0);
        gbc.writeMem(0xbd19, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4bd2);
        EXPECT(gbc.pc(), 0xbd1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd19), 0xcb);
        EXPECT(gbc.readMem(0xbd1a), 0x6d);
        // CB 6D 02FC
        gbc.setState(0x55d8, 0x2cf6, 0x9bc0, 0x22a8, 0x70a7, 0x5111, 0x0, 0x1);
        gbc.writeMem(0x55d8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2cf6);
        EXPECT(gbc.pc(), 0x55da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 02FD
        gbc.setState(0xd9b2, 0xe5c5, 0x7010, 0x9e46, 0xf524, 0x95d1, 0x1, 0x1);
        gbc.writeMem(0xd9b2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe5c5);
        EXPECT(gbc.pc(), 0xd9b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b2), 0xcb);
        EXPECT(gbc.readMem(0xd9b3), 0x6d);
        // CB 6D 02FE
        gbc.setState(0x8fd0, 0x5110, 0xe90, 0xb679, 0x3900, 0x409f, 0x0, 0x0);
        gbc.writeMem(0x8fd0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x5110);
        EXPECT(gbc.pc(), 0x8fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fd0), 0xcb);
        EXPECT(gbc.readMem(0x8fd1), 0x6d);
        // CB 6D 02FF
        gbc.setState(0x7110, 0x2ff2, 0x4fb0, 0xc3ed, 0xc9ab, 0x62b9, 0x1, 0x1);
        gbc.writeMem(0x7110, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2ff2);
        EXPECT(gbc.pc(), 0x7112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0300
        gbc.setState(0x403f, 0xdde9, 0x2680, 0x1f88, 0xbcd9, 0x4980, 0x0, 0x0);
        gbc.writeMem(0x403f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xdde9);
        EXPECT(gbc.pc(), 0x4041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0301
        gbc.setState(0xe1a7, 0x91db, 0x1140, 0x32f7, 0xf9e2, 0x3210, 0x0, 0x0);
        gbc.writeMem(0xe1a7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x91db);
        EXPECT(gbc.pc(), 0xe1a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1a7), 0xcb);
        EXPECT(gbc.readMem(0xe1a8), 0x6d);
        // CB 6D 0302
        gbc.setState(0x7868, 0x26fd, 0x6a20, 0x1c8a, 0x1a6a, 0xc901, 0x0, 0x1);
        gbc.writeMem(0x7868, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x26fd);
        EXPECT(gbc.pc(), 0x786a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0303
        gbc.setState(0x5c1c, 0x5b4f, 0xc9b0, 0x3fff, 0xfca, 0x2c94, 0x0, 0x1);
        gbc.writeMem(0x5c1c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5b4f);
        EXPECT(gbc.pc(), 0x5c1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0305
        gbc.setState(0xbd78, 0xc0cc, 0x9cc0, 0x27e5, 0x37bd, 0x3f0, 0x1, 0x0);
        gbc.writeMem(0xbd78, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc0cc);
        EXPECT(gbc.pc(), 0xbd7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd78), 0xcb);
        EXPECT(gbc.readMem(0xbd79), 0x6d);
        // CB 6D 0306
        gbc.setState(0xe344, 0xdbfd, 0x80f0, 0x780a, 0x5326, 0x270c, 0x1, 0x1);
        gbc.writeMem(0xe344, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xdbfd);
        EXPECT(gbc.pc(), 0xe346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe344), 0xcb);
        EXPECT(gbc.readMem(0xe345), 0x6d);
        // CB 6D 0307
        gbc.setState(0x7b73, 0xc5d6, 0xf7f0, 0x2403, 0x678e, 0x97c3, 0x1, 0x0);
        gbc.writeMem(0x7b73, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc5d6);
        EXPECT(gbc.pc(), 0x7b75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0308
        gbc.setState(0xa830, 0x8729, 0x4350, 0xf0f6, 0x6a52, 0x5267, 0x0, 0x1);
        gbc.writeMem(0xa830, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8729);
        EXPECT(gbc.pc(), 0xa832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa830), 0xcb);
        EXPECT(gbc.readMem(0xa831), 0x6d);
        // CB 6D 0309
        gbc.setState(0x86a6, 0xf7a1, 0x1580, 0x92aa, 0x1b03, 0xb74b, 0x0, 0x1);
        gbc.writeMem(0x86a6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf7a1);
        EXPECT(gbc.pc(), 0x86a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a6), 0xcb);
        EXPECT(gbc.readMem(0x86a7), 0x6d);
        // CB 6D 030A
        gbc.setState(0x87c0, 0x3e59, 0x49a0, 0xae0e, 0x646f, 0x48b9, 0x0, 0x1);
        gbc.writeMem(0x87c0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3e59);
        EXPECT(gbc.pc(), 0x87c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c0), 0xcb);
        EXPECT(gbc.readMem(0x87c1), 0x6d);
        // CB 6D 030B
        gbc.setState(0x309b, 0x1735, 0x9d50, 0xee17, 0x3325, 0xed6c, 0x1, 0x0);
        gbc.writeMem(0x309b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1735);
        EXPECT(gbc.pc(), 0x309d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 030C
        gbc.setState(0x3049, 0x9350, 0xff60, 0x57c9, 0x4f1f, 0x659b, 0x1, 0x0);
        gbc.writeMem(0x3049, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9350);
        EXPECT(gbc.pc(), 0x304b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 030D
        gbc.setState(0x3b26, 0x8247, 0xe80, 0x276a, 0xd39f, 0xca27, 0x0, 0x1);
        gbc.writeMem(0x3b26, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8247);
        EXPECT(gbc.pc(), 0x3b28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 030E
        gbc.setState(0x5541, 0x2fcf, 0xebe0, 0x40a5, 0x8cc, 0x8072, 0x1, 0x1);
        gbc.writeMem(0x5541, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2fcf);
        EXPECT(gbc.pc(), 0x5543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 030F
        gbc.setState(0xcc78, 0x8205, 0xd40, 0x2261, 0x822c, 0x9047, 0x0, 0x0);
        gbc.writeMem(0xcc78, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8205);
        EXPECT(gbc.pc(), 0xcc7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc78), 0xcb);
        EXPECT(gbc.readMem(0xcc79), 0x6d);
        // CB 6D 0310
        gbc.setState(0xc69f, 0x76a2, 0x6110, 0xb99e, 0xf7f5, 0x1f0f, 0x0, 0x1);
        gbc.writeMem(0xc69f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x76a2);
        EXPECT(gbc.pc(), 0xc6a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc69f), 0xcb);
        EXPECT(gbc.readMem(0xc6a0), 0x6d);
        // CB 6D 0311
        gbc.setState(0x60f1, 0x87d6, 0xab60, 0x5f50, 0x697a, 0x951b, 0x0, 0x0);
        gbc.writeMem(0x60f1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x87d6);
        EXPECT(gbc.pc(), 0x60f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0312
        gbc.setState(0x8687, 0x1ec7, 0x2880, 0x4432, 0xb392, 0xee4d, 0x0, 0x1);
        gbc.writeMem(0x8687, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1ec7);
        EXPECT(gbc.pc(), 0x8689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8687), 0xcb);
        EXPECT(gbc.readMem(0x8688), 0x6d);
        // CB 6D 0313
        gbc.setState(0x4fbb, 0x74bd, 0x26b0, 0xbd39, 0x6e74, 0x549a, 0x0, 0x0);
        gbc.writeMem(0x4fbb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x74bd);
        EXPECT(gbc.pc(), 0x4fbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0314
        gbc.setState(0xce1f, 0x98e4, 0x4ca0, 0x19, 0x2f15, 0x6efb, 0x0, 0x0);
        gbc.writeMem(0xce1f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x98e4);
        EXPECT(gbc.pc(), 0xce21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce1f), 0xcb);
        EXPECT(gbc.readMem(0xce20), 0x6d);
        // CB 6D 0315
        gbc.setState(0xe3da, 0xcce5, 0x860, 0x1787, 0x6ca9, 0x803c, 0x1, 0x0);
        gbc.writeMem(0xe3da, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xcce5);
        EXPECT(gbc.pc(), 0xe3dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3da), 0xcb);
        EXPECT(gbc.readMem(0xe3db), 0x6d);
        // CB 6D 0316
        gbc.setState(0xdc7f, 0xee85, 0x41e0, 0xb59a, 0x2d9d, 0xdf36, 0x0, 0x1);
        gbc.writeMem(0xdc7f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xee85);
        EXPECT(gbc.pc(), 0xdc81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc7f), 0xcb);
        EXPECT(gbc.readMem(0xdc80), 0x6d);
        // CB 6D 0317
        gbc.setState(0x667e, 0x643b, 0xc140, 0x10ca, 0xfba8, 0x11, 0x0, 0x0);
        gbc.writeMem(0x667e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x643b);
        EXPECT(gbc.pc(), 0x6680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0318
        gbc.setState(0xc782, 0x474d, 0x2aa0, 0xc996, 0xdbbe, 0xc6ca, 0x0, 0x1);
        gbc.writeMem(0xc782, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x474d);
        EXPECT(gbc.pc(), 0xc784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc782), 0xcb);
        EXPECT(gbc.readMem(0xc783), 0x6d);
        // CB 6D 0319
        gbc.setState(0xeb5a, 0x93ba, 0xf1b0, 0x6218, 0x50fd, 0x5b3a, 0x0, 0x0);
        gbc.writeMem(0xeb5a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x93ba);
        EXPECT(gbc.pc(), 0xeb5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb5a), 0xcb);
        EXPECT(gbc.readMem(0xeb5b), 0x6d);
        // CB 6D 031A
        gbc.setState(0x9b72, 0x44d3, 0x1740, 0x2736, 0xcaf9, 0xf246, 0x0, 0x1);
        gbc.writeMem(0x9b72, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x44d3);
        EXPECT(gbc.pc(), 0x9b74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b72), 0xcb);
        EXPECT(gbc.readMem(0x9b73), 0x6d);
        // CB 6D 031B
        gbc.setState(0x51d4, 0x4ca3, 0x5870, 0x80c3, 0x7347, 0xb557, 0x1, 0x0);
        gbc.writeMem(0x51d4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4ca3);
        EXPECT(gbc.pc(), 0x51d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 031C
        gbc.setState(0x8428, 0x1620, 0xcf30, 0xab54, 0x1049, 0xb9a7, 0x0, 0x0);
        gbc.writeMem(0x8428, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1620);
        EXPECT(gbc.pc(), 0x842a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8428), 0xcb);
        EXPECT(gbc.readMem(0x8429), 0x6d);
        // CB 6D 031D
        gbc.setState(0xb29, 0x69b5, 0xad80, 0x978d, 0xbeb3, 0x314b, 0x1, 0x1);
        gbc.writeMem(0xb29, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x69b5);
        EXPECT(gbc.pc(), 0xb2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 031E
        gbc.setState(0x2850, 0xa2c2, 0x53b0, 0x121f, 0xcbf6, 0x9cc7, 0x1, 0x0);
        gbc.writeMem(0x2850, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa2c2);
        EXPECT(gbc.pc(), 0x2852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 031F
        gbc.setState(0xa7f6, 0xba17, 0xe760, 0x181e, 0xc952, 0x810f, 0x0, 0x0);
        gbc.writeMem(0xa7f6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xba17);
        EXPECT(gbc.pc(), 0xa7f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7f6), 0xcb);
        EXPECT(gbc.readMem(0xa7f7), 0x6d);
        // CB 6D 0320
        gbc.setState(0x82b7, 0x56c5, 0x7d10, 0x8d2a, 0xbc56, 0x3bde, 0x0, 0x0);
        gbc.writeMem(0x82b7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x56c5);
        EXPECT(gbc.pc(), 0x82b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b7), 0xcb);
        EXPECT(gbc.readMem(0x82b8), 0x6d);
        // CB 6D 0321
        gbc.setState(0x80d4, 0xa21e, 0x3330, 0xcac4, 0x89bd, 0xd891, 0x1, 0x0);
        gbc.writeMem(0x80d4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa21e);
        EXPECT(gbc.pc(), 0x80d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d4), 0xcb);
        EXPECT(gbc.readMem(0x80d5), 0x6d);
        // CB 6D 0322
        gbc.setState(0xd017, 0xec31, 0x7e40, 0x1143, 0x123a, 0xbb87, 0x1, 0x1);
        gbc.writeMem(0xd017, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xec31);
        EXPECT(gbc.pc(), 0xd019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd017), 0xcb);
        EXPECT(gbc.readMem(0xd018), 0x6d);
        // CB 6D 0323
        gbc.setState(0xc553, 0x3540, 0x0, 0xffad, 0x497d, 0x18d5, 0x1, 0x1);
        gbc.writeMem(0xc553, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3540);
        EXPECT(gbc.pc(), 0xc555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc553), 0xcb);
        EXPECT(gbc.readMem(0xc554), 0x6d);
        // CB 6D 0324
        gbc.setState(0x2e05, 0x88c0, 0xe120, 0x9957, 0x9c42, 0xae89, 0x0, 0x0);
        gbc.writeMem(0x2e05, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x88c0);
        EXPECT(gbc.pc(), 0x2e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0325
        gbc.setState(0xe81b, 0x4903, 0xbc70, 0xf55a, 0x319c, 0x2ef, 0x0, 0x0);
        gbc.writeMem(0xe81b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4903);
        EXPECT(gbc.pc(), 0xe81d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe81b), 0xcb);
        EXPECT(gbc.readMem(0xe81c), 0x6d);
        // CB 6D 0326
        gbc.setState(0x3da8, 0x8853, 0xf6b0, 0xf35e, 0x2a5f, 0xb220, 0x0, 0x1);
        gbc.writeMem(0x3da8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8853);
        EXPECT(gbc.pc(), 0x3daa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0327
        gbc.setState(0x7f7a, 0x7b1, 0x7c50, 0x3895, 0xd924, 0xfa48, 0x1, 0x0);
        gbc.writeMem(0x7f7a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7b1);
        EXPECT(gbc.pc(), 0x7f7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0328
        gbc.setState(0xa834, 0xb368, 0x7db0, 0x83d3, 0xebe, 0x80df, 0x1, 0x0);
        gbc.writeMem(0xa834, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb368);
        EXPECT(gbc.pc(), 0xa836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa834), 0xcb);
        EXPECT(gbc.readMem(0xa835), 0x6d);
        // CB 6D 0329
        gbc.setState(0x6687, 0xe7fb, 0xbca0, 0xbc3c, 0x50, 0xf284, 0x1, 0x0);
        gbc.writeMem(0x6687, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe7fb);
        EXPECT(gbc.pc(), 0x6689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 032A
        gbc.setState(0xa1ff, 0x12ac, 0x3910, 0x7a7c, 0xf772, 0xd5ee, 0x1, 0x0);
        gbc.writeMem(0xa1ff, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x12ac);
        EXPECT(gbc.pc(), 0xa201);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ff), 0xcb);
        EXPECT(gbc.readMem(0xa200), 0x6d);
        // CB 6D 032B
        gbc.setState(0x6adb, 0x159, 0xe7c0, 0x304, 0xee7e, 0xb54, 0x0, 0x0);
        gbc.writeMem(0x6adb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x159);
        EXPECT(gbc.pc(), 0x6add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 032C
        gbc.setState(0x1c71, 0x81f5, 0x2a80, 0x314d, 0x7e61, 0xd24b, 0x1, 0x1);
        gbc.writeMem(0x1c71, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x81f5);
        EXPECT(gbc.pc(), 0x1c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 032D
        gbc.setState(0xc019, 0x8672, 0x3af0, 0xb0e5, 0x8a8e, 0x209c, 0x1, 0x0);
        gbc.writeMem(0xc019, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8672);
        EXPECT(gbc.pc(), 0xc01b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc019), 0xcb);
        EXPECT(gbc.readMem(0xc01a), 0x6d);
        // CB 6D 032E
        gbc.setState(0x1c17, 0xd6f1, 0x2e90, 0x88d0, 0x5519, 0x4e47, 0x0, 0x1);
        gbc.writeMem(0x1c17, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd6f1);
        EXPECT(gbc.pc(), 0x1c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 032F
        gbc.setState(0xafff, 0x22d1, 0x4270, 0x6912, 0x6f1d, 0xa406, 0x0, 0x1);
        gbc.writeMem(0xafff, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x22d1);
        EXPECT(gbc.pc(), 0xb001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafff), 0xcb);
        EXPECT(gbc.readMem(0xb000), 0x6d);
        // CB 6D 0330
        gbc.setState(0xaf6a, 0xd050, 0x4db0, 0xe329, 0xf3f9, 0xdbbd, 0x1, 0x0);
        gbc.writeMem(0xaf6a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd050);
        EXPECT(gbc.pc(), 0xaf6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf6a), 0xcb);
        EXPECT(gbc.readMem(0xaf6b), 0x6d);
        // CB 6D 0331
        gbc.setState(0x6cee, 0xb2a4, 0xc6f0, 0xe9a0, 0x8912, 0x82f5, 0x1, 0x1);
        gbc.writeMem(0x6cee, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb2a4);
        EXPECT(gbc.pc(), 0x6cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0332
        gbc.setState(0xb925, 0xe989, 0x1db0, 0x1a04, 0xc51, 0x8971, 0x1, 0x1);
        gbc.writeMem(0xb925, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe989);
        EXPECT(gbc.pc(), 0xb927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb925), 0xcb);
        EXPECT(gbc.readMem(0xb926), 0x6d);
        // CB 6D 0333
        gbc.setState(0x1cb, 0x55fe, 0xb0a0, 0x62bf, 0xfa3a, 0x93ae, 0x0, 0x0);
        gbc.writeMem(0x1cb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x55fe);
        EXPECT(gbc.pc(), 0x1cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0334
        gbc.setState(0x5abc, 0xd0c6, 0xbd50, 0xe742, 0x9300, 0x674, 0x1, 0x0);
        gbc.writeMem(0x5abc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd0c6);
        EXPECT(gbc.pc(), 0x5abe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0335
        gbc.setState(0x6704, 0x29ef, 0x80c0, 0x8912, 0x73a3, 0x86a8, 0x1, 0x0);
        gbc.writeMem(0x6704, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x29ef);
        EXPECT(gbc.pc(), 0x6706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0336
        gbc.setState(0xdbe7, 0x600a, 0xb170, 0x9159, 0xe52a, 0xeee5, 0x0, 0x0);
        gbc.writeMem(0xdbe7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x600a);
        EXPECT(gbc.pc(), 0xdbe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe7), 0xcb);
        EXPECT(gbc.readMem(0xdbe8), 0x6d);
        // CB 6D 0337
        gbc.setState(0x9d77, 0xd80a, 0x3c20, 0x97e9, 0x95c2, 0xfe36, 0x0, 0x0);
        gbc.writeMem(0x9d77, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd80a);
        EXPECT(gbc.pc(), 0x9d79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d77), 0xcb);
        EXPECT(gbc.readMem(0x9d78), 0x6d);
        // CB 6D 0339
        gbc.setState(0x5b29, 0x3e12, 0x54b0, 0x69bf, 0xd438, 0x7762, 0x0, 0x0);
        gbc.writeMem(0x5b29, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3e12);
        EXPECT(gbc.pc(), 0x5b2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 033A
        gbc.setState(0x49f9, 0x653b, 0x32f0, 0xac5, 0xcf95, 0xbff5, 0x0, 0x1);
        gbc.writeMem(0x49f9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x653b);
        EXPECT(gbc.pc(), 0x49fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 033B
        gbc.setState(0x62bc, 0x3bd7, 0x7350, 0x8315, 0x874c, 0x7976, 0x1, 0x0);
        gbc.writeMem(0x62bc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3bd7);
        EXPECT(gbc.pc(), 0x62be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 033C
        gbc.setState(0x2c9f, 0x882, 0x5160, 0x76fe, 0x9be6, 0x935f, 0x1, 0x1);
        gbc.writeMem(0x2c9f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x882);
        EXPECT(gbc.pc(), 0x2ca1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 033D
        gbc.setState(0x4472, 0x7083, 0xefa0, 0x8037, 0x2c30, 0x44ff, 0x0, 0x1);
        gbc.writeMem(0x4472, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x7083);
        EXPECT(gbc.pc(), 0x4474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 033E
        gbc.setState(0x2974, 0xc5ec, 0xe410, 0xfec0, 0x1ae, 0x6262, 0x0, 0x1);
        gbc.writeMem(0x2974, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc5ec);
        EXPECT(gbc.pc(), 0x2976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 033F
        gbc.setState(0x3204, 0x47fd, 0xcec0, 0x1777, 0x4357, 0x76b5, 0x0, 0x0);
        gbc.writeMem(0x3204, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x47fd);
        EXPECT(gbc.pc(), 0x3206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0340
        gbc.setState(0x6ca1, 0x2f08, 0x1a90, 0x7f90, 0x9e16, 0xe9ff, 0x1, 0x0);
        gbc.writeMem(0x6ca1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2f08);
        EXPECT(gbc.pc(), 0x6ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0341
        gbc.setState(0x3d40, 0xf84f, 0xff20, 0x1c4e, 0xa14d, 0xd442, 0x1, 0x0);
        gbc.writeMem(0x3d40, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf84f);
        EXPECT(gbc.pc(), 0x3d42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0342
        gbc.setState(0xc863, 0xf9f9, 0xfb20, 0x4165, 0x90ec, 0xc0e, 0x1, 0x0);
        gbc.writeMem(0xc863, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf9f9);
        EXPECT(gbc.pc(), 0xc865);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc863), 0xcb);
        EXPECT(gbc.readMem(0xc864), 0x6d);
        // CB 6D 0343
        gbc.setState(0x53b9, 0xfae8, 0xa370, 0x78e2, 0x70d4, 0xa2a2, 0x1, 0x0);
        gbc.writeMem(0x53b9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfae8);
        EXPECT(gbc.pc(), 0x53bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0344
        gbc.setState(0x93e1, 0x7d82, 0x7f90, 0x21b0, 0xcd34, 0xa1ad, 0x1, 0x0);
        gbc.writeMem(0x93e1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7d82);
        EXPECT(gbc.pc(), 0x93e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e1), 0xcb);
        EXPECT(gbc.readMem(0x93e2), 0x6d);
        // CB 6D 0345
        gbc.setState(0xdda2, 0xaf3c, 0x4d0, 0xfc6a, 0x7617, 0x995a, 0x0, 0x1);
        gbc.writeMem(0xdda2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xaf3c);
        EXPECT(gbc.pc(), 0xdda4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdda2), 0xcb);
        EXPECT(gbc.readMem(0xdda3), 0x6d);
        // CB 6D 0346
        gbc.setState(0xdec3, 0xd29f, 0xeaa0, 0x10aa, 0x2a12, 0xd01d, 0x1, 0x0);
        gbc.writeMem(0xdec3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd29f);
        EXPECT(gbc.pc(), 0xdec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdec3), 0xcb);
        EXPECT(gbc.readMem(0xdec4), 0x6d);
        // CB 6D 0347
        gbc.setState(0x71e9, 0xab3, 0x47b0, 0x8348, 0x9281, 0x66d2, 0x0, 0x0);
        gbc.writeMem(0x71e9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xab3);
        EXPECT(gbc.pc(), 0x71eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0348
        gbc.setState(0xeff5, 0xb43e, 0x1b50, 0xa0b0, 0xea12, 0xf405, 0x1, 0x0);
        gbc.writeMem(0xeff5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb43e);
        EXPECT(gbc.pc(), 0xeff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeff5), 0xcb);
        EXPECT(gbc.readMem(0xeff6), 0x6d);
        // CB 6D 0349
        gbc.setState(0x363b, 0xba44, 0x70c0, 0x9c26, 0xe774, 0xf174, 0x1, 0x1);
        gbc.writeMem(0x363b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xba44);
        EXPECT(gbc.pc(), 0x363d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 034A
        gbc.setState(0xaec9, 0xfed7, 0x8700, 0x50e4, 0x1154, 0xf084, 0x0, 0x1);
        gbc.writeMem(0xaec9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xfed7);
        EXPECT(gbc.pc(), 0xaecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec9), 0xcb);
        EXPECT(gbc.readMem(0xaeca), 0x6d);
        // CB 6D 034C
        gbc.setState(0xdabb, 0x721, 0xf7a0, 0xb02c, 0x4b36, 0xd205, 0x0, 0x0);
        gbc.writeMem(0xdabb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x721);
        EXPECT(gbc.pc(), 0xdabd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdabb), 0xcb);
        EXPECT(gbc.readMem(0xdabc), 0x6d);
        // CB 6D 034D
        gbc.setState(0x8b44, 0xdb44, 0x3900, 0x8c77, 0x3817, 0x5630, 0x0, 0x0);
        gbc.writeMem(0x8b44, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xdb44);
        EXPECT(gbc.pc(), 0x8b46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b44), 0xcb);
        EXPECT(gbc.readMem(0x8b45), 0x6d);
        // CB 6D 034E
        gbc.setState(0x1baa, 0x85e7, 0x11b0, 0x22d, 0x2fa4, 0xf348, 0x0, 0x1);
        gbc.writeMem(0x1baa, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x85e7);
        EXPECT(gbc.pc(), 0x1bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 034F
        gbc.setState(0x8356, 0xf087, 0xd170, 0xbb28, 0xa234, 0x98db, 0x0, 0x1);
        gbc.writeMem(0x8356, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf087);
        EXPECT(gbc.pc(), 0x8358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8356), 0xcb);
        EXPECT(gbc.readMem(0x8357), 0x6d);
        // CB 6D 0350
        gbc.setState(0x6489, 0x11a9, 0x5bd0, 0x6728, 0x92a3, 0x53d1, 0x0, 0x1);
        gbc.writeMem(0x6489, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x11a9);
        EXPECT(gbc.pc(), 0x648b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0351
        gbc.setState(0x74bd, 0x5e9a, 0x1b0, 0xab5b, 0x707f, 0xdec5, 0x0, 0x1);
        gbc.writeMem(0x74bd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5e9a);
        EXPECT(gbc.pc(), 0x74bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0352
        gbc.setState(0x6358, 0x1ec0, 0x9e40, 0xd0d6, 0x578f, 0x8072, 0x1, 0x1);
        gbc.writeMem(0x6358, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1ec0);
        EXPECT(gbc.pc(), 0x635a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0353
        gbc.setState(0x5d60, 0x9737, 0xc2a0, 0xc68b, 0xd7a0, 0xb20, 0x0, 0x1);
        gbc.writeMem(0x5d60, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9737);
        EXPECT(gbc.pc(), 0x5d62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0354
        gbc.setState(0xc49c, 0x58d5, 0x30c0, 0xe8b1, 0xa413, 0xc45b, 0x0, 0x1);
        gbc.writeMem(0xc49c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x58d5);
        EXPECT(gbc.pc(), 0xc49e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc49c), 0xcb);
        EXPECT(gbc.readMem(0xc49d), 0x6d);
        // CB 6D 0355
        gbc.setState(0x6a6c, 0xbf1a, 0x4350, 0x64c4, 0x5900, 0x1d5e, 0x1, 0x0);
        gbc.writeMem(0x6a6c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbf1a);
        EXPECT(gbc.pc(), 0x6a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0356
        gbc.setState(0x3d1, 0xee10, 0x80b0, 0x6c7, 0xb36f, 0xeabe, 0x0, 0x0);
        gbc.writeMem(0x3d1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xee10);
        EXPECT(gbc.pc(), 0x3d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0357
        gbc.setState(0xa1ef, 0xba7, 0xb330, 0x1466, 0xb5c2, 0x5d40, 0x0, 0x1);
        gbc.writeMem(0xa1ef, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xba7);
        EXPECT(gbc.pc(), 0xa1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ef), 0xcb);
        EXPECT(gbc.readMem(0xa1f0), 0x6d);
        // CB 6D 0358
        gbc.setState(0x3f77, 0x4902, 0x73c0, 0x5754, 0xb8f0, 0xc2b4, 0x1, 0x0);
        gbc.writeMem(0x3f77, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4902);
        EXPECT(gbc.pc(), 0x3f79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0359
        gbc.setState(0xacc0, 0xf60c, 0x8470, 0x7aad, 0x120a, 0x1d9d, 0x1, 0x1);
        gbc.writeMem(0xacc0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf60c);
        EXPECT(gbc.pc(), 0xacc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc0), 0xcb);
        EXPECT(gbc.readMem(0xacc1), 0x6d);
        // CB 6D 035A
        gbc.setState(0xe2b5, 0x8b53, 0x2d60, 0xa636, 0xac8f, 0xa683, 0x0, 0x0);
        gbc.writeMem(0xe2b5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8b53);
        EXPECT(gbc.pc(), 0xe2b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2b5), 0xcb);
        EXPECT(gbc.readMem(0xe2b6), 0x6d);
        // CB 6D 035B
        gbc.setState(0x163, 0x17d1, 0xd160, 0xc2b7, 0x409e, 0xf593, 0x1, 0x1);
        gbc.writeMem(0x163, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x17d1);
        EXPECT(gbc.pc(), 0x165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 035C
        gbc.setState(0xc775, 0x309a, 0x8d50, 0x7418, 0x24a7, 0xd66c, 0x0, 0x0);
        gbc.writeMem(0xc775, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x309a);
        EXPECT(gbc.pc(), 0xc777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc775), 0xcb);
        EXPECT(gbc.readMem(0xc776), 0x6d);
        // CB 6D 035D
        gbc.setState(0x86a4, 0x8c4e, 0x9d40, 0x9e89, 0xbf69, 0x2bde, 0x1, 0x0);
        gbc.writeMem(0x86a4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8c4e);
        EXPECT(gbc.pc(), 0x86a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a4), 0xcb);
        EXPECT(gbc.readMem(0x86a5), 0x6d);
        // CB 6D 035E
        gbc.setState(0x8564, 0x16b0, 0xf100, 0xa4e5, 0x9f68, 0xdf2a, 0x0, 0x1);
        gbc.writeMem(0x8564, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x16b0);
        EXPECT(gbc.pc(), 0x8566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8564), 0xcb);
        EXPECT(gbc.readMem(0x8565), 0x6d);
        // CB 6D 035F
        gbc.setState(0x7535, 0x3544, 0xe540, 0xdb11, 0xbb74, 0x419b, 0x0, 0x0);
        gbc.writeMem(0x7535, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3544);
        EXPECT(gbc.pc(), 0x7537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0360
        gbc.setState(0x5df9, 0x3c11, 0xed40, 0xb274, 0xfb1a, 0x70ea, 0x0, 0x1);
        gbc.writeMem(0x5df9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3c11);
        EXPECT(gbc.pc(), 0x5dfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0361
        gbc.setState(0x3bb7, 0xf70a, 0x4ee0, 0x86c7, 0xd00d, 0x6a67, 0x1, 0x1);
        gbc.writeMem(0x3bb7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf70a);
        EXPECT(gbc.pc(), 0x3bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0362
        gbc.setState(0x82b8, 0xb041, 0xd210, 0x86d8, 0x886a, 0xe1c8, 0x1, 0x1);
        gbc.writeMem(0x82b8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb041);
        EXPECT(gbc.pc(), 0x82ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b8), 0xcb);
        EXPECT(gbc.readMem(0x82b9), 0x6d);
        // CB 6D 0363
        gbc.setState(0xdcb5, 0x763, 0x1bf0, 0x1e17, 0xe552, 0x637d, 0x0, 0x1);
        gbc.writeMem(0xdcb5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x763);
        EXPECT(gbc.pc(), 0xdcb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb5), 0xcb);
        EXPECT(gbc.readMem(0xdcb6), 0x6d);
        // CB 6D 0364
        gbc.setState(0x446, 0x7474, 0xcc0, 0xcf8d, 0xd6bd, 0x8ea9, 0x1, 0x0);
        gbc.writeMem(0x446, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7474);
        EXPECT(gbc.pc(), 0x448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0365
        gbc.setState(0xb357, 0xb193, 0xf9f0, 0x58ef, 0x5cd1, 0xa6f5, 0x1, 0x1);
        gbc.writeMem(0xb357, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb193);
        EXPECT(gbc.pc(), 0xb359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb357), 0xcb);
        EXPECT(gbc.readMem(0xb358), 0x6d);
        // CB 6D 0366
        gbc.setState(0x5f0d, 0xe2e2, 0xa630, 0x7bf1, 0xfb83, 0xc94, 0x1, 0x1);
        gbc.writeMem(0x5f0d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe2e2);
        EXPECT(gbc.pc(), 0x5f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0367
        gbc.setState(0x11b1, 0x8894, 0x5f20, 0xa9d4, 0xeb26, 0xccf9, 0x0, 0x0);
        gbc.writeMem(0x11b1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8894);
        EXPECT(gbc.pc(), 0x11b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0368
        gbc.setState(0x613f, 0xb83b, 0xfab0, 0x77f2, 0xae23, 0xb9c8, 0x1, 0x1);
        gbc.writeMem(0x613f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb83b);
        EXPECT(gbc.pc(), 0x6141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0369
        gbc.setState(0xce75, 0x28bd, 0xc890, 0xd865, 0xc764, 0xa908, 0x1, 0x1);
        gbc.writeMem(0xce75, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x28bd);
        EXPECT(gbc.pc(), 0xce77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce75), 0xcb);
        EXPECT(gbc.readMem(0xce76), 0x6d);
        // CB 6D 036A
        gbc.setState(0x4be6, 0x91e5, 0x8c70, 0x703f, 0x60b0, 0x7a36, 0x1, 0x0);
        gbc.writeMem(0x4be6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x91e5);
        EXPECT(gbc.pc(), 0x4be8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 036B
        gbc.setState(0x898e, 0x9967, 0xd1d0, 0x45dd, 0xaec, 0x415b, 0x0, 0x1);
        gbc.writeMem(0x898e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9967);
        EXPECT(gbc.pc(), 0x8990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x898e), 0xcb);
        EXPECT(gbc.readMem(0x898f), 0x6d);
        // CB 6D 036C
        gbc.setState(0x2a5c, 0x5308, 0x67a0, 0xd62f, 0xd379, 0x792a, 0x1, 0x1);
        gbc.writeMem(0x2a5c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5308);
        EXPECT(gbc.pc(), 0x2a5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 036D
        gbc.setState(0xa7f0, 0x1ae, 0x5e60, 0x8e29, 0x4ee4, 0x86da, 0x1, 0x0);
        gbc.writeMem(0xa7f0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1ae);
        EXPECT(gbc.pc(), 0xa7f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7f0), 0xcb);
        EXPECT(gbc.readMem(0xa7f1), 0x6d);
        // CB 6D 036E
        gbc.setState(0xbc59, 0x95b0, 0x7220, 0xf45d, 0xb3f8, 0x7da4, 0x0, 0x0);
        gbc.writeMem(0xbc59, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x95b0);
        EXPECT(gbc.pc(), 0xbc5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc59), 0xcb);
        EXPECT(gbc.readMem(0xbc5a), 0x6d);
        // CB 6D 0370
        gbc.setState(0xb422, 0x7fd4, 0x4c90, 0x3a68, 0xd4a, 0x5939, 0x1, 0x0);
        gbc.writeMem(0xb422, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7fd4);
        EXPECT(gbc.pc(), 0xb424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb422), 0xcb);
        EXPECT(gbc.readMem(0xb423), 0x6d);
        // CB 6D 0371
        gbc.setState(0x721b, 0x6e2c, 0xf960, 0x3161, 0x379c, 0x8cd4, 0x0, 0x0);
        gbc.writeMem(0x721b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6e2c);
        EXPECT(gbc.pc(), 0x721d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0372
        gbc.setState(0x9eee, 0x6230, 0x54e0, 0x38d1, 0xf64a, 0x79d4, 0x1, 0x0);
        gbc.writeMem(0x9eee, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6230);
        EXPECT(gbc.pc(), 0x9ef0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eee), 0xcb);
        EXPECT(gbc.readMem(0x9eef), 0x6d);
        // CB 6D 0373
        gbc.setState(0xb3bb, 0x1189, 0xf900, 0xf2e6, 0x3225, 0x2f3, 0x1, 0x0);
        gbc.writeMem(0xb3bb, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1189);
        EXPECT(gbc.pc(), 0xb3bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3bb), 0xcb);
        EXPECT(gbc.readMem(0xb3bc), 0x6d);
        // CB 6D 0374
        gbc.setState(0x5e7a, 0x8f3, 0xd1d0, 0x3c1c, 0xd66f, 0x2f77, 0x1, 0x0);
        gbc.writeMem(0x5e7a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8f3);
        EXPECT(gbc.pc(), 0x5e7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0375
        gbc.setState(0xf1f, 0xb555, 0x2fe0, 0xe75, 0x5b64, 0x2485, 0x1, 0x1);
        gbc.writeMem(0xf1f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb555);
        EXPECT(gbc.pc(), 0xf21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0376
        gbc.setState(0xdea5, 0x9d21, 0x46a0, 0xe995, 0xa020, 0x5c9d, 0x0, 0x0);
        gbc.writeMem(0xdea5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x9d21);
        EXPECT(gbc.pc(), 0xdea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea5), 0xcb);
        EXPECT(gbc.readMem(0xdea6), 0x6d);
        // CB 6D 0377
        gbc.setState(0xb42a, 0xc2d6, 0x1b20, 0x31cb, 0xa97f, 0x90a6, 0x1, 0x1);
        gbc.writeMem(0xb42a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc2d6);
        EXPECT(gbc.pc(), 0xb42c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb42a), 0xcb);
        EXPECT(gbc.readMem(0xb42b), 0x6d);
        // CB 6D 0378
        gbc.setState(0x2c7e, 0xbb17, 0xecf0, 0xc27e, 0x6bcd, 0x36f8, 0x1, 0x0);
        gbc.writeMem(0x2c7e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbb17);
        EXPECT(gbc.pc(), 0x2c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0379
        gbc.setState(0x6750, 0x66dc, 0x6710, 0xcd8e, 0xf454, 0x6484, 0x1, 0x0);
        gbc.writeMem(0x6750, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x66dc);
        EXPECT(gbc.pc(), 0x6752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 037A
        gbc.setState(0xa89c, 0x6814, 0x4bf0, 0x9d1b, 0x1dd1, 0xfbbf, 0x1, 0x0);
        gbc.writeMem(0xa89c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6814);
        EXPECT(gbc.pc(), 0xa89e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa89c), 0xcb);
        EXPECT(gbc.readMem(0xa89d), 0x6d);
        // CB 6D 037C
        gbc.setState(0x4cd3, 0x3b58, 0x9330, 0xa28e, 0x407a, 0xc32e, 0x0, 0x1);
        gbc.writeMem(0x4cd3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3b58);
        EXPECT(gbc.pc(), 0x4cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 037D
        gbc.setState(0x6ec7, 0xd9e5, 0x5fe0, 0x783a, 0xf99d, 0x22a8, 0x1, 0x1);
        gbc.writeMem(0x6ec7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd9e5);
        EXPECT(gbc.pc(), 0x6ec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 037E
        gbc.setState(0xab34, 0xd5eb, 0x2210, 0xf625, 0x9b9a, 0x3cbd, 0x0, 0x0);
        gbc.writeMem(0xab34, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd5eb);
        EXPECT(gbc.pc(), 0xab36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab34), 0xcb);
        EXPECT(gbc.readMem(0xab35), 0x6d);
        // CB 6D 037F
        gbc.setState(0x9f45, 0x7a3b, 0x8200, 0x8cbb, 0xe79a, 0xc24f, 0x0, 0x0);
        gbc.writeMem(0x9f45, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7a3b);
        EXPECT(gbc.pc(), 0x9f47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f45), 0xcb);
        EXPECT(gbc.readMem(0x9f46), 0x6d);
        // CB 6D 0380
        gbc.setState(0xa7dd, 0xc1a8, 0x51c0, 0x727b, 0x3d71, 0xb69e, 0x1, 0x1);
        gbc.writeMem(0xa7dd, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc1a8);
        EXPECT(gbc.pc(), 0xa7df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7dd), 0xcb);
        EXPECT(gbc.readMem(0xa7de), 0x6d);
        // CB 6D 0381
        gbc.setState(0x5752, 0xb3b0, 0x3870, 0x7bc2, 0x5bce, 0xacaa, 0x0, 0x0);
        gbc.writeMem(0x5752, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb3b0);
        EXPECT(gbc.pc(), 0x5754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0382
        gbc.setState(0x8313, 0xafe3, 0x6410, 0xc45a, 0xd647, 0x1f97, 0x0, 0x0);
        gbc.writeMem(0x8313, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xafe3);
        EXPECT(gbc.pc(), 0x8315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8313), 0xcb);
        EXPECT(gbc.readMem(0x8314), 0x6d);
        // CB 6D 0383
        gbc.setState(0xa763, 0x38ff, 0xbbe0, 0xc837, 0x99a0, 0x58eb, 0x0, 0x1);
        gbc.writeMem(0xa763, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x38ff);
        EXPECT(gbc.pc(), 0xa765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa763), 0xcb);
        EXPECT(gbc.readMem(0xa764), 0x6d);
        // CB 6D 0384
        gbc.setState(0xea69, 0xe04f, 0x2ab0, 0x1f14, 0x3e82, 0xac56, 0x1, 0x0);
        gbc.writeMem(0xea69, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe04f);
        EXPECT(gbc.pc(), 0xea6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea69), 0xcb);
        EXPECT(gbc.readMem(0xea6a), 0x6d);
        // CB 6D 0385
        gbc.setState(0x1df7, 0x44b5, 0xa170, 0x8d2, 0x6329, 0x16dd, 0x0, 0x0);
        gbc.writeMem(0x1df7, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x44b5);
        EXPECT(gbc.pc(), 0x1df9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0386
        gbc.setState(0x9ea3, 0xc7b4, 0xfb0, 0x321c, 0x6e0c, 0xa077, 0x0, 0x1);
        gbc.writeMem(0x9ea3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc7b4);
        EXPECT(gbc.pc(), 0x9ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ea3), 0xcb);
        EXPECT(gbc.readMem(0x9ea4), 0x6d);
        // CB 6D 0387
        gbc.setState(0x379e, 0x9bf8, 0xb890, 0xaf66, 0x59c, 0xfd85, 0x1, 0x1);
        gbc.writeMem(0x379e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9bf8);
        EXPECT(gbc.pc(), 0x37a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0388
        gbc.setState(0xd114, 0xf439, 0x3ed0, 0x41c3, 0xbad, 0x982, 0x0, 0x0);
        gbc.writeMem(0xd114, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf439);
        EXPECT(gbc.pc(), 0xd116);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd114), 0xcb);
        EXPECT(gbc.readMem(0xd115), 0x6d);
        // CB 6D 038B
        gbc.setState(0x5f46, 0xcf94, 0x1560, 0xa17f, 0x4716, 0x6764, 0x0, 0x0);
        gbc.writeMem(0x5f46, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcf94);
        EXPECT(gbc.pc(), 0x5f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 038C
        gbc.setState(0x1fba, 0x7adc, 0xbee0, 0xd71c, 0x2e40, 0x47de, 0x1, 0x0);
        gbc.writeMem(0x1fba, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7adc);
        EXPECT(gbc.pc(), 0x1fbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 038D
        gbc.setState(0xb5ab, 0xff0e, 0xc130, 0x6d02, 0x64cc, 0x6c27, 0x1, 0x1);
        gbc.writeMem(0xb5ab, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xff0e);
        EXPECT(gbc.pc(), 0xb5ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ab), 0xcb);
        EXPECT(gbc.readMem(0xb5ac), 0x6d);
        // CB 6D 038E
        gbc.setState(0x7432, 0x4688, 0x5e20, 0x8340, 0x69a8, 0x2dee, 0x0, 0x1);
        gbc.writeMem(0x7432, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4688);
        EXPECT(gbc.pc(), 0x7434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 038F
        gbc.setState(0xa6e6, 0x7e52, 0xde20, 0x2b30, 0xd787, 0xf953, 0x0, 0x1);
        gbc.writeMem(0xa6e6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7e52);
        EXPECT(gbc.pc(), 0xa6e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e6), 0xcb);
        EXPECT(gbc.readMem(0xa6e7), 0x6d);
        // CB 6D 0390
        gbc.setState(0x2cc, 0x7e5, 0x5ce0, 0x3b1, 0x724, 0x31ad, 0x0, 0x1);
        gbc.writeMem(0x2cc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7e5);
        EXPECT(gbc.pc(), 0x2ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0391
        gbc.setState(0x8860, 0xc661, 0x6cf0, 0x11c2, 0x5a03, 0x1b55, 0x0, 0x0);
        gbc.writeMem(0x8860, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc661);
        EXPECT(gbc.pc(), 0x8862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8860), 0xcb);
        EXPECT(gbc.readMem(0x8861), 0x6d);
        // CB 6D 0392
        gbc.setState(0xebfc, 0xe0c7, 0xb320, 0x6307, 0xaf3c, 0x6cbc, 0x1, 0x0);
        gbc.writeMem(0xebfc, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe0c7);
        EXPECT(gbc.pc(), 0xebfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebfc), 0xcb);
        EXPECT(gbc.readMem(0xebfd), 0x6d);
        // CB 6D 0393
        gbc.setState(0xeaa6, 0x2c60, 0x6270, 0x571d, 0x2324, 0x33dd, 0x0, 0x0);
        gbc.writeMem(0xeaa6, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2c60);
        EXPECT(gbc.pc(), 0xeaa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaa6), 0xcb);
        EXPECT(gbc.readMem(0xeaa7), 0x6d);
        // CB 6D 0394
        gbc.setState(0x608c, 0x2253, 0x8880, 0x297a, 0x766d, 0x7fd5, 0x0, 0x0);
        gbc.writeMem(0x608c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2253);
        EXPECT(gbc.pc(), 0x608e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0395
        gbc.setState(0x225d, 0x35de, 0x2250, 0xfcc8, 0x285a, 0x78b1, 0x0, 0x0);
        gbc.writeMem(0x225d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x35de);
        EXPECT(gbc.pc(), 0x225f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0396
        gbc.setState(0x5422, 0x382c, 0xf6c0, 0x9b55, 0xac40, 0xd16a, 0x1, 0x0);
        gbc.writeMem(0x5422, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x382c);
        EXPECT(gbc.pc(), 0x5424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 0397
        gbc.setState(0x11c5, 0xba0c, 0xad0, 0xc833, 0x14fa, 0x3703, 0x0, 0x1);
        gbc.writeMem(0x11c5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xba0c);
        EXPECT(gbc.pc(), 0x11c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 0398
        gbc.setState(0x8d7f, 0xb209, 0x500, 0x9159, 0xdd87, 0x5425, 0x0, 0x1);
        gbc.writeMem(0x8d7f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb209);
        EXPECT(gbc.pc(), 0x8d81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7f), 0xcb);
        EXPECT(gbc.readMem(0x8d80), 0x6d);
        // CB 6D 0399
        gbc.setState(0x1f87, 0x25fe, 0xc300, 0xad29, 0x19c9, 0xe82c, 0x0, 0x1);
        gbc.writeMem(0x1f87, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x25fe);
        EXPECT(gbc.pc(), 0x1f89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 039A
        gbc.setState(0x7d9c, 0xc92e, 0x36f0, 0xfeaa, 0x4b0b, 0x2ebc, 0x1, 0x1);
        gbc.writeMem(0x7d9c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc92e);
        EXPECT(gbc.pc(), 0x7d9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 039B
        gbc.setState(0x1f5f, 0x158d, 0x1130, 0x3ff3, 0xaa06, 0x666c, 0x1, 0x1);
        gbc.writeMem(0x1f5f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x158d);
        EXPECT(gbc.pc(), 0x1f61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 039C
        gbc.setState(0xc7f0, 0xb74f, 0xf5c0, 0xabc6, 0x5e2e, 0x589d, 0x0, 0x1);
        gbc.writeMem(0xc7f0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb74f);
        EXPECT(gbc.pc(), 0xc7f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7f0), 0xcb);
        EXPECT(gbc.readMem(0xc7f1), 0x6d);
        // CB 6D 039D
        gbc.setState(0x437f, 0xa0c3, 0xd6c0, 0xe31b, 0x8a03, 0xa8e5, 0x1, 0x1);
        gbc.writeMem(0x437f, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa0c3);
        EXPECT(gbc.pc(), 0x4381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 039E
        gbc.setState(0x4901, 0x9c29, 0xfb0, 0xfb34, 0xed8, 0x820c, 0x0, 0x0);
        gbc.writeMem(0x4901, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9c29);
        EXPECT(gbc.pc(), 0x4903);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 039F
        gbc.setState(0x79ec, 0xfc9, 0x1b10, 0x1b06, 0xc996, 0xcc8c, 0x1, 0x0);
        gbc.writeMem(0x79ec, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xfc9);
        EXPECT(gbc.pc(), 0x79ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03A0
        gbc.setState(0x2b73, 0x4b78, 0xae0, 0x579b, 0x1362, 0xba1e, 0x1, 0x0);
        gbc.writeMem(0x2b73, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4b78);
        EXPECT(gbc.pc(), 0x2b75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03A1
        gbc.setState(0xc102, 0xbd1f, 0x1080, 0x2d93, 0x7adf, 0x67f8, 0x0, 0x0);
        gbc.writeMem(0xc102, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbd1f);
        EXPECT(gbc.pc(), 0xc104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc102), 0xcb);
        EXPECT(gbc.readMem(0xc103), 0x6d);
        // CB 6D 03A3
        gbc.setState(0xd91c, 0x482a, 0xc270, 0x6368, 0x757a, 0x7ec8, 0x1, 0x1);
        gbc.writeMem(0xd91c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x482a);
        EXPECT(gbc.pc(), 0xd91e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd91c), 0xcb);
        EXPECT(gbc.readMem(0xd91d), 0x6d);
        // CB 6D 03A4
        gbc.setState(0xc789, 0x7b7b, 0x48d0, 0xd7ed, 0x11da, 0x6ff2, 0x0, 0x1);
        gbc.writeMem(0xc789, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7b7b);
        EXPECT(gbc.pc(), 0xc78b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc789), 0xcb);
        EXPECT(gbc.readMem(0xc78a), 0x6d);
        // CB 6D 03A5
        gbc.setState(0x7288, 0x493a, 0x1a80, 0x7d6f, 0xb492, 0xb861, 0x1, 0x1);
        gbc.writeMem(0x7288, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x493a);
        EXPECT(gbc.pc(), 0x728a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03A6
        gbc.setState(0xbf28, 0x60a2, 0xe220, 0xa7ce, 0xe429, 0x5a7, 0x1, 0x0);
        gbc.writeMem(0xbf28, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x60a2);
        EXPECT(gbc.pc(), 0xbf2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf28), 0xcb);
        EXPECT(gbc.readMem(0xbf29), 0x6d);
        // CB 6D 03A7
        gbc.setState(0x7083, 0xa1f2, 0xf810, 0xf713, 0x879, 0xd1a1, 0x1, 0x0);
        gbc.writeMem(0x7083, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa1f2);
        EXPECT(gbc.pc(), 0x7085);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03A8
        gbc.setState(0x1e4c, 0x9d50, 0xe350, 0xb2c4, 0x6c36, 0x10bc, 0x0, 0x1);
        gbc.writeMem(0x1e4c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9d50);
        EXPECT(gbc.pc(), 0x1e4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03A9
        gbc.setState(0xa3d9, 0x4b5d, 0x4070, 0xbf6d, 0xbb3c, 0xded2, 0x0, 0x0);
        gbc.writeMem(0xa3d9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4b5d);
        EXPECT(gbc.pc(), 0xa3db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3d9), 0xcb);
        EXPECT(gbc.readMem(0xa3da), 0x6d);
        // CB 6D 03AA
        gbc.setState(0x81d0, 0xf581, 0xa320, 0xc984, 0xc838, 0xed0f, 0x1, 0x0);
        gbc.writeMem(0x81d0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf581);
        EXPECT(gbc.pc(), 0x81d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81d0), 0xcb);
        EXPECT(gbc.readMem(0x81d1), 0x6d);
        // CB 6D 03AB
        gbc.setState(0xcb33, 0xcb73, 0x6830, 0x79aa, 0x53c1, 0xfb9a, 0x0, 0x0);
        gbc.writeMem(0xcb33, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xcb73);
        EXPECT(gbc.pc(), 0xcb35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb33), 0xcb);
        EXPECT(gbc.readMem(0xcb34), 0x6d);
        // CB 6D 03AC
        gbc.setState(0x4fe8, 0xf29c, 0xc290, 0xe4b, 0xc879, 0x74a9, 0x0, 0x0);
        gbc.writeMem(0x4fe8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf29c);
        EXPECT(gbc.pc(), 0x4fea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03AD
        gbc.setState(0xe1b9, 0x8029, 0x8800, 0x7f74, 0x21b, 0xa737, 0x0, 0x1);
        gbc.writeMem(0xe1b9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8029);
        EXPECT(gbc.pc(), 0xe1bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b9), 0xcb);
        EXPECT(gbc.readMem(0xe1ba), 0x6d);
        // CB 6D 03AE
        gbc.setState(0xd506, 0x1447, 0xf220, 0x725d, 0x283a, 0x48a2, 0x0, 0x1);
        gbc.writeMem(0xd506, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1447);
        EXPECT(gbc.pc(), 0xd508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd506), 0xcb);
        EXPECT(gbc.readMem(0xd507), 0x6d);
        // CB 6D 03AF
        gbc.setState(0x304b, 0x7c4b, 0xf0, 0x17b6, 0xc641, 0x5d2e, 0x0, 0x0);
        gbc.writeMem(0x304b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7c4b);
        EXPECT(gbc.pc(), 0x304d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03B0
        gbc.setState(0x46e8, 0x22d6, 0x9840, 0xbe4a, 0x9f2c, 0x6dcc, 0x1, 0x1);
        gbc.writeMem(0x46e8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x22d6);
        EXPECT(gbc.pc(), 0x46ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03B1
        gbc.setState(0x7935, 0x462b, 0x4f60, 0xa3e7, 0xfde8, 0xa67b, 0x1, 0x0);
        gbc.writeMem(0x7935, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x462b);
        EXPECT(gbc.pc(), 0x7937);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03B2
        gbc.setState(0x7dd5, 0x1b3, 0x2a10, 0xeb37, 0x472, 0xba4a, 0x0, 0x0);
        gbc.writeMem(0x7dd5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x1b3);
        EXPECT(gbc.pc(), 0x7dd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03B3
        gbc.setState(0x2ab3, 0xfc90, 0x8580, 0x56fb, 0x4f73, 0x44e6, 0x0, 0x1);
        gbc.writeMem(0x2ab3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfc90);
        EXPECT(gbc.pc(), 0x2ab5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03B4
        gbc.setState(0x5b96, 0x64c8, 0xce30, 0x752f, 0xa38b, 0x8d3f, 0x1, 0x1);
        gbc.writeMem(0x5b96, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x64c8);
        EXPECT(gbc.pc(), 0x5b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03B5
        gbc.setState(0xb3d5, 0xd371, 0x3ed0, 0x1ca4, 0x9659, 0xe851, 0x0, 0x1);
        gbc.writeMem(0xb3d5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd371);
        EXPECT(gbc.pc(), 0xb3d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d5), 0xcb);
        EXPECT(gbc.readMem(0xb3d6), 0x6d);
        // CB 6D 03B6
        gbc.setState(0x2fb3, 0xda5f, 0x1920, 0xf99b, 0x7d47, 0xdc26, 0x1, 0x0);
        gbc.writeMem(0x2fb3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xda5f);
        EXPECT(gbc.pc(), 0x2fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03B7
        gbc.setState(0x6fc5, 0x53ae, 0x6c90, 0xa3ce, 0x779e, 0xc14f, 0x0, 0x1);
        gbc.writeMem(0x6fc5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x53ae);
        EXPECT(gbc.pc(), 0x6fc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03B8
        gbc.setState(0x879c, 0x6bd, 0xa7a0, 0x4f67, 0x6762, 0x3bab, 0x0, 0x0);
        gbc.writeMem(0x879c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6bd);
        EXPECT(gbc.pc(), 0x879e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x879c), 0xcb);
        EXPECT(gbc.readMem(0x879d), 0x6d);
        // CB 6D 03B9
        gbc.setState(0xaf0, 0x5564, 0x5a30, 0x2afa, 0x3dd2, 0xe9dd, 0x0, 0x0);
        gbc.writeMem(0xaf0, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5564);
        EXPECT(gbc.pc(), 0xaf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03BA
        gbc.setState(0x5859, 0xf18f, 0x4a90, 0x374a, 0xe9ad, 0xf090, 0x1, 0x1);
        gbc.writeMem(0x5859, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf18f);
        EXPECT(gbc.pc(), 0x585b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03BB
        gbc.setState(0x7c4d, 0xf1c7, 0x61b0, 0xf0e1, 0x33, 0x10d2, 0x1, 0x1);
        gbc.writeMem(0x7c4d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf1c7);
        EXPECT(gbc.pc(), 0x7c4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03BC
        gbc.setState(0x2df2, 0x113f, 0x8900, 0xfb69, 0xf4f7, 0x947c, 0x1, 0x0);
        gbc.writeMem(0x2df2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x113f);
        EXPECT(gbc.pc(), 0x2df4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03BD
        gbc.setState(0xcba8, 0x2b11, 0x52e0, 0x15ef, 0x9402, 0x9eed, 0x0, 0x0);
        gbc.writeMem(0xcba8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2b11);
        EXPECT(gbc.pc(), 0xcbaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba8), 0xcb);
        EXPECT(gbc.readMem(0xcba9), 0x6d);
        // CB 6D 03BE
        gbc.setState(0x71ca, 0xbd93, 0x71e0, 0xbcd1, 0xab7b, 0x1a35, 0x1, 0x0);
        gbc.writeMem(0x71ca, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xbd93);
        EXPECT(gbc.pc(), 0x71cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03BF
        gbc.setState(0x2aa9, 0xf9c4, 0x3510, 0x618d, 0x57c3, 0xc69b, 0x1, 0x1);
        gbc.writeMem(0x2aa9, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf9c4);
        EXPECT(gbc.pc(), 0x2aab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03C0
        gbc.setState(0x802c, 0x4b9d, 0xe40, 0x88d, 0xc59b, 0xc576, 0x1, 0x0);
        gbc.writeMem(0x802c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4b9d);
        EXPECT(gbc.pc(), 0x802e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x802c), 0xcb);
        EXPECT(gbc.readMem(0x802d), 0x6d);
        // CB 6D 03C1
        gbc.setState(0x6b00, 0x3ca5, 0x4520, 0x3127, 0xdf49, 0x1973, 0x0, 0x1);
        gbc.writeMem(0x6b00, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3ca5);
        EXPECT(gbc.pc(), 0x6b02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03C2
        gbc.setState(0xdb6b, 0x4557, 0x99e0, 0x1bb2, 0xcb2a, 0xf8c1, 0x1, 0x1);
        gbc.writeMem(0xdb6b, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4557);
        EXPECT(gbc.pc(), 0xdb6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb6b), 0xcb);
        EXPECT(gbc.readMem(0xdb6c), 0x6d);
        // CB 6D 03C3
        gbc.setState(0xd296, 0xfcb4, 0x80, 0xa910, 0x8e3e, 0x263c, 0x1, 0x1);
        gbc.writeMem(0xd296, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfcb4);
        EXPECT(gbc.pc(), 0xd298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd296), 0xcb);
        EXPECT(gbc.readMem(0xd297), 0x6d);
        // CB 6D 03C4
        gbc.setState(0x826e, 0xe3af, 0xb430, 0x3232, 0xb351, 0x8c94, 0x1, 0x1);
        gbc.writeMem(0x826e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe3af);
        EXPECT(gbc.pc(), 0x8270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x826e), 0xcb);
        EXPECT(gbc.readMem(0x826f), 0x6d);
        // CB 6D 03C5
        gbc.setState(0x557a, 0xf1b6, 0x6420, 0xde32, 0x5093, 0xdf48, 0x0, 0x0);
        gbc.writeMem(0x557a, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf1b6);
        EXPECT(gbc.pc(), 0x557c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03C6
        gbc.setState(0x892, 0x93ac, 0xcfa0, 0x92aa, 0x7a37, 0xe7, 0x0, 0x0);
        gbc.writeMem(0x892, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x93ac);
        EXPECT(gbc.pc(), 0x894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03C7
        gbc.setState(0xa696, 0xcf61, 0x8470, 0xc474, 0xf7f8, 0xd344, 0x0, 0x0);
        gbc.writeMem(0xa696, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcf61);
        EXPECT(gbc.pc(), 0xa698);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa696), 0xcb);
        EXPECT(gbc.readMem(0xa697), 0x6d);
        // CB 6D 03C9
        gbc.setState(0x1e79, 0x6363, 0x5710, 0x7e18, 0x9d49, 0x996b, 0x1, 0x1);
        gbc.writeMem(0x1e79, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6363);
        EXPECT(gbc.pc(), 0x1e7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03CA
        gbc.setState(0x7ba2, 0xd58c, 0x3f70, 0x51e6, 0xd68a, 0x1450, 0x0, 0x0);
        gbc.writeMem(0x7ba2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd58c);
        EXPECT(gbc.pc(), 0x7ba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03CB
        gbc.setState(0x5dce, 0x45b7, 0x4f30, 0x7d46, 0xaf07, 0xf703, 0x0, 0x1);
        gbc.writeMem(0x5dce, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x45b7);
        EXPECT(gbc.pc(), 0x5dd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03CC
        gbc.setState(0x4b63, 0x8e74, 0x7670, 0xb9df, 0x8942, 0x8163, 0x1, 0x1);
        gbc.writeMem(0x4b63, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8e74);
        EXPECT(gbc.pc(), 0x4b65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03CD
        gbc.setState(0xc8e, 0xa9b7, 0x6bb0, 0xed4e, 0x519a, 0x7c8f, 0x1, 0x1);
        gbc.writeMem(0xc8e, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa9b7);
        EXPECT(gbc.pc(), 0xc90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03CE
        gbc.setState(0x3df1, 0xf038, 0xf600, 0xbd93, 0xf2a5, 0x79e3, 0x0, 0x1);
        gbc.writeMem(0x3df1, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf038);
        EXPECT(gbc.pc(), 0x3df3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03CF
        gbc.setState(0xa147, 0x251, 0xa3a0, 0xf07, 0x28bf, 0xca01, 0x1, 0x1);
        gbc.writeMem(0xa147, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x251);
        EXPECT(gbc.pc(), 0xa149);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa147), 0xcb);
        EXPECT(gbc.readMem(0xa148), 0x6d);
        // CB 6D 03D0
        gbc.setState(0xa417, 0x941d, 0xfe20, 0xc4a3, 0xb0e4, 0x1776, 0x1, 0x0);
        gbc.writeMem(0xa417, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x941d);
        EXPECT(gbc.pc(), 0xa419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa417), 0xcb);
        EXPECT(gbc.readMem(0xa418), 0x6d);
        // CB 6D 03D1
        gbc.setState(0xb460, 0xfdd3, 0x6a70, 0xd942, 0xfd03, 0x4c40, 0x0, 0x0);
        gbc.writeMem(0xb460, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfdd3);
        EXPECT(gbc.pc(), 0xb462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb460), 0xcb);
        EXPECT(gbc.readMem(0xb461), 0x6d);
        // CB 6D 03D2
        gbc.setState(0x3f90, 0xcc49, 0x5180, 0xcd40, 0xf42a, 0xdcb, 0x0, 0x1);
        gbc.writeMem(0x3f90, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcc49);
        EXPECT(gbc.pc(), 0x3f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03D3
        gbc.setState(0x9946, 0x19fb, 0xbff0, 0x6511, 0x2f36, 0xec7d, 0x0, 0x0);
        gbc.writeMem(0x9946, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x19fb);
        EXPECT(gbc.pc(), 0x9948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9946), 0xcb);
        EXPECT(gbc.readMem(0x9947), 0x6d);
        // CB 6D 03D4
        gbc.setState(0x1ad4, 0x5d02, 0x3350, 0xd7e2, 0x1115, 0x7aa, 0x1, 0x0);
        gbc.writeMem(0x1ad4, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5d02);
        EXPECT(gbc.pc(), 0x1ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03D5
        gbc.setState(0x15c5, 0xa78, 0x7800, 0x527c, 0xf0e9, 0xfa7f, 0x0, 0x0);
        gbc.writeMem(0x15c5, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa78);
        EXPECT(gbc.pc(), 0x15c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03D6
        gbc.setState(0x417, 0x36f7, 0x7260, 0x3412, 0xc8f0, 0xef35, 0x0, 0x1);
        gbc.writeMem(0x417, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x36f7);
        EXPECT(gbc.pc(), 0x419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03D7
        gbc.setState(0x5db8, 0x39b4, 0xccc0, 0x3190, 0xd672, 0x5b55, 0x1, 0x1);
        gbc.writeMem(0x5db8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x39b4);
        EXPECT(gbc.pc(), 0x5dba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03D8
        gbc.setState(0xd920, 0xcbc8, 0xf040, 0x6cff, 0xe7b4, 0xd32a, 0x0, 0x0);
        gbc.writeMem(0xd920, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xcbc8);
        EXPECT(gbc.pc(), 0xd922);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd920), 0xcb);
        EXPECT(gbc.readMem(0xd921), 0x6d);
        // CB 6D 03D9
        gbc.setState(0xa5d2, 0xe4fe, 0x3670, 0x75ca, 0x155c, 0x6a64, 0x1, 0x1);
        gbc.writeMem(0xa5d2, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe4fe);
        EXPECT(gbc.pc(), 0xa5d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d2), 0xcb);
        EXPECT(gbc.readMem(0xa5d3), 0x6d);
        // CB 6D 03DA
        gbc.setState(0xd130, 0xb1a8, 0xb770, 0xff54, 0xf6df, 0x7276, 0x1, 0x1);
        gbc.writeMem(0xd130, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb1a8);
        EXPECT(gbc.pc(), 0xd132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd130), 0xcb);
        EXPECT(gbc.readMem(0xd131), 0x6d);
        // CB 6D 03DC
        gbc.setState(0x8925, 0xd9ce, 0x6e20, 0xf02b, 0x511, 0xd4cc, 0x1, 0x0);
        gbc.writeMem(0x8925, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd9ce);
        EXPECT(gbc.pc(), 0x8927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8925), 0xcb);
        EXPECT(gbc.readMem(0x8926), 0x6d);
        // CB 6D 03DD
        gbc.setState(0xc550, 0x5d73, 0xc570, 0xd1e6, 0xe153, 0xe430, 0x1, 0x1);
        gbc.writeMem(0xc550, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5d73);
        EXPECT(gbc.pc(), 0xc552);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc550), 0xcb);
        EXPECT(gbc.readMem(0xc551), 0x6d);
        // CB 6D 03DE
        gbc.setState(0x35c8, 0x9cf5, 0x9280, 0x314e, 0x349b, 0x77ad, 0x1, 0x1);
        gbc.writeMem(0x35c8, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9cf5);
        EXPECT(gbc.pc(), 0x35ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03DF
        gbc.setState(0x5fc3, 0x91, 0x9f10, 0xf673, 0x77ef, 0x2fc5, 0x0, 0x1);
        gbc.writeMem(0x5fc3, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x91);
        EXPECT(gbc.pc(), 0x5fc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03E1
        gbc.setState(0x7f31, 0xa3b1, 0xde30, 0x7392, 0x34a2, 0x7674, 0x1, 0x1);
        gbc.writeMem(0x7f31, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa3b1);
        EXPECT(gbc.pc(), 0x7f33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03E2
        gbc.setState(0x80ac, 0x1f37, 0x2d10, 0xf0ad, 0x6ddf, 0xbb71, 0x1, 0x0);
        gbc.writeMem(0x80ac, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x1f37);
        EXPECT(gbc.pc(), 0x80ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ac), 0xcb);
        EXPECT(gbc.readMem(0x80ad), 0x6d);
        // CB 6D 03E3
        gbc.setState(0x7978, 0x1b4f, 0xeb90, 0x6580, 0x8994, 0x4a92, 0x0, 0x1);
        gbc.writeMem(0x7978, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1b4f);
        EXPECT(gbc.pc(), 0x797a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6D 03E4
        gbc.setState(0x635c, 0x5232, 0xdac0, 0x4940, 0x56dc, 0x9e81, 0x0, 0x1);
        gbc.writeMem(0x635c, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5232);
        EXPECT(gbc.pc(), 0x635e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6D 03E5
        gbc.setState(0xdcab, 0xa290, 0x55a0, 0xbb98, 0x476a, 0x84b5, 0x1, 0x0);
        gbc.writeMem(0xdcab, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa290);
        EXPECT(gbc.pc(), 0xdcad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcab), 0xcb);
        EXPECT(gbc.readMem(0xdcac), 0x6d);
        // CB 6D 03E6
        gbc.setState(0xd382, 0xf7c9, 0x2930, 0x20a3, 0x27d5, 0x373b, 0x0, 0x1);
        gbc.writeMem(0xd382, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf7c9);
        EXPECT(gbc.pc(), 0xd384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd382), 0xcb);
        EXPECT(gbc.readMem(0xd383), 0x6d);
        // CB 6D 03E7
        gbc.setState(0x546d, 0x6548, 0xa7f0, 0x8aa8, 0x5046, 0x16f7, 0x1, 0x0);
        gbc.writeMem(0x546d, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6548);
        EXPECT(gbc.pc(), 0x546f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
