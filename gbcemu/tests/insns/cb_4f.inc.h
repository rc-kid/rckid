    TEST(gbcemu, opcode_cb_4f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 4F 0000
        gbc.setState(0x6d70, 0x75fd, 0x92e0, 0xc437, 0x5c20, 0x5ddd, 0x1, 0x1);
        gbc.writeMem(0x6d70, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x75fd);
        EXPECT(gbc.pc(), 0x6d72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0001
        gbc.setState(0x99b7, 0x70c0, 0x3b90, 0x2967, 0x3f6b, 0xd4cf, 0x1, 0x1);
        gbc.writeMem(0x99b7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x70c0);
        EXPECT(gbc.pc(), 0x99b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b7), 0xcb);
        EXPECT(gbc.readMem(0x99b8), 0x4f);
        // CB 4F 0002
        gbc.setState(0xb2a1, 0xe0d4, 0xa9e0, 0x7565, 0x77e2, 0xa37f, 0x0, 0x1);
        gbc.writeMem(0xb2a1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe0d4);
        EXPECT(gbc.pc(), 0xb2a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a1), 0xcb);
        EXPECT(gbc.readMem(0xb2a2), 0x4f);
        // CB 4F 0003
        gbc.setState(0x4d88, 0xcf61, 0xc660, 0x4d93, 0xb64d, 0x6a0f, 0x1, 0x1);
        gbc.writeMem(0x4d88, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xcf61);
        EXPECT(gbc.pc(), 0x4d8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0004
        gbc.setState(0xab8b, 0x245e, 0x61d0, 0x342c, 0x25dd, 0xcf4, 0x0, 0x1);
        gbc.writeMem(0xab8b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x245e);
        EXPECT(gbc.pc(), 0xab8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab8b), 0xcb);
        EXPECT(gbc.readMem(0xab8c), 0x4f);
        // CB 4F 0005
        gbc.setState(0x4444, 0x68fa, 0x2c20, 0x3ac5, 0xb964, 0x390f, 0x1, 0x0);
        gbc.writeMem(0x4444, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x68fa);
        EXPECT(gbc.pc(), 0x4446);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0006
        gbc.setState(0xa004, 0x2152, 0xd0e0, 0xa260, 0xb9dc, 0xd500, 0x1, 0x1);
        gbc.writeMem(0xa004, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2152);
        EXPECT(gbc.pc(), 0xa006);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa004), 0xcb);
        EXPECT(gbc.readMem(0xa005), 0x4f);
        // CB 4F 0007
        gbc.setState(0x2126, 0x55f5, 0xf4b0, 0xb3f0, 0xfc51, 0xe5e9, 0x0, 0x1);
        gbc.writeMem(0x2126, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x55f5);
        EXPECT(gbc.pc(), 0x2128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0008
        gbc.setState(0x2020, 0xece7, 0xa110, 0xaa06, 0xc659, 0x600a, 0x0, 0x0);
        gbc.writeMem(0x2020, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xece7);
        EXPECT(gbc.pc(), 0x2022);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0009
        gbc.setState(0xbe4d, 0xc797, 0x3330, 0x283a, 0x7bb1, 0xa70a, 0x1, 0x0);
        gbc.writeMem(0xbe4d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc797);
        EXPECT(gbc.pc(), 0xbe4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe4d), 0xcb);
        EXPECT(gbc.readMem(0xbe4e), 0x4f);
        // CB 4F 000A
        gbc.setState(0x8c55, 0x60a6, 0x4f20, 0xa709, 0xf850, 0x675a, 0x1, 0x0);
        gbc.writeMem(0x8c55, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x60a6);
        EXPECT(gbc.pc(), 0x8c57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c55), 0xcb);
        EXPECT(gbc.readMem(0x8c56), 0x4f);
        // CB 4F 000B
        gbc.setState(0x77fd, 0x821, 0x8af0, 0xf835, 0x1963, 0x9b44, 0x1, 0x1);
        gbc.writeMem(0x77fd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x821);
        EXPECT(gbc.pc(), 0x77ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 000D
        gbc.setState(0xd9b5, 0x6672, 0x99d0, 0x7fcd, 0x462b, 0xfb71, 0x0, 0x1);
        gbc.writeMem(0xd9b5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6672);
        EXPECT(gbc.pc(), 0xd9b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b5), 0xcb);
        EXPECT(gbc.readMem(0xd9b6), 0x4f);
        // CB 4F 000E
        gbc.setState(0x480b, 0x2d47, 0x12b0, 0xe04b, 0x1692, 0x8626, 0x0, 0x0);
        gbc.writeMem(0x480b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2d47);
        EXPECT(gbc.pc(), 0x480d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 000F
        gbc.setState(0xc9b3, 0x743a, 0xb620, 0xb82a, 0x9319, 0xae81, 0x0, 0x1);
        gbc.writeMem(0xc9b3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x743a);
        EXPECT(gbc.pc(), 0xc9b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b3), 0xcb);
        EXPECT(gbc.readMem(0xc9b4), 0x4f);
        // CB 4F 0010
        gbc.setState(0xcbdd, 0x8aa4, 0xffa0, 0xa0ba, 0x4142, 0x39d1, 0x1, 0x0);
        gbc.writeMem(0xcbdd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8aa4);
        EXPECT(gbc.pc(), 0xcbdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbdd), 0xcb);
        EXPECT(gbc.readMem(0xcbde), 0x4f);
        // CB 4F 0011
        gbc.setState(0x2da9, 0x8228, 0xafe0, 0x735b, 0xf0ce, 0x616d, 0x1, 0x0);
        gbc.writeMem(0x2da9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8228);
        EXPECT(gbc.pc(), 0x2dab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0012
        gbc.setState(0x2883, 0x743f, 0x58a0, 0x44a7, 0xc1a, 0xbcfe, 0x1, 0x0);
        gbc.writeMem(0x2883, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x743f);
        EXPECT(gbc.pc(), 0x2885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0013
        gbc.setState(0xb20f, 0x8b7c, 0xdb60, 0x4a25, 0xbe17, 0x269b, 0x0, 0x1);
        gbc.writeMem(0xb20f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8b7c);
        EXPECT(gbc.pc(), 0xb211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb20f), 0xcb);
        EXPECT(gbc.readMem(0xb210), 0x4f);
        // CB 4F 0014
        gbc.setState(0x31bc, 0x1f23, 0x20d0, 0x76c8, 0xf9f7, 0xd1ff, 0x0, 0x0);
        gbc.writeMem(0x31bc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1f23);
        EXPECT(gbc.pc(), 0x31be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0015
        gbc.setState(0x6a54, 0x433f, 0xd480, 0xe188, 0x178e, 0xe9af, 0x0, 0x1);
        gbc.writeMem(0x6a54, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x433f);
        EXPECT(gbc.pc(), 0x6a56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0016
        gbc.setState(0xe60e, 0x67cc, 0xd240, 0xeff4, 0xe910, 0x1596, 0x0, 0x0);
        gbc.writeMem(0xe60e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x67cc);
        EXPECT(gbc.pc(), 0xe610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe60e), 0xcb);
        EXPECT(gbc.readMem(0xe60f), 0x4f);
        // CB 4F 0017
        gbc.setState(0x7d97, 0x5c80, 0xd280, 0x7f0f, 0xfb15, 0xf4d7, 0x1, 0x1);
        gbc.writeMem(0x7d97, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5c80);
        EXPECT(gbc.pc(), 0x7d99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0018
        gbc.setState(0x3dd3, 0x94e, 0x80f0, 0xa6a5, 0xc583, 0x4d52, 0x0, 0x0);
        gbc.writeMem(0x3dd3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x94e);
        EXPECT(gbc.pc(), 0x3dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0019
        gbc.setState(0xb6c8, 0xfdfe, 0x14c0, 0xb027, 0x9002, 0x8462, 0x0, 0x1);
        gbc.writeMem(0xb6c8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfdfe);
        EXPECT(gbc.pc(), 0xb6ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c8), 0xcb);
        EXPECT(gbc.readMem(0xb6c9), 0x4f);
        // CB 4F 001A
        gbc.setState(0x5245, 0x7804, 0x1600, 0x5d06, 0x1b20, 0x8286, 0x1, 0x1);
        gbc.writeMem(0x5245, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7804);
        EXPECT(gbc.pc(), 0x5247);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 001B
        gbc.setState(0xab15, 0xf51b, 0xba90, 0x9a0b, 0x5379, 0x722b, 0x1, 0x0);
        gbc.writeMem(0xab15, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf51b);
        EXPECT(gbc.pc(), 0xab17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab15), 0xcb);
        EXPECT(gbc.readMem(0xab16), 0x4f);
        // CB 4F 001C
        gbc.setState(0x4c59, 0x986b, 0x30d0, 0xad7d, 0xdd54, 0x707e, 0x0, 0x1);
        gbc.writeMem(0x4c59, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x986b);
        EXPECT(gbc.pc(), 0x4c5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 001D
        gbc.setState(0xd858, 0x5ab4, 0xa250, 0xa5e8, 0x7ff3, 0xcbad, 0x1, 0x0);
        gbc.writeMem(0xd858, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5ab4);
        EXPECT(gbc.pc(), 0xd85a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd858), 0xcb);
        EXPECT(gbc.readMem(0xd859), 0x4f);
        // CB 4F 001E
        gbc.setState(0xbf0e, 0x20d, 0x8380, 0x17bb, 0x2897, 0xe54c, 0x0, 0x1);
        gbc.writeMem(0xbf0e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x20d);
        EXPECT(gbc.pc(), 0xbf10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf0e), 0xcb);
        EXPECT(gbc.readMem(0xbf0f), 0x4f);
        // CB 4F 001F
        gbc.setState(0x3bc7, 0x6c54, 0x9fd0, 0x2890, 0xfdd1, 0x3c0d, 0x1, 0x1);
        gbc.writeMem(0x3bc7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6c54);
        EXPECT(gbc.pc(), 0x3bc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0020
        gbc.setState(0xa266, 0x146a, 0xfc00, 0x1387, 0x8397, 0x7cfc, 0x0, 0x0);
        gbc.writeMem(0xa266, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x146a);
        EXPECT(gbc.pc(), 0xa268);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa266), 0xcb);
        EXPECT(gbc.readMem(0xa267), 0x4f);
        // CB 4F 0021
        gbc.setState(0x428d, 0xf532, 0x3bf0, 0x3164, 0x3874, 0x99a1, 0x1, 0x1);
        gbc.writeMem(0x428d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf532);
        EXPECT(gbc.pc(), 0x428f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0022
        gbc.setState(0xe0fa, 0xd6c8, 0x8990, 0x4035, 0x2c52, 0xf2d9, 0x0, 0x1);
        gbc.writeMem(0xe0fa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd6c8);
        EXPECT(gbc.pc(), 0xe0fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0fa), 0xcb);
        EXPECT(gbc.readMem(0xe0fb), 0x4f);
        // CB 4F 0023
        gbc.setState(0x1588, 0x705c, 0x4080, 0xb51e, 0x6a39, 0x1eea, 0x0, 0x1);
        gbc.writeMem(0x1588, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x705c);
        EXPECT(gbc.pc(), 0x158a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0024
        gbc.setState(0x57b7, 0x8b96, 0x7c70, 0xa652, 0xf1d9, 0x5f42, 0x0, 0x1);
        gbc.writeMem(0x57b7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8b96);
        EXPECT(gbc.pc(), 0x57b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0025
        gbc.setState(0x8b9a, 0x70b4, 0x8a00, 0x6084, 0x150f, 0x7183, 0x1, 0x0);
        gbc.writeMem(0x8b9a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x70b4);
        EXPECT(gbc.pc(), 0x8b9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b9a), 0xcb);
        EXPECT(gbc.readMem(0x8b9b), 0x4f);
        // CB 4F 0026
        gbc.setState(0x2418, 0x5525, 0x6ed0, 0xecf4, 0xeb3b, 0x2508, 0x1, 0x0);
        gbc.writeMem(0x2418, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5525);
        EXPECT(gbc.pc(), 0x241a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0027
        gbc.setState(0x4768, 0xb71a, 0x5dd0, 0xea86, 0x5762, 0xa224, 0x0, 0x0);
        gbc.writeMem(0x4768, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb71a);
        EXPECT(gbc.pc(), 0x476a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0028
        gbc.setState(0xa548, 0x7825, 0x61f0, 0x2914, 0x91ed, 0x56b1, 0x1, 0x1);
        gbc.writeMem(0xa548, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7825);
        EXPECT(gbc.pc(), 0xa54a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa548), 0xcb);
        EXPECT(gbc.readMem(0xa549), 0x4f);
        // CB 4F 0029
        gbc.setState(0xd867, 0x6abd, 0xf400, 0xcd6b, 0x1f04, 0xcb38, 0x1, 0x0);
        gbc.writeMem(0xd867, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6abd);
        EXPECT(gbc.pc(), 0xd869);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd867), 0xcb);
        EXPECT(gbc.readMem(0xd868), 0x4f);
        // CB 4F 002A
        gbc.setState(0x42f1, 0x53e3, 0xeb90, 0x7c22, 0xf75d, 0xb46d, 0x0, 0x0);
        gbc.writeMem(0x42f1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x53e3);
        EXPECT(gbc.pc(), 0x42f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 002B
        gbc.setState(0x37da, 0x865a, 0x1d60, 0xec93, 0x2516, 0x6ea7, 0x1, 0x1);
        gbc.writeMem(0x37da, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x865a);
        EXPECT(gbc.pc(), 0x37dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 002C
        gbc.setState(0x766, 0xf4cc, 0x47d0, 0x9692, 0x91b8, 0xec77, 0x1, 0x1);
        gbc.writeMem(0x766, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf4cc);
        EXPECT(gbc.pc(), 0x768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 002D
        gbc.setState(0x6cb7, 0xaf7d, 0x5250, 0x92b2, 0x95bc, 0x98df, 0x0, 0x1);
        gbc.writeMem(0x6cb7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xaf7d);
        EXPECT(gbc.pc(), 0x6cb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 002E
        gbc.setState(0x1c48, 0x4d49, 0xb5b0, 0x7fa8, 0x5c94, 0x9f78, 0x1, 0x0);
        gbc.writeMem(0x1c48, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4d49);
        EXPECT(gbc.pc(), 0x1c4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 002F
        gbc.setState(0x6399, 0xa85d, 0xa9c0, 0xdc6b, 0x37f4, 0xd22b, 0x1, 0x0);
        gbc.writeMem(0x6399, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa85d);
        EXPECT(gbc.pc(), 0x639b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0031
        gbc.setState(0xcff9, 0xe24f, 0xc8c0, 0x86de, 0x69e, 0xb921, 0x0, 0x0);
        gbc.writeMem(0xcff9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe24f);
        EXPECT(gbc.pc(), 0xcffb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcff9), 0xcb);
        EXPECT(gbc.readMem(0xcffa), 0x4f);
        // CB 4F 0032
        gbc.setState(0x4361, 0xe195, 0x8720, 0x63, 0xd88d, 0xaff8, 0x1, 0x1);
        gbc.writeMem(0x4361, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe195);
        EXPECT(gbc.pc(), 0x4363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0033
        gbc.setState(0x4b05, 0xe72a, 0x6ba0, 0x194b, 0x3f3d, 0xc75a, 0x1, 0x1);
        gbc.writeMem(0x4b05, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe72a);
        EXPECT(gbc.pc(), 0x4b07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0034
        gbc.setState(0xddd1, 0xe852, 0x9eb0, 0x388c, 0x7635, 0x8e64, 0x0, 0x0);
        gbc.writeMem(0xddd1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe852);
        EXPECT(gbc.pc(), 0xddd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddd1), 0xcb);
        EXPECT(gbc.readMem(0xddd2), 0x4f);
        // CB 4F 0035
        gbc.setState(0xc317, 0xb0dc, 0x7a00, 0xd894, 0x81c, 0x3a36, 0x1, 0x0);
        gbc.writeMem(0xc317, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xb0dc);
        EXPECT(gbc.pc(), 0xc319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc317), 0xcb);
        EXPECT(gbc.readMem(0xc318), 0x4f);
        // CB 4F 0036
        gbc.setState(0xaa96, 0x5528, 0x4b10, 0xb742, 0x1f44, 0x3e0d, 0x1, 0x0);
        gbc.writeMem(0xaa96, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5528);
        EXPECT(gbc.pc(), 0xaa98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa96), 0xcb);
        EXPECT(gbc.readMem(0xaa97), 0x4f);
        // CB 4F 0037
        gbc.setState(0x3cf, 0x267b, 0xb080, 0xe171, 0x1a90, 0xaae7, 0x1, 0x0);
        gbc.writeMem(0x3cf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x267b);
        EXPECT(gbc.pc(), 0x3d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0038
        gbc.setState(0x4d4b, 0xcec6, 0xae10, 0x4d23, 0x541d, 0xf67d, 0x1, 0x0);
        gbc.writeMem(0x4d4b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xcec6);
        EXPECT(gbc.pc(), 0x4d4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0039
        gbc.setState(0x9e0f, 0x95e0, 0x1d80, 0x26ad, 0x7e72, 0xa8dd, 0x1, 0x1);
        gbc.writeMem(0x9e0f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x95e0);
        EXPECT(gbc.pc(), 0x9e11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e0f), 0xcb);
        EXPECT(gbc.readMem(0x9e10), 0x4f);
        // CB 4F 003A
        gbc.setState(0x8aba, 0x1f01, 0xb750, 0x4b0a, 0xc59, 0xd0af, 0x1, 0x0);
        gbc.writeMem(0x8aba, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1f01);
        EXPECT(gbc.pc(), 0x8abc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aba), 0xcb);
        EXPECT(gbc.readMem(0x8abb), 0x4f);
        // CB 4F 003C
        gbc.setState(0xc025, 0x21df, 0xbeb0, 0xb2e0, 0x9058, 0x6eee, 0x0, 0x1);
        gbc.writeMem(0xc025, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x21df);
        EXPECT(gbc.pc(), 0xc027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc025), 0xcb);
        EXPECT(gbc.readMem(0xc026), 0x4f);
        // CB 4F 003D
        gbc.setState(0xa913, 0xfe31, 0x4ea0, 0x9ca2, 0x34cf, 0xaf0b, 0x1, 0x1);
        gbc.writeMem(0xa913, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfe31);
        EXPECT(gbc.pc(), 0xa915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa913), 0xcb);
        EXPECT(gbc.readMem(0xa914), 0x4f);
        // CB 4F 003E
        gbc.setState(0x7210, 0x4b43, 0x2180, 0xfc7d, 0x1831, 0x859b, 0x1, 0x0);
        gbc.writeMem(0x7210, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4b43);
        EXPECT(gbc.pc(), 0x7212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 003F
        gbc.setState(0xd9d4, 0x365d, 0xc8d0, 0xe6d5, 0xc187, 0x6db5, 0x0, 0x1);
        gbc.writeMem(0xd9d4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x365d);
        EXPECT(gbc.pc(), 0xd9d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9d4), 0xcb);
        EXPECT(gbc.readMem(0xd9d5), 0x4f);
        // CB 4F 0040
        gbc.setState(0xd02a, 0x1cf7, 0x5120, 0x9151, 0x25f7, 0x76cb, 0x1, 0x0);
        gbc.writeMem(0xd02a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1cf7);
        EXPECT(gbc.pc(), 0xd02c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd02a), 0xcb);
        EXPECT(gbc.readMem(0xd02b), 0x4f);
        // CB 4F 0041
        gbc.setState(0xca31, 0xb3c8, 0xaef0, 0xcf37, 0x9cce, 0x7d67, 0x1, 0x1);
        gbc.writeMem(0xca31, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb3c8);
        EXPECT(gbc.pc(), 0xca33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca31), 0xcb);
        EXPECT(gbc.readMem(0xca32), 0x4f);
        // CB 4F 0042
        gbc.setState(0x349, 0x8093, 0xb360, 0x2065, 0x6af1, 0xd975, 0x0, 0x1);
        gbc.writeMem(0x349, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8093);
        EXPECT(gbc.pc(), 0x34b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0043
        gbc.setState(0x5619, 0x1fca, 0xfde0, 0x582c, 0xf22c, 0x6a61, 0x1, 0x1);
        gbc.writeMem(0x5619, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1fca);
        EXPECT(gbc.pc(), 0x561b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0044
        gbc.setState(0x7b33, 0xfa5c, 0x3310, 0x49a0, 0xb268, 0x7651, 0x0, 0x1);
        gbc.writeMem(0x7b33, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfa5c);
        EXPECT(gbc.pc(), 0x7b35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0046
        gbc.setState(0x8834, 0xb227, 0x6c00, 0x77b0, 0xbb3e, 0x973b, 0x0, 0x1);
        gbc.writeMem(0x8834, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb227);
        EXPECT(gbc.pc(), 0x8836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8834), 0xcb);
        EXPECT(gbc.readMem(0x8835), 0x4f);
        // CB 4F 0047
        gbc.setState(0xceb, 0xf1ec, 0x78b0, 0x71c6, 0x8c24, 0x1dfa, 0x1, 0x1);
        gbc.writeMem(0xceb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf1ec);
        EXPECT(gbc.pc(), 0xced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0048
        gbc.setState(0xa3eb, 0xe123, 0xf620, 0xce24, 0x3c10, 0x82e0, 0x0, 0x0);
        gbc.writeMem(0xa3eb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe123);
        EXPECT(gbc.pc(), 0xa3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3eb), 0xcb);
        EXPECT(gbc.readMem(0xa3ec), 0x4f);
        // CB 4F 0049
        gbc.setState(0x1f74, 0x7a0e, 0x9ea0, 0xa2b9, 0xdb1a, 0x551c, 0x0, 0x1);
        gbc.writeMem(0x1f74, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7a0e);
        EXPECT(gbc.pc(), 0x1f76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 004A
        gbc.setState(0xd4d5, 0x9b30, 0x8610, 0xe4e9, 0xba43, 0x2744, 0x1, 0x1);
        gbc.writeMem(0xd4d5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9b30);
        EXPECT(gbc.pc(), 0xd4d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4d5), 0xcb);
        EXPECT(gbc.readMem(0xd4d6), 0x4f);
        // CB 4F 004B
        gbc.setState(0x19cd, 0xa9ac, 0x1680, 0x27bc, 0x3f29, 0x522d, 0x1, 0x0);
        gbc.writeMem(0x19cd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa9ac);
        EXPECT(gbc.pc(), 0x19cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 004C
        gbc.setState(0xe9c0, 0xa981, 0xb9e0, 0x539f, 0xa426, 0x5978, 0x1, 0x0);
        gbc.writeMem(0xe9c0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa981);
        EXPECT(gbc.pc(), 0xe9c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c0), 0xcb);
        EXPECT(gbc.readMem(0xe9c1), 0x4f);
        // CB 4F 004D
        gbc.setState(0x3730, 0x739a, 0x3180, 0x39ab, 0x8241, 0x2cfa, 0x0, 0x0);
        gbc.writeMem(0x3730, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x739a);
        EXPECT(gbc.pc(), 0x3732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 004E
        gbc.setState(0x426f, 0xe42a, 0xed70, 0xbd8e, 0xf2bf, 0xbcde, 0x0, 0x0);
        gbc.writeMem(0x426f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe42a);
        EXPECT(gbc.pc(), 0x4271);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 004F
        gbc.setState(0x45c8, 0x2243, 0x130, 0x8142, 0xe886, 0x7766, 0x1, 0x1);
        gbc.writeMem(0x45c8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2243);
        EXPECT(gbc.pc(), 0x45ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0050
        gbc.setState(0x588b, 0xfdc2, 0xbc30, 0xdb6b, 0x778, 0x660b, 0x1, 0x1);
        gbc.writeMem(0x588b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfdc2);
        EXPECT(gbc.pc(), 0x588d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0051
        gbc.setState(0x3f3, 0x3824, 0x7f00, 0x58df, 0xf1f5, 0x669, 0x0, 0x1);
        gbc.writeMem(0x3f3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x3824);
        EXPECT(gbc.pc(), 0x3f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0052
        gbc.setState(0x712c, 0x4da1, 0x8470, 0xa822, 0xa9a, 0xcf2f, 0x0, 0x1);
        gbc.writeMem(0x712c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4da1);
        EXPECT(gbc.pc(), 0x712e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0053
        gbc.setState(0x4f7, 0x768f, 0x60a0, 0xa87f, 0x186d, 0x2314, 0x0, 0x1);
        gbc.writeMem(0x4f7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x768f);
        EXPECT(gbc.pc(), 0x4f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0055
        gbc.setState(0x7d6c, 0xdef8, 0xa470, 0xbc3e, 0x8085, 0x1ad5, 0x0, 0x0);
        gbc.writeMem(0x7d6c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdef8);
        EXPECT(gbc.pc(), 0x7d6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0056
        gbc.setState(0x156d, 0x152, 0xd7a0, 0x8432, 0x3084, 0x87ac, 0x1, 0x1);
        gbc.writeMem(0x156d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x152);
        EXPECT(gbc.pc(), 0x156f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0057
        gbc.setState(0xb52d, 0x257a, 0x1890, 0x7a73, 0xce83, 0xdec3, 0x1, 0x0);
        gbc.writeMem(0xb52d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x257a);
        EXPECT(gbc.pc(), 0xb52f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb52d), 0xcb);
        EXPECT(gbc.readMem(0xb52e), 0x4f);
        // CB 4F 0058
        gbc.setState(0x64a6, 0x125f, 0xc720, 0xa55, 0xffbe, 0xf8dd, 0x1, 0x0);
        gbc.writeMem(0x64a6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x125f);
        EXPECT(gbc.pc(), 0x64a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0059
        gbc.setState(0x72ea, 0xad2b, 0x9ee0, 0xbe66, 0x2097, 0xd0b2, 0x0, 0x1);
        gbc.writeMem(0x72ea, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xad2b);
        EXPECT(gbc.pc(), 0x72ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 005A
        gbc.setState(0x51af, 0x46fd, 0xd240, 0x46af, 0xcc45, 0xe034, 0x1, 0x1);
        gbc.writeMem(0x51af, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x46fd);
        EXPECT(gbc.pc(), 0x51b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 005B
        gbc.setState(0xc48e, 0x7794, 0x3490, 0x6db, 0xd0f5, 0x281b, 0x1, 0x1);
        gbc.writeMem(0xc48e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x7794);
        EXPECT(gbc.pc(), 0xc490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc48e), 0xcb);
        EXPECT(gbc.readMem(0xc48f), 0x4f);
        // CB 4F 005C
        gbc.setState(0x40fe, 0x88b, 0xb220, 0x72cc, 0x188f, 0x559d, 0x0, 0x0);
        gbc.writeMem(0x40fe, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x88b);
        EXPECT(gbc.pc(), 0x4100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 005D
        gbc.setState(0xca8e, 0xb060, 0x6f80, 0x7871, 0xb087, 0xb105, 0x1, 0x0);
        gbc.writeMem(0xca8e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb060);
        EXPECT(gbc.pc(), 0xca90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca8e), 0xcb);
        EXPECT(gbc.readMem(0xca8f), 0x4f);
        // CB 4F 005E
        gbc.setState(0x53, 0x7243, 0x4ad0, 0xbfb5, 0x755f, 0xaa42, 0x1, 0x1);
        gbc.writeMem(0x53, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7243);
        EXPECT(gbc.pc(), 0x55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 005F
        gbc.setState(0x538, 0xd659, 0x72a0, 0x542b, 0x1a2b, 0x33be, 0x1, 0x0);
        gbc.writeMem(0x538, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd659);
        EXPECT(gbc.pc(), 0x53a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0060
        gbc.setState(0xed55, 0x4f31, 0x6dd0, 0xc474, 0xbe11, 0x599e, 0x0, 0x1);
        gbc.writeMem(0xed55, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x4f31);
        EXPECT(gbc.pc(), 0xed57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed55), 0xcb);
        EXPECT(gbc.readMem(0xed56), 0x4f);
        // CB 4F 0061
        gbc.setState(0x62f, 0xa750, 0x80a0, 0x55a9, 0x6a77, 0xd196, 0x1, 0x1);
        gbc.writeMem(0x62f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa750);
        EXPECT(gbc.pc(), 0x631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0062
        gbc.setState(0x67a5, 0xed79, 0x7b40, 0x7afe, 0x1de2, 0x97ea, 0x1, 0x0);
        gbc.writeMem(0x67a5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xed79);
        EXPECT(gbc.pc(), 0x67a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0063
        gbc.setState(0xbec2, 0x7fde, 0xece0, 0x465e, 0x78fc, 0xc626, 0x0, 0x0);
        gbc.writeMem(0xbec2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7fde);
        EXPECT(gbc.pc(), 0xbec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbec2), 0xcb);
        EXPECT(gbc.readMem(0xbec3), 0x4f);
        // CB 4F 0064
        gbc.setState(0xca5b, 0x93d4, 0xb9d0, 0x49f9, 0x412e, 0xf8aa, 0x1, 0x0);
        gbc.writeMem(0xca5b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x93d4);
        EXPECT(gbc.pc(), 0xca5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca5b), 0xcb);
        EXPECT(gbc.readMem(0xca5c), 0x4f);
        // CB 4F 0065
        gbc.setState(0x64fa, 0x554, 0x380, 0x9790, 0xd029, 0x25cf, 0x0, 0x1);
        gbc.writeMem(0x64fa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x554);
        EXPECT(gbc.pc(), 0x64fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0066
        gbc.setState(0xa453, 0x2214, 0x86d0, 0xb562, 0xa1dc, 0x8cf3, 0x1, 0x1);
        gbc.writeMem(0xa453, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2214);
        EXPECT(gbc.pc(), 0xa455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa453), 0xcb);
        EXPECT(gbc.readMem(0xa454), 0x4f);
        // CB 4F 0067
        gbc.setState(0x31e3, 0xda, 0x1980, 0x8924, 0xd24e, 0x6406, 0x0, 0x1);
        gbc.writeMem(0x31e3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xda);
        EXPECT(gbc.pc(), 0x31e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0068
        gbc.setState(0x6f02, 0x257f, 0xc810, 0x7072, 0x50bb, 0x7676, 0x0, 0x1);
        gbc.writeMem(0x6f02, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x257f);
        EXPECT(gbc.pc(), 0x6f04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0069
        gbc.setState(0x4f0b, 0x239b, 0x7310, 0xcfe2, 0xba49, 0x5a62, 0x1, 0x0);
        gbc.writeMem(0x4f0b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x239b);
        EXPECT(gbc.pc(), 0x4f0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 006A
        gbc.setState(0xa7b6, 0x9f97, 0x9980, 0xe375, 0x7d62, 0xd92e, 0x0, 0x0);
        gbc.writeMem(0xa7b6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9f97);
        EXPECT(gbc.pc(), 0xa7b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b6), 0xcb);
        EXPECT(gbc.readMem(0xa7b7), 0x4f);
        // CB 4F 006B
        gbc.setState(0xeb75, 0x928b, 0x1de0, 0x2d36, 0xfdc8, 0xb9c5, 0x1, 0x0);
        gbc.writeMem(0xeb75, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x928b);
        EXPECT(gbc.pc(), 0xeb77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb75), 0xcb);
        EXPECT(gbc.readMem(0xeb76), 0x4f);
        // CB 4F 006C
        gbc.setState(0xe1f2, 0x3c44, 0x54e0, 0x3076, 0x11e6, 0x7a13, 0x1, 0x0);
        gbc.writeMem(0xe1f2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3c44);
        EXPECT(gbc.pc(), 0xe1f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f2), 0xcb);
        EXPECT(gbc.readMem(0xe1f3), 0x4f);
        // CB 4F 006D
        gbc.setState(0xcb8e, 0x4a96, 0x21c0, 0xd944, 0x936a, 0x6826, 0x1, 0x0);
        gbc.writeMem(0xcb8e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4a96);
        EXPECT(gbc.pc(), 0xcb90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb8e), 0xcb);
        EXPECT(gbc.readMem(0xcb8f), 0x4f);
        // CB 4F 006E
        gbc.setState(0x7ca8, 0x1650, 0x6ae0, 0xa88b, 0x9704, 0x7cf2, 0x1, 0x0);
        gbc.writeMem(0x7ca8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1650);
        EXPECT(gbc.pc(), 0x7caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 006F
        gbc.setState(0x53f3, 0x3c6c, 0xe150, 0x45bf, 0xa746, 0x175d, 0x1, 0x1);
        gbc.writeMem(0x53f3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x3c6c);
        EXPECT(gbc.pc(), 0x53f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0071
        gbc.setState(0x47de, 0xb4c6, 0x6380, 0x8cf, 0xcb32, 0xca7d, 0x0, 0x0);
        gbc.writeMem(0x47de, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb4c6);
        EXPECT(gbc.pc(), 0x47e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0072
        gbc.setState(0x5601, 0xea47, 0xf470, 0x9b5b, 0x90a7, 0x8a36, 0x0, 0x0);
        gbc.writeMem(0x5601, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xea47);
        EXPECT(gbc.pc(), 0x5603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0073
        gbc.setState(0x11fa, 0xda3b, 0x25b0, 0xc9c5, 0xdf2d, 0xd277, 0x1, 0x1);
        gbc.writeMem(0x11fa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xda3b);
        EXPECT(gbc.pc(), 0x11fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0074
        gbc.setState(0x1a9d, 0x7895, 0xed00, 0x35a, 0x8636, 0x1e28, 0x0, 0x0);
        gbc.writeMem(0x1a9d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x7895);
        EXPECT(gbc.pc(), 0x1a9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0075
        gbc.setState(0xa274, 0xa84b, 0x51a0, 0x3d1, 0xbc7, 0x3960, 0x0, 0x1);
        gbc.writeMem(0xa274, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa84b);
        EXPECT(gbc.pc(), 0xa276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa274), 0xcb);
        EXPECT(gbc.readMem(0xa275), 0x4f);
        // CB 4F 0076
        gbc.setState(0xab8e, 0x87ac, 0x6e00, 0x15dd, 0x9043, 0x8be8, 0x1, 0x0);
        gbc.writeMem(0xab8e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x87ac);
        EXPECT(gbc.pc(), 0xab90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab8e), 0xcb);
        EXPECT(gbc.readMem(0xab8f), 0x4f);
        // CB 4F 0077
        gbc.setState(0x4931, 0x3866, 0x3580, 0x5e27, 0x70fe, 0x50aa, 0x1, 0x0);
        gbc.writeMem(0x4931, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3866);
        EXPECT(gbc.pc(), 0x4933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0078
        gbc.setState(0x8e6c, 0x33c9, 0x8930, 0xbbbc, 0x9f0, 0xbc3f, 0x0, 0x1);
        gbc.writeMem(0x8e6c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x33c9);
        EXPECT(gbc.pc(), 0x8e6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e6c), 0xcb);
        EXPECT(gbc.readMem(0x8e6d), 0x4f);
        // CB 4F 0079
        gbc.setState(0x94cc, 0xf298, 0x84a0, 0xb2e, 0xdaa0, 0x9ba6, 0x1, 0x0);
        gbc.writeMem(0x94cc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf298);
        EXPECT(gbc.pc(), 0x94ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94cc), 0xcb);
        EXPECT(gbc.readMem(0x94cd), 0x4f);
        // CB 4F 007A
        gbc.setState(0x170e, 0xe49b, 0xa5d0, 0x911d, 0xa4cd, 0x3c0f, 0x1, 0x0);
        gbc.writeMem(0x170e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xe49b);
        EXPECT(gbc.pc(), 0x1710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 007B
        gbc.setState(0x3e1b, 0xa7c3, 0xc2b0, 0x46ed, 0x9a1f, 0x612d, 0x1, 0x0);
        gbc.writeMem(0x3e1b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa7c3);
        EXPECT(gbc.pc(), 0x3e1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 007C
        gbc.setState(0x6c27, 0x76c3, 0x5740, 0x9630, 0x701c, 0xf544, 0x1, 0x0);
        gbc.writeMem(0x6c27, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x76c3);
        EXPECT(gbc.pc(), 0x6c29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 007D
        gbc.setState(0x13da, 0x11d4, 0x4af0, 0xba84, 0x1362, 0xafe3, 0x1, 0x1);
        gbc.writeMem(0x13da, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x11d4);
        EXPECT(gbc.pc(), 0x13dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 007E
        gbc.setState(0x4ada, 0x7045, 0x6f00, 0xdcf2, 0xa904, 0x8765, 0x0, 0x0);
        gbc.writeMem(0x4ada, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7045);
        EXPECT(gbc.pc(), 0x4adc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 007F
        gbc.setState(0xb0a7, 0x120c, 0xbad0, 0x1302, 0xb315, 0x35fd, 0x0, 0x1);
        gbc.writeMem(0xb0a7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x120c);
        EXPECT(gbc.pc(), 0xb0a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a7), 0xcb);
        EXPECT(gbc.readMem(0xb0a8), 0x4f);
        // CB 4F 0080
        gbc.setState(0xaa3d, 0x8c9e, 0x6bc0, 0xf7f1, 0x7e73, 0xf200, 0x1, 0x1);
        gbc.writeMem(0xaa3d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8c9e);
        EXPECT(gbc.pc(), 0xaa3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa3d), 0xcb);
        EXPECT(gbc.readMem(0xaa3e), 0x4f);
        // CB 4F 0083
        gbc.setState(0x8947, 0x9d5a, 0x5a50, 0xec88, 0xc079, 0x9dd, 0x0, 0x1);
        gbc.writeMem(0x8947, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9d5a);
        EXPECT(gbc.pc(), 0x8949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8947), 0xcb);
        EXPECT(gbc.readMem(0x8948), 0x4f);
        // CB 4F 0084
        gbc.setState(0x4bc9, 0x4c69, 0x17b0, 0xe32c, 0x6b63, 0xeb78, 0x1, 0x1);
        gbc.writeMem(0x4bc9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4c69);
        EXPECT(gbc.pc(), 0x4bcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0085
        gbc.setState(0x2e9e, 0x85b6, 0xacf0, 0x7810, 0xd002, 0x9958, 0x1, 0x0);
        gbc.writeMem(0x2e9e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x85b6);
        EXPECT(gbc.pc(), 0x2ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0086
        gbc.setState(0x77c6, 0xb161, 0xaf00, 0xa52d, 0x4327, 0x5c0d, 0x0, 0x1);
        gbc.writeMem(0x77c6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb161);
        EXPECT(gbc.pc(), 0x77c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0087
        gbc.setState(0x82f3, 0x44fb, 0x2fa0, 0xd1a8, 0x3674, 0xc00a, 0x1, 0x0);
        gbc.writeMem(0x82f3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x44fb);
        EXPECT(gbc.pc(), 0x82f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82f3), 0xcb);
        EXPECT(gbc.readMem(0x82f4), 0x4f);
        // CB 4F 0088
        gbc.setState(0x578c, 0x813c, 0x4b90, 0xcac2, 0x61f8, 0x7048, 0x1, 0x0);
        gbc.writeMem(0x578c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x813c);
        EXPECT(gbc.pc(), 0x578e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0089
        gbc.setState(0xe48, 0x18c8, 0xd3b0, 0x89b8, 0xb43d, 0x3ca3, 0x1, 0x0);
        gbc.writeMem(0xe48, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x18c8);
        EXPECT(gbc.pc(), 0xe4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 008A
        gbc.setState(0x15f2, 0xe05e, 0x76b0, 0x49ad, 0xc47c, 0xb6c5, 0x1, 0x1);
        gbc.writeMem(0x15f2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe05e);
        EXPECT(gbc.pc(), 0x15f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 008B
        gbc.setState(0x5551, 0xeceb, 0x7590, 0xb3fd, 0xc14e, 0xb0b6, 0x0, 0x1);
        gbc.writeMem(0x5551, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xeceb);
        EXPECT(gbc.pc(), 0x5553);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 008C
        gbc.setState(0x655b, 0x3bd3, 0x4b60, 0x6b0b, 0xffc4, 0x1fbb, 0x0, 0x0);
        gbc.writeMem(0x655b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3bd3);
        EXPECT(gbc.pc(), 0x655d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 008D
        gbc.setState(0x3825, 0xbc6e, 0x79d0, 0xb8da, 0x8b89, 0xa30f, 0x1, 0x1);
        gbc.writeMem(0x3825, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbc6e);
        EXPECT(gbc.pc(), 0x3827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 008E
        gbc.setState(0xa8a5, 0x8cdc, 0x7060, 0x844f, 0x57cb, 0xcf4e, 0x1, 0x1);
        gbc.writeMem(0xa8a5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8cdc);
        EXPECT(gbc.pc(), 0xa8a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a5), 0xcb);
        EXPECT(gbc.readMem(0xa8a6), 0x4f);
        // CB 4F 008F
        gbc.setState(0x58d4, 0xf83b, 0x5bc0, 0xb52b, 0xb4ee, 0x958d, 0x1, 0x1);
        gbc.writeMem(0x58d4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf83b);
        EXPECT(gbc.pc(), 0x58d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0090
        gbc.setState(0xecdf, 0xee1d, 0xa610, 0xd6f6, 0x6d17, 0x8add, 0x1, 0x0);
        gbc.writeMem(0xecdf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xee1d);
        EXPECT(gbc.pc(), 0xece1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecdf), 0xcb);
        EXPECT(gbc.readMem(0xece0), 0x4f);
        // CB 4F 0091
        gbc.setState(0x532a, 0x5e1a, 0x5200, 0xd04e, 0x9c70, 0x76e7, 0x0, 0x0);
        gbc.writeMem(0x532a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5e1a);
        EXPECT(gbc.pc(), 0x532c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0092
        gbc.setState(0xc7e, 0x24d3, 0xe3a0, 0xa4c, 0xb6c8, 0xf26a, 0x1, 0x0);
        gbc.writeMem(0xc7e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x24d3);
        EXPECT(gbc.pc(), 0xc80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0093
        gbc.setState(0x444c, 0xb53a, 0x5210, 0x29d6, 0x51f8, 0xfbff, 0x1, 0x1);
        gbc.writeMem(0x444c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb53a);
        EXPECT(gbc.pc(), 0x444e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0094
        gbc.setState(0x9733, 0x2b36, 0x7370, 0xfec5, 0x9190, 0x7545, 0x1, 0x1);
        gbc.writeMem(0x9733, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2b36);
        EXPECT(gbc.pc(), 0x9735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9733), 0xcb);
        EXPECT(gbc.readMem(0x9734), 0x4f);
        // CB 4F 0095
        gbc.setState(0xa64c, 0xe59f, 0x66a0, 0x1cac, 0x5c, 0x9eaa, 0x0, 0x0);
        gbc.writeMem(0xa64c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe59f);
        EXPECT(gbc.pc(), 0xa64e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa64c), 0xcb);
        EXPECT(gbc.readMem(0xa64d), 0x4f);
        // CB 4F 0096
        gbc.setState(0x693e, 0x531b, 0xa120, 0x2032, 0xc253, 0x6b6e, 0x1, 0x0);
        gbc.writeMem(0x693e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x531b);
        EXPECT(gbc.pc(), 0x6940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0097
        gbc.setState(0x8718, 0xd417, 0x35c0, 0xa072, 0xf07c, 0x4d9f, 0x0, 0x1);
        gbc.writeMem(0x8718, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd417);
        EXPECT(gbc.pc(), 0x871a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8718), 0xcb);
        EXPECT(gbc.readMem(0x8719), 0x4f);
        // CB 4F 009A
        gbc.setState(0x4c10, 0x93db, 0x9d60, 0x42e3, 0x86bd, 0xabf, 0x1, 0x0);
        gbc.writeMem(0x4c10, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x93db);
        EXPECT(gbc.pc(), 0x4c12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 009B
        gbc.setState(0x293, 0xc93f, 0x63f0, 0x2aa6, 0xb8bd, 0x7120, 0x0, 0x0);
        gbc.writeMem(0x293, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc93f);
        EXPECT(gbc.pc(), 0x295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 009C
        gbc.setState(0x8926, 0x6112, 0xd1f0, 0x2488, 0x2f1b, 0x122f, 0x1, 0x0);
        gbc.writeMem(0x8926, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6112);
        EXPECT(gbc.pc(), 0x8928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8926), 0xcb);
        EXPECT(gbc.readMem(0x8927), 0x4f);
        // CB 4F 009D
        gbc.setState(0x7ff6, 0xb84a, 0xc0a0, 0x4066, 0xc6f7, 0x1bee, 0x1, 0x1);
        gbc.writeMem(0x7ff6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb84a);
        EXPECT(gbc.pc(), 0x7ff8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 009E
        gbc.setState(0x4252, 0xea20, 0xb840, 0x3be1, 0xb500, 0xa9a6, 0x0, 0x1);
        gbc.writeMem(0x4252, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xea20);
        EXPECT(gbc.pc(), 0x4254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 009F
        gbc.setState(0xddde, 0x24c0, 0x2970, 0x5e7f, 0xc2f6, 0x736a, 0x1, 0x0);
        gbc.writeMem(0xddde, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x24c0);
        EXPECT(gbc.pc(), 0xdde0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddde), 0xcb);
        EXPECT(gbc.readMem(0xdddf), 0x4f);
        // CB 4F 00A0
        gbc.setState(0xba41, 0x7d3d, 0x5d30, 0x4ba0, 0xbd7e, 0x2c53, 0x0, 0x1);
        gbc.writeMem(0xba41, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7d3d);
        EXPECT(gbc.pc(), 0xba43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba41), 0xcb);
        EXPECT(gbc.readMem(0xba42), 0x4f);
        // CB 4F 00A1
        gbc.setState(0xe175, 0x4d74, 0x4540, 0x1f3f, 0xff26, 0xda7f, 0x1, 0x0);
        gbc.writeMem(0xe175, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4d74);
        EXPECT(gbc.pc(), 0xe177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe175), 0xcb);
        EXPECT(gbc.readMem(0xe176), 0x4f);
        // CB 4F 00A2
        gbc.setState(0xab05, 0x95cb, 0x8610, 0x9677, 0xf9ec, 0x2466, 0x1, 0x1);
        gbc.writeMem(0xab05, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x95cb);
        EXPECT(gbc.pc(), 0xab07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab05), 0xcb);
        EXPECT(gbc.readMem(0xab06), 0x4f);
        // CB 4F 00A3
        gbc.setState(0x531c, 0x865f, 0x4bf0, 0xac12, 0xa88d, 0x43fa, 0x0, 0x0);
        gbc.writeMem(0x531c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x865f);
        EXPECT(gbc.pc(), 0x531e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00A4
        gbc.setState(0x2f9e, 0xe593, 0xd140, 0xddb, 0x4ade, 0x522a, 0x1, 0x0);
        gbc.writeMem(0x2f9e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe593);
        EXPECT(gbc.pc(), 0x2fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00A5
        gbc.setState(0xc249, 0x99c4, 0xbcb0, 0x495c, 0xc2be, 0x417c, 0x1, 0x1);
        gbc.writeMem(0xc249, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x99c4);
        EXPECT(gbc.pc(), 0xc24b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc249), 0xcb);
        EXPECT(gbc.readMem(0xc24a), 0x4f);
        // CB 4F 00A6
        gbc.setState(0xac65, 0xdd95, 0xeff0, 0xf7c7, 0x49f, 0x6cc8, 0x1, 0x1);
        gbc.writeMem(0xac65, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdd95);
        EXPECT(gbc.pc(), 0xac67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac65), 0xcb);
        EXPECT(gbc.readMem(0xac66), 0x4f);
        // CB 4F 00A7
        gbc.setState(0xa58d, 0x5cc2, 0x14b0, 0xc35e, 0xb439, 0xed0, 0x1, 0x1);
        gbc.writeMem(0xa58d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5cc2);
        EXPECT(gbc.pc(), 0xa58f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa58d), 0xcb);
        EXPECT(gbc.readMem(0xa58e), 0x4f);
        // CB 4F 00A8
        gbc.setState(0x7b77, 0xbdb3, 0xbc20, 0x5132, 0xb4fe, 0x7077, 0x1, 0x0);
        gbc.writeMem(0x7b77, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xbdb3);
        EXPECT(gbc.pc(), 0x7b79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00A9
        gbc.setState(0x8ba0, 0x2c7b, 0xc2d0, 0x893a, 0x6434, 0xa62a, 0x0, 0x1);
        gbc.writeMem(0x8ba0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2c7b);
        EXPECT(gbc.pc(), 0x8ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba0), 0xcb);
        EXPECT(gbc.readMem(0x8ba1), 0x4f);
        // CB 4F 00AA
        gbc.setState(0x10cc, 0xf242, 0x5ce0, 0xd7f5, 0x2a4e, 0x36f, 0x0, 0x0);
        gbc.writeMem(0x10cc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf242);
        EXPECT(gbc.pc(), 0x10ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00AB
        gbc.setState(0xc0a8, 0x71b6, 0x5350, 0xbae5, 0xa5e4, 0x263f, 0x0, 0x0);
        gbc.writeMem(0xc0a8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x71b6);
        EXPECT(gbc.pc(), 0xc0aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0a8), 0xcb);
        EXPECT(gbc.readMem(0xc0a9), 0x4f);
        // CB 4F 00AC
        gbc.setState(0x9ae8, 0x6310, 0xac00, 0xbfd2, 0x5d07, 0xed0c, 0x0, 0x1);
        gbc.writeMem(0x9ae8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6310);
        EXPECT(gbc.pc(), 0x9aea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae8), 0xcb);
        EXPECT(gbc.readMem(0x9ae9), 0x4f);
        // CB 4F 00AD
        gbc.setState(0x7f7, 0x5bee, 0x4cd0, 0x5845, 0xd483, 0x4c12, 0x1, 0x0);
        gbc.writeMem(0x7f7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5bee);
        EXPECT(gbc.pc(), 0x7f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00AF
        gbc.setState(0xad5b, 0xd147, 0x69b0, 0xeee9, 0x26f, 0xbe21, 0x1, 0x1);
        gbc.writeMem(0xad5b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd147);
        EXPECT(gbc.pc(), 0xad5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad5b), 0xcb);
        EXPECT(gbc.readMem(0xad5c), 0x4f);
        // CB 4F 00B0
        gbc.setState(0xeacc, 0x440e, 0xba60, 0xa227, 0x25a8, 0x3dc0, 0x0, 0x1);
        gbc.writeMem(0xeacc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x440e);
        EXPECT(gbc.pc(), 0xeace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeacc), 0xcb);
        EXPECT(gbc.readMem(0xeacd), 0x4f);
        // CB 4F 00B1
        gbc.setState(0xca9, 0xc52b, 0x3390, 0xeb76, 0x6477, 0x521e, 0x1, 0x1);
        gbc.writeMem(0xca9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc52b);
        EXPECT(gbc.pc(), 0xcab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00B2
        gbc.setState(0xb5fc, 0x37c4, 0xd590, 0x47a9, 0x5d75, 0x7536, 0x1, 0x0);
        gbc.writeMem(0xb5fc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x37c4);
        EXPECT(gbc.pc(), 0xb5fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5fc), 0xcb);
        EXPECT(gbc.readMem(0xb5fd), 0x4f);
        // CB 4F 00B3
        gbc.setState(0x7699, 0x7710, 0x1130, 0x5f0d, 0x787d, 0x839d, 0x0, 0x0);
        gbc.writeMem(0x7699, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7710);
        EXPECT(gbc.pc(), 0x769b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00B4
        gbc.setState(0x9744, 0xb359, 0xc630, 0x2d57, 0xa8b5, 0xeb1, 0x0, 0x1);
        gbc.writeMem(0x9744, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb359);
        EXPECT(gbc.pc(), 0x9746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9744), 0xcb);
        EXPECT(gbc.readMem(0x9745), 0x4f);
        // CB 4F 00B5
        gbc.setState(0xa890, 0xd639, 0x3840, 0xafca, 0x3a6b, 0xffdd, 0x1, 0x0);
        gbc.writeMem(0xa890, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd639);
        EXPECT(gbc.pc(), 0xa892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa890), 0xcb);
        EXPECT(gbc.readMem(0xa891), 0x4f);
        // CB 4F 00B6
        gbc.setState(0x60, 0xd7b6, 0x61f0, 0x78a, 0x7a22, 0xe2d6, 0x0, 0x0);
        gbc.writeMem(0x60, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd7b6);
        EXPECT(gbc.pc(), 0x62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00B7
        gbc.setState(0xe69e, 0x70a6, 0xe850, 0xe19f, 0x52d3, 0x7cec, 0x1, 0x0);
        gbc.writeMem(0xe69e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x70a6);
        EXPECT(gbc.pc(), 0xe6a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe69e), 0xcb);
        EXPECT(gbc.readMem(0xe69f), 0x4f);
        // CB 4F 00B8
        gbc.setState(0xb67e, 0xd0a6, 0xe1b0, 0xf148, 0xc3d7, 0x5137, 0x1, 0x0);
        gbc.writeMem(0xb67e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd0a6);
        EXPECT(gbc.pc(), 0xb680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb67e), 0xcb);
        EXPECT(gbc.readMem(0xb67f), 0x4f);
        // CB 4F 00B9
        gbc.setState(0x72ac, 0x2cfc, 0x2c80, 0xb799, 0x5636, 0xc36f, 0x1, 0x1);
        gbc.writeMem(0x72ac, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2cfc);
        EXPECT(gbc.pc(), 0x72ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00BA
        gbc.setState(0x6d48, 0xa082, 0x1ea0, 0x2c6e, 0x1813, 0xe34, 0x0, 0x1);
        gbc.writeMem(0x6d48, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa082);
        EXPECT(gbc.pc(), 0x6d4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00BB
        gbc.setState(0x275b, 0x4aa1, 0x6c70, 0xed2b, 0x6552, 0x6f61, 0x1, 0x1);
        gbc.writeMem(0x275b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4aa1);
        EXPECT(gbc.pc(), 0x275d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00BC
        gbc.setState(0xcae0, 0x29bc, 0x23d0, 0x3ac, 0x1727, 0x2db0, 0x1, 0x0);
        gbc.writeMem(0xcae0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x29bc);
        EXPECT(gbc.pc(), 0xcae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcae0), 0xcb);
        EXPECT(gbc.readMem(0xcae1), 0x4f);
        // CB 4F 00BD
        gbc.setState(0x8fa5, 0x9045, 0x150, 0x3bda, 0xe017, 0x4528, 0x0, 0x0);
        gbc.writeMem(0x8fa5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9045);
        EXPECT(gbc.pc(), 0x8fa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa5), 0xcb);
        EXPECT(gbc.readMem(0x8fa6), 0x4f);
        // CB 4F 00BE
        gbc.setState(0x1ef7, 0x849e, 0x51c0, 0x6726, 0xc49e, 0x4c7f, 0x1, 0x1);
        gbc.writeMem(0x1ef7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x849e);
        EXPECT(gbc.pc(), 0x1ef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00BF
        gbc.setState(0x8d88, 0x4f2b, 0x2d30, 0xf81b, 0xabe5, 0x392a, 0x0, 0x1);
        gbc.writeMem(0x8d88, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4f2b);
        EXPECT(gbc.pc(), 0x8d8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d88), 0xcb);
        EXPECT(gbc.readMem(0x8d89), 0x4f);
        // CB 4F 00C0
        gbc.setState(0x90c9, 0x4cee, 0xb880, 0x8837, 0x495, 0x38b7, 0x0, 0x0);
        gbc.writeMem(0x90c9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4cee);
        EXPECT(gbc.pc(), 0x90cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c9), 0xcb);
        EXPECT(gbc.readMem(0x90ca), 0x4f);
        // CB 4F 00C1
        gbc.setState(0x90c4, 0xb21f, 0x5be0, 0x16ca, 0xd952, 0xed33, 0x0, 0x0);
        gbc.writeMem(0x90c4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb21f);
        EXPECT(gbc.pc(), 0x90c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c4), 0xcb);
        EXPECT(gbc.readMem(0x90c5), 0x4f);
        // CB 4F 00C2
        gbc.setState(0x679e, 0xf3fe, 0xd560, 0xb2dc, 0xca9, 0xb4f1, 0x1, 0x0);
        gbc.writeMem(0x679e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xf3fe);
        EXPECT(gbc.pc(), 0x67a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00C3
        gbc.setState(0x554d, 0x5534, 0x2740, 0xd173, 0x2f5d, 0xe22b, 0x0, 0x0);
        gbc.writeMem(0x554d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5534);
        EXPECT(gbc.pc(), 0x554f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00C4
        gbc.setState(0x96c2, 0xb8dd, 0xc6a0, 0x8ef9, 0x202e, 0x426e, 0x1, 0x1);
        gbc.writeMem(0x96c2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb8dd);
        EXPECT(gbc.pc(), 0x96c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c2), 0xcb);
        EXPECT(gbc.readMem(0x96c3), 0x4f);
        // CB 4F 00C5
        gbc.setState(0x978b, 0xa662, 0xe810, 0x3715, 0x885b, 0x9e15, 0x1, 0x0);
        gbc.writeMem(0x978b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa662);
        EXPECT(gbc.pc(), 0x978d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x978b), 0xcb);
        EXPECT(gbc.readMem(0x978c), 0x4f);
        // CB 4F 00C6
        gbc.setState(0x773b, 0x74d2, 0xd580, 0x3148, 0x6db6, 0xe60c, 0x0, 0x0);
        gbc.writeMem(0x773b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x74d2);
        EXPECT(gbc.pc(), 0x773d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00C7
        gbc.setState(0xbb4d, 0xb866, 0x3350, 0x3785, 0x6717, 0x6d24, 0x1, 0x1);
        gbc.writeMem(0xbb4d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb866);
        EXPECT(gbc.pc(), 0xbb4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb4d), 0xcb);
        EXPECT(gbc.readMem(0xbb4e), 0x4f);
        // CB 4F 00C8
        gbc.setState(0x8bf8, 0x3d0c, 0x8b40, 0xe02d, 0xaf1a, 0x639b, 0x1, 0x0);
        gbc.writeMem(0x8bf8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3d0c);
        EXPECT(gbc.pc(), 0x8bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf8), 0xcb);
        EXPECT(gbc.readMem(0x8bf9), 0x4f);
        // CB 4F 00C9
        gbc.setState(0x75d8, 0x6398, 0xeac0, 0x99c4, 0x3ba0, 0x739c, 0x1, 0x1);
        gbc.writeMem(0x75d8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6398);
        EXPECT(gbc.pc(), 0x75da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00CA
        gbc.setState(0x57c7, 0x9537, 0x8910, 0x7886, 0x83d5, 0x769e, 0x1, 0x0);
        gbc.writeMem(0x57c7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9537);
        EXPECT(gbc.pc(), 0x57c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00CC
        gbc.setState(0x660b, 0x1005, 0x7600, 0x33e1, 0xc3ee, 0x1266, 0x0, 0x1);
        gbc.writeMem(0x660b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1005);
        EXPECT(gbc.pc(), 0x660d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00CD
        gbc.setState(0x6c43, 0xa102, 0xa380, 0xdbf7, 0x1c40, 0x99b7, 0x1, 0x0);
        gbc.writeMem(0x6c43, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa102);
        EXPECT(gbc.pc(), 0x6c45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00CE
        gbc.setState(0x766e, 0x8b9d, 0x4c0, 0x2181, 0xd299, 0x394d, 0x0, 0x0);
        gbc.writeMem(0x766e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8b9d);
        EXPECT(gbc.pc(), 0x7670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00CF
        gbc.setState(0x5ba8, 0xe24, 0xdd10, 0xb023, 0x72be, 0x73c9, 0x1, 0x0);
        gbc.writeMem(0x5ba8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe24);
        EXPECT(gbc.pc(), 0x5baa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00D0
        gbc.setState(0xa113, 0x3e15, 0xe900, 0xc007, 0x3ae, 0x41c, 0x1, 0x1);
        gbc.writeMem(0xa113, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3e15);
        EXPECT(gbc.pc(), 0xa115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa113), 0xcb);
        EXPECT(gbc.readMem(0xa114), 0x4f);
        // CB 4F 00D1
        gbc.setState(0x43ba, 0x8579, 0xd830, 0xa2f6, 0x5c3e, 0xbff6, 0x0, 0x1);
        gbc.writeMem(0x43ba, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8579);
        EXPECT(gbc.pc(), 0x43bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00D2
        gbc.setState(0x940b, 0x954e, 0xa3b0, 0xe7af, 0x95ad, 0x2e22, 0x0, 0x0);
        gbc.writeMem(0x940b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x954e);
        EXPECT(gbc.pc(), 0x940d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940b), 0xcb);
        EXPECT(gbc.readMem(0x940c), 0x4f);
        // CB 4F 00D3
        gbc.setState(0x184c, 0x6dd6, 0x8aa0, 0x287e, 0xb429, 0xa19a, 0x0, 0x1);
        gbc.writeMem(0x184c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x6dd6);
        EXPECT(gbc.pc(), 0x184e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00D4
        gbc.setState(0xd9a9, 0xf8d, 0x38c0, 0xb30c, 0x990, 0xeed3, 0x1, 0x0);
        gbc.writeMem(0xd9a9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf8d);
        EXPECT(gbc.pc(), 0xd9ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a9), 0xcb);
        EXPECT(gbc.readMem(0xd9aa), 0x4f);
        // CB 4F 00D5
        gbc.setState(0x1d86, 0x9518, 0x2370, 0x624d, 0xf9c0, 0x7dfd, 0x0, 0x0);
        gbc.writeMem(0x1d86, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9518);
        EXPECT(gbc.pc(), 0x1d88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00D6
        gbc.setState(0xdb8a, 0xba44, 0xabe0, 0x6a39, 0x4b59, 0xc55d, 0x1, 0x0);
        gbc.writeMem(0xdb8a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xba44);
        EXPECT(gbc.pc(), 0xdb8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb8a), 0xcb);
        EXPECT(gbc.readMem(0xdb8b), 0x4f);
        // CB 4F 00D7
        gbc.setState(0x4385, 0xd437, 0xb260, 0x8d42, 0xe13, 0xef1e, 0x0, 0x0);
        gbc.writeMem(0x4385, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd437);
        EXPECT(gbc.pc(), 0x4387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00D8
        gbc.setState(0xceaa, 0x18a6, 0xc740, 0x62b3, 0xec62, 0x260, 0x0, 0x0);
        gbc.writeMem(0xceaa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x18a6);
        EXPECT(gbc.pc(), 0xceac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceaa), 0xcb);
        EXPECT(gbc.readMem(0xceab), 0x4f);
        // CB 4F 00D9
        gbc.setState(0x25ed, 0x2f7e, 0x34a0, 0x9c76, 0x7d7f, 0x69c, 0x0, 0x1);
        gbc.writeMem(0x25ed, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2f7e);
        EXPECT(gbc.pc(), 0x25ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00DA
        gbc.setState(0x35e2, 0x249e, 0x590, 0x1b6d, 0xac1b, 0x72e4, 0x0, 0x0);
        gbc.writeMem(0x35e2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x249e);
        EXPECT(gbc.pc(), 0x35e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00DB
        gbc.setState(0x806, 0xdc4b, 0x4730, 0xd0bd, 0xbe0d, 0x4dd2, 0x1, 0x0);
        gbc.writeMem(0x806, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xdc4b);
        EXPECT(gbc.pc(), 0x808);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00DC
        gbc.setState(0xa40e, 0x3883, 0x58e0, 0x1bc4, 0x2125, 0xc7d2, 0x1, 0x0);
        gbc.writeMem(0xa40e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3883);
        EXPECT(gbc.pc(), 0xa410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa40e), 0xcb);
        EXPECT(gbc.readMem(0xa40f), 0x4f);
        // CB 4F 00DD
        gbc.setState(0xe2dc, 0x7f9b, 0x1610, 0x4257, 0x2d15, 0x3c3f, 0x1, 0x0);
        gbc.writeMem(0xe2dc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7f9b);
        EXPECT(gbc.pc(), 0xe2de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2dc), 0xcb);
        EXPECT(gbc.readMem(0xe2dd), 0x4f);
        // CB 4F 00DE
        gbc.setState(0x9432, 0x8a3b, 0x5f60, 0x1bfe, 0xbf93, 0x529a, 0x1, 0x0);
        gbc.writeMem(0x9432, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8a3b);
        EXPECT(gbc.pc(), 0x9434);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9432), 0xcb);
        EXPECT(gbc.readMem(0x9433), 0x4f);
        // CB 4F 00DF
        gbc.setState(0x92ae, 0x5613, 0x1230, 0x5bc, 0x2bbf, 0xdf03, 0x1, 0x1);
        gbc.writeMem(0x92ae, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5613);
        EXPECT(gbc.pc(), 0x92b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92ae), 0xcb);
        EXPECT(gbc.readMem(0x92af), 0x4f);
        // CB 4F 00E0
        gbc.setState(0x5788, 0xa2d5, 0x2170, 0x2172, 0x142f, 0x4d77, 0x0, 0x0);
        gbc.writeMem(0x5788, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa2d5);
        EXPECT(gbc.pc(), 0x578a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00E1
        gbc.setState(0x2f06, 0xee10, 0x86f0, 0xd871, 0x162c, 0x820b, 0x1, 0x0);
        gbc.writeMem(0x2f06, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xee10);
        EXPECT(gbc.pc(), 0x2f08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00E2
        gbc.setState(0x855e, 0xe36b, 0xa110, 0xc359, 0x5cd1, 0x5e62, 0x0, 0x0);
        gbc.writeMem(0x855e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe36b);
        EXPECT(gbc.pc(), 0x8560);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x855e), 0xcb);
        EXPECT(gbc.readMem(0x855f), 0x4f);
        // CB 4F 00E3
        gbc.setState(0xb0b3, 0x87d7, 0xfe40, 0xdf76, 0xf4df, 0x5e7d, 0x1, 0x0);
        gbc.writeMem(0xb0b3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x87d7);
        EXPECT(gbc.pc(), 0xb0b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0b3), 0xcb);
        EXPECT(gbc.readMem(0xb0b4), 0x4f);
        // CB 4F 00E4
        gbc.setState(0xe1f9, 0xf68b, 0xe410, 0x3358, 0x794, 0x98b8, 0x0, 0x1);
        gbc.writeMem(0xe1f9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf68b);
        EXPECT(gbc.pc(), 0xe1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1f9), 0xcb);
        EXPECT(gbc.readMem(0xe1fa), 0x4f);
        // CB 4F 00E5
        gbc.setState(0x5c64, 0x5e49, 0x3a70, 0xdf94, 0xb75b, 0x696b, 0x1, 0x1);
        gbc.writeMem(0x5c64, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5e49);
        EXPECT(gbc.pc(), 0x5c66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00E6
        gbc.setState(0x41b0, 0x1c36, 0xb300, 0xaa91, 0x5d19, 0xa5bb, 0x0, 0x0);
        gbc.writeMem(0x41b0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1c36);
        EXPECT(gbc.pc(), 0x41b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00E7
        gbc.setState(0xafa4, 0xa5ac, 0x70c0, 0x64cf, 0x463a, 0xdec5, 0x0, 0x1);
        gbc.writeMem(0xafa4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa5ac);
        EXPECT(gbc.pc(), 0xafa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa4), 0xcb);
        EXPECT(gbc.readMem(0xafa5), 0x4f);
        // CB 4F 00E8
        gbc.setState(0xd649, 0x2ddb, 0xe560, 0x389c, 0xeea, 0x5e78, 0x0, 0x1);
        gbc.writeMem(0xd649, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2ddb);
        EXPECT(gbc.pc(), 0xd64b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd649), 0xcb);
        EXPECT(gbc.readMem(0xd64a), 0x4f);
        // CB 4F 00E9
        gbc.setState(0x56f2, 0xb515, 0x5990, 0xa8b8, 0x6a01, 0xd394, 0x1, 0x1);
        gbc.writeMem(0x56f2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb515);
        EXPECT(gbc.pc(), 0x56f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00EA
        gbc.setState(0x3d0, 0x3516, 0x6c50, 0xbca5, 0xf84a, 0xd72d, 0x0, 0x0);
        gbc.writeMem(0x3d0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3516);
        EXPECT(gbc.pc(), 0x3d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00EB
        gbc.setState(0x6157, 0xe137, 0x4430, 0xb127, 0x8ee1, 0xab5e, 0x0, 0x0);
        gbc.writeMem(0x6157, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe137);
        EXPECT(gbc.pc(), 0x6159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00EC
        gbc.setState(0x410, 0x497f, 0x4120, 0x2764, 0xcc58, 0xf9e2, 0x1, 0x1);
        gbc.writeMem(0x410, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x497f);
        EXPECT(gbc.pc(), 0x412);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00ED
        gbc.setState(0xbab5, 0x9122, 0x3fb0, 0x5bbb, 0x487c, 0xf25c, 0x1, 0x1);
        gbc.writeMem(0xbab5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9122);
        EXPECT(gbc.pc(), 0xbab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbab5), 0xcb);
        EXPECT(gbc.readMem(0xbab6), 0x4f);
        // CB 4F 00EE
        gbc.setState(0x1bf1, 0xaa0e, 0xee40, 0x6863, 0x858, 0xf21e, 0x1, 0x0);
        gbc.writeMem(0x1bf1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xaa0e);
        EXPECT(gbc.pc(), 0x1bf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00EF
        gbc.setState(0x977f, 0x20d, 0xd40, 0x541c, 0x676f, 0xfa7a, 0x1, 0x1);
        gbc.writeMem(0x977f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x20d);
        EXPECT(gbc.pc(), 0x9781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x977f), 0xcb);
        EXPECT(gbc.readMem(0x9780), 0x4f);
        // CB 4F 00F0
        gbc.setState(0x6794, 0x97ef, 0x86f0, 0x62e3, 0xd995, 0x8a03, 0x1, 0x0);
        gbc.writeMem(0x6794, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x97ef);
        EXPECT(gbc.pc(), 0x6796);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00F1
        gbc.setState(0x98e2, 0x253f, 0x630, 0x89f5, 0x64c4, 0xd9b8, 0x0, 0x0);
        gbc.writeMem(0x98e2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x253f);
        EXPECT(gbc.pc(), 0x98e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e2), 0xcb);
        EXPECT(gbc.readMem(0x98e3), 0x4f);
        // CB 4F 00F2
        gbc.setState(0x1851, 0xb6f2, 0x3430, 0xba1c, 0x31cb, 0x69c1, 0x0, 0x0);
        gbc.writeMem(0x1851, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb6f2);
        EXPECT(gbc.pc(), 0x1853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00F3
        gbc.setState(0xc01b, 0x1e7f, 0x3910, 0xb70f, 0x8324, 0xb81b, 0x1, 0x1);
        gbc.writeMem(0xc01b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1e7f);
        EXPECT(gbc.pc(), 0xc01d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc01b), 0xcb);
        EXPECT(gbc.readMem(0xc01c), 0x4f);
        // CB 4F 00F4
        gbc.setState(0x2928, 0xd095, 0xf1f0, 0x39c7, 0x832e, 0x61a5, 0x1, 0x0);
        gbc.writeMem(0x2928, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd095);
        EXPECT(gbc.pc(), 0x292a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00F5
        gbc.setState(0x20bc, 0x995c, 0xc7e0, 0x99d4, 0x66e5, 0xe1f8, 0x1, 0x0);
        gbc.writeMem(0x20bc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x995c);
        EXPECT(gbc.pc(), 0x20be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00F7
        gbc.setState(0x3a33, 0x33a1, 0xee00, 0xa761, 0x51d6, 0x37c9, 0x1, 0x0);
        gbc.writeMem(0x3a33, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x33a1);
        EXPECT(gbc.pc(), 0x3a35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00F8
        gbc.setState(0x9b62, 0xe32b, 0x93c0, 0x1078, 0x4ac6, 0x10d0, 0x0, 0x1);
        gbc.writeMem(0x9b62, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe32b);
        EXPECT(gbc.pc(), 0x9b64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b62), 0xcb);
        EXPECT(gbc.readMem(0x9b63), 0x4f);
        // CB 4F 00F9
        gbc.setState(0x1615, 0x20ff, 0x6ee0, 0xbc83, 0x6e13, 0x5013, 0x0, 0x0);
        gbc.writeMem(0x1615, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x20ff);
        EXPECT(gbc.pc(), 0x1617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00FB
        gbc.setState(0xf28, 0xa3f9, 0x4a00, 0x743e, 0xe114, 0x6f3e, 0x1, 0x1);
        gbc.writeMem(0xf28, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa3f9);
        EXPECT(gbc.pc(), 0xf2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 00FC
        gbc.setState(0xb2ca, 0x15d2, 0x9e10, 0x83f2, 0xdb55, 0x57b4, 0x1, 0x0);
        gbc.writeMem(0xb2ca, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x15d2);
        EXPECT(gbc.pc(), 0xb2cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ca), 0xcb);
        EXPECT(gbc.readMem(0xb2cb), 0x4f);
        // CB 4F 00FD
        gbc.setState(0xf4b, 0x274f, 0xa710, 0xba38, 0x8e75, 0x97d, 0x1, 0x1);
        gbc.writeMem(0xf4b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x274f);
        EXPECT(gbc.pc(), 0xf4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00FE
        gbc.setState(0xf7a, 0xdc18, 0x8bf0, 0x3394, 0x2df6, 0xcdf8, 0x0, 0x1);
        gbc.writeMem(0xf7a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xdc18);
        EXPECT(gbc.pc(), 0xf7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 00FF
        gbc.setState(0x4819, 0x78f6, 0x2790, 0xb4e7, 0x9ceb, 0x82d3, 0x0, 0x1);
        gbc.writeMem(0x4819, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x78f6);
        EXPECT(gbc.pc(), 0x481b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0101
        gbc.setState(0xa169, 0xb14c, 0x6280, 0x1b30, 0xc65f, 0xcac6, 0x1, 0x0);
        gbc.writeMem(0xa169, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb14c);
        EXPECT(gbc.pc(), 0xa16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa169), 0xcb);
        EXPECT(gbc.readMem(0xa16a), 0x4f);
        // CB 4F 0102
        gbc.setState(0xa2f7, 0x69d5, 0xb1b0, 0xa695, 0x2e48, 0x63fc, 0x1, 0x0);
        gbc.writeMem(0xa2f7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x69d5);
        EXPECT(gbc.pc(), 0xa2f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2f7), 0xcb);
        EXPECT(gbc.readMem(0xa2f8), 0x4f);
        // CB 4F 0103
        gbc.setState(0x759c, 0x25b, 0xe460, 0x458b, 0x4693, 0xed73, 0x1, 0x0);
        gbc.writeMem(0x759c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x25b);
        EXPECT(gbc.pc(), 0x759e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0104
        gbc.setState(0xafa6, 0xaf37, 0x8ee0, 0x58a1, 0x3980, 0x7960, 0x0, 0x1);
        gbc.writeMem(0xafa6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xaf37);
        EXPECT(gbc.pc(), 0xafa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa6), 0xcb);
        EXPECT(gbc.readMem(0xafa7), 0x4f);
        // CB 4F 0105
        gbc.setState(0x4a3a, 0xa418, 0x7aa0, 0xc63f, 0xf70d, 0xccc9, 0x1, 0x0);
        gbc.writeMem(0x4a3a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa418);
        EXPECT(gbc.pc(), 0x4a3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0106
        gbc.setState(0x7362, 0xc42c, 0xa360, 0x21b7, 0x65b4, 0x17ea, 0x0, 0x1);
        gbc.writeMem(0x7362, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc42c);
        EXPECT(gbc.pc(), 0x7364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0107
        gbc.setState(0xa1f2, 0x7efe, 0x8c0, 0xab79, 0x3c68, 0xf221, 0x0, 0x1);
        gbc.writeMem(0xa1f2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7efe);
        EXPECT(gbc.pc(), 0xa1f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f2), 0xcb);
        EXPECT(gbc.readMem(0xa1f3), 0x4f);
        // CB 4F 0108
        gbc.setState(0x8ba, 0xf524, 0x88d0, 0x557c, 0xef20, 0xca67, 0x0, 0x0);
        gbc.writeMem(0x8ba, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf524);
        EXPECT(gbc.pc(), 0x8bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0109
        gbc.setState(0x5cd4, 0x38b6, 0x6f70, 0x5f22, 0x13dd, 0x622d, 0x1, 0x0);
        gbc.writeMem(0x5cd4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x38b6);
        EXPECT(gbc.pc(), 0x5cd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 010A
        gbc.setState(0xc0f4, 0x469d, 0x81f0, 0x3d70, 0xe77f, 0x28b4, 0x0, 0x1);
        gbc.writeMem(0xc0f4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x469d);
        EXPECT(gbc.pc(), 0xc0f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0f4), 0xcb);
        EXPECT(gbc.readMem(0xc0f5), 0x4f);
        // CB 4F 010B
        gbc.setState(0xe2c3, 0xd82c, 0x8da0, 0x5610, 0x6ed2, 0xa96d, 0x0, 0x0);
        gbc.writeMem(0xe2c3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd82c);
        EXPECT(gbc.pc(), 0xe2c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2c3), 0xcb);
        EXPECT(gbc.readMem(0xe2c4), 0x4f);
        // CB 4F 010C
        gbc.setState(0x418c, 0x75e6, 0x6ca0, 0xd165, 0xd926, 0xb73d, 0x0, 0x0);
        gbc.writeMem(0x418c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x75e6);
        EXPECT(gbc.pc(), 0x418e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 010D
        gbc.setState(0x1efd, 0xcbe, 0x6710, 0x57d0, 0x69a8, 0x173f, 0x1, 0x0);
        gbc.writeMem(0x1efd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xcbe);
        EXPECT(gbc.pc(), 0x1eff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 010E
        gbc.setState(0x2d0f, 0x2849, 0x9080, 0x8b01, 0x7647, 0x8bbe, 0x1, 0x0);
        gbc.writeMem(0x2d0f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2849);
        EXPECT(gbc.pc(), 0x2d11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 010F
        gbc.setState(0xe, 0xe217, 0x33f0, 0xa2c7, 0xb25f, 0xa7aa, 0x0, 0x0);
        gbc.writeMem(0xe, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe217);
        EXPECT(gbc.pc(), 0x10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0111
        gbc.setState(0x551b, 0x33c4, 0xab30, 0x44d5, 0x401d, 0x9b44, 0x1, 0x0);
        gbc.writeMem(0x551b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x33c4);
        EXPECT(gbc.pc(), 0x551d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0112
        gbc.setState(0x90f9, 0x51df, 0xb9e0, 0x2d07, 0x2d42, 0x978, 0x1, 0x0);
        gbc.writeMem(0x90f9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x51df);
        EXPECT(gbc.pc(), 0x90fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f9), 0xcb);
        EXPECT(gbc.readMem(0x90fa), 0x4f);
        // CB 4F 0113
        gbc.setState(0x868, 0xb17b, 0x6eb0, 0x6d79, 0xc29b, 0xb215, 0x1, 0x0);
        gbc.writeMem(0x868, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb17b);
        EXPECT(gbc.pc(), 0x86a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0114
        gbc.setState(0xd2c8, 0x8624, 0x9a80, 0xd53e, 0xf048, 0xb65f, 0x1, 0x1);
        gbc.writeMem(0xd2c8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8624);
        EXPECT(gbc.pc(), 0xd2ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2c8), 0xcb);
        EXPECT(gbc.readMem(0xd2c9), 0x4f);
        // CB 4F 0115
        gbc.setState(0xccb7, 0x7779, 0x9c60, 0x177e, 0x3d4b, 0x62f4, 0x1, 0x1);
        gbc.writeMem(0xccb7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7779);
        EXPECT(gbc.pc(), 0xccb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb7), 0xcb);
        EXPECT(gbc.readMem(0xccb8), 0x4f);
        // CB 4F 0116
        gbc.setState(0xc9af, 0xd08d, 0xfd40, 0xbc7c, 0x7905, 0x6868, 0x1, 0x0);
        gbc.writeMem(0xc9af, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd08d);
        EXPECT(gbc.pc(), 0xc9b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9af), 0xcb);
        EXPECT(gbc.readMem(0xc9b0), 0x4f);
        // CB 4F 0117
        gbc.setState(0xb998, 0xcd05, 0xfa50, 0x5f5b, 0x12fd, 0xb52c, 0x1, 0x1);
        gbc.writeMem(0xb998, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xcd05);
        EXPECT(gbc.pc(), 0xb99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb998), 0xcb);
        EXPECT(gbc.readMem(0xb999), 0x4f);
        // CB 4F 0118
        gbc.setState(0x35be, 0xe565, 0x2290, 0xa0fa, 0xb34, 0xe8f4, 0x1, 0x1);
        gbc.writeMem(0x35be, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe565);
        EXPECT(gbc.pc(), 0x35c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0119
        gbc.setState(0x68af, 0xf0e6, 0xae50, 0x3ce6, 0xfe0b, 0x630b, 0x0, 0x1);
        gbc.writeMem(0x68af, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf0e6);
        EXPECT(gbc.pc(), 0x68b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 011A
        gbc.setState(0x2838, 0x9980, 0x7b10, 0xa91a, 0x73, 0x7560, 0x0, 0x0);
        gbc.writeMem(0x2838, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9980);
        EXPECT(gbc.pc(), 0x283a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 011B
        gbc.setState(0x1bcf, 0xe413, 0xf9f0, 0x7863, 0x718c, 0xfc9a, 0x0, 0x1);
        gbc.writeMem(0x1bcf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe413);
        EXPECT(gbc.pc(), 0x1bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 011C
        gbc.setState(0x52cb, 0xb2c1, 0xde70, 0x49de, 0x6c24, 0x4060, 0x1, 0x0);
        gbc.writeMem(0x52cb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb2c1);
        EXPECT(gbc.pc(), 0x52cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 011D
        gbc.setState(0xa05b, 0x3087, 0x8e30, 0x879f, 0x3b02, 0x1cd9, 0x1, 0x0);
        gbc.writeMem(0xa05b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3087);
        EXPECT(gbc.pc(), 0xa05d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05b), 0xcb);
        EXPECT(gbc.readMem(0xa05c), 0x4f);
        // CB 4F 011E
        gbc.setState(0x9af8, 0x3a07, 0xf0f0, 0x289e, 0x8cb1, 0x64b0, 0x0, 0x0);
        gbc.writeMem(0x9af8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3a07);
        EXPECT(gbc.pc(), 0x9afa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9af8), 0xcb);
        EXPECT(gbc.readMem(0x9af9), 0x4f);
        // CB 4F 011F
        gbc.setState(0x77d4, 0xfde7, 0xe990, 0xa381, 0x60d7, 0xe656, 0x0, 0x0);
        gbc.writeMem(0x77d4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xfde7);
        EXPECT(gbc.pc(), 0x77d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0120
        gbc.setState(0x4351, 0x502d, 0x1790, 0x4b75, 0x6069, 0x75cc, 0x1, 0x1);
        gbc.writeMem(0x4351, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x502d);
        EXPECT(gbc.pc(), 0x4353);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0121
        gbc.setState(0x9cae, 0xbcfa, 0xc390, 0xcdf0, 0xccf2, 0x61d1, 0x1, 0x0);
        gbc.writeMem(0x9cae, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xbcfa);
        EXPECT(gbc.pc(), 0x9cb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cae), 0xcb);
        EXPECT(gbc.readMem(0x9caf), 0x4f);
        // CB 4F 0122
        gbc.setState(0xec52, 0xd5bb, 0xf770, 0x30d3, 0x17e9, 0xe5ca, 0x1, 0x1);
        gbc.writeMem(0xec52, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd5bb);
        EXPECT(gbc.pc(), 0xec54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec52), 0xcb);
        EXPECT(gbc.readMem(0xec53), 0x4f);
        // CB 4F 0123
        gbc.setState(0x271f, 0x81f6, 0x10f0, 0x875c, 0x9e25, 0x48d6, 0x1, 0x1);
        gbc.writeMem(0x271f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x81f6);
        EXPECT(gbc.pc(), 0x2721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0124
        gbc.setState(0x9939, 0xe439, 0x40, 0x3d49, 0xc23e, 0xe548, 0x0, 0x0);
        gbc.writeMem(0x9939, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe439);
        EXPECT(gbc.pc(), 0x993b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9939), 0xcb);
        EXPECT(gbc.readMem(0x993a), 0x4f);
        // CB 4F 0126
        gbc.setState(0x2918, 0x4bb0, 0xb520, 0x403, 0xf2bc, 0x5e23, 0x0, 0x1);
        gbc.writeMem(0x2918, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4bb0);
        EXPECT(gbc.pc(), 0x291a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0127
        gbc.setState(0xb1fa, 0xa5be, 0x8740, 0xbaf8, 0x4546, 0x340, 0x0, 0x0);
        gbc.writeMem(0xb1fa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa5be);
        EXPECT(gbc.pc(), 0xb1fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1fa), 0xcb);
        EXPECT(gbc.readMem(0xb1fb), 0x4f);
        // CB 4F 0128
        gbc.setState(0x7e73, 0x8728, 0xf790, 0xad8e, 0x648d, 0xb8c0, 0x1, 0x0);
        gbc.writeMem(0x7e73, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8728);
        EXPECT(gbc.pc(), 0x7e75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0129
        gbc.setState(0x6438, 0x2011, 0x23c0, 0xf30e, 0x5863, 0x85da, 0x0, 0x1);
        gbc.writeMem(0x6438, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2011);
        EXPECT(gbc.pc(), 0x643a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 012A
        gbc.setState(0x3a64, 0xa07c, 0x6800, 0x8a0e, 0xb887, 0x9a84, 0x0, 0x1);
        gbc.writeMem(0x3a64, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa07c);
        EXPECT(gbc.pc(), 0x3a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 012B
        gbc.setState(0x71cf, 0xcfc9, 0xc1b0, 0xc35d, 0xa757, 0xff6e, 0x1, 0x1);
        gbc.writeMem(0x71cf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcfc9);
        EXPECT(gbc.pc(), 0x71d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 012C
        gbc.setState(0xe7d1, 0x2f6, 0x4900, 0x9c02, 0xceb0, 0x3105, 0x1, 0x0);
        gbc.writeMem(0xe7d1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2f6);
        EXPECT(gbc.pc(), 0xe7d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7d1), 0xcb);
        EXPECT(gbc.readMem(0xe7d2), 0x4f);
        // CB 4F 012D
        gbc.setState(0x26e1, 0x436e, 0x3270, 0x4de0, 0x9ee7, 0x204, 0x0, 0x1);
        gbc.writeMem(0x26e1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x436e);
        EXPECT(gbc.pc(), 0x26e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 012E
        gbc.setState(0xc428, 0xc01f, 0xafe0, 0xa0e2, 0x3787, 0x48ee, 0x1, 0x0);
        gbc.writeMem(0xc428, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc01f);
        EXPECT(gbc.pc(), 0xc42a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc428), 0xcb);
        EXPECT(gbc.readMem(0xc429), 0x4f);
        // CB 4F 012F
        gbc.setState(0x3cdd, 0x47be, 0x2b90, 0xc614, 0x10f, 0x8aa5, 0x1, 0x1);
        gbc.writeMem(0x3cdd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x47be);
        EXPECT(gbc.pc(), 0x3cdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0130
        gbc.setState(0xa2f4, 0x433c, 0xaf70, 0x90c, 0x47f9, 0x5046, 0x0, 0x0);
        gbc.writeMem(0xa2f4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x433c);
        EXPECT(gbc.pc(), 0xa2f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2f4), 0xcb);
        EXPECT(gbc.readMem(0xa2f5), 0x4f);
        // CB 4F 0131
        gbc.setState(0xbb8, 0xdbf4, 0x61a0, 0xaf41, 0x5833, 0xacf3, 0x1, 0x1);
        gbc.writeMem(0xbb8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xdbf4);
        EXPECT(gbc.pc(), 0xbba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0132
        gbc.setState(0xe131, 0xca35, 0xdf70, 0xbe8c, 0xdc78, 0x6483, 0x0, 0x0);
        gbc.writeMem(0xe131, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xca35);
        EXPECT(gbc.pc(), 0xe133);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe131), 0xcb);
        EXPECT(gbc.readMem(0xe132), 0x4f);
        // CB 4F 0133
        gbc.setState(0x2602, 0x16f4, 0x17e0, 0x4050, 0x3f50, 0x46fa, 0x0, 0x1);
        gbc.writeMem(0x2602, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x16f4);
        EXPECT(gbc.pc(), 0x2604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0134
        gbc.setState(0x1f4b, 0x235e, 0x8f50, 0x2554, 0xbf0, 0x8a28, 0x1, 0x0);
        gbc.writeMem(0x1f4b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x235e);
        EXPECT(gbc.pc(), 0x1f4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0135
        gbc.setState(0x2302, 0x824e, 0xcfe0, 0xc8b6, 0x9f72, 0x2075, 0x0, 0x0);
        gbc.writeMem(0x2302, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x824e);
        EXPECT(gbc.pc(), 0x2304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0136
        gbc.setState(0x3509, 0x97b, 0xd20, 0xa6ef, 0xd0c3, 0xbe3f, 0x0, 0x1);
        gbc.writeMem(0x3509, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x97b);
        EXPECT(gbc.pc(), 0x350b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0137
        gbc.setState(0x3c70, 0x5376, 0x97b0, 0xf8fc, 0x4224, 0xe91d, 0x1, 0x0);
        gbc.writeMem(0x3c70, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5376);
        EXPECT(gbc.pc(), 0x3c72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0138
        gbc.setState(0xa4e7, 0x7dbe, 0xbe90, 0x5263, 0x88f8, 0x9e5c, 0x1, 0x0);
        gbc.writeMem(0xa4e7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7dbe);
        EXPECT(gbc.pc(), 0xa4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4e7), 0xcb);
        EXPECT(gbc.readMem(0xa4e8), 0x4f);
        // CB 4F 0139
        gbc.setState(0xb873, 0xc02f, 0x7610, 0xcec6, 0xe4c4, 0x7799, 0x1, 0x0);
        gbc.writeMem(0xb873, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc02f);
        EXPECT(gbc.pc(), 0xb875);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb873), 0xcb);
        EXPECT(gbc.readMem(0xb874), 0x4f);
        // CB 4F 013A
        gbc.setState(0xce3b, 0xe885, 0xde0, 0x9047, 0x2a2a, 0x4056, 0x1, 0x0);
        gbc.writeMem(0xce3b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe885);
        EXPECT(gbc.pc(), 0xce3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce3b), 0xcb);
        EXPECT(gbc.readMem(0xce3c), 0x4f);
        // CB 4F 013B
        gbc.setState(0x1c96, 0x60c, 0xb100, 0x3709, 0x426, 0xf30b, 0x1, 0x1);
        gbc.writeMem(0x1c96, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x60c);
        EXPECT(gbc.pc(), 0x1c98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 013C
        gbc.setState(0xb6f1, 0x6a8b, 0x35b0, 0xd08d, 0x4a97, 0x939, 0x0, 0x0);
        gbc.writeMem(0xb6f1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6a8b);
        EXPECT(gbc.pc(), 0xb6f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f1), 0xcb);
        EXPECT(gbc.readMem(0xb6f2), 0x4f);
        // CB 4F 013D
        gbc.setState(0x353a, 0x276c, 0x7de0, 0x444a, 0xab5c, 0xfdf, 0x1, 0x1);
        gbc.writeMem(0x353a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x276c);
        EXPECT(gbc.pc(), 0x353c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 013E
        gbc.setState(0x20a, 0xf831, 0x6460, 0xaf7c, 0xda0d, 0x391d, 0x1, 0x1);
        gbc.writeMem(0x20a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf831);
        EXPECT(gbc.pc(), 0x20c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 013F
        gbc.setState(0x3ca8, 0xfc65, 0x7f60, 0xa1ef, 0xaa7f, 0xf67a, 0x0, 0x1);
        gbc.writeMem(0x3ca8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xfc65);
        EXPECT(gbc.pc(), 0x3caa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0140
        gbc.setState(0xd401, 0x4581, 0x7710, 0x1baa, 0xd236, 0x1ac1, 0x0, 0x1);
        gbc.writeMem(0xd401, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4581);
        EXPECT(gbc.pc(), 0xd403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd401), 0xcb);
        EXPECT(gbc.readMem(0xd402), 0x4f);
        // CB 4F 0141
        gbc.setState(0x5bda, 0x111c, 0x71f0, 0xab74, 0xa01b, 0xd6b5, 0x1, 0x0);
        gbc.writeMem(0x5bda, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x111c);
        EXPECT(gbc.pc(), 0x5bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0142
        gbc.setState(0x4619, 0xed19, 0x5400, 0x95c4, 0x27ef, 0xfa7e, 0x0, 0x0);
        gbc.writeMem(0x4619, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xed19);
        EXPECT(gbc.pc(), 0x461b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0143
        gbc.setState(0x29f5, 0xaa1d, 0x5be0, 0x7cbb, 0x58, 0x3135, 0x1, 0x0);
        gbc.writeMem(0x29f5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xaa1d);
        EXPECT(gbc.pc(), 0x29f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0144
        gbc.setState(0xdac8, 0x7244, 0x5660, 0xf7ea, 0x731c, 0xa036, 0x1, 0x0);
        gbc.writeMem(0xdac8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7244);
        EXPECT(gbc.pc(), 0xdaca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac8), 0xcb);
        EXPECT(gbc.readMem(0xdac9), 0x4f);
        // CB 4F 0145
        gbc.setState(0xc863, 0x68b0, 0xd240, 0x6771, 0x50e1, 0x7927, 0x0, 0x1);
        gbc.writeMem(0xc863, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x68b0);
        EXPECT(gbc.pc(), 0xc865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc863), 0xcb);
        EXPECT(gbc.readMem(0xc864), 0x4f);
        // CB 4F 0146
        gbc.setState(0x3795, 0x8d7b, 0xa790, 0x5318, 0x8ad4, 0x4520, 0x0, 0x1);
        gbc.writeMem(0x3795, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8d7b);
        EXPECT(gbc.pc(), 0x3797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0147
        gbc.setState(0x58a1, 0x833f, 0x990, 0x7b12, 0xc3d3, 0xba78, 0x1, 0x1);
        gbc.writeMem(0x58a1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x833f);
        EXPECT(gbc.pc(), 0x58a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0148
        gbc.setState(0xe0d7, 0xe5ed, 0x25d0, 0xa74a, 0xfc1c, 0x5e0c, 0x0, 0x0);
        gbc.writeMem(0xe0d7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe5ed);
        EXPECT(gbc.pc(), 0xe0d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0d7), 0xcb);
        EXPECT(gbc.readMem(0xe0d8), 0x4f);
        // CB 4F 0149
        gbc.setState(0xd414, 0x4928, 0x6af0, 0xa568, 0x5e66, 0xfb2e, 0x1, 0x1);
        gbc.writeMem(0xd414, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4928);
        EXPECT(gbc.pc(), 0xd416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd414), 0xcb);
        EXPECT(gbc.readMem(0xd415), 0x4f);
        // CB 4F 014A
        gbc.setState(0xb8ee, 0x6246, 0x9be0, 0xce23, 0xb9f0, 0xcae2, 0x0, 0x0);
        gbc.writeMem(0xb8ee, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6246);
        EXPECT(gbc.pc(), 0xb8f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ee), 0xcb);
        EXPECT(gbc.readMem(0xb8ef), 0x4f);
        // CB 4F 014B
        gbc.setState(0x5c3e, 0xabdd, 0xa880, 0x3491, 0xf8da, 0x6233, 0x1, 0x0);
        gbc.writeMem(0x5c3e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xabdd);
        EXPECT(gbc.pc(), 0x5c40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 014C
        gbc.setState(0x45d, 0x36a5, 0xbf60, 0xf4c5, 0xa1f7, 0x50f7, 0x1, 0x1);
        gbc.writeMem(0x45d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x36a5);
        EXPECT(gbc.pc(), 0x45f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 014D
        gbc.setState(0x5bfb, 0x4e9, 0x48b0, 0x5f9b, 0x6e22, 0x6f92, 0x0, 0x1);
        gbc.writeMem(0x5bfb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4e9);
        EXPECT(gbc.pc(), 0x5bfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 014E
        gbc.setState(0x2022, 0x67ed, 0x5160, 0x9806, 0x60dd, 0xac97, 0x0, 0x1);
        gbc.writeMem(0x2022, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x67ed);
        EXPECT(gbc.pc(), 0x2024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 014F
        gbc.setState(0xc40e, 0x522e, 0xe070, 0xdda1, 0x193c, 0x5403, 0x1, 0x0);
        gbc.writeMem(0xc40e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x522e);
        EXPECT(gbc.pc(), 0xc410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc40e), 0xcb);
        EXPECT(gbc.readMem(0xc40f), 0x4f);
        // CB 4F 0150
        gbc.setState(0x1d1e, 0xbe9c, 0xcbd0, 0xe68f, 0x980a, 0xa520, 0x1, 0x0);
        gbc.writeMem(0x1d1e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xbe9c);
        EXPECT(gbc.pc(), 0x1d20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0151
        gbc.setState(0x1da2, 0xbbbb, 0x3960, 0xf4f, 0x130d, 0x30d6, 0x0, 0x1);
        gbc.writeMem(0x1da2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbbbb);
        EXPECT(gbc.pc(), 0x1da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0152
        gbc.setState(0xd15e, 0xeff3, 0xc690, 0xd01c, 0x1ef6, 0x444c, 0x1, 0x1);
        gbc.writeMem(0xd15e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xeff3);
        EXPECT(gbc.pc(), 0xd160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd15e), 0xcb);
        EXPECT(gbc.readMem(0xd15f), 0x4f);
        // CB 4F 0153
        gbc.setState(0x2c85, 0x95c9, 0xbf70, 0xcbf9, 0x6a4, 0x7382, 0x0, 0x0);
        gbc.writeMem(0x2c85, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x95c9);
        EXPECT(gbc.pc(), 0x2c87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0154
        gbc.setState(0x5fa0, 0xdb67, 0xa140, 0x9b7f, 0x6e44, 0x5e3a, 0x1, 0x1);
        gbc.writeMem(0x5fa0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdb67);
        EXPECT(gbc.pc(), 0x5fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0155
        gbc.setState(0x4afa, 0xdd2b, 0x530, 0x95e, 0xb22e, 0x4cea, 0x0, 0x0);
        gbc.writeMem(0x4afa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xdd2b);
        EXPECT(gbc.pc(), 0x4afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0156
        gbc.setState(0x24af, 0x226b, 0x6760, 0x4d0f, 0xcffd, 0x397b, 0x0, 0x0);
        gbc.writeMem(0x24af, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x226b);
        EXPECT(gbc.pc(), 0x24b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0157
        gbc.setState(0x4bb7, 0x4766, 0x5a00, 0xad17, 0x97e8, 0x7b1b, 0x0, 0x0);
        gbc.writeMem(0x4bb7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4766);
        EXPECT(gbc.pc(), 0x4bb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0158
        gbc.setState(0x348d, 0x91c5, 0xb8b0, 0x1a0f, 0xa1a6, 0x9829, 0x0, 0x0);
        gbc.writeMem(0x348d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x91c5);
        EXPECT(gbc.pc(), 0x348f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0159
        gbc.setState(0x9d1f, 0xa17e, 0xf5d0, 0xdf75, 0x19cc, 0xeb3a, 0x1, 0x1);
        gbc.writeMem(0x9d1f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa17e);
        EXPECT(gbc.pc(), 0x9d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d1f), 0xcb);
        EXPECT(gbc.readMem(0x9d20), 0x4f);
        // CB 4F 015A
        gbc.setState(0xa373, 0xa5e0, 0xd910, 0x7fb, 0x962a, 0x98a3, 0x1, 0x0);
        gbc.writeMem(0xa373, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa5e0);
        EXPECT(gbc.pc(), 0xa375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa373), 0xcb);
        EXPECT(gbc.readMem(0xa374), 0x4f);
        // CB 4F 015B
        gbc.setState(0xcbd6, 0xfc4c, 0x83f0, 0x9367, 0x51f0, 0xc487, 0x1, 0x1);
        gbc.writeMem(0xcbd6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfc4c);
        EXPECT(gbc.pc(), 0xcbd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbd6), 0xcb);
        EXPECT(gbc.readMem(0xcbd7), 0x4f);
        // CB 4F 015C
        gbc.setState(0x4443, 0x2588, 0xb10, 0x8ec7, 0xd313, 0xb34f, 0x0, 0x0);
        gbc.writeMem(0x4443, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2588);
        EXPECT(gbc.pc(), 0x4445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 015D
        gbc.setState(0x6c36, 0x465f, 0xdea0, 0x1436, 0x7a9, 0x8b9b, 0x1, 0x1);
        gbc.writeMem(0x6c36, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x465f);
        EXPECT(gbc.pc(), 0x6c38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 015E
        gbc.setState(0x6738, 0x17a3, 0xa850, 0x49ae, 0xfac, 0xcc91, 0x0, 0x1);
        gbc.writeMem(0x6738, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x17a3);
        EXPECT(gbc.pc(), 0x673a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 015F
        gbc.setState(0x702f, 0x17df, 0xf7d0, 0x173f, 0x4eec, 0x9125, 0x0, 0x1);
        gbc.writeMem(0x702f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x17df);
        EXPECT(gbc.pc(), 0x7031);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0160
        gbc.setState(0xd1a8, 0x2bd9, 0x2020, 0x1926, 0x3b92, 0xf0bf, 0x0, 0x1);
        gbc.writeMem(0xd1a8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2bd9);
        EXPECT(gbc.pc(), 0xd1aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a8), 0xcb);
        EXPECT(gbc.readMem(0xd1a9), 0x4f);
        // CB 4F 0162
        gbc.setState(0xb7b8, 0x50df, 0x5e80, 0x9ac8, 0x7897, 0x23eb, 0x0, 0x1);
        gbc.writeMem(0xb7b8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x50df);
        EXPECT(gbc.pc(), 0xb7ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b8), 0xcb);
        EXPECT(gbc.readMem(0xb7b9), 0x4f);
        // CB 4F 0163
        gbc.setState(0xaf4e, 0x70eb, 0xf0c0, 0x10af, 0x307b, 0x555c, 0x1, 0x1);
        gbc.writeMem(0xaf4e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x70eb);
        EXPECT(gbc.pc(), 0xaf50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf4e), 0xcb);
        EXPECT(gbc.readMem(0xaf4f), 0x4f);
        // CB 4F 0164
        gbc.setState(0x74ab, 0x281, 0x2960, 0x6673, 0x832d, 0x482f, 0x0, 0x1);
        gbc.writeMem(0x74ab, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x281);
        EXPECT(gbc.pc(), 0x74ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0165
        gbc.setState(0x66c1, 0xc013, 0xd40, 0xb3ac, 0x7b08, 0x137c, 0x0, 0x1);
        gbc.writeMem(0x66c1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc013);
        EXPECT(gbc.pc(), 0x66c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0166
        gbc.setState(0xc83f, 0x38ef, 0xa200, 0xbb5c, 0x1172, 0xfa85, 0x0, 0x1);
        gbc.writeMem(0xc83f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x38ef);
        EXPECT(gbc.pc(), 0xc841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc83f), 0xcb);
        EXPECT(gbc.readMem(0xc840), 0x4f);
        // CB 4F 0168
        gbc.setState(0x2cf5, 0xe8ad, 0xa080, 0xdc15, 0x70ca, 0xbe18, 0x0, 0x0);
        gbc.writeMem(0x2cf5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe8ad);
        EXPECT(gbc.pc(), 0x2cf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0169
        gbc.setState(0xe133, 0xf88f, 0xbce0, 0x81fe, 0x451b, 0xdd1a, 0x0, 0x1);
        gbc.writeMem(0xe133, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf88f);
        EXPECT(gbc.pc(), 0xe135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe133), 0xcb);
        EXPECT(gbc.readMem(0xe134), 0x4f);
        // CB 4F 016A
        gbc.setState(0x1953, 0x70aa, 0x6b30, 0x96, 0x3456, 0x5693, 0x0, 0x0);
        gbc.writeMem(0x1953, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x70aa);
        EXPECT(gbc.pc(), 0x1955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 016B
        gbc.setState(0x213b, 0xb813, 0xb540, 0x4561, 0x82c, 0x7f9c, 0x1, 0x0);
        gbc.writeMem(0x213b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb813);
        EXPECT(gbc.pc(), 0x213d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 016C
        gbc.setState(0x7307, 0x6a69, 0xd600, 0xeed7, 0x1887, 0x8915, 0x1, 0x1);
        gbc.writeMem(0x7307, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6a69);
        EXPECT(gbc.pc(), 0x7309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 016D
        gbc.setState(0x8b20, 0x9337, 0x7ec0, 0x869a, 0x3c99, 0x5f9, 0x1, 0x1);
        gbc.writeMem(0x8b20, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9337);
        EXPECT(gbc.pc(), 0x8b22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b20), 0xcb);
        EXPECT(gbc.readMem(0x8b21), 0x4f);
        // CB 4F 016E
        gbc.setState(0x3ab, 0xac3e, 0x6580, 0x7ca5, 0x69ff, 0x1783, 0x1, 0x0);
        gbc.writeMem(0x3ab, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xac3e);
        EXPECT(gbc.pc(), 0x3ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 016F
        gbc.setState(0xbc2d, 0xf9ae, 0x2d50, 0xe41, 0xf74f, 0xee2d, 0x1, 0x1);
        gbc.writeMem(0xbc2d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf9ae);
        EXPECT(gbc.pc(), 0xbc2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc2d), 0xcb);
        EXPECT(gbc.readMem(0xbc2e), 0x4f);
        // CB 4F 0170
        gbc.setState(0x2fb4, 0x8889, 0xa520, 0xce59, 0x872a, 0x4fe5, 0x0, 0x1);
        gbc.writeMem(0x2fb4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x8889);
        EXPECT(gbc.pc(), 0x2fb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0171
        gbc.setState(0x5291, 0xfb24, 0xcbd0, 0xcbed, 0xd6cf, 0x641d, 0x0, 0x0);
        gbc.writeMem(0x5291, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfb24);
        EXPECT(gbc.pc(), 0x5293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0172
        gbc.setState(0x5520, 0x2a88, 0x3990, 0xf28f, 0x143, 0xcbfb, 0x0, 0x0);
        gbc.writeMem(0x5520, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2a88);
        EXPECT(gbc.pc(), 0x5522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0173
        gbc.setState(0xa702, 0xb3f6, 0x5750, 0x754d, 0x7a50, 0x1bdf, 0x0, 0x1);
        gbc.writeMem(0xa702, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb3f6);
        EXPECT(gbc.pc(), 0xa704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa702), 0xcb);
        EXPECT(gbc.readMem(0xa703), 0x4f);
        // CB 4F 0174
        gbc.setState(0x3159, 0xab6c, 0x2210, 0x769b, 0xd606, 0x45f6, 0x0, 0x0);
        gbc.writeMem(0x3159, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xab6c);
        EXPECT(gbc.pc(), 0x315b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0175
        gbc.setState(0xb340, 0x9051, 0xcf30, 0x1ce5, 0x25f1, 0x275, 0x1, 0x1);
        gbc.writeMem(0xb340, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9051);
        EXPECT(gbc.pc(), 0xb342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb340), 0xcb);
        EXPECT(gbc.readMem(0xb341), 0x4f);
        // CB 4F 0176
        gbc.setState(0xbdfe, 0x66e9, 0xad80, 0x247e, 0xa376, 0x6f8d, 0x0, 0x1);
        gbc.writeMem(0xbdfe, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x66e9);
        EXPECT(gbc.pc(), 0xbe00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdfe), 0xcb);
        EXPECT(gbc.readMem(0xbdff), 0x4f);
        // CB 4F 0178
        gbc.setState(0xddc, 0xe6a6, 0xa9b0, 0xe256, 0x9087, 0x9325, 0x0, 0x1);
        gbc.writeMem(0xddc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe6a6);
        EXPECT(gbc.pc(), 0xdde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0179
        gbc.setState(0xc73c, 0xb382, 0xfff0, 0xab3d, 0x2efd, 0x3122, 0x1, 0x1);
        gbc.writeMem(0xc73c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb382);
        EXPECT(gbc.pc(), 0xc73e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc73c), 0xcb);
        EXPECT(gbc.readMem(0xc73d), 0x4f);
        // CB 4F 017A
        gbc.setState(0x8ceb, 0x8a8e, 0xfce0, 0x6db3, 0xcb79, 0x1050, 0x0, 0x1);
        gbc.writeMem(0x8ceb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8a8e);
        EXPECT(gbc.pc(), 0x8ced);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ceb), 0xcb);
        EXPECT(gbc.readMem(0x8cec), 0x4f);
        // CB 4F 017B
        gbc.setState(0xd78c, 0xc414, 0xa210, 0x91b9, 0xf169, 0x85cb, 0x0, 0x1);
        gbc.writeMem(0xd78c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc414);
        EXPECT(gbc.pc(), 0xd78e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd78c), 0xcb);
        EXPECT(gbc.readMem(0xd78d), 0x4f);
        // CB 4F 017C
        gbc.setState(0xa035, 0xdcc1, 0xe880, 0xcebd, 0xc110, 0xb07c, 0x1, 0x1);
        gbc.writeMem(0xa035, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xdcc1);
        EXPECT(gbc.pc(), 0xa037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa035), 0xcb);
        EXPECT(gbc.readMem(0xa036), 0x4f);
        // CB 4F 017D
        gbc.setState(0x3c7a, 0x9bba, 0x6b50, 0x2282, 0x2e7a, 0x2b51, 0x0, 0x1);
        gbc.writeMem(0x3c7a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9bba);
        EXPECT(gbc.pc(), 0x3c7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 017E
        gbc.setState(0xc45b, 0xfcc7, 0x9710, 0x92ae, 0xae6, 0x19d6, 0x1, 0x1);
        gbc.writeMem(0xc45b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xfcc7);
        EXPECT(gbc.pc(), 0xc45d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc45b), 0xcb);
        EXPECT(gbc.readMem(0xc45c), 0x4f);
        // CB 4F 017F
        gbc.setState(0xa7f6, 0x18d6, 0xc200, 0xe862, 0x7dd5, 0x7dba, 0x1, 0x1);
        gbc.writeMem(0xa7f6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x18d6);
        EXPECT(gbc.pc(), 0xa7f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7f6), 0xcb);
        EXPECT(gbc.readMem(0xa7f7), 0x4f);
        // CB 4F 0180
        gbc.setState(0x275e, 0x6f2d, 0x21f0, 0x2720, 0xed6a, 0x5eb5, 0x0, 0x0);
        gbc.writeMem(0x275e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6f2d);
        EXPECT(gbc.pc(), 0x2760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0181
        gbc.setState(0xb457, 0x64aa, 0x8d90, 0x1127, 0x4e6, 0xae43, 0x0, 0x1);
        gbc.writeMem(0xb457, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x64aa);
        EXPECT(gbc.pc(), 0xb459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb457), 0xcb);
        EXPECT(gbc.readMem(0xb458), 0x4f);
        // CB 4F 0182
        gbc.setState(0x72ee, 0xe75a, 0x5370, 0x90d7, 0xe3b4, 0x8417, 0x0, 0x0);
        gbc.writeMem(0x72ee, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe75a);
        EXPECT(gbc.pc(), 0x72f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0183
        gbc.setState(0x5ca8, 0x6ce5, 0xc270, 0xdfad, 0x87b9, 0x28c9, 0x0, 0x1);
        gbc.writeMem(0x5ca8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6ce5);
        EXPECT(gbc.pc(), 0x5caa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0184
        gbc.setState(0x3a98, 0xb6b4, 0xfc30, 0xc8b2, 0xcfa7, 0xbbbb, 0x1, 0x1);
        gbc.writeMem(0x3a98, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb6b4);
        EXPECT(gbc.pc(), 0x3a9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0185
        gbc.setState(0xd2f7, 0x7ba3, 0x87d0, 0xd817, 0xc80b, 0xc813, 0x1, 0x0);
        gbc.writeMem(0xd2f7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7ba3);
        EXPECT(gbc.pc(), 0xd2f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f7), 0xcb);
        EXPECT(gbc.readMem(0xd2f8), 0x4f);
        // CB 4F 0189
        gbc.setState(0xd697, 0xf25f, 0x6290, 0xbae0, 0x7354, 0xb318, 0x0, 0x1);
        gbc.writeMem(0xd697, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf25f);
        EXPECT(gbc.pc(), 0xd699);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd697), 0xcb);
        EXPECT(gbc.readMem(0xd698), 0x4f);
        // CB 4F 018A
        gbc.setState(0xba75, 0xd07c, 0x1b70, 0x80b4, 0xb4c0, 0x5a4e, 0x1, 0x0);
        gbc.writeMem(0xba75, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd07c);
        EXPECT(gbc.pc(), 0xba77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba75), 0xcb);
        EXPECT(gbc.readMem(0xba76), 0x4f);
        // CB 4F 018B
        gbc.setState(0x56ff, 0xda0, 0x2f80, 0x8367, 0xcc89, 0x6fd6, 0x0, 0x0);
        gbc.writeMem(0x56ff, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xda0);
        EXPECT(gbc.pc(), 0x5701);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 018C
        gbc.setState(0x4693, 0x2a9, 0x90e0, 0x42d9, 0x34a5, 0x3b95, 0x0, 0x1);
        gbc.writeMem(0x4693, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2a9);
        EXPECT(gbc.pc(), 0x4695);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 018D
        gbc.setState(0x6ae8, 0x55b9, 0x8ca0, 0x6417, 0xb85b, 0x9c10, 0x0, 0x0);
        gbc.writeMem(0x6ae8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x55b9);
        EXPECT(gbc.pc(), 0x6aea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 018E
        gbc.setState(0x5ed6, 0x1c28, 0x1080, 0x54ab, 0xc39b, 0xed9b, 0x0, 0x1);
        gbc.writeMem(0x5ed6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1c28);
        EXPECT(gbc.pc(), 0x5ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 018F
        gbc.setState(0x782f, 0x62c7, 0xda70, 0x1980, 0x5c81, 0x284e, 0x1, 0x1);
        gbc.writeMem(0x782f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x62c7);
        EXPECT(gbc.pc(), 0x7831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0190
        gbc.setState(0xd70c, 0x965a, 0x5a50, 0x957, 0x494a, 0x86aa, 0x1, 0x1);
        gbc.writeMem(0xd70c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x965a);
        EXPECT(gbc.pc(), 0xd70e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd70c), 0xcb);
        EXPECT(gbc.readMem(0xd70d), 0x4f);
        // CB 4F 0191
        gbc.setState(0x272f, 0x91d4, 0x7dd0, 0xb98a, 0xa797, 0x9822, 0x0, 0x0);
        gbc.writeMem(0x272f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x91d4);
        EXPECT(gbc.pc(), 0x2731);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0192
        gbc.setState(0xb01f, 0xc27c, 0x1430, 0x5121, 0xc25d, 0xbe04, 0x0, 0x0);
        gbc.writeMem(0xb01f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc27c);
        EXPECT(gbc.pc(), 0xb021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb01f), 0xcb);
        EXPECT(gbc.readMem(0xb020), 0x4f);
        // CB 4F 0193
        gbc.setState(0xe875, 0xa9fc, 0x4040, 0xca25, 0x28e9, 0xa54c, 0x1, 0x0);
        gbc.writeMem(0xe875, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa9fc);
        EXPECT(gbc.pc(), 0xe877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe875), 0xcb);
        EXPECT(gbc.readMem(0xe876), 0x4f);
        // CB 4F 0194
        gbc.setState(0x951d, 0x397d, 0xb760, 0x438b, 0xbcc4, 0x9a50, 0x0, 0x0);
        gbc.writeMem(0x951d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x397d);
        EXPECT(gbc.pc(), 0x951f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x951d), 0xcb);
        EXPECT(gbc.readMem(0x951e), 0x4f);
        // CB 4F 0195
        gbc.setState(0xd4a4, 0xdfba, 0x4580, 0xe6e2, 0x14f, 0xf412, 0x1, 0x1);
        gbc.writeMem(0xd4a4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdfba);
        EXPECT(gbc.pc(), 0xd4a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4a4), 0xcb);
        EXPECT(gbc.readMem(0xd4a5), 0x4f);
        // CB 4F 0196
        gbc.setState(0x6f50, 0x4d51, 0x55c0, 0xe900, 0x9a32, 0x85f, 0x1, 0x1);
        gbc.writeMem(0x6f50, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4d51);
        EXPECT(gbc.pc(), 0x6f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0197
        gbc.setState(0x6ed2, 0xb523, 0xddc0, 0xb338, 0xa5ee, 0x8918, 0x1, 0x0);
        gbc.writeMem(0x6ed2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb523);
        EXPECT(gbc.pc(), 0x6ed4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0198
        gbc.setState(0x115c, 0x697e, 0xe7a0, 0x26d7, 0xec11, 0x7f70, 0x1, 0x1);
        gbc.writeMem(0x115c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x697e);
        EXPECT(gbc.pc(), 0x115e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0199
        gbc.setState(0x7036, 0x6b80, 0x93b0, 0xd444, 0x1fe3, 0xc878, 0x0, 0x0);
        gbc.writeMem(0x7036, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6b80);
        EXPECT(gbc.pc(), 0x7038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 019A
        gbc.setState(0x641c, 0xf041, 0x8840, 0x3d68, 0xcd42, 0x2b56, 0x1, 0x1);
        gbc.writeMem(0x641c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf041);
        EXPECT(gbc.pc(), 0x641e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 019B
        gbc.setState(0x159a, 0x6913, 0xe460, 0x425e, 0x322d, 0xf5e, 0x0, 0x1);
        gbc.writeMem(0x159a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6913);
        EXPECT(gbc.pc(), 0x159c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 019C
        gbc.setState(0xc7d6, 0x494e, 0x9600, 0x1fab, 0x97ca, 0xb041, 0x0, 0x0);
        gbc.writeMem(0xc7d6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x494e);
        EXPECT(gbc.pc(), 0xc7d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d6), 0xcb);
        EXPECT(gbc.readMem(0xc7d7), 0x4f);
        // CB 4F 019D
        gbc.setState(0x3743, 0x8227, 0x3fa0, 0x94f, 0x494b, 0xe4b, 0x0, 0x1);
        gbc.writeMem(0x3743, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8227);
        EXPECT(gbc.pc(), 0x3745);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 019E
        gbc.setState(0xda3a, 0x4f06, 0xd9e0, 0x32e4, 0xf249, 0xa568, 0x0, 0x1);
        gbc.writeMem(0xda3a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4f06);
        EXPECT(gbc.pc(), 0xda3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3a), 0xcb);
        EXPECT(gbc.readMem(0xda3b), 0x4f);
        // CB 4F 019F
        gbc.setState(0x83b0, 0x656a, 0x290, 0x1d71, 0xabec, 0x8619, 0x1, 0x0);
        gbc.writeMem(0x83b0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x656a);
        EXPECT(gbc.pc(), 0x83b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83b0), 0xcb);
        EXPECT(gbc.readMem(0x83b1), 0x4f);
        // CB 4F 01A0
        gbc.setState(0xe81c, 0xc16f, 0x4a0, 0x1420, 0xa413, 0x8a25, 0x1, 0x1);
        gbc.writeMem(0xe81c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc16f);
        EXPECT(gbc.pc(), 0xe81e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe81c), 0xcb);
        EXPECT(gbc.readMem(0xe81d), 0x4f);
        // CB 4F 01A1
        gbc.setState(0xdf2a, 0x83aa, 0xc760, 0xe25f, 0x9761, 0xaa22, 0x0, 0x1);
        gbc.writeMem(0xdf2a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x83aa);
        EXPECT(gbc.pc(), 0xdf2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf2a), 0xcb);
        EXPECT(gbc.readMem(0xdf2b), 0x4f);
        // CB 4F 01A2
        gbc.setState(0xefbf, 0xc58d, 0xe3c0, 0x434b, 0xc5c5, 0x5a4e, 0x1, 0x1);
        gbc.writeMem(0xefbf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc58d);
        EXPECT(gbc.pc(), 0xefc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefbf), 0xcb);
        EXPECT(gbc.readMem(0xefc0), 0x4f);
        // CB 4F 01A3
        gbc.setState(0x94ee, 0xc5e, 0xa280, 0xaf37, 0x5b4d, 0x839, 0x1, 0x1);
        gbc.writeMem(0x94ee, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc5e);
        EXPECT(gbc.pc(), 0x94f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ee), 0xcb);
        EXPECT(gbc.readMem(0x94ef), 0x4f);
        // CB 4F 01A4
        gbc.setState(0xe1cc, 0xffcb, 0xf0b0, 0x134e, 0x9d3b, 0x7240, 0x1, 0x1);
        gbc.writeMem(0xe1cc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xffcb);
        EXPECT(gbc.pc(), 0xe1ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1cc), 0xcb);
        EXPECT(gbc.readMem(0xe1cd), 0x4f);
        // CB 4F 01A5
        gbc.setState(0xd91b, 0x7a28, 0x19b0, 0x57e2, 0x463f, 0x8cf6, 0x1, 0x1);
        gbc.writeMem(0xd91b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7a28);
        EXPECT(gbc.pc(), 0xd91d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd91b), 0xcb);
        EXPECT(gbc.readMem(0xd91c), 0x4f);
        // CB 4F 01A6
        gbc.setState(0xa0db, 0x825d, 0xa2e0, 0x560b, 0x2266, 0x94d4, 0x1, 0x1);
        gbc.writeMem(0xa0db, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x825d);
        EXPECT(gbc.pc(), 0xa0dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0db), 0xcb);
        EXPECT(gbc.readMem(0xa0dc), 0x4f);
        // CB 4F 01A7
        gbc.setState(0x438, 0xdcc3, 0x9060, 0xaf9e, 0x4783, 0x252, 0x1, 0x0);
        gbc.writeMem(0x438, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdcc3);
        EXPECT(gbc.pc(), 0x43a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01A9
        gbc.setState(0x538e, 0x5534, 0x2050, 0x653c, 0x3699, 0xd21c, 0x1, 0x0);
        gbc.writeMem(0x538e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5534);
        EXPECT(gbc.pc(), 0x5390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01AA
        gbc.setState(0xca97, 0x3ac9, 0x3610, 0xe438, 0xa876, 0xd16c, 0x0, 0x1);
        gbc.writeMem(0xca97, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3ac9);
        EXPECT(gbc.pc(), 0xca99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca97), 0xcb);
        EXPECT(gbc.readMem(0xca98), 0x4f);
        // CB 4F 01AB
        gbc.setState(0xb9c5, 0x55c2, 0x2cf0, 0x1a29, 0xf01, 0x71df, 0x1, 0x1);
        gbc.writeMem(0xb9c5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x55c2);
        EXPECT(gbc.pc(), 0xb9c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9c5), 0xcb);
        EXPECT(gbc.readMem(0xb9c6), 0x4f);
        // CB 4F 01AC
        gbc.setState(0xfc8, 0xa2a, 0xf670, 0xb6b7, 0x594, 0xc44, 0x0, 0x0);
        gbc.writeMem(0xfc8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa2a);
        EXPECT(gbc.pc(), 0xfca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01AD
        gbc.setState(0x7ae2, 0x28f8, 0xb750, 0x6b36, 0x3f11, 0x2700, 0x1, 0x1);
        gbc.writeMem(0x7ae2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x28f8);
        EXPECT(gbc.pc(), 0x7ae4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01AF
        gbc.setState(0x25dc, 0x64da, 0x4140, 0x59c6, 0x618e, 0x8d71, 0x1, 0x0);
        gbc.writeMem(0x25dc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x64da);
        EXPECT(gbc.pc(), 0x25de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01B0
        gbc.setState(0x3c73, 0x2bf9, 0xe8b0, 0x8214, 0x9bd3, 0xac64, 0x1, 0x1);
        gbc.writeMem(0x3c73, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2bf9);
        EXPECT(gbc.pc(), 0x3c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01B1
        gbc.setState(0x6679, 0x15d0, 0xcd80, 0x6785, 0xb214, 0x9ef2, 0x0, 0x0);
        gbc.writeMem(0x6679, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x15d0);
        EXPECT(gbc.pc(), 0x667b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01B2
        gbc.setState(0x14a4, 0x7c2d, 0x8af0, 0x27c3, 0x83e3, 0x8da0, 0x1, 0x0);
        gbc.writeMem(0x14a4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7c2d);
        EXPECT(gbc.pc(), 0x14a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01B3
        gbc.setState(0x2edb, 0x4c7, 0xdba0, 0x6444, 0x3ef5, 0x1b4f, 0x0, 0x1);
        gbc.writeMem(0x2edb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4c7);
        EXPECT(gbc.pc(), 0x2edd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01B5
        gbc.setState(0x45e0, 0xdcff, 0x4110, 0xdf20, 0x7cf6, 0xb866, 0x0, 0x1);
        gbc.writeMem(0x45e0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xdcff);
        EXPECT(gbc.pc(), 0x45e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01B6
        gbc.setState(0xa4b3, 0x713a, 0xbaa0, 0x6f49, 0xc11f, 0x45b8, 0x1, 0x0);
        gbc.writeMem(0xa4b3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x713a);
        EXPECT(gbc.pc(), 0xa4b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4b3), 0xcb);
        EXPECT(gbc.readMem(0xa4b4), 0x4f);
        // CB 4F 01B7
        gbc.setState(0x5c11, 0x2a8c, 0x1720, 0x74af, 0xf065, 0xf4a3, 0x1, 0x1);
        gbc.writeMem(0x5c11, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2a8c);
        EXPECT(gbc.pc(), 0x5c13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01B8
        gbc.setState(0x45c, 0x1e60, 0xd950, 0x78da, 0xc69a, 0x1ccb, 0x1, 0x1);
        gbc.writeMem(0x45c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1e60);
        EXPECT(gbc.pc(), 0x45e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01B9
        gbc.setState(0xe8bb, 0x8d9a, 0xecf0, 0xac29, 0x6be5, 0x4f2a, 0x0, 0x1);
        gbc.writeMem(0xe8bb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8d9a);
        EXPECT(gbc.pc(), 0xe8bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8bb), 0xcb);
        EXPECT(gbc.readMem(0xe8bc), 0x4f);
        // CB 4F 01BA
        gbc.setState(0x6a7c, 0xbff4, 0xc9e0, 0x6c9d, 0xd190, 0x5773, 0x0, 0x0);
        gbc.writeMem(0x6a7c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xbff4);
        EXPECT(gbc.pc(), 0x6a7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01BB
        gbc.setState(0x59f4, 0x2a86, 0xc60, 0x1c0c, 0xf26e, 0xf938, 0x1, 0x1);
        gbc.writeMem(0x59f4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2a86);
        EXPECT(gbc.pc(), 0x59f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01BC
        gbc.setState(0xec84, 0xa06d, 0x2e30, 0x7214, 0xdfd9, 0x58d, 0x1, 0x0);
        gbc.writeMem(0xec84, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa06d);
        EXPECT(gbc.pc(), 0xec86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec84), 0xcb);
        EXPECT(gbc.readMem(0xec85), 0x4f);
        // CB 4F 01BD
        gbc.setState(0x3f2e, 0x6a08, 0xf370, 0x7a2f, 0xb318, 0x5a93, 0x0, 0x1);
        gbc.writeMem(0x3f2e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6a08);
        EXPECT(gbc.pc(), 0x3f30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01BE
        gbc.setState(0x99fa, 0x1303, 0x7970, 0x9834, 0x9779, 0x6b00, 0x0, 0x0);
        gbc.writeMem(0x99fa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1303);
        EXPECT(gbc.pc(), 0x99fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99fa), 0xcb);
        EXPECT(gbc.readMem(0x99fb), 0x4f);
        // CB 4F 01BF
        gbc.setState(0x7731, 0x9b13, 0x54a0, 0x64d7, 0xedeb, 0xead1, 0x1, 0x0);
        gbc.writeMem(0x7731, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9b13);
        EXPECT(gbc.pc(), 0x7733);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01C0
        gbc.setState(0x4042, 0x3f58, 0xd920, 0xdb11, 0x4346, 0xe027, 0x1, 0x0);
        gbc.writeMem(0x4042, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3f58);
        EXPECT(gbc.pc(), 0x4044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01C1
        gbc.setState(0x407b, 0x14c, 0x6a20, 0xd461, 0x7bfa, 0x2542, 0x1, 0x1);
        gbc.writeMem(0x407b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x14c);
        EXPECT(gbc.pc(), 0x407d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01C2
        gbc.setState(0x4cf0, 0xd871, 0xda20, 0xc9ae, 0xd79c, 0xc205, 0x1, 0x1);
        gbc.writeMem(0x4cf0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd871);
        EXPECT(gbc.pc(), 0x4cf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01C3
        gbc.setState(0x3317, 0xa707, 0xd500, 0x61d0, 0x4d60, 0x2d19, 0x1, 0x0);
        gbc.writeMem(0x3317, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa707);
        EXPECT(gbc.pc(), 0x3319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01C5
        gbc.setState(0xaf5e, 0x1a3, 0xa300, 0x92a2, 0xf101, 0x1ce0, 0x0, 0x1);
        gbc.writeMem(0xaf5e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1a3);
        EXPECT(gbc.pc(), 0xaf60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf5e), 0xcb);
        EXPECT(gbc.readMem(0xaf5f), 0x4f);
        // CB 4F 01C6
        gbc.setState(0x55f6, 0x494d, 0xf3b0, 0xd037, 0xd16d, 0xd438, 0x0, 0x1);
        gbc.writeMem(0x55f6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x494d);
        EXPECT(gbc.pc(), 0x55f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01C7
        gbc.setState(0xe991, 0xbb55, 0xaba0, 0x2208, 0xdf45, 0xecda, 0x1, 0x0);
        gbc.writeMem(0xe991, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xbb55);
        EXPECT(gbc.pc(), 0xe993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe991), 0xcb);
        EXPECT(gbc.readMem(0xe992), 0x4f);
        // CB 4F 01C8
        gbc.setState(0x7acf, 0xa8fe, 0x3ce0, 0xfe3b, 0x1ba, 0x271, 0x1, 0x1);
        gbc.writeMem(0x7acf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa8fe);
        EXPECT(gbc.pc(), 0x7ad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01C9
        gbc.setState(0x1054, 0x5386, 0xa1b0, 0xf612, 0x8f2, 0x686a, 0x0, 0x0);
        gbc.writeMem(0x1054, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5386);
        EXPECT(gbc.pc(), 0x1056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01CA
        gbc.setState(0x8c89, 0xb96b, 0x4600, 0xf494, 0x2132, 0xfe71, 0x0, 0x1);
        gbc.writeMem(0x8c89, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb96b);
        EXPECT(gbc.pc(), 0x8c8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c89), 0xcb);
        EXPECT(gbc.readMem(0x8c8a), 0x4f);
        // CB 4F 01CB
        gbc.setState(0x1162, 0xc2a3, 0x72a0, 0xad45, 0x6f4d, 0xef1d, 0x1, 0x1);
        gbc.writeMem(0x1162, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc2a3);
        EXPECT(gbc.pc(), 0x1164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01CC
        gbc.setState(0x406, 0xfa3b, 0x58c0, 0xe9df, 0xd670, 0x18f, 0x1, 0x0);
        gbc.writeMem(0x406, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xfa3b);
        EXPECT(gbc.pc(), 0x408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01CD
        gbc.setState(0x6c27, 0xbc0, 0xe190, 0x8379, 0x3951, 0x29fd, 0x1, 0x1);
        gbc.writeMem(0x6c27, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbc0);
        EXPECT(gbc.pc(), 0x6c29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01CE
        gbc.setState(0x61f7, 0xc6a1, 0x1440, 0xc8f9, 0x10c5, 0x3c81, 0x1, 0x0);
        gbc.writeMem(0x61f7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc6a1);
        EXPECT(gbc.pc(), 0x61f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01CF
        gbc.setState(0x48e1, 0xbc94, 0x9ae0, 0x20b, 0x5134, 0x9cfa, 0x0, 0x0);
        gbc.writeMem(0x48e1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbc94);
        EXPECT(gbc.pc(), 0x48e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01D0
        gbc.setState(0xdb60, 0xdd35, 0x7c00, 0x8c28, 0x227c, 0x4f22, 0x0, 0x1);
        gbc.writeMem(0xdb60, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdd35);
        EXPECT(gbc.pc(), 0xdb62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb60), 0xcb);
        EXPECT(gbc.readMem(0xdb61), 0x4f);
        // CB 4F 01D1
        gbc.setState(0xb0c5, 0xfca2, 0x4380, 0xaa3e, 0x7cbd, 0x9acf, 0x1, 0x0);
        gbc.writeMem(0xb0c5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfca2);
        EXPECT(gbc.pc(), 0xb0c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c5), 0xcb);
        EXPECT(gbc.readMem(0xb0c6), 0x4f);
        // CB 4F 01D2
        gbc.setState(0xe641, 0x5339, 0x8ff0, 0x97cf, 0x99a7, 0xe94f, 0x0, 0x0);
        gbc.writeMem(0xe641, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5339);
        EXPECT(gbc.pc(), 0xe643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe641), 0xcb);
        EXPECT(gbc.readMem(0xe642), 0x4f);
        // CB 4F 01D3
        gbc.setState(0x606a, 0xa5c6, 0x5e60, 0xfb70, 0x75b5, 0x3780, 0x1, 0x1);
        gbc.writeMem(0x606a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa5c6);
        EXPECT(gbc.pc(), 0x606c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01D4
        gbc.setState(0x28b3, 0xfa3, 0x1fe0, 0xc9b7, 0xc5e, 0x5f6e, 0x1, 0x1);
        gbc.writeMem(0x28b3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfa3);
        EXPECT(gbc.pc(), 0x28b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01D5
        gbc.setState(0x662c, 0xebd9, 0x1b0, 0x1bc6, 0x94df, 0x52d2, 0x0, 0x1);
        gbc.writeMem(0x662c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xebd9);
        EXPECT(gbc.pc(), 0x662e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01D6
        gbc.setState(0x3fda, 0x65ef, 0x5f60, 0x31fa, 0x203f, 0x5d43, 0x0, 0x1);
        gbc.writeMem(0x3fda, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x65ef);
        EXPECT(gbc.pc(), 0x3fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01D7
        gbc.setState(0x12f3, 0xb5e8, 0x4d80, 0xbb2c, 0xa671, 0x358e, 0x1, 0x1);
        gbc.writeMem(0x12f3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb5e8);
        EXPECT(gbc.pc(), 0x12f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01D8
        gbc.setState(0x626b, 0x3403, 0x6990, 0x254f, 0x605, 0x4bb6, 0x1, 0x0);
        gbc.writeMem(0x626b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3403);
        EXPECT(gbc.pc(), 0x626d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01D9
        gbc.setState(0x6b10, 0xd66e, 0xfdd0, 0xa100, 0x962f, 0xe40b, 0x1, 0x1);
        gbc.writeMem(0x6b10, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd66e);
        EXPECT(gbc.pc(), 0x6b12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01DA
        gbc.setState(0xd808, 0x4a41, 0xec10, 0xd381, 0x618e, 0x838a, 0x0, 0x0);
        gbc.writeMem(0xd808, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4a41);
        EXPECT(gbc.pc(), 0xd80a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd808), 0xcb);
        EXPECT(gbc.readMem(0xd809), 0x4f);
        // CB 4F 01DB
        gbc.setState(0xe5de, 0x4da4, 0x6790, 0xc3c, 0xc639, 0x8b5d, 0x1, 0x1);
        gbc.writeMem(0xe5de, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x4da4);
        EXPECT(gbc.pc(), 0xe5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5de), 0xcb);
        EXPECT(gbc.readMem(0xe5df), 0x4f);
        // CB 4F 01DC
        gbc.setState(0xe347, 0x1fc3, 0x46f0, 0x93a, 0x1c38, 0x2155, 0x0, 0x0);
        gbc.writeMem(0xe347, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1fc3);
        EXPECT(gbc.pc(), 0xe349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe347), 0xcb);
        EXPECT(gbc.readMem(0xe348), 0x4f);
        // CB 4F 01DD
        gbc.setState(0x350c, 0xb49c, 0x27f0, 0x444d, 0xd8e4, 0xbfb7, 0x0, 0x1);
        gbc.writeMem(0x350c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb49c);
        EXPECT(gbc.pc(), 0x350e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01DE
        gbc.setState(0x279a, 0x23a0, 0x9260, 0xe8b5, 0x806a, 0xd4b6, 0x0, 0x0);
        gbc.writeMem(0x279a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x23a0);
        EXPECT(gbc.pc(), 0x279c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01DF
        gbc.setState(0xee56, 0x4efb, 0xff50, 0x6bb8, 0x8ac7, 0xe36, 0x1, 0x1);
        gbc.writeMem(0xee56, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4efb);
        EXPECT(gbc.pc(), 0xee58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee56), 0xcb);
        EXPECT(gbc.readMem(0xee57), 0x4f);
        // CB 4F 01E0
        gbc.setState(0xaeba, 0x68d6, 0xcc40, 0xec7d, 0x24cf, 0xda58, 0x0, 0x1);
        gbc.writeMem(0xaeba, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x68d6);
        EXPECT(gbc.pc(), 0xaebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeba), 0xcb);
        EXPECT(gbc.readMem(0xaebb), 0x4f);
        // CB 4F 01E1
        gbc.setState(0x9f53, 0x77d7, 0xfeb0, 0x4da8, 0xdb78, 0x7123, 0x1, 0x1);
        gbc.writeMem(0x9f53, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x77d7);
        EXPECT(gbc.pc(), 0x9f55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f53), 0xcb);
        EXPECT(gbc.readMem(0x9f54), 0x4f);
        // CB 4F 01E2
        gbc.setState(0xacf2, 0x52d, 0xd8d0, 0x20b9, 0xd291, 0x18fd, 0x0, 0x1);
        gbc.writeMem(0xacf2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x52d);
        EXPECT(gbc.pc(), 0xacf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacf2), 0xcb);
        EXPECT(gbc.readMem(0xacf3), 0x4f);
        // CB 4F 01E3
        gbc.setState(0x5db2, 0x67b7, 0xc090, 0x1ff2, 0xf455, 0xa777, 0x0, 0x1);
        gbc.writeMem(0x5db2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x67b7);
        EXPECT(gbc.pc(), 0x5db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01E4
        gbc.setState(0x9dea, 0x5063, 0xdc80, 0xe976, 0x7593, 0xe67c, 0x0, 0x1);
        gbc.writeMem(0x9dea, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5063);
        EXPECT(gbc.pc(), 0x9dec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dea), 0xcb);
        EXPECT(gbc.readMem(0x9deb), 0x4f);
        // CB 4F 01E5
        gbc.setState(0xe67a, 0x4529, 0xa140, 0x1ca1, 0x6eeb, 0xec0f, 0x1, 0x0);
        gbc.writeMem(0xe67a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4529);
        EXPECT(gbc.pc(), 0xe67c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe67a), 0xcb);
        EXPECT(gbc.readMem(0xe67b), 0x4f);
        // CB 4F 01E6
        gbc.setState(0xc985, 0x2350, 0xea20, 0x97de, 0xf596, 0x74a2, 0x1, 0x1);
        gbc.writeMem(0xc985, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2350);
        EXPECT(gbc.pc(), 0xc987);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc985), 0xcb);
        EXPECT(gbc.readMem(0xc986), 0x4f);
        // CB 4F 01E7
        gbc.setState(0xa2db, 0x9d57, 0xd560, 0xd12f, 0xf145, 0x9818, 0x0, 0x0);
        gbc.writeMem(0xa2db, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9d57);
        EXPECT(gbc.pc(), 0xa2dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2db), 0xcb);
        EXPECT(gbc.readMem(0xa2dc), 0x4f);
        // CB 4F 01E8
        gbc.setState(0x54ed, 0x35de, 0x9680, 0x9976, 0x947a, 0x949a, 0x1, 0x0);
        gbc.writeMem(0x54ed, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x35de);
        EXPECT(gbc.pc(), 0x54ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01E9
        gbc.setState(0xeed4, 0xa30f, 0x5340, 0x1f3a, 0xad4a, 0x2f40, 0x1, 0x0);
        gbc.writeMem(0xeed4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa30f);
        EXPECT(gbc.pc(), 0xeed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeed4), 0xcb);
        EXPECT(gbc.readMem(0xeed5), 0x4f);
        // CB 4F 01EA
        gbc.setState(0x20ec, 0x106, 0x54b0, 0x6759, 0xc25c, 0x5c42, 0x0, 0x0);
        gbc.writeMem(0x20ec, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x106);
        EXPECT(gbc.pc(), 0x20ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01EB
        gbc.setState(0x514, 0x192f, 0x410, 0xfc33, 0x93be, 0xcdbe, 0x0, 0x0);
        gbc.writeMem(0x514, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x192f);
        EXPECT(gbc.pc(), 0x516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01EC
        gbc.setState(0x283e, 0x2f01, 0x9020, 0x86d1, 0xfcec, 0x674f, 0x1, 0x1);
        gbc.writeMem(0x283e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2f01);
        EXPECT(gbc.pc(), 0x2840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01ED
        gbc.setState(0x433c, 0xbfc5, 0xeb0, 0xa5f2, 0x138a, 0x46bb, 0x0, 0x1);
        gbc.writeMem(0x433c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbfc5);
        EXPECT(gbc.pc(), 0x433e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01EF
        gbc.setState(0x9448, 0x6732, 0xe7a0, 0xc9fc, 0x815a, 0xbb4f, 0x0, 0x0);
        gbc.writeMem(0x9448, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6732);
        EXPECT(gbc.pc(), 0x944a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9448), 0xcb);
        EXPECT(gbc.readMem(0x9449), 0x4f);
        // CB 4F 01F0
        gbc.setState(0x3961, 0xd575, 0xa490, 0x4013, 0xf157, 0xf0cd, 0x1, 0x1);
        gbc.writeMem(0x3961, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd575);
        EXPECT(gbc.pc(), 0x3963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01F1
        gbc.setState(0xb80b, 0xe3ae, 0xb20, 0x5489, 0x69ca, 0x16f5, 0x1, 0x1);
        gbc.writeMem(0xb80b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe3ae);
        EXPECT(gbc.pc(), 0xb80d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb80b), 0xcb);
        EXPECT(gbc.readMem(0xb80c), 0x4f);
        // CB 4F 01F2
        gbc.setState(0xe983, 0x4ef8, 0x2ac0, 0x832a, 0x55a, 0x2915, 0x0, 0x1);
        gbc.writeMem(0xe983, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4ef8);
        EXPECT(gbc.pc(), 0xe985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe983), 0xcb);
        EXPECT(gbc.readMem(0xe984), 0x4f);
        // CB 4F 01F3
        gbc.setState(0xb054, 0xe035, 0x1270, 0x51be, 0x97ea, 0xb521, 0x1, 0x1);
        gbc.writeMem(0xb054, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe035);
        EXPECT(gbc.pc(), 0xb056);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb054), 0xcb);
        EXPECT(gbc.readMem(0xb055), 0x4f);
        // CB 4F 01F4
        gbc.setState(0xb0b1, 0x10d9, 0x8b90, 0x4bcc, 0x520b, 0x69f7, 0x0, 0x0);
        gbc.writeMem(0xb0b1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x10d9);
        EXPECT(gbc.pc(), 0xb0b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0b1), 0xcb);
        EXPECT(gbc.readMem(0xb0b2), 0x4f);
        // CB 4F 01F5
        gbc.setState(0xc8c1, 0xbb16, 0x5db0, 0xf6e1, 0x1939, 0x943c, 0x0, 0x0);
        gbc.writeMem(0xc8c1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xbb16);
        EXPECT(gbc.pc(), 0xc8c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8c1), 0xcb);
        EXPECT(gbc.readMem(0xc8c2), 0x4f);
        // CB 4F 01F6
        gbc.setState(0x6a26, 0x7786, 0x6080, 0xef2a, 0x7f33, 0x6b97, 0x1, 0x0);
        gbc.writeMem(0x6a26, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7786);
        EXPECT(gbc.pc(), 0x6a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01F7
        gbc.setState(0xd41f, 0x5b9f, 0x7310, 0x358, 0x2c24, 0x3304, 0x0, 0x1);
        gbc.writeMem(0xd41f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5b9f);
        EXPECT(gbc.pc(), 0xd421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd41f), 0xcb);
        EXPECT(gbc.readMem(0xd420), 0x4f);
        // CB 4F 01F8
        gbc.setState(0xa268, 0x35d, 0xd7f0, 0x1e2a, 0x8e26, 0xaaae, 0x1, 0x0);
        gbc.writeMem(0xa268, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x35d);
        EXPECT(gbc.pc(), 0xa26a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa268), 0xcb);
        EXPECT(gbc.readMem(0xa269), 0x4f);
        // CB 4F 01F9
        gbc.setState(0x3e2b, 0x2468, 0x4df0, 0xd5bc, 0xe2a6, 0xc051, 0x0, 0x0);
        gbc.writeMem(0x3e2b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2468);
        EXPECT(gbc.pc(), 0x3e2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01FA
        gbc.setState(0x789a, 0x7999, 0x6730, 0x4a, 0x94e3, 0xc18a, 0x1, 0x0);
        gbc.writeMem(0x789a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x7999);
        EXPECT(gbc.pc(), 0x789c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01FB
        gbc.setState(0x300d, 0xaf5b, 0x2a70, 0x63b6, 0x9dcf, 0xf39d, 0x1, 0x1);
        gbc.writeMem(0x300d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xaf5b);
        EXPECT(gbc.pc(), 0x300f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 01FC
        gbc.setState(0xee45, 0x6bfb, 0x2850, 0xb98, 0x708, 0x19b3, 0x0, 0x0);
        gbc.writeMem(0xee45, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6bfb);
        EXPECT(gbc.pc(), 0xee47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee45), 0xcb);
        EXPECT(gbc.readMem(0xee46), 0x4f);
        // CB 4F 01FD
        gbc.setState(0x2f08, 0x51c2, 0xd480, 0x8e72, 0xc62d, 0x76b2, 0x0, 0x1);
        gbc.writeMem(0x2f08, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x51c2);
        EXPECT(gbc.pc(), 0x2f0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 01FE
        gbc.setState(0xe087, 0x4ea4, 0x74a0, 0x91a6, 0xf5b6, 0x7cff, 0x0, 0x1);
        gbc.writeMem(0xe087, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4ea4);
        EXPECT(gbc.pc(), 0xe089);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe087), 0xcb);
        EXPECT(gbc.readMem(0xe088), 0x4f);
        // CB 4F 01FF
        gbc.setState(0xcb69, 0x6599, 0xde80, 0xfd73, 0x60ac, 0x4889, 0x1, 0x1);
        gbc.writeMem(0xcb69, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6599);
        EXPECT(gbc.pc(), 0xcb6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb69), 0xcb);
        EXPECT(gbc.readMem(0xcb6a), 0x4f);
        // CB 4F 0200
        gbc.setState(0xdb2d, 0x79b5, 0x53e0, 0xa45b, 0xce6e, 0xa7b1, 0x1, 0x1);
        gbc.writeMem(0xdb2d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x79b5);
        EXPECT(gbc.pc(), 0xdb2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb2d), 0xcb);
        EXPECT(gbc.readMem(0xdb2e), 0x4f);
        // CB 4F 0201
        gbc.setState(0xab22, 0xa110, 0xa5e0, 0x974f, 0xd25d, 0x3506, 0x0, 0x1);
        gbc.writeMem(0xab22, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa110);
        EXPECT(gbc.pc(), 0xab24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab22), 0xcb);
        EXPECT(gbc.readMem(0xab23), 0x4f);
        // CB 4F 0202
        gbc.setState(0xa420, 0xcbf0, 0x910, 0x38c0, 0xa493, 0xea4c, 0x0, 0x0);
        gbc.writeMem(0xa420, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xcbf0);
        EXPECT(gbc.pc(), 0xa422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa420), 0xcb);
        EXPECT(gbc.readMem(0xa421), 0x4f);
        // CB 4F 0203
        gbc.setState(0x7c2d, 0x15af, 0x2120, 0x1bc6, 0xcee0, 0x7776, 0x1, 0x0);
        gbc.writeMem(0x7c2d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x15af);
        EXPECT(gbc.pc(), 0x7c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0204
        gbc.setState(0xa8c6, 0x714, 0xd350, 0x5516, 0x2e8f, 0xa041, 0x0, 0x1);
        gbc.writeMem(0xa8c6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x714);
        EXPECT(gbc.pc(), 0xa8c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8c6), 0xcb);
        EXPECT(gbc.readMem(0xa8c7), 0x4f);
        // CB 4F 0205
        gbc.setState(0xe588, 0x5867, 0x2150, 0xdade, 0x85b8, 0x350, 0x0, 0x1);
        gbc.writeMem(0xe588, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5867);
        EXPECT(gbc.pc(), 0xe58a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe588), 0xcb);
        EXPECT(gbc.readMem(0xe589), 0x4f);
        // CB 4F 0206
        gbc.setState(0x712b, 0x59c6, 0x3cb0, 0xd53f, 0x2424, 0x1351, 0x0, 0x0);
        gbc.writeMem(0x712b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x59c6);
        EXPECT(gbc.pc(), 0x712d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0207
        gbc.setState(0xddf7, 0x2bfe, 0xd4b0, 0xf543, 0xadbc, 0x4fe3, 0x1, 0x1);
        gbc.writeMem(0xddf7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2bfe);
        EXPECT(gbc.pc(), 0xddf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddf7), 0xcb);
        EXPECT(gbc.readMem(0xddf8), 0x4f);
        // CB 4F 0208
        gbc.setState(0xd726, 0xe079, 0x7420, 0x3db6, 0x3196, 0xf5e8, 0x1, 0x0);
        gbc.writeMem(0xd726, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe079);
        EXPECT(gbc.pc(), 0xd728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd726), 0xcb);
        EXPECT(gbc.readMem(0xd727), 0x4f);
        // CB 4F 0209
        gbc.setState(0xb812, 0xe815, 0xd670, 0xec11, 0x1de9, 0x9f59, 0x0, 0x0);
        gbc.writeMem(0xb812, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xe815);
        EXPECT(gbc.pc(), 0xb814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb812), 0xcb);
        EXPECT(gbc.readMem(0xb813), 0x4f);
        // CB 4F 020A
        gbc.setState(0x18b5, 0xe23f, 0xddc0, 0x165e, 0x50a0, 0xebd8, 0x0, 0x0);
        gbc.writeMem(0x18b5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe23f);
        EXPECT(gbc.pc(), 0x18b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 020B
        gbc.setState(0xec97, 0x574c, 0xa1c0, 0x9399, 0xb99a, 0xa57e, 0x0, 0x0);
        gbc.writeMem(0xec97, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x574c);
        EXPECT(gbc.pc(), 0xec99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec97), 0xcb);
        EXPECT(gbc.readMem(0xec98), 0x4f);
        // CB 4F 020C
        gbc.setState(0x284, 0x9311, 0x96c0, 0x5a21, 0x775f, 0x2da4, 0x1, 0x0);
        gbc.writeMem(0x284, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9311);
        EXPECT(gbc.pc(), 0x286);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 020D
        gbc.setState(0xb021, 0x904e, 0x6db0, 0xc217, 0x6519, 0xf10d, 0x1, 0x1);
        gbc.writeMem(0xb021, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x904e);
        EXPECT(gbc.pc(), 0xb023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb021), 0xcb);
        EXPECT(gbc.readMem(0xb022), 0x4f);
        // CB 4F 020E
        gbc.setState(0x536, 0x8efb, 0xd490, 0xb142, 0x6a73, 0xe4e9, 0x0, 0x0);
        gbc.writeMem(0x536, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8efb);
        EXPECT(gbc.pc(), 0x538);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 020F
        gbc.setState(0x6ea0, 0x21d1, 0xe7e0, 0x4a1f, 0xf27, 0x973, 0x0, 0x1);
        gbc.writeMem(0x6ea0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x21d1);
        EXPECT(gbc.pc(), 0x6ea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0210
        gbc.setState(0x507c, 0xbeac, 0x1ff0, 0xf9ca, 0x7a1d, 0x299a, 0x0, 0x0);
        gbc.writeMem(0x507c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbeac);
        EXPECT(gbc.pc(), 0x507e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0211
        gbc.setState(0x2779, 0x52a8, 0x1ca0, 0x4855, 0x843c, 0x93cf, 0x1, 0x1);
        gbc.writeMem(0x2779, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x52a8);
        EXPECT(gbc.pc(), 0x277b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0213
        gbc.setState(0x3a00, 0xf7b8, 0xfb70, 0x316f, 0xe2ec, 0x12f2, 0x0, 0x1);
        gbc.writeMem(0x3a00, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf7b8);
        EXPECT(gbc.pc(), 0x3a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0214
        gbc.setState(0xca9e, 0x4533, 0x52f0, 0xfa0f, 0x78, 0x6490, 0x1, 0x0);
        gbc.writeMem(0xca9e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4533);
        EXPECT(gbc.pc(), 0xcaa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca9e), 0xcb);
        EXPECT(gbc.readMem(0xca9f), 0x4f);
        // CB 4F 0215
        gbc.setState(0xdce4, 0x61a2, 0xca20, 0x7dee, 0x50fc, 0xa6a7, 0x1, 0x0);
        gbc.writeMem(0xdce4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x61a2);
        EXPECT(gbc.pc(), 0xdce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce4), 0xcb);
        EXPECT(gbc.readMem(0xdce5), 0x4f);
        // CB 4F 0216
        gbc.setState(0xb769, 0x5e8e, 0x5680, 0x4381, 0x9ef0, 0x6521, 0x0, 0x0);
        gbc.writeMem(0xb769, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5e8e);
        EXPECT(gbc.pc(), 0xb76b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb769), 0xcb);
        EXPECT(gbc.readMem(0xb76a), 0x4f);
        // CB 4F 0217
        gbc.setState(0x2fe7, 0x5ec7, 0x7680, 0xe487, 0x5390, 0xeedc, 0x0, 0x1);
        gbc.writeMem(0x2fe7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5ec7);
        EXPECT(gbc.pc(), 0x2fe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0218
        gbc.setState(0xa0b5, 0xfa2e, 0x5b60, 0x6c50, 0x96cc, 0xdae4, 0x1, 0x1);
        gbc.writeMem(0xa0b5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfa2e);
        EXPECT(gbc.pc(), 0xa0b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0b5), 0xcb);
        EXPECT(gbc.readMem(0xa0b6), 0x4f);
        // CB 4F 0219
        gbc.setState(0x8c75, 0xac70, 0x49c0, 0x38f1, 0x8dee, 0x41e5, 0x0, 0x1);
        gbc.writeMem(0x8c75, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xac70);
        EXPECT(gbc.pc(), 0x8c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c75), 0xcb);
        EXPECT(gbc.readMem(0x8c76), 0x4f);
        // CB 4F 021B
        gbc.setState(0x1864, 0x7dc0, 0x1450, 0x48b5, 0x69b5, 0xcddc, 0x1, 0x1);
        gbc.writeMem(0x1864, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x7dc0);
        EXPECT(gbc.pc(), 0x1866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 021C
        gbc.setState(0x4f4e, 0xe1da, 0x3790, 0xe760, 0x963d, 0x26e8, 0x0, 0x1);
        gbc.writeMem(0x4f4e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe1da);
        EXPECT(gbc.pc(), 0x4f50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 021D
        gbc.setState(0x9ea5, 0x80ed, 0xb4f0, 0xc586, 0xd1a1, 0xe738, 0x0, 0x0);
        gbc.writeMem(0x9ea5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x80ed);
        EXPECT(gbc.pc(), 0x9ea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ea5), 0xcb);
        EXPECT(gbc.readMem(0x9ea6), 0x4f);
        // CB 4F 021E
        gbc.setState(0xefff, 0xafdc, 0xddd0, 0x64bb, 0x8017, 0xecd3, 0x0, 0x0);
        gbc.writeMem(0xefff, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xafdc);
        EXPECT(gbc.pc(), 0xf001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefff), 0xcb);
        EXPECT(gbc.readMem(0xf000), 0x4f);
        // CB 4F 021F
        gbc.setState(0x6b7c, 0x1458, 0x8300, 0xfa73, 0xb35b, 0xaced, 0x0, 0x0);
        gbc.writeMem(0x6b7c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1458);
        EXPECT(gbc.pc(), 0x6b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0220
        gbc.setState(0x39fd, 0xa112, 0xc5f0, 0x1664, 0xa9b4, 0x9ad6, 0x0, 0x1);
        gbc.writeMem(0x39fd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xa112);
        EXPECT(gbc.pc(), 0x39ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0221
        gbc.setState(0x13fe, 0x3ccc, 0xb3e0, 0xaecb, 0xa150, 0xbed9, 0x0, 0x0);
        gbc.writeMem(0x13fe, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3ccc);
        EXPECT(gbc.pc(), 0x1400);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0222
        gbc.setState(0x1ed8, 0x151e, 0xbc40, 0x7887, 0x16e0, 0xbabe, 0x0, 0x0);
        gbc.writeMem(0x1ed8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x151e);
        EXPECT(gbc.pc(), 0x1eda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0223
        gbc.setState(0x33e4, 0xbd69, 0xb780, 0x92e3, 0x4c6, 0x6d6, 0x1, 0x1);
        gbc.writeMem(0x33e4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbd69);
        EXPECT(gbc.pc(), 0x33e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0224
        gbc.setState(0xab73, 0x4b31, 0x6d60, 0xed6c, 0x192c, 0xc3ed, 0x1, 0x1);
        gbc.writeMem(0xab73, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4b31);
        EXPECT(gbc.pc(), 0xab75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab73), 0xcb);
        EXPECT(gbc.readMem(0xab74), 0x4f);
        // CB 4F 0225
        gbc.setState(0x8a2b, 0x35e3, 0xec70, 0xa09a, 0x4a0f, 0x46fd, 0x0, 0x1);
        gbc.writeMem(0x8a2b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x35e3);
        EXPECT(gbc.pc(), 0x8a2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a2b), 0xcb);
        EXPECT(gbc.readMem(0x8a2c), 0x4f);
        // CB 4F 0227
        gbc.setState(0xb83a, 0xd373, 0xd610, 0xc5b1, 0xe8c8, 0xae22, 0x0, 0x0);
        gbc.writeMem(0xb83a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd373);
        EXPECT(gbc.pc(), 0xb83c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb83a), 0xcb);
        EXPECT(gbc.readMem(0xb83b), 0x4f);
        // CB 4F 0228
        gbc.setState(0x71d8, 0xd51f, 0xf7b0, 0xe05d, 0x22ad, 0x3a0a, 0x0, 0x0);
        gbc.writeMem(0x71d8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd51f);
        EXPECT(gbc.pc(), 0x71da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0229
        gbc.setState(0x6e08, 0x6920, 0x6b10, 0x2519, 0x9508, 0xa8, 0x0, 0x0);
        gbc.writeMem(0x6e08, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6920);
        EXPECT(gbc.pc(), 0x6e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 022A
        gbc.setState(0xd1a1, 0x3b56, 0x9440, 0x3d8b, 0xa42, 0xc77d, 0x0, 0x0);
        gbc.writeMem(0xd1a1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3b56);
        EXPECT(gbc.pc(), 0xd1a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a1), 0xcb);
        EXPECT(gbc.readMem(0xd1a2), 0x4f);
        // CB 4F 022B
        gbc.setState(0xc54a, 0x116e, 0x8fb0, 0xb6a4, 0x53b1, 0x3d9b, 0x1, 0x0);
        gbc.writeMem(0xc54a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x116e);
        EXPECT(gbc.pc(), 0xc54c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54a), 0xcb);
        EXPECT(gbc.readMem(0xc54b), 0x4f);
        // CB 4F 022C
        gbc.setState(0x78fd, 0x94fb, 0x89e0, 0xc9bd, 0xb5a1, 0x3957, 0x1, 0x0);
        gbc.writeMem(0x78fd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x94fb);
        EXPECT(gbc.pc(), 0x78ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 022D
        gbc.setState(0x8a6c, 0xee53, 0xce20, 0x6824, 0x8b3e, 0xc4b6, 0x0, 0x1);
        gbc.writeMem(0x8a6c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xee53);
        EXPECT(gbc.pc(), 0x8a6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a6c), 0xcb);
        EXPECT(gbc.readMem(0x8a6d), 0x4f);
        // CB 4F 022E
        gbc.setState(0xd39, 0xd19d, 0x1630, 0x5814, 0x8ed4, 0x315b, 0x1, 0x0);
        gbc.writeMem(0xd39, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd19d);
        EXPECT(gbc.pc(), 0xd3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 022F
        gbc.setState(0x6d90, 0x6b0a, 0x2590, 0xda84, 0xd8e8, 0xf8d4, 0x1, 0x1);
        gbc.writeMem(0x6d90, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6b0a);
        EXPECT(gbc.pc(), 0x6d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0230
        gbc.setState(0xae12, 0xdd41, 0xfef0, 0x3517, 0x1355, 0xf54e, 0x0, 0x1);
        gbc.writeMem(0xae12, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xdd41);
        EXPECT(gbc.pc(), 0xae14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae12), 0xcb);
        EXPECT(gbc.readMem(0xae13), 0x4f);
        // CB 4F 0231
        gbc.setState(0x7e67, 0x41dd, 0x67a0, 0x1662, 0xc36b, 0x5497, 0x1, 0x0);
        gbc.writeMem(0x7e67, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x41dd);
        EXPECT(gbc.pc(), 0x7e69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0232
        gbc.setState(0xe900, 0xc18c, 0xa100, 0x2684, 0xac31, 0x5d46, 0x0, 0x0);
        gbc.writeMem(0xe900, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc18c);
        EXPECT(gbc.pc(), 0xe902);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe900), 0xcb);
        EXPECT(gbc.readMem(0xe901), 0x4f);
        // CB 4F 0233
        gbc.setState(0x1ba9, 0xe25c, 0x6200, 0xf0df, 0x37c9, 0x8aac, 0x1, 0x1);
        gbc.writeMem(0x1ba9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe25c);
        EXPECT(gbc.pc(), 0x1bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0234
        gbc.setState(0x44e, 0xb12f, 0xb350, 0xf4e4, 0x2554, 0xb87, 0x0, 0x0);
        gbc.writeMem(0x44e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb12f);
        EXPECT(gbc.pc(), 0x450);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0235
        gbc.setState(0x1261, 0x4cc8, 0xc0e0, 0xb332, 0x1e31, 0xe700, 0x0, 0x0);
        gbc.writeMem(0x1261, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4cc8);
        EXPECT(gbc.pc(), 0x1263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0237
        gbc.setState(0xd36a, 0xf280, 0x50c0, 0xbb8c, 0x3bb4, 0x7a1b, 0x1, 0x0);
        gbc.writeMem(0xd36a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf280);
        EXPECT(gbc.pc(), 0xd36c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd36a), 0xcb);
        EXPECT(gbc.readMem(0xd36b), 0x4f);
        // CB 4F 0238
        gbc.setState(0x3b38, 0xca16, 0xf4f0, 0x93ce, 0x3ba8, 0x9206, 0x0, 0x1);
        gbc.writeMem(0x3b38, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xca16);
        EXPECT(gbc.pc(), 0x3b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0239
        gbc.setState(0x69a4, 0x4687, 0x3b00, 0x52aa, 0x54ba, 0xb4fc, 0x1, 0x0);
        gbc.writeMem(0x69a4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4687);
        EXPECT(gbc.pc(), 0x69a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 023A
        gbc.setState(0x2c71, 0xfc38, 0xa260, 0xa05a, 0x309f, 0xac8d, 0x0, 0x1);
        gbc.writeMem(0x2c71, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xfc38);
        EXPECT(gbc.pc(), 0x2c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 023B
        gbc.setState(0xec20, 0xaaea, 0x1ad0, 0x433c, 0x7ed2, 0x788f, 0x0, 0x1);
        gbc.writeMem(0xec20, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xaaea);
        EXPECT(gbc.pc(), 0xec22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec20), 0xcb);
        EXPECT(gbc.readMem(0xec21), 0x4f);
        // CB 4F 023C
        gbc.setState(0xda36, 0xb564, 0x6c0, 0x6ef9, 0x6a31, 0x64e, 0x1, 0x1);
        gbc.writeMem(0xda36, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb564);
        EXPECT(gbc.pc(), 0xda38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda36), 0xcb);
        EXPECT(gbc.readMem(0xda37), 0x4f);
        // CB 4F 023D
        gbc.setState(0x5a89, 0x4b67, 0x4b30, 0xc1ca, 0x1949, 0xcbc9, 0x1, 0x0);
        gbc.writeMem(0x5a89, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4b67);
        EXPECT(gbc.pc(), 0x5a8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 023E
        gbc.setState(0x6216, 0xd5dd, 0x9a90, 0xaf3e, 0x17c3, 0x765b, 0x1, 0x1);
        gbc.writeMem(0x6216, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd5dd);
        EXPECT(gbc.pc(), 0x6218);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 023F
        gbc.setState(0x8429, 0x70d2, 0x3990, 0x1865, 0xcf37, 0x9fbf, 0x1, 0x1);
        gbc.writeMem(0x8429, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x70d2);
        EXPECT(gbc.pc(), 0x842b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8429), 0xcb);
        EXPECT(gbc.readMem(0x842a), 0x4f);
        // CB 4F 0240
        gbc.setState(0x9c34, 0x8ef1, 0x1fb0, 0x1f6c, 0x94d, 0x83ac, 0x1, 0x0);
        gbc.writeMem(0x9c34, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8ef1);
        EXPECT(gbc.pc(), 0x9c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c34), 0xcb);
        EXPECT(gbc.readMem(0x9c35), 0x4f);
        // CB 4F 0241
        gbc.setState(0x7df0, 0x4ae, 0x1600, 0x2bb5, 0x890f, 0x1228, 0x0, 0x0);
        gbc.writeMem(0x7df0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4ae);
        EXPECT(gbc.pc(), 0x7df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0242
        gbc.setState(0x412, 0x5ae3, 0x5210, 0xa495, 0x489e, 0x6821, 0x0, 0x0);
        gbc.writeMem(0x412, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5ae3);
        EXPECT(gbc.pc(), 0x414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0243
        gbc.setState(0x45be, 0x478c, 0x4770, 0x6fe7, 0x1700, 0xf16c, 0x0, 0x1);
        gbc.writeMem(0x45be, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x478c);
        EXPECT(gbc.pc(), 0x45c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0244
        gbc.setState(0x1f63, 0xd5e0, 0x4350, 0x1863, 0xe01e, 0xc90b, 0x1, 0x1);
        gbc.writeMem(0x1f63, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd5e0);
        EXPECT(gbc.pc(), 0x1f65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0245
        gbc.setState(0xafab, 0x7c54, 0x7800, 0xa466, 0xc0c9, 0x52f, 0x1, 0x1);
        gbc.writeMem(0xafab, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7c54);
        EXPECT(gbc.pc(), 0xafad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafab), 0xcb);
        EXPECT(gbc.readMem(0xafac), 0x4f);
        // CB 4F 0246
        gbc.setState(0xb60, 0x89e7, 0x1b30, 0x8da4, 0x424b, 0xdff8, 0x0, 0x1);
        gbc.writeMem(0xb60, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x89e7);
        EXPECT(gbc.pc(), 0xb62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0247
        gbc.setState(0xa752, 0xb3d1, 0xba60, 0xd31f, 0x5e6, 0xe2e0, 0x0, 0x1);
        gbc.writeMem(0xa752, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb3d1);
        EXPECT(gbc.pc(), 0xa754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa752), 0xcb);
        EXPECT(gbc.readMem(0xa753), 0x4f);
        // CB 4F 0248
        gbc.setState(0x399a, 0x5da7, 0x6c20, 0x8dac, 0x6d40, 0x1dd5, 0x1, 0x0);
        gbc.writeMem(0x399a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5da7);
        EXPECT(gbc.pc(), 0x399c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0249
        gbc.setState(0x6444, 0x31e4, 0x8460, 0x3a7c, 0xde23, 0xa7e3, 0x0, 0x0);
        gbc.writeMem(0x6444, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x31e4);
        EXPECT(gbc.pc(), 0x6446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 024A
        gbc.setState(0xc7e0, 0x745f, 0x67c0, 0x71bb, 0xbc09, 0xc47a, 0x0, 0x0);
        gbc.writeMem(0xc7e0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x745f);
        EXPECT(gbc.pc(), 0xc7e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7e0), 0xcb);
        EXPECT(gbc.readMem(0xc7e1), 0x4f);
        // CB 4F 024B
        gbc.setState(0x354f, 0xeb15, 0x3150, 0x9a3b, 0x5cba, 0x16b9, 0x1, 0x0);
        gbc.writeMem(0x354f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xeb15);
        EXPECT(gbc.pc(), 0x3551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 024C
        gbc.setState(0xd429, 0xb911, 0x1a50, 0x7bc5, 0xe9e6, 0x8a3c, 0x0, 0x1);
        gbc.writeMem(0xd429, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb911);
        EXPECT(gbc.pc(), 0xd42b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd429), 0xcb);
        EXPECT(gbc.readMem(0xd42a), 0x4f);
        // CB 4F 024D
        gbc.setState(0xada1, 0x30ed, 0x9ac0, 0x3258, 0xe294, 0xf431, 0x0, 0x0);
        gbc.writeMem(0xada1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x30ed);
        EXPECT(gbc.pc(), 0xada3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada1), 0xcb);
        EXPECT(gbc.readMem(0xada2), 0x4f);
        // CB 4F 024E
        gbc.setState(0x5631, 0x2ab1, 0x8e50, 0xd12c, 0x8fed, 0x39e2, 0x1, 0x1);
        gbc.writeMem(0x5631, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2ab1);
        EXPECT(gbc.pc(), 0x5633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 024F
        gbc.setState(0xe7c5, 0x5ea2, 0xffc0, 0xb13b, 0xf658, 0x84d7, 0x1, 0x0);
        gbc.writeMem(0xe7c5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5ea2);
        EXPECT(gbc.pc(), 0xe7c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c5), 0xcb);
        EXPECT(gbc.readMem(0xe7c6), 0x4f);
        // CB 4F 0250
        gbc.setState(0x8a43, 0xaf34, 0x7df0, 0xcb1c, 0x3abd, 0xf33b, 0x0, 0x1);
        gbc.writeMem(0x8a43, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xaf34);
        EXPECT(gbc.pc(), 0x8a45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a43), 0xcb);
        EXPECT(gbc.readMem(0x8a44), 0x4f);
        // CB 4F 0251
        gbc.setState(0x9c15, 0xe0ba, 0xa6c0, 0x241e, 0x10b8, 0x44da, 0x1, 0x0);
        gbc.writeMem(0x9c15, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe0ba);
        EXPECT(gbc.pc(), 0x9c17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c15), 0xcb);
        EXPECT(gbc.readMem(0x9c16), 0x4f);
        // CB 4F 0252
        gbc.setState(0x6c7c, 0x4b4a, 0xe860, 0xad93, 0x4c1f, 0xe6d8, 0x1, 0x0);
        gbc.writeMem(0x6c7c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4b4a);
        EXPECT(gbc.pc(), 0x6c7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0253
        gbc.setState(0x364, 0xa06d, 0x4f60, 0x38c, 0x3da0, 0xeae, 0x0, 0x1);
        gbc.writeMem(0x364, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa06d);
        EXPECT(gbc.pc(), 0x366);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0254
        gbc.setState(0x18f5, 0x38a7, 0x4bc0, 0x50ab, 0xdc82, 0x3f2f, 0x1, 0x0);
        gbc.writeMem(0x18f5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x38a7);
        EXPECT(gbc.pc(), 0x18f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0255
        gbc.setState(0xbefa, 0xdab, 0x5a60, 0x72da, 0x809e, 0x470d, 0x0, 0x1);
        gbc.writeMem(0xbefa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdab);
        EXPECT(gbc.pc(), 0xbefc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefa), 0xcb);
        EXPECT(gbc.readMem(0xbefb), 0x4f);
        // CB 4F 0256
        gbc.setState(0x5da8, 0xdabd, 0x6010, 0xd02d, 0x5068, 0x7b33, 0x0, 0x0);
        gbc.writeMem(0x5da8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xdabd);
        EXPECT(gbc.pc(), 0x5daa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0257
        gbc.setState(0xba01, 0xf7f7, 0xf3e0, 0xf722, 0x293b, 0x489c, 0x0, 0x0);
        gbc.writeMem(0xba01, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf7f7);
        EXPECT(gbc.pc(), 0xba03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba01), 0xcb);
        EXPECT(gbc.readMem(0xba02), 0x4f);
        // CB 4F 0258
        gbc.setState(0x6dbe, 0x1e7, 0x5d0, 0x6, 0x8841, 0xca2b, 0x1, 0x1);
        gbc.writeMem(0x6dbe, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1e7);
        EXPECT(gbc.pc(), 0x6dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0259
        gbc.setState(0xe42, 0xa886, 0x20, 0xfd66, 0xc4ba, 0x3ac8, 0x1, 0x0);
        gbc.writeMem(0xe42, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa886);
        EXPECT(gbc.pc(), 0xe44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 025A
        gbc.setState(0xcb10, 0x9ed7, 0x1d90, 0x4ce6, 0xef7, 0xe376, 0x0, 0x0);
        gbc.writeMem(0xcb10, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9ed7);
        EXPECT(gbc.pc(), 0xcb12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb10), 0xcb);
        EXPECT(gbc.readMem(0xcb11), 0x4f);
        // CB 4F 025B
        gbc.setState(0x27c0, 0xebaf, 0x47c0, 0x2106, 0x2d66, 0xde4e, 0x1, 0x1);
        gbc.writeMem(0x27c0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xebaf);
        EXPECT(gbc.pc(), 0x27c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 025C
        gbc.setState(0x5217, 0xb5f6, 0x6f40, 0xfe4c, 0x54a7, 0x7998, 0x1, 0x0);
        gbc.writeMem(0x5217, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xb5f6);
        EXPECT(gbc.pc(), 0x5219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 025D
        gbc.setState(0xd2e3, 0x2a57, 0xdb30, 0xd2d6, 0x79d9, 0xfaa3, 0x0, 0x1);
        gbc.writeMem(0xd2e3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2a57);
        EXPECT(gbc.pc(), 0xd2e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2e3), 0xcb);
        EXPECT(gbc.readMem(0xd2e4), 0x4f);
        // CB 4F 025E
        gbc.setState(0x448d, 0x55d2, 0x2250, 0x23f5, 0x5aac, 0xf828, 0x0, 0x1);
        gbc.writeMem(0x448d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x55d2);
        EXPECT(gbc.pc(), 0x448f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 025F
        gbc.setState(0x8ea, 0x358d, 0x8200, 0x61a8, 0x6d08, 0x826, 0x1, 0x1);
        gbc.writeMem(0x8ea, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x358d);
        EXPECT(gbc.pc(), 0x8ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0260
        gbc.setState(0xb099, 0xd27, 0x2fb0, 0xe16a, 0xf198, 0x3456, 0x0, 0x0);
        gbc.writeMem(0xb099, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd27);
        EXPECT(gbc.pc(), 0xb09b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb099), 0xcb);
        EXPECT(gbc.readMem(0xb09a), 0x4f);
        // CB 4F 0261
        gbc.setState(0x4ac4, 0x34e3, 0x6000, 0xa813, 0x8452, 0x5e6e, 0x0, 0x1);
        gbc.writeMem(0x4ac4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x34e3);
        EXPECT(gbc.pc(), 0x4ac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0263
        gbc.setState(0x5f84, 0x3993, 0x2480, 0x2190, 0xf64e, 0x91d7, 0x1, 0x1);
        gbc.writeMem(0x5f84, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3993);
        EXPECT(gbc.pc(), 0x5f86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0264
        gbc.setState(0x1d80, 0x13f5, 0x8c40, 0xa7af, 0x5785, 0x13c3, 0x1, 0x1);
        gbc.writeMem(0x1d80, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x13f5);
        EXPECT(gbc.pc(), 0x1d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0265
        gbc.setState(0x3877, 0x41ad, 0xef40, 0x38b5, 0x5168, 0x8325, 0x1, 0x1);
        gbc.writeMem(0x3877, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x41ad);
        EXPECT(gbc.pc(), 0x3879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0267
        gbc.setState(0xe5ba, 0xcac8, 0x22b0, 0x30f5, 0xb655, 0xdd81, 0x1, 0x0);
        gbc.writeMem(0xe5ba, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xcac8);
        EXPECT(gbc.pc(), 0xe5bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ba), 0xcb);
        EXPECT(gbc.readMem(0xe5bb), 0x4f);
        // CB 4F 0268
        gbc.setState(0xc2bf, 0xe184, 0xca90, 0x453e, 0xa8b8, 0xe7a0, 0x1, 0x0);
        gbc.writeMem(0xc2bf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe184);
        EXPECT(gbc.pc(), 0xc2c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2bf), 0xcb);
        EXPECT(gbc.readMem(0xc2c0), 0x4f);
        // CB 4F 0269
        gbc.setState(0x6e3b, 0x3735, 0x2920, 0x88a3, 0x1087, 0x689b, 0x1, 0x0);
        gbc.writeMem(0x6e3b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3735);
        EXPECT(gbc.pc(), 0x6e3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 026A
        gbc.setState(0xdacf, 0xd1db, 0xcd80, 0x3728, 0x3c79, 0x94a2, 0x1, 0x0);
        gbc.writeMem(0xdacf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd1db);
        EXPECT(gbc.pc(), 0xdad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdacf), 0xcb);
        EXPECT(gbc.readMem(0xdad0), 0x4f);
        // CB 4F 026C
        gbc.setState(0xaf7a, 0x5105, 0xf20, 0xc7be, 0xe501, 0xeab2, 0x0, 0x1);
        gbc.writeMem(0xaf7a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5105);
        EXPECT(gbc.pc(), 0xaf7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf7a), 0xcb);
        EXPECT(gbc.readMem(0xaf7b), 0x4f);
        // CB 4F 026D
        gbc.setState(0xd784, 0x8f1c, 0xf860, 0xbc6, 0x7b6f, 0xd8e2, 0x0, 0x1);
        gbc.writeMem(0xd784, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8f1c);
        EXPECT(gbc.pc(), 0xd786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd784), 0xcb);
        EXPECT(gbc.readMem(0xd785), 0x4f);
        // CB 4F 026E
        gbc.setState(0x3242, 0x9005, 0x62e0, 0x292a, 0xb90b, 0x29cf, 0x1, 0x1);
        gbc.writeMem(0x3242, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9005);
        EXPECT(gbc.pc(), 0x3244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 026F
        gbc.setState(0x2c42, 0x32cc, 0xb7a0, 0xb9b, 0xd174, 0x91e8, 0x1, 0x1);
        gbc.writeMem(0x2c42, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x32cc);
        EXPECT(gbc.pc(), 0x2c44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0270
        gbc.setState(0xadc2, 0xb7e, 0x5670, 0x29d8, 0xd5c1, 0x4473, 0x0, 0x1);
        gbc.writeMem(0xadc2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb7e);
        EXPECT(gbc.pc(), 0xadc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc2), 0xcb);
        EXPECT(gbc.readMem(0xadc3), 0x4f);
        // CB 4F 0271
        gbc.setState(0x1e7, 0x9e8a, 0x21c0, 0xc8bd, 0xf981, 0x4c81, 0x0, 0x0);
        gbc.writeMem(0x1e7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9e8a);
        EXPECT(gbc.pc(), 0x1e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0272
        gbc.setState(0x4294, 0xf6f9, 0x6fa0, 0x699d, 0xddca, 0x5187, 0x0, 0x1);
        gbc.writeMem(0x4294, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf6f9);
        EXPECT(gbc.pc(), 0x4296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0273
        gbc.setState(0x947b, 0x1af6, 0x730, 0x9653, 0xf83c, 0x5736, 0x1, 0x0);
        gbc.writeMem(0x947b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1af6);
        EXPECT(gbc.pc(), 0x947d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x947b), 0xcb);
        EXPECT(gbc.readMem(0x947c), 0x4f);
        // CB 4F 0274
        gbc.setState(0xe55c, 0x17ea, 0xc100, 0xe636, 0x3bf7, 0xb44c, 0x0, 0x0);
        gbc.writeMem(0xe55c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x17ea);
        EXPECT(gbc.pc(), 0xe55e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe55c), 0xcb);
        EXPECT(gbc.readMem(0xe55d), 0x4f);
        // CB 4F 0275
        gbc.setState(0xed36, 0xb737, 0xbb40, 0xcd67, 0x5655, 0xd2fe, 0x0, 0x0);
        gbc.writeMem(0xed36, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb737);
        EXPECT(gbc.pc(), 0xed38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed36), 0xcb);
        EXPECT(gbc.readMem(0xed37), 0x4f);
        // CB 4F 0276
        gbc.setState(0x2b5f, 0xe1a6, 0x3160, 0x1a74, 0xebff, 0x9f48, 0x1, 0x0);
        gbc.writeMem(0x2b5f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe1a6);
        EXPECT(gbc.pc(), 0x2b61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0277
        gbc.setState(0x8d8a, 0x1663, 0xfbd0, 0xce99, 0x9d08, 0x824c, 0x0, 0x1);
        gbc.writeMem(0x8d8a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1663);
        EXPECT(gbc.pc(), 0x8d8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d8a), 0xcb);
        EXPECT(gbc.readMem(0x8d8b), 0x4f);
        // CB 4F 0279
        gbc.setState(0x37c2, 0xd28d, 0x1860, 0xf7c1, 0xfbcd, 0xe5bf, 0x1, 0x1);
        gbc.writeMem(0x37c2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd28d);
        EXPECT(gbc.pc(), 0x37c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 027B
        gbc.setState(0x819a, 0x80f0, 0x8570, 0xc124, 0xa0d9, 0xb746, 0x0, 0x1);
        gbc.writeMem(0x819a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x80f0);
        EXPECT(gbc.pc(), 0x819c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x819a), 0xcb);
        EXPECT(gbc.readMem(0x819b), 0x4f);
        // CB 4F 027C
        gbc.setState(0x92ac, 0xf336, 0x8670, 0xfa49, 0xb6ce, 0xe8b1, 0x0, 0x1);
        gbc.writeMem(0x92ac, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf336);
        EXPECT(gbc.pc(), 0x92ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92ac), 0xcb);
        EXPECT(gbc.readMem(0x92ad), 0x4f);
        // CB 4F 027D
        gbc.setState(0xd81a, 0xb776, 0xa290, 0xe839, 0x9c5e, 0x90a0, 0x1, 0x1);
        gbc.writeMem(0xd81a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb776);
        EXPECT(gbc.pc(), 0xd81c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd81a), 0xcb);
        EXPECT(gbc.readMem(0xd81b), 0x4f);
        // CB 4F 027E
        gbc.setState(0x785, 0x6406, 0x8d60, 0x40e2, 0xfcda, 0xfe21, 0x1, 0x0);
        gbc.writeMem(0x785, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6406);
        EXPECT(gbc.pc(), 0x787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 027F
        gbc.setState(0x5771, 0x981b, 0xba80, 0xe687, 0x20a1, 0x4923, 0x0, 0x1);
        gbc.writeMem(0x5771, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x981b);
        EXPECT(gbc.pc(), 0x5773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0280
        gbc.setState(0xa45, 0x2f55, 0x1c30, 0xd793, 0x9b2b, 0x35a5, 0x0, 0x0);
        gbc.writeMem(0xa45, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2f55);
        EXPECT(gbc.pc(), 0xa47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0281
        gbc.setState(0x3b50, 0xe5da, 0x82b0, 0xca8a, 0x3925, 0x31de, 0x0, 0x1);
        gbc.writeMem(0x3b50, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe5da);
        EXPECT(gbc.pc(), 0x3b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0282
        gbc.setState(0x47e6, 0x2690, 0x4160, 0xfc40, 0xcbb4, 0x7410, 0x0, 0x0);
        gbc.writeMem(0x47e6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2690);
        EXPECT(gbc.pc(), 0x47e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0283
        gbc.setState(0x1f17, 0x7f96, 0xcb00, 0xeac0, 0x78d1, 0x7350, 0x1, 0x1);
        gbc.writeMem(0x1f17, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7f96);
        EXPECT(gbc.pc(), 0x1f19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0284
        gbc.setState(0x7295, 0x4da2, 0x9080, 0x9700, 0x86e8, 0x2439, 0x0, 0x1);
        gbc.writeMem(0x7295, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4da2);
        EXPECT(gbc.pc(), 0x7297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0285
        gbc.setState(0xe2eb, 0x1ff4, 0xb730, 0x9d9a, 0xa6db, 0x1dfa, 0x1, 0x1);
        gbc.writeMem(0xe2eb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1ff4);
        EXPECT(gbc.pc(), 0xe2ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2eb), 0xcb);
        EXPECT(gbc.readMem(0xe2ec), 0x4f);
        // CB 4F 0286
        gbc.setState(0x9e1, 0xe0f0, 0x30e0, 0x31a5, 0x8540, 0x6621, 0x0, 0x0);
        gbc.writeMem(0x9e1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe0f0);
        EXPECT(gbc.pc(), 0x9e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0287
        gbc.setState(0xb7d9, 0x54fd, 0x5c50, 0x1cba, 0x43f9, 0x9489, 0x0, 0x1);
        gbc.writeMem(0xb7d9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x54fd);
        EXPECT(gbc.pc(), 0xb7db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7d9), 0xcb);
        EXPECT(gbc.readMem(0xb7da), 0x4f);
        // CB 4F 0288
        gbc.setState(0x2753, 0x8366, 0x4640, 0x6006, 0xeb03, 0xf4df, 0x0, 0x0);
        gbc.writeMem(0x2753, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8366);
        EXPECT(gbc.pc(), 0x2755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0289
        gbc.setState(0x8d4b, 0xa199, 0x5890, 0x6432, 0x8bd1, 0x409a, 0x0, 0x0);
        gbc.writeMem(0x8d4b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa199);
        EXPECT(gbc.pc(), 0x8d4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d4b), 0xcb);
        EXPECT(gbc.readMem(0x8d4c), 0x4f);
        // CB 4F 028A
        gbc.setState(0xc57b, 0xd01f, 0x3480, 0x614e, 0x99ec, 0xcf5a, 0x1, 0x0);
        gbc.writeMem(0xc57b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd01f);
        EXPECT(gbc.pc(), 0xc57d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc57b), 0xcb);
        EXPECT(gbc.readMem(0xc57c), 0x4f);
        // CB 4F 028C
        gbc.setState(0xe0d7, 0xc528, 0x83a0, 0xb9e0, 0x280c, 0x4758, 0x1, 0x1);
        gbc.writeMem(0xe0d7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc528);
        EXPECT(gbc.pc(), 0xe0d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d7), 0xcb);
        EXPECT(gbc.readMem(0xe0d8), 0x4f);
        // CB 4F 028D
        gbc.setState(0x54cf, 0x978e, 0xacf0, 0xdbbe, 0x7c29, 0x7457, 0x0, 0x0);
        gbc.writeMem(0x54cf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x978e);
        EXPECT(gbc.pc(), 0x54d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 028E
        gbc.setState(0xb962, 0xbe7f, 0x3730, 0xd3a0, 0xdde5, 0x63f6, 0x1, 0x0);
        gbc.writeMem(0xb962, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbe7f);
        EXPECT(gbc.pc(), 0xb964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb962), 0xcb);
        EXPECT(gbc.readMem(0xb963), 0x4f);
        // CB 4F 028F
        gbc.setState(0x579f, 0x13e2, 0xdc0, 0xea81, 0x2002, 0x3321, 0x0, 0x0);
        gbc.writeMem(0x579f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x13e2);
        EXPECT(gbc.pc(), 0x57a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0290
        gbc.setState(0xe161, 0xf89f, 0x5a70, 0xe5d1, 0xc56d, 0x6023, 0x1, 0x0);
        gbc.writeMem(0xe161, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf89f);
        EXPECT(gbc.pc(), 0xe163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe161), 0xcb);
        EXPECT(gbc.readMem(0xe162), 0x4f);
        // CB 4F 0291
        gbc.setState(0x1395, 0x243e, 0x3670, 0x8240, 0x3a7d, 0x8449, 0x0, 0x1);
        gbc.writeMem(0x1395, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x243e);
        EXPECT(gbc.pc(), 0x1397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0292
        gbc.setState(0x9025, 0xcacf, 0x2400, 0x1344, 0xf741, 0xbc0e, 0x0, 0x0);
        gbc.writeMem(0x9025, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xcacf);
        EXPECT(gbc.pc(), 0x9027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9025), 0xcb);
        EXPECT(gbc.readMem(0x9026), 0x4f);
        // CB 4F 0293
        gbc.setState(0x39b6, 0xb3bd, 0xe210, 0xd63, 0xbce7, 0xf4b, 0x1, 0x1);
        gbc.writeMem(0x39b6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb3bd);
        EXPECT(gbc.pc(), 0x39b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0294
        gbc.setState(0x65c8, 0x7332, 0x3070, 0x2a8d, 0x915e, 0x9aac, 0x1, 0x1);
        gbc.writeMem(0x65c8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x7332);
        EXPECT(gbc.pc(), 0x65ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0295
        gbc.setState(0x70b9, 0x8132, 0x1e80, 0x415f, 0x57b8, 0x33ad, 0x1, 0x0);
        gbc.writeMem(0x70b9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8132);
        EXPECT(gbc.pc(), 0x70bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0297
        gbc.setState(0x3636, 0x6631, 0xc70, 0x2dea, 0xc501, 0x6354, 0x1, 0x0);
        gbc.writeMem(0x3636, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6631);
        EXPECT(gbc.pc(), 0x3638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0298
        gbc.setState(0xad98, 0x8a6d, 0xe3e0, 0xe6fc, 0xba9a, 0xe2fe, 0x1, 0x1);
        gbc.writeMem(0xad98, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8a6d);
        EXPECT(gbc.pc(), 0xad9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad98), 0xcb);
        EXPECT(gbc.readMem(0xad99), 0x4f);
        // CB 4F 0299
        gbc.setState(0x71dc, 0xbf68, 0x260, 0x959f, 0xc12f, 0xf062, 0x1, 0x0);
        gbc.writeMem(0x71dc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbf68);
        EXPECT(gbc.pc(), 0x71de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 029A
        gbc.setState(0x3119, 0x615, 0x8e30, 0xf9ec, 0x6c57, 0x68bc, 0x1, 0x0);
        gbc.writeMem(0x3119, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x615);
        EXPECT(gbc.pc(), 0x311b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 029B
        gbc.setState(0xc880, 0xc26f, 0x4330, 0x5e63, 0x6230, 0xf9f, 0x1, 0x1);
        gbc.writeMem(0xc880, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc26f);
        EXPECT(gbc.pc(), 0xc882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc880), 0xcb);
        EXPECT(gbc.readMem(0xc881), 0x4f);
        // CB 4F 029C
        gbc.setState(0x6183, 0xc908, 0xcd90, 0x14b8, 0x7aa1, 0x1541, 0x0, 0x0);
        gbc.writeMem(0x6183, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc908);
        EXPECT(gbc.pc(), 0x6185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 029D
        gbc.setState(0x552, 0x8e99, 0x9320, 0xd5b0, 0x3edb, 0x1f0f, 0x1, 0x0);
        gbc.writeMem(0x552, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8e99);
        EXPECT(gbc.pc(), 0x554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 029E
        gbc.setState(0x8a08, 0x4b58, 0x6b30, 0x5715, 0x9062, 0xd4dc, 0x0, 0x0);
        gbc.writeMem(0x8a08, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4b58);
        EXPECT(gbc.pc(), 0x8a0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a08), 0xcb);
        EXPECT(gbc.readMem(0x8a09), 0x4f);
        // CB 4F 029F
        gbc.setState(0x7c9d, 0x6908, 0x5f30, 0x1770, 0xec3b, 0xa742, 0x0, 0x1);
        gbc.writeMem(0x7c9d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6908);
        EXPECT(gbc.pc(), 0x7c9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02A0
        gbc.setState(0xc699, 0x44e4, 0x1f80, 0xf3cc, 0xd46f, 0x5412, 0x1, 0x1);
        gbc.writeMem(0xc699, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x44e4);
        EXPECT(gbc.pc(), 0xc69b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc699), 0xcb);
        EXPECT(gbc.readMem(0xc69a), 0x4f);
        // CB 4F 02A1
        gbc.setState(0x6686, 0x722a, 0xb270, 0xa523, 0xb529, 0x77d3, 0x0, 0x1);
        gbc.writeMem(0x6686, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x722a);
        EXPECT(gbc.pc(), 0x6688);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02A2
        gbc.setState(0x8fb8, 0x2450, 0xf350, 0xac9d, 0x583d, 0x7788, 0x1, 0x0);
        gbc.writeMem(0x8fb8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2450);
        EXPECT(gbc.pc(), 0x8fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fb8), 0xcb);
        EXPECT(gbc.readMem(0x8fb9), 0x4f);
        // CB 4F 02A3
        gbc.setState(0x14b5, 0x18, 0xebb0, 0x27c1, 0x13be, 0x48ee, 0x1, 0x1);
        gbc.writeMem(0x14b5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x18);
        EXPECT(gbc.pc(), 0x14b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02A4
        gbc.setState(0x9f9b, 0xa3cd, 0x100, 0xc33e, 0x53fa, 0xde0e, 0x1, 0x1);
        gbc.writeMem(0x9f9b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa3cd);
        EXPECT(gbc.pc(), 0x9f9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f9b), 0xcb);
        EXPECT(gbc.readMem(0x9f9c), 0x4f);
        // CB 4F 02A5
        gbc.setState(0xd3f2, 0x897d, 0x93d0, 0x4cb0, 0x4a, 0xbdce, 0x1, 0x0);
        gbc.writeMem(0xd3f2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x897d);
        EXPECT(gbc.pc(), 0xd3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3f2), 0xcb);
        EXPECT(gbc.readMem(0xd3f3), 0x4f);
        // CB 4F 02A6
        gbc.setState(0xcc8c, 0x42fc, 0xd9e0, 0xa155, 0x7722, 0xc7f3, 0x0, 0x0);
        gbc.writeMem(0xcc8c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x42fc);
        EXPECT(gbc.pc(), 0xcc8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc8c), 0xcb);
        EXPECT(gbc.readMem(0xcc8d), 0x4f);
        // CB 4F 02A7
        gbc.setState(0x89d2, 0x8f9a, 0xef00, 0xa626, 0x711, 0xddd1, 0x1, 0x1);
        gbc.writeMem(0x89d2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8f9a);
        EXPECT(gbc.pc(), 0x89d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d2), 0xcb);
        EXPECT(gbc.readMem(0x89d3), 0x4f);
        // CB 4F 02A8
        gbc.setState(0xd727, 0x5d74, 0x40d0, 0x228e, 0x27f5, 0x7fda, 0x1, 0x0);
        gbc.writeMem(0xd727, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5d74);
        EXPECT(gbc.pc(), 0xd729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd727), 0xcb);
        EXPECT(gbc.readMem(0xd728), 0x4f);
        // CB 4F 02A9
        gbc.setState(0xddf0, 0x77b9, 0x92f0, 0x6a47, 0xc92d, 0x7247, 0x0, 0x0);
        gbc.writeMem(0xddf0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x77b9);
        EXPECT(gbc.pc(), 0xddf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddf0), 0xcb);
        EXPECT(gbc.readMem(0xddf1), 0x4f);
        // CB 4F 02AA
        gbc.setState(0xdeb, 0x3bb1, 0x88c0, 0xd14f, 0x449c, 0x38e5, 0x0, 0x0);
        gbc.writeMem(0xdeb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3bb1);
        EXPECT(gbc.pc(), 0xded);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02AB
        gbc.setState(0x4780, 0x19da, 0xea0, 0x4053, 0x6c2, 0x4b65, 0x0, 0x0);
        gbc.writeMem(0x4780, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x19da);
        EXPECT(gbc.pc(), 0x4782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02AC
        gbc.setState(0x32ef, 0xc650, 0x5df0, 0x68d4, 0xcc4f, 0xf4d4, 0x1, 0x1);
        gbc.writeMem(0x32ef, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc650);
        EXPECT(gbc.pc(), 0x32f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02AD
        gbc.setState(0x3a3d, 0x86c6, 0xa890, 0xfb24, 0x167c, 0x40ac, 0x1, 0x0);
        gbc.writeMem(0x3a3d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x86c6);
        EXPECT(gbc.pc(), 0x3a3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02AE
        gbc.setState(0xad35, 0x7261, 0xea60, 0x2fd5, 0x9e79, 0x259d, 0x1, 0x1);
        gbc.writeMem(0xad35, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7261);
        EXPECT(gbc.pc(), 0xad37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad35), 0xcb);
        EXPECT(gbc.readMem(0xad36), 0x4f);
        // CB 4F 02AF
        gbc.setState(0x9925, 0xc84c, 0xcee0, 0x2210, 0x451e, 0xf68a, 0x0, 0x0);
        gbc.writeMem(0x9925, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc84c);
        EXPECT(gbc.pc(), 0x9927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9925), 0xcb);
        EXPECT(gbc.readMem(0x9926), 0x4f);
        // CB 4F 02B0
        gbc.setState(0x6e05, 0x417a, 0xf4f0, 0xfca6, 0x6d0b, 0x8a3, 0x0, 0x1);
        gbc.writeMem(0x6e05, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x417a);
        EXPECT(gbc.pc(), 0x6e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02B1
        gbc.setState(0xa39d, 0x9281, 0xfb90, 0x34cb, 0xc121, 0x9182, 0x1, 0x1);
        gbc.writeMem(0xa39d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9281);
        EXPECT(gbc.pc(), 0xa39f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa39d), 0xcb);
        EXPECT(gbc.readMem(0xa39e), 0x4f);
        // CB 4F 02B2
        gbc.setState(0x313b, 0xd6de, 0x2110, 0x4321, 0xfd9f, 0xc44, 0x0, 0x1);
        gbc.writeMem(0x313b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd6de);
        EXPECT(gbc.pc(), 0x313d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02B3
        gbc.setState(0xd07b, 0x90c2, 0x4ec0, 0xbbf5, 0x1d8d, 0xf8e7, 0x0, 0x0);
        gbc.writeMem(0xd07b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x90c2);
        EXPECT(gbc.pc(), 0xd07d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd07b), 0xcb);
        EXPECT(gbc.readMem(0xd07c), 0x4f);
        // CB 4F 02B4
        gbc.setState(0x97dd, 0x5812, 0x3d90, 0xe26c, 0x7c0c, 0xf29c, 0x0, 0x1);
        gbc.writeMem(0x97dd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5812);
        EXPECT(gbc.pc(), 0x97df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97dd), 0xcb);
        EXPECT(gbc.readMem(0x97de), 0x4f);
        // CB 4F 02B5
        gbc.setState(0xbfba, 0x1df0, 0xae90, 0xdc07, 0x6ccf, 0xa275, 0x1, 0x1);
        gbc.writeMem(0xbfba, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1df0);
        EXPECT(gbc.pc(), 0xbfbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfba), 0xcb);
        EXPECT(gbc.readMem(0xbfbb), 0x4f);
        // CB 4F 02B6
        gbc.setState(0x62dc, 0xb6a8, 0xe0e0, 0xf149, 0x9e13, 0x816a, 0x0, 0x0);
        gbc.writeMem(0x62dc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb6a8);
        EXPECT(gbc.pc(), 0x62de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02B7
        gbc.setState(0x2763, 0x3ec5, 0xd720, 0x59c0, 0xa0d0, 0x2ad7, 0x0, 0x1);
        gbc.writeMem(0x2763, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3ec5);
        EXPECT(gbc.pc(), 0x2765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02B8
        gbc.setState(0x458b, 0xd8cf, 0x52e0, 0x2e64, 0x7d2f, 0xe0fb, 0x1, 0x0);
        gbc.writeMem(0x458b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xd8cf);
        EXPECT(gbc.pc(), 0x458d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02B9
        gbc.setState(0x7d5a, 0xb42e, 0xd300, 0x8a5d, 0x8eae, 0xddd5, 0x1, 0x1);
        gbc.writeMem(0x7d5a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb42e);
        EXPECT(gbc.pc(), 0x7d5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02BA
        gbc.setState(0x6f9a, 0x8405, 0xcb10, 0x2fa1, 0xf759, 0xb64e, 0x1, 0x1);
        gbc.writeMem(0x6f9a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8405);
        EXPECT(gbc.pc(), 0x6f9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02BB
        gbc.setState(0x5c0b, 0xd1a, 0x4a70, 0x5011, 0x7e58, 0xcfb2, 0x1, 0x0);
        gbc.writeMem(0x5c0b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd1a);
        EXPECT(gbc.pc(), 0x5c0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02BC
        gbc.setState(0x69c7, 0xcd5, 0xb400, 0xd5fe, 0xefdd, 0x272a, 0x1, 0x1);
        gbc.writeMem(0x69c7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xcd5);
        EXPECT(gbc.pc(), 0x69c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02BD
        gbc.setState(0x435, 0x6ea3, 0x9780, 0x3a7b, 0xdfc3, 0x329, 0x0, 0x0);
        gbc.writeMem(0x435, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6ea3);
        EXPECT(gbc.pc(), 0x437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02BE
        gbc.setState(0x812f, 0x938e, 0x8d00, 0x5eab, 0xf796, 0x6344, 0x0, 0x0);
        gbc.writeMem(0x812f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x938e);
        EXPECT(gbc.pc(), 0x8131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x812f), 0xcb);
        EXPECT(gbc.readMem(0x8130), 0x4f);
        // CB 4F 02BF
        gbc.setState(0xb6f6, 0x4924, 0x28f0, 0xa152, 0x571f, 0xe56c, 0x0, 0x1);
        gbc.writeMem(0xb6f6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4924);
        EXPECT(gbc.pc(), 0xb6f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f6), 0xcb);
        EXPECT(gbc.readMem(0xb6f7), 0x4f);
        // CB 4F 02C0
        gbc.setState(0x8714, 0x5a12, 0xc170, 0xdea8, 0x489, 0x55f8, 0x1, 0x0);
        gbc.writeMem(0x8714, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5a12);
        EXPECT(gbc.pc(), 0x8716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8714), 0xcb);
        EXPECT(gbc.readMem(0x8715), 0x4f);
        // CB 4F 02C1
        gbc.setState(0xac2e, 0xc07f, 0x4650, 0x484b, 0x7959, 0x7a73, 0x1, 0x0);
        gbc.writeMem(0xac2e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc07f);
        EXPECT(gbc.pc(), 0xac30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac2e), 0xcb);
        EXPECT(gbc.readMem(0xac2f), 0x4f);
        // CB 4F 02C2
        gbc.setState(0xc2d, 0xe152, 0xd4a0, 0xeb44, 0xc95f, 0x847e, 0x0, 0x0);
        gbc.writeMem(0xc2d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe152);
        EXPECT(gbc.pc(), 0xc2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02C3
        gbc.setState(0xcd55, 0x1049, 0xe7c0, 0xe783, 0xb0e8, 0x223c, 0x0, 0x1);
        gbc.writeMem(0xcd55, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1049);
        EXPECT(gbc.pc(), 0xcd57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd55), 0xcb);
        EXPECT(gbc.readMem(0xcd56), 0x4f);
        // CB 4F 02C4
        gbc.setState(0xd36a, 0x9f8c, 0xa4a0, 0xfca7, 0xa65b, 0x5759, 0x0, 0x0);
        gbc.writeMem(0xd36a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9f8c);
        EXPECT(gbc.pc(), 0xd36c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd36a), 0xcb);
        EXPECT(gbc.readMem(0xd36b), 0x4f);
        // CB 4F 02C5
        gbc.setState(0xdb09, 0x98, 0x62f0, 0x90d4, 0x2852, 0xdb6e, 0x1, 0x0);
        gbc.writeMem(0xdb09, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x98);
        EXPECT(gbc.pc(), 0xdb0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb09), 0xcb);
        EXPECT(gbc.readMem(0xdb0a), 0x4f);
        // CB 4F 02C6
        gbc.setState(0xc935, 0xe3fc, 0x1e10, 0x4cf4, 0x8d48, 0x39d3, 0x0, 0x0);
        gbc.writeMem(0xc935, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe3fc);
        EXPECT(gbc.pc(), 0xc937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc935), 0xcb);
        EXPECT(gbc.readMem(0xc936), 0x4f);
        // CB 4F 02C7
        gbc.setState(0x701a, 0xe42f, 0xa8d0, 0xde1a, 0x1172, 0x7a83, 0x1, 0x0);
        gbc.writeMem(0x701a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe42f);
        EXPECT(gbc.pc(), 0x701c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02C8
        gbc.setState(0xbfba, 0x38e2, 0x5c00, 0x3e8c, 0xb32, 0x545f, 0x1, 0x0);
        gbc.writeMem(0xbfba, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x38e2);
        EXPECT(gbc.pc(), 0xbfbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfba), 0xcb);
        EXPECT(gbc.readMem(0xbfbb), 0x4f);
        // CB 4F 02C9
        gbc.setState(0x68c3, 0xa5bc, 0xd960, 0x37eb, 0xa939, 0x825d, 0x0, 0x1);
        gbc.writeMem(0x68c3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa5bc);
        EXPECT(gbc.pc(), 0x68c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02CA
        gbc.setState(0xee8c, 0x5e4d, 0x3c80, 0x44eb, 0x4e74, 0x4a58, 0x1, 0x0);
        gbc.writeMem(0xee8c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5e4d);
        EXPECT(gbc.pc(), 0xee8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee8c), 0xcb);
        EXPECT(gbc.readMem(0xee8d), 0x4f);
        // CB 4F 02CB
        gbc.setState(0xb3a6, 0x7798, 0xfef0, 0x1679, 0x4ecb, 0x519a, 0x1, 0x1);
        gbc.writeMem(0xb3a6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7798);
        EXPECT(gbc.pc(), 0xb3a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a6), 0xcb);
        EXPECT(gbc.readMem(0xb3a7), 0x4f);
        // CB 4F 02CC
        gbc.setState(0x7366, 0xda93, 0xd930, 0x57a0, 0xec94, 0x45cb, 0x0, 0x0);
        gbc.writeMem(0x7366, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xda93);
        EXPECT(gbc.pc(), 0x7368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02CD
        gbc.setState(0xd46e, 0x5dd, 0xbfd0, 0x65a8, 0xbf, 0xd403, 0x1, 0x0);
        gbc.writeMem(0xd46e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5dd);
        EXPECT(gbc.pc(), 0xd470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd46e), 0xcb);
        EXPECT(gbc.readMem(0xd46f), 0x4f);
        // CB 4F 02CE
        gbc.setState(0xc4ce, 0xbda9, 0xb2b0, 0x308d, 0xfbd1, 0x6c0b, 0x0, 0x1);
        gbc.writeMem(0xc4ce, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xbda9);
        EXPECT(gbc.pc(), 0xc4d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ce), 0xcb);
        EXPECT(gbc.readMem(0xc4cf), 0x4f);
        // CB 4F 02CF
        gbc.setState(0x274b, 0x9f38, 0x4000, 0xb2a5, 0xd2a4, 0xf00d, 0x0, 0x1);
        gbc.writeMem(0x274b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9f38);
        EXPECT(gbc.pc(), 0x274d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02D0
        gbc.setState(0xe4e8, 0xd3d8, 0xf570, 0xf08c, 0xdaa3, 0xfe32, 0x1, 0x1);
        gbc.writeMem(0xe4e8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd3d8);
        EXPECT(gbc.pc(), 0xe4ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e8), 0xcb);
        EXPECT(gbc.readMem(0xe4e9), 0x4f);
        // CB 4F 02D1
        gbc.setState(0xed38, 0xa48c, 0x8a00, 0xc40d, 0x379d, 0x7ce1, 0x1, 0x0);
        gbc.writeMem(0xed38, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa48c);
        EXPECT(gbc.pc(), 0xed3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed38), 0xcb);
        EXPECT(gbc.readMem(0xed39), 0x4f);
        // CB 4F 02D2
        gbc.setState(0x5d58, 0x9bb, 0x8830, 0x7019, 0xfa5e, 0x945, 0x0, 0x0);
        gbc.writeMem(0x5d58, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9bb);
        EXPECT(gbc.pc(), 0x5d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02D3
        gbc.setState(0x9745, 0x7814, 0xecd0, 0x8c5b, 0xe21e, 0x91f0, 0x1, 0x1);
        gbc.writeMem(0x9745, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7814);
        EXPECT(gbc.pc(), 0x9747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9745), 0xcb);
        EXPECT(gbc.readMem(0x9746), 0x4f);
        // CB 4F 02D5
        gbc.setState(0xae06, 0x6987, 0x6db0, 0x9773, 0x8897, 0xdeba, 0x1, 0x0);
        gbc.writeMem(0xae06, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6987);
        EXPECT(gbc.pc(), 0xae08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae06), 0xcb);
        EXPECT(gbc.readMem(0xae07), 0x4f);
        // CB 4F 02D6
        gbc.setState(0x1ee0, 0x1dee, 0x1890, 0x5924, 0x8943, 0xdb58, 0x1, 0x1);
        gbc.writeMem(0x1ee0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1dee);
        EXPECT(gbc.pc(), 0x1ee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02D7
        gbc.setState(0x9224, 0xe933, 0x4b00, 0x4fb3, 0xa063, 0xd8d7, 0x1, 0x0);
        gbc.writeMem(0x9224, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe933);
        EXPECT(gbc.pc(), 0x9226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9224), 0xcb);
        EXPECT(gbc.readMem(0x9225), 0x4f);
        // CB 4F 02D8
        gbc.setState(0x3b1d, 0xa707, 0x3f0, 0xf60e, 0x2e90, 0x87b3, 0x1, 0x0);
        gbc.writeMem(0x3b1d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa707);
        EXPECT(gbc.pc(), 0x3b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02D9
        gbc.setState(0xa832, 0x37ac, 0xf200, 0x418, 0x2222, 0x4f05, 0x0, 0x1);
        gbc.writeMem(0xa832, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x37ac);
        EXPECT(gbc.pc(), 0xa834);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa832), 0xcb);
        EXPECT(gbc.readMem(0xa833), 0x4f);
        // CB 4F 02DA
        gbc.setState(0xe79c, 0xcc5c, 0x98c0, 0x7ab8, 0xb747, 0x31bd, 0x0, 0x0);
        gbc.writeMem(0xe79c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xcc5c);
        EXPECT(gbc.pc(), 0xe79e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe79c), 0xcb);
        EXPECT(gbc.readMem(0xe79d), 0x4f);
        // CB 4F 02DB
        gbc.setState(0x428d, 0x8958, 0xb1f0, 0x7534, 0xb89d, 0x169c, 0x1, 0x1);
        gbc.writeMem(0x428d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8958);
        EXPECT(gbc.pc(), 0x428f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02DC
        gbc.setState(0x36f5, 0x33a7, 0x11a0, 0xb6ee, 0x40d0, 0x838d, 0x1, 0x1);
        gbc.writeMem(0x36f5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x33a7);
        EXPECT(gbc.pc(), 0x36f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02DD
        gbc.setState(0x188b, 0xfca8, 0x80c0, 0xa3c0, 0x3f0f, 0xaefc, 0x1, 0x1);
        gbc.writeMem(0x188b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xfca8);
        EXPECT(gbc.pc(), 0x188d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02DE
        gbc.setState(0xc344, 0xb607, 0x8a20, 0xf7ee, 0x96bc, 0xa062, 0x1, 0x0);
        gbc.writeMem(0xc344, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb607);
        EXPECT(gbc.pc(), 0xc346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc344), 0xcb);
        EXPECT(gbc.readMem(0xc345), 0x4f);
        // CB 4F 02DF
        gbc.setState(0x8841, 0x2266, 0x55b0, 0x3523, 0xd412, 0xdff0, 0x0, 0x0);
        gbc.writeMem(0x8841, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2266);
        EXPECT(gbc.pc(), 0x8843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8841), 0xcb);
        EXPECT(gbc.readMem(0x8842), 0x4f);
        // CB 4F 02E0
        gbc.setState(0xb62, 0x4842, 0x110, 0xbb1a, 0x60a5, 0x1751, 0x0, 0x0);
        gbc.writeMem(0xb62, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4842);
        EXPECT(gbc.pc(), 0xb64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02E1
        gbc.setState(0x8ad6, 0x6b55, 0xa050, 0x75dc, 0x7ff7, 0xcbf7, 0x1, 0x1);
        gbc.writeMem(0x8ad6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6b55);
        EXPECT(gbc.pc(), 0x8ad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad6), 0xcb);
        EXPECT(gbc.readMem(0x8ad7), 0x4f);
        // CB 4F 02E2
        gbc.setState(0xe4c2, 0x6807, 0xf0b0, 0x7bb6, 0x9ba7, 0x78f7, 0x1, 0x0);
        gbc.writeMem(0xe4c2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6807);
        EXPECT(gbc.pc(), 0xe4c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4c2), 0xcb);
        EXPECT(gbc.readMem(0xe4c3), 0x4f);
        // CB 4F 02E3
        gbc.setState(0x1d85, 0x20a, 0xbc60, 0x2691, 0x4b62, 0xd104, 0x0, 0x1);
        gbc.writeMem(0x1d85, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x20a);
        EXPECT(gbc.pc(), 0x1d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02E4
        gbc.setState(0x6a1a, 0xf312, 0x3e00, 0x764e, 0x479b, 0x12f, 0x1, 0x1);
        gbc.writeMem(0x6a1a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf312);
        EXPECT(gbc.pc(), 0x6a1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02E5
        gbc.setState(0x285, 0x3a30, 0xb480, 0xc9dc, 0x534, 0x55a5, 0x1, 0x1);
        gbc.writeMem(0x285, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3a30);
        EXPECT(gbc.pc(), 0x287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02E6
        gbc.setState(0xcef4, 0xc55c, 0xd580, 0x5bf8, 0x1eae, 0x26f6, 0x0, 0x1);
        gbc.writeMem(0xcef4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc55c);
        EXPECT(gbc.pc(), 0xcef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef4), 0xcb);
        EXPECT(gbc.readMem(0xcef5), 0x4f);
        // CB 4F 02E7
        gbc.setState(0x116, 0x9d4a, 0x3fb0, 0xaaae, 0x68ef, 0x56bd, 0x0, 0x0);
        gbc.writeMem(0x116, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9d4a);
        EXPECT(gbc.pc(), 0x118);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02E8
        gbc.setState(0x7c6c, 0x8528, 0x4a00, 0x96d9, 0x71eb, 0x7de1, 0x0, 0x1);
        gbc.writeMem(0x7c6c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8528);
        EXPECT(gbc.pc(), 0x7c6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02E9
        gbc.setState(0xdfdc, 0x9deb, 0x5c20, 0x904b, 0x2e39, 0x2e66, 0x1, 0x0);
        gbc.writeMem(0xdfdc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9deb);
        EXPECT(gbc.pc(), 0xdfde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfdc), 0xcb);
        EXPECT(gbc.readMem(0xdfdd), 0x4f);
        // CB 4F 02EA
        gbc.setState(0xa9d6, 0x896e, 0x38b0, 0xb4a2, 0x699d, 0x2ea9, 0x0, 0x1);
        gbc.writeMem(0xa9d6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x896e);
        EXPECT(gbc.pc(), 0xa9d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9d6), 0xcb);
        EXPECT(gbc.readMem(0xa9d7), 0x4f);
        // CB 4F 02EB
        gbc.setState(0x6aed, 0x773e, 0xd280, 0x556c, 0x1849, 0x434a, 0x0, 0x1);
        gbc.writeMem(0x6aed, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x773e);
        EXPECT(gbc.pc(), 0x6aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02EC
        gbc.setState(0x7432, 0x3627, 0x7e20, 0x8cb1, 0x385c, 0xde28, 0x0, 0x0);
        gbc.writeMem(0x7432, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3627);
        EXPECT(gbc.pc(), 0x7434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02ED
        gbc.setState(0xaa10, 0x3661, 0x4470, 0x9ff1, 0xd721, 0x801f, 0x1, 0x0);
        gbc.writeMem(0xaa10, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3661);
        EXPECT(gbc.pc(), 0xaa12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa10), 0xcb);
        EXPECT(gbc.readMem(0xaa11), 0x4f);
        // CB 4F 02EE
        gbc.setState(0x7bf9, 0x1d23, 0x9510, 0x359d, 0x87f, 0x277f, 0x1, 0x1);
        gbc.writeMem(0x7bf9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1d23);
        EXPECT(gbc.pc(), 0x7bfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02EF
        gbc.setState(0x20ad, 0x6dd4, 0x5af0, 0x8577, 0x768f, 0x52a3, 0x0, 0x0);
        gbc.writeMem(0x20ad, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6dd4);
        EXPECT(gbc.pc(), 0x20af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02F0
        gbc.setState(0x42fd, 0x6ff8, 0x3220, 0xdf63, 0xad22, 0xec0c, 0x1, 0x0);
        gbc.writeMem(0x42fd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6ff8);
        EXPECT(gbc.pc(), 0x42ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02F1
        gbc.setState(0x8d8f, 0xfb06, 0x30d0, 0x112c, 0xa0e5, 0xdabf, 0x0, 0x1);
        gbc.writeMem(0x8d8f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xfb06);
        EXPECT(gbc.pc(), 0x8d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d8f), 0xcb);
        EXPECT(gbc.readMem(0x8d90), 0x4f);
        // CB 4F 02F2
        gbc.setState(0xcd0a, 0xbdc8, 0xc5c0, 0xbb3e, 0xa935, 0xbcab, 0x1, 0x0);
        gbc.writeMem(0xcd0a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xbdc8);
        EXPECT(gbc.pc(), 0xcd0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd0a), 0xcb);
        EXPECT(gbc.readMem(0xcd0b), 0x4f);
        // CB 4F 02F3
        gbc.setState(0xeebc, 0x8a08, 0xee70, 0x40f0, 0xafd1, 0xff36, 0x0, 0x1);
        gbc.writeMem(0xeebc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8a08);
        EXPECT(gbc.pc(), 0xeebe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeebc), 0xcb);
        EXPECT(gbc.readMem(0xeebd), 0x4f);
        // CB 4F 02F4
        gbc.setState(0x1286, 0xdfbb, 0x4830, 0x466, 0x3a0c, 0xf527, 0x1, 0x1);
        gbc.writeMem(0x1286, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xdfbb);
        EXPECT(gbc.pc(), 0x1288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 02F5
        gbc.setState(0x81a4, 0x9230, 0x7e80, 0x1c0d, 0x8232, 0x28f, 0x0, 0x1);
        gbc.writeMem(0x81a4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9230);
        EXPECT(gbc.pc(), 0x81a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a4), 0xcb);
        EXPECT(gbc.readMem(0x81a5), 0x4f);
        // CB 4F 02F6
        gbc.setState(0x9836, 0xb0fa, 0xdb30, 0xe769, 0xd2c9, 0x5946, 0x0, 0x0);
        gbc.writeMem(0x9836, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb0fa);
        EXPECT(gbc.pc(), 0x9838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9836), 0xcb);
        EXPECT(gbc.readMem(0x9837), 0x4f);
        // CB 4F 02F7
        gbc.setState(0xc8df, 0x72ad, 0x13b0, 0xe7fb, 0xb9ee, 0xb87e, 0x1, 0x0);
        gbc.writeMem(0xc8df, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x72ad);
        EXPECT(gbc.pc(), 0xc8e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8df), 0xcb);
        EXPECT(gbc.readMem(0xc8e0), 0x4f);
        // CB 4F 02F9
        gbc.setState(0x138b, 0x1569, 0x1bc0, 0x2ac8, 0x502, 0xafce, 0x0, 0x0);
        gbc.writeMem(0x138b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1569);
        EXPECT(gbc.pc(), 0x138d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02FA
        gbc.setState(0x800c, 0x853d, 0xcc00, 0x45b4, 0xbd41, 0x4e03, 0x1, 0x0);
        gbc.writeMem(0x800c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x853d);
        EXPECT(gbc.pc(), 0x800e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x800c), 0xcb);
        EXPECT(gbc.readMem(0x800d), 0x4f);
        // CB 4F 02FB
        gbc.setState(0x854d, 0xa47b, 0xb480, 0xcf91, 0xf760, 0x27cc, 0x0, 0x1);
        gbc.writeMem(0x854d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa47b);
        EXPECT(gbc.pc(), 0x854f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854d), 0xcb);
        EXPECT(gbc.readMem(0x854e), 0x4f);
        // CB 4F 02FC
        gbc.setState(0x56d6, 0x9a1e, 0x33c0, 0xfcfe, 0xaa05, 0xac5f, 0x0, 0x1);
        gbc.writeMem(0x56d6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9a1e);
        EXPECT(gbc.pc(), 0x56d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02FD
        gbc.setState(0x5e23, 0xe02a, 0xf9e0, 0x9d90, 0x2de, 0x132f, 0x1, 0x0);
        gbc.writeMem(0x5e23, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe02a);
        EXPECT(gbc.pc(), 0x5e25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 02FE
        gbc.setState(0x83e8, 0xff10, 0x8d90, 0x8fbd, 0x441f, 0x2bea, 0x0, 0x1);
        gbc.writeMem(0x83e8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xff10);
        EXPECT(gbc.pc(), 0x83ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83e8), 0xcb);
        EXPECT(gbc.readMem(0x83e9), 0x4f);
        // CB 4F 02FF
        gbc.setState(0xbfbc, 0xf0e8, 0x9120, 0xa9b5, 0xa54f, 0x6141, 0x1, 0x0);
        gbc.writeMem(0xbfbc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf0e8);
        EXPECT(gbc.pc(), 0xbfbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfbc), 0xcb);
        EXPECT(gbc.readMem(0xbfbd), 0x4f);
        // CB 4F 0300
        gbc.setState(0x6653, 0x4669, 0x81e0, 0x2b2, 0xb85d, 0xd4fb, 0x1, 0x1);
        gbc.writeMem(0x6653, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4669);
        EXPECT(gbc.pc(), 0x6655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0302
        gbc.setState(0xb48c, 0x2572, 0x5ae0, 0x7c66, 0xbea2, 0x3f9a, 0x0, 0x1);
        gbc.writeMem(0xb48c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2572);
        EXPECT(gbc.pc(), 0xb48e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb48c), 0xcb);
        EXPECT(gbc.readMem(0xb48d), 0x4f);
        // CB 4F 0303
        gbc.setState(0xe3f2, 0x3891, 0xaf90, 0x12ef, 0x3636, 0x35c6, 0x0, 0x1);
        gbc.writeMem(0xe3f2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3891);
        EXPECT(gbc.pc(), 0xe3f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3f2), 0xcb);
        EXPECT(gbc.readMem(0xe3f3), 0x4f);
        // CB 4F 0304
        gbc.setState(0x5758, 0x5d6c, 0xb1d0, 0xc804, 0x1f26, 0xb090, 0x1, 0x0);
        gbc.writeMem(0x5758, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5d6c);
        EXPECT(gbc.pc(), 0x575a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0305
        gbc.setState(0x6bdb, 0x1a97, 0x23f0, 0x1e1d, 0x33e3, 0xd898, 0x0, 0x0);
        gbc.writeMem(0x6bdb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1a97);
        EXPECT(gbc.pc(), 0x6bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0306
        gbc.setState(0xcc71, 0x7c6c, 0xa3c0, 0x11e8, 0xff0d, 0xe433, 0x0, 0x0);
        gbc.writeMem(0xcc71, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7c6c);
        EXPECT(gbc.pc(), 0xcc73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc71), 0xcb);
        EXPECT(gbc.readMem(0xcc72), 0x4f);
        // CB 4F 0307
        gbc.setState(0x21a8, 0x448, 0x1770, 0xd131, 0x6795, 0x7a3e, 0x1, 0x0);
        gbc.writeMem(0x21a8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x448);
        EXPECT(gbc.pc(), 0x21aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0308
        gbc.setState(0x357d, 0x7a10, 0xb310, 0x9bd, 0x2510, 0xf3f2, 0x0, 0x1);
        gbc.writeMem(0x357d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7a10);
        EXPECT(gbc.pc(), 0x357f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0309
        gbc.setState(0x17b7, 0x839b, 0x87f0, 0xb8b9, 0x120a, 0xfc9e, 0x0, 0x0);
        gbc.writeMem(0x17b7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x839b);
        EXPECT(gbc.pc(), 0x17b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 030A
        gbc.setState(0x2712, 0x5878, 0xc660, 0x1532, 0x6bc5, 0xe1cb, 0x0, 0x1);
        gbc.writeMem(0x2712, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5878);
        EXPECT(gbc.pc(), 0x2714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 030B
        gbc.setState(0x6c73, 0x9a5e, 0xafd0, 0x8c0a, 0xeeb6, 0x90d6, 0x1, 0x1);
        gbc.writeMem(0x6c73, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9a5e);
        EXPECT(gbc.pc(), 0x6c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 030C
        gbc.setState(0x4a63, 0x7559, 0x2630, 0xbc56, 0xde15, 0xe929, 0x0, 0x1);
        gbc.writeMem(0x4a63, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x7559);
        EXPECT(gbc.pc(), 0x4a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 030D
        gbc.setState(0x8ce8, 0x2d2c, 0xba70, 0xeceb, 0x304d, 0xe84f, 0x0, 0x1);
        gbc.writeMem(0x8ce8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2d2c);
        EXPECT(gbc.pc(), 0x8cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ce8), 0xcb);
        EXPECT(gbc.readMem(0x8ce9), 0x4f);
        // CB 4F 030E
        gbc.setState(0xdf04, 0x26f2, 0x1b60, 0xcb8d, 0xe3ff, 0xff9d, 0x0, 0x1);
        gbc.writeMem(0xdf04, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x26f2);
        EXPECT(gbc.pc(), 0xdf06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf04), 0xcb);
        EXPECT(gbc.readMem(0xdf05), 0x4f);
        // CB 4F 030F
        gbc.setState(0x7097, 0x9a34, 0x62e0, 0xcd83, 0x161b, 0xbcde, 0x0, 0x1);
        gbc.writeMem(0x7097, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9a34);
        EXPECT(gbc.pc(), 0x7099);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0312
        gbc.setState(0x656c, 0xbf65, 0x2180, 0x5787, 0xb4b4, 0x1f89, 0x0, 0x0);
        gbc.writeMem(0x656c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbf65);
        EXPECT(gbc.pc(), 0x656e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0313
        gbc.setState(0xeb29, 0xda1a, 0x7540, 0xc1b5, 0x31d1, 0x2eee, 0x0, 0x1);
        gbc.writeMem(0xeb29, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xda1a);
        EXPECT(gbc.pc(), 0xeb2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb29), 0xcb);
        EXPECT(gbc.readMem(0xeb2a), 0x4f);
        // CB 4F 0314
        gbc.setState(0xb11b, 0x2b90, 0x9240, 0x50e7, 0x8303, 0x2edb, 0x1, 0x1);
        gbc.writeMem(0xb11b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2b90);
        EXPECT(gbc.pc(), 0xb11d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11b), 0xcb);
        EXPECT(gbc.readMem(0xb11c), 0x4f);
        // CB 4F 0315
        gbc.setState(0x8cd3, 0x38b6, 0xe9c0, 0x4293, 0xcc67, 0x432, 0x1, 0x0);
        gbc.writeMem(0x8cd3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x38b6);
        EXPECT(gbc.pc(), 0x8cd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd3), 0xcb);
        EXPECT(gbc.readMem(0x8cd4), 0x4f);
        // CB 4F 0316
        gbc.setState(0xbe7b, 0x6f72, 0xedd0, 0x9cea, 0x8c51, 0x1877, 0x1, 0x0);
        gbc.writeMem(0xbe7b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6f72);
        EXPECT(gbc.pc(), 0xbe7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe7b), 0xcb);
        EXPECT(gbc.readMem(0xbe7c), 0x4f);
        // CB 4F 0317
        gbc.setState(0xbf72, 0x16d4, 0xf190, 0x5832, 0x2a3e, 0xf840, 0x1, 0x1);
        gbc.writeMem(0xbf72, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x16d4);
        EXPECT(gbc.pc(), 0xbf74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf72), 0xcb);
        EXPECT(gbc.readMem(0xbf73), 0x4f);
        // CB 4F 0318
        gbc.setState(0xd3fe, 0x72a6, 0x2740, 0xa310, 0xc835, 0x24ce, 0x1, 0x1);
        gbc.writeMem(0xd3fe, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x72a6);
        EXPECT(gbc.pc(), 0xd400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3fe), 0xcb);
        EXPECT(gbc.readMem(0xd3ff), 0x4f);
        // CB 4F 0319
        gbc.setState(0x24de, 0xb8eb, 0xf810, 0xf201, 0x90a8, 0xf3d, 0x1, 0x0);
        gbc.writeMem(0x24de, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb8eb);
        EXPECT(gbc.pc(), 0x24e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 031A
        gbc.setState(0xa55d, 0xf7e8, 0x1de0, 0x3300, 0x3188, 0x63dc, 0x1, 0x0);
        gbc.writeMem(0xa55d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf7e8);
        EXPECT(gbc.pc(), 0xa55f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa55d), 0xcb);
        EXPECT(gbc.readMem(0xa55e), 0x4f);
        // CB 4F 031B
        gbc.setState(0x4d05, 0x80f9, 0xabf0, 0x4cbc, 0xf1e8, 0xe5b2, 0x0, 0x1);
        gbc.writeMem(0x4d05, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x80f9);
        EXPECT(gbc.pc(), 0x4d07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 031C
        gbc.setState(0x6e8, 0x5746, 0x1c60, 0x2a43, 0xebe1, 0xb362, 0x0, 0x1);
        gbc.writeMem(0x6e8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5746);
        EXPECT(gbc.pc(), 0x6ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 031D
        gbc.setState(0x57cf, 0xc05b, 0xc930, 0xaea1, 0x75af, 0xfba6, 0x0, 0x1);
        gbc.writeMem(0x57cf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc05b);
        EXPECT(gbc.pc(), 0x57d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 031E
        gbc.setState(0x827a, 0xef7b, 0x5e50, 0xb3fc, 0x163e, 0xf38c, 0x0, 0x0);
        gbc.writeMem(0x827a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xef7b);
        EXPECT(gbc.pc(), 0x827c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x827a), 0xcb);
        EXPECT(gbc.readMem(0x827b), 0x4f);
        // CB 4F 031F
        gbc.setState(0xc164, 0x43ea, 0x2b00, 0xf720, 0x55dc, 0x210, 0x0, 0x1);
        gbc.writeMem(0xc164, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x43ea);
        EXPECT(gbc.pc(), 0xc166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc164), 0xcb);
        EXPECT(gbc.readMem(0xc165), 0x4f);
        // CB 4F 0320
        gbc.setState(0xa38a, 0x7228, 0xa0c0, 0x9619, 0xf399, 0xf667, 0x1, 0x1);
        gbc.writeMem(0xa38a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7228);
        EXPECT(gbc.pc(), 0xa38c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa38a), 0xcb);
        EXPECT(gbc.readMem(0xa38b), 0x4f);
        // CB 4F 0321
        gbc.setState(0xbe4c, 0x6682, 0xcf70, 0xf87e, 0x199b, 0xd08, 0x0, 0x0);
        gbc.writeMem(0xbe4c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6682);
        EXPECT(gbc.pc(), 0xbe4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe4c), 0xcb);
        EXPECT(gbc.readMem(0xbe4d), 0x4f);
        // CB 4F 0322
        gbc.setState(0x194, 0xa605, 0x5930, 0x5467, 0x7b11, 0x126f, 0x1, 0x1);
        gbc.writeMem(0x194, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa605);
        EXPECT(gbc.pc(), 0x196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0323
        gbc.setState(0xa668, 0x689f, 0xe730, 0xaecd, 0x6a6, 0xad49, 0x0, 0x1);
        gbc.writeMem(0xa668, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x689f);
        EXPECT(gbc.pc(), 0xa66a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa668), 0xcb);
        EXPECT(gbc.readMem(0xa669), 0x4f);
        // CB 4F 0324
        gbc.setState(0x55bc, 0x50e8, 0x5f30, 0x7d45, 0x6403, 0xff4b, 0x1, 0x0);
        gbc.writeMem(0x55bc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x50e8);
        EXPECT(gbc.pc(), 0x55be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0325
        gbc.setState(0x11c3, 0xee55, 0xadf0, 0x93bf, 0x404e, 0x5ea, 0x0, 0x0);
        gbc.writeMem(0x11c3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xee55);
        EXPECT(gbc.pc(), 0x11c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0326
        gbc.setState(0x2a5e, 0xb761, 0x9440, 0x94a4, 0x671f, 0x8bfb, 0x0, 0x1);
        gbc.writeMem(0x2a5e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb761);
        EXPECT(gbc.pc(), 0x2a60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0327
        gbc.setState(0xead7, 0x93d4, 0x7970, 0x9a90, 0x5ef8, 0xa1e2, 0x1, 0x0);
        gbc.writeMem(0xead7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x93d4);
        EXPECT(gbc.pc(), 0xead9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead7), 0xcb);
        EXPECT(gbc.readMem(0xead8), 0x4f);
        // CB 4F 0328
        gbc.setState(0x789f, 0x773e, 0x8190, 0x1d83, 0xfe5e, 0x312e, 0x1, 0x0);
        gbc.writeMem(0x789f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x773e);
        EXPECT(gbc.pc(), 0x78a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0329
        gbc.setState(0x3fdc, 0xb1bc, 0xa9e0, 0x9882, 0x593b, 0x551b, 0x0, 0x0);
        gbc.writeMem(0x3fdc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb1bc);
        EXPECT(gbc.pc(), 0x3fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 032A
        gbc.setState(0xc68c, 0x6540, 0x61f0, 0xb16e, 0x65b9, 0x5ab9, 0x0, 0x0);
        gbc.writeMem(0xc68c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x6540);
        EXPECT(gbc.pc(), 0xc68e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc68c), 0xcb);
        EXPECT(gbc.readMem(0xc68d), 0x4f);
        // CB 4F 032B
        gbc.setState(0x1045, 0xa642, 0x88a0, 0xda05, 0x49e, 0x7611, 0x0, 0x1);
        gbc.writeMem(0x1045, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa642);
        EXPECT(gbc.pc(), 0x1047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 032C
        gbc.setState(0xb0d2, 0x69e3, 0x6290, 0x6691, 0x4360, 0xac10, 0x0, 0x0);
        gbc.writeMem(0xb0d2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x69e3);
        EXPECT(gbc.pc(), 0xb0d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0d2), 0xcb);
        EXPECT(gbc.readMem(0xb0d3), 0x4f);
        // CB 4F 032D
        gbc.setState(0xdd93, 0x379d, 0x4310, 0x5da4, 0x1af6, 0x90f4, 0x0, 0x1);
        gbc.writeMem(0xdd93, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x379d);
        EXPECT(gbc.pc(), 0xdd95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd93), 0xcb);
        EXPECT(gbc.readMem(0xdd94), 0x4f);
        // CB 4F 032E
        gbc.setState(0x66c0, 0x9513, 0x3830, 0x962c, 0xbef7, 0x9aac, 0x0, 0x0);
        gbc.writeMem(0x66c0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x9513);
        EXPECT(gbc.pc(), 0x66c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 032F
        gbc.setState(0xd6ac, 0x7fe8, 0xde20, 0xe4dd, 0x317e, 0x657, 0x1, 0x0);
        gbc.writeMem(0xd6ac, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7fe8);
        EXPECT(gbc.pc(), 0xd6ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ac), 0xcb);
        EXPECT(gbc.readMem(0xd6ad), 0x4f);
        // CB 4F 0330
        gbc.setState(0xc6ac, 0x1c73, 0x4e70, 0x8f97, 0xb61d, 0xee6d, 0x1, 0x0);
        gbc.writeMem(0xc6ac, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1c73);
        EXPECT(gbc.pc(), 0xc6ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ac), 0xcb);
        EXPECT(gbc.readMem(0xc6ad), 0x4f);
        // CB 4F 0331
        gbc.setState(0x6600, 0xab81, 0xbfd0, 0x8a79, 0x437d, 0xf916, 0x1, 0x1);
        gbc.writeMem(0x6600, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xab81);
        EXPECT(gbc.pc(), 0x6602);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0332
        gbc.setState(0x1814, 0x33b5, 0xfdb0, 0x6a99, 0xb638, 0xbe7d, 0x0, 0x0);
        gbc.writeMem(0x1814, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x33b5);
        EXPECT(gbc.pc(), 0x1816);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0333
        gbc.setState(0x4f3a, 0x1ba2, 0xec70, 0xcbbe, 0xac4b, 0x1c41, 0x0, 0x1);
        gbc.writeMem(0x4f3a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1ba2);
        EXPECT(gbc.pc(), 0x4f3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0334
        gbc.setState(0xa030, 0xa865, 0x95d0, 0x4915, 0xff13, 0xcec6, 0x0, 0x1);
        gbc.writeMem(0xa030, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa865);
        EXPECT(gbc.pc(), 0xa032);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa030), 0xcb);
        EXPECT(gbc.readMem(0xa031), 0x4f);
        // CB 4F 0335
        gbc.setState(0x1dd6, 0xbd85, 0x9cd0, 0x9073, 0xdf65, 0x1d2b, 0x1, 0x1);
        gbc.writeMem(0x1dd6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xbd85);
        EXPECT(gbc.pc(), 0x1dd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0336
        gbc.setState(0xb860, 0x4509, 0x72e0, 0xb675, 0x79e3, 0x3fa4, 0x1, 0x1);
        gbc.writeMem(0xb860, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4509);
        EXPECT(gbc.pc(), 0xb862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb860), 0xcb);
        EXPECT(gbc.readMem(0xb861), 0x4f);
        // CB 4F 0337
        gbc.setState(0x78fb, 0xdc1c, 0xa1a0, 0xdbcb, 0xa793, 0xf4f2, 0x1, 0x1);
        gbc.writeMem(0x78fb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdc1c);
        EXPECT(gbc.pc(), 0x78fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0338
        gbc.setState(0x469e, 0x9f47, 0x2a20, 0x7ec9, 0x2ee5, 0x5561, 0x1, 0x1);
        gbc.writeMem(0x469e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9f47);
        EXPECT(gbc.pc(), 0x46a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0339
        gbc.setState(0x2be1, 0x4436, 0xe1a0, 0xc12d, 0x8516, 0xf594, 0x1, 0x1);
        gbc.writeMem(0x2be1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4436);
        EXPECT(gbc.pc(), 0x2be3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 033A
        gbc.setState(0x8869, 0x2aba, 0x6560, 0xaf5e, 0x34a2, 0x2908, 0x1, 0x0);
        gbc.writeMem(0x8869, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x2aba);
        EXPECT(gbc.pc(), 0x886b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8869), 0xcb);
        EXPECT(gbc.readMem(0x886a), 0x4f);
        // CB 4F 033B
        gbc.setState(0x91ac, 0x892f, 0x3e30, 0x2b5f, 0x97ca, 0xd285, 0x1, 0x1);
        gbc.writeMem(0x91ac, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x892f);
        EXPECT(gbc.pc(), 0x91ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ac), 0xcb);
        EXPECT(gbc.readMem(0x91ad), 0x4f);
        // CB 4F 033C
        gbc.setState(0xca53, 0x6734, 0x1280, 0x976b, 0x61df, 0xbe80, 0x1, 0x1);
        gbc.writeMem(0xca53, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6734);
        EXPECT(gbc.pc(), 0xca55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca53), 0xcb);
        EXPECT(gbc.readMem(0xca54), 0x4f);
        // CB 4F 033D
        gbc.setState(0x4ead, 0xb3eb, 0x7a10, 0x7583, 0xd59a, 0x7ce1, 0x1, 0x0);
        gbc.writeMem(0x4ead, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb3eb);
        EXPECT(gbc.pc(), 0x4eaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 033E
        gbc.setState(0x36b6, 0xfd4e, 0x3780, 0x46db, 0x9509, 0xf82c, 0x1, 0x1);
        gbc.writeMem(0x36b6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfd4e);
        EXPECT(gbc.pc(), 0x36b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 033F
        gbc.setState(0x4211, 0x2171, 0xb390, 0xb152, 0xf2da, 0xb54e, 0x0, 0x1);
        gbc.writeMem(0x4211, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2171);
        EXPECT(gbc.pc(), 0x4213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0341
        gbc.setState(0x544c, 0x91dc, 0x20a0, 0x92cf, 0x67b7, 0x370, 0x0, 0x0);
        gbc.writeMem(0x544c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x91dc);
        EXPECT(gbc.pc(), 0x544e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0342
        gbc.setState(0x7d30, 0xc4d0, 0xda90, 0x6f7, 0x3bde, 0xf2c6, 0x1, 0x1);
        gbc.writeMem(0x7d30, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc4d0);
        EXPECT(gbc.pc(), 0x7d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0343
        gbc.setState(0x5e6, 0xcdc1, 0x450, 0x51f0, 0x68c3, 0x6ad5, 0x0, 0x0);
        gbc.writeMem(0x5e6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcdc1);
        EXPECT(gbc.pc(), 0x5e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0344
        gbc.setState(0xb4d, 0xe055, 0xed80, 0xc684, 0x8959, 0xdd8d, 0x0, 0x1);
        gbc.writeMem(0xb4d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe055);
        EXPECT(gbc.pc(), 0xb4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0345
        gbc.setState(0xe708, 0xe65a, 0x2480, 0xe5e3, 0xb1ed, 0x8d49, 0x0, 0x0);
        gbc.writeMem(0xe708, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe65a);
        EXPECT(gbc.pc(), 0xe70a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe708), 0xcb);
        EXPECT(gbc.readMem(0xe709), 0x4f);
        // CB 4F 0346
        gbc.setState(0x1350, 0x8fba, 0xdc10, 0xbd02, 0x96d9, 0x9a6b, 0x1, 0x1);
        gbc.writeMem(0x1350, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8fba);
        EXPECT(gbc.pc(), 0x1352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0347
        gbc.setState(0x6f19, 0xa17f, 0xa4b0, 0xfbd8, 0x6154, 0x6682, 0x0, 0x0);
        gbc.writeMem(0x6f19, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa17f);
        EXPECT(gbc.pc(), 0x6f1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0348
        gbc.setState(0x811d, 0xb50b, 0xf340, 0xb566, 0x53f3, 0x3652, 0x1, 0x0);
        gbc.writeMem(0x811d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb50b);
        EXPECT(gbc.pc(), 0x811f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x811d), 0xcb);
        EXPECT(gbc.readMem(0x811e), 0x4f);
        // CB 4F 0349
        gbc.setState(0x7f68, 0xc853, 0xadd0, 0xfb5b, 0xec7e, 0xc486, 0x1, 0x0);
        gbc.writeMem(0x7f68, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc853);
        EXPECT(gbc.pc(), 0x7f6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 034B
        gbc.setState(0x815e, 0xc181, 0x8940, 0x586b, 0xaecd, 0xfc17, 0x1, 0x1);
        gbc.writeMem(0x815e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc181);
        EXPECT(gbc.pc(), 0x8160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x815e), 0xcb);
        EXPECT(gbc.readMem(0x815f), 0x4f);
        // CB 4F 034C
        gbc.setState(0x6017, 0xac7f, 0x2ec0, 0xc695, 0x1cca, 0xd5d9, 0x1, 0x1);
        gbc.writeMem(0x6017, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xac7f);
        EXPECT(gbc.pc(), 0x6019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 034D
        gbc.setState(0xd193, 0xdb8a, 0x7ab0, 0x9b67, 0xfbe5, 0xd6f3, 0x0, 0x1);
        gbc.writeMem(0xd193, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xdb8a);
        EXPECT(gbc.pc(), 0xd195);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd193), 0xcb);
        EXPECT(gbc.readMem(0xd194), 0x4f);
        // CB 4F 034E
        gbc.setState(0xece2, 0x9059, 0xb270, 0x6912, 0x6864, 0xd149, 0x1, 0x0);
        gbc.writeMem(0xece2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9059);
        EXPECT(gbc.pc(), 0xece4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xece2), 0xcb);
        EXPECT(gbc.readMem(0xece3), 0x4f);
        // CB 4F 034F
        gbc.setState(0x920d, 0x28db, 0x4f20, 0x93e4, 0xe44c, 0x460d, 0x1, 0x1);
        gbc.writeMem(0x920d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x28db);
        EXPECT(gbc.pc(), 0x920f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x920d), 0xcb);
        EXPECT(gbc.readMem(0x920e), 0x4f);
        // CB 4F 0350
        gbc.setState(0x486b, 0x301c, 0x1470, 0x4145, 0x2904, 0x58b8, 0x1, 0x0);
        gbc.writeMem(0x486b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x301c);
        EXPECT(gbc.pc(), 0x486d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0351
        gbc.setState(0xcf40, 0x7b72, 0x96b0, 0x3612, 0x3dcd, 0x52b8, 0x0, 0x1);
        gbc.writeMem(0xcf40, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7b72);
        EXPECT(gbc.pc(), 0xcf42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf40), 0xcb);
        EXPECT(gbc.readMem(0xcf41), 0x4f);
        // CB 4F 0352
        gbc.setState(0x93bc, 0x6a5c, 0x1f00, 0xc6c0, 0xba58, 0x8390, 0x1, 0x0);
        gbc.writeMem(0x93bc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6a5c);
        EXPECT(gbc.pc(), 0x93be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93bc), 0xcb);
        EXPECT(gbc.readMem(0x93bd), 0x4f);
        // CB 4F 0353
        gbc.setState(0xb56a, 0x419c, 0x4f20, 0xf6f3, 0xeb9a, 0x2df0, 0x1, 0x1);
        gbc.writeMem(0xb56a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x419c);
        EXPECT(gbc.pc(), 0xb56c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb56a), 0xcb);
        EXPECT(gbc.readMem(0xb56b), 0x4f);
        // CB 4F 0354
        gbc.setState(0xbe6e, 0x76c3, 0xce0, 0x6fc5, 0xc796, 0x2083, 0x0, 0x0);
        gbc.writeMem(0xbe6e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x76c3);
        EXPECT(gbc.pc(), 0xbe70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe6e), 0xcb);
        EXPECT(gbc.readMem(0xbe6f), 0x4f);
        // CB 4F 0355
        gbc.setState(0xd576, 0xbfa, 0x1740, 0x1cbf, 0x6a4d, 0x75c0, 0x0, 0x0);
        gbc.writeMem(0xd576, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xbfa);
        EXPECT(gbc.pc(), 0xd578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd576), 0xcb);
        EXPECT(gbc.readMem(0xd577), 0x4f);
        // CB 4F 0356
        gbc.setState(0x44bb, 0xf4d4, 0x59e0, 0xef2b, 0x7455, 0xa893, 0x1, 0x1);
        gbc.writeMem(0x44bb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf4d4);
        EXPECT(gbc.pc(), 0x44bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0357
        gbc.setState(0xf2a, 0xfdc6, 0xf8b0, 0x9c3a, 0xe0c6, 0x955e, 0x1, 0x0);
        gbc.writeMem(0xf2a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfdc6);
        EXPECT(gbc.pc(), 0xf2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0359
        gbc.setState(0xde93, 0x640, 0x4190, 0x97ed, 0x2d88, 0xc700, 0x0, 0x0);
        gbc.writeMem(0xde93, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x640);
        EXPECT(gbc.pc(), 0xde95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde93), 0xcb);
        EXPECT(gbc.readMem(0xde94), 0x4f);
        // CB 4F 035A
        gbc.setState(0xbdb4, 0xb431, 0x5eb0, 0x1d32, 0x800c, 0xbd1c, 0x1, 0x0);
        gbc.writeMem(0xbdb4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb431);
        EXPECT(gbc.pc(), 0xbdb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdb4), 0xcb);
        EXPECT(gbc.readMem(0xbdb5), 0x4f);
        // CB 4F 035B
        gbc.setState(0x50a8, 0xa051, 0x9d60, 0x6cba, 0xf9aa, 0xccca, 0x1, 0x1);
        gbc.writeMem(0x50a8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa051);
        EXPECT(gbc.pc(), 0x50aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 035C
        gbc.setState(0x103, 0x82b, 0xf980, 0xcbe7, 0x8869, 0x93e8, 0x0, 0x1);
        gbc.writeMem(0x103, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x82b);
        EXPECT(gbc.pc(), 0x105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 035D
        gbc.setState(0x6389, 0xfa0f, 0x1350, 0x2a8, 0xf8fa, 0x3aa5, 0x0, 0x0);
        gbc.writeMem(0x6389, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xfa0f);
        EXPECT(gbc.pc(), 0x638b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 035E
        gbc.setState(0xeb25, 0x179f, 0xd9d0, 0x8ae4, 0xd5d0, 0x57, 0x0, 0x1);
        gbc.writeMem(0xeb25, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x179f);
        EXPECT(gbc.pc(), 0xeb27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb25), 0xcb);
        EXPECT(gbc.readMem(0xeb26), 0x4f);
        // CB 4F 035F
        gbc.setState(0x5347, 0xbeb2, 0x5ba0, 0x4600, 0x4158, 0x9bf0, 0x1, 0x1);
        gbc.writeMem(0x5347, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xbeb2);
        EXPECT(gbc.pc(), 0x5349);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0360
        gbc.setState(0xba5d, 0xf447, 0x39c0, 0xb81b, 0x4c88, 0x4797, 0x1, 0x1);
        gbc.writeMem(0xba5d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf447);
        EXPECT(gbc.pc(), 0xba5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba5d), 0xcb);
        EXPECT(gbc.readMem(0xba5e), 0x4f);
        // CB 4F 0361
        gbc.setState(0x1c99, 0xba29, 0xc710, 0xd7f1, 0xa91, 0xb99e, 0x0, 0x1);
        gbc.writeMem(0x1c99, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xba29);
        EXPECT(gbc.pc(), 0x1c9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0362
        gbc.setState(0x5367, 0xfdee, 0x2be0, 0x1e22, 0x2a8b, 0x176, 0x0, 0x1);
        gbc.writeMem(0x5367, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfdee);
        EXPECT(gbc.pc(), 0x5369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0363
        gbc.setState(0x34ff, 0xb35a, 0xa000, 0xef93, 0xf961, 0x3aaa, 0x1, 0x0);
        gbc.writeMem(0x34ff, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb35a);
        EXPECT(gbc.pc(), 0x3501);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0364
        gbc.setState(0x4f25, 0x56d2, 0xb2e0, 0x17ff, 0xe578, 0x433d, 0x1, 0x0);
        gbc.writeMem(0x4f25, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x56d2);
        EXPECT(gbc.pc(), 0x4f27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0365
        gbc.setState(0xba1f, 0x24a8, 0xe770, 0x5984, 0xfee2, 0xc193, 0x0, 0x0);
        gbc.writeMem(0xba1f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x24a8);
        EXPECT(gbc.pc(), 0xba21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba1f), 0xcb);
        EXPECT(gbc.readMem(0xba20), 0x4f);
        // CB 4F 0366
        gbc.setState(0xc48, 0xb617, 0x99c0, 0xae63, 0x9d5f, 0xe30f, 0x0, 0x1);
        gbc.writeMem(0xc48, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb617);
        EXPECT(gbc.pc(), 0xc4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0367
        gbc.setState(0x3947, 0x6e8f, 0xb0f0, 0xb10d, 0x9d6, 0xfdf2, 0x1, 0x0);
        gbc.writeMem(0x3947, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6e8f);
        EXPECT(gbc.pc(), 0x3949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0368
        gbc.setState(0x588f, 0x69a2, 0x4ce0, 0xbb6c, 0x13c6, 0xac45, 0x0, 0x0);
        gbc.writeMem(0x588f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x69a2);
        EXPECT(gbc.pc(), 0x5891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0369
        gbc.setState(0xc65e, 0x5774, 0x7640, 0xac0a, 0xa9e1, 0xc15a, 0x1, 0x0);
        gbc.writeMem(0xc65e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5774);
        EXPECT(gbc.pc(), 0xc660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65e), 0xcb);
        EXPECT(gbc.readMem(0xc65f), 0x4f);
        // CB 4F 036A
        gbc.setState(0xecb2, 0x68d2, 0xeb00, 0x4ab4, 0xe3a3, 0xd4d6, 0x0, 0x0);
        gbc.writeMem(0xecb2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x68d2);
        EXPECT(gbc.pc(), 0xecb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb2), 0xcb);
        EXPECT(gbc.readMem(0xecb3), 0x4f);
        // CB 4F 036B
        gbc.setState(0x9865, 0x8b3c, 0x78c0, 0xd3f0, 0x755b, 0xb0e6, 0x1, 0x0);
        gbc.writeMem(0x9865, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8b3c);
        EXPECT(gbc.pc(), 0x9867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9865), 0xcb);
        EXPECT(gbc.readMem(0x9866), 0x4f);
        // CB 4F 036C
        gbc.setState(0xd15b, 0xc874, 0xc3a0, 0xaead, 0x736a, 0x7247, 0x1, 0x1);
        gbc.writeMem(0xd15b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc874);
        EXPECT(gbc.pc(), 0xd15d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15b), 0xcb);
        EXPECT(gbc.readMem(0xd15c), 0x4f);
        // CB 4F 036D
        gbc.setState(0xbfb7, 0x57ad, 0x5e40, 0x1f53, 0xc49e, 0x85b9, 0x0, 0x1);
        gbc.writeMem(0xbfb7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x57ad);
        EXPECT(gbc.pc(), 0xbfb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb7), 0xcb);
        EXPECT(gbc.readMem(0xbfb8), 0x4f);
        // CB 4F 036E
        gbc.setState(0xd24f, 0xba8f, 0x8970, 0xba1, 0x5396, 0xea99, 0x1, 0x0);
        gbc.writeMem(0xd24f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xba8f);
        EXPECT(gbc.pc(), 0xd251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd24f), 0xcb);
        EXPECT(gbc.readMem(0xd250), 0x4f);
        // CB 4F 036F
        gbc.setState(0xaf4e, 0x36b7, 0x1510, 0xb6ba, 0xc797, 0x2dea, 0x1, 0x0);
        gbc.writeMem(0xaf4e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x36b7);
        EXPECT(gbc.pc(), 0xaf50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf4e), 0xcb);
        EXPECT(gbc.readMem(0xaf4f), 0x4f);
        // CB 4F 0370
        gbc.setState(0x34ec, 0xf386, 0xc130, 0x3ccc, 0xfba2, 0xaa53, 0x0, 0x1);
        gbc.writeMem(0x34ec, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf386);
        EXPECT(gbc.pc(), 0x34ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0371
        gbc.setState(0x9b20, 0x974d, 0x260, 0x363b, 0xe350, 0x10ef, 0x1, 0x1);
        gbc.writeMem(0x9b20, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x974d);
        EXPECT(gbc.pc(), 0x9b22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b20), 0xcb);
        EXPECT(gbc.readMem(0x9b21), 0x4f);
        // CB 4F 0372
        gbc.setState(0x9f5d, 0x9382, 0x25a0, 0xa6cb, 0xe8c9, 0x5157, 0x0, 0x1);
        gbc.writeMem(0x9f5d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9382);
        EXPECT(gbc.pc(), 0x9f5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5d), 0xcb);
        EXPECT(gbc.readMem(0x9f5e), 0x4f);
        // CB 4F 0373
        gbc.setState(0xeb4, 0xd8af, 0xb0e0, 0xac8c, 0x9721, 0x68e1, 0x1, 0x0);
        gbc.writeMem(0xeb4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd8af);
        EXPECT(gbc.pc(), 0xeb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0375
        gbc.setState(0xd2e5, 0x5110, 0xce0, 0x931f, 0xf9c5, 0xe763, 0x0, 0x0);
        gbc.writeMem(0xd2e5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5110);
        EXPECT(gbc.pc(), 0xd2e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e5), 0xcb);
        EXPECT(gbc.readMem(0xd2e6), 0x4f);
        // CB 4F 0376
        gbc.setState(0xbf0, 0x4c, 0x54d0, 0x7c09, 0x5f0b, 0x74ef, 0x1, 0x1);
        gbc.writeMem(0xbf0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4c);
        EXPECT(gbc.pc(), 0xbf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0377
        gbc.setState(0x7f6e, 0x66df, 0xd550, 0x3e75, 0xdbb7, 0xa6d6, 0x0, 0x1);
        gbc.writeMem(0x7f6e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x66df);
        EXPECT(gbc.pc(), 0x7f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0379
        gbc.setState(0xbeff, 0xec26, 0xf520, 0xd1e, 0xe4aa, 0x1517, 0x0, 0x0);
        gbc.writeMem(0xbeff, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xec26);
        EXPECT(gbc.pc(), 0xbf01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeff), 0xcb);
        EXPECT(gbc.readMem(0xbf00), 0x4f);
        // CB 4F 037A
        gbc.setState(0x725c, 0x81ac, 0xb130, 0xcc4f, 0xe10c, 0x5d80, 0x0, 0x0);
        gbc.writeMem(0x725c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x81ac);
        EXPECT(gbc.pc(), 0x725e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 037B
        gbc.setState(0x9237, 0x43b2, 0xd590, 0xc9cd, 0x821f, 0x1cec, 0x0, 0x0);
        gbc.writeMem(0x9237, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x43b2);
        EXPECT(gbc.pc(), 0x9239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9237), 0xcb);
        EXPECT(gbc.readMem(0x9238), 0x4f);
        // CB 4F 037C
        gbc.setState(0x4b08, 0xc039, 0xe2e0, 0xc4ff, 0xbe89, 0x5910, 0x0, 0x0);
        gbc.writeMem(0x4b08, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc039);
        EXPECT(gbc.pc(), 0x4b0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 037D
        gbc.setState(0x6642, 0x7fd, 0x37c0, 0x8c21, 0x3bc5, 0x4ab5, 0x0, 0x1);
        gbc.writeMem(0x6642, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7fd);
        EXPECT(gbc.pc(), 0x6644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 037E
        gbc.setState(0xad38, 0xfd4d, 0xb0d0, 0x5202, 0x362d, 0xd70d, 0x1, 0x1);
        gbc.writeMem(0xad38, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xfd4d);
        EXPECT(gbc.pc(), 0xad3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad38), 0xcb);
        EXPECT(gbc.readMem(0xad39), 0x4f);
        // CB 4F 037F
        gbc.setState(0x9a5f, 0xbec0, 0x2da0, 0x5cfe, 0xcdb, 0x2582, 0x1, 0x1);
        gbc.writeMem(0x9a5f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xbec0);
        EXPECT(gbc.pc(), 0x9a61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a5f), 0xcb);
        EXPECT(gbc.readMem(0x9a60), 0x4f);
        // CB 4F 0380
        gbc.setState(0xb74f, 0x3595, 0x5030, 0xf628, 0xe4f1, 0xc280, 0x0, 0x0);
        gbc.writeMem(0xb74f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3595);
        EXPECT(gbc.pc(), 0xb751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb74f), 0xcb);
        EXPECT(gbc.readMem(0xb750), 0x4f);
        // CB 4F 0381
        gbc.setState(0x3d9b, 0xb8b8, 0x7120, 0x132b, 0x4de7, 0x93ac, 0x1, 0x1);
        gbc.writeMem(0x3d9b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb8b8);
        EXPECT(gbc.pc(), 0x3d9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0382
        gbc.setState(0x3064, 0x4b66, 0x94b0, 0xfc8, 0x87aa, 0x48da, 0x1, 0x0);
        gbc.writeMem(0x3064, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4b66);
        EXPECT(gbc.pc(), 0x3066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0383
        gbc.setState(0x4b22, 0x80eb, 0x91d0, 0xe9e8, 0xdd04, 0x7811, 0x1, 0x1);
        gbc.writeMem(0x4b22, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x80eb);
        EXPECT(gbc.pc(), 0x4b24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0384
        gbc.setState(0x9b6a, 0x6e92, 0x61d0, 0xafe2, 0x388a, 0x6487, 0x0, 0x1);
        gbc.writeMem(0x9b6a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6e92);
        EXPECT(gbc.pc(), 0x9b6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b6a), 0xcb);
        EXPECT(gbc.readMem(0x9b6b), 0x4f);
        // CB 4F 0385
        gbc.setState(0x784d, 0x9a04, 0x4870, 0x7e70, 0x35bd, 0x524d, 0x1, 0x0);
        gbc.writeMem(0x784d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9a04);
        EXPECT(gbc.pc(), 0x784f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0386
        gbc.setState(0xabcf, 0xa3e6, 0x6210, 0x9aa6, 0x339b, 0x8106, 0x1, 0x1);
        gbc.writeMem(0xabcf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa3e6);
        EXPECT(gbc.pc(), 0xabd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabcf), 0xcb);
        EXPECT(gbc.readMem(0xabd0), 0x4f);
        // CB 4F 0387
        gbc.setState(0x414c, 0x31c, 0x6100, 0x3d5e, 0x2fc6, 0x5704, 0x1, 0x1);
        gbc.writeMem(0x414c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x31c);
        EXPECT(gbc.pc(), 0x414e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0388
        gbc.setState(0x9a21, 0xc9a0, 0x3310, 0xbe1b, 0xe114, 0x9a1f, 0x0, 0x1);
        gbc.writeMem(0x9a21, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc9a0);
        EXPECT(gbc.pc(), 0x9a23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a21), 0xcb);
        EXPECT(gbc.readMem(0x9a22), 0x4f);
        // CB 4F 0389
        gbc.setState(0xcf2b, 0xa1c7, 0xbb30, 0xa430, 0x142, 0x342f, 0x1, 0x0);
        gbc.writeMem(0xcf2b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa1c7);
        EXPECT(gbc.pc(), 0xcf2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2b), 0xcb);
        EXPECT(gbc.readMem(0xcf2c), 0x4f);
        // CB 4F 038A
        gbc.setState(0x5479, 0x3233, 0x6ce0, 0x29bb, 0xcad0, 0xf238, 0x1, 0x0);
        gbc.writeMem(0x5479, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3233);
        EXPECT(gbc.pc(), 0x547b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 038B
        gbc.setState(0x5bfb, 0x56c8, 0x3110, 0x6d1c, 0xa54e, 0xf97b, 0x1, 0x1);
        gbc.writeMem(0x5bfb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x56c8);
        EXPECT(gbc.pc(), 0x5bfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 038C
        gbc.setState(0x7a83, 0xd29b, 0xce90, 0xf89b, 0xe8a, 0x95db, 0x0, 0x1);
        gbc.writeMem(0x7a83, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xd29b);
        EXPECT(gbc.pc(), 0x7a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 038E
        gbc.setState(0xcfd3, 0x4b08, 0x6040, 0x3723, 0xe66, 0x9e04, 0x0, 0x0);
        gbc.writeMem(0xcfd3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4b08);
        EXPECT(gbc.pc(), 0xcfd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd3), 0xcb);
        EXPECT(gbc.readMem(0xcfd4), 0x4f);
        // CB 4F 0390
        gbc.setState(0x98eb, 0xb223, 0xf7b0, 0x326a, 0xa79f, 0x32e7, 0x0, 0x1);
        gbc.writeMem(0x98eb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb223);
        EXPECT(gbc.pc(), 0x98ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98eb), 0xcb);
        EXPECT(gbc.readMem(0x98ec), 0x4f);
        // CB 4F 0391
        gbc.setState(0x98a1, 0xf9ce, 0xd640, 0xdd77, 0xfc3e, 0xc643, 0x0, 0x1);
        gbc.writeMem(0x98a1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf9ce);
        EXPECT(gbc.pc(), 0x98a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a1), 0xcb);
        EXPECT(gbc.readMem(0x98a2), 0x4f);
        // CB 4F 0392
        gbc.setState(0x2529, 0x6d68, 0x7680, 0x8679, 0x23a3, 0x96ee, 0x0, 0x1);
        gbc.writeMem(0x2529, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6d68);
        EXPECT(gbc.pc(), 0x252b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 0393
        gbc.setState(0x3ba5, 0xbee2, 0xe010, 0xb4c6, 0x7279, 0xe202, 0x0, 0x1);
        gbc.writeMem(0x3ba5, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xbee2);
        EXPECT(gbc.pc(), 0x3ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0394
        gbc.setState(0xa13a, 0x13de, 0x3bb0, 0x8b9d, 0x2bf5, 0x71de, 0x1, 0x0);
        gbc.writeMem(0xa13a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x13de);
        EXPECT(gbc.pc(), 0xa13c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa13a), 0xcb);
        EXPECT(gbc.readMem(0xa13b), 0x4f);
        // CB 4F 0395
        gbc.setState(0x690b, 0xbacd, 0xd0, 0x69bd, 0xb912, 0x74b4, 0x1, 0x1);
        gbc.writeMem(0x690b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xbacd);
        EXPECT(gbc.pc(), 0x690d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0396
        gbc.setState(0x54e0, 0x4be, 0xf570, 0x5311, 0xb992, 0x3ee2, 0x0, 0x1);
        gbc.writeMem(0x54e0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4be);
        EXPECT(gbc.pc(), 0x54e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0397
        gbc.setState(0x5f41, 0xff90, 0x1f10, 0x25e5, 0x34f9, 0x270d, 0x1, 0x1);
        gbc.writeMem(0x5f41, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xff90);
        EXPECT(gbc.pc(), 0x5f43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0398
        gbc.setState(0x64a3, 0x9c2d, 0x7270, 0xb8b4, 0xbfc6, 0x95da, 0x1, 0x0);
        gbc.writeMem(0x64a3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9c2d);
        EXPECT(gbc.pc(), 0x64a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 0399
        gbc.setState(0x8a76, 0x9504, 0x2860, 0xbc5d, 0xe706, 0x36b3, 0x0, 0x1);
        gbc.writeMem(0x8a76, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9504);
        EXPECT(gbc.pc(), 0x8a78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a76), 0xcb);
        EXPECT(gbc.readMem(0x8a77), 0x4f);
        // CB 4F 039B
        gbc.setState(0xae4c, 0x6332, 0xf790, 0x9633, 0x459a, 0x9f83, 0x0, 0x1);
        gbc.writeMem(0xae4c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6332);
        EXPECT(gbc.pc(), 0xae4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae4c), 0xcb);
        EXPECT(gbc.readMem(0xae4d), 0x4f);
        // CB 4F 039C
        gbc.setState(0x86d4, 0xe5b7, 0x7c90, 0x7b62, 0xd8f8, 0xe0ed, 0x0, 0x0);
        gbc.writeMem(0x86d4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe5b7);
        EXPECT(gbc.pc(), 0x86d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86d4), 0xcb);
        EXPECT(gbc.readMem(0x86d5), 0x4f);
        // CB 4F 039D
        gbc.setState(0xd29c, 0x470c, 0xa310, 0x7bda, 0x70c5, 0x51b2, 0x1, 0x1);
        gbc.writeMem(0xd29c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x470c);
        EXPECT(gbc.pc(), 0xd29e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd29c), 0xcb);
        EXPECT(gbc.readMem(0xd29d), 0x4f);
        // CB 4F 039E
        gbc.setState(0x52f8, 0xb323, 0x3060, 0x7f05, 0x465e, 0x177f, 0x1, 0x1);
        gbc.writeMem(0x52f8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb323);
        EXPECT(gbc.pc(), 0x52fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 039F
        gbc.setState(0x9d2c, 0x2365, 0x2b20, 0xf7e4, 0x76db, 0x6eef, 0x1, 0x1);
        gbc.writeMem(0x9d2c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2365);
        EXPECT(gbc.pc(), 0x9d2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d2c), 0xcb);
        EXPECT(gbc.readMem(0x9d2d), 0x4f);
        // CB 4F 03A0
        gbc.setState(0x5fdd, 0xe5f8, 0x3140, 0x1117, 0xe8c0, 0x5add, 0x1, 0x1);
        gbc.writeMem(0x5fdd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe5f8);
        EXPECT(gbc.pc(), 0x5fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03A1
        gbc.setState(0x9d8d, 0xc78c, 0x45d0, 0xf408, 0xfd4, 0x80a5, 0x1, 0x1);
        gbc.writeMem(0x9d8d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc78c);
        EXPECT(gbc.pc(), 0x9d8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8d), 0xcb);
        EXPECT(gbc.readMem(0x9d8e), 0x4f);
        // CB 4F 03A2
        gbc.setState(0x7070, 0xb154, 0xf8e0, 0xd78, 0x45df, 0x4338, 0x1, 0x1);
        gbc.writeMem(0x7070, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb154);
        EXPECT(gbc.pc(), 0x7072);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03A3
        gbc.setState(0x26af, 0x97e3, 0x2c50, 0x6cb9, 0xb087, 0x8009, 0x1, 0x0);
        gbc.writeMem(0x26af, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x97e3);
        EXPECT(gbc.pc(), 0x26b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03A4
        gbc.setState(0xd58d, 0x89f9, 0x58d0, 0xe685, 0x3e4f, 0xdb8e, 0x0, 0x1);
        gbc.writeMem(0xd58d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x89f9);
        EXPECT(gbc.pc(), 0xd58f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd58d), 0xcb);
        EXPECT(gbc.readMem(0xd58e), 0x4f);
        // CB 4F 03A5
        gbc.setState(0x3646, 0x32e3, 0x5790, 0xf183, 0xe94, 0xb13c, 0x1, 0x1);
        gbc.writeMem(0x3646, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x32e3);
        EXPECT(gbc.pc(), 0x3648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03A7
        gbc.setState(0xeaa7, 0xc51b, 0x7bd0, 0xdc9a, 0xf00f, 0x7dee, 0x0, 0x1);
        gbc.writeMem(0xeaa7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc51b);
        EXPECT(gbc.pc(), 0xeaa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaa7), 0xcb);
        EXPECT(gbc.readMem(0xeaa8), 0x4f);
        // CB 4F 03A8
        gbc.setState(0xa7c0, 0x3f68, 0x5dc0, 0x45fa, 0x12ce, 0x5806, 0x0, 0x1);
        gbc.writeMem(0xa7c0, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3f68);
        EXPECT(gbc.pc(), 0xa7c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c0), 0xcb);
        EXPECT(gbc.readMem(0xa7c1), 0x4f);
        // CB 4F 03A9
        gbc.setState(0x4cd7, 0xa438, 0xb2f0, 0x66c0, 0xdabb, 0xa7c9, 0x1, 0x0);
        gbc.writeMem(0x4cd7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa438);
        EXPECT(gbc.pc(), 0x4cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03AA
        gbc.setState(0x4fd8, 0x1b99, 0x66e0, 0xce4c, 0xbbe4, 0x890d, 0x1, 0x0);
        gbc.writeMem(0x4fd8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1b99);
        EXPECT(gbc.pc(), 0x4fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03AB
        gbc.setState(0xa3e4, 0x1a3a, 0x8900, 0x6798, 0x2f2e, 0xe4d9, 0x1, 0x1);
        gbc.writeMem(0xa3e4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1a3a);
        EXPECT(gbc.pc(), 0xa3e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e4), 0xcb);
        EXPECT(gbc.readMem(0xa3e5), 0x4f);
        // CB 4F 03AC
        gbc.setState(0x2efc, 0x80db, 0xf370, 0x54c7, 0xd138, 0xf7e5, 0x1, 0x0);
        gbc.writeMem(0x2efc, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x80db);
        EXPECT(gbc.pc(), 0x2efe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03AD
        gbc.setState(0xa85, 0x4f24, 0xb010, 0x5ca1, 0xda8, 0x70cb, 0x1, 0x1);
        gbc.writeMem(0xa85, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4f24);
        EXPECT(gbc.pc(), 0xa87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03AE
        gbc.setState(0xc11d, 0x53f4, 0xbc50, 0x66fc, 0x460, 0x3810, 0x1, 0x0);
        gbc.writeMem(0xc11d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x53f4);
        EXPECT(gbc.pc(), 0xc11f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc11d), 0xcb);
        EXPECT(gbc.readMem(0xc11e), 0x4f);
        // CB 4F 03AF
        gbc.setState(0x8800, 0x2639, 0xcba0, 0x1bf7, 0x50d3, 0x768d, 0x1, 0x0);
        gbc.writeMem(0x8800, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2639);
        EXPECT(gbc.pc(), 0x8802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8800), 0xcb);
        EXPECT(gbc.readMem(0x8801), 0x4f);
        // CB 4F 03B0
        gbc.setState(0xb01e, 0xb079, 0x6e80, 0x873, 0x7b9d, 0x712d, 0x0, 0x1);
        gbc.writeMem(0xb01e, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb079);
        EXPECT(gbc.pc(), 0xb020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01e), 0xcb);
        EXPECT(gbc.readMem(0xb01f), 0x4f);
        // CB 4F 03B1
        gbc.setState(0xc1b1, 0x1bd3, 0xc060, 0x7a5a, 0xe94f, 0xbd79, 0x0, 0x0);
        gbc.writeMem(0xc1b1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1bd3);
        EXPECT(gbc.pc(), 0xc1b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b1), 0xcb);
        EXPECT(gbc.readMem(0xc1b2), 0x4f);
        // CB 4F 03B2
        gbc.setState(0xafb2, 0xcfc9, 0xb840, 0xfa29, 0x9edd, 0x4b9f, 0x0, 0x1);
        gbc.writeMem(0xafb2, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xcfc9);
        EXPECT(gbc.pc(), 0xafb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb2), 0xcb);
        EXPECT(gbc.readMem(0xafb3), 0x4f);
        // CB 4F 03B3
        gbc.setState(0xebfd, 0x9c29, 0x7490, 0x22e1, 0xda4b, 0xecf2, 0x1, 0x1);
        gbc.writeMem(0xebfd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9c29);
        EXPECT(gbc.pc(), 0xebff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebfd), 0xcb);
        EXPECT(gbc.readMem(0xebfe), 0x4f);
        // CB 4F 03B4
        gbc.setState(0x926c, 0xfafa, 0xb170, 0xe620, 0x7b6b, 0xebeb, 0x0, 0x1);
        gbc.writeMem(0x926c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfafa);
        EXPECT(gbc.pc(), 0x926e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x926c), 0xcb);
        EXPECT(gbc.readMem(0x926d), 0x4f);
        // CB 4F 03B5
        gbc.setState(0x3d73, 0x2443, 0xcf80, 0x4ac8, 0x12ce, 0xe52e, 0x1, 0x0);
        gbc.writeMem(0x3d73, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2443);
        EXPECT(gbc.pc(), 0x3d75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03B6
        gbc.setState(0x76d, 0x9fbb, 0xd3b0, 0x75e, 0x2035, 0x75cc, 0x0, 0x1);
        gbc.writeMem(0x76d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9fbb);
        EXPECT(gbc.pc(), 0x76f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03B7
        gbc.setState(0xad89, 0x213c, 0xbfa0, 0x9439, 0x530e, 0xc9ca, 0x0, 0x0);
        gbc.writeMem(0xad89, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x213c);
        EXPECT(gbc.pc(), 0xad8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad89), 0xcb);
        EXPECT(gbc.readMem(0xad8a), 0x4f);
        // CB 4F 03B8
        gbc.setState(0xcf50, 0x6189, 0xc100, 0xe9cd, 0x142, 0x4fb4, 0x0, 0x0);
        gbc.writeMem(0xcf50, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6189);
        EXPECT(gbc.pc(), 0xcf52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf50), 0xcb);
        EXPECT(gbc.readMem(0xcf51), 0x4f);
        // CB 4F 03B9
        gbc.setState(0x2fa9, 0xbbc, 0x97f0, 0xea3d, 0x42a8, 0xf423, 0x1, 0x1);
        gbc.writeMem(0x2fa9, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xbbc);
        EXPECT(gbc.pc(), 0x2fab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03BA
        gbc.setState(0x8ca, 0x4b60, 0x1af0, 0xa8, 0xab33, 0x837f, 0x0, 0x1);
        gbc.writeMem(0x8ca, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4b60);
        EXPECT(gbc.pc(), 0x8cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03BB
        gbc.setState(0x5779, 0xab86, 0x2600, 0x611d, 0xff78, 0xf99a, 0x1, 0x0);
        gbc.writeMem(0x5779, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xab86);
        EXPECT(gbc.pc(), 0x577b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03BC
        gbc.setState(0x4678, 0x409f, 0x2ba0, 0x2f6b, 0x5f4f, 0xad12, 0x0, 0x1);
        gbc.writeMem(0x4678, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x409f);
        EXPECT(gbc.pc(), 0x467a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03BD
        gbc.setState(0x3a8f, 0x54f6, 0x2490, 0x65ec, 0x201a, 0x7172, 0x0, 0x0);
        gbc.writeMem(0x3a8f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x54f6);
        EXPECT(gbc.pc(), 0x3a91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03BE
        gbc.setState(0xfcd, 0x9d86, 0x8950, 0x3350, 0x25e5, 0x1317, 0x0, 0x1);
        gbc.writeMem(0xfcd, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9d86);
        EXPECT(gbc.pc(), 0xfcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03BF
        gbc.setState(0xd246, 0xfbc1, 0x4860, 0xb46b, 0xda7b, 0x3849, 0x0, 0x0);
        gbc.writeMem(0xd246, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xfbc1);
        EXPECT(gbc.pc(), 0xd248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd246), 0xcb);
        EXPECT(gbc.readMem(0xd247), 0x4f);
        // CB 4F 03C0
        gbc.setState(0xcbbb, 0xf0b, 0xaf00, 0x2164, 0x9dfb, 0xa248, 0x0, 0x0);
        gbc.writeMem(0xcbbb, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf0b);
        EXPECT(gbc.pc(), 0xcbbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbbb), 0xcb);
        EXPECT(gbc.readMem(0xcbbc), 0x4f);
        // CB 4F 03C1
        gbc.setState(0x6bed, 0xa5c7, 0xff20, 0xc203, 0x7d8, 0x1f4c, 0x0, 0x1);
        gbc.writeMem(0x6bed, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa5c7);
        EXPECT(gbc.pc(), 0x6bef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03C2
        gbc.setState(0x3a7a, 0xb299, 0x5510, 0xb952, 0x7c75, 0x4044, 0x1, 0x0);
        gbc.writeMem(0x3a7a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb299);
        EXPECT(gbc.pc(), 0x3a7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03C3
        gbc.setState(0x18c4, 0x3aaf, 0x4c60, 0x5a1f, 0xa768, 0xbfb7, 0x1, 0x0);
        gbc.writeMem(0x18c4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3aaf);
        EXPECT(gbc.pc(), 0x18c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03C4
        gbc.setState(0xd26c, 0x67e7, 0x9bc0, 0x4819, 0xbd7f, 0x59bd, 0x0, 0x0);
        gbc.writeMem(0xd26c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x67e7);
        EXPECT(gbc.pc(), 0xd26e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26c), 0xcb);
        EXPECT(gbc.readMem(0xd26d), 0x4f);
        // CB 4F 03C5
        gbc.setState(0x713c, 0x6318, 0xcba0, 0x711d, 0xfa81, 0x49f5, 0x0, 0x1);
        gbc.writeMem(0x713c, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6318);
        EXPECT(gbc.pc(), 0x713e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03C6
        gbc.setState(0x3f93, 0x59f4, 0x3700, 0xb9, 0x72a9, 0x3762, 0x1, 0x0);
        gbc.writeMem(0x3f93, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x59f4);
        EXPECT(gbc.pc(), 0x3f95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03C7
        gbc.setState(0xbc22, 0x1411, 0x3410, 0x3d4b, 0xb334, 0x60f8, 0x0, 0x1);
        gbc.writeMem(0xbc22, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1411);
        EXPECT(gbc.pc(), 0xbc24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc22), 0xcb);
        EXPECT(gbc.readMem(0xbc23), 0x4f);
        // CB 4F 03C8
        gbc.setState(0x22fa, 0x16f0, 0x3110, 0xd0ea, 0x9899, 0xe17a, 0x1, 0x1);
        gbc.writeMem(0x22fa, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x16f0);
        EXPECT(gbc.pc(), 0x22fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03C9
        gbc.setState(0x307a, 0x3a62, 0x5050, 0x9e1b, 0x8c7f, 0x286a, 0x0, 0x1);
        gbc.writeMem(0x307a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3a62);
        EXPECT(gbc.pc(), 0x307c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03CA
        gbc.setState(0x91f8, 0x2cc6, 0x3980, 0x3530, 0x8ffe, 0x5472, 0x1, 0x0);
        gbc.writeMem(0x91f8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2cc6);
        EXPECT(gbc.pc(), 0x91fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f8), 0xcb);
        EXPECT(gbc.readMem(0x91f9), 0x4f);
        // CB 4F 03CB
        gbc.setState(0xd34a, 0x771d, 0x800, 0x4faa, 0xe5a, 0xa3d2, 0x0, 0x0);
        gbc.writeMem(0xd34a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x771d);
        EXPECT(gbc.pc(), 0xd34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd34a), 0xcb);
        EXPECT(gbc.readMem(0xd34b), 0x4f);
        // CB 4F 03CC
        gbc.setState(0xab83, 0xa9b5, 0x2cc0, 0x6c0e, 0x416e, 0xa1a4, 0x0, 0x1);
        gbc.writeMem(0xab83, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa9b5);
        EXPECT(gbc.pc(), 0xab85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab83), 0xcb);
        EXPECT(gbc.readMem(0xab84), 0x4f);
        // CB 4F 03CD
        gbc.setState(0x41de, 0x92a8, 0xea40, 0xeb0e, 0x6a76, 0x9339, 0x0, 0x1);
        gbc.writeMem(0x41de, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x92a8);
        EXPECT(gbc.pc(), 0x41e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03CE
        gbc.setState(0x43b6, 0x8040, 0x1400, 0xa777, 0xec88, 0x97c4, 0x1, 0x0);
        gbc.writeMem(0x43b6, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x8040);
        EXPECT(gbc.pc(), 0x43b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03CF
        gbc.setState(0x4937, 0x824f, 0x7a00, 0xccb5, 0xa736, 0x7fae, 0x0, 0x0);
        gbc.writeMem(0x4937, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x824f);
        EXPECT(gbc.pc(), 0x4939);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03D0
        gbc.setState(0xab0d, 0xffb, 0x77e0, 0xd355, 0x1c95, 0x60b6, 0x0, 0x0);
        gbc.writeMem(0xab0d, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xffb);
        EXPECT(gbc.pc(), 0xab0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab0d), 0xcb);
        EXPECT(gbc.readMem(0xab0e), 0x4f);
        // CB 4F 03D1
        gbc.setState(0x1a51, 0xafd1, 0xe660, 0x993d, 0xcb4e, 0x9d70, 0x1, 0x1);
        gbc.writeMem(0x1a51, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xafd1);
        EXPECT(gbc.pc(), 0x1a53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03D2
        gbc.setState(0xbe97, 0x849f, 0x81d0, 0xeddd, 0x436b, 0x27cd, 0x1, 0x1);
        gbc.writeMem(0xbe97, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x849f);
        EXPECT(gbc.pc(), 0xbe99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe97), 0xcb);
        EXPECT(gbc.readMem(0xbe98), 0x4f);
        // CB 4F 03D3
        gbc.setState(0x6aa7, 0x1db3, 0x4720, 0xd40, 0xff96, 0x24c4, 0x1, 0x1);
        gbc.writeMem(0x6aa7, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1db3);
        EXPECT(gbc.pc(), 0x6aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03D4
        gbc.setState(0xd02a, 0x6e55, 0x6970, 0xa36d, 0x40f7, 0xcc24, 0x1, 0x0);
        gbc.writeMem(0xd02a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6e55);
        EXPECT(gbc.pc(), 0xd02c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd02a), 0xcb);
        EXPECT(gbc.readMem(0xd02b), 0x4f);
        // CB 4F 03D5
        gbc.setState(0xdec4, 0xa390, 0x1610, 0x2921, 0xae4, 0x6ad9, 0x1, 0x1);
        gbc.writeMem(0xdec4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa390);
        EXPECT(gbc.pc(), 0xdec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdec4), 0xcb);
        EXPECT(gbc.readMem(0xdec5), 0x4f);
        // CB 4F 03D6
        gbc.setState(0x8a3f, 0x45c3, 0xdbd0, 0xbe8c, 0xd1f9, 0x9e5c, 0x1, 0x0);
        gbc.writeMem(0x8a3f, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x45c3);
        EXPECT(gbc.pc(), 0x8a41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a3f), 0xcb);
        EXPECT(gbc.readMem(0x8a40), 0x4f);
        // CB 4F 03D7
        gbc.setState(0xaf80, 0x46f5, 0x6250, 0x27e8, 0x4c36, 0x502b, 0x1, 0x1);
        gbc.writeMem(0xaf80, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x46f5);
        EXPECT(gbc.pc(), 0xaf82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf80), 0xcb);
        EXPECT(gbc.readMem(0xaf81), 0x4f);
        // CB 4F 03D8
        gbc.setState(0xae71, 0x23f8, 0xe010, 0x1361, 0x3d97, 0x1b65, 0x1, 0x1);
        gbc.writeMem(0xae71, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x23f8);
        EXPECT(gbc.pc(), 0xae73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae71), 0xcb);
        EXPECT(gbc.readMem(0xae72), 0x4f);
        // CB 4F 03D9
        gbc.setState(0xc8b3, 0xb59, 0x5100, 0x642f, 0x9229, 0xe099, 0x1, 0x0);
        gbc.writeMem(0xc8b3, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb59);
        EXPECT(gbc.pc(), 0xc8b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b3), 0xcb);
        EXPECT(gbc.readMem(0xc8b4), 0x4f);
        // CB 4F 03DA
        gbc.setState(0xbf33, 0xbc2d, 0x4c00, 0x8588, 0x77ee, 0x9b49, 0x0, 0x0);
        gbc.writeMem(0xbf33, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbc2d);
        EXPECT(gbc.pc(), 0xbf35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf33), 0xcb);
        EXPECT(gbc.readMem(0xbf34), 0x4f);
        // CB 4F 03DB
        gbc.setState(0x78ea, 0xfa91, 0x84e0, 0xb091, 0x4036, 0x4900, 0x1, 0x0);
        gbc.writeMem(0x78ea, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfa91);
        EXPECT(gbc.pc(), 0x78ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03DC
        gbc.setState(0xe06a, 0xe63f, 0xdf10, 0x3096, 0xdfbc, 0x7cb, 0x0, 0x1);
        gbc.writeMem(0xe06a, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe63f);
        EXPECT(gbc.pc(), 0xe06c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe06a), 0xcb);
        EXPECT(gbc.readMem(0xe06b), 0x4f);
        // CB 4F 03DD
        gbc.setState(0x5cf4, 0x978f, 0x5d70, 0x7c76, 0x5d00, 0x341d, 0x0, 0x0);
        gbc.writeMem(0x5cf4, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x978f);
        EXPECT(gbc.pc(), 0x5cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03DE
        gbc.setState(0xb167, 0x5815, 0xa080, 0xcb12, 0xb84a, 0xabaa, 0x1, 0x0);
        gbc.writeMem(0xb167, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5815);
        EXPECT(gbc.pc(), 0xb169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb167), 0xcb);
        EXPECT(gbc.readMem(0xb168), 0x4f);
        // CB 4F 03DF
        gbc.setState(0x78b, 0x34ae, 0x2760, 0x4631, 0x5052, 0xd3cb, 0x0, 0x0);
        gbc.writeMem(0x78b, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x34ae);
        EXPECT(gbc.pc(), 0x78d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03E1
        gbc.setState(0xaeb1, 0x2bb1, 0xfcf0, 0xe848, 0xa9e9, 0xf2f1, 0x0, 0x0);
        gbc.writeMem(0xaeb1, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2bb1);
        EXPECT(gbc.pc(), 0xaeb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeb1), 0xcb);
        EXPECT(gbc.readMem(0xaeb2), 0x4f);
        // CB 4F 03E2
        gbc.setState(0xa872, 0xed6c, 0xfb80, 0x6cd8, 0xa7d2, 0xf952, 0x1, 0x0);
        gbc.writeMem(0xa872, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xed6c);
        EXPECT(gbc.pc(), 0xa874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa872), 0xcb);
        EXPECT(gbc.readMem(0xa873), 0x4f);
        // CB 4F 03E3
        gbc.setState(0x3fdf, 0xc80a, 0x72f0, 0x437, 0x6550, 0x68f4, 0x1, 0x1);
        gbc.writeMem(0x3fdf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc80a);
        EXPECT(gbc.pc(), 0x3fe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03E4
        gbc.setState(0xba60, 0xf53b, 0xac50, 0xef1c, 0xdd78, 0x3008, 0x0, 0x0);
        gbc.writeMem(0xba60, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf53b);
        EXPECT(gbc.pc(), 0xba62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba60), 0xcb);
        EXPECT(gbc.readMem(0xba61), 0x4f);
        // CB 4F 03E5
        gbc.setState(0xb12, 0xdef7, 0x7450, 0xcd9d, 0xa9d3, 0xeee0, 0x0, 0x0);
        gbc.writeMem(0xb12, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xdef7);
        EXPECT(gbc.pc(), 0xb14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4F 03E6
        gbc.setState(0x1d8, 0xc80, 0xa460, 0x272a, 0x88f8, 0x8ef6, 0x0, 0x0);
        gbc.writeMem(0x1d8, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc80);
        EXPECT(gbc.pc(), 0x1da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4F 03E7
        gbc.setState(0xb5cf, 0xb51a, 0x2bf0, 0x624d, 0x26e6, 0x6b12, 0x1, 0x1);
        gbc.writeMem(0xb5cf, { 0xcb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb51a);
        EXPECT(gbc.pc(), 0xb5d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5cf), 0xcb);
        EXPECT(gbc.readMem(0xb5d0), 0x4f);
    }
