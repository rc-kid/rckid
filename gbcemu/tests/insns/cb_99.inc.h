    TEST(gbcemu, opcode_cb_99) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 99 0000
        gbc.setState(0x5de0, 0x1696, 0x4e50, 0x815, 0xa863, 0x8b10, 0x1, 0x1);
        gbc.writeMem(0x5de0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x1696, gbc.sp());
        EXPECT(0x5de2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0001
        gbc.setState(0x9a66, 0xbf9f, 0x6cf0, 0xa856, 0x1e8d, 0x5200, 0x0, 0x0);
        gbc.writeMem(0x9a66, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xbf9f, gbc.sp());
        EXPECT(0x9a68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a66));
        EXPECT(0x99, gbc.readMem(0x9a67));
        // CB 99 0002
        gbc.setState(0xbb78, 0x210a, 0x71f0, 0x99a6, 0xa3de, 0x1781, 0x0, 0x0);
        gbc.writeMem(0xbb78, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x210a, gbc.sp());
        EXPECT(0xbb7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb78));
        EXPECT(0x99, gbc.readMem(0xbb79));
        // CB 99 0004
        gbc.setState(0x78ac, 0xa020, 0xc820, 0xe11f, 0xdda1, 0x660, 0x0, 0x0);
        gbc.writeMem(0x78ac, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xa020, gbc.sp());
        EXPECT(0x78ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0005
        gbc.setState(0xc25f, 0x542d, 0xb690, 0xb501, 0x8611, 0x6c15, 0x0, 0x0);
        gbc.writeMem(0xc25f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x542d, gbc.sp());
        EXPECT(0xc261, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc25f));
        EXPECT(0x99, gbc.readMem(0xc260));
        // CB 99 0006
        gbc.setState(0xeb5d, 0x1a46, 0xb810, 0x4b04, 0xd1, 0x35b5, 0x0, 0x0);
        gbc.writeMem(0xeb5d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x1a46, gbc.sp());
        EXPECT(0xeb5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb5d));
        EXPECT(0x99, gbc.readMem(0xeb5e));
        // CB 99 0007
        gbc.setState(0x4d74, 0x496f, 0xb6e0, 0xd92b, 0x947b, 0x24d9, 0x0, 0x0);
        gbc.writeMem(0x4d74, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x496f, gbc.sp());
        EXPECT(0x4d76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0008
        gbc.setState(0x786a, 0xbb9c, 0xcf00, 0xbb6a, 0x289c, 0x9267, 0x0, 0x1);
        gbc.writeMem(0x786a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xbb9c, gbc.sp());
        EXPECT(0x786c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0009
        gbc.setState(0x36ce, 0x6e1a, 0xfeb0, 0xc276, 0xbf0e, 0x15da, 0x1, 0x1);
        gbc.writeMem(0x36ce, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x6e1a, gbc.sp());
        EXPECT(0x36d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 000A
        gbc.setState(0xce1, 0xed59, 0x8050, 0x3364, 0xd69c, 0x66b2, 0x0, 0x0);
        gbc.writeMem(0xce1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xed59, gbc.sp());
        EXPECT(0xce3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 000B
        gbc.setState(0x8d90, 0x665b, 0xa330, 0x6c1f, 0x62b2, 0x8d73, 0x0, 0x1);
        gbc.writeMem(0x8d90, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x665b, gbc.sp());
        EXPECT(0x8d92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d90));
        EXPECT(0x99, gbc.readMem(0x8d91));
        // CB 99 000C
        gbc.setState(0xb3b8, 0xf7dc, 0x51e0, 0x7b06, 0x968b, 0x3d0e, 0x0, 0x1);
        gbc.writeMem(0xb3b8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xf7dc, gbc.sp());
        EXPECT(0xb3ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3b8));
        EXPECT(0x99, gbc.readMem(0xb3b9));
        // CB 99 000D
        gbc.setState(0x4a1, 0x39b0, 0x21c0, 0xdb4c, 0xfd13, 0x4a97, 0x1, 0x1);
        gbc.writeMem(0x4a1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x39b0, gbc.sp());
        EXPECT(0x4a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 000E
        gbc.setState(0x591b, 0x56f8, 0xe7a0, 0xdffc, 0xaf74, 0xc88e, 0x1, 0x0);
        gbc.writeMem(0x591b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x56f8, gbc.sp());
        EXPECT(0x591d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 000F
        gbc.setState(0xeccb, 0x312, 0x1a40, 0x256f, 0x1af9, 0xf79b, 0x0, 0x1);
        gbc.writeMem(0xeccb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x312, gbc.sp());
        EXPECT(0xeccd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeccb));
        EXPECT(0x99, gbc.readMem(0xeccc));
        // CB 99 0010
        gbc.setState(0xce48, 0x20ae, 0xcf40, 0x7fed, 0xe862, 0x43cb, 0x0, 0x0);
        gbc.writeMem(0xce48, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x20ae, gbc.sp());
        EXPECT(0xce4a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce48));
        EXPECT(0x99, gbc.readMem(0xce49));
        // CB 99 0012
        gbc.setState(0x422f, 0xea2e, 0xf1a0, 0x9f14, 0xfb74, 0xea7a, 0x1, 0x1);
        gbc.writeMem(0x422f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xea2e, gbc.sp());
        EXPECT(0x4231, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0014
        gbc.setState(0x3496, 0xf020, 0x8660, 0x106d, 0x9b2b, 0x1127, 0x0, 0x0);
        gbc.writeMem(0x3496, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xf020, gbc.sp());
        EXPECT(0x3498, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0015
        gbc.setState(0xca03, 0x4143, 0x2ed0, 0x4e82, 0x4afb, 0xc00c, 0x0, 0x1);
        gbc.writeMem(0xca03, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x4143, gbc.sp());
        EXPECT(0xca05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca03));
        EXPECT(0x99, gbc.readMem(0xca04));
        // CB 99 0016
        gbc.setState(0x164, 0x666, 0x51d0, 0x5034, 0x65ef, 0x55ba, 0x0, 0x1);
        gbc.writeMem(0x164, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x666, gbc.sp());
        EXPECT(0x166, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0017
        gbc.setState(0x12fb, 0xb88b, 0xaab0, 0x25fe, 0x5479, 0x5eba, 0x1, 0x0);
        gbc.writeMem(0x12fb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xb88b, gbc.sp());
        EXPECT(0x12fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0018
        gbc.setState(0xc33, 0x3ed1, 0xea90, 0xb783, 0xb6c, 0x6040, 0x1, 0x0);
        gbc.writeMem(0xc33, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x3ed1, gbc.sp());
        EXPECT(0xc35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0019
        gbc.setState(0xcddd, 0x225, 0x3fa0, 0xf22a, 0x31c9, 0xb002, 0x0, 0x0);
        gbc.writeMem(0xcddd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x225, gbc.sp());
        EXPECT(0xcddf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcddd));
        EXPECT(0x99, gbc.readMem(0xcdde));
        // CB 99 001A
        gbc.setState(0x4008, 0x7e26, 0x8060, 0x14b8, 0x54d6, 0xc592, 0x0, 0x1);
        gbc.writeMem(0x4008, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x7e26, gbc.sp());
        EXPECT(0x400a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 001B
        gbc.setState(0x8070, 0x7b5f, 0xea00, 0x5e14, 0x15d0, 0xd7a7, 0x0, 0x1);
        gbc.writeMem(0x8070, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x7b5f, gbc.sp());
        EXPECT(0x8072, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8070));
        EXPECT(0x99, gbc.readMem(0x8071));
        // CB 99 001C
        gbc.setState(0xb99, 0x832f, 0xc1b0, 0x5e4d, 0x1dcc, 0xeffe, 0x1, 0x1);
        gbc.writeMem(0xb99, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x832f, gbc.sp());
        EXPECT(0xb9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 001D
        gbc.setState(0x7a5, 0xb5a0, 0xb290, 0xfec9, 0x98a3, 0xc659, 0x0, 0x1);
        gbc.writeMem(0x7a5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xb5a0, gbc.sp());
        EXPECT(0x7a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 001E
        gbc.setState(0xb23b, 0x917f, 0xcf50, 0xabc, 0x2692, 0x9aed, 0x1, 0x0);
        gbc.writeMem(0xb23b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x917f, gbc.sp());
        EXPECT(0xb23d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb23b));
        EXPECT(0x99, gbc.readMem(0xb23c));
        // CB 99 001F
        gbc.setState(0x9014, 0x5a08, 0x5820, 0x9d4e, 0xba8e, 0x8fd6, 0x0, 0x0);
        gbc.writeMem(0x9014, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x5a08, gbc.sp());
        EXPECT(0x9016, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9014));
        EXPECT(0x99, gbc.readMem(0x9015));
        // CB 99 0021
        gbc.setState(0xc9ae, 0xc454, 0x5a80, 0x9ee2, 0xd16, 0xe8ce, 0x0, 0x1);
        gbc.writeMem(0xc9ae, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xc454, gbc.sp());
        EXPECT(0xc9b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9ae));
        EXPECT(0x99, gbc.readMem(0xc9af));
        // CB 99 0022
        gbc.setState(0x405b, 0x3e44, 0x7b20, 0x6787, 0x4740, 0x9a1d, 0x1, 0x1);
        gbc.writeMem(0x405b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x3e44, gbc.sp());
        EXPECT(0x405d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0023
        gbc.setState(0xbf3f, 0x21a7, 0x1370, 0x8342, 0xa40a, 0x8c02, 0x1, 0x1);
        gbc.writeMem(0xbf3f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x21a7, gbc.sp());
        EXPECT(0xbf41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf3f));
        EXPECT(0x99, gbc.readMem(0xbf40));
        // CB 99 0024
        gbc.setState(0x5b85, 0x4f4d, 0xc090, 0x5e79, 0xda8, 0x5222, 0x0, 0x0);
        gbc.writeMem(0x5b85, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x4f4d, gbc.sp());
        EXPECT(0x5b87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0025
        gbc.setState(0x9415, 0x9247, 0x4cd0, 0x3dd8, 0x3daf, 0x3465, 0x1, 0x0);
        gbc.writeMem(0x9415, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x9247, gbc.sp());
        EXPECT(0x9417, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9415));
        EXPECT(0x99, gbc.readMem(0x9416));
        // CB 99 0026
        gbc.setState(0x4842, 0x7fd8, 0x2c70, 0x1762, 0x5127, 0x7ab, 0x0, 0x1);
        gbc.writeMem(0x4842, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x7fd8, gbc.sp());
        EXPECT(0x4844, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0027
        gbc.setState(0x3fb2, 0x86c, 0x9ec0, 0x9a98, 0xe318, 0xf81e, 0x1, 0x1);
        gbc.writeMem(0x3fb2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x86c, gbc.sp());
        EXPECT(0x3fb4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0028
        gbc.setState(0x8807, 0x2120, 0x3b60, 0x1ae5, 0xf3c0, 0xc57a, 0x1, 0x0);
        gbc.writeMem(0x8807, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x2120, gbc.sp());
        EXPECT(0x8809, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8807));
        EXPECT(0x99, gbc.readMem(0x8808));
        // CB 99 0029
        gbc.setState(0x13e6, 0x62c8, 0xa60, 0xeef4, 0x98f2, 0x2291, 0x0, 0x1);
        gbc.writeMem(0x13e6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x62c8, gbc.sp());
        EXPECT(0x13e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 002A
        gbc.setState(0x74b4, 0xa5a3, 0xa010, 0xdd11, 0x442f, 0xcd15, 0x0, 0x0);
        gbc.writeMem(0x74b4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xa5a3, gbc.sp());
        EXPECT(0x74b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 002B
        gbc.setState(0xb8d2, 0xee5, 0xdc60, 0xc8f4, 0x242b, 0x8613, 0x1, 0x0);
        gbc.writeMem(0xb8d2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xee5, gbc.sp());
        EXPECT(0xb8d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8d2));
        EXPECT(0x99, gbc.readMem(0xb8d3));
        // CB 99 002C
        gbc.setState(0x8ffc, 0x97cb, 0xf630, 0x70c5, 0x8667, 0xc096, 0x1, 0x0);
        gbc.writeMem(0x8ffc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x97cb, gbc.sp());
        EXPECT(0x8ffe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ffc));
        EXPECT(0x99, gbc.readMem(0x8ffd));
        // CB 99 002D
        gbc.setState(0x5fa9, 0x1ae8, 0x1ba0, 0x5a58, 0x911b, 0x51e0, 0x0, 0x0);
        gbc.writeMem(0x5fa9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x1ae8, gbc.sp());
        EXPECT(0x5fab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 002E
        gbc.setState(0x94d5, 0x8415, 0xd6d0, 0x7e82, 0x5472, 0x19f1, 0x0, 0x1);
        gbc.writeMem(0x94d5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x8415, gbc.sp());
        EXPECT(0x94d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94d5));
        EXPECT(0x99, gbc.readMem(0x94d6));
        // CB 99 002F
        gbc.setState(0x64ce, 0x2340, 0x8b40, 0x8246, 0x5ad, 0x9ead, 0x1, 0x0);
        gbc.writeMem(0x64ce, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x2340, gbc.sp());
        EXPECT(0x64d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0030
        gbc.setState(0xb1d2, 0x4190, 0x2e80, 0x6cc7, 0x9c5a, 0x4146, 0x1, 0x0);
        gbc.writeMem(0xb1d2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x4190, gbc.sp());
        EXPECT(0xb1d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1d2));
        EXPECT(0x99, gbc.readMem(0xb1d3));
        // CB 99 0032
        gbc.setState(0x3328, 0xfd7c, 0xff70, 0xcd35, 0xa4a2, 0xd410, 0x0, 0x0);
        gbc.writeMem(0x3328, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xfd7c, gbc.sp());
        EXPECT(0x332a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0033
        gbc.setState(0x9359, 0xedb7, 0x820, 0x7c12, 0x27cd, 0x2e3f, 0x0, 0x0);
        gbc.writeMem(0x9359, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xedb7, gbc.sp());
        EXPECT(0x935b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9359));
        EXPECT(0x99, gbc.readMem(0x935a));
        // CB 99 0034
        gbc.setState(0x38e2, 0x92bc, 0x8ba0, 0x87bf, 0x5532, 0xa987, 0x0, 0x0);
        gbc.writeMem(0x38e2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x92bc, gbc.sp());
        EXPECT(0x38e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0035
        gbc.setState(0x35d1, 0x73a4, 0xb640, 0x9944, 0x92b5, 0x897c, 0x0, 0x1);
        gbc.writeMem(0x35d1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x73a4, gbc.sp());
        EXPECT(0x35d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0036
        gbc.setState(0x6dcd, 0xf3e8, 0x1f60, 0xf9cc, 0xcb5, 0x53dc, 0x1, 0x0);
        gbc.writeMem(0x6dcd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xf3e8, gbc.sp());
        EXPECT(0x6dcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0037
        gbc.setState(0xe1f2, 0x6585, 0x99d0, 0xa4e8, 0x4f5b, 0x9367, 0x1, 0x1);
        gbc.writeMem(0xe1f2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x6585, gbc.sp());
        EXPECT(0xe1f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1f2));
        EXPECT(0x99, gbc.readMem(0xe1f3));
        // CB 99 0038
        gbc.setState(0x6c0e, 0x2cb4, 0xf130, 0x7269, 0x2332, 0x8a17, 0x1, 0x1);
        gbc.writeMem(0x6c0e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x2cb4, gbc.sp());
        EXPECT(0x6c10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 003A
        gbc.setState(0x80f9, 0xd3e8, 0x9130, 0x4dfa, 0x505a, 0x8007, 0x0, 0x1);
        gbc.writeMem(0x80f9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xd3e8, gbc.sp());
        EXPECT(0x80fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80f9));
        EXPECT(0x99, gbc.readMem(0x80fa));
        // CB 99 003B
        gbc.setState(0x961f, 0x122, 0xe000, 0x8296, 0xd64c, 0x934, 0x0, 0x1);
        gbc.writeMem(0x961f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x122, gbc.sp());
        EXPECT(0x9621, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x961f));
        EXPECT(0x99, gbc.readMem(0x9620));
        // CB 99 003C
        gbc.setState(0xe776, 0x30d5, 0x3b90, 0xcd5f, 0xc0c8, 0xb40, 0x0, 0x0);
        gbc.writeMem(0xe776, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x30d5, gbc.sp());
        EXPECT(0xe778, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe776));
        EXPECT(0x99, gbc.readMem(0xe777));
        // CB 99 003D
        gbc.setState(0x4bf0, 0xf529, 0xa630, 0x2706, 0x76de, 0x577d, 0x1, 0x1);
        gbc.writeMem(0x4bf0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xf529, gbc.sp());
        EXPECT(0x4bf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 003E
        gbc.setState(0xaada, 0x4974, 0xc10, 0x4394, 0xb65c, 0x6e9f, 0x1, 0x1);
        gbc.writeMem(0xaada, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x4974, gbc.sp());
        EXPECT(0xaadc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaada));
        EXPECT(0x99, gbc.readMem(0xaadb));
        // CB 99 003F
        gbc.setState(0x8834, 0x1746, 0xf60, 0x57de, 0x219b, 0x8871, 0x1, 0x1);
        gbc.writeMem(0x8834, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x1746, gbc.sp());
        EXPECT(0x8836, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8834));
        EXPECT(0x99, gbc.readMem(0x8835));
        // CB 99 0040
        gbc.setState(0x2b60, 0x42b4, 0x1600, 0x57a6, 0xa5ff, 0xaef5, 0x1, 0x1);
        gbc.writeMem(0x2b60, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x42b4, gbc.sp());
        EXPECT(0x2b62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0041
        gbc.setState(0x97dc, 0x3659, 0x4090, 0x442f, 0x1193, 0xcbe4, 0x1, 0x1);
        gbc.writeMem(0x97dc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x3659, gbc.sp());
        EXPECT(0x97de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97dc));
        EXPECT(0x99, gbc.readMem(0x97dd));
        // CB 99 0042
        gbc.setState(0x9f29, 0xf8a7, 0x870, 0x94b, 0xfb0, 0xb5d6, 0x0, 0x1);
        gbc.writeMem(0x9f29, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xf8a7, gbc.sp());
        EXPECT(0x9f2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f29));
        EXPECT(0x99, gbc.readMem(0x9f2a));
        // CB 99 0043
        gbc.setState(0x9a43, 0x1e05, 0x100, 0x1739, 0xfa94, 0xe5e2, 0x1, 0x1);
        gbc.writeMem(0x9a43, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x1e05, gbc.sp());
        EXPECT(0x9a45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a43));
        EXPECT(0x99, gbc.readMem(0x9a44));
        // CB 99 0044
        gbc.setState(0xa3cf, 0xb3e2, 0xbdb0, 0xa455, 0x54d1, 0xd84d, 0x1, 0x1);
        gbc.writeMem(0xa3cf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xb3e2, gbc.sp());
        EXPECT(0xa3d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3cf));
        EXPECT(0x99, gbc.readMem(0xa3d0));
        // CB 99 0045
        gbc.setState(0xe58, 0x16e7, 0x9600, 0xf65e, 0x6217, 0xc7c6, 0x0, 0x1);
        gbc.writeMem(0xe58, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x16e7, gbc.sp());
        EXPECT(0xe5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0046
        gbc.setState(0x2cb2, 0x9560, 0xa050, 0x3b55, 0x3114, 0x9415, 0x1, 0x0);
        gbc.writeMem(0x2cb2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x9560, gbc.sp());
        EXPECT(0x2cb4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0047
        gbc.setState(0x8f67, 0x30c6, 0xea00, 0x109c, 0xea6c, 0x1c55, 0x1, 0x1);
        gbc.writeMem(0x8f67, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x30c6, gbc.sp());
        EXPECT(0x8f69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f67));
        EXPECT(0x99, gbc.readMem(0x8f68));
        // CB 99 0049
        gbc.setState(0x599b, 0x7c60, 0x330, 0x5124, 0xed8d, 0x841f, 0x0, 0x0);
        gbc.writeMem(0x599b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x7c60, gbc.sp());
        EXPECT(0x599d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 004A
        gbc.setState(0x60c0, 0x431, 0xa4f0, 0x1c49, 0xa0b2, 0xba94, 0x1, 0x1);
        gbc.writeMem(0x60c0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x431, gbc.sp());
        EXPECT(0x60c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 004B
        gbc.setState(0x9cd8, 0xf841, 0xde20, 0xcdda, 0x6719, 0x816f, 0x0, 0x0);
        gbc.writeMem(0x9cd8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xf841, gbc.sp());
        EXPECT(0x9cda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cd8));
        EXPECT(0x99, gbc.readMem(0x9cd9));
        // CB 99 004C
        gbc.setState(0x8444, 0xa2e2, 0x8720, 0x8c21, 0x5350, 0x93c3, 0x0, 0x0);
        gbc.writeMem(0x8444, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xa2e2, gbc.sp());
        EXPECT(0x8446, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8444));
        EXPECT(0x99, gbc.readMem(0x8445));
        // CB 99 004D
        gbc.setState(0x84df, 0xad8f, 0x7130, 0x42ec, 0xa169, 0x9904, 0x1, 0x1);
        gbc.writeMem(0x84df, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xad8f, gbc.sp());
        EXPECT(0x84e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84df));
        EXPECT(0x99, gbc.readMem(0x84e0));
        // CB 99 004E
        gbc.setState(0x220e, 0x1a4, 0xb590, 0x4cf5, 0xe71a, 0x999c, 0x0, 0x1);
        gbc.writeMem(0x220e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x1a4, gbc.sp());
        EXPECT(0x2210, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0051
        gbc.setState(0x5e66, 0xe95f, 0x97d0, 0xad, 0xa257, 0x9a8b, 0x0, 0x1);
        gbc.writeMem(0x5e66, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xe95f, gbc.sp());
        EXPECT(0x5e68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0052
        gbc.setState(0x1ffd, 0xbd23, 0x6540, 0xd4a0, 0xee25, 0x1a71, 0x0, 0x0);
        gbc.writeMem(0x1ffd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xbd23, gbc.sp());
        EXPECT(0x1fff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0053
        gbc.setState(0x917a, 0xbb45, 0xc0f0, 0xb1c5, 0x9341, 0x6c82, 0x1, 0x1);
        gbc.writeMem(0x917a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xbb45, gbc.sp());
        EXPECT(0x917c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x917a));
        EXPECT(0x99, gbc.readMem(0x917b));
        // CB 99 0054
        gbc.setState(0x4b77, 0x9f9, 0x7f80, 0x1f14, 0x501f, 0x5765, 0x1, 0x0);
        gbc.writeMem(0x4b77, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x9f9, gbc.sp());
        EXPECT(0x4b79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0055
        gbc.setState(0x48eb, 0xb709, 0x4460, 0x4f39, 0x441b, 0x8ac, 0x1, 0x1);
        gbc.writeMem(0x48eb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xb709, gbc.sp());
        EXPECT(0x48ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0056
        gbc.setState(0x60c4, 0x9261, 0x6750, 0x146d, 0x798b, 0x1240, 0x1, 0x1);
        gbc.writeMem(0x60c4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x9261, gbc.sp());
        EXPECT(0x60c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0057
        gbc.setState(0x1b1f, 0xc507, 0xfb90, 0xb197, 0x36f2, 0xb3bd, 0x1, 0x1);
        gbc.writeMem(0x1b1f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc507, gbc.sp());
        EXPECT(0x1b21, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0058
        gbc.setState(0xe7d0, 0xd8fb, 0x24a0, 0x7d10, 0x9914, 0x5dc6, 0x1, 0x0);
        gbc.writeMem(0xe7d0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xd8fb, gbc.sp());
        EXPECT(0xe7d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7d0));
        EXPECT(0x99, gbc.readMem(0xe7d1));
        // CB 99 0059
        gbc.setState(0x872c, 0xbf4d, 0x2670, 0x5290, 0xb530, 0xbb7f, 0x0, 0x0);
        gbc.writeMem(0x872c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xbf4d, gbc.sp());
        EXPECT(0x872e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x872c));
        EXPECT(0x99, gbc.readMem(0x872d));
        // CB 99 005A
        gbc.setState(0xcaee, 0x1658, 0x3a60, 0xd22a, 0x6ed9, 0x7685, 0x0, 0x0);
        gbc.writeMem(0xcaee, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x1658, gbc.sp());
        EXPECT(0xcaf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaee));
        EXPECT(0x99, gbc.readMem(0xcaef));
        // CB 99 005B
        gbc.setState(0xd3ae, 0x3a98, 0x3e90, 0x69f8, 0xce07, 0xccf4, 0x0, 0x1);
        gbc.writeMem(0xd3ae, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x3a98, gbc.sp());
        EXPECT(0xd3b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3ae));
        EXPECT(0x99, gbc.readMem(0xd3af));
        // CB 99 005C
        gbc.setState(0xc623, 0x1c5e, 0x3560, 0x30c9, 0xfe5b, 0xd062, 0x0, 0x0);
        gbc.writeMem(0xc623, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x1c5e, gbc.sp());
        EXPECT(0xc625, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc623));
        EXPECT(0x99, gbc.readMem(0xc624));
        // CB 99 005D
        gbc.setState(0x1dc7, 0xfa16, 0x4910, 0xf663, 0xa02d, 0x560a, 0x1, 0x0);
        gbc.writeMem(0x1dc7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xfa16, gbc.sp());
        EXPECT(0x1dc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 005E
        gbc.setState(0xb384, 0xbcb7, 0xb0a0, 0xe608, 0x4ea3, 0xacbe, 0x1, 0x0);
        gbc.writeMem(0xb384, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xbcb7, gbc.sp());
        EXPECT(0xb386, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb384));
        EXPECT(0x99, gbc.readMem(0xb385));
        // CB 99 005F
        gbc.setState(0x54e, 0xa64d, 0xbb10, 0x91db, 0xcb14, 0xe328, 0x1, 0x0);
        gbc.writeMem(0x54e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xa64d, gbc.sp());
        EXPECT(0x550, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0060
        gbc.setState(0x94ca, 0x4f6f, 0xb5b0, 0xd8ef, 0x58ae, 0xedef, 0x0, 0x0);
        gbc.writeMem(0x94ca, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x4f6f, gbc.sp());
        EXPECT(0x94cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94ca));
        EXPECT(0x99, gbc.readMem(0x94cb));
        // CB 99 0061
        gbc.setState(0x24ea, 0xa741, 0x4830, 0x9a92, 0x63d6, 0xcf84, 0x1, 0x1);
        gbc.writeMem(0x24ea, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xa741, gbc.sp());
        EXPECT(0x24ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0062
        gbc.setState(0x76cc, 0xe4c0, 0x8eb0, 0xb409, 0x695c, 0x8f51, 0x0, 0x0);
        gbc.writeMem(0x76cc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xe4c0, gbc.sp());
        EXPECT(0x76ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0063
        gbc.setState(0x4656, 0x418e, 0x39e0, 0xbf63, 0xcdd3, 0x237a, 0x1, 0x0);
        gbc.writeMem(0x4656, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x418e, gbc.sp());
        EXPECT(0x4658, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0064
        gbc.setState(0x515, 0xd674, 0x6b00, 0x2fc, 0xce30, 0x427f, 0x0, 0x0);
        gbc.writeMem(0x515, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xd674, gbc.sp());
        EXPECT(0x517, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0065
        gbc.setState(0x8f95, 0x29e9, 0xe5a0, 0x6da5, 0xd3bf, 0x5938, 0x0, 0x1);
        gbc.writeMem(0x8f95, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x29e9, gbc.sp());
        EXPECT(0x8f97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f95));
        EXPECT(0x99, gbc.readMem(0x8f96));
        // CB 99 0066
        gbc.setState(0x6f49, 0xa616, 0x29b0, 0xf510, 0xb810, 0x13e5, 0x1, 0x1);
        gbc.writeMem(0x6f49, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xa616, gbc.sp());
        EXPECT(0x6f4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0067
        gbc.setState(0x66dd, 0xb430, 0x5bc0, 0xa332, 0xab8f, 0x1243, 0x0, 0x0);
        gbc.writeMem(0x66dd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xb430, gbc.sp());
        EXPECT(0x66df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0068
        gbc.setState(0xdcb5, 0xa4cc, 0x7a50, 0x99ce, 0x3cb3, 0x3eb4, 0x1, 0x0);
        gbc.writeMem(0xdcb5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xa4cc, gbc.sp());
        EXPECT(0xdcb7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcb5));
        EXPECT(0x99, gbc.readMem(0xdcb6));
        // CB 99 0069
        gbc.setState(0x99a2, 0x7e54, 0x1d80, 0x20eb, 0x6fbf, 0x4225, 0x1, 0x1);
        gbc.writeMem(0x99a2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x7e54, gbc.sp());
        EXPECT(0x99a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99a2));
        EXPECT(0x99, gbc.readMem(0x99a3));
        // CB 99 006A
        gbc.setState(0x985f, 0x4911, 0xf770, 0xecb0, 0x8fc5, 0x4dfc, 0x0, 0x0);
        gbc.writeMem(0x985f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x4911, gbc.sp());
        EXPECT(0x9861, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x985f));
        EXPECT(0x99, gbc.readMem(0x9860));
        // CB 99 006B
        gbc.setState(0x64ae, 0xc4f1, 0xe2e0, 0x705c, 0xaee6, 0x1779, 0x1, 0x1);
        gbc.writeMem(0x64ae, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xc4f1, gbc.sp());
        EXPECT(0x64b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 006C
        gbc.setState(0x4d12, 0xfd2d, 0x3270, 0x8d68, 0x7d5a, 0x3f1f, 0x1, 0x1);
        gbc.writeMem(0x4d12, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xfd2d, gbc.sp());
        EXPECT(0x4d14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 006D
        gbc.setState(0xd13d, 0x9b87, 0x3e60, 0x7449, 0x91b3, 0x1d3d, 0x0, 0x1);
        gbc.writeMem(0xd13d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x9b87, gbc.sp());
        EXPECT(0xd13f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd13d));
        EXPECT(0x99, gbc.readMem(0xd13e));
        // CB 99 006E
        gbc.setState(0x6026, 0xb0a8, 0x3a90, 0x5479, 0xf8b, 0xd104, 0x1, 0x1);
        gbc.writeMem(0x6026, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xb0a8, gbc.sp());
        EXPECT(0x6028, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 006F
        gbc.setState(0x8d07, 0xea01, 0xdb00, 0x4d2c, 0xc251, 0xb6c7, 0x1, 0x0);
        gbc.writeMem(0x8d07, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xea01, gbc.sp());
        EXPECT(0x8d09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d07));
        EXPECT(0x99, gbc.readMem(0x8d08));
        // CB 99 0070
        gbc.setState(0xfb4, 0xe480, 0x1a60, 0x8f7, 0xb674, 0x9c03, 0x1, 0x1);
        gbc.writeMem(0xfb4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xe480, gbc.sp());
        EXPECT(0xfb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0071
        gbc.setState(0x51a8, 0xfde9, 0x3770, 0x1cfe, 0xae65, 0x7c9c, 0x0, 0x0);
        gbc.writeMem(0x51a8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xfde9, gbc.sp());
        EXPECT(0x51aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0072
        gbc.setState(0x8262, 0x61e7, 0xc10, 0x2df1, 0xb392, 0x683c, 0x0, 0x0);
        gbc.writeMem(0x8262, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x61e7, gbc.sp());
        EXPECT(0x8264, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8262));
        EXPECT(0x99, gbc.readMem(0x8263));
        // CB 99 0073
        gbc.setState(0x8229, 0x9562, 0xd820, 0x2086, 0x939d, 0x5628, 0x0, 0x0);
        gbc.writeMem(0x8229, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x9562, gbc.sp());
        EXPECT(0x822b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8229));
        EXPECT(0x99, gbc.readMem(0x822a));
        // CB 99 0074
        gbc.setState(0xc4ac, 0x6237, 0x1ae0, 0x70c1, 0x57b1, 0x107f, 0x0, 0x0);
        gbc.writeMem(0xc4ac, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x6237, gbc.sp());
        EXPECT(0xc4ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4ac));
        EXPECT(0x99, gbc.readMem(0xc4ad));
        // CB 99 0075
        gbc.setState(0x42ed, 0xef8c, 0x18a0, 0xac24, 0x2480, 0x2145, 0x1, 0x0);
        gbc.writeMem(0x42ed, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xef8c, gbc.sp());
        EXPECT(0x42ef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0076
        gbc.setState(0xad4e, 0x7fe0, 0x9ab0, 0x8536, 0xd875, 0x59c4, 0x0, 0x0);
        gbc.writeMem(0xad4e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x7fe0, gbc.sp());
        EXPECT(0xad50, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad4e));
        EXPECT(0x99, gbc.readMem(0xad4f));
        // CB 99 0077
        gbc.setState(0x4c63, 0xf3f, 0x6020, 0x8c05, 0x9f61, 0x809a, 0x1, 0x1);
        gbc.writeMem(0x4c63, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xf3f, gbc.sp());
        EXPECT(0x4c65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0078
        gbc.setState(0x443b, 0xf00, 0x7840, 0x1c38, 0x430d, 0x6a9, 0x0, 0x0);
        gbc.writeMem(0x443b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xf00, gbc.sp());
        EXPECT(0x443d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0079
        gbc.setState(0xddd6, 0x849d, 0xab50, 0xc9db, 0xe828, 0x8365, 0x0, 0x0);
        gbc.writeMem(0xddd6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x849d, gbc.sp());
        EXPECT(0xddd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddd6));
        EXPECT(0x99, gbc.readMem(0xddd7));
        // CB 99 007A
        gbc.setState(0x9ee1, 0x3e91, 0x54a0, 0x6d2, 0x6dd1, 0xd527, 0x1, 0x0);
        gbc.writeMem(0x9ee1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x3e91, gbc.sp());
        EXPECT(0x9ee3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ee1));
        EXPECT(0x99, gbc.readMem(0x9ee2));
        // CB 99 007B
        gbc.setState(0x423e, 0x84d6, 0xcdf0, 0xd094, 0x2f0, 0x7352, 0x0, 0x0);
        gbc.writeMem(0x423e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x84d6, gbc.sp());
        EXPECT(0x4240, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 007C
        gbc.setState(0xd357, 0xdb8, 0xb770, 0xc45f, 0xbfcd, 0xec17, 0x0, 0x1);
        gbc.writeMem(0xd357, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xdb8, gbc.sp());
        EXPECT(0xd359, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd357));
        EXPECT(0x99, gbc.readMem(0xd358));
        // CB 99 007D
        gbc.setState(0xba4e, 0xeaaa, 0x3ab0, 0xc900, 0xc710, 0xcab7, 0x1, 0x0);
        gbc.writeMem(0xba4e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xeaaa, gbc.sp());
        EXPECT(0xba50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba4e));
        EXPECT(0x99, gbc.readMem(0xba4f));
        // CB 99 007E
        gbc.setState(0x3bc6, 0xe4e0, 0x7760, 0xd41, 0xfbe7, 0x8968, 0x0, 0x1);
        gbc.writeMem(0x3bc6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xe4e0, gbc.sp());
        EXPECT(0x3bc8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 007F
        gbc.setState(0x97f, 0xbc80, 0xb590, 0x91a1, 0xf7f8, 0x9201, 0x1, 0x1);
        gbc.writeMem(0x97f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xbc80, gbc.sp());
        EXPECT(0x981, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0080
        gbc.setState(0x7ffa, 0x48d4, 0xc2d0, 0x7425, 0x24f8, 0xdb1c, 0x1, 0x1);
        gbc.writeMem(0x7ffa, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x48d4, gbc.sp());
        EXPECT(0x7ffc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0081
        gbc.setState(0x763d, 0xa918, 0xb570, 0xbc3d, 0x92ed, 0x4b49, 0x1, 0x1);
        gbc.writeMem(0x763d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xa918, gbc.sp());
        EXPECT(0x763f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0082
        gbc.setState(0x7316, 0xc170, 0xf30, 0x6e20, 0x7cf5, 0xe15, 0x1, 0x1);
        gbc.writeMem(0x7316, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xc170, gbc.sp());
        EXPECT(0x7318, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0084
        gbc.setState(0xc893, 0x2deb, 0x130, 0x20fa, 0x5140, 0x49d1, 0x0, 0x0);
        gbc.writeMem(0xc893, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x2deb, gbc.sp());
        EXPECT(0xc895, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc893));
        EXPECT(0x99, gbc.readMem(0xc894));
        // CB 99 0085
        gbc.setState(0xd47d, 0xfc6c, 0x1f20, 0x13d4, 0x1037, 0xac12, 0x1, 0x1);
        gbc.writeMem(0xd47d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xfc6c, gbc.sp());
        EXPECT(0xd47f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd47d));
        EXPECT(0x99, gbc.readMem(0xd47e));
        // CB 99 0086
        gbc.setState(0xe0eb, 0x6199, 0x970, 0xfeed, 0x5864, 0x2737, 0x0, 0x0);
        gbc.writeMem(0xe0eb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x6199, gbc.sp());
        EXPECT(0xe0ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0eb));
        EXPECT(0x99, gbc.readMem(0xe0ec));
        // CB 99 0087
        gbc.setState(0x722c, 0xbca6, 0x4510, 0x86ed, 0x3a46, 0x5186, 0x1, 0x1);
        gbc.writeMem(0x722c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xbca6, gbc.sp());
        EXPECT(0x722e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0088
        gbc.setState(0x96b2, 0xb4fa, 0xe900, 0xf76a, 0x5cf0, 0x6e9b, 0x1, 0x0);
        gbc.writeMem(0x96b2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xb4fa, gbc.sp());
        EXPECT(0x96b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96b2));
        EXPECT(0x99, gbc.readMem(0x96b3));
        // CB 99 0089
        gbc.setState(0x54eb, 0xffce, 0x40, 0x845a, 0xc192, 0xcdb2, 0x0, 0x1);
        gbc.writeMem(0x54eb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xffce, gbc.sp());
        EXPECT(0x54ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 008A
        gbc.setState(0x7d56, 0xec37, 0xb40, 0xd962, 0x414b, 0xb353, 0x1, 0x1);
        gbc.writeMem(0x7d56, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xec37, gbc.sp());
        EXPECT(0x7d58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 008B
        gbc.setState(0x8e84, 0xf1da, 0x7dc0, 0xe0b0, 0x9ddd, 0x3a7, 0x1, 0x0);
        gbc.writeMem(0x8e84, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xf1da, gbc.sp());
        EXPECT(0x8e86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e84));
        EXPECT(0x99, gbc.readMem(0x8e85));
        // CB 99 008C
        gbc.setState(0x56aa, 0x65d5, 0xf60, 0x1007, 0x463e, 0x7332, 0x1, 0x0);
        gbc.writeMem(0x56aa, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x65d5, gbc.sp());
        EXPECT(0x56ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 008D
        gbc.setState(0xd0b0, 0x32e9, 0x8ac0, 0x10fd, 0x7d74, 0xa28d, 0x0, 0x1);
        gbc.writeMem(0xd0b0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x32e9, gbc.sp());
        EXPECT(0xd0b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0b0));
        EXPECT(0x99, gbc.readMem(0xd0b1));
        // CB 99 008E
        gbc.setState(0x2ff6, 0x41f7, 0xd2f0, 0xb85, 0x9725, 0x7c92, 0x1, 0x0);
        gbc.writeMem(0x2ff6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x41f7, gbc.sp());
        EXPECT(0x2ff8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 008F
        gbc.setState(0x1244, 0xb663, 0x4c50, 0x80c0, 0xfac4, 0x624f, 0x1, 0x1);
        gbc.writeMem(0x1244, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xb663, gbc.sp());
        EXPECT(0x1246, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0090
        gbc.setState(0x161, 0xce1b, 0x1fe0, 0x1f87, 0x1bc9, 0xf9f9, 0x1, 0x0);
        gbc.writeMem(0x161, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xce1b, gbc.sp());
        EXPECT(0x163, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0091
        gbc.setState(0x807e, 0x170c, 0x86d0, 0xabf, 0xb45b, 0x3c42, 0x1, 0x1);
        gbc.writeMem(0x807e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x170c, gbc.sp());
        EXPECT(0x8080, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x807e));
        EXPECT(0x99, gbc.readMem(0x807f));
        // CB 99 0092
        gbc.setState(0xe6e9, 0x3d92, 0xbbf0, 0x67e4, 0xefb4, 0x6d64, 0x0, 0x0);
        gbc.writeMem(0xe6e9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x3d92, gbc.sp());
        EXPECT(0xe6eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6e9));
        EXPECT(0x99, gbc.readMem(0xe6ea));
        // CB 99 0093
        gbc.setState(0x63b6, 0xda78, 0xf060, 0xad2c, 0x5d0c, 0x377d, 0x0, 0x0);
        gbc.writeMem(0x63b6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xda78, gbc.sp());
        EXPECT(0x63b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0094
        gbc.setState(0x2fbe, 0xae11, 0xa050, 0x715d, 0x1727, 0xd089, 0x1, 0x1);
        gbc.writeMem(0x2fbe, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xae11, gbc.sp());
        EXPECT(0x2fc0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0095
        gbc.setState(0x2e0b, 0x853a, 0x740, 0x664b, 0x5a99, 0xdd61, 0x0, 0x0);
        gbc.writeMem(0x2e0b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x853a, gbc.sp());
        EXPECT(0x2e0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0096
        gbc.setState(0x91f9, 0xb65b, 0x28d0, 0xfa79, 0xf35d, 0xa20c, 0x1, 0x1);
        gbc.writeMem(0x91f9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xb65b, gbc.sp());
        EXPECT(0x91fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91f9));
        EXPECT(0x99, gbc.readMem(0x91fa));
        // CB 99 0097
        gbc.setState(0x37d0, 0x59e6, 0xf110, 0x98f, 0x52a4, 0xa48b, 0x0, 0x0);
        gbc.writeMem(0x37d0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x59e6, gbc.sp());
        EXPECT(0x37d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0098
        gbc.setState(0x7be1, 0xe1, 0x57b0, 0x29b1, 0xd798, 0x10b3, 0x0, 0x1);
        gbc.writeMem(0x7be1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xe1, gbc.sp());
        EXPECT(0x7be3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0099
        gbc.setState(0x152e, 0xe56d, 0x79d0, 0x25b2, 0xf203, 0x76ef, 0x1, 0x0);
        gbc.writeMem(0x152e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xe56d, gbc.sp());
        EXPECT(0x1530, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 009A
        gbc.setState(0x1b4b, 0x6163, 0x4ba0, 0x843b, 0xa0bb, 0xba71, 0x1, 0x1);
        gbc.writeMem(0x1b4b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x6163, gbc.sp());
        EXPECT(0x1b4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 009C
        gbc.setState(0x3ec2, 0x8586, 0xef00, 0x24bb, 0xb17f, 0x5259, 0x0, 0x0);
        gbc.writeMem(0x3ec2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x8586, gbc.sp());
        EXPECT(0x3ec4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 009D
        gbc.setState(0xc673, 0x6d07, 0x62b0, 0x810d, 0x542d, 0x12b6, 0x1, 0x0);
        gbc.writeMem(0xc673, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x6d07, gbc.sp());
        EXPECT(0xc675, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc673));
        EXPECT(0x99, gbc.readMem(0xc674));
        // CB 99 009E
        gbc.setState(0x2ec2, 0x9b82, 0xb600, 0x57e6, 0x37d1, 0xcea9, 0x0, 0x0);
        gbc.writeMem(0x2ec2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x9b82, gbc.sp());
        EXPECT(0x2ec4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 009F
        gbc.setState(0x8a9, 0x51b2, 0x50c0, 0x5cad, 0x3075, 0x7e2f, 0x1, 0x1);
        gbc.writeMem(0x8a9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x51b2, gbc.sp());
        EXPECT(0x8ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00A0
        gbc.setState(0x409e, 0xb8df, 0x3c80, 0x4072, 0x6d1, 0x635b, 0x1, 0x1);
        gbc.writeMem(0x409e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xb8df, gbc.sp());
        EXPECT(0x40a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00A1
        gbc.setState(0x4b1a, 0x1a3b, 0x5ee0, 0xe431, 0xbcb1, 0x4297, 0x0, 0x0);
        gbc.writeMem(0x4b1a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x1a3b, gbc.sp());
        EXPECT(0x4b1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00A2
        gbc.setState(0x4bf8, 0x666d, 0x2870, 0xf1f, 0xe0ae, 0x35a1, 0x0, 0x1);
        gbc.writeMem(0x4bf8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x666d, gbc.sp());
        EXPECT(0x4bfa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00A3
        gbc.setState(0x559f, 0xe54f, 0xcb0, 0xf41f, 0x9dc4, 0x4146, 0x0, 0x1);
        gbc.writeMem(0x559f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xe54f, gbc.sp());
        EXPECT(0x55a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00A4
        gbc.setState(0xed2b, 0xad58, 0x8120, 0xc52f, 0xc03, 0xc486, 0x0, 0x1);
        gbc.writeMem(0xed2b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xad58, gbc.sp());
        EXPECT(0xed2d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed2b));
        EXPECT(0x99, gbc.readMem(0xed2c));
        // CB 99 00A5
        gbc.setState(0xe195, 0xf86b, 0xce50, 0xca98, 0x9196, 0x28c, 0x1, 0x1);
        gbc.writeMem(0xe195, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xf86b, gbc.sp());
        EXPECT(0xe197, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe195));
        EXPECT(0x99, gbc.readMem(0xe196));
        // CB 99 00A6
        gbc.setState(0x5106, 0xcc7a, 0xa840, 0x1016, 0x9bb6, 0x1e63, 0x1, 0x0);
        gbc.writeMem(0x5106, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xcc7a, gbc.sp());
        EXPECT(0x5108, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00A7
        gbc.setState(0x79d9, 0xc9ec, 0x450, 0x3780, 0xdaa0, 0x8314, 0x1, 0x1);
        gbc.writeMem(0x79d9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xc9ec, gbc.sp());
        EXPECT(0x79db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00A9
        gbc.setState(0x333f, 0xb4c9, 0x1ed0, 0x9353, 0x4918, 0x6184, 0x0, 0x1);
        gbc.writeMem(0x333f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xb4c9, gbc.sp());
        EXPECT(0x3341, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00AA
        gbc.setState(0x9ad2, 0xa2b2, 0x5760, 0xc893, 0x75c2, 0xcd6a, 0x0, 0x1);
        gbc.writeMem(0x9ad2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xa2b2, gbc.sp());
        EXPECT(0x9ad4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ad2));
        EXPECT(0x99, gbc.readMem(0x9ad3));
        // CB 99 00AB
        gbc.setState(0xb431, 0x66e7, 0xbc40, 0xc4d0, 0x725a, 0xe574, 0x1, 0x0);
        gbc.writeMem(0xb431, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x66e7, gbc.sp());
        EXPECT(0xb433, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb431));
        EXPECT(0x99, gbc.readMem(0xb432));
        // CB 99 00AC
        gbc.setState(0x17ce, 0x346c, 0xb030, 0x869b, 0xa6f3, 0xb1, 0x1, 0x0);
        gbc.writeMem(0x17ce, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x346c, gbc.sp());
        EXPECT(0x17d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00AD
        gbc.setState(0xdc1d, 0x1511, 0x9b10, 0x1e, 0x9002, 0x7480, 0x1, 0x1);
        gbc.writeMem(0xdc1d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x1511, gbc.sp());
        EXPECT(0xdc1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc1d));
        EXPECT(0x99, gbc.readMem(0xdc1e));
        // CB 99 00AE
        gbc.setState(0xbf1b, 0xfd11, 0x9760, 0x3f88, 0x982b, 0x9616, 0x1, 0x0);
        gbc.writeMem(0xbf1b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xfd11, gbc.sp());
        EXPECT(0xbf1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf1b));
        EXPECT(0x99, gbc.readMem(0xbf1c));
        // CB 99 00AF
        gbc.setState(0xb542, 0x4033, 0x40b0, 0x9c94, 0x5776, 0x48aa, 0x0, 0x1);
        gbc.writeMem(0xb542, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x4033, gbc.sp());
        EXPECT(0xb544, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb542));
        EXPECT(0x99, gbc.readMem(0xb543));
        // CB 99 00B0
        gbc.setState(0x8b3b, 0x693e, 0xf570, 0x4a09, 0x7141, 0x207e, 0x1, 0x1);
        gbc.writeMem(0x8b3b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x693e, gbc.sp());
        EXPECT(0x8b3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b3b));
        EXPECT(0x99, gbc.readMem(0x8b3c));
        // CB 99 00B1
        gbc.setState(0x50fe, 0xf74b, 0xef70, 0x1be, 0xba2c, 0x8ca5, 0x1, 0x0);
        gbc.writeMem(0x50fe, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xf74b, gbc.sp());
        EXPECT(0x5100, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00B2
        gbc.setState(0xbca7, 0xb279, 0x2170, 0xd78b, 0xdf48, 0xd6f8, 0x0, 0x1);
        gbc.writeMem(0xbca7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xb279, gbc.sp());
        EXPECT(0xbca9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbca7));
        EXPECT(0x99, gbc.readMem(0xbca8));
        // CB 99 00B3
        gbc.setState(0x8813, 0x8e5a, 0x99e0, 0x6baf, 0x9397, 0xe8d7, 0x1, 0x0);
        gbc.writeMem(0x8813, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x8e5a, gbc.sp());
        EXPECT(0x8815, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8813));
        EXPECT(0x99, gbc.readMem(0x8814));
        // CB 99 00B4
        gbc.setState(0xf9e, 0xa81c, 0xd360, 0x796a, 0x4b, 0xf50, 0x1, 0x1);
        gbc.writeMem(0xf9e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xa81c, gbc.sp());
        EXPECT(0xfa0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00B5
        gbc.setState(0x92c0, 0xa549, 0xeb90, 0xad6e, 0x35cc, 0x2de, 0x1, 0x1);
        gbc.writeMem(0x92c0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xa549, gbc.sp());
        EXPECT(0x92c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92c0));
        EXPECT(0x99, gbc.readMem(0x92c1));
        // CB 99 00B6
        gbc.setState(0xda3d, 0x4d0b, 0x80c0, 0xe12d, 0xa4d1, 0x8255, 0x0, 0x1);
        gbc.writeMem(0xda3d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x4d0b, gbc.sp());
        EXPECT(0xda3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda3d));
        EXPECT(0x99, gbc.readMem(0xda3e));
        // CB 99 00B7
        gbc.setState(0x27ae, 0x45a2, 0x2b60, 0x2323, 0x8bea, 0x61a5, 0x0, 0x1);
        gbc.writeMem(0x27ae, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x45a2, gbc.sp());
        EXPECT(0x27b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00B8
        gbc.setState(0xb1c4, 0xb9b4, 0x9c10, 0x4022, 0x7ff2, 0xf0be, 0x1, 0x1);
        gbc.writeMem(0xb1c4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xb9b4, gbc.sp());
        EXPECT(0xb1c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1c4));
        EXPECT(0x99, gbc.readMem(0xb1c5));
        // CB 99 00B9
        gbc.setState(0x9cbe, 0x956c, 0x64e0, 0xd65e, 0x96ae, 0x36e3, 0x1, 0x1);
        gbc.writeMem(0x9cbe, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x956c, gbc.sp());
        EXPECT(0x9cc0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cbe));
        EXPECT(0x99, gbc.readMem(0x9cbf));
        // CB 99 00BA
        gbc.setState(0xef1e, 0x2e3c, 0x60b0, 0x780c, 0x279d, 0xe6e, 0x0, 0x1);
        gbc.writeMem(0xef1e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x2e3c, gbc.sp());
        EXPECT(0xef20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef1e));
        EXPECT(0x99, gbc.readMem(0xef1f));
        // CB 99 00BB
        gbc.setState(0xc485, 0x25a1, 0x5ca0, 0x35a9, 0x57c3, 0xcac4, 0x0, 0x0);
        gbc.writeMem(0xc485, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x25a1, gbc.sp());
        EXPECT(0xc487, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc485));
        EXPECT(0x99, gbc.readMem(0xc486));
        // CB 99 00BC
        gbc.setState(0x4506, 0xda5, 0x1b80, 0x56c, 0x41e9, 0x2a46, 0x0, 0x1);
        gbc.writeMem(0x4506, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xda5, gbc.sp());
        EXPECT(0x4508, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00BD
        gbc.setState(0x86a5, 0x35f2, 0xd280, 0xc2b1, 0x1106, 0xeb63, 0x0, 0x0);
        gbc.writeMem(0x86a5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x35f2, gbc.sp());
        EXPECT(0x86a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86a5));
        EXPECT(0x99, gbc.readMem(0x86a6));
        // CB 99 00BE
        gbc.setState(0x9727, 0x155b, 0xf930, 0xcd11, 0x8f9d, 0x2ba7, 0x0, 0x1);
        gbc.writeMem(0x9727, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x155b, gbc.sp());
        EXPECT(0x9729, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9727));
        EXPECT(0x99, gbc.readMem(0x9728));
        // CB 99 00BF
        gbc.setState(0x1074, 0xe95d, 0x7d40, 0x4840, 0x4b32, 0xc813, 0x0, 0x0);
        gbc.writeMem(0x1074, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xe95d, gbc.sp());
        EXPECT(0x1076, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00C0
        gbc.setState(0xb245, 0xd153, 0x8670, 0x84c8, 0x79af, 0xc2f2, 0x1, 0x0);
        gbc.writeMem(0xb245, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xd153, gbc.sp());
        EXPECT(0xb247, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb245));
        EXPECT(0x99, gbc.readMem(0xb246));
        // CB 99 00C1
        gbc.setState(0xa050, 0x16c, 0x2c0, 0x38f4, 0x5c84, 0xbbe0, 0x1, 0x1);
        gbc.writeMem(0xa050, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x16c, gbc.sp());
        EXPECT(0xa052, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa050));
        EXPECT(0x99, gbc.readMem(0xa051));
        // CB 99 00C2
        gbc.setState(0x5408, 0x33ec, 0x9200, 0x1bda, 0xd335, 0x5a1a, 0x1, 0x1);
        gbc.writeMem(0x5408, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x33ec, gbc.sp());
        EXPECT(0x540a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00C3
        gbc.setState(0x7406, 0xa62d, 0x74e0, 0xd9ec, 0x3294, 0x2e97, 0x1, 0x1);
        gbc.writeMem(0x7406, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xa62d, gbc.sp());
        EXPECT(0x7408, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00C4
        gbc.setState(0x8d33, 0x8, 0x36e0, 0x24e2, 0x7f5a, 0xac37, 0x0, 0x0);
        gbc.writeMem(0x8d33, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x8, gbc.sp());
        EXPECT(0x8d35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d33));
        EXPECT(0x99, gbc.readMem(0x8d34));
        // CB 99 00C5
        gbc.setState(0x8d85, 0x7d1f, 0x4af0, 0x523c, 0xe538, 0xb6bc, 0x0, 0x1);
        gbc.writeMem(0x8d85, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x7d1f, gbc.sp());
        EXPECT(0x8d87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d85));
        EXPECT(0x99, gbc.readMem(0x8d86));
        // CB 99 00C6
        gbc.setState(0x1220, 0xe821, 0x2530, 0xefd4, 0xa5c6, 0x744c, 0x0, 0x0);
        gbc.writeMem(0x1220, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xe821, gbc.sp());
        EXPECT(0x1222, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00C7
        gbc.setState(0x11a1, 0x1cc9, 0xf090, 0x417a, 0x222a, 0x296b, 0x1, 0x1);
        gbc.writeMem(0x11a1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x1cc9, gbc.sp());
        EXPECT(0x11a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00C8
        gbc.setState(0xedd9, 0xa0a1, 0xc160, 0x913a, 0x6bba, 0xfe6f, 0x1, 0x0);
        gbc.writeMem(0xedd9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xa0a1, gbc.sp());
        EXPECT(0xeddb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedd9));
        EXPECT(0x99, gbc.readMem(0xedda));
        // CB 99 00C9
        gbc.setState(0x111d, 0x10f5, 0x3f50, 0x3aee, 0x518e, 0x12fa, 0x0, 0x1);
        gbc.writeMem(0x111d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x10f5, gbc.sp());
        EXPECT(0x111f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00CA
        gbc.setState(0x8f1c, 0x7ab8, 0xb620, 0x31b4, 0x99b5, 0x8db9, 0x1, 0x1);
        gbc.writeMem(0x8f1c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x7ab8, gbc.sp());
        EXPECT(0x8f1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f1c));
        EXPECT(0x99, gbc.readMem(0x8f1d));
        // CB 99 00CB
        gbc.setState(0x20e1, 0xfbe0, 0xc970, 0xf38c, 0xba4f, 0x5f96, 0x0, 0x0);
        gbc.writeMem(0x20e1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xfbe0, gbc.sp());
        EXPECT(0x20e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00CC
        gbc.setState(0x5f08, 0x85af, 0x1450, 0x4ae9, 0xd821, 0xe172, 0x0, 0x0);
        gbc.writeMem(0x5f08, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x85af, gbc.sp());
        EXPECT(0x5f0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00CD
        gbc.setState(0x7f7c, 0x3e30, 0x8880, 0xba2f, 0xb622, 0x8a78, 0x1, 0x0);
        gbc.writeMem(0x7f7c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x3e30, gbc.sp());
        EXPECT(0x7f7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00CE
        gbc.setState(0x887f, 0xf3e9, 0xf340, 0x7841, 0x184a, 0x5fb, 0x0, 0x0);
        gbc.writeMem(0x887f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xf3e9, gbc.sp());
        EXPECT(0x8881, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x887f));
        EXPECT(0x99, gbc.readMem(0x8880));
        // CB 99 00CF
        gbc.setState(0xd62e, 0xb609, 0x2b60, 0x6477, 0x8f5a, 0xd2ab, 0x1, 0x1);
        gbc.writeMem(0xd62e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xb609, gbc.sp());
        EXPECT(0xd630, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd62e));
        EXPECT(0x99, gbc.readMem(0xd62f));
        // CB 99 00D0
        gbc.setState(0x6b0, 0x2ade, 0xb610, 0x28f3, 0x44b0, 0xc881, 0x0, 0x1);
        gbc.writeMem(0x6b0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x2ade, gbc.sp());
        EXPECT(0x6b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00D1
        gbc.setState(0x1adb, 0xb5ca, 0x66b0, 0x3121, 0xee62, 0xe0ff, 0x1, 0x0);
        gbc.writeMem(0x1adb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xb5ca, gbc.sp());
        EXPECT(0x1add, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00D2
        gbc.setState(0xa6f6, 0x9c70, 0xdca0, 0xea0b, 0xa035, 0xe690, 0x0, 0x0);
        gbc.writeMem(0xa6f6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x9c70, gbc.sp());
        EXPECT(0xa6f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6f6));
        EXPECT(0x99, gbc.readMem(0xa6f7));
        // CB 99 00D3
        gbc.setState(0xcb3b, 0xbf71, 0x2640, 0xf841, 0x22da, 0x6221, 0x0, 0x0);
        gbc.writeMem(0xcb3b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xbf71, gbc.sp());
        EXPECT(0xcb3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb3b));
        EXPECT(0x99, gbc.readMem(0xcb3c));
        // CB 99 00D4
        gbc.setState(0x533a, 0x9c4f, 0x4db0, 0x4789, 0x9331, 0xfab3, 0x0, 0x1);
        gbc.writeMem(0x533a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x9c4f, gbc.sp());
        EXPECT(0x533c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00D5
        gbc.setState(0x7707, 0xd152, 0x31e0, 0x1f9, 0x8cf7, 0x4b50, 0x0, 0x0);
        gbc.writeMem(0x7707, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xd152, gbc.sp());
        EXPECT(0x7709, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00D6
        gbc.setState(0x8ad0, 0x7bd1, 0xd00, 0xe2ab, 0x3607, 0x86d2, 0x1, 0x1);
        gbc.writeMem(0x8ad0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x7bd1, gbc.sp());
        EXPECT(0x8ad2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ad0));
        EXPECT(0x99, gbc.readMem(0x8ad1));
        // CB 99 00D7
        gbc.setState(0xe90f, 0xba15, 0x2710, 0x1348, 0xf27c, 0xd946, 0x1, 0x1);
        gbc.writeMem(0xe90f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xba15, gbc.sp());
        EXPECT(0xe911, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe90f));
        EXPECT(0x99, gbc.readMem(0xe910));
        // CB 99 00D8
        gbc.setState(0xea9a, 0xecaf, 0x9a10, 0x959, 0x70a9, 0x42be, 0x1, 0x1);
        gbc.writeMem(0xea9a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xecaf, gbc.sp());
        EXPECT(0xea9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea9a));
        EXPECT(0x99, gbc.readMem(0xea9b));
        // CB 99 00D9
        gbc.setState(0x50cf, 0x1927, 0x1250, 0xdfed, 0x592, 0xa993, 0x1, 0x1);
        gbc.writeMem(0x50cf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x1927, gbc.sp());
        EXPECT(0x50d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00DA
        gbc.setState(0xef65, 0x2554, 0xeb80, 0xb363, 0xb1ff, 0x3f1f, 0x1, 0x1);
        gbc.writeMem(0xef65, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x2554, gbc.sp());
        EXPECT(0xef67, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef65));
        EXPECT(0x99, gbc.readMem(0xef66));
        // CB 99 00DB
        gbc.setState(0xbf3a, 0x5df7, 0x9b80, 0xe7ac, 0x8f4b, 0x602f, 0x1, 0x1);
        gbc.writeMem(0xbf3a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x5df7, gbc.sp());
        EXPECT(0xbf3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf3a));
        EXPECT(0x99, gbc.readMem(0xbf3b));
        // CB 99 00DC
        gbc.setState(0xda47, 0x85bb, 0xf950, 0x309, 0x6633, 0xc7ef, 0x1, 0x1);
        gbc.writeMem(0xda47, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x85bb, gbc.sp());
        EXPECT(0xda49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda47));
        EXPECT(0x99, gbc.readMem(0xda48));
        // CB 99 00DD
        gbc.setState(0xd19d, 0xbfc9, 0xd8d0, 0x12bd, 0xc152, 0x1eb6, 0x1, 0x1);
        gbc.writeMem(0xd19d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xbfc9, gbc.sp());
        EXPECT(0xd19f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd19d));
        EXPECT(0x99, gbc.readMem(0xd19e));
        // CB 99 00DE
        gbc.setState(0x50d8, 0x5eae, 0x670, 0xf84c, 0x1b61, 0xfc54, 0x1, 0x1);
        gbc.writeMem(0x50d8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x5eae, gbc.sp());
        EXPECT(0x50da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00E0
        gbc.setState(0x7899, 0xf607, 0x2f0, 0x8e1, 0x631d, 0x7d96, 0x0, 0x0);
        gbc.writeMem(0x7899, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xf607, gbc.sp());
        EXPECT(0x789b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00E1
        gbc.setState(0xb6b0, 0x4a3b, 0x58c0, 0x1837, 0x51bd, 0x424, 0x0, 0x0);
        gbc.writeMem(0xb6b0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x4a3b, gbc.sp());
        EXPECT(0xb6b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6b0));
        EXPECT(0x99, gbc.readMem(0xb6b1));
        // CB 99 00E2
        gbc.setState(0xaaae, 0xaec, 0x9da0, 0x396, 0x5512, 0x2752, 0x0, 0x0);
        gbc.writeMem(0xaaae, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xaec, gbc.sp());
        EXPECT(0xaab0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaaae));
        EXPECT(0x99, gbc.readMem(0xaaaf));
        // CB 99 00E3
        gbc.setState(0x8f10, 0xb399, 0x5590, 0x41b6, 0xce83, 0xed69, 0x1, 0x1);
        gbc.writeMem(0x8f10, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xb399, gbc.sp());
        EXPECT(0x8f12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f10));
        EXPECT(0x99, gbc.readMem(0x8f11));
        // CB 99 00E4
        gbc.setState(0x55bb, 0x199c, 0x1010, 0xfa82, 0xd368, 0x63a1, 0x1, 0x0);
        gbc.writeMem(0x55bb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x199c, gbc.sp());
        EXPECT(0x55bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00E5
        gbc.setState(0x9256, 0x7571, 0x8e90, 0x6d7b, 0x2854, 0xa302, 0x1, 0x1);
        gbc.writeMem(0x9256, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x7571, gbc.sp());
        EXPECT(0x9258, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9256));
        EXPECT(0x99, gbc.readMem(0x9257));
        // CB 99 00E7
        gbc.setState(0xd77, 0x3b44, 0xbe40, 0xb79e, 0x37e, 0xa003, 0x1, 0x1);
        gbc.writeMem(0xd77, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x3b44, gbc.sp());
        EXPECT(0xd79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00E8
        gbc.setState(0xb0db, 0x2985, 0xc510, 0x1d8a, 0x5e90, 0x503, 0x1, 0x0);
        gbc.writeMem(0xb0db, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x2985, gbc.sp());
        EXPECT(0xb0dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0db));
        EXPECT(0x99, gbc.readMem(0xb0dc));
        // CB 99 00E9
        gbc.setState(0xe845, 0x3824, 0x8eb0, 0x712, 0xffae, 0x4bf6, 0x1, 0x1);
        gbc.writeMem(0xe845, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x3824, gbc.sp());
        EXPECT(0xe847, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe845));
        EXPECT(0x99, gbc.readMem(0xe846));
        // CB 99 00EA
        gbc.setState(0x8e4f, 0x2103, 0xde30, 0x233c, 0x143e, 0x9a26, 0x1, 0x1);
        gbc.writeMem(0x8e4f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x2103, gbc.sp());
        EXPECT(0x8e51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e4f));
        EXPECT(0x99, gbc.readMem(0x8e50));
        // CB 99 00EB
        gbc.setState(0x7cd9, 0xea19, 0x1520, 0xa81e, 0xe739, 0x9eda, 0x1, 0x1);
        gbc.writeMem(0x7cd9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xea19, gbc.sp());
        EXPECT(0x7cdb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00EC
        gbc.setState(0x2548, 0xabc4, 0x2060, 0x8b66, 0x4743, 0x1f38, 0x1, 0x0);
        gbc.writeMem(0x2548, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xabc4, gbc.sp());
        EXPECT(0x254a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00ED
        gbc.setState(0xa415, 0xb35, 0xa1b0, 0x98f1, 0x173a, 0x9375, 0x0, 0x1);
        gbc.writeMem(0xa415, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xb35, gbc.sp());
        EXPECT(0xa417, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa415));
        EXPECT(0x99, gbc.readMem(0xa416));
        // CB 99 00EE
        gbc.setState(0xe2a2, 0x9b50, 0xeaa0, 0x6ea4, 0x421b, 0x7f17, 0x1, 0x1);
        gbc.writeMem(0xe2a2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x9b50, gbc.sp());
        EXPECT(0xe2a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2a2));
        EXPECT(0x99, gbc.readMem(0xe2a3));
        // CB 99 00EF
        gbc.setState(0x15cd, 0x1a16, 0x80b0, 0x35a, 0x8816, 0xa85d, 0x1, 0x0);
        gbc.writeMem(0x15cd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x1a16, gbc.sp());
        EXPECT(0x15cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00F0
        gbc.setState(0x416a, 0x7874, 0x50d0, 0xdc62, 0x2717, 0x7da6, 0x0, 0x1);
        gbc.writeMem(0x416a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x7874, gbc.sp());
        EXPECT(0x416c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00F1
        gbc.setState(0x392b, 0xbdf9, 0xa690, 0x942c, 0x2d98, 0xac9f, 0x0, 0x0);
        gbc.writeMem(0x392b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xbdf9, gbc.sp());
        EXPECT(0x392d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00F2
        gbc.setState(0xceb0, 0xa378, 0x1800, 0x2d0, 0x3935, 0x28cc, 0x0, 0x0);
        gbc.writeMem(0xceb0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xa378, gbc.sp());
        EXPECT(0xceb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xceb0));
        EXPECT(0x99, gbc.readMem(0xceb1));
        // CB 99 00F3
        gbc.setState(0x252a, 0xcea6, 0x6fa0, 0xe242, 0x95cb, 0xc120, 0x0, 0x1);
        gbc.writeMem(0x252a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xcea6, gbc.sp());
        EXPECT(0x252c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00F4
        gbc.setState(0x5729, 0x4b4d, 0x180, 0xcc6b, 0xbd76, 0x895c, 0x0, 0x0);
        gbc.writeMem(0x5729, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x4b4d, gbc.sp());
        EXPECT(0x572b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00F5
        gbc.setState(0x4103, 0xe2aa, 0xfce0, 0x82aa, 0xe289, 0x8664, 0x1, 0x1);
        gbc.writeMem(0x4103, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xe2aa, gbc.sp());
        EXPECT(0x4105, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00F6
        gbc.setState(0xb5b0, 0x9dc3, 0xba60, 0x89c3, 0xc710, 0xabda, 0x0, 0x0);
        gbc.writeMem(0xb5b0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x9dc3, gbc.sp());
        EXPECT(0xb5b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5b0));
        EXPECT(0x99, gbc.readMem(0xb5b1));
        // CB 99 00F7
        gbc.setState(0x7220, 0x26fe, 0x7b00, 0x1874, 0xa99d, 0x8094, 0x0, 0x1);
        gbc.writeMem(0x7220, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x26fe, gbc.sp());
        EXPECT(0x7222, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00F8
        gbc.setState(0x3686, 0x39ef, 0xda60, 0xaff8, 0xc715, 0x5a3e, 0x1, 0x1);
        gbc.writeMem(0x3686, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x39ef, gbc.sp());
        EXPECT(0x3688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00F9
        gbc.setState(0x553b, 0xebd5, 0x4800, 0xef58, 0x1097, 0x8ec1, 0x0, 0x1);
        gbc.writeMem(0x553b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xebd5, gbc.sp());
        EXPECT(0x553d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 00FA
        gbc.setState(0x2b4d, 0xc200, 0x7390, 0xe054, 0xe4be, 0x5b76, 0x0, 0x0);
        gbc.writeMem(0x2b4d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xc200, gbc.sp());
        EXPECT(0x2b4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 00FC
        gbc.setState(0xa499, 0xd1db, 0x9cb0, 0x241, 0x7548, 0x53a, 0x1, 0x0);
        gbc.writeMem(0xa499, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xd1db, gbc.sp());
        EXPECT(0xa49b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa499));
        EXPECT(0x99, gbc.readMem(0xa49a));
        // CB 99 00FD
        gbc.setState(0xcd8c, 0x5e91, 0xf220, 0xb62a, 0x6f4, 0xc971, 0x1, 0x0);
        gbc.writeMem(0xcd8c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x5e91, gbc.sp());
        EXPECT(0xcd8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd8c));
        EXPECT(0x99, gbc.readMem(0xcd8d));
        // CB 99 00FE
        gbc.setState(0x92c, 0xb12f, 0x3000, 0xeb64, 0x7a16, 0x44bb, 0x0, 0x0);
        gbc.writeMem(0x92c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xb12f, gbc.sp());
        EXPECT(0x92e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0100
        gbc.setState(0xe52f, 0x2a36, 0xfc70, 0x9bb1, 0x4e32, 0x75b7, 0x0, 0x1);
        gbc.writeMem(0xe52f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x2a36, gbc.sp());
        EXPECT(0xe531, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe52f));
        EXPECT(0x99, gbc.readMem(0xe530));
        // CB 99 0101
        gbc.setState(0x8b46, 0x14fb, 0xaa80, 0xafe4, 0xb3c9, 0xd921, 0x0, 0x0);
        gbc.writeMem(0x8b46, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x14fb, gbc.sp());
        EXPECT(0x8b48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b46));
        EXPECT(0x99, gbc.readMem(0x8b47));
        // CB 99 0102
        gbc.setState(0x671e, 0xb25b, 0x78c0, 0x46c, 0xd83f, 0xcd2c, 0x1, 0x1);
        gbc.writeMem(0x671e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xb25b, gbc.sp());
        EXPECT(0x6720, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0103
        gbc.setState(0xe5c9, 0xae96, 0xae60, 0xe00b, 0x52ba, 0x5a17, 0x0, 0x0);
        gbc.writeMem(0xe5c9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xae96, gbc.sp());
        EXPECT(0xe5cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5c9));
        EXPECT(0x99, gbc.readMem(0xe5ca));
        // CB 99 0104
        gbc.setState(0xb7ae, 0x2588, 0x6040, 0xe2b2, 0x47da, 0x7cc1, 0x1, 0x0);
        gbc.writeMem(0xb7ae, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x2588, gbc.sp());
        EXPECT(0xb7b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7ae));
        EXPECT(0x99, gbc.readMem(0xb7af));
        // CB 99 0105
        gbc.setState(0xbf03, 0xa9a5, 0x9e70, 0x558d, 0x7236, 0xe19d, 0x0, 0x1);
        gbc.writeMem(0xbf03, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xa9a5, gbc.sp());
        EXPECT(0xbf05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf03));
        EXPECT(0x99, gbc.readMem(0xbf04));
        // CB 99 0106
        gbc.setState(0x4335, 0x29a0, 0xc5e0, 0x2c0b, 0xeb44, 0x2592, 0x0, 0x0);
        gbc.writeMem(0x4335, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x29a0, gbc.sp());
        EXPECT(0x4337, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0107
        gbc.setState(0xddf9, 0x17d0, 0x4d60, 0x9cf4, 0xf013, 0x41d5, 0x1, 0x0);
        gbc.writeMem(0xddf9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x17d0, gbc.sp());
        EXPECT(0xddfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddf9));
        EXPECT(0x99, gbc.readMem(0xddfa));
        // CB 99 0109
        gbc.setState(0xa56b, 0x11f3, 0x8da0, 0x3936, 0x2be4, 0x1b6b, 0x1, 0x1);
        gbc.writeMem(0xa56b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x11f3, gbc.sp());
        EXPECT(0xa56d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa56b));
        EXPECT(0x99, gbc.readMem(0xa56c));
        // CB 99 010A
        gbc.setState(0x5644, 0xf998, 0x800, 0x1de2, 0x3503, 0x27b4, 0x0, 0x0);
        gbc.writeMem(0x5644, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xf998, gbc.sp());
        EXPECT(0x5646, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 010B
        gbc.setState(0x24d0, 0xbf20, 0xc050, 0x3da, 0x4fe3, 0xe382, 0x1, 0x0);
        gbc.writeMem(0x24d0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xbf20, gbc.sp());
        EXPECT(0x24d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 010C
        gbc.setState(0x59e7, 0x7cdf, 0xc4e0, 0x4c81, 0xcd6, 0xa246, 0x0, 0x0);
        gbc.writeMem(0x59e7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x7cdf, gbc.sp());
        EXPECT(0x59e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 010D
        gbc.setState(0x127b, 0x16ff, 0x8090, 0xff5b, 0xde94, 0x9d7f, 0x0, 0x1);
        gbc.writeMem(0x127b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x16ff, gbc.sp());
        EXPECT(0x127d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 010E
        gbc.setState(0xc8ea, 0x9f6d, 0xa790, 0xc94c, 0x2d35, 0x58dc, 0x0, 0x0);
        gbc.writeMem(0xc8ea, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x9f6d, gbc.sp());
        EXPECT(0xc8ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8ea));
        EXPECT(0x99, gbc.readMem(0xc8eb));
        // CB 99 010F
        gbc.setState(0x7a66, 0x42ad, 0x7c90, 0xcded, 0x55ca, 0xf84b, 0x0, 0x0);
        gbc.writeMem(0x7a66, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x42ad, gbc.sp());
        EXPECT(0x7a68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0110
        gbc.setState(0xb0cb, 0x6b28, 0x5340, 0x4dbe, 0x6a80, 0x4bf1, 0x0, 0x1);
        gbc.writeMem(0xb0cb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x6b28, gbc.sp());
        EXPECT(0xb0cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0cb));
        EXPECT(0x99, gbc.readMem(0xb0cc));
        // CB 99 0111
        gbc.setState(0x5a11, 0xdc40, 0x9a30, 0x9d14, 0x6a2e, 0xe335, 0x1, 0x0);
        gbc.writeMem(0x5a11, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xdc40, gbc.sp());
        EXPECT(0x5a13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0112
        gbc.setState(0x6d88, 0x8437, 0x29c0, 0xb315, 0xee87, 0x9a12, 0x1, 0x0);
        gbc.writeMem(0x6d88, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x8437, gbc.sp());
        EXPECT(0x6d8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0113
        gbc.setState(0xebc4, 0x1079, 0x59c0, 0x3a7f, 0x42f0, 0xdfcf, 0x1, 0x1);
        gbc.writeMem(0xebc4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x1079, gbc.sp());
        EXPECT(0xebc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebc4));
        EXPECT(0x99, gbc.readMem(0xebc5));
        // CB 99 0114
        gbc.setState(0x2f79, 0x1f9e, 0xbbf0, 0xd9fb, 0x6c41, 0xc972, 0x1, 0x1);
        gbc.writeMem(0x2f79, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x1f9e, gbc.sp());
        EXPECT(0x2f7b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0115
        gbc.setState(0xeb53, 0x52aa, 0xc10, 0x5b09, 0xa794, 0xfea3, 0x1, 0x0);
        gbc.writeMem(0xeb53, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x52aa, gbc.sp());
        EXPECT(0xeb55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb53));
        EXPECT(0x99, gbc.readMem(0xeb54));
        // CB 99 0116
        gbc.setState(0xaffb, 0x9395, 0x3530, 0x88e6, 0xd966, 0x7d41, 0x1, 0x1);
        gbc.writeMem(0xaffb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x9395, gbc.sp());
        EXPECT(0xaffd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaffb));
        EXPECT(0x99, gbc.readMem(0xaffc));
        // CB 99 0117
        gbc.setState(0x1c3a, 0xb456, 0x4ed0, 0x8215, 0xe84e, 0xbc31, 0x0, 0x0);
        gbc.writeMem(0x1c3a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xb456, gbc.sp());
        EXPECT(0x1c3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0118
        gbc.setState(0x9c67, 0xbac1, 0x4d00, 0x7a9a, 0xb7, 0xbf8a, 0x0, 0x0);
        gbc.writeMem(0x9c67, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xbac1, gbc.sp());
        EXPECT(0x9c69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c67));
        EXPECT(0x99, gbc.readMem(0x9c68));
        // CB 99 0119
        gbc.setState(0xab38, 0xd4da, 0xd400, 0x1f87, 0x8aa2, 0x1c49, 0x0, 0x0);
        gbc.writeMem(0xab38, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xd4da, gbc.sp());
        EXPECT(0xab3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab38));
        EXPECT(0x99, gbc.readMem(0xab39));
        // CB 99 011A
        gbc.setState(0xaa68, 0xe5e9, 0x7c70, 0xe52f, 0x5fe2, 0x90eb, 0x0, 0x1);
        gbc.writeMem(0xaa68, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xe5e9, gbc.sp());
        EXPECT(0xaa6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa68));
        EXPECT(0x99, gbc.readMem(0xaa69));
        // CB 99 011B
        gbc.setState(0xcb5b, 0x169e, 0xd500, 0xa81b, 0xca01, 0xd801, 0x1, 0x1);
        gbc.writeMem(0xcb5b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x169e, gbc.sp());
        EXPECT(0xcb5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb5b));
        EXPECT(0x99, gbc.readMem(0xcb5c));
        // CB 99 011C
        gbc.setState(0xa3a6, 0xa880, 0x6a20, 0xc1c4, 0xc455, 0x3ab5, 0x1, 0x1);
        gbc.writeMem(0xa3a6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xa880, gbc.sp());
        EXPECT(0xa3a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3a6));
        EXPECT(0x99, gbc.readMem(0xa3a7));
        // CB 99 011D
        gbc.setState(0x705a, 0x30f, 0x1920, 0x1b34, 0x9464, 0xad6, 0x1, 0x1);
        gbc.writeMem(0x705a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x30f, gbc.sp());
        EXPECT(0x705c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 011E
        gbc.setState(0x50f8, 0x6e7c, 0x6280, 0x6e66, 0x4156, 0x8ef4, 0x0, 0x1);
        gbc.writeMem(0x50f8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x6e7c, gbc.sp());
        EXPECT(0x50fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 011F
        gbc.setState(0xc537, 0x33ad, 0x5570, 0x9119, 0xa4f3, 0x10e3, 0x1, 0x0);
        gbc.writeMem(0xc537, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x33ad, gbc.sp());
        EXPECT(0xc539, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc537));
        EXPECT(0x99, gbc.readMem(0xc538));
        // CB 99 0120
        gbc.setState(0xc98, 0xb100, 0xde50, 0xe17c, 0x7d09, 0x7318, 0x1, 0x0);
        gbc.writeMem(0xc98, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xb100, gbc.sp());
        EXPECT(0xc9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0121
        gbc.setState(0xcd1b, 0xcc87, 0x84f0, 0x3cd, 0x1e, 0x146d, 0x1, 0x1);
        gbc.writeMem(0xcd1b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xcc87, gbc.sp());
        EXPECT(0xcd1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd1b));
        EXPECT(0x99, gbc.readMem(0xcd1c));
        // CB 99 0122
        gbc.setState(0x8dae, 0xb8ed, 0xd610, 0x71c8, 0xdece, 0x1b42, 0x1, 0x1);
        gbc.writeMem(0x8dae, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xb8ed, gbc.sp());
        EXPECT(0x8db0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dae));
        EXPECT(0x99, gbc.readMem(0x8daf));
        // CB 99 0123
        gbc.setState(0x1cc1, 0x4904, 0xa60, 0xe2ec, 0xf4f5, 0x6db0, 0x0, 0x1);
        gbc.writeMem(0x1cc1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x4904, gbc.sp());
        EXPECT(0x1cc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0124
        gbc.setState(0xe0e5, 0x867, 0x440, 0xad1, 0x6086, 0x61f5, 0x1, 0x1);
        gbc.writeMem(0xe0e5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x867, gbc.sp());
        EXPECT(0xe0e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0e5));
        EXPECT(0x99, gbc.readMem(0xe0e6));
        // CB 99 0125
        gbc.setState(0x1dc6, 0x2b1b, 0x69d0, 0x3348, 0xd343, 0x27ad, 0x0, 0x0);
        gbc.writeMem(0x1dc6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x2b1b, gbc.sp());
        EXPECT(0x1dc8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0126
        gbc.setState(0xcd86, 0xefa6, 0x9bc0, 0x8954, 0xc95f, 0x9aa0, 0x1, 0x1);
        gbc.writeMem(0xcd86, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xefa6, gbc.sp());
        EXPECT(0xcd88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd86));
        EXPECT(0x99, gbc.readMem(0xcd87));
        // CB 99 0127
        gbc.setState(0x16bc, 0x11f, 0x6c80, 0x988b, 0x1cc7, 0x755e, 0x1, 0x0);
        gbc.writeMem(0x16bc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x11f, gbc.sp());
        EXPECT(0x16be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0128
        gbc.setState(0x2228, 0xb5cb, 0x3e20, 0x2bfb, 0xf50d, 0xd0c0, 0x0, 0x0);
        gbc.writeMem(0x2228, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xb5cb, gbc.sp());
        EXPECT(0x222a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 012A
        gbc.setState(0x930c, 0x14e3, 0x52a0, 0xc1eb, 0x5650, 0x24d7, 0x0, 0x0);
        gbc.writeMem(0x930c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x14e3, gbc.sp());
        EXPECT(0x930e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x930c));
        EXPECT(0x99, gbc.readMem(0x930d));
        // CB 99 012C
        gbc.setState(0xaff5, 0x9e06, 0x6190, 0xbd29, 0x556c, 0xa43d, 0x0, 0x1);
        gbc.writeMem(0xaff5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x9e06, gbc.sp());
        EXPECT(0xaff7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaff5));
        EXPECT(0x99, gbc.readMem(0xaff6));
        // CB 99 012D
        gbc.setState(0x9fe7, 0x5938, 0x64a0, 0xbc51, 0xe150, 0xde79, 0x1, 0x1);
        gbc.writeMem(0x9fe7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x5938, gbc.sp());
        EXPECT(0x9fe9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fe7));
        EXPECT(0x99, gbc.readMem(0x9fe8));
        // CB 99 012E
        gbc.setState(0x3a32, 0x5f8c, 0x5580, 0xf02a, 0x2a1b, 0xf410, 0x0, 0x1);
        gbc.writeMem(0x3a32, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x5f8c, gbc.sp());
        EXPECT(0x3a34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 012F
        gbc.setState(0x216c, 0x80cb, 0xd070, 0xbb71, 0xd36f, 0x71a7, 0x0, 0x0);
        gbc.writeMem(0x216c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x80cb, gbc.sp());
        EXPECT(0x216e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0130
        gbc.setState(0xedb9, 0x72d6, 0xe5c0, 0x244e, 0x9dc4, 0x3d96, 0x0, 0x1);
        gbc.writeMem(0xedb9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x72d6, gbc.sp());
        EXPECT(0xedbb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedb9));
        EXPECT(0x99, gbc.readMem(0xedba));
        // CB 99 0131
        gbc.setState(0x8f64, 0x4308, 0x3400, 0x77e2, 0xf9d9, 0x9627, 0x1, 0x1);
        gbc.writeMem(0x8f64, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x4308, gbc.sp());
        EXPECT(0x8f66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f64));
        EXPECT(0x99, gbc.readMem(0x8f65));
        // CB 99 0132
        gbc.setState(0x4193, 0xd090, 0xa4c0, 0x68cc, 0x4f7, 0x5dc2, 0x1, 0x0);
        gbc.writeMem(0x4193, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xd090, gbc.sp());
        EXPECT(0x4195, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0133
        gbc.setState(0xc1a1, 0x6952, 0x1e30, 0x8c50, 0x9a79, 0xe05b, 0x1, 0x1);
        gbc.writeMem(0xc1a1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x6952, gbc.sp());
        EXPECT(0xc1a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1a1));
        EXPECT(0x99, gbc.readMem(0xc1a2));
        // CB 99 0134
        gbc.setState(0xdb9a, 0x132, 0xc650, 0x9031, 0xe3f3, 0x9498, 0x0, 0x0);
        gbc.writeMem(0xdb9a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x132, gbc.sp());
        EXPECT(0xdb9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb9a));
        EXPECT(0x99, gbc.readMem(0xdb9b));
        // CB 99 0136
        gbc.setState(0xa47, 0x785a, 0x70e0, 0xe936, 0x8166, 0xc114, 0x1, 0x1);
        gbc.writeMem(0xa47, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x785a, gbc.sp());
        EXPECT(0xa49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0137
        gbc.setState(0x7a08, 0xe96a, 0x5dd0, 0xdac6, 0x5bbb, 0x370d, 0x1, 0x0);
        gbc.writeMem(0x7a08, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xe96a, gbc.sp());
        EXPECT(0x7a0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0138
        gbc.setState(0x8aa9, 0x4b55, 0xc0a0, 0xdc2f, 0xef8f, 0xb652, 0x0, 0x0);
        gbc.writeMem(0x8aa9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x4b55, gbc.sp());
        EXPECT(0x8aab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8aa9));
        EXPECT(0x99, gbc.readMem(0x8aaa));
        // CB 99 0139
        gbc.setState(0xd91c, 0x847e, 0x5bd0, 0x13e3, 0x9e97, 0x1b22, 0x1, 0x1);
        gbc.writeMem(0xd91c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x847e, gbc.sp());
        EXPECT(0xd91e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd91c));
        EXPECT(0x99, gbc.readMem(0xd91d));
        // CB 99 013A
        gbc.setState(0xcc70, 0x722a, 0x6510, 0x6eaa, 0xf476, 0x44df, 0x0, 0x0);
        gbc.writeMem(0xcc70, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x722a, gbc.sp());
        EXPECT(0xcc72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc70));
        EXPECT(0x99, gbc.readMem(0xcc71));
        // CB 99 013B
        gbc.setState(0x1d4b, 0x8694, 0xa650, 0x62fb, 0xf908, 0x674, 0x0, 0x0);
        gbc.writeMem(0x1d4b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x8694, gbc.sp());
        EXPECT(0x1d4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 013C
        gbc.setState(0x29fb, 0x6119, 0xe860, 0x6a44, 0xc0f3, 0x1b2, 0x0, 0x0);
        gbc.writeMem(0x29fb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x6119, gbc.sp());
        EXPECT(0x29fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 013D
        gbc.setState(0x1181, 0xbc31, 0xaee0, 0x602a, 0xad38, 0x4354, 0x1, 0x0);
        gbc.writeMem(0x1181, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xbc31, gbc.sp());
        EXPECT(0x1183, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 013E
        gbc.setState(0x4ca0, 0xf30a, 0xa980, 0x19c4, 0xd390, 0x112f, 0x0, 0x0);
        gbc.writeMem(0x4ca0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xf30a, gbc.sp());
        EXPECT(0x4ca2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0140
        gbc.setState(0xb7cf, 0xe2e, 0xbca0, 0x9f43, 0x3c3f, 0x99d8, 0x0, 0x1);
        gbc.writeMem(0xb7cf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xe2e, gbc.sp());
        EXPECT(0xb7d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7cf));
        EXPECT(0x99, gbc.readMem(0xb7d0));
        // CB 99 0141
        gbc.setState(0x5439, 0x130, 0x4440, 0x54ec, 0x59c0, 0x9643, 0x1, 0x1);
        gbc.writeMem(0x5439, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x130, gbc.sp());
        EXPECT(0x543b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0142
        gbc.setState(0x313b, 0xcc93, 0x64d0, 0x313a, 0xf219, 0x84bf, 0x1, 0x0);
        gbc.writeMem(0x313b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xcc93, gbc.sp());
        EXPECT(0x313d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0143
        gbc.setState(0x19a1, 0x1d5d, 0x6120, 0x9125, 0x64d9, 0x1f78, 0x1, 0x0);
        gbc.writeMem(0x19a1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x1d5d, gbc.sp());
        EXPECT(0x19a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0144
        gbc.setState(0xaf0e, 0xd67d, 0x8cd0, 0xabff, 0xa370, 0xe440, 0x0, 0x0);
        gbc.writeMem(0xaf0e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xd67d, gbc.sp());
        EXPECT(0xaf10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf0e));
        EXPECT(0x99, gbc.readMem(0xaf0f));
        // CB 99 0145
        gbc.setState(0x5d4d, 0xdbe5, 0xae80, 0x595a, 0xf4db, 0x6024, 0x0, 0x1);
        gbc.writeMem(0x5d4d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xdbe5, gbc.sp());
        EXPECT(0x5d4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0147
        gbc.setState(0xad22, 0xb41c, 0x5080, 0x4118, 0xd28e, 0x2957, 0x1, 0x0);
        gbc.writeMem(0xad22, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xb41c, gbc.sp());
        EXPECT(0xad24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad22));
        EXPECT(0x99, gbc.readMem(0xad23));
        // CB 99 0148
        gbc.setState(0x4cd1, 0x192d, 0x14b0, 0x65b2, 0x6f3, 0x79be, 0x1, 0x1);
        gbc.writeMem(0x4cd1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x192d, gbc.sp());
        EXPECT(0x4cd3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0149
        gbc.setState(0x700e, 0xc450, 0x5a90, 0x21a1, 0x8a1d, 0x31ad, 0x0, 0x1);
        gbc.writeMem(0x700e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xc450, gbc.sp());
        EXPECT(0x7010, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 014A
        gbc.setState(0x789f, 0xca30, 0x8980, 0x5527, 0x9af9, 0xb217, 0x0, 0x1);
        gbc.writeMem(0x789f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xca30, gbc.sp());
        EXPECT(0x78a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 014B
        gbc.setState(0xaa5, 0xd145, 0x12b0, 0xd19, 0xb257, 0xf834, 0x1, 0x1);
        gbc.writeMem(0xaa5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xd145, gbc.sp());
        EXPECT(0xaa7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 014C
        gbc.setState(0x2d3f, 0x17e4, 0x5330, 0x47c4, 0xd8fc, 0x9a89, 0x1, 0x1);
        gbc.writeMem(0x2d3f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x17e4, gbc.sp());
        EXPECT(0x2d41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 014D
        gbc.setState(0x5292, 0x118b, 0xca30, 0x6275, 0x8299, 0xa30, 0x0, 0x1);
        gbc.writeMem(0x5292, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x118b, gbc.sp());
        EXPECT(0x5294, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 014E
        gbc.setState(0x2ff8, 0xd98, 0xbca0, 0x3010, 0x5a93, 0xd00d, 0x1, 0x0);
        gbc.writeMem(0x2ff8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xd98, gbc.sp());
        EXPECT(0x2ffa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 014F
        gbc.setState(0xd6ee, 0x59f6, 0x55e0, 0xe7c8, 0xdf11, 0x2cee, 0x0, 0x1);
        gbc.writeMem(0xd6ee, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x59f6, gbc.sp());
        EXPECT(0xd6f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6ee));
        EXPECT(0x99, gbc.readMem(0xd6ef));
        // CB 99 0150
        gbc.setState(0x7700, 0xa544, 0x16a0, 0x9743, 0x8629, 0xc043, 0x1, 0x1);
        gbc.writeMem(0x7700, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xa544, gbc.sp());
        EXPECT(0x7702, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0151
        gbc.setState(0x8ba0, 0x152a, 0xc530, 0xd157, 0x3d1c, 0x2f1a, 0x1, 0x0);
        gbc.writeMem(0x8ba0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x152a, gbc.sp());
        EXPECT(0x8ba2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ba0));
        EXPECT(0x99, gbc.readMem(0x8ba1));
        // CB 99 0152
        gbc.setState(0x1170, 0xc00c, 0x5ee0, 0x6dc1, 0xacd9, 0xa1aa, 0x0, 0x1);
        gbc.writeMem(0x1170, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xc00c, gbc.sp());
        EXPECT(0x1172, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0153
        gbc.setState(0xccf2, 0xfd51, 0x31a0, 0xc28f, 0x312, 0x8ea, 0x0, 0x1);
        gbc.writeMem(0xccf2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xfd51, gbc.sp());
        EXPECT(0xccf4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccf2));
        EXPECT(0x99, gbc.readMem(0xccf3));
        // CB 99 0154
        gbc.setState(0xd107, 0xa381, 0xf6e0, 0xbc2, 0x36f, 0x873c, 0x0, 0x0);
        gbc.writeMem(0xd107, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xa381, gbc.sp());
        EXPECT(0xd109, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd107));
        EXPECT(0x99, gbc.readMem(0xd108));
        // CB 99 0155
        gbc.setState(0xcb22, 0xfb79, 0x5bf0, 0x3579, 0x37d2, 0x67c9, 0x1, 0x0);
        gbc.writeMem(0xcb22, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xfb79, gbc.sp());
        EXPECT(0xcb24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb22));
        EXPECT(0x99, gbc.readMem(0xcb23));
        // CB 99 0156
        gbc.setState(0xef8f, 0xe503, 0x2870, 0xef37, 0x64d2, 0x9239, 0x1, 0x0);
        gbc.writeMem(0xef8f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xe503, gbc.sp());
        EXPECT(0xef91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef8f));
        EXPECT(0x99, gbc.readMem(0xef90));
        // CB 99 0157
        gbc.setState(0xcb53, 0x6c40, 0x4800, 0xae8f, 0x92be, 0xfcc5, 0x0, 0x0);
        gbc.writeMem(0xcb53, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x6c40, gbc.sp());
        EXPECT(0xcb55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb53));
        EXPECT(0x99, gbc.readMem(0xcb54));
        // CB 99 0159
        gbc.setState(0xf60, 0x7e72, 0x6f00, 0x80b0, 0x7c43, 0xd93, 0x0, 0x1);
        gbc.writeMem(0xf60, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x7e72, gbc.sp());
        EXPECT(0xf62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 015A
        gbc.setState(0x5cfa, 0xb8cb, 0x4210, 0x315f, 0xf862, 0xb934, 0x1, 0x0);
        gbc.writeMem(0x5cfa, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xb8cb, gbc.sp());
        EXPECT(0x5cfc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 015B
        gbc.setState(0x1767, 0xbcf4, 0x3160, 0xf574, 0xec67, 0xef69, 0x1, 0x0);
        gbc.writeMem(0x1767, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xbcf4, gbc.sp());
        EXPECT(0x1769, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 015C
        gbc.setState(0x9d10, 0x4370, 0x8320, 0x223, 0x5e06, 0xb62, 0x1, 0x1);
        gbc.writeMem(0x9d10, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x4370, gbc.sp());
        EXPECT(0x9d12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d10));
        EXPECT(0x99, gbc.readMem(0x9d11));
        // CB 99 015D
        gbc.setState(0xd8dc, 0x9dbc, 0xcba0, 0x6849, 0xbf29, 0xe0fe, 0x0, 0x1);
        gbc.writeMem(0xd8dc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x9dbc, gbc.sp());
        EXPECT(0xd8de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8dc));
        EXPECT(0x99, gbc.readMem(0xd8dd));
        // CB 99 015E
        gbc.setState(0xeb56, 0x3f51, 0x8f20, 0xc197, 0xde79, 0x6ea6, 0x1, 0x1);
        gbc.writeMem(0xeb56, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x3f51, gbc.sp());
        EXPECT(0xeb58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb56));
        EXPECT(0x99, gbc.readMem(0xeb57));
        // CB 99 015F
        gbc.setState(0xbe02, 0x174d, 0x2e20, 0xa724, 0x3d5, 0xe669, 0x0, 0x0);
        gbc.writeMem(0xbe02, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x174d, gbc.sp());
        EXPECT(0xbe04, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe02));
        EXPECT(0x99, gbc.readMem(0xbe03));
        // CB 99 0160
        gbc.setState(0x10b, 0xcb85, 0x700, 0xda23, 0x847a, 0x152b, 0x1, 0x1);
        gbc.writeMem(0x10b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xcb85, gbc.sp());
        EXPECT(0x10d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0161
        gbc.setState(0xc784, 0x8807, 0x4a60, 0xea1e, 0x650d, 0xf493, 0x1, 0x1);
        gbc.writeMem(0xc784, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x8807, gbc.sp());
        EXPECT(0xc786, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc784));
        EXPECT(0x99, gbc.readMem(0xc785));
        // CB 99 0162
        gbc.setState(0xc5b9, 0x613e, 0xc7d0, 0xd179, 0xfcda, 0x1b35, 0x1, 0x1);
        gbc.writeMem(0xc5b9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x613e, gbc.sp());
        EXPECT(0xc5bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc5b9));
        EXPECT(0x99, gbc.readMem(0xc5ba));
        // CB 99 0163
        gbc.setState(0xa44b, 0xa666, 0x1340, 0x5813, 0x19a, 0xd150, 0x0, 0x1);
        gbc.writeMem(0xa44b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xa666, gbc.sp());
        EXPECT(0xa44d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa44b));
        EXPECT(0x99, gbc.readMem(0xa44c));
        // CB 99 0164
        gbc.setState(0x7cd5, 0xe2e3, 0x8280, 0x27c, 0x731f, 0x4ef3, 0x1, 0x1);
        gbc.writeMem(0x7cd5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xe2e3, gbc.sp());
        EXPECT(0x7cd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0165
        gbc.setState(0x3ca7, 0x996, 0x280, 0x8405, 0x67d9, 0xe5b0, 0x0, 0x0);
        gbc.writeMem(0x3ca7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x996, gbc.sp());
        EXPECT(0x3ca9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0166
        gbc.setState(0xe467, 0xf31, 0x21a0, 0x7f69, 0xc4e3, 0x9e0, 0x0, 0x0);
        gbc.writeMem(0xe467, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xf31, gbc.sp());
        EXPECT(0xe469, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe467));
        EXPECT(0x99, gbc.readMem(0xe468));
        // CB 99 0167
        gbc.setState(0xaa8b, 0x9293, 0x1490, 0x79ea, 0xcb34, 0xba08, 0x0, 0x0);
        gbc.writeMem(0xaa8b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x9293, gbc.sp());
        EXPECT(0xaa8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa8b));
        EXPECT(0x99, gbc.readMem(0xaa8c));
        // CB 99 0168
        gbc.setState(0x7e2f, 0xf419, 0xc9f0, 0x1954, 0x33f2, 0xc046, 0x1, 0x1);
        gbc.writeMem(0x7e2f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xf419, gbc.sp());
        EXPECT(0x7e31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0169
        gbc.setState(0x19cb, 0x9a6b, 0x4ed0, 0x2e3e, 0x281b, 0x8aef, 0x1, 0x1);
        gbc.writeMem(0x19cb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x9a6b, gbc.sp());
        EXPECT(0x19cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 016A
        gbc.setState(0x5223, 0x5461, 0xc80, 0x3e56, 0xec37, 0x2fb5, 0x1, 0x0);
        gbc.writeMem(0x5223, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x5461, gbc.sp());
        EXPECT(0x5225, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 016B
        gbc.setState(0xae3a, 0x3b1a, 0x8e60, 0xc770, 0xd15f, 0xee11, 0x1, 0x0);
        gbc.writeMem(0xae3a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x3b1a, gbc.sp());
        EXPECT(0xae3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae3a));
        EXPECT(0x99, gbc.readMem(0xae3b));
        // CB 99 016C
        gbc.setState(0xbd54, 0x8c, 0x6730, 0x6acc, 0x4eb6, 0x4e22, 0x1, 0x0);
        gbc.writeMem(0xbd54, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x8c, gbc.sp());
        EXPECT(0xbd56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd54));
        EXPECT(0x99, gbc.readMem(0xbd55));
        // CB 99 016D
        gbc.setState(0x334f, 0xd2d8, 0xf870, 0xecb4, 0x69e0, 0x8733, 0x0, 0x0);
        gbc.writeMem(0x334f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xd2d8, gbc.sp());
        EXPECT(0x3351, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 016E
        gbc.setState(0xc3ff, 0x4fc2, 0x78d0, 0xec8, 0xc4cd, 0x552, 0x1, 0x1);
        gbc.writeMem(0xc3ff, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x4fc2, gbc.sp());
        EXPECT(0xc401, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3ff));
        EXPECT(0x99, gbc.readMem(0xc400));
        // CB 99 016F
        gbc.setState(0x2374, 0x8, 0xdb10, 0x686f, 0x173b, 0xf0f8, 0x0, 0x0);
        gbc.writeMem(0x2374, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x8, gbc.sp());
        EXPECT(0x2376, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0170
        gbc.setState(0x82, 0xd15d, 0x5380, 0x9b7d, 0x473, 0x2793, 0x1, 0x0);
        gbc.writeMem(0x82, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xd15d, gbc.sp());
        EXPECT(0x84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0171
        gbc.setState(0xa68a, 0x7683, 0xf9c0, 0x8f0e, 0xc59d, 0x24cf, 0x0, 0x0);
        gbc.writeMem(0xa68a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x7683, gbc.sp());
        EXPECT(0xa68c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa68a));
        EXPECT(0x99, gbc.readMem(0xa68b));
        // CB 99 0172
        gbc.setState(0xd936, 0x6a80, 0x75e0, 0xa7b0, 0x42f4, 0x715e, 0x1, 0x0);
        gbc.writeMem(0xd936, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x6a80, gbc.sp());
        EXPECT(0xd938, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd936));
        EXPECT(0x99, gbc.readMem(0xd937));
        // CB 99 0173
        gbc.setState(0x6c72, 0x98fb, 0xc80, 0x2fda, 0x3033, 0x72c1, 0x1, 0x1);
        gbc.writeMem(0x6c72, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x98fb, gbc.sp());
        EXPECT(0x6c74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0174
        gbc.setState(0x9da2, 0x81c, 0xe440, 0x82db, 0xa422, 0xefea, 0x0, 0x0);
        gbc.writeMem(0x9da2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x81c, gbc.sp());
        EXPECT(0x9da4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9da2));
        EXPECT(0x99, gbc.readMem(0x9da3));
        // CB 99 0175
        gbc.setState(0xe47d, 0x4b21, 0x1fb0, 0x81, 0xf841, 0x94af, 0x1, 0x0);
        gbc.writeMem(0xe47d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x4b21, gbc.sp());
        EXPECT(0xe47f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe47d));
        EXPECT(0x99, gbc.readMem(0xe47e));
        // CB 99 0176
        gbc.setState(0xe906, 0xa6f0, 0x1210, 0xfe59, 0x256c, 0xff6b, 0x1, 0x0);
        gbc.writeMem(0xe906, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xa6f0, gbc.sp());
        EXPECT(0xe908, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe906));
        EXPECT(0x99, gbc.readMem(0xe907));
        // CB 99 0177
        gbc.setState(0xae6d, 0x1ead, 0x5f90, 0x28d3, 0x3844, 0xa665, 0x1, 0x1);
        gbc.writeMem(0xae6d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x1ead, gbc.sp());
        EXPECT(0xae6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae6d));
        EXPECT(0x99, gbc.readMem(0xae6e));
        // CB 99 0178
        gbc.setState(0xc638, 0xfc72, 0x6430, 0x8d2f, 0x2d6a, 0xc08c, 0x0, 0x0);
        gbc.writeMem(0xc638, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xfc72, gbc.sp());
        EXPECT(0xc63a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc638));
        EXPECT(0x99, gbc.readMem(0xc639));
        // CB 99 0179
        gbc.setState(0x53e6, 0x6fb2, 0xefb0, 0x735a, 0x877b, 0xe4ef, 0x1, 0x0);
        gbc.writeMem(0x53e6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x6fb2, gbc.sp());
        EXPECT(0x53e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 017A
        gbc.setState(0x1f59, 0x9b47, 0x9b20, 0xee64, 0x70bf, 0x22c1, 0x1, 0x0);
        gbc.writeMem(0x1f59, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x9b47, gbc.sp());
        EXPECT(0x1f5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 017B
        gbc.setState(0x4238, 0xdde4, 0x1340, 0xc315, 0x11a2, 0xe868, 0x1, 0x0);
        gbc.writeMem(0x4238, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xdde4, gbc.sp());
        EXPECT(0x423a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 017C
        gbc.setState(0x495d, 0x52f, 0xd4e0, 0xd9ed, 0x15c, 0xb18a, 0x1, 0x1);
        gbc.writeMem(0x495d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x52f, gbc.sp());
        EXPECT(0x495f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 017D
        gbc.setState(0xa34c, 0xd76e, 0x6ad0, 0x3607, 0xd1a5, 0xca31, 0x1, 0x0);
        gbc.writeMem(0xa34c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xd76e, gbc.sp());
        EXPECT(0xa34e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa34c));
        EXPECT(0x99, gbc.readMem(0xa34d));
        // CB 99 017E
        gbc.setState(0x9e97, 0x1316, 0x2bc0, 0x17d0, 0x7d53, 0xdff, 0x0, 0x0);
        gbc.writeMem(0x9e97, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x1316, gbc.sp());
        EXPECT(0x9e99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e97));
        EXPECT(0x99, gbc.readMem(0x9e98));
        // CB 99 017F
        gbc.setState(0xb9af, 0x81b2, 0x92c0, 0x1945, 0xfefb, 0xedaf, 0x1, 0x0);
        gbc.writeMem(0xb9af, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x81b2, gbc.sp());
        EXPECT(0xb9b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9af));
        EXPECT(0x99, gbc.readMem(0xb9b0));
        // CB 99 0180
        gbc.setState(0x351a, 0xbd47, 0x310, 0xac67, 0x5bae, 0xdfb9, 0x1, 0x1);
        gbc.writeMem(0x351a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xbd47, gbc.sp());
        EXPECT(0x351c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0181
        gbc.setState(0x4383, 0xc74f, 0x4240, 0x6940, 0x5019, 0x7205, 0x0, 0x1);
        gbc.writeMem(0x4383, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xc74f, gbc.sp());
        EXPECT(0x4385, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0182
        gbc.setState(0x787b, 0x7f16, 0x4160, 0xa846, 0x5f2c, 0x2745, 0x0, 0x0);
        gbc.writeMem(0x787b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x7f16, gbc.sp());
        EXPECT(0x787d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0184
        gbc.setState(0xd431, 0xc840, 0xc470, 0x7255, 0x6b5c, 0xffbe, 0x1, 0x0);
        gbc.writeMem(0xd431, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xc840, gbc.sp());
        EXPECT(0xd433, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd431));
        EXPECT(0x99, gbc.readMem(0xd432));
        // CB 99 0185
        gbc.setState(0xc6ac, 0x5f41, 0xd520, 0x1583, 0x48b8, 0x7ac2, 0x0, 0x0);
        gbc.writeMem(0xc6ac, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x5f41, gbc.sp());
        EXPECT(0xc6ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6ac));
        EXPECT(0x99, gbc.readMem(0xc6ad));
        // CB 99 0186
        gbc.setState(0x24a2, 0x7a53, 0xc740, 0x4109, 0x9a16, 0xd103, 0x0, 0x1);
        gbc.writeMem(0x24a2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x7a53, gbc.sp());
        EXPECT(0x24a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0187
        gbc.setState(0x7029, 0x18e9, 0x61f0, 0x6c5e, 0xc878, 0xdb66, 0x1, 0x0);
        gbc.writeMem(0x7029, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x18e9, gbc.sp());
        EXPECT(0x702b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0188
        gbc.setState(0x452b, 0x4e6f, 0x96b0, 0xec91, 0xe7cd, 0x273a, 0x1, 0x1);
        gbc.writeMem(0x452b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x4e6f, gbc.sp());
        EXPECT(0x452d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0189
        gbc.setState(0xc110, 0x25ff, 0xeb20, 0x80bd, 0x4014, 0xe636, 0x1, 0x0);
        gbc.writeMem(0xc110, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x25ff, gbc.sp());
        EXPECT(0xc112, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc110));
        EXPECT(0x99, gbc.readMem(0xc111));
        // CB 99 018A
        gbc.setState(0x30c1, 0x3284, 0x8590, 0xd450, 0x5b1c, 0xdb0e, 0x1, 0x1);
        gbc.writeMem(0x30c1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x3284, gbc.sp());
        EXPECT(0x30c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 018B
        gbc.setState(0xb3a9, 0x934c, 0x70d0, 0x52b6, 0xf6d1, 0x581, 0x1, 0x1);
        gbc.writeMem(0xb3a9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x934c, gbc.sp());
        EXPECT(0xb3ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3a9));
        EXPECT(0x99, gbc.readMem(0xb3aa));
        // CB 99 018C
        gbc.setState(0x3b36, 0xc10a, 0xddf0, 0x2cd8, 0xb184, 0xd0ab, 0x1, 0x0);
        gbc.writeMem(0x3b36, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xc10a, gbc.sp());
        EXPECT(0x3b38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 018D
        gbc.setState(0x114e, 0x8cfe, 0x42c0, 0xded, 0x6afe, 0x5197, 0x0, 0x0);
        gbc.writeMem(0x114e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x8cfe, gbc.sp());
        EXPECT(0x1150, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 018E
        gbc.setState(0x15e0, 0x4168, 0x3400, 0xc99e, 0x7f69, 0x6da1, 0x0, 0x1);
        gbc.writeMem(0x15e0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x4168, gbc.sp());
        EXPECT(0x15e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 018F
        gbc.setState(0x6f88, 0x2ebb, 0x3600, 0xc6cd, 0xd264, 0x6960, 0x0, 0x0);
        gbc.writeMem(0x6f88, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x2ebb, gbc.sp());
        EXPECT(0x6f8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0190
        gbc.setState(0xc0cc, 0x9eb6, 0x1db0, 0xc258, 0x715a, 0xadab, 0x1, 0x0);
        gbc.writeMem(0xc0cc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x9eb6, gbc.sp());
        EXPECT(0xc0ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0cc));
        EXPECT(0x99, gbc.readMem(0xc0cd));
        // CB 99 0191
        gbc.setState(0xcf8, 0x30f8, 0xf5a0, 0x2a7c, 0x2c64, 0xe235, 0x0, 0x0);
        gbc.writeMem(0xcf8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x30f8, gbc.sp());
        EXPECT(0xcfa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0192
        gbc.setState(0x8ee1, 0x71f3, 0x4490, 0xcfbd, 0xbd6a, 0x31ec, 0x1, 0x0);
        gbc.writeMem(0x8ee1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x71f3, gbc.sp());
        EXPECT(0x8ee3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ee1));
        EXPECT(0x99, gbc.readMem(0x8ee2));
        // CB 99 0193
        gbc.setState(0x3fc8, 0x41e9, 0xc4b0, 0x244f, 0xcf0b, 0x92e2, 0x0, 0x0);
        gbc.writeMem(0x3fc8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x41e9, gbc.sp());
        EXPECT(0x3fca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0194
        gbc.setState(0xa252, 0xdf41, 0xee70, 0xb895, 0x477d, 0x8185, 0x1, 0x0);
        gbc.writeMem(0xa252, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xdf41, gbc.sp());
        EXPECT(0xa254, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa252));
        EXPECT(0x99, gbc.readMem(0xa253));
        // CB 99 0195
        gbc.setState(0x5894, 0xd029, 0xcea0, 0x824a, 0xf66a, 0x2f72, 0x0, 0x1);
        gbc.writeMem(0x5894, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xd029, gbc.sp());
        EXPECT(0x5896, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0196
        gbc.setState(0x91a6, 0xbeda, 0xe630, 0x9d4f, 0x991, 0xeee0, 0x0, 0x1);
        gbc.writeMem(0x91a6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xbeda, gbc.sp());
        EXPECT(0x91a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91a6));
        EXPECT(0x99, gbc.readMem(0x91a7));
        // CB 99 0197
        gbc.setState(0x49be, 0xb7ab, 0xeef0, 0xb948, 0x847, 0xe623, 0x1, 0x0);
        gbc.writeMem(0x49be, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xb7ab, gbc.sp());
        EXPECT(0x49c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0198
        gbc.setState(0x9d2d, 0xd8f7, 0x430, 0x2a60, 0xc913, 0x1e63, 0x0, 0x0);
        gbc.writeMem(0x9d2d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xd8f7, gbc.sp());
        EXPECT(0x9d2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d2d));
        EXPECT(0x99, gbc.readMem(0x9d2e));
        // CB 99 0199
        gbc.setState(0xa900, 0xf1dc, 0x9d60, 0x630a, 0xf090, 0x1d3d, 0x0, 0x1);
        gbc.writeMem(0xa900, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xf1dc, gbc.sp());
        EXPECT(0xa902, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa900));
        EXPECT(0x99, gbc.readMem(0xa901));
        // CB 99 019A
        gbc.setState(0xad21, 0x49e7, 0x2450, 0xdb0, 0xeb22, 0x9a6c, 0x1, 0x0);
        gbc.writeMem(0xad21, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x49e7, gbc.sp());
        EXPECT(0xad23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad21));
        EXPECT(0x99, gbc.readMem(0xad22));
        // CB 99 019B
        gbc.setState(0x3285, 0x5982, 0xec10, 0xfa51, 0x8554, 0xf667, 0x0, 0x0);
        gbc.writeMem(0x3285, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x5982, gbc.sp());
        EXPECT(0x3287, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 019C
        gbc.setState(0x886c, 0xf392, 0xf60, 0x9c76, 0xa92d, 0x26c3, 0x1, 0x0);
        gbc.writeMem(0x886c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xf392, gbc.sp());
        EXPECT(0x886e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x886c));
        EXPECT(0x99, gbc.readMem(0x886d));
        // CB 99 019D
        gbc.setState(0x65ef, 0x9f40, 0x3040, 0xfe45, 0x75dc, 0x308b, 0x1, 0x1);
        gbc.writeMem(0x65ef, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x9f40, gbc.sp());
        EXPECT(0x65f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 019E
        gbc.setState(0xb64, 0x47eb, 0x18f0, 0x45f3, 0xaf5d, 0x97, 0x1, 0x0);
        gbc.writeMem(0xb64, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x47eb, gbc.sp());
        EXPECT(0xb66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 019F
        gbc.setState(0xa0c1, 0x5ae6, 0xc4d0, 0xfffc, 0x1fe9, 0x4b0e, 0x0, 0x0);
        gbc.writeMem(0xa0c1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x5ae6, gbc.sp());
        EXPECT(0xa0c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0c1));
        EXPECT(0x99, gbc.readMem(0xa0c2));
        // CB 99 01A0
        gbc.setState(0x22c9, 0x3fa4, 0x1720, 0xa5a1, 0x24c6, 0xed47, 0x0, 0x0);
        gbc.writeMem(0x22c9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x3fa4, gbc.sp());
        EXPECT(0x22cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01A1
        gbc.setState(0x1bdb, 0x6feb, 0xcee0, 0xc01a, 0x5894, 0xb3b7, 0x0, 0x1);
        gbc.writeMem(0x1bdb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x6feb, gbc.sp());
        EXPECT(0x1bdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01A2
        gbc.setState(0xae8e, 0x2a95, 0x200, 0x1d15, 0xc735, 0xf123, 0x0, 0x1);
        gbc.writeMem(0xae8e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x2a95, gbc.sp());
        EXPECT(0xae90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae8e));
        EXPECT(0x99, gbc.readMem(0xae8f));
        // CB 99 01A4
        gbc.setState(0xad81, 0x99db, 0x6f40, 0x955a, 0x6f80, 0x8ff5, 0x0, 0x1);
        gbc.writeMem(0xad81, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x99db, gbc.sp());
        EXPECT(0xad83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad81));
        EXPECT(0x99, gbc.readMem(0xad82));
        // CB 99 01A5
        gbc.setState(0xb2b0, 0x44da, 0x4220, 0xb40c, 0x918, 0xece8, 0x1, 0x0);
        gbc.writeMem(0xb2b0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x44da, gbc.sp());
        EXPECT(0xb2b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2b0));
        EXPECT(0x99, gbc.readMem(0xb2b1));
        // CB 99 01A6
        gbc.setState(0xec2c, 0xc7c7, 0xaf40, 0xc039, 0x577d, 0x731, 0x0, 0x1);
        gbc.writeMem(0xec2c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xc7c7, gbc.sp());
        EXPECT(0xec2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec2c));
        EXPECT(0x99, gbc.readMem(0xec2d));
        // CB 99 01A7
        gbc.setState(0x264c, 0xd588, 0x5fb0, 0x2f47, 0x70b, 0x8f0d, 0x0, 0x1);
        gbc.writeMem(0x264c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xd588, gbc.sp());
        EXPECT(0x264e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01A8
        gbc.setState(0x948a, 0xf51f, 0xce60, 0xb32a, 0x169a, 0xe374, 0x0, 0x0);
        gbc.writeMem(0x948a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xf51f, gbc.sp());
        EXPECT(0x948c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x948a));
        EXPECT(0x99, gbc.readMem(0x948b));
        // CB 99 01A9
        gbc.setState(0xc4bd, 0x56a2, 0xddc0, 0x2363, 0x42e6, 0x8efe, 0x0, 0x1);
        gbc.writeMem(0xc4bd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x56a2, gbc.sp());
        EXPECT(0xc4bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4bd));
        EXPECT(0x99, gbc.readMem(0xc4be));
        // CB 99 01AB
        gbc.setState(0x5372, 0xd272, 0xb910, 0x93af, 0x8f7c, 0x1eed, 0x0, 0x0);
        gbc.writeMem(0x5372, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xd272, gbc.sp());
        EXPECT(0x5374, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01AC
        gbc.setState(0xa816, 0xb2bb, 0xd1a0, 0x8524, 0xfce2, 0x6c94, 0x0, 0x1);
        gbc.writeMem(0xa816, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xb2bb, gbc.sp());
        EXPECT(0xa818, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa816));
        EXPECT(0x99, gbc.readMem(0xa817));
        // CB 99 01AE
        gbc.setState(0xccfc, 0x2f8f, 0x6e00, 0xa29, 0xa3b6, 0xde96, 0x1, 0x1);
        gbc.writeMem(0xccfc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x2f8f, gbc.sp());
        EXPECT(0xccfe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccfc));
        EXPECT(0x99, gbc.readMem(0xccfd));
        // CB 99 01AF
        gbc.setState(0xba8c, 0x2edd, 0x8260, 0x28e0, 0x3c9c, 0x4095, 0x0, 0x1);
        gbc.writeMem(0xba8c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x2edd, gbc.sp());
        EXPECT(0xba8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba8c));
        EXPECT(0x99, gbc.readMem(0xba8d));
        // CB 99 01B0
        gbc.setState(0xbc0f, 0x45fe, 0xb060, 0x8e12, 0x76e5, 0xb145, 0x1, 0x1);
        gbc.writeMem(0xbc0f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x45fe, gbc.sp());
        EXPECT(0xbc11, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc0f));
        EXPECT(0x99, gbc.readMem(0xbc10));
        // CB 99 01B1
        gbc.setState(0xb33e, 0xcb61, 0x3bd0, 0x32e7, 0xf999, 0xda72, 0x0, 0x1);
        gbc.writeMem(0xb33e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xcb61, gbc.sp());
        EXPECT(0xb340, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb33e));
        EXPECT(0x99, gbc.readMem(0xb33f));
        // CB 99 01B2
        gbc.setState(0x1a61, 0x926, 0x7310, 0xd92c, 0xdcee, 0xcfa9, 0x1, 0x0);
        gbc.writeMem(0x1a61, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x926, gbc.sp());
        EXPECT(0x1a63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01B3
        gbc.setState(0x8445, 0xea99, 0x1520, 0x897d, 0xb7b5, 0x534b, 0x0, 0x1);
        gbc.writeMem(0x8445, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xea99, gbc.sp());
        EXPECT(0x8447, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8445));
        EXPECT(0x99, gbc.readMem(0x8446));
        // CB 99 01B4
        gbc.setState(0xad3b, 0x6c29, 0x1380, 0x911a, 0x60e3, 0xe7e3, 0x0, 0x0);
        gbc.writeMem(0xad3b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x6c29, gbc.sp());
        EXPECT(0xad3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad3b));
        EXPECT(0x99, gbc.readMem(0xad3c));
        // CB 99 01B5
        gbc.setState(0x3271, 0xeae3, 0x7390, 0xdc9b, 0xfbf4, 0xb9ea, 0x0, 0x1);
        gbc.writeMem(0x3271, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xeae3, gbc.sp());
        EXPECT(0x3273, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01B6
        gbc.setState(0xe599, 0x8050, 0xee20, 0xde31, 0x2737, 0x1fca, 0x0, 0x0);
        gbc.writeMem(0xe599, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x8050, gbc.sp());
        EXPECT(0xe59b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe599));
        EXPECT(0x99, gbc.readMem(0xe59a));
        // CB 99 01B7
        gbc.setState(0x5480, 0xe278, 0x8150, 0x2f94, 0x7787, 0x25c3, 0x1, 0x0);
        gbc.writeMem(0x5480, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xe278, gbc.sp());
        EXPECT(0x5482, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01B8
        gbc.setState(0xc6b3, 0x12ca, 0xb480, 0xb66a, 0x416a, 0x2b2c, 0x0, 0x1);
        gbc.writeMem(0xc6b3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x12ca, gbc.sp());
        EXPECT(0xc6b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6b3));
        EXPECT(0x99, gbc.readMem(0xc6b4));
        // CB 99 01B9
        gbc.setState(0x6b5c, 0x3a4a, 0x1e50, 0xc428, 0x928, 0xcc52, 0x1, 0x1);
        gbc.writeMem(0x6b5c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x3a4a, gbc.sp());
        EXPECT(0x6b5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01BA
        gbc.setState(0x82b3, 0xf530, 0xd0b0, 0x6c33, 0x1d33, 0x8612, 0x0, 0x1);
        gbc.writeMem(0x82b3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xf530, gbc.sp());
        EXPECT(0x82b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82b3));
        EXPECT(0x99, gbc.readMem(0x82b4));
        // CB 99 01BB
        gbc.setState(0x1b0e, 0x1725, 0x6d30, 0x211a, 0xb6c0, 0x8f3e, 0x0, 0x0);
        gbc.writeMem(0x1b0e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x1725, gbc.sp());
        EXPECT(0x1b10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01BC
        gbc.setState(0x8ff5, 0xe2af, 0x3bc0, 0x2627, 0x148f, 0x2a76, 0x0, 0x0);
        gbc.writeMem(0x8ff5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xe2af, gbc.sp());
        EXPECT(0x8ff7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ff5));
        EXPECT(0x99, gbc.readMem(0x8ff6));
        // CB 99 01BD
        gbc.setState(0xc017, 0xb59c, 0x3e90, 0x1553, 0xe510, 0x30dd, 0x0, 0x1);
        gbc.writeMem(0xc017, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xb59c, gbc.sp());
        EXPECT(0xc019, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc017));
        EXPECT(0x99, gbc.readMem(0xc018));
        // CB 99 01BE
        gbc.setState(0xcea0, 0x1935, 0xdbb0, 0x108, 0xf441, 0xa07e, 0x1, 0x0);
        gbc.writeMem(0xcea0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x1935, gbc.sp());
        EXPECT(0xcea2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcea0));
        EXPECT(0x99, gbc.readMem(0xcea1));
        // CB 99 01BF
        gbc.setState(0x70ef, 0x78b2, 0x3fd0, 0x891a, 0xeed5, 0xbd05, 0x1, 0x1);
        gbc.writeMem(0x70ef, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x78b2, gbc.sp());
        EXPECT(0x70f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01C0
        gbc.setState(0xea7f, 0x2942, 0x81c0, 0xa985, 0x5a44, 0x1e7a, 0x0, 0x1);
        gbc.writeMem(0xea7f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x2942, gbc.sp());
        EXPECT(0xea81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea7f));
        EXPECT(0x99, gbc.readMem(0xea80));
        // CB 99 01C1
        gbc.setState(0x2878, 0x7f2c, 0xffa0, 0xa29b, 0x556f, 0x4cd3, 0x1, 0x0);
        gbc.writeMem(0x2878, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x7f2c, gbc.sp());
        EXPECT(0x287a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01C2
        gbc.setState(0x81b5, 0xf296, 0x2890, 0xbfb5, 0x107b, 0x9ad5, 0x0, 0x0);
        gbc.writeMem(0x81b5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xf296, gbc.sp());
        EXPECT(0x81b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81b5));
        EXPECT(0x99, gbc.readMem(0x81b6));
        // CB 99 01C3
        gbc.setState(0xe6bf, 0x1411, 0xddd0, 0x3f14, 0xb5cb, 0x4dde, 0x0, 0x0);
        gbc.writeMem(0xe6bf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x1411, gbc.sp());
        EXPECT(0xe6c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6bf));
        EXPECT(0x99, gbc.readMem(0xe6c0));
        // CB 99 01C4
        gbc.setState(0x33a6, 0xd1da, 0x55e0, 0x202, 0xad, 0xa257, 0x0, 0x1);
        gbc.writeMem(0x33a6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xd1da, gbc.sp());
        EXPECT(0x33a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01C5
        gbc.setState(0x57c, 0x9fd1, 0xbad0, 0xad03, 0xa81e, 0xb525, 0x0, 0x0);
        gbc.writeMem(0x57c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x9fd1, gbc.sp());
        EXPECT(0x57e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01C6
        gbc.setState(0x861a, 0xad57, 0xbc70, 0x81fd, 0x6100, 0x5f52, 0x0, 0x0);
        gbc.writeMem(0x861a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xad57, gbc.sp());
        EXPECT(0x861c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x861a));
        EXPECT(0x99, gbc.readMem(0x861b));
        // CB 99 01C7
        gbc.setState(0x8efa, 0x588d, 0x9a50, 0x8991, 0x195, 0xd90e, 0x0, 0x0);
        gbc.writeMem(0x8efa, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x588d, gbc.sp());
        EXPECT(0x8efc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8efa));
        EXPECT(0x99, gbc.readMem(0x8efb));
        // CB 99 01C8
        gbc.setState(0xea4d, 0xcdcb, 0x70b0, 0xe1c0, 0x9276, 0x4529, 0x0, 0x1);
        gbc.writeMem(0xea4d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xcdcb, gbc.sp());
        EXPECT(0xea4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea4d));
        EXPECT(0x99, gbc.readMem(0xea4e));
        // CB 99 01C9
        gbc.setState(0xb400, 0x5de6, 0x81c0, 0x36e9, 0xf489, 0x5144, 0x0, 0x1);
        gbc.writeMem(0xb400, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x5de6, gbc.sp());
        EXPECT(0xb402, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb400));
        EXPECT(0x99, gbc.readMem(0xb401));
        // CB 99 01CA
        gbc.setState(0xe2d, 0xe17d, 0xd840, 0xbebc, 0xee66, 0x4155, 0x0, 0x0);
        gbc.writeMem(0xe2d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xe17d, gbc.sp());
        EXPECT(0xe2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01CB
        gbc.setState(0x4bd7, 0xb655, 0xc50, 0xd643, 0x740d, 0x807e, 0x1, 0x1);
        gbc.writeMem(0x4bd7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xb655, gbc.sp());
        EXPECT(0x4bd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01CC
        gbc.setState(0x679a, 0xe3c8, 0x43b0, 0x5fae, 0x9f6e, 0x5e8, 0x0, 0x0);
        gbc.writeMem(0x679a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xe3c8, gbc.sp());
        EXPECT(0x679c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01CD
        gbc.setState(0x8b05, 0xeea8, 0xdc80, 0xf365, 0xea20, 0x7616, 0x1, 0x1);
        gbc.writeMem(0x8b05, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xeea8, gbc.sp());
        EXPECT(0x8b07, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b05));
        EXPECT(0x99, gbc.readMem(0x8b06));
        // CB 99 01CE
        gbc.setState(0x96cb, 0x9e48, 0x1530, 0x12bf, 0xdee6, 0x15ff, 0x0, 0x0);
        gbc.writeMem(0x96cb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x9e48, gbc.sp());
        EXPECT(0x96cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96cb));
        EXPECT(0x99, gbc.readMem(0x96cc));
        // CB 99 01D0
        gbc.setState(0x257d, 0x3deb, 0xf460, 0xa3a0, 0x2ea2, 0xa1ed, 0x1, 0x1);
        gbc.writeMem(0x257d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x3deb, gbc.sp());
        EXPECT(0x257f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01D1
        gbc.setState(0x83a0, 0x9e44, 0xb930, 0x853, 0x5d17, 0x6eea, 0x1, 0x0);
        gbc.writeMem(0x83a0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x9e44, gbc.sp());
        EXPECT(0x83a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83a0));
        EXPECT(0x99, gbc.readMem(0x83a1));
        // CB 99 01D2
        gbc.setState(0x89cf, 0xa4e8, 0xf2b0, 0xffa8, 0x628e, 0x949c, 0x1, 0x1);
        gbc.writeMem(0x89cf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xa4e8, gbc.sp());
        EXPECT(0x89d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89cf));
        EXPECT(0x99, gbc.readMem(0x89d0));
        // CB 99 01D3
        gbc.setState(0x685e, 0x49b4, 0x4770, 0x6c43, 0x2d5b, 0x9b60, 0x1, 0x1);
        gbc.writeMem(0x685e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x49b4, gbc.sp());
        EXPECT(0x6860, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01D4
        gbc.setState(0xd38a, 0x8bb2, 0x3800, 0xdac0, 0x4a4c, 0xf3bc, 0x1, 0x1);
        gbc.writeMem(0xd38a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x8bb2, gbc.sp());
        EXPECT(0xd38c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd38a));
        EXPECT(0x99, gbc.readMem(0xd38b));
        // CB 99 01D5
        gbc.setState(0x6c4b, 0x8f88, 0xffb0, 0x93ce, 0xc5ea, 0x9923, 0x0, 0x1);
        gbc.writeMem(0x6c4b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x8f88, gbc.sp());
        EXPECT(0x6c4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01D6
        gbc.setState(0xdb5f, 0x1b1d, 0xa30, 0x5a82, 0xcd4e, 0x3dd2, 0x1, 0x0);
        gbc.writeMem(0xdb5f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x1b1d, gbc.sp());
        EXPECT(0xdb61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb5f));
        EXPECT(0x99, gbc.readMem(0xdb60));
        // CB 99 01D7
        gbc.setState(0x1d9a, 0x7daa, 0x8720, 0xf294, 0x443f, 0x8c2e, 0x0, 0x0);
        gbc.writeMem(0x1d9a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x7daa, gbc.sp());
        EXPECT(0x1d9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01D8
        gbc.setState(0x6356, 0xd07a, 0xf2c0, 0x7818, 0x53e6, 0x796b, 0x0, 0x1);
        gbc.writeMem(0x6356, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xd07a, gbc.sp());
        EXPECT(0x6358, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01D9
        gbc.setState(0x7eec, 0x1065, 0xd6d0, 0x6e5b, 0x949, 0x1f1c, 0x0, 0x0);
        gbc.writeMem(0x7eec, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x1065, gbc.sp());
        EXPECT(0x7eee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01DA
        gbc.setState(0xc1fa, 0x152a, 0xfaa0, 0x642d, 0x4680, 0xc105, 0x1, 0x1);
        gbc.writeMem(0xc1fa, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x152a, gbc.sp());
        EXPECT(0xc1fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1fa));
        EXPECT(0x99, gbc.readMem(0xc1fb));
        // CB 99 01DB
        gbc.setState(0x38c1, 0xc775, 0xf7a0, 0x3a20, 0xfd6d, 0xe49f, 0x0, 0x1);
        gbc.writeMem(0x38c1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xc775, gbc.sp());
        EXPECT(0x38c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01DC
        gbc.setState(0x7a00, 0xc470, 0x88d0, 0xcafe, 0x7e75, 0x8a5f, 0x1, 0x0);
        gbc.writeMem(0x7a00, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xc470, gbc.sp());
        EXPECT(0x7a02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01DD
        gbc.setState(0x9bb7, 0xabb, 0x13f0, 0xca0, 0xe3dd, 0xbfb2, 0x1, 0x1);
        gbc.writeMem(0x9bb7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xabb, gbc.sp());
        EXPECT(0x9bb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bb7));
        EXPECT(0x99, gbc.readMem(0x9bb8));
        // CB 99 01DE
        gbc.setState(0x956c, 0x6204, 0xa050, 0xa10b, 0x57b3, 0x1dea, 0x0, 0x1);
        gbc.writeMem(0x956c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x6204, gbc.sp());
        EXPECT(0x956e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x956c));
        EXPECT(0x99, gbc.readMem(0x956d));
        // CB 99 01DF
        gbc.setState(0xde4e, 0xc1e1, 0xe3a0, 0x5d63, 0x6d8f, 0x951d, 0x1, 0x1);
        gbc.writeMem(0xde4e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xc1e1, gbc.sp());
        EXPECT(0xde50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde4e));
        EXPECT(0x99, gbc.readMem(0xde4f));
        // CB 99 01E0
        gbc.setState(0xa6cd, 0x9e15, 0x6c50, 0x10a3, 0xf63c, 0xfc8d, 0x0, 0x0);
        gbc.writeMem(0xa6cd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x9e15, gbc.sp());
        EXPECT(0xa6cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6cd));
        EXPECT(0x99, gbc.readMem(0xa6ce));
        // CB 99 01E1
        gbc.setState(0xe356, 0x8526, 0x6210, 0x92de, 0x3480, 0x869e, 0x0, 0x0);
        gbc.writeMem(0xe356, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x8526, gbc.sp());
        EXPECT(0xe358, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe356));
        EXPECT(0x99, gbc.readMem(0xe357));
        // CB 99 01E2
        gbc.setState(0x373b, 0x9608, 0x57f0, 0x51ed, 0x90c5, 0x367b, 0x0, 0x1);
        gbc.writeMem(0x373b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x9608, gbc.sp());
        EXPECT(0x373d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01E3
        gbc.setState(0x6a00, 0xc2b, 0xe820, 0x86e9, 0x956a, 0x290a, 0x1, 0x0);
        gbc.writeMem(0x6a00, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xc2b, gbc.sp());
        EXPECT(0x6a02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01E4
        gbc.setState(0xba4f, 0xeaa4, 0x70a0, 0x7b5a, 0x7b1b, 0x583d, 0x1, 0x0);
        gbc.writeMem(0xba4f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xeaa4, gbc.sp());
        EXPECT(0xba51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba4f));
        EXPECT(0x99, gbc.readMem(0xba50));
        // CB 99 01E5
        gbc.setState(0xa2ca, 0x71c2, 0x4c80, 0x45b4, 0x3784, 0x1600, 0x1, 0x1);
        gbc.writeMem(0xa2ca, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x71c2, gbc.sp());
        EXPECT(0xa2cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2ca));
        EXPECT(0x99, gbc.readMem(0xa2cb));
        // CB 99 01E6
        gbc.setState(0x5b56, 0xde96, 0xb5f0, 0x66df, 0x72b1, 0x989e, 0x1, 0x0);
        gbc.writeMem(0x5b56, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xde96, gbc.sp());
        EXPECT(0x5b58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01E8
        gbc.setState(0x7a20, 0x7775, 0xad80, 0x3074, 0x15c2, 0xc3ba, 0x1, 0x1);
        gbc.writeMem(0x7a20, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x7775, gbc.sp());
        EXPECT(0x7a22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01EA
        gbc.setState(0xaa6, 0x3acd, 0x7fe0, 0x7e2d, 0xaec2, 0x30f7, 0x0, 0x0);
        gbc.writeMem(0xaa6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x3acd, gbc.sp());
        EXPECT(0xaa8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01EB
        gbc.setState(0xba98, 0xa33b, 0x19d0, 0xb6, 0x613b, 0x95a6, 0x0, 0x1);
        gbc.writeMem(0xba98, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xa33b, gbc.sp());
        EXPECT(0xba9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba98));
        EXPECT(0x99, gbc.readMem(0xba99));
        // CB 99 01EC
        gbc.setState(0xa20a, 0x7b97, 0xb010, 0x9251, 0x370a, 0x677, 0x1, 0x0);
        gbc.writeMem(0xa20a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x7b97, gbc.sp());
        EXPECT(0xa20c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa20a));
        EXPECT(0x99, gbc.readMem(0xa20b));
        // CB 99 01ED
        gbc.setState(0x5ee3, 0xa7e2, 0xa130, 0xa83b, 0x65ee, 0x708f, 0x0, 0x0);
        gbc.writeMem(0x5ee3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xa7e2, gbc.sp());
        EXPECT(0x5ee5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01EE
        gbc.setState(0x1bc5, 0x1426, 0xf230, 0x9095, 0xc8d3, 0x2263, 0x0, 0x1);
        gbc.writeMem(0x1bc5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x1426, gbc.sp());
        EXPECT(0x1bc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01EF
        gbc.setState(0xc19d, 0x5916, 0x75c0, 0xc160, 0x1924, 0x2491, 0x0, 0x1);
        gbc.writeMem(0xc19d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x5916, gbc.sp());
        EXPECT(0xc19f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc19d));
        EXPECT(0x99, gbc.readMem(0xc19e));
        // CB 99 01F0
        gbc.setState(0x14ad, 0x9d3, 0x8ca0, 0xef33, 0xa49e, 0xf269, 0x0, 0x1);
        gbc.writeMem(0x14ad, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x9d3, gbc.sp());
        EXPECT(0x14af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01F1
        gbc.setState(0xab78, 0xbc45, 0x82c0, 0xb90b, 0x7171, 0x491, 0x0, 0x1);
        gbc.writeMem(0xab78, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xbc45, gbc.sp());
        EXPECT(0xab7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab78));
        EXPECT(0x99, gbc.readMem(0xab79));
        // CB 99 01F2
        gbc.setState(0xa7c9, 0x33c, 0xd9b0, 0x618f, 0x5061, 0x4f37, 0x1, 0x0);
        gbc.writeMem(0xa7c9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x33c, gbc.sp());
        EXPECT(0xa7cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7c9));
        EXPECT(0x99, gbc.readMem(0xa7ca));
        // CB 99 01F3
        gbc.setState(0x7f9a, 0x710, 0xf760, 0xacc4, 0x32b1, 0x2c60, 0x1, 0x1);
        gbc.writeMem(0x7f9a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x710, gbc.sp());
        EXPECT(0x7f9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01F4
        gbc.setState(0xa19f, 0xa332, 0xf6c0, 0x9601, 0xff4, 0x6a87, 0x1, 0x0);
        gbc.writeMem(0xa19f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xa332, gbc.sp());
        EXPECT(0xa1a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa19f));
        EXPECT(0x99, gbc.readMem(0xa1a0));
        // CB 99 01F5
        gbc.setState(0xc4fe, 0xf967, 0xb0e0, 0xaee7, 0x33a4, 0x2fc0, 0x1, 0x1);
        gbc.writeMem(0xc4fe, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xf967, gbc.sp());
        EXPECT(0xc500, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4fe));
        EXPECT(0x99, gbc.readMem(0xc4ff));
        // CB 99 01F6
        gbc.setState(0x3a7f, 0xb28a, 0xdeb0, 0x2432, 0x2175, 0x2032, 0x0, 0x0);
        gbc.writeMem(0x3a7f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xb28a, gbc.sp());
        EXPECT(0x3a81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01F7
        gbc.setState(0x5fc9, 0x7db5, 0xa510, 0xf1d0, 0x8199, 0x2a8d, 0x1, 0x0);
        gbc.writeMem(0x5fc9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x7db5, gbc.sp());
        EXPECT(0x5fcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01F8
        gbc.setState(0x2e1b, 0x5d60, 0x9370, 0x4eda, 0x4097, 0x4ca, 0x0, 0x0);
        gbc.writeMem(0x2e1b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x5d60, gbc.sp());
        EXPECT(0x2e1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01F9
        gbc.setState(0x1d59, 0x3fd3, 0x68a0, 0x880a, 0xe17b, 0xf223, 0x0, 0x0);
        gbc.writeMem(0x1d59, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x3fd3, gbc.sp());
        EXPECT(0x1d5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01FA
        gbc.setState(0x71a8, 0x501e, 0x170, 0x5fba, 0x681f, 0xd32d, 0x0, 0x0);
        gbc.writeMem(0x71a8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x501e, gbc.sp());
        EXPECT(0x71aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01FB
        gbc.setState(0x25b7, 0xca2c, 0x7670, 0x645a, 0xedc7, 0x6a85, 0x0, 0x0);
        gbc.writeMem(0x25b7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xca2c, gbc.sp());
        EXPECT(0x25b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01FC
        gbc.setState(0xdb98, 0x1e50, 0xc3e0, 0xc9c6, 0xe898, 0xc630, 0x0, 0x0);
        gbc.writeMem(0xdb98, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x1e50, gbc.sp());
        EXPECT(0xdb9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb98));
        EXPECT(0x99, gbc.readMem(0xdb99));
        // CB 99 01FD
        gbc.setState(0xc66, 0xae4d, 0xed60, 0xbc9, 0xbe36, 0xcb66, 0x1, 0x1);
        gbc.writeMem(0xc66, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xae4d, gbc.sp());
        EXPECT(0xc68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 01FE
        gbc.setState(0x8, 0xbc37, 0x6270, 0xe1f3, 0xcc15, 0x8915, 0x1, 0x0);
        gbc.writeMem(0x8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xbc37, gbc.sp());
        EXPECT(0xa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 01FF
        gbc.setState(0x1078, 0xaf94, 0x9ad0, 0x3b83, 0x73e7, 0xb7d2, 0x1, 0x0);
        gbc.writeMem(0x1078, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xaf94, gbc.sp());
        EXPECT(0x107a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0200
        gbc.setState(0x6517, 0xd52b, 0x1710, 0x29a7, 0x4a8d, 0xf245, 0x0, 0x0);
        gbc.writeMem(0x6517, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xd52b, gbc.sp());
        EXPECT(0x6519, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0201
        gbc.setState(0x4a3e, 0x8d21, 0x8d10, 0xc3af, 0x91d6, 0x2b1b, 0x0, 0x1);
        gbc.writeMem(0x4a3e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x8d21, gbc.sp());
        EXPECT(0x4a40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0203
        gbc.setState(0xc570, 0x41de, 0x4a10, 0x2cb1, 0x9b07, 0xc60, 0x0, 0x0);
        gbc.writeMem(0xc570, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x41de, gbc.sp());
        EXPECT(0xc572, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc570));
        EXPECT(0x99, gbc.readMem(0xc571));
        // CB 99 0204
        gbc.setState(0x1307, 0x2b9f, 0x3af0, 0xbd63, 0x5e0a, 0x129, 0x1, 0x0);
        gbc.writeMem(0x1307, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x2b9f, gbc.sp());
        EXPECT(0x1309, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0205
        gbc.setState(0xade8, 0x236a, 0x5a90, 0xba41, 0x9d45, 0x2077, 0x0, 0x0);
        gbc.writeMem(0xade8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x236a, gbc.sp());
        EXPECT(0xadea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xade8));
        EXPECT(0x99, gbc.readMem(0xade9));
        // CB 99 0206
        gbc.setState(0x5130, 0xc9f2, 0x5650, 0x9b2e, 0x7283, 0xbb6a, 0x1, 0x1);
        gbc.writeMem(0x5130, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xc9f2, gbc.sp());
        EXPECT(0x5132, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0207
        gbc.setState(0x652a, 0x1a24, 0xeb50, 0x96bb, 0xf747, 0x2c6e, 0x0, 0x0);
        gbc.writeMem(0x652a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x1a24, gbc.sp());
        EXPECT(0x652c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0208
        gbc.setState(0xc470, 0x23bd, 0x3840, 0x59ba, 0x6e57, 0xdb70, 0x0, 0x1);
        gbc.writeMem(0xc470, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x23bd, gbc.sp());
        EXPECT(0xc472, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc470));
        EXPECT(0x99, gbc.readMem(0xc471));
        // CB 99 0209
        gbc.setState(0x48ed, 0x6024, 0x18b0, 0xe0b3, 0xa7f9, 0xe372, 0x0, 0x1);
        gbc.writeMem(0x48ed, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x6024, gbc.sp());
        EXPECT(0x48ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 020A
        gbc.setState(0xbe9c, 0x95a, 0x4f30, 0xf4cb, 0x5a7c, 0xd6e4, 0x1, 0x0);
        gbc.writeMem(0xbe9c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x95a, gbc.sp());
        EXPECT(0xbe9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe9c));
        EXPECT(0x99, gbc.readMem(0xbe9d));
        // CB 99 020B
        gbc.setState(0x2df, 0x6bc5, 0xa730, 0x111d, 0x64cd, 0x5f0d, 0x0, 0x1);
        gbc.writeMem(0x2df, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x6bc5, gbc.sp());
        EXPECT(0x2e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 020C
        gbc.setState(0x1196, 0x99ad, 0x53b0, 0xa422, 0xd0b6, 0x47f8, 0x0, 0x1);
        gbc.writeMem(0x1196, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x99ad, gbc.sp());
        EXPECT(0x1198, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 020D
        gbc.setState(0x975e, 0xc74e, 0x1da0, 0xab4b, 0xb77c, 0x6ea9, 0x1, 0x0);
        gbc.writeMem(0x975e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xc74e, gbc.sp());
        EXPECT(0x9760, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x975e));
        EXPECT(0x99, gbc.readMem(0x975f));
        // CB 99 020E
        gbc.setState(0x2312, 0x5eda, 0x8ac0, 0xd956, 0xa6b6, 0x3ac2, 0x0, 0x0);
        gbc.writeMem(0x2312, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x5eda, gbc.sp());
        EXPECT(0x2314, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 020F
        gbc.setState(0x4f18, 0x2446, 0xf950, 0x2fec, 0x5632, 0x53d4, 0x0, 0x0);
        gbc.writeMem(0x4f18, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x2446, gbc.sp());
        EXPECT(0x4f1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0210
        gbc.setState(0xd7d5, 0x7dd6, 0x4da0, 0x9160, 0x10d7, 0x1b08, 0x1, 0x0);
        gbc.writeMem(0xd7d5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x7dd6, gbc.sp());
        EXPECT(0xd7d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7d5));
        EXPECT(0x99, gbc.readMem(0xd7d6));
        // CB 99 0211
        gbc.setState(0xe6da, 0x766a, 0xf4f0, 0xc788, 0x1704, 0x6d78, 0x0, 0x1);
        gbc.writeMem(0xe6da, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x766a, gbc.sp());
        EXPECT(0xe6dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6da));
        EXPECT(0x99, gbc.readMem(0xe6db));
        // CB 99 0212
        gbc.setState(0x720b, 0x6257, 0x4160, 0x74e9, 0xd776, 0x79bf, 0x1, 0x1);
        gbc.writeMem(0x720b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x6257, gbc.sp());
        EXPECT(0x720d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0213
        gbc.setState(0x6461, 0xd182, 0xc2a0, 0x58b9, 0xf998, 0x2ecb, 0x1, 0x0);
        gbc.writeMem(0x6461, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xd182, gbc.sp());
        EXPECT(0x6463, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0214
        gbc.setState(0x92fa, 0xc887, 0xf910, 0x2701, 0x7d1, 0x36c6, 0x1, 0x0);
        gbc.writeMem(0x92fa, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xc887, gbc.sp());
        EXPECT(0x92fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92fa));
        EXPECT(0x99, gbc.readMem(0x92fb));
        // CB 99 0215
        gbc.setState(0xa520, 0x1680, 0xbc80, 0x3c67, 0x8a4f, 0xbceb, 0x0, 0x0);
        gbc.writeMem(0xa520, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x1680, gbc.sp());
        EXPECT(0xa522, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa520));
        EXPECT(0x99, gbc.readMem(0xa521));
        // CB 99 0216
        gbc.setState(0x908c, 0x6bc3, 0x49b0, 0x2ff0, 0xb523, 0x6529, 0x1, 0x1);
        gbc.writeMem(0x908c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x6bc3, gbc.sp());
        EXPECT(0x908e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x908c));
        EXPECT(0x99, gbc.readMem(0x908d));
        // CB 99 0217
        gbc.setState(0x7d34, 0x3d34, 0xfc10, 0xb52b, 0x2001, 0x2f6c, 0x0, 0x1);
        gbc.writeMem(0x7d34, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x3d34, gbc.sp());
        EXPECT(0x7d36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0218
        gbc.setState(0xb371, 0xf81, 0x9ba0, 0xd86c, 0xb71a, 0x6f87, 0x0, 0x0);
        gbc.writeMem(0xb371, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xf81, gbc.sp());
        EXPECT(0xb373, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb371));
        EXPECT(0x99, gbc.readMem(0xb372));
        // CB 99 0219
        gbc.setState(0xa6df, 0x4491, 0x63d0, 0xdf66, 0x924b, 0x7758, 0x0, 0x1);
        gbc.writeMem(0xa6df, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x4491, gbc.sp());
        EXPECT(0xa6e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6df));
        EXPECT(0x99, gbc.readMem(0xa6e0));
        // CB 99 021A
        gbc.setState(0xcaed, 0xeb71, 0xbcf0, 0x9964, 0x774b, 0x3c49, 0x1, 0x1);
        gbc.writeMem(0xcaed, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xeb71, gbc.sp());
        EXPECT(0xcaef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaed));
        EXPECT(0x99, gbc.readMem(0xcaee));
        // CB 99 021B
        gbc.setState(0x78a4, 0xdd18, 0x6560, 0xfc0c, 0x396, 0x9fe9, 0x0, 0x0);
        gbc.writeMem(0x78a4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xdd18, gbc.sp());
        EXPECT(0x78a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 021C
        gbc.setState(0xc871, 0xd1c4, 0xce20, 0xe8bd, 0x8e48, 0x9037, 0x1, 0x1);
        gbc.writeMem(0xc871, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xd1c4, gbc.sp());
        EXPECT(0xc873, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc871));
        EXPECT(0x99, gbc.readMem(0xc872));
        // CB 99 021D
        gbc.setState(0x5b43, 0x9144, 0x3270, 0x2fa3, 0x8e87, 0xa6a7, 0x0, 0x0);
        gbc.writeMem(0x5b43, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x9144, gbc.sp());
        EXPECT(0x5b45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 021E
        gbc.setState(0xe2b9, 0x4451, 0xe060, 0x7dda, 0x5e86, 0x8344, 0x1, 0x1);
        gbc.writeMem(0xe2b9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x4451, gbc.sp());
        EXPECT(0xe2bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2b9));
        EXPECT(0x99, gbc.readMem(0xe2ba));
        // CB 99 021F
        gbc.setState(0xee6d, 0x5023, 0xc650, 0x8dff, 0xf9f2, 0x997c, 0x1, 0x1);
        gbc.writeMem(0xee6d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x5023, gbc.sp());
        EXPECT(0xee6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee6d));
        EXPECT(0x99, gbc.readMem(0xee6e));
        // CB 99 0220
        gbc.setState(0xe0f6, 0xe9bd, 0x7750, 0x484e, 0xcde8, 0xcb0, 0x0, 0x0);
        gbc.writeMem(0xe0f6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xe9bd, gbc.sp());
        EXPECT(0xe0f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0f6));
        EXPECT(0x99, gbc.readMem(0xe0f7));
        // CB 99 0221
        gbc.setState(0x7e85, 0xe6ff, 0x7470, 0xfd3a, 0xad54, 0x37e9, 0x0, 0x0);
        gbc.writeMem(0x7e85, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xe6ff, gbc.sp());
        EXPECT(0x7e87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0222
        gbc.setState(0x3a25, 0x1fdd, 0x6a80, 0x76fa, 0x264, 0xa4b0, 0x1, 0x1);
        gbc.writeMem(0x3a25, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x1fdd, gbc.sp());
        EXPECT(0x3a27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0223
        gbc.setState(0xef0f, 0xd422, 0xba90, 0x2a19, 0x70fc, 0xf0d, 0x0, 0x1);
        gbc.writeMem(0xef0f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xd422, gbc.sp());
        EXPECT(0xef11, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef0f));
        EXPECT(0x99, gbc.readMem(0xef10));
        // CB 99 0224
        gbc.setState(0x6d33, 0x4221, 0xcbb0, 0x648c, 0xdafd, 0xeaf8, 0x1, 0x1);
        gbc.writeMem(0x6d33, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x4221, gbc.sp());
        EXPECT(0x6d35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0225
        gbc.setState(0x90c5, 0x9de3, 0x32b0, 0x9328, 0x68aa, 0x92d9, 0x1, 0x0);
        gbc.writeMem(0x90c5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x9de3, gbc.sp());
        EXPECT(0x90c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90c5));
        EXPECT(0x99, gbc.readMem(0x90c6));
        // CB 99 0226
        gbc.setState(0xa24f, 0x62dc, 0xdd10, 0x305b, 0x8592, 0xa136, 0x0, 0x0);
        gbc.writeMem(0xa24f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x62dc, gbc.sp());
        EXPECT(0xa251, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa24f));
        EXPECT(0x99, gbc.readMem(0xa250));
        // CB 99 0227
        gbc.setState(0x6501, 0xf5fd, 0x3fb0, 0xf622, 0x30af, 0xd4fa, 0x1, 0x0);
        gbc.writeMem(0x6501, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xf5fd, gbc.sp());
        EXPECT(0x6503, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0228
        gbc.setState(0xa6db, 0x89ed, 0x13a0, 0xf46e, 0x1b69, 0x96da, 0x0, 0x1);
        gbc.writeMem(0xa6db, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x89ed, gbc.sp());
        EXPECT(0xa6dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6db));
        EXPECT(0x99, gbc.readMem(0xa6dc));
        // CB 99 0229
        gbc.setState(0x4939, 0x9fe7, 0x5b60, 0xe29c, 0xf77f, 0xdf28, 0x0, 0x0);
        gbc.writeMem(0x4939, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x9fe7, gbc.sp());
        EXPECT(0x493b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 022A
        gbc.setState(0x40ce, 0xe3fd, 0xd820, 0xbd2b, 0x5eb4, 0x55a7, 0x0, 0x1);
        gbc.writeMem(0x40ce, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xe3fd, gbc.sp());
        EXPECT(0x40d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 022B
        gbc.setState(0xc84b, 0x5bdd, 0x9960, 0x4934, 0x9b3, 0x5977, 0x1, 0x0);
        gbc.writeMem(0xc84b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x5bdd, gbc.sp());
        EXPECT(0xc84d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc84b));
        EXPECT(0x99, gbc.readMem(0xc84c));
        // CB 99 022C
        gbc.setState(0x466, 0xe8d3, 0x200, 0x61f3, 0xb722, 0xae5, 0x0, 0x0);
        gbc.writeMem(0x466, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xe8d3, gbc.sp());
        EXPECT(0x468, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 022D
        gbc.setState(0x73bc, 0xb284, 0x6a70, 0xaedc, 0x78a, 0x69ab, 0x1, 0x0);
        gbc.writeMem(0x73bc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xb284, gbc.sp());
        EXPECT(0x73be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 022E
        gbc.setState(0x3568, 0x75a, 0xb1e0, 0x9fc0, 0x5c05, 0x9880, 0x1, 0x0);
        gbc.writeMem(0x3568, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x75a, gbc.sp());
        EXPECT(0x356a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 022F
        gbc.setState(0xa855, 0xf836, 0x2110, 0x1e71, 0x31e9, 0x1e34, 0x0, 0x1);
        gbc.writeMem(0xa855, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xf836, gbc.sp());
        EXPECT(0xa857, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa855));
        EXPECT(0x99, gbc.readMem(0xa856));
        // CB 99 0231
        gbc.setState(0x4349, 0x9, 0xd810, 0x95dc, 0x1758, 0x6a58, 0x1, 0x1);
        gbc.writeMem(0x4349, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x9, gbc.sp());
        EXPECT(0x434b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0232
        gbc.setState(0xdda2, 0xcb07, 0xd660, 0xf63c, 0x799, 0xcf5f, 0x1, 0x0);
        gbc.writeMem(0xdda2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xcb07, gbc.sp());
        EXPECT(0xdda4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdda2));
        EXPECT(0x99, gbc.readMem(0xdda3));
        // CB 99 0233
        gbc.setState(0xbd7d, 0xcd2f, 0x8380, 0xc12, 0xfde0, 0x226d, 0x0, 0x0);
        gbc.writeMem(0xbd7d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xcd2f, gbc.sp());
        EXPECT(0xbd7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd7d));
        EXPECT(0x99, gbc.readMem(0xbd7e));
        // CB 99 0234
        gbc.setState(0xd490, 0xb186, 0xfc10, 0x5060, 0xea3c, 0xa43f, 0x0, 0x1);
        gbc.writeMem(0xd490, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xb186, gbc.sp());
        EXPECT(0xd492, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd490));
        EXPECT(0x99, gbc.readMem(0xd491));
        // CB 99 0235
        gbc.setState(0x60af, 0xd44a, 0x9880, 0x3b2b, 0xd567, 0x4844, 0x1, 0x1);
        gbc.writeMem(0x60af, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xd44a, gbc.sp());
        EXPECT(0x60b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0236
        gbc.setState(0xb89f, 0xba97, 0xba80, 0x55a1, 0xad20, 0xbacc, 0x1, 0x1);
        gbc.writeMem(0xb89f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xba97, gbc.sp());
        EXPECT(0xb8a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb89f));
        EXPECT(0x99, gbc.readMem(0xb8a0));
        // CB 99 0237
        gbc.setState(0xed6e, 0x9bcb, 0xfd20, 0xe2a4, 0x1d35, 0xbf7, 0x0, 0x0);
        gbc.writeMem(0xed6e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x9bcb, gbc.sp());
        EXPECT(0xed70, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed6e));
        EXPECT(0x99, gbc.readMem(0xed6f));
        // CB 99 0238
        gbc.setState(0x5656, 0x30a7, 0xc650, 0xfcba, 0xcef1, 0x15da, 0x1, 0x0);
        gbc.writeMem(0x5656, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x30a7, gbc.sp());
        EXPECT(0x5658, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0239
        gbc.setState(0x86ed, 0x1b46, 0x2430, 0x58de, 0xb2ea, 0x66e, 0x0, 0x1);
        gbc.writeMem(0x86ed, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x1b46, gbc.sp());
        EXPECT(0x86ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86ed));
        EXPECT(0x99, gbc.readMem(0x86ee));
        // CB 99 023A
        gbc.setState(0xb392, 0xfa81, 0xed20, 0xd192, 0x5c6e, 0x1098, 0x0, 0x1);
        gbc.writeMem(0xb392, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xfa81, gbc.sp());
        EXPECT(0xb394, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb392));
        EXPECT(0x99, gbc.readMem(0xb393));
        // CB 99 023B
        gbc.setState(0x6567, 0x6d14, 0x5c90, 0x1db0, 0xf86b, 0x2d0d, 0x1, 0x1);
        gbc.writeMem(0x6567, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x6d14, gbc.sp());
        EXPECT(0x6569, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 023C
        gbc.setState(0xe530, 0x3b14, 0x4940, 0xb053, 0x2981, 0x8a9e, 0x1, 0x0);
        gbc.writeMem(0xe530, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x3b14, gbc.sp());
        EXPECT(0xe532, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe530));
        EXPECT(0x99, gbc.readMem(0xe531));
        // CB 99 023D
        gbc.setState(0x1182, 0xd941, 0xfbc0, 0x1c19, 0x16c9, 0x4184, 0x1, 0x1);
        gbc.writeMem(0x1182, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xd941, gbc.sp());
        EXPECT(0x1184, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 023E
        gbc.setState(0xc726, 0xbba, 0x9790, 0x1e5d, 0xbdc, 0x239b, 0x1, 0x1);
        gbc.writeMem(0xc726, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xbba, gbc.sp());
        EXPECT(0xc728, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc726));
        EXPECT(0x99, gbc.readMem(0xc727));
        // CB 99 023F
        gbc.setState(0x6539, 0x59c2, 0xde0, 0x9273, 0xed47, 0xe917, 0x1, 0x1);
        gbc.writeMem(0x6539, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x59c2, gbc.sp());
        EXPECT(0x653b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0240
        gbc.setState(0xc001, 0x1ee8, 0x4d70, 0x1bbb, 0xa07d, 0x4633, 0x1, 0x1);
        gbc.writeMem(0xc001, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x1ee8, gbc.sp());
        EXPECT(0xc003, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc001));
        EXPECT(0x99, gbc.readMem(0xc002));
        // CB 99 0241
        gbc.setState(0x2998, 0x4c56, 0x2910, 0xc50, 0xbba6, 0x22b4, 0x1, 0x0);
        gbc.writeMem(0x2998, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x4c56, gbc.sp());
        EXPECT(0x299a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0242
        gbc.setState(0x5ae6, 0x92a9, 0x15c0, 0xdeee, 0xd09a, 0x29c5, 0x0, 0x1);
        gbc.writeMem(0x5ae6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x92a9, gbc.sp());
        EXPECT(0x5ae8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0243
        gbc.setState(0x82ac, 0xc733, 0x5390, 0xd9e7, 0x3571, 0xdcd2, 0x0, 0x0);
        gbc.writeMem(0x82ac, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xc733, gbc.sp());
        EXPECT(0x82ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82ac));
        EXPECT(0x99, gbc.readMem(0x82ad));
        // CB 99 0244
        gbc.setState(0x4eca, 0xc6a9, 0xd7c0, 0x3863, 0xd4f2, 0x1292, 0x1, 0x1);
        gbc.writeMem(0x4eca, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xc6a9, gbc.sp());
        EXPECT(0x4ecc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0245
        gbc.setState(0xd8b1, 0x9e92, 0x7610, 0x7e7e, 0x387e, 0x8768, 0x0, 0x1);
        gbc.writeMem(0xd8b1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x9e92, gbc.sp());
        EXPECT(0xd8b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8b1));
        EXPECT(0x99, gbc.readMem(0xd8b2));
        // CB 99 0246
        gbc.setState(0x1d38, 0x26dd, 0x820, 0x53b6, 0xa2d3, 0x1503, 0x1, 0x0);
        gbc.writeMem(0x1d38, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x26dd, gbc.sp());
        EXPECT(0x1d3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0247
        gbc.setState(0x879e, 0x9430, 0x60c0, 0xa00e, 0x5096, 0xf2b8, 0x1, 0x0);
        gbc.writeMem(0x879e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x9430, gbc.sp());
        EXPECT(0x87a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x879e));
        EXPECT(0x99, gbc.readMem(0x879f));
        // CB 99 0248
        gbc.setState(0xb73f, 0x21e6, 0xef90, 0x734d, 0xe40c, 0x91a7, 0x1, 0x0);
        gbc.writeMem(0xb73f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x21e6, gbc.sp());
        EXPECT(0xb741, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb73f));
        EXPECT(0x99, gbc.readMem(0xb740));
        // CB 99 0249
        gbc.setState(0x6ca3, 0x36d2, 0xd60, 0xc556, 0xc622, 0x67fc, 0x1, 0x0);
        gbc.writeMem(0x6ca3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x36d2, gbc.sp());
        EXPECT(0x6ca5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 024A
        gbc.setState(0xa682, 0x4fb6, 0xbcb0, 0x715, 0x73e, 0xa79b, 0x0, 0x1);
        gbc.writeMem(0xa682, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x4fb6, gbc.sp());
        EXPECT(0xa684, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa682));
        EXPECT(0x99, gbc.readMem(0xa683));
        // CB 99 024B
        gbc.setState(0xed8a, 0x51a1, 0xeb40, 0x1a67, 0xf8eb, 0x1384, 0x1, 0x1);
        gbc.writeMem(0xed8a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x51a1, gbc.sp());
        EXPECT(0xed8c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed8a));
        EXPECT(0x99, gbc.readMem(0xed8b));
        // CB 99 024C
        gbc.setState(0xbed6, 0xe66, 0x3030, 0xa0f1, 0x305d, 0x916b, 0x0, 0x0);
        gbc.writeMem(0xbed6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xe66, gbc.sp());
        EXPECT(0xbed8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbed6));
        EXPECT(0x99, gbc.readMem(0xbed7));
        // CB 99 024D
        gbc.setState(0x45c7, 0xc32b, 0x3ff0, 0xaca8, 0xb22d, 0x2231, 0x1, 0x0);
        gbc.writeMem(0x45c7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xc32b, gbc.sp());
        EXPECT(0x45c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 024E
        gbc.setState(0x207a, 0x878e, 0xd970, 0xf887, 0x8b3e, 0x6b23, 0x0, 0x0);
        gbc.writeMem(0x207a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x878e, gbc.sp());
        EXPECT(0x207c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 024F
        gbc.setState(0xc06b, 0x8184, 0x6be0, 0xbd96, 0x469f, 0x3d0b, 0x0, 0x0);
        gbc.writeMem(0xc06b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x8184, gbc.sp());
        EXPECT(0xc06d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc06b));
        EXPECT(0x99, gbc.readMem(0xc06c));
        // CB 99 0250
        gbc.setState(0xa71f, 0xb0f, 0x8610, 0x2f43, 0xb5b7, 0x3c10, 0x1, 0x0);
        gbc.writeMem(0xa71f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xb0f, gbc.sp());
        EXPECT(0xa721, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa71f));
        EXPECT(0x99, gbc.readMem(0xa720));
        // CB 99 0252
        gbc.setState(0x4de1, 0xece3, 0x8740, 0xa932, 0xbafe, 0x5c6a, 0x0, 0x1);
        gbc.writeMem(0x4de1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xece3, gbc.sp());
        EXPECT(0x4de3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0253
        gbc.setState(0xa41f, 0xe0b2, 0x6030, 0xdb23, 0xea49, 0x2281, 0x0, 0x1);
        gbc.writeMem(0xa41f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xe0b2, gbc.sp());
        EXPECT(0xa421, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa41f));
        EXPECT(0x99, gbc.readMem(0xa420));
        // CB 99 0254
        gbc.setState(0x3037, 0x2279, 0xd620, 0x76ad, 0xf76, 0x7d4, 0x1, 0x1);
        gbc.writeMem(0x3037, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x2279, gbc.sp());
        EXPECT(0x3039, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0255
        gbc.setState(0xc36b, 0x9c72, 0xcce0, 0x6c91, 0x5f9c, 0xc102, 0x0, 0x1);
        gbc.writeMem(0xc36b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x9c72, gbc.sp());
        EXPECT(0xc36d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc36b));
        EXPECT(0x99, gbc.readMem(0xc36c));
        // CB 99 0256
        gbc.setState(0xa2e4, 0xa0d0, 0x21e0, 0x36fb, 0x8a2f, 0xe66a, 0x0, 0x0);
        gbc.writeMem(0xa2e4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xa0d0, gbc.sp());
        EXPECT(0xa2e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2e4));
        EXPECT(0x99, gbc.readMem(0xa2e5));
        // CB 99 0257
        gbc.setState(0x53ef, 0xa4f4, 0xca40, 0x20e6, 0xfa2a, 0x3229, 0x0, 0x1);
        gbc.writeMem(0x53ef, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xa4f4, gbc.sp());
        EXPECT(0x53f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0258
        gbc.setState(0x8c9b, 0xe365, 0x7e00, 0x2735, 0x4401, 0xf9da, 0x1, 0x1);
        gbc.writeMem(0x8c9b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xe365, gbc.sp());
        EXPECT(0x8c9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c9b));
        EXPECT(0x99, gbc.readMem(0x8c9c));
        // CB 99 0259
        gbc.setState(0x7ee1, 0x2b86, 0x8aa0, 0x3e02, 0x7012, 0x3170, 0x0, 0x1);
        gbc.writeMem(0x7ee1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x2b86, gbc.sp());
        EXPECT(0x7ee3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 025A
        gbc.setState(0x88c1, 0x53c1, 0xcf30, 0x8c18, 0xcc7d, 0x1e53, 0x1, 0x1);
        gbc.writeMem(0x88c1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x53c1, gbc.sp());
        EXPECT(0x88c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88c1));
        EXPECT(0x99, gbc.readMem(0x88c2));
        // CB 99 025B
        gbc.setState(0x72e4, 0x76ba, 0x7680, 0x6b40, 0xca8c, 0xee63, 0x0, 0x0);
        gbc.writeMem(0x72e4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x76ba, gbc.sp());
        EXPECT(0x72e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 025C
        gbc.setState(0x1d71, 0x1cd6, 0xa010, 0x22c5, 0xdec9, 0xecbf, 0x0, 0x0);
        gbc.writeMem(0x1d71, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x1cd6, gbc.sp());
        EXPECT(0x1d73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 025D
        gbc.setState(0x3d80, 0xb364, 0x46b0, 0xfaa0, 0xf758, 0x4c6, 0x0, 0x1);
        gbc.writeMem(0x3d80, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xb364, gbc.sp());
        EXPECT(0x3d82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 025F
        gbc.setState(0x8603, 0xb886, 0x69a0, 0xd16a, 0x4dfe, 0x1554, 0x0, 0x0);
        gbc.writeMem(0x8603, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xb886, gbc.sp());
        EXPECT(0x8605, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8603));
        EXPECT(0x99, gbc.readMem(0x8604));
        // CB 99 0260
        gbc.setState(0xafd, 0x7cf4, 0x4550, 0x86ae, 0xed56, 0x77a3, 0x0, 0x0);
        gbc.writeMem(0xafd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x7cf4, gbc.sp());
        EXPECT(0xaff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0261
        gbc.setState(0x4017, 0x7d17, 0x2790, 0xe5d4, 0xc95f, 0x593a, 0x1, 0x1);
        gbc.writeMem(0x4017, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x7d17, gbc.sp());
        EXPECT(0x4019, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0262
        gbc.setState(0xb893, 0x36d8, 0xe4a0, 0x7e6c, 0xcc0d, 0x77ea, 0x0, 0x0);
        gbc.writeMem(0xb893, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x36d8, gbc.sp());
        EXPECT(0xb895, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb893));
        EXPECT(0x99, gbc.readMem(0xb894));
        // CB 99 0263
        gbc.setState(0x2bf, 0x2835, 0x85d0, 0x7ca7, 0xab41, 0x52b5, 0x0, 0x0);
        gbc.writeMem(0x2bf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x2835, gbc.sp());
        EXPECT(0x2c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0264
        gbc.setState(0x3fa0, 0x983c, 0x8a70, 0xacbb, 0xdab3, 0x6a87, 0x1, 0x0);
        gbc.writeMem(0x3fa0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x983c, gbc.sp());
        EXPECT(0x3fa2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0265
        gbc.setState(0xdbaf, 0x296c, 0xd180, 0x1f9a, 0x9537, 0x41de, 0x1, 0x1);
        gbc.writeMem(0xdbaf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x296c, gbc.sp());
        EXPECT(0xdbb1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbaf));
        EXPECT(0x99, gbc.readMem(0xdbb0));
        // CB 99 0266
        gbc.setState(0x1fed, 0xe56d, 0xdd80, 0xb822, 0x8a09, 0x7b42, 0x0, 0x0);
        gbc.writeMem(0x1fed, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xe56d, gbc.sp());
        EXPECT(0x1fef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0267
        gbc.setState(0x93b4, 0xdecc, 0xb220, 0x8a27, 0xbeee, 0x9356, 0x1, 0x1);
        gbc.writeMem(0x93b4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xdecc, gbc.sp());
        EXPECT(0x93b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93b4));
        EXPECT(0x99, gbc.readMem(0x93b5));
        // CB 99 0268
        gbc.setState(0xad81, 0x9652, 0xb520, 0x3068, 0x7a62, 0xa831, 0x1, 0x1);
        gbc.writeMem(0xad81, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x9652, gbc.sp());
        EXPECT(0xad83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad81));
        EXPECT(0x99, gbc.readMem(0xad82));
        // CB 99 0269
        gbc.setState(0x7306, 0x9b2c, 0xb280, 0xbbec, 0x9403, 0x8246, 0x0, 0x0);
        gbc.writeMem(0x7306, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x9b2c, gbc.sp());
        EXPECT(0x7308, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 026A
        gbc.setState(0x5b73, 0x90f6, 0xa8d0, 0x7bf9, 0x197c, 0x880e, 0x0, 0x1);
        gbc.writeMem(0x5b73, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x90f6, gbc.sp());
        EXPECT(0x5b75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 026B
        gbc.setState(0x4525, 0xb10d, 0x61a0, 0x8abb, 0x8d59, 0x354c, 0x1, 0x0);
        gbc.writeMem(0x4525, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xb10d, gbc.sp());
        EXPECT(0x4527, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 026C
        gbc.setState(0x613, 0x1157, 0xb0a0, 0xe130, 0xed57, 0xea7f, 0x1, 0x1);
        gbc.writeMem(0x613, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x1157, gbc.sp());
        EXPECT(0x615, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 026D
        gbc.setState(0xaede, 0x56e4, 0x20c0, 0x5427, 0x76fb, 0x615, 0x1, 0x0);
        gbc.writeMem(0xaede, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x56e4, gbc.sp());
        EXPECT(0xaee0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaede));
        EXPECT(0x99, gbc.readMem(0xaedf));
        // CB 99 026E
        gbc.setState(0x7621, 0xc17f, 0xb800, 0x8a4b, 0x4239, 0xf349, 0x1, 0x0);
        gbc.writeMem(0x7621, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xc17f, gbc.sp());
        EXPECT(0x7623, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0270
        gbc.setState(0x23e, 0xdfc2, 0xeb50, 0xb9d4, 0x84ea, 0x656f, 0x1, 0x1);
        gbc.writeMem(0x23e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xdfc2, gbc.sp());
        EXPECT(0x240, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0272
        gbc.setState(0x3518, 0xaa8e, 0x44f0, 0x8e36, 0x2066, 0x88ba, 0x1, 0x0);
        gbc.writeMem(0x3518, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xaa8e, gbc.sp());
        EXPECT(0x351a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0274
        gbc.setState(0xe107, 0xdf6, 0x5950, 0xb846, 0x24d8, 0xdbc2, 0x1, 0x1);
        gbc.writeMem(0xe107, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xdf6, gbc.sp());
        EXPECT(0xe109, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe107));
        EXPECT(0x99, gbc.readMem(0xe108));
        // CB 99 0275
        gbc.setState(0xee24, 0x8b79, 0xe350, 0x4912, 0x540a, 0xce63, 0x1, 0x0);
        gbc.writeMem(0xee24, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x8b79, gbc.sp());
        EXPECT(0xee26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee24));
        EXPECT(0x99, gbc.readMem(0xee25));
        // CB 99 0276
        gbc.setState(0xbddc, 0x6788, 0x8080, 0xad8c, 0x59fe, 0xd9a3, 0x1, 0x0);
        gbc.writeMem(0xbddc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x6788, gbc.sp());
        EXPECT(0xbdde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbddc));
        EXPECT(0x99, gbc.readMem(0xbddd));
        // CB 99 0277
        gbc.setState(0x4bf, 0xba49, 0xea90, 0x1b62, 0xe30e, 0x1a8c, 0x1, 0x1);
        gbc.writeMem(0x4bf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xba49, gbc.sp());
        EXPECT(0x4c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0278
        gbc.setState(0x2e10, 0x3c40, 0x84c0, 0x2af7, 0xbdb6, 0x363a, 0x0, 0x1);
        gbc.writeMem(0x2e10, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x3c40, gbc.sp());
        EXPECT(0x2e12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0279
        gbc.setState(0xbe6b, 0x4d41, 0x7c80, 0xdc42, 0xf6e3, 0x9d9b, 0x1, 0x1);
        gbc.writeMem(0xbe6b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x4d41, gbc.sp());
        EXPECT(0xbe6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe6b));
        EXPECT(0x99, gbc.readMem(0xbe6c));
        // CB 99 027A
        gbc.setState(0x5f88, 0xff64, 0x68d0, 0x5de8, 0x244e, 0xcb13, 0x0, 0x1);
        gbc.writeMem(0x5f88, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xff64, gbc.sp());
        EXPECT(0x5f8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 027B
        gbc.setState(0xd102, 0xdeeb, 0xe560, 0xcc29, 0x8689, 0x8bc1, 0x0, 0x0);
        gbc.writeMem(0xd102, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xdeeb, gbc.sp());
        EXPECT(0xd104, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd102));
        EXPECT(0x99, gbc.readMem(0xd103));
        // CB 99 027C
        gbc.setState(0xf24, 0x69c4, 0xd660, 0x45bd, 0x7cb, 0xb51b, 0x0, 0x1);
        gbc.writeMem(0xf24, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x69c4, gbc.sp());
        EXPECT(0xf26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 027D
        gbc.setState(0x796e, 0xd485, 0x1b90, 0x8608, 0x794, 0x152a, 0x0, 0x1);
        gbc.writeMem(0x796e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xd485, gbc.sp());
        EXPECT(0x7970, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 027E
        gbc.setState(0x7d8c, 0xafa8, 0x82a0, 0x4ca4, 0x8c96, 0x676b, 0x1, 0x0);
        gbc.writeMem(0x7d8c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xafa8, gbc.sp());
        EXPECT(0x7d8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 027F
        gbc.setState(0x3196, 0xe218, 0x3680, 0xb7c2, 0xed90, 0x2a5b, 0x0, 0x0);
        gbc.writeMem(0x3196, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xe218, gbc.sp());
        EXPECT(0x3198, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0280
        gbc.setState(0x80ac, 0x3483, 0xc530, 0xb506, 0x8267, 0x7cfa, 0x0, 0x0);
        gbc.writeMem(0x80ac, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x3483, gbc.sp());
        EXPECT(0x80ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80ac));
        EXPECT(0x99, gbc.readMem(0x80ad));
        // CB 99 0281
        gbc.setState(0xcde8, 0xc52, 0x1080, 0xf2b8, 0x66d, 0xf152, 0x1, 0x0);
        gbc.writeMem(0xcde8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xc52, gbc.sp());
        EXPECT(0xcdea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcde8));
        EXPECT(0x99, gbc.readMem(0xcde9));
        // CB 99 0282
        gbc.setState(0x2ee, 0x30ab, 0x6df0, 0x7fc5, 0xd9d0, 0xf5cb, 0x1, 0x1);
        gbc.writeMem(0x2ee, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x30ab, gbc.sp());
        EXPECT(0x2f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0284
        gbc.setState(0x45a0, 0x5941, 0x1590, 0x6683, 0xc02c, 0x4624, 0x1, 0x1);
        gbc.writeMem(0x45a0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x5941, gbc.sp());
        EXPECT(0x45a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0286
        gbc.setState(0x42fd, 0xc82c, 0x5c0, 0xc338, 0x5fb8, 0x2732, 0x1, 0x1);
        gbc.writeMem(0x42fd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xc82c, gbc.sp());
        EXPECT(0x42ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0287
        gbc.setState(0x442c, 0x429d, 0xd0d0, 0x7d37, 0xe68f, 0x2426, 0x1, 0x1);
        gbc.writeMem(0x442c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x429d, gbc.sp());
        EXPECT(0x442e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0288
        gbc.setState(0x52c0, 0x8ce, 0x27a0, 0x5fc1, 0xa4bf, 0x973e, 0x0, 0x1);
        gbc.writeMem(0x52c0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x8ce, gbc.sp());
        EXPECT(0x52c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0289
        gbc.setState(0xaa99, 0x1048, 0x2b0, 0x56ea, 0x87a, 0x2fda, 0x0, 0x0);
        gbc.writeMem(0xaa99, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x1048, gbc.sp());
        EXPECT(0xaa9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa99));
        EXPECT(0x99, gbc.readMem(0xaa9a));
        // CB 99 028A
        gbc.setState(0x51e3, 0x6d6f, 0x6ae0, 0xc435, 0xadc6, 0x553d, 0x0, 0x0);
        gbc.writeMem(0x51e3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x6d6f, gbc.sp());
        EXPECT(0x51e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 028B
        gbc.setState(0x2d7, 0xb771, 0x7da0, 0x25cd, 0xccb8, 0x1bc1, 0x0, 0x1);
        gbc.writeMem(0x2d7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xb771, gbc.sp());
        EXPECT(0x2d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 028C
        gbc.setState(0x2e04, 0x2c3b, 0x2960, 0x9763, 0xeb69, 0x2ec4, 0x1, 0x0);
        gbc.writeMem(0x2e04, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x2c3b, gbc.sp());
        EXPECT(0x2e06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 028D
        gbc.setState(0x299e, 0x707e, 0x6cc0, 0xe8a8, 0x9162, 0x6845, 0x1, 0x0);
        gbc.writeMem(0x299e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x707e, gbc.sp());
        EXPECT(0x29a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 028E
        gbc.setState(0xa74c, 0xb3e5, 0x2320, 0x4487, 0x5c0c, 0x4461, 0x0, 0x1);
        gbc.writeMem(0xa74c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb3e5, gbc.sp());
        EXPECT(0xa74e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa74c));
        EXPECT(0x99, gbc.readMem(0xa74d));
        // CB 99 028F
        gbc.setState(0x7c29, 0xbc62, 0x92b0, 0x558, 0x355b, 0x1af4, 0x1, 0x1);
        gbc.writeMem(0x7c29, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xbc62, gbc.sp());
        EXPECT(0x7c2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0290
        gbc.setState(0xb0e0, 0x7eee, 0x2c80, 0x217e, 0xe0c2, 0xcc3e, 0x0, 0x1);
        gbc.writeMem(0xb0e0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x7eee, gbc.sp());
        EXPECT(0xb0e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0e0));
        EXPECT(0x99, gbc.readMem(0xb0e1));
        // CB 99 0291
        gbc.setState(0x8127, 0x486b, 0x7970, 0x4557, 0x7ba1, 0x84b4, 0x1, 0x0);
        gbc.writeMem(0x8127, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x486b, gbc.sp());
        EXPECT(0x8129, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8127));
        EXPECT(0x99, gbc.readMem(0x8128));
        // CB 99 0292
        gbc.setState(0x7f4f, 0x3204, 0xb1c0, 0x4a3a, 0x5190, 0x78b1, 0x0, 0x1);
        gbc.writeMem(0x7f4f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x3204, gbc.sp());
        EXPECT(0x7f51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0293
        gbc.setState(0xdcb6, 0x212, 0x31d0, 0x792b, 0xc7fb, 0x1677, 0x1, 0x1);
        gbc.writeMem(0xdcb6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x212, gbc.sp());
        EXPECT(0xdcb8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcb6));
        EXPECT(0x99, gbc.readMem(0xdcb7));
        // CB 99 0294
        gbc.setState(0x3d8d, 0x7f42, 0x2750, 0x498b, 0x6cea, 0x27bc, 0x0, 0x0);
        gbc.writeMem(0x3d8d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x7f42, gbc.sp());
        EXPECT(0x3d8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0295
        gbc.setState(0xe881, 0x8365, 0x74f0, 0x99c1, 0xfa7e, 0x467, 0x0, 0x1);
        gbc.writeMem(0xe881, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x8365, gbc.sp());
        EXPECT(0xe883, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe881));
        EXPECT(0x99, gbc.readMem(0xe882));
        // CB 99 0296
        gbc.setState(0x697d, 0xa224, 0x3120, 0xb8d1, 0xf9a8, 0x9bde, 0x0, 0x0);
        gbc.writeMem(0x697d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xa224, gbc.sp());
        EXPECT(0x697f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0297
        gbc.setState(0x54ac, 0x43b7, 0xd9a0, 0x6ad3, 0x6019, 0x84ae, 0x0, 0x1);
        gbc.writeMem(0x54ac, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x43b7, gbc.sp());
        EXPECT(0x54ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0298
        gbc.setState(0xc229, 0xc20a, 0x6bc0, 0x2541, 0xe93e, 0x203f, 0x0, 0x0);
        gbc.writeMem(0xc229, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xc20a, gbc.sp());
        EXPECT(0xc22b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc229));
        EXPECT(0x99, gbc.readMem(0xc22a));
        // CB 99 029A
        gbc.setState(0x4da1, 0x2e52, 0x79b0, 0xf468, 0xa2dc, 0xad13, 0x0, 0x0);
        gbc.writeMem(0x4da1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x2e52, gbc.sp());
        EXPECT(0x4da3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 029B
        gbc.setState(0xbfc3, 0xfc01, 0x5310, 0x32a5, 0xcbea, 0xc39b, 0x1, 0x1);
        gbc.writeMem(0xbfc3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xfc01, gbc.sp());
        EXPECT(0xbfc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfc3));
        EXPECT(0x99, gbc.readMem(0xbfc4));
        // CB 99 029C
        gbc.setState(0xb5f3, 0x4a87, 0x25f0, 0xa415, 0xfe88, 0x613a, 0x1, 0x0);
        gbc.writeMem(0xb5f3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x4a87, gbc.sp());
        EXPECT(0xb5f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5f3));
        EXPECT(0x99, gbc.readMem(0xb5f4));
        // CB 99 029D
        gbc.setState(0x8301, 0xf2f3, 0xd110, 0x2715, 0xb9ac, 0x5d62, 0x0, 0x1);
        gbc.writeMem(0x8301, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xf2f3, gbc.sp());
        EXPECT(0x8303, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8301));
        EXPECT(0x99, gbc.readMem(0x8302));
        // CB 99 029E
        gbc.setState(0x7c33, 0x33f2, 0x6450, 0xbf9, 0xa5ee, 0x2a56, 0x0, 0x1);
        gbc.writeMem(0x7c33, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x33f2, gbc.sp());
        EXPECT(0x7c35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 029F
        gbc.setState(0x9dea, 0x42af, 0x22e0, 0xdbad, 0x14ed, 0xd4ac, 0x0, 0x1);
        gbc.writeMem(0x9dea, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x42af, gbc.sp());
        EXPECT(0x9dec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dea));
        EXPECT(0x99, gbc.readMem(0x9deb));
        // CB 99 02A0
        gbc.setState(0xc829, 0x78d6, 0x2d90, 0x8aac, 0xa131, 0x1234, 0x1, 0x1);
        gbc.writeMem(0xc829, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x78d6, gbc.sp());
        EXPECT(0xc82b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc829));
        EXPECT(0x99, gbc.readMem(0xc82a));
        // CB 99 02A1
        gbc.setState(0x7436, 0xf311, 0x7170, 0xe6d2, 0x36dc, 0x4888, 0x1, 0x0);
        gbc.writeMem(0x7436, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xf311, gbc.sp());
        EXPECT(0x7438, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02A2
        gbc.setState(0xb144, 0xb933, 0x5390, 0xecfe, 0x904e, 0x2972, 0x0, 0x0);
        gbc.writeMem(0xb144, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xb933, gbc.sp());
        EXPECT(0xb146, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb144));
        EXPECT(0x99, gbc.readMem(0xb145));
        // CB 99 02A3
        gbc.setState(0x7cfe, 0xe86d, 0xbef0, 0x1048, 0x95f0, 0xc807, 0x0, 0x0);
        gbc.writeMem(0x7cfe, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xe86d, gbc.sp());
        EXPECT(0x7d00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02A4
        gbc.setState(0xd2e6, 0xe340, 0x5510, 0x9617, 0xf955, 0x5e72, 0x1, 0x0);
        gbc.writeMem(0xd2e6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xe340, gbc.sp());
        EXPECT(0xd2e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2e6));
        EXPECT(0x99, gbc.readMem(0xd2e7));
        // CB 99 02A5
        gbc.setState(0x8bf1, 0x141c, 0xed30, 0xd439, 0xd54f, 0x9f3f, 0x0, 0x1);
        gbc.writeMem(0x8bf1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x141c, gbc.sp());
        EXPECT(0x8bf3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bf1));
        EXPECT(0x99, gbc.readMem(0x8bf2));
        // CB 99 02A6
        gbc.setState(0x5e79, 0x4a88, 0xe540, 0x314b, 0x3b9, 0x80cd, 0x1, 0x1);
        gbc.writeMem(0x5e79, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x4a88, gbc.sp());
        EXPECT(0x5e7b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02A7
        gbc.setState(0x6ca2, 0x9b14, 0x3020, 0x1680, 0x42a, 0x6a05, 0x0, 0x1);
        gbc.writeMem(0x6ca2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x9b14, gbc.sp());
        EXPECT(0x6ca4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02A9
        gbc.setState(0x98dc, 0x9971, 0xef40, 0xb26, 0x82e2, 0x2c52, 0x0, 0x0);
        gbc.writeMem(0x98dc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x9971, gbc.sp());
        EXPECT(0x98de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98dc));
        EXPECT(0x99, gbc.readMem(0x98dd));
        // CB 99 02AB
        gbc.setState(0x6ac1, 0x2051, 0x9730, 0xd605, 0x21fd, 0xca53, 0x0, 0x0);
        gbc.writeMem(0x6ac1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x2051, gbc.sp());
        EXPECT(0x6ac3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02AC
        gbc.setState(0x86b, 0x3e33, 0x5470, 0x322b, 0x2114, 0xe13a, 0x1, 0x1);
        gbc.writeMem(0x86b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x3e33, gbc.sp());
        EXPECT(0x86d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02AD
        gbc.setState(0xd88f, 0x4329, 0x1260, 0xf1d, 0xa9ee, 0x967a, 0x0, 0x0);
        gbc.writeMem(0xd88f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x4329, gbc.sp());
        EXPECT(0xd891, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd88f));
        EXPECT(0x99, gbc.readMem(0xd890));
        // CB 99 02AE
        gbc.setState(0x7caf, 0x2f8e, 0xe900, 0x899a, 0x485e, 0x7526, 0x1, 0x0);
        gbc.writeMem(0x7caf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x2f8e, gbc.sp());
        EXPECT(0x7cb1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02AF
        gbc.setState(0x1cbf, 0x7d0e, 0xeac0, 0xdc7a, 0xabae, 0x5322, 0x0, 0x0);
        gbc.writeMem(0x1cbf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x7d0e, gbc.sp());
        EXPECT(0x1cc1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02B0
        gbc.setState(0x5fd8, 0xcc85, 0xbce0, 0x9466, 0x5b12, 0xe7d1, 0x0, 0x0);
        gbc.writeMem(0x5fd8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xcc85, gbc.sp());
        EXPECT(0x5fda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02B1
        gbc.setState(0x1d0c, 0x243f, 0xc20, 0x6bde, 0xfa66, 0xf63d, 0x1, 0x1);
        gbc.writeMem(0x1d0c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x243f, gbc.sp());
        EXPECT(0x1d0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02B2
        gbc.setState(0xc8d8, 0xa54a, 0x2720, 0xb8eb, 0x9979, 0x42c3, 0x0, 0x1);
        gbc.writeMem(0xc8d8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xa54a, gbc.sp());
        EXPECT(0xc8da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8d8));
        EXPECT(0x99, gbc.readMem(0xc8d9));
        // CB 99 02B3
        gbc.setState(0x4ff9, 0x6453, 0x6250, 0x76be, 0x7496, 0x26d3, 0x0, 0x1);
        gbc.writeMem(0x4ff9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x6453, gbc.sp());
        EXPECT(0x4ffb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02B4
        gbc.setState(0x18a, 0x57f9, 0x9a60, 0xb8c5, 0xf286, 0x3bf2, 0x1, 0x0);
        gbc.writeMem(0x18a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x57f9, gbc.sp());
        EXPECT(0x18c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02B5
        gbc.setState(0xb345, 0x4bd9, 0xec40, 0x365d, 0xac4, 0x18a6, 0x1, 0x1);
        gbc.writeMem(0xb345, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x4bd9, gbc.sp());
        EXPECT(0xb347, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb345));
        EXPECT(0x99, gbc.readMem(0xb346));
        // CB 99 02B6
        gbc.setState(0xb543, 0xc2c, 0x4d40, 0x7ae, 0xe4be, 0xf0f7, 0x0, 0x1);
        gbc.writeMem(0xb543, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xc2c, gbc.sp());
        EXPECT(0xb545, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb543));
        EXPECT(0x99, gbc.readMem(0xb544));
        // CB 99 02B7
        gbc.setState(0xe050, 0xf0ca, 0xab60, 0x80e4, 0x4a94, 0xe451, 0x1, 0x1);
        gbc.writeMem(0xe050, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xf0ca, gbc.sp());
        EXPECT(0xe052, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe050));
        EXPECT(0x99, gbc.readMem(0xe051));
        // CB 99 02B8
        gbc.setState(0x2b5d, 0x9cd5, 0x2940, 0xff33, 0x1ac4, 0x2ccc, 0x0, 0x1);
        gbc.writeMem(0x2b5d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x9cd5, gbc.sp());
        EXPECT(0x2b5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02B9
        gbc.setState(0xc352, 0x2a74, 0x7280, 0x9959, 0x6d9e, 0xfb24, 0x1, 0x0);
        gbc.writeMem(0xc352, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x2a74, gbc.sp());
        EXPECT(0xc354, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc352));
        EXPECT(0x99, gbc.readMem(0xc353));
        // CB 99 02BA
        gbc.setState(0x8ae3, 0x8319, 0xe7d0, 0x9278, 0xf04c, 0x2553, 0x1, 0x1);
        gbc.writeMem(0x8ae3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x8319, gbc.sp());
        EXPECT(0x8ae5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ae3));
        EXPECT(0x99, gbc.readMem(0x8ae4));
        // CB 99 02BB
        gbc.setState(0x7f2, 0x24c2, 0x2400, 0x24be, 0xa798, 0x513f, 0x0, 0x0);
        gbc.writeMem(0x7f2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x24c2, gbc.sp());
        EXPECT(0x7f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02BC
        gbc.setState(0xa01e, 0x52ba, 0x1460, 0xa51, 0x1698, 0xfe2f, 0x0, 0x1);
        gbc.writeMem(0xa01e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x52ba, gbc.sp());
        EXPECT(0xa020, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa01e));
        EXPECT(0x99, gbc.readMem(0xa01f));
        // CB 99 02BD
        gbc.setState(0x1bc, 0xfb56, 0x78b0, 0x3de6, 0xae30, 0x8bf4, 0x0, 0x0);
        gbc.writeMem(0x1bc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xfb56, gbc.sp());
        EXPECT(0x1be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02BE
        gbc.setState(0xa005, 0xf9ab, 0x9aa0, 0x7bf, 0x6a92, 0x28d3, 0x0, 0x1);
        gbc.writeMem(0xa005, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xf9ab, gbc.sp());
        EXPECT(0xa007, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa005));
        EXPECT(0x99, gbc.readMem(0xa006));
        // CB 99 02BF
        gbc.setState(0xd039, 0xb047, 0xb470, 0x6406, 0xfd3f, 0x5ed4, 0x0, 0x0);
        gbc.writeMem(0xd039, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xb047, gbc.sp());
        EXPECT(0xd03b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd039));
        EXPECT(0x99, gbc.readMem(0xd03a));
        // CB 99 02C0
        gbc.setState(0xac30, 0xa725, 0x4600, 0xd0a5, 0x5901, 0x158b, 0x1, 0x1);
        gbc.writeMem(0xac30, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xa725, gbc.sp());
        EXPECT(0xac32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac30));
        EXPECT(0x99, gbc.readMem(0xac31));
        // CB 99 02C1
        gbc.setState(0xb9b, 0xb462, 0x50c0, 0x39f2, 0x6c50, 0x2799, 0x0, 0x0);
        gbc.writeMem(0xb9b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xb462, gbc.sp());
        EXPECT(0xb9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02C2
        gbc.setState(0x8485, 0xbaf9, 0x22c0, 0x9745, 0x55f8, 0xd6fe, 0x0, 0x0);
        gbc.writeMem(0x8485, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xbaf9, gbc.sp());
        EXPECT(0x8487, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8485));
        EXPECT(0x99, gbc.readMem(0x8486));
        // CB 99 02C3
        gbc.setState(0x109a, 0x1ee1, 0x91f0, 0xda48, 0x2a90, 0x659b, 0x0, 0x0);
        gbc.writeMem(0x109a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x1ee1, gbc.sp());
        EXPECT(0x109c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02C4
        gbc.setState(0x247a, 0x2807, 0xb870, 0x1e33, 0x93cb, 0x5357, 0x0, 0x0);
        gbc.writeMem(0x247a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x2807, gbc.sp());
        EXPECT(0x247c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02C5
        gbc.setState(0x7201, 0xc91b, 0x6630, 0xe9fc, 0x713f, 0xb0d1, 0x0, 0x1);
        gbc.writeMem(0x7201, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xc91b, gbc.sp());
        EXPECT(0x7203, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02C6
        gbc.setState(0xdabc, 0x8e90, 0xb860, 0x3deb, 0x52ff, 0x4029, 0x1, 0x0);
        gbc.writeMem(0xdabc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x8e90, gbc.sp());
        EXPECT(0xdabe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdabc));
        EXPECT(0x99, gbc.readMem(0xdabd));
        // CB 99 02C7
        gbc.setState(0xa98a, 0x1791, 0x20, 0xc18f, 0x2d7c, 0x9859, 0x1, 0x0);
        gbc.writeMem(0xa98a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x1791, gbc.sp());
        EXPECT(0xa98c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa98a));
        EXPECT(0x99, gbc.readMem(0xa98b));
        // CB 99 02C8
        gbc.setState(0xc3fa, 0x5602, 0xdb80, 0x5489, 0x497f, 0xe663, 0x0, 0x0);
        gbc.writeMem(0xc3fa, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x5602, gbc.sp());
        EXPECT(0xc3fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3fa));
        EXPECT(0x99, gbc.readMem(0xc3fb));
        // CB 99 02CA
        gbc.setState(0xdce9, 0xaac5, 0xbd60, 0xbc70, 0xbb87, 0x37a3, 0x1, 0x0);
        gbc.writeMem(0xdce9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xaac5, gbc.sp());
        EXPECT(0xdceb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdce9));
        EXPECT(0x99, gbc.readMem(0xdcea));
        // CB 99 02CC
        gbc.setState(0x7562, 0xc5f4, 0x4660, 0xb3b2, 0xd097, 0x9536, 0x1, 0x1);
        gbc.writeMem(0x7562, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xc5f4, gbc.sp());
        EXPECT(0x7564, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02CD
        gbc.setState(0xd1d, 0x2aea, 0x6f0, 0xb753, 0x53f7, 0xe238, 0x0, 0x1);
        gbc.writeMem(0xd1d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x2aea, gbc.sp());
        EXPECT(0xd1f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02CE
        gbc.setState(0x428a, 0xd2f8, 0xb6c0, 0xb337, 0x6287, 0x6c05, 0x0, 0x0);
        gbc.writeMem(0x428a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xd2f8, gbc.sp());
        EXPECT(0x428c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02CF
        gbc.setState(0xc4a, 0x8d53, 0xf200, 0xf9de, 0xd60f, 0x884d, 0x1, 0x0);
        gbc.writeMem(0xc4a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x8d53, gbc.sp());
        EXPECT(0xc4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02D0
        gbc.setState(0x6f8f, 0x8986, 0x5c50, 0x5429, 0x689d, 0x8cae, 0x1, 0x0);
        gbc.writeMem(0x6f8f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x8986, gbc.sp());
        EXPECT(0x6f91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02D1
        gbc.setState(0xaa91, 0x458d, 0xae30, 0xad77, 0x9573, 0x177c, 0x1, 0x1);
        gbc.writeMem(0xaa91, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x458d, gbc.sp());
        EXPECT(0xaa93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa91));
        EXPECT(0x99, gbc.readMem(0xaa92));
        // CB 99 02D2
        gbc.setState(0x218, 0xbe04, 0xde90, 0x6cb, 0x2430, 0x8ae9, 0x1, 0x0);
        gbc.writeMem(0x218, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xbe04, gbc.sp());
        EXPECT(0x21a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02D4
        gbc.setState(0x3995, 0x7d1c, 0x3da0, 0x9a82, 0x5460, 0x9115, 0x1, 0x0);
        gbc.writeMem(0x3995, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x7d1c, gbc.sp());
        EXPECT(0x3997, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02D5
        gbc.setState(0xa5eb, 0xe71a, 0x2410, 0x8d45, 0x4711, 0xde0, 0x1, 0x1);
        gbc.writeMem(0xa5eb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xe71a, gbc.sp());
        EXPECT(0xa5ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa5eb));
        EXPECT(0x99, gbc.readMem(0xa5ec));
        // CB 99 02D6
        gbc.setState(0x9359, 0x9886, 0x5060, 0x7fb8, 0xf76c, 0xc290, 0x0, 0x0);
        gbc.writeMem(0x9359, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x9886, gbc.sp());
        EXPECT(0x935b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9359));
        EXPECT(0x99, gbc.readMem(0x935a));
        // CB 99 02D7
        gbc.setState(0x79d3, 0xe516, 0x7920, 0xb23f, 0xb8c9, 0x9b38, 0x0, 0x1);
        gbc.writeMem(0x79d3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xe516, gbc.sp());
        EXPECT(0x79d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02D8
        gbc.setState(0x4745, 0x2ca5, 0xd7e0, 0x5a21, 0x4af1, 0xe920, 0x0, 0x0);
        gbc.writeMem(0x4745, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x2ca5, gbc.sp());
        EXPECT(0x4747, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02D9
        gbc.setState(0x2a4f, 0xbe1b, 0x3300, 0x33b7, 0x71b0, 0x68f5, 0x0, 0x1);
        gbc.writeMem(0x2a4f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xbe1b, gbc.sp());
        EXPECT(0x2a51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02DA
        gbc.setState(0xe493, 0x7418, 0x36f0, 0xbd97, 0xd8d8, 0xbdb5, 0x0, 0x1);
        gbc.writeMem(0xe493, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x7418, gbc.sp());
        EXPECT(0xe495, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe493));
        EXPECT(0x99, gbc.readMem(0xe494));
        // CB 99 02DB
        gbc.setState(0x3977, 0x737a, 0xef30, 0x652e, 0x494b, 0xabfe, 0x0, 0x0);
        gbc.writeMem(0x3977, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x737a, gbc.sp());
        EXPECT(0x3979, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02DC
        gbc.setState(0xb852, 0xe992, 0x2420, 0x5808, 0x880c, 0x9e23, 0x1, 0x1);
        gbc.writeMem(0xb852, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xe992, gbc.sp());
        EXPECT(0xb854, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb852));
        EXPECT(0x99, gbc.readMem(0xb853));
        // CB 99 02DD
        gbc.setState(0x8301, 0x73cb, 0xf700, 0x76b9, 0x49df, 0x94bd, 0x1, 0x1);
        gbc.writeMem(0x8301, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x73cb, gbc.sp());
        EXPECT(0x8303, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8301));
        EXPECT(0x99, gbc.readMem(0x8302));
        // CB 99 02DE
        gbc.setState(0xc8a6, 0x5439, 0x25f0, 0x8e8f, 0x752, 0xe6a8, 0x0, 0x1);
        gbc.writeMem(0xc8a6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x5439, gbc.sp());
        EXPECT(0xc8a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8a6));
        EXPECT(0x99, gbc.readMem(0xc8a7));
        // CB 99 02DF
        gbc.setState(0x84a2, 0x8db5, 0x1620, 0xdb3d, 0xc352, 0x9e39, 0x0, 0x0);
        gbc.writeMem(0x84a2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x8db5, gbc.sp());
        EXPECT(0x84a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84a2));
        EXPECT(0x99, gbc.readMem(0x84a3));
        // CB 99 02E0
        gbc.setState(0x91fc, 0x49e7, 0x9790, 0xfa7, 0x96b8, 0xa535, 0x1, 0x1);
        gbc.writeMem(0x91fc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x49e7, gbc.sp());
        EXPECT(0x91fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91fc));
        EXPECT(0x99, gbc.readMem(0x91fd));
        // CB 99 02E1
        gbc.setState(0x9413, 0xa1e5, 0xa440, 0xf2b8, 0x3f3c, 0xb088, 0x1, 0x1);
        gbc.writeMem(0x9413, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xa1e5, gbc.sp());
        EXPECT(0x9415, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9413));
        EXPECT(0x99, gbc.readMem(0x9414));
        // CB 99 02E2
        gbc.setState(0x6be1, 0x2886, 0x4740, 0x1848, 0xd4f3, 0xb8d7, 0x1, 0x0);
        gbc.writeMem(0x6be1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x2886, gbc.sp());
        EXPECT(0x6be3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02E3
        gbc.setState(0xbc04, 0xb292, 0x8cc0, 0x1474, 0xbfe, 0xd1dd, 0x1, 0x1);
        gbc.writeMem(0xbc04, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xb292, gbc.sp());
        EXPECT(0xbc06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc04));
        EXPECT(0x99, gbc.readMem(0xbc05));
        // CB 99 02E5
        gbc.setState(0x1c9f, 0xbe90, 0x9680, 0xd496, 0xfaa3, 0xb1e9, 0x0, 0x0);
        gbc.writeMem(0x1c9f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xbe90, gbc.sp());
        EXPECT(0x1ca1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02E6
        gbc.setState(0x21d9, 0x4af3, 0x4f70, 0x6000, 0xd9f9, 0xc62a, 0x1, 0x0);
        gbc.writeMem(0x21d9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x4af3, gbc.sp());
        EXPECT(0x21db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02E7
        gbc.setState(0x96d9, 0x440a, 0x2a20, 0xe4f3, 0x73df, 0x6019, 0x0, 0x0);
        gbc.writeMem(0x96d9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x440a, gbc.sp());
        EXPECT(0x96db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96d9));
        EXPECT(0x99, gbc.readMem(0x96da));
        // CB 99 02E8
        gbc.setState(0x37a8, 0xa4da, 0x1380, 0xec28, 0xbd58, 0xaa58, 0x0, 0x1);
        gbc.writeMem(0x37a8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xa4da, gbc.sp());
        EXPECT(0x37aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02E9
        gbc.setState(0x9442, 0xd9df, 0x7050, 0xd2eb, 0x243f, 0x4715, 0x1, 0x1);
        gbc.writeMem(0x9442, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xd9df, gbc.sp());
        EXPECT(0x9444, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9442));
        EXPECT(0x99, gbc.readMem(0x9443));
        // CB 99 02EA
        gbc.setState(0xe10d, 0x38d0, 0x7810, 0xdad8, 0x8283, 0xdcdd, 0x0, 0x0);
        gbc.writeMem(0xe10d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x38d0, gbc.sp());
        EXPECT(0xe10f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe10d));
        EXPECT(0x99, gbc.readMem(0xe10e));
        // CB 99 02EB
        gbc.setState(0xa910, 0xabe0, 0x22e0, 0xeeab, 0x9ba1, 0xe25d, 0x0, 0x0);
        gbc.writeMem(0xa910, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xabe0, gbc.sp());
        EXPECT(0xa912, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa910));
        EXPECT(0x99, gbc.readMem(0xa911));
        // CB 99 02ED
        gbc.setState(0xbf68, 0xc7d1, 0x6ea0, 0xb8c3, 0xb224, 0xe770, 0x1, 0x0);
        gbc.writeMem(0xbf68, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xc7d1, gbc.sp());
        EXPECT(0xbf6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf68));
        EXPECT(0x99, gbc.readMem(0xbf69));
        // CB 99 02EE
        gbc.setState(0xbb3e, 0x4318, 0xde00, 0x6cc4, 0xab03, 0x13a8, 0x0, 0x0);
        gbc.writeMem(0xbb3e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x4318, gbc.sp());
        EXPECT(0xbb40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb3e));
        EXPECT(0x99, gbc.readMem(0xbb3f));
        // CB 99 02EF
        gbc.setState(0x32a4, 0x899f, 0x2b70, 0xf294, 0xcf37, 0x8aae, 0x0, 0x0);
        gbc.writeMem(0x32a4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x899f, gbc.sp());
        EXPECT(0x32a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02F0
        gbc.setState(0x538f, 0xc39d, 0xaca0, 0x744e, 0xd6d3, 0x8de3, 0x0, 0x0);
        gbc.writeMem(0x538f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xc39d, gbc.sp());
        EXPECT(0x5391, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02F1
        gbc.setState(0x91ea, 0x4715, 0xcc60, 0x5dcd, 0x6cc8, 0x4d50, 0x0, 0x1);
        gbc.writeMem(0x91ea, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x4715, gbc.sp());
        EXPECT(0x91ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91ea));
        EXPECT(0x99, gbc.readMem(0x91eb));
        // CB 99 02F2
        gbc.setState(0xda8d, 0x5387, 0x85e0, 0x3dd4, 0x1696, 0x3b37, 0x1, 0x1);
        gbc.writeMem(0xda8d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x5387, gbc.sp());
        EXPECT(0xda8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda8d));
        EXPECT(0x99, gbc.readMem(0xda8e));
        // CB 99 02F3
        gbc.setState(0x49c0, 0x2e19, 0x78f0, 0xb5aa, 0x72b, 0xde0d, 0x1, 0x1);
        gbc.writeMem(0x49c0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x2e19, gbc.sp());
        EXPECT(0x49c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02F4
        gbc.setState(0x4f08, 0xed55, 0xb80, 0x8da1, 0x8e78, 0x6b34, 0x0, 0x1);
        gbc.writeMem(0x4f08, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xed55, gbc.sp());
        EXPECT(0x4f0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02F5
        gbc.setState(0x797b, 0x78c8, 0xdab0, 0x9cdc, 0xfeb9, 0xee36, 0x1, 0x0);
        gbc.writeMem(0x797b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x78c8, gbc.sp());
        EXPECT(0x797d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02F6
        gbc.setState(0x62a7, 0xb933, 0x38d0, 0xc862, 0xeea3, 0xe451, 0x1, 0x1);
        gbc.writeMem(0x62a7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xb933, gbc.sp());
        EXPECT(0x62a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 02F7
        gbc.setState(0x9bba, 0xeef4, 0xb200, 0xa4e2, 0xfdd8, 0x82d4, 0x0, 0x1);
        gbc.writeMem(0x9bba, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xeef4, gbc.sp());
        EXPECT(0x9bbc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bba));
        EXPECT(0x99, gbc.readMem(0x9bbb));
        // CB 99 02F8
        gbc.setState(0x559a, 0xef45, 0x1a0, 0x8299, 0x664c, 0xd500, 0x0, 0x0);
        gbc.writeMem(0x559a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xef45, gbc.sp());
        EXPECT(0x559c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02F9
        gbc.setState(0xb3c4, 0x6fbb, 0xa3d0, 0xdb98, 0x1b32, 0xb781, 0x1, 0x1);
        gbc.writeMem(0xb3c4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x6fbb, gbc.sp());
        EXPECT(0xb3c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3c4));
        EXPECT(0x99, gbc.readMem(0xb3c5));
        // CB 99 02FA
        gbc.setState(0xbcd1, 0x67c, 0x62c0, 0x5508, 0x9ab1, 0x984f, 0x1, 0x1);
        gbc.writeMem(0xbcd1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x67c, gbc.sp());
        EXPECT(0xbcd3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcd1));
        EXPECT(0x99, gbc.readMem(0xbcd2));
        // CB 99 02FB
        gbc.setState(0xcc36, 0xe835, 0xa160, 0xc4ee, 0x328, 0x6000, 0x1, 0x1);
        gbc.writeMem(0xcc36, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xe835, gbc.sp());
        EXPECT(0xcc38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc36));
        EXPECT(0x99, gbc.readMem(0xcc37));
        // CB 99 02FC
        gbc.setState(0xe986, 0x5d07, 0x1740, 0xcedc, 0x572, 0x97db, 0x0, 0x1);
        gbc.writeMem(0xe986, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x5d07, gbc.sp());
        EXPECT(0xe988, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe986));
        EXPECT(0x99, gbc.readMem(0xe987));
        // CB 99 02FD
        gbc.setState(0x958, 0x4d05, 0x4860, 0xfbd, 0xbe2b, 0x198e, 0x1, 0x0);
        gbc.writeMem(0x958, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x4d05, gbc.sp());
        EXPECT(0x95a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 02FE
        gbc.setState(0x8041, 0xb43, 0x9d90, 0xd597, 0x7fa9, 0xa2ef, 0x1, 0x0);
        gbc.writeMem(0x8041, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xb43, gbc.sp());
        EXPECT(0x8043, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8041));
        EXPECT(0x99, gbc.readMem(0x8042));
        // CB 99 02FF
        gbc.setState(0x8320, 0x8ae6, 0x4c60, 0xd6cd, 0xd61, 0xb44d, 0x0, 0x0);
        gbc.writeMem(0x8320, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x8ae6, gbc.sp());
        EXPECT(0x8322, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8320));
        EXPECT(0x99, gbc.readMem(0x8321));
        // CB 99 0300
        gbc.setState(0xeaaf, 0x9fbe, 0x9670, 0x3b7, 0xc9c0, 0xd994, 0x0, 0x1);
        gbc.writeMem(0xeaaf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x9fbe, gbc.sp());
        EXPECT(0xeab1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaaf));
        EXPECT(0x99, gbc.readMem(0xeab0));
        // CB 99 0301
        gbc.setState(0x60ab, 0x2a6a, 0x2310, 0xd1d7, 0xc905, 0x8c2a, 0x0, 0x0);
        gbc.writeMem(0x60ab, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x2a6a, gbc.sp());
        EXPECT(0x60ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0302
        gbc.setState(0xdc91, 0x875d, 0xf280, 0x8826, 0xae44, 0x8fca, 0x1, 0x1);
        gbc.writeMem(0xdc91, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x875d, gbc.sp());
        EXPECT(0xdc93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc91));
        EXPECT(0x99, gbc.readMem(0xdc92));
        // CB 99 0303
        gbc.setState(0xbe11, 0x1dd4, 0x7210, 0x8bc8, 0xc872, 0xd313, 0x0, 0x1);
        gbc.writeMem(0xbe11, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x1dd4, gbc.sp());
        EXPECT(0xbe13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe11));
        EXPECT(0x99, gbc.readMem(0xbe12));
        // CB 99 0304
        gbc.setState(0x9764, 0xbe4d, 0x1aa0, 0xca78, 0xe41b, 0x87b1, 0x0, 0x0);
        gbc.writeMem(0x9764, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xbe4d, gbc.sp());
        EXPECT(0x9766, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9764));
        EXPECT(0x99, gbc.readMem(0x9765));
        // CB 99 0305
        gbc.setState(0x4def, 0x5156, 0xb030, 0x2c7a, 0xc596, 0xda9a, 0x0, 0x0);
        gbc.writeMem(0x4def, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x5156, gbc.sp());
        EXPECT(0x4df1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0306
        gbc.setState(0x7a51, 0x3dac, 0x4840, 0x132, 0x4aab, 0x6d65, 0x1, 0x1);
        gbc.writeMem(0x7a51, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x3dac, gbc.sp());
        EXPECT(0x7a53, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0307
        gbc.setState(0xb09a, 0x1db7, 0x2580, 0x8a77, 0x8943, 0x882, 0x1, 0x0);
        gbc.writeMem(0xb09a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x1db7, gbc.sp());
        EXPECT(0xb09c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb09a));
        EXPECT(0x99, gbc.readMem(0xb09b));
        // CB 99 0308
        gbc.setState(0x29ef, 0x3679, 0xf7b0, 0xbc77, 0x22b3, 0xf753, 0x0, 0x1);
        gbc.writeMem(0x29ef, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x3679, gbc.sp());
        EXPECT(0x29f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0309
        gbc.setState(0x42dd, 0xa01, 0x36c0, 0x113d, 0x37c0, 0xc19b, 0x1, 0x0);
        gbc.writeMem(0x42dd, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xa01, gbc.sp());
        EXPECT(0x42df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 030A
        gbc.setState(0x4def, 0x8683, 0xcf10, 0x4a75, 0xafcb, 0xcf81, 0x0, 0x0);
        gbc.writeMem(0x4def, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x8683, gbc.sp());
        EXPECT(0x4df1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 030B
        gbc.setState(0x2d64, 0xab04, 0xfa30, 0x1a2f, 0x3d26, 0x702f, 0x0, 0x0);
        gbc.writeMem(0x2d64, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xab04, gbc.sp());
        EXPECT(0x2d66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 030C
        gbc.setState(0x4163, 0xe7f5, 0x5640, 0xc28b, 0xbee, 0x34d2, 0x1, 0x1);
        gbc.writeMem(0x4163, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xe7f5, gbc.sp());
        EXPECT(0x4165, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 030D
        gbc.setState(0x284f, 0x4823, 0xb290, 0x5b3, 0xe8c0, 0xfc50, 0x1, 0x1);
        gbc.writeMem(0x284f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x4823, gbc.sp());
        EXPECT(0x2851, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 030E
        gbc.setState(0x823a, 0xd025, 0x5e80, 0x2896, 0x33d8, 0x7655, 0x0, 0x1);
        gbc.writeMem(0x823a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xd025, gbc.sp());
        EXPECT(0x823c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x823a));
        EXPECT(0x99, gbc.readMem(0x823b));
        // CB 99 030F
        gbc.setState(0x5f91, 0x63d7, 0x8c10, 0xacac, 0xd57a, 0x32a6, 0x0, 0x0);
        gbc.writeMem(0x5f91, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x63d7, gbc.sp());
        EXPECT(0x5f93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0310
        gbc.setState(0x45b3, 0x240b, 0x5990, 0x4de3, 0xdc15, 0xc4d8, 0x1, 0x0);
        gbc.writeMem(0x45b3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x240b, gbc.sp());
        EXPECT(0x45b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0311
        gbc.setState(0xab20, 0xec1e, 0x7d0, 0x3e2, 0xdf41, 0x5247, 0x1, 0x1);
        gbc.writeMem(0xab20, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xec1e, gbc.sp());
        EXPECT(0xab22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab20));
        EXPECT(0x99, gbc.readMem(0xab21));
        // CB 99 0312
        gbc.setState(0x5f23, 0xe56c, 0x20a0, 0x892e, 0x34d2, 0x667f, 0x1, 0x1);
        gbc.writeMem(0x5f23, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xe56c, gbc.sp());
        EXPECT(0x5f25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0313
        gbc.setState(0x9a6, 0xb39, 0xc3d0, 0xc185, 0xf39f, 0x3c45, 0x1, 0x1);
        gbc.writeMem(0x9a6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xb39, gbc.sp());
        EXPECT(0x9a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0314
        gbc.setState(0xbc3e, 0xaaa3, 0xc410, 0xc9b1, 0x307, 0x5a97, 0x1, 0x0);
        gbc.writeMem(0xbc3e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xaaa3, gbc.sp());
        EXPECT(0xbc40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc3e));
        EXPECT(0x99, gbc.readMem(0xbc3f));
        // CB 99 0315
        gbc.setState(0x4c73, 0x1073, 0x7810, 0x22c, 0x49f7, 0x9e4c, 0x0, 0x0);
        gbc.writeMem(0x4c73, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x1073, gbc.sp());
        EXPECT(0x4c75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0316
        gbc.setState(0x290c, 0x68bf, 0x7c0, 0x3c8b, 0x99df, 0x872d, 0x0, 0x0);
        gbc.writeMem(0x290c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x68bf, gbc.sp());
        EXPECT(0x290e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0317
        gbc.setState(0x70de, 0x37a, 0x6600, 0xed4d, 0xf3ba, 0x5907, 0x1, 0x0);
        gbc.writeMem(0x70de, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x37a, gbc.sp());
        EXPECT(0x70e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0318
        gbc.setState(0xb6b6, 0xff8d, 0x9c80, 0x34c6, 0x84b8, 0xdab0, 0x1, 0x0);
        gbc.writeMem(0xb6b6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xff8d, gbc.sp());
        EXPECT(0xb6b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6b6));
        EXPECT(0x99, gbc.readMem(0xb6b7));
        // CB 99 0319
        gbc.setState(0xdd1b, 0xfe3, 0x8840, 0x71e0, 0xfcc9, 0x2e19, 0x0, 0x0);
        gbc.writeMem(0xdd1b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xfe3, gbc.sp());
        EXPECT(0xdd1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd1b));
        EXPECT(0x99, gbc.readMem(0xdd1c));
        // CB 99 031A
        gbc.setState(0x518, 0x6c14, 0x11f0, 0x6278, 0xa680, 0xe215, 0x1, 0x1);
        gbc.writeMem(0x518, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x6c14, gbc.sp());
        EXPECT(0x51a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 031B
        gbc.setState(0x27a6, 0xdef1, 0xd340, 0xb820, 0x9f52, 0x1631, 0x0, 0x0);
        gbc.writeMem(0x27a6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xdef1, gbc.sp());
        EXPECT(0x27a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 031C
        gbc.setState(0x882b, 0xd9f3, 0x2150, 0xbcff, 0xe358, 0x8fdb, 0x1, 0x1);
        gbc.writeMem(0x882b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xd9f3, gbc.sp());
        EXPECT(0x882d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x882b));
        EXPECT(0x99, gbc.readMem(0x882c));
        // CB 99 031D
        gbc.setState(0xddb1, 0x8ff2, 0x65a0, 0xcb4b, 0xe4e8, 0xbf9, 0x1, 0x1);
        gbc.writeMem(0xddb1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x8ff2, gbc.sp());
        EXPECT(0xddb3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddb1));
        EXPECT(0x99, gbc.readMem(0xddb2));
        // CB 99 031E
        gbc.setState(0x8c8a, 0x770e, 0x5510, 0xb0a9, 0xb8f2, 0xa9d6, 0x1, 0x0);
        gbc.writeMem(0x8c8a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x770e, gbc.sp());
        EXPECT(0x8c8c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c8a));
        EXPECT(0x99, gbc.readMem(0x8c8b));
        // CB 99 031F
        gbc.setState(0xea44, 0x4ca2, 0x22c0, 0x496a, 0x9524, 0xa081, 0x0, 0x0);
        gbc.writeMem(0xea44, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x4ca2, gbc.sp());
        EXPECT(0xea46, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea44));
        EXPECT(0x99, gbc.readMem(0xea45));
        // CB 99 0320
        gbc.setState(0xe95c, 0xf054, 0x3cd0, 0xe06a, 0x7b89, 0xd110, 0x0, 0x0);
        gbc.writeMem(0xe95c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xf054, gbc.sp());
        EXPECT(0xe95e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe95c));
        EXPECT(0x99, gbc.readMem(0xe95d));
        // CB 99 0321
        gbc.setState(0x5a08, 0xa0d2, 0x9980, 0xba79, 0x592e, 0xb7, 0x0, 0x0);
        gbc.writeMem(0x5a08, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xa0d2, gbc.sp());
        EXPECT(0x5a0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0322
        gbc.setState(0xecc3, 0x90a0, 0x1d20, 0x70b7, 0x7cf6, 0xd30d, 0x0, 0x1);
        gbc.writeMem(0xecc3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x90a0, gbc.sp());
        EXPECT(0xecc5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecc3));
        EXPECT(0x99, gbc.readMem(0xecc4));
        // CB 99 0323
        gbc.setState(0x404c, 0x32b6, 0x4e60, 0x891f, 0xbe08, 0x155e, 0x1, 0x1);
        gbc.writeMem(0x404c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x32b6, gbc.sp());
        EXPECT(0x404e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0325
        gbc.setState(0x1f17, 0x96ed, 0x2fc0, 0xa93c, 0x330f, 0x1a93, 0x1, 0x0);
        gbc.writeMem(0x1f17, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x96ed, gbc.sp());
        EXPECT(0x1f19, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0326
        gbc.setState(0x3114, 0x71f5, 0x3400, 0xb48c, 0xd658, 0xb20b, 0x1, 0x0);
        gbc.writeMem(0x3114, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x71f5, gbc.sp());
        EXPECT(0x3116, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0327
        gbc.setState(0x4fd6, 0xa312, 0x42a0, 0x8a46, 0x6301, 0x1ccc, 0x1, 0x1);
        gbc.writeMem(0x4fd6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xa312, gbc.sp());
        EXPECT(0x4fd8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0328
        gbc.setState(0x3525, 0xf6ec, 0xc890, 0x41e8, 0x2fb9, 0x8c06, 0x1, 0x1);
        gbc.writeMem(0x3525, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xf6ec, gbc.sp());
        EXPECT(0x3527, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0329
        gbc.setState(0x9c7c, 0xa6a, 0xc780, 0xdf72, 0x55f1, 0x12cd, 0x0, 0x0);
        gbc.writeMem(0x9c7c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xa6a, gbc.sp());
        EXPECT(0x9c7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c7c));
        EXPECT(0x99, gbc.readMem(0x9c7d));
        // CB 99 032A
        gbc.setState(0x2ea4, 0xdf9d, 0xc230, 0xe53f, 0x69d0, 0x1cd1, 0x1, 0x0);
        gbc.writeMem(0x2ea4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xdf9d, gbc.sp());
        EXPECT(0x2ea6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 032B
        gbc.setState(0x9d3e, 0x80e1, 0x1b60, 0xd152, 0x2335, 0x2dc4, 0x1, 0x1);
        gbc.writeMem(0x9d3e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x80e1, gbc.sp());
        EXPECT(0x9d40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d3e));
        EXPECT(0x99, gbc.readMem(0x9d3f));
        // CB 99 032C
        gbc.setState(0x171a, 0xe400, 0xf900, 0x3ecf, 0x5f19, 0x61af, 0x1, 0x0);
        gbc.writeMem(0x171a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xe400, gbc.sp());
        EXPECT(0x171c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 032D
        gbc.setState(0x65fb, 0x5dd2, 0xe1e0, 0x44e6, 0xcb63, 0x9cf6, 0x1, 0x0);
        gbc.writeMem(0x65fb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x5dd2, gbc.sp());
        EXPECT(0x65fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 032E
        gbc.setState(0x5a22, 0xb878, 0x1200, 0x8e6c, 0x1bd2, 0xc929, 0x0, 0x0);
        gbc.writeMem(0x5a22, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xb878, gbc.sp());
        EXPECT(0x5a24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0331
        gbc.setState(0xcd07, 0x5c0, 0xd760, 0x990e, 0x908c, 0xb349, 0x0, 0x1);
        gbc.writeMem(0xcd07, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x5c0, gbc.sp());
        EXPECT(0xcd09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd07));
        EXPECT(0x99, gbc.readMem(0xcd08));
        // CB 99 0332
        gbc.setState(0xb72a, 0xaa49, 0xc750, 0xb14d, 0x2901, 0xde10, 0x1, 0x1);
        gbc.writeMem(0xb72a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xaa49, gbc.sp());
        EXPECT(0xb72c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb72a));
        EXPECT(0x99, gbc.readMem(0xb72b));
        // CB 99 0333
        gbc.setState(0x4cc0, 0x735, 0xb220, 0x14b0, 0x2d0, 0xae32, 0x0, 0x1);
        gbc.writeMem(0x4cc0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x735, gbc.sp());
        EXPECT(0x4cc2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0334
        gbc.setState(0xb61a, 0x40ab, 0x240, 0x1f97, 0x4f53, 0xe7be, 0x0, 0x0);
        gbc.writeMem(0xb61a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x40ab, gbc.sp());
        EXPECT(0xb61c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb61a));
        EXPECT(0x99, gbc.readMem(0xb61b));
        // CB 99 0335
        gbc.setState(0x440d, 0xadec, 0xa100, 0x9d29, 0x6044, 0xc931, 0x1, 0x0);
        gbc.writeMem(0x440d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xadec, gbc.sp());
        EXPECT(0x440f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0336
        gbc.setState(0xaa0b, 0xd07c, 0xd1a0, 0x308a, 0x9851, 0x47f, 0x1, 0x1);
        gbc.writeMem(0xaa0b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xd07c, gbc.sp());
        EXPECT(0xaa0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa0b));
        EXPECT(0x99, gbc.readMem(0xaa0c));
        // CB 99 0337
        gbc.setState(0x92c2, 0x77e2, 0xa840, 0x90f9, 0xf1dd, 0xad49, 0x0, 0x1);
        gbc.writeMem(0x92c2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x77e2, gbc.sp());
        EXPECT(0x92c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92c2));
        EXPECT(0x99, gbc.readMem(0x92c3));
        // CB 99 0338
        gbc.setState(0xdfd9, 0x59a5, 0xddb0, 0xc0b6, 0xfc6b, 0xbe5f, 0x1, 0x1);
        gbc.writeMem(0xdfd9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x59a5, gbc.sp());
        EXPECT(0xdfdb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfd9));
        EXPECT(0x99, gbc.readMem(0xdfda));
        // CB 99 0339
        gbc.setState(0xd3d3, 0x8e29, 0x6a60, 0x15cf, 0xf341, 0x3be3, 0x0, 0x1);
        gbc.writeMem(0xd3d3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x8e29, gbc.sp());
        EXPECT(0xd3d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3d3));
        EXPECT(0x99, gbc.readMem(0xd3d4));
        // CB 99 033A
        gbc.setState(0x9764, 0xcf26, 0xab40, 0x9ad6, 0xbe97, 0x45aa, 0x0, 0x1);
        gbc.writeMem(0x9764, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xcf26, gbc.sp());
        EXPECT(0x9766, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9764));
        EXPECT(0x99, gbc.readMem(0x9765));
        // CB 99 033B
        gbc.setState(0x4bdb, 0xa632, 0xd5b0, 0x346, 0x6139, 0x3a32, 0x0, 0x0);
        gbc.writeMem(0x4bdb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xa632, gbc.sp());
        EXPECT(0x4bdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 033C
        gbc.setState(0x64f4, 0xa0ed, 0x95e0, 0x9fe0, 0xa7f3, 0x8fc5, 0x1, 0x0);
        gbc.writeMem(0x64f4, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xa0ed, gbc.sp());
        EXPECT(0x64f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 033D
        gbc.setState(0x5587, 0xbc8c, 0x1d80, 0xa578, 0x6086, 0xac3c, 0x0, 0x1);
        gbc.writeMem(0x5587, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xbc8c, gbc.sp());
        EXPECT(0x5589, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 033E
        gbc.setState(0x2147, 0xe1a6, 0x4440, 0x6182, 0x24a, 0x4bc6, 0x0, 0x0);
        gbc.writeMem(0x2147, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xe1a6, gbc.sp());
        EXPECT(0x2149, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 033F
        gbc.setState(0xd620, 0x88c5, 0xb9f0, 0xa663, 0xb716, 0x7283, 0x1, 0x1);
        gbc.writeMem(0xd620, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x88c5, gbc.sp());
        EXPECT(0xd622, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd620));
        EXPECT(0x99, gbc.readMem(0xd621));
        // CB 99 0340
        gbc.setState(0x5bf8, 0x590d, 0xd740, 0xa0dd, 0x3ff9, 0x9919, 0x0, 0x0);
        gbc.writeMem(0x5bf8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x590d, gbc.sp());
        EXPECT(0x5bfa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0341
        gbc.setState(0x433c, 0xb66b, 0x1580, 0xd0b3, 0x2d57, 0xa278, 0x1, 0x1);
        gbc.writeMem(0x433c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xb66b, gbc.sp());
        EXPECT(0x433e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0342
        gbc.setState(0x9f3d, 0x910e, 0x3510, 0x4189, 0x3b21, 0xfd6d, 0x0, 0x0);
        gbc.writeMem(0x9f3d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x910e, gbc.sp());
        EXPECT(0x9f3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f3d));
        EXPECT(0x99, gbc.readMem(0x9f3e));
        // CB 99 0343
        gbc.setState(0x8853, 0xd8b, 0x5890, 0x78d4, 0x4529, 0x16ac, 0x0, 0x1);
        gbc.writeMem(0x8853, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xd8b, gbc.sp());
        EXPECT(0x8855, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8853));
        EXPECT(0x99, gbc.readMem(0x8854));
        // CB 99 0344
        gbc.setState(0x139e, 0xff5, 0x8b0, 0xdd5c, 0xe7dc, 0x8d9b, 0x1, 0x1);
        gbc.writeMem(0x139e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xff5, gbc.sp());
        EXPECT(0x13a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0345
        gbc.setState(0xc99a, 0x2b9, 0x7600, 0x5733, 0xaa81, 0xda0b, 0x0, 0x0);
        gbc.writeMem(0xc99a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x2b9, gbc.sp());
        EXPECT(0xc99c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc99a));
        EXPECT(0x99, gbc.readMem(0xc99b));
        // CB 99 0346
        gbc.setState(0x242b, 0x41cd, 0x56e0, 0x1d5, 0x28bd, 0xa551, 0x1, 0x0);
        gbc.writeMem(0x242b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x41cd, gbc.sp());
        EXPECT(0x242d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0347
        gbc.setState(0xc13e, 0x7363, 0xc910, 0x3918, 0x119b, 0x6384, 0x0, 0x0);
        gbc.writeMem(0xc13e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x7363, gbc.sp());
        EXPECT(0xc140, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc13e));
        EXPECT(0x99, gbc.readMem(0xc13f));
        // CB 99 0348
        gbc.setState(0x91db, 0x73de, 0x4af0, 0xdfc4, 0x75da, 0x4f0f, 0x1, 0x0);
        gbc.writeMem(0x91db, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x73de, gbc.sp());
        EXPECT(0x91dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91db));
        EXPECT(0x99, gbc.readMem(0x91dc));
        // CB 99 0349
        gbc.setState(0x95a8, 0xb821, 0xef40, 0x4233, 0x1ed5, 0x501e, 0x1, 0x1);
        gbc.writeMem(0x95a8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xb821, gbc.sp());
        EXPECT(0x95aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95a8));
        EXPECT(0x99, gbc.readMem(0x95a9));
        // CB 99 034A
        gbc.setState(0x23ea, 0x5e9b, 0xb490, 0x3c51, 0x757e, 0xc0e5, 0x1, 0x0);
        gbc.writeMem(0x23ea, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x5e9b, gbc.sp());
        EXPECT(0x23ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 034B
        gbc.setState(0x7eab, 0xa6c6, 0xf130, 0x4145, 0xeb84, 0xd607, 0x1, 0x1);
        gbc.writeMem(0x7eab, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xa6c6, gbc.sp());
        EXPECT(0x7ead, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 034C
        gbc.setState(0x71e, 0xd3d2, 0x1d50, 0x50ed, 0x35f7, 0x3a49, 0x1, 0x1);
        gbc.writeMem(0x71e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xd3d2, gbc.sp());
        EXPECT(0x720, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 034D
        gbc.setState(0x6bbc, 0x8f3f, 0x35f0, 0xf744, 0x49fc, 0xe8b8, 0x1, 0x0);
        gbc.writeMem(0x6bbc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x8f3f, gbc.sp());
        EXPECT(0x6bbe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 034E
        gbc.setState(0xb93, 0xf342, 0x9fa0, 0xa36a, 0x27e1, 0xacbd, 0x1, 0x1);
        gbc.writeMem(0xb93, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xf342, gbc.sp());
        EXPECT(0xb95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 034F
        gbc.setState(0xbfcf, 0x326a, 0xc0d0, 0xb1c1, 0xedc6, 0x1228, 0x1, 0x0);
        gbc.writeMem(0xbfcf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x326a, gbc.sp());
        EXPECT(0xbfd1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfcf));
        EXPECT(0x99, gbc.readMem(0xbfd0));
        // CB 99 0350
        gbc.setState(0x4276, 0xc1ce, 0x9b70, 0xe4f3, 0xe29f, 0x6b20, 0x1, 0x1);
        gbc.writeMem(0x4276, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xc1ce, gbc.sp());
        EXPECT(0x4278, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0351
        gbc.setState(0x6d97, 0x80ed, 0xbcf0, 0x6f4a, 0x87b1, 0x79bf, 0x0, 0x0);
        gbc.writeMem(0x6d97, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x80ed, gbc.sp());
        EXPECT(0x6d99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0352
        gbc.setState(0x8016, 0x2780, 0xf330, 0xbd88, 0x58da, 0x6b71, 0x0, 0x0);
        gbc.writeMem(0x8016, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x2780, gbc.sp());
        EXPECT(0x8018, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8016));
        EXPECT(0x99, gbc.readMem(0x8017));
        // CB 99 0353
        gbc.setState(0x6716, 0x7d24, 0xd820, 0xd368, 0x296b, 0x9238, 0x1, 0x1);
        gbc.writeMem(0x6716, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x7d24, gbc.sp());
        EXPECT(0x6718, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0354
        gbc.setState(0x7f3a, 0xae18, 0xf7d0, 0x6adb, 0x2f4e, 0xa74c, 0x0, 0x1);
        gbc.writeMem(0x7f3a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xae18, gbc.sp());
        EXPECT(0x7f3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0355
        gbc.setState(0xe6ba, 0xcd3b, 0xde50, 0x9f54, 0x43ac, 0x41b0, 0x0, 0x1);
        gbc.writeMem(0xe6ba, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xcd3b, gbc.sp());
        EXPECT(0xe6bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6ba));
        EXPECT(0x99, gbc.readMem(0xe6bb));
        // CB 99 0356
        gbc.setState(0xbde5, 0x4a1b, 0xa8f0, 0x4040, 0x66c0, 0x6fe6, 0x1, 0x1);
        gbc.writeMem(0xbde5, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x4a1b, gbc.sp());
        EXPECT(0xbde7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbde5));
        EXPECT(0x99, gbc.readMem(0xbde6));
        // CB 99 0357
        gbc.setState(0x8657, 0x9d8d, 0xfcd0, 0xff, 0xc24b, 0x67bb, 0x0, 0x0);
        gbc.writeMem(0x8657, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x9d8d, gbc.sp());
        EXPECT(0x8659, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8657));
        EXPECT(0x99, gbc.readMem(0x8658));
        // CB 99 0358
        gbc.setState(0x3fe7, 0x355c, 0x7760, 0x7ece, 0x71a3, 0xf03c, 0x0, 0x1);
        gbc.writeMem(0x3fe7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x355c, gbc.sp());
        EXPECT(0x3fe9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0359
        gbc.setState(0x48f3, 0x34af, 0x20c0, 0x764b, 0xeb38, 0x3c53, 0x1, 0x0);
        gbc.writeMem(0x48f3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x34af, gbc.sp());
        EXPECT(0x48f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 035A
        gbc.setState(0xa972, 0x46e5, 0xb6b0, 0xc007, 0x59a3, 0x4c87, 0x0, 0x1);
        gbc.writeMem(0xa972, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x46e5, gbc.sp());
        EXPECT(0xa974, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa972));
        EXPECT(0x99, gbc.readMem(0xa973));
        // CB 99 035B
        gbc.setState(0x3417, 0x2b7e, 0xcf30, 0x5f43, 0x3188, 0xd964, 0x1, 0x1);
        gbc.writeMem(0x3417, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x2b7e, gbc.sp());
        EXPECT(0x3419, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 035C
        gbc.setState(0xd8d0, 0x8d0d, 0x61d0, 0x2e03, 0xe062, 0x5bd, 0x0, 0x0);
        gbc.writeMem(0xd8d0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x8d0d, gbc.sp());
        EXPECT(0xd8d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8d0));
        EXPECT(0x99, gbc.readMem(0xd8d1));
        // CB 99 035D
        gbc.setState(0xda16, 0x7217, 0x7590, 0x2ac2, 0x2c58, 0xf405, 0x0, 0x0);
        gbc.writeMem(0xda16, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x7217, gbc.sp());
        EXPECT(0xda18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda16));
        EXPECT(0x99, gbc.readMem(0xda17));
        // CB 99 035E
        gbc.setState(0x3a28, 0x1aa, 0x3f20, 0x4200, 0xec14, 0xfb8c, 0x0, 0x1);
        gbc.writeMem(0x3a28, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x1aa, gbc.sp());
        EXPECT(0x3a2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 035F
        gbc.setState(0x1ea7, 0x7046, 0x15d0, 0x3b05, 0x1abd, 0x1835, 0x1, 0x1);
        gbc.writeMem(0x1ea7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x7046, gbc.sp());
        EXPECT(0x1ea9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0360
        gbc.setState(0x4e4c, 0x540a, 0x6da0, 0xbeb2, 0xa2bc, 0x7aef, 0x1, 0x0);
        gbc.writeMem(0x4e4c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x540a, gbc.sp());
        EXPECT(0x4e4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0361
        gbc.setState(0x6451, 0xdd6f, 0x4ad0, 0x72df, 0xf7ae, 0x33d9, 0x0, 0x1);
        gbc.writeMem(0x6451, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xdd6f, gbc.sp());
        EXPECT(0x6453, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0362
        gbc.setState(0x72c1, 0x4730, 0x4840, 0xd154, 0x8868, 0xf798, 0x0, 0x1);
        gbc.writeMem(0x72c1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x4730, gbc.sp());
        EXPECT(0x72c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0364
        gbc.setState(0x7a7b, 0xb4ed, 0xa340, 0x7f2a, 0x8b06, 0x3327, 0x0, 0x0);
        gbc.writeMem(0x7a7b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xb4ed, gbc.sp());
        EXPECT(0x7a7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0365
        gbc.setState(0x7065, 0x5adc, 0x30, 0xf91e, 0x20b8, 0xaddf, 0x0, 0x0);
        gbc.writeMem(0x7065, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x5adc, gbc.sp());
        EXPECT(0x7067, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0366
        gbc.setState(0xada0, 0xdd52, 0x7c80, 0x2104, 0x52ec, 0xc86b, 0x1, 0x1);
        gbc.writeMem(0xada0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xdd52, gbc.sp());
        EXPECT(0xada2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xada0));
        EXPECT(0x99, gbc.readMem(0xada1));
        // CB 99 0367
        gbc.setState(0x564, 0x4ea7, 0xb160, 0x45d, 0xbc62, 0x6144, 0x1, 0x0);
        gbc.writeMem(0x564, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x4ea7, gbc.sp());
        EXPECT(0x566, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0368
        gbc.setState(0x9673, 0x1cbd, 0xce80, 0xe312, 0x6975, 0x1f0b, 0x1, 0x0);
        gbc.writeMem(0x9673, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x1cbd, gbc.sp());
        EXPECT(0x9675, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9673));
        EXPECT(0x99, gbc.readMem(0x9674));
        // CB 99 0369
        gbc.setState(0xbcf2, 0x5f7f, 0xe520, 0x387b, 0xb6b7, 0x7882, 0x1, 0x0);
        gbc.writeMem(0xbcf2, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x5f7f, gbc.sp());
        EXPECT(0xbcf4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcf2));
        EXPECT(0x99, gbc.readMem(0xbcf3));
        // CB 99 036A
        gbc.setState(0x433c, 0xf000, 0xd6e0, 0xb8ec, 0x118, 0xc213, 0x0, 0x1);
        gbc.writeMem(0x433c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xf000, gbc.sp());
        EXPECT(0x433e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 036B
        gbc.setState(0x8aaa, 0xbeab, 0x3f50, 0x87e9, 0x2880, 0x7e6a, 0x0, 0x1);
        gbc.writeMem(0x8aaa, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xbeab, gbc.sp());
        EXPECT(0x8aac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8aaa));
        EXPECT(0x99, gbc.readMem(0x8aab));
        // CB 99 036C
        gbc.setState(0x50ea, 0x40ed, 0xa540, 0x67bc, 0x9d14, 0x72a8, 0x1, 0x1);
        gbc.writeMem(0x50ea, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x40ed, gbc.sp());
        EXPECT(0x50ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 036D
        gbc.setState(0x3607, 0x75d4, 0xaef0, 0xe22d, 0x76c7, 0x772a, 0x0, 0x0);
        gbc.writeMem(0x3607, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x75d4, gbc.sp());
        EXPECT(0x3609, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 036E
        gbc.setState(0xaaef, 0xdf52, 0x5440, 0xa901, 0xbba7, 0xd897, 0x0, 0x0);
        gbc.writeMem(0xaaef, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xdf52, gbc.sp());
        EXPECT(0xaaf1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaaef));
        EXPECT(0x99, gbc.readMem(0xaaf0));
        // CB 99 036F
        gbc.setState(0x4898, 0x621b, 0xbc0, 0x47dc, 0x9d16, 0xe115, 0x1, 0x1);
        gbc.writeMem(0x4898, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x621b, gbc.sp());
        EXPECT(0x489a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0370
        gbc.setState(0x27bb, 0x1496, 0x92a0, 0xeca9, 0x877, 0x3a15, 0x0, 0x1);
        gbc.writeMem(0x27bb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x1496, gbc.sp());
        EXPECT(0x27bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0371
        gbc.setState(0xef50, 0x9dfc, 0x8ad0, 0x9ddb, 0x8fd0, 0x5993, 0x1, 0x1);
        gbc.writeMem(0xef50, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x9dfc, gbc.sp());
        EXPECT(0xef52, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef50));
        EXPECT(0x99, gbc.readMem(0xef51));
        // CB 99 0372
        gbc.setState(0xd88, 0x436, 0x3ab0, 0x55c3, 0x2025, 0x2423, 0x0, 0x0);
        gbc.writeMem(0xd88, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x436, gbc.sp());
        EXPECT(0xd8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0373
        gbc.setState(0xe1ba, 0xe405, 0x7f90, 0xffd2, 0xd659, 0x6190, 0x0, 0x0);
        gbc.writeMem(0xe1ba, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xe405, gbc.sp());
        EXPECT(0xe1bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1ba));
        EXPECT(0x99, gbc.readMem(0xe1bb));
        // CB 99 0374
        gbc.setState(0xa20a, 0x8104, 0x2520, 0xdbf1, 0x1dec, 0x541c, 0x1, 0x0);
        gbc.writeMem(0xa20a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x8104, gbc.sp());
        EXPECT(0xa20c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa20a));
        EXPECT(0x99, gbc.readMem(0xa20b));
        // CB 99 0375
        gbc.setState(0x8906, 0x5858, 0x2bc0, 0x4d31, 0xc20d, 0xfaa, 0x0, 0x0);
        gbc.writeMem(0x8906, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x5858, gbc.sp());
        EXPECT(0x8908, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8906));
        EXPECT(0x99, gbc.readMem(0x8907));
        // CB 99 0376
        gbc.setState(0x9982, 0xf14b, 0x5e50, 0x3e9a, 0x3861, 0xdefd, 0x0, 0x0);
        gbc.writeMem(0x9982, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xf14b, gbc.sp());
        EXPECT(0x9984, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9982));
        EXPECT(0x99, gbc.readMem(0x9983));
        // CB 99 0377
        gbc.setState(0x4eb, 0xf340, 0xd9c0, 0xa685, 0xc6d6, 0x58dc, 0x0, 0x1);
        gbc.writeMem(0x4eb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xf340, gbc.sp());
        EXPECT(0x4ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0378
        gbc.setState(0x7ee7, 0xda39, 0xafd0, 0x8bad, 0x280d, 0x521d, 0x1, 0x0);
        gbc.writeMem(0x7ee7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xda39, gbc.sp());
        EXPECT(0x7ee9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0379
        gbc.setState(0x9a30, 0xe37e, 0xa90, 0xd9fd, 0xbf10, 0x686a, 0x1, 0x0);
        gbc.writeMem(0x9a30, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xe37e, gbc.sp());
        EXPECT(0x9a32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a30));
        EXPECT(0x99, gbc.readMem(0x9a31));
        // CB 99 037A
        gbc.setState(0xa589, 0xcdaf, 0x32d0, 0xbe2a, 0x1854, 0x42c4, 0x0, 0x0);
        gbc.writeMem(0xa589, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xcdaf, gbc.sp());
        EXPECT(0xa58b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa589));
        EXPECT(0x99, gbc.readMem(0xa58a));
        // CB 99 037C
        gbc.setState(0x2710, 0xd8a7, 0xbca0, 0x4617, 0x3bd8, 0xf3c1, 0x1, 0x1);
        gbc.writeMem(0x2710, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xd8a7, gbc.sp());
        EXPECT(0x2712, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 037D
        gbc.setState(0xd39, 0x1cc7, 0x1cd0, 0x9de0, 0x4f20, 0x4749, 0x1, 0x0);
        gbc.writeMem(0xd39, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x1cc7, gbc.sp());
        EXPECT(0xd3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 037E
        gbc.setState(0x96d8, 0xf41b, 0xe170, 0x16ba, 0xe287, 0x8a72, 0x0, 0x1);
        gbc.writeMem(0x96d8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xf41b, gbc.sp());
        EXPECT(0x96da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96d8));
        EXPECT(0x99, gbc.readMem(0x96d9));
        // CB 99 037F
        gbc.setState(0x98ec, 0xb4b6, 0x8950, 0xdec7, 0xf234, 0xe519, 0x1, 0x1);
        gbc.writeMem(0x98ec, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xb4b6, gbc.sp());
        EXPECT(0x98ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98ec));
        EXPECT(0x99, gbc.readMem(0x98ed));
        // CB 99 0380
        gbc.setState(0x274b, 0x801f, 0xefb0, 0x8aeb, 0x28a6, 0xaa22, 0x1, 0x1);
        gbc.writeMem(0x274b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x801f, gbc.sp());
        EXPECT(0x274d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0381
        gbc.setState(0x163d, 0xe233, 0x5cb0, 0x287a, 0xd78f, 0xf22c, 0x1, 0x0);
        gbc.writeMem(0x163d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xe233, gbc.sp());
        EXPECT(0x163f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0382
        gbc.setState(0x82ac, 0x67f6, 0xb5e0, 0xb48d, 0x8ec2, 0x8fba, 0x0, 0x1);
        gbc.writeMem(0x82ac, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x67f6, gbc.sp());
        EXPECT(0x82ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82ac));
        EXPECT(0x99, gbc.readMem(0x82ad));
        // CB 99 0383
        gbc.setState(0x3f6f, 0x9f1, 0xaaa0, 0xe7cf, 0x6e20, 0x9222, 0x0, 0x0);
        gbc.writeMem(0x3f6f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x9f1, gbc.sp());
        EXPECT(0x3f71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0384
        gbc.setState(0x5af3, 0xb2f3, 0xe770, 0xc2cf, 0x4553, 0xc19a, 0x0, 0x1);
        gbc.writeMem(0x5af3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xb2f3, gbc.sp());
        EXPECT(0x5af5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0385
        gbc.setState(0x53f7, 0xf5c6, 0x2cb0, 0xe2b2, 0xfd35, 0x6a0, 0x1, 0x0);
        gbc.writeMem(0x53f7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xf5c6, gbc.sp());
        EXPECT(0x53f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0387
        gbc.setState(0xa45f, 0xbeb0, 0x9a40, 0x601a, 0x63ac, 0x2696, 0x0, 0x0);
        gbc.writeMem(0xa45f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xbeb0, gbc.sp());
        EXPECT(0xa461, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa45f));
        EXPECT(0x99, gbc.readMem(0xa460));
        // CB 99 0388
        gbc.setState(0x7945, 0x731e, 0xa6d0, 0xc2a0, 0xae37, 0xd2c6, 0x1, 0x1);
        gbc.writeMem(0x7945, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x731e, gbc.sp());
        EXPECT(0x7947, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0389
        gbc.setState(0x758e, 0x7325, 0x6a80, 0xfdd0, 0x62f5, 0x2489, 0x0, 0x1);
        gbc.writeMem(0x758e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x7325, gbc.sp());
        EXPECT(0x7590, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 038B
        gbc.setState(0x3127, 0x67d4, 0xae70, 0x2c43, 0x7e58, 0x6c09, 0x0, 0x1);
        gbc.writeMem(0x3127, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x67d4, gbc.sp());
        EXPECT(0x3129, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 038C
        gbc.setState(0xa0dc, 0x2b55, 0xee90, 0xf78a, 0x4ba6, 0x49e, 0x0, 0x1);
        gbc.writeMem(0xa0dc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x2b55, gbc.sp());
        EXPECT(0xa0de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0dc));
        EXPECT(0x99, gbc.readMem(0xa0dd));
        // CB 99 038D
        gbc.setState(0x8107, 0x47eb, 0x4680, 0xae9a, 0x820b, 0xad0d, 0x1, 0x0);
        gbc.writeMem(0x8107, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x47eb, gbc.sp());
        EXPECT(0x8109, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8107));
        EXPECT(0x99, gbc.readMem(0x8108));
        // CB 99 038E
        gbc.setState(0x37a8, 0x2c00, 0xf490, 0x132, 0x8822, 0x3444, 0x1, 0x0);
        gbc.writeMem(0x37a8, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x2c00, gbc.sp());
        EXPECT(0x37aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 038F
        gbc.setState(0xd4c9, 0xbb5b, 0xba00, 0x84a2, 0x8c0e, 0x178b, 0x0, 0x1);
        gbc.writeMem(0xd4c9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xbb5b, gbc.sp());
        EXPECT(0xd4cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4c9));
        EXPECT(0x99, gbc.readMem(0xd4ca));
        // CB 99 0390
        gbc.setState(0xa474, 0xbc1f, 0x7570, 0x5dd2, 0x60c5, 0x4742, 0x1, 0x0);
        gbc.writeMem(0xa474, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xbc1f, gbc.sp());
        EXPECT(0xa476, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa474));
        EXPECT(0x99, gbc.readMem(0xa475));
        // CB 99 0391
        gbc.setState(0x72bc, 0x48cb, 0xbc10, 0xcd40, 0xc353, 0x4d20, 0x1, 0x1);
        gbc.writeMem(0x72bc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x48cb, gbc.sp());
        EXPECT(0x72be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0392
        gbc.setState(0x660e, 0x29ad, 0xc460, 0x1488, 0x63b, 0xf71d, 0x0, 0x1);
        gbc.writeMem(0x660e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x29ad, gbc.sp());
        EXPECT(0x6610, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 0393
        gbc.setState(0x3daf, 0x18ad, 0x7ed0, 0x9c18, 0xc42a, 0x8581, 0x1, 0x0);
        gbc.writeMem(0x3daf, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x18ad, gbc.sp());
        EXPECT(0x3db1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0394
        gbc.setState(0x9755, 0x4e2c, 0x4df0, 0x57f, 0x755f, 0x5276, 0x1, 0x0);
        gbc.writeMem(0x9755, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x4e2c, gbc.sp());
        EXPECT(0x9757, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9755));
        EXPECT(0x99, gbc.readMem(0x9756));
        // CB 99 0396
        gbc.setState(0xc618, 0xd2d0, 0xab70, 0x94fe, 0x423a, 0xf8a3, 0x1, 0x1);
        gbc.writeMem(0xc618, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xd2d0, gbc.sp());
        EXPECT(0xc61a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc618));
        EXPECT(0x99, gbc.readMem(0xc619));
        // CB 99 0397
        gbc.setState(0x67ab, 0x2490, 0x7b50, 0xf497, 0xf509, 0x5c4d, 0x1, 0x1);
        gbc.writeMem(0x67ab, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x2490, gbc.sp());
        EXPECT(0x67ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 0398
        gbc.setState(0xc6d9, 0xac0e, 0xdfd0, 0xdd01, 0x9fc2, 0xa87b, 0x0, 0x0);
        gbc.writeMem(0xc6d9, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xac0e, gbc.sp());
        EXPECT(0xc6db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6d9));
        EXPECT(0x99, gbc.readMem(0xc6da));
        // CB 99 0399
        gbc.setState(0xad07, 0x3172, 0x6e70, 0xf117, 0xcb7b, 0x896d, 0x1, 0x0);
        gbc.writeMem(0xad07, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x3172, gbc.sp());
        EXPECT(0xad09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad07));
        EXPECT(0x99, gbc.readMem(0xad08));
        // CB 99 039A
        gbc.setState(0x1b26, 0x4c68, 0x7f0, 0x3a48, 0xd726, 0xd324, 0x0, 0x0);
        gbc.writeMem(0x1b26, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x4c68, gbc.sp());
        EXPECT(0x1b28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 039B
        gbc.setState(0x13ef, 0x8925, 0x3e70, 0x65a4, 0x6772, 0x8e6, 0x1, 0x1);
        gbc.writeMem(0x13ef, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x8925, gbc.sp());
        EXPECT(0x13f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 039D
        gbc.setState(0x9d68, 0x26ce, 0x2310, 0x8fcf, 0xb39a, 0xc695, 0x1, 0x0);
        gbc.writeMem(0x9d68, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x26ce, gbc.sp());
        EXPECT(0x9d6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d68));
        EXPECT(0x99, gbc.readMem(0x9d69));
        // CB 99 039F
        gbc.setState(0x9417, 0xcbfc, 0xfa40, 0xa9f, 0xeb53, 0x9e48, 0x0, 0x0);
        gbc.writeMem(0x9417, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xcbfc, gbc.sp());
        EXPECT(0x9419, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9417));
        EXPECT(0x99, gbc.readMem(0x9418));
        // CB 99 03A0
        gbc.setState(0x9871, 0xea86, 0xc1b0, 0xe1d3, 0xf80b, 0xdbc6, 0x1, 0x0);
        gbc.writeMem(0x9871, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xea86, gbc.sp());
        EXPECT(0x9873, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9871));
        EXPECT(0x99, gbc.readMem(0x9872));
        // CB 99 03A1
        gbc.setState(0xb2a, 0xd4b, 0x2e80, 0x6d21, 0xa0a, 0x96ef, 0x0, 0x0);
        gbc.writeMem(0xb2a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xd4b, gbc.sp());
        EXPECT(0xb2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03A2
        gbc.setState(0xd4fe, 0x802d, 0x3240, 0xd094, 0xa65d, 0x45bb, 0x1, 0x0);
        gbc.writeMem(0xd4fe, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x802d, gbc.sp());
        EXPECT(0xd500, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4fe));
        EXPECT(0x99, gbc.readMem(0xd4ff));
        // CB 99 03A3
        gbc.setState(0x7e41, 0xb2e5, 0xf1d0, 0x2d8c, 0xc792, 0xc44b, 0x1, 0x0);
        gbc.writeMem(0x7e41, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xb2e5, gbc.sp());
        EXPECT(0x7e43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03A4
        gbc.setState(0xaebc, 0x9f4c, 0x5a0, 0x13bc, 0x2f53, 0xe77b, 0x1, 0x0);
        gbc.writeMem(0xaebc, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x9f4c, gbc.sp());
        EXPECT(0xaebe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaebc));
        EXPECT(0x99, gbc.readMem(0xaebd));
        // CB 99 03A5
        gbc.setState(0xe80c, 0xe5f6, 0x3970, 0xfab6, 0xf92f, 0x64aa, 0x0, 0x1);
        gbc.writeMem(0xe80c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xe5f6, gbc.sp());
        EXPECT(0xe80e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe80c));
        EXPECT(0x99, gbc.readMem(0xe80d));
        // CB 99 03A6
        gbc.setState(0xb27e, 0xdb86, 0x4f30, 0x149e, 0xfca6, 0x9d23, 0x1, 0x1);
        gbc.writeMem(0xb27e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xdb86, gbc.sp());
        EXPECT(0xb280, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb27e));
        EXPECT(0x99, gbc.readMem(0xb27f));
        // CB 99 03A7
        gbc.setState(0x3e6c, 0xd3a8, 0x3070, 0x9ab7, 0xe35e, 0x4606, 0x0, 0x0);
        gbc.writeMem(0x3e6c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xd3a8, gbc.sp());
        EXPECT(0x3e6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03A8
        gbc.setState(0x9d4b, 0x4fd0, 0x9e30, 0x5bb2, 0x72eb, 0x8d20, 0x1, 0x0);
        gbc.writeMem(0x9d4b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x4fd0, gbc.sp());
        EXPECT(0x9d4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d4b));
        EXPECT(0x99, gbc.readMem(0x9d4c));
        // CB 99 03A9
        gbc.setState(0x37e7, 0xa444, 0xed10, 0x72f1, 0xd334, 0x3a21, 0x0, 0x0);
        gbc.writeMem(0x37e7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xa444, gbc.sp());
        EXPECT(0x37e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03AA
        gbc.setState(0xcb64, 0x313f, 0x52e0, 0x29f1, 0x4769, 0xd2b8, 0x1, 0x1);
        gbc.writeMem(0xcb64, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x313f, gbc.sp());
        EXPECT(0xcb66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb64));
        EXPECT(0x99, gbc.readMem(0xcb65));
        // CB 99 03AB
        gbc.setState(0x6d5e, 0xd947, 0x5470, 0x6bcd, 0xbe7e, 0x2e30, 0x0, 0x0);
        gbc.writeMem(0x6d5e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xd947, gbc.sp());
        EXPECT(0x6d60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03AC
        gbc.setState(0xe226, 0x4cb7, 0x1620, 0x717d, 0x359f, 0x8d3e, 0x0, 0x1);
        gbc.writeMem(0xe226, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x4cb7, gbc.sp());
        EXPECT(0xe228, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe226));
        EXPECT(0x99, gbc.readMem(0xe227));
        // CB 99 03AD
        gbc.setState(0xb54e, 0x4db7, 0x14e0, 0x79d4, 0xbf0, 0x52d9, 0x1, 0x0);
        gbc.writeMem(0xb54e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x4db7, gbc.sp());
        EXPECT(0xb550, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb54e));
        EXPECT(0x99, gbc.readMem(0xb54f));
        // CB 99 03AE
        gbc.setState(0x9489, 0x7c8d, 0xe880, 0xec06, 0xdf6, 0x91c3, 0x0, 0x1);
        gbc.writeMem(0x9489, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x7c8d, gbc.sp());
        EXPECT(0x948b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9489));
        EXPECT(0x99, gbc.readMem(0x948a));
        // CB 99 03AF
        gbc.setState(0xd066, 0xb370, 0x99b0, 0xe069, 0xe168, 0xd76e, 0x0, 0x1);
        gbc.writeMem(0xd066, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xb370, gbc.sp());
        EXPECT(0xd068, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd066));
        EXPECT(0x99, gbc.readMem(0xd067));
        // CB 99 03B0
        gbc.setState(0x959e, 0x4787, 0x8c30, 0xbe3f, 0x31f9, 0x1a1, 0x1, 0x1);
        gbc.writeMem(0x959e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x4787, gbc.sp());
        EXPECT(0x95a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x959e));
        EXPECT(0x99, gbc.readMem(0x959f));
        // CB 99 03B2
        gbc.setState(0x93ef, 0xb799, 0xb50, 0xaf9f, 0x9ac5, 0xfa50, 0x1, 0x0);
        gbc.writeMem(0x93ef, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xb799, gbc.sp());
        EXPECT(0x93f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93ef));
        EXPECT(0x99, gbc.readMem(0x93f0));
        // CB 99 03B3
        gbc.setState(0x35d3, 0x6d1b, 0x4330, 0x1ef0, 0xeea0, 0xac0d, 0x0, 0x0);
        gbc.writeMem(0x35d3, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x6d1b, gbc.sp());
        EXPECT(0x35d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03B4
        gbc.setState(0x6480, 0xe71a, 0x8cf0, 0x9a03, 0xa0de, 0x7f10, 0x0, 0x0);
        gbc.writeMem(0x6480, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xe71a, gbc.sp());
        EXPECT(0x6482, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03B5
        gbc.setState(0x5bf1, 0x6b29, 0x1c0, 0xf152, 0xece0, 0x5510, 0x1, 0x0);
        gbc.writeMem(0x5bf1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x6b29, gbc.sp());
        EXPECT(0x5bf3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03B6
        gbc.setState(0x2387, 0xbc92, 0xded0, 0x3c1, 0x9ec8, 0x5a6a, 0x1, 0x1);
        gbc.writeMem(0x2387, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xbc92, gbc.sp());
        EXPECT(0x2389, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03B7
        gbc.setState(0x1695, 0x28af, 0xfa40, 0xda89, 0x813f, 0xe1bc, 0x1, 0x0);
        gbc.writeMem(0x1695, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x28af, gbc.sp());
        EXPECT(0x1697, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03B8
        gbc.setState(0x4f2b, 0x9ccd, 0x1940, 0xa7f, 0xb0e5, 0x906c, 0x0, 0x0);
        gbc.writeMem(0x4f2b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x9ccd, gbc.sp());
        EXPECT(0x4f2d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03B9
        gbc.setState(0xbe13, 0x377a, 0x80c0, 0x323, 0xf5b8, 0x2004, 0x1, 0x0);
        gbc.writeMem(0xbe13, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x377a, gbc.sp());
        EXPECT(0xbe15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe13));
        EXPECT(0x99, gbc.readMem(0xbe14));
        // CB 99 03BA
        gbc.setState(0x174b, 0xc38, 0xb060, 0x177f, 0x1ee6, 0x321e, 0x1, 0x1);
        gbc.writeMem(0x174b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xc38, gbc.sp());
        EXPECT(0x174d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03BB
        gbc.setState(0x8c14, 0xee06, 0x7a20, 0x1f41, 0xacef, 0x7183, 0x0, 0x0);
        gbc.writeMem(0x8c14, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xee06, gbc.sp());
        EXPECT(0x8c16, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c14));
        EXPECT(0x99, gbc.readMem(0x8c15));
        // CB 99 03BC
        gbc.setState(0x66b7, 0xae0b, 0xdc50, 0xe942, 0x4f80, 0xad11, 0x0, 0x0);
        gbc.writeMem(0x66b7, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xae0b, gbc.sp());
        EXPECT(0x66b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03BD
        gbc.setState(0xeb7f, 0x74fc, 0x5650, 0xf143, 0xcdb2, 0xc6af, 0x0, 0x1);
        gbc.writeMem(0xeb7f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x74fc, gbc.sp());
        EXPECT(0xeb81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb7f));
        EXPECT(0x99, gbc.readMem(0xeb80));
        // CB 99 03BE
        gbc.setState(0x9d31, 0xc2de, 0xecb0, 0xb19f, 0xd477, 0xa1ad, 0x1, 0x1);
        gbc.writeMem(0x9d31, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xc2de, gbc.sp());
        EXPECT(0x9d33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d31));
        EXPECT(0x99, gbc.readMem(0x9d32));
        // CB 99 03BF
        gbc.setState(0xe37b, 0x2560, 0xa230, 0x7c4b, 0xd6a3, 0x723e, 0x1, 0x0);
        gbc.writeMem(0xe37b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x2560, gbc.sp());
        EXPECT(0xe37d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe37b));
        EXPECT(0x99, gbc.readMem(0xe37c));
        // CB 99 03C0
        gbc.setState(0x4f0b, 0x5bb, 0x4260, 0x1ec8, 0x3f9a, 0x1fc4, 0x1, 0x1);
        gbc.writeMem(0x4f0b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x5bb, gbc.sp());
        EXPECT(0x4f0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03C2
        gbc.setState(0x2586, 0xfd19, 0xaa0, 0xf399, 0x1ba6, 0x626f, 0x1, 0x0);
        gbc.writeMem(0x2586, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xfd19, gbc.sp());
        EXPECT(0x2588, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03C3
        gbc.setState(0x2034, 0x88e2, 0x6660, 0x8337, 0x6631, 0x5d37, 0x1, 0x0);
        gbc.writeMem(0x2034, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x88e2, gbc.sp());
        EXPECT(0x2036, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03C4
        gbc.setState(0x59d1, 0x2e21, 0x5660, 0xc91d, 0x89b, 0xc91, 0x1, 0x1);
        gbc.writeMem(0x59d1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x2e21, gbc.sp());
        EXPECT(0x59d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03C5
        gbc.setState(0x7c96, 0x9b71, 0x3810, 0x9304, 0x3dd1, 0x58e8, 0x1, 0x0);
        gbc.writeMem(0x7c96, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x9b71, gbc.sp());
        EXPECT(0x7c98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03C6
        gbc.setState(0x8acb, 0xdb9, 0x8190, 0xf7fa, 0x6cd0, 0xd5c9, 0x1, 0x0);
        gbc.writeMem(0x8acb, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xdb9, gbc.sp());
        EXPECT(0x8acd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8acb));
        EXPECT(0x99, gbc.readMem(0x8acc));
        // CB 99 03C7
        gbc.setState(0xe51b, 0xe33f, 0xca40, 0x8b8, 0x8fd7, 0xd044, 0x1, 0x1);
        gbc.writeMem(0xe51b, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xe33f, gbc.sp());
        EXPECT(0xe51d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe51b));
        EXPECT(0x99, gbc.readMem(0xe51c));
        // CB 99 03C8
        gbc.setState(0xbdad, 0x678a, 0xe860, 0xe463, 0x6df8, 0x34f7, 0x0, 0x0);
        gbc.writeMem(0xbdad, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x678a, gbc.sp());
        EXPECT(0xbdaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdad));
        EXPECT(0x99, gbc.readMem(0xbdae));
        // CB 99 03C9
        gbc.setState(0x53a0, 0xf720, 0x32b0, 0x707, 0xa822, 0xc22f, 0x1, 0x0);
        gbc.writeMem(0x53a0, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xf720, gbc.sp());
        EXPECT(0x53a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03CA
        gbc.setState(0x6715, 0x676b, 0xd510, 0x5ec, 0xfa25, 0x6e6b, 0x0, 0x0);
        gbc.writeMem(0x6715, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x676b, gbc.sp());
        EXPECT(0x6717, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03CC
        gbc.setState(0xd541, 0x62b8, 0x1480, 0x7ee9, 0xeb54, 0x626, 0x1, 0x1);
        gbc.writeMem(0xd541, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x62b8, gbc.sp());
        EXPECT(0xd543, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd541));
        EXPECT(0x99, gbc.readMem(0xd542));
        // CB 99 03CD
        gbc.setState(0x8968, 0xb6ee, 0xe7e0, 0x22fa, 0x9b2b, 0x4fc, 0x1, 0x1);
        gbc.writeMem(0x8968, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xb6ee, gbc.sp());
        EXPECT(0x896a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8968));
        EXPECT(0x99, gbc.readMem(0x8969));
        // CB 99 03CE
        gbc.setState(0x207c, 0xe859, 0xfd70, 0xe8a4, 0x6339, 0xa2fb, 0x1, 0x0);
        gbc.writeMem(0x207c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xe859, gbc.sp());
        EXPECT(0x207e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03CF
        gbc.setState(0x4705, 0x4236, 0x4060, 0xc3b8, 0x9518, 0x78d8, 0x0, 0x1);
        gbc.writeMem(0x4705, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x4236, gbc.sp());
        EXPECT(0x4707, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03D0
        gbc.setState(0x8d5f, 0x803b, 0x8530, 0x3b82, 0x9b99, 0x705e, 0x1, 0x0);
        gbc.writeMem(0x8d5f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x803b, gbc.sp());
        EXPECT(0x8d61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d5f));
        EXPECT(0x99, gbc.readMem(0x8d60));
        // CB 99 03D2
        gbc.setState(0xabd6, 0xa9e2, 0x8410, 0xa8a0, 0x99a, 0xe498, 0x0, 0x0);
        gbc.writeMem(0xabd6, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xa9e2, gbc.sp());
        EXPECT(0xabd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabd6));
        EXPECT(0x99, gbc.readMem(0xabd7));
        // CB 99 03D3
        gbc.setState(0xab83, 0xf2dc, 0xd780, 0x4f0d, 0x658d, 0xb419, 0x1, 0x0);
        gbc.writeMem(0xab83, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xf2dc, gbc.sp());
        EXPECT(0xab85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab83));
        EXPECT(0x99, gbc.readMem(0xab84));
        // CB 99 03D4
        gbc.setState(0x875c, 0xe0db, 0xb8e0, 0xccb1, 0x9b97, 0x7da3, 0x0, 0x0);
        gbc.writeMem(0x875c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xe0db, gbc.sp());
        EXPECT(0x875e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x875c));
        EXPECT(0x99, gbc.readMem(0x875d));
        // CB 99 03D6
        gbc.setState(0xcd49, 0x4a79, 0x8350, 0x71f, 0x6c3f, 0x415a, 0x1, 0x1);
        gbc.writeMem(0xcd49, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x4a79, gbc.sp());
        EXPECT(0xcd4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd49));
        EXPECT(0x99, gbc.readMem(0xcd4a));
        // CB 99 03D7
        gbc.setState(0x5c3d, 0x5329, 0x5960, 0x2c8a, 0xd64d, 0x9b2b, 0x0, 0x0);
        gbc.writeMem(0x5c3d, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x5329, gbc.sp());
        EXPECT(0x5c3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03D8
        gbc.setState(0x5257, 0x1e77, 0x3900, 0x17b0, 0x385b, 0x18f3, 0x0, 0x1);
        gbc.writeMem(0x5257, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x1e77, gbc.sp());
        EXPECT(0x5259, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03D9
        gbc.setState(0x9aea, 0x2f19, 0xb70, 0x2937, 0x8bba, 0x5ee, 0x0, 0x0);
        gbc.writeMem(0x9aea, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x2f19, gbc.sp());
        EXPECT(0x9aec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9aea));
        EXPECT(0x99, gbc.readMem(0x9aeb));
        // CB 99 03DA
        gbc.setState(0x521c, 0xb044, 0x75c0, 0x1f2e, 0x1d18, 0xe473, 0x0, 0x1);
        gbc.writeMem(0x521c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xb044, gbc.sp());
        EXPECT(0x521e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03DB
        gbc.setState(0xbf48, 0xb524, 0xec10, 0xca56, 0xdb2b, 0x2db4, 0x0, 0x1);
        gbc.writeMem(0xbf48, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xb524, gbc.sp());
        EXPECT(0xbf4a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf48));
        EXPECT(0x99, gbc.readMem(0xbf49));
        // CB 99 03DC
        gbc.setState(0x359, 0x9f13, 0x9fc0, 0xfeeb, 0xb906, 0x78c3, 0x1, 0x0);
        gbc.writeMem(0x359, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x9f13, gbc.sp());
        EXPECT(0x35b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03DD
        gbc.setState(0x19a1, 0x4bf7, 0x9130, 0x9a3b, 0xb65c, 0xfd92, 0x0, 0x0);
        gbc.writeMem(0x19a1, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x4bf7, gbc.sp());
        EXPECT(0x19a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03DE
        gbc.setState(0x209c, 0xe44c, 0x6f20, 0x9b34, 0x35df, 0x1228, 0x1, 0x0);
        gbc.writeMem(0x209c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xe44c, gbc.sp());
        EXPECT(0x209e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03DF
        gbc.setState(0x26db, 0x4e56, 0x4520, 0xae14, 0x3e6c, 0x5701, 0x1, 0x1);
        gbc.writeMem(0x26db, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x4e56, gbc.sp());
        EXPECT(0x26dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03E0
        gbc.setState(0x3d17, 0x388, 0x8430, 0x5651, 0x4e80, 0x4b2, 0x0, 0x0);
        gbc.writeMem(0x3d17, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x388, gbc.sp());
        EXPECT(0x3d19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03E1
        gbc.setState(0x6e11, 0x2378, 0xc4f0, 0xf0db, 0x3f9f, 0xe92f, 0x0, 0x1);
        gbc.writeMem(0x6e11, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x2378, gbc.sp());
        EXPECT(0x6e13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 99 03E2
        gbc.setState(0xc291, 0x938e, 0x7530, 0xb64a, 0xb74a, 0xa1de, 0x0, 0x1);
        gbc.writeMem(0xc291, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x938e, gbc.sp());
        EXPECT(0xc293, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc291));
        EXPECT(0x99, gbc.readMem(0xc292));
        // CB 99 03E3
        gbc.setState(0x3793, 0xc250, 0x4b20, 0xe866, 0xc98e, 0x17fe, 0x1, 0x0);
        gbc.writeMem(0x3793, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xc250, gbc.sp());
        EXPECT(0x3795, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03E4
        gbc.setState(0xb52e, 0x8291, 0x1fd0, 0x5c87, 0x84fa, 0x79f8, 0x1, 0x0);
        gbc.writeMem(0xb52e, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x8291, gbc.sp());
        EXPECT(0xb530, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb52e));
        EXPECT(0x99, gbc.readMem(0xb52f));
        // CB 99 03E5
        gbc.setState(0x571f, 0x2fed, 0xa00, 0x44d9, 0xd7a9, 0x6315, 0x1, 0x0);
        gbc.writeMem(0x571f, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x2fed, gbc.sp());
        EXPECT(0x5721, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 99 03E6
        gbc.setState(0x807a, 0xdcd4, 0x50f0, 0xefd2, 0x349a, 0x118, 0x0, 0x1);
        gbc.writeMem(0x807a, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xdcd4, gbc.sp());
        EXPECT(0x807c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x807a));
        EXPECT(0x99, gbc.readMem(0x807b));
        // CB 99 03E7
        gbc.setState(0xb24c, 0x832a, 0xac80, 0x857c, 0x2653, 0x6c3a, 0x0, 0x1);
        gbc.writeMem(0xb24c, { 0xcb, 0x99 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x832a, gbc.sp());
        EXPECT(0xb24e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb24c));
        EXPECT(0x99, gbc.readMem(0xb24d));
    }
