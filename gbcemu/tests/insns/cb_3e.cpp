#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_3e)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_3e) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 3E 0004
        gbc.setState(0xd7b3, 0xa5e, 0xe480, 0xc3e2, 0xc265, 0x95ad, 0x0, 0x1);
        gbc.writeMem(0x95ad, { 0xed });
        gbc.writeMem(0xd7b3, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa5e);
        EXPECT(gbc.pc(), 0xd7b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ad), 0x76);
        EXPECT(gbc.readMem(0xd7b3), 0xcb);
        EXPECT(gbc.readMem(0xd7b4), 0x3e);
        // CB 3E 0007
        gbc.setState(0x7a35, 0x25fe, 0x8bf0, 0x1014, 0x3032, 0xdf6f, 0x1, 0x1);
        gbc.writeMem(0x7a35, { 0xcb, 0x3e });
        gbc.writeMem(0xdf6f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x25fe);
        EXPECT(gbc.pc(), 0x7a37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf6f), 0x23);
        // CB 3E 0009
        gbc.setState(0xce76, 0xbd88, 0x21b0, 0x681d, 0x8a9f, 0xa130, 0x0, 0x0);
        gbc.writeMem(0xa130, { 0xc3 });
        gbc.writeMem(0xce76, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbd88);
        EXPECT(gbc.pc(), 0xce78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa130), 0x61);
        EXPECT(gbc.readMem(0xce76), 0xcb);
        EXPECT(gbc.readMem(0xce77), 0x3e);
        // CB 3E 000A
        gbc.setState(0xad5d, 0xd980, 0xe8b0, 0x6a1e, 0x5d42, 0x8637, 0x1, 0x0);
        gbc.writeMem(0x8637, { 0xcc });
        gbc.writeMem(0xad5d, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd980);
        EXPECT(gbc.pc(), 0xad5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8637), 0x66);
        EXPECT(gbc.readMem(0xad5d), 0xcb);
        EXPECT(gbc.readMem(0xad5e), 0x3e);
        // CB 3E 000B
        gbc.setState(0x9cf, 0xb38, 0xa200, 0xee1f, 0xd346, 0x9126, 0x0, 0x1);
        gbc.writeMem(0x9cf, { 0xcb, 0x3e });
        gbc.writeMem(0x9126, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb38);
        EXPECT(gbc.pc(), 0x9d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9126), 0x29);
        // CB 3E 000C
        gbc.setState(0x8439, 0x3004, 0xcf90, 0xa1ed, 0xfe17, 0xe57f, 0x0, 0x0);
        gbc.writeMem(0x8439, { 0xcb, 0x3e });
        gbc.writeMem(0xe57f, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3004);
        EXPECT(gbc.pc(), 0x843b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8439), 0xcb);
        EXPECT(gbc.readMem(0x843a), 0x3e);
        EXPECT(gbc.readMem(0xe57f), 0x43);
        // CB 3E 0010
        gbc.setState(0x1d68, 0x48fb, 0x1d70, 0x490c, 0x722a, 0xdb31, 0x0, 0x0);
        gbc.writeMem(0x1d68, { 0xcb, 0x3e });
        gbc.writeMem(0xdb31, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x48fb);
        EXPECT(gbc.pc(), 0x1d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb31), 0x10);
        // CB 3E 0011
        gbc.setState(0x6d73, 0x8885, 0x5ef0, 0xde65, 0xcb25, 0x8008, 0x1, 0x0);
        gbc.writeMem(0x6d73, { 0xcb, 0x3e });
        gbc.writeMem(0x8008, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8885);
        EXPECT(gbc.pc(), 0x6d75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8008), 0x6);
        // CB 3E 0013
        gbc.setState(0xbaef, 0xaee1, 0x4030, 0x2899, 0xd9ac, 0xe2ab, 0x1, 0x1);
        gbc.writeMem(0xbaef, { 0xcb, 0x3e });
        gbc.writeMem(0xe2ab, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xaee1);
        EXPECT(gbc.pc(), 0xbaf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaef), 0xcb);
        EXPECT(gbc.readMem(0xbaf0), 0x3e);
        EXPECT(gbc.readMem(0xe2ab), 0x13);
        // CB 3E 0014
        gbc.setState(0x59c0, 0xd198, 0x3350, 0xc05b, 0x1def, 0xa47f, 0x1, 0x1);
        gbc.writeMem(0x59c0, { 0xcb, 0x3e });
        gbc.writeMem(0xa47f, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd198);
        EXPECT(gbc.pc(), 0x59c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa47f), 0x2c);
        // CB 3E 0016
        gbc.setState(0x54bb, 0x675, 0x4320, 0xcacd, 0xed7a, 0xc567, 0x1, 0x0);
        gbc.writeMem(0x54bb, { 0xcb, 0x3e });
        gbc.writeMem(0xc567, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x675);
        EXPECT(gbc.pc(), 0x54bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc567), 0x2d);
        // CB 3E 0017
        gbc.setState(0x5036, 0xcda6, 0xca20, 0x412d, 0x986b, 0xccd6, 0x0, 0x0);
        gbc.writeMem(0x5036, { 0xcb, 0x3e });
        gbc.writeMem(0xccd6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xcda6);
        EXPECT(gbc.pc(), 0x5038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd6), 0x6);
        // CB 3E 001C
        gbc.setState(0x9722, 0x517e, 0x27e0, 0x794b, 0x3fe4, 0xfb9e, 0x0, 0x0);
        gbc.writeMem(0x9722, { 0xcb, 0x3e });
        gbc.writeMem(0xfb9e, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x517e);
        EXPECT(gbc.pc(), 0x9724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9722), 0xcb);
        EXPECT(gbc.readMem(0x9723), 0x3e);
        EXPECT(gbc.readMem(0xfb9e), 0x31);
        // CB 3E 001E
        gbc.setState(0x2120, 0xc89e, 0xe010, 0x4a9b, 0x3eaa, 0xd6a1, 0x1, 0x1);
        gbc.writeMem(0x2120, { 0xcb, 0x3e });
        gbc.writeMem(0xd6a1, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc89e);
        EXPECT(gbc.pc(), 0x2122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a1), 0x2b);
        // CB 3E 001F
        gbc.setState(0x416b, 0x3d, 0x3b10, 0x6339, 0xf4f1, 0x8ce6, 0x1, 0x1);
        gbc.writeMem(0x416b, { 0xcb, 0x3e });
        gbc.writeMem(0x8ce6, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3d);
        EXPECT(gbc.pc(), 0x416d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce6), 0x5c);
        // CB 3E 0022
        gbc.setState(0x3d07, 0x2f15, 0x8320, 0x1c2, 0x99c5, 0xb269, 0x1, 0x0);
        gbc.writeMem(0x3d07, { 0xcb, 0x3e });
        gbc.writeMem(0xb269, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2f15);
        EXPECT(gbc.pc(), 0x3d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb269), 0x49);
        // CB 3E 0025
        gbc.setState(0x1ef7, 0xf80d, 0xca60, 0x3481, 0x9bc3, 0xc3ef, 0x0, 0x0);
        gbc.writeMem(0x1ef7, { 0xcb, 0x3e });
        gbc.writeMem(0xc3ef, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf80d);
        EXPECT(gbc.pc(), 0x1ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ef), 0x3a);
        // CB 3E 0026
        gbc.setState(0xdcf7, 0x5f18, 0xdde0, 0x3c65, 0xd4f4, 0xddbc, 0x0, 0x1);
        gbc.writeMem(0xdcf7, { 0xcb, 0x3e });
        gbc.writeMem(0xddbc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5f18);
        EXPECT(gbc.pc(), 0xdcf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf7), 0xcb);
        EXPECT(gbc.readMem(0xdcf8), 0x3e);
        EXPECT(gbc.readMem(0xddbc), 0x2d);
        // CB 3E 0029
        gbc.setState(0x8d47, 0x3a33, 0x3c80, 0xb0d3, 0x5760, 0xaa2c, 0x0, 0x1);
        gbc.writeMem(0x8d47, { 0xcb, 0x3e });
        gbc.writeMem(0xaa2c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3a33);
        EXPECT(gbc.pc(), 0x8d49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d47), 0xcb);
        EXPECT(gbc.readMem(0x8d48), 0x3e);
        EXPECT(gbc.readMem(0xaa2c), 0x5a);
        // CB 3E 002A
        gbc.setState(0xa9, 0xdd8f, 0xf470, 0xf565, 0x781c, 0xeb30, 0x0, 0x1);
        gbc.writeMem(0xa9, { 0xcb, 0x3e });
        gbc.writeMem(0xeb30, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xdd8f);
        EXPECT(gbc.pc(), 0xab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb30), 0x79);
        // CB 3E 002F
        gbc.setState(0x5c77, 0x3e0e, 0x1190, 0x64bf, 0x76ce, 0xf9a4, 0x1, 0x0);
        gbc.writeMem(0x5c77, { 0xcb, 0x3e });
        gbc.writeMem(0xf9a4, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3e0e);
        EXPECT(gbc.pc(), 0x5c79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9a4), 0x43);
        // CB 3E 0031
        gbc.setState(0x1ed5, 0x4b67, 0x4f80, 0xf4b0, 0x2cab, 0xa35f, 0x1, 0x0);
        gbc.writeMem(0x1ed5, { 0xcb, 0x3e });
        gbc.writeMem(0xa35f, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4b67);
        EXPECT(gbc.pc(), 0x1ed7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa35f), 0xc);
        // CB 3E 0032
        gbc.setState(0x944a, 0x6417, 0x7ab0, 0x6262, 0xbc44, 0x93c9, 0x1, 0x0);
        gbc.writeMem(0x93c9, { 0xbf });
        gbc.writeMem(0x944a, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6417);
        EXPECT(gbc.pc(), 0x944c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c9), 0x5f);
        EXPECT(gbc.readMem(0x944a), 0xcb);
        EXPECT(gbc.readMem(0x944b), 0x3e);
        // CB 3E 0033
        gbc.setState(0xac96, 0x6ebd, 0x4410, 0xc11d, 0x5657, 0x9df2, 0x1, 0x1);
        gbc.writeMem(0x9df2, { 0x8a });
        gbc.writeMem(0xac96, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6ebd);
        EXPECT(gbc.pc(), 0xac98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df2), 0x45);
        EXPECT(gbc.readMem(0xac96), 0xcb);
        EXPECT(gbc.readMem(0xac97), 0x3e);
        // CB 3E 0036
        gbc.setState(0x9a37, 0xb316, 0x2530, 0x8ed9, 0x44c8, 0x8b5e, 0x0, 0x1);
        gbc.writeMem(0x8b5e, { 0x60 });
        gbc.writeMem(0x9a37, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb316);
        EXPECT(gbc.pc(), 0x9a39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b5e), 0x30);
        EXPECT(gbc.readMem(0x9a37), 0xcb);
        EXPECT(gbc.readMem(0x9a38), 0x3e);
        // CB 3E 0037
        gbc.setState(0x29c7, 0x5cbb, 0x480, 0xd39e, 0xc0d7, 0x893b, 0x1, 0x0);
        gbc.writeMem(0x29c7, { 0xcb, 0x3e });
        gbc.writeMem(0x893b, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5cbb);
        EXPECT(gbc.pc(), 0x29c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x893b), 0x77);
        // CB 3E 0038
        gbc.setState(0x1b22, 0x7374, 0x9e50, 0x7fc, 0x67e1, 0xc94c, 0x0, 0x0);
        gbc.writeMem(0x1b22, { 0xcb, 0x3e });
        gbc.writeMem(0xc94c, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7374);
        EXPECT(gbc.pc(), 0x1b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94c), 0x49);
        // CB 3E 003C
        gbc.setState(0xe7cb, 0x35b6, 0x6290, 0x68d9, 0xfa0f, 0xbcfb, 0x1, 0x0);
        gbc.writeMem(0xbcfb, { 0x9c });
        gbc.writeMem(0xe7cb, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x35b6);
        EXPECT(gbc.pc(), 0xe7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcfb), 0x4e);
        EXPECT(gbc.readMem(0xe7cb), 0xcb);
        EXPECT(gbc.readMem(0xe7cc), 0x3e);
        // CB 3E 003D
        gbc.setState(0x6172, 0x367a, 0x5ec0, 0x48a, 0xb5ba, 0xf15d, 0x0, 0x1);
        gbc.writeMem(0x6172, { 0xcb, 0x3e });
        gbc.writeMem(0xf15d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x367a);
        EXPECT(gbc.pc(), 0x6174);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf15d), 0x54);
        // CB 3E 003E
        gbc.setState(0xbc67, 0x2147, 0x3070, 0xa690, 0x5efd, 0xae82, 0x1, 0x1);
        gbc.writeMem(0xae82, { 0x35 });
        gbc.writeMem(0xbc67, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2147);
        EXPECT(gbc.pc(), 0xbc69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae82), 0x1a);
        EXPECT(gbc.readMem(0xbc67), 0xcb);
        EXPECT(gbc.readMem(0xbc68), 0x3e);
        // CB 3E 0044
        gbc.setState(0xe8e8, 0x7bc3, 0x9ef0, 0x206c, 0x25d6, 0xebfd, 0x1, 0x1);
        gbc.writeMem(0xe8e8, { 0xcb, 0x3e });
        gbc.writeMem(0xebfd, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7bc3);
        EXPECT(gbc.pc(), 0xe8ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8e8), 0xcb);
        EXPECT(gbc.readMem(0xe8e9), 0x3e);
        EXPECT(gbc.readMem(0xebfd), 0x13);
        // CB 3E 0045
        gbc.setState(0x66e3, 0xb944, 0x1380, 0x1c0a, 0x8e9e, 0xe8db, 0x0, 0x0);
        gbc.writeMem(0x66e3, { 0xcb, 0x3e });
        gbc.writeMem(0xe8db, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb944);
        EXPECT(gbc.pc(), 0x66e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8db), 0x11);
        // CB 3E 0046
        gbc.setState(0x8b6e, 0xc15d, 0xa4b0, 0x101d, 0x373e, 0xcf40, 0x1, 0x1);
        gbc.writeMem(0x8b6e, { 0xcb, 0x3e });
        gbc.writeMem(0xcf40, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc15d);
        EXPECT(gbc.pc(), 0x8b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b6e), 0xcb);
        EXPECT(gbc.readMem(0x8b6f), 0x3e);
        EXPECT(gbc.readMem(0xcf40), 0x37);
        // CB 3E 0048
        gbc.setState(0x5e3d, 0x173c, 0xc670, 0xf0d5, 0xf54d, 0xab10, 0x0, 0x0);
        gbc.writeMem(0x5e3d, { 0xcb, 0x3e });
        gbc.writeMem(0xab10, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x173c);
        EXPECT(gbc.pc(), 0x5e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab10), 0x6c);
        // CB 3E 004A
        gbc.setState(0x7089, 0x7938, 0xb420, 0xb66b, 0xfcaa, 0xcd15, 0x0, 0x1);
        gbc.writeMem(0x7089, { 0xcb, 0x3e });
        gbc.writeMem(0xcd15, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7938);
        EXPECT(gbc.pc(), 0x708b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd15), 0x33);
        // CB 3E 004C
        gbc.setState(0xdfa5, 0xda0b, 0xc270, 0xca38, 0x7bde, 0xcedd, 0x0, 0x1);
        gbc.writeMem(0xcedd, { 0x15 });
        gbc.writeMem(0xdfa5, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xda0b);
        EXPECT(gbc.pc(), 0xdfa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcedd), 0xa);
        EXPECT(gbc.readMem(0xdfa5), 0xcb);
        EXPECT(gbc.readMem(0xdfa6), 0x3e);
        // CB 3E 004E
        gbc.setState(0x468f, 0x7fc0, 0x4250, 0x6c45, 0xbce6, 0x905e, 0x1, 0x0);
        gbc.writeMem(0x468f, { 0xcb, 0x3e });
        gbc.writeMem(0x905e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7fc0);
        EXPECT(gbc.pc(), 0x4691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x905e), 0x7d);
        // CB 3E 004F
        gbc.setState(0xebd3, 0x34a8, 0x4b80, 0xdd84, 0xe1b8, 0xfad5, 0x1, 0x0);
        gbc.writeMem(0xebd3, { 0xcb, 0x3e });
        gbc.writeMem(0xfad5, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x34a8);
        EXPECT(gbc.pc(), 0xebd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebd3), 0xcb);
        EXPECT(gbc.readMem(0xebd4), 0x3e);
        EXPECT(gbc.readMem(0xfad5), 0x32);
        // CB 3E 0050
        gbc.setState(0x2888, 0x9f0d, 0xeea0, 0xeb62, 0xc7ed, 0xf1c8, 0x1, 0x1);
        gbc.writeMem(0x2888, { 0xcb, 0x3e });
        gbc.writeMem(0xf1c8, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9f0d);
        EXPECT(gbc.pc(), 0x288a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf1c8), 0x14);
        // CB 3E 0051
        gbc.setState(0xb9c6, 0x62ee, 0xe820, 0x111e, 0x7b50, 0xa94a, 0x1, 0x0);
        gbc.writeMem(0xa94a, { 0x4 });
        gbc.writeMem(0xb9c6, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x62ee);
        EXPECT(gbc.pc(), 0xb9c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa94a), 0x2);
        EXPECT(gbc.readMem(0xb9c6), 0xcb);
        EXPECT(gbc.readMem(0xb9c7), 0x3e);
        // CB 3E 0056
        gbc.setState(0x7e5b, 0x9398, 0x3e00, 0x77f7, 0xdbf5, 0xa375, 0x0, 0x1);
        gbc.writeMem(0x7e5b, { 0xcb, 0x3e });
        gbc.writeMem(0xa375, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9398);
        EXPECT(gbc.pc(), 0x7e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa375), 0x70);
        // CB 3E 005B
        gbc.setState(0xb98c, 0x2aa6, 0x510, 0xacc6, 0x87b0, 0xf1bf, 0x0, 0x0);
        gbc.writeMem(0xb98c, { 0xcb, 0x3e });
        gbc.writeMem(0xf1bf, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2aa6);
        EXPECT(gbc.pc(), 0xb98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb98c), 0xcb);
        EXPECT(gbc.readMem(0xb98d), 0x3e);
        EXPECT(gbc.readMem(0xf1bf), 0x5d);
        // CB 3E 005D
        gbc.setState(0x7f2a, 0x1091, 0x47c0, 0xc17a, 0xef9a, 0x970e, 0x1, 0x0);
        gbc.writeMem(0x7f2a, { 0xcb, 0x3e });
        gbc.writeMem(0x970e, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1091);
        EXPECT(gbc.pc(), 0x7f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970e), 0x4b);
        // CB 3E 005E
        gbc.setState(0x8070, 0xa4c6, 0xd8f0, 0xffe0, 0xf36e, 0xb685, 0x0, 0x0);
        gbc.writeMem(0x8070, { 0xcb, 0x3e });
        gbc.writeMem(0xb685, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa4c6);
        EXPECT(gbc.pc(), 0x8072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8070), 0xcb);
        EXPECT(gbc.readMem(0x8071), 0x3e);
        EXPECT(gbc.readMem(0xb685), 0x45);
        // CB 3E 005F
        gbc.setState(0x11d9, 0x18c5, 0x7830, 0xd16b, 0xe7dd, 0xe637, 0x0, 0x1);
        gbc.writeMem(0x11d9, { 0xcb, 0x3e });
        gbc.writeMem(0xe637, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x18c5);
        EXPECT(gbc.pc(), 0x11db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe637), 0x43);
        // CB 3E 0062
        gbc.setState(0xe7d9, 0xcc94, 0x9d40, 0xfcd3, 0xf8ef, 0xb92f, 0x0, 0x0);
        gbc.writeMem(0xb92f, { 0x18 });
        gbc.writeMem(0xe7d9, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcc94);
        EXPECT(gbc.pc(), 0xe7db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb92f), 0xc);
        EXPECT(gbc.readMem(0xe7d9), 0xcb);
        EXPECT(gbc.readMem(0xe7da), 0x3e);
        // CB 3E 0063
        gbc.setState(0xe8f6, 0x3624, 0x40b0, 0x8fe8, 0x4ada, 0xd35d, 0x0, 0x1);
        gbc.writeMem(0xd35d, { 0xa3 });
        gbc.writeMem(0xe8f6, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x3624);
        EXPECT(gbc.pc(), 0xe8f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd35d), 0x51);
        EXPECT(gbc.readMem(0xe8f6), 0xcb);
        EXPECT(gbc.readMem(0xe8f7), 0x3e);
        // CB 3E 0065
        gbc.setState(0x8139, 0x2359, 0xb690, 0x49de, 0xe09e, 0xa243, 0x0, 0x1);
        gbc.writeMem(0x8139, { 0xcb, 0x3e });
        gbc.writeMem(0xa243, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2359);
        EXPECT(gbc.pc(), 0x813b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8139), 0xcb);
        EXPECT(gbc.readMem(0x813a), 0x3e);
        EXPECT(gbc.readMem(0xa243), 0x77);
        // CB 3E 006B
        gbc.setState(0xbbeb, 0xe64, 0xb110, 0xa94c, 0x6430, 0xff15, 0x1, 0x0);
        gbc.writeMem(0xbbeb, { 0xcb, 0x3e });
        gbc.writeMem(0xff15, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe64);
        EXPECT(gbc.pc(), 0xbbed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbeb), 0xcb);
        EXPECT(gbc.readMem(0xbbec), 0x3e);
        EXPECT(gbc.readMem(0xff15), 0x6d);
        // CB 3E 006C
        gbc.setState(0x62a, 0x20fc, 0xe5b0, 0x4052, 0xfe76, 0xe0c7, 0x0, 0x0);
        gbc.writeMem(0x62a, { 0xcb, 0x3e });
        gbc.writeMem(0xe0c7, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x20fc);
        EXPECT(gbc.pc(), 0x62c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0c7), 0x52);
        // CB 3E 006D
        gbc.setState(0x99c1, 0xa4ca, 0xd0, 0xc473, 0x82f2, 0x92b1, 0x1, 0x1);
        gbc.writeMem(0x92b1, { 0x8b });
        gbc.writeMem(0x99c1, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa4ca);
        EXPECT(gbc.pc(), 0x99c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92b1), 0x45);
        EXPECT(gbc.readMem(0x99c1), 0xcb);
        EXPECT(gbc.readMem(0x99c2), 0x3e);
        // CB 3E 006F
        gbc.setState(0xa0db, 0x1b8a, 0x9980, 0xe218, 0xf07f, 0xcdb2, 0x0, 0x0);
        gbc.writeMem(0xa0db, { 0xcb, 0x3e });
        gbc.writeMem(0xcdb2, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x1b8a);
        EXPECT(gbc.pc(), 0xa0dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0db), 0xcb);
        EXPECT(gbc.readMem(0xa0dc), 0x3e);
        EXPECT(gbc.readMem(0xcdb2), 0x5d);
        // CB 3E 0070
        gbc.setState(0xd768, 0x1d2e, 0xec50, 0xe368, 0x7fba, 0xe52d, 0x0, 0x0);
        gbc.writeMem(0xd768, { 0xcb, 0x3e });
        gbc.writeMem(0xe52d, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1d2e);
        EXPECT(gbc.pc(), 0xd76a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd768), 0xcb);
        EXPECT(gbc.readMem(0xd769), 0x3e);
        EXPECT(gbc.readMem(0xe52d), 0x71);
        // CB 3E 0071
        gbc.setState(0x895f, 0x3608, 0x25e0, 0x14b6, 0xee83, 0xcb79, 0x1, 0x1);
        gbc.writeMem(0x895f, { 0xcb, 0x3e });
        gbc.writeMem(0xcb79, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3608);
        EXPECT(gbc.pc(), 0x8961);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895f), 0xcb);
        EXPECT(gbc.readMem(0x8960), 0x3e);
        EXPECT(gbc.readMem(0xcb79), 0x4b);
        // CB 3E 0073
        gbc.setState(0x7108, 0xc03a, 0x4990, 0x5c94, 0x28e0, 0x886e, 0x1, 0x0);
        gbc.writeMem(0x7108, { 0xcb, 0x3e });
        gbc.writeMem(0x886e, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc03a);
        EXPECT(gbc.pc(), 0x710a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x886e), 0x62);
        // CB 3E 0075
        gbc.setState(0x6069, 0x7dab, 0x6b20, 0x165c, 0x775, 0xeea7, 0x0, 0x1);
        gbc.writeMem(0x6069, { 0xcb, 0x3e });
        gbc.writeMem(0xeea7, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7dab);
        EXPECT(gbc.pc(), 0x606b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea7), 0x5b);
        // CB 3E 0077
        gbc.setState(0x6a1b, 0xc266, 0xd180, 0x126d, 0xb877, 0xde70, 0x1, 0x1);
        gbc.writeMem(0x6a1b, { 0xcb, 0x3e });
        gbc.writeMem(0xde70, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc266);
        EXPECT(gbc.pc(), 0x6a1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde70), 0x5f);
        // CB 3E 0078
        gbc.setState(0x8440, 0xa119, 0x5c00, 0x4012, 0x1cad, 0xd847, 0x0, 0x0);
        gbc.writeMem(0x8440, { 0xcb, 0x3e });
        gbc.writeMem(0xd847, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa119);
        EXPECT(gbc.pc(), 0x8442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8440), 0xcb);
        EXPECT(gbc.readMem(0x8441), 0x3e);
        EXPECT(gbc.readMem(0xd847), 0x35);
        // CB 3E 007D
        gbc.setState(0x6ccb, 0xa111, 0xffd0, 0xdd87, 0xde8b, 0xbb3b, 0x1, 0x0);
        gbc.writeMem(0x6ccb, { 0xcb, 0x3e });
        gbc.writeMem(0xbb3b, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa111);
        EXPECT(gbc.pc(), 0x6ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb3b), 0x6f);
        // CB 3E 007F
        gbc.setState(0x50e8, 0x2405, 0x6f30, 0xd772, 0xa498, 0xe9d1, 0x0, 0x0);
        gbc.writeMem(0x50e8, { 0xcb, 0x3e });
        gbc.writeMem(0xe9d1, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2405);
        EXPECT(gbc.pc(), 0x50ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d1), 0x48);
        // CB 3E 0082
        gbc.setState(0xa8f4, 0x523e, 0xb6e0, 0xcf8c, 0x1de7, 0xfaec, 0x0, 0x0);
        gbc.writeMem(0xa8f4, { 0xcb, 0x3e });
        gbc.writeMem(0xfaec, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x523e);
        EXPECT(gbc.pc(), 0xa8f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8f4), 0xcb);
        EXPECT(gbc.readMem(0xa8f5), 0x3e);
        EXPECT(gbc.readMem(0xfaec), 0x47);
        // CB 3E 0084
        gbc.setState(0xb4ce, 0x3e80, 0x2e60, 0xe2c3, 0xf5da, 0xe0ba, 0x0, 0x0);
        gbc.writeMem(0xb4ce, { 0xcb, 0x3e });
        gbc.writeMem(0xe0ba, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3e80);
        EXPECT(gbc.pc(), 0xb4d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4ce), 0xcb);
        EXPECT(gbc.readMem(0xb4cf), 0x3e);
        EXPECT(gbc.readMem(0xe0ba), 0x51);
        // CB 3E 0086
        gbc.setState(0x8bc5, 0x2b47, 0xde80, 0xfe65, 0x696f, 0xbd39, 0x0, 0x1);
        gbc.writeMem(0x8bc5, { 0xcb, 0x3e });
        gbc.writeMem(0xbd39, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2b47);
        EXPECT(gbc.pc(), 0x8bc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bc5), 0xcb);
        EXPECT(gbc.readMem(0x8bc6), 0x3e);
        EXPECT(gbc.readMem(0xbd39), 0x2e);
        // CB 3E 0088
        gbc.setState(0xd22d, 0x9f61, 0xd040, 0x6aea, 0xfdc3, 0x91b5, 0x1, 0x1);
        gbc.writeMem(0x91b5, { 0x38 });
        gbc.writeMem(0xd22d, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9f61);
        EXPECT(gbc.pc(), 0xd22f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b5), 0x1c);
        EXPECT(gbc.readMem(0xd22d), 0xcb);
        EXPECT(gbc.readMem(0xd22e), 0x3e);
        // CB 3E 0089
        gbc.setState(0x6cf3, 0xa1a8, 0x3d00, 0xee07, 0xb5fc, 0xbc4a, 0x1, 0x1);
        gbc.writeMem(0x6cf3, { 0xcb, 0x3e });
        gbc.writeMem(0xbc4a, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa1a8);
        EXPECT(gbc.pc(), 0x6cf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc4a), 0x3e);
        // CB 3E 008D
        gbc.setState(0xca9e, 0xfefa, 0xf500, 0x59a3, 0x779a, 0xb2f4, 0x1, 0x0);
        gbc.writeMem(0xb2f4, { 0xd5 });
        gbc.writeMem(0xca9e, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfefa);
        EXPECT(gbc.pc(), 0xcaa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f4), 0x6a);
        EXPECT(gbc.readMem(0xca9e), 0xcb);
        EXPECT(gbc.readMem(0xca9f), 0x3e);
        // CB 3E 008E
        gbc.setState(0x6bce, 0xe027, 0x2b70, 0x6668, 0x6fa2, 0x8215, 0x0, 0x1);
        gbc.writeMem(0x6bce, { 0xcb, 0x3e });
        gbc.writeMem(0x8215, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe027);
        EXPECT(gbc.pc(), 0x6bd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8215), 0x39);
        // CB 3E 008F
        gbc.setState(0xaa33, 0xbb49, 0x20f0, 0xf0fb, 0x5204, 0xe113, 0x1, 0x0);
        gbc.writeMem(0xaa33, { 0xcb, 0x3e });
        gbc.writeMem(0xe113, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xbb49);
        EXPECT(gbc.pc(), 0xaa35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa33), 0xcb);
        EXPECT(gbc.readMem(0xaa34), 0x3e);
        EXPECT(gbc.readMem(0xe113), 0x4c);
        // CB 3E 0091
        gbc.setState(0x8b30, 0xc798, 0x4740, 0x9595, 0x430c, 0xc249, 0x0, 0x0);
        gbc.writeMem(0x8b30, { 0xcb, 0x3e });
        gbc.writeMem(0xc249, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc798);
        EXPECT(gbc.pc(), 0x8b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b30), 0xcb);
        EXPECT(gbc.readMem(0x8b31), 0x3e);
        EXPECT(gbc.readMem(0xc249), 0x56);
        // CB 3E 0092
        gbc.setState(0x64ea, 0x3242, 0xbe70, 0xee94, 0x24de, 0x8e00, 0x1, 0x0);
        gbc.writeMem(0x64ea, { 0xcb, 0x3e });
        gbc.writeMem(0x8e00, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3242);
        EXPECT(gbc.pc(), 0x64ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e00), 0x66);
        // CB 3E 0093
        gbc.setState(0x2a3b, 0x2e22, 0x75f0, 0x126d, 0x497b, 0xdbda, 0x0, 0x1);
        gbc.writeMem(0x2a3b, { 0xcb, 0x3e });
        gbc.writeMem(0xdbda, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2e22);
        EXPECT(gbc.pc(), 0x2a3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbda), 0x45);
        // CB 3E 0095
        gbc.setState(0x6c1, 0x9d50, 0x2800, 0xa946, 0xccfc, 0xff51, 0x0, 0x0);
        gbc.writeMem(0x6c1, { 0xcb, 0x3e });
        gbc.writeMem(0xff51, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9d50);
        EXPECT(gbc.pc(), 0x6c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff51), 0x26);
        // CB 3E 0099
        gbc.setState(0x8fb9, 0xe0e4, 0x9a0, 0x1b2e, 0x387b, 0xcf35, 0x1, 0x0);
        gbc.writeMem(0x8fb9, { 0xcb, 0x3e });
        gbc.writeMem(0xcf35, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe0e4);
        EXPECT(gbc.pc(), 0x8fbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fb9), 0xcb);
        EXPECT(gbc.readMem(0x8fba), 0x3e);
        EXPECT(gbc.readMem(0xcf35), 0x7e);
        // CB 3E 009A
        gbc.setState(0x7ee0, 0x4227, 0xa3f0, 0xd045, 0x3c0b, 0xeed5, 0x0, 0x1);
        gbc.writeMem(0x7ee0, { 0xcb, 0x3e });
        gbc.writeMem(0xeed5, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4227);
        EXPECT(gbc.pc(), 0x7ee2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeed5), 0x2c);
        // CB 3E 009E
        gbc.setState(0x67a3, 0x4f08, 0x1660, 0x7572, 0x8b5f, 0xb4ba, 0x1, 0x1);
        gbc.writeMem(0x67a3, { 0xcb, 0x3e });
        gbc.writeMem(0xb4ba, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4f08);
        EXPECT(gbc.pc(), 0x67a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ba), 0x26);
        // CB 3E 009F
        gbc.setState(0xb714, 0x759a, 0x8960, 0x2549, 0xb80f, 0xafb2, 0x0, 0x1);
        gbc.writeMem(0xafb2, { 0x11 });
        gbc.writeMem(0xb714, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x759a);
        EXPECT(gbc.pc(), 0xb716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafb2), 0x8);
        EXPECT(gbc.readMem(0xb714), 0xcb);
        EXPECT(gbc.readMem(0xb715), 0x3e);
        // CB 3E 00A0
        gbc.setState(0x7f4, 0x3e9f, 0xd480, 0x187d, 0xd7c5, 0xa8ac, 0x0, 0x1);
        gbc.writeMem(0x7f4, { 0xcb, 0x3e });
        gbc.writeMem(0xa8ac, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3e9f);
        EXPECT(gbc.pc(), 0x7f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ac), 0xd);
        // CB 3E 00A1
        gbc.setState(0xee36, 0x1ffd, 0x5af0, 0xe6a7, 0x59b4, 0x8ed2, 0x0, 0x1);
        gbc.writeMem(0x8ed2, { 0x19 });
        gbc.writeMem(0xee36, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1ffd);
        EXPECT(gbc.pc(), 0xee38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ed2), 0xc);
        EXPECT(gbc.readMem(0xee36), 0xcb);
        EXPECT(gbc.readMem(0xee37), 0x3e);
        // CB 3E 00A2
        gbc.setState(0xe33e, 0xbf19, 0xa20, 0x7304, 0xcde, 0x95fc, 0x1, 0x1);
        gbc.writeMem(0x95fc, { 0x5e });
        gbc.writeMem(0xe33e, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbf19);
        EXPECT(gbc.pc(), 0xe340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fc), 0x2f);
        EXPECT(gbc.readMem(0xe33e), 0xcb);
        EXPECT(gbc.readMem(0xe33f), 0x3e);
        // CB 3E 00A4
        gbc.setState(0xdcbc, 0xa0e4, 0x2bc0, 0x4330, 0xc710, 0xe60d, 0x1, 0x1);
        gbc.writeMem(0xdcbc, { 0xcb, 0x3e });
        gbc.writeMem(0xe60d, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa0e4);
        EXPECT(gbc.pc(), 0xdcbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcbc), 0xcb);
        EXPECT(gbc.readMem(0xdcbd), 0x3e);
        EXPECT(gbc.readMem(0xe60d), 0x2f);
        // CB 3E 00A8
        gbc.setState(0xbc9c, 0x962e, 0x88e0, 0xd7ed, 0xbd17, 0xcdd8, 0x1, 0x0);
        gbc.writeMem(0xbc9c, { 0xcb, 0x3e });
        gbc.writeMem(0xcdd8, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x962e);
        EXPECT(gbc.pc(), 0xbc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9c), 0xcb);
        EXPECT(gbc.readMem(0xbc9d), 0x3e);
        EXPECT(gbc.readMem(0xcdd8), 0xd);
        // CB 3E 00AA
        gbc.setState(0xd161, 0xeaa2, 0xaf30, 0x1106, 0x541d, 0x8724, 0x1, 0x1);
        gbc.writeMem(0x8724, { 0x40 });
        gbc.writeMem(0xd161, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xeaa2);
        EXPECT(gbc.pc(), 0xd163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8724), 0x20);
        EXPECT(gbc.readMem(0xd161), 0xcb);
        EXPECT(gbc.readMem(0xd162), 0x3e);
        // CB 3E 00AE
        gbc.setState(0xae77, 0xc7bb, 0x1e70, 0x8b02, 0x5334, 0xafc3, 0x1, 0x0);
        gbc.writeMem(0xae77, { 0xcb, 0x3e });
        gbc.writeMem(0xafc3, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc7bb);
        EXPECT(gbc.pc(), 0xae79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae77), 0xcb);
        EXPECT(gbc.readMem(0xae78), 0x3e);
        EXPECT(gbc.readMem(0xafc3), 0x40);
        // CB 3E 00B1
        gbc.setState(0x65cb, 0x2003, 0x5eb0, 0xe009, 0x685e, 0xadd9, 0x0, 0x1);
        gbc.writeMem(0x65cb, { 0xcb, 0x3e });
        gbc.writeMem(0xadd9, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2003);
        EXPECT(gbc.pc(), 0x65cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadd9), 0x4c);
        // CB 3E 00B2
        gbc.setState(0x33c3, 0x7f57, 0x6b10, 0x8755, 0xe6d3, 0xb8e8, 0x0, 0x1);
        gbc.writeMem(0x33c3, { 0xcb, 0x3e });
        gbc.writeMem(0xb8e8, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7f57);
        EXPECT(gbc.pc(), 0x33c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8e8), 0xb);
        // CB 3E 00B3
        gbc.setState(0x31c9, 0x37b4, 0x45c0, 0x5134, 0x19d4, 0x8bd2, 0x0, 0x1);
        gbc.writeMem(0x31c9, { 0xcb, 0x3e });
        gbc.writeMem(0x8bd2, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x37b4);
        EXPECT(gbc.pc(), 0x31cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd2), 0x58);
        // CB 3E 00B6
        gbc.setState(0xdac, 0xafa9, 0x7c60, 0x7dcd, 0x7531, 0xab4a, 0x0, 0x0);
        gbc.writeMem(0xdac, { 0xcb, 0x3e });
        gbc.writeMem(0xab4a, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xafa9);
        EXPECT(gbc.pc(), 0xdae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab4a), 0x38);
        // CB 3E 00B7
        gbc.setState(0xe8e5, 0xf907, 0x8780, 0x78c8, 0xa705, 0xe1d0, 0x0, 0x0);
        gbc.writeMem(0xe1d0, { 0xa4 });
        gbc.writeMem(0xe8e5, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf907);
        EXPECT(gbc.pc(), 0xe8e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1d0), 0x52);
        EXPECT(gbc.readMem(0xe8e5), 0xcb);
        EXPECT(gbc.readMem(0xe8e6), 0x3e);
        // CB 3E 00B8
        gbc.setState(0x6d7e, 0x556a, 0x8e30, 0xee6b, 0x8a91, 0xbb42, 0x0, 0x0);
        gbc.writeMem(0x6d7e, { 0xcb, 0x3e });
        gbc.writeMem(0xbb42, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x556a);
        EXPECT(gbc.pc(), 0x6d80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb42), 0xf);
        // CB 3E 00BB
        gbc.setState(0xb7f2, 0x8c58, 0xb920, 0x2244, 0xec4d, 0xa188, 0x1, 0x0);
        gbc.writeMem(0xa188, { 0x52 });
        gbc.writeMem(0xb7f2, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8c58);
        EXPECT(gbc.pc(), 0xb7f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa188), 0x29);
        EXPECT(gbc.readMem(0xb7f2), 0xcb);
        EXPECT(gbc.readMem(0xb7f3), 0x3e);
        // CB 3E 00BC
        gbc.setState(0xd83f, 0x31cf, 0x6e20, 0x70c2, 0x6c33, 0xd1ad, 0x1, 0x0);
        gbc.writeMem(0xd1ad, { 0x95 });
        gbc.writeMem(0xd83f, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x31cf);
        EXPECT(gbc.pc(), 0xd841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ad), 0x4a);
        EXPECT(gbc.readMem(0xd83f), 0xcb);
        EXPECT(gbc.readMem(0xd840), 0x3e);
        // CB 3E 00C1
        gbc.setState(0xb9bc, 0x6809, 0x3c60, 0x2f54, 0x1f48, 0xec34, 0x0, 0x0);
        gbc.writeMem(0xb9bc, { 0xcb, 0x3e });
        gbc.writeMem(0xec34, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6809);
        EXPECT(gbc.pc(), 0xb9be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9bc), 0xcb);
        EXPECT(gbc.readMem(0xb9bd), 0x3e);
        EXPECT(gbc.readMem(0xec34), 0x54);
        // CB 3E 00C2
        gbc.setState(0x9b61, 0x1405, 0xe200, 0xaa12, 0x33b3, 0x9f7f, 0x0, 0x0);
        gbc.writeMem(0x9b61, { 0xcb, 0x3e });
        gbc.writeMem(0x9f7f, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1405);
        EXPECT(gbc.pc(), 0x9b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b61), 0xcb);
        EXPECT(gbc.readMem(0x9b62), 0x3e);
        EXPECT(gbc.readMem(0x9f7f), 0x1d);
        // CB 3E 00C3
        gbc.setState(0x5098, 0x23d6, 0xa690, 0x4c2c, 0xf59, 0xb68a, 0x0, 0x0);
        gbc.writeMem(0x5098, { 0xcb, 0x3e });
        gbc.writeMem(0xb68a, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x23d6);
        EXPECT(gbc.pc(), 0x509a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb68a), 0x7e);
        // CB 3E 00C8
        gbc.setState(0xa720, 0x41e6, 0x80c0, 0xa1ae, 0x646d, 0xa761, 0x1, 0x1);
        gbc.writeMem(0xa720, { 0xcb, 0x3e });
        gbc.writeMem(0xa761, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x41e6);
        EXPECT(gbc.pc(), 0xa722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa720), 0xcb);
        EXPECT(gbc.readMem(0xa721), 0x3e);
        EXPECT(gbc.readMem(0xa761), 0x22);
        // CB 3E 00CB
        gbc.setState(0x1a18, 0xd301, 0x3120, 0xa282, 0x3882, 0xa968, 0x0, 0x0);
        gbc.writeMem(0x1a18, { 0xcb, 0x3e });
        gbc.writeMem(0xa968, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd301);
        EXPECT(gbc.pc(), 0x1a1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa968), 0x68);
        // CB 3E 00CE
        gbc.setState(0x2808, 0x1b50, 0x7210, 0x950c, 0xc2df, 0xee7d, 0x1, 0x1);
        gbc.writeMem(0x2808, { 0xcb, 0x3e });
        gbc.writeMem(0xee7d, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1b50);
        EXPECT(gbc.pc(), 0x280a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee7d), 0x46);
        // CB 3E 00D0
        gbc.setState(0x5b49, 0x7512, 0x8570, 0xe071, 0xc560, 0xf8d4, 0x0, 0x1);
        gbc.writeMem(0x5b49, { 0xcb, 0x3e });
        gbc.writeMem(0xf8d4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7512);
        EXPECT(gbc.pc(), 0x5b4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf8d4), 0x3f);
        // CB 3E 00D4
        gbc.setState(0x80ec, 0x6acb, 0x94b0, 0x4e48, 0x91b, 0xf502, 0x0, 0x1);
        gbc.writeMem(0x80ec, { 0xcb, 0x3e });
        gbc.writeMem(0xf502, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6acb);
        EXPECT(gbc.pc(), 0x80ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ec), 0xcb);
        EXPECT(gbc.readMem(0x80ed), 0x3e);
        EXPECT(gbc.readMem(0xf502), 0x73);
        // CB 3E 00D6
        gbc.setState(0x6082, 0x9427, 0xdf00, 0xd49f, 0x64a8, 0x89e0, 0x0, 0x0);
        gbc.writeMem(0x6082, { 0xcb, 0x3e });
        gbc.writeMem(0x89e0, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9427);
        EXPECT(gbc.pc(), 0x6084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e0), 0x3e);
        // CB 3E 00D8
        gbc.setState(0x3ac0, 0x2148, 0x760, 0x57eb, 0x4b0, 0xcd3d, 0x1, 0x1);
        gbc.writeMem(0x3ac0, { 0xcb, 0x3e });
        gbc.writeMem(0xcd3d, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2148);
        EXPECT(gbc.pc(), 0x3ac2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd3d), 0x51);
        // CB 3E 00DC
        gbc.setState(0x86b1, 0x591c, 0x1070, 0x2a1a, 0x8df8, 0xcd90, 0x0, 0x1);
        gbc.writeMem(0x86b1, { 0xcb, 0x3e });
        gbc.writeMem(0xcd90, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x591c);
        EXPECT(gbc.pc(), 0x86b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b1), 0xcb);
        EXPECT(gbc.readMem(0x86b2), 0x3e);
        EXPECT(gbc.readMem(0xcd90), 0x4f);
        // CB 3E 00DD
        gbc.setState(0xdd96, 0xa08e, 0x7400, 0x9af6, 0x188, 0xfcee, 0x0, 0x0);
        gbc.writeMem(0xdd96, { 0xcb, 0x3e });
        gbc.writeMem(0xfcee, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa08e);
        EXPECT(gbc.pc(), 0xdd98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd96), 0xcb);
        EXPECT(gbc.readMem(0xdd97), 0x3e);
        EXPECT(gbc.readMem(0xfcee), 0xc);
        // CB 3E 00E1
        gbc.setState(0x5c48, 0x921b, 0xd980, 0xf4e9, 0xea8d, 0x860e, 0x1, 0x0);
        gbc.writeMem(0x5c48, { 0xcb, 0x3e });
        gbc.writeMem(0x860e, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x921b);
        EXPECT(gbc.pc(), 0x5c4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x860e), 0x61);
        // CB 3E 00E2
        gbc.setState(0xcc5, 0x61e, 0x8560, 0xdbbc, 0x2d07, 0xe12f, 0x0, 0x1);
        gbc.writeMem(0xcc5, { 0xcb, 0x3e });
        gbc.writeMem(0xe12f, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x61e);
        EXPECT(gbc.pc(), 0xcc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe12f), 0x47);
        // CB 3E 00E3
        gbc.setState(0x51d3, 0x4b5b, 0x9540, 0x2570, 0xc9f3, 0xde8e, 0x0, 0x0);
        gbc.writeMem(0x51d3, { 0xcb, 0x3e });
        gbc.writeMem(0xde8e, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4b5b);
        EXPECT(gbc.pc(), 0x51d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde8e), 0x4c);
        // CB 3E 00E4
        gbc.setState(0xc560, 0x3ed3, 0xbb00, 0x81e9, 0x212b, 0xc4a7, 0x1, 0x0);
        gbc.writeMem(0xc4a7, { 0x95 });
        gbc.writeMem(0xc560, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3ed3);
        EXPECT(gbc.pc(), 0xc562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4a7), 0x4a);
        EXPECT(gbc.readMem(0xc560), 0xcb);
        EXPECT(gbc.readMem(0xc561), 0x3e);
        // CB 3E 00E5
        gbc.setState(0x5ecf, 0xeaff, 0xd190, 0xbc34, 0x77c2, 0xd444, 0x1, 0x0);
        gbc.writeMem(0x5ecf, { 0xcb, 0x3e });
        gbc.writeMem(0xd444, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xeaff);
        EXPECT(gbc.pc(), 0x5ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd444), 0x7a);
        // CB 3E 00E6
        gbc.setState(0xcbe4, 0x6cf5, 0xa360, 0x469e, 0xdd97, 0xce0c, 0x1, 0x1);
        gbc.writeMem(0xcbe4, { 0xcb, 0x3e });
        gbc.writeMem(0xce0c, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6cf5);
        EXPECT(gbc.pc(), 0xcbe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbe4), 0xcb);
        EXPECT(gbc.readMem(0xcbe5), 0x3e);
        EXPECT(gbc.readMem(0xce0c), 0x2e);
        // CB 3E 00EB
        gbc.setState(0xbfe, 0xa27b, 0x8ad0, 0x2d4d, 0xd024, 0xb6ae, 0x0, 0x1);
        gbc.writeMem(0xbfe, { 0xcb, 0x3e });
        gbc.writeMem(0xb6ae, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa27b);
        EXPECT(gbc.pc(), 0xc00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ae), 0x32);
        // CB 3E 00ED
        gbc.setState(0x6226, 0xc20, 0xabd0, 0xdadb, 0x307c, 0x8060, 0x0, 0x1);
        gbc.writeMem(0x6226, { 0xcb, 0x3e });
        gbc.writeMem(0x8060, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc20);
        EXPECT(gbc.pc(), 0x6228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8060), 0x7e);
        // CB 3E 00EE
        gbc.setState(0x6a80, 0xf4df, 0x5430, 0xd4c0, 0x808c, 0xb2ea, 0x1, 0x1);
        gbc.writeMem(0x6a80, { 0xcb, 0x3e });
        gbc.writeMem(0xb2ea, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf4df);
        EXPECT(gbc.pc(), 0x6a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ea), 0x37);
        // CB 3E 00F2
        gbc.setState(0xbc2f, 0x25cb, 0x8740, 0x7e73, 0xdfc4, 0xfe41, 0x0, 0x0);
        gbc.writeMem(0xbc2f, { 0xcb, 0x3e });
        gbc.writeMem(0xfe41, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x25cb);
        EXPECT(gbc.pc(), 0xbc31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc2f), 0xcb);
        EXPECT(gbc.readMem(0xbc30), 0x3e);
        EXPECT(gbc.readMem(0xfe41), 0x3d);
        // CB 3E 00F7
        gbc.setState(0x756a, 0xb6d, 0x1ff0, 0xc7ed, 0xf96f, 0xaf75, 0x0, 0x0);
        gbc.writeMem(0x756a, { 0xcb, 0x3e });
        gbc.writeMem(0xaf75, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb6d);
        EXPECT(gbc.pc(), 0x756c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf75), 0x1);
        // CB 3E 00FA
        gbc.setState(0xdb76, 0x324c, 0xf5c0, 0x49d9, 0x6d7e, 0x923a, 0x0, 0x0);
        gbc.writeMem(0x923a, { 0x30 });
        gbc.writeMem(0xdb76, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x324c);
        EXPECT(gbc.pc(), 0xdb78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x923a), 0x18);
        EXPECT(gbc.readMem(0xdb76), 0xcb);
        EXPECT(gbc.readMem(0xdb77), 0x3e);
        // CB 3E 00FB
        gbc.setState(0xa3ab, 0x4e27, 0xef30, 0x37fb, 0x8b4c, 0xb673, 0x1, 0x1);
        gbc.writeMem(0xa3ab, { 0xcb, 0x3e });
        gbc.writeMem(0xb673, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4e27);
        EXPECT(gbc.pc(), 0xa3ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ab), 0xcb);
        EXPECT(gbc.readMem(0xa3ac), 0x3e);
        EXPECT(gbc.readMem(0xb673), 0x79);
        // CB 3E 0102
        gbc.setState(0x9b38, 0x1ba7, 0x5600, 0x94f, 0x9e3e, 0x8da7, 0x0, 0x1);
        gbc.writeMem(0x8da7, { 0xb });
        gbc.writeMem(0x9b38, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1ba7);
        EXPECT(gbc.pc(), 0x9b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da7), 0x5);
        EXPECT(gbc.readMem(0x9b38), 0xcb);
        EXPECT(gbc.readMem(0x9b39), 0x3e);
        // CB 3E 0105
        gbc.setState(0x89c0, 0x750f, 0x5610, 0xf5e4, 0xfe26, 0xd64e, 0x0, 0x0);
        gbc.writeMem(0x89c0, { 0xcb, 0x3e });
        gbc.writeMem(0xd64e, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x750f);
        EXPECT(gbc.pc(), 0x89c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c0), 0xcb);
        EXPECT(gbc.readMem(0x89c1), 0x3e);
        EXPECT(gbc.readMem(0xd64e), 0x41);
        // CB 3E 0106
        gbc.setState(0xb892, 0x922b, 0x6e50, 0xe359, 0x2f46, 0xcd2c, 0x0, 0x1);
        gbc.writeMem(0xb892, { 0xcb, 0x3e });
        gbc.writeMem(0xcd2c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x922b);
        EXPECT(gbc.pc(), 0xb894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb892), 0xcb);
        EXPECT(gbc.readMem(0xb893), 0x3e);
        EXPECT(gbc.readMem(0xcd2c), 0x74);
        // CB 3E 010A
        gbc.setState(0x9504, 0xa08d, 0x530, 0xb2ac, 0x7a21, 0xba32, 0x0, 0x0);
        gbc.writeMem(0x9504, { 0xcb, 0x3e });
        gbc.writeMem(0xba32, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa08d);
        EXPECT(gbc.pc(), 0x9506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9504), 0xcb);
        EXPECT(gbc.readMem(0x9505), 0x3e);
        EXPECT(gbc.readMem(0xba32), 0xb);
        // CB 3E 010D
        gbc.setState(0x9ccb, 0xe6a6, 0x3d30, 0xf526, 0xf755, 0xf275, 0x1, 0x1);
        gbc.writeMem(0x9ccb, { 0xcb, 0x3e });
        gbc.writeMem(0xf275, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe6a6);
        EXPECT(gbc.pc(), 0x9ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccb), 0xcb);
        EXPECT(gbc.readMem(0x9ccc), 0x3e);
        EXPECT(gbc.readMem(0xf275), 0x67);
        // CB 3E 010E
        gbc.setState(0xe0a3, 0xb82e, 0x8780, 0x4a2, 0xc6ce, 0xb455, 0x1, 0x0);
        gbc.writeMem(0xb455, { 0x69 });
        gbc.writeMem(0xe0a3, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb82e);
        EXPECT(gbc.pc(), 0xe0a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb455), 0x34);
        EXPECT(gbc.readMem(0xe0a3), 0xcb);
        EXPECT(gbc.readMem(0xe0a4), 0x3e);
        // CB 3E 010F
        gbc.setState(0xaa4, 0x94c5, 0x4940, 0xf51d, 0xbe78, 0xc444, 0x1, 0x0);
        gbc.writeMem(0xaa4, { 0xcb, 0x3e });
        gbc.writeMem(0xc444, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x94c5);
        EXPECT(gbc.pc(), 0xaa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc444), 0x1e);
        // CB 3E 0111
        gbc.setState(0x120d, 0x6d22, 0x3c90, 0xb28e, 0xcba2, 0xd979, 0x0, 0x1);
        gbc.writeMem(0x120d, { 0xcb, 0x3e });
        gbc.writeMem(0xd979, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6d22);
        EXPECT(gbc.pc(), 0x120f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd979), 0x1);
        // CB 3E 0114
        gbc.setState(0x84f1, 0xcb40, 0xdde0, 0x5d4a, 0x699b, 0xe5ab, 0x1, 0x1);
        gbc.writeMem(0x84f1, { 0xcb, 0x3e });
        gbc.writeMem(0xe5ab, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xcb40);
        EXPECT(gbc.pc(), 0x84f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f1), 0xcb);
        EXPECT(gbc.readMem(0x84f2), 0x3e);
        EXPECT(gbc.readMem(0xe5ab), 0x31);
        // CB 3E 0116
        gbc.setState(0x703b, 0xfdfd, 0xfe20, 0xadd5, 0x4af9, 0xcdcd, 0x0, 0x1);
        gbc.writeMem(0x703b, { 0xcb, 0x3e });
        gbc.writeMem(0xcdcd, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xfdfd);
        EXPECT(gbc.pc(), 0x703d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdcd), 0x60);
        // CB 3E 011A
        gbc.setState(0x99f6, 0xb6c0, 0xaf30, 0x3299, 0xfa09, 0x9599, 0x1, 0x0);
        gbc.writeMem(0x9599, { 0x9d });
        gbc.writeMem(0x99f6, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb6c0);
        EXPECT(gbc.pc(), 0x99f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9599), 0x4e);
        EXPECT(gbc.readMem(0x99f6), 0xcb);
        EXPECT(gbc.readMem(0x99f7), 0x3e);
        // CB 3E 011E
        gbc.setState(0xa4b8, 0xd22e, 0x3a30, 0x9905, 0xe39e, 0xa1a8, 0x0, 0x1);
        gbc.writeMem(0xa1a8, { 0x83 });
        gbc.writeMem(0xa4b8, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd22e);
        EXPECT(gbc.pc(), 0xa4ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1a8), 0x41);
        EXPECT(gbc.readMem(0xa4b8), 0xcb);
        EXPECT(gbc.readMem(0xa4b9), 0x3e);
        // CB 3E 0120
        gbc.setState(0x90d5, 0x4c98, 0xa5b0, 0xa12e, 0x3236, 0xc06c, 0x0, 0x1);
        gbc.writeMem(0x90d5, { 0xcb, 0x3e });
        gbc.writeMem(0xc06c, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4c98);
        EXPECT(gbc.pc(), 0x90d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90d5), 0xcb);
        EXPECT(gbc.readMem(0x90d6), 0x3e);
        EXPECT(gbc.readMem(0xc06c), 0x8);
        // CB 3E 0121
        gbc.setState(0x3297, 0x70f, 0x5850, 0xdc72, 0xaceb, 0x84bb, 0x1, 0x1);
        gbc.writeMem(0x3297, { 0xcb, 0x3e });
        gbc.writeMem(0x84bb, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x70f);
        EXPECT(gbc.pc(), 0x3299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84bb), 0x43);
        // CB 3E 0122
        gbc.setState(0xabce, 0xa313, 0x2a90, 0x16d, 0xaf50, 0xa197, 0x1, 0x1);
        gbc.writeMem(0xa197, { 0xdd });
        gbc.writeMem(0xabce, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xa313);
        EXPECT(gbc.pc(), 0xabd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa197), 0x6e);
        EXPECT(gbc.readMem(0xabce), 0xcb);
        EXPECT(gbc.readMem(0xabcf), 0x3e);
        // CB 3E 0126
        gbc.setState(0x60f5, 0x39a7, 0x2f10, 0x2c8b, 0x4045, 0xa1fb, 0x0, 0x0);
        gbc.writeMem(0x60f5, { 0xcb, 0x3e });
        gbc.writeMem(0xa1fb, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x39a7);
        EXPECT(gbc.pc(), 0x60f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1fb), 0x4e);
        // CB 3E 0127
        gbc.setState(0x98dc, 0x68be, 0x81d0, 0x7d05, 0x66b0, 0xfcd3, 0x1, 0x1);
        gbc.writeMem(0x98dc, { 0xcb, 0x3e });
        gbc.writeMem(0xfcd3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x68be);
        EXPECT(gbc.pc(), 0x98de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98dc), 0xcb);
        EXPECT(gbc.readMem(0x98dd), 0x3e);
        EXPECT(gbc.readMem(0xfcd3), 0x3f);
        // CB 3E 0128
        gbc.setState(0x7921, 0x4d80, 0xc0e0, 0xce32, 0xbf28, 0x9620, 0x0, 0x0);
        gbc.writeMem(0x7921, { 0xcb, 0x3e });
        gbc.writeMem(0x9620, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4d80);
        EXPECT(gbc.pc(), 0x7923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9620), 0x4b);
        // CB 3E 0129
        gbc.setState(0x432a, 0x1154, 0xfa10, 0x30b6, 0x9241, 0xd324, 0x0, 0x1);
        gbc.writeMem(0x432a, { 0xcb, 0x3e });
        gbc.writeMem(0xd324, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1154);
        EXPECT(gbc.pc(), 0x432c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd324), 0x76);
        // CB 3E 012B
        gbc.setState(0x44c6, 0x74a9, 0xb680, 0x472c, 0x966f, 0xab72, 0x1, 0x0);
        gbc.writeMem(0x44c6, { 0xcb, 0x3e });
        gbc.writeMem(0xab72, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x74a9);
        EXPECT(gbc.pc(), 0x44c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab72), 0x1b);
        // CB 3E 012C
        gbc.setState(0xab8c, 0xc9ba, 0x60e0, 0xd789, 0x2405, 0x81a0, 0x0, 0x1);
        gbc.writeMem(0x81a0, { 0xf8 });
        gbc.writeMem(0xab8c, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc9ba);
        EXPECT(gbc.pc(), 0xab8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a0), 0x7c);
        EXPECT(gbc.readMem(0xab8c), 0xcb);
        EXPECT(gbc.readMem(0xab8d), 0x3e);
        // CB 3E 0132
        gbc.setState(0xafc2, 0x2923, 0x3ab0, 0x6545, 0xdd3d, 0xf509, 0x0, 0x1);
        gbc.writeMem(0xafc2, { 0xcb, 0x3e });
        gbc.writeMem(0xf509, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2923);
        EXPECT(gbc.pc(), 0xafc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc2), 0xcb);
        EXPECT(gbc.readMem(0xafc3), 0x3e);
        EXPECT(gbc.readMem(0xf509), 0x7d);
        // CB 3E 0134
        gbc.setState(0x201f, 0xf437, 0x4f30, 0x5356, 0xee33, 0xb973, 0x0, 0x1);
        gbc.writeMem(0x201f, { 0xcb, 0x3e });
        gbc.writeMem(0xb973, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf437);
        EXPECT(gbc.pc(), 0x2021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb973), 0x23);
        // CB 3E 0135
        gbc.setState(0xc2e1, 0x152d, 0x5e80, 0x86b1, 0x726b, 0xd2a8, 0x0, 0x1);
        gbc.writeMem(0xc2e1, { 0xcb, 0x3e });
        gbc.writeMem(0xd2a8, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x152d);
        EXPECT(gbc.pc(), 0xc2e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2e1), 0xcb);
        EXPECT(gbc.readMem(0xc2e2), 0x3e);
        EXPECT(gbc.readMem(0xd2a8), 0x3e);
        // CB 3E 0136
        gbc.setState(0xada0, 0x2fff, 0x8a50, 0x40ec, 0x7035, 0x8a75, 0x1, 0x0);
        gbc.writeMem(0x8a75, { 0x98 });
        gbc.writeMem(0xada0, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2fff);
        EXPECT(gbc.pc(), 0xada2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a75), 0x4c);
        EXPECT(gbc.readMem(0xada0), 0xcb);
        EXPECT(gbc.readMem(0xada1), 0x3e);
        // CB 3E 013D
        gbc.setState(0x3828, 0x8586, 0x79a0, 0x1c60, 0x8abb, 0xd437, 0x1, 0x0);
        gbc.writeMem(0x3828, { 0xcb, 0x3e });
        gbc.writeMem(0xd437, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8586);
        EXPECT(gbc.pc(), 0x382a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd437), 0x1);
        // CB 3E 013E
        gbc.setState(0xd5ec, 0x98cc, 0xef40, 0xbe4f, 0xee73, 0xda3f, 0x0, 0x1);
        gbc.writeMem(0xd5ec, { 0xcb, 0x3e });
        gbc.writeMem(0xda3f, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x98cc);
        EXPECT(gbc.pc(), 0xd5ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ec), 0xcb);
        EXPECT(gbc.readMem(0xd5ed), 0x3e);
        EXPECT(gbc.readMem(0xda3f), 0x19);
        // CB 3E 013F
        gbc.setState(0x1618, 0xfec3, 0xfa20, 0x369a, 0x8aa8, 0x8113, 0x1, 0x1);
        gbc.writeMem(0x1618, { 0xcb, 0x3e });
        gbc.writeMem(0x8113, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xfec3);
        EXPECT(gbc.pc(), 0x161a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8113), 0x2e);
        // CB 3E 0147
        gbc.setState(0x952b, 0x418f, 0xc670, 0x9030, 0x52eb, 0xe213, 0x0, 0x1);
        gbc.writeMem(0x952b, { 0xcb, 0x3e });
        gbc.writeMem(0xe213, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x418f);
        EXPECT(gbc.pc(), 0x952d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952b), 0xcb);
        EXPECT(gbc.readMem(0x952c), 0x3e);
        EXPECT(gbc.readMem(0xe213), 0x46);
        // CB 3E 0148
        gbc.setState(0xa587, 0x721f, 0xa040, 0xb509, 0xb982, 0x9d05, 0x1, 0x1);
        gbc.writeMem(0x9d05, { 0xf8 });
        gbc.writeMem(0xa587, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x721f);
        EXPECT(gbc.pc(), 0xa589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d05), 0x7c);
        EXPECT(gbc.readMem(0xa587), 0xcb);
        EXPECT(gbc.readMem(0xa588), 0x3e);
        // CB 3E 014D
        gbc.setState(0x90e3, 0x888a, 0x6cb0, 0x4e25, 0x4a27, 0xa22b, 0x0, 0x1);
        gbc.writeMem(0x90e3, { 0xcb, 0x3e });
        gbc.writeMem(0xa22b, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x888a);
        EXPECT(gbc.pc(), 0x90e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e3), 0xcb);
        EXPECT(gbc.readMem(0x90e4), 0x3e);
        EXPECT(gbc.readMem(0xa22b), 0x8);
        // CB 3E 0153
        gbc.setState(0xc1f9, 0x2031, 0x22a0, 0x64f, 0x17ad, 0xd4e4, 0x1, 0x0);
        gbc.writeMem(0xc1f9, { 0xcb, 0x3e });
        gbc.writeMem(0xd4e4, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2031);
        EXPECT(gbc.pc(), 0xc1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1f9), 0xcb);
        EXPECT(gbc.readMem(0xc1fa), 0x3e);
        EXPECT(gbc.readMem(0xd4e4), 0x20);
        // CB 3E 0155
        gbc.setState(0x5f38, 0x155c, 0x1a70, 0x16d3, 0x521a, 0xedb6, 0x0, 0x0);
        gbc.writeMem(0x5f38, { 0xcb, 0x3e });
        gbc.writeMem(0xedb6, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x155c);
        EXPECT(gbc.pc(), 0x5f3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb6), 0x4);
        // CB 3E 0159
        gbc.setState(0x647a, 0x8c52, 0xdda0, 0x3de4, 0xe67b, 0x8ac7, 0x1, 0x1);
        gbc.writeMem(0x647a, { 0xcb, 0x3e });
        gbc.writeMem(0x8ac7, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x8c52);
        EXPECT(gbc.pc(), 0x647c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac7), 0x5f);
        // CB 3E 015D
        gbc.setState(0x60e6, 0x7135, 0x31a0, 0x927d, 0xf5a5, 0xe582, 0x1, 0x0);
        gbc.writeMem(0x60e6, { 0xcb, 0x3e });
        gbc.writeMem(0xe582, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7135);
        EXPECT(gbc.pc(), 0x60e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe582), 0x45);
        // CB 3E 015E
        gbc.setState(0x47e7, 0x1861, 0x7a40, 0xa701, 0x72f6, 0x3fa7, 0x0, 0x0);
        gbc.writeMem(0x3fa7, { 0x0 });
        gbc.writeMem(0x47e7, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1861);
        EXPECT(gbc.pc(), 0x47e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3E 015F
        gbc.setState(0xbd07, 0x503, 0xc120, 0x18ac, 0x6f00, 0xd825, 0x0, 0x0);
        gbc.writeMem(0xbd07, { 0xcb, 0x3e });
        gbc.writeMem(0xd825, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x503);
        EXPECT(gbc.pc(), 0xbd09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd07), 0xcb);
        EXPECT(gbc.readMem(0xbd08), 0x3e);
        EXPECT(gbc.readMem(0xd825), 0x50);
        // CB 3E 0160
        gbc.setState(0x4f64, 0x5142, 0xc010, 0xcaae, 0x284b, 0xe6a9, 0x0, 0x1);
        gbc.writeMem(0x4f64, { 0xcb, 0x3e });
        gbc.writeMem(0xe6a9, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5142);
        EXPECT(gbc.pc(), 0x4f66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6a9), 0x39);
        // CB 3E 0161
        gbc.setState(0x4671, 0x63ef, 0x7bc0, 0x3842, 0x1df3, 0xcd15, 0x1, 0x1);
        gbc.writeMem(0x4671, { 0xcb, 0x3e });
        gbc.writeMem(0xcd15, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x63ef);
        EXPECT(gbc.pc(), 0x4673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd15), 0x33);
        // CB 3E 0163
        gbc.setState(0x7482, 0x902, 0x4b10, 0xe257, 0xb986, 0xe702, 0x0, 0x0);
        gbc.writeMem(0x7482, { 0xcb, 0x3e });
        gbc.writeMem(0xe702, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x902);
        EXPECT(gbc.pc(), 0x7484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe702), 0x24);
        // CB 3E 0164
        gbc.setState(0x4086, 0x5d61, 0xd470, 0x8827, 0x9bf1, 0xeea8, 0x0, 0x0);
        gbc.writeMem(0x4086, { 0xcb, 0x3e });
        gbc.writeMem(0xeea8, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x5d61);
        EXPECT(gbc.pc(), 0x4088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea8), 0x1a);
        // CB 3E 0165
        gbc.setState(0x7ff5, 0xf121, 0xb570, 0xd4f0, 0x7286, 0xbfd9, 0x1, 0x0);
        gbc.writeMem(0x7ff5, { 0xcb, 0x3e });
        gbc.writeMem(0xbfd9, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf121);
        EXPECT(gbc.pc(), 0x7ff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfd9), 0x60);
        // CB 3E 0166
        gbc.setState(0x3a1b, 0xe95e, 0x3b0, 0xac12, 0xe65b, 0xec1b, 0x0, 0x0);
        gbc.writeMem(0x3a1b, { 0xcb, 0x3e });
        gbc.writeMem(0xec1b, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe95e);
        EXPECT(gbc.pc(), 0x3a1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec1b), 0x43);
        // CB 3E 0168
        gbc.setState(0x621e, 0xc447, 0xe360, 0xdd24, 0x1641, 0xcbef, 0x1, 0x1);
        gbc.writeMem(0x621e, { 0xcb, 0x3e });
        gbc.writeMem(0xcbef, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc447);
        EXPECT(gbc.pc(), 0x6220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbef), 0x2d);
        // CB 3E 016C
        gbc.setState(0x55aa, 0x2d4b, 0x490, 0xf443, 0xc922, 0xf39d, 0x0, 0x1);
        gbc.writeMem(0x55aa, { 0xcb, 0x3e });
        gbc.writeMem(0xf39d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2d4b);
        EXPECT(gbc.pc(), 0x55ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf39d), 0x2a);
        // CB 3E 016D
        gbc.setState(0x3305, 0x5ba8, 0x3af0, 0xe94b, 0x2b46, 0xf891, 0x0, 0x0);
        gbc.writeMem(0x3305, { 0xcb, 0x3e });
        gbc.writeMem(0xf891, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5ba8);
        EXPECT(gbc.pc(), 0x3307);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf891), 0x7a);
        // CB 3E 016E
        gbc.setState(0x8c8a, 0x80a8, 0x1ee0, 0x61e3, 0xfc79, 0xf7df, 0x0, 0x0);
        gbc.writeMem(0x8c8a, { 0xcb, 0x3e });
        gbc.writeMem(0xf7df, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x80a8);
        EXPECT(gbc.pc(), 0x8c8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c8a), 0xcb);
        EXPECT(gbc.readMem(0x8c8b), 0x3e);
        EXPECT(gbc.readMem(0xf7df), 0x7d);
        // CB 3E 016F
        gbc.setState(0x214, 0x2840, 0x3940, 0xebe3, 0xa799, 0xee11, 0x1, 0x0);
        gbc.writeMem(0x214, { 0xcb, 0x3e });
        gbc.writeMem(0xee11, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2840);
        EXPECT(gbc.pc(), 0x216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee11), 0x17);
        // CB 3E 0177
        gbc.setState(0xc061, 0xe773, 0x5da0, 0xbc9c, 0xbfb6, 0xd69e, 0x0, 0x0);
        gbc.writeMem(0xc061, { 0xcb, 0x3e });
        gbc.writeMem(0xd69e, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe773);
        EXPECT(gbc.pc(), 0xc063);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc061), 0xcb);
        EXPECT(gbc.readMem(0xc062), 0x3e);
        EXPECT(gbc.readMem(0xd69e), 0x44);
        // CB 3E 0178
        gbc.setState(0x7d28, 0x83ed, 0x67b0, 0xd378, 0x457d, 0xa405, 0x0, 0x1);
        gbc.writeMem(0x7d28, { 0xcb, 0x3e });
        gbc.writeMem(0xa405, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x83ed);
        EXPECT(gbc.pc(), 0x7d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa405), 0x2b);
        // CB 3E 0179
        gbc.setState(0xd64f, 0xe71, 0x4520, 0xe835, 0x9652, 0xb819, 0x1, 0x1);
        gbc.writeMem(0xb819, { 0x16 });
        gbc.writeMem(0xd64f, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe71);
        EXPECT(gbc.pc(), 0xd651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb819), 0xb);
        EXPECT(gbc.readMem(0xd64f), 0xcb);
        EXPECT(gbc.readMem(0xd650), 0x3e);
        // CB 3E 017A
        gbc.setState(0x481e, 0x2a1d, 0xc220, 0xa7d3, 0xd574, 0x170f, 0x1, 0x1);
        gbc.writeMem(0x170f, { 0x0 });
        gbc.writeMem(0x481e, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2a1d);
        EXPECT(gbc.pc(), 0x4820);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3E 017C
        gbc.setState(0x2c04, 0x81ae, 0x64b0, 0xe3bb, 0xd2b5, 0x9c71, 0x0, 0x0);
        gbc.writeMem(0x2c04, { 0xcb, 0x3e });
        gbc.writeMem(0x9c71, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x81ae);
        EXPECT(gbc.pc(), 0x2c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c71), 0x26);
        // CB 3E 017D
        gbc.setState(0xaa89, 0x41f0, 0xffe0, 0x3412, 0xbf3b, 0xad59, 0x0, 0x1);
        gbc.writeMem(0xaa89, { 0xcb, 0x3e });
        gbc.writeMem(0xad59, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x41f0);
        EXPECT(gbc.pc(), 0xaa8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa89), 0xcb);
        EXPECT(gbc.readMem(0xaa8a), 0x3e);
        EXPECT(gbc.readMem(0xad59), 0x7a);
        // CB 3E 017F
        gbc.setState(0x8d3c, 0x6b44, 0x99b0, 0x3fc5, 0xff3d, 0x929f, 0x0, 0x0);
        gbc.writeMem(0x8d3c, { 0xcb, 0x3e });
        gbc.writeMem(0x929f, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6b44);
        EXPECT(gbc.pc(), 0x8d3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d3c), 0xcb);
        EXPECT(gbc.readMem(0x8d3d), 0x3e);
        EXPECT(gbc.readMem(0x929f), 0x12);
        // CB 3E 0180
        gbc.setState(0x2e14, 0xc0a5, 0xeca0, 0xcc9b, 0xa3ab, 0xca9e, 0x1, 0x0);
        gbc.writeMem(0x2e14, { 0xcb, 0x3e });
        gbc.writeMem(0xca9e, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc0a5);
        EXPECT(gbc.pc(), 0x2e16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca9e), 0x7);
        // CB 3E 0181
        gbc.setState(0x9ed5, 0x2bcc, 0xaa20, 0xc75b, 0x6fa3, 0x8a9e, 0x1, 0x0);
        gbc.writeMem(0x8a9e, { 0x84 });
        gbc.writeMem(0x9ed5, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2bcc);
        EXPECT(gbc.pc(), 0x9ed7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a9e), 0x42);
        EXPECT(gbc.readMem(0x9ed5), 0xcb);
        EXPECT(gbc.readMem(0x9ed6), 0x3e);
        // CB 3E 0183
        gbc.setState(0xdf0a, 0x7669, 0x6fd0, 0x6a1d, 0x412, 0xae2a, 0x1, 0x0);
        gbc.writeMem(0xae2a, { 0xe8 });
        gbc.writeMem(0xdf0a, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7669);
        EXPECT(gbc.pc(), 0xdf0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae2a), 0x74);
        EXPECT(gbc.readMem(0xdf0a), 0xcb);
        EXPECT(gbc.readMem(0xdf0b), 0x3e);
        // CB 3E 0186
        gbc.setState(0x5eec, 0x6782, 0x3880, 0xf1c1, 0x8857, 0x8276, 0x1, 0x1);
        gbc.writeMem(0x5eec, { 0xcb, 0x3e });
        gbc.writeMem(0x8276, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6782);
        EXPECT(gbc.pc(), 0x5eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8276), 0x22);
        // CB 3E 0188
        gbc.setState(0x4581, 0x61e1, 0x41f0, 0xb5ab, 0x1ec4, 0x8280, 0x0, 0x1);
        gbc.writeMem(0x4581, { 0xcb, 0x3e });
        gbc.writeMem(0x8280, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x61e1);
        EXPECT(gbc.pc(), 0x4583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8280), 0x9);
        // CB 3E 018C
        gbc.setState(0x2ef3, 0xdc99, 0x6af0, 0x9cc, 0x15f5, 0xdfb2, 0x1, 0x1);
        gbc.writeMem(0x2ef3, { 0xcb, 0x3e });
        gbc.writeMem(0xdfb2, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xdc99);
        EXPECT(gbc.pc(), 0x2ef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfb2), 0x70);
        // CB 3E 018D
        gbc.setState(0x8451, 0x9946, 0x4610, 0xc36a, 0x62a5, 0xb6bc, 0x0, 0x0);
        gbc.writeMem(0x8451, { 0xcb, 0x3e });
        gbc.writeMem(0xb6bc, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9946);
        EXPECT(gbc.pc(), 0x8453);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8451), 0xcb);
        EXPECT(gbc.readMem(0x8452), 0x3e);
        EXPECT(gbc.readMem(0xb6bc), 0x10);
        // CB 3E 018E
        gbc.setState(0x587b, 0x1aa3, 0xb70, 0xb053, 0xe2cb, 0xa32c, 0x0, 0x0);
        gbc.writeMem(0x587b, { 0xcb, 0x3e });
        gbc.writeMem(0xa32c, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1aa3);
        EXPECT(gbc.pc(), 0x587d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa32c), 0x36);
        // CB 3E 018F
        gbc.setState(0x8710, 0x793b, 0x2800, 0xb20b, 0x3778, 0x81d2, 0x1, 0x0);
        gbc.writeMem(0x81d2, { 0x8 });
        gbc.writeMem(0x8710, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x793b);
        EXPECT(gbc.pc(), 0x8712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81d2), 0x4);
        EXPECT(gbc.readMem(0x8710), 0xcb);
        EXPECT(gbc.readMem(0x8711), 0x3e);
        // CB 3E 0191
        gbc.setState(0x6008, 0xe33, 0x6210, 0xfe4f, 0x7393, 0x8ac4, 0x0, 0x1);
        gbc.writeMem(0x6008, { 0xcb, 0x3e });
        gbc.writeMem(0x8ac4, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe33);
        EXPECT(gbc.pc(), 0x600a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac4), 0x63);
        // CB 3E 0192
        gbc.setState(0x1f8c, 0x6b5f, 0xa7c0, 0xf532, 0x81aa, 0xa5d4, 0x1, 0x0);
        gbc.writeMem(0x1f8c, { 0xcb, 0x3e });
        gbc.writeMem(0xa5d4, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6b5f);
        EXPECT(gbc.pc(), 0x1f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d4), 0x30);
        // CB 3E 0193
        gbc.setState(0xdb66, 0x16d1, 0x44b0, 0x875a, 0x4580, 0xdeec, 0x1, 0x0);
        gbc.writeMem(0xdb66, { 0xcb, 0x3e });
        gbc.writeMem(0xdeec, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x16d1);
        EXPECT(gbc.pc(), 0xdb68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb66), 0xcb);
        EXPECT(gbc.readMem(0xdb67), 0x3e);
        EXPECT(gbc.readMem(0xdeec), 0x19);
        // CB 3E 0195
        gbc.setState(0x4eee, 0x649b, 0x6b80, 0x9d47, 0x9606, 0x949f, 0x0, 0x0);
        gbc.writeMem(0x4eee, { 0xcb, 0x3e });
        gbc.writeMem(0x949f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x649b);
        EXPECT(gbc.pc(), 0x4ef0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x949f), 0x6);
        // CB 3E 0197
        gbc.setState(0x4796, 0xda03, 0x8050, 0x349c, 0x7701, 0xd05e, 0x0, 0x1);
        gbc.writeMem(0x4796, { 0xcb, 0x3e });
        gbc.writeMem(0xd05e, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xda03);
        EXPECT(gbc.pc(), 0x4798);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd05e), 0x75);
        // CB 3E 0199
        gbc.setState(0x1070, 0x2b61, 0xf900, 0xd159, 0xcd85, 0xb87b, 0x1, 0x1);
        gbc.writeMem(0x1070, { 0xcb, 0x3e });
        gbc.writeMem(0xb87b, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2b61);
        EXPECT(gbc.pc(), 0x1072);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb87b), 0x33);
        // CB 3E 019A
        gbc.setState(0xd6, 0xd33d, 0xac60, 0x848c, 0xdd22, 0x94d2, 0x0, 0x0);
        gbc.writeMem(0xd6, { 0xcb, 0x3e });
        gbc.writeMem(0x94d2, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd33d);
        EXPECT(gbc.pc(), 0xd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d2), 0x68);
        // CB 3E 019E
        gbc.setState(0x1b76, 0x6fbb, 0x3a0, 0x53fb, 0xb284, 0xbddd, 0x1, 0x1);
        gbc.writeMem(0x1b76, { 0xcb, 0x3e });
        gbc.writeMem(0xbddd, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6fbb);
        EXPECT(gbc.pc(), 0x1b78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbddd), 0x2c);
        // CB 3E 01A2
        gbc.setState(0x7678, 0xc82, 0x78f0, 0x1, 0xb4c6, 0xe6a5, 0x1, 0x0);
        gbc.writeMem(0x7678, { 0xcb, 0x3e });
        gbc.writeMem(0xe6a5, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc82);
        EXPECT(gbc.pc(), 0x767a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6a5), 0x7f);
        // CB 3E 01A3
        gbc.setState(0x4cbf, 0xd6d1, 0x3e50, 0xed90, 0x6e43, 0xde5a, 0x1, 0x0);
        gbc.writeMem(0x4cbf, { 0xcb, 0x3e });
        gbc.writeMem(0xde5a, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd6d1);
        EXPECT(gbc.pc(), 0x4cc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde5a), 0x60);
        // CB 3E 01A4
        gbc.setState(0x7738, 0x6998, 0xdea0, 0xb97, 0xd781, 0xb89f, 0x0, 0x1);
        gbc.writeMem(0x7738, { 0xcb, 0x3e });
        gbc.writeMem(0xb89f, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6998);
        EXPECT(gbc.pc(), 0x773a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb89f), 0x5b);
        // CB 3E 01A7
        gbc.setState(0x1d8d, 0x1eb2, 0x1210, 0xdd9, 0xb5c8, 0xb108, 0x0, 0x1);
        gbc.writeMem(0x1d8d, { 0xcb, 0x3e });
        gbc.writeMem(0xb108, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x1eb2);
        EXPECT(gbc.pc(), 0x1d8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb108), 0x5f);
        // CB 3E 01A9
        gbc.setState(0x1dd4, 0x7878, 0x6aa0, 0xebb1, 0xe4fa, 0xa2b2, 0x1, 0x1);
        gbc.writeMem(0x1dd4, { 0xcb, 0x3e });
        gbc.writeMem(0xa2b2, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7878);
        EXPECT(gbc.pc(), 0x1dd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b2), 0x6f);
        // CB 3E 01AA
        gbc.setState(0xca45, 0x863b, 0x2ae0, 0x7dff, 0xff40, 0xa4ad, 0x1, 0x0);
        gbc.writeMem(0xa4ad, { 0xa2 });
        gbc.writeMem(0xca45, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x863b);
        EXPECT(gbc.pc(), 0xca47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ad), 0x51);
        EXPECT(gbc.readMem(0xca45), 0xcb);
        EXPECT(gbc.readMem(0xca46), 0x3e);
        // CB 3E 01AB
        gbc.setState(0x3d51, 0x24dc, 0x8fc0, 0xb9ea, 0xac25, 0xb896, 0x0, 0x1);
        gbc.writeMem(0x3d51, { 0xcb, 0x3e });
        gbc.writeMem(0xb896, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x24dc);
        EXPECT(gbc.pc(), 0x3d53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb896), 0x4c);
        // CB 3E 01B0
        gbc.setState(0xc854, 0x651, 0x410, 0x119a, 0xb608, 0xab6b, 0x0, 0x1);
        gbc.writeMem(0xab6b, { 0x94 });
        gbc.writeMem(0xc854, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x651);
        EXPECT(gbc.pc(), 0xc856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab6b), 0x4a);
        EXPECT(gbc.readMem(0xc854), 0xcb);
        EXPECT(gbc.readMem(0xc855), 0x3e);
        // CB 3E 01B1
        gbc.setState(0x8427, 0x5066, 0x2f50, 0xad75, 0x8d76, 0x9e38, 0x0, 0x1);
        gbc.writeMem(0x8427, { 0xcb, 0x3e });
        gbc.writeMem(0x9e38, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5066);
        EXPECT(gbc.pc(), 0x8429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8427), 0xcb);
        EXPECT(gbc.readMem(0x8428), 0x3e);
        EXPECT(gbc.readMem(0x9e38), 0x77);
        // CB 3E 01B7
        gbc.setState(0x8d25, 0x7cc5, 0xcce0, 0x81e0, 0xa38e, 0xdf18, 0x0, 0x1);
        gbc.writeMem(0x8d25, { 0xcb, 0x3e });
        gbc.writeMem(0xdf18, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7cc5);
        EXPECT(gbc.pc(), 0x8d27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d25), 0xcb);
        EXPECT(gbc.readMem(0x8d26), 0x3e);
        EXPECT(gbc.readMem(0xdf18), 0x8);
        // CB 3E 01BA
        gbc.setState(0xe122, 0x960c, 0xf1f0, 0xf9a5, 0x6bea, 0xd2d3, 0x1, 0x0);
        gbc.writeMem(0xd2d3, { 0x62 });
        gbc.writeMem(0xe122, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x960c);
        EXPECT(gbc.pc(), 0xe124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2d3), 0x31);
        EXPECT(gbc.readMem(0xe122), 0xcb);
        EXPECT(gbc.readMem(0xe123), 0x3e);
        // CB 3E 01BD
        gbc.setState(0x7dc, 0x8ea7, 0x3900, 0xc7f7, 0xc530, 0xa31e, 0x1, 0x0);
        gbc.writeMem(0x7dc, { 0xcb, 0x3e });
        gbc.writeMem(0xa31e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x8ea7);
        EXPECT(gbc.pc(), 0x7de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa31e), 0x51);
        // CB 3E 01BE
        gbc.setState(0x39e9, 0xa273, 0xda80, 0x1894, 0xdfff, 0xa03a, 0x1, 0x1);
        gbc.writeMem(0x39e9, { 0xcb, 0x3e });
        gbc.writeMem(0xa03a, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa273);
        EXPECT(gbc.pc(), 0x39eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03a), 0x50);
        // CB 3E 01C1
        gbc.setState(0x9d7c, 0xfbfa, 0xaf50, 0x96fd, 0xfe97, 0xc0b9, 0x1, 0x1);
        gbc.writeMem(0x9d7c, { 0xcb, 0x3e });
        gbc.writeMem(0xc0b9, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfbfa);
        EXPECT(gbc.pc(), 0x9d7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d7c), 0xcb);
        EXPECT(gbc.readMem(0x9d7d), 0x3e);
        EXPECT(gbc.readMem(0xc0b9), 0x46);
        // CB 3E 01C2
        gbc.setState(0x451f, 0x41dc, 0xa9a0, 0x6922, 0x7764, 0xe8fc, 0x0, 0x1);
        gbc.writeMem(0x451f, { 0xcb, 0x3e });
        gbc.writeMem(0xe8fc, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x41dc);
        EXPECT(gbc.pc(), 0x4521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8fc), 0x74);
        // CB 3E 01C4
        gbc.setState(0x4291, 0x6458, 0xc9d0, 0x1bd0, 0x3f76, 0xe032, 0x0, 0x0);
        gbc.writeMem(0x4291, { 0xcb, 0x3e });
        gbc.writeMem(0xe032, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6458);
        EXPECT(gbc.pc(), 0x4293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe032), 0x4f);
        // CB 3E 01C8
        gbc.setState(0xb16a, 0x7b9, 0x80e0, 0xd992, 0xefef, 0xda02, 0x0, 0x0);
        gbc.writeMem(0xb16a, { 0xcb, 0x3e });
        gbc.writeMem(0xda02, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7b9);
        EXPECT(gbc.pc(), 0xb16c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16a), 0xcb);
        EXPECT(gbc.readMem(0xb16b), 0x3e);
        EXPECT(gbc.readMem(0xda02), 0xe);
        // CB 3E 01C9
        gbc.setState(0x5422, 0x1ba2, 0x85b0, 0xfc4b, 0x27f8, 0xbb37, 0x0, 0x0);
        gbc.writeMem(0x5422, { 0xcb, 0x3e });
        gbc.writeMem(0xbb37, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1ba2);
        EXPECT(gbc.pc(), 0x5424);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb37), 0x2c);
        // CB 3E 01CA
        gbc.setState(0x66fa, 0x6700, 0x3140, 0x1580, 0x13d5, 0x89c0, 0x1, 0x1);
        gbc.writeMem(0x66fa, { 0xcb, 0x3e });
        gbc.writeMem(0x89c0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6700);
        EXPECT(gbc.pc(), 0x66fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c0), 0x0);
        // CB 3E 01CD
        gbc.setState(0x8d3c, 0x8fe, 0xd90, 0xc589, 0xdfcf, 0xdd5c, 0x1, 0x0);
        gbc.writeMem(0x8d3c, { 0xcb, 0x3e });
        gbc.writeMem(0xdd5c, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8fe);
        EXPECT(gbc.pc(), 0x8d3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d3c), 0xcb);
        EXPECT(gbc.readMem(0x8d3d), 0x3e);
        EXPECT(gbc.readMem(0xdd5c), 0x6a);
        // CB 3E 01CE
        gbc.setState(0x7d4d, 0xa24c, 0x7100, 0x4413, 0x5126, 0xce99, 0x0, 0x0);
        gbc.writeMem(0x7d4d, { 0xcb, 0x3e });
        gbc.writeMem(0xce99, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa24c);
        EXPECT(gbc.pc(), 0x7d4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce99), 0x3f);
        // CB 3E 01D1
        gbc.setState(0x2433, 0xe94b, 0x7570, 0x935a, 0x9906, 0xe16b, 0x1, 0x0);
        gbc.writeMem(0x2433, { 0xcb, 0x3e });
        gbc.writeMem(0xe16b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe94b);
        EXPECT(gbc.pc(), 0x2435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe16b), 0x7d);
        // CB 3E 01D3
        gbc.setState(0x9afa, 0xd27f, 0xa4e0, 0xddc2, 0x7dd8, 0xa76f, 0x1, 0x1);
        gbc.writeMem(0x9afa, { 0xcb, 0x3e });
        gbc.writeMem(0xa76f, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd27f);
        EXPECT(gbc.pc(), 0x9afc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9afa), 0xcb);
        EXPECT(gbc.readMem(0x9afb), 0x3e);
        EXPECT(gbc.readMem(0xa76f), 0x3d);
        // CB 3E 01DB
        gbc.setState(0xb658, 0xe81b, 0xdf70, 0xfb1e, 0x440d, 0xcd6a, 0x0, 0x1);
        gbc.writeMem(0xb658, { 0xcb, 0x3e });
        gbc.writeMem(0xcd6a, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe81b);
        EXPECT(gbc.pc(), 0xb65a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb658), 0xcb);
        EXPECT(gbc.readMem(0xb659), 0x3e);
        EXPECT(gbc.readMem(0xcd6a), 0x44);
        // CB 3E 01DD
        gbc.setState(0xb037, 0x9402, 0x7d50, 0xfef8, 0xfb41, 0xfa34, 0x0, 0x1);
        gbc.writeMem(0xb037, { 0xcb, 0x3e });
        gbc.writeMem(0xfa34, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9402);
        EXPECT(gbc.pc(), 0xb039);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb037), 0xcb);
        EXPECT(gbc.readMem(0xb038), 0x3e);
        EXPECT(gbc.readMem(0xfa34), 0x72);
        // CB 3E 01DE
        gbc.setState(0x2e19, 0xdfba, 0x8190, 0x99c, 0x4fe4, 0x839c, 0x1, 0x1);
        gbc.writeMem(0x2e19, { 0xcb, 0x3e });
        gbc.writeMem(0x839c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xdfba);
        EXPECT(gbc.pc(), 0x2e1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x839c), 0x20);
        // CB 3E 01E3
        gbc.setState(0x49c5, 0x8321, 0xc9c0, 0xcc32, 0x802, 0xe9b9, 0x1, 0x1);
        gbc.writeMem(0x49c5, { 0xcb, 0x3e });
        gbc.writeMem(0xe9b9, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8321);
        EXPECT(gbc.pc(), 0x49c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b9), 0x51);
        // CB 3E 01E6
        gbc.setState(0x7009, 0xb60b, 0x72b0, 0xb98e, 0x9c58, 0xed08, 0x0, 0x1);
        gbc.writeMem(0x7009, { 0xcb, 0x3e });
        gbc.writeMem(0xed08, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb60b);
        EXPECT(gbc.pc(), 0x700b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed08), 0x2a);
        // CB 3E 01E7
        gbc.setState(0xed32, 0xd635, 0x15e0, 0xccb2, 0x65e2, 0xb8b5, 0x0, 0x0);
        gbc.writeMem(0xb8b5, { 0x51 });
        gbc.writeMem(0xed32, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd635);
        EXPECT(gbc.pc(), 0xed34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8b5), 0x28);
        EXPECT(gbc.readMem(0xed32), 0xcb);
        EXPECT(gbc.readMem(0xed33), 0x3e);
        // CB 3E 01E9
        gbc.setState(0x9ba4, 0xbac3, 0xd130, 0xc972, 0x420b, 0xb2f9, 0x1, 0x0);
        gbc.writeMem(0x9ba4, { 0xcb, 0x3e });
        gbc.writeMem(0xb2f9, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xbac3);
        EXPECT(gbc.pc(), 0x9ba6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba4), 0xcb);
        EXPECT(gbc.readMem(0x9ba5), 0x3e);
        EXPECT(gbc.readMem(0xb2f9), 0x7b);
        // CB 3E 01EC
        gbc.setState(0xa8d8, 0x5f4e, 0x3800, 0xfe62, 0x7c30, 0xe4a3, 0x0, 0x0);
        gbc.writeMem(0xa8d8, { 0xcb, 0x3e });
        gbc.writeMem(0xe4a3, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5f4e);
        EXPECT(gbc.pc(), 0xa8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d8), 0xcb);
        EXPECT(gbc.readMem(0xa8d9), 0x3e);
        EXPECT(gbc.readMem(0xe4a3), 0x17);
        // CB 3E 01EF
        gbc.setState(0x6d32, 0xfa63, 0xbd40, 0xe48, 0xc6aa, 0xfabc, 0x1, 0x0);
        gbc.writeMem(0x6d32, { 0xcb, 0x3e });
        gbc.writeMem(0xfabc, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfa63);
        EXPECT(gbc.pc(), 0x6d34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfabc), 0x2e);
        // CB 3E 01F0
        gbc.setState(0x9589, 0xcc5b, 0x310, 0xf1fb, 0xce7b, 0xe5f9, 0x0, 0x0);
        gbc.writeMem(0x9589, { 0xcb, 0x3e });
        gbc.writeMem(0xe5f9, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xcc5b);
        EXPECT(gbc.pc(), 0x958b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9589), 0xcb);
        EXPECT(gbc.readMem(0x958a), 0x3e);
        EXPECT(gbc.readMem(0xe5f9), 0x5e);
        // CB 3E 01F4
        gbc.setState(0xb107, 0x49db, 0x25a0, 0x3dd6, 0x5e, 0xd687, 0x1, 0x1);
        gbc.writeMem(0xb107, { 0xcb, 0x3e });
        gbc.writeMem(0xd687, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x49db);
        EXPECT(gbc.pc(), 0xb109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb107), 0xcb);
        EXPECT(gbc.readMem(0xb108), 0x3e);
        EXPECT(gbc.readMem(0xd687), 0xa);
        // CB 3E 01F7
        gbc.setState(0xa8a2, 0x9ba0, 0x5b40, 0xa9a1, 0x8ac1, 0x9ba3, 0x1, 0x1);
        gbc.writeMem(0x9ba3, { 0xe4 });
        gbc.writeMem(0xa8a2, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9ba0);
        EXPECT(gbc.pc(), 0xa8a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba3), 0x72);
        EXPECT(gbc.readMem(0xa8a2), 0xcb);
        EXPECT(gbc.readMem(0xa8a3), 0x3e);
        // CB 3E 01F8
        gbc.setState(0x3829, 0xcd1d, 0xe00, 0x2c20, 0x10b9, 0xb793, 0x0, 0x1);
        gbc.writeMem(0x3829, { 0xcb, 0x3e });
        gbc.writeMem(0xb793, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xcd1d);
        EXPECT(gbc.pc(), 0x382b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb793), 0x7);
        // CB 3E 01FE
        gbc.setState(0xe26b, 0x9687, 0x9e60, 0x8557, 0x295d, 0xb587, 0x1, 0x0);
        gbc.writeMem(0xb587, { 0xa6 });
        gbc.writeMem(0xe26b, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9687);
        EXPECT(gbc.pc(), 0xe26d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb587), 0x53);
        EXPECT(gbc.readMem(0xe26b), 0xcb);
        EXPECT(gbc.readMem(0xe26c), 0x3e);
        // CB 3E 0201
        gbc.setState(0xa3f8, 0xb109, 0x61b0, 0x2a2b, 0x1c92, 0x95fc, 0x0, 0x1);
        gbc.writeMem(0x95fc, { 0x5e });
        gbc.writeMem(0xa3f8, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb109);
        EXPECT(gbc.pc(), 0xa3fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fc), 0x2f);
        EXPECT(gbc.readMem(0xa3f8), 0xcb);
        EXPECT(gbc.readMem(0xa3f9), 0x3e);
        // CB 3E 0205
        gbc.setState(0x3f7, 0xe08f, 0x28b0, 0x7a85, 0x693e, 0xe124, 0x1, 0x0);
        gbc.writeMem(0x3f7, { 0xcb, 0x3e });
        gbc.writeMem(0xe124, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe08f);
        EXPECT(gbc.pc(), 0x3f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe124), 0x51);
        // CB 3E 0207
        gbc.setState(0x4c3f, 0x7900, 0x9fc0, 0xbcb0, 0xca2e, 0xb04f, 0x0, 0x0);
        gbc.writeMem(0x4c3f, { 0xcb, 0x3e });
        gbc.writeMem(0xb04f, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7900);
        EXPECT(gbc.pc(), 0x4c41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb04f), 0x2b);
        // CB 3E 020A
        gbc.setState(0xfd9, 0x31bc, 0x6ee0, 0xad47, 0x781f, 0xde6c, 0x0, 0x0);
        gbc.writeMem(0xfd9, { 0xcb, 0x3e });
        gbc.writeMem(0xde6c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x31bc);
        EXPECT(gbc.pc(), 0xfdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde6c), 0x45);
        // CB 3E 020B
        gbc.setState(0x3d2, 0x52d, 0xaa00, 0xc9da, 0x7959, 0xbcaf, 0x0, 0x0);
        gbc.writeMem(0x3d2, { 0xcb, 0x3e });
        gbc.writeMem(0xbcaf, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x52d);
        EXPECT(gbc.pc(), 0x3d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcaf), 0x77);
        // CB 3E 020F
        gbc.setState(0x182c, 0x5cd0, 0x3710, 0x667f, 0x6fd1, 0xf345, 0x0, 0x0);
        gbc.writeMem(0x182c, { 0xcb, 0x3e });
        gbc.writeMem(0xf345, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5cd0);
        EXPECT(gbc.pc(), 0x182e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf345), 0x72);
        // CB 3E 0210
        gbc.setState(0x23b5, 0x34f, 0x75f0, 0x2fcc, 0x8e1b, 0x8fb7, 0x0, 0x1);
        gbc.writeMem(0x23b5, { 0xcb, 0x3e });
        gbc.writeMem(0x8fb7, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x34f);
        EXPECT(gbc.pc(), 0x23b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb7), 0x16);
        // CB 3E 0212
        gbc.setState(0x9c2c, 0x91b0, 0x8440, 0xb55d, 0x688d, 0xe260, 0x1, 0x1);
        gbc.writeMem(0x9c2c, { 0xcb, 0x3e });
        gbc.writeMem(0xe260, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x91b0);
        EXPECT(gbc.pc(), 0x9c2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c2c), 0xcb);
        EXPECT(gbc.readMem(0x9c2d), 0x3e);
        EXPECT(gbc.readMem(0xe260), 0x16);
        // CB 3E 0215
        gbc.setState(0x1c9b, 0xeac7, 0x940, 0x493, 0x5832, 0xa6c9, 0x0, 0x0);
        gbc.writeMem(0x1c9b, { 0xcb, 0x3e });
        gbc.writeMem(0xa6c9, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xeac7);
        EXPECT(gbc.pc(), 0x1c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6c9), 0x14);
        // CB 3E 0216
        gbc.setState(0x8c3f, 0xf211, 0xe90, 0xd70c, 0x5f60, 0xa631, 0x1, 0x0);
        gbc.writeMem(0x8c3f, { 0xcb, 0x3e });
        gbc.writeMem(0xa631, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf211);
        EXPECT(gbc.pc(), 0x8c41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c3f), 0xcb);
        EXPECT(gbc.readMem(0x8c40), 0x3e);
        EXPECT(gbc.readMem(0xa631), 0x1c);
        // CB 3E 0219
        gbc.setState(0x133, 0x70c4, 0x3870, 0xc0e, 0x26c2, 0xbdac, 0x1, 0x1);
        gbc.writeMem(0x133, { 0xcb, 0x3e });
        gbc.writeMem(0xbdac, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x70c4);
        EXPECT(gbc.pc(), 0x135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdac), 0x38);
        // CB 3E 021C
        gbc.setState(0x813, 0x229a, 0x8410, 0xb2f6, 0xabaa, 0x8202, 0x1, 0x0);
        gbc.writeMem(0x813, { 0xcb, 0x3e });
        gbc.writeMem(0x8202, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x229a);
        EXPECT(gbc.pc(), 0x815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8202), 0x1b);
        // CB 3E 021E
        gbc.setState(0xc587, 0xbc62, 0xb380, 0xf413, 0x728f, 0xd2b2, 0x0, 0x1);
        gbc.writeMem(0xc587, { 0xcb, 0x3e });
        gbc.writeMem(0xd2b2, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbc62);
        EXPECT(gbc.pc(), 0xc589);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc587), 0xcb);
        EXPECT(gbc.readMem(0xc588), 0x3e);
        EXPECT(gbc.readMem(0xd2b2), 0x3f);
        // CB 3E 0220
        gbc.setState(0x775e, 0xd2af, 0x8670, 0xad3e, 0x20, 0x865c, 0x0, 0x1);
        gbc.writeMem(0x775e, { 0xcb, 0x3e });
        gbc.writeMem(0x865c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd2af);
        EXPECT(gbc.pc(), 0x7760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x865c), 0x3f);
        // CB 3E 0223
        gbc.setState(0xa8e6, 0x7276, 0xef10, 0x1ede, 0xb97a, 0xe18d, 0x1, 0x1);
        gbc.writeMem(0xa8e6, { 0xcb, 0x3e });
        gbc.writeMem(0xe18d, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7276);
        EXPECT(gbc.pc(), 0xa8e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8e6), 0xcb);
        EXPECT(gbc.readMem(0xa8e7), 0x3e);
        EXPECT(gbc.readMem(0xe18d), 0x61);
        // CB 3E 0224
        gbc.setState(0xaa0, 0x27f, 0x9350, 0x69cc, 0x7e51, 0xc230, 0x1, 0x1);
        gbc.writeMem(0xaa0, { 0xcb, 0x3e });
        gbc.writeMem(0xc230, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x27f);
        EXPECT(gbc.pc(), 0xaa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc230), 0x37);
        // CB 3E 0225
        gbc.setState(0xccbc, 0x2429, 0x2fa0, 0xda09, 0xce7, 0xff1f, 0x0, 0x1);
        gbc.writeMem(0xccbc, { 0xcb, 0x3e });
        gbc.writeMem(0xff1f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2429);
        EXPECT(gbc.pc(), 0xccbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccbc), 0xcb);
        EXPECT(gbc.readMem(0xccbd), 0x3e);
        EXPECT(gbc.readMem(0xff1f), 0x45);
        // CB 3E 0229
        gbc.setState(0x4cda, 0x6199, 0xd550, 0xc4f0, 0x5bd5, 0x9a8b, 0x1, 0x1);
        gbc.writeMem(0x4cda, { 0xcb, 0x3e });
        gbc.writeMem(0x9a8b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6199);
        EXPECT(gbc.pc(), 0x4cdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a8b), 0x51);
        // CB 3E 022F
        gbc.setState(0xc071, 0x42de, 0xa2c0, 0x655d, 0x309, 0x8dd1, 0x1, 0x0);
        gbc.writeMem(0x8dd1, { 0x3b });
        gbc.writeMem(0xc071, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x42de);
        EXPECT(gbc.pc(), 0xc073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd1), 0x1d);
        EXPECT(gbc.readMem(0xc071), 0xcb);
        EXPECT(gbc.readMem(0xc072), 0x3e);
        // CB 3E 0230
        gbc.setState(0x4e07, 0x726a, 0x7870, 0xf626, 0xafc0, 0xb0ed, 0x1, 0x1);
        gbc.writeMem(0x4e07, { 0xcb, 0x3e });
        gbc.writeMem(0xb0ed, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x726a);
        EXPECT(gbc.pc(), 0x4e09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ed), 0x7a);
        // CB 3E 0231
        gbc.setState(0x1812, 0xb77a, 0x8090, 0xd6b6, 0xa133, 0xbb66, 0x1, 0x0);
        gbc.writeMem(0x1812, { 0xcb, 0x3e });
        gbc.writeMem(0xbb66, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xb77a);
        EXPECT(gbc.pc(), 0x1814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb66), 0x7b);
        // CB 3E 0234
        gbc.setState(0xa32f, 0xef1e, 0xac40, 0xbb67, 0xdc14, 0xa1a1, 0x1, 0x1);
        gbc.writeMem(0xa1a1, { 0x2c });
        gbc.writeMem(0xa32f, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xef1e);
        EXPECT(gbc.pc(), 0xa331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a1), 0x16);
        EXPECT(gbc.readMem(0xa32f), 0xcb);
        EXPECT(gbc.readMem(0xa330), 0x3e);
        // CB 3E 0237
        gbc.setState(0xa614, 0xf91e, 0xe7b0, 0x3031, 0x36ac, 0xb97e, 0x0, 0x0);
        gbc.writeMem(0xa614, { 0xcb, 0x3e });
        gbc.writeMem(0xb97e, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf91e);
        EXPECT(gbc.pc(), 0xa616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa614), 0xcb);
        EXPECT(gbc.readMem(0xa615), 0x3e);
        EXPECT(gbc.readMem(0xb97e), 0x65);
        // CB 3E 0238
        gbc.setState(0xa26e, 0x9c4b, 0xbaa0, 0x5c4d, 0x6a6, 0xaf07, 0x0, 0x1);
        gbc.writeMem(0xa26e, { 0xcb, 0x3e });
        gbc.writeMem(0xaf07, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9c4b);
        EXPECT(gbc.pc(), 0xa270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa26e), 0xcb);
        EXPECT(gbc.readMem(0xa26f), 0x3e);
        EXPECT(gbc.readMem(0xaf07), 0x2f);
        // CB 3E 0239
        gbc.setState(0x670e, 0x53b3, 0xdd50, 0xcf1c, 0x5e85, 0xb2d3, 0x1, 0x0);
        gbc.writeMem(0x670e, { 0xcb, 0x3e });
        gbc.writeMem(0xb2d3, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x53b3);
        EXPECT(gbc.pc(), 0x6710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d3), 0x25);
        // CB 3E 023B
        gbc.setState(0xa94b, 0x10f2, 0xc940, 0xec, 0x11db, 0xaddf, 0x0, 0x0);
        gbc.writeMem(0xa94b, { 0xcb, 0x3e });
        gbc.writeMem(0xaddf, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x10f2);
        EXPECT(gbc.pc(), 0xa94d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa94b), 0xcb);
        EXPECT(gbc.readMem(0xa94c), 0x3e);
        EXPECT(gbc.readMem(0xaddf), 0x73);
        // CB 3E 023C
        gbc.setState(0xd898, 0x6ebe, 0x94d0, 0x174f, 0xce38, 0xceac, 0x0, 0x1);
        gbc.writeMem(0xceac, { 0x50 });
        gbc.writeMem(0xd898, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6ebe);
        EXPECT(gbc.pc(), 0xd89a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceac), 0x28);
        EXPECT(gbc.readMem(0xd898), 0xcb);
        EXPECT(gbc.readMem(0xd899), 0x3e);
        // CB 3E 023E
        gbc.setState(0x5d67, 0x9181, 0xeed0, 0x225c, 0x50ab, 0xb9e3, 0x0, 0x0);
        gbc.writeMem(0x5d67, { 0xcb, 0x3e });
        gbc.writeMem(0xb9e3, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9181);
        EXPECT(gbc.pc(), 0x5d69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9e3), 0x31);
        // CB 3E 0242
        gbc.setState(0xad8d, 0x9e02, 0x83a0, 0xec0e, 0x3f42, 0xfb8d, 0x0, 0x0);
        gbc.writeMem(0xad8d, { 0xcb, 0x3e });
        gbc.writeMem(0xfb8d, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x9e02);
        EXPECT(gbc.pc(), 0xad8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8d), 0xcb);
        EXPECT(gbc.readMem(0xad8e), 0x3e);
        EXPECT(gbc.readMem(0xfb8d), 0x68);
        // CB 3E 0243
        gbc.setState(0x8528, 0x6b97, 0xe140, 0xa8f7, 0x9f8e, 0x9fb4, 0x1, 0x1);
        gbc.writeMem(0x8528, { 0xcb, 0x3e });
        gbc.writeMem(0x9fb4, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6b97);
        EXPECT(gbc.pc(), 0x852a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8528), 0xcb);
        EXPECT(gbc.readMem(0x8529), 0x3e);
        EXPECT(gbc.readMem(0x9fb4), 0x48);
        // CB 3E 0244
        gbc.setState(0xa86c, 0x9424, 0xd80, 0x33fe, 0xe58e, 0x87e7, 0x0, 0x1);
        gbc.writeMem(0x87e7, { 0xf9 });
        gbc.writeMem(0xa86c, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9424);
        EXPECT(gbc.pc(), 0xa86e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e7), 0x7c);
        EXPECT(gbc.readMem(0xa86c), 0xcb);
        EXPECT(gbc.readMem(0xa86d), 0x3e);
        // CB 3E 0245
        gbc.setState(0x8810, 0x71b, 0xd930, 0xffaf, 0x7d4f, 0xe1b4, 0x0, 0x0);
        gbc.writeMem(0x8810, { 0xcb, 0x3e });
        gbc.writeMem(0xe1b4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x71b);
        EXPECT(gbc.pc(), 0x8812);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8810), 0xcb);
        EXPECT(gbc.readMem(0x8811), 0x3e);
        EXPECT(gbc.readMem(0xe1b4), 0x0);
        // CB 3E 0249
        gbc.setState(0x8f34, 0xd7b5, 0x2180, 0xa14f, 0xbb16, 0xf858, 0x0, 0x1);
        gbc.writeMem(0x8f34, { 0xcb, 0x3e });
        gbc.writeMem(0xf858, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xd7b5);
        EXPECT(gbc.pc(), 0x8f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f34), 0xcb);
        EXPECT(gbc.readMem(0x8f35), 0x3e);
        EXPECT(gbc.readMem(0xf858), 0x2f);
        // CB 3E 024A
        gbc.setState(0x867d, 0x932f, 0x7450, 0xf0e8, 0xcf1f, 0xc75c, 0x0, 0x1);
        gbc.writeMem(0x867d, { 0xcb, 0x3e });
        gbc.writeMem(0xc75c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x932f);
        EXPECT(gbc.pc(), 0x867f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x867d), 0xcb);
        EXPECT(gbc.readMem(0x867e), 0x3e);
        EXPECT(gbc.readMem(0xc75c), 0x79);
        // CB 3E 024B
        gbc.setState(0x2412, 0x3f60, 0xac0, 0x6677, 0x590a, 0xaebf, 0x1, 0x1);
        gbc.writeMem(0x2412, { 0xcb, 0x3e });
        gbc.writeMem(0xaebf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3f60);
        EXPECT(gbc.pc(), 0x2414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaebf), 0x5e);
        // CB 3E 024C
        gbc.setState(0x6512, 0x6471, 0x3c20, 0x1a67, 0xb47d, 0x855c, 0x1, 0x1);
        gbc.writeMem(0x6512, { 0xcb, 0x3e });
        gbc.writeMem(0x855c, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6471);
        EXPECT(gbc.pc(), 0x6514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x855c), 0x1c);
        // CB 3E 024D
        gbc.setState(0xec8, 0x664d, 0xc820, 0xa346, 0x1c05, 0xd709, 0x0, 0x1);
        gbc.writeMem(0xec8, { 0xcb, 0x3e });
        gbc.writeMem(0xd709, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x664d);
        EXPECT(gbc.pc(), 0xeca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd709), 0x3);
        // CB 3E 024E
        gbc.setState(0x796f, 0xfb3b, 0x90d0, 0xd79a, 0x6f88, 0x96c2, 0x1, 0x1);
        gbc.writeMem(0x796f, { 0xcb, 0x3e });
        gbc.writeMem(0x96c2, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xfb3b);
        EXPECT(gbc.pc(), 0x7971);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c2), 0x64);
        // CB 3E 0251
        gbc.setState(0xd4f1, 0xbc40, 0x54a0, 0xf98a, 0xb109, 0x8b96, 0x1, 0x0);
        gbc.writeMem(0x8b96, { 0x39 });
        gbc.writeMem(0xd4f1, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xbc40);
        EXPECT(gbc.pc(), 0xd4f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b96), 0x1c);
        EXPECT(gbc.readMem(0xd4f1), 0xcb);
        EXPECT(gbc.readMem(0xd4f2), 0x3e);
        // CB 3E 0256
        gbc.setState(0x98b1, 0xff15, 0xe640, 0xa172, 0x17d2, 0xa794, 0x1, 0x1);
        gbc.writeMem(0x98b1, { 0xcb, 0x3e });
        gbc.writeMem(0xa794, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xff15);
        EXPECT(gbc.pc(), 0x98b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98b1), 0xcb);
        EXPECT(gbc.readMem(0x98b2), 0x3e);
        EXPECT(gbc.readMem(0xa794), 0x10);
        // CB 3E 0259
        gbc.setState(0xd71c, 0xaa07, 0x7700, 0xe61, 0x5225, 0x975b, 0x1, 0x0);
        gbc.writeMem(0x975b, { 0xf });
        gbc.writeMem(0xd71c, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xaa07);
        EXPECT(gbc.pc(), 0xd71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x975b), 0x7);
        EXPECT(gbc.readMem(0xd71c), 0xcb);
        EXPECT(gbc.readMem(0xd71d), 0x3e);
        // CB 3E 025A
        gbc.setState(0x7d43, 0x61d7, 0x5180, 0x405a, 0xd07c, 0xe9bf, 0x0, 0x0);
        gbc.writeMem(0x7d43, { 0xcb, 0x3e });
        gbc.writeMem(0xe9bf, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x61d7);
        EXPECT(gbc.pc(), 0x7d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9bf), 0x29);
        // CB 3E 025B
        gbc.setState(0xcbf1, 0xec58, 0x3420, 0xc337, 0x1002, 0xa968, 0x0, 0x1);
        gbc.writeMem(0xa968, { 0xd0 });
        gbc.writeMem(0xcbf1, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xec58);
        EXPECT(gbc.pc(), 0xcbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa968), 0x68);
        EXPECT(gbc.readMem(0xcbf1), 0xcb);
        EXPECT(gbc.readMem(0xcbf2), 0x3e);
        // CB 3E 025C
        gbc.setState(0xdc8d, 0x73a9, 0xafa0, 0x1427, 0x62a4, 0xaa44, 0x1, 0x0);
        gbc.writeMem(0xaa44, { 0xe3 });
        gbc.writeMem(0xdc8d, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x73a9);
        EXPECT(gbc.pc(), 0xdc8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa44), 0x71);
        EXPECT(gbc.readMem(0xdc8d), 0xcb);
        EXPECT(gbc.readMem(0xdc8e), 0x3e);
        // CB 3E 0260
        gbc.setState(0x9b69, 0x81b4, 0x4b60, 0xa683, 0x7fa5, 0xe82a, 0x0, 0x0);
        gbc.writeMem(0x9b69, { 0xcb, 0x3e });
        gbc.writeMem(0xe82a, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x81b4);
        EXPECT(gbc.pc(), 0x9b6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b69), 0xcb);
        EXPECT(gbc.readMem(0x9b6a), 0x3e);
        EXPECT(gbc.readMem(0xe82a), 0x43);
        // CB 3E 0261
        gbc.setState(0x839b, 0x71bf, 0x15b0, 0xa6b1, 0x9cbe, 0xfec6, 0x1, 0x1);
        gbc.writeMem(0x839b, { 0xcb, 0x3e });
        gbc.writeMem(0xfec6, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x71bf);
        EXPECT(gbc.pc(), 0x839d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x839b), 0xcb);
        EXPECT(gbc.readMem(0x839c), 0x3e);
        EXPECT(gbc.readMem(0xfec6), 0x4f);
        // CB 3E 0265
        gbc.setState(0x1795, 0xcaaf, 0x2e30, 0x8406, 0x7ec0, 0xec96, 0x0, 0x0);
        gbc.writeMem(0x1795, { 0xcb, 0x3e });
        gbc.writeMem(0xec96, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xcaaf);
        EXPECT(gbc.pc(), 0x1797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec96), 0x38);
        // CB 3E 0266
        gbc.setState(0x1e54, 0xf465, 0x92b0, 0x5d32, 0xaa97, 0xaa17, 0x1, 0x0);
        gbc.writeMem(0x1e54, { 0xcb, 0x3e });
        gbc.writeMem(0xaa17, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf465);
        EXPECT(gbc.pc(), 0x1e56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa17), 0x33);
        // CB 3E 0267
        gbc.setState(0x860c, 0x3789, 0x7320, 0xd70b, 0x5fb6, 0x9ec5, 0x0, 0x1);
        gbc.writeMem(0x860c, { 0xcb, 0x3e });
        gbc.writeMem(0x9ec5, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3789);
        EXPECT(gbc.pc(), 0x860e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x860c), 0xcb);
        EXPECT(gbc.readMem(0x860d), 0x3e);
        EXPECT(gbc.readMem(0x9ec5), 0x5c);
        // CB 3E 0269
        gbc.setState(0x96a2, 0xf5f3, 0x5490, 0xffef, 0xde4a, 0xc425, 0x0, 0x1);
        gbc.writeMem(0x96a2, { 0xcb, 0x3e });
        gbc.writeMem(0xc425, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf5f3);
        EXPECT(gbc.pc(), 0x96a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96a2), 0xcb);
        EXPECT(gbc.readMem(0x96a3), 0x3e);
        EXPECT(gbc.readMem(0xc425), 0x16);
        // CB 3E 026C
        gbc.setState(0x2ac7, 0x887, 0xc130, 0x8908, 0x97a3, 0x808a, 0x1, 0x1);
        gbc.writeMem(0x2ac7, { 0xcb, 0x3e });
        gbc.writeMem(0x808a, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x887);
        EXPECT(gbc.pc(), 0x2ac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808a), 0x5d);
        // CB 3E 026D
        gbc.setState(0x7333, 0xe54, 0xc240, 0x5b25, 0xcb04, 0xe6a4, 0x1, 0x0);
        gbc.writeMem(0x7333, { 0xcb, 0x3e });
        gbc.writeMem(0xe6a4, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe54);
        EXPECT(gbc.pc(), 0x7335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a4), 0x4d);
        // CB 3E 026F
        gbc.setState(0xe479, 0x5dee, 0x4490, 0xd615, 0x72c7, 0xd37d, 0x1, 0x1);
        gbc.writeMem(0xd37d, { 0xe3 });
        gbc.writeMem(0xe479, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5dee);
        EXPECT(gbc.pc(), 0xe47b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd37d), 0x71);
        EXPECT(gbc.readMem(0xe479), 0xcb);
        EXPECT(gbc.readMem(0xe47a), 0x3e);
        // CB 3E 0272
        gbc.setState(0x1dbf, 0x2733, 0x74c0, 0xb04f, 0xb585, 0xd192, 0x1, 0x0);
        gbc.writeMem(0x1dbf, { 0xcb, 0x3e });
        gbc.writeMem(0xd192, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2733);
        EXPECT(gbc.pc(), 0x1dc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd192), 0x23);
        // CB 3E 0273
        gbc.setState(0x5a15, 0x9bd8, 0x3dd0, 0x2ee3, 0x189b, 0x9fd1, 0x1, 0x0);
        gbc.writeMem(0x5a15, { 0xcb, 0x3e });
        gbc.writeMem(0x9fd1, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9bd8);
        EXPECT(gbc.pc(), 0x5a17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fd1), 0x11);
        // CB 3E 0274
        gbc.setState(0x106a, 0x4032, 0x27d0, 0xdeb6, 0xfb53, 0x9930, 0x1, 0x1);
        gbc.writeMem(0x106a, { 0xcb, 0x3e });
        gbc.writeMem(0x9930, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4032);
        EXPECT(gbc.pc(), 0x106c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9930), 0x5d);
        // CB 3E 0275
        gbc.setState(0x12ba, 0x26a4, 0xac80, 0x81f7, 0xedd1, 0x932f, 0x0, 0x1);
        gbc.writeMem(0x12ba, { 0xcb, 0x3e });
        gbc.writeMem(0x932f, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x26a4);
        EXPECT(gbc.pc(), 0x12bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932f), 0x4c);
        // CB 3E 0277
        gbc.setState(0x7944, 0x880d, 0x1610, 0x9008, 0x782e, 0xb3a8, 0x1, 0x0);
        gbc.writeMem(0x7944, { 0xcb, 0x3e });
        gbc.writeMem(0xb3a8, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x880d);
        EXPECT(gbc.pc(), 0x7946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a8), 0xb);
        // CB 3E 0278
        gbc.setState(0x9a72, 0xad84, 0xfc00, 0x598, 0x3d41, 0x9bae, 0x1, 0x0);
        gbc.writeMem(0x9a72, { 0xcb, 0x3e });
        gbc.writeMem(0x9bae, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xad84);
        EXPECT(gbc.pc(), 0x9a74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a72), 0xcb);
        EXPECT(gbc.readMem(0x9a73), 0x3e);
        EXPECT(gbc.readMem(0x9bae), 0x22);
        // CB 3E 027A
        gbc.setState(0x8487, 0xacb1, 0xd250, 0x185a, 0x1f02, 0x8c00, 0x1, 0x0);
        gbc.writeMem(0x8487, { 0xcb, 0x3e });
        gbc.writeMem(0x8c00, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xacb1);
        EXPECT(gbc.pc(), 0x8489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8487), 0xcb);
        EXPECT(gbc.readMem(0x8488), 0x3e);
        EXPECT(gbc.readMem(0x8c00), 0x50);
        // CB 3E 027F
        gbc.setState(0x92ef, 0x3f94, 0x8420, 0x4794, 0xf136, 0xe213, 0x0, 0x1);
        gbc.writeMem(0x92ef, { 0xcb, 0x3e });
        gbc.writeMem(0xe213, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3f94);
        EXPECT(gbc.pc(), 0x92f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ef), 0xcb);
        EXPECT(gbc.readMem(0x92f0), 0x3e);
        EXPECT(gbc.readMem(0xe213), 0x46);
        // CB 3E 0283
        gbc.setState(0xd57d, 0xa84a, 0x28c0, 0xe8cc, 0x1e2b, 0xde15, 0x0, 0x1);
        gbc.writeMem(0xd57d, { 0xcb, 0x3e });
        gbc.writeMem(0xde15, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa84a);
        EXPECT(gbc.pc(), 0xd57f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd57d), 0xcb);
        EXPECT(gbc.readMem(0xd57e), 0x3e);
        EXPECT(gbc.readMem(0xde15), 0x3c);
        // CB 3E 0285
        gbc.setState(0x8a09, 0xcd04, 0x9e70, 0x2ae4, 0x3822, 0xc5ae, 0x1, 0x1);
        gbc.writeMem(0x8a09, { 0xcb, 0x3e });
        gbc.writeMem(0xc5ae, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcd04);
        EXPECT(gbc.pc(), 0x8a0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a09), 0xcb);
        EXPECT(gbc.readMem(0x8a0a), 0x3e);
        EXPECT(gbc.readMem(0xc5ae), 0x1e);
        // CB 3E 0287
        gbc.setState(0x47e7, 0xa057, 0x2330, 0x82ad, 0xb67c, 0x886a, 0x1, 0x0);
        gbc.writeMem(0x47e7, { 0xcb, 0x3e });
        gbc.writeMem(0x886a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa057);
        EXPECT(gbc.pc(), 0x47e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x886a), 0x74);
        // CB 3E 0289
        gbc.setState(0xd4e2, 0xa383, 0x5780, 0xadd8, 0xb3e3, 0xc3fb, 0x1, 0x0);
        gbc.writeMem(0xc3fb, { 0xae });
        gbc.writeMem(0xd4e2, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa383);
        EXPECT(gbc.pc(), 0xd4e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3fb), 0x57);
        EXPECT(gbc.readMem(0xd4e2), 0xcb);
        EXPECT(gbc.readMem(0xd4e3), 0x3e);
        // CB 3E 0293
        gbc.setState(0x6bd6, 0x6841, 0x3db0, 0x6d6b, 0x788e, 0x918d, 0x1, 0x0);
        gbc.writeMem(0x6bd6, { 0xcb, 0x3e });
        gbc.writeMem(0x918d, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x6841);
        EXPECT(gbc.pc(), 0x6bd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x918d), 0x3e);
        // CB 3E 0297
        gbc.setState(0xaf64, 0xb193, 0xd590, 0xfd8f, 0x59ab, 0xd5be, 0x1, 0x0);
        gbc.writeMem(0xaf64, { 0xcb, 0x3e });
        gbc.writeMem(0xd5be, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb193);
        EXPECT(gbc.pc(), 0xaf66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf64), 0xcb);
        EXPECT(gbc.readMem(0xaf65), 0x3e);
        EXPECT(gbc.readMem(0xd5be), 0x52);
        // CB 3E 0298
        gbc.setState(0x4911, 0xf8a7, 0x32b0, 0xf96, 0x142a, 0xa79d, 0x0, 0x1);
        gbc.writeMem(0x4911, { 0xcb, 0x3e });
        gbc.writeMem(0xa79d, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf8a7);
        EXPECT(gbc.pc(), 0x4913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa79d), 0x76);
        // CB 3E 029A
        gbc.setState(0x674c, 0x1059, 0xb510, 0x1699, 0x59e4, 0xf286, 0x1, 0x1);
        gbc.writeMem(0x674c, { 0xcb, 0x3e });
        gbc.writeMem(0xf286, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1059);
        EXPECT(gbc.pc(), 0x674e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf286), 0x6a);
        // CB 3E 029D
        gbc.setState(0xec9f, 0x8406, 0xe240, 0xb015, 0xfd2f, 0xb57c, 0x1, 0x1);
        gbc.writeMem(0xb57c, { 0xa6 });
        gbc.writeMem(0xec9f, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x8406);
        EXPECT(gbc.pc(), 0xeca1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb57c), 0x53);
        EXPECT(gbc.readMem(0xec9f), 0xcb);
        EXPECT(gbc.readMem(0xeca0), 0x3e);
        // CB 3E 02A0
        gbc.setState(0xf83, 0x85db, 0x4b70, 0x71c6, 0x77af, 0x86d1, 0x0, 0x1);
        gbc.writeMem(0xf83, { 0xcb, 0x3e });
        gbc.writeMem(0x86d1, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x85db);
        EXPECT(gbc.pc(), 0xf85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d1), 0x2e);
        // CB 3E 02A2
        gbc.setState(0xa306, 0xcbde, 0x51a0, 0x2a8b, 0x1024, 0xae7e, 0x1, 0x0);
        gbc.writeMem(0xa306, { 0xcb, 0x3e });
        gbc.writeMem(0xae7e, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xcbde);
        EXPECT(gbc.pc(), 0xa308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa306), 0xcb);
        EXPECT(gbc.readMem(0xa307), 0x3e);
        EXPECT(gbc.readMem(0xae7e), 0x15);
        // CB 3E 02A4
        gbc.setState(0x7673, 0xd390, 0xc0e0, 0x435, 0xbcad, 0xb62d, 0x0, 0x0);
        gbc.writeMem(0x7673, { 0xcb, 0x3e });
        gbc.writeMem(0xb62d, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd390);
        EXPECT(gbc.pc(), 0x7675);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb62d), 0x12);
        // CB 3E 02A5
        gbc.setState(0x9d6f, 0x95d7, 0x50b0, 0x9102, 0x3387, 0xd764, 0x1, 0x1);
        gbc.writeMem(0x9d6f, { 0xcb, 0x3e });
        gbc.writeMem(0xd764, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x95d7);
        EXPECT(gbc.pc(), 0x9d71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d6f), 0xcb);
        EXPECT(gbc.readMem(0x9d70), 0x3e);
        EXPECT(gbc.readMem(0xd764), 0x69);
        // CB 3E 02A6
        gbc.setState(0x8569, 0xfa38, 0xfcd0, 0xb9ba, 0x65e4, 0xe8f6, 0x1, 0x1);
        gbc.writeMem(0x8569, { 0xcb, 0x3e });
        gbc.writeMem(0xe8f6, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfa38);
        EXPECT(gbc.pc(), 0x856b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8569), 0xcb);
        EXPECT(gbc.readMem(0x856a), 0x3e);
        EXPECT(gbc.readMem(0xe8f6), 0x1d);
        // CB 3E 02A7
        gbc.setState(0xd90d, 0x50ac, 0x9490, 0xeb82, 0xc5db, 0xc2f4, 0x0, 0x1);
        gbc.writeMem(0xc2f4, { 0xb9 });
        gbc.writeMem(0xd90d, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x50ac);
        EXPECT(gbc.pc(), 0xd90f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2f4), 0x5c);
        EXPECT(gbc.readMem(0xd90d), 0xcb);
        EXPECT(gbc.readMem(0xd90e), 0x3e);
        // CB 3E 02AA
        gbc.setState(0xe45b, 0xfea, 0x2730, 0xcbc1, 0x259f, 0xef78, 0x1, 0x0);
        gbc.writeMem(0xe45b, { 0xcb, 0x3e });
        gbc.writeMem(0xef78, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xfea);
        EXPECT(gbc.pc(), 0xe45d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe45b), 0xcb);
        EXPECT(gbc.readMem(0xe45c), 0x3e);
        EXPECT(gbc.readMem(0xef78), 0x2d);
        // CB 3E 02AB
        gbc.setState(0x2ad1, 0xf313, 0xa340, 0x9a5d, 0xc418, 0xbace, 0x0, 0x0);
        gbc.writeMem(0x2ad1, { 0xcb, 0x3e });
        gbc.writeMem(0xbace, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf313);
        EXPECT(gbc.pc(), 0x2ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbace), 0x52);
        // CB 3E 02AC
        gbc.setState(0xb9b1, 0x1c50, 0x75d0, 0xbe10, 0x2c13, 0xd786, 0x1, 0x1);
        gbc.writeMem(0xb9b1, { 0xcb, 0x3e });
        gbc.writeMem(0xd786, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1c50);
        EXPECT(gbc.pc(), 0xb9b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b1), 0xcb);
        EXPECT(gbc.readMem(0xb9b2), 0x3e);
        EXPECT(gbc.readMem(0xd786), 0x58);
        // CB 3E 02AD
        gbc.setState(0x52b0, 0x3c9a, 0x1c00, 0xff5c, 0x6e4, 0xc7d8, 0x1, 0x0);
        gbc.writeMem(0x52b0, { 0xcb, 0x3e });
        gbc.writeMem(0xc7d8, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3c9a);
        EXPECT(gbc.pc(), 0x52b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d8), 0x24);
        // CB 3E 02AF
        gbc.setState(0x1748, 0x54c9, 0xa990, 0x4c2b, 0x9aae, 0xbe91, 0x0, 0x1);
        gbc.writeMem(0x1748, { 0xcb, 0x3e });
        gbc.writeMem(0xbe91, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x54c9);
        EXPECT(gbc.pc(), 0x174a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe91), 0x60);
        // CB 3E 02B1
        gbc.setState(0xea97, 0x13db, 0x67c0, 0x6d6c, 0xb7fb, 0xf83a, 0x1, 0x1);
        gbc.writeMem(0xea97, { 0xcb, 0x3e });
        gbc.writeMem(0xf83a, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x13db);
        EXPECT(gbc.pc(), 0xea99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea97), 0xcb);
        EXPECT(gbc.readMem(0xea98), 0x3e);
        EXPECT(gbc.readMem(0xf83a), 0x41);
        // CB 3E 02B2
        gbc.setState(0xa2e7, 0xc108, 0xab40, 0xf5e3, 0xfc29, 0x8b58, 0x1, 0x1);
        gbc.writeMem(0x8b58, { 0xcc });
        gbc.writeMem(0xa2e7, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc108);
        EXPECT(gbc.pc(), 0xa2e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b58), 0x66);
        EXPECT(gbc.readMem(0xa2e7), 0xcb);
        EXPECT(gbc.readMem(0xa2e8), 0x3e);
        // CB 3E 02B3
        gbc.setState(0xe61, 0x9660, 0x89d0, 0x697e, 0x4b66, 0xfed9, 0x1, 0x0);
        gbc.writeMem(0xe61, { 0xcb, 0x3e });
        gbc.writeMem(0xfed9, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9660);
        EXPECT(gbc.pc(), 0xe63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfed9), 0x70);
        // CB 3E 02B4
        gbc.setState(0x9ce1, 0x6437, 0x90b0, 0x46fc, 0x6498, 0x94cf, 0x0, 0x1);
        gbc.writeMem(0x94cf, { 0xc5 });
        gbc.writeMem(0x9ce1, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6437);
        EXPECT(gbc.pc(), 0x9ce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94cf), 0x62);
        EXPECT(gbc.readMem(0x9ce1), 0xcb);
        EXPECT(gbc.readMem(0x9ce2), 0x3e);
        // CB 3E 02B7
        gbc.setState(0x4c27, 0x41ba, 0xe850, 0x8f8a, 0x9577, 0xf87e, 0x0, 0x1);
        gbc.writeMem(0x4c27, { 0xcb, 0x3e });
        gbc.writeMem(0xf87e, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x41ba);
        EXPECT(gbc.pc(), 0x4c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf87e), 0x9);
        // CB 3E 02BB
        gbc.setState(0xcd8f, 0xb015, 0x70e0, 0x9695, 0x4af2, 0xd2aa, 0x1, 0x0);
        gbc.writeMem(0xcd8f, { 0xcb, 0x3e });
        gbc.writeMem(0xd2aa, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb015);
        EXPECT(gbc.pc(), 0xcd91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd8f), 0xcb);
        EXPECT(gbc.readMem(0xcd90), 0x3e);
        EXPECT(gbc.readMem(0xd2aa), 0x3c);
        // CB 3E 02BE
        gbc.setState(0x9d0d, 0x64c5, 0x8b50, 0xc2da, 0x1f73, 0xc678, 0x1, 0x1);
        gbc.writeMem(0x9d0d, { 0xcb, 0x3e });
        gbc.writeMem(0xc678, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x64c5);
        EXPECT(gbc.pc(), 0x9d0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d0d), 0xcb);
        EXPECT(gbc.readMem(0x9d0e), 0x3e);
        EXPECT(gbc.readMem(0xc678), 0x42);
        // CB 3E 02BF
        gbc.setState(0x78cf, 0xdccd, 0x8300, 0xdc1a, 0xd2d, 0x9737, 0x1, 0x0);
        gbc.writeMem(0x78cf, { 0xcb, 0x3e });
        gbc.writeMem(0x9737, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdccd);
        EXPECT(gbc.pc(), 0x78d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9737), 0x4d);
        // CB 3E 02C1
        gbc.setState(0x5582, 0xcefa, 0x5900, 0x822a, 0x3228, 0xbc5c, 0x1, 0x1);
        gbc.writeMem(0x5582, { 0xcb, 0x3e });
        gbc.writeMem(0xbc5c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xcefa);
        EXPECT(gbc.pc(), 0x5584);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc5c), 0x26);
        // CB 3E 02C5
        gbc.setState(0x817f, 0x2c0e, 0x6f00, 0x3cbf, 0xfa4, 0x8c31, 0x1, 0x0);
        gbc.writeMem(0x817f, { 0xcb, 0x3e });
        gbc.writeMem(0x8c31, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2c0e);
        EXPECT(gbc.pc(), 0x8181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x817f), 0xcb);
        EXPECT(gbc.readMem(0x8180), 0x3e);
        EXPECT(gbc.readMem(0x8c31), 0x0);
        // CB 3E 02C9
        gbc.setState(0xd960, 0x80ab, 0x3330, 0xb599, 0x639e, 0x8db9, 0x1, 0x0);
        gbc.writeMem(0x8db9, { 0xc4 });
        gbc.writeMem(0xd960, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x80ab);
        EXPECT(gbc.pc(), 0xd962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db9), 0x62);
        EXPECT(gbc.readMem(0xd960), 0xcb);
        EXPECT(gbc.readMem(0xd961), 0x3e);
        // CB 3E 02CA
        gbc.setState(0xe0ab, 0x106a, 0x6f40, 0x1774, 0x9999, 0xd703, 0x0, 0x1);
        gbc.writeMem(0xd703, { 0xa2 });
        gbc.writeMem(0xe0ab, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x106a);
        EXPECT(gbc.pc(), 0xe0ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd703), 0x51);
        EXPECT(gbc.readMem(0xe0ab), 0xcb);
        EXPECT(gbc.readMem(0xe0ac), 0x3e);
        // CB 3E 02CB
        gbc.setState(0x70af, 0xd0a0, 0x9050, 0x62e1, 0x1e0f, 0xf71c, 0x1, 0x0);
        gbc.writeMem(0x70af, { 0xcb, 0x3e });
        gbc.writeMem(0xf71c, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd0a0);
        EXPECT(gbc.pc(), 0x70b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf71c), 0x2e);
        // CB 3E 02CC
        gbc.setState(0xb83b, 0x84be, 0x3f80, 0xf232, 0x84fc, 0xb0d9, 0x1, 0x1);
        gbc.writeMem(0xb0d9, { 0x6c });
        gbc.writeMem(0xb83b, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x84be);
        EXPECT(gbc.pc(), 0xb83d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0d9), 0x36);
        EXPECT(gbc.readMem(0xb83b), 0xcb);
        EXPECT(gbc.readMem(0xb83c), 0x3e);
        // CB 3E 02D1
        gbc.setState(0x7c78, 0xda2e, 0xc10, 0x34c2, 0x8115, 0xb62b, 0x0, 0x1);
        gbc.writeMem(0x7c78, { 0xcb, 0x3e });
        gbc.writeMem(0xb62b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xda2e);
        EXPECT(gbc.pc(), 0x7c7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb62b), 0x3f);
        // CB 3E 02D3
        gbc.setState(0xa66a, 0x36e4, 0x3a0, 0x8329, 0xa835, 0x9144, 0x1, 0x0);
        gbc.writeMem(0x9144, { 0xe });
        gbc.writeMem(0xa66a, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x36e4);
        EXPECT(gbc.pc(), 0xa66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9144), 0x7);
        EXPECT(gbc.readMem(0xa66a), 0xcb);
        EXPECT(gbc.readMem(0xa66b), 0x3e);
        // CB 3E 02D9
        gbc.setState(0xef0d, 0x3be8, 0x1e20, 0x52ef, 0x5b47, 0x95e2, 0x1, 0x0);
        gbc.writeMem(0x95e2, { 0x6a });
        gbc.writeMem(0xef0d, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3be8);
        EXPECT(gbc.pc(), 0xef0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e2), 0x35);
        EXPECT(gbc.readMem(0xef0d), 0xcb);
        EXPECT(gbc.readMem(0xef0e), 0x3e);
        // CB 3E 02DA
        gbc.setState(0xa1fc, 0x190, 0xe830, 0x5c36, 0xc979, 0xa19d, 0x1, 0x0);
        gbc.writeMem(0xa19d, { 0xc3 });
        gbc.writeMem(0xa1fc, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x190);
        EXPECT(gbc.pc(), 0xa1fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa19d), 0x61);
        EXPECT(gbc.readMem(0xa1fc), 0xcb);
        EXPECT(gbc.readMem(0xa1fd), 0x3e);
        // CB 3E 02DD
        gbc.setState(0xa079, 0xf786, 0xcf60, 0x7307, 0x85fa, 0xbeed, 0x0, 0x1);
        gbc.writeMem(0xa079, { 0xcb, 0x3e });
        gbc.writeMem(0xbeed, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf786);
        EXPECT(gbc.pc(), 0xa07b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa079), 0xcb);
        EXPECT(gbc.readMem(0xa07a), 0x3e);
        EXPECT(gbc.readMem(0xbeed), 0x51);
        // CB 3E 02DE
        gbc.setState(0xc3d, 0x4d25, 0xe3a0, 0xaa8e, 0xaa11, 0xe289, 0x0, 0x0);
        gbc.writeMem(0xc3d, { 0xcb, 0x3e });
        gbc.writeMem(0xe289, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4d25);
        EXPECT(gbc.pc(), 0xc3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe289), 0x7c);
        // CB 3E 02DF
        gbc.setState(0x39b, 0x83d2, 0xcec0, 0x3b24, 0xebf2, 0xebe2, 0x1, 0x1);
        gbc.writeMem(0x39b, { 0xcb, 0x3e });
        gbc.writeMem(0xebe2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x83d2);
        EXPECT(gbc.pc(), 0x39d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe2), 0x23);
        // CB 3E 02E2
        gbc.setState(0x3dbe, 0xeabf, 0x9260, 0x886c, 0x6933, 0xcbb6, 0x1, 0x0);
        gbc.writeMem(0x3dbe, { 0xcb, 0x3e });
        gbc.writeMem(0xcbb6, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xeabf);
        EXPECT(gbc.pc(), 0x3dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbb6), 0x1e);
        // CB 3E 02E5
        gbc.setState(0xd73, 0xc592, 0xc6c0, 0xb1a8, 0x306d, 0xb1cc, 0x1, 0x0);
        gbc.writeMem(0xd73, { 0xcb, 0x3e });
        gbc.writeMem(0xb1cc, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc592);
        EXPECT(gbc.pc(), 0xd75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1cc), 0x58);
        // CB 3E 02E6
        gbc.setState(0x9b32, 0x3b85, 0x4f0, 0x49d8, 0x296b, 0x9857, 0x1, 0x0);
        gbc.writeMem(0x9857, { 0x0 });
        gbc.writeMem(0x9b32, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3b85);
        EXPECT(gbc.pc(), 0x9b34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9857), 0x0);
        EXPECT(gbc.readMem(0x9b32), 0xcb);
        EXPECT(gbc.readMem(0x9b33), 0x3e);
        // CB 3E 02E7
        gbc.setState(0x455e, 0x8e1f, 0x77b0, 0x3520, 0x66b, 0xf7e6, 0x1, 0x0);
        gbc.writeMem(0x455e, { 0xcb, 0x3e });
        gbc.writeMem(0xf7e6, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8e1f);
        EXPECT(gbc.pc(), 0x4560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf7e6), 0x62);
        // CB 3E 02E8
        gbc.setState(0x60db, 0xf308, 0x5570, 0xaa6d, 0x368f, 0xa1c3, 0x0, 0x1);
        gbc.writeMem(0x60db, { 0xcb, 0x3e });
        gbc.writeMem(0xa1c3, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf308);
        EXPECT(gbc.pc(), 0x60dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1c3), 0x28);
        // CB 3E 02EB
        gbc.setState(0x50b3, 0x2f1c, 0xcaf0, 0x1641, 0xe11b, 0xcf39, 0x0, 0x0);
        gbc.writeMem(0x50b3, { 0xcb, 0x3e });
        gbc.writeMem(0xcf39, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2f1c);
        EXPECT(gbc.pc(), 0x50b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf39), 0x5d);
        // CB 3E 02EC
        gbc.setState(0x5bab, 0x34ef, 0x830, 0x2403, 0xc08, 0xb50c, 0x1, 0x0);
        gbc.writeMem(0x5bab, { 0xcb, 0x3e });
        gbc.writeMem(0xb50c, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x34ef);
        EXPECT(gbc.pc(), 0x5bad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb50c), 0x7c);
        // CB 3E 02EE
        gbc.setState(0xc30a, 0xbbfb, 0xbbf0, 0x41cd, 0x5a67, 0xca4c, 0x1, 0x0);
        gbc.writeMem(0xc30a, { 0xcb, 0x3e });
        gbc.writeMem(0xca4c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xbbfb);
        EXPECT(gbc.pc(), 0xc30c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc30a), 0xcb);
        EXPECT(gbc.readMem(0xc30b), 0x3e);
        EXPECT(gbc.readMem(0xca4c), 0x55);
        // CB 3E 02F4
        gbc.setState(0x55fc, 0xed61, 0xcd10, 0x8c65, 0x813e, 0x9c76, 0x1, 0x1);
        gbc.writeMem(0x55fc, { 0xcb, 0x3e });
        gbc.writeMem(0x9c76, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xed61);
        EXPECT(gbc.pc(), 0x55fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c76), 0x5);
        // CB 3E 02F8
        gbc.setState(0x522e, 0x8b71, 0x1910, 0x532c, 0x5ab8, 0xcfb9, 0x0, 0x1);
        gbc.writeMem(0x522e, { 0xcb, 0x3e });
        gbc.writeMem(0xcfb9, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8b71);
        EXPECT(gbc.pc(), 0x5230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb9), 0xe);
        // CB 3E 02FC
        gbc.setState(0x8160, 0x1308, 0x7610, 0x7208, 0xa82c, 0xebc1, 0x1, 0x0);
        gbc.writeMem(0x8160, { 0xcb, 0x3e });
        gbc.writeMem(0xebc1, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1308);
        EXPECT(gbc.pc(), 0x8162);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8160), 0xcb);
        EXPECT(gbc.readMem(0x8161), 0x3e);
        EXPECT(gbc.readMem(0xebc1), 0x9);
        // CB 3E 02FD
        gbc.setState(0x74a9, 0xe711, 0xc100, 0x3df6, 0xcbdb, 0xd41e, 0x1, 0x0);
        gbc.writeMem(0x74a9, { 0xcb, 0x3e });
        gbc.writeMem(0xd41e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe711);
        EXPECT(gbc.pc(), 0x74ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd41e), 0x79);
        // CB 3E 02FE
        gbc.setState(0xc65e, 0xf927, 0xe040, 0x261b, 0x8d1e, 0xfecd, 0x0, 0x0);
        gbc.writeMem(0xc65e, { 0xcb, 0x3e });
        gbc.writeMem(0xfecd, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf927);
        EXPECT(gbc.pc(), 0xc660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65e), 0xcb);
        EXPECT(gbc.readMem(0xc65f), 0x3e);
        EXPECT(gbc.readMem(0xfecd), 0x43);
        // CB 3E 0301
        gbc.setState(0x935e, 0x4e83, 0xe9c0, 0x1516, 0xdb44, 0xd4cd, 0x1, 0x1);
        gbc.writeMem(0x935e, { 0xcb, 0x3e });
        gbc.writeMem(0xd4cd, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4e83);
        EXPECT(gbc.pc(), 0x9360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935e), 0xcb);
        EXPECT(gbc.readMem(0x935f), 0x3e);
        EXPECT(gbc.readMem(0xd4cd), 0x13);
        // CB 3E 0303
        gbc.setState(0x72b7, 0x96dc, 0x2810, 0xd323, 0x84e4, 0x9ac4, 0x1, 0x0);
        gbc.writeMem(0x72b7, { 0xcb, 0x3e });
        gbc.writeMem(0x9ac4, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x96dc);
        EXPECT(gbc.pc(), 0x72b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac4), 0x35);
        // CB 3E 0304
        gbc.setState(0x6e6d, 0x9f3d, 0x54e0, 0x7e14, 0xff5c, 0xfea8, 0x0, 0x1);
        gbc.writeMem(0x6e6d, { 0xcb, 0x3e });
        gbc.writeMem(0xfea8, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9f3d);
        EXPECT(gbc.pc(), 0x6e6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfea8), 0x3d);
        // CB 3E 0305
        gbc.setState(0x5ce0, 0x2161, 0x8a30, 0x242c, 0x5550, 0xbc20, 0x1, 0x0);
        gbc.writeMem(0x5ce0, { 0xcb, 0x3e });
        gbc.writeMem(0xbc20, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2161);
        EXPECT(gbc.pc(), 0x5ce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc20), 0x22);
        // CB 3E 0306
        gbc.setState(0x2ad5, 0xb392, 0x4610, 0x5c8f, 0xffb, 0xf38a, 0x0, 0x1);
        gbc.writeMem(0x2ad5, { 0xcb, 0x3e });
        gbc.writeMem(0xf38a, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb392);
        EXPECT(gbc.pc(), 0x2ad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf38a), 0x69);
        // CB 3E 0307
        gbc.setState(0xe0f1, 0x7b9a, 0x74b0, 0x1d9a, 0x9f27, 0x8bb1, 0x0, 0x0);
        gbc.writeMem(0x8bb1, { 0x5e });
        gbc.writeMem(0xe0f1, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7b9a);
        EXPECT(gbc.pc(), 0xe0f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb1), 0x2f);
        EXPECT(gbc.readMem(0xe0f1), 0xcb);
        EXPECT(gbc.readMem(0xe0f2), 0x3e);
        // CB 3E 0308
        gbc.setState(0x9cbe, 0xef08, 0x8570, 0x51c8, 0xc969, 0xbe45, 0x1, 0x0);
        gbc.writeMem(0x9cbe, { 0xcb, 0x3e });
        gbc.writeMem(0xbe45, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xef08);
        EXPECT(gbc.pc(), 0x9cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cbe), 0xcb);
        EXPECT(gbc.readMem(0x9cbf), 0x3e);
        EXPECT(gbc.readMem(0xbe45), 0x3c);
        // CB 3E 0309
        gbc.setState(0x3406, 0x5583, 0x8c10, 0x4dac, 0x3824, 0x8263, 0x1, 0x1);
        gbc.writeMem(0x3406, { 0xcb, 0x3e });
        gbc.writeMem(0x8263, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5583);
        EXPECT(gbc.pc(), 0x3408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8263), 0xa);
        // CB 3E 030A
        gbc.setState(0x176d, 0x4e81, 0x1e30, 0xe9a3, 0x870e, 0xdea3, 0x1, 0x0);
        gbc.writeMem(0x176d, { 0xcb, 0x3e });
        gbc.writeMem(0xdea3, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4e81);
        EXPECT(gbc.pc(), 0x176f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea3), 0x31);
        // CB 3E 030D
        gbc.setState(0x80e5, 0xe433, 0xf080, 0x6a1, 0x72b2, 0xdc35, 0x0, 0x1);
        gbc.writeMem(0x80e5, { 0xcb, 0x3e });
        gbc.writeMem(0xdc35, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe433);
        EXPECT(gbc.pc(), 0x80e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e5), 0xcb);
        EXPECT(gbc.readMem(0x80e6), 0x3e);
        EXPECT(gbc.readMem(0xdc35), 0x7b);
        // CB 3E 0311
        gbc.setState(0xcb33, 0xe3ee, 0x5f30, 0xd624, 0x31bd, 0xe5e9, 0x1, 0x0);
        gbc.writeMem(0xcb33, { 0xcb, 0x3e });
        gbc.writeMem(0xe5e9, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe3ee);
        EXPECT(gbc.pc(), 0xcb35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb33), 0xcb);
        EXPECT(gbc.readMem(0xcb34), 0x3e);
        EXPECT(gbc.readMem(0xe5e9), 0x6b);
        // CB 3E 0312
        gbc.setState(0x7e04, 0xa1f3, 0x7b60, 0xe3e2, 0xc3ea, 0x8c21, 0x1, 0x0);
        gbc.writeMem(0x7e04, { 0xcb, 0x3e });
        gbc.writeMem(0x8c21, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa1f3);
        EXPECT(gbc.pc(), 0x7e06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c21), 0x3f);
        // CB 3E 0313
        gbc.setState(0xd726, 0x7229, 0x6b0, 0xc0c0, 0xa688, 0xa324, 0x0, 0x1);
        gbc.writeMem(0xa324, { 0x2f });
        gbc.writeMem(0xd726, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7229);
        EXPECT(gbc.pc(), 0xd728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa324), 0x17);
        EXPECT(gbc.readMem(0xd726), 0xcb);
        EXPECT(gbc.readMem(0xd727), 0x3e);
        // CB 3E 0315
        gbc.setState(0x2f79, 0xa981, 0x110, 0xccb0, 0x82d5, 0x8d24, 0x0, 0x1);
        gbc.writeMem(0x2f79, { 0xcb, 0x3e });
        gbc.writeMem(0x8d24, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa981);
        EXPECT(gbc.pc(), 0x2f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d24), 0x6e);
        // CB 3E 0316
        gbc.setState(0xb94f, 0x15b0, 0x9ae0, 0x903e, 0x817e, 0xcb39, 0x1, 0x1);
        gbc.writeMem(0xb94f, { 0xcb, 0x3e });
        gbc.writeMem(0xcb39, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x15b0);
        EXPECT(gbc.pc(), 0xb951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb94f), 0xcb);
        EXPECT(gbc.readMem(0xb950), 0x3e);
        EXPECT(gbc.readMem(0xcb39), 0x65);
        // CB 3E 0317
        gbc.setState(0xe387, 0xa038, 0xefc0, 0x53f9, 0x3408, 0xca74, 0x1, 0x1);
        gbc.writeMem(0xca74, { 0xbb });
        gbc.writeMem(0xe387, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa038);
        EXPECT(gbc.pc(), 0xe389);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca74), 0x5d);
        EXPECT(gbc.readMem(0xe387), 0xcb);
        EXPECT(gbc.readMem(0xe388), 0x3e);
        // CB 3E 0319
        gbc.setState(0xa5a2, 0xf3db, 0x5530, 0x2194, 0xd2c, 0x9f3a, 0x0, 0x1);
        gbc.writeMem(0x9f3a, { 0xb });
        gbc.writeMem(0xa5a2, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf3db);
        EXPECT(gbc.pc(), 0xa5a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f3a), 0x5);
        EXPECT(gbc.readMem(0xa5a2), 0xcb);
        EXPECT(gbc.readMem(0xa5a3), 0x3e);
        // CB 3E 031C
        gbc.setState(0x56e, 0xe57b, 0x6800, 0xbf6c, 0x88b9, 0xc858, 0x0, 0x0);
        gbc.writeMem(0x56e, { 0xcb, 0x3e });
        gbc.writeMem(0xc858, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe57b);
        EXPECT(gbc.pc(), 0x570);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc858), 0x1);
        // CB 3E 031F
        gbc.setState(0x44a8, 0xab5b, 0x1d70, 0xf5c3, 0x34bf, 0xa332, 0x0, 0x0);
        gbc.writeMem(0x44a8, { 0xcb, 0x3e });
        gbc.writeMem(0xa332, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xab5b);
        EXPECT(gbc.pc(), 0x44aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa332), 0x62);
        // CB 3E 0320
        gbc.setState(0x4e22, 0xbb31, 0x8c60, 0x2da3, 0xf075, 0xd7aa, 0x0, 0x1);
        gbc.writeMem(0x4e22, { 0xcb, 0x3e });
        gbc.writeMem(0xd7aa, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbb31);
        EXPECT(gbc.pc(), 0x4e24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7aa), 0x9);
        // CB 3E 0321
        gbc.setState(0x2cce, 0xc645, 0x77d0, 0x8abf, 0x1d75, 0xcbe8, 0x1, 0x0);
        gbc.writeMem(0x2cce, { 0xcb, 0x3e });
        gbc.writeMem(0xcbe8, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc645);
        EXPECT(gbc.pc(), 0x2cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbe8), 0x5a);
        // CB 3E 0322
        gbc.setState(0x2b5b, 0x9566, 0x9b70, 0xcdc8, 0x7401, 0xd319, 0x1, 0x1);
        gbc.writeMem(0x2b5b, { 0xcb, 0x3e });
        gbc.writeMem(0xd319, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9566);
        EXPECT(gbc.pc(), 0x2b5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd319), 0x6b);
        // CB 3E 0325
        gbc.setState(0xc450, 0x5435, 0x7e40, 0xe646, 0x4e36, 0x8a60, 0x0, 0x0);
        gbc.writeMem(0x8a60, { 0x8f });
        gbc.writeMem(0xc450, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5435);
        EXPECT(gbc.pc(), 0xc452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a60), 0x47);
        EXPECT(gbc.readMem(0xc450), 0xcb);
        EXPECT(gbc.readMem(0xc451), 0x3e);
        // CB 3E 0326
        gbc.setState(0x8289, 0x6417, 0x1fa0, 0xbe82, 0xcd4, 0x8952, 0x0, 0x1);
        gbc.writeMem(0x8289, { 0xcb, 0x3e });
        gbc.writeMem(0x8952, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6417);
        EXPECT(gbc.pc(), 0x828b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8289), 0xcb);
        EXPECT(gbc.readMem(0x828a), 0x3e);
        EXPECT(gbc.readMem(0x8952), 0x1f);
        // CB 3E 0327
        gbc.setState(0x779e, 0x99c3, 0xa1b0, 0x9563, 0x9c0c, 0xc201, 0x0, 0x1);
        gbc.writeMem(0x779e, { 0xcb, 0x3e });
        gbc.writeMem(0xc201, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x99c3);
        EXPECT(gbc.pc(), 0x77a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc201), 0x36);
        // CB 3E 0328
        gbc.setState(0x2c02, 0x983e, 0x11b0, 0xddc8, 0xfba8, 0xe198, 0x0, 0x1);
        gbc.writeMem(0x2c02, { 0xcb, 0x3e });
        gbc.writeMem(0xe198, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x983e);
        EXPECT(gbc.pc(), 0x2c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe198), 0x7d);
        // CB 3E 032A
        gbc.setState(0xb80, 0x8f81, 0xe830, 0x7378, 0x85b5, 0x8204, 0x1, 0x1);
        gbc.writeMem(0xb80, { 0xcb, 0x3e });
        gbc.writeMem(0x8204, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8f81);
        EXPECT(gbc.pc(), 0xb82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8204), 0x37);
        // CB 3E 032B
        gbc.setState(0xaa0, 0x1d94, 0x39a0, 0x89be, 0x2868, 0xb6d6, 0x0, 0x0);
        gbc.writeMem(0xaa0, { 0xcb, 0x3e });
        gbc.writeMem(0xb6d6, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1d94);
        EXPECT(gbc.pc(), 0xaa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6d6), 0x28);
        // CB 3E 032C
        gbc.setState(0x8a1d, 0x3152, 0xb2f0, 0x9413, 0x5a8f, 0xcee7, 0x0, 0x1);
        gbc.writeMem(0x8a1d, { 0xcb, 0x3e });
        gbc.writeMem(0xcee7, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3152);
        EXPECT(gbc.pc(), 0x8a1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a1d), 0xcb);
        EXPECT(gbc.readMem(0x8a1e), 0x3e);
        EXPECT(gbc.readMem(0xcee7), 0x59);
        // CB 3E 032D
        gbc.setState(0xc266, 0xde10, 0xb060, 0x9be4, 0xac12, 0xbd9f, 0x0, 0x0);
        gbc.writeMem(0xbd9f, { 0x2e });
        gbc.writeMem(0xc266, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xde10);
        EXPECT(gbc.pc(), 0xc268);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd9f), 0x17);
        EXPECT(gbc.readMem(0xc266), 0xcb);
        EXPECT(gbc.readMem(0xc267), 0x3e);
        // CB 3E 032E
        gbc.setState(0x337c, 0x5729, 0xf650, 0xd65, 0xca06, 0xfc6a, 0x1, 0x0);
        gbc.writeMem(0x337c, { 0xcb, 0x3e });
        gbc.writeMem(0xfc6a, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5729);
        EXPECT(gbc.pc(), 0x337e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc6a), 0x1b);
        // CB 3E 032F
        gbc.setState(0x9702, 0x4711, 0xfe20, 0x88c3, 0x7c5f, 0xced4, 0x1, 0x0);
        gbc.writeMem(0x9702, { 0xcb, 0x3e });
        gbc.writeMem(0xced4, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4711);
        EXPECT(gbc.pc(), 0x9704);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9702), 0xcb);
        EXPECT(gbc.readMem(0x9703), 0x3e);
        EXPECT(gbc.readMem(0xced4), 0x2);
        // CB 3E 0330
        gbc.setState(0x222b, 0x411f, 0xf060, 0x73c1, 0x7979, 0xece5, 0x0, 0x1);
        gbc.writeMem(0x222b, { 0xcb, 0x3e });
        gbc.writeMem(0xece5, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x411f);
        EXPECT(gbc.pc(), 0x222d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xece5), 0x18);
        // CB 3E 0332
        gbc.setState(0xd05e, 0x838a, 0xcc00, 0x13e1, 0x5f2, 0xdec3, 0x0, 0x0);
        gbc.writeMem(0xd05e, { 0xcb, 0x3e });
        gbc.writeMem(0xdec3, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x838a);
        EXPECT(gbc.pc(), 0xd060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd05e), 0xcb);
        EXPECT(gbc.readMem(0xd05f), 0x3e);
        EXPECT(gbc.readMem(0xdec3), 0x6b);
        // CB 3E 0333
        gbc.setState(0x88cb, 0x7e88, 0x29c0, 0x161b, 0xb698, 0x818d, 0x1, 0x1);
        gbc.writeMem(0x818d, { 0xf4 });
        gbc.writeMem(0x88cb, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7e88);
        EXPECT(gbc.pc(), 0x88cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818d), 0x7a);
        EXPECT(gbc.readMem(0x88cb), 0xcb);
        EXPECT(gbc.readMem(0x88cc), 0x3e);
        // CB 3E 0334
        gbc.setState(0x1555, 0xf5fb, 0x8760, 0x2623, 0x5fb1, 0x842f, 0x1, 0x0);
        gbc.writeMem(0x1555, { 0xcb, 0x3e });
        gbc.writeMem(0x842f, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf5fb);
        EXPECT(gbc.pc(), 0x1557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x842f), 0x6e);
        // CB 3E 0336
        gbc.setState(0x9d21, 0x552, 0xbac0, 0x5325, 0x8073, 0xea22, 0x0, 0x1);
        gbc.writeMem(0x9d21, { 0xcb, 0x3e });
        gbc.writeMem(0xea22, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x552);
        EXPECT(gbc.pc(), 0x9d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d21), 0xcb);
        EXPECT(gbc.readMem(0x9d22), 0x3e);
        EXPECT(gbc.readMem(0xea22), 0x58);
        // CB 3E 033D
        gbc.setState(0xe529, 0x6776, 0x65a0, 0xcaa2, 0x9d1a, 0xf912, 0x1, 0x1);
        gbc.writeMem(0xe529, { 0xcb, 0x3e });
        gbc.writeMem(0xf912, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6776);
        EXPECT(gbc.pc(), 0xe52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe529), 0xcb);
        EXPECT(gbc.readMem(0xe52a), 0x3e);
        EXPECT(gbc.readMem(0xf912), 0x57);
        // CB 3E 0340
        gbc.setState(0x9054, 0x4114, 0x5a60, 0xb3c6, 0x2f53, 0xfcdb, 0x0, 0x0);
        gbc.writeMem(0x9054, { 0xcb, 0x3e });
        gbc.writeMem(0xfcdb, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4114);
        EXPECT(gbc.pc(), 0x9056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9054), 0xcb);
        EXPECT(gbc.readMem(0x9055), 0x3e);
        EXPECT(gbc.readMem(0xfcdb), 0x6f);
        // CB 3E 0346
        gbc.setState(0x5c73, 0x190c, 0x6cb0, 0x203, 0x9ab5, 0xcfe9, 0x0, 0x0);
        gbc.writeMem(0x5c73, { 0xcb, 0x3e });
        gbc.writeMem(0xcfe9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x190c);
        EXPECT(gbc.pc(), 0x5c75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe9), 0x1f);
        // CB 3E 0347
        gbc.setState(0xb9f9, 0x5d58, 0xd910, 0x1628, 0xb3d7, 0xc2b2, 0x0, 0x0);
        gbc.writeMem(0xb9f9, { 0xcb, 0x3e });
        gbc.writeMem(0xc2b2, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5d58);
        EXPECT(gbc.pc(), 0xb9fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9f9), 0xcb);
        EXPECT(gbc.readMem(0xb9fa), 0x3e);
        EXPECT(gbc.readMem(0xc2b2), 0x22);
        // CB 3E 0349
        gbc.setState(0x7d98, 0x6fd3, 0x10e0, 0xde72, 0x2bb4, 0xe991, 0x0, 0x1);
        gbc.writeMem(0x7d98, { 0xcb, 0x3e });
        gbc.writeMem(0xe991, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6fd3);
        EXPECT(gbc.pc(), 0x7d9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe991), 0x68);
        // CB 3E 034B
        gbc.setState(0x6417, 0xf538, 0xeb70, 0x9e2, 0xfe7d, 0xa1f7, 0x1, 0x0);
        gbc.writeMem(0x6417, { 0xcb, 0x3e });
        gbc.writeMem(0xa1f7, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xf538);
        EXPECT(gbc.pc(), 0x6419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f7), 0x4e);
        // CB 3E 034D
        gbc.setState(0x6c73, 0xeb1f, 0x3900, 0x6f17, 0x6712, 0xa750, 0x1, 0x0);
        gbc.writeMem(0x6c73, { 0xcb, 0x3e });
        gbc.writeMem(0xa750, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xeb1f);
        EXPECT(gbc.pc(), 0x6c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa750), 0x2b);
        // CB 3E 034F
        gbc.setState(0xb5a, 0x312f, 0x3c10, 0x86e1, 0x6e53, 0x9312, 0x0, 0x1);
        gbc.writeMem(0xb5a, { 0xcb, 0x3e });
        gbc.writeMem(0x9312, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x312f);
        EXPECT(gbc.pc(), 0xb5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9312), 0x4e);
        // CB 3E 0353
        gbc.setState(0xeb7f, 0x5fc5, 0xc530, 0xfe29, 0x3657, 0xb37d, 0x1, 0x0);
        gbc.writeMem(0xb37d, { 0x95 });
        gbc.writeMem(0xeb7f, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5fc5);
        EXPECT(gbc.pc(), 0xeb81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb37d), 0x4a);
        EXPECT(gbc.readMem(0xeb7f), 0xcb);
        EXPECT(gbc.readMem(0xeb80), 0x3e);
        // CB 3E 0354
        gbc.setState(0x4a2b, 0xf961, 0xb9e0, 0xd01c, 0xed4b, 0xf9a5, 0x0, 0x1);
        gbc.writeMem(0x4a2b, { 0xcb, 0x3e });
        gbc.writeMem(0xf9a5, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf961);
        EXPECT(gbc.pc(), 0x4a2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9a5), 0x36);
        // CB 3E 0356
        gbc.setState(0xb856, 0xad2b, 0xc540, 0x5522, 0xa803, 0xc380, 0x0, 0x0);
        gbc.writeMem(0xb856, { 0xcb, 0x3e });
        gbc.writeMem(0xc380, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xad2b);
        EXPECT(gbc.pc(), 0xb858);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb856), 0xcb);
        EXPECT(gbc.readMem(0xb857), 0x3e);
        EXPECT(gbc.readMem(0xc380), 0x66);
        // CB 3E 0358
        gbc.setState(0x84ca, 0x3035, 0xa530, 0x6d49, 0x897c, 0xdbf1, 0x1, 0x0);
        gbc.writeMem(0x84ca, { 0xcb, 0x3e });
        gbc.writeMem(0xdbf1, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3035);
        EXPECT(gbc.pc(), 0x84cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ca), 0xcb);
        EXPECT(gbc.readMem(0x84cb), 0x3e);
        EXPECT(gbc.readMem(0xdbf1), 0x55);
        // CB 3E 035A
        gbc.setState(0xdd6b, 0x3fea, 0xc870, 0x9a7c, 0x773, 0xd8ad, 0x1, 0x1);
        gbc.writeMem(0xd8ad, { 0x47 });
        gbc.writeMem(0xdd6b, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3fea);
        EXPECT(gbc.pc(), 0xdd6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ad), 0x23);
        EXPECT(gbc.readMem(0xdd6b), 0xcb);
        EXPECT(gbc.readMem(0xdd6c), 0x3e);
        // CB 3E 035D
        gbc.setState(0x9268, 0xac99, 0xb420, 0x367e, 0xae46, 0xa8d1, 0x1, 0x0);
        gbc.writeMem(0x9268, { 0xcb, 0x3e });
        gbc.writeMem(0xa8d1, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xac99);
        EXPECT(gbc.pc(), 0x926a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9268), 0xcb);
        EXPECT(gbc.readMem(0x9269), 0x3e);
        EXPECT(gbc.readMem(0xa8d1), 0x42);
        // CB 3E 035E
        gbc.setState(0x98ff, 0xc873, 0x9a40, 0x83ac, 0x4e17, 0xed94, 0x0, 0x1);
        gbc.writeMem(0x98ff, { 0xcb, 0x3e });
        gbc.writeMem(0xed94, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc873);
        EXPECT(gbc.pc(), 0x9901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ff), 0xcb);
        EXPECT(gbc.readMem(0x9900), 0x3e);
        EXPECT(gbc.readMem(0xed94), 0x9);
        // CB 3E 035F
        gbc.setState(0x63a0, 0xd7d5, 0xd8c0, 0x394b, 0x44d5, 0xe96e, 0x1, 0x0);
        gbc.writeMem(0x63a0, { 0xcb, 0x3e });
        gbc.writeMem(0xe96e, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd7d5);
        EXPECT(gbc.pc(), 0x63a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe96e), 0x12);
        // CB 3E 0362
        gbc.setState(0xdb40, 0xeca6, 0x86e0, 0xfcea, 0x5151, 0xbc0a, 0x1, 0x0);
        gbc.writeMem(0xbc0a, { 0x37 });
        gbc.writeMem(0xdb40, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xeca6);
        EXPECT(gbc.pc(), 0xdb42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc0a), 0x1b);
        EXPECT(gbc.readMem(0xdb40), 0xcb);
        EXPECT(gbc.readMem(0xdb41), 0x3e);
        // CB 3E 0363
        gbc.setState(0x1592, 0xaacc, 0x1d60, 0x2412, 0x4317, 0x8e37, 0x1, 0x1);
        gbc.writeMem(0x1592, { 0xcb, 0x3e });
        gbc.writeMem(0x8e37, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xaacc);
        EXPECT(gbc.pc(), 0x1594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e37), 0x23);
        // CB 3E 0368
        gbc.setState(0x4a68, 0x58ec, 0x4480, 0x7b57, 0x7f90, 0xe475, 0x1, 0x0);
        gbc.writeMem(0x4a68, { 0xcb, 0x3e });
        gbc.writeMem(0xe475, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x58ec);
        EXPECT(gbc.pc(), 0x4a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe475), 0x8);
        // CB 3E 0369
        gbc.setState(0x7d55, 0xd772, 0xe650, 0x249f, 0x9198, 0xdfe2, 0x1, 0x1);
        gbc.writeMem(0x7d55, { 0xcb, 0x3e });
        gbc.writeMem(0xdfe2, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd772);
        EXPECT(gbc.pc(), 0x7d57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe2), 0x7d);
        // CB 3E 036B
        gbc.setState(0x2d1e, 0x7bd3, 0x2550, 0x2b9a, 0xf7ca, 0xabb2, 0x0, 0x1);
        gbc.writeMem(0x2d1e, { 0xcb, 0x3e });
        gbc.writeMem(0xabb2, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7bd3);
        EXPECT(gbc.pc(), 0x2d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb2), 0xb);
        // CB 3E 036D
        gbc.setState(0xff6, 0x6a77, 0xad60, 0xb023, 0x6f8d, 0xf272, 0x0, 0x0);
        gbc.writeMem(0xff6, { 0xcb, 0x3e });
        gbc.writeMem(0xf272, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6a77);
        EXPECT(gbc.pc(), 0xff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf272), 0x1a);
        // CB 3E 0373
        gbc.setState(0xd257, 0x89d, 0x3280, 0x96c, 0xe641, 0x9003, 0x0, 0x0);
        gbc.writeMem(0x9003, { 0xa7 });
        gbc.writeMem(0xd257, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x89d);
        EXPECT(gbc.pc(), 0xd259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9003), 0x53);
        EXPECT(gbc.readMem(0xd257), 0xcb);
        EXPECT(gbc.readMem(0xd258), 0x3e);
        // CB 3E 0374
        gbc.setState(0xcc87, 0x276e, 0x39b0, 0x9c7, 0x8df7, 0xbec2, 0x0, 0x0);
        gbc.writeMem(0xbec2, { 0x47 });
        gbc.writeMem(0xcc87, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x276e);
        EXPECT(gbc.pc(), 0xcc89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbec2), 0x23);
        EXPECT(gbc.readMem(0xcc87), 0xcb);
        EXPECT(gbc.readMem(0xcc88), 0x3e);
        // CB 3E 0375
        gbc.setState(0x95de, 0x5e2d, 0xc630, 0x4132, 0xeb5c, 0xb7d7, 0x1, 0x0);
        gbc.writeMem(0x95de, { 0xcb, 0x3e });
        gbc.writeMem(0xb7d7, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5e2d);
        EXPECT(gbc.pc(), 0x95e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95de), 0xcb);
        EXPECT(gbc.readMem(0x95df), 0x3e);
        EXPECT(gbc.readMem(0xb7d7), 0x18);
        // CB 3E 0378
        gbc.setState(0x9582, 0x6982, 0xcf30, 0x9906, 0x2232, 0xdb12, 0x1, 0x0);
        gbc.writeMem(0x9582, { 0xcb, 0x3e });
        gbc.writeMem(0xdb12, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6982);
        EXPECT(gbc.pc(), 0x9584);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9582), 0xcb);
        EXPECT(gbc.readMem(0x9583), 0x3e);
        EXPECT(gbc.readMem(0xdb12), 0x5);
        // CB 3E 037B
        gbc.setState(0x1b3d, 0x72d8, 0xf580, 0x4fb, 0xfb54, 0xd751, 0x0, 0x0);
        gbc.writeMem(0x1b3d, { 0xcb, 0x3e });
        gbc.writeMem(0xd751, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x72d8);
        EXPECT(gbc.pc(), 0x1b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd751), 0x9);
        // CB 3E 037C
        gbc.setState(0x43ff, 0x48a3, 0x1590, 0x4371, 0xf209, 0x8335, 0x1, 0x1);
        gbc.writeMem(0x43ff, { 0xcb, 0x3e });
        gbc.writeMem(0x8335, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x48a3);
        EXPECT(gbc.pc(), 0x4401);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8335), 0x21);
        // CB 3E 037F
        gbc.setState(0x67c8, 0x4d38, 0xff0, 0x7350, 0x971f, 0x9b54, 0x1, 0x1);
        gbc.writeMem(0x67c8, { 0xcb, 0x3e });
        gbc.writeMem(0x9b54, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4d38);
        EXPECT(gbc.pc(), 0x67ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b54), 0x49);
        // CB 3E 0382
        gbc.setState(0xe473, 0xed5f, 0xa1a0, 0xb9c0, 0xb004, 0xfaf8, 0x0, 0x1);
        gbc.writeMem(0xe473, { 0xcb, 0x3e });
        gbc.writeMem(0xfaf8, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xed5f);
        EXPECT(gbc.pc(), 0xe475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe473), 0xcb);
        EXPECT(gbc.readMem(0xe474), 0x3e);
        EXPECT(gbc.readMem(0xfaf8), 0x1b);
        // CB 3E 0384
        gbc.setState(0x5b13, 0x106c, 0xea0, 0xe43c, 0xe796, 0x8e95, 0x0, 0x0);
        gbc.writeMem(0x5b13, { 0xcb, 0x3e });
        gbc.writeMem(0x8e95, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x106c);
        EXPECT(gbc.pc(), 0x5b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e95), 0x17);
        // CB 3E 0385
        gbc.setState(0x4865, 0xaf9d, 0xdfb0, 0xeb58, 0xb08b, 0xa1ee, 0x0, 0x0);
        gbc.writeMem(0x4865, { 0xcb, 0x3e });
        gbc.writeMem(0xa1ee, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xaf9d);
        EXPECT(gbc.pc(), 0x4867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ee), 0x3c);
        // CB 3E 0386
        gbc.setState(0xac52, 0x50b9, 0x9fb0, 0x2a3e, 0x76e4, 0x9db1, 0x0, 0x0);
        gbc.writeMem(0x9db1, { 0xf2 });
        gbc.writeMem(0xac52, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x50b9);
        EXPECT(gbc.pc(), 0xac54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db1), 0x79);
        EXPECT(gbc.readMem(0xac52), 0xcb);
        EXPECT(gbc.readMem(0xac53), 0x3e);
        // CB 3E 038B
        gbc.setState(0x11bc, 0x4904, 0x8db0, 0x5792, 0x3e1c, 0xc9b3, 0x0, 0x0);
        gbc.writeMem(0x11bc, { 0xcb, 0x3e });
        gbc.writeMem(0xc9b3, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x4904);
        EXPECT(gbc.pc(), 0x11be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b3), 0x59);
        // CB 3E 038E
        gbc.setState(0x97f0, 0x1b52, 0x9f20, 0xf941, 0x347c, 0xe83c, 0x0, 0x0);
        gbc.writeMem(0x97f0, { 0xcb, 0x3e });
        gbc.writeMem(0xe83c, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1b52);
        EXPECT(gbc.pc(), 0x97f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f0), 0xcb);
        EXPECT(gbc.readMem(0x97f1), 0x3e);
        EXPECT(gbc.readMem(0xe83c), 0x7c);
        // CB 3E 038F
        gbc.setState(0x5e1, 0xc4af, 0xb100, 0x57ae, 0xdb1a, 0xab73, 0x0, 0x1);
        gbc.writeMem(0x5e1, { 0xcb, 0x3e });
        gbc.writeMem(0xab73, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc4af);
        EXPECT(gbc.pc(), 0x5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab73), 0x34);
        // CB 3E 0393
        gbc.setState(0x1f6, 0xc2c7, 0x44e0, 0x58b3, 0x9e55, 0xde0d, 0x1, 0x0);
        gbc.writeMem(0x1f6, { 0xcb, 0x3e });
        gbc.writeMem(0xde0d, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc2c7);
        EXPECT(gbc.pc(), 0x1f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde0d), 0x25);
        // CB 3E 0395
        gbc.setState(0x9aa6, 0x5102, 0x90d0, 0xe91, 0x21fa, 0xe4b3, 0x0, 0x1);
        gbc.writeMem(0x9aa6, { 0xcb, 0x3e });
        gbc.writeMem(0xe4b3, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5102);
        EXPECT(gbc.pc(), 0x9aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa6), 0xcb);
        EXPECT(gbc.readMem(0x9aa7), 0x3e);
        EXPECT(gbc.readMem(0xe4b3), 0x43);
        // CB 3E 0397
        gbc.setState(0xeb0, 0x1887, 0x3420, 0x2b8f, 0xa53, 0xba62, 0x0, 0x1);
        gbc.writeMem(0xeb0, { 0xcb, 0x3e });
        gbc.writeMem(0xba62, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1887);
        EXPECT(gbc.pc(), 0xeb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba62), 0x36);
        // CB 3E 0398
        gbc.setState(0x21e2, 0xc1c1, 0x5b00, 0xd6c3, 0xd27f, 0xfb2b, 0x0, 0x1);
        gbc.writeMem(0x21e2, { 0xcb, 0x3e });
        gbc.writeMem(0xfb2b, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xc1c1);
        EXPECT(gbc.pc(), 0x21e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb2b), 0x78);
        // CB 3E 0399
        gbc.setState(0x3a46, 0x1fc1, 0xc240, 0xe338, 0xb519, 0xfaea, 0x0, 0x0);
        gbc.writeMem(0x3a46, { 0xcb, 0x3e });
        gbc.writeMem(0xfaea, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1fc1);
        EXPECT(gbc.pc(), 0x3a48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfaea), 0x1f);
        // CB 3E 039B
        gbc.setState(0x2523, 0x8fbc, 0xfc00, 0xe769, 0x5b0e, 0x88c5, 0x1, 0x1);
        gbc.writeMem(0x2523, { 0xcb, 0x3e });
        gbc.writeMem(0x88c5, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8fbc);
        EXPECT(gbc.pc(), 0x2525);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88c5), 0x46);
        // CB 3E 039D
        gbc.setState(0xd0b4, 0x3dee, 0x5870, 0xba78, 0xe860, 0xb6f1, 0x1, 0x1);
        gbc.writeMem(0xb6f1, { 0x93 });
        gbc.writeMem(0xd0b4, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3dee);
        EXPECT(gbc.pc(), 0xd0b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f1), 0x49);
        EXPECT(gbc.readMem(0xd0b4), 0xcb);
        EXPECT(gbc.readMem(0xd0b5), 0x3e);
        // CB 3E 039E
        gbc.setState(0x6690, 0xe3cd, 0x88f0, 0xb5e, 0x9fa7, 0x94c4, 0x0, 0x0);
        gbc.writeMem(0x6690, { 0xcb, 0x3e });
        gbc.writeMem(0x94c4, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe3cd);
        EXPECT(gbc.pc(), 0x6692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c4), 0x7e);
        // CB 3E 039F
        gbc.setState(0xb60c, 0xbafd, 0x6a0, 0xe8e7, 0xb3f1, 0x90da, 0x0, 0x1);
        gbc.writeMem(0x90da, { 0xcc });
        gbc.writeMem(0xb60c, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xbafd);
        EXPECT(gbc.pc(), 0xb60e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90da), 0x66);
        EXPECT(gbc.readMem(0xb60c), 0xcb);
        EXPECT(gbc.readMem(0xb60d), 0x3e);
        // CB 3E 03A0
        gbc.setState(0x4e0d, 0xcc06, 0x3ab0, 0x67ba, 0x900f, 0x80f0, 0x1, 0x0);
        gbc.writeMem(0x4e0d, { 0xcb, 0x3e });
        gbc.writeMem(0x80f0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xcc06);
        EXPECT(gbc.pc(), 0x4e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f0), 0x20);
        // CB 3E 03A1
        gbc.setState(0x8fa6, 0x6652, 0x6090, 0x2101, 0x7a09, 0x813f, 0x0, 0x0);
        gbc.writeMem(0x813f, { 0x98 });
        gbc.writeMem(0x8fa6, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6652);
        EXPECT(gbc.pc(), 0x8fa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x813f), 0x4c);
        EXPECT(gbc.readMem(0x8fa6), 0xcb);
        EXPECT(gbc.readMem(0x8fa7), 0x3e);
        // CB 3E 03A3
        gbc.setState(0x5e3b, 0xec5e, 0x33a0, 0x341e, 0x9b96, 0xcea7, 0x0, 0x0);
        gbc.writeMem(0x5e3b, { 0xcb, 0x3e });
        gbc.writeMem(0xcea7, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xec5e);
        EXPECT(gbc.pc(), 0x5e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcea7), 0x70);
        // CB 3E 03A6
        gbc.setState(0x6e66, 0xd9f5, 0x6900, 0x7761, 0xffdc, 0xaaa3, 0x0, 0x0);
        gbc.writeMem(0x6e66, { 0xcb, 0x3e });
        gbc.writeMem(0xaaa3, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd9f5);
        EXPECT(gbc.pc(), 0x6e68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaa3), 0x4e);
        // CB 3E 03A8
        gbc.setState(0x2333, 0xadb0, 0x3800, 0xe8a7, 0x6999, 0xbda0, 0x0, 0x1);
        gbc.writeMem(0x2333, { 0xcb, 0x3e });
        gbc.writeMem(0xbda0, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xadb0);
        EXPECT(gbc.pc(), 0x2335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbda0), 0x58);
        // CB 3E 03A9
        gbc.setState(0xa61f, 0x71f5, 0x4900, 0x31ad, 0xfeca, 0x9c9d, 0x0, 0x1);
        gbc.writeMem(0x9c9d, { 0x7a });
        gbc.writeMem(0xa61f, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x71f5);
        EXPECT(gbc.pc(), 0xa621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c9d), 0x3d);
        EXPECT(gbc.readMem(0xa61f), 0xcb);
        EXPECT(gbc.readMem(0xa620), 0x3e);
        // CB 3E 03AA
        gbc.setState(0xa4b7, 0x9ed2, 0x7850, 0x87a1, 0x1e64, 0xba75, 0x0, 0x0);
        gbc.writeMem(0xa4b7, { 0xcb, 0x3e });
        gbc.writeMem(0xba75, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9ed2);
        EXPECT(gbc.pc(), 0xa4b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4b7), 0xcb);
        EXPECT(gbc.readMem(0xa4b8), 0x3e);
        EXPECT(gbc.readMem(0xba75), 0xb);
        // CB 3E 03AC
        gbc.setState(0x9774, 0xc8a2, 0x2a90, 0x918d, 0x19d3, 0xafb8, 0x1, 0x1);
        gbc.writeMem(0x9774, { 0xcb, 0x3e });
        gbc.writeMem(0xafb8, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc8a2);
        EXPECT(gbc.pc(), 0x9776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9774), 0xcb);
        EXPECT(gbc.readMem(0x9775), 0x3e);
        EXPECT(gbc.readMem(0xafb8), 0x6c);
        // CB 3E 03AD
        gbc.setState(0xe7ed, 0xd3c1, 0x8cf0, 0x87e1, 0x28c6, 0x8a9b, 0x0, 0x0);
        gbc.writeMem(0x8a9b, { 0x53 });
        gbc.writeMem(0xe7ed, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd3c1);
        EXPECT(gbc.pc(), 0xe7ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a9b), 0x29);
        EXPECT(gbc.readMem(0xe7ed), 0xcb);
        EXPECT(gbc.readMem(0xe7ee), 0x3e);
        // CB 3E 03AE
        gbc.setState(0x9f7, 0xfba8, 0x9db0, 0x63c8, 0xf15b, 0xaf33, 0x1, 0x0);
        gbc.writeMem(0x9f7, { 0xcb, 0x3e });
        gbc.writeMem(0xaf33, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfba8);
        EXPECT(gbc.pc(), 0x9f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf33), 0x57);
        // CB 3E 03B2
        gbc.setState(0x4d35, 0x9ccb, 0x1930, 0xbe0c, 0x8fde, 0xcc9c, 0x0, 0x0);
        gbc.writeMem(0x4d35, { 0xcb, 0x3e });
        gbc.writeMem(0xcc9c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9ccb);
        EXPECT(gbc.pc(), 0x4d37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc9c), 0x2d);
        // CB 3E 03B8
        gbc.setState(0x74d2, 0x563c, 0xa080, 0x69fa, 0x5dd6, 0xeec2, 0x1, 0x0);
        gbc.writeMem(0x74d2, { 0xcb, 0x3e });
        gbc.writeMem(0xeec2, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x563c);
        EXPECT(gbc.pc(), 0x74d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeec2), 0x4f);
        // CB 3E 03BA
        gbc.setState(0xe1d, 0x97db, 0x5e40, 0x9c04, 0xe956, 0xd4e8, 0x1, 0x1);
        gbc.writeMem(0xe1d, { 0xcb, 0x3e });
        gbc.writeMem(0xd4e8, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x97db);
        EXPECT(gbc.pc(), 0xe1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4e8), 0x13);
        // CB 3E 03BB
        gbc.setState(0x22ec, 0x586f, 0xceb0, 0x9e5f, 0x4986, 0xaa42, 0x0, 0x1);
        gbc.writeMem(0x22ec, { 0xcb, 0x3e });
        gbc.writeMem(0xaa42, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x586f);
        EXPECT(gbc.pc(), 0x22ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa42), 0x52);
        // CB 3E 03BF
        gbc.setState(0x9c2c, 0xead7, 0x5fe0, 0xb8a5, 0x5362, 0xc5fb, 0x1, 0x0);
        gbc.writeMem(0x9c2c, { 0xcb, 0x3e });
        gbc.writeMem(0xc5fb, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xead7);
        EXPECT(gbc.pc(), 0x9c2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2c), 0xcb);
        EXPECT(gbc.readMem(0x9c2d), 0x3e);
        EXPECT(gbc.readMem(0xc5fb), 0x2);
        // CB 3E 03C1
        gbc.setState(0x60b2, 0x1573, 0x4140, 0xade8, 0x7cf2, 0xc6d6, 0x0, 0x1);
        gbc.writeMem(0x60b2, { 0xcb, 0x3e });
        gbc.writeMem(0xc6d6, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1573);
        EXPECT(gbc.pc(), 0x60b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6d6), 0x31);
        // CB 3E 03C4
        gbc.setState(0x145a, 0x4969, 0x520, 0xa49a, 0x27f3, 0xb7e0, 0x0, 0x0);
        gbc.writeMem(0x145a, { 0xcb, 0x3e });
        gbc.writeMem(0xb7e0, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4969);
        EXPECT(gbc.pc(), 0x145c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e0), 0x65);
        // CB 3E 03C6
        gbc.setState(0x8c6a, 0xd85a, 0xc6a0, 0x8b5f, 0x2fa2, 0xf221, 0x0, 0x0);
        gbc.writeMem(0x8c6a, { 0xcb, 0x3e });
        gbc.writeMem(0xf221, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd85a);
        EXPECT(gbc.pc(), 0x8c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c6a), 0xcb);
        EXPECT(gbc.readMem(0x8c6b), 0x3e);
        EXPECT(gbc.readMem(0xf221), 0x48);
        // CB 3E 03C7
        gbc.setState(0xab32, 0xdde3, 0x9b50, 0x7d91, 0x33bc, 0xe42b, 0x0, 0x1);
        gbc.writeMem(0xab32, { 0xcb, 0x3e });
        gbc.writeMem(0xe42b, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xdde3);
        EXPECT(gbc.pc(), 0xab34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab32), 0xcb);
        EXPECT(gbc.readMem(0xab33), 0x3e);
        EXPECT(gbc.readMem(0xe42b), 0x62);
        // CB 3E 03C9
        gbc.setState(0x41e2, 0x4222, 0x8040, 0x9446, 0x3337, 0xbb12, 0x0, 0x0);
        gbc.writeMem(0x41e2, { 0xcb, 0x3e });
        gbc.writeMem(0xbb12, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4222);
        EXPECT(gbc.pc(), 0x41e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb12), 0x24);
        // CB 3E 03CC
        gbc.setState(0x71e4, 0x702, 0x72b0, 0xb8d2, 0x203a, 0xed20, 0x0, 0x1);
        gbc.writeMem(0x71e4, { 0xcb, 0x3e });
        gbc.writeMem(0xed20, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x702);
        EXPECT(gbc.pc(), 0x71e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed20), 0x68);
        // CB 3E 03CF
        gbc.setState(0xb373, 0xeae8, 0x4610, 0xa772, 0x45e9, 0xb5c8, 0x1, 0x1);
        gbc.writeMem(0xb373, { 0xcb, 0x3e });
        gbc.writeMem(0xb5c8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xeae8);
        EXPECT(gbc.pc(), 0xb375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb373), 0xcb);
        EXPECT(gbc.readMem(0xb374), 0x3e);
        EXPECT(gbc.readMem(0xb5c8), 0x59);
        // CB 3E 03D0
        gbc.setState(0x7640, 0x7532, 0xc050, 0x342c, 0x38e, 0xdce0, 0x0, 0x0);
        gbc.writeMem(0x7640, { 0xcb, 0x3e });
        gbc.writeMem(0xdce0, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7532);
        EXPECT(gbc.pc(), 0x7642);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce0), 0x6a);
        // CB 3E 03D3
        gbc.setState(0x210b, 0x5cc, 0x3e90, 0x7467, 0x7b6e, 0xfcee, 0x0, 0x0);
        gbc.writeMem(0x210b, { 0xcb, 0x3e });
        gbc.writeMem(0xfcee, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5cc);
        EXPECT(gbc.pc(), 0x210d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfcee), 0xc);
        // CB 3E 03DB
        gbc.setState(0x48c4, 0x4f8d, 0xec10, 0xc3e7, 0x530b, 0xb85e, 0x0, 0x0);
        gbc.writeMem(0x48c4, { 0xcb, 0x3e });
        gbc.writeMem(0xb85e, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4f8d);
        EXPECT(gbc.pc(), 0x48c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb85e), 0x40);
        // CB 3E 03DE
        gbc.setState(0xefeb, 0x5052, 0xa3b0, 0x5644, 0xb5a0, 0xa4f7, 0x1, 0x0);
        gbc.writeMem(0xa4f7, { 0x58 });
        gbc.writeMem(0xefeb, { 0xcb, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5052);
        EXPECT(gbc.pc(), 0xefed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f7), 0x2c);
        EXPECT(gbc.readMem(0xefeb), 0xcb);
        EXPECT(gbc.readMem(0xefec), 0x3e);
        // CB 3E 03DF
        gbc.setState(0x1586, 0xfe76, 0xf00, 0xaf00, 0xc739, 0x9371, 0x1, 0x1);
        gbc.writeMem(0x1586, { 0xcb, 0x3e });
        gbc.writeMem(0x9371, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfe76);
        EXPECT(gbc.pc(), 0x1588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9371), 0x61);
        // CB 3E 03E1
        gbc.setState(0x66c4, 0x861a, 0x8a20, 0xb5d3, 0xeaee, 0x8f3c, 0x0, 0x1);
        gbc.writeMem(0x66c4, { 0xcb, 0x3e });
        gbc.writeMem(0x8f3c, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x861a);
        EXPECT(gbc.pc(), 0x66c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f3c), 0x7b);
        // CB 3E 03E2
        gbc.setState(0x52eb, 0x3e2d, 0x6f80, 0x1aba, 0xabf7, 0x8c4a, 0x0, 0x0);
        gbc.writeMem(0x52eb, { 0xcb, 0x3e });
        gbc.writeMem(0x8c4a, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3e2d);
        EXPECT(gbc.pc(), 0x52ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c4a), 0x2f);
        // CB 3E 03E5
        gbc.setState(0x8b12, 0x740a, 0x5f50, 0x737d, 0xb47, 0xe36d, 0x1, 0x0);
        gbc.writeMem(0x8b12, { 0xcb, 0x3e });
        gbc.writeMem(0xe36d, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x740a);
        EXPECT(gbc.pc(), 0x8b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b12), 0xcb);
        EXPECT(gbc.readMem(0x8b13), 0x3e);
        EXPECT(gbc.readMem(0xe36d), 0x6c);
        // CB 3E 03E6
        gbc.setState(0xc2f3, 0xbb33, 0xf820, 0x7cac, 0xbf92, 0xf76c, 0x0, 0x0);
        gbc.writeMem(0xc2f3, { 0xcb, 0x3e });
        gbc.writeMem(0xf76c, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbb33);
        EXPECT(gbc.pc(), 0xc2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2f3), 0xcb);
        EXPECT(gbc.readMem(0xc2f4), 0x3e);
        EXPECT(gbc.readMem(0xf76c), 0x28);
        // CB 3E 03E7
        gbc.setState(0x6a05, 0x7e22, 0xc730, 0x5ee7, 0xe9eb, 0xfbdb, 0x0, 0x0);
        gbc.writeMem(0x6a05, { 0xcb, 0x3e });
        gbc.writeMem(0xfbdb, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7e22);
        EXPECT(gbc.pc(), 0x6a07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfbdb), 0x33);
    }
}
#endif
