#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_47)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_47) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 47 0000
        gbc.setState(0xea01, 0x8dce, 0x3e00, 0x7bd7, 0x5e92, 0x760b, 0x1, 0x0);
        gbc.writeMem(0xea01, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8dce);
        EXPECT(gbc.pc(), 0xea03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea01), 0xcb);
        EXPECT(gbc.readMem(0xea02), 0x47);
        // CB 47 0001
        gbc.setState(0xe4bb, 0x234b, 0xa640, 0xacd9, 0xf2cd, 0x7c43, 0x1, 0x0);
        gbc.writeMem(0xe4bb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x234b);
        EXPECT(gbc.pc(), 0xe4bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4bb), 0xcb);
        EXPECT(gbc.readMem(0xe4bc), 0x47);
        // CB 47 0002
        gbc.setState(0xe365, 0xd406, 0xa980, 0xe5f6, 0x7340, 0x4969, 0x0, 0x0);
        gbc.writeMem(0xe365, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd406);
        EXPECT(gbc.pc(), 0xe367);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe365), 0xcb);
        EXPECT(gbc.readMem(0xe366), 0x47);
        // CB 47 0003
        gbc.setState(0xb694, 0x124f, 0xeae0, 0xe37c, 0x37aa, 0x3b98, 0x1, 0x0);
        gbc.writeMem(0xb694, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x124f);
        EXPECT(gbc.pc(), 0xb696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb694), 0xcb);
        EXPECT(gbc.readMem(0xb695), 0x47);
        // CB 47 0004
        gbc.setState(0xbc86, 0xc799, 0xec50, 0x8def, 0x94ed, 0xf93a, 0x0, 0x1);
        gbc.writeMem(0xbc86, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc799);
        EXPECT(gbc.pc(), 0xbc88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc86), 0xcb);
        EXPECT(gbc.readMem(0xbc87), 0x47);
        // CB 47 0005
        gbc.setState(0xab9b, 0xc413, 0x5730, 0x8d35, 0xc854, 0xf44a, 0x1, 0x0);
        gbc.writeMem(0xab9b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc413);
        EXPECT(gbc.pc(), 0xab9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9b), 0xcb);
        EXPECT(gbc.readMem(0xab9c), 0x47);
        // CB 47 0006
        gbc.setState(0x89ae, 0x7815, 0x8690, 0xd69, 0xa8ad, 0x5f1d, 0x0, 0x1);
        gbc.writeMem(0x89ae, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7815);
        EXPECT(gbc.pc(), 0x89b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89ae), 0xcb);
        EXPECT(gbc.readMem(0x89af), 0x47);
        // CB 47 0007
        gbc.setState(0x6df8, 0xa14b, 0x2630, 0xa318, 0xd9cb, 0x82ea, 0x1, 0x0);
        gbc.writeMem(0x6df8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa14b);
        EXPECT(gbc.pc(), 0x6dfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0008
        gbc.setState(0x50b3, 0x4527, 0x6bf0, 0x9bd4, 0xc0f8, 0x894b, 0x1, 0x0);
        gbc.writeMem(0x50b3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4527);
        EXPECT(gbc.pc(), 0x50b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0009
        gbc.setState(0x8e7d, 0x5c37, 0xccd0, 0x2ef4, 0x2c44, 0x1698, 0x1, 0x1);
        gbc.writeMem(0x8e7d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5c37);
        EXPECT(gbc.pc(), 0x8e7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e7d), 0xcb);
        EXPECT(gbc.readMem(0x8e7e), 0x47);
        // CB 47 000A
        gbc.setState(0x5360, 0x254b, 0x3f60, 0xf49, 0xaaf9, 0xd029, 0x1, 0x0);
        gbc.writeMem(0x5360, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x254b);
        EXPECT(gbc.pc(), 0x5362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 000B
        gbc.setState(0x9b95, 0xc2d6, 0x1200, 0x5756, 0xdca, 0x23a2, 0x0, 0x0);
        gbc.writeMem(0x9b95, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc2d6);
        EXPECT(gbc.pc(), 0x9b97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b95), 0xcb);
        EXPECT(gbc.readMem(0x9b96), 0x47);
        // CB 47 000C
        gbc.setState(0xb0d6, 0xd8db, 0xd7b0, 0x17e9, 0x1615, 0xd4dc, 0x1, 0x0);
        gbc.writeMem(0xb0d6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd8db);
        EXPECT(gbc.pc(), 0xb0d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0d6), 0xcb);
        EXPECT(gbc.readMem(0xb0d7), 0x47);
        // CB 47 000D
        gbc.setState(0x505f, 0x67ab, 0x73e0, 0xc44e, 0x8821, 0xbc4d, 0x0, 0x1);
        gbc.writeMem(0x505f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x67ab);
        EXPECT(gbc.pc(), 0x5061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 000E
        gbc.setState(0x8d4b, 0x39d4, 0x1490, 0x4991, 0xe02b, 0x3ceb, 0x0, 0x1);
        gbc.writeMem(0x8d4b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x39d4);
        EXPECT(gbc.pc(), 0x8d4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d4b), 0xcb);
        EXPECT(gbc.readMem(0x8d4c), 0x47);
        // CB 47 000F
        gbc.setState(0xb071, 0x86e8, 0xa080, 0xc571, 0xbf11, 0x2429, 0x0, 0x0);
        gbc.writeMem(0xb071, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x86e8);
        EXPECT(gbc.pc(), 0xb073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb071), 0xcb);
        EXPECT(gbc.readMem(0xb072), 0x47);
        // CB 47 0010
        gbc.setState(0x5ae7, 0x5ffc, 0x63d0, 0xebf6, 0xb15c, 0xdd02, 0x1, 0x0);
        gbc.writeMem(0x5ae7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5ffc);
        EXPECT(gbc.pc(), 0x5ae9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0011
        gbc.setState(0xd498, 0x3081, 0x6cf0, 0xb626, 0x97ca, 0x354e, 0x1, 0x1);
        gbc.writeMem(0xd498, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3081);
        EXPECT(gbc.pc(), 0xd49a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd498), 0xcb);
        EXPECT(gbc.readMem(0xd499), 0x47);
        // CB 47 0012
        gbc.setState(0x3d97, 0x9a22, 0xf0f0, 0x1dbb, 0x1c28, 0x6936, 0x0, 0x0);
        gbc.writeMem(0x3d97, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9a22);
        EXPECT(gbc.pc(), 0x3d99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0013
        gbc.setState(0xece9, 0x6be9, 0x54c0, 0xf4cf, 0x751b, 0x1ef6, 0x0, 0x0);
        gbc.writeMem(0xece9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6be9);
        EXPECT(gbc.pc(), 0xeceb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xece9), 0xcb);
        EXPECT(gbc.readMem(0xecea), 0x47);
        // CB 47 0014
        gbc.setState(0xa974, 0xd807, 0xde80, 0xa406, 0x5f4, 0x6eff, 0x0, 0x0);
        gbc.writeMem(0xa974, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd807);
        EXPECT(gbc.pc(), 0xa976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa974), 0xcb);
        EXPECT(gbc.readMem(0xa975), 0x47);
        // CB 47 0015
        gbc.setState(0x689a, 0x80d, 0x8fb0, 0xe243, 0xfd00, 0x331e, 0x0, 0x0);
        gbc.writeMem(0x689a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x80d);
        EXPECT(gbc.pc(), 0x689c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0017
        gbc.setState(0x2c96, 0x3894, 0x50c0, 0x9989, 0xdf5e, 0xe6, 0x1, 0x0);
        gbc.writeMem(0x2c96, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3894);
        EXPECT(gbc.pc(), 0x2c98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0018
        gbc.setState(0x2ef7, 0xa493, 0xcbc0, 0xa684, 0xd155, 0x5999, 0x1, 0x0);
        gbc.writeMem(0x2ef7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa493);
        EXPECT(gbc.pc(), 0x2ef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0019
        gbc.setState(0x2c30, 0xdfc6, 0xaa10, 0xdf05, 0xa179, 0x70ee, 0x0, 0x1);
        gbc.writeMem(0x2c30, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdfc6);
        EXPECT(gbc.pc(), 0x2c32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 001B
        gbc.setState(0x75a9, 0x22b5, 0x9640, 0x9fa0, 0x6335, 0xdd1e, 0x0, 0x0);
        gbc.writeMem(0x75a9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x22b5);
        EXPECT(gbc.pc(), 0x75ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 001C
        gbc.setState(0x4c46, 0xf542, 0x4c40, 0x7efa, 0x72e4, 0xa786, 0x1, 0x0);
        gbc.writeMem(0x4c46, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf542);
        EXPECT(gbc.pc(), 0x4c48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 001E
        gbc.setState(0xddef, 0x3d1e, 0xf990, 0x8b78, 0x8481, 0xb59d, 0x0, 0x1);
        gbc.writeMem(0xddef, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3d1e);
        EXPECT(gbc.pc(), 0xddf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddef), 0xcb);
        EXPECT(gbc.readMem(0xddf0), 0x47);
        // CB 47 001F
        gbc.setState(0xc626, 0x3028, 0x36a0, 0xfb4d, 0x2042, 0xcd10, 0x0, 0x0);
        gbc.writeMem(0xc626, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3028);
        EXPECT(gbc.pc(), 0xc628);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc626), 0xcb);
        EXPECT(gbc.readMem(0xc627), 0x47);
        // CB 47 0020
        gbc.setState(0xdd0c, 0x18e8, 0xbc10, 0x12e4, 0xe533, 0x69dc, 0x0, 0x0);
        gbc.writeMem(0xdd0c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x18e8);
        EXPECT(gbc.pc(), 0xdd0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd0c), 0xcb);
        EXPECT(gbc.readMem(0xdd0d), 0x47);
        // CB 47 0021
        gbc.setState(0xd7b6, 0xe460, 0xf8f0, 0x3095, 0x85c9, 0x2a99, 0x1, 0x0);
        gbc.writeMem(0xd7b6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe460);
        EXPECT(gbc.pc(), 0xd7b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7b6), 0xcb);
        EXPECT(gbc.readMem(0xd7b7), 0x47);
        // CB 47 0022
        gbc.setState(0xdae0, 0x4cb4, 0x8410, 0x1399, 0xc801, 0xd38a, 0x0, 0x0);
        gbc.writeMem(0xdae0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4cb4);
        EXPECT(gbc.pc(), 0xdae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae0), 0xcb);
        EXPECT(gbc.readMem(0xdae1), 0x47);
        // CB 47 0023
        gbc.setState(0x6dae, 0xba5b, 0xf550, 0x43ee, 0xc7ca, 0x7a7e, 0x0, 0x0);
        gbc.writeMem(0x6dae, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xba5b);
        EXPECT(gbc.pc(), 0x6db0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0024
        gbc.setState(0xca5c, 0xf062, 0x7080, 0x9958, 0xca11, 0xa5ee, 0x1, 0x1);
        gbc.writeMem(0xca5c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf062);
        EXPECT(gbc.pc(), 0xca5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca5c), 0xcb);
        EXPECT(gbc.readMem(0xca5d), 0x47);
        // CB 47 0025
        gbc.setState(0x8885, 0x7300, 0x3250, 0x1082, 0x9afd, 0x68fa, 0x0, 0x1);
        gbc.writeMem(0x8885, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7300);
        EXPECT(gbc.pc(), 0x8887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8885), 0xcb);
        EXPECT(gbc.readMem(0x8886), 0x47);
        // CB 47 0026
        gbc.setState(0x8a09, 0x15b1, 0xa210, 0x21f5, 0xcba6, 0xa1b6, 0x0, 0x0);
        gbc.writeMem(0x8a09, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x15b1);
        EXPECT(gbc.pc(), 0x8a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a09), 0xcb);
        EXPECT(gbc.readMem(0x8a0a), 0x47);
        // CB 47 0027
        gbc.setState(0x45e, 0xf712, 0xe810, 0xe17c, 0x252c, 0x286f, 0x0, 0x0);
        gbc.writeMem(0x45e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf712);
        EXPECT(gbc.pc(), 0x460);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0029
        gbc.setState(0x86f6, 0xa2cb, 0x42e0, 0x8b25, 0xcd02, 0x89bf, 0x0, 0x0);
        gbc.writeMem(0x86f6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa2cb);
        EXPECT(gbc.pc(), 0x86f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f6), 0xcb);
        EXPECT(gbc.readMem(0x86f7), 0x47);
        // CB 47 002A
        gbc.setState(0x6707, 0xf9ec, 0xb270, 0x6edf, 0x403a, 0xd7da, 0x1, 0x1);
        gbc.writeMem(0x6707, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf9ec);
        EXPECT(gbc.pc(), 0x6709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 002B
        gbc.setState(0x6d7e, 0x8c3c, 0xd930, 0x1911, 0xaa68, 0x814f, 0x0, 0x1);
        gbc.writeMem(0x6d7e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8c3c);
        EXPECT(gbc.pc(), 0x6d80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 002C
        gbc.setState(0x1e08, 0x8015, 0x5bb0, 0xbb11, 0x8084, 0x1778, 0x0, 0x1);
        gbc.writeMem(0x1e08, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x8015);
        EXPECT(gbc.pc(), 0x1e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 002D
        gbc.setState(0xc3a0, 0x487f, 0xb5b0, 0x7462, 0x7c81, 0x700b, 0x0, 0x1);
        gbc.writeMem(0xc3a0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x487f);
        EXPECT(gbc.pc(), 0xc3a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3a0), 0xcb);
        EXPECT(gbc.readMem(0xc3a1), 0x47);
        // CB 47 002F
        gbc.setState(0x51a, 0x9043, 0x7730, 0x9479, 0x33bb, 0x98b2, 0x1, 0x1);
        gbc.writeMem(0x51a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9043);
        EXPECT(gbc.pc(), 0x51c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0030
        gbc.setState(0x7dbd, 0xd175, 0xd480, 0xdd3, 0xb858, 0x5f98, 0x0, 0x1);
        gbc.writeMem(0x7dbd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd175);
        EXPECT(gbc.pc(), 0x7dbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0031
        gbc.setState(0xd9ec, 0x2425, 0x6110, 0xe15e, 0xe203, 0xadb8, 0x1, 0x1);
        gbc.writeMem(0xd9ec, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x2425);
        EXPECT(gbc.pc(), 0xd9ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ec), 0xcb);
        EXPECT(gbc.readMem(0xd9ed), 0x47);
        // CB 47 0032
        gbc.setState(0xbda8, 0x4c3, 0x7200, 0x303f, 0xc592, 0xf28b, 0x0, 0x1);
        gbc.writeMem(0xbda8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4c3);
        EXPECT(gbc.pc(), 0xbdaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda8), 0xcb);
        EXPECT(gbc.readMem(0xbda9), 0x47);
        // CB 47 0033
        gbc.setState(0x63be, 0x56e5, 0x3ec0, 0x2085, 0xfcc, 0x707c, 0x1, 0x1);
        gbc.writeMem(0x63be, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x56e5);
        EXPECT(gbc.pc(), 0x63c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0034
        gbc.setState(0x4715, 0x5566, 0x2000, 0xbfaf, 0x5eea, 0xdb94, 0x0, 0x0);
        gbc.writeMem(0x4715, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5566);
        EXPECT(gbc.pc(), 0x4717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0035
        gbc.setState(0xad1b, 0x182a, 0x6b60, 0xf68, 0x91a4, 0x5363, 0x1, 0x0);
        gbc.writeMem(0xad1b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x182a);
        EXPECT(gbc.pc(), 0xad1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1b), 0xcb);
        EXPECT(gbc.readMem(0xad1c), 0x47);
        // CB 47 0036
        gbc.setState(0xbef6, 0xf8b4, 0xa470, 0xba46, 0xcf5a, 0xdd9b, 0x1, 0x1);
        gbc.writeMem(0xbef6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf8b4);
        EXPECT(gbc.pc(), 0xbef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef6), 0xcb);
        EXPECT(gbc.readMem(0xbef7), 0x47);
        // CB 47 0037
        gbc.setState(0xd5c3, 0xd6c5, 0x1270, 0x603f, 0xa2d5, 0x16a4, 0x0, 0x0);
        gbc.writeMem(0xd5c3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd6c5);
        EXPECT(gbc.pc(), 0xd5c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5c3), 0xcb);
        EXPECT(gbc.readMem(0xd5c4), 0x47);
        // CB 47 0038
        gbc.setState(0xb22a, 0x94e9, 0x7b0, 0x5fce, 0xfe62, 0xdc51, 0x0, 0x0);
        gbc.writeMem(0xb22a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x94e9);
        EXPECT(gbc.pc(), 0xb22c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb22a), 0xcb);
        EXPECT(gbc.readMem(0xb22b), 0x47);
        // CB 47 0039
        gbc.setState(0x8736, 0x83ec, 0x43d0, 0xe67c, 0xacb2, 0xe288, 0x0, 0x1);
        gbc.writeMem(0x8736, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x83ec);
        EXPECT(gbc.pc(), 0x8738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8736), 0xcb);
        EXPECT(gbc.readMem(0x8737), 0x47);
        // CB 47 003A
        gbc.setState(0x5fe3, 0x5aa8, 0xe100, 0x3358, 0xa1fb, 0x1c26, 0x1, 0x1);
        gbc.writeMem(0x5fe3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5aa8);
        EXPECT(gbc.pc(), 0x5fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 003B
        gbc.setState(0x64b, 0x1ec1, 0x2490, 0x9b1d, 0x5215, 0xc95d, 0x1, 0x0);
        gbc.writeMem(0x64b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x1ec1);
        EXPECT(gbc.pc(), 0x64d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 003C
        gbc.setState(0x8c1b, 0x7f11, 0xaa70, 0x28a3, 0x2616, 0xfa11, 0x1, 0x0);
        gbc.writeMem(0x8c1b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7f11);
        EXPECT(gbc.pc(), 0x8c1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c1b), 0xcb);
        EXPECT(gbc.readMem(0x8c1c), 0x47);
        // CB 47 003D
        gbc.setState(0x42c3, 0x11ce, 0x8810, 0x3244, 0x701b, 0x4b90, 0x1, 0x0);
        gbc.writeMem(0x42c3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x11ce);
        EXPECT(gbc.pc(), 0x42c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 003E
        gbc.setState(0x86c0, 0x5099, 0x5a60, 0x4523, 0xdbe3, 0x3d4f, 0x0, 0x1);
        gbc.writeMem(0x86c0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5099);
        EXPECT(gbc.pc(), 0x86c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86c0), 0xcb);
        EXPECT(gbc.readMem(0x86c1), 0x47);
        // CB 47 003F
        gbc.setState(0xc44f, 0x2417, 0xf950, 0x1c03, 0x315e, 0x2f32, 0x1, 0x0);
        gbc.writeMem(0xc44f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2417);
        EXPECT(gbc.pc(), 0xc451);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc44f), 0xcb);
        EXPECT(gbc.readMem(0xc450), 0x47);
        // CB 47 0041
        gbc.setState(0x4a7, 0xf73a, 0x39a0, 0xa0ce, 0xa878, 0x8b81, 0x1, 0x1);
        gbc.writeMem(0x4a7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf73a);
        EXPECT(gbc.pc(), 0x4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0042
        gbc.setState(0xee7e, 0x2f36, 0x29d0, 0xf292, 0xdc88, 0xc688, 0x1, 0x1);
        gbc.writeMem(0xee7e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2f36);
        EXPECT(gbc.pc(), 0xee80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee7e), 0xcb);
        EXPECT(gbc.readMem(0xee7f), 0x47);
        // CB 47 0043
        gbc.setState(0x3ad, 0xc5ae, 0x1350, 0x3233, 0x4e7a, 0x80e5, 0x1, 0x1);
        gbc.writeMem(0x3ad, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc5ae);
        EXPECT(gbc.pc(), 0x3af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0044
        gbc.setState(0xb8c0, 0xd89, 0xba10, 0xced4, 0x9c96, 0xf55a, 0x0, 0x1);
        gbc.writeMem(0xb8c0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd89);
        EXPECT(gbc.pc(), 0xb8c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8c0), 0xcb);
        EXPECT(gbc.readMem(0xb8c1), 0x47);
        // CB 47 0045
        gbc.setState(0xcb8d, 0x4abc, 0x7f50, 0x9a25, 0x2c3b, 0x64a7, 0x0, 0x0);
        gbc.writeMem(0xcb8d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4abc);
        EXPECT(gbc.pc(), 0xcb8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb8d), 0xcb);
        EXPECT(gbc.readMem(0xcb8e), 0x47);
        // CB 47 0046
        gbc.setState(0x615c, 0x28e7, 0x2640, 0xfab1, 0x586d, 0xe6ea, 0x1, 0x0);
        gbc.writeMem(0x615c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x28e7);
        EXPECT(gbc.pc(), 0x615e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0047
        gbc.setState(0x85ee, 0x4970, 0x4f50, 0x2b4c, 0xd3c7, 0x967b, 0x1, 0x1);
        gbc.writeMem(0x85ee, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4970);
        EXPECT(gbc.pc(), 0x85f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ee), 0xcb);
        EXPECT(gbc.readMem(0x85ef), 0x47);
        // CB 47 0048
        gbc.setState(0xc9c6, 0xb2b2, 0xc500, 0x5c7, 0xdd0c, 0x114c, 0x0, 0x1);
        gbc.writeMem(0xc9c6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb2b2);
        EXPECT(gbc.pc(), 0xc9c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c6), 0xcb);
        EXPECT(gbc.readMem(0xc9c7), 0x47);
        // CB 47 0049
        gbc.setState(0x20fb, 0xc40, 0x49b0, 0x4e3, 0xedd4, 0x1565, 0x1, 0x0);
        gbc.writeMem(0x20fb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc40);
        EXPECT(gbc.pc(), 0x20fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 004A
        gbc.setState(0x2680, 0xee2a, 0xe6e0, 0xe51a, 0x593f, 0x72cb, 0x0, 0x0);
        gbc.writeMem(0x2680, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xee2a);
        EXPECT(gbc.pc(), 0x2682);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 004B
        gbc.setState(0xaf5f, 0xc035, 0x9380, 0x6a98, 0xfec0, 0x6cca, 0x0, 0x1);
        gbc.writeMem(0xaf5f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc035);
        EXPECT(gbc.pc(), 0xaf61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf5f), 0xcb);
        EXPECT(gbc.readMem(0xaf60), 0x47);
        // CB 47 004C
        gbc.setState(0xc838, 0x508, 0xb9d0, 0xb74f, 0xcf76, 0x7da6, 0x0, 0x0);
        gbc.writeMem(0xc838, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x508);
        EXPECT(gbc.pc(), 0xc83a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc838), 0xcb);
        EXPECT(gbc.readMem(0xc839), 0x47);
        // CB 47 004D
        gbc.setState(0x69f0, 0x8af4, 0x2b30, 0x1d45, 0x2bc1, 0x4f72, 0x0, 0x1);
        gbc.writeMem(0x69f0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8af4);
        EXPECT(gbc.pc(), 0x69f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 004E
        gbc.setState(0xd1ea, 0xb203, 0x5530, 0x5f3, 0x7a1f, 0x3f1c, 0x0, 0x1);
        gbc.writeMem(0xd1ea, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb203);
        EXPECT(gbc.pc(), 0xd1ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ea), 0xcb);
        EXPECT(gbc.readMem(0xd1eb), 0x47);
        // CB 47 004F
        gbc.setState(0xd7a4, 0x42c, 0x2630, 0x6a61, 0xae4b, 0x4ee1, 0x0, 0x0);
        gbc.writeMem(0xd7a4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x42c);
        EXPECT(gbc.pc(), 0xd7a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7a4), 0xcb);
        EXPECT(gbc.readMem(0xd7a5), 0x47);
        // CB 47 0050
        gbc.setState(0xc8df, 0xe4f, 0xe3d0, 0x5d06, 0x357c, 0x8e28, 0x0, 0x1);
        gbc.writeMem(0xc8df, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe4f);
        EXPECT(gbc.pc(), 0xc8e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8df), 0xcb);
        EXPECT(gbc.readMem(0xc8e0), 0x47);
        // CB 47 0052
        gbc.setState(0x8fa0, 0xa45f, 0x4850, 0x5a4b, 0x28f0, 0xa174, 0x1, 0x1);
        gbc.writeMem(0x8fa0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa45f);
        EXPECT(gbc.pc(), 0x8fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa0), 0xcb);
        EXPECT(gbc.readMem(0x8fa1), 0x47);
        // CB 47 0055
        gbc.setState(0x3212, 0xabba, 0x8260, 0xa813, 0xcfb5, 0x5918, 0x0, 0x1);
        gbc.writeMem(0x3212, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xabba);
        EXPECT(gbc.pc(), 0x3214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0056
        gbc.setState(0x9a70, 0xa318, 0xbc0, 0x9238, 0xa910, 0x8efd, 0x1, 0x1);
        gbc.writeMem(0x9a70, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa318);
        EXPECT(gbc.pc(), 0x9a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a70), 0xcb);
        EXPECT(gbc.readMem(0x9a71), 0x47);
        // CB 47 0057
        gbc.setState(0xd06c, 0x24f9, 0xbea0, 0x692a, 0x7977, 0x8f57, 0x1, 0x1);
        gbc.writeMem(0xd06c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x24f9);
        EXPECT(gbc.pc(), 0xd06e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd06c), 0xcb);
        EXPECT(gbc.readMem(0xd06d), 0x47);
        // CB 47 0058
        gbc.setState(0x88f2, 0xf0d0, 0xb110, 0x7b44, 0xd4e2, 0x41bd, 0x0, 0x0);
        gbc.writeMem(0x88f2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf0d0);
        EXPECT(gbc.pc(), 0x88f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88f2), 0xcb);
        EXPECT(gbc.readMem(0x88f3), 0x47);
        // CB 47 0059
        gbc.setState(0x79d0, 0x694c, 0x1130, 0xd486, 0x586a, 0xebd, 0x0, 0x1);
        gbc.writeMem(0x79d0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x694c);
        EXPECT(gbc.pc(), 0x79d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 005A
        gbc.setState(0x6874, 0x7446, 0xf810, 0x8848, 0xd061, 0xeeb4, 0x0, 0x0);
        gbc.writeMem(0x6874, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7446);
        EXPECT(gbc.pc(), 0x6876);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 005B
        gbc.setState(0xa69, 0x9d79, 0xe9b0, 0x940, 0xeb, 0x1a1b, 0x1, 0x1);
        gbc.writeMem(0xa69, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9d79);
        EXPECT(gbc.pc(), 0xa6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 005C
        gbc.setState(0xcdd4, 0x88ba, 0xa070, 0xefc1, 0xbc64, 0xd841, 0x0, 0x1);
        gbc.writeMem(0xcdd4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x88ba);
        EXPECT(gbc.pc(), 0xcdd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdd4), 0xcb);
        EXPECT(gbc.readMem(0xcdd5), 0x47);
        // CB 47 005D
        gbc.setState(0x11b2, 0x9386, 0x2d0, 0x8d1f, 0xd8e6, 0xb4e5, 0x0, 0x1);
        gbc.writeMem(0x11b2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9386);
        EXPECT(gbc.pc(), 0x11b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 005E
        gbc.setState(0x1106, 0xc38c, 0xfb70, 0xe12d, 0x8aa6, 0x7cb8, 0x1, 0x1);
        gbc.writeMem(0x1106, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc38c);
        EXPECT(gbc.pc(), 0x1108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 005F
        gbc.setState(0xa857, 0x7742, 0x9b0, 0x8fc3, 0x3f30, 0x10b3, 0x1, 0x1);
        gbc.writeMem(0xa857, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7742);
        EXPECT(gbc.pc(), 0xa859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa857), 0xcb);
        EXPECT(gbc.readMem(0xa858), 0x47);
        // CB 47 0060
        gbc.setState(0x1dd2, 0xb0f8, 0x9600, 0xf283, 0xc725, 0xd675, 0x1, 0x1);
        gbc.writeMem(0x1dd2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb0f8);
        EXPECT(gbc.pc(), 0x1dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0061
        gbc.setState(0x402b, 0xec87, 0xc150, 0x47e6, 0xa740, 0x8216, 0x1, 0x1);
        gbc.writeMem(0x402b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xec87);
        EXPECT(gbc.pc(), 0x402d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0062
        gbc.setState(0x1490, 0xb0c8, 0x2290, 0xca1e, 0x93e1, 0xa197, 0x1, 0x0);
        gbc.writeMem(0x1490, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb0c8);
        EXPECT(gbc.pc(), 0x1492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0063
        gbc.setState(0x14d3, 0x5c06, 0xa610, 0xc586, 0x152e, 0xf98c, 0x1, 0x0);
        gbc.writeMem(0x14d3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5c06);
        EXPECT(gbc.pc(), 0x14d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0064
        gbc.setState(0x1944, 0x7bbb, 0x67a0, 0x6e07, 0xf4a3, 0x1406, 0x0, 0x0);
        gbc.writeMem(0x1944, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7bbb);
        EXPECT(gbc.pc(), 0x1946);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0065
        gbc.setState(0xe2b1, 0x449b, 0x8cc0, 0xb073, 0x478d, 0xb6b4, 0x1, 0x0);
        gbc.writeMem(0xe2b1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x449b);
        EXPECT(gbc.pc(), 0xe2b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2b1), 0xcb);
        EXPECT(gbc.readMem(0xe2b2), 0x47);
        // CB 47 0066
        gbc.setState(0xc3bd, 0xb889, 0xc610, 0x1cca, 0xbc24, 0xfecf, 0x0, 0x1);
        gbc.writeMem(0xc3bd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb889);
        EXPECT(gbc.pc(), 0xc3bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3bd), 0xcb);
        EXPECT(gbc.readMem(0xc3be), 0x47);
        // CB 47 0067
        gbc.setState(0x6163, 0x29c4, 0xffa0, 0x901e, 0x62bc, 0xb5b0, 0x0, 0x0);
        gbc.writeMem(0x6163, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x29c4);
        EXPECT(gbc.pc(), 0x6165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0068
        gbc.setState(0x3179, 0x76f9, 0xb400, 0x1ff0, 0x2ed5, 0x9270, 0x1, 0x0);
        gbc.writeMem(0x3179, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x76f9);
        EXPECT(gbc.pc(), 0x317b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0069
        gbc.setState(0xa7e7, 0xab43, 0x97e0, 0x3950, 0x4b07, 0x4c39, 0x0, 0x0);
        gbc.writeMem(0xa7e7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xab43);
        EXPECT(gbc.pc(), 0xa7e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e7), 0xcb);
        EXPECT(gbc.readMem(0xa7e8), 0x47);
        // CB 47 006A
        gbc.setState(0x3319, 0x9ba0, 0x3690, 0xa187, 0x2b, 0x89ab, 0x0, 0x1);
        gbc.writeMem(0x3319, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9ba0);
        EXPECT(gbc.pc(), 0x331b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 006B
        gbc.setState(0x9633, 0xd49c, 0x9a60, 0x7056, 0xf7b, 0x8e9f, 0x0, 0x1);
        gbc.writeMem(0x9633, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd49c);
        EXPECT(gbc.pc(), 0x9635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9633), 0xcb);
        EXPECT(gbc.readMem(0x9634), 0x47);
        // CB 47 006C
        gbc.setState(0xef13, 0x8bae, 0xbfc0, 0xedf2, 0x8933, 0xb3a0, 0x1, 0x1);
        gbc.writeMem(0xef13, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x8bae);
        EXPECT(gbc.pc(), 0xef15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef13), 0xcb);
        EXPECT(gbc.readMem(0xef14), 0x47);
        // CB 47 006D
        gbc.setState(0x367a, 0xd1c, 0x6fe0, 0x406d, 0xed98, 0x5c97, 0x0, 0x1);
        gbc.writeMem(0x367a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd1c);
        EXPECT(gbc.pc(), 0x367c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 006E
        gbc.setState(0x95a0, 0xf9b9, 0x52a0, 0x89c3, 0x3057, 0x548b, 0x0, 0x1);
        gbc.writeMem(0x95a0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf9b9);
        EXPECT(gbc.pc(), 0x95a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a0), 0xcb);
        EXPECT(gbc.readMem(0x95a1), 0x47);
        // CB 47 006F
        gbc.setState(0xe03f, 0x976, 0xb140, 0x21ea, 0x2153, 0x6e03, 0x1, 0x0);
        gbc.writeMem(0xe03f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x976);
        EXPECT(gbc.pc(), 0xe041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe03f), 0xcb);
        EXPECT(gbc.readMem(0xe040), 0x47);
        // CB 47 0070
        gbc.setState(0x518d, 0x2ce5, 0xb010, 0x9e5e, 0x7563, 0x7ff5, 0x1, 0x1);
        gbc.writeMem(0x518d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2ce5);
        EXPECT(gbc.pc(), 0x518f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0071
        gbc.setState(0x4f97, 0x8309, 0x8450, 0x7b62, 0xadcd, 0xcf77, 0x1, 0x1);
        gbc.writeMem(0x4f97, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8309);
        EXPECT(gbc.pc(), 0x4f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0072
        gbc.setState(0x8a42, 0xf62f, 0xbcb0, 0x18b4, 0xc21, 0xb7ef, 0x1, 0x0);
        gbc.writeMem(0x8a42, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf62f);
        EXPECT(gbc.pc(), 0x8a44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a42), 0xcb);
        EXPECT(gbc.readMem(0x8a43), 0x47);
        // CB 47 0073
        gbc.setState(0xe02d, 0x5688, 0xfc40, 0xb331, 0x7911, 0xb781, 0x0, 0x1);
        gbc.writeMem(0xe02d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5688);
        EXPECT(gbc.pc(), 0xe02f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02d), 0xcb);
        EXPECT(gbc.readMem(0xe02e), 0x47);
        // CB 47 0074
        gbc.setState(0xd288, 0x675a, 0xff80, 0xf91d, 0x379d, 0x9727, 0x0, 0x0);
        gbc.writeMem(0xd288, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x675a);
        EXPECT(gbc.pc(), 0xd28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd288), 0xcb);
        EXPECT(gbc.readMem(0xd289), 0x47);
        // CB 47 0075
        gbc.setState(0x59c3, 0xd18a, 0x6220, 0x8352, 0xb2d2, 0x6f3a, 0x1, 0x0);
        gbc.writeMem(0x59c3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd18a);
        EXPECT(gbc.pc(), 0x59c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0076
        gbc.setState(0xc7d, 0x8f18, 0x3160, 0xb2e3, 0x98d2, 0xdb29, 0x0, 0x0);
        gbc.writeMem(0xc7d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8f18);
        EXPECT(gbc.pc(), 0xc7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0077
        gbc.setState(0x3c42, 0xbfa7, 0x82d0, 0x8bf4, 0xfc89, 0xfd30, 0x0, 0x0);
        gbc.writeMem(0x3c42, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbfa7);
        EXPECT(gbc.pc(), 0x3c44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0078
        gbc.setState(0xb253, 0x2515, 0x7020, 0x587f, 0xa288, 0xdd2d, 0x1, 0x1);
        gbc.writeMem(0xb253, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2515);
        EXPECT(gbc.pc(), 0xb255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb253), 0xcb);
        EXPECT(gbc.readMem(0xb254), 0x47);
        // CB 47 0079
        gbc.setState(0xe75d, 0x4ef6, 0x9f50, 0x477f, 0x986, 0xb6d6, 0x0, 0x1);
        gbc.writeMem(0xe75d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x4ef6);
        EXPECT(gbc.pc(), 0xe75f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe75d), 0xcb);
        EXPECT(gbc.readMem(0xe75e), 0x47);
        // CB 47 007A
        gbc.setState(0x55c5, 0x643b, 0x16f0, 0x6534, 0x3772, 0x49da, 0x1, 0x0);
        gbc.writeMem(0x55c5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x643b);
        EXPECT(gbc.pc(), 0x55c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 007B
        gbc.setState(0x1b1c, 0xa22f, 0x8d60, 0xbe76, 0xa24e, 0xf386, 0x1, 0x1);
        gbc.writeMem(0x1b1c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa22f);
        EXPECT(gbc.pc(), 0x1b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 007C
        gbc.setState(0x3b0c, 0xc39d, 0x32e0, 0xa3f, 0x4ed3, 0x3139, 0x1, 0x1);
        gbc.writeMem(0x3b0c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc39d);
        EXPECT(gbc.pc(), 0x3b0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 007D
        gbc.setState(0xdd96, 0x7861, 0x17f0, 0xa67d, 0xd2f4, 0x27ce, 0x0, 0x1);
        gbc.writeMem(0xdd96, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7861);
        EXPECT(gbc.pc(), 0xdd98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd96), 0xcb);
        EXPECT(gbc.readMem(0xdd97), 0x47);
        // CB 47 007E
        gbc.setState(0xdb04, 0xb59a, 0x8120, 0x1a45, 0xe905, 0x1163, 0x0, 0x0);
        gbc.writeMem(0xdb04, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb59a);
        EXPECT(gbc.pc(), 0xdb06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb04), 0xcb);
        EXPECT(gbc.readMem(0xdb05), 0x47);
        // CB 47 007F
        gbc.setState(0x9294, 0x83bb, 0x7790, 0x8b79, 0xb527, 0x6723, 0x1, 0x1);
        gbc.writeMem(0x9294, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x83bb);
        EXPECT(gbc.pc(), 0x9296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9294), 0xcb);
        EXPECT(gbc.readMem(0x9295), 0x47);
        // CB 47 0080
        gbc.setState(0x34df, 0xe8c, 0x8280, 0xc202, 0x3694, 0xdc4d, 0x0, 0x0);
        gbc.writeMem(0x34df, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe8c);
        EXPECT(gbc.pc(), 0x34e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0081
        gbc.setState(0x4443, 0x8011, 0xf220, 0x220c, 0x682c, 0xacb4, 0x1, 0x0);
        gbc.writeMem(0x4443, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8011);
        EXPECT(gbc.pc(), 0x4445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0082
        gbc.setState(0x27c9, 0x1b37, 0xfd20, 0x36fb, 0xde5b, 0xc041, 0x0, 0x1);
        gbc.writeMem(0x27c9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1b37);
        EXPECT(gbc.pc(), 0x27cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0083
        gbc.setState(0x9e13, 0x6e7d, 0x8640, 0x343b, 0xb5d6, 0x21fa, 0x0, 0x1);
        gbc.writeMem(0x9e13, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6e7d);
        EXPECT(gbc.pc(), 0x9e15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e13), 0xcb);
        EXPECT(gbc.readMem(0x9e14), 0x47);
        // CB 47 0084
        gbc.setState(0x60d8, 0xf10f, 0xdd80, 0x68b8, 0x3753, 0xc6b7, 0x1, 0x0);
        gbc.writeMem(0x60d8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf10f);
        EXPECT(gbc.pc(), 0x60da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0085
        gbc.setState(0xaf37, 0xf2be, 0x1a90, 0xdf64, 0x89a, 0xa169, 0x0, 0x0);
        gbc.writeMem(0xaf37, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf2be);
        EXPECT(gbc.pc(), 0xaf39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf37), 0xcb);
        EXPECT(gbc.readMem(0xaf38), 0x47);
        // CB 47 0086
        gbc.setState(0xe365, 0x9b67, 0x760, 0x58c8, 0x1dbe, 0x2034, 0x1, 0x0);
        gbc.writeMem(0xe365, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9b67);
        EXPECT(gbc.pc(), 0xe367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe365), 0xcb);
        EXPECT(gbc.readMem(0xe366), 0x47);
        // CB 47 0087
        gbc.setState(0x7fc9, 0x1afe, 0xe090, 0xf37c, 0x75ee, 0xbf7a, 0x1, 0x0);
        gbc.writeMem(0x7fc9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1afe);
        EXPECT(gbc.pc(), 0x7fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0088
        gbc.setState(0x14a, 0xfe4e, 0xc330, 0xca91, 0x6751, 0x3554, 0x1, 0x1);
        gbc.writeMem(0x14a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xfe4e);
        EXPECT(gbc.pc(), 0x14c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0089
        gbc.setState(0xef31, 0xbc43, 0xafe0, 0x2df6, 0xbf6f, 0x6d99, 0x0, 0x1);
        gbc.writeMem(0xef31, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbc43);
        EXPECT(gbc.pc(), 0xef33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef31), 0xcb);
        EXPECT(gbc.readMem(0xef32), 0x47);
        // CB 47 008A
        gbc.setState(0xbd4f, 0x80d9, 0x10a0, 0xe9b7, 0x607d, 0xedf2, 0x1, 0x1);
        gbc.writeMem(0xbd4f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x80d9);
        EXPECT(gbc.pc(), 0xbd51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4f), 0xcb);
        EXPECT(gbc.readMem(0xbd50), 0x47);
        // CB 47 008B
        gbc.setState(0x68a6, 0x712b, 0x10, 0xbac4, 0x68de, 0xa52c, 0x0, 0x0);
        gbc.writeMem(0x68a6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x712b);
        EXPECT(gbc.pc(), 0x68a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 008C
        gbc.setState(0xa17a, 0xfe7f, 0x4d70, 0xc262, 0xe4bf, 0xc816, 0x1, 0x1);
        gbc.writeMem(0xa17a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xfe7f);
        EXPECT(gbc.pc(), 0xa17c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa17a), 0xcb);
        EXPECT(gbc.readMem(0xa17b), 0x47);
        // CB 47 008D
        gbc.setState(0x4c85, 0x7ff, 0x3330, 0x9ecb, 0x824b, 0xce12, 0x0, 0x0);
        gbc.writeMem(0x4c85, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7ff);
        EXPECT(gbc.pc(), 0x4c87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 008E
        gbc.setState(0x4cac, 0xad8d, 0xb980, 0x7fb2, 0x71a1, 0xbc2d, 0x0, 0x1);
        gbc.writeMem(0x4cac, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xad8d);
        EXPECT(gbc.pc(), 0x4cae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 008F
        gbc.setState(0x2b15, 0x2898, 0x7d10, 0x5e94, 0x3b8f, 0x6e9e, 0x0, 0x1);
        gbc.writeMem(0x2b15, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2898);
        EXPECT(gbc.pc(), 0x2b17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0090
        gbc.setState(0xcfb0, 0x7608, 0x9710, 0x3e4e, 0xb689, 0xcd55, 0x1, 0x0);
        gbc.writeMem(0xcfb0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7608);
        EXPECT(gbc.pc(), 0xcfb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb0), 0xcb);
        EXPECT(gbc.readMem(0xcfb1), 0x47);
        // CB 47 0091
        gbc.setState(0x8921, 0xca63, 0x4d50, 0x2fdf, 0xb1d5, 0xf88b, 0x1, 0x1);
        gbc.writeMem(0x8921, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xca63);
        EXPECT(gbc.pc(), 0x8923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8921), 0xcb);
        EXPECT(gbc.readMem(0x8922), 0x47);
        // CB 47 0092
        gbc.setState(0xd8a2, 0x9950, 0x6170, 0x5aed, 0x41aa, 0xe167, 0x0, 0x1);
        gbc.writeMem(0xd8a2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9950);
        EXPECT(gbc.pc(), 0xd8a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8a2), 0xcb);
        EXPECT(gbc.readMem(0xd8a3), 0x47);
        // CB 47 0093
        gbc.setState(0xdd7d, 0x8e41, 0xc120, 0x9d22, 0xa47b, 0x2b63, 0x1, 0x1);
        gbc.writeMem(0xdd7d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8e41);
        EXPECT(gbc.pc(), 0xdd7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd7d), 0xcb);
        EXPECT(gbc.readMem(0xdd7e), 0x47);
        // CB 47 0094
        gbc.setState(0x851e, 0xd1c, 0x330, 0x8b3a, 0x7405, 0x7f99, 0x0, 0x0);
        gbc.writeMem(0x851e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd1c);
        EXPECT(gbc.pc(), 0x8520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x851e), 0xcb);
        EXPECT(gbc.readMem(0x851f), 0x47);
        // CB 47 0095
        gbc.setState(0xea35, 0xbbad, 0x15a0, 0xc59f, 0xe85c, 0x4904, 0x0, 0x1);
        gbc.writeMem(0xea35, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xbbad);
        EXPECT(gbc.pc(), 0xea37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea35), 0xcb);
        EXPECT(gbc.readMem(0xea36), 0x47);
        // CB 47 0096
        gbc.setState(0x9661, 0x60eb, 0x8a10, 0x7ec9, 0x8d27, 0xb63, 0x0, 0x1);
        gbc.writeMem(0x9661, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x60eb);
        EXPECT(gbc.pc(), 0x9663);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9661), 0xcb);
        EXPECT(gbc.readMem(0x9662), 0x47);
        // CB 47 0097
        gbc.setState(0x2227, 0x27f3, 0x2450, 0xaeae, 0xa494, 0xe650, 0x1, 0x0);
        gbc.writeMem(0x2227, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x27f3);
        EXPECT(gbc.pc(), 0x2229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0098
        gbc.setState(0xa115, 0xa123, 0x5c00, 0x266a, 0xe20f, 0x5404, 0x1, 0x1);
        gbc.writeMem(0xa115, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa123);
        EXPECT(gbc.pc(), 0xa117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa115), 0xcb);
        EXPECT(gbc.readMem(0xa116), 0x47);
        // CB 47 0099
        gbc.setState(0xe185, 0x62da, 0xc5c0, 0xf03e, 0x29d, 0xae42, 0x0, 0x0);
        gbc.writeMem(0xe185, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x62da);
        EXPECT(gbc.pc(), 0xe187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe185), 0xcb);
        EXPECT(gbc.readMem(0xe186), 0x47);
        // CB 47 009A
        gbc.setState(0x1dc4, 0xc212, 0x78c0, 0x5c48, 0x665e, 0xb597, 0x0, 0x1);
        gbc.writeMem(0x1dc4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc212);
        EXPECT(gbc.pc(), 0x1dc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 009B
        gbc.setState(0x4e67, 0xca6, 0x9450, 0x5ad8, 0x25a9, 0xc802, 0x0, 0x1);
        gbc.writeMem(0x4e67, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xca6);
        EXPECT(gbc.pc(), 0x4e69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 009C
        gbc.setState(0xc359, 0x4c4b, 0xc780, 0x46, 0x17fc, 0xff28, 0x1, 0x0);
        gbc.writeMem(0xc359, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4c4b);
        EXPECT(gbc.pc(), 0xc35b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc359), 0xcb);
        EXPECT(gbc.readMem(0xc35a), 0x47);
        // CB 47 009D
        gbc.setState(0xdaed, 0x6e7c, 0x3ca0, 0xd8ed, 0xe33c, 0x7725, 0x1, 0x0);
        gbc.writeMem(0xdaed, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6e7c);
        EXPECT(gbc.pc(), 0xdaef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaed), 0xcb);
        EXPECT(gbc.readMem(0xdaee), 0x47);
        // CB 47 009E
        gbc.setState(0x7532, 0x1ab0, 0xbef0, 0xae15, 0xf68e, 0xa9cb, 0x0, 0x0);
        gbc.writeMem(0x7532, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1ab0);
        EXPECT(gbc.pc(), 0x7534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 009F
        gbc.setState(0x35cf, 0xfa4, 0x2e60, 0x20dc, 0x1347, 0x9a44, 0x1, 0x0);
        gbc.writeMem(0x35cf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfa4);
        EXPECT(gbc.pc(), 0x35d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00A0
        gbc.setState(0x56bf, 0xabf1, 0xbd0, 0x9052, 0xe39d, 0xd1d, 0x1, 0x0);
        gbc.writeMem(0x56bf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xabf1);
        EXPECT(gbc.pc(), 0x56c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00A1
        gbc.setState(0x48b3, 0x582a, 0x4220, 0x7750, 0x84e8, 0x6e66, 0x1, 0x1);
        gbc.writeMem(0x48b3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x582a);
        EXPECT(gbc.pc(), 0x48b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00A2
        gbc.setState(0x3a95, 0x629e, 0x9f0, 0xf868, 0xcd83, 0x1bc0, 0x0, 0x1);
        gbc.writeMem(0x3a95, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x629e);
        EXPECT(gbc.pc(), 0x3a97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00A3
        gbc.setState(0x54c0, 0x800f, 0x1380, 0x88f, 0x629c, 0xc766, 0x0, 0x1);
        gbc.writeMem(0x54c0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x800f);
        EXPECT(gbc.pc(), 0x54c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00A4
        gbc.setState(0x996f, 0xf147, 0x7e90, 0x4a4a, 0xe63e, 0x1863, 0x0, 0x0);
        gbc.writeMem(0x996f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf147);
        EXPECT(gbc.pc(), 0x9971);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x996f), 0xcb);
        EXPECT(gbc.readMem(0x9970), 0x47);
        // CB 47 00A5
        gbc.setState(0xb032, 0x3d8e, 0x21c0, 0xd12d, 0x7429, 0x5827, 0x0, 0x0);
        gbc.writeMem(0xb032, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3d8e);
        EXPECT(gbc.pc(), 0xb034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb032), 0xcb);
        EXPECT(gbc.readMem(0xb033), 0x47);
        // CB 47 00A6
        gbc.setState(0x1f81, 0x3bc8, 0xd530, 0xd748, 0xe44f, 0x3332, 0x0, 0x1);
        gbc.writeMem(0x1f81, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3bc8);
        EXPECT(gbc.pc(), 0x1f83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00A7
        gbc.setState(0x9c17, 0xb729, 0x9610, 0x7fc, 0x6c1a, 0x67b6, 0x1, 0x0);
        gbc.writeMem(0x9c17, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb729);
        EXPECT(gbc.pc(), 0x9c19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c17), 0xcb);
        EXPECT(gbc.readMem(0x9c18), 0x47);
        // CB 47 00A8
        gbc.setState(0x7e5, 0x26d2, 0x1890, 0x24d4, 0x7c0, 0x818a, 0x1, 0x1);
        gbc.writeMem(0x7e5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x26d2);
        EXPECT(gbc.pc(), 0x7e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00A9
        gbc.setState(0x1da6, 0x88de, 0xb840, 0x9542, 0x4d95, 0x3bc, 0x0, 0x0);
        gbc.writeMem(0x1da6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x88de);
        EXPECT(gbc.pc(), 0x1da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00AA
        gbc.setState(0x44f8, 0x8c13, 0x2880, 0x535e, 0x578, 0x43cd, 0x0, 0x1);
        gbc.writeMem(0x44f8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8c13);
        EXPECT(gbc.pc(), 0x44fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00AB
        gbc.setState(0xe4be, 0xfcd9, 0xf870, 0xe954, 0x30c7, 0x6f4, 0x0, 0x0);
        gbc.writeMem(0xe4be, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfcd9);
        EXPECT(gbc.pc(), 0xe4c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4be), 0xcb);
        EXPECT(gbc.readMem(0xe4bf), 0x47);
        // CB 47 00AC
        gbc.setState(0xd804, 0x4eb4, 0xacb0, 0x96c0, 0xdb3d, 0xa007, 0x0, 0x1);
        gbc.writeMem(0xd804, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4eb4);
        EXPECT(gbc.pc(), 0xd806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd804), 0xcb);
        EXPECT(gbc.readMem(0xd805), 0x47);
        // CB 47 00AD
        gbc.setState(0x2927, 0xd62d, 0xa640, 0xff22, 0xe5ae, 0x7ca5, 0x1, 0x0);
        gbc.writeMem(0x2927, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd62d);
        EXPECT(gbc.pc(), 0x2929);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00AE
        gbc.setState(0x1bbe, 0x17b7, 0x52a0, 0x33b7, 0x219c, 0x92d7, 0x1, 0x0);
        gbc.writeMem(0x1bbe, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x17b7);
        EXPECT(gbc.pc(), 0x1bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00AF
        gbc.setState(0xd04e, 0x1309, 0x4f30, 0x692, 0xec4f, 0xa9e5, 0x1, 0x0);
        gbc.writeMem(0xd04e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1309);
        EXPECT(gbc.pc(), 0xd050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd04e), 0xcb);
        EXPECT(gbc.readMem(0xd04f), 0x47);
        // CB 47 00B0
        gbc.setState(0x41a8, 0x206d, 0x540, 0x972a, 0x47ee, 0x43b0, 0x0, 0x1);
        gbc.writeMem(0x41a8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x206d);
        EXPECT(gbc.pc(), 0x41aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00B1
        gbc.setState(0x4c22, 0xa3ca, 0x5ab0, 0xffd7, 0x3fd, 0x7381, 0x0, 0x1);
        gbc.writeMem(0x4c22, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa3ca);
        EXPECT(gbc.pc(), 0x4c24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00B2
        gbc.setState(0x76fb, 0x2f98, 0x14d0, 0x52d8, 0x9aa2, 0xf981, 0x1, 0x0);
        gbc.writeMem(0x76fb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x2f98);
        EXPECT(gbc.pc(), 0x76fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00B3
        gbc.setState(0x78f3, 0xbd6f, 0xf9f0, 0x60ee, 0x4376, 0x7de4, 0x1, 0x1);
        gbc.writeMem(0x78f3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xbd6f);
        EXPECT(gbc.pc(), 0x78f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00B4
        gbc.setState(0xa516, 0xa73f, 0xb130, 0xf332, 0x222d, 0x4ea4, 0x0, 0x0);
        gbc.writeMem(0xa516, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa73f);
        EXPECT(gbc.pc(), 0xa518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa516), 0xcb);
        EXPECT(gbc.readMem(0xa517), 0x47);
        // CB 47 00B5
        gbc.setState(0x5428, 0x342, 0xc00, 0x5b72, 0x3061, 0x9f1d, 0x0, 0x0);
        gbc.writeMem(0x5428, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x342);
        EXPECT(gbc.pc(), 0x542a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00B6
        gbc.setState(0xd152, 0x441c, 0x7bf0, 0xcc6e, 0x72e, 0xce91, 0x1, 0x1);
        gbc.writeMem(0xd152, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x441c);
        EXPECT(gbc.pc(), 0xd154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd152), 0xcb);
        EXPECT(gbc.readMem(0xd153), 0x47);
        // CB 47 00B8
        gbc.setState(0x610c, 0x2ffa, 0x6010, 0x2aa1, 0xb052, 0x87ba, 0x0, 0x0);
        gbc.writeMem(0x610c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2ffa);
        EXPECT(gbc.pc(), 0x610e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00B9
        gbc.setState(0x15fe, 0xe15b, 0x7d0, 0xad0c, 0x9d25, 0x8da7, 0x0, 0x0);
        gbc.writeMem(0x15fe, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe15b);
        EXPECT(gbc.pc(), 0x1600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00BB
        gbc.setState(0xc7f2, 0x9a64, 0x310, 0x8079, 0x4a10, 0x1b92, 0x0, 0x1);
        gbc.writeMem(0xc7f2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9a64);
        EXPECT(gbc.pc(), 0xc7f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7f2), 0xcb);
        EXPECT(gbc.readMem(0xc7f3), 0x47);
        // CB 47 00BC
        gbc.setState(0x9db2, 0x44a, 0xa1c0, 0x6018, 0xd151, 0x3dc4, 0x0, 0x0);
        gbc.writeMem(0x9db2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x44a);
        EXPECT(gbc.pc(), 0x9db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db2), 0xcb);
        EXPECT(gbc.readMem(0x9db3), 0x47);
        // CB 47 00BD
        gbc.setState(0xdf06, 0x17e8, 0x1860, 0x6c90, 0x7434, 0xb35a, 0x1, 0x0);
        gbc.writeMem(0xdf06, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x17e8);
        EXPECT(gbc.pc(), 0xdf08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf06), 0xcb);
        EXPECT(gbc.readMem(0xdf07), 0x47);
        // CB 47 00BE
        gbc.setState(0x149d, 0x1bfe, 0x35e0, 0xa77f, 0xe92a, 0x5722, 0x1, 0x1);
        gbc.writeMem(0x149d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1bfe);
        EXPECT(gbc.pc(), 0x149f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00BF
        gbc.setState(0x315d, 0x931c, 0xaaa0, 0x48a1, 0x36f7, 0x912c, 0x0, 0x1);
        gbc.writeMem(0x315d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x931c);
        EXPECT(gbc.pc(), 0x315f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00C0
        gbc.setState(0xd855, 0x252c, 0xebf0, 0x1651, 0x8b49, 0x37af, 0x0, 0x1);
        gbc.writeMem(0xd855, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x252c);
        EXPECT(gbc.pc(), 0xd857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd855), 0xcb);
        EXPECT(gbc.readMem(0xd856), 0x47);
        // CB 47 00C1
        gbc.setState(0x20d, 0xf577, 0x5050, 0xe379, 0x80df, 0x9697, 0x0, 0x0);
        gbc.writeMem(0x20d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf577);
        EXPECT(gbc.pc(), 0x20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00C2
        gbc.setState(0x9dd0, 0xae18, 0x7fa0, 0xc6bc, 0xa013, 0x9994, 0x1, 0x0);
        gbc.writeMem(0x9dd0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xae18);
        EXPECT(gbc.pc(), 0x9dd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd0), 0xcb);
        EXPECT(gbc.readMem(0x9dd1), 0x47);
        // CB 47 00C3
        gbc.setState(0x1a27, 0xefc4, 0x4400, 0x95d1, 0xe84e, 0x1731, 0x1, 0x1);
        gbc.writeMem(0x1a27, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xefc4);
        EXPECT(gbc.pc(), 0x1a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00C4
        gbc.setState(0xc468, 0x3115, 0xab60, 0xcdf2, 0xbe70, 0x982, 0x0, 0x0);
        gbc.writeMem(0xc468, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3115);
        EXPECT(gbc.pc(), 0xc46a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc468), 0xcb);
        EXPECT(gbc.readMem(0xc469), 0x47);
        // CB 47 00C5
        gbc.setState(0x3c2e, 0x8097, 0xab10, 0xc1b5, 0x2b2b, 0xd82, 0x0, 0x0);
        gbc.writeMem(0x3c2e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8097);
        EXPECT(gbc.pc(), 0x3c30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00C7
        gbc.setState(0x4efd, 0x8bee, 0x4b60, 0xd1f4, 0xaf1c, 0xf671, 0x0, 0x1);
        gbc.writeMem(0x4efd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8bee);
        EXPECT(gbc.pc(), 0x4eff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00C8
        gbc.setState(0x2e62, 0xc01d, 0xaa50, 0x7282, 0xee99, 0xb1aa, 0x1, 0x0);
        gbc.writeMem(0x2e62, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc01d);
        EXPECT(gbc.pc(), 0x2e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00C9
        gbc.setState(0xec0e, 0x863e, 0xfdd0, 0xdf75, 0x54dd, 0xa993, 0x0, 0x0);
        gbc.writeMem(0xec0e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x863e);
        EXPECT(gbc.pc(), 0xec10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec0e), 0xcb);
        EXPECT(gbc.readMem(0xec0f), 0x47);
        // CB 47 00CA
        gbc.setState(0x6abd, 0xa115, 0xa640, 0x467b, 0x307d, 0x421, 0x1, 0x0);
        gbc.writeMem(0x6abd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa115);
        EXPECT(gbc.pc(), 0x6abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00CB
        gbc.setState(0xc0f1, 0xdff3, 0x18a0, 0xeb1a, 0xb33, 0xf172, 0x0, 0x1);
        gbc.writeMem(0xc0f1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xdff3);
        EXPECT(gbc.pc(), 0xc0f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0f1), 0xcb);
        EXPECT(gbc.readMem(0xc0f2), 0x47);
        // CB 47 00CC
        gbc.setState(0x691b, 0xd918, 0x2980, 0x1096, 0x85ab, 0x8a85, 0x1, 0x1);
        gbc.writeMem(0x691b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd918);
        EXPECT(gbc.pc(), 0x691d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00CD
        gbc.setState(0xec78, 0x8853, 0x7d90, 0xd2bb, 0xe160, 0x4109, 0x1, 0x1);
        gbc.writeMem(0xec78, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8853);
        EXPECT(gbc.pc(), 0xec7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec78), 0xcb);
        EXPECT(gbc.readMem(0xec79), 0x47);
        // CB 47 00CE
        gbc.setState(0x871b, 0xf071, 0x8d50, 0xf31d, 0x7ee1, 0x263, 0x1, 0x1);
        gbc.writeMem(0x871b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf071);
        EXPECT(gbc.pc(), 0x871d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x871b), 0xcb);
        EXPECT(gbc.readMem(0x871c), 0x47);
        // CB 47 00D0
        gbc.setState(0xc0e, 0x3bdf, 0x8200, 0xbfdf, 0x5ed7, 0x7af6, 0x1, 0x0);
        gbc.writeMem(0xc0e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3bdf);
        EXPECT(gbc.pc(), 0xc10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00D1
        gbc.setState(0x9ea8, 0xf475, 0xdee0, 0xadad, 0xc381, 0xaed3, 0x0, 0x0);
        gbc.writeMem(0x9ea8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf475);
        EXPECT(gbc.pc(), 0x9eaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea8), 0xcb);
        EXPECT(gbc.readMem(0x9ea9), 0x47);
        // CB 47 00D2
        gbc.setState(0xe18d, 0x298f, 0x83e0, 0x6e71, 0xad78, 0x6e5a, 0x1, 0x1);
        gbc.writeMem(0xe18d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x298f);
        EXPECT(gbc.pc(), 0xe18f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe18d), 0xcb);
        EXPECT(gbc.readMem(0xe18e), 0x47);
        // CB 47 00D3
        gbc.setState(0x2d1e, 0x661, 0xa3b0, 0xac9a, 0x86c2, 0x3efc, 0x0, 0x1);
        gbc.writeMem(0x2d1e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x661);
        EXPECT(gbc.pc(), 0x2d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00D4
        gbc.setState(0xa801, 0x58ea, 0xd700, 0x3e09, 0xdd26, 0xa724, 0x1, 0x1);
        gbc.writeMem(0xa801, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x58ea);
        EXPECT(gbc.pc(), 0xa803);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa801), 0xcb);
        EXPECT(gbc.readMem(0xa802), 0x47);
        // CB 47 00D5
        gbc.setState(0x671b, 0xdc46, 0xf810, 0x84e1, 0x59e9, 0x64cd, 0x0, 0x1);
        gbc.writeMem(0x671b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xdc46);
        EXPECT(gbc.pc(), 0x671d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00D6
        gbc.setState(0xa00c, 0x437c, 0x1f00, 0x8b3f, 0x2a77, 0x49f1, 0x0, 0x1);
        gbc.writeMem(0xa00c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x437c);
        EXPECT(gbc.pc(), 0xa00e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa00c), 0xcb);
        EXPECT(gbc.readMem(0xa00d), 0x47);
        // CB 47 00D7
        gbc.setState(0xaba, 0x2e70, 0x28a0, 0x77c0, 0x53e6, 0x1339, 0x1, 0x0);
        gbc.writeMem(0xaba, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2e70);
        EXPECT(gbc.pc(), 0xabc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00D8
        gbc.setState(0x4ad3, 0x5b45, 0xfae0, 0x8cf4, 0x68d9, 0x989c, 0x0, 0x0);
        gbc.writeMem(0x4ad3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5b45);
        EXPECT(gbc.pc(), 0x4ad5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00D9
        gbc.setState(0x1274, 0x4a5e, 0xaed0, 0xd284, 0xeec3, 0xf51b, 0x0, 0x1);
        gbc.writeMem(0x1274, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4a5e);
        EXPECT(gbc.pc(), 0x1276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00DA
        gbc.setState(0x595b, 0x7c48, 0xccf0, 0xa876, 0x921, 0xc038, 0x1, 0x1);
        gbc.writeMem(0x595b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7c48);
        EXPECT(gbc.pc(), 0x595d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00DB
        gbc.setState(0x8d4, 0xd128, 0x2390, 0xcf20, 0xb0be, 0x337c, 0x0, 0x0);
        gbc.writeMem(0x8d4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd128);
        EXPECT(gbc.pc(), 0x8d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00DC
        gbc.setState(0xa6aa, 0xe88a, 0x5920, 0xc5d7, 0xf874, 0x685, 0x0, 0x1);
        gbc.writeMem(0xa6aa, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe88a);
        EXPECT(gbc.pc(), 0xa6ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6aa), 0xcb);
        EXPECT(gbc.readMem(0xa6ab), 0x47);
        // CB 47 00DD
        gbc.setState(0xcb3f, 0x34ae, 0xe4c0, 0x6640, 0x17ff, 0xceaf, 0x0, 0x1);
        gbc.writeMem(0xcb3f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x34ae);
        EXPECT(gbc.pc(), 0xcb41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb3f), 0xcb);
        EXPECT(gbc.readMem(0xcb40), 0x47);
        // CB 47 00DE
        gbc.setState(0x4ee9, 0x8af2, 0xce40, 0x7366, 0x3428, 0x49ce, 0x0, 0x1);
        gbc.writeMem(0x4ee9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8af2);
        EXPECT(gbc.pc(), 0x4eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00DF
        gbc.setState(0x5cf0, 0x5bd0, 0xffa0, 0xc1a8, 0x1f6c, 0x795e, 0x1, 0x0);
        gbc.writeMem(0x5cf0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5bd0);
        EXPECT(gbc.pc(), 0x5cf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00E0
        gbc.setState(0x948c, 0x3bb5, 0xec10, 0xed70, 0xdb54, 0x407, 0x1, 0x0);
        gbc.writeMem(0x948c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3bb5);
        EXPECT(gbc.pc(), 0x948e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x948c), 0xcb);
        EXPECT(gbc.readMem(0x948d), 0x47);
        // CB 47 00E1
        gbc.setState(0x77a9, 0xf76, 0xc360, 0xca7b, 0xdaac, 0xde07, 0x0, 0x0);
        gbc.writeMem(0x77a9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf76);
        EXPECT(gbc.pc(), 0x77ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00E2
        gbc.setState(0x4064, 0xee7a, 0x93a0, 0x77d2, 0x1a29, 0xb0b1, 0x1, 0x1);
        gbc.writeMem(0x4064, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xee7a);
        EXPECT(gbc.pc(), 0x4066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00E3
        gbc.setState(0x207c, 0x61b, 0x4120, 0x8f6a, 0xc19a, 0x6af0, 0x0, 0x1);
        gbc.writeMem(0x207c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x61b);
        EXPECT(gbc.pc(), 0x207e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00E4
        gbc.setState(0xc428, 0x2e1a, 0xc350, 0x746d, 0x67a3, 0xd94b, 0x0, 0x1);
        gbc.writeMem(0xc428, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2e1a);
        EXPECT(gbc.pc(), 0xc42a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc428), 0xcb);
        EXPECT(gbc.readMem(0xc429), 0x47);
        // CB 47 00E6
        gbc.setState(0x2571, 0x4e35, 0xe220, 0x3b08, 0x1a79, 0x9f58, 0x1, 0x1);
        gbc.writeMem(0x2571, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4e35);
        EXPECT(gbc.pc(), 0x2573);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00E8
        gbc.setState(0x3920, 0x6fbc, 0xd440, 0x877b, 0xc883, 0xe447, 0x1, 0x0);
        gbc.writeMem(0x3920, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6fbc);
        EXPECT(gbc.pc(), 0x3922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00E9
        gbc.setState(0x3078, 0x43f6, 0x3750, 0xdb1a, 0xdb15, 0x2f9c, 0x1, 0x1);
        gbc.writeMem(0x3078, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x43f6);
        EXPECT(gbc.pc(), 0x307a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00EC
        gbc.setState(0x5300, 0x7eed, 0x3f80, 0xcf11, 0xc403, 0x9caa, 0x1, 0x0);
        gbc.writeMem(0x5300, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7eed);
        EXPECT(gbc.pc(), 0x5302);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00ED
        gbc.setState(0x9e78, 0xf404, 0xc5e0, 0x5003, 0x1281, 0xfa7c, 0x1, 0x1);
        gbc.writeMem(0x9e78, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf404);
        EXPECT(gbc.pc(), 0x9e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e78), 0xcb);
        EXPECT(gbc.readMem(0x9e79), 0x47);
        // CB 47 00EE
        gbc.setState(0x228b, 0x32e4, 0x6df0, 0xe23f, 0x4a81, 0x288, 0x1, 0x1);
        gbc.writeMem(0x228b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x32e4);
        EXPECT(gbc.pc(), 0x228d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00EF
        gbc.setState(0xcbb2, 0xea73, 0xc980, 0x3d6e, 0x76f5, 0x4965, 0x0, 0x0);
        gbc.writeMem(0xcbb2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xea73);
        EXPECT(gbc.pc(), 0xcbb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb2), 0xcb);
        EXPECT(gbc.readMem(0xcbb3), 0x47);
        // CB 47 00F0
        gbc.setState(0xe227, 0x130e, 0xb5d0, 0xbe3a, 0x5884, 0x33ac, 0x0, 0x0);
        gbc.writeMem(0xe227, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x130e);
        EXPECT(gbc.pc(), 0xe229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe227), 0xcb);
        EXPECT(gbc.readMem(0xe228), 0x47);
        // CB 47 00F1
        gbc.setState(0x50ee, 0xd3fa, 0x90, 0x2114, 0xd654, 0x6401, 0x1, 0x1);
        gbc.writeMem(0x50ee, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd3fa);
        EXPECT(gbc.pc(), 0x50f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00F2
        gbc.setState(0x3fa7, 0xb76e, 0xe030, 0x4fbb, 0x8a38, 0xeefd, 0x0, 0x0);
        gbc.writeMem(0x3fa7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb76e);
        EXPECT(gbc.pc(), 0x3fa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00F3
        gbc.setState(0xaa6d, 0x98d5, 0xe370, 0x5fc7, 0x65f9, 0xf96e, 0x1, 0x0);
        gbc.writeMem(0xaa6d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x98d5);
        EXPECT(gbc.pc(), 0xaa6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa6d), 0xcb);
        EXPECT(gbc.readMem(0xaa6e), 0x47);
        // CB 47 00F4
        gbc.setState(0x5756, 0x683f, 0xb7c0, 0xc227, 0x7ec4, 0x89e, 0x1, 0x0);
        gbc.writeMem(0x5756, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x683f);
        EXPECT(gbc.pc(), 0x5758);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00F5
        gbc.setState(0x7aeb, 0x43df, 0xf870, 0x2ce0, 0x996f, 0x4c8c, 0x1, 0x0);
        gbc.writeMem(0x7aeb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x43df);
        EXPECT(gbc.pc(), 0x7aed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00F6
        gbc.setState(0x2de8, 0xd0f4, 0x53f0, 0x4193, 0x4db6, 0x4ef6, 0x0, 0x1);
        gbc.writeMem(0x2de8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd0f4);
        EXPECT(gbc.pc(), 0x2dea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00F7
        gbc.setState(0x1e33, 0x4455, 0xe8b0, 0x5fff, 0x501d, 0xb027, 0x0, 0x1);
        gbc.writeMem(0x1e33, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4455);
        EXPECT(gbc.pc(), 0x1e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 00F8
        gbc.setState(0x97c7, 0x202f, 0x4f20, 0xbe3a, 0xf571, 0xe853, 0x0, 0x1);
        gbc.writeMem(0x97c7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x202f);
        EXPECT(gbc.pc(), 0x97c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c7), 0xcb);
        EXPECT(gbc.readMem(0x97c8), 0x47);
        // CB 47 00FA
        gbc.setState(0x270e, 0x9672, 0xe6e0, 0x3b9a, 0x9861, 0xb7de, 0x1, 0x1);
        gbc.writeMem(0x270e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9672);
        EXPECT(gbc.pc(), 0x2710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00FB
        gbc.setState(0x7a69, 0x90ae, 0x3ee0, 0x9b5b, 0x704e, 0x81c9, 0x1, 0x0);
        gbc.writeMem(0x7a69, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x90ae);
        EXPECT(gbc.pc(), 0x7a6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00FC
        gbc.setState(0xa3cb, 0x608e, 0xdc50, 0xda0b, 0x4b72, 0x8b41, 0x0, 0x0);
        gbc.writeMem(0xa3cb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x608e);
        EXPECT(gbc.pc(), 0xa3cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3cb), 0xcb);
        EXPECT(gbc.readMem(0xa3cc), 0x47);
        // CB 47 00FE
        gbc.setState(0x1177, 0x8081, 0x6000, 0x6074, 0x40cb, 0x4929, 0x1, 0x1);
        gbc.writeMem(0x1177, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8081);
        EXPECT(gbc.pc(), 0x1179);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 00FF
        gbc.setState(0x9da0, 0x4045, 0xe4e0, 0x80ce, 0x1ff0, 0x4036, 0x1, 0x0);
        gbc.writeMem(0x9da0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4045);
        EXPECT(gbc.pc(), 0x9da2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da0), 0xcb);
        EXPECT(gbc.readMem(0x9da1), 0x47);
        // CB 47 0100
        gbc.setState(0xcf20, 0xec9, 0x2c20, 0xc4bf, 0xa1f, 0x66c6, 0x1, 0x0);
        gbc.writeMem(0xcf20, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xec9);
        EXPECT(gbc.pc(), 0xcf22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf20), 0xcb);
        EXPECT(gbc.readMem(0xcf21), 0x47);
        // CB 47 0101
        gbc.setState(0xa947, 0xa0ee, 0xbe40, 0xc043, 0x690b, 0x8b45, 0x1, 0x0);
        gbc.writeMem(0xa947, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa0ee);
        EXPECT(gbc.pc(), 0xa949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa947), 0xcb);
        EXPECT(gbc.readMem(0xa948), 0x47);
        // CB 47 0102
        gbc.setState(0x197c, 0xd06a, 0x3690, 0x432e, 0x2eca, 0x8b68, 0x0, 0x1);
        gbc.writeMem(0x197c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd06a);
        EXPECT(gbc.pc(), 0x197e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0103
        gbc.setState(0x4657, 0x8331, 0x8320, 0xd94a, 0x1921, 0xe985, 0x0, 0x1);
        gbc.writeMem(0x4657, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8331);
        EXPECT(gbc.pc(), 0x4659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0104
        gbc.setState(0x243d, 0x459e, 0x3890, 0x5ec0, 0x9578, 0x7225, 0x1, 0x1);
        gbc.writeMem(0x243d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x459e);
        EXPECT(gbc.pc(), 0x243f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0105
        gbc.setState(0xc448, 0x854c, 0xb900, 0x3a21, 0xc3f3, 0x1e43, 0x0, 0x0);
        gbc.writeMem(0xc448, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x854c);
        EXPECT(gbc.pc(), 0xc44a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc448), 0xcb);
        EXPECT(gbc.readMem(0xc449), 0x47);
        // CB 47 0106
        gbc.setState(0xd758, 0xb33c, 0xb4d0, 0x1190, 0xc5d5, 0x1472, 0x1, 0x0);
        gbc.writeMem(0xd758, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb33c);
        EXPECT(gbc.pc(), 0xd75a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd758), 0xcb);
        EXPECT(gbc.readMem(0xd759), 0x47);
        // CB 47 0107
        gbc.setState(0xc12a, 0x9bdc, 0x1b20, 0xef49, 0x1f4, 0xa6f9, 0x0, 0x0);
        gbc.writeMem(0xc12a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9bdc);
        EXPECT(gbc.pc(), 0xc12c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc12a), 0xcb);
        EXPECT(gbc.readMem(0xc12b), 0x47);
        // CB 47 0108
        gbc.setState(0x188e, 0xe7c1, 0x4a90, 0x81b7, 0x82cf, 0x2e0f, 0x0, 0x1);
        gbc.writeMem(0x188e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xe7c1);
        EXPECT(gbc.pc(), 0x1890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0109
        gbc.setState(0x7ca0, 0xea22, 0xeb00, 0x78fa, 0xf887, 0x43d0, 0x1, 0x1);
        gbc.writeMem(0x7ca0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xea22);
        EXPECT(gbc.pc(), 0x7ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 010A
        gbc.setState(0xec76, 0x6676, 0x9680, 0x4bfe, 0xfb15, 0xa70, 0x1, 0x1);
        gbc.writeMem(0xec76, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6676);
        EXPECT(gbc.pc(), 0xec78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec76), 0xcb);
        EXPECT(gbc.readMem(0xec77), 0x47);
        // CB 47 010B
        gbc.setState(0x1fb2, 0x1c2b, 0xe3a0, 0xe6f5, 0xd90b, 0x34d3, 0x1, 0x1);
        gbc.writeMem(0x1fb2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1c2b);
        EXPECT(gbc.pc(), 0x1fb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 010C
        gbc.setState(0x62ed, 0x3e56, 0x28b0, 0x9cfa, 0x1304, 0xb5f6, 0x1, 0x1);
        gbc.writeMem(0x62ed, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3e56);
        EXPECT(gbc.pc(), 0x62ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 010D
        gbc.setState(0x54e2, 0x611b, 0xb250, 0x8a9f, 0x3aa3, 0x37e9, 0x0, 0x0);
        gbc.writeMem(0x54e2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x611b);
        EXPECT(gbc.pc(), 0x54e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 010E
        gbc.setState(0x267, 0xd4e1, 0x5090, 0x59db, 0x9d0, 0xda3b, 0x1, 0x1);
        gbc.writeMem(0x267, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd4e1);
        EXPECT(gbc.pc(), 0x269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 010F
        gbc.setState(0x5905, 0x434, 0xea80, 0xf40a, 0x1de1, 0xbb14, 0x1, 0x0);
        gbc.writeMem(0x5905, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x434);
        EXPECT(gbc.pc(), 0x5907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0111
        gbc.setState(0x5584, 0xc242, 0xd970, 0xe342, 0x2d1a, 0x43e5, 0x1, 0x1);
        gbc.writeMem(0x5584, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc242);
        EXPECT(gbc.pc(), 0x5586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0112
        gbc.setState(0x24f5, 0x8fa3, 0x81f0, 0xa887, 0xe05e, 0xae66, 0x0, 0x0);
        gbc.writeMem(0x24f5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8fa3);
        EXPECT(gbc.pc(), 0x24f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0113
        gbc.setState(0x7da8, 0x6795, 0x8760, 0x9a37, 0xd68, 0x22ca, 0x1, 0x1);
        gbc.writeMem(0x7da8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6795);
        EXPECT(gbc.pc(), 0x7daa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0114
        gbc.setState(0xe04f, 0x7f1c, 0xb780, 0x8c06, 0xe1a9, 0x9c13, 0x0, 0x0);
        gbc.writeMem(0xe04f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7f1c);
        EXPECT(gbc.pc(), 0xe051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04f), 0xcb);
        EXPECT(gbc.readMem(0xe050), 0x47);
        // CB 47 0115
        gbc.setState(0xdf2b, 0xa33, 0x34b0, 0xf1ee, 0x875d, 0xf3ef, 0x1, 0x0);
        gbc.writeMem(0xdf2b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xa33);
        EXPECT(gbc.pc(), 0xdf2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2b), 0xcb);
        EXPECT(gbc.readMem(0xdf2c), 0x47);
        // CB 47 0116
        gbc.setState(0x74f5, 0x16b4, 0x4510, 0xbbda, 0x6814, 0xd8e, 0x1, 0x0);
        gbc.writeMem(0x74f5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x16b4);
        EXPECT(gbc.pc(), 0x74f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0117
        gbc.setState(0x13d0, 0xb711, 0x7b50, 0x4c64, 0xe556, 0xfebf, 0x0, 0x0);
        gbc.writeMem(0x13d0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb711);
        EXPECT(gbc.pc(), 0x13d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0118
        gbc.setState(0xa7e2, 0xa83c, 0x440, 0x1644, 0x543e, 0xd62d, 0x0, 0x0);
        gbc.writeMem(0xa7e2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa83c);
        EXPECT(gbc.pc(), 0xa7e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e2), 0xcb);
        EXPECT(gbc.readMem(0xa7e3), 0x47);
        // CB 47 0119
        gbc.setState(0xc99a, 0x6c3a, 0xf360, 0x516e, 0xd513, 0x6094, 0x1, 0x0);
        gbc.writeMem(0xc99a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6c3a);
        EXPECT(gbc.pc(), 0xc99c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc99a), 0xcb);
        EXPECT(gbc.readMem(0xc99b), 0x47);
        // CB 47 011A
        gbc.setState(0x425d, 0xbe66, 0x69b0, 0x18ad, 0xe0c2, 0xfa6a, 0x1, 0x1);
        gbc.writeMem(0x425d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xbe66);
        EXPECT(gbc.pc(), 0x425f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 011B
        gbc.setState(0x2cd2, 0x6e2, 0xcb30, 0xf632, 0xe902, 0x291d, 0x0, 0x1);
        gbc.writeMem(0x2cd2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6e2);
        EXPECT(gbc.pc(), 0x2cd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 011C
        gbc.setState(0xadb1, 0xe232, 0x7670, 0x6441, 0xc99f, 0x17fd, 0x1, 0x1);
        gbc.writeMem(0xadb1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe232);
        EXPECT(gbc.pc(), 0xadb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb1), 0xcb);
        EXPECT(gbc.readMem(0xadb2), 0x47);
        // CB 47 011F
        gbc.setState(0x3bbe, 0x5ba7, 0x3ce0, 0xb818, 0xb093, 0xee79, 0x0, 0x1);
        gbc.writeMem(0x3bbe, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5ba7);
        EXPECT(gbc.pc(), 0x3bc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0120
        gbc.setState(0x68b9, 0xff49, 0x7c40, 0xdb45, 0x476d, 0x2085, 0x0, 0x0);
        gbc.writeMem(0x68b9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xff49);
        EXPECT(gbc.pc(), 0x68bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0121
        gbc.setState(0x9ab2, 0x414f, 0x5420, 0x12a8, 0xae18, 0xe6da, 0x0, 0x0);
        gbc.writeMem(0x9ab2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x414f);
        EXPECT(gbc.pc(), 0x9ab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab2), 0xcb);
        EXPECT(gbc.readMem(0x9ab3), 0x47);
        // CB 47 0122
        gbc.setState(0xd02d, 0x2860, 0x8a70, 0x8106, 0xd71b, 0xb499, 0x0, 0x0);
        gbc.writeMem(0xd02d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2860);
        EXPECT(gbc.pc(), 0xd02f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd02d), 0xcb);
        EXPECT(gbc.readMem(0xd02e), 0x47);
        // CB 47 0123
        gbc.setState(0x9f5d, 0x1ed9, 0x2780, 0xaab1, 0xd70e, 0x6fb4, 0x1, 0x1);
        gbc.writeMem(0x9f5d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1ed9);
        EXPECT(gbc.pc(), 0x9f5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5d), 0xcb);
        EXPECT(gbc.readMem(0x9f5e), 0x47);
        // CB 47 0124
        gbc.setState(0xa269, 0x1f8d, 0x980, 0x8250, 0x8c21, 0x6555, 0x0, 0x1);
        gbc.writeMem(0xa269, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1f8d);
        EXPECT(gbc.pc(), 0xa26b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa269), 0xcb);
        EXPECT(gbc.readMem(0xa26a), 0x47);
        // CB 47 0125
        gbc.setState(0x32a3, 0x14bb, 0xab00, 0x8f83, 0xd9b6, 0xcd24, 0x0, 0x1);
        gbc.writeMem(0x32a3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x14bb);
        EXPECT(gbc.pc(), 0x32a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0126
        gbc.setState(0xad8a, 0xcc24, 0x7830, 0x9ed1, 0xd12c, 0x7b68, 0x0, 0x1);
        gbc.writeMem(0xad8a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xcc24);
        EXPECT(gbc.pc(), 0xad8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad8a), 0xcb);
        EXPECT(gbc.readMem(0xad8b), 0x47);
        // CB 47 0127
        gbc.setState(0x9f44, 0x590e, 0xb170, 0x5c66, 0xb720, 0x7745, 0x1, 0x0);
        gbc.writeMem(0x9f44, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x590e);
        EXPECT(gbc.pc(), 0x9f46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f44), 0xcb);
        EXPECT(gbc.readMem(0x9f45), 0x47);
        // CB 47 0128
        gbc.setState(0x76c3, 0x733a, 0xda20, 0x9d93, 0x26d0, 0x7a02, 0x1, 0x1);
        gbc.writeMem(0x76c3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x733a);
        EXPECT(gbc.pc(), 0x76c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0129
        gbc.setState(0x6b38, 0x403a, 0x1170, 0xb2cb, 0x34e2, 0xd143, 0x0, 0x0);
        gbc.writeMem(0x6b38, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x403a);
        EXPECT(gbc.pc(), 0x6b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 012A
        gbc.setState(0x1a19, 0x8d9c, 0x8e80, 0x583, 0x1dd, 0x8a47, 0x1, 0x1);
        gbc.writeMem(0x1a19, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8d9c);
        EXPECT(gbc.pc(), 0x1a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 012B
        gbc.setState(0x9108, 0x443a, 0x3c70, 0x48bd, 0x5feb, 0x5c3d, 0x0, 0x1);
        gbc.writeMem(0x9108, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x443a);
        EXPECT(gbc.pc(), 0x910a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9108), 0xcb);
        EXPECT(gbc.readMem(0x9109), 0x47);
        // CB 47 012D
        gbc.setState(0xe80f, 0x3673, 0xdaa0, 0x6c84, 0x17d8, 0xfa3a, 0x0, 0x1);
        gbc.writeMem(0xe80f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3673);
        EXPECT(gbc.pc(), 0xe811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe80f), 0xcb);
        EXPECT(gbc.readMem(0xe810), 0x47);
        // CB 47 012F
        gbc.setState(0xb1d3, 0x1611, 0xf570, 0xac88, 0x76c3, 0xb917, 0x1, 0x0);
        gbc.writeMem(0xb1d3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1611);
        EXPECT(gbc.pc(), 0xb1d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1d3), 0xcb);
        EXPECT(gbc.readMem(0xb1d4), 0x47);
        // CB 47 0130
        gbc.setState(0xce44, 0xf015, 0x9840, 0x3989, 0x74c2, 0xa25, 0x0, 0x0);
        gbc.writeMem(0xce44, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf015);
        EXPECT(gbc.pc(), 0xce46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce44), 0xcb);
        EXPECT(gbc.readMem(0xce45), 0x47);
        // CB 47 0131
        gbc.setState(0xaaf0, 0xc081, 0xd1e0, 0xa23d, 0x4e44, 0xeda8, 0x0, 0x1);
        gbc.writeMem(0xaaf0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc081);
        EXPECT(gbc.pc(), 0xaaf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf0), 0xcb);
        EXPECT(gbc.readMem(0xaaf1), 0x47);
        // CB 47 0132
        gbc.setState(0xe8bb, 0x54b8, 0xde20, 0xa9df, 0x37dc, 0xe4bf, 0x0, 0x0);
        gbc.writeMem(0xe8bb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x54b8);
        EXPECT(gbc.pc(), 0xe8bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8bb), 0xcb);
        EXPECT(gbc.readMem(0xe8bc), 0x47);
        // CB 47 0133
        gbc.setState(0x67f8, 0x2a69, 0x55a0, 0x930a, 0x62b5, 0x46c6, 0x1, 0x0);
        gbc.writeMem(0x67f8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2a69);
        EXPECT(gbc.pc(), 0x67fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0134
        gbc.setState(0x2e25, 0x8069, 0x7230, 0x2298, 0x969b, 0xf3cc, 0x0, 0x0);
        gbc.writeMem(0x2e25, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8069);
        EXPECT(gbc.pc(), 0x2e27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0135
        gbc.setState(0x5569, 0xfc41, 0xf0f0, 0x6b47, 0xaa4e, 0x62f4, 0x0, 0x0);
        gbc.writeMem(0x5569, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfc41);
        EXPECT(gbc.pc(), 0x556b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0136
        gbc.setState(0x211d, 0xadc8, 0x1f20, 0x5e81, 0x6d78, 0xf180, 0x0, 0x0);
        gbc.writeMem(0x211d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xadc8);
        EXPECT(gbc.pc(), 0x211f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0137
        gbc.setState(0x758c, 0x9d70, 0x3df0, 0xd736, 0xc7fe, 0xe0e7, 0x1, 0x0);
        gbc.writeMem(0x758c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9d70);
        EXPECT(gbc.pc(), 0x758e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0138
        gbc.setState(0xcf19, 0xf18b, 0xfba0, 0x688d, 0x21c9, 0xcd4f, 0x0, 0x0);
        gbc.writeMem(0xcf19, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf18b);
        EXPECT(gbc.pc(), 0xcf1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf19), 0xcb);
        EXPECT(gbc.readMem(0xcf1a), 0x47);
        // CB 47 0139
        gbc.setState(0x4dca, 0x6bb1, 0x6000, 0xb9e7, 0xda25, 0xffe4, 0x1, 0x1);
        gbc.writeMem(0x4dca, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6bb1);
        EXPECT(gbc.pc(), 0x4dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 013A
        gbc.setState(0xc5ce, 0x79b8, 0x31e0, 0x8769, 0x97bb, 0x22ca, 0x0, 0x0);
        gbc.writeMem(0xc5ce, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x79b8);
        EXPECT(gbc.pc(), 0xc5d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ce), 0xcb);
        EXPECT(gbc.readMem(0xc5cf), 0x47);
        // CB 47 013B
        gbc.setState(0xc171, 0x3083, 0xa6d0, 0x6751, 0x2c66, 0x3664, 0x0, 0x0);
        gbc.writeMem(0xc171, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3083);
        EXPECT(gbc.pc(), 0xc173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc171), 0xcb);
        EXPECT(gbc.readMem(0xc172), 0x47);
        // CB 47 013C
        gbc.setState(0x117, 0xb334, 0x5a30, 0xa2f0, 0x375c, 0xe8be, 0x0, 0x0);
        gbc.writeMem(0x117, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb334);
        EXPECT(gbc.pc(), 0x119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 013D
        gbc.setState(0x86f6, 0x5a48, 0xf900, 0xa18, 0xbd3c, 0x84c6, 0x0, 0x0);
        gbc.writeMem(0x86f6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x5a48);
        EXPECT(gbc.pc(), 0x86f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f6), 0xcb);
        EXPECT(gbc.readMem(0x86f7), 0x47);
        // CB 47 013E
        gbc.setState(0x3eb, 0xcc26, 0xc450, 0xf47e, 0xa85a, 0x6022, 0x1, 0x0);
        gbc.writeMem(0x3eb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xcc26);
        EXPECT(gbc.pc(), 0x3ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 013F
        gbc.setState(0x4517, 0xb5d, 0xdfa0, 0x758e, 0xb55a, 0xe0bd, 0x1, 0x0);
        gbc.writeMem(0x4517, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb5d);
        EXPECT(gbc.pc(), 0x4519);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0140
        gbc.setState(0x1b60, 0x4b49, 0xf610, 0x271a, 0xa7d0, 0x91c2, 0x1, 0x0);
        gbc.writeMem(0x1b60, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4b49);
        EXPECT(gbc.pc(), 0x1b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0141
        gbc.setState(0xae77, 0x54a9, 0x2ae0, 0x2d7c, 0x38d2, 0x874a, 0x0, 0x1);
        gbc.writeMem(0xae77, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x54a9);
        EXPECT(gbc.pc(), 0xae79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae77), 0xcb);
        EXPECT(gbc.readMem(0xae78), 0x47);
        // CB 47 0142
        gbc.setState(0x3a9b, 0x23b3, 0xa280, 0x4f8a, 0x818c, 0xa4ad, 0x0, 0x0);
        gbc.writeMem(0x3a9b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x23b3);
        EXPECT(gbc.pc(), 0x3a9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0143
        gbc.setState(0x5570, 0xbaf8, 0x3f30, 0x514a, 0x5029, 0xb6f, 0x0, 0x0);
        gbc.writeMem(0x5570, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xbaf8);
        EXPECT(gbc.pc(), 0x5572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0144
        gbc.setState(0x13df, 0x2b98, 0x16f0, 0xa35f, 0x8a15, 0xfe2d, 0x0, 0x0);
        gbc.writeMem(0x13df, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2b98);
        EXPECT(gbc.pc(), 0x13e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0145
        gbc.setState(0xd74f, 0x352e, 0xd530, 0x8c7e, 0xfa47, 0x4a2, 0x0, 0x1);
        gbc.writeMem(0xd74f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x352e);
        EXPECT(gbc.pc(), 0xd751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd74f), 0xcb);
        EXPECT(gbc.readMem(0xd750), 0x47);
        // CB 47 0146
        gbc.setState(0x4646, 0x5fa7, 0x57c0, 0xcc13, 0x1495, 0xf664, 0x1, 0x1);
        gbc.writeMem(0x4646, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5fa7);
        EXPECT(gbc.pc(), 0x4648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0147
        gbc.setState(0xb373, 0x16eb, 0xc960, 0x631a, 0x5214, 0x3039, 0x0, 0x1);
        gbc.writeMem(0xb373, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x16eb);
        EXPECT(gbc.pc(), 0xb375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb373), 0xcb);
        EXPECT(gbc.readMem(0xb374), 0x47);
        // CB 47 0148
        gbc.setState(0x44af, 0x5c1a, 0xf180, 0x736b, 0xf4a8, 0xda1e, 0x1, 0x0);
        gbc.writeMem(0x44af, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5c1a);
        EXPECT(gbc.pc(), 0x44b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0149
        gbc.setState(0x3a1a, 0xa959, 0x6020, 0x1c81, 0x9430, 0x417, 0x1, 0x1);
        gbc.writeMem(0x3a1a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa959);
        EXPECT(gbc.pc(), 0x3a1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 014C
        gbc.setState(0x178d, 0x2c7c, 0xe060, 0x29d6, 0xb0e8, 0x5eba, 0x0, 0x0);
        gbc.writeMem(0x178d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2c7c);
        EXPECT(gbc.pc(), 0x178f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 014D
        gbc.setState(0x2dea, 0xfbfc, 0x5a40, 0x9b29, 0xaee8, 0x8e17, 0x1, 0x0);
        gbc.writeMem(0x2dea, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfbfc);
        EXPECT(gbc.pc(), 0x2dec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 014E
        gbc.setState(0x7f54, 0x5a7, 0x5ce0, 0x8023, 0x87c, 0x8444, 0x1, 0x0);
        gbc.writeMem(0x7f54, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5a7);
        EXPECT(gbc.pc(), 0x7f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 014F
        gbc.setState(0xd11, 0xf92a, 0x8730, 0xad6d, 0xbdbf, 0x9737, 0x1, 0x0);
        gbc.writeMem(0xd11, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xf92a);
        EXPECT(gbc.pc(), 0xd13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0150
        gbc.setState(0x4c5, 0x7a39, 0x9ce0, 0xf48d, 0x837f, 0xfb2b, 0x1, 0x1);
        gbc.writeMem(0x4c5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7a39);
        EXPECT(gbc.pc(), 0x4c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0151
        gbc.setState(0x9086, 0xb526, 0x1850, 0x859b, 0x831a, 0x7488, 0x0, 0x1);
        gbc.writeMem(0x9086, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb526);
        EXPECT(gbc.pc(), 0x9088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9086), 0xcb);
        EXPECT(gbc.readMem(0x9087), 0x47);
        // CB 47 0152
        gbc.setState(0xea16, 0xc598, 0x19f0, 0xc526, 0xf366, 0xb348, 0x1, 0x1);
        gbc.writeMem(0xea16, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc598);
        EXPECT(gbc.pc(), 0xea18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea16), 0xcb);
        EXPECT(gbc.readMem(0xea17), 0x47);
        // CB 47 0153
        gbc.setState(0x2204, 0x510e, 0xd430, 0x758f, 0xf069, 0xc5fc, 0x0, 0x1);
        gbc.writeMem(0x2204, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x510e);
        EXPECT(gbc.pc(), 0x2206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0154
        gbc.setState(0x99ee, 0x321a, 0x5d80, 0x220, 0x9392, 0x2ef5, 0x0, 0x1);
        gbc.writeMem(0x99ee, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x321a);
        EXPECT(gbc.pc(), 0x99f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ee), 0xcb);
        EXPECT(gbc.readMem(0x99ef), 0x47);
        // CB 47 0155
        gbc.setState(0x4539, 0xb503, 0xb1f0, 0x9190, 0x3c24, 0x24df, 0x1, 0x1);
        gbc.writeMem(0x4539, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb503);
        EXPECT(gbc.pc(), 0x453b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0156
        gbc.setState(0x5690, 0xa63, 0xce60, 0x7b0e, 0x419d, 0x8b0, 0x0, 0x0);
        gbc.writeMem(0x5690, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa63);
        EXPECT(gbc.pc(), 0x5692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0157
        gbc.setState(0x96d1, 0x2450, 0x1aa0, 0x652, 0x5e1f, 0x530b, 0x1, 0x0);
        gbc.writeMem(0x96d1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2450);
        EXPECT(gbc.pc(), 0x96d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d1), 0xcb);
        EXPECT(gbc.readMem(0x96d2), 0x47);
        // CB 47 0158
        gbc.setState(0x17b3, 0x5d80, 0xa9c0, 0xfa1e, 0xf07, 0x4794, 0x1, 0x1);
        gbc.writeMem(0x17b3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5d80);
        EXPECT(gbc.pc(), 0x17b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0159
        gbc.setState(0x5882, 0x8b38, 0x19e0, 0x3365, 0x87f0, 0x3c7a, 0x1, 0x1);
        gbc.writeMem(0x5882, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8b38);
        EXPECT(gbc.pc(), 0x5884);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 015B
        gbc.setState(0xefc9, 0x7d07, 0xeff0, 0x7fa9, 0xd1e3, 0xb1fa, 0x0, 0x0);
        gbc.writeMem(0xefc9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7d07);
        EXPECT(gbc.pc(), 0xefcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefc9), 0xcb);
        EXPECT(gbc.readMem(0xefca), 0x47);
        // CB 47 015C
        gbc.setState(0xa76c, 0x4012, 0xa450, 0x1d9d, 0xe2e0, 0xfa28, 0x0, 0x0);
        gbc.writeMem(0xa76c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4012);
        EXPECT(gbc.pc(), 0xa76e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76c), 0xcb);
        EXPECT(gbc.readMem(0xa76d), 0x47);
        // CB 47 015D
        gbc.setState(0xd5e4, 0x42ef, 0xd720, 0xc45d, 0x6d7e, 0x7ef, 0x1, 0x0);
        gbc.writeMem(0xd5e4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x42ef);
        EXPECT(gbc.pc(), 0xd5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5e4), 0xcb);
        EXPECT(gbc.readMem(0xd5e5), 0x47);
        // CB 47 015E
        gbc.setState(0x81b6, 0x6402, 0x8da0, 0x35c5, 0x8329, 0x75f7, 0x1, 0x0);
        gbc.writeMem(0x81b6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6402);
        EXPECT(gbc.pc(), 0x81b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81b6), 0xcb);
        EXPECT(gbc.readMem(0x81b7), 0x47);
        // CB 47 015F
        gbc.setState(0x9cb, 0xc4ae, 0x3680, 0x648f, 0x69bd, 0x2c37, 0x0, 0x0);
        gbc.writeMem(0x9cb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc4ae);
        EXPECT(gbc.pc(), 0x9cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0160
        gbc.setState(0x8811, 0xb96, 0x5d10, 0xdacd, 0x7d9e, 0xafbf, 0x0, 0x0);
        gbc.writeMem(0x8811, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb96);
        EXPECT(gbc.pc(), 0x8813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8811), 0xcb);
        EXPECT(gbc.readMem(0x8812), 0x47);
        // CB 47 0161
        gbc.setState(0x54c3, 0x4272, 0x13b0, 0x8e3f, 0x4fe5, 0x18b8, 0x1, 0x0);
        gbc.writeMem(0x54c3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4272);
        EXPECT(gbc.pc(), 0x54c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0162
        gbc.setState(0xb12f, 0xca53, 0x4620, 0xcda2, 0x98d2, 0x555b, 0x1, 0x1);
        gbc.writeMem(0xb12f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xca53);
        EXPECT(gbc.pc(), 0xb131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb12f), 0xcb);
        EXPECT(gbc.readMem(0xb130), 0x47);
        // CB 47 0163
        gbc.setState(0x3627, 0x93a, 0xf230, 0xa9c2, 0x7673, 0x8500, 0x0, 0x1);
        gbc.writeMem(0x3627, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x93a);
        EXPECT(gbc.pc(), 0x3629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0164
        gbc.setState(0x3a8f, 0xc472, 0xa60, 0xa09b, 0x2580, 0xc867, 0x1, 0x0);
        gbc.writeMem(0x3a8f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc472);
        EXPECT(gbc.pc(), 0x3a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0165
        gbc.setState(0x11d1, 0x5a1f, 0x4aa0, 0x1afa, 0x58e9, 0xa497, 0x1, 0x0);
        gbc.writeMem(0x11d1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5a1f);
        EXPECT(gbc.pc(), 0x11d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0166
        gbc.setState(0x44f1, 0x3568, 0x6080, 0xa4ea, 0x16e1, 0xf48b, 0x0, 0x0);
        gbc.writeMem(0x44f1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3568);
        EXPECT(gbc.pc(), 0x44f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0167
        gbc.setState(0x2ba4, 0x5bcb, 0xbba0, 0x910b, 0x6bbb, 0x6616, 0x1, 0x1);
        gbc.writeMem(0x2ba4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5bcb);
        EXPECT(gbc.pc(), 0x2ba6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0168
        gbc.setState(0x914a, 0xd370, 0xbb20, 0x5ac2, 0x6629, 0x4155, 0x0, 0x1);
        gbc.writeMem(0x914a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xd370);
        EXPECT(gbc.pc(), 0x914c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914a), 0xcb);
        EXPECT(gbc.readMem(0x914b), 0x47);
        // CB 47 0169
        gbc.setState(0xc047, 0x8b30, 0xf180, 0xe7f2, 0x80e6, 0xf1c8, 0x0, 0x0);
        gbc.writeMem(0xc047, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8b30);
        EXPECT(gbc.pc(), 0xc049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc047), 0xcb);
        EXPECT(gbc.readMem(0xc048), 0x47);
        // CB 47 016A
        gbc.setState(0x7df8, 0xa534, 0x5960, 0x81a6, 0x3e81, 0x5809, 0x1, 0x1);
        gbc.writeMem(0x7df8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa534);
        EXPECT(gbc.pc(), 0x7dfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 016B
        gbc.setState(0xca, 0x1d58, 0x52e0, 0x1604, 0xa2fa, 0x1063, 0x1, 0x1);
        gbc.writeMem(0xca, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1d58);
        EXPECT(gbc.pc(), 0xcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 016C
        gbc.setState(0xc034, 0xa6e0, 0x29a0, 0x8357, 0x86e9, 0xaa94, 0x0, 0x1);
        gbc.writeMem(0xc034, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa6e0);
        EXPECT(gbc.pc(), 0xc036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc034), 0xcb);
        EXPECT(gbc.readMem(0xc035), 0x47);
        // CB 47 016D
        gbc.setState(0xb97b, 0xb32, 0xfcd0, 0xd28e, 0xc0d4, 0x3b8e, 0x1, 0x1);
        gbc.writeMem(0xb97b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb32);
        EXPECT(gbc.pc(), 0xb97d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb97b), 0xcb);
        EXPECT(gbc.readMem(0xb97c), 0x47);
        // CB 47 016E
        gbc.setState(0x797d, 0x7b2c, 0xe760, 0xd4df, 0xbbe9, 0x1b86, 0x0, 0x0);
        gbc.writeMem(0x797d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7b2c);
        EXPECT(gbc.pc(), 0x797f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 016F
        gbc.setState(0x40d7, 0x18d3, 0x9b70, 0x802b, 0x11b0, 0x920f, 0x0, 0x1);
        gbc.writeMem(0x40d7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x18d3);
        EXPECT(gbc.pc(), 0x40d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0170
        gbc.setState(0x692b, 0x24f, 0xae40, 0x390a, 0x27d9, 0x7987, 0x0, 0x0);
        gbc.writeMem(0x692b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x24f);
        EXPECT(gbc.pc(), 0x692d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0171
        gbc.setState(0x7df6, 0x4a22, 0x6a30, 0xe706, 0xc749, 0xa1e0, 0x1, 0x0);
        gbc.writeMem(0x7df6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4a22);
        EXPECT(gbc.pc(), 0x7df8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0172
        gbc.setState(0x9b5e, 0xfed5, 0xb5d0, 0xa818, 0xba0b, 0x75c2, 0x0, 0x1);
        gbc.writeMem(0x9b5e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xfed5);
        EXPECT(gbc.pc(), 0x9b60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b5e), 0xcb);
        EXPECT(gbc.readMem(0x9b5f), 0x47);
        // CB 47 0173
        gbc.setState(0x8156, 0xe1ae, 0x75e0, 0x4501, 0xdc4, 0xe46c, 0x0, 0x1);
        gbc.writeMem(0x8156, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe1ae);
        EXPECT(gbc.pc(), 0x8158);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8156), 0xcb);
        EXPECT(gbc.readMem(0x8157), 0x47);
        // CB 47 0174
        gbc.setState(0x715c, 0xd094, 0xdf50, 0xe336, 0xc082, 0xc8d5, 0x0, 0x0);
        gbc.writeMem(0x715c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd094);
        EXPECT(gbc.pc(), 0x715e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0175
        gbc.setState(0xb131, 0x1eea, 0x4f40, 0xf33d, 0x5c2b, 0x40ec, 0x1, 0x0);
        gbc.writeMem(0xb131, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1eea);
        EXPECT(gbc.pc(), 0xb133);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb131), 0xcb);
        EXPECT(gbc.readMem(0xb132), 0x47);
        // CB 47 0176
        gbc.setState(0x9cef, 0xd44e, 0x5c50, 0x3c77, 0x309f, 0x67b4, 0x0, 0x0);
        gbc.writeMem(0x9cef, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd44e);
        EXPECT(gbc.pc(), 0x9cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cef), 0xcb);
        EXPECT(gbc.readMem(0x9cf0), 0x47);
        // CB 47 0177
        gbc.setState(0xc668, 0xe465, 0xdb10, 0xa00a, 0x7fa3, 0x9c0d, 0x1, 0x1);
        gbc.writeMem(0xc668, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe465);
        EXPECT(gbc.pc(), 0xc66a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc668), 0xcb);
        EXPECT(gbc.readMem(0xc669), 0x47);
        // CB 47 0178
        gbc.setState(0x47fd, 0x925f, 0xbf80, 0x949d, 0xad61, 0xe689, 0x1, 0x1);
        gbc.writeMem(0x47fd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x925f);
        EXPECT(gbc.pc(), 0x47ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0179
        gbc.setState(0x9898, 0x3195, 0x17f0, 0x3150, 0x2bdf, 0xbdc3, 0x1, 0x1);
        gbc.writeMem(0x9898, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3195);
        EXPECT(gbc.pc(), 0x989a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9898), 0xcb);
        EXPECT(gbc.readMem(0x9899), 0x47);
        // CB 47 017A
        gbc.setState(0x1f80, 0x4fd2, 0xa780, 0xea64, 0x5362, 0xcddc, 0x0, 0x1);
        gbc.writeMem(0x1f80, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4fd2);
        EXPECT(gbc.pc(), 0x1f82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 017B
        gbc.setState(0x1d11, 0x5d66, 0x5fd0, 0x2611, 0xcd57, 0xfcd6, 0x0, 0x1);
        gbc.writeMem(0x1d11, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5d66);
        EXPECT(gbc.pc(), 0x1d13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 017C
        gbc.setState(0x1a91, 0x24c1, 0x42c0, 0xb7d3, 0xdb9b, 0xa786, 0x0, 0x0);
        gbc.writeMem(0x1a91, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x24c1);
        EXPECT(gbc.pc(), 0x1a93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 017D
        gbc.setState(0xb02e, 0x8c0d, 0x8e50, 0xe34b, 0x1c4, 0xf6f, 0x0, 0x0);
        gbc.writeMem(0xb02e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8c0d);
        EXPECT(gbc.pc(), 0xb030);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb02e), 0xcb);
        EXPECT(gbc.readMem(0xb02f), 0x47);
        // CB 47 017E
        gbc.setState(0xcb8a, 0x74f3, 0xdeb0, 0x882, 0x1a84, 0xb9b1, 0x0, 0x1);
        gbc.writeMem(0xcb8a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x74f3);
        EXPECT(gbc.pc(), 0xcb8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb8a), 0xcb);
        EXPECT(gbc.readMem(0xcb8b), 0x47);
        // CB 47 017F
        gbc.setState(0x14b8, 0x2f9b, 0x1400, 0xa9a9, 0x9351, 0xd95c, 0x0, 0x0);
        gbc.writeMem(0x14b8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2f9b);
        EXPECT(gbc.pc(), 0x14ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0180
        gbc.setState(0x68e4, 0x957e, 0x9f20, 0x8b1c, 0x7af0, 0xc3f9, 0x0, 0x0);
        gbc.writeMem(0x68e4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x957e);
        EXPECT(gbc.pc(), 0x68e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0181
        gbc.setState(0xbecf, 0x6987, 0x7c00, 0x14a2, 0x9a27, 0x3a9e, 0x1, 0x1);
        gbc.writeMem(0xbecf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6987);
        EXPECT(gbc.pc(), 0xbed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbecf), 0xcb);
        EXPECT(gbc.readMem(0xbed0), 0x47);
        // CB 47 0182
        gbc.setState(0x2328, 0x476, 0xa330, 0xdf83, 0xf15c, 0x9ca1, 0x0, 0x0);
        gbc.writeMem(0x2328, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x476);
        EXPECT(gbc.pc(), 0x232a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0183
        gbc.setState(0x5b93, 0xb2c, 0x18c0, 0xbbb2, 0xabea, 0xd51d, 0x0, 0x1);
        gbc.writeMem(0x5b93, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb2c);
        EXPECT(gbc.pc(), 0x5b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0184
        gbc.setState(0x9874, 0x8f76, 0x8c20, 0xa07d, 0xab0e, 0x379, 0x0, 0x1);
        gbc.writeMem(0x9874, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8f76);
        EXPECT(gbc.pc(), 0x9876);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9874), 0xcb);
        EXPECT(gbc.readMem(0x9875), 0x47);
        // CB 47 0185
        gbc.setState(0x5860, 0x9c1c, 0x32f0, 0x1886, 0xa919, 0xf1f8, 0x0, 0x0);
        gbc.writeMem(0x5860, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9c1c);
        EXPECT(gbc.pc(), 0x5862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0186
        gbc.setState(0xd446, 0x2f14, 0x3b10, 0xd11a, 0xf5bc, 0xd21e, 0x1, 0x1);
        gbc.writeMem(0xd446, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2f14);
        EXPECT(gbc.pc(), 0xd448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd446), 0xcb);
        EXPECT(gbc.readMem(0xd447), 0x47);
        // CB 47 0187
        gbc.setState(0x6fcc, 0xd7e7, 0x9740, 0x91c, 0x1325, 0xfb7c, 0x0, 0x0);
        gbc.writeMem(0x6fcc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd7e7);
        EXPECT(gbc.pc(), 0x6fce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0188
        gbc.setState(0x7972, 0x6174, 0x5190, 0x4158, 0x1e15, 0x4d18, 0x1, 0x0);
        gbc.writeMem(0x7972, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6174);
        EXPECT(gbc.pc(), 0x7974);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0189
        gbc.setState(0x4410, 0x6ae5, 0xd6b0, 0x3920, 0x1672, 0x23d6, 0x0, 0x1);
        gbc.writeMem(0x4410, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6ae5);
        EXPECT(gbc.pc(), 0x4412);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 018A
        gbc.setState(0x1785, 0x6fb6, 0x7b20, 0x3bd2, 0x38bb, 0x4fc6, 0x1, 0x1);
        gbc.writeMem(0x1785, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6fb6);
        EXPECT(gbc.pc(), 0x1787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 018B
        gbc.setState(0x5809, 0xe329, 0xc690, 0xc894, 0x7b21, 0x2633, 0x1, 0x1);
        gbc.writeMem(0x5809, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe329);
        EXPECT(gbc.pc(), 0x580b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 018C
        gbc.setState(0x889b, 0xe44c, 0x5da0, 0x7db8, 0x89c6, 0xfdd9, 0x0, 0x1);
        gbc.writeMem(0x889b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe44c);
        EXPECT(gbc.pc(), 0x889d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x889b), 0xcb);
        EXPECT(gbc.readMem(0x889c), 0x47);
        // CB 47 018D
        gbc.setState(0xa3fa, 0x4990, 0x1ad0, 0xfad4, 0x5bce, 0x3f4c, 0x0, 0x0);
        gbc.writeMem(0xa3fa, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4990);
        EXPECT(gbc.pc(), 0xa3fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3fa), 0xcb);
        EXPECT(gbc.readMem(0xa3fb), 0x47);
        // CB 47 018E
        gbc.setState(0xb6b4, 0x8ed9, 0xb070, 0xb37d, 0xceda, 0xf243, 0x1, 0x0);
        gbc.writeMem(0xb6b4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8ed9);
        EXPECT(gbc.pc(), 0xb6b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6b4), 0xcb);
        EXPECT(gbc.readMem(0xb6b5), 0x47);
        // CB 47 018F
        gbc.setState(0xc405, 0x3c98, 0x1650, 0x165d, 0x1d1f, 0xa6ee, 0x0, 0x0);
        gbc.writeMem(0xc405, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3c98);
        EXPECT(gbc.pc(), 0xc407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc405), 0xcb);
        EXPECT(gbc.readMem(0xc406), 0x47);
        // CB 47 0190
        gbc.setState(0x481b, 0x63b8, 0x6510, 0x76be, 0x8ef3, 0x3a55, 0x1, 0x0);
        gbc.writeMem(0x481b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x63b8);
        EXPECT(gbc.pc(), 0x481d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0191
        gbc.setState(0x93f5, 0xb469, 0xa590, 0xc6aa, 0x77e7, 0x651a, 0x1, 0x1);
        gbc.writeMem(0x93f5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb469);
        EXPECT(gbc.pc(), 0x93f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93f5), 0xcb);
        EXPECT(gbc.readMem(0x93f6), 0x47);
        // CB 47 0192
        gbc.setState(0x7370, 0x229e, 0x9b80, 0x7f52, 0xc7cd, 0xa6de, 0x0, 0x0);
        gbc.writeMem(0x7370, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x229e);
        EXPECT(gbc.pc(), 0x7372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0193
        gbc.setState(0x49f0, 0xe96a, 0xd0b0, 0x12ae, 0xb151, 0xcba3, 0x1, 0x1);
        gbc.writeMem(0x49f0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe96a);
        EXPECT(gbc.pc(), 0x49f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0194
        gbc.setState(0x2522, 0x9a55, 0xdca0, 0xc48c, 0x3944, 0x3cb6, 0x1, 0x0);
        gbc.writeMem(0x2522, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9a55);
        EXPECT(gbc.pc(), 0x2524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0195
        gbc.setState(0x6405, 0xd1c1, 0xb550, 0xe79d, 0x353f, 0x6692, 0x0, 0x0);
        gbc.writeMem(0x6405, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd1c1);
        EXPECT(gbc.pc(), 0x6407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0196
        gbc.setState(0xe9f6, 0xa9cb, 0xac60, 0xaa87, 0xc7a4, 0x15b3, 0x1, 0x1);
        gbc.writeMem(0xe9f6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa9cb);
        EXPECT(gbc.pc(), 0xe9f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f6), 0xcb);
        EXPECT(gbc.readMem(0xe9f7), 0x47);
        // CB 47 0197
        gbc.setState(0xb404, 0x2c8e, 0x6970, 0xdba, 0x56a3, 0x4b57, 0x1, 0x0);
        gbc.writeMem(0xb404, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2c8e);
        EXPECT(gbc.pc(), 0xb406);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb404), 0xcb);
        EXPECT(gbc.readMem(0xb405), 0x47);
        // CB 47 0198
        gbc.setState(0xea3c, 0x3a09, 0xb7d0, 0xf921, 0x796, 0xf7a5, 0x0, 0x1);
        gbc.writeMem(0xea3c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3a09);
        EXPECT(gbc.pc(), 0xea3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea3c), 0xcb);
        EXPECT(gbc.readMem(0xea3d), 0x47);
        // CB 47 0199
        gbc.setState(0x711c, 0xdf27, 0x1030, 0x8772, 0xc541, 0xad4a, 0x1, 0x0);
        gbc.writeMem(0x711c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xdf27);
        EXPECT(gbc.pc(), 0x711e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 019A
        gbc.setState(0x4f36, 0x5594, 0x5c90, 0xb37, 0x47a1, 0x5b9b, 0x1, 0x1);
        gbc.writeMem(0x4f36, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5594);
        EXPECT(gbc.pc(), 0x4f38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 019B
        gbc.setState(0x1869, 0x2369, 0x5b80, 0xeedb, 0xe12d, 0x12eb, 0x1, 0x0);
        gbc.writeMem(0x1869, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2369);
        EXPECT(gbc.pc(), 0x186b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 019C
        gbc.setState(0x1584, 0x6b80, 0xe770, 0xfebc, 0x50ea, 0xf40f, 0x1, 0x0);
        gbc.writeMem(0x1584, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6b80);
        EXPECT(gbc.pc(), 0x1586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 019D
        gbc.setState(0x3646, 0x9a8f, 0x6b20, 0x43be, 0x6897, 0x3e2a, 0x0, 0x0);
        gbc.writeMem(0x3646, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9a8f);
        EXPECT(gbc.pc(), 0x3648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 019E
        gbc.setState(0x34c6, 0xc4da, 0x38f0, 0x2077, 0x8664, 0x737a, 0x1, 0x1);
        gbc.writeMem(0x34c6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc4da);
        EXPECT(gbc.pc(), 0x34c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 019F
        gbc.setState(0xe6b, 0x161e, 0xb900, 0x4c02, 0xdefa, 0xdb3e, 0x0, 0x1);
        gbc.writeMem(0xe6b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x161e);
        EXPECT(gbc.pc(), 0xe6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01A0
        gbc.setState(0x1008, 0x9adb, 0xea10, 0x7ab6, 0xe649, 0x7474, 0x0, 0x1);
        gbc.writeMem(0x1008, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9adb);
        EXPECT(gbc.pc(), 0x100a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01A1
        gbc.setState(0x1e78, 0x3e3, 0x2410, 0xb1d7, 0x1d59, 0x55e5, 0x1, 0x0);
        gbc.writeMem(0x1e78, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3e3);
        EXPECT(gbc.pc(), 0x1e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01A2
        gbc.setState(0x99b7, 0x9881, 0x79f0, 0xe2b, 0xa5a2, 0x6642, 0x1, 0x0);
        gbc.writeMem(0x99b7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9881);
        EXPECT(gbc.pc(), 0x99b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b7), 0xcb);
        EXPECT(gbc.readMem(0x99b8), 0x47);
        // CB 47 01A3
        gbc.setState(0x23c3, 0x64cd, 0x3140, 0x24f7, 0x26c3, 0x1eba, 0x0, 0x1);
        gbc.writeMem(0x23c3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x64cd);
        EXPECT(gbc.pc(), 0x23c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01A4
        gbc.setState(0xa2a2, 0xe445, 0xd010, 0x708a, 0xf089, 0x695b, 0x1, 0x0);
        gbc.writeMem(0xa2a2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe445);
        EXPECT(gbc.pc(), 0xa2a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2a2), 0xcb);
        EXPECT(gbc.readMem(0xa2a3), 0x47);
        // CB 47 01A5
        gbc.setState(0x5d6f, 0x267c, 0x3b40, 0xbaf2, 0x8b22, 0x621e, 0x0, 0x1);
        gbc.writeMem(0x5d6f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x267c);
        EXPECT(gbc.pc(), 0x5d71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01A7
        gbc.setState(0x8a97, 0xde85, 0x2b80, 0x5390, 0x16a5, 0xddf4, 0x0, 0x0);
        gbc.writeMem(0x8a97, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xde85);
        EXPECT(gbc.pc(), 0x8a99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a97), 0xcb);
        EXPECT(gbc.readMem(0x8a98), 0x47);
        // CB 47 01A8
        gbc.setState(0x4e3, 0xb2f9, 0x3130, 0xc6b7, 0x1a1, 0x1dd2, 0x0, 0x0);
        gbc.writeMem(0x4e3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xb2f9);
        EXPECT(gbc.pc(), 0x4e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01A9
        gbc.setState(0x3199, 0x21f4, 0xf7d0, 0x50c1, 0x9173, 0x2d75, 0x0, 0x0);
        gbc.writeMem(0x3199, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x21f4);
        EXPECT(gbc.pc(), 0x319b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01AA
        gbc.setState(0x79de, 0xa90c, 0x4da0, 0xa625, 0x2b97, 0xfa7e, 0x0, 0x1);
        gbc.writeMem(0x79de, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa90c);
        EXPECT(gbc.pc(), 0x79e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01AB
        gbc.setState(0x9a94, 0x2dae, 0x4b00, 0x7205, 0x53ce, 0x216f, 0x1, 0x0);
        gbc.writeMem(0x9a94, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2dae);
        EXPECT(gbc.pc(), 0x9a96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a94), 0xcb);
        EXPECT(gbc.readMem(0x9a95), 0x47);
        // CB 47 01AC
        gbc.setState(0x21a1, 0xb2fe, 0x5d60, 0x92f6, 0x53ce, 0xe50b, 0x0, 0x1);
        gbc.writeMem(0x21a1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb2fe);
        EXPECT(gbc.pc(), 0x21a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01AD
        gbc.setState(0x3690, 0xa013, 0xf7e0, 0xe480, 0x80b2, 0xd80d, 0x0, 0x0);
        gbc.writeMem(0x3690, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa013);
        EXPECT(gbc.pc(), 0x3692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01AE
        gbc.setState(0x1843, 0x96ca, 0xde50, 0xd00c, 0x70dc, 0x1a2f, 0x0, 0x1);
        gbc.writeMem(0x1843, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x96ca);
        EXPECT(gbc.pc(), 0x1845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01AF
        gbc.setState(0xcfee, 0x9a90, 0xe90, 0xf831, 0x8365, 0xc7f1, 0x1, 0x1);
        gbc.writeMem(0xcfee, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9a90);
        EXPECT(gbc.pc(), 0xcff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfee), 0xcb);
        EXPECT(gbc.readMem(0xcfef), 0x47);
        // CB 47 01B1
        gbc.setState(0x36c8, 0xa549, 0x61b0, 0xc38b, 0x517a, 0xfa9b, 0x0, 0x0);
        gbc.writeMem(0x36c8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa549);
        EXPECT(gbc.pc(), 0x36ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01B3
        gbc.setState(0x9f0b, 0x2c25, 0x3520, 0x94c3, 0xc4ab, 0xe2ad, 0x1, 0x0);
        gbc.writeMem(0x9f0b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2c25);
        EXPECT(gbc.pc(), 0x9f0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f0b), 0xcb);
        EXPECT(gbc.readMem(0x9f0c), 0x47);
        // CB 47 01B4
        gbc.setState(0x96ed, 0x1277, 0xf400, 0x242e, 0x2d3, 0x801d, 0x0, 0x1);
        gbc.writeMem(0x96ed, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x1277);
        EXPECT(gbc.pc(), 0x96ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ed), 0xcb);
        EXPECT(gbc.readMem(0x96ee), 0x47);
        // CB 47 01B5
        gbc.setState(0xcbca, 0x1bbd, 0x9420, 0x5859, 0x19d1, 0xe995, 0x1, 0x1);
        gbc.writeMem(0xcbca, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1bbd);
        EXPECT(gbc.pc(), 0xcbcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbca), 0xcb);
        EXPECT(gbc.readMem(0xcbcb), 0x47);
        // CB 47 01B6
        gbc.setState(0xdc46, 0xb262, 0x5fb0, 0xa922, 0x7323, 0x3d26, 0x1, 0x1);
        gbc.writeMem(0xdc46, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb262);
        EXPECT(gbc.pc(), 0xdc48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc46), 0xcb);
        EXPECT(gbc.readMem(0xdc47), 0x47);
        // CB 47 01B8
        gbc.setState(0xccf0, 0x815c, 0xea40, 0x2b00, 0x1936, 0xb9a, 0x0, 0x0);
        gbc.writeMem(0xccf0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x815c);
        EXPECT(gbc.pc(), 0xccf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccf0), 0xcb);
        EXPECT(gbc.readMem(0xccf1), 0x47);
        // CB 47 01B9
        gbc.setState(0x3103, 0x8704, 0xbfc0, 0x774a, 0xfcd1, 0xa0de, 0x1, 0x0);
        gbc.writeMem(0x3103, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8704);
        EXPECT(gbc.pc(), 0x3105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01BB
        gbc.setState(0x3d4, 0xf45b, 0xb3b0, 0x9bdd, 0xf786, 0xdcb5, 0x1, 0x0);
        gbc.writeMem(0x3d4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf45b);
        EXPECT(gbc.pc(), 0x3d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01BC
        gbc.setState(0x8cd2, 0xab49, 0x4cb0, 0x4869, 0x221, 0x82cb, 0x1, 0x0);
        gbc.writeMem(0x8cd2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xab49);
        EXPECT(gbc.pc(), 0x8cd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd2), 0xcb);
        EXPECT(gbc.readMem(0x8cd3), 0x47);
        // CB 47 01BD
        gbc.setState(0x5b9f, 0xc0d0, 0x6b30, 0x8a0d, 0xc254, 0x6e44, 0x1, 0x1);
        gbc.writeMem(0x5b9f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc0d0);
        EXPECT(gbc.pc(), 0x5ba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01BE
        gbc.setState(0x1baf, 0x999d, 0xcf0, 0x9a67, 0x3904, 0x9560, 0x0, 0x1);
        gbc.writeMem(0x1baf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x999d);
        EXPECT(gbc.pc(), 0x1bb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01BF
        gbc.setState(0xd3ad, 0x548f, 0x17e0, 0x5c41, 0x7af2, 0x3edc, 0x0, 0x0);
        gbc.writeMem(0xd3ad, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x548f);
        EXPECT(gbc.pc(), 0xd3af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ad), 0xcb);
        EXPECT(gbc.readMem(0xd3ae), 0x47);
        // CB 47 01C0
        gbc.setState(0xe9a3, 0x21da, 0xe350, 0x3d4f, 0x308d, 0xffab, 0x0, 0x1);
        gbc.writeMem(0xe9a3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x21da);
        EXPECT(gbc.pc(), 0xe9a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a3), 0xcb);
        EXPECT(gbc.readMem(0xe9a4), 0x47);
        // CB 47 01C1
        gbc.setState(0x1e28, 0xc61f, 0xfa70, 0x1b03, 0xf709, 0xaa33, 0x0, 0x0);
        gbc.writeMem(0x1e28, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc61f);
        EXPECT(gbc.pc(), 0x1e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01C2
        gbc.setState(0xa568, 0xc8fa, 0x83c0, 0xc098, 0x9fb5, 0x9312, 0x0, 0x1);
        gbc.writeMem(0xa568, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc8fa);
        EXPECT(gbc.pc(), 0xa56a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa568), 0xcb);
        EXPECT(gbc.readMem(0xa569), 0x47);
        // CB 47 01C3
        gbc.setState(0xe790, 0xf21d, 0xb300, 0x617c, 0x76d, 0x1f50, 0x0, 0x0);
        gbc.writeMem(0xe790, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf21d);
        EXPECT(gbc.pc(), 0xe792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe790), 0xcb);
        EXPECT(gbc.readMem(0xe791), 0x47);
        // CB 47 01C4
        gbc.setState(0x8faa, 0x5eb8, 0x2230, 0xc693, 0x3f0c, 0x470b, 0x0, 0x0);
        gbc.writeMem(0x8faa, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x5eb8);
        EXPECT(gbc.pc(), 0x8fac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8faa), 0xcb);
        EXPECT(gbc.readMem(0x8fab), 0x47);
        // CB 47 01C5
        gbc.setState(0x205f, 0x7141, 0xc640, 0xfc15, 0x2f62, 0x34b4, 0x0, 0x1);
        gbc.writeMem(0x205f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7141);
        EXPECT(gbc.pc(), 0x2061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01C6
        gbc.setState(0x5031, 0x6a76, 0x500, 0xbdb5, 0x55d0, 0x8ab0, 0x0, 0x1);
        gbc.writeMem(0x5031, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6a76);
        EXPECT(gbc.pc(), 0x5033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01C7
        gbc.setState(0xc2c8, 0x83b3, 0x4450, 0xc211, 0x38d, 0x76b1, 0x0, 0x0);
        gbc.writeMem(0xc2c8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x83b3);
        EXPECT(gbc.pc(), 0xc2ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c8), 0xcb);
        EXPECT(gbc.readMem(0xc2c9), 0x47);
        // CB 47 01C8
        gbc.setState(0x8b59, 0xc5d0, 0x1e40, 0x4325, 0xd2c9, 0x67dc, 0x0, 0x0);
        gbc.writeMem(0x8b59, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc5d0);
        EXPECT(gbc.pc(), 0x8b5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b59), 0xcb);
        EXPECT(gbc.readMem(0x8b5a), 0x47);
        // CB 47 01C9
        gbc.setState(0xe4c, 0xc255, 0xe5c0, 0x1cf2, 0x1ebf, 0xa59f, 0x0, 0x1);
        gbc.writeMem(0xe4c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc255);
        EXPECT(gbc.pc(), 0xe4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01CB
        gbc.setState(0xc29, 0x8011, 0x2e60, 0xce8e, 0xe773, 0x9500, 0x1, 0x0);
        gbc.writeMem(0xc29, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8011);
        EXPECT(gbc.pc(), 0xc2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01CC
        gbc.setState(0xe8d8, 0x1734, 0x4900, 0x5e5f, 0xbfd2, 0x91ad, 0x0, 0x1);
        gbc.writeMem(0xe8d8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1734);
        EXPECT(gbc.pc(), 0xe8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d8), 0xcb);
        EXPECT(gbc.readMem(0xe8d9), 0x47);
        // CB 47 01CD
        gbc.setState(0x76d, 0x6090, 0x460, 0xbf0, 0x1b0, 0x98eb, 0x0, 0x1);
        gbc.writeMem(0x76d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6090);
        EXPECT(gbc.pc(), 0x76f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01CE
        gbc.setState(0x536c, 0xf5df, 0x45e0, 0x8595, 0x7b31, 0x8e80, 0x0, 0x0);
        gbc.writeMem(0x536c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf5df);
        EXPECT(gbc.pc(), 0x536e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01CF
        gbc.setState(0x1ac5, 0x837f, 0x2e30, 0x6934, 0xe10f, 0x9393, 0x1, 0x1);
        gbc.writeMem(0x1ac5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x837f);
        EXPECT(gbc.pc(), 0x1ac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01D0
        gbc.setState(0xc39e, 0x5188, 0x9340, 0xcf04, 0x43b0, 0x8de7, 0x1, 0x0);
        gbc.writeMem(0xc39e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5188);
        EXPECT(gbc.pc(), 0xc3a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39e), 0xcb);
        EXPECT(gbc.readMem(0xc39f), 0x47);
        // CB 47 01D1
        gbc.setState(0x6031, 0x7b7d, 0x2690, 0xb997, 0x1afa, 0x67c2, 0x0, 0x0);
        gbc.writeMem(0x6031, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7b7d);
        EXPECT(gbc.pc(), 0x6033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01D2
        gbc.setState(0x376, 0x4faf, 0xe440, 0x3170, 0x526c, 0x1b26, 0x0, 0x0);
        gbc.writeMem(0x376, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4faf);
        EXPECT(gbc.pc(), 0x378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01D3
        gbc.setState(0xd9f4, 0x48be, 0x7d80, 0xf3be, 0xcca1, 0x3d0c, 0x0, 0x1);
        gbc.writeMem(0xd9f4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x48be);
        EXPECT(gbc.pc(), 0xd9f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9f4), 0xcb);
        EXPECT(gbc.readMem(0xd9f5), 0x47);
        // CB 47 01D4
        gbc.setState(0xb03, 0x8e58, 0x3830, 0x9158, 0x60c2, 0xa782, 0x0, 0x0);
        gbc.writeMem(0xb03, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8e58);
        EXPECT(gbc.pc(), 0xb05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01D5
        gbc.setState(0x5171, 0x2957, 0x57e0, 0xfba1, 0xa9b3, 0x7c6e, 0x0, 0x1);
        gbc.writeMem(0x5171, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2957);
        EXPECT(gbc.pc(), 0x5173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01D6
        gbc.setState(0xaac3, 0xdc22, 0xe390, 0x24c7, 0xdb95, 0xc8a0, 0x1, 0x0);
        gbc.writeMem(0xaac3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xdc22);
        EXPECT(gbc.pc(), 0xaac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaac3), 0xcb);
        EXPECT(gbc.readMem(0xaac4), 0x47);
        // CB 47 01D7
        gbc.setState(0x31b2, 0x5200, 0x78b0, 0xf4, 0xd953, 0x27d8, 0x0, 0x0);
        gbc.writeMem(0x31b2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5200);
        EXPECT(gbc.pc(), 0x31b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01D8
        gbc.setState(0x7076, 0x9d97, 0xe1a0, 0xcb45, 0xc2af, 0x9cd0, 0x1, 0x0);
        gbc.writeMem(0x7076, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9d97);
        EXPECT(gbc.pc(), 0x7078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01D9
        gbc.setState(0x2b80, 0x87c5, 0x5fb0, 0xa8bb, 0x8631, 0xa362, 0x1, 0x1);
        gbc.writeMem(0x2b80, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x87c5);
        EXPECT(gbc.pc(), 0x2b82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01DA
        gbc.setState(0x1cd8, 0xf7a9, 0xf4f0, 0x39a9, 0x2d2e, 0xe18, 0x0, 0x0);
        gbc.writeMem(0x1cd8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf7a9);
        EXPECT(gbc.pc(), 0x1cda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01DB
        gbc.setState(0x13b9, 0x1607, 0x5100, 0x2c74, 0x8ecb, 0xa1bf, 0x0, 0x0);
        gbc.writeMem(0x13b9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1607);
        EXPECT(gbc.pc(), 0x13bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01DC
        gbc.setState(0x77fa, 0x1620, 0x3700, 0xc1fb, 0xe8ce, 0xd7af, 0x1, 0x1);
        gbc.writeMem(0x77fa, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1620);
        EXPECT(gbc.pc(), 0x77fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01DD
        gbc.setState(0x96c6, 0xc38e, 0x6d70, 0x9e46, 0x305e, 0x82d8, 0x0, 0x0);
        gbc.writeMem(0x96c6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc38e);
        EXPECT(gbc.pc(), 0x96c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96c6), 0xcb);
        EXPECT(gbc.readMem(0x96c7), 0x47);
        // CB 47 01DE
        gbc.setState(0xdc6c, 0xed76, 0x6170, 0x426, 0x70fa, 0xdbc3, 0x1, 0x1);
        gbc.writeMem(0xdc6c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xed76);
        EXPECT(gbc.pc(), 0xdc6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc6c), 0xcb);
        EXPECT(gbc.readMem(0xdc6d), 0x47);
        // CB 47 01DF
        gbc.setState(0xe70f, 0x413e, 0x2810, 0x7364, 0x9df3, 0xfdbf, 0x1, 0x0);
        gbc.writeMem(0xe70f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x413e);
        EXPECT(gbc.pc(), 0xe711);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe70f), 0xcb);
        EXPECT(gbc.readMem(0xe710), 0x47);
        // CB 47 01E0
        gbc.setState(0x19d1, 0x9d5e, 0x7c50, 0x9028, 0xfabd, 0xa611, 0x1, 0x1);
        gbc.writeMem(0x19d1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9d5e);
        EXPECT(gbc.pc(), 0x19d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01E1
        gbc.setState(0xc5ab, 0xf15, 0xe10, 0x2a47, 0xa1a4, 0xb43e, 0x1, 0x0);
        gbc.writeMem(0xc5ab, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf15);
        EXPECT(gbc.pc(), 0xc5ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ab), 0xcb);
        EXPECT(gbc.readMem(0xc5ac), 0x47);
        // CB 47 01E2
        gbc.setState(0x242c, 0x7250, 0x3b30, 0xe9cb, 0x969f, 0x420, 0x1, 0x1);
        gbc.writeMem(0x242c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7250);
        EXPECT(gbc.pc(), 0x242e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01E3
        gbc.setState(0xa440, 0x8621, 0x6240, 0xfa0, 0xc1d1, 0xc37e, 0x0, 0x1);
        gbc.writeMem(0xa440, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8621);
        EXPECT(gbc.pc(), 0xa442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa440), 0xcb);
        EXPECT(gbc.readMem(0xa441), 0x47);
        // CB 47 01E4
        gbc.setState(0x9bc5, 0xcab1, 0x5da0, 0x3d0c, 0x1bc4, 0x2938, 0x1, 0x0);
        gbc.writeMem(0x9bc5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xcab1);
        EXPECT(gbc.pc(), 0x9bc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bc5), 0xcb);
        EXPECT(gbc.readMem(0x9bc6), 0x47);
        // CB 47 01E5
        gbc.setState(0xe117, 0x8b7, 0xbb50, 0x786f, 0xa5e3, 0x955b, 0x0, 0x1);
        gbc.writeMem(0xe117, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8b7);
        EXPECT(gbc.pc(), 0xe119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe117), 0xcb);
        EXPECT(gbc.readMem(0xe118), 0x47);
        // CB 47 01E7
        gbc.setState(0x73f0, 0x525d, 0x96a0, 0x35e9, 0xf525, 0x9700, 0x1, 0x1);
        gbc.writeMem(0x73f0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x525d);
        EXPECT(gbc.pc(), 0x73f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01E9
        gbc.setState(0x5487, 0xa2c8, 0xc1e0, 0xe986, 0xcf2a, 0xb21e, 0x0, 0x0);
        gbc.writeMem(0x5487, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa2c8);
        EXPECT(gbc.pc(), 0x5489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01EA
        gbc.setState(0x5063, 0x491b, 0x1750, 0xc25, 0x731f, 0x1473, 0x1, 0x0);
        gbc.writeMem(0x5063, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x491b);
        EXPECT(gbc.pc(), 0x5065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01EB
        gbc.setState(0xb59b, 0xc8df, 0xef0, 0x88ec, 0xce16, 0xc1f, 0x0, 0x1);
        gbc.writeMem(0xb59b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc8df);
        EXPECT(gbc.pc(), 0xb59d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb59b), 0xcb);
        EXPECT(gbc.readMem(0xb59c), 0x47);
        // CB 47 01EC
        gbc.setState(0x129f, 0xa3b8, 0xc410, 0x8cd0, 0x1674, 0xfe67, 0x0, 0x1);
        gbc.writeMem(0x129f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xa3b8);
        EXPECT(gbc.pc(), 0x12a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01ED
        gbc.setState(0x5c94, 0x16a, 0x5730, 0xc031, 0xe8a7, 0xf29b, 0x0, 0x1);
        gbc.writeMem(0x5c94, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x16a);
        EXPECT(gbc.pc(), 0x5c96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01EE
        gbc.setState(0x6afd, 0xc231, 0x5180, 0x5546, 0x5286, 0x41cb, 0x1, 0x0);
        gbc.writeMem(0x6afd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc231);
        EXPECT(gbc.pc(), 0x6aff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01EF
        gbc.setState(0x8cd7, 0xcb26, 0xfe50, 0x7934, 0xbb1b, 0x83f2, 0x1, 0x0);
        gbc.writeMem(0x8cd7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcb26);
        EXPECT(gbc.pc(), 0x8cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd7), 0xcb);
        EXPECT(gbc.readMem(0x8cd8), 0x47);
        // CB 47 01F1
        gbc.setState(0x6a34, 0x43a7, 0xfd70, 0xd343, 0x725d, 0x77d0, 0x0, 0x1);
        gbc.writeMem(0x6a34, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x43a7);
        EXPECT(gbc.pc(), 0x6a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01F2
        gbc.setState(0x51dc, 0xb069, 0xc140, 0xe8b7, 0xfd8d, 0xa8c6, 0x1, 0x1);
        gbc.writeMem(0x51dc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb069);
        EXPECT(gbc.pc(), 0x51de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01F3
        gbc.setState(0x3443, 0xc5ad, 0x8090, 0xff5b, 0x474b, 0x4672, 0x1, 0x0);
        gbc.writeMem(0x3443, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc5ad);
        EXPECT(gbc.pc(), 0x3445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01F5
        gbc.setState(0x4cfc, 0xd549, 0xb1a0, 0x50aa, 0xb22e, 0xa389, 0x1, 0x1);
        gbc.writeMem(0x4cfc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd549);
        EXPECT(gbc.pc(), 0x4cfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 01F6
        gbc.setState(0x1203, 0xc35d, 0x68b0, 0x25b4, 0x9989, 0xc4a6, 0x0, 0x0);
        gbc.writeMem(0x1203, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc35d);
        EXPECT(gbc.pc(), 0x1205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01F7
        gbc.setState(0x9dff, 0xa9a7, 0xfaf0, 0x3a9, 0x6c5b, 0x724f, 0x0, 0x0);
        gbc.writeMem(0x9dff, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa9a7);
        EXPECT(gbc.pc(), 0x9e01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dff), 0xcb);
        EXPECT(gbc.readMem(0x9e00), 0x47);
        // CB 47 01F8
        gbc.setState(0xb238, 0x422e, 0x6a60, 0x9a49, 0x9d01, 0xa116, 0x0, 0x0);
        gbc.writeMem(0xb238, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x422e);
        EXPECT(gbc.pc(), 0xb23a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb238), 0xcb);
        EXPECT(gbc.readMem(0xb239), 0x47);
        // CB 47 01F9
        gbc.setState(0x8aad, 0x47b3, 0xd6d0, 0x7ef9, 0x73db, 0x8f56, 0x1, 0x0);
        gbc.writeMem(0x8aad, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x47b3);
        EXPECT(gbc.pc(), 0x8aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aad), 0xcb);
        EXPECT(gbc.readMem(0x8aae), 0x47);
        // CB 47 01FA
        gbc.setState(0xaecd, 0xcc61, 0xfb70, 0x7a73, 0xfcb5, 0xf80b, 0x1, 0x1);
        gbc.writeMem(0xaecd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcc61);
        EXPECT(gbc.pc(), 0xaecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaecd), 0xcb);
        EXPECT(gbc.readMem(0xaece), 0x47);
        // CB 47 01FB
        gbc.setState(0xbf56, 0xfa08, 0x3cc0, 0xab6f, 0x5e7a, 0xf105, 0x1, 0x1);
        gbc.writeMem(0xbf56, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfa08);
        EXPECT(gbc.pc(), 0xbf58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf56), 0xcb);
        EXPECT(gbc.readMem(0xbf57), 0x47);
        // CB 47 01FC
        gbc.setState(0x573f, 0xc024, 0x3350, 0xe3f0, 0x69bc, 0xbb45, 0x0, 0x0);
        gbc.writeMem(0x573f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc024);
        EXPECT(gbc.pc(), 0x5741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 01FD
        gbc.setState(0x8de2, 0xc4e, 0x5ca0, 0x3624, 0xa391, 0xe8f3, 0x1, 0x1);
        gbc.writeMem(0x8de2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc4e);
        EXPECT(gbc.pc(), 0x8de4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de2), 0xcb);
        EXPECT(gbc.readMem(0x8de3), 0x47);
        // CB 47 01FE
        gbc.setState(0xeae7, 0x94b, 0xd10, 0x6d9f, 0x151a, 0x1d58, 0x1, 0x0);
        gbc.writeMem(0xeae7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x94b);
        EXPECT(gbc.pc(), 0xeae9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeae7), 0xcb);
        EXPECT(gbc.readMem(0xeae8), 0x47);
        // CB 47 01FF
        gbc.setState(0x832c, 0x6353, 0x4fc0, 0x728e, 0x1cfd, 0x980b, 0x0, 0x1);
        gbc.writeMem(0x832c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6353);
        EXPECT(gbc.pc(), 0x832e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x832c), 0xcb);
        EXPECT(gbc.readMem(0x832d), 0x47);
        // CB 47 0200
        gbc.setState(0x9840, 0xc422, 0x7aa0, 0xec6, 0xc72e, 0xf015, 0x1, 0x0);
        gbc.writeMem(0x9840, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc422);
        EXPECT(gbc.pc(), 0x9842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9840), 0xcb);
        EXPECT(gbc.readMem(0x9841), 0x47);
        // CB 47 0201
        gbc.setState(0xd4ad, 0x18a6, 0x8270, 0xe2e3, 0x202f, 0x2ca7, 0x0, 0x1);
        gbc.writeMem(0xd4ad, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x18a6);
        EXPECT(gbc.pc(), 0xd4af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ad), 0xcb);
        EXPECT(gbc.readMem(0xd4ae), 0x47);
        // CB 47 0202
        gbc.setState(0x171e, 0x3875, 0x5bc0, 0x70ab, 0x87b6, 0x1ac6, 0x1, 0x0);
        gbc.writeMem(0x171e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3875);
        EXPECT(gbc.pc(), 0x1720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0203
        gbc.setState(0x858d, 0x852, 0x3c70, 0x99c7, 0xa997, 0xf27d, 0x0, 0x1);
        gbc.writeMem(0x858d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x852);
        EXPECT(gbc.pc(), 0x858f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x858d), 0xcb);
        EXPECT(gbc.readMem(0x858e), 0x47);
        // CB 47 0204
        gbc.setState(0x77d8, 0x5f5, 0xd220, 0xf763, 0x6fa3, 0xc9de, 0x0, 0x0);
        gbc.writeMem(0x77d8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5f5);
        EXPECT(gbc.pc(), 0x77da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0205
        gbc.setState(0x77f6, 0x1b0c, 0xc7e0, 0x63e, 0x837, 0x89f9, 0x1, 0x1);
        gbc.writeMem(0x77f6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1b0c);
        EXPECT(gbc.pc(), 0x77f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0206
        gbc.setState(0x21bc, 0xdc88, 0x9760, 0x85a9, 0x4218, 0x8aa0, 0x0, 0x0);
        gbc.writeMem(0x21bc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xdc88);
        EXPECT(gbc.pc(), 0x21be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0207
        gbc.setState(0x6af, 0x9602, 0x9e80, 0xcbc1, 0xf927, 0xd650, 0x1, 0x0);
        gbc.writeMem(0x6af, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9602);
        EXPECT(gbc.pc(), 0x6b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0208
        gbc.setState(0xbe9c, 0x45e8, 0xa40, 0xfb2a, 0x3677, 0xd2f9, 0x1, 0x0);
        gbc.writeMem(0xbe9c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x45e8);
        EXPECT(gbc.pc(), 0xbe9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe9c), 0xcb);
        EXPECT(gbc.readMem(0xbe9d), 0x47);
        // CB 47 020A
        gbc.setState(0xd420, 0x53a0, 0xd210, 0x866b, 0x6c30, 0x8112, 0x0, 0x0);
        gbc.writeMem(0xd420, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x53a0);
        EXPECT(gbc.pc(), 0xd422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd420), 0xcb);
        EXPECT(gbc.readMem(0xd421), 0x47);
        // CB 47 020B
        gbc.setState(0x25e4, 0x3d93, 0x6d90, 0x5326, 0xea85, 0x5686, 0x1, 0x0);
        gbc.writeMem(0x25e4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3d93);
        EXPECT(gbc.pc(), 0x25e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 020C
        gbc.setState(0x8a4b, 0xf34c, 0xb5b0, 0xb479, 0xb1a4, 0xdf6b, 0x1, 0x0);
        gbc.writeMem(0x8a4b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf34c);
        EXPECT(gbc.pc(), 0x8a4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a4b), 0xcb);
        EXPECT(gbc.readMem(0x8a4c), 0x47);
        // CB 47 020D
        gbc.setState(0xb510, 0x464e, 0x92d0, 0x131, 0xf207, 0xb5bf, 0x0, 0x0);
        gbc.writeMem(0xb510, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x464e);
        EXPECT(gbc.pc(), 0xb512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb510), 0xcb);
        EXPECT(gbc.readMem(0xb511), 0x47);
        // CB 47 020E
        gbc.setState(0xac8c, 0x2ecd, 0x1a30, 0x3b8a, 0x4e44, 0xab89, 0x0, 0x1);
        gbc.writeMem(0xac8c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2ecd);
        EXPECT(gbc.pc(), 0xac8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac8c), 0xcb);
        EXPECT(gbc.readMem(0xac8d), 0x47);
        // CB 47 020F
        gbc.setState(0x1987, 0x75d2, 0xe8c0, 0xf5e2, 0x458b, 0xfc45, 0x1, 0x0);
        gbc.writeMem(0x1987, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x75d2);
        EXPECT(gbc.pc(), 0x1989);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0211
        gbc.setState(0x9712, 0xac75, 0x8690, 0x2c73, 0xb762, 0xef3b, 0x1, 0x1);
        gbc.writeMem(0x9712, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xac75);
        EXPECT(gbc.pc(), 0x9714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9712), 0xcb);
        EXPECT(gbc.readMem(0x9713), 0x47);
        // CB 47 0212
        gbc.setState(0xc05a, 0x8999, 0xa1c0, 0x720a, 0xd7bd, 0xba0a, 0x1, 0x1);
        gbc.writeMem(0xc05a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8999);
        EXPECT(gbc.pc(), 0xc05c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc05a), 0xcb);
        EXPECT(gbc.readMem(0xc05b), 0x47);
        // CB 47 0213
        gbc.setState(0x8c72, 0xf254, 0x93b0, 0xd3c2, 0x2df2, 0xc116, 0x0, 0x0);
        gbc.writeMem(0x8c72, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf254);
        EXPECT(gbc.pc(), 0x8c74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c72), 0xcb);
        EXPECT(gbc.readMem(0x8c73), 0x47);
        // CB 47 0214
        gbc.setState(0x1224, 0x103b, 0xf310, 0xfb9f, 0xedf4, 0x6c9f, 0x0, 0x1);
        gbc.writeMem(0x1224, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x103b);
        EXPECT(gbc.pc(), 0x1226);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0215
        gbc.setState(0xb1ae, 0x5091, 0x3a80, 0x3b1e, 0xd579, 0x3da5, 0x1, 0x0);
        gbc.writeMem(0xb1ae, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5091);
        EXPECT(gbc.pc(), 0xb1b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ae), 0xcb);
        EXPECT(gbc.readMem(0xb1af), 0x47);
        // CB 47 0216
        gbc.setState(0x4928, 0x8c95, 0x85f0, 0x1bd3, 0xd049, 0xc261, 0x0, 0x0);
        gbc.writeMem(0x4928, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8c95);
        EXPECT(gbc.pc(), 0x492a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0217
        gbc.setState(0x941a, 0x44e, 0xde10, 0x6bd, 0xfa06, 0xf4a3, 0x1, 0x1);
        gbc.writeMem(0x941a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x44e);
        EXPECT(gbc.pc(), 0x941c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x941a), 0xcb);
        EXPECT(gbc.readMem(0x941b), 0x47);
        // CB 47 0218
        gbc.setState(0xe980, 0x4524, 0x38a0, 0xbbb5, 0x3de5, 0x7019, 0x1, 0x0);
        gbc.writeMem(0xe980, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4524);
        EXPECT(gbc.pc(), 0xe982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe980), 0xcb);
        EXPECT(gbc.readMem(0xe981), 0x47);
        // CB 47 0219
        gbc.setState(0xdf81, 0x367, 0xf110, 0xa2d2, 0x6f73, 0x5005, 0x0, 0x0);
        gbc.writeMem(0xdf81, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x367);
        EXPECT(gbc.pc(), 0xdf83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf81), 0xcb);
        EXPECT(gbc.readMem(0xdf82), 0x47);
        // CB 47 021A
        gbc.setState(0xa6c5, 0x82be, 0xaeb0, 0xe80e, 0x1218, 0x416d, 0x0, 0x1);
        gbc.writeMem(0xa6c5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x82be);
        EXPECT(gbc.pc(), 0xa6c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6c5), 0xcb);
        EXPECT(gbc.readMem(0xa6c6), 0x47);
        // CB 47 021B
        gbc.setState(0x81d5, 0x371d, 0xfcf0, 0x3bf3, 0x72c5, 0xa8ae, 0x1, 0x1);
        gbc.writeMem(0x81d5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x371d);
        EXPECT(gbc.pc(), 0x81d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81d5), 0xcb);
        EXPECT(gbc.readMem(0x81d6), 0x47);
        // CB 47 021C
        gbc.setState(0xb75c, 0x91b1, 0xfa0, 0x176, 0x22c3, 0x9a2a, 0x0, 0x0);
        gbc.writeMem(0xb75c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x91b1);
        EXPECT(gbc.pc(), 0xb75e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb75c), 0xcb);
        EXPECT(gbc.readMem(0xb75d), 0x47);
        // CB 47 021E
        gbc.setState(0x5e42, 0x4dc1, 0x2a10, 0xfdc8, 0x618c, 0x8532, 0x1, 0x0);
        gbc.writeMem(0x5e42, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4dc1);
        EXPECT(gbc.pc(), 0x5e44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 021F
        gbc.setState(0xc885, 0x103a, 0x6550, 0x8b9d, 0x7c86, 0x2add, 0x0, 0x0);
        gbc.writeMem(0xc885, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x103a);
        EXPECT(gbc.pc(), 0xc887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc885), 0xcb);
        EXPECT(gbc.readMem(0xc886), 0x47);
        // CB 47 0220
        gbc.setState(0x8142, 0x32fb, 0xdb50, 0x8a29, 0x4986, 0xce11, 0x1, 0x0);
        gbc.writeMem(0x8142, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x32fb);
        EXPECT(gbc.pc(), 0x8144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8142), 0xcb);
        EXPECT(gbc.readMem(0x8143), 0x47);
        // CB 47 0221
        gbc.setState(0xad10, 0x2399, 0xca70, 0xc12a, 0xc0c6, 0x86a4, 0x0, 0x1);
        gbc.writeMem(0xad10, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2399);
        EXPECT(gbc.pc(), 0xad12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad10), 0xcb);
        EXPECT(gbc.readMem(0xad11), 0x47);
        // CB 47 0222
        gbc.setState(0x40ca, 0x1c14, 0x8180, 0xc567, 0x3fc2, 0x3d2c, 0x1, 0x1);
        gbc.writeMem(0x40ca, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1c14);
        EXPECT(gbc.pc(), 0x40cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0223
        gbc.setState(0x2698, 0x42f0, 0x47b0, 0x9db0, 0x9dc, 0x1a2c, 0x1, 0x1);
        gbc.writeMem(0x2698, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x42f0);
        EXPECT(gbc.pc(), 0x269a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0224
        gbc.setState(0x4831, 0x7cab, 0xd540, 0x1260, 0x8cef, 0x4f18, 0x0, 0x0);
        gbc.writeMem(0x4831, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7cab);
        EXPECT(gbc.pc(), 0x4833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0225
        gbc.setState(0x447c, 0x9d15, 0x88c0, 0xf0ca, 0x1894, 0xb559, 0x0, 0x1);
        gbc.writeMem(0x447c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9d15);
        EXPECT(gbc.pc(), 0x447e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0227
        gbc.setState(0x2146, 0xa11b, 0xb20, 0xfcdd, 0x4bd5, 0xae34, 0x1, 0x0);
        gbc.writeMem(0x2146, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa11b);
        EXPECT(gbc.pc(), 0x2148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0228
        gbc.setState(0x4b5e, 0x70ea, 0x1000, 0xe108, 0xfed7, 0xbf63, 0x1, 0x1);
        gbc.writeMem(0x4b5e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x70ea);
        EXPECT(gbc.pc(), 0x4b60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0229
        gbc.setState(0x82a, 0x7e6, 0x94d0, 0x1072, 0xcdbf, 0xb142, 0x1, 0x1);
        gbc.writeMem(0x82a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7e6);
        EXPECT(gbc.pc(), 0x82c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 022A
        gbc.setState(0x58f1, 0xb267, 0xf0, 0xcea7, 0x79d9, 0x1e53, 0x1, 0x0);
        gbc.writeMem(0x58f1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb267);
        EXPECT(gbc.pc(), 0x58f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 022B
        gbc.setState(0x69a1, 0xd77a, 0xe750, 0x6f5f, 0x6c0c, 0x59b, 0x1, 0x0);
        gbc.writeMem(0x69a1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd77a);
        EXPECT(gbc.pc(), 0x69a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 022C
        gbc.setState(0x3cc8, 0xc8c2, 0xd940, 0x669f, 0xbfef, 0xfda4, 0x1, 0x0);
        gbc.writeMem(0x3cc8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc8c2);
        EXPECT(gbc.pc(), 0x3cca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 022D
        gbc.setState(0x1088, 0xd074, 0x2b0, 0xe8fe, 0x7195, 0xf3d2, 0x1, 0x0);
        gbc.writeMem(0x1088, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd074);
        EXPECT(gbc.pc(), 0x108a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 022E
        gbc.setState(0x7b61, 0x16a1, 0x7be0, 0xed57, 0x8064, 0xf463, 0x1, 0x1);
        gbc.writeMem(0x7b61, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x16a1);
        EXPECT(gbc.pc(), 0x7b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 022F
        gbc.setState(0xcbf, 0x5b60, 0x5da0, 0x5add, 0x238, 0xdb70, 0x0, 0x0);
        gbc.writeMem(0xcbf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5b60);
        EXPECT(gbc.pc(), 0xcc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0230
        gbc.setState(0xe4b5, 0x493d, 0xc5e0, 0x71a, 0xdc26, 0x7743, 0x0, 0x0);
        gbc.writeMem(0xe4b5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x493d);
        EXPECT(gbc.pc(), 0xe4b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b5), 0xcb);
        EXPECT(gbc.readMem(0xe4b6), 0x47);
        // CB 47 0231
        gbc.setState(0xe10d, 0xc145, 0x3a30, 0xbfd, 0x13cf, 0x7620, 0x1, 0x1);
        gbc.writeMem(0xe10d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc145);
        EXPECT(gbc.pc(), 0xe10f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe10d), 0xcb);
        EXPECT(gbc.readMem(0xe10e), 0x47);
        // CB 47 0232
        gbc.setState(0x7099, 0x72be, 0xd180, 0x8a6c, 0x72f, 0x2fe6, 0x0, 0x1);
        gbc.writeMem(0x7099, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x72be);
        EXPECT(gbc.pc(), 0x709b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0233
        gbc.setState(0xa2f3, 0x936f, 0x7480, 0x5345, 0x5201, 0x7273, 0x0, 0x1);
        gbc.writeMem(0xa2f3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x936f);
        EXPECT(gbc.pc(), 0xa2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f3), 0xcb);
        EXPECT(gbc.readMem(0xa2f4), 0x47);
        // CB 47 0234
        gbc.setState(0xdd79, 0x8895, 0xea70, 0x288a, 0x5a3, 0x339f, 0x1, 0x0);
        gbc.writeMem(0xdd79, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8895);
        EXPECT(gbc.pc(), 0xdd7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd79), 0xcb);
        EXPECT(gbc.readMem(0xdd7a), 0x47);
        // CB 47 0235
        gbc.setState(0x2762, 0x2950, 0x4bd0, 0x33b4, 0x527c, 0xc3cd, 0x1, 0x0);
        gbc.writeMem(0x2762, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2950);
        EXPECT(gbc.pc(), 0x2764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0236
        gbc.setState(0x840d, 0x5992, 0x1fe0, 0xed41, 0xfd36, 0x72f0, 0x0, 0x1);
        gbc.writeMem(0x840d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5992);
        EXPECT(gbc.pc(), 0x840f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x840d), 0xcb);
        EXPECT(gbc.readMem(0x840e), 0x47);
        // CB 47 0237
        gbc.setState(0x5c28, 0xa945, 0x58f0, 0x363d, 0x4c72, 0x550a, 0x1, 0x1);
        gbc.writeMem(0x5c28, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa945);
        EXPECT(gbc.pc(), 0x5c2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0238
        gbc.setState(0x7da3, 0x7e30, 0x4050, 0xe612, 0x5237, 0x2b16, 0x0, 0x0);
        gbc.writeMem(0x7da3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7e30);
        EXPECT(gbc.pc(), 0x7da5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0239
        gbc.setState(0x9e6f, 0x7d5a, 0x6230, 0x7fba, 0x3ad3, 0x3c36, 0x0, 0x1);
        gbc.writeMem(0x9e6f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7d5a);
        EXPECT(gbc.pc(), 0x9e71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e6f), 0xcb);
        EXPECT(gbc.readMem(0x9e70), 0x47);
        // CB 47 023A
        gbc.setState(0x30bb, 0x6211, 0x89c0, 0x7c, 0x8e0b, 0x8196, 0x0, 0x1);
        gbc.writeMem(0x30bb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6211);
        EXPECT(gbc.pc(), 0x30bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 023B
        gbc.setState(0x65df, 0x58af, 0x3fc0, 0xdc0b, 0x1908, 0xd0c8, 0x1, 0x0);
        gbc.writeMem(0x65df, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x58af);
        EXPECT(gbc.pc(), 0x65e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 023C
        gbc.setState(0x7898, 0x2dfe, 0xca0, 0x573e, 0x5cc5, 0xf7c3, 0x0, 0x1);
        gbc.writeMem(0x7898, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2dfe);
        EXPECT(gbc.pc(), 0x789a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 023D
        gbc.setState(0xefd8, 0x3d19, 0xbaf0, 0x2316, 0xd310, 0x1ba7, 0x1, 0x0);
        gbc.writeMem(0xefd8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3d19);
        EXPECT(gbc.pc(), 0xefda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd8), 0xcb);
        EXPECT(gbc.readMem(0xefd9), 0x47);
        // CB 47 023E
        gbc.setState(0xc817, 0xa98, 0x5450, 0x5c3c, 0xb8c2, 0x3cf, 0x0, 0x1);
        gbc.writeMem(0xc817, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa98);
        EXPECT(gbc.pc(), 0xc819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc817), 0xcb);
        EXPECT(gbc.readMem(0xc818), 0x47);
        // CB 47 023F
        gbc.setState(0x7125, 0x90e0, 0xc690, 0xaf2c, 0x6ee3, 0x52e7, 0x1, 0x0);
        gbc.writeMem(0x7125, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x90e0);
        EXPECT(gbc.pc(), 0x7127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0240
        gbc.setState(0x7ed7, 0xec1a, 0x2360, 0xa6ae, 0x583d, 0x4cd6, 0x1, 0x0);
        gbc.writeMem(0x7ed7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xec1a);
        EXPECT(gbc.pc(), 0x7ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0241
        gbc.setState(0xba32, 0xd705, 0xd180, 0xca14, 0x6f79, 0x3c, 0x0, 0x1);
        gbc.writeMem(0xba32, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd705);
        EXPECT(gbc.pc(), 0xba34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba32), 0xcb);
        EXPECT(gbc.readMem(0xba33), 0x47);
        // CB 47 0242
        gbc.setState(0x27c8, 0x6a6, 0x8b90, 0xb855, 0x246, 0xc05b, 0x0, 0x1);
        gbc.writeMem(0x27c8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6a6);
        EXPECT(gbc.pc(), 0x27ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0243
        gbc.setState(0x47c2, 0xe2a9, 0xdb10, 0xf6e1, 0x6531, 0xbab4, 0x1, 0x0);
        gbc.writeMem(0x47c2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe2a9);
        EXPECT(gbc.pc(), 0x47c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0244
        gbc.setState(0x4479, 0x17a, 0x8360, 0xcbd4, 0x4b8c, 0x5ea7, 0x0, 0x0);
        gbc.writeMem(0x4479, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x17a);
        EXPECT(gbc.pc(), 0x447b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0245
        gbc.setState(0xd13f, 0xc038, 0xa910, 0xb510, 0xe0c9, 0x774d, 0x0, 0x1);
        gbc.writeMem(0xd13f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc038);
        EXPECT(gbc.pc(), 0xd141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd13f), 0xcb);
        EXPECT(gbc.readMem(0xd140), 0x47);
        // CB 47 0246
        gbc.setState(0x8dbd, 0x959, 0x950, 0x60dc, 0xa03d, 0xc3d, 0x0, 0x1);
        gbc.writeMem(0x8dbd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x959);
        EXPECT(gbc.pc(), 0x8dbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dbd), 0xcb);
        EXPECT(gbc.readMem(0x8dbe), 0x47);
        // CB 47 0247
        gbc.setState(0xfdd, 0x3336, 0x2f60, 0xc3e8, 0xc845, 0x25a5, 0x1, 0x1);
        gbc.writeMem(0xfdd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3336);
        EXPECT(gbc.pc(), 0xfdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0248
        gbc.setState(0x47ff, 0xb59a, 0x7b80, 0x8bc0, 0xba3d, 0xf12c, 0x0, 0x1);
        gbc.writeMem(0x47ff, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb59a);
        EXPECT(gbc.pc(), 0x4801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0249
        gbc.setState(0xb64d, 0xfcc9, 0xd360, 0xa4c6, 0x93cd, 0x726, 0x0, 0x0);
        gbc.writeMem(0xb64d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xfcc9);
        EXPECT(gbc.pc(), 0xb64f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb64d), 0xcb);
        EXPECT(gbc.readMem(0xb64e), 0x47);
        // CB 47 024A
        gbc.setState(0x4296, 0xb484, 0x17e0, 0x26e6, 0x8beb, 0xf4b6, 0x1, 0x0);
        gbc.writeMem(0x4296, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb484);
        EXPECT(gbc.pc(), 0x4298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 024B
        gbc.setState(0x6a9c, 0xf53d, 0x7420, 0x2f49, 0xb82d, 0xe3a4, 0x1, 0x0);
        gbc.writeMem(0x6a9c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf53d);
        EXPECT(gbc.pc(), 0x6a9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 024C
        gbc.setState(0xe59b, 0x74e5, 0x12b0, 0xbaeb, 0x3a04, 0xfeb, 0x0, 0x1);
        gbc.writeMem(0xe59b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x74e5);
        EXPECT(gbc.pc(), 0xe59d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe59b), 0xcb);
        EXPECT(gbc.readMem(0xe59c), 0x47);
        // CB 47 024D
        gbc.setState(0x973d, 0x4924, 0xb670, 0x9fa1, 0x5ccd, 0x525b, 0x0, 0x1);
        gbc.writeMem(0x973d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4924);
        EXPECT(gbc.pc(), 0x973f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x973d), 0xcb);
        EXPECT(gbc.readMem(0x973e), 0x47);
        // CB 47 024E
        gbc.setState(0xe46e, 0x9e49, 0xdfc0, 0xb701, 0x62e3, 0x6079, 0x0, 0x0);
        gbc.writeMem(0xe46e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9e49);
        EXPECT(gbc.pc(), 0xe470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46e), 0xcb);
        EXPECT(gbc.readMem(0xe46f), 0x47);
        // CB 47 024F
        gbc.setState(0x2210, 0xa396, 0xad60, 0x2758, 0x1a0, 0x4f7f, 0x0, 0x1);
        gbc.writeMem(0x2210, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa396);
        EXPECT(gbc.pc(), 0x2212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0250
        gbc.setState(0x6dcc, 0x83ae, 0x4630, 0xe3c1, 0x962c, 0x6131, 0x1, 0x1);
        gbc.writeMem(0x6dcc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x83ae);
        EXPECT(gbc.pc(), 0x6dce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0251
        gbc.setState(0xeb89, 0xe16a, 0x81d0, 0xe3ff, 0xb7b, 0xf40c, 0x0, 0x1);
        gbc.writeMem(0xeb89, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe16a);
        EXPECT(gbc.pc(), 0xeb8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb89), 0xcb);
        EXPECT(gbc.readMem(0xeb8a), 0x47);
        // CB 47 0252
        gbc.setState(0x4519, 0x9314, 0xd730, 0xb4cf, 0x2b25, 0x88f9, 0x0, 0x0);
        gbc.writeMem(0x4519, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9314);
        EXPECT(gbc.pc(), 0x451b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0254
        gbc.setState(0x9f20, 0x44a2, 0x25b0, 0x8f86, 0x4a0a, 0xea68, 0x1, 0x0);
        gbc.writeMem(0x9f20, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x44a2);
        EXPECT(gbc.pc(), 0x9f22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f20), 0xcb);
        EXPECT(gbc.readMem(0x9f21), 0x47);
        // CB 47 0255
        gbc.setState(0xe06a, 0x76e4, 0xd3a0, 0xe6ca, 0xfdac, 0x2b84, 0x1, 0x0);
        gbc.writeMem(0xe06a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x76e4);
        EXPECT(gbc.pc(), 0xe06c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe06a), 0xcb);
        EXPECT(gbc.readMem(0xe06b), 0x47);
        // CB 47 0256
        gbc.setState(0x94bb, 0x71a5, 0xdc90, 0x88a9, 0x212a, 0x8d45, 0x0, 0x1);
        gbc.writeMem(0x94bb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x71a5);
        EXPECT(gbc.pc(), 0x94bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94bb), 0xcb);
        EXPECT(gbc.readMem(0x94bc), 0x47);
        // CB 47 0258
        gbc.setState(0xa196, 0xe5b5, 0x830, 0xef13, 0x632b, 0x5360, 0x0, 0x1);
        gbc.writeMem(0xa196, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe5b5);
        EXPECT(gbc.pc(), 0xa198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa196), 0xcb);
        EXPECT(gbc.readMem(0xa197), 0x47);
        // CB 47 0259
        gbc.setState(0x781c, 0x5e26, 0x9b40, 0xb7a2, 0xabe9, 0xe61a, 0x0, 0x1);
        gbc.writeMem(0x781c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5e26);
        EXPECT(gbc.pc(), 0x781e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 025A
        gbc.setState(0x4b85, 0x73c6, 0xf2e0, 0xb036, 0xffb5, 0x2195, 0x0, 0x1);
        gbc.writeMem(0x4b85, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x73c6);
        EXPECT(gbc.pc(), 0x4b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 025B
        gbc.setState(0x4fc2, 0xbdc5, 0x6cd0, 0xb2b4, 0x4b2f, 0x481, 0x0, 0x0);
        gbc.writeMem(0x4fc2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbdc5);
        EXPECT(gbc.pc(), 0x4fc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 025C
        gbc.setState(0x43e1, 0xc858, 0xeca0, 0x9938, 0x9140, 0xe146, 0x0, 0x0);
        gbc.writeMem(0x43e1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc858);
        EXPECT(gbc.pc(), 0x43e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 025D
        gbc.setState(0x211b, 0x789b, 0x4560, 0x18f6, 0x7679, 0xe2b3, 0x0, 0x1);
        gbc.writeMem(0x211b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x789b);
        EXPECT(gbc.pc(), 0x211d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 025E
        gbc.setState(0xc44e, 0x969b, 0xcfe0, 0x8c31, 0x42b, 0x4625, 0x1, 0x1);
        gbc.writeMem(0xc44e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x969b);
        EXPECT(gbc.pc(), 0xc450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc44e), 0xcb);
        EXPECT(gbc.readMem(0xc44f), 0x47);
        // CB 47 025F
        gbc.setState(0x5c54, 0x4fa2, 0x2be0, 0xce3c, 0xe1de, 0x2d58, 0x1, 0x0);
        gbc.writeMem(0x5c54, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4fa2);
        EXPECT(gbc.pc(), 0x5c56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0260
        gbc.setState(0xa143, 0x7f62, 0x5540, 0xaa8, 0x2f5, 0xae60, 0x0, 0x0);
        gbc.writeMem(0xa143, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7f62);
        EXPECT(gbc.pc(), 0xa145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa143), 0xcb);
        EXPECT(gbc.readMem(0xa144), 0x47);
        // CB 47 0261
        gbc.setState(0x55c3, 0xbff1, 0xb520, 0x1796, 0xffba, 0x5fb8, 0x0, 0x0);
        gbc.writeMem(0x55c3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xbff1);
        EXPECT(gbc.pc(), 0x55c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0262
        gbc.setState(0x45cb, 0x4a9e, 0x4a70, 0xa3bd, 0xbac2, 0x3766, 0x1, 0x1);
        gbc.writeMem(0x45cb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x4a9e);
        EXPECT(gbc.pc(), 0x45cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0264
        gbc.setState(0xeb2e, 0x292, 0x1ba0, 0xd795, 0x5fd6, 0x8e0a, 0x1, 0x1);
        gbc.writeMem(0xeb2e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x292);
        EXPECT(gbc.pc(), 0xeb30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb2e), 0xcb);
        EXPECT(gbc.readMem(0xeb2f), 0x47);
        // CB 47 0265
        gbc.setState(0xbd6, 0xfe54, 0x8d30, 0xe824, 0xdab6, 0x8fe0, 0x1, 0x0);
        gbc.writeMem(0xbd6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfe54);
        EXPECT(gbc.pc(), 0xbd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0266
        gbc.setState(0x6081, 0xe211, 0xe40, 0xd462, 0x5d49, 0x42c8, 0x0, 0x1);
        gbc.writeMem(0x6081, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe211);
        EXPECT(gbc.pc(), 0x6083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0268
        gbc.setState(0x27a5, 0xc1c5, 0x12c0, 0xed82, 0xc07e, 0xf24a, 0x1, 0x1);
        gbc.writeMem(0x27a5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc1c5);
        EXPECT(gbc.pc(), 0x27a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0269
        gbc.setState(0x28f9, 0x316, 0xb8c0, 0x739f, 0xe5d7, 0x6fc6, 0x1, 0x0);
        gbc.writeMem(0x28f9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x316);
        EXPECT(gbc.pc(), 0x28fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 026A
        gbc.setState(0x299d, 0x3bec, 0xd130, 0xde00, 0x6f6a, 0x5f3a, 0x1, 0x1);
        gbc.writeMem(0x299d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3bec);
        EXPECT(gbc.pc(), 0x299f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 026B
        gbc.setState(0x770c, 0xeefa, 0x69d0, 0xedc9, 0x443a, 0x544f, 0x0, 0x1);
        gbc.writeMem(0x770c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xeefa);
        EXPECT(gbc.pc(), 0x770e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 026C
        gbc.setState(0xbf88, 0xcc86, 0xf7d0, 0x9e2e, 0xf645, 0x93eb, 0x1, 0x0);
        gbc.writeMem(0xbf88, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xcc86);
        EXPECT(gbc.pc(), 0xbf8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf88), 0xcb);
        EXPECT(gbc.readMem(0xbf89), 0x47);
        // CB 47 026D
        gbc.setState(0xdd12, 0x6598, 0x2830, 0x4018, 0xf1f1, 0x4878, 0x0, 0x1);
        gbc.writeMem(0xdd12, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6598);
        EXPECT(gbc.pc(), 0xdd14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd12), 0xcb);
        EXPECT(gbc.readMem(0xdd13), 0x47);
        // CB 47 026E
        gbc.setState(0x45c5, 0x2efe, 0x3370, 0x9181, 0x2052, 0xd58b, 0x0, 0x0);
        gbc.writeMem(0x45c5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2efe);
        EXPECT(gbc.pc(), 0x45c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 026F
        gbc.setState(0x7521, 0x305f, 0x6790, 0x3e97, 0x8054, 0xfc63, 0x1, 0x0);
        gbc.writeMem(0x7521, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x305f);
        EXPECT(gbc.pc(), 0x7523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0270
        gbc.setState(0x5ea0, 0xc605, 0xf7c0, 0xa193, 0xd64a, 0xc1d4, 0x1, 0x1);
        gbc.writeMem(0x5ea0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc605);
        EXPECT(gbc.pc(), 0x5ea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0271
        gbc.setState(0x2ec1, 0x43de, 0xa710, 0x5e57, 0xb20e, 0x367b, 0x0, 0x0);
        gbc.writeMem(0x2ec1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x43de);
        EXPECT(gbc.pc(), 0x2ec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0272
        gbc.setState(0xd3e8, 0xad55, 0x6560, 0xee9d, 0x89c5, 0x75a5, 0x0, 0x0);
        gbc.writeMem(0xd3e8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xad55);
        EXPECT(gbc.pc(), 0xd3ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e8), 0xcb);
        EXPECT(gbc.readMem(0xd3e9), 0x47);
        // CB 47 0273
        gbc.setState(0xad65, 0x291f, 0x7d90, 0xb95a, 0xbafd, 0xeefc, 0x0, 0x1);
        gbc.writeMem(0xad65, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x291f);
        EXPECT(gbc.pc(), 0xad67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad65), 0xcb);
        EXPECT(gbc.readMem(0xad66), 0x47);
        // CB 47 0274
        gbc.setState(0x9330, 0x94ce, 0x6360, 0x7a72, 0x90e7, 0x5306, 0x1, 0x0);
        gbc.writeMem(0x9330, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x94ce);
        EXPECT(gbc.pc(), 0x9332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9330), 0xcb);
        EXPECT(gbc.readMem(0x9331), 0x47);
        // CB 47 0275
        gbc.setState(0x39a0, 0xd838, 0x26b0, 0x18b1, 0xfdd8, 0x172d, 0x1, 0x1);
        gbc.writeMem(0x39a0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd838);
        EXPECT(gbc.pc(), 0x39a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0276
        gbc.setState(0x999a, 0x37d0, 0x3ce0, 0x8a29, 0x4c23, 0xb643, 0x1, 0x1);
        gbc.writeMem(0x999a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x37d0);
        EXPECT(gbc.pc(), 0x999c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x999a), 0xcb);
        EXPECT(gbc.readMem(0x999b), 0x47);
        // CB 47 0277
        gbc.setState(0x52ab, 0x610b, 0xb2b0, 0x2465, 0x1d24, 0x2614, 0x0, 0x0);
        gbc.writeMem(0x52ab, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x610b);
        EXPECT(gbc.pc(), 0x52ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0278
        gbc.setState(0x44f7, 0x6887, 0xf250, 0x5ce4, 0x53ee, 0xacdb, 0x0, 0x0);
        gbc.writeMem(0x44f7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6887);
        EXPECT(gbc.pc(), 0x44f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0279
        gbc.setState(0x4e60, 0xcd13, 0x2d80, 0x359f, 0x3db6, 0x64e3, 0x1, 0x1);
        gbc.writeMem(0x4e60, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xcd13);
        EXPECT(gbc.pc(), 0x4e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 027A
        gbc.setState(0xe9f3, 0x95fe, 0x6290, 0xbfa5, 0x434f, 0xf65, 0x0, 0x1);
        gbc.writeMem(0xe9f3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x95fe);
        EXPECT(gbc.pc(), 0xe9f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f3), 0xcb);
        EXPECT(gbc.readMem(0xe9f4), 0x47);
        // CB 47 027B
        gbc.setState(0x51c7, 0x4a4d, 0x8000, 0x28d6, 0x3d1f, 0x7e93, 0x1, 0x1);
        gbc.writeMem(0x51c7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4a4d);
        EXPECT(gbc.pc(), 0x51c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 027C
        gbc.setState(0x3414, 0xf068, 0x47b0, 0x6d42, 0x8529, 0x3bf2, 0x0, 0x0);
        gbc.writeMem(0x3414, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf068);
        EXPECT(gbc.pc(), 0x3416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 027D
        gbc.setState(0xaae5, 0xd9de, 0xc4d0, 0x695e, 0x97, 0x6465, 0x0, 0x0);
        gbc.writeMem(0xaae5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd9de);
        EXPECT(gbc.pc(), 0xaae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaae5), 0xcb);
        EXPECT(gbc.readMem(0xaae6), 0x47);
        // CB 47 027E
        gbc.setState(0x2808, 0xe113, 0x55e0, 0xee81, 0xe083, 0xaa91, 0x0, 0x0);
        gbc.writeMem(0x2808, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe113);
        EXPECT(gbc.pc(), 0x280a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 027F
        gbc.setState(0x8813, 0x54db, 0x630, 0xf562, 0xa599, 0x2a0d, 0x1, 0x1);
        gbc.writeMem(0x8813, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x54db);
        EXPECT(gbc.pc(), 0x8815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8813), 0xcb);
        EXPECT(gbc.readMem(0x8814), 0x47);
        // CB 47 0280
        gbc.setState(0xe867, 0xf62d, 0x86e0, 0x9292, 0x7e04, 0x2c8e, 0x0, 0x1);
        gbc.writeMem(0xe867, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf62d);
        EXPECT(gbc.pc(), 0xe869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe867), 0xcb);
        EXPECT(gbc.readMem(0xe868), 0x47);
        // CB 47 0281
        gbc.setState(0x4ba5, 0x9c53, 0x55b0, 0xc4f4, 0xba68, 0xf2c0, 0x0, 0x0);
        gbc.writeMem(0x4ba5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9c53);
        EXPECT(gbc.pc(), 0x4ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0282
        gbc.setState(0x30e3, 0x9473, 0xec00, 0x7739, 0x9ec4, 0xfdd3, 0x1, 0x0);
        gbc.writeMem(0x30e3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9473);
        EXPECT(gbc.pc(), 0x30e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0283
        gbc.setState(0x85fc, 0xe456, 0x7050, 0x71f3, 0xa423, 0x4c5b, 0x1, 0x0);
        gbc.writeMem(0x85fc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe456);
        EXPECT(gbc.pc(), 0x85fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85fc), 0xcb);
        EXPECT(gbc.readMem(0x85fd), 0x47);
        // CB 47 0284
        gbc.setState(0xde8, 0x8b3a, 0xa8b0, 0x8548, 0x88ca, 0xc84f, 0x1, 0x1);
        gbc.writeMem(0xde8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8b3a);
        EXPECT(gbc.pc(), 0xdea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0285
        gbc.setState(0xb8d3, 0xd1e9, 0x1a0, 0xa704, 0x5e0d, 0x7fa6, 0x1, 0x0);
        gbc.writeMem(0xb8d3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd1e9);
        EXPECT(gbc.pc(), 0xb8d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8d3), 0xcb);
        EXPECT(gbc.readMem(0xb8d4), 0x47);
        // CB 47 0286
        gbc.setState(0x607c, 0x5cf8, 0x480, 0x1e29, 0x2fb7, 0xa92, 0x0, 0x1);
        gbc.writeMem(0x607c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5cf8);
        EXPECT(gbc.pc(), 0x607e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0287
        gbc.setState(0xaed8, 0x554, 0xa080, 0x86f1, 0xd29a, 0xf18c, 0x0, 0x0);
        gbc.writeMem(0xaed8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x554);
        EXPECT(gbc.pc(), 0xaeda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed8), 0xcb);
        EXPECT(gbc.readMem(0xaed9), 0x47);
        // CB 47 0288
        gbc.setState(0x2e0b, 0x2243, 0x4b20, 0x9682, 0x5f2a, 0x3f3c, 0x1, 0x0);
        gbc.writeMem(0x2e0b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2243);
        EXPECT(gbc.pc(), 0x2e0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0289
        gbc.setState(0x5a87, 0x218f, 0x3cb0, 0x5efc, 0x58e0, 0xe0cf, 0x0, 0x0);
        gbc.writeMem(0x5a87, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x218f);
        EXPECT(gbc.pc(), 0x5a89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 028A
        gbc.setState(0x8cfd, 0x5279, 0x1010, 0x169b, 0x3597, 0x9d3, 0x0, 0x1);
        gbc.writeMem(0x8cfd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x5279);
        EXPECT(gbc.pc(), 0x8cff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cfd), 0xcb);
        EXPECT(gbc.readMem(0x8cfe), 0x47);
        // CB 47 028B
        gbc.setState(0x4387, 0x8e8, 0x7c50, 0x5140, 0x1fc3, 0x91ed, 0x0, 0x0);
        gbc.writeMem(0x4387, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8e8);
        EXPECT(gbc.pc(), 0x4389);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 028C
        gbc.setState(0x7181, 0x1437, 0x1460, 0xcdfb, 0x68c8, 0x4869, 0x1, 0x0);
        gbc.writeMem(0x7181, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1437);
        EXPECT(gbc.pc(), 0x7183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 028D
        gbc.setState(0x99b0, 0x94f7, 0xc760, 0x47ea, 0xc886, 0xf5c3, 0x0, 0x0);
        gbc.writeMem(0x99b0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x94f7);
        EXPECT(gbc.pc(), 0x99b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b0), 0xcb);
        EXPECT(gbc.readMem(0x99b1), 0x47);
        // CB 47 028E
        gbc.setState(0xa418, 0x24fb, 0xdce0, 0xe42a, 0x25c0, 0x4005, 0x0, 0x1);
        gbc.writeMem(0xa418, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x24fb);
        EXPECT(gbc.pc(), 0xa41a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa418), 0xcb);
        EXPECT(gbc.readMem(0xa419), 0x47);
        // CB 47 028F
        gbc.setState(0x1adf, 0x4a7f, 0x4f0, 0xc1ec, 0xf90d, 0x1137, 0x1, 0x1);
        gbc.writeMem(0x1adf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x4a7f);
        EXPECT(gbc.pc(), 0x1ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0290
        gbc.setState(0x1760, 0xd093, 0xfc00, 0xe096, 0x7600, 0xd638, 0x0, 0x0);
        gbc.writeMem(0x1760, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd093);
        EXPECT(gbc.pc(), 0x1762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0291
        gbc.setState(0x20d6, 0x6bda, 0x1ff0, 0xa45b, 0x394e, 0xd6d6, 0x1, 0x1);
        gbc.writeMem(0x20d6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6bda);
        EXPECT(gbc.pc(), 0x20d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0292
        gbc.setState(0x7285, 0x5b24, 0xe1b0, 0x6897, 0x5043, 0x9cc9, 0x0, 0x0);
        gbc.writeMem(0x7285, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5b24);
        EXPECT(gbc.pc(), 0x7287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0293
        gbc.setState(0xe809, 0x8756, 0xc910, 0x2105, 0xbee9, 0x15a, 0x0, 0x0);
        gbc.writeMem(0xe809, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8756);
        EXPECT(gbc.pc(), 0xe80b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe809), 0xcb);
        EXPECT(gbc.readMem(0xe80a), 0x47);
        // CB 47 0294
        gbc.setState(0xae8c, 0x726f, 0x6fa0, 0xa908, 0x154f, 0x4058, 0x0, 0x1);
        gbc.writeMem(0xae8c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x726f);
        EXPECT(gbc.pc(), 0xae8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae8c), 0xcb);
        EXPECT(gbc.readMem(0xae8d), 0x47);
        // CB 47 0295
        gbc.setState(0xc173, 0x96d2, 0x94d0, 0xd52c, 0x6cc8, 0x4676, 0x1, 0x0);
        gbc.writeMem(0xc173, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x96d2);
        EXPECT(gbc.pc(), 0xc175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc173), 0xcb);
        EXPECT(gbc.readMem(0xc174), 0x47);
        // CB 47 0296
        gbc.setState(0x3c52, 0x8b35, 0xf830, 0x53a7, 0xd58b, 0x8226, 0x0, 0x0);
        gbc.writeMem(0x3c52, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8b35);
        EXPECT(gbc.pc(), 0x3c54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0297
        gbc.setState(0x27ec, 0xfe2e, 0xfbd0, 0xb364, 0xc55b, 0xa65b, 0x0, 0x1);
        gbc.writeMem(0x27ec, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xfe2e);
        EXPECT(gbc.pc(), 0x27ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0298
        gbc.setState(0xafce, 0x371f, 0xee10, 0xab06, 0xc859, 0xb9fa, 0x0, 0x0);
        gbc.writeMem(0xafce, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x371f);
        EXPECT(gbc.pc(), 0xafd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafce), 0xcb);
        EXPECT(gbc.readMem(0xafcf), 0x47);
        // CB 47 0299
        gbc.setState(0x62e7, 0x5515, 0x2040, 0x8936, 0x9957, 0xef1, 0x0, 0x0);
        gbc.writeMem(0x62e7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5515);
        EXPECT(gbc.pc(), 0x62e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 029B
        gbc.setState(0x298c, 0xb4dc, 0x7fd0, 0x6ec9, 0xba90, 0xd00f, 0x1, 0x1);
        gbc.writeMem(0x298c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb4dc);
        EXPECT(gbc.pc(), 0x298e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 029C
        gbc.setState(0x3e4d, 0x9005, 0xac50, 0x9dfa, 0x6b74, 0xcce3, 0x1, 0x1);
        gbc.writeMem(0x3e4d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9005);
        EXPECT(gbc.pc(), 0x3e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 029D
        gbc.setState(0x6535, 0xd8bd, 0x81e0, 0x5d99, 0x27bc, 0x4376, 0x0, 0x0);
        gbc.writeMem(0x6535, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd8bd);
        EXPECT(gbc.pc(), 0x6537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 029E
        gbc.setState(0x9210, 0xcc7f, 0x6170, 0xd727, 0x5b75, 0xbe, 0x0, 0x1);
        gbc.writeMem(0x9210, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xcc7f);
        EXPECT(gbc.pc(), 0x9212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9210), 0xcb);
        EXPECT(gbc.readMem(0x9211), 0x47);
        // CB 47 029F
        gbc.setState(0xa576, 0xeacd, 0x8d00, 0xe5b0, 0x8191, 0x21c3, 0x0, 0x1);
        gbc.writeMem(0xa576, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xeacd);
        EXPECT(gbc.pc(), 0xa578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa576), 0xcb);
        EXPECT(gbc.readMem(0xa577), 0x47);
        // CB 47 02A0
        gbc.setState(0xbbc7, 0x97b1, 0x8540, 0xb79d, 0x9d91, 0xd2c0, 0x0, 0x1);
        gbc.writeMem(0xbbc7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x97b1);
        EXPECT(gbc.pc(), 0xbbc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbc7), 0xcb);
        EXPECT(gbc.readMem(0xbbc8), 0x47);
        // CB 47 02A1
        gbc.setState(0x2540, 0xdc92, 0x9670, 0x4924, 0xcfa, 0x73e0, 0x1, 0x0);
        gbc.writeMem(0x2540, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xdc92);
        EXPECT(gbc.pc(), 0x2542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02A3
        gbc.setState(0x77a5, 0x3b14, 0xcea0, 0x69aa, 0x40ba, 0xa197, 0x0, 0x1);
        gbc.writeMem(0x77a5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3b14);
        EXPECT(gbc.pc(), 0x77a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02A4
        gbc.setState(0xb026, 0x39fc, 0xfe60, 0x5f16, 0xef37, 0xba68, 0x0, 0x1);
        gbc.writeMem(0xb026, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x39fc);
        EXPECT(gbc.pc(), 0xb028);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb026), 0xcb);
        EXPECT(gbc.readMem(0xb027), 0x47);
        // CB 47 02A5
        gbc.setState(0x8d71, 0xdab3, 0x8c50, 0x1c8f, 0x3712, 0x569d, 0x0, 0x0);
        gbc.writeMem(0x8d71, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xdab3);
        EXPECT(gbc.pc(), 0x8d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d71), 0xcb);
        EXPECT(gbc.readMem(0x8d72), 0x47);
        // CB 47 02A6
        gbc.setState(0x86a, 0x310, 0xa60, 0x69d8, 0x1e03, 0xa41b, 0x1, 0x1);
        gbc.writeMem(0x86a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x310);
        EXPECT(gbc.pc(), 0x86c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02A7
        gbc.setState(0xc6cf, 0xc17f, 0x6970, 0x8f7, 0x5923, 0xdb95, 0x1, 0x0);
        gbc.writeMem(0xc6cf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc17f);
        EXPECT(gbc.pc(), 0xc6d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6cf), 0xcb);
        EXPECT(gbc.readMem(0xc6d0), 0x47);
        // CB 47 02A8
        gbc.setState(0xd6b4, 0xfc4e, 0xe7d0, 0x2a1b, 0xc614, 0xd3a9, 0x1, 0x1);
        gbc.writeMem(0xd6b4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfc4e);
        EXPECT(gbc.pc(), 0xd6b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b4), 0xcb);
        EXPECT(gbc.readMem(0xd6b5), 0x47);
        // CB 47 02A9
        gbc.setState(0x600a, 0x36f0, 0x5570, 0x25bb, 0xc6fd, 0x763e, 0x0, 0x0);
        gbc.writeMem(0x600a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x36f0);
        EXPECT(gbc.pc(), 0x600c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02AA
        gbc.setState(0x84f3, 0xc584, 0x1600, 0xe00, 0x4541, 0xb42e, 0x1, 0x0);
        gbc.writeMem(0x84f3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc584);
        EXPECT(gbc.pc(), 0x84f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f3), 0xcb);
        EXPECT(gbc.readMem(0x84f4), 0x47);
        // CB 47 02AB
        gbc.setState(0x7c41, 0x3460, 0xdf90, 0xcf04, 0xe63f, 0xed7b, 0x0, 0x0);
        gbc.writeMem(0x7c41, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3460);
        EXPECT(gbc.pc(), 0x7c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02AC
        gbc.setState(0xbc6, 0x3b6d, 0xe8f0, 0xd1f1, 0x6549, 0x834e, 0x0, 0x0);
        gbc.writeMem(0xbc6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3b6d);
        EXPECT(gbc.pc(), 0xbc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02AE
        gbc.setState(0x704b, 0x1f0c, 0x66e0, 0x3e40, 0xe8db, 0xa318, 0x1, 0x0);
        gbc.writeMem(0x704b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1f0c);
        EXPECT(gbc.pc(), 0x704d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02AF
        gbc.setState(0xacc9, 0xa2ea, 0x6e60, 0x6b37, 0x357d, 0x8794, 0x0, 0x1);
        gbc.writeMem(0xacc9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa2ea);
        EXPECT(gbc.pc(), 0xaccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc9), 0xcb);
        EXPECT(gbc.readMem(0xacca), 0x47);
        // CB 47 02B0
        gbc.setState(0xe61e, 0x638a, 0xda30, 0x4c57, 0xdb53, 0xc867, 0x0, 0x0);
        gbc.writeMem(0xe61e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x638a);
        EXPECT(gbc.pc(), 0xe620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe61e), 0xcb);
        EXPECT(gbc.readMem(0xe61f), 0x47);
        // CB 47 02B1
        gbc.setState(0x3c3f, 0x15cb, 0xcf40, 0x56e6, 0xa705, 0x83b2, 0x1, 0x1);
        gbc.writeMem(0x3c3f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x15cb);
        EXPECT(gbc.pc(), 0x3c41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02B2
        gbc.setState(0xa343, 0xc41b, 0xb230, 0xa936, 0x4fe3, 0x9d18, 0x0, 0x0);
        gbc.writeMem(0xa343, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xc41b);
        EXPECT(gbc.pc(), 0xa345);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa343), 0xcb);
        EXPECT(gbc.readMem(0xa344), 0x47);
        // CB 47 02B3
        gbc.setState(0xe57f, 0x2b4e, 0x5b0, 0xd765, 0x7281, 0xadfc, 0x0, 0x0);
        gbc.writeMem(0xe57f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2b4e);
        EXPECT(gbc.pc(), 0xe581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe57f), 0xcb);
        EXPECT(gbc.readMem(0xe580), 0x47);
        // CB 47 02B4
        gbc.setState(0x162b, 0x7965, 0xdab0, 0xacc6, 0xa6bf, 0x5cb9, 0x1, 0x0);
        gbc.writeMem(0x162b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7965);
        EXPECT(gbc.pc(), 0x162d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02B5
        gbc.setState(0x9ff4, 0xeaac, 0x79d0, 0xd06d, 0xb013, 0x4e39, 0x0, 0x0);
        gbc.writeMem(0x9ff4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xeaac);
        EXPECT(gbc.pc(), 0x9ff6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ff4), 0xcb);
        EXPECT(gbc.readMem(0x9ff5), 0x47);
        // CB 47 02B6
        gbc.setState(0x7b86, 0x44ab, 0xc8f0, 0x928e, 0x4f85, 0x2c4c, 0x1, 0x1);
        gbc.writeMem(0x7b86, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x44ab);
        EXPECT(gbc.pc(), 0x7b88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02B7
        gbc.setState(0xa7d1, 0xd7d8, 0xe180, 0xeec4, 0x3f65, 0x1516, 0x1, 0x1);
        gbc.writeMem(0xa7d1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd7d8);
        EXPECT(gbc.pc(), 0xa7d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d1), 0xcb);
        EXPECT(gbc.readMem(0xa7d2), 0x47);
        // CB 47 02B8
        gbc.setState(0x1f83, 0xbc75, 0xa700, 0x2492, 0x2770, 0x8a0f, 0x0, 0x1);
        gbc.writeMem(0x1f83, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbc75);
        EXPECT(gbc.pc(), 0x1f85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02B9
        gbc.setState(0xc6e6, 0x17f4, 0x64a0, 0x8c95, 0xada3, 0x44b7, 0x0, 0x0);
        gbc.writeMem(0xc6e6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x17f4);
        EXPECT(gbc.pc(), 0xc6e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e6), 0xcb);
        EXPECT(gbc.readMem(0xc6e7), 0x47);
        // CB 47 02BA
        gbc.setState(0x72e0, 0xf35b, 0x6fb0, 0x253b, 0xdecb, 0x7845, 0x0, 0x1);
        gbc.writeMem(0x72e0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf35b);
        EXPECT(gbc.pc(), 0x72e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02BB
        gbc.setState(0x454, 0x6279, 0x7920, 0x19c5, 0xec19, 0x1b90, 0x1, 0x0);
        gbc.writeMem(0x454, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6279);
        EXPECT(gbc.pc(), 0x456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02BC
        gbc.setState(0x745d, 0x53ba, 0x45c0, 0x1b8c, 0xd186, 0xee58, 0x1, 0x1);
        gbc.writeMem(0x745d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x53ba);
        EXPECT(gbc.pc(), 0x745f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02BD
        gbc.setState(0x9cec, 0x633e, 0xc0f0, 0x2bb2, 0x4e2e, 0x45d, 0x1, 0x1);
        gbc.writeMem(0x9cec, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x633e);
        EXPECT(gbc.pc(), 0x9cee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cec), 0xcb);
        EXPECT(gbc.readMem(0x9ced), 0x47);
        // CB 47 02BE
        gbc.setState(0x2d8, 0x2742, 0x7680, 0x514e, 0x8378, 0xb021, 0x0, 0x1);
        gbc.writeMem(0x2d8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2742);
        EXPECT(gbc.pc(), 0x2da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02BF
        gbc.setState(0xa51d, 0x744e, 0x75b0, 0xa8b1, 0x4869, 0x6b14, 0x1, 0x1);
        gbc.writeMem(0xa51d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x744e);
        EXPECT(gbc.pc(), 0xa51f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa51d), 0xcb);
        EXPECT(gbc.readMem(0xa51e), 0x47);
        // CB 47 02C0
        gbc.setState(0xee3b, 0x7a4e, 0x2480, 0xfb27, 0xd397, 0x9501, 0x1, 0x1);
        gbc.writeMem(0xee3b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7a4e);
        EXPECT(gbc.pc(), 0xee3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee3b), 0xcb);
        EXPECT(gbc.readMem(0xee3c), 0x47);
        // CB 47 02C1
        gbc.setState(0x2530, 0x1cbd, 0x40c0, 0x82e1, 0x87f6, 0x61f1, 0x0, 0x1);
        gbc.writeMem(0x2530, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1cbd);
        EXPECT(gbc.pc(), 0x2532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02C2
        gbc.setState(0xa1be, 0x598c, 0xa200, 0xdea2, 0x2bc1, 0x2d7b, 0x0, 0x1);
        gbc.writeMem(0xa1be, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x598c);
        EXPECT(gbc.pc(), 0xa1c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1be), 0xcb);
        EXPECT(gbc.readMem(0xa1bf), 0x47);
        // CB 47 02C3
        gbc.setState(0xa6a9, 0x864c, 0xeab0, 0xd2e6, 0x36ed, 0xde51, 0x1, 0x1);
        gbc.writeMem(0xa6a9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x864c);
        EXPECT(gbc.pc(), 0xa6ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a9), 0xcb);
        EXPECT(gbc.readMem(0xa6aa), 0x47);
        // CB 47 02C4
        gbc.setState(0xb80e, 0x80e0, 0x34d0, 0xd07f, 0xa6d6, 0x6ab8, 0x0, 0x1);
        gbc.writeMem(0xb80e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x80e0);
        EXPECT(gbc.pc(), 0xb810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80e), 0xcb);
        EXPECT(gbc.readMem(0xb80f), 0x47);
        // CB 47 02C5
        gbc.setState(0xcdda, 0xb227, 0x11a0, 0xd37f, 0xc8eb, 0x8b32, 0x0, 0x1);
        gbc.writeMem(0xcdda, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb227);
        EXPECT(gbc.pc(), 0xcddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdda), 0xcb);
        EXPECT(gbc.readMem(0xcddb), 0x47);
        // CB 47 02C6
        gbc.setState(0x61a9, 0xffd6, 0xdda0, 0x9e7a, 0xd035, 0xa1c5, 0x0, 0x0);
        gbc.writeMem(0x61a9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xffd6);
        EXPECT(gbc.pc(), 0x61ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02C7
        gbc.setState(0x9310, 0x5279, 0xa9a0, 0x49a6, 0x9ab2, 0x5dd4, 0x0, 0x0);
        gbc.writeMem(0x9310, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5279);
        EXPECT(gbc.pc(), 0x9312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9310), 0xcb);
        EXPECT(gbc.readMem(0x9311), 0x47);
        // CB 47 02C8
        gbc.setState(0x7834, 0x43f, 0xfe50, 0x98f2, 0x8e84, 0xed3b, 0x0, 0x0);
        gbc.writeMem(0x7834, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x43f);
        EXPECT(gbc.pc(), 0x7836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02C9
        gbc.setState(0xe974, 0x6e9b, 0x44c0, 0xe9a0, 0xc70f, 0x4f02, 0x0, 0x0);
        gbc.writeMem(0xe974, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6e9b);
        EXPECT(gbc.pc(), 0xe976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe974), 0xcb);
        EXPECT(gbc.readMem(0xe975), 0x47);
        // CB 47 02CA
        gbc.setState(0xe684, 0xf15f, 0xdf00, 0x107, 0x23cd, 0x923f, 0x0, 0x1);
        gbc.writeMem(0xe684, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf15f);
        EXPECT(gbc.pc(), 0xe686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe684), 0xcb);
        EXPECT(gbc.readMem(0xe685), 0x47);
        // CB 47 02CB
        gbc.setState(0xb1a, 0x6c02, 0x9ba0, 0xcb98, 0x4f79, 0x53aa, 0x1, 0x0);
        gbc.writeMem(0xb1a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6c02);
        EXPECT(gbc.pc(), 0xb1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02CC
        gbc.setState(0x510b, 0x144b, 0xdb10, 0x26d, 0xfeb9, 0x9eaf, 0x0, 0x0);
        gbc.writeMem(0x510b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x144b);
        EXPECT(gbc.pc(), 0x510d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02CD
        gbc.setState(0x75dc, 0x26b6, 0x6660, 0x65cd, 0x5d5b, 0x41d5, 0x1, 0x1);
        gbc.writeMem(0x75dc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x26b6);
        EXPECT(gbc.pc(), 0x75de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02CE
        gbc.setState(0xcdae, 0xdfcf, 0x4020, 0x8bfb, 0x5ca5, 0x9fc8, 0x0, 0x1);
        gbc.writeMem(0xcdae, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdfcf);
        EXPECT(gbc.pc(), 0xcdb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdae), 0xcb);
        EXPECT(gbc.readMem(0xcdaf), 0x47);
        // CB 47 02CF
        gbc.setState(0x8ada, 0xc6f8, 0xc670, 0x2344, 0x6cf6, 0x60ab, 0x1, 0x0);
        gbc.writeMem(0x8ada, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc6f8);
        EXPECT(gbc.pc(), 0x8adc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ada), 0xcb);
        EXPECT(gbc.readMem(0x8adb), 0x47);
        // CB 47 02D0
        gbc.setState(0xa714, 0x68bc, 0xeb70, 0x3e19, 0xd085, 0x7df9, 0x1, 0x0);
        gbc.writeMem(0xa714, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x68bc);
        EXPECT(gbc.pc(), 0xa716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa714), 0xcb);
        EXPECT(gbc.readMem(0xa715), 0x47);
        // CB 47 02D1
        gbc.setState(0xa132, 0x649d, 0x20c0, 0x9320, 0x5297, 0xb3c9, 0x0, 0x1);
        gbc.writeMem(0xa132, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x649d);
        EXPECT(gbc.pc(), 0xa134);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa132), 0xcb);
        EXPECT(gbc.readMem(0xa133), 0x47);
        // CB 47 02D2
        gbc.setState(0xa674, 0xb437, 0x4f20, 0x74dc, 0xa095, 0x3461, 0x0, 0x0);
        gbc.writeMem(0xa674, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb437);
        EXPECT(gbc.pc(), 0xa676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa674), 0xcb);
        EXPECT(gbc.readMem(0xa675), 0x47);
        // CB 47 02D3
        gbc.setState(0xb5d2, 0xc903, 0x5620, 0x27bb, 0x30e4, 0x1117, 0x0, 0x0);
        gbc.writeMem(0xb5d2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc903);
        EXPECT(gbc.pc(), 0xb5d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5d2), 0xcb);
        EXPECT(gbc.readMem(0xb5d3), 0x47);
        // CB 47 02D4
        gbc.setState(0x508e, 0x81bb, 0x5290, 0xc5cc, 0x118a, 0xaefa, 0x0, 0x1);
        gbc.writeMem(0x508e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x81bb);
        EXPECT(gbc.pc(), 0x5090);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02D5
        gbc.setState(0x3ed7, 0x9c13, 0x2a60, 0xfc47, 0xb6b4, 0xf8ac, 0x1, 0x1);
        gbc.writeMem(0x3ed7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x9c13);
        EXPECT(gbc.pc(), 0x3ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02D6
        gbc.setState(0x5cb1, 0x26ce, 0xe800, 0x9474, 0x3e65, 0x8f54, 0x0, 0x0);
        gbc.writeMem(0x5cb1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x26ce);
        EXPECT(gbc.pc(), 0x5cb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02D8
        gbc.setState(0x9c96, 0x8d1b, 0xb470, 0xeacc, 0x30b1, 0x22af, 0x0, 0x0);
        gbc.writeMem(0x9c96, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8d1b);
        EXPECT(gbc.pc(), 0x9c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c96), 0xcb);
        EXPECT(gbc.readMem(0x9c97), 0x47);
        // CB 47 02D9
        gbc.setState(0x4515, 0x266a, 0xe420, 0x3aca, 0xb14f, 0x5c25, 0x1, 0x0);
        gbc.writeMem(0x4515, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x266a);
        EXPECT(gbc.pc(), 0x4517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02DC
        gbc.setState(0x68ae, 0x1034, 0xf800, 0xfc3f, 0x5d9b, 0x6543, 0x1, 0x1);
        gbc.writeMem(0x68ae, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1034);
        EXPECT(gbc.pc(), 0x68b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02DD
        gbc.setState(0xb20d, 0x3387, 0xdfa0, 0x21c5, 0x7d99, 0x10ba, 0x1, 0x1);
        gbc.writeMem(0xb20d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3387);
        EXPECT(gbc.pc(), 0xb20f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb20d), 0xcb);
        EXPECT(gbc.readMem(0xb20e), 0x47);
        // CB 47 02DE
        gbc.setState(0xe9b3, 0x1344, 0x5580, 0x3a16, 0xfacc, 0x62e9, 0x1, 0x0);
        gbc.writeMem(0xe9b3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1344);
        EXPECT(gbc.pc(), 0xe9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b3), 0xcb);
        EXPECT(gbc.readMem(0xe9b4), 0x47);
        // CB 47 02DF
        gbc.setState(0xc32f, 0x3bbc, 0x2910, 0x664e, 0x2c31, 0xfb09, 0x1, 0x1);
        gbc.writeMem(0xc32f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3bbc);
        EXPECT(gbc.pc(), 0xc331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc32f), 0xcb);
        EXPECT(gbc.readMem(0xc330), 0x47);
        // CB 47 02E0
        gbc.setState(0x8ce3, 0xeef6, 0x4e80, 0x149a, 0x7628, 0x9b9d, 0x0, 0x0);
        gbc.writeMem(0x8ce3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xeef6);
        EXPECT(gbc.pc(), 0x8ce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce3), 0xcb);
        EXPECT(gbc.readMem(0x8ce4), 0x47);
        // CB 47 02E2
        gbc.setState(0x3d1d, 0x6a37, 0x6960, 0xcee8, 0xb034, 0xdf45, 0x1, 0x0);
        gbc.writeMem(0x3d1d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6a37);
        EXPECT(gbc.pc(), 0x3d1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02E3
        gbc.setState(0x6620, 0x53ae, 0xad80, 0xf1e4, 0x6684, 0x31de, 0x1, 0x0);
        gbc.writeMem(0x6620, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x53ae);
        EXPECT(gbc.pc(), 0x6622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02E4
        gbc.setState(0x2eb1, 0xed5c, 0xe4b0, 0x4281, 0xea09, 0xfc71, 0x1, 0x1);
        gbc.writeMem(0x2eb1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xed5c);
        EXPECT(gbc.pc(), 0x2eb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02E5
        gbc.setState(0xcbea, 0x6669, 0x6ff0, 0x228a, 0x7a9d, 0x4d09, 0x0, 0x1);
        gbc.writeMem(0xcbea, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6669);
        EXPECT(gbc.pc(), 0xcbec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbea), 0xcb);
        EXPECT(gbc.readMem(0xcbeb), 0x47);
        // CB 47 02E6
        gbc.setState(0x892f, 0x9c97, 0x9bf0, 0xbde2, 0xab7a, 0x9930, 0x0, 0x0);
        gbc.writeMem(0x892f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x9c97);
        EXPECT(gbc.pc(), 0x8931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x892f), 0xcb);
        EXPECT(gbc.readMem(0x8930), 0x47);
        // CB 47 02E7
        gbc.setState(0x1e5, 0xdd92, 0xaa50, 0x6fb9, 0x8d82, 0xa471, 0x0, 0x0);
        gbc.writeMem(0x1e5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xdd92);
        EXPECT(gbc.pc(), 0x1e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02E8
        gbc.setState(0x5dad, 0x9e83, 0x7b0, 0xc5da, 0x8edc, 0x9820, 0x0, 0x1);
        gbc.writeMem(0x5dad, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9e83);
        EXPECT(gbc.pc(), 0x5daf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02E9
        gbc.setState(0x5060, 0x7b46, 0x88c0, 0x9b9b, 0xeb10, 0x19c0, 0x1, 0x0);
        gbc.writeMem(0x5060, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7b46);
        EXPECT(gbc.pc(), 0x5062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02EA
        gbc.setState(0xed20, 0xb7e4, 0xd420, 0xf61d, 0x4daf, 0xbde5, 0x0, 0x1);
        gbc.writeMem(0xed20, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb7e4);
        EXPECT(gbc.pc(), 0xed22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed20), 0xcb);
        EXPECT(gbc.readMem(0xed21), 0x47);
        // CB 47 02EB
        gbc.setState(0xc845, 0xe4b8, 0xff20, 0x7905, 0x7d, 0x8b62, 0x1, 0x1);
        gbc.writeMem(0xc845, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe4b8);
        EXPECT(gbc.pc(), 0xc847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc845), 0xcb);
        EXPECT(gbc.readMem(0xc846), 0x47);
        // CB 47 02ED
        gbc.setState(0x2d6e, 0x6011, 0xe4b0, 0xf040, 0xa3d5, 0x42df, 0x0, 0x1);
        gbc.writeMem(0x2d6e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6011);
        EXPECT(gbc.pc(), 0x2d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02EE
        gbc.setState(0xd031, 0x3a40, 0x6ff0, 0x5ae7, 0xfdaa, 0x7852, 0x1, 0x0);
        gbc.writeMem(0xd031, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3a40);
        EXPECT(gbc.pc(), 0xd033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd031), 0xcb);
        EXPECT(gbc.readMem(0xd032), 0x47);
        // CB 47 02EF
        gbc.setState(0xc2f8, 0xee4f, 0x66b0, 0x30db, 0x3740, 0x8f62, 0x0, 0x0);
        gbc.writeMem(0xc2f8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xee4f);
        EXPECT(gbc.pc(), 0xc2fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2f8), 0xcb);
        EXPECT(gbc.readMem(0xc2f9), 0x47);
        // CB 47 02F0
        gbc.setState(0x7588, 0xdf3e, 0x1250, 0xd99b, 0xd170, 0x14a6, 0x0, 0x0);
        gbc.writeMem(0x7588, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xdf3e);
        EXPECT(gbc.pc(), 0x758a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02F1
        gbc.setState(0x7a5f, 0x733d, 0x4ec0, 0x5304, 0x3e7b, 0xa3c7, 0x0, 0x0);
        gbc.writeMem(0x7a5f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x733d);
        EXPECT(gbc.pc(), 0x7a61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02F2
        gbc.setState(0xdbde, 0x4f5d, 0x4f40, 0x3752, 0xf3a4, 0xb07f, 0x1, 0x0);
        gbc.writeMem(0xdbde, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4f5d);
        EXPECT(gbc.pc(), 0xdbe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbde), 0xcb);
        EXPECT(gbc.readMem(0xdbdf), 0x47);
        // CB 47 02F3
        gbc.setState(0x7819, 0x83fe, 0xad00, 0x406, 0x9315, 0xc539, 0x1, 0x1);
        gbc.writeMem(0x7819, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x83fe);
        EXPECT(gbc.pc(), 0x781b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02F4
        gbc.setState(0x4853, 0x44a5, 0xb590, 0xf21f, 0x2338, 0xca8, 0x0, 0x1);
        gbc.writeMem(0x4853, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x44a5);
        EXPECT(gbc.pc(), 0x4855);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02F5
        gbc.setState(0x7c27, 0x9126, 0x72e0, 0x5b60, 0xb4ae, 0x96fc, 0x0, 0x1);
        gbc.writeMem(0x7c27, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9126);
        EXPECT(gbc.pc(), 0x7c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02F6
        gbc.setState(0x3c36, 0x8b47, 0xcf90, 0x6d5d, 0xab0e, 0x6dbf, 0x1, 0x0);
        gbc.writeMem(0x3c36, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8b47);
        EXPECT(gbc.pc(), 0x3c38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02F7
        gbc.setState(0x80cd, 0x5821, 0xac20, 0xa93c, 0x8322, 0xedb4, 0x0, 0x1);
        gbc.writeMem(0x80cd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5821);
        EXPECT(gbc.pc(), 0x80cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80cd), 0xcb);
        EXPECT(gbc.readMem(0x80ce), 0x47);
        // CB 47 02F8
        gbc.setState(0xc002, 0x7758, 0x52b0, 0x4e39, 0xeaa1, 0x6f99, 0x0, 0x0);
        gbc.writeMem(0xc002, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x7758);
        EXPECT(gbc.pc(), 0xc004);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc002), 0xcb);
        EXPECT(gbc.readMem(0xc003), 0x47);
        // CB 47 02F9
        gbc.setState(0x5d, 0x1de9, 0x2240, 0xe322, 0xc3a0, 0x36ce, 0x0, 0x1);
        gbc.writeMem(0x5d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1de9);
        EXPECT(gbc.pc(), 0x5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 02FA
        gbc.setState(0xb3d8, 0xe81, 0xf1d0, 0x8479, 0x23c7, 0xdc47, 0x1, 0x1);
        gbc.writeMem(0xb3d8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe81);
        EXPECT(gbc.pc(), 0xb3da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d8), 0xcb);
        EXPECT(gbc.readMem(0xb3d9), 0x47);
        // CB 47 02FB
        gbc.setState(0xdc23, 0x2302, 0xce20, 0xc36d, 0x9c2c, 0xb19e, 0x0, 0x1);
        gbc.writeMem(0xdc23, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2302);
        EXPECT(gbc.pc(), 0xdc25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc23), 0xcb);
        EXPECT(gbc.readMem(0xdc24), 0x47);
        // CB 47 02FC
        gbc.setState(0xed07, 0xb582, 0x1fe0, 0x902b, 0x176, 0x2a57, 0x1, 0x0);
        gbc.writeMem(0xed07, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb582);
        EXPECT(gbc.pc(), 0xed09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed07), 0xcb);
        EXPECT(gbc.readMem(0xed08), 0x47);
        // CB 47 02FD
        gbc.setState(0x440b, 0x6d4e, 0x5930, 0x13db, 0x9135, 0x4359, 0x1, 0x0);
        gbc.writeMem(0x440b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6d4e);
        EXPECT(gbc.pc(), 0x440d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02FE
        gbc.setState(0x13ea, 0x27d1, 0x2250, 0xf55f, 0xa3e7, 0x5b80, 0x0, 0x0);
        gbc.writeMem(0x13ea, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x27d1);
        EXPECT(gbc.pc(), 0x13ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 02FF
        gbc.setState(0x7379, 0x9bb4, 0x28b0, 0x240a, 0x793d, 0x5a2, 0x1, 0x0);
        gbc.writeMem(0x7379, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9bb4);
        EXPECT(gbc.pc(), 0x737b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0300
        gbc.setState(0x8ac3, 0x22c4, 0x5590, 0x8122, 0x505, 0xe201, 0x1, 0x1);
        gbc.writeMem(0x8ac3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x22c4);
        EXPECT(gbc.pc(), 0x8ac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac3), 0xcb);
        EXPECT(gbc.readMem(0x8ac4), 0x47);
        // CB 47 0301
        gbc.setState(0xd1a1, 0x6752, 0x9cc0, 0x766b, 0x81bf, 0xaf5f, 0x0, 0x0);
        gbc.writeMem(0xd1a1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6752);
        EXPECT(gbc.pc(), 0xd1a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a1), 0xcb);
        EXPECT(gbc.readMem(0xd1a2), 0x47);
        // CB 47 0302
        gbc.setState(0x2c2d, 0x6105, 0xb550, 0xb01e, 0xf248, 0xc172, 0x1, 0x1);
        gbc.writeMem(0x2c2d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6105);
        EXPECT(gbc.pc(), 0x2c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0303
        gbc.setState(0x7df9, 0xa671, 0xcf60, 0x98ad, 0xefa5, 0x7b78, 0x1, 0x1);
        gbc.writeMem(0x7df9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa671);
        EXPECT(gbc.pc(), 0x7dfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0304
        gbc.setState(0x8866, 0x9198, 0x8f90, 0x4f40, 0x64f1, 0x79c9, 0x1, 0x1);
        gbc.writeMem(0x8866, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9198);
        EXPECT(gbc.pc(), 0x8868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8866), 0xcb);
        EXPECT(gbc.readMem(0x8867), 0x47);
        // CB 47 0305
        gbc.setState(0x504a, 0xa445, 0xd810, 0x6888, 0xc1c0, 0xbd44, 0x1, 0x1);
        gbc.writeMem(0x504a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa445);
        EXPECT(gbc.pc(), 0x504c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0306
        gbc.setState(0x4d1f, 0xa74e, 0xe8b0, 0x429b, 0x1656, 0x40cf, 0x0, 0x0);
        gbc.writeMem(0x4d1f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa74e);
        EXPECT(gbc.pc(), 0x4d21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0307
        gbc.setState(0x5ce6, 0xbe39, 0xdb40, 0xca87, 0xa899, 0x3adf, 0x1, 0x0);
        gbc.writeMem(0x5ce6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xbe39);
        EXPECT(gbc.pc(), 0x5ce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0308
        gbc.setState(0xcccc, 0x1741, 0xd320, 0xfe5d, 0x4fc6, 0x25f6, 0x1, 0x0);
        gbc.writeMem(0xcccc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x1741);
        EXPECT(gbc.pc(), 0xccce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcccc), 0xcb);
        EXPECT(gbc.readMem(0xcccd), 0x47);
        // CB 47 0309
        gbc.setState(0x35a9, 0x5eaf, 0x83f0, 0x536f, 0xcfff, 0x4c91, 0x1, 0x0);
        gbc.writeMem(0x35a9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5eaf);
        EXPECT(gbc.pc(), 0x35ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 030B
        gbc.setState(0x8270, 0x2ccf, 0x62c0, 0xe508, 0xe7f7, 0xb22f, 0x0, 0x0);
        gbc.writeMem(0x8270, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2ccf);
        EXPECT(gbc.pc(), 0x8272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8270), 0xcb);
        EXPECT(gbc.readMem(0x8271), 0x47);
        // CB 47 030C
        gbc.setState(0x72a6, 0x5ab2, 0xddd0, 0x1a1f, 0xe527, 0xe372, 0x1, 0x0);
        gbc.writeMem(0x72a6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5ab2);
        EXPECT(gbc.pc(), 0x72a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 030D
        gbc.setState(0x9a, 0xb891, 0x74f0, 0x8842, 0xa92, 0x82c6, 0x0, 0x1);
        gbc.writeMem(0x9a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb891);
        EXPECT(gbc.pc(), 0x9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 030E
        gbc.setState(0x8a2e, 0xb675, 0x5fb0, 0x6f, 0xc5de, 0x990c, 0x1, 0x0);
        gbc.writeMem(0x8a2e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb675);
        EXPECT(gbc.pc(), 0x8a30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a2e), 0xcb);
        EXPECT(gbc.readMem(0x8a2f), 0x47);
        // CB 47 030F
        gbc.setState(0x254b, 0x7a2c, 0xff60, 0x6be6, 0xeae3, 0xaa14, 0x1, 0x1);
        gbc.writeMem(0x254b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7a2c);
        EXPECT(gbc.pc(), 0x254d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0310
        gbc.setState(0x4774, 0xaa1c, 0xe720, 0x6eb3, 0x9d87, 0xef6a, 0x1, 0x0);
        gbc.writeMem(0x4774, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xaa1c);
        EXPECT(gbc.pc(), 0x4776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0311
        gbc.setState(0xbfdf, 0x5689, 0x2310, 0x6671, 0xfaa0, 0x8454, 0x0, 0x0);
        gbc.writeMem(0xbfdf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5689);
        EXPECT(gbc.pc(), 0xbfe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfdf), 0xcb);
        EXPECT(gbc.readMem(0xbfe0), 0x47);
        // CB 47 0312
        gbc.setState(0x906f, 0xd923, 0x19e0, 0xc197, 0x914b, 0x94a3, 0x0, 0x0);
        gbc.writeMem(0x906f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd923);
        EXPECT(gbc.pc(), 0x9071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906f), 0xcb);
        EXPECT(gbc.readMem(0x9070), 0x47);
        // CB 47 0313
        gbc.setState(0xb97a, 0x9103, 0xa440, 0x491f, 0x122c, 0x8519, 0x0, 0x1);
        gbc.writeMem(0xb97a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9103);
        EXPECT(gbc.pc(), 0xb97c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97a), 0xcb);
        EXPECT(gbc.readMem(0xb97b), 0x47);
        // CB 47 0314
        gbc.setState(0x19e4, 0x7c16, 0x1ed0, 0x1d43, 0x3f42, 0xc736, 0x1, 0x1);
        gbc.writeMem(0x19e4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7c16);
        EXPECT(gbc.pc(), 0x19e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0316
        gbc.setState(0xbbb1, 0x65eb, 0x4a70, 0x68cc, 0x8f32, 0x9f2, 0x1, 0x0);
        gbc.writeMem(0xbbb1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x65eb);
        EXPECT(gbc.pc(), 0xbbb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbb1), 0xcb);
        EXPECT(gbc.readMem(0xbbb2), 0x47);
        // CB 47 0317
        gbc.setState(0x2230, 0xfeb4, 0x4eb0, 0x6faf, 0x253a, 0xa98e, 0x1, 0x0);
        gbc.writeMem(0x2230, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xfeb4);
        EXPECT(gbc.pc(), 0x2232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0318
        gbc.setState(0x33ca, 0xa03b, 0xe460, 0x497f, 0xcd2b, 0x28d1, 0x1, 0x0);
        gbc.writeMem(0x33ca, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa03b);
        EXPECT(gbc.pc(), 0x33cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0319
        gbc.setState(0xeed0, 0xac72, 0x8420, 0x6634, 0x9d9e, 0x55a1, 0x1, 0x1);
        gbc.writeMem(0xeed0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xac72);
        EXPECT(gbc.pc(), 0xeed2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeed0), 0xcb);
        EXPECT(gbc.readMem(0xeed1), 0x47);
        // CB 47 031A
        gbc.setState(0x35b2, 0x2e33, 0x4f20, 0x4188, 0x34ab, 0xa596, 0x1, 0x1);
        gbc.writeMem(0x35b2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2e33);
        EXPECT(gbc.pc(), 0x35b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 031B
        gbc.setState(0x1d0e, 0x7c73, 0xa0, 0x8e0d, 0x439a, 0x6603, 0x1, 0x1);
        gbc.writeMem(0x1d0e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7c73);
        EXPECT(gbc.pc(), 0x1d10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 031C
        gbc.setState(0xb6d0, 0x5019, 0xc3d0, 0x9261, 0xc2a3, 0x88b7, 0x0, 0x1);
        gbc.writeMem(0xb6d0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5019);
        EXPECT(gbc.pc(), 0xb6d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d0), 0xcb);
        EXPECT(gbc.readMem(0xb6d1), 0x47);
        // CB 47 031D
        gbc.setState(0x7309, 0xe677, 0x2640, 0xcf92, 0xdab0, 0x71d5, 0x1, 0x0);
        gbc.writeMem(0x7309, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe677);
        EXPECT(gbc.pc(), 0x730b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 031E
        gbc.setState(0x6f5b, 0xae15, 0x7110, 0x1201, 0xc038, 0x178, 0x1, 0x1);
        gbc.writeMem(0x6f5b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xae15);
        EXPECT(gbc.pc(), 0x6f5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 031F
        gbc.setState(0x81b, 0x4abd, 0xad60, 0x5068, 0x7056, 0x9703, 0x1, 0x0);
        gbc.writeMem(0x81b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4abd);
        EXPECT(gbc.pc(), 0x81d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0320
        gbc.setState(0x72bf, 0x790a, 0x3190, 0x4f7f, 0xe4ac, 0xcff1, 0x1, 0x0);
        gbc.writeMem(0x72bf, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x790a);
        EXPECT(gbc.pc(), 0x72c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0321
        gbc.setState(0x4652, 0xaca1, 0x9f30, 0x148e, 0x56dd, 0x4523, 0x1, 0x1);
        gbc.writeMem(0x4652, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xaca1);
        EXPECT(gbc.pc(), 0x4654);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0322
        gbc.setState(0xb022, 0x67fb, 0xf770, 0xc3b, 0xeddd, 0xf2fa, 0x1, 0x1);
        gbc.writeMem(0xb022, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x67fb);
        EXPECT(gbc.pc(), 0xb024);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb022), 0xcb);
        EXPECT(gbc.readMem(0xb023), 0x47);
        // CB 47 0323
        gbc.setState(0xe58e, 0x3df3, 0x5390, 0x30ad, 0xcfb4, 0x9192, 0x1, 0x1);
        gbc.writeMem(0xe58e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3df3);
        EXPECT(gbc.pc(), 0xe590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe58e), 0xcb);
        EXPECT(gbc.readMem(0xe58f), 0x47);
        // CB 47 0324
        gbc.setState(0x5bc7, 0x330b, 0xec40, 0x42fc, 0xc213, 0x99a9, 0x1, 0x1);
        gbc.writeMem(0x5bc7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x330b);
        EXPECT(gbc.pc(), 0x5bc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0325
        gbc.setState(0x5cd, 0x3549, 0xd750, 0x259b, 0xf536, 0xe373, 0x1, 0x1);
        gbc.writeMem(0x5cd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3549);
        EXPECT(gbc.pc(), 0x5cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0326
        gbc.setState(0xf0d, 0xbaab, 0xba20, 0xe620, 0x46bd, 0x375b, 0x1, 0x0);
        gbc.writeMem(0xf0d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbaab);
        EXPECT(gbc.pc(), 0xf0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0327
        gbc.setState(0xd3bb, 0x8359, 0xa8d0, 0xde25, 0xc140, 0x96f5, 0x1, 0x0);
        gbc.writeMem(0xd3bb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8359);
        EXPECT(gbc.pc(), 0xd3bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3bb), 0xcb);
        EXPECT(gbc.readMem(0xd3bc), 0x47);
        // CB 47 0328
        gbc.setState(0x8757, 0x587e, 0xea60, 0xc287, 0xd84a, 0x83de, 0x1, 0x1);
        gbc.writeMem(0x8757, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x587e);
        EXPECT(gbc.pc(), 0x8759);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8757), 0xcb);
        EXPECT(gbc.readMem(0x8758), 0x47);
        // CB 47 0329
        gbc.setState(0x3ef9, 0xc1d, 0x9830, 0x54c1, 0xdace, 0xc458, 0x0, 0x1);
        gbc.writeMem(0x3ef9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc1d);
        EXPECT(gbc.pc(), 0x3efb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 032A
        gbc.setState(0x8e96, 0x13c7, 0x6b70, 0x5ed1, 0x367b, 0xfe1c, 0x1, 0x1);
        gbc.writeMem(0x8e96, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x13c7);
        EXPECT(gbc.pc(), 0x8e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e96), 0xcb);
        EXPECT(gbc.readMem(0x8e97), 0x47);
        // CB 47 032B
        gbc.setState(0xee9e, 0x8849, 0x6e0, 0xda17, 0x6194, 0x71d7, 0x0, 0x0);
        gbc.writeMem(0xee9e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8849);
        EXPECT(gbc.pc(), 0xeea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee9e), 0xcb);
        EXPECT(gbc.readMem(0xee9f), 0x47);
        // CB 47 032C
        gbc.setState(0x1c84, 0x81eb, 0x20d0, 0x3527, 0x9f33, 0x9dbc, 0x1, 0x1);
        gbc.writeMem(0x1c84, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x81eb);
        EXPECT(gbc.pc(), 0x1c86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 032D
        gbc.setState(0x203a, 0x9181, 0x7e40, 0x9e87, 0xa58e, 0x1fb5, 0x0, 0x1);
        gbc.writeMem(0x203a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9181);
        EXPECT(gbc.pc(), 0x203c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 032F
        gbc.setState(0x16ad, 0x3233, 0x550, 0x102d, 0x637d, 0x71b5, 0x1, 0x0);
        gbc.writeMem(0x16ad, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3233);
        EXPECT(gbc.pc(), 0x16af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0330
        gbc.setState(0x1ea6, 0xa623, 0xb010, 0x400b, 0x6d7c, 0xf0d3, 0x1, 0x0);
        gbc.writeMem(0x1ea6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa623);
        EXPECT(gbc.pc(), 0x1ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0331
        gbc.setState(0xa720, 0x2f49, 0x1c70, 0x7530, 0xd989, 0xbf2f, 0x1, 0x0);
        gbc.writeMem(0xa720, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2f49);
        EXPECT(gbc.pc(), 0xa722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa720), 0xcb);
        EXPECT(gbc.readMem(0xa721), 0x47);
        // CB 47 0332
        gbc.setState(0x8080, 0x65de, 0xdf30, 0xfd75, 0xb1ad, 0xca4f, 0x0, 0x1);
        gbc.writeMem(0x8080, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x65de);
        EXPECT(gbc.pc(), 0x8082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8080), 0xcb);
        EXPECT(gbc.readMem(0x8081), 0x47);
        // CB 47 0333
        gbc.setState(0x6e40, 0xe320, 0xc7a0, 0xb443, 0x22b5, 0x9098, 0x0, 0x1);
        gbc.writeMem(0x6e40, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe320);
        EXPECT(gbc.pc(), 0x6e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0335
        gbc.setState(0xc598, 0xc4d4, 0x1310, 0x7320, 0xadce, 0xda85, 0x1, 0x0);
        gbc.writeMem(0xc598, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc4d4);
        EXPECT(gbc.pc(), 0xc59a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc598), 0xcb);
        EXPECT(gbc.readMem(0xc599), 0x47);
        // CB 47 0336
        gbc.setState(0x263b, 0xb7d0, 0x5360, 0x338a, 0x2484, 0xb637, 0x1, 0x0);
        gbc.writeMem(0x263b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb7d0);
        EXPECT(gbc.pc(), 0x263d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0337
        gbc.setState(0xd510, 0x148, 0x9e10, 0x22f8, 0x44a6, 0x6cf1, 0x0, 0x1);
        gbc.writeMem(0xd510, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x148);
        EXPECT(gbc.pc(), 0xd512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd510), 0xcb);
        EXPECT(gbc.readMem(0xd511), 0x47);
        // CB 47 0338
        gbc.setState(0xd139, 0xb144, 0xa860, 0x9abd, 0xd898, 0x8402, 0x0, 0x1);
        gbc.writeMem(0xd139, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb144);
        EXPECT(gbc.pc(), 0xd13b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd139), 0xcb);
        EXPECT(gbc.readMem(0xd13a), 0x47);
        // CB 47 0339
        gbc.setState(0x60ef, 0x7c32, 0xef20, 0x6c77, 0x7296, 0x45dd, 0x0, 0x0);
        gbc.writeMem(0x60ef, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x7c32);
        EXPECT(gbc.pc(), 0x60f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 033A
        gbc.setState(0xdf22, 0xd63e, 0x87a0, 0xaf74, 0xd038, 0x7416, 0x0, 0x1);
        gbc.writeMem(0xdf22, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd63e);
        EXPECT(gbc.pc(), 0xdf24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf22), 0xcb);
        EXPECT(gbc.readMem(0xdf23), 0x47);
        // CB 47 033C
        gbc.setState(0xf92, 0x131b, 0xa2c0, 0x50fa, 0xaf2b, 0xc3cb, 0x1, 0x1);
        gbc.writeMem(0xf92, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x131b);
        EXPECT(gbc.pc(), 0xf94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 033D
        gbc.setState(0x30ad, 0x314f, 0xc8d0, 0x68bd, 0x5d2, 0xccd7, 0x1, 0x0);
        gbc.writeMem(0x30ad, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x314f);
        EXPECT(gbc.pc(), 0x30af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 033E
        gbc.setState(0x7823, 0xa106, 0x85f0, 0xfce3, 0xf926, 0x5fe, 0x1, 0x1);
        gbc.writeMem(0x7823, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa106);
        EXPECT(gbc.pc(), 0x7825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 033F
        gbc.setState(0x1ab9, 0xf0ce, 0xcc60, 0x5516, 0x442a, 0x3a27, 0x0, 0x0);
        gbc.writeMem(0x1ab9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf0ce);
        EXPECT(gbc.pc(), 0x1abb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0340
        gbc.setState(0x33f0, 0x2ef5, 0xdfb0, 0x8fa9, 0xf731, 0xfc78, 0x0, 0x1);
        gbc.writeMem(0x33f0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2ef5);
        EXPECT(gbc.pc(), 0x33f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0341
        gbc.setState(0xaa5e, 0xb28c, 0x8f80, 0x8263, 0x587e, 0x8340, 0x0, 0x1);
        gbc.writeMem(0xaa5e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb28c);
        EXPECT(gbc.pc(), 0xaa60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa5e), 0xcb);
        EXPECT(gbc.readMem(0xaa5f), 0x47);
        // CB 47 0342
        gbc.setState(0x5858, 0xe3c8, 0x8290, 0xad0f, 0xcd43, 0xa6b1, 0x1, 0x0);
        gbc.writeMem(0x5858, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe3c8);
        EXPECT(gbc.pc(), 0x585a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0343
        gbc.setState(0x55e7, 0xce2b, 0xad60, 0xdb5d, 0xf97a, 0x8f8c, 0x1, 0x0);
        gbc.writeMem(0x55e7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xce2b);
        EXPECT(gbc.pc(), 0x55e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0344
        gbc.setState(0x345, 0x3ff3, 0x1990, 0x64b7, 0xbfb1, 0x3f6a, 0x1, 0x1);
        gbc.writeMem(0x345, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3ff3);
        EXPECT(gbc.pc(), 0x347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0345
        gbc.setState(0x42ae, 0x654c, 0xf040, 0x14ba, 0x13bd, 0x2716, 0x0, 0x0);
        gbc.writeMem(0x42ae, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x654c);
        EXPECT(gbc.pc(), 0x42b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0346
        gbc.setState(0xe8e9, 0x1bae, 0xc9c0, 0x485c, 0x3e49, 0x509f, 0x1, 0x0);
        gbc.writeMem(0xe8e9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1bae);
        EXPECT(gbc.pc(), 0xe8eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8e9), 0xcb);
        EXPECT(gbc.readMem(0xe8ea), 0x47);
        // CB 47 0348
        gbc.setState(0x6e75, 0xe7a8, 0x5530, 0x48d1, 0x452f, 0x8f3f, 0x1, 0x0);
        gbc.writeMem(0x6e75, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe7a8);
        EXPECT(gbc.pc(), 0x6e77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 034A
        gbc.setState(0xee31, 0xf1a1, 0x4cb0, 0x289e, 0x1596, 0xb9ab, 0x1, 0x1);
        gbc.writeMem(0xee31, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf1a1);
        EXPECT(gbc.pc(), 0xee33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee31), 0xcb);
        EXPECT(gbc.readMem(0xee32), 0x47);
        // CB 47 034B
        gbc.setState(0x3ade, 0x9cbb, 0xa3c0, 0xdabb, 0xa676, 0x3d9b, 0x1, 0x0);
        gbc.writeMem(0x3ade, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9cbb);
        EXPECT(gbc.pc(), 0x3ae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 034C
        gbc.setState(0x3c1, 0x4da9, 0x97f0, 0xf6ce, 0x73fa, 0xdb34, 0x1, 0x1);
        gbc.writeMem(0x3c1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4da9);
        EXPECT(gbc.pc(), 0x3c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 034D
        gbc.setState(0x5fc5, 0xe48d, 0x3140, 0x92a2, 0x2f92, 0x9d4e, 0x1, 0x1);
        gbc.writeMem(0x5fc5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe48d);
        EXPECT(gbc.pc(), 0x5fc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 034E
        gbc.setState(0x4e04, 0x7741, 0x7b20, 0x5d9, 0x4542, 0xe977, 0x1, 0x0);
        gbc.writeMem(0x4e04, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7741);
        EXPECT(gbc.pc(), 0x4e06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 034F
        gbc.setState(0x4b4, 0xc3dc, 0x3c10, 0x953, 0xbea3, 0x194b, 0x0, 0x1);
        gbc.writeMem(0x4b4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc3dc);
        EXPECT(gbc.pc(), 0x4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0350
        gbc.setState(0x5bd8, 0x9acc, 0x6b90, 0x7e1f, 0x5c50, 0x173a, 0x0, 0x1);
        gbc.writeMem(0x5bd8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9acc);
        EXPECT(gbc.pc(), 0x5bda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0351
        gbc.setState(0x9aff, 0x7bf9, 0xb6e0, 0x11bd, 0x668d, 0xf1cf, 0x0, 0x0);
        gbc.writeMem(0x9aff, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7bf9);
        EXPECT(gbc.pc(), 0x9b01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aff), 0xcb);
        EXPECT(gbc.readMem(0x9b00), 0x47);
        // CB 47 0352
        gbc.setState(0xaf68, 0xcbba, 0x9880, 0x50a, 0x3262, 0xaf5d, 0x0, 0x1);
        gbc.writeMem(0xaf68, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xcbba);
        EXPECT(gbc.pc(), 0xaf6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf68), 0xcb);
        EXPECT(gbc.readMem(0xaf69), 0x47);
        // CB 47 0353
        gbc.setState(0xa759, 0xec3, 0x36e0, 0x699a, 0x4f67, 0xc96a, 0x1, 0x0);
        gbc.writeMem(0xa759, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xec3);
        EXPECT(gbc.pc(), 0xa75b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa759), 0xcb);
        EXPECT(gbc.readMem(0xa75a), 0x47);
        // CB 47 0354
        gbc.setState(0xcc15, 0x2c4f, 0xf1a0, 0x781, 0xf93b, 0xe2ee, 0x1, 0x1);
        gbc.writeMem(0xcc15, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2c4f);
        EXPECT(gbc.pc(), 0xcc17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc15), 0xcb);
        EXPECT(gbc.readMem(0xcc16), 0x47);
        // CB 47 0355
        gbc.setState(0x8a60, 0xfd7b, 0xca0, 0xfd53, 0x981a, 0xc8b3, 0x0, 0x1);
        gbc.writeMem(0x8a60, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xfd7b);
        EXPECT(gbc.pc(), 0x8a62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a60), 0xcb);
        EXPECT(gbc.readMem(0x8a61), 0x47);
        // CB 47 0356
        gbc.setState(0x9272, 0x177d, 0xbf80, 0x6ac3, 0x2fa4, 0xd826, 0x0, 0x1);
        gbc.writeMem(0x9272, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x177d);
        EXPECT(gbc.pc(), 0x9274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9272), 0xcb);
        EXPECT(gbc.readMem(0x9273), 0x47);
        // CB 47 0357
        gbc.setState(0x3444, 0x463b, 0xd5b0, 0x117d, 0xa1ae, 0xc8c2, 0x1, 0x0);
        gbc.writeMem(0x3444, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x463b);
        EXPECT(gbc.pc(), 0x3446);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0358
        gbc.setState(0xb58b, 0xe683, 0x7f90, 0xb639, 0x6cf1, 0x9516, 0x0, 0x0);
        gbc.writeMem(0xb58b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe683);
        EXPECT(gbc.pc(), 0xb58d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb58b), 0xcb);
        EXPECT(gbc.readMem(0xb58c), 0x47);
        // CB 47 0359
        gbc.setState(0xdf94, 0x8965, 0x6c50, 0x698d, 0x2b47, 0xd599, 0x1, 0x0);
        gbc.writeMem(0xdf94, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8965);
        EXPECT(gbc.pc(), 0xdf96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf94), 0xcb);
        EXPECT(gbc.readMem(0xdf95), 0x47);
        // CB 47 035A
        gbc.setState(0xd6fa, 0xa375, 0xf450, 0x1d6a, 0x765b, 0xb94e, 0x1, 0x0);
        gbc.writeMem(0xd6fa, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa375);
        EXPECT(gbc.pc(), 0xd6fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6fa), 0xcb);
        EXPECT(gbc.readMem(0xd6fb), 0x47);
        // CB 47 035B
        gbc.setState(0x58d, 0xf631, 0xd610, 0xe418, 0x8ce9, 0xca1a, 0x1, 0x1);
        gbc.writeMem(0x58d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf631);
        EXPECT(gbc.pc(), 0x58f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 035C
        gbc.setState(0x1c4d, 0xe85, 0xae70, 0x30c6, 0x5569, 0x2500, 0x1, 0x1);
        gbc.writeMem(0x1c4d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe85);
        EXPECT(gbc.pc(), 0x1c4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 035D
        gbc.setState(0xdd6b, 0xabc1, 0x7500, 0x9312, 0x31ca, 0xc435, 0x1, 0x1);
        gbc.writeMem(0xdd6b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xabc1);
        EXPECT(gbc.pc(), 0xdd6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6b), 0xcb);
        EXPECT(gbc.readMem(0xdd6c), 0x47);
        // CB 47 035E
        gbc.setState(0x27a5, 0xdab6, 0x74b0, 0x14e8, 0x52f8, 0xaa18, 0x1, 0x1);
        gbc.writeMem(0x27a5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdab6);
        EXPECT(gbc.pc(), 0x27a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 035F
        gbc.setState(0xd2d4, 0x4c47, 0x7a10, 0xe2f2, 0x1bce, 0xeeb6, 0x0, 0x1);
        gbc.writeMem(0xd2d4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4c47);
        EXPECT(gbc.pc(), 0xd2d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2d4), 0xcb);
        EXPECT(gbc.readMem(0xd2d5), 0x47);
        // CB 47 0360
        gbc.setState(0x96fb, 0xfe13, 0xb370, 0x82cd, 0x3192, 0x11c2, 0x0, 0x1);
        gbc.writeMem(0x96fb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xfe13);
        EXPECT(gbc.pc(), 0x96fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96fb), 0xcb);
        EXPECT(gbc.readMem(0x96fc), 0x47);
        // CB 47 0361
        gbc.setState(0x7012, 0x15e7, 0x1fd0, 0xad41, 0xa454, 0xd68e, 0x1, 0x1);
        gbc.writeMem(0x7012, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x15e7);
        EXPECT(gbc.pc(), 0x7014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0362
        gbc.setState(0x82e9, 0x9e01, 0xd90, 0x5d40, 0xaa0d, 0x954c, 0x1, 0x1);
        gbc.writeMem(0x82e9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9e01);
        EXPECT(gbc.pc(), 0x82eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82e9), 0xcb);
        EXPECT(gbc.readMem(0x82ea), 0x47);
        // CB 47 0363
        gbc.setState(0x3059, 0xdf4a, 0xffe0, 0xeb2f, 0xafa, 0x620e, 0x0, 0x0);
        gbc.writeMem(0x3059, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xdf4a);
        EXPECT(gbc.pc(), 0x305b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0364
        gbc.setState(0xbada, 0x7d81, 0xa930, 0x9b5e, 0x6318, 0x5761, 0x0, 0x1);
        gbc.writeMem(0xbada, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7d81);
        EXPECT(gbc.pc(), 0xbadc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbada), 0xcb);
        EXPECT(gbc.readMem(0xbadb), 0x47);
        // CB 47 0365
        gbc.setState(0x2b09, 0x5c2e, 0x4150, 0x1fa9, 0xd2d9, 0x86f0, 0x1, 0x0);
        gbc.writeMem(0x2b09, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5c2e);
        EXPECT(gbc.pc(), 0x2b0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0366
        gbc.setState(0xb04a, 0xd65b, 0x2b30, 0xd822, 0xcf8, 0x9d8f, 0x0, 0x0);
        gbc.writeMem(0xb04a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd65b);
        EXPECT(gbc.pc(), 0xb04c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb04a), 0xcb);
        EXPECT(gbc.readMem(0xb04b), 0x47);
        // CB 47 0367
        gbc.setState(0x6811, 0x4640, 0x7a80, 0x9f3e, 0xcf3f, 0x4432, 0x0, 0x0);
        gbc.writeMem(0x6811, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4640);
        EXPECT(gbc.pc(), 0x6813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0368
        gbc.setState(0x4b58, 0x3359, 0x5e80, 0xc97, 0x7fb1, 0x9928, 0x1, 0x0);
        gbc.writeMem(0x4b58, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3359);
        EXPECT(gbc.pc(), 0x4b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0369
        gbc.setState(0xa064, 0x5751, 0x4b00, 0x4680, 0xb59, 0x8d88, 0x1, 0x0);
        gbc.writeMem(0xa064, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5751);
        EXPECT(gbc.pc(), 0xa066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa064), 0xcb);
        EXPECT(gbc.readMem(0xa065), 0x47);
        // CB 47 036A
        gbc.setState(0xa709, 0xf232, 0x11f0, 0xfef8, 0x7e1b, 0xef7d, 0x0, 0x1);
        gbc.writeMem(0xa709, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf232);
        EXPECT(gbc.pc(), 0xa70b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa709), 0xcb);
        EXPECT(gbc.readMem(0xa70a), 0x47);
        // CB 47 036B
        gbc.setState(0xdf94, 0xe61a, 0xe4c0, 0xb4da, 0xabd2, 0x4be8, 0x0, 0x0);
        gbc.writeMem(0xdf94, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe61a);
        EXPECT(gbc.pc(), 0xdf96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf94), 0xcb);
        EXPECT(gbc.readMem(0xdf95), 0x47);
        // CB 47 036C
        gbc.setState(0x8844, 0xb19c, 0x2f40, 0xe7c0, 0x107c, 0x2f0a, 0x0, 0x0);
        gbc.writeMem(0x8844, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb19c);
        EXPECT(gbc.pc(), 0x8846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8844), 0xcb);
        EXPECT(gbc.readMem(0x8845), 0x47);
        // CB 47 036D
        gbc.setState(0x4772, 0x7d5e, 0xbb80, 0x82f9, 0x190f, 0x17a6, 0x0, 0x0);
        gbc.writeMem(0x4772, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7d5e);
        EXPECT(gbc.pc(), 0x4774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 036E
        gbc.setState(0xef22, 0xad3, 0x8730, 0xbd34, 0x3531, 0x73bf, 0x0, 0x1);
        gbc.writeMem(0xef22, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xad3);
        EXPECT(gbc.pc(), 0xef24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef22), 0xcb);
        EXPECT(gbc.readMem(0xef23), 0x47);
        // CB 47 036F
        gbc.setState(0x9ed7, 0x843c, 0x3a0, 0xe8e6, 0x3ab4, 0x343a, 0x1, 0x1);
        gbc.writeMem(0x9ed7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x843c);
        EXPECT(gbc.pc(), 0x9ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed7), 0xcb);
        EXPECT(gbc.readMem(0x9ed8), 0x47);
        // CB 47 0370
        gbc.setState(0x6176, 0x6ec7, 0xcca0, 0x4b84, 0x5097, 0xf3cb, 0x0, 0x1);
        gbc.writeMem(0x6176, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6ec7);
        EXPECT(gbc.pc(), 0x6178);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0371
        gbc.setState(0xd426, 0x1fa8, 0xf3e0, 0xfae7, 0xcb0a, 0x9861, 0x0, 0x0);
        gbc.writeMem(0xd426, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1fa8);
        EXPECT(gbc.pc(), 0xd428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd426), 0xcb);
        EXPECT(gbc.readMem(0xd427), 0x47);
        // CB 47 0372
        gbc.setState(0x9ff3, 0x4516, 0x6270, 0x88e8, 0xae30, 0xa8dc, 0x1, 0x0);
        gbc.writeMem(0x9ff3, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4516);
        EXPECT(gbc.pc(), 0x9ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ff3), 0xcb);
        EXPECT(gbc.readMem(0x9ff4), 0x47);
        // CB 47 0373
        gbc.setState(0x2f79, 0x81ac, 0xaec0, 0xd040, 0xf001, 0x6326, 0x1, 0x1);
        gbc.writeMem(0x2f79, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x81ac);
        EXPECT(gbc.pc(), 0x2f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0374
        gbc.setState(0x4fe7, 0x3bea, 0xbc10, 0x14b4, 0xec9, 0x797c, 0x1, 0x1);
        gbc.writeMem(0x4fe7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3bea);
        EXPECT(gbc.pc(), 0x4fe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0376
        gbc.setState(0xbb0e, 0x9fda, 0xe1a0, 0xfdc4, 0x7668, 0xe6f9, 0x1, 0x1);
        gbc.writeMem(0xbb0e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9fda);
        EXPECT(gbc.pc(), 0xbb10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb0e), 0xcb);
        EXPECT(gbc.readMem(0xbb0f), 0x47);
        // CB 47 0377
        gbc.setState(0xde0a, 0xa427, 0xf000, 0x768f, 0xd859, 0x52b2, 0x0, 0x0);
        gbc.writeMem(0xde0a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa427);
        EXPECT(gbc.pc(), 0xde0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde0a), 0xcb);
        EXPECT(gbc.readMem(0xde0b), 0x47);
        // CB 47 0378
        gbc.setState(0xe0c0, 0x9cf0, 0xd230, 0xdae0, 0xba65, 0x10be, 0x0, 0x1);
        gbc.writeMem(0xe0c0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9cf0);
        EXPECT(gbc.pc(), 0xe0c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0c0), 0xcb);
        EXPECT(gbc.readMem(0xe0c1), 0x47);
        // CB 47 0379
        gbc.setState(0x494b, 0x8c25, 0xcb00, 0x48a6, 0x99c5, 0x73cd, 0x1, 0x0);
        gbc.writeMem(0x494b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8c25);
        EXPECT(gbc.pc(), 0x494d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 037A
        gbc.setState(0x5b19, 0x7c55, 0xa610, 0xea78, 0xf949, 0x91da, 0x0, 0x0);
        gbc.writeMem(0x5b19, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7c55);
        EXPECT(gbc.pc(), 0x5b1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 037B
        gbc.setState(0x869, 0x5f16, 0x9440, 0x43ce, 0x8783, 0xcf8b, 0x0, 0x1);
        gbc.writeMem(0x869, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5f16);
        EXPECT(gbc.pc(), 0x86b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 037D
        gbc.setState(0x614, 0x6e1d, 0xb680, 0x3962, 0xa4f5, 0x7175, 0x0, 0x0);
        gbc.writeMem(0x614, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6e1d);
        EXPECT(gbc.pc(), 0x616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 037E
        gbc.setState(0x4724, 0xfc22, 0x3df0, 0x45c, 0x1ac, 0xb8a6, 0x1, 0x0);
        gbc.writeMem(0x4724, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xfc22);
        EXPECT(gbc.pc(), 0x4726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 037F
        gbc.setState(0xa03d, 0x79b3, 0x4660, 0x683f, 0x2699, 0xc594, 0x1, 0x1);
        gbc.writeMem(0xa03d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x79b3);
        EXPECT(gbc.pc(), 0xa03f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03d), 0xcb);
        EXPECT(gbc.readMem(0xa03e), 0x47);
        // CB 47 0380
        gbc.setState(0x1f51, 0x583b, 0x7510, 0x937a, 0xf0c9, 0xe675, 0x1, 0x0);
        gbc.writeMem(0x1f51, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x583b);
        EXPECT(gbc.pc(), 0x1f53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0381
        gbc.setState(0x7cb4, 0x884c, 0xae30, 0xb2a2, 0x3296, 0x5d08, 0x1, 0x0);
        gbc.writeMem(0x7cb4, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x884c);
        EXPECT(gbc.pc(), 0x7cb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0383
        gbc.setState(0x67b5, 0xcecc, 0xf970, 0x870b, 0x51f, 0xdcb7, 0x1, 0x1);
        gbc.writeMem(0x67b5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xcecc);
        EXPECT(gbc.pc(), 0x67b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0384
        gbc.setState(0x1b5d, 0xbdfd, 0x4010, 0xce56, 0x8035, 0x53da, 0x0, 0x0);
        gbc.writeMem(0x1b5d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xbdfd);
        EXPECT(gbc.pc(), 0x1b5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0385
        gbc.setState(0xac5f, 0x6651, 0xa50, 0xccea, 0x8890, 0xfaef, 0x0, 0x1);
        gbc.writeMem(0xac5f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6651);
        EXPECT(gbc.pc(), 0xac61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac5f), 0xcb);
        EXPECT(gbc.readMem(0xac60), 0x47);
        // CB 47 0386
        gbc.setState(0xa95e, 0x7c97, 0x4350, 0xe909, 0x7b5d, 0x296e, 0x1, 0x1);
        gbc.writeMem(0xa95e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7c97);
        EXPECT(gbc.pc(), 0xa960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa95e), 0xcb);
        EXPECT(gbc.readMem(0xa95f), 0x47);
        // CB 47 0387
        gbc.setState(0x79e6, 0x641b, 0xbf10, 0x6f95, 0x934d, 0x9352, 0x0, 0x0);
        gbc.writeMem(0x79e6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x641b);
        EXPECT(gbc.pc(), 0x79e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0388
        gbc.setState(0xe3da, 0xad3c, 0xb420, 0xd560, 0xda9b, 0xb990, 0x0, 0x1);
        gbc.writeMem(0xe3da, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xad3c);
        EXPECT(gbc.pc(), 0xe3dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3da), 0xcb);
        EXPECT(gbc.readMem(0xe3db), 0x47);
        // CB 47 0389
        gbc.setState(0xbfb5, 0xc679, 0x86a0, 0x4dc8, 0x6455, 0x84b6, 0x0, 0x0);
        gbc.writeMem(0xbfb5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc679);
        EXPECT(gbc.pc(), 0xbfb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb5), 0xcb);
        EXPECT(gbc.readMem(0xbfb6), 0x47);
        // CB 47 038A
        gbc.setState(0x998e, 0x5024, 0xc590, 0x3522, 0x66f1, 0x4fd8, 0x0, 0x1);
        gbc.writeMem(0x998e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5024);
        EXPECT(gbc.pc(), 0x9990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x998e), 0xcb);
        EXPECT(gbc.readMem(0x998f), 0x47);
        // CB 47 038B
        gbc.setState(0x94b, 0xd3ed, 0x46b0, 0xfe74, 0xc2a8, 0xf03e, 0x1, 0x1);
        gbc.writeMem(0x94b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd3ed);
        EXPECT(gbc.pc(), 0x94d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 038C
        gbc.setState(0x759f, 0xc918, 0x6370, 0x4762, 0x6f0, 0xb798, 0x0, 0x0);
        gbc.writeMem(0x759f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc918);
        EXPECT(gbc.pc(), 0x75a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 038D
        gbc.setState(0x2a31, 0xaa66, 0xedc0, 0xfdcf, 0xeea4, 0xce9c, 0x0, 0x1);
        gbc.writeMem(0x2a31, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xaa66);
        EXPECT(gbc.pc(), 0x2a33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 038E
        gbc.setState(0x9fce, 0x6225, 0x1800, 0xdb3a, 0x6acf, 0xaf62, 0x0, 0x0);
        gbc.writeMem(0x9fce, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6225);
        EXPECT(gbc.pc(), 0x9fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fce), 0xcb);
        EXPECT(gbc.readMem(0x9fcf), 0x47);
        // CB 47 038F
        gbc.setState(0x6c3a, 0xcccf, 0x6f40, 0xab29, 0x7d13, 0xd18d, 0x0, 0x1);
        gbc.writeMem(0x6c3a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xcccf);
        EXPECT(gbc.pc(), 0x6c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0390
        gbc.setState(0x1953, 0x89ac, 0x1110, 0xbfd2, 0xca0c, 0xba5f, 0x0, 0x1);
        gbc.writeMem(0x1953, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x89ac);
        EXPECT(gbc.pc(), 0x1955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 0391
        gbc.setState(0x63d6, 0x9f65, 0x7e60, 0x2554, 0xf606, 0x9146, 0x1, 0x0);
        gbc.writeMem(0x63d6, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9f65);
        EXPECT(gbc.pc(), 0x63d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0392
        gbc.setState(0x1f84, 0x8803, 0xdd80, 0x2b70, 0xb965, 0x9451, 0x1, 0x0);
        gbc.writeMem(0x1f84, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8803);
        EXPECT(gbc.pc(), 0x1f86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0393
        gbc.setState(0xac5f, 0x23fb, 0x3a40, 0x500, 0xbda8, 0x1b7b, 0x1, 0x0);
        gbc.writeMem(0xac5f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x23fb);
        EXPECT(gbc.pc(), 0xac61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5f), 0xcb);
        EXPECT(gbc.readMem(0xac60), 0x47);
        // CB 47 0394
        gbc.setState(0xc104, 0xca3b, 0xbb50, 0x339f, 0x7eb1, 0xd852, 0x1, 0x1);
        gbc.writeMem(0xc104, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xca3b);
        EXPECT(gbc.pc(), 0xc106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc104), 0xcb);
        EXPECT(gbc.readMem(0xc105), 0x47);
        // CB 47 0395
        gbc.setState(0x885d, 0x220f, 0x90a0, 0x28c4, 0x9c86, 0x8386, 0x0, 0x0);
        gbc.writeMem(0x885d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x220f);
        EXPECT(gbc.pc(), 0x885f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885d), 0xcb);
        EXPECT(gbc.readMem(0x885e), 0x47);
        // CB 47 0396
        gbc.setState(0x766e, 0x9780, 0xc400, 0x3dd3, 0xa28c, 0x83d3, 0x0, 0x0);
        gbc.writeMem(0x766e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9780);
        EXPECT(gbc.pc(), 0x7670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0397
        gbc.setState(0x644b, 0x4fa1, 0xb640, 0x17a8, 0xfc1, 0x1292, 0x1, 0x1);
        gbc.writeMem(0x644b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4fa1);
        EXPECT(gbc.pc(), 0x644d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 0398
        gbc.setState(0xa1e2, 0x70b2, 0x4c20, 0xbd13, 0xe0d8, 0x7430, 0x1, 0x1);
        gbc.writeMem(0xa1e2, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x70b2);
        EXPECT(gbc.pc(), 0xa1e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1e2), 0xcb);
        EXPECT(gbc.readMem(0xa1e3), 0x47);
        // CB 47 0399
        gbc.setState(0xdf7d, 0xd154, 0x9480, 0x4f84, 0xd965, 0x5697, 0x0, 0x1);
        gbc.writeMem(0xdf7d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd154);
        EXPECT(gbc.pc(), 0xdf7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf7d), 0xcb);
        EXPECT(gbc.readMem(0xdf7e), 0x47);
        // CB 47 039A
        gbc.setState(0xbb0f, 0x1b22, 0x36d0, 0x3422, 0x1d0a, 0x58da, 0x1, 0x1);
        gbc.writeMem(0xbb0f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1b22);
        EXPECT(gbc.pc(), 0xbb11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb0f), 0xcb);
        EXPECT(gbc.readMem(0xbb10), 0x47);
        // CB 47 039B
        gbc.setState(0x270c, 0xddcf, 0x9570, 0x2f4c, 0x9292, 0x8e6f, 0x1, 0x0);
        gbc.writeMem(0x270c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xddcf);
        EXPECT(gbc.pc(), 0x270e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 039C
        gbc.setState(0x7541, 0x7847, 0xc790, 0xe0d3, 0xb9b8, 0x9424, 0x0, 0x0);
        gbc.writeMem(0x7541, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7847);
        EXPECT(gbc.pc(), 0x7543);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 039D
        gbc.setState(0x9a45, 0x8c62, 0x6700, 0xc03f, 0x3783, 0x4ced, 0x0, 0x0);
        gbc.writeMem(0x9a45, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8c62);
        EXPECT(gbc.pc(), 0x9a47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a45), 0xcb);
        EXPECT(gbc.readMem(0x9a46), 0x47);
        // CB 47 039E
        gbc.setState(0x3c97, 0x6cd4, 0x9730, 0x15c5, 0xf3f8, 0x89e9, 0x0, 0x1);
        gbc.writeMem(0x3c97, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6cd4);
        EXPECT(gbc.pc(), 0x3c99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 039F
        gbc.setState(0xdbf9, 0x99dd, 0xf240, 0x15ec, 0x9976, 0xee12, 0x1, 0x1);
        gbc.writeMem(0xdbf9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x99dd);
        EXPECT(gbc.pc(), 0xdbfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf9), 0xcb);
        EXPECT(gbc.readMem(0xdbfa), 0x47);
        // CB 47 03A0
        gbc.setState(0xc328, 0xb563, 0x42d0, 0x28e9, 0xdc2d, 0xfcb4, 0x1, 0x0);
        gbc.writeMem(0xc328, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb563);
        EXPECT(gbc.pc(), 0xc32a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc328), 0xcb);
        EXPECT(gbc.readMem(0xc329), 0x47);
        // CB 47 03A1
        gbc.setState(0x8470, 0xf8b6, 0x3490, 0xb487, 0x1cc7, 0x6400, 0x0, 0x1);
        gbc.writeMem(0x8470, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf8b6);
        EXPECT(gbc.pc(), 0x8472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8470), 0xcb);
        EXPECT(gbc.readMem(0x8471), 0x47);
        // CB 47 03A2
        gbc.setState(0x5041, 0x31f, 0x1bf0, 0xd35c, 0xd227, 0xc461, 0x1, 0x1);
        gbc.writeMem(0x5041, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x31f);
        EXPECT(gbc.pc(), 0x5043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03A3
        gbc.setState(0x8528, 0x41dd, 0x9d90, 0xa988, 0x6c1b, 0x788, 0x0, 0x0);
        gbc.writeMem(0x8528, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x41dd);
        EXPECT(gbc.pc(), 0x852a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8528), 0xcb);
        EXPECT(gbc.readMem(0x8529), 0x47);
        // CB 47 03A4
        gbc.setState(0xe3bd, 0x1880, 0x310, 0x5a4d, 0xb302, 0xf0b4, 0x0, 0x0);
        gbc.writeMem(0xe3bd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1880);
        EXPECT(gbc.pc(), 0xe3bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3bd), 0xcb);
        EXPECT(gbc.readMem(0xe3be), 0x47);
        // CB 47 03A5
        gbc.setState(0x6445, 0x63b0, 0x8e90, 0xd667, 0x3cf4, 0xff0c, 0x0, 0x0);
        gbc.writeMem(0x6445, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x63b0);
        EXPECT(gbc.pc(), 0x6447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03A6
        gbc.setState(0x17cb, 0x8804, 0x25b0, 0xab3b, 0xa25d, 0xfd75, 0x1, 0x1);
        gbc.writeMem(0x17cb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8804);
        EXPECT(gbc.pc(), 0x17cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03A7
        gbc.setState(0xe0c1, 0xf5f4, 0x17c0, 0x133c, 0xd84e, 0x3829, 0x0, 0x1);
        gbc.writeMem(0xe0c1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf5f4);
        EXPECT(gbc.pc(), 0xe0c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0c1), 0xcb);
        EXPECT(gbc.readMem(0xe0c2), 0x47);
        // CB 47 03A8
        gbc.setState(0xb5f1, 0xdeb6, 0x5bc0, 0xa550, 0x18e7, 0x93e8, 0x1, 0x1);
        gbc.writeMem(0xb5f1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xdeb6);
        EXPECT(gbc.pc(), 0xb5f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5f1), 0xcb);
        EXPECT(gbc.readMem(0xb5f2), 0x47);
        // CB 47 03A9
        gbc.setState(0xb8ac, 0x9367, 0xb110, 0x4e75, 0x929f, 0x53da, 0x0, 0x0);
        gbc.writeMem(0xb8ac, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9367);
        EXPECT(gbc.pc(), 0xb8ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ac), 0xcb);
        EXPECT(gbc.readMem(0xb8ad), 0x47);
        // CB 47 03AA
        gbc.setState(0xdd03, 0xc9d2, 0x620, 0xdc69, 0x4742, 0xa7cd, 0x0, 0x0);
        gbc.writeMem(0xdd03, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc9d2);
        EXPECT(gbc.pc(), 0xdd05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd03), 0xcb);
        EXPECT(gbc.readMem(0xdd04), 0x47);
        // CB 47 03AB
        gbc.setState(0x2d64, 0x382, 0xf090, 0xc6a7, 0xc353, 0x5157, 0x0, 0x0);
        gbc.writeMem(0x2d64, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x382);
        EXPECT(gbc.pc(), 0x2d66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03AC
        gbc.setState(0x3e8e, 0x199, 0x24d0, 0x847a, 0xe73, 0x8d9e, 0x1, 0x1);
        gbc.writeMem(0x3e8e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x199);
        EXPECT(gbc.pc(), 0x3e90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03AD
        gbc.setState(0xb34d, 0x8528, 0x34c0, 0x9046, 0xf10b, 0x39fb, 0x0, 0x0);
        gbc.writeMem(0xb34d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8528);
        EXPECT(gbc.pc(), 0xb34f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb34d), 0xcb);
        EXPECT(gbc.readMem(0xb34e), 0x47);
        // CB 47 03AE
        gbc.setState(0xd1df, 0x22b, 0x29e0, 0xdd17, 0x460d, 0x6e86, 0x1, 0x0);
        gbc.writeMem(0xd1df, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x22b);
        EXPECT(gbc.pc(), 0xd1e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1df), 0xcb);
        EXPECT(gbc.readMem(0xd1e0), 0x47);
        // CB 47 03AF
        gbc.setState(0x925d, 0xb874, 0x8820, 0x150a, 0xb178, 0x2f4, 0x1, 0x0);
        gbc.writeMem(0x925d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb874);
        EXPECT(gbc.pc(), 0x925f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x925d), 0xcb);
        EXPECT(gbc.readMem(0x925e), 0x47);
        // CB 47 03B0
        gbc.setState(0x148a, 0xc849, 0x8540, 0x7362, 0x2774, 0x2945, 0x0, 0x1);
        gbc.writeMem(0x148a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc849);
        EXPECT(gbc.pc(), 0x148c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03B1
        gbc.setState(0x4214, 0x6b73, 0x8dc0, 0x72fb, 0x469d, 0xf59b, 0x1, 0x1);
        gbc.writeMem(0x4214, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6b73);
        EXPECT(gbc.pc(), 0x4216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03B2
        gbc.setState(0xb25a, 0x5d6, 0xf400, 0xc072, 0xe3e, 0xb550, 0x1, 0x1);
        gbc.writeMem(0xb25a, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5d6);
        EXPECT(gbc.pc(), 0xb25c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb25a), 0xcb);
        EXPECT(gbc.readMem(0xb25b), 0x47);
        // CB 47 03B4
        gbc.setState(0xb9bb, 0x2cb1, 0xa050, 0xfb0c, 0xf273, 0x2655, 0x1, 0x0);
        gbc.writeMem(0xb9bb, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2cb1);
        EXPECT(gbc.pc(), 0xb9bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9bb), 0xcb);
        EXPECT(gbc.readMem(0xb9bc), 0x47);
        // CB 47 03B5
        gbc.setState(0xdea5, 0x7778, 0xa190, 0x1d73, 0x2e38, 0x9c15, 0x1, 0x1);
        gbc.writeMem(0xdea5, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7778);
        EXPECT(gbc.pc(), 0xdea7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea5), 0xcb);
        EXPECT(gbc.readMem(0xdea6), 0x47);
        // CB 47 03B6
        gbc.setState(0xc3c9, 0x7bbc, 0x7100, 0x5e63, 0xfae8, 0x3a34, 0x0, 0x1);
        gbc.writeMem(0xc3c9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7bbc);
        EXPECT(gbc.pc(), 0xc3cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c9), 0xcb);
        EXPECT(gbc.readMem(0xc3ca), 0x47);
        // CB 47 03B7
        gbc.setState(0xa8fa, 0x1758, 0x69f0, 0x965, 0x56c2, 0xf05e, 0x0, 0x1);
        gbc.writeMem(0xa8fa, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x1758);
        EXPECT(gbc.pc(), 0xa8fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8fa), 0xcb);
        EXPECT(gbc.readMem(0xa8fb), 0x47);
        // CB 47 03B8
        gbc.setState(0x1105, 0xff3a, 0x5090, 0xc85b, 0x218d, 0x6c20, 0x1, 0x0);
        gbc.writeMem(0x1105, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xff3a);
        EXPECT(gbc.pc(), 0x1107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03B9
        gbc.setState(0x4d10, 0xe8d0, 0xdf10, 0x8cc0, 0x3367, 0x5fd3, 0x0, 0x0);
        gbc.writeMem(0x4d10, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe8d0);
        EXPECT(gbc.pc(), 0x4d12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03BA
        gbc.setState(0xee75, 0xd259, 0xb960, 0xcf32, 0x8f4d, 0x29ce, 0x1, 0x0);
        gbc.writeMem(0xee75, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd259);
        EXPECT(gbc.pc(), 0xee77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee75), 0xcb);
        EXPECT(gbc.readMem(0xee76), 0x47);
        // CB 47 03BB
        gbc.setState(0x475d, 0x5a9c, 0xb8b0, 0xc8e8, 0x5781, 0xf454, 0x0, 0x1);
        gbc.writeMem(0x475d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5a9c);
        EXPECT(gbc.pc(), 0x475f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03BC
        gbc.setState(0x3189, 0x710f, 0x8810, 0x766a, 0x74e3, 0xfcbe, 0x1, 0x0);
        gbc.writeMem(0x3189, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x710f);
        EXPECT(gbc.pc(), 0x318b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03BD
        gbc.setState(0x2b40, 0x3800, 0x8e10, 0x426, 0x72b8, 0xa918, 0x0, 0x0);
        gbc.writeMem(0x2b40, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3800);
        EXPECT(gbc.pc(), 0x2b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03BE
        gbc.setState(0x551f, 0x9516, 0x64c0, 0x7ddb, 0x62f1, 0x885a, 0x1, 0x0);
        gbc.writeMem(0x551f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9516);
        EXPECT(gbc.pc(), 0x5521);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03BF
        gbc.setState(0x6ac8, 0x26c4, 0x4e90, 0xe2c2, 0xdf7, 0x9034, 0x1, 0x0);
        gbc.writeMem(0x6ac8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x26c4);
        EXPECT(gbc.pc(), 0x6aca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03C0
        gbc.setState(0x373e, 0xedc0, 0x83d0, 0x33b9, 0x6bf7, 0x490e, 0x1, 0x1);
        gbc.writeMem(0x373e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xedc0);
        EXPECT(gbc.pc(), 0x3740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03C1
        gbc.setState(0xc79f, 0xa50d, 0x4cb0, 0x6737, 0x17a, 0x9d53, 0x1, 0x1);
        gbc.writeMem(0xc79f, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa50d);
        EXPECT(gbc.pc(), 0xc7a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc79f), 0xcb);
        EXPECT(gbc.readMem(0xc7a0), 0x47);
        // CB 47 03C3
        gbc.setState(0x7cd7, 0x13e0, 0xc810, 0xa0eb, 0x334, 0x1c86, 0x0, 0x1);
        gbc.writeMem(0x7cd7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x13e0);
        EXPECT(gbc.pc(), 0x7cd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03C5
        gbc.setState(0xed2e, 0xd255, 0x12b0, 0x13ad, 0x51f4, 0xb829, 0x0, 0x0);
        gbc.writeMem(0xed2e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd255);
        EXPECT(gbc.pc(), 0xed30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed2e), 0xcb);
        EXPECT(gbc.readMem(0xed2f), 0x47);
        // CB 47 03C6
        gbc.setState(0x1bb0, 0xaf0, 0xde80, 0x89f3, 0xc07f, 0x3617, 0x1, 0x1);
        gbc.writeMem(0x1bb0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xaf0);
        EXPECT(gbc.pc(), 0x1bb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03C7
        gbc.setState(0x8f24, 0x6ce0, 0xdf40, 0x6b8b, 0x734e, 0xb1f, 0x1, 0x0);
        gbc.writeMem(0x8f24, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x6ce0);
        EXPECT(gbc.pc(), 0x8f26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f24), 0xcb);
        EXPECT(gbc.readMem(0x8f25), 0x47);
        // CB 47 03C8
        gbc.setState(0x52cc, 0x5d02, 0x3580, 0x7a1b, 0x9e91, 0x7157, 0x1, 0x0);
        gbc.writeMem(0x52cc, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5d02);
        EXPECT(gbc.pc(), 0x52ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03C9
        gbc.setState(0xad7e, 0xc43c, 0xba30, 0x2b3d, 0xe8dc, 0x9771, 0x1, 0x1);
        gbc.writeMem(0xad7e, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc43c);
        EXPECT(gbc.pc(), 0xad80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad7e), 0xcb);
        EXPECT(gbc.readMem(0xad7f), 0x47);
        // CB 47 03CB
        gbc.setState(0xded8, 0xfb5d, 0x4fd0, 0x39bd, 0x6bf0, 0x4ae9, 0x0, 0x1);
        gbc.writeMem(0xded8, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xfb5d);
        EXPECT(gbc.pc(), 0xdeda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xded8), 0xcb);
        EXPECT(gbc.readMem(0xded9), 0x47);
        // CB 47 03CC
        gbc.setState(0x5dd1, 0xecb5, 0x9410, 0x8529, 0x9487, 0x9f65, 0x1, 0x1);
        gbc.writeMem(0x5dd1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xecb5);
        EXPECT(gbc.pc(), 0x5dd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03CE
        gbc.setState(0x31c1, 0xae7c, 0x2930, 0x9d8f, 0x8a1b, 0x68ec, 0x0, 0x1);
        gbc.writeMem(0x31c1, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xae7c);
        EXPECT(gbc.pc(), 0x31c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03CF
        gbc.setState(0x7105, 0xc9c8, 0x44a0, 0xf912, 0x8e0f, 0xfe90, 0x1, 0x0);
        gbc.writeMem(0x7105, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc9c8);
        EXPECT(gbc.pc(), 0x7107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03D0
        gbc.setState(0x500b, 0xed15, 0x9a00, 0x5ef6, 0x79a8, 0x20f4, 0x1, 0x0);
        gbc.writeMem(0x500b, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xed15);
        EXPECT(gbc.pc(), 0x500d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03D2
        gbc.setState(0xcf0d, 0xe4f8, 0xde80, 0xad6a, 0x9c51, 0x7195, 0x0, 0x0);
        gbc.writeMem(0xcf0d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe4f8);
        EXPECT(gbc.pc(), 0xcf0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0d), 0xcb);
        EXPECT(gbc.readMem(0xcf0e), 0x47);
        // CB 47 03D3
        gbc.setState(0xb9dd, 0x11dd, 0x1760, 0xa477, 0x9795, 0xd73d, 0x1, 0x1);
        gbc.writeMem(0xb9dd, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x11dd);
        EXPECT(gbc.pc(), 0xb9df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9dd), 0xcb);
        EXPECT(gbc.readMem(0xb9de), 0x47);
        // CB 47 03D4
        gbc.setState(0x2b58, 0xdf7e, 0x83b0, 0xa1a5, 0xe897, 0x8f83, 0x0, 0x1);
        gbc.writeMem(0x2b58, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdf7e);
        EXPECT(gbc.pc(), 0x2b5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03D6
        gbc.setState(0x6ef0, 0x767, 0x6d10, 0x9e33, 0x74c5, 0x9797, 0x1, 0x1);
        gbc.writeMem(0x6ef0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x767);
        EXPECT(gbc.pc(), 0x6ef2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03D7
        gbc.setState(0x734d, 0x9e31, 0x3700, 0x40ab, 0x689e, 0x8915, 0x0, 0x0);
        gbc.writeMem(0x734d, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9e31);
        EXPECT(gbc.pc(), 0x734f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03D8
        gbc.setState(0xb3ae, 0xb519, 0xea20, 0x21eb, 0xf655, 0x4c15, 0x1, 0x1);
        gbc.writeMem(0xb3ae, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb519);
        EXPECT(gbc.pc(), 0xb3b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ae), 0xcb);
        EXPECT(gbc.readMem(0xb3af), 0x47);
        // CB 47 03D9
        gbc.setState(0x2265, 0x77a3, 0xcf90, 0xa776, 0xd17, 0xd759, 0x1, 0x1);
        gbc.writeMem(0x2265, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x77a3);
        EXPECT(gbc.pc(), 0x2267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03DA
        gbc.setState(0x3084, 0x98aa, 0xa210, 0x6720, 0xbef5, 0x1473, 0x0, 0x0);
        gbc.writeMem(0x3084, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x98aa);
        EXPECT(gbc.pc(), 0x3086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03DB
        gbc.setState(0x3d0c, 0x9036, 0xb750, 0x8460, 0x5368, 0x69f3, 0x0, 0x1);
        gbc.writeMem(0x3d0c, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9036);
        EXPECT(gbc.pc(), 0x3d0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03DC
        gbc.setState(0xb9b0, 0xdda6, 0x44d0, 0xdfc0, 0xf3f8, 0x10ac, 0x1, 0x1);
        gbc.writeMem(0xb9b0, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdda6);
        EXPECT(gbc.pc(), 0xb9b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b0), 0xcb);
        EXPECT(gbc.readMem(0xb9b1), 0x47);
        // CB 47 03DD
        gbc.setState(0xd76, 0xdcaf, 0xa7d0, 0x6af2, 0xda74, 0x454f, 0x1, 0x0);
        gbc.writeMem(0xd76, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xdcaf);
        EXPECT(gbc.pc(), 0xd78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03DE
        gbc.setState(0xc9e7, 0xe5fa, 0xe2e0, 0xd0d8, 0x5cd1, 0x6f15, 0x1, 0x0);
        gbc.writeMem(0xc9e7, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe5fa);
        EXPECT(gbc.pc(), 0xc9e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e7), 0xcb);
        EXPECT(gbc.readMem(0xc9e8), 0x47);
        // CB 47 03DF
        gbc.setState(0xd9f9, 0x8c72, 0x940, 0xf80f, 0xe0a2, 0x4cfc, 0x1, 0x0);
        gbc.writeMem(0xd9f9, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8c72);
        EXPECT(gbc.pc(), 0xd9fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9f9), 0xcb);
        EXPECT(gbc.readMem(0xd9fa), 0x47);
        // CB 47 03E0
        gbc.setState(0x5f65, 0xd1a, 0x600, 0xd831, 0x73d8, 0x969, 0x1, 0x0);
        gbc.writeMem(0x5f65, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd1a);
        EXPECT(gbc.pc(), 0x5f67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03E1
        gbc.setState(0xa814, 0x8e28, 0x3d70, 0xc769, 0xdef3, 0x8d8c, 0x1, 0x0);
        gbc.writeMem(0xa814, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8e28);
        EXPECT(gbc.pc(), 0xa816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa814), 0xcb);
        EXPECT(gbc.readMem(0xa815), 0x47);
        // CB 47 03E2
        gbc.setState(0x1733, 0x800a, 0x3120, 0xc0ab, 0x3063, 0xe818, 0x1, 0x0);
        gbc.writeMem(0x1733, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x800a);
        EXPECT(gbc.pc(), 0x1735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03E3
        gbc.setState(0x3220, 0x2599, 0x64a0, 0x482, 0x2654, 0x9e4f, 0x0, 0x0);
        gbc.writeMem(0x3220, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2599);
        EXPECT(gbc.pc(), 0x3222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03E4
        gbc.setState(0x3246, 0xa19d, 0x1a20, 0xc4ea, 0x80d3, 0x1513, 0x1, 0x1);
        gbc.writeMem(0x3246, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa19d);
        EXPECT(gbc.pc(), 0x3248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03E5
        gbc.setState(0x709, 0x1c20, 0x5200, 0xf5f2, 0x2970, 0xc449, 0x0, 0x0);
        gbc.writeMem(0x709, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1c20);
        EXPECT(gbc.pc(), 0x70b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 47 03E6
        gbc.setState(0x36ce, 0x2916, 0x1890, 0x8198, 0xd9bc, 0xcd3c, 0x0, 0x1);
        gbc.writeMem(0x36ce, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2916);
        EXPECT(gbc.pc(), 0x36d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 47 03E7
        gbc.setState(0xaa24, 0x703c, 0x30, 0x84f6, 0x6b90, 0x3eaa, 0x1, 0x1);
        gbc.writeMem(0xaa24, { 0xcb, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x703c);
        EXPECT(gbc.pc(), 0xaa26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa24), 0xcb);
        EXPECT(gbc.readMem(0xaa25), 0x47);
    }
}
#endif
