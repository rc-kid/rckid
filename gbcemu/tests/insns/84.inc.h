    TEST(gbcemu, opcode_84) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 84 0000
        gbc.setState(0x857b, 0xdec6, 0x91e0, 0x15a, 0xdcf3, 0x8375, 0x0, 0x0);
        gbc.writeMem(0x857b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdec6);
        EXPECT(gbc.pc(), 0x857c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x857b), 0x84);
        // 84 0001
        gbc.setState(0xeca9, 0xa1c9, 0x8770, 0xb85e, 0x6321, 0x5370, 0x0, 0x1);
        gbc.writeMem(0xeca9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa1c9);
        EXPECT(gbc.pc(), 0xecaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeca9), 0x84);
        // 84 0002
        gbc.setState(0x5ba6, 0x5ee2, 0x9850, 0x2eb8, 0xb508, 0x5159, 0x0, 0x0);
        gbc.writeMem(0x5ba6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5ee2);
        EXPECT(gbc.pc(), 0x5ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0003
        gbc.setState(0x3dc7, 0xdb9c, 0xd20, 0x9976, 0x17fa, 0xf277, 0x1, 0x0);
        gbc.writeMem(0x3dc7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xdb9c);
        EXPECT(gbc.pc(), 0x3dc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0004
        gbc.setState(0x4061, 0x62df, 0xbd10, 0xcb80, 0x339b, 0x8109, 0x1, 0x0);
        gbc.writeMem(0x4061, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x62df);
        EXPECT(gbc.pc(), 0x4062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0005
        gbc.setState(0xed6e, 0xed27, 0xd50, 0x16fb, 0x80b, 0x8b55, 0x1, 0x1);
        gbc.writeMem(0xed6e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xed27);
        EXPECT(gbc.pc(), 0xed6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed6e), 0x84);
        // 84 0006
        gbc.setState(0x95f7, 0xbe26, 0xec90, 0xc55a, 0xbc91, 0x2fc1, 0x0, 0x1);
        gbc.writeMem(0x95f7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xbe26);
        EXPECT(gbc.pc(), 0x95f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f7), 0x84);
        // 84 0007
        gbc.setState(0x4b6a, 0xee50, 0x84c0, 0xe12f, 0x8c91, 0x45ed, 0x1, 0x1);
        gbc.writeMem(0x4b6a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xee50);
        EXPECT(gbc.pc(), 0x4b6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0008
        gbc.setState(0x4e6b, 0xd0eb, 0x13b0, 0x2213, 0xe88d, 0xad1a, 0x1, 0x0);
        gbc.writeMem(0x4e6b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd0eb);
        EXPECT(gbc.pc(), 0x4e6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0009
        gbc.setState(0xd7cf, 0xdda8, 0xc970, 0xb536, 0x81e5, 0x6661, 0x1, 0x1);
        gbc.writeMem(0xd7cf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xdda8);
        EXPECT(gbc.pc(), 0xd7d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7cf), 0x84);
        // 84 000A
        gbc.setState(0xe4aa, 0xa331, 0x2270, 0x8c45, 0x60b4, 0x1fe5, 0x0, 0x1);
        gbc.writeMem(0xe4aa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa331);
        EXPECT(gbc.pc(), 0xe4ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4aa), 0x84);
        // 84 000B
        gbc.setState(0x3f2e, 0xea55, 0xbe60, 0xcb53, 0x8af9, 0xea59, 0x0, 0x1);
        gbc.writeMem(0x3f2e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xea55);
        EXPECT(gbc.pc(), 0x3f2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 000C
        gbc.setState(0xae91, 0x4b2d, 0xd0a0, 0x94fe, 0x5cac, 0xa396, 0x1, 0x1);
        gbc.writeMem(0xae91, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4b2d);
        EXPECT(gbc.pc(), 0xae92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae91), 0x84);
        // 84 000D
        gbc.setState(0x7c93, 0x8f54, 0xb220, 0x2cb8, 0x8a08, 0x9539, 0x1, 0x1);
        gbc.writeMem(0x7c93, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8f54);
        EXPECT(gbc.pc(), 0x7c94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 000F
        gbc.setState(0x1350, 0x82ef, 0xd670, 0x52b6, 0x5bea, 0xf9f8, 0x0, 0x0);
        gbc.writeMem(0x1350, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x82ef);
        EXPECT(gbc.pc(), 0x1351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0010
        gbc.setState(0xc6f2, 0x6afc, 0x78e0, 0x1f1, 0xa30b, 0xbe33, 0x1, 0x0);
        gbc.writeMem(0xc6f2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6afc);
        EXPECT(gbc.pc(), 0xc6f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6f2), 0x84);
        // 84 0011
        gbc.setState(0xc9f5, 0x6153, 0xe930, 0x89ea, 0x5776, 0xc5eb, 0x1, 0x1);
        gbc.writeMem(0xc9f5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6153);
        EXPECT(gbc.pc(), 0xc9f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f5), 0x84);
        // 84 0012
        gbc.setState(0x2398, 0x31f, 0xb340, 0x9042, 0xb75, 0x163e, 0x1, 0x1);
        gbc.writeMem(0x2398, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x31f);
        EXPECT(gbc.pc(), 0x2399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0014
        gbc.setState(0x3331, 0x5ad4, 0x53e0, 0x6332, 0x5547, 0x325, 0x1, 0x0);
        gbc.writeMem(0x3331, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5ad4);
        EXPECT(gbc.pc(), 0x3332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0015
        gbc.setState(0xecfc, 0xab49, 0xbb50, 0xb88d, 0xffa5, 0x2795, 0x0, 0x1);
        gbc.writeMem(0xecfc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xab49);
        EXPECT(gbc.pc(), 0xecfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecfc), 0x84);
        // 84 0016
        gbc.setState(0x3369, 0x5cbd, 0x910, 0xae9f, 0xc681, 0x3ca5, 0x1, 0x1);
        gbc.writeMem(0x3369, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5cbd);
        EXPECT(gbc.pc(), 0x336a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0017
        gbc.setState(0x1597, 0xaf23, 0xf2e0, 0x27fb, 0xf3bb, 0x3110, 0x0, 0x0);
        gbc.writeMem(0x1597, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xaf23);
        EXPECT(gbc.pc(), 0x1598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0018
        gbc.setState(0x7b2c, 0xedf6, 0xa0e0, 0x8a3d, 0x88cc, 0x5dab, 0x1, 0x1);
        gbc.writeMem(0x7b2c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xedf6);
        EXPECT(gbc.pc(), 0x7b2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0019
        gbc.setState(0x98c6, 0x44a, 0x7f30, 0xfba7, 0xd3e1, 0x1fa0, 0x1, 0x0);
        gbc.writeMem(0x98c6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x44a);
        EXPECT(gbc.pc(), 0x98c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c6), 0x84);
        // 84 001A
        gbc.setState(0xc3e2, 0x9eb1, 0xb150, 0x18fc, 0xad34, 0x7d9, 0x0, 0x0);
        gbc.writeMem(0xc3e2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9eb1);
        EXPECT(gbc.pc(), 0xc3e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e2), 0x84);
        // 84 001B
        gbc.setState(0x3730, 0xd51c, 0x54e0, 0xfef2, 0xcc7e, 0x7ab5, 0x0, 0x1);
        gbc.writeMem(0x3730, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd51c);
        EXPECT(gbc.pc(), 0x3731);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 001C
        gbc.setState(0xd421, 0x513b, 0x2480, 0xcbdd, 0xd677, 0xcf29, 0x1, 0x0);
        gbc.writeMem(0xd421, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x513b);
        EXPECT(gbc.pc(), 0xd422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd421), 0x84);
        // 84 001D
        gbc.setState(0x9064, 0xf1bd, 0x9990, 0x914b, 0x6f6b, 0x9b96, 0x1, 0x1);
        gbc.writeMem(0x9064, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf1bd);
        EXPECT(gbc.pc(), 0x9065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9064), 0x84);
        // 84 001E
        gbc.setState(0x1742, 0x5a8f, 0x37f0, 0xcd96, 0x9473, 0xa5eb, 0x1, 0x1);
        gbc.writeMem(0x1742, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5a8f);
        EXPECT(gbc.pc(), 0x1743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 001F
        gbc.setState(0xf8, 0x39a4, 0xb3a0, 0xcd7, 0xceae, 0x23dc, 0x0, 0x1);
        gbc.writeMem(0xf8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x39a4);
        EXPECT(gbc.pc(), 0xf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0020
        gbc.setState(0x481c, 0xae20, 0x7ec0, 0xf800, 0xc94b, 0x743e, 0x1, 0x0);
        gbc.writeMem(0x481c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xae20);
        EXPECT(gbc.pc(), 0x481d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0021
        gbc.setState(0x22a0, 0x86cd, 0x5390, 0x8b78, 0xc7b8, 0xd00, 0x0, 0x0);
        gbc.writeMem(0x22a0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x86cd);
        EXPECT(gbc.pc(), 0x22a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0022
        gbc.setState(0x83de, 0xcc00, 0x5780, 0xe21, 0xaa7b, 0x3c23, 0x1, 0x1);
        gbc.writeMem(0x83de, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xcc00);
        EXPECT(gbc.pc(), 0x83df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83de), 0x84);
        // 84 0023
        gbc.setState(0x8c32, 0xdf8, 0xd4c0, 0x3bb3, 0xb222, 0x21b0, 0x0, 0x1);
        gbc.writeMem(0x8c32, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdf8);
        EXPECT(gbc.pc(), 0x8c33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c32), 0x84);
        // 84 0025
        gbc.setState(0x7abc, 0xa830, 0xebc0, 0xd7df, 0x61ad, 0x31b5, 0x1, 0x0);
        gbc.writeMem(0x7abc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa830);
        EXPECT(gbc.pc(), 0x7abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0026
        gbc.setState(0x3531, 0x5e87, 0xf960, 0xc0cd, 0x2e63, 0x6629, 0x1, 0x0);
        gbc.writeMem(0x3531, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5e87);
        EXPECT(gbc.pc(), 0x3532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0027
        gbc.setState(0x5a9, 0xa559, 0x1f0, 0x29bb, 0x7210, 0xb74a, 0x1, 0x0);
        gbc.writeMem(0x5a9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa559);
        EXPECT(gbc.pc(), 0x5aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0029
        gbc.setState(0x449f, 0xa6c2, 0x7b50, 0x37a8, 0xcf8e, 0x8e4f, 0x0, 0x1);
        gbc.writeMem(0x449f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa6c2);
        EXPECT(gbc.pc(), 0x44a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 002A
        gbc.setState(0xa7d9, 0x9c05, 0x6ab0, 0xc24c, 0x30d7, 0xb821, 0x0, 0x1);
        gbc.writeMem(0xa7d9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9c05);
        EXPECT(gbc.pc(), 0xa7da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d9), 0x84);
        // 84 002B
        gbc.setState(0x3542, 0x4709, 0x3790, 0xe630, 0xdad3, 0x9c20, 0x1, 0x1);
        gbc.writeMem(0x3542, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4709);
        EXPECT(gbc.pc(), 0x3543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 002C
        gbc.setState(0xae8f, 0x3503, 0x61b0, 0xf2bf, 0x3e58, 0x9de8, 0x1, 0x1);
        gbc.writeMem(0xae8f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3503);
        EXPECT(gbc.pc(), 0xae90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae8f), 0x84);
        // 84 002D
        gbc.setState(0x4601, 0x25f6, 0x5cf0, 0x6b0b, 0x47c6, 0xa31e, 0x1, 0x0);
        gbc.writeMem(0x4601, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x25f6);
        EXPECT(gbc.pc(), 0x4602);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 002E
        gbc.setState(0xc13d, 0x6ec0, 0x68c0, 0x11c9, 0x6a72, 0x3fb3, 0x0, 0x1);
        gbc.writeMem(0xc13d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6ec0);
        EXPECT(gbc.pc(), 0xc13e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc13d), 0x84);
        // 84 0030
        gbc.setState(0x4fe4, 0xdadb, 0x3860, 0xa009, 0x34e6, 0x7331, 0x1, 0x0);
        gbc.writeMem(0x4fe4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xdadb);
        EXPECT(gbc.pc(), 0x4fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0031
        gbc.setState(0x7d06, 0xe64c, 0x6a70, 0xf689, 0x5474, 0xd095, 0x1, 0x1);
        gbc.writeMem(0x7d06, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe64c);
        EXPECT(gbc.pc(), 0x7d07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0032
        gbc.setState(0x81c4, 0xa27a, 0xd5a0, 0xfb07, 0x7978, 0x6a58, 0x1, 0x1);
        gbc.writeMem(0x81c4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa27a);
        EXPECT(gbc.pc(), 0x81c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c4), 0x84);
        // 84 0033
        gbc.setState(0x94bc, 0xe20f, 0x5de0, 0xcaa3, 0x63d8, 0xab75, 0x0, 0x0);
        gbc.writeMem(0x94bc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe20f);
        EXPECT(gbc.pc(), 0x94bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94bc), 0x84);
        // 84 0034
        gbc.setState(0xcee3, 0x3457, 0xd030, 0xcd61, 0x6e80, 0xa6e7, 0x1, 0x1);
        gbc.writeMem(0xcee3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3457);
        EXPECT(gbc.pc(), 0xcee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcee3), 0x84);
        // 84 0035
        gbc.setState(0x53c6, 0x8ebe, 0xa000, 0x9a50, 0x9309, 0x9774, 0x0, 0x1);
        gbc.writeMem(0x53c6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8ebe);
        EXPECT(gbc.pc(), 0x53c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0036
        gbc.setState(0xbe8d, 0x2d14, 0xee0, 0x5fd6, 0xbd6, 0x8ecd, 0x1, 0x0);
        gbc.writeMem(0xbe8d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2d14);
        EXPECT(gbc.pc(), 0xbe8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe8d), 0x84);
        // 84 0037
        gbc.setState(0xeb03, 0x528, 0x8810, 0x2e7, 0x260c, 0x6d0c, 0x1, 0x0);
        gbc.writeMem(0xeb03, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x528);
        EXPECT(gbc.pc(), 0xeb04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb03), 0x84);
        // 84 0038
        gbc.setState(0x38b6, 0xcb0, 0x5b50, 0xd99f, 0x4a6e, 0x42aa, 0x0, 0x1);
        gbc.writeMem(0x38b6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xcb0);
        EXPECT(gbc.pc(), 0x38b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0039
        gbc.setState(0xe067, 0x956c, 0xc910, 0x6aaa, 0x9abe, 0xe854, 0x1, 0x0);
        gbc.writeMem(0xe067, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x956c);
        EXPECT(gbc.pc(), 0xe068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe067), 0x84);
        // 84 003A
        gbc.setState(0x2fd4, 0x6483, 0x9e30, 0x6a3d, 0xd452, 0x9d0c, 0x0, 0x0);
        gbc.writeMem(0x2fd4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6483);
        EXPECT(gbc.pc(), 0x2fd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 003C
        gbc.setState(0x767f, 0x5b66, 0xf3b0, 0xbe30, 0xbfad, 0x3a1, 0x1, 0x1);
        gbc.writeMem(0x767f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5b66);
        EXPECT(gbc.pc(), 0x7680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 003D
        gbc.setState(0x582f, 0x7a0, 0xe090, 0x42c9, 0x94e0, 0x7e6b, 0x0, 0x1);
        gbc.writeMem(0x582f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7a0);
        EXPECT(gbc.pc(), 0x5830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 003E
        gbc.setState(0xedc6, 0x4563, 0x4660, 0xbc91, 0xb2e1, 0x49e1, 0x0, 0x1);
        gbc.writeMem(0xedc6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4563);
        EXPECT(gbc.pc(), 0xedc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc6), 0x84);
        // 84 003F
        gbc.setState(0xb6b2, 0x5039, 0x68b0, 0xd331, 0xc09c, 0x8fc7, 0x1, 0x0);
        gbc.writeMem(0xb6b2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5039);
        EXPECT(gbc.pc(), 0xb6b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b2), 0x84);
        // 84 0040
        gbc.setState(0xd278, 0x1d81, 0xc1a0, 0xca33, 0x2cae, 0x8709, 0x0, 0x1);
        gbc.writeMem(0xd278, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1d81);
        EXPECT(gbc.pc(), 0xd279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd278), 0x84);
        // 84 0041
        gbc.setState(0xd20c, 0xf038, 0xb260, 0x198a, 0xbd2e, 0x75ce, 0x0, 0x0);
        gbc.writeMem(0xd20c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf038);
        EXPECT(gbc.pc(), 0xd20d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd20c), 0x84);
        // 84 0042
        gbc.setState(0x879e, 0x5665, 0x4a70, 0x2ea4, 0x9856, 0x7e14, 0x0, 0x1);
        gbc.writeMem(0x879e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5665);
        EXPECT(gbc.pc(), 0x879f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x879e), 0x84);
        // 84 0043
        gbc.setState(0x58b5, 0xe848, 0x3720, 0xe9e7, 0xb23f, 0x1ced, 0x0, 0x1);
        gbc.writeMem(0x58b5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe848);
        EXPECT(gbc.pc(), 0x58b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0044
        gbc.setState(0x340c, 0x6d98, 0x1ec0, 0x6926, 0x40b9, 0x35b4, 0x1, 0x1);
        gbc.writeMem(0x340c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6d98);
        EXPECT(gbc.pc(), 0x340d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0045
        gbc.setState(0xe5ea, 0x232a, 0x6dc0, 0x5cc9, 0xf8c4, 0x3708, 0x1, 0x1);
        gbc.writeMem(0xe5ea, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x232a);
        EXPECT(gbc.pc(), 0xe5eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ea), 0x84);
        // 84 0046
        gbc.setState(0x9800, 0xc25d, 0x2fb0, 0x45d8, 0xb8a9, 0x302e, 0x0, 0x1);
        gbc.writeMem(0x9800, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc25d);
        EXPECT(gbc.pc(), 0x9801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9800), 0x84);
        // 84 0047
        gbc.setState(0xa941, 0x5ced, 0xc620, 0xbf21, 0x1e3b, 0x5992, 0x0, 0x1);
        gbc.writeMem(0xa941, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5ced);
        EXPECT(gbc.pc(), 0xa942);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa941), 0x84);
        // 84 0048
        gbc.setState(0x3a35, 0xdaec, 0xaac0, 0xec4, 0xa2b7, 0x7d3b, 0x1, 0x1);
        gbc.writeMem(0x3a35, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdaec);
        EXPECT(gbc.pc(), 0x3a36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0049
        gbc.setState(0xb4de, 0x789d, 0x57d0, 0x32fe, 0x5426, 0xb3b5, 0x0, 0x1);
        gbc.writeMem(0xb4de, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x789d);
        EXPECT(gbc.pc(), 0xb4df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4de), 0x84);
        // 84 004A
        gbc.setState(0x78fb, 0x8101, 0xe140, 0x70a0, 0x8bd, 0x5a35, 0x1, 0x0);
        gbc.writeMem(0x78fb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8101);
        EXPECT(gbc.pc(), 0x78fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 004C
        gbc.setState(0x9a65, 0x2d42, 0x49f0, 0x7e15, 0x933b, 0xeea5, 0x0, 0x1);
        gbc.writeMem(0x9a65, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2d42);
        EXPECT(gbc.pc(), 0x9a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a65), 0x84);
        // 84 004D
        gbc.setState(0xccbd, 0xda17, 0xeb80, 0x6adc, 0xd4b5, 0xcf39, 0x1, 0x1);
        gbc.writeMem(0xccbd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xda17);
        EXPECT(gbc.pc(), 0xccbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccbd), 0x84);
        // 84 004E
        gbc.setState(0xd43, 0x4698, 0xedc0, 0xfbc4, 0x42e2, 0x261, 0x1, 0x1);
        gbc.writeMem(0xd43, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4698);
        EXPECT(gbc.pc(), 0xd44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 004F
        gbc.setState(0xd921, 0xec64, 0x8940, 0x653c, 0x25e4, 0x451a, 0x0, 0x1);
        gbc.writeMem(0xd921, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xec64);
        EXPECT(gbc.pc(), 0xd922);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd921), 0x84);
        // 84 0050
        gbc.setState(0xebc9, 0xf460, 0x2d50, 0x505e, 0xe563, 0xcaee, 0x1, 0x1);
        gbc.writeMem(0xebc9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf460);
        EXPECT(gbc.pc(), 0xebca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebc9), 0x84);
        // 84 0052
        gbc.setState(0xd6, 0x609, 0x8940, 0xabde, 0xada4, 0x16ed, 0x1, 0x1);
        gbc.writeMem(0xd6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x609);
        EXPECT(gbc.pc(), 0xd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0053
        gbc.setState(0x681b, 0x6ba5, 0xa1a0, 0x8499, 0x2d13, 0x8b99, 0x1, 0x0);
        gbc.writeMem(0x681b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6ba5);
        EXPECT(gbc.pc(), 0x681c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0055
        gbc.setState(0x202f, 0xdf3e, 0x3f80, 0x25c4, 0x9096, 0x70cb, 0x1, 0x0);
        gbc.writeMem(0x202f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xdf3e);
        EXPECT(gbc.pc(), 0x2030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0056
        gbc.setState(0xc13d, 0x9960, 0x2320, 0xd5bd, 0xe29e, 0x92ef, 0x1, 0x1);
        gbc.writeMem(0xc13d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9960);
        EXPECT(gbc.pc(), 0xc13e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc13d), 0x84);
        // 84 0057
        gbc.setState(0xc9cf, 0x9411, 0x5d20, 0x7b66, 0xe066, 0x25b6, 0x1, 0x0);
        gbc.writeMem(0xc9cf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9411);
        EXPECT(gbc.pc(), 0xc9d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9cf), 0x84);
        // 84 0058
        gbc.setState(0x3485, 0x9c8, 0x9780, 0x765a, 0x2e3c, 0x26ea, 0x1, 0x1);
        gbc.writeMem(0x3485, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9c8);
        EXPECT(gbc.pc(), 0x3486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0059
        gbc.setState(0xd8e7, 0x4108, 0x1990, 0x9e6a, 0x6e6d, 0xffcf, 0x1, 0x1);
        gbc.writeMem(0xd8e7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4108);
        EXPECT(gbc.pc(), 0xd8e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8e7), 0x84);
        // 84 005A
        gbc.setState(0x32d4, 0x9e26, 0x7dd0, 0x1b1e, 0xa440, 0xb81d, 0x1, 0x1);
        gbc.writeMem(0x32d4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9e26);
        EXPECT(gbc.pc(), 0x32d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 005B
        gbc.setState(0x207, 0x4efa, 0x82e0, 0x90cf, 0xd07, 0x2753, 0x0, 0x1);
        gbc.writeMem(0x207, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4efa);
        EXPECT(gbc.pc(), 0x208);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 005C
        gbc.setState(0x7a4a, 0x1298, 0xa860, 0x1aa6, 0xb368, 0x5b94, 0x1, 0x1);
        gbc.writeMem(0x7a4a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1298);
        EXPECT(gbc.pc(), 0x7a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 005D
        gbc.setState(0xca30, 0x763d, 0x9330, 0xaa32, 0x508, 0x89e6, 0x0, 0x1);
        gbc.writeMem(0xca30, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x763d);
        EXPECT(gbc.pc(), 0xca31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca30), 0x84);
        // 84 005E
        gbc.setState(0x2868, 0xc97c, 0x660, 0xed07, 0xd2c9, 0x9062, 0x1, 0x0);
        gbc.writeMem(0x2868, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc97c);
        EXPECT(gbc.pc(), 0x2869);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 005F
        gbc.setState(0x894e, 0x15b4, 0x1550, 0x7aec, 0x793f, 0xe1c5, 0x0, 0x0);
        gbc.writeMem(0x894e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x15b4);
        EXPECT(gbc.pc(), 0x894f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x894e), 0x84);
        // 84 0060
        gbc.setState(0xa7fa, 0x12c, 0x9f70, 0x7452, 0x4c56, 0xaea4, 0x1, 0x0);
        gbc.writeMem(0xa7fa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x12c);
        EXPECT(gbc.pc(), 0xa7fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7fa), 0x84);
        // 84 0061
        gbc.setState(0x8d5a, 0x4240, 0x2c0, 0x2c94, 0x76fa, 0x22c9, 0x0, 0x0);
        gbc.writeMem(0x8d5a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4240);
        EXPECT(gbc.pc(), 0x8d5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d5a), 0x84);
        // 84 0062
        gbc.setState(0xc052, 0x5ef8, 0x5f0, 0x2b76, 0xe909, 0x2453, 0x0, 0x1);
        gbc.writeMem(0xc052, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5ef8);
        EXPECT(gbc.pc(), 0xc053);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc052), 0x84);
        // 84 0063
        gbc.setState(0x6049, 0xa0b1, 0x2920, 0x4015, 0xdfc9, 0x1d23, 0x0, 0x0);
        gbc.writeMem(0x6049, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa0b1);
        EXPECT(gbc.pc(), 0x604a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0064
        gbc.setState(0xa820, 0x6405, 0xf050, 0x53c4, 0x1289, 0xb07b, 0x1, 0x0);
        gbc.writeMem(0xa820, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6405);
        EXPECT(gbc.pc(), 0xa821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa820), 0x84);
        // 84 0065
        gbc.setState(0x73a9, 0xa2dc, 0x4d40, 0x291a, 0xfdc2, 0x2c2f, 0x0, 0x0);
        gbc.writeMem(0x73a9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa2dc);
        EXPECT(gbc.pc(), 0x73aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0066
        gbc.setState(0x72d6, 0x95a4, 0x3380, 0xb169, 0x2bda, 0xc9d5, 0x0, 0x0);
        gbc.writeMem(0x72d6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x95a4);
        EXPECT(gbc.pc(), 0x72d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0067
        gbc.setState(0x172, 0x9581, 0xcd00, 0x8327, 0xf72a, 0x7efc, 0x1, 0x1);
        gbc.writeMem(0x172, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9581);
        EXPECT(gbc.pc(), 0x173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0068
        gbc.setState(0x3a27, 0x40a1, 0x7550, 0x49cb, 0x60ba, 0x6484, 0x1, 0x0);
        gbc.writeMem(0x3a27, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x40a1);
        EXPECT(gbc.pc(), 0x3a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0069
        gbc.setState(0x7567, 0x2a65, 0x48a0, 0x3e07, 0x21f8, 0xacd4, 0x1, 0x1);
        gbc.writeMem(0x7567, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2a65);
        EXPECT(gbc.pc(), 0x7568);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 006A
        gbc.setState(0x8673, 0x8507, 0x3330, 0x162f, 0xf95b, 0x3930, 0x1, 0x1);
        gbc.writeMem(0x8673, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8507);
        EXPECT(gbc.pc(), 0x8674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8673), 0x84);
        // 84 006B
        gbc.setState(0x2748, 0x925a, 0x4200, 0x8394, 0xa6a1, 0x94df, 0x1, 0x0);
        gbc.writeMem(0x2748, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x925a);
        EXPECT(gbc.pc(), 0x2749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 006C
        gbc.setState(0x2454, 0x2ce2, 0x6ba0, 0x24d2, 0x89d0, 0x12c4, 0x0, 0x1);
        gbc.writeMem(0x2454, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2ce2);
        EXPECT(gbc.pc(), 0x2455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 006D
        gbc.setState(0x5453, 0xbaf, 0x6a50, 0xfd3f, 0xfadb, 0xaa4f, 0x1, 0x0);
        gbc.writeMem(0x5453, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xbaf);
        EXPECT(gbc.pc(), 0x5454);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 006E
        gbc.setState(0xe19c, 0xa72e, 0x3d50, 0x7d7f, 0x2ec2, 0x729c, 0x0, 0x0);
        gbc.writeMem(0xe19c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa72e);
        EXPECT(gbc.pc(), 0xe19d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe19c), 0x84);
        // 84 006F
        gbc.setState(0x3a8f, 0x5700, 0x46e0, 0x1649, 0xc7d1, 0x29cc, 0x0, 0x0);
        gbc.writeMem(0x3a8f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5700);
        EXPECT(gbc.pc(), 0x3a90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0070
        gbc.setState(0xb556, 0x1bf, 0x5560, 0x1fc, 0xc619, 0x3465, 0x1, 0x0);
        gbc.writeMem(0xb556, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1bf);
        EXPECT(gbc.pc(), 0xb557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb556), 0x84);
        // 84 0071
        gbc.setState(0xd33c, 0xa76c, 0x3fc0, 0x4705, 0x3556, 0xb580, 0x0, 0x1);
        gbc.writeMem(0xd33c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa76c);
        EXPECT(gbc.pc(), 0xd33d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd33c), 0x84);
        // 84 0072
        gbc.setState(0x3410, 0xd81e, 0xfd50, 0x7703, 0xbf69, 0x2fe0, 0x1, 0x1);
        gbc.writeMem(0x3410, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd81e);
        EXPECT(gbc.pc(), 0x3411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0073
        gbc.setState(0xbca, 0xe032, 0x2a40, 0x54a4, 0xb8af, 0x2727, 0x1, 0x0);
        gbc.writeMem(0xbca, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe032);
        EXPECT(gbc.pc(), 0xbcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0074
        gbc.setState(0x7b25, 0x3638, 0xf670, 0x255f, 0x428e, 0xd448, 0x1, 0x1);
        gbc.writeMem(0x7b25, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3638);
        EXPECT(gbc.pc(), 0x7b26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0075
        gbc.setState(0x1cf9, 0xb103, 0x2bd0, 0xf1cc, 0xad6, 0xdb03, 0x1, 0x0);
        gbc.writeMem(0x1cf9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb103);
        EXPECT(gbc.pc(), 0x1cfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0076
        gbc.setState(0x6a11, 0xdafe, 0xf7e0, 0x6fe4, 0xbca6, 0xc464, 0x0, 0x1);
        gbc.writeMem(0x6a11, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdafe);
        EXPECT(gbc.pc(), 0x6a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0077
        gbc.setState(0xe06c, 0x9fcc, 0x5040, 0x50d1, 0xd820, 0xd0ea, 0x1, 0x0);
        gbc.writeMem(0xe06c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9fcc);
        EXPECT(gbc.pc(), 0xe06d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe06c), 0x84);
        // 84 0078
        gbc.setState(0xb698, 0x4f78, 0xe5d0, 0xd099, 0xcf27, 0x694e, 0x0, 0x0);
        gbc.writeMem(0xb698, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4f78);
        EXPECT(gbc.pc(), 0xb699);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb698), 0x84);
        // 84 0079
        gbc.setState(0x3cda, 0x74be, 0x17c0, 0xd86f, 0x786d, 0xa410, 0x1, 0x1);
        gbc.writeMem(0x3cda, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x74be);
        EXPECT(gbc.pc(), 0x3cdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 007A
        gbc.setState(0x4541, 0x36a3, 0x5030, 0x5346, 0x9d76, 0xcc26, 0x1, 0x1);
        gbc.writeMem(0x4541, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x36a3);
        EXPECT(gbc.pc(), 0x4542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 007B
        gbc.setState(0x3c4d, 0x5959, 0x40a0, 0xa190, 0x63f4, 0x2f4e, 0x0, 0x1);
        gbc.writeMem(0x3c4d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5959);
        EXPECT(gbc.pc(), 0x3c4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 007C
        gbc.setState(0x70ed, 0xbbee, 0xe890, 0x7bb0, 0xcf24, 0x2e1e, 0x1, 0x1);
        gbc.writeMem(0x70ed, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xbbee);
        EXPECT(gbc.pc(), 0x70ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 007D
        gbc.setState(0x614f, 0xea9, 0x7310, 0xa805, 0x4cd8, 0x1660, 0x1, 0x0);
        gbc.writeMem(0x614f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xea9);
        EXPECT(gbc.pc(), 0x6150);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 007E
        gbc.setState(0xd69b, 0xb55c, 0xcf10, 0xe46e, 0x453f, 0xaea2, 0x0, 0x1);
        gbc.writeMem(0xd69b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb55c);
        EXPECT(gbc.pc(), 0xd69c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd69b), 0x84);
        // 84 007F
        gbc.setState(0xa1c2, 0x72d, 0x2c00, 0xef24, 0x218a, 0xbf86, 0x1, 0x1);
        gbc.writeMem(0xa1c2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x72d);
        EXPECT(gbc.pc(), 0xa1c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c2), 0x84);
        // 84 0080
        gbc.setState(0x2649, 0x40ab, 0x5310, 0x958e, 0xcce3, 0xdb64, 0x1, 0x1);
        gbc.writeMem(0x2649, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x40ab);
        EXPECT(gbc.pc(), 0x264a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0081
        gbc.setState(0x3ee3, 0xcda9, 0xe960, 0x4517, 0x6129, 0xb571, 0x0, 0x1);
        gbc.writeMem(0x3ee3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xcda9);
        EXPECT(gbc.pc(), 0x3ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0082
        gbc.setState(0x6d84, 0xb53c, 0x5100, 0x2347, 0x9769, 0x3b2e, 0x0, 0x0);
        gbc.writeMem(0x6d84, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb53c);
        EXPECT(gbc.pc(), 0x6d85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0083
        gbc.setState(0xeba5, 0x6b8b, 0xabc0, 0x844f, 0x1497, 0x4335, 0x1, 0x1);
        gbc.writeMem(0xeba5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x6b8b);
        EXPECT(gbc.pc(), 0xeba6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeba5), 0x84);
        // 84 0084
        gbc.setState(0xb2d3, 0x71bb, 0xe2d0, 0x52ac, 0x5ad3, 0x281c, 0x1, 0x0);
        gbc.writeMem(0xb2d3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x71bb);
        EXPECT(gbc.pc(), 0xb2d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2d3), 0x84);
        // 84 0085
        gbc.setState(0x802e, 0xb603, 0xb380, 0x20d2, 0xa104, 0x862a, 0x1, 0x0);
        gbc.writeMem(0x802e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb603);
        EXPECT(gbc.pc(), 0x802f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x802e), 0x84);
        // 84 0086
        gbc.setState(0xb7dc, 0x25e5, 0xcbc0, 0x6f30, 0xfebc, 0x9024, 0x0, 0x1);
        gbc.writeMem(0xb7dc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x25e5);
        EXPECT(gbc.pc(), 0xb7dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7dc), 0x84);
        // 84 0087
        gbc.setState(0x3b26, 0xa89f, 0x2650, 0x1b3f, 0x571e, 0xb5f9, 0x1, 0x0);
        gbc.writeMem(0x3b26, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa89f);
        EXPECT(gbc.pc(), 0x3b27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0088
        gbc.setState(0x1f9, 0x717d, 0xa640, 0x450a, 0xc6ff, 0x3eb, 0x0, 0x0);
        gbc.writeMem(0x1f9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x717d);
        EXPECT(gbc.pc(), 0x1fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0089
        gbc.setState(0x177c, 0x755e, 0x5320, 0xd7ca, 0x503, 0x5e62, 0x1, 0x1);
        gbc.writeMem(0x177c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x755e);
        EXPECT(gbc.pc(), 0x177d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 008A
        gbc.setState(0x5b43, 0x2f03, 0xc630, 0x6d83, 0x5, 0x1b55, 0x0, 0x1);
        gbc.writeMem(0x5b43, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2f03);
        EXPECT(gbc.pc(), 0x5b44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 008B
        gbc.setState(0x5dae, 0xd407, 0xf5f0, 0x2694, 0x47fe, 0xd980, 0x1, 0x0);
        gbc.writeMem(0x5dae, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd407);
        EXPECT(gbc.pc(), 0x5daf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 008C
        gbc.setState(0xb396, 0xa379, 0x30d0, 0xd81b, 0xf0ac, 0x779c, 0x1, 0x0);
        gbc.writeMem(0xb396, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa379);
        EXPECT(gbc.pc(), 0xb397);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb396), 0x84);
        // 84 008D
        gbc.setState(0x5f1d, 0x4106, 0x7b70, 0xd020, 0x8a7a, 0xddb9, 0x1, 0x0);
        gbc.writeMem(0x5f1d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4106);
        EXPECT(gbc.pc(), 0x5f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 008E
        gbc.setState(0xecc, 0xdc0b, 0x5fe0, 0x83c6, 0x34a3, 0x9753, 0x1, 0x1);
        gbc.writeMem(0xecc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdc0b);
        EXPECT(gbc.pc(), 0xecd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 008F
        gbc.setState(0x5118, 0xdbf5, 0x92d0, 0x9014, 0x8aed, 0x63bf, 0x1, 0x0);
        gbc.writeMem(0x5118, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xdbf5);
        EXPECT(gbc.pc(), 0x5119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0091
        gbc.setState(0x44a, 0x803c, 0x2c30, 0xf023, 0xab6f, 0xfd8c, 0x1, 0x1);
        gbc.writeMem(0x44a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x803c);
        EXPECT(gbc.pc(), 0x44b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0092
        gbc.setState(0x6669, 0xe9a7, 0x7630, 0xbd21, 0x122a, 0xe569, 0x1, 0x1);
        gbc.writeMem(0x6669, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe9a7);
        EXPECT(gbc.pc(), 0x666a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0093
        gbc.setState(0x11b1, 0x3a58, 0x9f20, 0x2745, 0x3678, 0x605, 0x1, 0x1);
        gbc.writeMem(0x11b1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3a58);
        EXPECT(gbc.pc(), 0x11b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0094
        gbc.setState(0x1364, 0x2ce2, 0xd2e0, 0x8d02, 0xf2e0, 0x3193, 0x0, 0x0);
        gbc.writeMem(0x1364, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2ce2);
        EXPECT(gbc.pc(), 0x1365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0095
        gbc.setState(0xcae1, 0xb282, 0x2d0, 0x5b88, 0xed86, 0xf7ef, 0x0, 0x0);
        gbc.writeMem(0xcae1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb282);
        EXPECT(gbc.pc(), 0xcae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae1), 0x84);
        // 84 0096
        gbc.setState(0x1252, 0x7efd, 0xb000, 0xe598, 0xd7ba, 0x14f1, 0x0, 0x1);
        gbc.writeMem(0x1252, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7efd);
        EXPECT(gbc.pc(), 0x1253);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0097
        gbc.setState(0x8160, 0x9579, 0xede0, 0x8ba7, 0xbe5b, 0x42ed, 0x1, 0x0);
        gbc.writeMem(0x8160, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9579);
        EXPECT(gbc.pc(), 0x8161);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8160), 0x84);
        // 84 0098
        gbc.setState(0xcd74, 0x3f66, 0xf470, 0x2b90, 0xa32, 0x833, 0x0, 0x0);
        gbc.writeMem(0xcd74, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3f66);
        EXPECT(gbc.pc(), 0xcd75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd74), 0x84);
        // 84 0099
        gbc.setState(0x3965, 0xedd6, 0x37d0, 0x17e1, 0x5d48, 0xf6c5, 0x0, 0x1);
        gbc.writeMem(0x3965, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xedd6);
        EXPECT(gbc.pc(), 0x3966);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 009A
        gbc.setState(0x8410, 0x6acd, 0xab50, 0x82f8, 0x4bcb, 0x4cb7, 0x1, 0x1);
        gbc.writeMem(0x8410, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6acd);
        EXPECT(gbc.pc(), 0x8411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8410), 0x84);
        // 84 009B
        gbc.setState(0x32dd, 0xd62d, 0x37d0, 0xf4f5, 0x8489, 0x45c6, 0x0, 0x0);
        gbc.writeMem(0x32dd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd62d);
        EXPECT(gbc.pc(), 0x32de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 009C
        gbc.setState(0x1f16, 0x590a, 0x230, 0xeba1, 0x6e66, 0x477e, 0x0, 0x0);
        gbc.writeMem(0x1f16, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x590a);
        EXPECT(gbc.pc(), 0x1f17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 009D
        gbc.setState(0x1b22, 0x6ed0, 0xa0c0, 0x426e, 0x9e2b, 0x33ff, 0x0, 0x0);
        gbc.writeMem(0x1b22, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6ed0);
        EXPECT(gbc.pc(), 0x1b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 009E
        gbc.setState(0xc96b, 0x875f, 0xafa0, 0xf43f, 0xedc8, 0xdc3e, 0x1, 0x1);
        gbc.writeMem(0xc96b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x875f);
        EXPECT(gbc.pc(), 0xc96c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc96b), 0x84);
        // 84 009F
        gbc.setState(0xeada, 0x79a4, 0xc700, 0xc1ec, 0x4647, 0xeb53, 0x0, 0x1);
        gbc.writeMem(0xeada, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x79a4);
        EXPECT(gbc.pc(), 0xeadb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeada), 0x84);
        // 84 00A0
        gbc.setState(0xd2c8, 0x7c54, 0x6bf0, 0xef19, 0xb9cf, 0x4090, 0x1, 0x1);
        gbc.writeMem(0xd2c8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7c54);
        EXPECT(gbc.pc(), 0xd2c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2c8), 0x84);
        // 84 00A1
        gbc.setState(0x3668, 0x3ca8, 0x6750, 0xd2aa, 0x70ae, 0xa68a, 0x0, 0x1);
        gbc.writeMem(0x3668, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3ca8);
        EXPECT(gbc.pc(), 0x3669);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00A2
        gbc.setState(0x9a8c, 0x7907, 0x5160, 0x7d6e, 0x76e6, 0x1e17, 0x0, 0x0);
        gbc.writeMem(0x9a8c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7907);
        EXPECT(gbc.pc(), 0x9a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a8c), 0x84);
        // 84 00A3
        gbc.setState(0x570f, 0x6030, 0xaf70, 0xca50, 0xa8f8, 0xbdfa, 0x0, 0x0);
        gbc.writeMem(0x570f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6030);
        EXPECT(gbc.pc(), 0x5710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00A4
        gbc.setState(0xe432, 0xaacc, 0x3370, 0x15dd, 0xdf42, 0x234e, 0x1, 0x1);
        gbc.writeMem(0xe432, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xaacc);
        EXPECT(gbc.pc(), 0xe433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe432), 0x84);
        // 84 00A5
        gbc.setState(0xa540, 0x4723, 0xc080, 0x8b3a, 0x2381, 0x442f, 0x1, 0x1);
        gbc.writeMem(0xa540, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4723);
        EXPECT(gbc.pc(), 0xa541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa540), 0x84);
        // 84 00A6
        gbc.setState(0x2091, 0x862a, 0x9930, 0xdfd6, 0xa180, 0x821b, 0x1, 0x0);
        gbc.writeMem(0x2091, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x862a);
        EXPECT(gbc.pc(), 0x2092);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00A8
        gbc.setState(0x235b, 0x4832, 0x7fb0, 0xe0f4, 0x5dc0, 0x62c4, 0x1, 0x0);
        gbc.writeMem(0x235b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4832);
        EXPECT(gbc.pc(), 0x235c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 00A9
        gbc.setState(0x7469, 0xeb79, 0x3010, 0x107f, 0xe94c, 0x4316, 0x0, 0x0);
        gbc.writeMem(0x7469, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xeb79);
        EXPECT(gbc.pc(), 0x746a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00AA
        gbc.setState(0xeb50, 0x8083, 0x7ec0, 0x9767, 0x3715, 0x4d09, 0x0, 0x0);
        gbc.writeMem(0xeb50, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8083);
        EXPECT(gbc.pc(), 0xeb51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb50), 0x84);
        // 84 00AB
        gbc.setState(0x90d9, 0x6d8b, 0x5230, 0x2780, 0x10c5, 0xdffc, 0x1, 0x1);
        gbc.writeMem(0x90d9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6d8b);
        EXPECT(gbc.pc(), 0x90da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d9), 0x84);
        // 84 00AC
        gbc.setState(0xcb85, 0xe5f5, 0x3b10, 0xc788, 0x54d3, 0xa1a6, 0x0, 0x1);
        gbc.writeMem(0xcb85, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe5f5);
        EXPECT(gbc.pc(), 0xcb86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb85), 0x84);
        // 84 00AE
        gbc.setState(0x3ea2, 0x8bfb, 0x6210, 0x5775, 0x5072, 0x7749, 0x1, 0x1);
        gbc.writeMem(0x3ea2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8bfb);
        EXPECT(gbc.pc(), 0x3ea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00AF
        gbc.setState(0x360d, 0xa37a, 0xdf00, 0x8480, 0x95ea, 0x83b4, 0x1, 0x0);
        gbc.writeMem(0x360d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa37a);
        EXPECT(gbc.pc(), 0x360e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00B0
        gbc.setState(0x4728, 0x98ee, 0xb0c0, 0xe11, 0x1a67, 0xbd88, 0x0, 0x0);
        gbc.writeMem(0x4728, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x98ee);
        EXPECT(gbc.pc(), 0x4729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00B1
        gbc.setState(0xcffb, 0x1a0c, 0x51c0, 0xd30b, 0xff72, 0xa263, 0x1, 0x1);
        gbc.writeMem(0xcffb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1a0c);
        EXPECT(gbc.pc(), 0xcffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcffb), 0x84);
        // 84 00B4
        gbc.setState(0x7898, 0x292a, 0x1550, 0xf0c0, 0x75fc, 0x6179, 0x1, 0x0);
        gbc.writeMem(0x7898, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x292a);
        EXPECT(gbc.pc(), 0x7899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00B5
        gbc.setState(0xc7fe, 0x8532, 0x1300, 0xb0a3, 0xa141, 0x4f2d, 0x0, 0x1);
        gbc.writeMem(0xc7fe, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8532);
        EXPECT(gbc.pc(), 0xc7ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7fe), 0x84);
        // 84 00B6
        gbc.setState(0x6c3d, 0x5dde, 0x15b0, 0x32db, 0x4e8, 0x1478, 0x0, 0x0);
        gbc.writeMem(0x6c3d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5dde);
        EXPECT(gbc.pc(), 0x6c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00B7
        gbc.setState(0xc810, 0xa6d0, 0xda50, 0x7da3, 0x250, 0x8d7a, 0x1, 0x0);
        gbc.writeMem(0xc810, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa6d0);
        EXPECT(gbc.pc(), 0xc811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc810), 0x84);
        // 84 00B8
        gbc.setState(0x419d, 0xcecf, 0xc8d0, 0x6831, 0x4bb0, 0x161c, 0x0, 0x0);
        gbc.writeMem(0x419d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xcecf);
        EXPECT(gbc.pc(), 0x419e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00B9
        gbc.setState(0xcd8b, 0xd159, 0x7e50, 0x66d4, 0x7df, 0xe6f4, 0x1, 0x0);
        gbc.writeMem(0xcd8b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd159);
        EXPECT(gbc.pc(), 0xcd8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd8b), 0x84);
        // 84 00BB
        gbc.setState(0x13a0, 0x9399, 0xe7a0, 0x1c40, 0x21d9, 0x82c0, 0x0, 0x1);
        gbc.writeMem(0x13a0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9399);
        EXPECT(gbc.pc(), 0x13a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00BC
        gbc.setState(0x397a, 0xe16d, 0x3990, 0x83e2, 0x32f0, 0x1c4f, 0x1, 0x1);
        gbc.writeMem(0x397a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xe16d);
        EXPECT(gbc.pc(), 0x397b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 00BD
        gbc.setState(0xee3d, 0x1092, 0x4160, 0x3ff5, 0xae00, 0x45b, 0x1, 0x1);
        gbc.writeMem(0xee3d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1092);
        EXPECT(gbc.pc(), 0xee3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee3d), 0x84);
        // 84 00BE
        gbc.setState(0xd590, 0xb4e7, 0xc040, 0x7f8d, 0xb7e9, 0xd580, 0x0, 0x0);
        gbc.writeMem(0xd590, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb4e7);
        EXPECT(gbc.pc(), 0xd591);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd590), 0x84);
        // 84 00BF
        gbc.setState(0x3999, 0x61ec, 0xd410, 0x448e, 0xa13e, 0x7baf, 0x0, 0x0);
        gbc.writeMem(0x3999, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x61ec);
        EXPECT(gbc.pc(), 0x399a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00C0
        gbc.setState(0xb377, 0x1b67, 0xecf0, 0x2f6b, 0x1eac, 0x3e4, 0x0, 0x1);
        gbc.writeMem(0xb377, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1b67);
        EXPECT(gbc.pc(), 0xb378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb377), 0x84);
        // 84 00C1
        gbc.setState(0x97a1, 0x8757, 0x6270, 0x4139, 0x4284, 0x1583, 0x1, 0x0);
        gbc.writeMem(0x97a1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8757);
        EXPECT(gbc.pc(), 0x97a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97a1), 0x84);
        // 84 00C2
        gbc.setState(0x7fb5, 0xa8c1, 0x450, 0xf43d, 0x9e2a, 0xbf8c, 0x0, 0x0);
        gbc.writeMem(0x7fb5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa8c1);
        EXPECT(gbc.pc(), 0x7fb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 00C3
        gbc.setState(0x4cae, 0x87ed, 0x80f0, 0x9853, 0x8f2, 0xd5b4, 0x1, 0x1);
        gbc.writeMem(0x4cae, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x87ed);
        EXPECT(gbc.pc(), 0x4caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00C4
        gbc.setState(0x77c1, 0xa8b1, 0xfe00, 0x7302, 0xa2, 0x9bd4, 0x0, 0x1);
        gbc.writeMem(0x77c1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa8b1);
        EXPECT(gbc.pc(), 0x77c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00C5
        gbc.setState(0xc218, 0xad20, 0xd90, 0xb29c, 0x5558, 0xd6b3, 0x0, 0x1);
        gbc.writeMem(0xc218, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xad20);
        EXPECT(gbc.pc(), 0xc219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc218), 0x84);
        // 84 00C6
        gbc.setState(0x1e92, 0x88a, 0xbd50, 0x8b22, 0xa653, 0xe348, 0x0, 0x0);
        gbc.writeMem(0x1e92, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x88a);
        EXPECT(gbc.pc(), 0x1e93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00C7
        gbc.setState(0xd99, 0x2467, 0x2240, 0x232a, 0xa2be, 0x6abc, 0x1, 0x0);
        gbc.writeMem(0xd99, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2467);
        EXPECT(gbc.pc(), 0xd9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00C8
        gbc.setState(0x1a32, 0x8941, 0x3f90, 0x955b, 0xd01d, 0x8f24, 0x0, 0x0);
        gbc.writeMem(0x1a32, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8941);
        EXPECT(gbc.pc(), 0x1a33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 00C9
        gbc.setState(0xa0e, 0x876f, 0x3d20, 0x4e20, 0xa0e3, 0xf3d2, 0x0, 0x0);
        gbc.writeMem(0xa0e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x876f);
        EXPECT(gbc.pc(), 0xa0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00CA
        gbc.setState(0x7d8b, 0x76df, 0x2470, 0x4492, 0x8d43, 0xeb1c, 0x0, 0x1);
        gbc.writeMem(0x7d8b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x76df);
        EXPECT(gbc.pc(), 0x7d8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00CB
        gbc.setState(0x93c7, 0x6524, 0xcea0, 0xed68, 0xee1a, 0xf786, 0x1, 0x1);
        gbc.writeMem(0x93c7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6524);
        EXPECT(gbc.pc(), 0x93c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c7), 0x84);
        // 84 00CC
        gbc.setState(0x85b0, 0x40cd, 0x9710, 0x4861, 0x9dab, 0xfed0, 0x0, 0x1);
        gbc.writeMem(0x85b0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x40cd);
        EXPECT(gbc.pc(), 0x85b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85b0), 0x84);
        // 84 00CD
        gbc.setState(0x24b3, 0xfb05, 0xbb90, 0x6e09, 0x9d5f, 0xd25d, 0x0, 0x1);
        gbc.writeMem(0x24b3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xfb05);
        EXPECT(gbc.pc(), 0x24b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00CE
        gbc.setState(0x37d2, 0xfeb, 0x7240, 0x30c0, 0x92bf, 0x755d, 0x0, 0x1);
        gbc.writeMem(0x37d2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xfeb);
        EXPECT(gbc.pc(), 0x37d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00CF
        gbc.setState(0xd1d0, 0xcbf8, 0xd160, 0xbb13, 0xbd40, 0xd735, 0x0, 0x0);
        gbc.writeMem(0xd1d0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xcbf8);
        EXPECT(gbc.pc(), 0xd1d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d0), 0x84);
        // 84 00D1
        gbc.setState(0x2da4, 0x2891, 0xc9e0, 0xed4c, 0xd508, 0xff3e, 0x0, 0x0);
        gbc.writeMem(0x2da4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2891);
        EXPECT(gbc.pc(), 0x2da5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00D3
        gbc.setState(0x6ec8, 0xcbd4, 0xfc70, 0xbdeb, 0x7780, 0x3c5f, 0x1, 0x0);
        gbc.writeMem(0x6ec8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xcbd4);
        EXPECT(gbc.pc(), 0x6ec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00D4
        gbc.setState(0x28a9, 0x9ac9, 0x1d30, 0x65a7, 0xd265, 0xa88e, 0x0, 0x0);
        gbc.writeMem(0x28a9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9ac9);
        EXPECT(gbc.pc(), 0x28aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 00D5
        gbc.setState(0xd0ae, 0x6eb7, 0x3bd0, 0x5309, 0xd35a, 0x28c6, 0x0, 0x1);
        gbc.writeMem(0xd0ae, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6eb7);
        EXPECT(gbc.pc(), 0xd0af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ae), 0x84);
        // 84 00D7
        gbc.setState(0x9ba2, 0xa0e4, 0x8a20, 0x36c5, 0xf759, 0x4f15, 0x1, 0x1);
        gbc.writeMem(0x9ba2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa0e4);
        EXPECT(gbc.pc(), 0x9ba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba2), 0x84);
        // 84 00D8
        gbc.setState(0x9ca, 0xf112, 0x6180, 0x89ec, 0x9803, 0x3da3, 0x0, 0x0);
        gbc.writeMem(0x9ca, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xf112);
        EXPECT(gbc.pc(), 0x9cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00D9
        gbc.setState(0x6708, 0x118d, 0x8870, 0xf65a, 0x1220, 0xa5c1, 0x1, 0x0);
        gbc.writeMem(0x6708, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x118d);
        EXPECT(gbc.pc(), 0x6709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00DA
        gbc.setState(0x7fc0, 0xfd13, 0x9330, 0x34a7, 0x9a90, 0x7a2f, 0x1, 0x1);
        gbc.writeMem(0x7fc0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xfd13);
        EXPECT(gbc.pc(), 0x7fc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00DC
        gbc.setState(0xc2c0, 0x34b0, 0x3d90, 0x6e18, 0x320f, 0x81a2, 0x1, 0x1);
        gbc.writeMem(0xc2c0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x34b0);
        EXPECT(gbc.pc(), 0xc2c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2c0), 0x84);
        // 84 00DD
        gbc.setState(0x98ae, 0x94a7, 0x4e20, 0xf590, 0x9bde, 0xa776, 0x1, 0x1);
        gbc.writeMem(0x98ae, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x94a7);
        EXPECT(gbc.pc(), 0x98af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ae), 0x84);
        // 84 00DE
        gbc.setState(0xc3d, 0x257b, 0x1ce0, 0x78c7, 0xcac9, 0xfd4c, 0x1, 0x1);
        gbc.writeMem(0xc3d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x257b);
        EXPECT(gbc.pc(), 0xc3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00DF
        gbc.setState(0x8825, 0x5117, 0x7510, 0x3841, 0x186, 0xf31c, 0x0, 0x1);
        gbc.writeMem(0x8825, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5117);
        EXPECT(gbc.pc(), 0x8826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8825), 0x84);
        // 84 00E0
        gbc.setState(0xb594, 0xc0c1, 0xa90, 0x81a2, 0xdbed, 0x4859, 0x1, 0x0);
        gbc.writeMem(0xb594, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc0c1);
        EXPECT(gbc.pc(), 0xb595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb594), 0x84);
        // 84 00E1
        gbc.setState(0x56a, 0xefb8, 0x39d0, 0x8de3, 0x1ad2, 0xf658, 0x1, 0x1);
        gbc.writeMem(0x56a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xefb8);
        EXPECT(gbc.pc(), 0x56b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00E2
        gbc.setState(0xdce4, 0x9396, 0xad10, 0xb07d, 0xa717, 0x81f7, 0x0, 0x0);
        gbc.writeMem(0xdce4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9396);
        EXPECT(gbc.pc(), 0xdce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdce4), 0x84);
        // 84 00E3
        gbc.setState(0x8cc7, 0xb092, 0x6020, 0xbffb, 0x701d, 0xdc1c, 0x1, 0x1);
        gbc.writeMem(0x8cc7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb092);
        EXPECT(gbc.pc(), 0x8cc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cc7), 0x84);
        // 84 00E4
        gbc.setState(0xc100, 0x67b3, 0x4850, 0xb33b, 0xa452, 0xef2a, 0x0, 0x1);
        gbc.writeMem(0xc100, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x67b3);
        EXPECT(gbc.pc(), 0xc101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc100), 0x84);
        // 84 00E5
        gbc.setState(0x68fd, 0x5b4e, 0xbeb0, 0xe85, 0x20fd, 0xf50e, 0x1, 0x1);
        gbc.writeMem(0x68fd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5b4e);
        EXPECT(gbc.pc(), 0x68fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00E6
        gbc.setState(0xd0, 0xda59, 0x2ae0, 0xc785, 0xb8c7, 0x94c, 0x1, 0x1);
        gbc.writeMem(0xd0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xda59);
        EXPECT(gbc.pc(), 0xd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 00E7
        gbc.setState(0xc65c, 0x6ace, 0x1450, 0x43a9, 0x6ec4, 0xb21b, 0x0, 0x1);
        gbc.writeMem(0xc65c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6ace);
        EXPECT(gbc.pc(), 0xc65d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65c), 0x84);
        // 84 00E8
        gbc.setState(0xaf3, 0x1fa1, 0xb900, 0x6f21, 0xbc5a, 0x455a, 0x1, 0x1);
        gbc.writeMem(0xaf3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1fa1);
        EXPECT(gbc.pc(), 0xaf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00E9
        gbc.setState(0x9dbc, 0x719a, 0xe4e0, 0x1cce, 0xae2b, 0x1b14, 0x0, 0x0);
        gbc.writeMem(0x9dbc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x719a);
        EXPECT(gbc.pc(), 0x9dbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dbc), 0x84);
        // 84 00EA
        gbc.setState(0x69d2, 0xb109, 0x87a0, 0x8745, 0xc519, 0xe71a, 0x1, 0x0);
        gbc.writeMem(0x69d2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb109);
        EXPECT(gbc.pc(), 0x69d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00EB
        gbc.setState(0x7da9, 0x18ae, 0x6840, 0x7a58, 0x9dda, 0xa629, 0x1, 0x0);
        gbc.writeMem(0x7da9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x18ae);
        EXPECT(gbc.pc(), 0x7daa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00EC
        gbc.setState(0xd8d1, 0x288, 0xaf00, 0x20e, 0x8139, 0x17cb, 0x1, 0x0);
        gbc.writeMem(0xd8d1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x288);
        EXPECT(gbc.pc(), 0xd8d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8d1), 0x84);
        // 84 00ED
        gbc.setState(0xc7fc, 0xabfc, 0x1df0, 0x66d, 0xeac1, 0x8c19, 0x0, 0x0);
        gbc.writeMem(0xc7fc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xabfc);
        EXPECT(gbc.pc(), 0xc7fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7fc), 0x84);
        // 84 00EE
        gbc.setState(0x97b, 0xefbb, 0x830, 0x81e9, 0xe80, 0xe798, 0x1, 0x0);
        gbc.writeMem(0x97b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xefbb);
        EXPECT(gbc.pc(), 0x97c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00EF
        gbc.setState(0xb20d, 0x3e35, 0xea40, 0xc713, 0x140f, 0xb10a, 0x1, 0x1);
        gbc.writeMem(0xb20d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3e35);
        EXPECT(gbc.pc(), 0xb20e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb20d), 0x84);
        // 84 00F0
        gbc.setState(0x31b, 0xbe4f, 0x3ea0, 0xdbbf, 0xf6ed, 0x143b, 0x1, 0x0);
        gbc.writeMem(0x31b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xbe4f);
        EXPECT(gbc.pc(), 0x31c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 00F1
        gbc.setState(0x8abd, 0x2c7e, 0x6e90, 0x1103, 0x2aef, 0x8923, 0x1, 0x1);
        gbc.writeMem(0x8abd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2c7e);
        EXPECT(gbc.pc(), 0x8abe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8abd), 0x84);
        // 84 00F2
        gbc.setState(0x828, 0x92c, 0xfa20, 0xdd3c, 0x95f5, 0x88d7, 0x1, 0x0);
        gbc.writeMem(0x828, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x92c);
        EXPECT(gbc.pc(), 0x829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00F3
        gbc.setState(0x9e4, 0xfa90, 0xda90, 0x31b1, 0xe78c, 0x3891, 0x0, 0x0);
        gbc.writeMem(0x9e4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xfa90);
        EXPECT(gbc.pc(), 0x9e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00F4
        gbc.setState(0x59e, 0xb113, 0x9350, 0xa8e6, 0x5f0d, 0x7cb5, 0x0, 0x1);
        gbc.writeMem(0x59e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb113);
        EXPECT(gbc.pc(), 0x59f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00F5
        gbc.setState(0x1314, 0x8a5, 0x33c0, 0x8b97, 0xdd0e, 0xe956, 0x1, 0x0);
        gbc.writeMem(0x1314, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8a5);
        EXPECT(gbc.pc(), 0x1315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00F6
        gbc.setState(0x54dc, 0x6b70, 0xd130, 0x16f4, 0x7bf5, 0x704f, 0x1, 0x0);
        gbc.writeMem(0x54dc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6b70);
        EXPECT(gbc.pc(), 0x54dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00F7
        gbc.setState(0xdc7f, 0x1642, 0xf430, 0x6d9e, 0x9a70, 0x6289, 0x0, 0x1);
        gbc.writeMem(0xdc7f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1642);
        EXPECT(gbc.pc(), 0xdc80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc7f), 0x84);
        // 84 00F8
        gbc.setState(0xd1fc, 0xd9eb, 0x1cf0, 0x9142, 0x4c, 0xf3f9, 0x1, 0x1);
        gbc.writeMem(0xd1fc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd9eb);
        EXPECT(gbc.pc(), 0xd1fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1fc), 0x84);
        // 84 00F9
        gbc.setState(0xb577, 0x588c, 0xeeb0, 0x1593, 0x3832, 0xf913, 0x0, 0x0);
        gbc.writeMem(0xb577, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x588c);
        EXPECT(gbc.pc(), 0xb578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb577), 0x84);
        // 84 00FA
        gbc.setState(0x9de4, 0x2596, 0xc8b0, 0x9f88, 0x960f, 0xe8c4, 0x0, 0x1);
        gbc.writeMem(0x9de4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2596);
        EXPECT(gbc.pc(), 0x9de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9de4), 0x84);
        // 84 00FB
        gbc.setState(0x48a9, 0xdd3e, 0xcbf0, 0x35e7, 0xd394, 0x5928, 0x0, 0x0);
        gbc.writeMem(0x48a9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xdd3e);
        EXPECT(gbc.pc(), 0x48aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 00FC
        gbc.setState(0x4fa1, 0x831, 0xc060, 0x4ddf, 0x5e08, 0x103d, 0x0, 0x0);
        gbc.writeMem(0x4fa1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x831);
        EXPECT(gbc.pc(), 0x4fa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 00FD
        gbc.setState(0x7eaf, 0x996b, 0x61e0, 0xd2fa, 0xed7e, 0xdb48, 0x0, 0x0);
        gbc.writeMem(0x7eaf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x996b);
        EXPECT(gbc.pc(), 0x7eb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 00FE
        gbc.setState(0xe502, 0x7edf, 0xd7a0, 0x4051, 0x5eaf, 0x9249, 0x0, 0x1);
        gbc.writeMem(0xe502, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7edf);
        EXPECT(gbc.pc(), 0xe503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe502), 0x84);
        // 84 00FF
        gbc.setState(0x7023, 0xb35, 0xf140, 0xc329, 0x2c3, 0x6c74, 0x0, 0x0);
        gbc.writeMem(0x7023, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb35);
        EXPECT(gbc.pc(), 0x7024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0100
        gbc.setState(0x503c, 0x8cf8, 0x4200, 0x8d5d, 0x4233, 0x4471, 0x1, 0x1);
        gbc.writeMem(0x503c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8cf8);
        EXPECT(gbc.pc(), 0x503d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0101
        gbc.setState(0x9619, 0x13c0, 0x2190, 0x32bb, 0x3c97, 0xf33d, 0x1, 0x0);
        gbc.writeMem(0x9619, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x13c0);
        EXPECT(gbc.pc(), 0x961a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9619), 0x84);
        // 84 0102
        gbc.setState(0x3c3d, 0x9c45, 0xa5b0, 0x2c8e, 0xfac, 0x188a, 0x1, 0x1);
        gbc.writeMem(0x3c3d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9c45);
        EXPECT(gbc.pc(), 0x3c3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0103
        gbc.setState(0x600f, 0x5b62, 0x8dd0, 0x2d31, 0xb301, 0x2dac, 0x1, 0x1);
        gbc.writeMem(0x600f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5b62);
        EXPECT(gbc.pc(), 0x6010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0104
        gbc.setState(0xd716, 0x1218, 0x1230, 0x5c1e, 0xc1a2, 0x227, 0x0, 0x1);
        gbc.writeMem(0xd716, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1218);
        EXPECT(gbc.pc(), 0xd717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd716), 0x84);
        // 84 0105
        gbc.setState(0x673a, 0x9138, 0xe2f0, 0x3f78, 0xaf1b, 0x4c4f, 0x0, 0x0);
        gbc.writeMem(0x673a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9138);
        EXPECT(gbc.pc(), 0x673b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0106
        gbc.setState(0xd1b3, 0xc595, 0xcd80, 0x9d27, 0xe521, 0x54d3, 0x0, 0x1);
        gbc.writeMem(0xd1b3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc595);
        EXPECT(gbc.pc(), 0xd1b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b3), 0x84);
        // 84 0107
        gbc.setState(0x7c3, 0x580e, 0x9640, 0x5562, 0x730a, 0x8eb3, 0x1, 0x1);
        gbc.writeMem(0x7c3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x580e);
        EXPECT(gbc.pc(), 0x7c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0108
        gbc.setState(0xe431, 0xdef4, 0x7a70, 0xdbc5, 0xb27a, 0xa319, 0x0, 0x1);
        gbc.writeMem(0xe431, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdef4);
        EXPECT(gbc.pc(), 0xe432);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe431), 0x84);
        // 84 0109
        gbc.setState(0x54ed, 0x83ca, 0x19c0, 0x807a, 0x3759, 0xdf2a, 0x1, 0x0);
        gbc.writeMem(0x54ed, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x83ca);
        EXPECT(gbc.pc(), 0x54ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 010A
        gbc.setState(0x7e80, 0x64f3, 0xb850, 0x2f6a, 0xb437, 0x1aed, 0x0, 0x1);
        gbc.writeMem(0x7e80, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x64f3);
        EXPECT(gbc.pc(), 0x7e81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 010B
        gbc.setState(0x4020, 0xa5d0, 0xfcb0, 0xaa02, 0xd863, 0xaef3, 0x0, 0x0);
        gbc.writeMem(0x4020, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa5d0);
        EXPECT(gbc.pc(), 0x4021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 010C
        gbc.setState(0x5f7, 0x7cfe, 0x8600, 0x5bac, 0x75e6, 0x6853, 0x1, 0x0);
        gbc.writeMem(0x5f7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7cfe);
        EXPECT(gbc.pc(), 0x5f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 010D
        gbc.setState(0x990e, 0x6181, 0x9e00, 0xfa97, 0x57e1, 0xd8ef, 0x0, 0x0);
        gbc.writeMem(0x990e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6181);
        EXPECT(gbc.pc(), 0x990f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x990e), 0x84);
        // 84 010E
        gbc.setState(0xb795, 0xabc8, 0x9db0, 0x773e, 0xcbbe, 0xc14e, 0x0, 0x0);
        gbc.writeMem(0xb795, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xabc8);
        EXPECT(gbc.pc(), 0xb796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb795), 0x84);
        // 84 010F
        gbc.setState(0x4d88, 0x8eb6, 0x31a0, 0x6c47, 0x405c, 0x4ae7, 0x0, 0x0);
        gbc.writeMem(0x4d88, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8eb6);
        EXPECT(gbc.pc(), 0x4d89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0110
        gbc.setState(0x80b1, 0x5e1, 0x9110, 0xe215, 0xf62c, 0x79bf, 0x0, 0x0);
        gbc.writeMem(0x80b1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5e1);
        EXPECT(gbc.pc(), 0x80b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b1), 0x84);
        // 84 0111
        gbc.setState(0x1587, 0x72fb, 0x2ee0, 0x6029, 0xf34f, 0xa8cc, 0x0, 0x1);
        gbc.writeMem(0x1587, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x72fb);
        EXPECT(gbc.pc(), 0x1588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0112
        gbc.setState(0xf89, 0xc335, 0x8580, 0x3d71, 0x6fca, 0x7034, 0x0, 0x1);
        gbc.writeMem(0xf89, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc335);
        EXPECT(gbc.pc(), 0xf8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0113
        gbc.setState(0x32e0, 0x7625, 0x5710, 0x2a8c, 0xbe1e, 0x6933, 0x0, 0x1);
        gbc.writeMem(0x32e0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7625);
        EXPECT(gbc.pc(), 0x32e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0114
        gbc.setState(0xabd8, 0xd7de, 0xc5e0, 0xe670, 0x56ac, 0x8398, 0x1, 0x0);
        gbc.writeMem(0xabd8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd7de);
        EXPECT(gbc.pc(), 0xabd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabd8), 0x84);
        // 84 0116
        gbc.setState(0x29e, 0x96a, 0xdae0, 0x129a, 0x1743, 0x3793, 0x0, 0x1);
        gbc.writeMem(0x29e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x96a);
        EXPECT(gbc.pc(), 0x29f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0117
        gbc.setState(0x9ca9, 0x62ea, 0x8b40, 0x4973, 0x6689, 0xd3cf, 0x1, 0x1);
        gbc.writeMem(0x9ca9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x62ea);
        EXPECT(gbc.pc(), 0x9caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca9), 0x84);
        // 84 0118
        gbc.setState(0x7cc7, 0xb883, 0xdeb0, 0xbe10, 0x6ad5, 0x5d51, 0x0, 0x1);
        gbc.writeMem(0x7cc7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb883);
        EXPECT(gbc.pc(), 0x7cc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0119
        gbc.setState(0xaed4, 0x8ae4, 0x1c20, 0x2bc2, 0xb9f3, 0x151, 0x0, 0x1);
        gbc.writeMem(0xaed4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8ae4);
        EXPECT(gbc.pc(), 0xaed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed4), 0x84);
        // 84 011A
        gbc.setState(0x61dd, 0x917b, 0x4c00, 0xae4f, 0x5e43, 0x4460, 0x0, 0x0);
        gbc.writeMem(0x61dd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x917b);
        EXPECT(gbc.pc(), 0x61de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 011B
        gbc.setState(0x4d50, 0x2938, 0xef40, 0x9d32, 0x70b8, 0x95fb, 0x1, 0x0);
        gbc.writeMem(0x4d50, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2938);
        EXPECT(gbc.pc(), 0x4d51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 011C
        gbc.setState(0x9ea8, 0x1149, 0xc4d0, 0x9509, 0xb9d7, 0x2a31, 0x0, 0x0);
        gbc.writeMem(0x9ea8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1149);
        EXPECT(gbc.pc(), 0x9ea9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea8), 0x84);
        // 84 011D
        gbc.setState(0x622b, 0x67ab, 0x7240, 0x848b, 0x2828, 0x20f, 0x1, 0x0);
        gbc.writeMem(0x622b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x67ab);
        EXPECT(gbc.pc(), 0x622c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 011E
        gbc.setState(0x91a2, 0x97bb, 0xd130, 0x8252, 0x95f0, 0x5bff, 0x0, 0x1);
        gbc.writeMem(0x91a2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x97bb);
        EXPECT(gbc.pc(), 0x91a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a2), 0x84);
        // 84 011F
        gbc.setState(0xd2e, 0x6987, 0x14d0, 0x82da, 0xce23, 0x37ea, 0x0, 0x1);
        gbc.writeMem(0xd2e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6987);
        EXPECT(gbc.pc(), 0xd2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0120
        gbc.setState(0xa29e, 0x7bf1, 0x9e50, 0x226b, 0x62ba, 0xec8a, 0x0, 0x1);
        gbc.writeMem(0xa29e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x7bf1);
        EXPECT(gbc.pc(), 0xa29f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29e), 0x84);
        // 84 0121
        gbc.setState(0x5130, 0xf4ce, 0x12a0, 0x2d13, 0x8ce1, 0xa72, 0x1, 0x0);
        gbc.writeMem(0x5130, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf4ce);
        EXPECT(gbc.pc(), 0x5131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0122
        gbc.setState(0x7d34, 0x3195, 0xbaa0, 0xebf, 0x3fef, 0x28ce, 0x1, 0x0);
        gbc.writeMem(0x7d34, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3195);
        EXPECT(gbc.pc(), 0x7d35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0123
        gbc.setState(0x321, 0x1cb9, 0xdc20, 0xffa9, 0xc678, 0x9355, 0x1, 0x1);
        gbc.writeMem(0x321, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1cb9);
        EXPECT(gbc.pc(), 0x322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0124
        gbc.setState(0xcb69, 0x6294, 0x3830, 0x8c34, 0x19ec, 0x215b, 0x1, 0x1);
        gbc.writeMem(0xcb69, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6294);
        EXPECT(gbc.pc(), 0xcb6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb69), 0x84);
        // 84 0125
        gbc.setState(0x21d3, 0x9bab, 0xfc40, 0x73c4, 0xd298, 0x6612, 0x0, 0x0);
        gbc.writeMem(0x21d3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9bab);
        EXPECT(gbc.pc(), 0x21d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0126
        gbc.setState(0x6124, 0x419f, 0x1e10, 0xbf72, 0x44cf, 0x195d, 0x0, 0x0);
        gbc.writeMem(0x6124, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x419f);
        EXPECT(gbc.pc(), 0x6125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0127
        gbc.setState(0xa5a9, 0x207c, 0x1f00, 0x2658, 0xcc83, 0x6deb, 0x1, 0x1);
        gbc.writeMem(0xa5a9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x207c);
        EXPECT(gbc.pc(), 0xa5aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a9), 0x84);
        // 84 0128
        gbc.setState(0x92de, 0x1694, 0x7870, 0x4255, 0x9f77, 0xb67e, 0x1, 0x1);
        gbc.writeMem(0x92de, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1694);
        EXPECT(gbc.pc(), 0x92df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92de), 0x84);
        // 84 0129
        gbc.setState(0xc1c9, 0x9ba2, 0x9d00, 0x6c59, 0xf21a, 0x509e, 0x0, 0x1);
        gbc.writeMem(0xc1c9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9ba2);
        EXPECT(gbc.pc(), 0xc1ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c9), 0x84);
        // 84 012A
        gbc.setState(0x759d, 0x3031, 0xf540, 0xd853, 0x92f8, 0x403e, 0x0, 0x1);
        gbc.writeMem(0x759d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3031);
        EXPECT(gbc.pc(), 0x759e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 012C
        gbc.setState(0x99b2, 0x2c91, 0xf2f0, 0x26ba, 0x8b9c, 0x2972, 0x0, 0x0);
        gbc.writeMem(0x99b2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2c91);
        EXPECT(gbc.pc(), 0x99b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b2), 0x84);
        // 84 012D
        gbc.setState(0x1998, 0x6b08, 0x6840, 0xf377, 0x4e6b, 0x7df, 0x1, 0x1);
        gbc.writeMem(0x1998, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6b08);
        EXPECT(gbc.pc(), 0x1999);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 012E
        gbc.setState(0xcf53, 0x9b5f, 0xaf70, 0xb2b8, 0x8a37, 0x60f2, 0x1, 0x1);
        gbc.writeMem(0xcf53, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9b5f);
        EXPECT(gbc.pc(), 0xcf54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf53), 0x84);
        // 84 0130
        gbc.setState(0x4cc6, 0x9f1, 0xb750, 0x62bf, 0x9d4d, 0x68ec, 0x1, 0x0);
        gbc.writeMem(0x4cc6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9f1);
        EXPECT(gbc.pc(), 0x4cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0131
        gbc.setState(0x8961, 0x812c, 0xfe20, 0x1e7f, 0xc7af, 0x2a8f, 0x1, 0x1);
        gbc.writeMem(0x8961, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x812c);
        EXPECT(gbc.pc(), 0x8962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8961), 0x84);
        // 84 0132
        gbc.setState(0x3048, 0x66c3, 0xcaf0, 0xe43e, 0x5a9c, 0x6fbb, 0x1, 0x1);
        gbc.writeMem(0x3048, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x66c3);
        EXPECT(gbc.pc(), 0x3049);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0133
        gbc.setState(0x5bca, 0xa278, 0x3a50, 0x8a6, 0x8c30, 0xa6d7, 0x0, 0x1);
        gbc.writeMem(0x5bca, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xa278);
        EXPECT(gbc.pc(), 0x5bcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0134
        gbc.setState(0x9b4f, 0xbe7, 0x74d0, 0x2db2, 0x9666, 0x644f, 0x1, 0x0);
        gbc.writeMem(0x9b4f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xbe7);
        EXPECT(gbc.pc(), 0x9b50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b4f), 0x84);
        // 84 0135
        gbc.setState(0x19c6, 0x4617, 0x2450, 0xd06, 0xdf1, 0xc915, 0x1, 0x0);
        gbc.writeMem(0x19c6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4617);
        EXPECT(gbc.pc(), 0x19c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0136
        gbc.setState(0xd515, 0xe4da, 0x6e60, 0x8eb0, 0xbdc7, 0xbffe, 0x1, 0x1);
        gbc.writeMem(0xd515, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe4da);
        EXPECT(gbc.pc(), 0xd516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd515), 0x84);
        // 84 0137
        gbc.setState(0xb8c, 0xc01f, 0xc6f0, 0xfadb, 0x857a, 0xdab8, 0x0, 0x0);
        gbc.writeMem(0xb8c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc01f);
        EXPECT(gbc.pc(), 0xb8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0138
        gbc.setState(0x42ee, 0xdb11, 0x2f30, 0x8fcb, 0xdb13, 0x5038, 0x0, 0x0);
        gbc.writeMem(0x42ee, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xdb11);
        EXPECT(gbc.pc(), 0x42ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0139
        gbc.setState(0xad0, 0xfd15, 0xede0, 0xf4cc, 0xed56, 0xf7bc, 0x0, 0x1);
        gbc.writeMem(0xad0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfd15);
        EXPECT(gbc.pc(), 0xad1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 013A
        gbc.setState(0xb0e2, 0x75fb, 0xf250, 0xe714, 0x9cc0, 0x635c, 0x1, 0x1);
        gbc.writeMem(0xb0e2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x75fb);
        EXPECT(gbc.pc(), 0xb0e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e2), 0x84);
        // 84 013B
        gbc.setState(0xc407, 0xa958, 0xcc70, 0x9a5e, 0x45e6, 0xd352, 0x1, 0x1);
        gbc.writeMem(0xc407, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa958);
        EXPECT(gbc.pc(), 0xc408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc407), 0x84);
        // 84 013C
        gbc.setState(0xdd0a, 0x1b01, 0x7fd0, 0x7c73, 0x7b5f, 0x5cfb, 0x1, 0x0);
        gbc.writeMem(0xdd0a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1b01);
        EXPECT(gbc.pc(), 0xdd0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd0a), 0x84);
        // 84 013D
        gbc.setState(0x7526, 0x6632, 0xf800, 0xebbb, 0x8c06, 0x4263, 0x1, 0x0);
        gbc.writeMem(0x7526, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6632);
        EXPECT(gbc.pc(), 0x7527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 013E
        gbc.setState(0x6f83, 0x786a, 0xa8c0, 0xb2ee, 0x42c9, 0x6ddc, 0x0, 0x0);
        gbc.writeMem(0x6f83, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x786a);
        EXPECT(gbc.pc(), 0x6f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 013F
        gbc.setState(0x1eac, 0x24ab, 0x3ec0, 0xda8a, 0xab7c, 0x68c4, 0x1, 0x0);
        gbc.writeMem(0x1eac, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x24ab);
        EXPECT(gbc.pc(), 0x1ead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0140
        gbc.setState(0x1fac, 0x739d, 0xf970, 0xe81b, 0xca91, 0x6658, 0x0, 0x1);
        gbc.writeMem(0x1fac, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x739d);
        EXPECT(gbc.pc(), 0x1fad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0141
        gbc.setState(0x5267, 0x676, 0xe120, 0x2866, 0x1984, 0xbd87, 0x1, 0x1);
        gbc.writeMem(0x5267, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x676);
        EXPECT(gbc.pc(), 0x5268);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0142
        gbc.setState(0xdcdd, 0x2ec, 0x4760, 0x54d5, 0xe356, 0xa9f4, 0x0, 0x1);
        gbc.writeMem(0xdcdd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x2ec);
        EXPECT(gbc.pc(), 0xdcde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcdd), 0x84);
        // 84 0143
        gbc.setState(0x6c94, 0xc0de, 0xb160, 0xf76c, 0x815a, 0x837a, 0x1, 0x1);
        gbc.writeMem(0x6c94, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc0de);
        EXPECT(gbc.pc(), 0x6c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0144
        gbc.setState(0x155a, 0x8d89, 0xc890, 0x79b9, 0x60c3, 0x3fa7, 0x0, 0x0);
        gbc.writeMem(0x155a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8d89);
        EXPECT(gbc.pc(), 0x155b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0145
        gbc.setState(0x1b07, 0x8c5e, 0xe180, 0x68bb, 0x829a, 0x51b2, 0x1, 0x1);
        gbc.writeMem(0x1b07, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8c5e);
        EXPECT(gbc.pc(), 0x1b08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0147
        gbc.setState(0x1edf, 0xad29, 0x4360, 0xd6ff, 0x8906, 0x2f11, 0x0, 0x1);
        gbc.writeMem(0x1edf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xad29);
        EXPECT(gbc.pc(), 0x1ee0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0148
        gbc.setState(0x1b7, 0x5132, 0x5630, 0xd7a2, 0x4ec8, 0xe8ab, 0x0, 0x1);
        gbc.writeMem(0x1b7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5132);
        EXPECT(gbc.pc(), 0x1b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0149
        gbc.setState(0x9c17, 0x1ed4, 0xa970, 0x6746, 0x35a5, 0x48a1, 0x0, 0x0);
        gbc.writeMem(0x9c17, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1ed4);
        EXPECT(gbc.pc(), 0x9c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c17), 0x84);
        // 84 014A
        gbc.setState(0x7baa, 0x17e3, 0x64a0, 0xd7c4, 0x62c5, 0x18df, 0x1, 0x0);
        gbc.writeMem(0x7baa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x17e3);
        EXPECT(gbc.pc(), 0x7bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 014B
        gbc.setState(0xd54f, 0x60d7, 0x2020, 0xbd2f, 0xf96c, 0x1625, 0x0, 0x0);
        gbc.writeMem(0xd54f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x60d7);
        EXPECT(gbc.pc(), 0xd550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd54f), 0x84);
        // 84 014C
        gbc.setState(0xae8, 0x6771, 0x39c0, 0x1a5c, 0xadd2, 0x73eb, 0x0, 0x1);
        gbc.writeMem(0xae8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6771);
        EXPECT(gbc.pc(), 0xae9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 014D
        gbc.setState(0x3036, 0x2175, 0xa000, 0xea78, 0x490d, 0x88ef, 0x0, 0x1);
        gbc.writeMem(0x3036, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2175);
        EXPECT(gbc.pc(), 0x3037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 014E
        gbc.setState(0x532c, 0x45b2, 0xf760, 0x2520, 0xfd8f, 0x382, 0x1, 0x1);
        gbc.writeMem(0x532c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x45b2);
        EXPECT(gbc.pc(), 0x532d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 014F
        gbc.setState(0x250d, 0xd0c, 0x5bb0, 0x520f, 0x2038, 0x82c0, 0x1, 0x0);
        gbc.writeMem(0x250d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd0c);
        EXPECT(gbc.pc(), 0x250e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0150
        gbc.setState(0x9e94, 0x5ad7, 0x2960, 0x655f, 0x1c9a, 0xac10, 0x0, 0x1);
        gbc.writeMem(0x9e94, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5ad7);
        EXPECT(gbc.pc(), 0x9e95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e94), 0x84);
        // 84 0151
        gbc.setState(0x9ea3, 0x71b5, 0xd6f0, 0xd33d, 0xb93, 0xd9e8, 0x1, 0x1);
        gbc.writeMem(0x9ea3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x71b5);
        EXPECT(gbc.pc(), 0x9ea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ea3), 0x84);
        // 84 0152
        gbc.setState(0x315, 0xb39e, 0x92a0, 0x1980, 0x82a2, 0x18c7, 0x1, 0x1);
        gbc.writeMem(0x315, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb39e);
        EXPECT(gbc.pc(), 0x316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0154
        gbc.setState(0x8963, 0x6a21, 0xc50, 0xa5b5, 0xcd48, 0x45eb, 0x0, 0x1);
        gbc.writeMem(0x8963, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6a21);
        EXPECT(gbc.pc(), 0x8964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8963), 0x84);
        // 84 0157
        gbc.setState(0xd5bd, 0x7967, 0x2300, 0xfbb5, 0x5304, 0x1cdf, 0x1, 0x1);
        gbc.writeMem(0xd5bd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7967);
        EXPECT(gbc.pc(), 0xd5be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5bd), 0x84);
        // 84 0158
        gbc.setState(0xedea, 0x8545, 0xeff0, 0x79b7, 0x9562, 0x7d04, 0x0, 0x0);
        gbc.writeMem(0xedea, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8545);
        EXPECT(gbc.pc(), 0xedeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedea), 0x84);
        // 84 0159
        gbc.setState(0x814c, 0xbbf7, 0xdcf0, 0x2852, 0x27da, 0xd1a, 0x0, 0x1);
        gbc.writeMem(0x814c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbbf7);
        EXPECT(gbc.pc(), 0x814d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x814c), 0x84);
        // 84 015A
        gbc.setState(0x6ddd, 0x8401, 0xd0a0, 0xa0dc, 0x78a5, 0xf156, 0x1, 0x0);
        gbc.writeMem(0x6ddd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8401);
        EXPECT(gbc.pc(), 0x6dde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 015B
        gbc.setState(0xbe1b, 0xd125, 0x57d0, 0xf5ea, 0xd922, 0xc8a9, 0x0, 0x1);
        gbc.writeMem(0xbe1b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd125);
        EXPECT(gbc.pc(), 0xbe1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe1b), 0x84);
        // 84 015C
        gbc.setState(0x30a0, 0x7622, 0xb5e0, 0x9150, 0xdd55, 0x5dba, 0x1, 0x1);
        gbc.writeMem(0x30a0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x7622);
        EXPECT(gbc.pc(), 0x30a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 015D
        gbc.setState(0xaa4a, 0x6fe5, 0x3600, 0x8b67, 0x6cb0, 0xd827, 0x1, 0x0);
        gbc.writeMem(0xaa4a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6fe5);
        EXPECT(gbc.pc(), 0xaa4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa4a), 0x84);
        // 84 015E
        gbc.setState(0x35b4, 0xe50c, 0x29e0, 0xb58b, 0xdfa6, 0x4050, 0x0, 0x0);
        gbc.writeMem(0x35b4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe50c);
        EXPECT(gbc.pc(), 0x35b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 015F
        gbc.setState(0x577c, 0x9df0, 0xf890, 0xc240, 0x95d7, 0xb97f, 0x1, 0x1);
        gbc.writeMem(0x577c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9df0);
        EXPECT(gbc.pc(), 0x577d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0160
        gbc.setState(0xb950, 0xff1, 0x9ab0, 0x54f1, 0x5f2b, 0x101b, 0x0, 0x1);
        gbc.writeMem(0xb950, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xff1);
        EXPECT(gbc.pc(), 0xb951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb950), 0x84);
        // 84 0161
        gbc.setState(0xb961, 0x62a, 0x2ab0, 0x2d1d, 0xccec, 0xc8fb, 0x0, 0x0);
        gbc.writeMem(0xb961, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x62a);
        EXPECT(gbc.pc(), 0xb962);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb961), 0x84);
        // 84 0162
        gbc.setState(0x2241, 0x679b, 0xfdf0, 0xe529, 0xa1f5, 0x1bdb, 0x0, 0x0);
        gbc.writeMem(0x2241, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x679b);
        EXPECT(gbc.pc(), 0x2242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0163
        gbc.setState(0xad85, 0x7dc1, 0xdb40, 0x6a5, 0x6fa2, 0xc8a8, 0x1, 0x0);
        gbc.writeMem(0xad85, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7dc1);
        EXPECT(gbc.pc(), 0xad86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad85), 0x84);
        // 84 0164
        gbc.setState(0x7ef7, 0x379, 0x8020, 0x7c4, 0xef13, 0xd78c, 0x0, 0x0);
        gbc.writeMem(0x7ef7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x379);
        EXPECT(gbc.pc(), 0x7ef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0165
        gbc.setState(0x53f2, 0x4142, 0x5e80, 0x3b89, 0x3537, 0x4535, 0x0, 0x1);
        gbc.writeMem(0x53f2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4142);
        EXPECT(gbc.pc(), 0x53f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0166
        gbc.setState(0xd98d, 0x2460, 0xb850, 0x72dd, 0xff1d, 0x6ca8, 0x0, 0x0);
        gbc.writeMem(0xd98d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2460);
        EXPECT(gbc.pc(), 0xd98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd98d), 0x84);
        // 84 0167
        gbc.setState(0x6137, 0x97d1, 0x4380, 0x6fd5, 0xb79a, 0xde7d, 0x0, 0x1);
        gbc.writeMem(0x6137, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x97d1);
        EXPECT(gbc.pc(), 0x6138);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0168
        gbc.setState(0xde17, 0x918d, 0x8800, 0xa38c, 0x2d83, 0x6f5f, 0x0, 0x0);
        gbc.writeMem(0xde17, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x918d);
        EXPECT(gbc.pc(), 0xde18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde17), 0x84);
        // 84 0169
        gbc.setState(0x3cf8, 0xde12, 0x5dc0, 0x359b, 0x71ab, 0x285d, 0x1, 0x0);
        gbc.writeMem(0x3cf8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xde12);
        EXPECT(gbc.pc(), 0x3cf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 016A
        gbc.setState(0x3aed, 0xfa04, 0xdf20, 0xa726, 0xc4cb, 0x2a5c, 0x0, 0x0);
        gbc.writeMem(0x3aed, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xfa04);
        EXPECT(gbc.pc(), 0x3aee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 016B
        gbc.setState(0x68e8, 0xcd8a, 0xff90, 0x92df, 0x2906, 0x5303, 0x1, 0x1);
        gbc.writeMem(0x68e8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xcd8a);
        EXPECT(gbc.pc(), 0x68e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 016C
        gbc.setState(0x88f7, 0xe47, 0x140, 0x3c1b, 0x48d8, 0x6047, 0x0, 0x1);
        gbc.writeMem(0x88f7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe47);
        EXPECT(gbc.pc(), 0x88f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f7), 0x84);
        // 84 016D
        gbc.setState(0x77f8, 0xdf7b, 0xb390, 0x6f24, 0xba30, 0x149a, 0x1, 0x0);
        gbc.writeMem(0x77f8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdf7b);
        EXPECT(gbc.pc(), 0x77f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 016E
        gbc.setState(0xb780, 0x8fc4, 0x2e20, 0xa70a, 0x2f7, 0x6fa5, 0x0, 0x0);
        gbc.writeMem(0xb780, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8fc4);
        EXPECT(gbc.pc(), 0xb781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb780), 0x84);
        // 84 016F
        gbc.setState(0x7ed3, 0x7463, 0xecc0, 0x5345, 0xc9a7, 0x5b5d, 0x1, 0x0);
        gbc.writeMem(0x7ed3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7463);
        EXPECT(gbc.pc(), 0x7ed4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0170
        gbc.setState(0x49cc, 0xbd4e, 0x6e00, 0xc2ae, 0xf1b, 0x5ba1, 0x1, 0x1);
        gbc.writeMem(0x49cc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xbd4e);
        EXPECT(gbc.pc(), 0x49cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0171
        gbc.setState(0x7ed2, 0x727c, 0x3ad0, 0xa697, 0x7795, 0xe96b, 0x0, 0x1);
        gbc.writeMem(0x7ed2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x727c);
        EXPECT(gbc.pc(), 0x7ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0172
        gbc.setState(0xd9b4, 0x590c, 0xb610, 0xeb93, 0xc5f8, 0x57f1, 0x0, 0x0);
        gbc.writeMem(0xd9b4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x590c);
        EXPECT(gbc.pc(), 0xd9b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b4), 0x84);
        // 84 0173
        gbc.setState(0xbe87, 0xb406, 0x4c90, 0xc302, 0xbed1, 0xe802, 0x1, 0x1);
        gbc.writeMem(0xbe87, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb406);
        EXPECT(gbc.pc(), 0xbe88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe87), 0x84);
        // 84 0174
        gbc.setState(0x18e4, 0x2819, 0x7c50, 0x3477, 0x4455, 0x8d1a, 0x1, 0x0);
        gbc.writeMem(0x18e4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2819);
        EXPECT(gbc.pc(), 0x18e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0175
        gbc.setState(0x3bae, 0x8b5d, 0xeec0, 0x474b, 0x7fab, 0x4ef6, 0x0, 0x1);
        gbc.writeMem(0x3bae, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8b5d);
        EXPECT(gbc.pc(), 0x3baf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0177
        gbc.setState(0xbeb6, 0x63ec, 0xa3d0, 0x3c9f, 0x5aa9, 0x24a, 0x1, 0x1);
        gbc.writeMem(0xbeb6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x63ec);
        EXPECT(gbc.pc(), 0xbeb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb6), 0x84);
        // 84 0179
        gbc.setState(0x63fc, 0x8208, 0x7a70, 0x5ec9, 0x2df0, 0xb4d0, 0x1, 0x1);
        gbc.writeMem(0x63fc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8208);
        EXPECT(gbc.pc(), 0x63fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 017A
        gbc.setState(0xb196, 0x3c4c, 0x3740, 0x775, 0xd007, 0x5caa, 0x0, 0x0);
        gbc.writeMem(0xb196, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3c4c);
        EXPECT(gbc.pc(), 0xb197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb196), 0x84);
        // 84 017B
        gbc.setState(0xe261, 0x20a8, 0x7dd0, 0xddc6, 0xfdec, 0x3bf1, 0x1, 0x1);
        gbc.writeMem(0xe261, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x20a8);
        EXPECT(gbc.pc(), 0xe262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe261), 0x84);
        // 84 017C
        gbc.setState(0x4f3c, 0xce7e, 0xb7e0, 0x734e, 0x3a5a, 0xd6f, 0x0, 0x1);
        gbc.writeMem(0x4f3c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xce7e);
        EXPECT(gbc.pc(), 0x4f3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 017E
        gbc.setState(0x57cb, 0xe5c8, 0xcf20, 0x8cf2, 0x897a, 0x2e89, 0x0, 0x0);
        gbc.writeMem(0x57cb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe5c8);
        EXPECT(gbc.pc(), 0x57cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 017F
        gbc.setState(0x7e3e, 0x75fc, 0x5e30, 0xd51b, 0x907, 0xcfe8, 0x1, 0x1);
        gbc.writeMem(0x7e3e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x75fc);
        EXPECT(gbc.pc(), 0x7e3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0180
        gbc.setState(0xa919, 0x5481, 0x29e0, 0x5462, 0x6c1f, 0x3a18, 0x0, 0x0);
        gbc.writeMem(0xa919, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5481);
        EXPECT(gbc.pc(), 0xa91a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa919), 0x84);
        // 84 0181
        gbc.setState(0x4731, 0x99e1, 0x4a30, 0xa634, 0x6907, 0x77c4, 0x0, 0x1);
        gbc.writeMem(0x4731, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x99e1);
        EXPECT(gbc.pc(), 0x4732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0182
        gbc.setState(0xea92, 0xece4, 0xa440, 0x1c40, 0xda7, 0xb365, 0x0, 0x1);
        gbc.writeMem(0xea92, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xece4);
        EXPECT(gbc.pc(), 0xea93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea92), 0x84);
        // 84 0183
        gbc.setState(0x48bb, 0x7f3f, 0xa4e0, 0xdda2, 0x6404, 0x1cea, 0x0, 0x1);
        gbc.writeMem(0x48bb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7f3f);
        EXPECT(gbc.pc(), 0x48bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0184
        gbc.setState(0x47c3, 0x4c37, 0xf590, 0xfd62, 0xf1ce, 0xaf6b, 0x1, 0x1);
        gbc.writeMem(0x47c3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4c37);
        EXPECT(gbc.pc(), 0x47c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0185
        gbc.setState(0x8285, 0x7eff, 0x8400, 0x9013, 0xf1a5, 0x247d, 0x0, 0x1);
        gbc.writeMem(0x8285, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7eff);
        EXPECT(gbc.pc(), 0x8286);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8285), 0x84);
        // 84 0186
        gbc.setState(0x2fae, 0x8231, 0x3e00, 0xe88e, 0x2d39, 0xa314, 0x1, 0x1);
        gbc.writeMem(0x2fae, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8231);
        EXPECT(gbc.pc(), 0x2faf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0187
        gbc.setState(0x6c8e, 0x5322, 0x9db0, 0x43bf, 0x927b, 0x882f, 0x1, 0x0);
        gbc.writeMem(0x6c8e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5322);
        EXPECT(gbc.pc(), 0x6c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0188
        gbc.setState(0x30d3, 0xbdf0, 0xb220, 0x3e0a, 0xc10e, 0x2cff, 0x0, 0x0);
        gbc.writeMem(0x30d3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbdf0);
        EXPECT(gbc.pc(), 0x30d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0189
        gbc.setState(0x5a89, 0xcc56, 0x3ce0, 0xbf83, 0x4965, 0x81c7, 0x1, 0x0);
        gbc.writeMem(0x5a89, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcc56);
        EXPECT(gbc.pc(), 0x5a8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 018A
        gbc.setState(0x566d, 0xc2c1, 0x8520, 0xb505, 0xe1ac, 0x9012, 0x0, 0x1);
        gbc.writeMem(0x566d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc2c1);
        EXPECT(gbc.pc(), 0x566e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 018B
        gbc.setState(0xa434, 0xfa17, 0xf530, 0x6ccf, 0x51c1, 0xaa51, 0x1, 0x1);
        gbc.writeMem(0xa434, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfa17);
        EXPECT(gbc.pc(), 0xa435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa434), 0x84);
        // 84 018C
        gbc.setState(0x5809, 0x5c99, 0xce70, 0x2901, 0x8b38, 0xffaa, 0x1, 0x1);
        gbc.writeMem(0x5809, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5c99);
        EXPECT(gbc.pc(), 0x580a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 018D
        gbc.setState(0x1408, 0xa142, 0xb200, 0xb20d, 0x5942, 0x4ceb, 0x0, 0x1);
        gbc.writeMem(0x1408, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa142);
        EXPECT(gbc.pc(), 0x1409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 018E
        gbc.setState(0x14d8, 0xd183, 0xa4a0, 0xdb73, 0x5744, 0x449, 0x0, 0x0);
        gbc.writeMem(0x14d8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd183);
        EXPECT(gbc.pc(), 0x14d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 018F
        gbc.setState(0x162d, 0x6146, 0x60a0, 0xf2dd, 0x989c, 0xafca, 0x1, 0x1);
        gbc.writeMem(0x162d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6146);
        EXPECT(gbc.pc(), 0x162e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0190
        gbc.setState(0x4ed2, 0xaa19, 0x1a00, 0x528d, 0xac63, 0xf8bd, 0x1, 0x0);
        gbc.writeMem(0x4ed2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xaa19);
        EXPECT(gbc.pc(), 0x4ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0191
        gbc.setState(0x174d, 0x5601, 0xe970, 0x813e, 0x6f12, 0x5812, 0x1, 0x1);
        gbc.writeMem(0x174d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5601);
        EXPECT(gbc.pc(), 0x174e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0192
        gbc.setState(0x1bca, 0xf6d2, 0x7e30, 0x1565, 0x16b0, 0xb6b1, 0x1, 0x1);
        gbc.writeMem(0x1bca, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf6d2);
        EXPECT(gbc.pc(), 0x1bcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0193
        gbc.setState(0xe4c, 0x91e0, 0x9e00, 0xd05f, 0xf2a7, 0xffac, 0x1, 0x0);
        gbc.writeMem(0xe4c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x91e0);
        EXPECT(gbc.pc(), 0xe4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0194
        gbc.setState(0x39cc, 0x802f, 0xe610, 0xaeb7, 0x72e8, 0x6eb4, 0x1, 0x0);
        gbc.writeMem(0x39cc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x802f);
        EXPECT(gbc.pc(), 0x39cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0195
        gbc.setState(0x3b3c, 0x355d, 0x6a40, 0xdfd5, 0xff8, 0xf372, 0x0, 0x1);
        gbc.writeMem(0x3b3c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x355d);
        EXPECT(gbc.pc(), 0x3b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0196
        gbc.setState(0x5f1a, 0xe77b, 0xfa20, 0xa183, 0x8c71, 0xd52, 0x1, 0x1);
        gbc.writeMem(0x5f1a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe77b);
        EXPECT(gbc.pc(), 0x5f1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0198
        gbc.setState(0x434e, 0xc12a, 0x1f60, 0x83f4, 0xa9e6, 0xf313, 0x0, 0x1);
        gbc.writeMem(0x434e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc12a);
        EXPECT(gbc.pc(), 0x434f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0199
        gbc.setState(0x7c7f, 0xe6e7, 0x80a0, 0x9e14, 0xddc8, 0x5760, 0x1, 0x0);
        gbc.writeMem(0x7c7f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe6e7);
        EXPECT(gbc.pc(), 0x7c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 019A
        gbc.setState(0xd885, 0xcc67, 0x3610, 0x2c0b, 0x5e7a, 0xe6f, 0x1, 0x1);
        gbc.writeMem(0xd885, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcc67);
        EXPECT(gbc.pc(), 0xd886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd885), 0x84);
        // 84 019B
        gbc.setState(0xef17, 0xeea7, 0x79a0, 0xd22a, 0x1dc9, 0x6978, 0x1, 0x0);
        gbc.writeMem(0xef17, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xeea7);
        EXPECT(gbc.pc(), 0xef18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef17), 0x84);
        // 84 019C
        gbc.setState(0x3fd4, 0x37bf, 0x43b0, 0x8da, 0xc09e, 0xd962, 0x0, 0x0);
        gbc.writeMem(0x3fd4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x37bf);
        EXPECT(gbc.pc(), 0x3fd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 019D
        gbc.setState(0x38a4, 0x643e, 0x5dc0, 0x112b, 0xd2df, 0xc5a8, 0x1, 0x1);
        gbc.writeMem(0x38a4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x643e);
        EXPECT(gbc.pc(), 0x38a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 019E
        gbc.setState(0x6db8, 0x9e34, 0xb610, 0x22f0, 0x4795, 0xc354, 0x0, 0x0);
        gbc.writeMem(0x6db8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9e34);
        EXPECT(gbc.pc(), 0x6db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 019F
        gbc.setState(0x1c7e, 0x4a04, 0x9ff0, 0xee42, 0x57a1, 0xf787, 0x1, 0x1);
        gbc.writeMem(0x1c7e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x4a04);
        EXPECT(gbc.pc(), 0x1c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 01A0
        gbc.setState(0x73ac, 0x128b, 0x360, 0x4a42, 0x91a1, 0x3482, 0x0, 0x1);
        gbc.writeMem(0x73ac, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x128b);
        EXPECT(gbc.pc(), 0x73ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01A1
        gbc.setState(0x1672, 0xa022, 0xea90, 0x8d13, 0xbf55, 0x8d36, 0x1, 0x0);
        gbc.writeMem(0x1672, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa022);
        EXPECT(gbc.pc(), 0x1673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 01A2
        gbc.setState(0x4110, 0xeab4, 0x8160, 0xf323, 0x225, 0xbfd6, 0x1, 0x1);
        gbc.writeMem(0x4110, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xeab4);
        EXPECT(gbc.pc(), 0x4111);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 01A3
        gbc.setState(0xdf4a, 0x30fd, 0xac90, 0x40e2, 0x3d23, 0x1f9d, 0x0, 0x1);
        gbc.writeMem(0xdf4a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x30fd);
        EXPECT(gbc.pc(), 0xdf4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf4a), 0x84);
        // 84 01A4
        gbc.setState(0x8824, 0x6f39, 0xfe70, 0x6351, 0xbb9b, 0x307b, 0x1, 0x1);
        gbc.writeMem(0x8824, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6f39);
        EXPECT(gbc.pc(), 0x8825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8824), 0x84);
        // 84 01A5
        gbc.setState(0x1861, 0x8b46, 0x5fa0, 0x8f46, 0xec87, 0xdff3, 0x0, 0x1);
        gbc.writeMem(0x1861, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8b46);
        EXPECT(gbc.pc(), 0x1862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 01A6
        gbc.setState(0xb593, 0x9767, 0x1fd0, 0x7e3e, 0xaa3e, 0x8ebd, 0x0, 0x1);
        gbc.writeMem(0xb593, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9767);
        EXPECT(gbc.pc(), 0xb594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb593), 0x84);
        // 84 01A7
        gbc.setState(0x5fd, 0xb528, 0x8e90, 0xced3, 0x736e, 0x229, 0x1, 0x1);
        gbc.writeMem(0x5fd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb528);
        EXPECT(gbc.pc(), 0x5fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01A8
        gbc.setState(0x539c, 0xa724, 0xd6c0, 0xf78d, 0x8f28, 0x51b6, 0x1, 0x1);
        gbc.writeMem(0x539c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa724);
        EXPECT(gbc.pc(), 0x539d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01A9
        gbc.setState(0x4e97, 0xcfd1, 0xb250, 0x83ef, 0xe34, 0x823d, 0x1, 0x0);
        gbc.writeMem(0x4e97, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xcfd1);
        EXPECT(gbc.pc(), 0x4e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01AA
        gbc.setState(0x9863, 0xb112, 0x3410, 0xe9ea, 0xffe5, 0x80e3, 0x1, 0x0);
        gbc.writeMem(0x9863, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xb112);
        EXPECT(gbc.pc(), 0x9864);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9863), 0x84);
        // 84 01AB
        gbc.setState(0x2eee, 0x7f2c, 0x6340, 0x2400, 0x9098, 0x179e, 0x1, 0x0);
        gbc.writeMem(0x2eee, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7f2c);
        EXPECT(gbc.pc(), 0x2eef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01AC
        gbc.setState(0x3c20, 0xedfd, 0x80, 0x127e, 0x121, 0x5c5d, 0x0, 0x0);
        gbc.writeMem(0x3c20, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xedfd);
        EXPECT(gbc.pc(), 0x3c21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01AD
        gbc.setState(0xad45, 0x80bd, 0x68b0, 0xdc36, 0x1dab, 0xadd5, 0x1, 0x0);
        gbc.writeMem(0xad45, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x80bd);
        EXPECT(gbc.pc(), 0xad46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad45), 0x84);
        // 84 01AE
        gbc.setState(0x524e, 0x8d8, 0x7fa0, 0xfa0, 0x2a36, 0x7200, 0x0, 0x0);
        gbc.writeMem(0x524e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8d8);
        EXPECT(gbc.pc(), 0x524f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01AF
        gbc.setState(0x6e52, 0x6dac, 0x8a40, 0x6038, 0xd08c, 0x2ec5, 0x0, 0x1);
        gbc.writeMem(0x6e52, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6dac);
        EXPECT(gbc.pc(), 0x6e53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01B0
        gbc.setState(0x7069, 0xb0a8, 0xe420, 0x931e, 0x4a59, 0x477a, 0x1, 0x0);
        gbc.writeMem(0x7069, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb0a8);
        EXPECT(gbc.pc(), 0x706a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01B1
        gbc.setState(0x5611, 0xcd32, 0x92c0, 0xbcb0, 0x669d, 0xfa6c, 0x1, 0x0);
        gbc.writeMem(0x5611, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcd32);
        EXPECT(gbc.pc(), 0x5612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01B2
        gbc.setState(0x44b7, 0xef0f, 0x4740, 0x77e8, 0x28e0, 0x4349, 0x0, 0x1);
        gbc.writeMem(0x44b7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xef0f);
        EXPECT(gbc.pc(), 0x44b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01B3
        gbc.setState(0x2993, 0xea65, 0xbb0, 0x1b80, 0xb2e, 0x2d0c, 0x1, 0x0);
        gbc.writeMem(0x2993, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xea65);
        EXPECT(gbc.pc(), 0x2994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01B4
        gbc.setState(0x7b51, 0x5258, 0xea60, 0x9294, 0x29b7, 0xa682, 0x0, 0x0);
        gbc.writeMem(0x7b51, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5258);
        EXPECT(gbc.pc(), 0x7b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 01B6
        gbc.setState(0xddb5, 0x790b, 0xeeb0, 0x65a4, 0x5bc4, 0xd54d, 0x1, 0x0);
        gbc.writeMem(0xddb5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x790b);
        EXPECT(gbc.pc(), 0xddb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddb5), 0x84);
        // 84 01B7
        gbc.setState(0x3149, 0xde14, 0x4120, 0x1042, 0x928, 0x62ee, 0x1, 0x1);
        gbc.writeMem(0x3149, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xde14);
        EXPECT(gbc.pc(), 0x314a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01B8
        gbc.setState(0xe8e9, 0x3998, 0x73f0, 0x425a, 0x47e5, 0x53dc, 0x1, 0x0);
        gbc.writeMem(0xe8e9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3998);
        EXPECT(gbc.pc(), 0xe8ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8e9), 0x84);
        // 84 01B9
        gbc.setState(0x347a, 0x21ef, 0xa20, 0x6c45, 0xee4b, 0x45d7, 0x0, 0x1);
        gbc.writeMem(0x347a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x21ef);
        EXPECT(gbc.pc(), 0x347b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01BA
        gbc.setState(0xb483, 0x139a, 0x7d30, 0xe415, 0x1178, 0x8bad, 0x0, 0x0);
        gbc.writeMem(0xb483, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x139a);
        EXPECT(gbc.pc(), 0xb484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb483), 0x84);
        // 84 01BB
        gbc.setState(0xe120, 0x3a9f, 0xf660, 0xd0f8, 0x6f7b, 0x672a, 0x1, 0x0);
        gbc.writeMem(0xe120, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3a9f);
        EXPECT(gbc.pc(), 0xe121);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe120), 0x84);
        // 84 01BC
        gbc.setState(0x745b, 0x6098, 0xca80, 0x8e71, 0x133d, 0xb5e4, 0x0, 0x1);
        gbc.writeMem(0x745b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6098);
        EXPECT(gbc.pc(), 0x745c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01BD
        gbc.setState(0xe9e7, 0x892a, 0xac0, 0xf4d2, 0xef1e, 0xc0c6, 0x1, 0x0);
        gbc.writeMem(0xe9e7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x892a);
        EXPECT(gbc.pc(), 0xe9e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9e7), 0x84);
        // 84 01BE
        gbc.setState(0xa355, 0xd360, 0xff10, 0x5f00, 0x2669, 0xd1de, 0x1, 0x0);
        gbc.writeMem(0xa355, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd360);
        EXPECT(gbc.pc(), 0xa356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa355), 0x84);
        // 84 01BF
        gbc.setState(0x4648, 0xdfb3, 0xa40, 0xac3e, 0x8090, 0x3445, 0x0, 0x0);
        gbc.writeMem(0x4648, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xdfb3);
        EXPECT(gbc.pc(), 0x4649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01C0
        gbc.setState(0x424a, 0x8fd1, 0x1530, 0x1fda, 0x1d5f, 0xc20a, 0x1, 0x1);
        gbc.writeMem(0x424a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8fd1);
        EXPECT(gbc.pc(), 0x424b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01C1
        gbc.setState(0xbaa2, 0x10c0, 0x6640, 0x67e, 0x299, 0xdf1e, 0x1, 0x0);
        gbc.writeMem(0xbaa2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x10c0);
        EXPECT(gbc.pc(), 0xbaa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaa2), 0x84);
        // 84 01C2
        gbc.setState(0x21b1, 0x2af6, 0x4250, 0x937f, 0x9e05, 0x7a4b, 0x0, 0x0);
        gbc.writeMem(0x21b1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2af6);
        EXPECT(gbc.pc(), 0x21b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01C3
        gbc.setState(0x9166, 0x6a11, 0x5740, 0xd50d, 0xccfc, 0xf6bc, 0x0, 0x1);
        gbc.writeMem(0x9166, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6a11);
        EXPECT(gbc.pc(), 0x9167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9166), 0x84);
        // 84 01C4
        gbc.setState(0xc4b0, 0x504, 0xbd30, 0xaac2, 0x8d03, 0x87a8, 0x1, 0x1);
        gbc.writeMem(0xc4b0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x504);
        EXPECT(gbc.pc(), 0xc4b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4b0), 0x84);
        // 84 01C5
        gbc.setState(0x4d29, 0x2861, 0x49a0, 0x8454, 0xcd9f, 0x4d98, 0x1, 0x0);
        gbc.writeMem(0x4d29, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2861);
        EXPECT(gbc.pc(), 0x4d2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01C6
        gbc.setState(0xadb8, 0xbaac, 0x6870, 0xd14c, 0x79eb, 0xd8c7, 0x0, 0x0);
        gbc.writeMem(0xadb8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xbaac);
        EXPECT(gbc.pc(), 0xadb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb8), 0x84);
        // 84 01C7
        gbc.setState(0xc3c9, 0x1c8d, 0x390, 0x84b1, 0xbf03, 0x7688, 0x1, 0x0);
        gbc.writeMem(0xc3c9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1c8d);
        EXPECT(gbc.pc(), 0xc3ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c9), 0x84);
        // 84 01C8
        gbc.setState(0xda4a, 0xc757, 0xb880, 0x6b0e, 0x2d0b, 0xa303, 0x1, 0x0);
        gbc.writeMem(0xda4a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc757);
        EXPECT(gbc.pc(), 0xda4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda4a), 0x84);
        // 84 01C9
        gbc.setState(0xe7ee, 0x9f6c, 0x6930, 0xc8b1, 0xc83e, 0xbc4, 0x0, 0x0);
        gbc.writeMem(0xe7ee, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9f6c);
        EXPECT(gbc.pc(), 0xe7ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ee), 0x84);
        // 84 01CA
        gbc.setState(0xbd2e, 0x6ed3, 0xea90, 0x159a, 0x3453, 0x88f5, 0x0, 0x0);
        gbc.writeMem(0xbd2e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6ed3);
        EXPECT(gbc.pc(), 0xbd2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd2e), 0x84);
        // 84 01CB
        gbc.setState(0x3f18, 0x8962, 0x4c80, 0x933f, 0xdae5, 0x9908, 0x1, 0x0);
        gbc.writeMem(0x3f18, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8962);
        EXPECT(gbc.pc(), 0x3f19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01CC
        gbc.setState(0x816b, 0xdfaf, 0x2aa0, 0xa58a, 0x1558, 0xd4b2, 0x0, 0x1);
        gbc.writeMem(0x816b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xdfaf);
        EXPECT(gbc.pc(), 0x816c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x816b), 0x84);
        // 84 01CD
        gbc.setState(0xa3c9, 0x5121, 0x5de0, 0xb3b1, 0x628e, 0xd21, 0x1, 0x0);
        gbc.writeMem(0xa3c9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5121);
        EXPECT(gbc.pc(), 0xa3ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c9), 0x84);
        // 84 01CE
        gbc.setState(0x42e1, 0x7769, 0x2530, 0xe8fe, 0x5bf2, 0x31c1, 0x0, 0x1);
        gbc.writeMem(0x42e1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7769);
        EXPECT(gbc.pc(), 0x42e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01D0
        gbc.setState(0xe005, 0x6398, 0x28d0, 0xdef7, 0x7ac, 0x3570, 0x0, 0x1);
        gbc.writeMem(0xe005, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6398);
        EXPECT(gbc.pc(), 0xe006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe005), 0x84);
        // 84 01D1
        gbc.setState(0x7440, 0x44d6, 0xea30, 0x4b91, 0x23be, 0x678b, 0x0, 0x1);
        gbc.writeMem(0x7440, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x44d6);
        EXPECT(gbc.pc(), 0x7441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 01D2
        gbc.setState(0xd3c0, 0x96f7, 0xfe20, 0x1143, 0xe3c0, 0xfd66, 0x0, 0x0);
        gbc.writeMem(0xd3c0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x96f7);
        EXPECT(gbc.pc(), 0xd3c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3c0), 0x84);
        // 84 01D3
        gbc.setState(0x777a, 0x5adb, 0x5ce0, 0xe08, 0x95, 0x5937, 0x1, 0x1);
        gbc.writeMem(0x777a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5adb);
        EXPECT(gbc.pc(), 0x777b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01D4
        gbc.setState(0x4ef4, 0x7717, 0x4e00, 0x2b5a, 0x9c06, 0x1b9e, 0x1, 0x1);
        gbc.writeMem(0x4ef4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7717);
        EXPECT(gbc.pc(), 0x4ef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01D5
        gbc.setState(0x8ef5, 0x166c, 0x77a0, 0x2792, 0x27a3, 0x95a4, 0x1, 0x0);
        gbc.writeMem(0x8ef5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x166c);
        EXPECT(gbc.pc(), 0x8ef6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ef5), 0x84);
        // 84 01D6
        gbc.setState(0x4cf5, 0x4366, 0x22f0, 0x87af, 0xfea2, 0x8c3a, 0x0, 0x0);
        gbc.writeMem(0x4cf5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4366);
        EXPECT(gbc.pc(), 0x4cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01D7
        gbc.setState(0x73c9, 0xbfc2, 0x7330, 0x49cb, 0x45e3, 0x357, 0x0, 0x1);
        gbc.writeMem(0x73c9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xbfc2);
        EXPECT(gbc.pc(), 0x73ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01D8
        gbc.setState(0x7c79, 0x3a53, 0xb8a0, 0x589e, 0x66b3, 0x3439, 0x1, 0x0);
        gbc.writeMem(0x7c79, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3a53);
        EXPECT(gbc.pc(), 0x7c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01D9
        gbc.setState(0xc05c, 0x83fd, 0xbf50, 0xa83c, 0xcb54, 0xe7e1, 0x0, 0x0);
        gbc.writeMem(0xc05c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x83fd);
        EXPECT(gbc.pc(), 0xc05d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc05c), 0x84);
        // 84 01DA
        gbc.setState(0xdebd, 0x1c46, 0x2b0, 0x3d20, 0xa1a, 0x3587, 0x1, 0x0);
        gbc.writeMem(0xdebd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1c46);
        EXPECT(gbc.pc(), 0xdebe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdebd), 0x84);
        // 84 01DB
        gbc.setState(0xe3c2, 0x33a8, 0x98f0, 0x82b, 0xf317, 0xa538, 0x0, 0x1);
        gbc.writeMem(0xe3c2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x33a8);
        EXPECT(gbc.pc(), 0xe3c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3c2), 0x84);
        // 84 01DC
        gbc.setState(0xd33f, 0xa5fb, 0x23c0, 0x8766, 0x86a6, 0xc724, 0x0, 0x1);
        gbc.writeMem(0xd33f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa5fb);
        EXPECT(gbc.pc(), 0xd340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd33f), 0x84);
        // 84 01DD
        gbc.setState(0xee19, 0xe6aa, 0xf7d0, 0x6a7, 0x2c27, 0xf677, 0x0, 0x0);
        gbc.writeMem(0xee19, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe6aa);
        EXPECT(gbc.pc(), 0xee1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee19), 0x84);
        // 84 01DE
        gbc.setState(0x220, 0x9cab, 0xe720, 0xc1b0, 0xa353, 0x9da9, 0x0, 0x0);
        gbc.writeMem(0x220, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9cab);
        EXPECT(gbc.pc(), 0x221);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 01DF
        gbc.setState(0x6e0e, 0x243b, 0x7910, 0xd3d3, 0xdf0, 0x80dd, 0x1, 0x1);
        gbc.writeMem(0x6e0e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x243b);
        EXPECT(gbc.pc(), 0x6e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01E0
        gbc.setState(0x972c, 0xfdbc, 0x8e00, 0x8830, 0x923, 0xbafe, 0x0, 0x0);
        gbc.writeMem(0x972c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xfdbc);
        EXPECT(gbc.pc(), 0x972d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x972c), 0x84);
        // 84 01E2
        gbc.setState(0xcdfd, 0xd1e5, 0x1320, 0x9cae, 0x8f17, 0x4d70, 0x0, 0x1);
        gbc.writeMem(0xcdfd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd1e5);
        EXPECT(gbc.pc(), 0xcdfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdfd), 0x84);
        // 84 01E3
        gbc.setState(0x2cfa, 0x1d4a, 0x5d10, 0x1d39, 0x3c8, 0xe0a2, 0x0, 0x0);
        gbc.writeMem(0x2cfa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1d4a);
        EXPECT(gbc.pc(), 0x2cfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01E4
        gbc.setState(0x7f26, 0x1d91, 0x1580, 0x3018, 0x7378, 0x8b2e, 0x0, 0x0);
        gbc.writeMem(0x7f26, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1d91);
        EXPECT(gbc.pc(), 0x7f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01E5
        gbc.setState(0x2e6, 0x6331, 0x67d0, 0xee5d, 0xbce2, 0x2619, 0x1, 0x1);
        gbc.writeMem(0x2e6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6331);
        EXPECT(gbc.pc(), 0x2e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01E6
        gbc.setState(0x4b61, 0x634, 0x8670, 0x5313, 0x8771, 0xea2f, 0x1, 0x1);
        gbc.writeMem(0x4b61, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x634);
        EXPECT(gbc.pc(), 0x4b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 01E7
        gbc.setState(0x15aa, 0x5835, 0xbc90, 0x7ff, 0x2ae4, 0x92bb, 0x0, 0x0);
        gbc.writeMem(0x15aa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5835);
        EXPECT(gbc.pc(), 0x15ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01E8
        gbc.setState(0xe1e2, 0x9f9b, 0xd20, 0xca2f, 0x67e9, 0xa7cf, 0x0, 0x1);
        gbc.writeMem(0xe1e2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9f9b);
        EXPECT(gbc.pc(), 0xe1e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e2), 0x84);
        // 84 01E9
        gbc.setState(0xe95f, 0x7d92, 0x3040, 0xbe80, 0xf979, 0xa6d2, 0x1, 0x1);
        gbc.writeMem(0xe95f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7d92);
        EXPECT(gbc.pc(), 0xe960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe95f), 0x84);
        // 84 01EA
        gbc.setState(0x8544, 0xad42, 0xf3d0, 0xfc9a, 0x10b9, 0xe572, 0x1, 0x1);
        gbc.writeMem(0x8544, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xad42);
        EXPECT(gbc.pc(), 0x8545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8544), 0x84);
        // 84 01EB
        gbc.setState(0xe09, 0x1e66, 0xfb50, 0xf754, 0x65f1, 0x90cc, 0x0, 0x0);
        gbc.writeMem(0xe09, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1e66);
        EXPECT(gbc.pc(), 0xe0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01EC
        gbc.setState(0xc0d3, 0x9931, 0x1df0, 0xe78d, 0xcc84, 0x88ba, 0x1, 0x1);
        gbc.writeMem(0xc0d3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9931);
        EXPECT(gbc.pc(), 0xc0d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0d3), 0x84);
        // 84 01EE
        gbc.setState(0x70fa, 0x69ab, 0xf9e0, 0xb10d, 0xf606, 0x73d8, 0x1, 0x1);
        gbc.writeMem(0x70fa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x69ab);
        EXPECT(gbc.pc(), 0x70fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01EF
        gbc.setState(0x5831, 0xc4ff, 0xba10, 0x7a79, 0xd8e0, 0x18f5, 0x0, 0x1);
        gbc.writeMem(0x5831, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc4ff);
        EXPECT(gbc.pc(), 0x5832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01F0
        gbc.setState(0x21e3, 0x9a, 0x49f0, 0xa86c, 0x5511, 0x4e92, 0x0, 0x0);
        gbc.writeMem(0x21e3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9a);
        EXPECT(gbc.pc(), 0x21e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01F1
        gbc.setState(0x26c1, 0x33e1, 0xc4e0, 0xce93, 0x611a, 0x9465, 0x0, 0x1);
        gbc.writeMem(0x26c1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x33e1);
        EXPECT(gbc.pc(), 0x26c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01F2
        gbc.setState(0x7a2f, 0x1cba, 0xaff0, 0x572b, 0x4b14, 0xf049, 0x1, 0x0);
        gbc.writeMem(0x7a2f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1cba);
        EXPECT(gbc.pc(), 0x7a30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01F3
        gbc.setState(0x2e60, 0x4096, 0xbac0, 0x3391, 0xefa, 0xc246, 0x1, 0x0);
        gbc.writeMem(0x2e60, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4096);
        EXPECT(gbc.pc(), 0x2e61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01F4
        gbc.setState(0x9101, 0x702b, 0xdbe0, 0x63b0, 0xeeb0, 0xdd76, 0x0, 0x1);
        gbc.writeMem(0x9101, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x702b);
        EXPECT(gbc.pc(), 0x9102);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9101), 0x84);
        // 84 01F5
        gbc.setState(0xd146, 0x7c23, 0xf480, 0x2c8f, 0xdb, 0x4ece, 0x1, 0x0);
        gbc.writeMem(0xd146, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7c23);
        EXPECT(gbc.pc(), 0xd147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd146), 0x84);
        // 84 01F6
        gbc.setState(0xd5d, 0x6388, 0x2d0, 0x8284, 0x1eab, 0x3f92, 0x0, 0x0);
        gbc.writeMem(0xd5d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6388);
        EXPECT(gbc.pc(), 0xd5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 01F7
        gbc.setState(0x9705, 0x2677, 0x9e70, 0x49ed, 0x2949, 0x78d8, 0x0, 0x0);
        gbc.writeMem(0x9705, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2677);
        EXPECT(gbc.pc(), 0x9706);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9705), 0x84);
        // 84 01F8
        gbc.setState(0x6436, 0x705d, 0x86f0, 0xcf32, 0x4496, 0xd439, 0x0, 0x1);
        gbc.writeMem(0x6436, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x705d);
        EXPECT(gbc.pc(), 0x6437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 01F9
        gbc.setState(0x74c7, 0x592c, 0x7280, 0x62c9, 0x419e, 0x562b, 0x0, 0x0);
        gbc.writeMem(0x74c7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x592c);
        EXPECT(gbc.pc(), 0x74c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01FA
        gbc.setState(0x155, 0x3a97, 0x18b0, 0x19a2, 0xe983, 0x270b, 0x0, 0x0);
        gbc.writeMem(0x155, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3a97);
        EXPECT(gbc.pc(), 0x156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 01FB
        gbc.setState(0x8843, 0x90e8, 0x3690, 0x7e68, 0x3829, 0xd4a0, 0x1, 0x0);
        gbc.writeMem(0x8843, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x90e8);
        EXPECT(gbc.pc(), 0x8844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8843), 0x84);
        // 84 01FD
        gbc.setState(0xdc8e, 0x4a21, 0xc680, 0xf0f6, 0x7dea, 0x9639, 0x1, 0x1);
        gbc.writeMem(0xdc8e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4a21);
        EXPECT(gbc.pc(), 0xdc8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc8e), 0x84);
        // 84 01FF
        gbc.setState(0x8085, 0x73fa, 0xe580, 0x8d47, 0x8384, 0x402f, 0x1, 0x0);
        gbc.writeMem(0x8085, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x73fa);
        EXPECT(gbc.pc(), 0x8086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8085), 0x84);
        // 84 0200
        gbc.setState(0x420b, 0x28aa, 0x630, 0xc1c9, 0xda66, 0x6790, 0x1, 0x1);
        gbc.writeMem(0x420b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x28aa);
        EXPECT(gbc.pc(), 0x420c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0201
        gbc.setState(0x82bc, 0x5e33, 0xc2b0, 0x1dae, 0x44ee, 0xc02b, 0x0, 0x1);
        gbc.writeMem(0x82bc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5e33);
        EXPECT(gbc.pc(), 0x82bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82bc), 0x84);
        // 84 0202
        gbc.setState(0xd937, 0x59ef, 0xcbe0, 0x1b99, 0xc7f6, 0x2128, 0x1, 0x0);
        gbc.writeMem(0xd937, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x59ef);
        EXPECT(gbc.pc(), 0xd938);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd937), 0x84);
        // 84 0203
        gbc.setState(0xdfe2, 0x27b8, 0xbd60, 0x57d2, 0x90c6, 0x9a8a, 0x1, 0x1);
        gbc.writeMem(0xdfe2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x27b8);
        EXPECT(gbc.pc(), 0xdfe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe2), 0x84);
        // 84 0204
        gbc.setState(0xb217, 0x2bd7, 0xf310, 0x7bb1, 0x4f3a, 0x3c12, 0x0, 0x1);
        gbc.writeMem(0xb217, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2bd7);
        EXPECT(gbc.pc(), 0xb218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb217), 0x84);
        // 84 0205
        gbc.setState(0x877a, 0x8801, 0x7970, 0x6eb3, 0x8391, 0x7c1c, 0x0, 0x1);
        gbc.writeMem(0x877a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x8801);
        EXPECT(gbc.pc(), 0x877b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x877a), 0x84);
        // 84 0206
        gbc.setState(0xd562, 0x79b0, 0x1c30, 0x6fcb, 0xb1a3, 0xc6b7, 0x1, 0x1);
        gbc.writeMem(0xd562, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x79b0);
        EXPECT(gbc.pc(), 0xd563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd562), 0x84);
        // 84 0207
        gbc.setState(0xcc52, 0xfcdc, 0x9e90, 0x29bc, 0xec6f, 0xd096, 0x1, 0x1);
        gbc.writeMem(0xcc52, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfcdc);
        EXPECT(gbc.pc(), 0xcc53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc52), 0x84);
        // 84 0208
        gbc.setState(0x9722, 0x30fa, 0xaca0, 0x731, 0x2fac, 0x4f10, 0x1, 0x1);
        gbc.writeMem(0x9722, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x30fa);
        EXPECT(gbc.pc(), 0x9723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9722), 0x84);
        // 84 0209
        gbc.setState(0xec5b, 0x8d7, 0xdb40, 0x509f, 0x61f, 0xa7ef, 0x1, 0x0);
        gbc.writeMem(0xec5b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x8d7);
        EXPECT(gbc.pc(), 0xec5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec5b), 0x84);
        // 84 020A
        gbc.setState(0x2db4, 0xc0f6, 0x1480, 0x17ae, 0xe0f1, 0xf7da, 0x1, 0x1);
        gbc.writeMem(0x2db4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc0f6);
        EXPECT(gbc.pc(), 0x2db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 020C
        gbc.setState(0x4d4a, 0xee27, 0xc370, 0xef65, 0x4f96, 0x778b, 0x1, 0x0);
        gbc.writeMem(0x4d4a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xee27);
        EXPECT(gbc.pc(), 0x4d4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 020D
        gbc.setState(0xd1ab, 0xfe9e, 0xcb70, 0xcc06, 0x7188, 0x4eab, 0x0, 0x0);
        gbc.writeMem(0xd1ab, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xfe9e);
        EXPECT(gbc.pc(), 0xd1ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ab), 0x84);
        // 84 020E
        gbc.setState(0xb748, 0x6dd0, 0x5220, 0x8c10, 0xabec, 0xe303, 0x1, 0x1);
        gbc.writeMem(0xb748, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6dd0);
        EXPECT(gbc.pc(), 0xb749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb748), 0x84);
        // 84 020F
        gbc.setState(0x72ef, 0x2d53, 0xeb80, 0xff77, 0x2ac0, 0xe6d8, 0x1, 0x1);
        gbc.writeMem(0x72ef, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2d53);
        EXPECT(gbc.pc(), 0x72f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0210
        gbc.setState(0xb758, 0xc1e2, 0x5140, 0x96b8, 0x4834, 0x808b, 0x1, 0x0);
        gbc.writeMem(0xb758, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc1e2);
        EXPECT(gbc.pc(), 0xb759);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb758), 0x84);
        // 84 0211
        gbc.setState(0x9fb4, 0x1586, 0x8f60, 0x87e2, 0xdaef, 0xb573, 0x0, 0x1);
        gbc.writeMem(0x9fb4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1586);
        EXPECT(gbc.pc(), 0x9fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb4), 0x84);
        // 84 0212
        gbc.setState(0x6f63, 0xc9fe, 0xc0b0, 0x8b61, 0x4024, 0x866d, 0x1, 0x0);
        gbc.writeMem(0x6f63, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc9fe);
        EXPECT(gbc.pc(), 0x6f64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0215
        gbc.setState(0xd634, 0xf951, 0x6310, 0x70fe, 0xcb4b, 0xebb, 0x1, 0x1);
        gbc.writeMem(0xd634, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf951);
        EXPECT(gbc.pc(), 0xd635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd634), 0x84);
        // 84 0216
        gbc.setState(0x9135, 0x7a79, 0xe430, 0x8fe7, 0x9752, 0x6ec, 0x0, 0x0);
        gbc.writeMem(0x9135, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x7a79);
        EXPECT(gbc.pc(), 0x9136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9135), 0x84);
        // 84 0217
        gbc.setState(0xbfed, 0x77a8, 0x7f0, 0x5765, 0xe29f, 0x59de, 0x1, 0x0);
        gbc.writeMem(0xbfed, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x77a8);
        EXPECT(gbc.pc(), 0xbfee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfed), 0x84);
        // 84 0218
        gbc.setState(0x165f, 0x7d6c, 0x76f0, 0xa34c, 0x4f64, 0xd9ca, 0x0, 0x0);
        gbc.writeMem(0x165f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x7d6c);
        EXPECT(gbc.pc(), 0x1660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0219
        gbc.setState(0x62a6, 0x2fed, 0x9bf0, 0x2572, 0x1f58, 0x511d, 0x1, 0x0);
        gbc.writeMem(0x62a6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2fed);
        EXPECT(gbc.pc(), 0x62a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 021B
        gbc.setState(0x2815, 0xc533, 0x1ea0, 0x1257, 0x12fc, 0x5068, 0x1, 0x0);
        gbc.writeMem(0x2815, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc533);
        EXPECT(gbc.pc(), 0x2816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 021C
        gbc.setState(0x288e, 0x35ed, 0xf160, 0x9aa2, 0x8194, 0xac29, 0x1, 0x0);
        gbc.writeMem(0x288e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x35ed);
        EXPECT(gbc.pc(), 0x288f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 021D
        gbc.setState(0x9bc9, 0xdaf1, 0xba0, 0xb9f3, 0xe82e, 0x9208, 0x1, 0x1);
        gbc.writeMem(0x9bc9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xdaf1);
        EXPECT(gbc.pc(), 0x9bca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bc9), 0x84);
        // 84 021E
        gbc.setState(0x9dc7, 0x530b, 0x83c0, 0x97e2, 0xa2c6, 0xe2bf, 0x1, 0x1);
        gbc.writeMem(0x9dc7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x530b);
        EXPECT(gbc.pc(), 0x9dc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc7), 0x84);
        // 84 021F
        gbc.setState(0xdaf8, 0xf427, 0x7f80, 0x694d, 0x6c9d, 0x2b02, 0x1, 0x1);
        gbc.writeMem(0xdaf8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf427);
        EXPECT(gbc.pc(), 0xdaf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaf8), 0x84);
        // 84 0220
        gbc.setState(0xdd4e, 0x4407, 0xeb80, 0x6633, 0xddb1, 0x5489, 0x1, 0x0);
        gbc.writeMem(0xdd4e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4407);
        EXPECT(gbc.pc(), 0xdd4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd4e), 0x84);
        // 84 0222
        gbc.setState(0xa5e6, 0xd3de, 0xb00, 0x18cc, 0x5f46, 0x8159, 0x0, 0x0);
        gbc.writeMem(0xa5e6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd3de);
        EXPECT(gbc.pc(), 0xa5e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e6), 0x84);
        // 84 0223
        gbc.setState(0xc8c4, 0xa1e0, 0x2e50, 0x799a, 0xc756, 0x72e9, 0x0, 0x1);
        gbc.writeMem(0xc8c4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa1e0);
        EXPECT(gbc.pc(), 0xc8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8c4), 0x84);
        // 84 0224
        gbc.setState(0xf53, 0xbff2, 0x4d0, 0x2f3c, 0x9c2c, 0x1817, 0x0, 0x0);
        gbc.writeMem(0xf53, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xbff2);
        EXPECT(gbc.pc(), 0xf54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0225
        gbc.setState(0xd5f1, 0x4ac7, 0x410, 0x148e, 0xf08b, 0x9b93, 0x0, 0x0);
        gbc.writeMem(0xd5f1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4ac7);
        EXPECT(gbc.pc(), 0xd5f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f1), 0x84);
        // 84 0226
        gbc.setState(0x1f66, 0xcb82, 0x2b00, 0x7c80, 0xa6f, 0xbcad, 0x1, 0x1);
        gbc.writeMem(0x1f66, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xcb82);
        EXPECT(gbc.pc(), 0x1f67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0227
        gbc.setState(0x9788, 0x6146, 0x4b90, 0xff8d, 0xb86c, 0x865d, 0x0, 0x0);
        gbc.writeMem(0x9788, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6146);
        EXPECT(gbc.pc(), 0x9789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9788), 0x84);
        // 84 0228
        gbc.setState(0x5463, 0x8eaf, 0xf230, 0xf229, 0x65b5, 0xc704, 0x0, 0x1);
        gbc.writeMem(0x5463, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8eaf);
        EXPECT(gbc.pc(), 0x5464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0229
        gbc.setState(0x694c, 0xe261, 0x8490, 0xd0f6, 0xb3d6, 0xdc7d, 0x1, 0x1);
        gbc.writeMem(0x694c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe261);
        EXPECT(gbc.pc(), 0x694d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 022A
        gbc.setState(0x874, 0x2f12, 0xfad0, 0xdc74, 0x4222, 0xd8ac, 0x0, 0x0);
        gbc.writeMem(0x874, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2f12);
        EXPECT(gbc.pc(), 0x875);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 022B
        gbc.setState(0x1079, 0x99f4, 0x4890, 0xb332, 0xf782, 0x3e7a, 0x1, 0x0);
        gbc.writeMem(0x1079, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x99f4);
        EXPECT(gbc.pc(), 0x107a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 022C
        gbc.setState(0x7390, 0x7e81, 0xb7d0, 0xc646, 0x2962, 0x9197, 0x0, 0x0);
        gbc.writeMem(0x7390, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7e81);
        EXPECT(gbc.pc(), 0x7391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 022D
        gbc.setState(0x824c, 0x4f64, 0x6d00, 0x68a6, 0x8aa3, 0xc5f5, 0x1, 0x0);
        gbc.writeMem(0x824c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x4f64);
        EXPECT(gbc.pc(), 0x824d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x824c), 0x84);
        // 84 022E
        gbc.setState(0x1d4f, 0xdc99, 0xc210, 0xedd1, 0xbcee, 0xe513, 0x0, 0x0);
        gbc.writeMem(0x1d4f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xdc99);
        EXPECT(gbc.pc(), 0x1d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 022F
        gbc.setState(0x385c, 0x7951, 0x8fd0, 0x2515, 0x8a6d, 0x184d, 0x0, 0x1);
        gbc.writeMem(0x385c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7951);
        EXPECT(gbc.pc(), 0x385d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0230
        gbc.setState(0x1e65, 0x22b8, 0x5820, 0x625, 0x8e64, 0xbdcb, 0x0, 0x1);
        gbc.writeMem(0x1e65, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x22b8);
        EXPECT(gbc.pc(), 0x1e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0231
        gbc.setState(0x30a4, 0x5d1a, 0xe8b0, 0x1706, 0xdd0, 0x18a3, 0x1, 0x0);
        gbc.writeMem(0x30a4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5d1a);
        EXPECT(gbc.pc(), 0x30a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0232
        gbc.setState(0x42f7, 0x92a8, 0xf9f0, 0xf0b5, 0xa4ff, 0x8682, 0x0, 0x1);
        gbc.writeMem(0x42f7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x92a8);
        EXPECT(gbc.pc(), 0x42f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0233
        gbc.setState(0x627b, 0x6126, 0x1b10, 0x6353, 0xc423, 0x2a6d, 0x1, 0x1);
        gbc.writeMem(0x627b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6126);
        EXPECT(gbc.pc(), 0x627c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0234
        gbc.setState(0x351f, 0x9373, 0x9800, 0xc9ef, 0x5053, 0x1ab4, 0x1, 0x0);
        gbc.writeMem(0x351f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9373);
        EXPECT(gbc.pc(), 0x3520);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0235
        gbc.setState(0x4f7b, 0xc2b9, 0x1a10, 0xd53d, 0xc88d, 0x4ecc, 0x1, 0x0);
        gbc.writeMem(0x4f7b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc2b9);
        EXPECT(gbc.pc(), 0x4f7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0236
        gbc.setState(0x99d3, 0xffe2, 0xe230, 0xea7, 0x2f71, 0x1574, 0x0, 0x1);
        gbc.writeMem(0x99d3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xffe2);
        EXPECT(gbc.pc(), 0x99d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99d3), 0x84);
        // 84 0237
        gbc.setState(0xd48c, 0x36f0, 0xb8e0, 0x38c0, 0x7a4a, 0xef44, 0x1, 0x0);
        gbc.writeMem(0xd48c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x36f0);
        EXPECT(gbc.pc(), 0xd48d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd48c), 0x84);
        // 84 0238
        gbc.setState(0x8d60, 0x4131, 0x6be0, 0x6c01, 0x3e74, 0xabc1, 0x1, 0x0);
        gbc.writeMem(0x8d60, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4131);
        EXPECT(gbc.pc(), 0x8d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d60), 0x84);
        // 84 0239
        gbc.setState(0xa3ce, 0x2b1a, 0xe270, 0x1b46, 0xaf09, 0x1b57, 0x1, 0x0);
        gbc.writeMem(0xa3ce, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2b1a);
        EXPECT(gbc.pc(), 0xa3cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ce), 0x84);
        // 84 023A
        gbc.setState(0x46e2, 0xd43, 0xb970, 0xd24a, 0x9dbb, 0x6dca, 0x0, 0x0);
        gbc.writeMem(0x46e2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd43);
        EXPECT(gbc.pc(), 0x46e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 023B
        gbc.setState(0xc59, 0x8a59, 0xa4d0, 0x1299, 0x5e39, 0xa6d4, 0x1, 0x1);
        gbc.writeMem(0xc59, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8a59);
        EXPECT(gbc.pc(), 0xc5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 023C
        gbc.setState(0x480d, 0x658e, 0xe540, 0x27db, 0x1b0e, 0x4ac3, 0x1, 0x0);
        gbc.writeMem(0x480d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x658e);
        EXPECT(gbc.pc(), 0x480e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 023E
        gbc.setState(0x5fe7, 0x1a95, 0x28d0, 0x243b, 0xa337, 0xd66d, 0x1, 0x0);
        gbc.writeMem(0x5fe7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1a95);
        EXPECT(gbc.pc(), 0x5fe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 023F
        gbc.setState(0x437b, 0xbce6, 0x530, 0x8f77, 0x98e8, 0x3885, 0x1, 0x1);
        gbc.writeMem(0x437b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xbce6);
        EXPECT(gbc.pc(), 0x437c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0240
        gbc.setState(0xccd4, 0xd1c0, 0x11c0, 0x5944, 0xb89b, 0xf37d, 0x0, 0x1);
        gbc.writeMem(0xccd4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd1c0);
        EXPECT(gbc.pc(), 0xccd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd4), 0x84);
        // 84 0241
        gbc.setState(0xa5df, 0x4eff, 0x76d0, 0x87b4, 0x2d3b, 0x121c, 0x1, 0x1);
        gbc.writeMem(0xa5df, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4eff);
        EXPECT(gbc.pc(), 0xa5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5df), 0x84);
        // 84 0242
        gbc.setState(0xe44b, 0xd9ca, 0x5f00, 0x5b38, 0xbf56, 0x37f6, 0x0, 0x1);
        gbc.writeMem(0xe44b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd9ca);
        EXPECT(gbc.pc(), 0xe44c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44b), 0x84);
        // 84 0243
        gbc.setState(0xa828, 0xe84f, 0x7310, 0x7f51, 0x3ddc, 0xd238, 0x0, 0x0);
        gbc.writeMem(0xa828, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe84f);
        EXPECT(gbc.pc(), 0xa829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa828), 0x84);
        // 84 0244
        gbc.setState(0x5db4, 0xb8f, 0xbfd0, 0x956d, 0x6dd8, 0x3e6, 0x1, 0x1);
        gbc.writeMem(0x5db4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb8f);
        EXPECT(gbc.pc(), 0x5db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0245
        gbc.setState(0x551c, 0x8273, 0xa8c0, 0xf69d, 0x6ce5, 0x7af9, 0x1, 0x1);
        gbc.writeMem(0x551c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8273);
        EXPECT(gbc.pc(), 0x551d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0246
        gbc.setState(0x5d31, 0xe3a6, 0x7c00, 0x3837, 0xa16b, 0x5fb6, 0x1, 0x0);
        gbc.writeMem(0x5d31, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe3a6);
        EXPECT(gbc.pc(), 0x5d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0247
        gbc.setState(0xa8c6, 0x4f04, 0x7b70, 0x4193, 0x5624, 0x6059, 0x0, 0x1);
        gbc.writeMem(0xa8c6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4f04);
        EXPECT(gbc.pc(), 0xa8c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c6), 0x84);
        // 84 0248
        gbc.setState(0x58c6, 0xa3f8, 0xd100, 0x828, 0xd06d, 0xf6be, 0x1, 0x1);
        gbc.writeMem(0x58c6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa3f8);
        EXPECT(gbc.pc(), 0x58c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0249
        gbc.setState(0x9013, 0xf03b, 0x1450, 0xc021, 0xe73, 0x15d6, 0x1, 0x0);
        gbc.writeMem(0x9013, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf03b);
        EXPECT(gbc.pc(), 0x9014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9013), 0x84);
        // 84 024A
        gbc.setState(0x3aed, 0x6847, 0xd4f0, 0x3717, 0xb141, 0x1344, 0x1, 0x1);
        gbc.writeMem(0x3aed, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6847);
        EXPECT(gbc.pc(), 0x3aee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 024C
        gbc.setState(0xa03c, 0x2b70, 0xbed0, 0xd74, 0x5432, 0x7dab, 0x1, 0x0);
        gbc.writeMem(0xa03c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2b70);
        EXPECT(gbc.pc(), 0xa03d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03c), 0x84);
        // 84 024D
        gbc.setState(0x8070, 0x30af, 0x6ac0, 0x7d6f, 0x7c73, 0xca9a, 0x0, 0x1);
        gbc.writeMem(0x8070, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x30af);
        EXPECT(gbc.pc(), 0x8071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8070), 0x84);
        // 84 024E
        gbc.setState(0xb7c0, 0x6aa9, 0xc90, 0xca3c, 0x39ec, 0x7f94, 0x1, 0x1);
        gbc.writeMem(0xb7c0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6aa9);
        EXPECT(gbc.pc(), 0xb7c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7c0), 0x84);
        // 84 024F
        gbc.setState(0x77d2, 0x7c62, 0xfe80, 0x924b, 0x8f6f, 0xaafc, 0x0, 0x0);
        gbc.writeMem(0x77d2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7c62);
        EXPECT(gbc.pc(), 0x77d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0250
        gbc.setState(0xc737, 0x226f, 0xb3d0, 0xcf3a, 0xebf8, 0x8466, 0x0, 0x1);
        gbc.writeMem(0xc737, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x226f);
        EXPECT(gbc.pc(), 0xc738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc737), 0x84);
        // 84 0251
        gbc.setState(0xafa3, 0x7b11, 0x3ab0, 0x26f2, 0x17d9, 0xf767, 0x0, 0x0);
        gbc.writeMem(0xafa3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7b11);
        EXPECT(gbc.pc(), 0xafa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa3), 0x84);
        // 84 0252
        gbc.setState(0x90d9, 0xf3f6, 0xf5b0, 0x94e6, 0x31b0, 0xd5d9, 0x1, 0x1);
        gbc.writeMem(0x90d9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf3f6);
        EXPECT(gbc.pc(), 0x90da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d9), 0x84);
        // 84 0253
        gbc.setState(0xa291, 0x42cb, 0xae90, 0x5db0, 0xbcbd, 0x123e, 0x0, 0x0);
        gbc.writeMem(0xa291, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x42cb);
        EXPECT(gbc.pc(), 0xa292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa291), 0x84);
        // 84 0254
        gbc.setState(0x2432, 0xefc4, 0xd750, 0x27a9, 0x39ea, 0x1388, 0x1, 0x1);
        gbc.writeMem(0x2432, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xefc4);
        EXPECT(gbc.pc(), 0x2433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0255
        gbc.setState(0xed5e, 0x8d1, 0xb10, 0x157d, 0x1a53, 0x7bc2, 0x1, 0x1);
        gbc.writeMem(0xed5e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8d1);
        EXPECT(gbc.pc(), 0xed5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed5e), 0x84);
        // 84 0256
        gbc.setState(0x637e, 0x34db, 0x64e0, 0x14e7, 0xa0d, 0x3c8a, 0x0, 0x0);
        gbc.writeMem(0x637e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x34db);
        EXPECT(gbc.pc(), 0x637f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0257
        gbc.setState(0x655d, 0x9c39, 0xb270, 0x8539, 0xb742, 0x7d09, 0x1, 0x1);
        gbc.writeMem(0x655d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9c39);
        EXPECT(gbc.pc(), 0x655e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0258
        gbc.setState(0x95d9, 0x779d, 0x67c0, 0x46a3, 0x8564, 0x1260, 0x1, 0x0);
        gbc.writeMem(0x95d9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x779d);
        EXPECT(gbc.pc(), 0x95da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d9), 0x84);
        // 84 025A
        gbc.setState(0x5929, 0x4528, 0xafc0, 0x7ba3, 0x9731, 0xdd20, 0x0, 0x0);
        gbc.writeMem(0x5929, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4528);
        EXPECT(gbc.pc(), 0x592a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 025B
        gbc.setState(0xc7aa, 0x992d, 0x2520, 0x39d6, 0x1596, 0xde19, 0x1, 0x0);
        gbc.writeMem(0xc7aa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x992d);
        EXPECT(gbc.pc(), 0xc7ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7aa), 0x84);
        // 84 025D
        gbc.setState(0x52cb, 0x93a9, 0xfdd0, 0xa21c, 0x350c, 0xbd7d, 0x1, 0x0);
        gbc.writeMem(0x52cb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x93a9);
        EXPECT(gbc.pc(), 0x52cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 025E
        gbc.setState(0x3a01, 0x66bc, 0x27b0, 0xccfe, 0x8a4a, 0xaf87, 0x1, 0x1);
        gbc.writeMem(0x3a01, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x66bc);
        EXPECT(gbc.pc(), 0x3a02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 025F
        gbc.setState(0x9af6, 0xf43e, 0x5ca0, 0x62fb, 0x1baa, 0xa86d, 0x0, 0x0);
        gbc.writeMem(0x9af6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xf43e);
        EXPECT(gbc.pc(), 0x9af7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9af6), 0x84);
        // 84 0260
        gbc.setState(0x9bb5, 0x578c, 0xa300, 0xd51, 0x10b8, 0xeb1b, 0x0, 0x1);
        gbc.writeMem(0x9bb5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x578c);
        EXPECT(gbc.pc(), 0x9bb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb5), 0x84);
        // 84 0261
        gbc.setState(0x8845, 0x8fd6, 0x9bd0, 0x3a73, 0x8982, 0x19a5, 0x0, 0x1);
        gbc.writeMem(0x8845, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8fd6);
        EXPECT(gbc.pc(), 0x8846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8845), 0x84);
        // 84 0262
        gbc.setState(0x6943, 0x806c, 0x8170, 0x4f75, 0xd86b, 0xab34, 0x1, 0x1);
        gbc.writeMem(0x6943, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x806c);
        EXPECT(gbc.pc(), 0x6944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0263
        gbc.setState(0xc68e, 0x8007, 0x3d10, 0xe74f, 0xfc1c, 0x8142, 0x1, 0x1);
        gbc.writeMem(0xc68e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8007);
        EXPECT(gbc.pc(), 0xc68f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc68e), 0x84);
        // 84 0264
        gbc.setState(0x6657, 0xe914, 0x8f90, 0xbda3, 0x52a7, 0x94a1, 0x0, 0x1);
        gbc.writeMem(0x6657, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe914);
        EXPECT(gbc.pc(), 0x6658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0265
        gbc.setState(0x14f5, 0x5df6, 0xd840, 0xe1e4, 0xffe4, 0xf752, 0x1, 0x0);
        gbc.writeMem(0x14f5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5df6);
        EXPECT(gbc.pc(), 0x14f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0266
        gbc.setState(0x3258, 0x223, 0x3260, 0x52b0, 0x946a, 0xce59, 0x1, 0x1);
        gbc.writeMem(0x3258, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x223);
        EXPECT(gbc.pc(), 0x3259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0268
        gbc.setState(0xc362, 0x54e4, 0xe940, 0x2fa7, 0x96ca, 0x989a, 0x1, 0x0);
        gbc.writeMem(0xc362, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x54e4);
        EXPECT(gbc.pc(), 0xc363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc362), 0x84);
        // 84 0269
        gbc.setState(0xca5, 0xf0c6, 0xa8f0, 0x500e, 0xcfc2, 0x2bb3, 0x1, 0x1);
        gbc.writeMem(0xca5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf0c6);
        EXPECT(gbc.pc(), 0xca6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 026A
        gbc.setState(0x80a1, 0xda3a, 0x4b10, 0xd7e9, 0x1de3, 0x7c0b, 0x0, 0x0);
        gbc.writeMem(0x80a1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xda3a);
        EXPECT(gbc.pc(), 0x80a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a1), 0x84);
        // 84 026B
        gbc.setState(0x6b3c, 0xb307, 0x4330, 0x7748, 0xf1a4, 0x2c5, 0x0, 0x1);
        gbc.writeMem(0x6b3c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb307);
        EXPECT(gbc.pc(), 0x6b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 026C
        gbc.setState(0x12d0, 0xcdff, 0xb5f0, 0xfe6c, 0x96b4, 0x3f0a, 0x0, 0x0);
        gbc.writeMem(0x12d0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcdff);
        EXPECT(gbc.pc(), 0x12d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 026D
        gbc.setState(0xbca1, 0xdf8, 0x40d0, 0xde89, 0x8b16, 0x7506, 0x1, 0x1);
        gbc.writeMem(0xbca1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xdf8);
        EXPECT(gbc.pc(), 0xbca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca1), 0x84);
        // 84 026E
        gbc.setState(0xaa14, 0xf86b, 0x1df0, 0xd6fb, 0x72b5, 0x2fa4, 0x0, 0x0);
        gbc.writeMem(0xaa14, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf86b);
        EXPECT(gbc.pc(), 0xaa15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa14), 0x84);
        // 84 026F
        gbc.setState(0x6990, 0xc621, 0x56c0, 0x3c03, 0x8511, 0x5d02, 0x1, 0x0);
        gbc.writeMem(0x6990, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc621);
        EXPECT(gbc.pc(), 0x6991);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0271
        gbc.setState(0xbc0f, 0x9496, 0x570, 0x364f, 0xd403, 0x39bd, 0x0, 0x1);
        gbc.writeMem(0xbc0f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9496);
        EXPECT(gbc.pc(), 0xbc10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc0f), 0x84);
        // 84 0272
        gbc.setState(0xe841, 0xaaa3, 0xbef0, 0x847f, 0x8fa9, 0xb978, 0x1, 0x0);
        gbc.writeMem(0xe841, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xaaa3);
        EXPECT(gbc.pc(), 0xe842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe841), 0x84);
        // 84 0273
        gbc.setState(0x694e, 0x51fc, 0xaac0, 0x8b16, 0x3c65, 0xce2, 0x0, 0x1);
        gbc.writeMem(0x694e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x51fc);
        EXPECT(gbc.pc(), 0x694f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0274
        gbc.setState(0x75ea, 0x97d7, 0x8130, 0xf76d, 0x4c6a, 0x75e2, 0x0, 0x1);
        gbc.writeMem(0x75ea, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x97d7);
        EXPECT(gbc.pc(), 0x75eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0275
        gbc.setState(0x2770, 0xf62e, 0x86e0, 0xc934, 0xaec7, 0x2b08, 0x0, 0x0);
        gbc.writeMem(0x2770, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf62e);
        EXPECT(gbc.pc(), 0x2771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0276
        gbc.setState(0x22d6, 0xc77d, 0xce80, 0xc0e8, 0x90cf, 0x9d78, 0x1, 0x0);
        gbc.writeMem(0x22d6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc77d);
        EXPECT(gbc.pc(), 0x22d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0277
        gbc.setState(0x90d8, 0xd448, 0xf190, 0x536b, 0xff20, 0x597f, 0x1, 0x1);
        gbc.writeMem(0x90d8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd448);
        EXPECT(gbc.pc(), 0x90d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d8), 0x84);
        // 84 0278
        gbc.setState(0xcf66, 0x4a34, 0xd5f0, 0x633b, 0xa036, 0xb33c, 0x1, 0x1);
        gbc.writeMem(0xcf66, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4a34);
        EXPECT(gbc.pc(), 0xcf67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf66), 0x84);
        // 84 0279
        gbc.setState(0xedb4, 0xee0d, 0xdc40, 0xe2a5, 0x1ac9, 0xd886, 0x1, 0x1);
        gbc.writeMem(0xedb4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xee0d);
        EXPECT(gbc.pc(), 0xedb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb4), 0x84);
        // 84 027A
        gbc.setState(0xb070, 0x341e, 0x6e50, 0x401f, 0xe4c6, 0xe656, 0x0, 0x1);
        gbc.writeMem(0xb070, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x341e);
        EXPECT(gbc.pc(), 0xb071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb070), 0x84);
        // 84 027B
        gbc.setState(0x805f, 0xa796, 0x1290, 0x4a5a, 0xc6e2, 0xdd78, 0x0, 0x1);
        gbc.writeMem(0x805f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa796);
        EXPECT(gbc.pc(), 0x8060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x805f), 0x84);
        // 84 027C
        gbc.setState(0xa4bb, 0xae38, 0x5a40, 0x1ffe, 0x7098, 0x55f0, 0x0, 0x0);
        gbc.writeMem(0xa4bb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xae38);
        EXPECT(gbc.pc(), 0xa4bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4bb), 0x84);
        // 84 027D
        gbc.setState(0xdd44, 0x23c1, 0x4730, 0x1663, 0xdfcd, 0xe9ce, 0x0, 0x0);
        gbc.writeMem(0xdd44, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x23c1);
        EXPECT(gbc.pc(), 0xdd45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd44), 0x84);
        // 84 027E
        gbc.setState(0xc52a, 0xb260, 0x4470, 0x8ca0, 0x8319, 0xf71a, 0x1, 0x1);
        gbc.writeMem(0xc52a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb260);
        EXPECT(gbc.pc(), 0xc52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc52a), 0x84);
        // 84 027F
        gbc.setState(0x837f, 0x9e5, 0x3a80, 0x518f, 0x2c8b, 0x9ebb, 0x1, 0x0);
        gbc.writeMem(0x837f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9e5);
        EXPECT(gbc.pc(), 0x8380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x837f), 0x84);
        // 84 0280
        gbc.setState(0xc111, 0x2cec, 0x6570, 0xe2c6, 0xa88c, 0xa2b4, 0x1, 0x1);
        gbc.writeMem(0xc111, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2cec);
        EXPECT(gbc.pc(), 0xc112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc111), 0x84);
        // 84 0281
        gbc.setState(0x53d4, 0xd400, 0xf320, 0x5aa4, 0x44f6, 0x13fa, 0x0, 0x0);
        gbc.writeMem(0x53d4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd400);
        EXPECT(gbc.pc(), 0x53d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0282
        gbc.setState(0x25c8, 0x63c3, 0x7a30, 0x5e6, 0x2056, 0x7dcf, 0x1, 0x0);
        gbc.writeMem(0x25c8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x63c3);
        EXPECT(gbc.pc(), 0x25c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0283
        gbc.setState(0xa21c, 0x20c3, 0x8580, 0x1216, 0xb7f0, 0x423b, 0x1, 0x0);
        gbc.writeMem(0xa21c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x20c3);
        EXPECT(gbc.pc(), 0xa21d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa21c), 0x84);
        // 84 0284
        gbc.setState(0x8836, 0x2233, 0x60d0, 0x22ff, 0x1257, 0x63c2, 0x0, 0x1);
        gbc.writeMem(0x8836, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2233);
        EXPECT(gbc.pc(), 0x8837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8836), 0x84);
        // 84 0285
        gbc.setState(0x6efd, 0x31bb, 0x1360, 0x4078, 0xf35d, 0xeb76, 0x1, 0x0);
        gbc.writeMem(0x6efd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x31bb);
        EXPECT(gbc.pc(), 0x6efe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0286
        gbc.setState(0xe8cc, 0xcddd, 0x7660, 0xbdcf, 0x4ee2, 0xf61c, 0x1, 0x0);
        gbc.writeMem(0xe8cc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xcddd);
        EXPECT(gbc.pc(), 0xe8cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8cc), 0x84);
        // 84 0287
        gbc.setState(0xb66f, 0x526f, 0x4770, 0x8464, 0x4db3, 0x41fe, 0x1, 0x0);
        gbc.writeMem(0xb66f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x526f);
        EXPECT(gbc.pc(), 0xb670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb66f), 0x84);
        // 84 028A
        gbc.setState(0x5b0e, 0x7010, 0xe040, 0x9881, 0xf416, 0x4146, 0x1, 0x1);
        gbc.writeMem(0x5b0e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7010);
        EXPECT(gbc.pc(), 0x5b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 028B
        gbc.setState(0x4d4b, 0x884f, 0x2400, 0x5eb1, 0x5fdf, 0xed87, 0x1, 0x1);
        gbc.writeMem(0x4d4b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x884f);
        EXPECT(gbc.pc(), 0x4d4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 028C
        gbc.setState(0x4502, 0x72ed, 0x25a0, 0x4856, 0xac4, 0xe552, 0x0, 0x0);
        gbc.writeMem(0x4502, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x72ed);
        EXPECT(gbc.pc(), 0x4503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 028D
        gbc.setState(0x3a5, 0xf876, 0xa850, 0x53f2, 0x711d, 0x7916, 0x1, 0x1);
        gbc.writeMem(0x3a5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf876);
        EXPECT(gbc.pc(), 0x3a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 028E
        gbc.setState(0xd759, 0x2eb1, 0xb980, 0xee1b, 0xb493, 0x1930, 0x0, 0x0);
        gbc.writeMem(0xd759, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2eb1);
        EXPECT(gbc.pc(), 0xd75a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd759), 0x84);
        // 84 028F
        gbc.setState(0x9636, 0x3623, 0x97b0, 0xac09, 0xab28, 0xbe60, 0x0, 0x1);
        gbc.writeMem(0x9636, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3623);
        EXPECT(gbc.pc(), 0x9637);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9636), 0x84);
        // 84 0290
        gbc.setState(0x5dda, 0x3fc0, 0x4980, 0x8fb2, 0x6f42, 0xef21, 0x0, 0x1);
        gbc.writeMem(0x5dda, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3fc0);
        EXPECT(gbc.pc(), 0x5ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0291
        gbc.setState(0x70f7, 0xd361, 0x2290, 0x5bf0, 0xfe7, 0xdad3, 0x1, 0x1);
        gbc.writeMem(0x70f7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd361);
        EXPECT(gbc.pc(), 0x70f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0292
        gbc.setState(0x41e8, 0x5d16, 0x45e0, 0xe8df, 0xd90c, 0x2e87, 0x1, 0x0);
        gbc.writeMem(0x41e8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5d16);
        EXPECT(gbc.pc(), 0x41e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0293
        gbc.setState(0x5bf9, 0x77f6, 0x50e0, 0x83c8, 0xdc4d, 0x8fec, 0x1, 0x0);
        gbc.writeMem(0x5bf9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x77f6);
        EXPECT(gbc.pc(), 0x5bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0294
        gbc.setState(0x8933, 0x4a85, 0x9d00, 0x6c77, 0xbe28, 0xf5c5, 0x0, 0x1);
        gbc.writeMem(0x8933, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4a85);
        EXPECT(gbc.pc(), 0x8934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8933), 0x84);
        // 84 0295
        gbc.setState(0x35dc, 0x6061, 0x3a50, 0x48c5, 0x6290, 0xf245, 0x0, 0x0);
        gbc.writeMem(0x35dc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6061);
        EXPECT(gbc.pc(), 0x35dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0296
        gbc.setState(0x7c4b, 0xc20a, 0x4310, 0x87b4, 0xf9d1, 0x4c9f, 0x1, 0x0);
        gbc.writeMem(0x7c4b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc20a);
        EXPECT(gbc.pc(), 0x7c4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0297
        gbc.setState(0x126a, 0xb736, 0xbe10, 0xa850, 0x72df, 0x9a7f, 0x0, 0x0);
        gbc.writeMem(0x126a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb736);
        EXPECT(gbc.pc(), 0x126b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0298
        gbc.setState(0x1185, 0x3559, 0x1bb0, 0xba7f, 0x4a54, 0xdaef, 0x0, 0x0);
        gbc.writeMem(0x1185, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3559);
        EXPECT(gbc.pc(), 0x1186);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 029A
        gbc.setState(0xaca3, 0x474e, 0x16f0, 0xe3c8, 0x2c4d, 0xb8e9, 0x0, 0x1);
        gbc.writeMem(0xaca3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x474e);
        EXPECT(gbc.pc(), 0xaca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca3), 0x84);
        // 84 029C
        gbc.setState(0x44b3, 0x9d03, 0x46a0, 0x317f, 0xa8dd, 0x14f6, 0x0, 0x1);
        gbc.writeMem(0x44b3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9d03);
        EXPECT(gbc.pc(), 0x44b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 029D
        gbc.setState(0xdb9c, 0xe97f, 0x1020, 0xb465, 0xde1a, 0xe57a, 0x1, 0x0);
        gbc.writeMem(0xdb9c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe97f);
        EXPECT(gbc.pc(), 0xdb9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb9c), 0x84);
        // 84 029E
        gbc.setState(0x21b1, 0x3f97, 0x1620, 0x8a3, 0x953c, 0x4ea2, 0x0, 0x1);
        gbc.writeMem(0x21b1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x3f97);
        EXPECT(gbc.pc(), 0x21b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 029F
        gbc.setState(0x2216, 0xdd3a, 0x5730, 0x8edb, 0x8459, 0x6022, 0x1, 0x0);
        gbc.writeMem(0x2216, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdd3a);
        EXPECT(gbc.pc(), 0x2217);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02A0
        gbc.setState(0x10e9, 0x4d4f, 0x5230, 0xda5, 0xcbe1, 0xae20, 0x0, 0x1);
        gbc.writeMem(0x10e9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4d4f);
        EXPECT(gbc.pc(), 0x10ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02A1
        gbc.setState(0x7136, 0x302c, 0x5ff0, 0x4ec9, 0x12a8, 0x2306, 0x0, 0x1);
        gbc.writeMem(0x7136, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x302c);
        EXPECT(gbc.pc(), 0x7137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02A2
        gbc.setState(0x3996, 0xd67b, 0x75d0, 0xc587, 0xdef2, 0x9311, 0x1, 0x1);
        gbc.writeMem(0x3996, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd67b);
        EXPECT(gbc.pc(), 0x3997);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02A3
        gbc.setState(0xd5e3, 0x81e, 0x67a0, 0x2b44, 0x81b7, 0xf40a, 0x0, 0x0);
        gbc.writeMem(0xd5e3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x81e);
        EXPECT(gbc.pc(), 0xd5e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e3), 0x84);
        // 84 02A4
        gbc.setState(0x38e0, 0x8c5f, 0xbf0, 0x6bfb, 0x522b, 0x5, 0x0, 0x0);
        gbc.writeMem(0x38e0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8c5f);
        EXPECT(gbc.pc(), 0x38e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02A6
        gbc.setState(0x9571, 0x65e2, 0x3df0, 0xd184, 0x1f2f, 0x3f0d, 0x1, 0x1);
        gbc.writeMem(0x9571, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x65e2);
        EXPECT(gbc.pc(), 0x9572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9571), 0x84);
        // 84 02A7
        gbc.setState(0x1074, 0xa7a, 0x9ef0, 0x9590, 0x2db8, 0x7172, 0x1, 0x1);
        gbc.writeMem(0x1074, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa7a);
        EXPECT(gbc.pc(), 0x1075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02A8
        gbc.setState(0x9bfd, 0x15c3, 0x4cf0, 0xaa03, 0xa6a9, 0xf33b, 0x1, 0x1);
        gbc.writeMem(0x9bfd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x15c3);
        EXPECT(gbc.pc(), 0x9bfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bfd), 0x84);
        // 84 02A9
        gbc.setState(0x6ec9, 0x44ea, 0x3730, 0x1d4f, 0x797a, 0x2ab6, 0x0, 0x1);
        gbc.writeMem(0x6ec9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x44ea);
        EXPECT(gbc.pc(), 0x6eca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02AA
        gbc.setState(0xad66, 0xd715, 0xd8c0, 0xd103, 0x8926, 0x299a, 0x0, 0x0);
        gbc.writeMem(0xad66, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd715);
        EXPECT(gbc.pc(), 0xad67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad66), 0x84);
        // 84 02AB
        gbc.setState(0x449d, 0x9345, 0xc5e0, 0x777b, 0xebad, 0x8841, 0x0, 0x1);
        gbc.writeMem(0x449d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9345);
        EXPECT(gbc.pc(), 0x449e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02AC
        gbc.setState(0x390b, 0xfee0, 0x5e00, 0x5c07, 0x9a4b, 0x87b8, 0x1, 0x1);
        gbc.writeMem(0x390b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xfee0);
        EXPECT(gbc.pc(), 0x390c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02AD
        gbc.setState(0x654d, 0x85b9, 0x1820, 0x38af, 0x2dd3, 0x7405, 0x0, 0x0);
        gbc.writeMem(0x654d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x85b9);
        EXPECT(gbc.pc(), 0x654e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02AE
        gbc.setState(0xc6ed, 0x9624, 0xb100, 0x2b68, 0x7db4, 0xa483, 0x1, 0x0);
        gbc.writeMem(0xc6ed, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9624);
        EXPECT(gbc.pc(), 0xc6ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ed), 0x84);
        // 84 02AF
        gbc.setState(0xb20e, 0x24c7, 0x39f0, 0xbf81, 0xdfd6, 0xb93d, 0x0, 0x0);
        gbc.writeMem(0xb20e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x24c7);
        EXPECT(gbc.pc(), 0xb20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb20e), 0x84);
        // 84 02B0
        gbc.setState(0x5153, 0xddd8, 0xf5f0, 0xeb7d, 0x8ac0, 0x1253, 0x1, 0x0);
        gbc.writeMem(0x5153, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xddd8);
        EXPECT(gbc.pc(), 0x5154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02B1
        gbc.setState(0x3875, 0xbbe9, 0x1dc0, 0x783, 0xbdd5, 0x731e, 0x1, 0x1);
        gbc.writeMem(0x3875, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xbbe9);
        EXPECT(gbc.pc(), 0x3876);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02B2
        gbc.setState(0x5250, 0x9060, 0x58a0, 0xad08, 0x8e6, 0xa422, 0x1, 0x1);
        gbc.writeMem(0x5250, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9060);
        EXPECT(gbc.pc(), 0x5251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02B3
        gbc.setState(0x4149, 0x3971, 0xac30, 0xb944, 0xedd6, 0xf5dd, 0x0, 0x1);
        gbc.writeMem(0x4149, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3971);
        EXPECT(gbc.pc(), 0x414a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02B4
        gbc.setState(0xc474, 0x4c9d, 0x1710, 0x3c5f, 0x2601, 0x5f59, 0x1, 0x1);
        gbc.writeMem(0xc474, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4c9d);
        EXPECT(gbc.pc(), 0xc475);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc474), 0x84);
        // 84 02B5
        gbc.setState(0x65b6, 0x838d, 0xc8f0, 0xc47, 0xed67, 0x795f, 0x0, 0x1);
        gbc.writeMem(0x65b6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x838d);
        EXPECT(gbc.pc(), 0x65b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02B6
        gbc.setState(0x664a, 0x6c38, 0x2e90, 0x9280, 0x9f48, 0x6167, 0x1, 0x1);
        gbc.writeMem(0x664a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6c38);
        EXPECT(gbc.pc(), 0x664b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02B8
        gbc.setState(0xd2e5, 0x128b, 0x2d10, 0x3e25, 0xaafa, 0x881f, 0x1, 0x0);
        gbc.writeMem(0xd2e5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x128b);
        EXPECT(gbc.pc(), 0xd2e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e5), 0x84);
        // 84 02B9
        gbc.setState(0x7cdc, 0x2c7c, 0xf4d0, 0x356c, 0xb642, 0x3d41, 0x1, 0x0);
        gbc.writeMem(0x7cdc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2c7c);
        EXPECT(gbc.pc(), 0x7cdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02BA
        gbc.setState(0x25b0, 0x4600, 0x4f90, 0xcb92, 0x6f2f, 0xa87b, 0x1, 0x0);
        gbc.writeMem(0x25b0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4600);
        EXPECT(gbc.pc(), 0x25b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02BB
        gbc.setState(0x1d4, 0x94a6, 0x6e80, 0x9919, 0x1c20, 0x270b, 0x0, 0x0);
        gbc.writeMem(0x1d4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x94a6);
        EXPECT(gbc.pc(), 0x1d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02BC
        gbc.setState(0x939c, 0xe693, 0x8310, 0xbbea, 0xdd61, 0x2288, 0x1, 0x1);
        gbc.writeMem(0x939c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe693);
        EXPECT(gbc.pc(), 0x939d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x939c), 0x84);
        // 84 02BD
        gbc.setState(0xba01, 0x53c4, 0x73d0, 0x8f3c, 0x579a, 0xe959, 0x0, 0x0);
        gbc.writeMem(0xba01, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x53c4);
        EXPECT(gbc.pc(), 0xba02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba01), 0x84);
        // 84 02BE
        gbc.setState(0x5646, 0x6180, 0x360, 0x447a, 0xf65e, 0xbdc8, 0x1, 0x1);
        gbc.writeMem(0x5646, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6180);
        EXPECT(gbc.pc(), 0x5647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02BF
        gbc.setState(0x2d9c, 0x9bc3, 0xd570, 0xbbfd, 0xefcd, 0x675a, 0x1, 0x1);
        gbc.writeMem(0x2d9c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9bc3);
        EXPECT(gbc.pc(), 0x2d9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02C0
        gbc.setState(0x9b44, 0x8ffa, 0x3b50, 0x6f5e, 0x5d1b, 0x89db, 0x1, 0x1);
        gbc.writeMem(0x9b44, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8ffa);
        EXPECT(gbc.pc(), 0x9b45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b44), 0x84);
        // 84 02C1
        gbc.setState(0x17ca, 0x4cb8, 0x8740, 0x6755, 0xda04, 0x3b90, 0x1, 0x1);
        gbc.writeMem(0x17ca, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4cb8);
        EXPECT(gbc.pc(), 0x17cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02C2
        gbc.setState(0x34d0, 0xc264, 0x21b0, 0x97a5, 0xb8de, 0x6624, 0x0, 0x1);
        gbc.writeMem(0x34d0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc264);
        EXPECT(gbc.pc(), 0x34d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02C3
        gbc.setState(0x67f6, 0x7395, 0x54c0, 0x8e3e, 0x9a87, 0xd67c, 0x0, 0x1);
        gbc.writeMem(0x67f6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7395);
        EXPECT(gbc.pc(), 0x67f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02C4
        gbc.setState(0xda38, 0x1aad, 0xaab0, 0xa1b9, 0x2e38, 0x9e06, 0x1, 0x0);
        gbc.writeMem(0xda38, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1aad);
        EXPECT(gbc.pc(), 0xda39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda38), 0x84);
        // 84 02C5
        gbc.setState(0xc31d, 0x9013, 0xe100, 0x9229, 0x4ef9, 0xc54, 0x0, 0x1);
        gbc.writeMem(0xc31d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9013);
        EXPECT(gbc.pc(), 0xc31e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31d), 0x84);
        // 84 02C6
        gbc.setState(0x4499, 0x4319, 0xc990, 0x576f, 0xfb6f, 0x8c17, 0x0, 0x1);
        gbc.writeMem(0x4499, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4319);
        EXPECT(gbc.pc(), 0x449a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02C7
        gbc.setState(0x99f8, 0x93a9, 0x7f50, 0xef7b, 0xb8ba, 0xb6aa, 0x0, 0x1);
        gbc.writeMem(0x99f8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x93a9);
        EXPECT(gbc.pc(), 0x99f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99f8), 0x84);
        // 84 02C8
        gbc.setState(0xcc87, 0x7394, 0x8990, 0x584f, 0xfe83, 0x1d26, 0x0, 0x1);
        gbc.writeMem(0xcc87, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7394);
        EXPECT(gbc.pc(), 0xcc88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc87), 0x84);
        // 84 02C9
        gbc.setState(0xe234, 0x7a0b, 0xc850, 0x789e, 0x122d, 0xbf09, 0x1, 0x0);
        gbc.writeMem(0xe234, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7a0b);
        EXPECT(gbc.pc(), 0xe235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe234), 0x84);
        // 84 02CA
        gbc.setState(0x870e, 0x15b4, 0xdea0, 0x32a1, 0xff34, 0x2327, 0x0, 0x0);
        gbc.writeMem(0x870e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x15b4);
        EXPECT(gbc.pc(), 0x870f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x870e), 0x84);
        // 84 02CB
        gbc.setState(0x1e63, 0x3b87, 0xb2d0, 0xfd3, 0x7aa1, 0x387, 0x1, 0x0);
        gbc.writeMem(0x1e63, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3b87);
        EXPECT(gbc.pc(), 0x1e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02CD
        gbc.setState(0x58f5, 0x53ed, 0x6b40, 0x9af5, 0x67a8, 0x116b, 0x0, 0x0);
        gbc.writeMem(0x58f5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x53ed);
        EXPECT(gbc.pc(), 0x58f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02CE
        gbc.setState(0x887c, 0xe6be, 0x830, 0x383b, 0x700b, 0xe35, 0x1, 0x0);
        gbc.writeMem(0x887c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe6be);
        EXPECT(gbc.pc(), 0x887d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x887c), 0x84);
        // 84 02CF
        gbc.setState(0x695f, 0x9957, 0x54c0, 0xc209, 0x57f7, 0x450f, 0x1, 0x0);
        gbc.writeMem(0x695f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9957);
        EXPECT(gbc.pc(), 0x6960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02D0
        gbc.setState(0xcd21, 0x7192, 0xda30, 0x6c24, 0x4810, 0x7803, 0x0, 0x1);
        gbc.writeMem(0xcd21, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7192);
        EXPECT(gbc.pc(), 0xcd22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd21), 0x84);
        // 84 02D1
        gbc.setState(0xcb3, 0xa152, 0xa860, 0xe0ea, 0xb9df, 0x415c, 0x0, 0x1);
        gbc.writeMem(0xcb3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xa152);
        EXPECT(gbc.pc(), 0xcb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02D2
        gbc.setState(0x5fcc, 0x3c9e, 0xc90, 0xc43c, 0x7a15, 0x706a, 0x0, 0x1);
        gbc.writeMem(0x5fcc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3c9e);
        EXPECT(gbc.pc(), 0x5fcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02D4
        gbc.setState(0xc59e, 0xf506, 0xd6e0, 0x7f45, 0x8995, 0x6f8, 0x1, 0x0);
        gbc.writeMem(0xc59e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf506);
        EXPECT(gbc.pc(), 0xc59f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc59e), 0x84);
        // 84 02D5
        gbc.setState(0x5d1, 0xb367, 0xc8e0, 0x15b8, 0x337c, 0x3a76, 0x1, 0x0);
        gbc.writeMem(0x5d1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb367);
        EXPECT(gbc.pc(), 0x5d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02D6
        gbc.setState(0x533b, 0x1746, 0xa770, 0x2e2e, 0x9846, 0x4951, 0x0, 0x0);
        gbc.writeMem(0x533b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1746);
        EXPECT(gbc.pc(), 0x533c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02D7
        gbc.setState(0x41fa, 0x3887, 0x3350, 0x3c7d, 0xf3f5, 0x5a7f, 0x1, 0x1);
        gbc.writeMem(0x41fa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3887);
        EXPECT(gbc.pc(), 0x41fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02D8
        gbc.setState(0xbd16, 0x3b51, 0xfb20, 0x6ed8, 0x80c0, 0xa3bf, 0x1, 0x0);
        gbc.writeMem(0xbd16, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3b51);
        EXPECT(gbc.pc(), 0xbd17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd16), 0x84);
        // 84 02D9
        gbc.setState(0xa5ad, 0x149, 0x4030, 0xf30, 0x799b, 0xa2d3, 0x1, 0x0);
        gbc.writeMem(0xa5ad, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x149);
        EXPECT(gbc.pc(), 0xa5ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ad), 0x84);
        // 84 02DA
        gbc.setState(0x8730, 0xbd6f, 0xbb50, 0xb07a, 0xedba, 0x6f46, 0x1, 0x1);
        gbc.writeMem(0x8730, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbd6f);
        EXPECT(gbc.pc(), 0x8731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8730), 0x84);
        // 84 02DB
        gbc.setState(0x6cc, 0xa20c, 0x60d0, 0x2c13, 0x8e68, 0x2394, 0x1, 0x0);
        gbc.writeMem(0x6cc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa20c);
        EXPECT(gbc.pc(), 0x6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02DC
        gbc.setState(0x4506, 0x396b, 0x4a00, 0x3ff8, 0xd0f4, 0x5113, 0x0, 0x0);
        gbc.writeMem(0x4506, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x396b);
        EXPECT(gbc.pc(), 0x4507);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02DD
        gbc.setState(0x81dc, 0x55c1, 0x6dd0, 0x7740, 0xabb8, 0x9b3a, 0x1, 0x1);
        gbc.writeMem(0x81dc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x55c1);
        EXPECT(gbc.pc(), 0x81dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81dc), 0x84);
        // 84 02DE
        gbc.setState(0x30f0, 0x954, 0xcc60, 0x7f4b, 0xdae7, 0xcfeb, 0x1, 0x0);
        gbc.writeMem(0x30f0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x954);
        EXPECT(gbc.pc(), 0x30f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02DF
        gbc.setState(0x28e2, 0xf05d, 0xbac0, 0xab5c, 0x6f65, 0x6d2a, 0x1, 0x1);
        gbc.writeMem(0x28e2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf05d);
        EXPECT(gbc.pc(), 0x28e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02E0
        gbc.setState(0x163, 0xa7b1, 0xf670, 0x9056, 0x50ef, 0xec24, 0x0, 0x0);
        gbc.writeMem(0x163, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa7b1);
        EXPECT(gbc.pc(), 0x164);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02E1
        gbc.setState(0xc1b, 0xbbca, 0xd10, 0x1046, 0xec3e, 0xe4eb, 0x1, 0x1);
        gbc.writeMem(0xc1b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbbca);
        EXPECT(gbc.pc(), 0xc1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 02E2
        gbc.setState(0x3f7e, 0x748a, 0xdc50, 0x10f2, 0xda34, 0xc9e3, 0x0, 0x1);
        gbc.writeMem(0x3f7e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x748a);
        EXPECT(gbc.pc(), 0x3f7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02E3
        gbc.setState(0x7353, 0x1235, 0x6530, 0x3199, 0xcc23, 0xaa9d, 0x0, 0x1);
        gbc.writeMem(0x7353, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1235);
        EXPECT(gbc.pc(), 0x7354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02E4
        gbc.setState(0x77b9, 0x9a6, 0xf9f0, 0xf729, 0x2f96, 0xe568, 0x1, 0x1);
        gbc.writeMem(0x77b9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9a6);
        EXPECT(gbc.pc(), 0x77ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02E5
        gbc.setState(0xe7f0, 0x52e6, 0x9440, 0xd7d2, 0xd9d2, 0x68fe, 0x1, 0x0);
        gbc.writeMem(0xe7f0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x52e6);
        EXPECT(gbc.pc(), 0xe7f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f0), 0x84);
        // 84 02E6
        gbc.setState(0x34fa, 0xc8a, 0xe070, 0x77aa, 0x459f, 0xb562, 0x1, 0x1);
        gbc.writeMem(0x34fa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc8a);
        EXPECT(gbc.pc(), 0x34fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02E7
        gbc.setState(0xb4e4, 0xbc94, 0x3e10, 0x49d9, 0xb4d2, 0xb96c, 0x0, 0x0);
        gbc.writeMem(0xb4e4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbc94);
        EXPECT(gbc.pc(), 0xb4e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e4), 0x84);
        // 84 02E8
        gbc.setState(0x76a8, 0x70e5, 0x5810, 0xcee8, 0x2eaa, 0xd415, 0x0, 0x0);
        gbc.writeMem(0x76a8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x70e5);
        EXPECT(gbc.pc(), 0x76a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02E9
        gbc.setState(0x60cf, 0xc716, 0xb200, 0x2b0e, 0xf93b, 0xf404, 0x1, 0x0);
        gbc.writeMem(0x60cf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc716);
        EXPECT(gbc.pc(), 0x60d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02EA
        gbc.setState(0xb98c, 0x4775, 0xf9f0, 0x6586, 0x9125, 0x534d, 0x0, 0x0);
        gbc.writeMem(0xb98c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4775);
        EXPECT(gbc.pc(), 0xb98d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb98c), 0x84);
        // 84 02EB
        gbc.setState(0xb1a1, 0xecd, 0xad50, 0x4236, 0xb0e9, 0x2c67, 0x0, 0x1);
        gbc.writeMem(0xb1a1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xecd);
        EXPECT(gbc.pc(), 0xb1a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a1), 0x84);
        // 84 02EC
        gbc.setState(0xa1a6, 0xe45d, 0xab70, 0x90b1, 0x3cb1, 0x7504, 0x1, 0x0);
        gbc.writeMem(0xa1a6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe45d);
        EXPECT(gbc.pc(), 0xa1a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1a6), 0x84);
        // 84 02ED
        gbc.setState(0x8c53, 0x7175, 0xd020, 0xe726, 0x21ec, 0x1d8e, 0x1, 0x1);
        gbc.writeMem(0x8c53, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7175);
        EXPECT(gbc.pc(), 0x8c54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c53), 0x84);
        // 84 02EE
        gbc.setState(0xef28, 0x9eef, 0x2310, 0xb53, 0x13f9, 0xe8f7, 0x1, 0x0);
        gbc.writeMem(0xef28, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9eef);
        EXPECT(gbc.pc(), 0xef29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef28), 0x84);
        // 84 02EF
        gbc.setState(0xb655, 0x58a8, 0xe400, 0x1f78, 0xf0e5, 0xac16, 0x0, 0x0);
        gbc.writeMem(0xb655, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x58a8);
        EXPECT(gbc.pc(), 0xb656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb655), 0x84);
        // 84 02F0
        gbc.setState(0xe05a, 0xe8dc, 0xd900, 0x8a28, 0x7bb3, 0xe5c0, 0x1, 0x1);
        gbc.writeMem(0xe05a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe8dc);
        EXPECT(gbc.pc(), 0xe05b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe05a), 0x84);
        // 84 02F1
        gbc.setState(0x3bac, 0x7032, 0xea10, 0xf720, 0xe440, 0xb4fd, 0x0, 0x0);
        gbc.writeMem(0x3bac, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7032);
        EXPECT(gbc.pc(), 0x3bad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02F2
        gbc.setState(0xbf83, 0xd222, 0x95c0, 0x63c4, 0xdc41, 0x68a4, 0x0, 0x1);
        gbc.writeMem(0xbf83, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd222);
        EXPECT(gbc.pc(), 0xbf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf83), 0x84);
        // 84 02F3
        gbc.setState(0xe118, 0x97b6, 0x8de0, 0xd94c, 0x8996, 0xb160, 0x1, 0x1);
        gbc.writeMem(0xe118, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x97b6);
        EXPECT(gbc.pc(), 0xe119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe118), 0x84);
        // 84 02F4
        gbc.setState(0xd720, 0xcf64, 0xaa20, 0x6036, 0x8034, 0xaf24, 0x1, 0x0);
        gbc.writeMem(0xd720, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xcf64);
        EXPECT(gbc.pc(), 0xd721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd720), 0x84);
        // 84 02F6
        gbc.setState(0x6cbe, 0x4513, 0xfad0, 0xaa05, 0x2763, 0xf1cf, 0x0, 0x1);
        gbc.writeMem(0x6cbe, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4513);
        EXPECT(gbc.pc(), 0x6cbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 02F7
        gbc.setState(0x8d7d, 0x824, 0x3230, 0xe758, 0x7c2, 0x546e, 0x1, 0x1);
        gbc.writeMem(0x8d7d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x824);
        EXPECT(gbc.pc(), 0x8d7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7d), 0x84);
        // 84 02F8
        gbc.setState(0xe061, 0xee18, 0xf1c0, 0x49fe, 0xdfc0, 0xefdd, 0x0, 0x0);
        gbc.writeMem(0xe061, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xee18);
        EXPECT(gbc.pc(), 0xe062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe061), 0x84);
        // 84 02F9
        gbc.setState(0x8b11, 0x5354, 0x2d90, 0xd675, 0x7c43, 0xe65a, 0x0, 0x1);
        gbc.writeMem(0x8b11, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5354);
        EXPECT(gbc.pc(), 0x8b12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b11), 0x84);
        // 84 02FA
        gbc.setState(0xd522, 0x7d38, 0x16e0, 0xed25, 0x6, 0x6d54, 0x1, 0x0);
        gbc.writeMem(0xd522, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7d38);
        EXPECT(gbc.pc(), 0xd523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd522), 0x84);
        // 84 02FB
        gbc.setState(0x8ce, 0xf69c, 0xdda0, 0xf2b7, 0x7372, 0x43c9, 0x0, 0x0);
        gbc.writeMem(0x8ce, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf69c);
        EXPECT(gbc.pc(), 0x8cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02FD
        gbc.setState(0x27da, 0xf03, 0x8d10, 0x532a, 0x1679, 0x79e7, 0x1, 0x1);
        gbc.writeMem(0x27da, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf03);
        EXPECT(gbc.pc(), 0x27db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 02FE
        gbc.setState(0x2b9a, 0xe46b, 0x6420, 0xa03f, 0x71e, 0x6314, 0x1, 0x0);
        gbc.writeMem(0x2b9a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe46b);
        EXPECT(gbc.pc(), 0x2b9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 02FF
        gbc.setState(0x9b6d, 0xdeaf, 0xa0b0, 0xa2c9, 0x5f90, 0x9f5, 0x1, 0x1);
        gbc.writeMem(0x9b6d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdeaf);
        EXPECT(gbc.pc(), 0x9b6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b6d), 0x84);
        // 84 0300
        gbc.setState(0x1652, 0x76f8, 0x7be0, 0x3f80, 0xf3de, 0x22e6, 0x1, 0x0);
        gbc.writeMem(0x1652, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x76f8);
        EXPECT(gbc.pc(), 0x1653);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0301
        gbc.setState(0x44c6, 0x91a, 0x5ad0, 0xba86, 0xe8dc, 0xb6d3, 0x1, 0x0);
        gbc.writeMem(0x44c6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x91a);
        EXPECT(gbc.pc(), 0x44c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0302
        gbc.setState(0x24f5, 0xb3de, 0xed00, 0xd370, 0x1502, 0x18fe, 0x0, 0x1);
        gbc.writeMem(0x24f5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb3de);
        EXPECT(gbc.pc(), 0x24f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0304
        gbc.setState(0xd34a, 0xc67e, 0x3200, 0x5caf, 0x6ce, 0x639d, 0x0, 0x0);
        gbc.writeMem(0xd34a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc67e);
        EXPECT(gbc.pc(), 0xd34b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd34a), 0x84);
        // 84 0306
        gbc.setState(0x5e27, 0xbd77, 0xbbf0, 0x5fcd, 0x194b, 0x12e0, 0x1, 0x1);
        gbc.writeMem(0x5e27, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xbd77);
        EXPECT(gbc.pc(), 0x5e28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0307
        gbc.setState(0xbffa, 0x1257, 0x7fd0, 0x9fa5, 0xe36f, 0xa3f1, 0x1, 0x1);
        gbc.writeMem(0xbffa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1257);
        EXPECT(gbc.pc(), 0xbffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbffa), 0x84);
        // 84 0308
        gbc.setState(0x6094, 0xb87a, 0x44b0, 0x99d1, 0x4ce3, 0xaec2, 0x0, 0x0);
        gbc.writeMem(0x6094, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb87a);
        EXPECT(gbc.pc(), 0x6095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0309
        gbc.setState(0xb16a, 0x297f, 0xf7f0, 0x8047, 0x83a4, 0x3e81, 0x1, 0x0);
        gbc.writeMem(0xb16a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x297f);
        EXPECT(gbc.pc(), 0xb16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16a), 0x84);
        // 84 030A
        gbc.setState(0x3926, 0xab0d, 0x910, 0xc807, 0x3361, 0xf611, 0x1, 0x1);
        gbc.writeMem(0x3926, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xab0d);
        EXPECT(gbc.pc(), 0x3927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 030B
        gbc.setState(0xa53b, 0x38e9, 0x80e0, 0x8459, 0x954, 0x5900, 0x1, 0x0);
        gbc.writeMem(0xa53b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x38e9);
        EXPECT(gbc.pc(), 0xa53c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa53b), 0x84);
        // 84 030C
        gbc.setState(0x7fc7, 0xdec1, 0x44b0, 0x5cf7, 0x8a0a, 0x3bf1, 0x0, 0x0);
        gbc.writeMem(0x7fc7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdec1);
        EXPECT(gbc.pc(), 0x7fc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 030D
        gbc.setState(0xea39, 0xac43, 0xb100, 0xbfd9, 0x289b, 0x8968, 0x1, 0x0);
        gbc.writeMem(0xea39, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xac43);
        EXPECT(gbc.pc(), 0xea3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea39), 0x84);
        // 84 030E
        gbc.setState(0x19c2, 0x7c, 0x3da0, 0x52ae, 0xc90d, 0x7290, 0x1, 0x1);
        gbc.writeMem(0x19c2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7c);
        EXPECT(gbc.pc(), 0x19c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 030F
        gbc.setState(0xabde, 0x6e52, 0xf050, 0x6501, 0xba3, 0xf5eb, 0x1, 0x0);
        gbc.writeMem(0xabde, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6e52);
        EXPECT(gbc.pc(), 0xabdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabde), 0x84);
        // 84 0310
        gbc.setState(0x59fc, 0xf94d, 0xacd0, 0x7844, 0xb94f, 0xe2c5, 0x1, 0x0);
        gbc.writeMem(0x59fc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf94d);
        EXPECT(gbc.pc(), 0x59fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0311
        gbc.setState(0x3a5e, 0x3731, 0xf220, 0x31c, 0xf4a8, 0x75b8, 0x1, 0x0);
        gbc.writeMem(0x3a5e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3731);
        EXPECT(gbc.pc(), 0x3a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0312
        gbc.setState(0x7579, 0x5de4, 0x8860, 0x883c, 0xe8ac, 0x4861, 0x1, 0x0);
        gbc.writeMem(0x7579, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5de4);
        EXPECT(gbc.pc(), 0x757a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0313
        gbc.setState(0x8322, 0x420e, 0x7020, 0x36db, 0xf1df, 0x10b1, 0x0, 0x1);
        gbc.writeMem(0x8322, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x420e);
        EXPECT(gbc.pc(), 0x8323);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8322), 0x84);
        // 84 0314
        gbc.setState(0xee8b, 0xdae, 0x8be0, 0xfe65, 0xfb8, 0xd41e, 0x1, 0x0);
        gbc.writeMem(0xee8b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xdae);
        EXPECT(gbc.pc(), 0xee8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee8b), 0x84);
        // 84 0315
        gbc.setState(0x9e9a, 0xc2e4, 0x42d0, 0x9469, 0x8964, 0x2e03, 0x1, 0x0);
        gbc.writeMem(0x9e9a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc2e4);
        EXPECT(gbc.pc(), 0x9e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e9a), 0x84);
        // 84 0316
        gbc.setState(0x29c, 0x10aa, 0x6590, 0xe831, 0xec17, 0x3903, 0x1, 0x0);
        gbc.writeMem(0x29c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x10aa);
        EXPECT(gbc.pc(), 0x29d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0317
        gbc.setState(0x7742, 0xa4a9, 0xe900, 0x5a1b, 0x8289, 0xb324, 0x0, 0x1);
        gbc.writeMem(0x7742, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa4a9);
        EXPECT(gbc.pc(), 0x7743);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0319
        gbc.setState(0x4ccb, 0x83ae, 0x29f0, 0x7969, 0x19e1, 0x7662, 0x0, 0x0);
        gbc.writeMem(0x4ccb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x83ae);
        EXPECT(gbc.pc(), 0x4ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 031A
        gbc.setState(0x99a8, 0xbfca, 0xf040, 0x26b8, 0x719c, 0xb5a9, 0x0, 0x1);
        gbc.writeMem(0x99a8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbfca);
        EXPECT(gbc.pc(), 0x99a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a8), 0x84);
        // 84 031B
        gbc.setState(0x62b9, 0x3cee, 0x8ae0, 0xb366, 0xdec, 0x1371, 0x1, 0x0);
        gbc.writeMem(0x62b9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3cee);
        EXPECT(gbc.pc(), 0x62ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 031C
        gbc.setState(0x54b7, 0x2773, 0x28c0, 0x9533, 0xa37e, 0x3bde, 0x1, 0x1);
        gbc.writeMem(0x54b7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2773);
        EXPECT(gbc.pc(), 0x54b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 031D
        gbc.setState(0x22ac, 0x4f08, 0xc1e0, 0xc49d, 0x695c, 0x7b91, 0x0, 0x0);
        gbc.writeMem(0x22ac, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4f08);
        EXPECT(gbc.pc(), 0x22ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 031E
        gbc.setState(0x3203, 0x9d52, 0xdb0, 0x66d6, 0x8864, 0x461c, 0x1, 0x1);
        gbc.writeMem(0x3203, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9d52);
        EXPECT(gbc.pc(), 0x3204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 031F
        gbc.setState(0x2fb9, 0xcd25, 0x81c0, 0xb6d3, 0xcb1c, 0x652f, 0x0, 0x0);
        gbc.writeMem(0x2fb9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcd25);
        EXPECT(gbc.pc(), 0x2fba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0320
        gbc.setState(0x96ef, 0xdd3a, 0x3050, 0x64a7, 0x5d55, 0xac6a, 0x0, 0x0);
        gbc.writeMem(0x96ef, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xdd3a);
        EXPECT(gbc.pc(), 0x96f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ef), 0x84);
        // 84 0321
        gbc.setState(0xc572, 0xeda9, 0x30a0, 0x77df, 0x6c5e, 0x6fca, 0x0, 0x1);
        gbc.writeMem(0xc572, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xeda9);
        EXPECT(gbc.pc(), 0xc573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc572), 0x84);
        // 84 0322
        gbc.setState(0x9fcf, 0x6076, 0x61f0, 0x196b, 0x92c7, 0x1275, 0x0, 0x1);
        gbc.writeMem(0x9fcf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6076);
        EXPECT(gbc.pc(), 0x9fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fcf), 0x84);
        // 84 0323
        gbc.setState(0x482a, 0xe962, 0x3360, 0x79c5, 0xd4ef, 0x4fd, 0x0, 0x0);
        gbc.writeMem(0x482a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe962);
        EXPECT(gbc.pc(), 0x482b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0325
        gbc.setState(0xb75d, 0x1a1b, 0xa8d0, 0xd24b, 0x77b4, 0x6058, 0x1, 0x1);
        gbc.writeMem(0xb75d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1a1b);
        EXPECT(gbc.pc(), 0xb75e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb75d), 0x84);
        // 84 0326
        gbc.setState(0x8bf, 0x3572, 0x76e0, 0x9fce, 0x482c, 0x4c3f, 0x0, 0x0);
        gbc.writeMem(0x8bf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3572);
        EXPECT(gbc.pc(), 0x8c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0327
        gbc.setState(0xb4c7, 0x43d1, 0xc3e0, 0xc68e, 0x890b, 0xdd5a, 0x0, 0x1);
        gbc.writeMem(0xb4c7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x43d1);
        EXPECT(gbc.pc(), 0xb4c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4c7), 0x84);
        // 84 0328
        gbc.setState(0x8dd3, 0x67b, 0x6b10, 0x3ad6, 0x9f29, 0x7b28, 0x1, 0x1);
        gbc.writeMem(0x8dd3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x67b);
        EXPECT(gbc.pc(), 0x8dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd3), 0x84);
        // 84 0329
        gbc.setState(0xdf3d, 0x41f5, 0xde0, 0xc59, 0xbbd4, 0xdfca, 0x0, 0x0);
        gbc.writeMem(0xdf3d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x41f5);
        EXPECT(gbc.pc(), 0xdf3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf3d), 0x84);
        // 84 032A
        gbc.setState(0x4b31, 0xc2f, 0x4ad0, 0xcaf5, 0xf288, 0x731c, 0x0, 0x0);
        gbc.writeMem(0x4b31, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc2f);
        EXPECT(gbc.pc(), 0x4b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 032B
        gbc.setState(0x8988, 0xf682, 0xc700, 0x8f72, 0xddcd, 0xad3e, 0x0, 0x0);
        gbc.writeMem(0x8988, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf682);
        EXPECT(gbc.pc(), 0x8989);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8988), 0x84);
        // 84 032C
        gbc.setState(0xc026, 0x1acc, 0xe0b0, 0xb433, 0x7d13, 0xbaf2, 0x1, 0x0);
        gbc.writeMem(0xc026, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1acc);
        EXPECT(gbc.pc(), 0xc027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc026), 0x84);
        // 84 032D
        gbc.setState(0xbcea, 0x6a29, 0x7290, 0x995e, 0x4fd7, 0xe353, 0x0, 0x0);
        gbc.writeMem(0xbcea, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6a29);
        EXPECT(gbc.pc(), 0xbceb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcea), 0x84);
        // 84 032E
        gbc.setState(0x275f, 0x3128, 0x9d20, 0x12f3, 0xf4c, 0x3dda, 0x1, 0x1);
        gbc.writeMem(0x275f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3128);
        EXPECT(gbc.pc(), 0x2760);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0330
        gbc.setState(0x43af, 0x109a, 0x5a70, 0x6c75, 0xcbff, 0xa272, 0x1, 0x1);
        gbc.writeMem(0x43af, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x109a);
        EXPECT(gbc.pc(), 0x43b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0331
        gbc.setState(0xfe0, 0x691c, 0x4500, 0x4441, 0x7545, 0xa0ee, 0x0, 0x1);
        gbc.writeMem(0xfe0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x691c);
        EXPECT(gbc.pc(), 0xfe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0332
        gbc.setState(0x89a1, 0x5a92, 0x85b0, 0x55bd, 0xc98f, 0x638d, 0x0, 0x1);
        gbc.writeMem(0x89a1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5a92);
        EXPECT(gbc.pc(), 0x89a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89a1), 0x84);
        // 84 0333
        gbc.setState(0xe31d, 0x1e3d, 0xede0, 0x8825, 0xa4a, 0xbdba, 0x1, 0x1);
        gbc.writeMem(0xe31d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1e3d);
        EXPECT(gbc.pc(), 0xe31e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe31d), 0x84);
        // 84 0334
        gbc.setState(0x8191, 0x1489, 0x9500, 0x51e8, 0x1bdb, 0xd416, 0x1, 0x0);
        gbc.writeMem(0x8191, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1489);
        EXPECT(gbc.pc(), 0x8192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8191), 0x84);
        // 84 0336
        gbc.setState(0x2548, 0xae54, 0xdff0, 0xbfd, 0x4d9, 0x3ca6, 0x1, 0x1);
        gbc.writeMem(0x2548, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xae54);
        EXPECT(gbc.pc(), 0x2549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0337
        gbc.setState(0x2c91, 0x4468, 0x58c0, 0xd04c, 0x8bc2, 0x2dca, 0x0, 0x1);
        gbc.writeMem(0x2c91, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4468);
        EXPECT(gbc.pc(), 0x2c92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0338
        gbc.setState(0x9f72, 0x2383, 0x5400, 0x544, 0x91be, 0x804f, 0x0, 0x1);
        gbc.writeMem(0x9f72, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2383);
        EXPECT(gbc.pc(), 0x9f73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f72), 0x84);
        // 84 0339
        gbc.setState(0x641d, 0x17dd, 0xf1e0, 0x83f3, 0x7329, 0xe625, 0x0, 0x0);
        gbc.writeMem(0x641d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x17dd);
        EXPECT(gbc.pc(), 0x641e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 033A
        gbc.setState(0x12ee, 0x6b68, 0x9fe0, 0x26b6, 0x615c, 0xdf05, 0x1, 0x1);
        gbc.writeMem(0x12ee, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6b68);
        EXPECT(gbc.pc(), 0x12ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 033B
        gbc.setState(0xd07f, 0xd4ce, 0xf6a0, 0x641c, 0x7a24, 0x3818, 0x0, 0x1);
        gbc.writeMem(0xd07f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd4ce);
        EXPECT(gbc.pc(), 0xd080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd07f), 0x84);
        // 84 033C
        gbc.setState(0xdd4b, 0x54c9, 0xc910, 0x5b25, 0xd6a, 0xa1c0, 0x1, 0x1);
        gbc.writeMem(0xdd4b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x54c9);
        EXPECT(gbc.pc(), 0xdd4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd4b), 0x84);
        // 84 033D
        gbc.setState(0xd4b7, 0x25ea, 0xb210, 0x35e2, 0x95a7, 0x8714, 0x1, 0x1);
        gbc.writeMem(0xd4b7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x25ea);
        EXPECT(gbc.pc(), 0xd4b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4b7), 0x84);
        // 84 033E
        gbc.setState(0x24db, 0x1d32, 0xd860, 0x947e, 0x4881, 0xd922, 0x0, 0x0);
        gbc.writeMem(0x24db, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1d32);
        EXPECT(gbc.pc(), 0x24dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 033F
        gbc.setState(0x9287, 0x33f1, 0xad50, 0x9864, 0x7bb6, 0xca20, 0x1, 0x0);
        gbc.writeMem(0x9287, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x33f1);
        EXPECT(gbc.pc(), 0x9288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9287), 0x84);
        // 84 0340
        gbc.setState(0x6185, 0xbfb6, 0x8bc0, 0xef4b, 0x22a8, 0xc5fd, 0x1, 0x1);
        gbc.writeMem(0x6185, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbfb6);
        EXPECT(gbc.pc(), 0x6186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0341
        gbc.setState(0x179b, 0x3339, 0x8ef0, 0xaa49, 0x537b, 0xfeb5, 0x0, 0x1);
        gbc.writeMem(0x179b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3339);
        EXPECT(gbc.pc(), 0x179c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0342
        gbc.setState(0x17cc, 0x2760, 0x7a00, 0x5088, 0x3ccd, 0x6516, 0x1, 0x0);
        gbc.writeMem(0x17cc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2760);
        EXPECT(gbc.pc(), 0x17cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0343
        gbc.setState(0x9ab, 0x6a28, 0x1990, 0xdaad, 0xee39, 0xd447, 0x0, 0x1);
        gbc.writeMem(0x9ab, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6a28);
        EXPECT(gbc.pc(), 0x9ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0344
        gbc.setState(0x3856, 0x8ac6, 0x7910, 0x13ac, 0x8bd6, 0x37e, 0x0, 0x0);
        gbc.writeMem(0x3856, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8ac6);
        EXPECT(gbc.pc(), 0x3857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0345
        gbc.setState(0x93a, 0xef6c, 0xa0, 0x2ec6, 0x6eb7, 0x8f04, 0x1, 0x0);
        gbc.writeMem(0x93a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xef6c);
        EXPECT(gbc.pc(), 0x93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0346
        gbc.setState(0x5024, 0x250e, 0xee50, 0xcb03, 0x47b6, 0xb5e5, 0x1, 0x1);
        gbc.writeMem(0x5024, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x250e);
        EXPECT(gbc.pc(), 0x5025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0347
        gbc.setState(0x7207, 0x8207, 0x7060, 0x1b12, 0xa964, 0xb19c, 0x1, 0x1);
        gbc.writeMem(0x7207, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8207);
        EXPECT(gbc.pc(), 0x7208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0348
        gbc.setState(0xcc89, 0x5677, 0x3bb0, 0x5bc4, 0xbec8, 0x1fcd, 0x1, 0x1);
        gbc.writeMem(0xcc89, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5677);
        EXPECT(gbc.pc(), 0xcc8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc89), 0x84);
        // 84 0349
        gbc.setState(0x333b, 0x93, 0xa430, 0x6ccc, 0x4973, 0xe383, 0x1, 0x1);
        gbc.writeMem(0x333b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x93);
        EXPECT(gbc.pc(), 0x333c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 034A
        gbc.setState(0x632f, 0x4b5a, 0x8610, 0xdeab, 0x60f5, 0x7a14, 0x1, 0x0);
        gbc.writeMem(0x632f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4b5a);
        EXPECT(gbc.pc(), 0x6330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 034B
        gbc.setState(0xa6ee, 0x43cf, 0x9e50, 0xc348, 0x9a1a, 0x2b38, 0x1, 0x0);
        gbc.writeMem(0xa6ee, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x43cf);
        EXPECT(gbc.pc(), 0xa6ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ee), 0x84);
        // 84 034C
        gbc.setState(0x6ffd, 0x94e4, 0x5c20, 0xc3c5, 0x7c12, 0x465c, 0x1, 0x0);
        gbc.writeMem(0x6ffd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x94e4);
        EXPECT(gbc.pc(), 0x6ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 034D
        gbc.setState(0x5c1a, 0x3c21, 0x1a90, 0x8dc4, 0x2002, 0xd984, 0x1, 0x1);
        gbc.writeMem(0x5c1a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3c21);
        EXPECT(gbc.pc(), 0x5c1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 034E
        gbc.setState(0x5341, 0xed5d, 0x8720, 0x7ed7, 0x5103, 0xe77, 0x0, 0x1);
        gbc.writeMem(0x5341, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xed5d);
        EXPECT(gbc.pc(), 0x5342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 034F
        gbc.setState(0x7fe1, 0x9683, 0x3650, 0xaebb, 0x766, 0x681c, 0x0, 0x0);
        gbc.writeMem(0x7fe1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9683);
        EXPECT(gbc.pc(), 0x7fe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0350
        gbc.setState(0xde43, 0x5e99, 0xf390, 0xd5d6, 0x58ec, 0x75ae, 0x1, 0x1);
        gbc.writeMem(0xde43, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5e99);
        EXPECT(gbc.pc(), 0xde44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde43), 0x84);
        // 84 0352
        gbc.setState(0x1563, 0x935c, 0xf810, 0x7d49, 0x9fad, 0xc35f, 0x0, 0x0);
        gbc.writeMem(0x1563, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x935c);
        EXPECT(gbc.pc(), 0x1564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0353
        gbc.setState(0x5004, 0x2be2, 0x5d80, 0xcd3a, 0x796, 0x3cae, 0x1, 0x1);
        gbc.writeMem(0x5004, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2be2);
        EXPECT(gbc.pc(), 0x5005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0354
        gbc.setState(0xdde1, 0x15ee, 0xb540, 0x7b5, 0x61e6, 0x5813, 0x0, 0x1);
        gbc.writeMem(0xdde1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x15ee);
        EXPECT(gbc.pc(), 0xdde2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde1), 0x84);
        // 84 0355
        gbc.setState(0xa5cf, 0x7032, 0x5000, 0xe2a, 0x5394, 0x7785, 0x1, 0x1);
        gbc.writeMem(0xa5cf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7032);
        EXPECT(gbc.pc(), 0xa5d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5cf), 0x84);
        // 84 0356
        gbc.setState(0xb746, 0x82ef, 0x8540, 0x43ca, 0x9c2b, 0x39a, 0x0, 0x0);
        gbc.writeMem(0xb746, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x82ef);
        EXPECT(gbc.pc(), 0xb747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb746), 0x84);
        // 84 0357
        gbc.setState(0xd9a2, 0xe643, 0x140, 0x70db, 0x67a4, 0xf21a, 0x1, 0x0);
        gbc.writeMem(0xd9a2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe643);
        EXPECT(gbc.pc(), 0xd9a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a2), 0x84);
        // 84 0358
        gbc.setState(0xd23c, 0xa047, 0xde90, 0x4895, 0x3806, 0x45f3, 0x0, 0x1);
        gbc.writeMem(0xd23c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa047);
        EXPECT(gbc.pc(), 0xd23d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd23c), 0x84);
        // 84 0359
        gbc.setState(0x8b68, 0x4ae, 0xbba0, 0x8ece, 0x69d8, 0x4772, 0x1, 0x1);
        gbc.writeMem(0x8b68, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4ae);
        EXPECT(gbc.pc(), 0x8b69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b68), 0x84);
        // 84 035A
        gbc.setState(0xbba4, 0xffa0, 0x79c0, 0xbe92, 0x735a, 0xc0c7, 0x0, 0x1);
        gbc.writeMem(0xbba4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xffa0);
        EXPECT(gbc.pc(), 0xbba5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbba4), 0x84);
        // 84 035B
        gbc.setState(0x6b3d, 0x2643, 0x27c0, 0xbb2d, 0x7dec, 0x7ad2, 0x1, 0x0);
        gbc.writeMem(0x6b3d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2643);
        EXPECT(gbc.pc(), 0x6b3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 035C
        gbc.setState(0xe4b0, 0x609f, 0x6fe0, 0xeaee, 0x40e0, 0x755d, 0x1, 0x1);
        gbc.writeMem(0xe4b0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x609f);
        EXPECT(gbc.pc(), 0xe4b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b0), 0x84);
        // 84 035D
        gbc.setState(0x6a88, 0x4ef7, 0x9690, 0xe7a5, 0xf934, 0xf0fc, 0x1, 0x0);
        gbc.writeMem(0x6a88, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4ef7);
        EXPECT(gbc.pc(), 0x6a89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 035E
        gbc.setState(0xec24, 0x40a9, 0x4b50, 0x3124, 0xc0ce, 0xdf28, 0x1, 0x0);
        gbc.writeMem(0xec24, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x40a9);
        EXPECT(gbc.pc(), 0xec25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec24), 0x84);
        // 84 035F
        gbc.setState(0x8b85, 0x413e, 0xadc0, 0xd8ec, 0x37d9, 0x6c77, 0x0, 0x1);
        gbc.writeMem(0x8b85, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x413e);
        EXPECT(gbc.pc(), 0x8b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b85), 0x84);
        // 84 0360
        gbc.setState(0x79e9, 0xdab9, 0xbf50, 0xcf07, 0x4eff, 0x2ebb, 0x1, 0x0);
        gbc.writeMem(0x79e9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdab9);
        EXPECT(gbc.pc(), 0x79ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0361
        gbc.setState(0x3c3a, 0x3113, 0x6960, 0x9d49, 0x5bd0, 0xc582, 0x0, 0x0);
        gbc.writeMem(0x3c3a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3113);
        EXPECT(gbc.pc(), 0x3c3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0362
        gbc.setState(0x8f15, 0x996, 0xe960, 0xd5ca, 0x432c, 0xb90e, 0x1, 0x1);
        gbc.writeMem(0x8f15, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x996);
        EXPECT(gbc.pc(), 0x8f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f15), 0x84);
        // 84 0363
        gbc.setState(0xd79b, 0x2b2a, 0xf930, 0xb1d3, 0x4998, 0x1a9a, 0x0, 0x1);
        gbc.writeMem(0xd79b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2b2a);
        EXPECT(gbc.pc(), 0xd79c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd79b), 0x84);
        // 84 0364
        gbc.setState(0x54ae, 0x83d8, 0x8120, 0xa764, 0x1387, 0x803f, 0x0, 0x0);
        gbc.writeMem(0x54ae, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x83d8);
        EXPECT(gbc.pc(), 0x54af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0365
        gbc.setState(0x77e6, 0x6a52, 0xfb50, 0xb9cf, 0xf346, 0x1e4d, 0x1, 0x1);
        gbc.writeMem(0x77e6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6a52);
        EXPECT(gbc.pc(), 0x77e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0366
        gbc.setState(0x4d4c, 0xc625, 0x5ad0, 0x352b, 0x9674, 0x5b13, 0x0, 0x1);
        gbc.writeMem(0x4d4c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc625);
        EXPECT(gbc.pc(), 0x4d4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0367
        gbc.setState(0x9015, 0x9615, 0x5ad0, 0xdfa9, 0xa52f, 0x5efd, 0x0, 0x1);
        gbc.writeMem(0x9015, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9615);
        EXPECT(gbc.pc(), 0x9016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9015), 0x84);
        // 84 0368
        gbc.setState(0x2b15, 0xe231, 0x98d0, 0x69a8, 0xfda8, 0x5ca, 0x0, 0x0);
        gbc.writeMem(0x2b15, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe231);
        EXPECT(gbc.pc(), 0x2b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0369
        gbc.setState(0x5470, 0x1749, 0xcba0, 0x5a49, 0xb551, 0x99e1, 0x1, 0x1);
        gbc.writeMem(0x5470, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1749);
        EXPECT(gbc.pc(), 0x5471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 036A
        gbc.setState(0xaf30, 0x8237, 0xfde0, 0xc73f, 0x99f7, 0x66e1, 0x0, 0x1);
        gbc.writeMem(0xaf30, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8237);
        EXPECT(gbc.pc(), 0xaf31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf30), 0x84);
        // 84 036B
        gbc.setState(0x1edf, 0xad8, 0xba50, 0xb47a, 0x456d, 0xa144, 0x1, 0x0);
        gbc.writeMem(0x1edf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xad8);
        EXPECT(gbc.pc(), 0x1ee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 036C
        gbc.setState(0x5de3, 0xa312, 0x5ad0, 0x8e28, 0xe6fb, 0x6c77, 0x0, 0x0);
        gbc.writeMem(0x5de3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa312);
        EXPECT(gbc.pc(), 0x5de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 036D
        gbc.setState(0x4266, 0x25df, 0xfb60, 0x849e, 0x7b3a, 0x2c12, 0x0, 0x0);
        gbc.writeMem(0x4266, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x25df);
        EXPECT(gbc.pc(), 0x4267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 036E
        gbc.setState(0x9a0e, 0x8989, 0x1df0, 0x784a, 0x47dd, 0x2261, 0x1, 0x0);
        gbc.writeMem(0x9a0e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8989);
        EXPECT(gbc.pc(), 0x9a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a0e), 0x84);
        // 84 036F
        gbc.setState(0x52e8, 0x631f, 0x4090, 0x6d, 0x21b9, 0x78bd, 0x1, 0x0);
        gbc.writeMem(0x52e8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x631f);
        EXPECT(gbc.pc(), 0x52e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0370
        gbc.setState(0xe212, 0x880, 0xddf0, 0x5a35, 0xa25, 0xf8da, 0x1, 0x1);
        gbc.writeMem(0xe212, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x880);
        EXPECT(gbc.pc(), 0xe213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe212), 0x84);
        // 84 0371
        gbc.setState(0x15e7, 0x2777, 0x68b0, 0x977b, 0xf578, 0xaee4, 0x0, 0x1);
        gbc.writeMem(0x15e7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2777);
        EXPECT(gbc.pc(), 0x15e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0372
        gbc.setState(0xc18b, 0x8f10, 0x11f0, 0x3f34, 0x937, 0x1518, 0x1, 0x0);
        gbc.writeMem(0xc18b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8f10);
        EXPECT(gbc.pc(), 0xc18c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc18b), 0x84);
        // 84 0374
        gbc.setState(0x874e, 0x4684, 0x3270, 0xe05e, 0xdd45, 0x29c4, 0x1, 0x0);
        gbc.writeMem(0x874e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4684);
        EXPECT(gbc.pc(), 0x874f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x874e), 0x84);
        // 84 0375
        gbc.setState(0x1efc, 0x296b, 0x73c0, 0xf66c, 0x6878, 0xe504, 0x0, 0x1);
        gbc.writeMem(0x1efc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x296b);
        EXPECT(gbc.pc(), 0x1efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 0376
        gbc.setState(0x7e5a, 0x290a, 0x13e0, 0x9730, 0x36ea, 0xdf5d, 0x1, 0x0);
        gbc.writeMem(0x7e5a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x290a);
        EXPECT(gbc.pc(), 0x7e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0377
        gbc.setState(0xa439, 0x65c4, 0x7b00, 0x39e5, 0x28c, 0x48b9, 0x0, 0x1);
        gbc.writeMem(0xa439, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x65c4);
        EXPECT(gbc.pc(), 0xa43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa439), 0x84);
        // 84 0378
        gbc.setState(0xce74, 0xf2b6, 0x7570, 0x9d05, 0x2663, 0xe648, 0x1, 0x1);
        gbc.writeMem(0xce74, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf2b6);
        EXPECT(gbc.pc(), 0xce75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce74), 0x84);
        // 84 0379
        gbc.setState(0x753e, 0xae8d, 0x7620, 0xaef8, 0xddd5, 0x1ee7, 0x0, 0x0);
        gbc.writeMem(0x753e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xae8d);
        EXPECT(gbc.pc(), 0x753f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 037A
        gbc.setState(0xae92, 0x9b7b, 0x13c0, 0x84f2, 0xcd5c, 0x2ba7, 0x0, 0x0);
        gbc.writeMem(0xae92, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9b7b);
        EXPECT(gbc.pc(), 0xae93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae92), 0x84);
        // 84 037B
        gbc.setState(0xc134, 0x5989, 0x6230, 0x6092, 0xe5a9, 0x2a34, 0x1, 0x0);
        gbc.writeMem(0xc134, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5989);
        EXPECT(gbc.pc(), 0xc135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc134), 0x84);
        // 84 037C
        gbc.setState(0x6824, 0xb2ca, 0xa80, 0xc43d, 0xf6ee, 0x63d1, 0x0, 0x1);
        gbc.writeMem(0x6824, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb2ca);
        EXPECT(gbc.pc(), 0x6825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 037D
        gbc.setState(0x7f9f, 0xf435, 0x3720, 0x5e86, 0x548f, 0xee4d, 0x1, 0x1);
        gbc.writeMem(0x7f9f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf435);
        EXPECT(gbc.pc(), 0x7fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 037E
        gbc.setState(0x328a, 0xee53, 0x1e60, 0x4b5, 0x4a7e, 0x7f74, 0x1, 0x1);
        gbc.writeMem(0x328a, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xee53);
        EXPECT(gbc.pc(), 0x328b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 037F
        gbc.setState(0xee96, 0x7a2, 0xf6e0, 0x6776, 0x1d6b, 0x6485, 0x1, 0x0);
        gbc.writeMem(0xee96, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7a2);
        EXPECT(gbc.pc(), 0xee97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee96), 0x84);
        // 84 0380
        gbc.setState(0xbc1e, 0x7058, 0x12e0, 0xa3c3, 0x6894, 0xed0e, 0x1, 0x1);
        gbc.writeMem(0xbc1e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x7058);
        EXPECT(gbc.pc(), 0xbc1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc1e), 0x84);
        // 84 0381
        gbc.setState(0x5828, 0x60ff, 0xdfb0, 0x992d, 0xc953, 0x9eaa, 0x0, 0x1);
        gbc.writeMem(0x5828, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x60ff);
        EXPECT(gbc.pc(), 0x5829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0382
        gbc.setState(0xe4e1, 0xd430, 0xbd90, 0xa4d, 0xbbff, 0xf3b0, 0x1, 0x0);
        gbc.writeMem(0xe4e1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd430);
        EXPECT(gbc.pc(), 0xe4e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e1), 0x84);
        // 84 0383
        gbc.setState(0xbdfb, 0x7efe, 0xc940, 0xdf59, 0x67ea, 0xdc60, 0x1, 0x0);
        gbc.writeMem(0xbdfb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7efe);
        EXPECT(gbc.pc(), 0xbdfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdfb), 0x84);
        // 84 0384
        gbc.setState(0xd72b, 0x9c88, 0x8a10, 0x14c8, 0xd943, 0xe82b, 0x1, 0x1);
        gbc.writeMem(0xd72b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9c88);
        EXPECT(gbc.pc(), 0xd72c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd72b), 0x84);
        // 84 0385
        gbc.setState(0xca30, 0xe3c1, 0xaeb0, 0x7977, 0xbf9c, 0x220e, 0x1, 0x1);
        gbc.writeMem(0xca30, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe3c1);
        EXPECT(gbc.pc(), 0xca31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca30), 0x84);
        // 84 0386
        gbc.setState(0x9ae4, 0x4e22, 0x4d30, 0x17d4, 0xe9c, 0x93d2, 0x1, 0x1);
        gbc.writeMem(0x9ae4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4e22);
        EXPECT(gbc.pc(), 0x9ae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae4), 0x84);
        // 84 0387
        gbc.setState(0x19c, 0x1e89, 0x20, 0x9f62, 0xeeba, 0x4119, 0x0, 0x1);
        gbc.writeMem(0x19c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x1e89);
        EXPECT(gbc.pc(), 0x19d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0388
        gbc.setState(0x4728, 0x6994, 0x30a0, 0x4013, 0x9e1a, 0xc0c3, 0x0, 0x1);
        gbc.writeMem(0x4728, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6994);
        EXPECT(gbc.pc(), 0x4729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0389
        gbc.setState(0x280e, 0x5b5d, 0x59a0, 0x619d, 0x474, 0x1edc, 0x0, 0x0);
        gbc.writeMem(0x280e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5b5d);
        EXPECT(gbc.pc(), 0x280f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 038A
        gbc.setState(0xc8d6, 0x5437, 0xd7d0, 0x70db, 0x27a0, 0xbe22, 0x0, 0x0);
        gbc.writeMem(0xc8d6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5437);
        EXPECT(gbc.pc(), 0xc8d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8d6), 0x84);
        // 84 038B
        gbc.setState(0xb494, 0x58e9, 0xf270, 0x29a4, 0xb060, 0xb93a, 0x0, 0x0);
        gbc.writeMem(0xb494, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x58e9);
        EXPECT(gbc.pc(), 0xb495);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb494), 0x84);
        // 84 038C
        gbc.setState(0x99c7, 0xe6cf, 0x8fc0, 0xd84c, 0xd94c, 0xd7ba, 0x1, 0x0);
        gbc.writeMem(0x99c7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe6cf);
        EXPECT(gbc.pc(), 0x99c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c7), 0x84);
        // 84 038D
        gbc.setState(0x1c1d, 0xe4dc, 0xa680, 0xb741, 0x3d7f, 0x3a29, 0x1, 0x1);
        gbc.writeMem(0x1c1d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe4dc);
        EXPECT(gbc.pc(), 0x1c1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 038E
        gbc.setState(0xcfa4, 0x55ad, 0x630, 0x38b4, 0x7143, 0x9719, 0x1, 0x1);
        gbc.writeMem(0xcfa4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x55ad);
        EXPECT(gbc.pc(), 0xcfa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa4), 0x84);
        // 84 038F
        gbc.setState(0xa6b4, 0x1093, 0x19b0, 0xc69, 0xba2a, 0x9572, 0x1, 0x0);
        gbc.writeMem(0xa6b4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1093);
        EXPECT(gbc.pc(), 0xa6b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6b4), 0x84);
        // 84 0390
        gbc.setState(0x8b4, 0x5cc3, 0x2cb0, 0xdf20, 0x4faa, 0x2262, 0x1, 0x1);
        gbc.writeMem(0x8b4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5cc3);
        EXPECT(gbc.pc(), 0x8b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0391
        gbc.setState(0x533f, 0xe28e, 0xacb0, 0x728f, 0x101d, 0x5e67, 0x1, 0x0);
        gbc.writeMem(0x533f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe28e);
        EXPECT(gbc.pc(), 0x5340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 0392
        gbc.setState(0x8671, 0x3734, 0xd9f0, 0xdc4e, 0x7d7f, 0xfcea, 0x0, 0x1);
        gbc.writeMem(0x8671, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3734);
        EXPECT(gbc.pc(), 0x8672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8671), 0x84);
        // 84 0393
        gbc.setState(0xd021, 0xc7ac, 0xe850, 0xb661, 0x9e0, 0x6050, 0x0, 0x0);
        gbc.writeMem(0xd021, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc7ac);
        EXPECT(gbc.pc(), 0xd022);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd021), 0x84);
        // 84 0394
        gbc.setState(0x568b, 0x1c1d, 0xbac0, 0xb009, 0x7766, 0x396d, 0x0, 0x0);
        gbc.writeMem(0x568b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1c1d);
        EXPECT(gbc.pc(), 0x568c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 0395
        gbc.setState(0x9ae2, 0xc9f4, 0xea40, 0x6875, 0x4b58, 0x85fe, 0x1, 0x1);
        gbc.writeMem(0x9ae2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc9f4);
        EXPECT(gbc.pc(), 0x9ae3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae2), 0x84);
        // 84 0396
        gbc.setState(0x9939, 0x6a2e, 0x2850, 0x3b34, 0xdb0b, 0xaf57, 0x1, 0x1);
        gbc.writeMem(0x9939, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6a2e);
        EXPECT(gbc.pc(), 0x993a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9939), 0x84);
        // 84 0397
        gbc.setState(0x67a9, 0x1356, 0x8bb0, 0x6970, 0x7b47, 0x231b, 0x0, 0x0);
        gbc.writeMem(0x67a9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1356);
        EXPECT(gbc.pc(), 0x67aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 0398
        gbc.setState(0x4ab9, 0xa18c, 0x3670, 0x1af, 0x18e6, 0xaf05, 0x0, 0x1);
        gbc.writeMem(0x4ab9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa18c);
        EXPECT(gbc.pc(), 0x4aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 039A
        gbc.setState(0x8c40, 0x88a0, 0x4f10, 0xc3e4, 0xfe45, 0xc350, 0x0, 0x1);
        gbc.writeMem(0x8c40, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x88a0);
        EXPECT(gbc.pc(), 0x8c41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c40), 0x84);
        // 84 039B
        gbc.setState(0x9709, 0xfe1f, 0x8550, 0x9f9f, 0xd9ca, 0x5368, 0x0, 0x0);
        gbc.writeMem(0x9709, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xfe1f);
        EXPECT(gbc.pc(), 0x970a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9709), 0x84);
        // 84 039C
        gbc.setState(0x89fc, 0xaa29, 0x18a0, 0x79ad, 0x3e1a, 0xaea6, 0x1, 0x1);
        gbc.writeMem(0x89fc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xaa29);
        EXPECT(gbc.pc(), 0x89fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89fc), 0x84);
        // 84 039D
        gbc.setState(0x42a6, 0xf75d, 0xb650, 0x9277, 0xcd5b, 0xca1e, 0x1, 0x0);
        gbc.writeMem(0x42a6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf75d);
        EXPECT(gbc.pc(), 0x42a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 039E
        gbc.setState(0x8d5d, 0x772a, 0xb2a0, 0x1dd2, 0x2dd3, 0x755, 0x0, 0x1);
        gbc.writeMem(0x8d5d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x772a);
        EXPECT(gbc.pc(), 0x8d5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d5d), 0x84);
        // 84 039F
        gbc.setState(0x230e, 0xa0bf, 0x7cd0, 0xfb72, 0x873d, 0x8bab, 0x0, 0x0);
        gbc.writeMem(0x230e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa0bf);
        EXPECT(gbc.pc(), 0x230f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 03A0
        gbc.setState(0x1d34, 0x63ad, 0x6000, 0x2611, 0x8e5c, 0x331b, 0x0, 0x0);
        gbc.writeMem(0x1d34, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x63ad);
        EXPECT(gbc.pc(), 0x1d35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 03A1
        gbc.setState(0x4a56, 0x88fe, 0xa9e0, 0x252a, 0x129a, 0xd41b, 0x1, 0x1);
        gbc.writeMem(0x4a56, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x88fe);
        EXPECT(gbc.pc(), 0x4a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 03A2
        gbc.setState(0xb681, 0x1d06, 0x9e0, 0x51b7, 0x8159, 0xc6da, 0x1, 0x0);
        gbc.writeMem(0xb681, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1d06);
        EXPECT(gbc.pc(), 0xb682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb681), 0x84);
        // 84 03A3
        gbc.setState(0x8fc4, 0x92e9, 0x2550, 0xb142, 0xaed6, 0xab4, 0x0, 0x0);
        gbc.writeMem(0x8fc4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x92e9);
        EXPECT(gbc.pc(), 0x8fc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc4), 0x84);
        // 84 03A4
        gbc.setState(0xe3d6, 0x89ab, 0x9960, 0xba48, 0x66ec, 0xafb0, 0x1, 0x1);
        gbc.writeMem(0xe3d6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x89ab);
        EXPECT(gbc.pc(), 0xe3d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3d6), 0x84);
        // 84 03A5
        gbc.setState(0xd935, 0xd137, 0x9250, 0x86c7, 0x30da, 0x7560, 0x1, 0x1);
        gbc.writeMem(0xd935, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd137);
        EXPECT(gbc.pc(), 0xd936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd935), 0x84);
        // 84 03A6
        gbc.setState(0x6f83, 0xf953, 0x1f20, 0x16c, 0xdcf8, 0x4f67, 0x1, 0x0);
        gbc.writeMem(0x6f83, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf953);
        EXPECT(gbc.pc(), 0x6f84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 03A7
        gbc.setState(0xc605, 0x1039, 0x3d80, 0x5596, 0x808, 0x6a6f, 0x0, 0x1);
        gbc.writeMem(0xc605, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1039);
        EXPECT(gbc.pc(), 0xc606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc605), 0x84);
        // 84 03A8
        gbc.setState(0xa8e4, 0x93da, 0xe0d0, 0x712e, 0x7c1f, 0x1c, 0x1, 0x1);
        gbc.writeMem(0xa8e4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x93da);
        EXPECT(gbc.pc(), 0xa8e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e4), 0x84);
        // 84 03A9
        gbc.setState(0xb929, 0x249d, 0xe840, 0x1d0, 0x7af7, 0x8a9b, 0x0, 0x0);
        gbc.writeMem(0xb929, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x249d);
        EXPECT(gbc.pc(), 0xb92a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb929), 0x84);
        // 84 03AA
        gbc.setState(0xce95, 0x7880, 0xffc0, 0x85e, 0xb579, 0x5765, 0x0, 0x1);
        gbc.writeMem(0xce95, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7880);
        EXPECT(gbc.pc(), 0xce96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce95), 0x84);
        // 84 03AB
        gbc.setState(0xec22, 0x6265, 0xc660, 0x406d, 0xfcd3, 0xb751, 0x1, 0x0);
        gbc.writeMem(0xec22, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x6265);
        EXPECT(gbc.pc(), 0xec23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec22), 0x84);
        // 84 03AC
        gbc.setState(0x71d1, 0xf824, 0xb9d0, 0x2ea0, 0xd1be, 0x51d5, 0x1, 0x0);
        gbc.writeMem(0x71d1, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf824);
        EXPECT(gbc.pc(), 0x71d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 03AD
        gbc.setState(0x8876, 0x38aa, 0x2870, 0xc063, 0x7c4a, 0xc811, 0x1, 0x0);
        gbc.writeMem(0x8876, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x38aa);
        EXPECT(gbc.pc(), 0x8877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8876), 0x84);
        // 84 03AE
        gbc.setState(0xc358, 0x2dd1, 0xbd00, 0x8695, 0x3b62, 0xc362, 0x0, 0x0);
        gbc.writeMem(0xc358, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2dd1);
        EXPECT(gbc.pc(), 0xc359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc358), 0x84);
        // 84 03AF
        gbc.setState(0x2e32, 0x1474, 0x2d50, 0x4753, 0xd277, 0xa1c, 0x1, 0x1);
        gbc.writeMem(0x2e32, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1474);
        EXPECT(gbc.pc(), 0x2e33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 03B0
        gbc.setState(0x254, 0xd5d8, 0xe620, 0x780b, 0x851c, 0x7105, 0x0, 0x0);
        gbc.writeMem(0x254, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd5d8);
        EXPECT(gbc.pc(), 0x255);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 03B1
        gbc.setState(0xd281, 0x19a1, 0x41a0, 0x3bea, 0xad84, 0x8343, 0x0, 0x0);
        gbc.writeMem(0xd281, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x19a1);
        EXPECT(gbc.pc(), 0xd282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd281), 0x84);
        // 84 03B2
        gbc.setState(0xb67b, 0x6266, 0xbeb0, 0x2ede, 0x3a4a, 0xc910, 0x1, 0x0);
        gbc.writeMem(0xb67b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6266);
        EXPECT(gbc.pc(), 0xb67c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb67b), 0x84);
        // 84 03B3
        gbc.setState(0xba1c, 0xc5de, 0x6ea0, 0xb342, 0xcf8a, 0x3783, 0x0, 0x0);
        gbc.writeMem(0xba1c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc5de);
        EXPECT(gbc.pc(), 0xba1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba1c), 0x84);
        // 84 03B4
        gbc.setState(0x5002, 0xfa7c, 0xeca0, 0x7780, 0x3aba, 0x31d1, 0x0, 0x0);
        gbc.writeMem(0x5002, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xfa7c);
        EXPECT(gbc.pc(), 0x5003);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 03B5
        gbc.setState(0x927b, 0x4cdf, 0xfc40, 0x2382, 0x88e9, 0x5c2, 0x1, 0x0);
        gbc.writeMem(0x927b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4cdf);
        EXPECT(gbc.pc(), 0x927c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x927b), 0x84);
        // 84 03B6
        gbc.setState(0xe547, 0x4599, 0xfbc0, 0xfe16, 0x2e2a, 0xe282, 0x0, 0x0);
        gbc.writeMem(0xe547, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4599);
        EXPECT(gbc.pc(), 0xe548);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe547), 0x84);
        // 84 03B7
        gbc.setState(0xa4e6, 0x992f, 0x2da0, 0x6b3, 0x9316, 0x69b0, 0x0, 0x0);
        gbc.writeMem(0xa4e6, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x992f);
        EXPECT(gbc.pc(), 0xa4e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e6), 0x84);
        // 84 03B8
        gbc.setState(0xd934, 0xce69, 0x8020, 0x2acf, 0xe61f, 0xcebb, 0x1, 0x1);
        gbc.writeMem(0xd934, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xce69);
        EXPECT(gbc.pc(), 0xd935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd934), 0x84);
        // 84 03B9
        gbc.setState(0xa261, 0x4de4, 0xfc0, 0x5979, 0x434a, 0x2498, 0x1, 0x1);
        gbc.writeMem(0xa261, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4de4);
        EXPECT(gbc.pc(), 0xa262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa261), 0x84);
        // 84 03BB
        gbc.setState(0x5480, 0x4821, 0x33a0, 0x13ea, 0x41b5, 0x6bff, 0x1, 0x1);
        gbc.writeMem(0x5480, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4821);
        EXPECT(gbc.pc(), 0x5481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 03BC
        gbc.setState(0x84f7, 0x7270, 0xa590, 0xd76c, 0x856c, 0xae2a, 0x1, 0x1);
        gbc.writeMem(0x84f7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7270);
        EXPECT(gbc.pc(), 0x84f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f7), 0x84);
        // 84 03BD
        gbc.setState(0xea46, 0x2657, 0x7f70, 0xe588, 0xc7de, 0x2d9, 0x1, 0x0);
        gbc.writeMem(0xea46, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2657);
        EXPECT(gbc.pc(), 0xea47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea46), 0x84);
        // 84 03BE
        gbc.setState(0xac08, 0x8f55, 0x3690, 0xff2, 0xf4e0, 0x7bcc, 0x1, 0x1);
        gbc.writeMem(0xac08, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8f55);
        EXPECT(gbc.pc(), 0xac09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac08), 0x84);
        // 84 03BF
        gbc.setState(0x6316, 0xd0e8, 0x4ff0, 0xc67c, 0xae81, 0xe94f, 0x1, 0x0);
        gbc.writeMem(0x6316, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd0e8);
        EXPECT(gbc.pc(), 0x6317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 03C1
        gbc.setState(0x1286, 0x6b52, 0x51d0, 0xb5ad, 0x4e45, 0x116c, 0x1, 0x1);
        gbc.writeMem(0x1286, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6b52);
        EXPECT(gbc.pc(), 0x1287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 03C2
        gbc.setState(0x301f, 0x27e1, 0x1530, 0x5d3f, 0x5b9c, 0x8a3e, 0x1, 0x0);
        gbc.writeMem(0x301f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x27e1);
        EXPECT(gbc.pc(), 0x3020);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 03C3
        gbc.setState(0xbb59, 0x4a42, 0x9120, 0x24e1, 0xf64e, 0xe955, 0x0, 0x0);
        gbc.writeMem(0xbb59, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4a42);
        EXPECT(gbc.pc(), 0xbb5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb59), 0x84);
        // 84 03C4
        gbc.setState(0xc16e, 0xf1c3, 0x7e0, 0x37b0, 0xd12e, 0x9854, 0x1, 0x0);
        gbc.writeMem(0xc16e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf1c3);
        EXPECT(gbc.pc(), 0xc16f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16e), 0x84);
        // 84 03C5
        gbc.setState(0xa089, 0xc9c7, 0xdd70, 0xdd93, 0xbc4d, 0x2872, 0x0, 0x0);
        gbc.writeMem(0xa089, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc9c7);
        EXPECT(gbc.pc(), 0xa08a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa089), 0x84);
        // 84 03C6
        gbc.setState(0x7593, 0xd566, 0x1280, 0x5c0a, 0xf13e, 0xf092, 0x0, 0x0);
        gbc.writeMem(0x7593, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd566);
        EXPECT(gbc.pc(), 0x7594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 84 03C7
        gbc.setState(0x4b3b, 0x1895, 0xcec0, 0xf690, 0x42c6, 0xe341, 0x1, 0x1);
        gbc.writeMem(0x4b3b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1895);
        EXPECT(gbc.pc(), 0x4b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 03C8
        gbc.setState(0x7ca3, 0x931c, 0x2740, 0xb9c, 0x6002, 0x6708, 0x0, 0x1);
        gbc.writeMem(0x7ca3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x931c);
        EXPECT(gbc.pc(), 0x7ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 03C9
        gbc.setState(0x95a7, 0xa39c, 0x2380, 0x91, 0xe01f, 0x8af4, 0x0, 0x0);
        gbc.writeMem(0x95a7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa39c);
        EXPECT(gbc.pc(), 0x95a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a7), 0x84);
        // 84 03CA
        gbc.setState(0xde2c, 0x25cf, 0xbee0, 0xe3d2, 0xf08, 0xab71, 0x1, 0x0);
        gbc.writeMem(0xde2c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x25cf);
        EXPECT(gbc.pc(), 0xde2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde2c), 0x84);
        // 84 03CB
        gbc.setState(0x8045, 0x5be3, 0xcb90, 0xadfa, 0xe692, 0x82c3, 0x1, 0x1);
        gbc.writeMem(0x8045, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5be3);
        EXPECT(gbc.pc(), 0x8046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8045), 0x84);
        // 84 03CC
        gbc.setState(0xb5ae, 0x4fcf, 0x73c0, 0xb8cd, 0x4929, 0x72a3, 0x1, 0x1);
        gbc.writeMem(0xb5ae, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4fcf);
        EXPECT(gbc.pc(), 0xb5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ae), 0x84);
        // 84 03CD
        gbc.setState(0xa8e9, 0x9b09, 0xab10, 0x63ac, 0xa2ae, 0xc4a, 0x0, 0x1);
        gbc.writeMem(0xa8e9, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x9b09);
        EXPECT(gbc.pc(), 0xa8ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e9), 0x84);
        // 84 03CE
        gbc.setState(0x86fd, 0x4ba3, 0x4940, 0xfa86, 0x2ee, 0xf06, 0x0, 0x0);
        gbc.writeMem(0x86fd, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4ba3);
        EXPECT(gbc.pc(), 0x86fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86fd), 0x84);
        // 84 03CF
        gbc.setState(0xd250, 0xff2, 0xf3c0, 0x5447, 0x3473, 0x229, 0x0, 0x1);
        gbc.writeMem(0xd250, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xff2);
        EXPECT(gbc.pc(), 0xd251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd250), 0x84);
        // 84 03D0
        gbc.setState(0x2df2, 0x857c, 0x3c90, 0xf763, 0x4959, 0x1c9c, 0x0, 0x0);
        gbc.writeMem(0x2df2, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x857c);
        EXPECT(gbc.pc(), 0x2df3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 03D1
        gbc.setState(0x2774, 0x8fba, 0x8930, 0x2b44, 0x12be, 0x4e94, 0x1, 0x0);
        gbc.writeMem(0x2774, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8fba);
        EXPECT(gbc.pc(), 0x2775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 03D3
        gbc.setState(0x1eaa, 0xfff6, 0x16a0, 0x5f42, 0x2d9b, 0xa718, 0x1, 0x1);
        gbc.writeMem(0x1eaa, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xfff6);
        EXPECT(gbc.pc(), 0x1eab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 03D4
        gbc.setState(0x9e8f, 0x5644, 0xe90, 0x19e7, 0x4afd, 0x7a9b, 0x0, 0x1);
        gbc.writeMem(0x9e8f, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5644);
        EXPECT(gbc.pc(), 0x9e90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e8f), 0x84);
        // 84 03D5
        gbc.setState(0x63eb, 0x9c78, 0x64f0, 0x65c5, 0xb906, 0x8fc5, 0x0, 0x0);
        gbc.writeMem(0x63eb, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9c78);
        EXPECT(gbc.pc(), 0x63ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 03D6
        gbc.setState(0xdf8e, 0x4e5a, 0x640, 0xc478, 0x4a68, 0x518e, 0x1, 0x1);
        gbc.writeMem(0xdf8e, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4e5a);
        EXPECT(gbc.pc(), 0xdf8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf8e), 0x84);
        // 84 03D7
        gbc.setState(0x86e3, 0x2bef, 0x5ac0, 0x995c, 0x7640, 0x4e20, 0x0, 0x0);
        gbc.writeMem(0x86e3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2bef);
        EXPECT(gbc.pc(), 0x86e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e3), 0x84);
        // 84 03D8
        gbc.setState(0x6920, 0x10c5, 0x8b80, 0x374d, 0xe14, 0x7b25, 0x0, 0x0);
        gbc.writeMem(0x6920, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x10c5);
        EXPECT(gbc.pc(), 0x6921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 84 03D9
        gbc.setState(0x33cf, 0x811c, 0x6e20, 0xc46d, 0x329f, 0x1de1, 0x1, 0x0);
        gbc.writeMem(0x33cf, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x811c);
        EXPECT(gbc.pc(), 0x33d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 03DA
        gbc.setState(0xd97c, 0x3cec, 0x2220, 0x9490, 0xe62a, 0x3491, 0x0, 0x0);
        gbc.writeMem(0xd97c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3cec);
        EXPECT(gbc.pc(), 0xd97d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97c), 0x84);
        // 84 03DB
        gbc.setState(0x8d6b, 0x7a70, 0x3830, 0x2181, 0x3846, 0xab3f, 0x0, 0x0);
        gbc.writeMem(0x8d6b, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7a70);
        EXPECT(gbc.pc(), 0x8d6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d6b), 0x84);
        // 84 03DC
        gbc.setState(0x9e46, 0xb9ab, 0xe0, 0xd70d, 0xf4d2, 0x7f1d, 0x1, 0x1);
        gbc.writeMem(0x9e46, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb9ab);
        EXPECT(gbc.pc(), 0x9e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e46), 0x84);
        // 84 03DD
        gbc.setState(0xe751, 0x804c, 0x8590, 0xfd8a, 0x5a24, 0xcbb1, 0x1, 0x0);
        gbc.writeMem(0xe751, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x804c);
        EXPECT(gbc.pc(), 0xe752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe751), 0x84);
        // 84 03DE
        gbc.setState(0x2e81, 0x957d, 0x9850, 0x7848, 0xf4fe, 0x181e, 0x1, 0x1);
        gbc.writeMem(0x2e81, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x957d);
        EXPECT(gbc.pc(), 0x2e82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 03DF
        gbc.setState(0xbdcc, 0xbdb7, 0x7810, 0x83eb, 0xb5dd, 0xbe97, 0x1, 0x1);
        gbc.writeMem(0xbdcc, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbdb7);
        EXPECT(gbc.pc(), 0xbdcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdcc), 0x84);
        // 84 03E0
        gbc.setState(0xc439, 0xcc56, 0xc0b0, 0xe640, 0x5569, 0x1ec0, 0x1, 0x1);
        gbc.writeMem(0xc439, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xcc56);
        EXPECT(gbc.pc(), 0xc43a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc439), 0x84);
        // 84 03E1
        gbc.setState(0xcfe7, 0x718d, 0x7700, 0xd445, 0xde, 0x4284, 0x1, 0x0);
        gbc.writeMem(0xcfe7, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x718d);
        EXPECT(gbc.pc(), 0xcfe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe7), 0x84);
        // 84 03E2
        gbc.setState(0xba03, 0x366, 0xdc20, 0x9c5c, 0xc62c, 0x19fd, 0x0, 0x1);
        gbc.writeMem(0xba03, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x366);
        EXPECT(gbc.pc(), 0xba04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba03), 0x84);
        // 84 03E3
        gbc.setState(0x1744, 0xa76d, 0x95c0, 0x888a, 0x17ab, 0x4b1a, 0x1, 0x1);
        gbc.writeMem(0x1744, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa76d);
        EXPECT(gbc.pc(), 0x1745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 84 03E4
        gbc.setState(0x471d, 0x9a06, 0x8130, 0x61e2, 0xa4e1, 0x4e75, 0x1, 0x0);
        gbc.writeMem(0x471d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9a06);
        EXPECT(gbc.pc(), 0x471e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 84 03E5
        gbc.setState(0xddf0, 0x3d0d, 0xfa60, 0x6f12, 0x78e7, 0xb68f, 0x0, 0x1);
        gbc.writeMem(0xddf0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3d0d);
        EXPECT(gbc.pc(), 0xddf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddf0), 0x84);
        // 84 03E6
        gbc.setState(0xa971, 0x148c, 0xeef0, 0xb5f0, 0x8e09, 0x6b1c, 0x0, 0x1);
        gbc.writeMem(0xa971, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x148c);
        EXPECT(gbc.pc(), 0xa972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa971), 0x84);
        // 84 03E7
        gbc.setState(0xd31d, 0xb0fe, 0xf050, 0xb4bd, 0x989f, 0xbbc6, 0x0, 0x0);
        gbc.writeMem(0xd31d, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb0fe);
        EXPECT(gbc.pc(), 0xd31e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd31d), 0x84);
    }
