#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_2e)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_2e) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 2E 0006
        gbc.setState(0x4f7e, 0xe6dd, 0xeab0, 0xe36e, 0xe1fb, 0x9f8b, 0x1, 0x0);
        gbc.writeMem(0x4f7e, { 0xcb, 0x2e });
        gbc.writeMem(0x9f8b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe6dd);
        EXPECT(gbc.pc(), 0x4f80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f8b), 0xd5);
        // CB 2E 0008
        gbc.setState(0xcda6, 0x63f8, 0xce10, 0xb3d1, 0x4b39, 0x9f66, 0x0, 0x0);
        gbc.writeMem(0x9f66, { 0xbf });
        gbc.writeMem(0xcda6, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x63f8);
        EXPECT(gbc.pc(), 0xcda8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f66), 0xdf);
        EXPECT(gbc.readMem(0xcda6), 0xcb);
        EXPECT(gbc.readMem(0xcda7), 0x2e);
        // CB 2E 000B
        gbc.setState(0xa986, 0x89d2, 0x5de0, 0x46e4, 0x7f53, 0xbd79, 0x0, 0x1);
        gbc.writeMem(0xa986, { 0xcb, 0x2e });
        gbc.writeMem(0xbd79, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x89d2);
        EXPECT(gbc.pc(), 0xa988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa986), 0xcb);
        EXPECT(gbc.readMem(0xa987), 0x2e);
        EXPECT(gbc.readMem(0xbd79), 0xe3);
        // CB 2E 000D
        gbc.setState(0x74a8, 0xeb9d, 0xe290, 0x789b, 0x6c05, 0xa560, 0x1, 0x0);
        gbc.writeMem(0x74a8, { 0xcb, 0x2e });
        gbc.writeMem(0xa560, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xeb9d);
        EXPECT(gbc.pc(), 0x74aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa560), 0xa);
        // CB 2E 000E
        gbc.setState(0x1708, 0x615e, 0xa030, 0x48e0, 0xbfda, 0x9e39, 0x1, 0x1);
        gbc.writeMem(0x1708, { 0xcb, 0x2e });
        gbc.writeMem(0x9e39, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x615e);
        EXPECT(gbc.pc(), 0x170a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e39), 0xf2);
        // CB 2E 0012
        gbc.setState(0x5e05, 0xfe15, 0x8050, 0x603a, 0xa0bc, 0x8512, 0x0, 0x1);
        gbc.writeMem(0x5e05, { 0xcb, 0x2e });
        gbc.writeMem(0x8512, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xfe15);
        EXPECT(gbc.pc(), 0x5e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8512), 0x35);
        // CB 2E 0013
        gbc.setState(0xb042, 0xdace, 0xa4d0, 0xd95, 0xa0d5, 0x9e02, 0x0, 0x0);
        gbc.writeMem(0x9e02, { 0x52 });
        gbc.writeMem(0xb042, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdace);
        EXPECT(gbc.pc(), 0xb044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e02), 0x29);
        EXPECT(gbc.readMem(0xb042), 0xcb);
        EXPECT(gbc.readMem(0xb043), 0x2e);
        // CB 2E 0017
        gbc.setState(0xa905, 0xebfe, 0x6ff0, 0xfc24, 0x7ce6, 0x9e3b, 0x0, 0x0);
        gbc.writeMem(0x9e3b, { 0x33 });
        gbc.writeMem(0xa905, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xebfe);
        EXPECT(gbc.pc(), 0xa907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e3b), 0x19);
        EXPECT(gbc.readMem(0xa905), 0xcb);
        EXPECT(gbc.readMem(0xa906), 0x2e);
        // CB 2E 001C
        gbc.setState(0x5ce1, 0x999c, 0x5d50, 0xf15c, 0x990, 0xb29f, 0x0, 0x0);
        gbc.writeMem(0x5ce1, { 0xcb, 0x2e });
        gbc.writeMem(0xb29f, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x999c);
        EXPECT(gbc.pc(), 0x5ce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb29f), 0xf6);
        // CB 2E 001D
        gbc.setState(0x9fb8, 0x15fc, 0x8330, 0xc609, 0x5b7d, 0xaeba, 0x1, 0x0);
        gbc.writeMem(0x9fb8, { 0xcb, 0x2e });
        gbc.writeMem(0xaeba, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x15fc);
        EXPECT(gbc.pc(), 0x9fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb8), 0xcb);
        EXPECT(gbc.readMem(0x9fb9), 0x2e);
        EXPECT(gbc.readMem(0xaeba), 0xe3);
        // CB 2E 0020
        gbc.setState(0x645f, 0x6e9f, 0x3070, 0x26dd, 0x11ef, 0x8b82, 0x1, 0x1);
        gbc.writeMem(0x645f, { 0xcb, 0x2e });
        gbc.writeMem(0x8b82, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6e9f);
        EXPECT(gbc.pc(), 0x6461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b82), 0xe8);
        // CB 2E 0022
        gbc.setState(0x3471, 0x7032, 0xd510, 0xaf41, 0x7b7b, 0xe8aa, 0x1, 0x0);
        gbc.writeMem(0x3471, { 0xcb, 0x2e });
        gbc.writeMem(0xe8aa, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7032);
        EXPECT(gbc.pc(), 0x3473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8aa), 0x7);
        // CB 2E 0023
        gbc.setState(0x2128, 0xc3f5, 0xff30, 0xfee8, 0xa989, 0xb51d, 0x1, 0x0);
        gbc.writeMem(0x2128, { 0xcb, 0x2e });
        gbc.writeMem(0xb51d, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc3f5);
        EXPECT(gbc.pc(), 0x212a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb51d), 0xc8);
        // CB 2E 0024
        gbc.setState(0x6242, 0xe21, 0xa5e0, 0xec33, 0x3353, 0x82e4, 0x0, 0x0);
        gbc.writeMem(0x6242, { 0xcb, 0x2e });
        gbc.writeMem(0x82e4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe21);
        EXPECT(gbc.pc(), 0x6244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82e4), 0xd);
        // CB 2E 0026
        gbc.setState(0x2128, 0xc0ce, 0xf4f0, 0x18c, 0x6e37, 0xaab9, 0x0, 0x1);
        gbc.writeMem(0x2128, { 0xcb, 0x2e });
        gbc.writeMem(0xaab9, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc0ce);
        EXPECT(gbc.pc(), 0x212a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaab9), 0xc1);
        // CB 2E 0028
        gbc.setState(0xaedf, 0x21c8, 0x6fc0, 0x7710, 0xa7d2, 0xe94a, 0x1, 0x1);
        gbc.writeMem(0xaedf, { 0xcb, 0x2e });
        gbc.writeMem(0xe94a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x21c8);
        EXPECT(gbc.pc(), 0xaee1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaedf), 0xcb);
        EXPECT(gbc.readMem(0xaee0), 0x2e);
        EXPECT(gbc.readMem(0xe94a), 0x27);
        // CB 2E 0029
        gbc.setState(0xd1ea, 0xde73, 0xe0d0, 0x416d, 0x17d3, 0xd128, 0x0, 0x1);
        gbc.writeMem(0xd128, { 0x8b });
        gbc.writeMem(0xd1ea, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xde73);
        EXPECT(gbc.pc(), 0xd1ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd128), 0xc5);
        EXPECT(gbc.readMem(0xd1ea), 0xcb);
        EXPECT(gbc.readMem(0xd1eb), 0x2e);
        // CB 2E 002D
        gbc.setState(0xa112, 0x24e7, 0xae60, 0x1fe1, 0xa75b, 0x9898, 0x0, 0x1);
        gbc.writeMem(0x9898, { 0xb3 });
        gbc.writeMem(0xa112, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x24e7);
        EXPECT(gbc.pc(), 0xa114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9898), 0xd9);
        EXPECT(gbc.readMem(0xa112), 0xcb);
        EXPECT(gbc.readMem(0xa113), 0x2e);
        // CB 2E 002E
        gbc.setState(0x4553, 0x15b1, 0xde90, 0x8ece, 0xc7d1, 0xbbe8, 0x1, 0x0);
        gbc.writeMem(0x4553, { 0xcb, 0x2e });
        gbc.writeMem(0xbbe8, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x15b1);
        EXPECT(gbc.pc(), 0x4555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe8), 0x4);
        // CB 2E 0031
        gbc.setState(0xdbe7, 0xb9eb, 0x5390, 0xdcdf, 0xb7a6, 0xfb63, 0x1, 0x1);
        gbc.writeMem(0xdbe7, { 0xcb, 0x2e });
        gbc.writeMem(0xfb63, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb9eb);
        EXPECT(gbc.pc(), 0xdbe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbe7), 0xcb);
        EXPECT(gbc.readMem(0xdbe8), 0x2e);
        EXPECT(gbc.readMem(0xfb63), 0x1f);
        // CB 2E 0032
        gbc.setState(0xd4bd, 0xd699, 0x5050, 0x1c96, 0x9751, 0x88e6, 0x0, 0x0);
        gbc.writeMem(0x88e6, { 0xbd });
        gbc.writeMem(0xd4bd, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd699);
        EXPECT(gbc.pc(), 0xd4bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88e6), 0xde);
        EXPECT(gbc.readMem(0xd4bd), 0xcb);
        EXPECT(gbc.readMem(0xd4be), 0x2e);
        // CB 2E 0036
        gbc.setState(0x9ae1, 0x421a, 0xd760, 0x9c69, 0x2850, 0xd53c, 0x1, 0x0);
        gbc.writeMem(0x9ae1, { 0xcb, 0x2e });
        gbc.writeMem(0xd53c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x421a);
        EXPECT(gbc.pc(), 0x9ae3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae1), 0xcb);
        EXPECT(gbc.readMem(0x9ae2), 0x2e);
        EXPECT(gbc.readMem(0xd53c), 0x2d);
        // CB 2E 0038
        gbc.setState(0x1384, 0x50aa, 0xabc0, 0xe909, 0x5b36, 0xe8be, 0x0, 0x0);
        gbc.writeMem(0x1384, { 0xcb, 0x2e });
        gbc.writeMem(0xe8be, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x50aa);
        EXPECT(gbc.pc(), 0x1386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8be), 0xf);
        // CB 2E 0039
        gbc.setState(0xacfb, 0x74d1, 0xb440, 0xe4d, 0x5924, 0xe677, 0x0, 0x1);
        gbc.writeMem(0xacfb, { 0xcb, 0x2e });
        gbc.writeMem(0xe677, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x74d1);
        EXPECT(gbc.pc(), 0xacfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacfb), 0xcb);
        EXPECT(gbc.readMem(0xacfc), 0x2e);
        EXPECT(gbc.readMem(0xe677), 0x2c);
        // CB 2E 003B
        gbc.setState(0x7279, 0x21d5, 0x4ee0, 0xf479, 0xec45, 0xef3c, 0x0, 0x1);
        gbc.writeMem(0x7279, { 0xcb, 0x2e });
        gbc.writeMem(0xef3c, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x21d5);
        EXPECT(gbc.pc(), 0x727b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef3c), 0xf7);
        // CB 2E 003C
        gbc.setState(0xa43c, 0xcd79, 0x5df0, 0x3b41, 0x1a65, 0xa767, 0x1, 0x0);
        gbc.writeMem(0xa43c, { 0xcb, 0x2e });
        gbc.writeMem(0xa767, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xcd79);
        EXPECT(gbc.pc(), 0xa43e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa43c), 0xcb);
        EXPECT(gbc.readMem(0xa43d), 0x2e);
        EXPECT(gbc.readMem(0xa767), 0xd7);
        // CB 2E 0041
        gbc.setState(0x4b93, 0x951, 0xc810, 0x9cd0, 0x8dad, 0x99d6, 0x1, 0x1);
        gbc.writeMem(0x4b93, { 0xcb, 0x2e });
        gbc.writeMem(0x99d6, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x951);
        EXPECT(gbc.pc(), 0x4b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d6), 0x17);
        // CB 2E 0042
        gbc.setState(0x1f48, 0x9327, 0xe010, 0x9c86, 0xa696, 0xb758, 0x0, 0x0);
        gbc.writeMem(0x1f48, { 0xcb, 0x2e });
        gbc.writeMem(0xb758, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9327);
        EXPECT(gbc.pc(), 0x1f4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb758), 0xc3);
        // CB 2E 004A
        gbc.setState(0x22f2, 0x32cc, 0xeb00, 0x7719, 0xca2c, 0xdcb7, 0x1, 0x1);
        gbc.writeMem(0x22f2, { 0xcb, 0x2e });
        gbc.writeMem(0xdcb7, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x32cc);
        EXPECT(gbc.pc(), 0x22f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb7), 0x1e);
        // CB 2E 004B
        gbc.setState(0x7ec1, 0xffc, 0xc110, 0x79ca, 0xfe87, 0xb14a, 0x0, 0x0);
        gbc.writeMem(0x7ec1, { 0xcb, 0x2e });
        gbc.writeMem(0xb14a, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xffc);
        EXPECT(gbc.pc(), 0x7ec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb14a), 0xb);
        // CB 2E 004C
        gbc.setState(0xa05c, 0x1ee4, 0x9810, 0x6bac, 0x299b, 0xa9b1, 0x0, 0x0);
        gbc.writeMem(0xa05c, { 0xcb, 0x2e });
        gbc.writeMem(0xa9b1, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1ee4);
        EXPECT(gbc.pc(), 0xa05e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05c), 0xcb);
        EXPECT(gbc.readMem(0xa05d), 0x2e);
        EXPECT(gbc.readMem(0xa9b1), 0xd7);
        // CB 2E 004F
        gbc.setState(0x52b0, 0xb72c, 0x6e40, 0xd507, 0x8123, 0xa91c, 0x1, 0x0);
        gbc.writeMem(0x52b0, { 0xcb, 0x2e });
        gbc.writeMem(0xa91c, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb72c);
        EXPECT(gbc.pc(), 0x52b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa91c), 0xda);
        // CB 2E 0052
        gbc.setState(0x6af, 0x2fea, 0x61c0, 0xc008, 0xc7fe, 0xa3e8, 0x0, 0x0);
        gbc.writeMem(0x6af, { 0xcb, 0x2e });
        gbc.writeMem(0xa3e8, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2fea);
        EXPECT(gbc.pc(), 0x6b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e8), 0xe0);
        // CB 2E 0053
        gbc.setState(0xc7e2, 0xdf1b, 0x5e80, 0xf704, 0xe025, 0xd783, 0x0, 0x0);
        gbc.writeMem(0xc7e2, { 0xcb, 0x2e });
        gbc.writeMem(0xd783, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdf1b);
        EXPECT(gbc.pc(), 0xc7e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7e2), 0xcb);
        EXPECT(gbc.readMem(0xc7e3), 0x2e);
        EXPECT(gbc.readMem(0xd783), 0xc7);
        // CB 2E 0054
        gbc.setState(0x8be1, 0xdd17, 0xf2a0, 0x600c, 0x93ec, 0xde11, 0x0, 0x1);
        gbc.writeMem(0x8be1, { 0xcb, 0x2e });
        gbc.writeMem(0xde11, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xdd17);
        EXPECT(gbc.pc(), 0x8be3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8be1), 0xcb);
        EXPECT(gbc.readMem(0x8be2), 0x2e);
        EXPECT(gbc.readMem(0xde11), 0xcd);
        // CB 2E 0055
        gbc.setState(0x2d1d, 0x9407, 0x90e0, 0x9454, 0xa73a, 0xf3fb, 0x0, 0x1);
        gbc.writeMem(0x2d1d, { 0xcb, 0x2e });
        gbc.writeMem(0xf3fb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9407);
        EXPECT(gbc.pc(), 0x2d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf3fb), 0x20);
        // CB 2E 005A
        gbc.setState(0xbf86, 0x56c, 0xaef0, 0xcd30, 0xcf35, 0xfa1d, 0x0, 0x0);
        gbc.writeMem(0xbf86, { 0xcb, 0x2e });
        gbc.writeMem(0xfa1d, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x56c);
        EXPECT(gbc.pc(), 0xbf88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf86), 0xcb);
        EXPECT(gbc.readMem(0xbf87), 0x2e);
        EXPECT(gbc.readMem(0xfa1d), 0xeb);
        // CB 2E 005B
        gbc.setState(0xd9d5, 0xfaa7, 0xceb0, 0xd7, 0xb7ec, 0xe2ca, 0x0, 0x1);
        gbc.writeMem(0xd9d5, { 0xcb, 0x2e });
        gbc.writeMem(0xe2ca, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xfaa7);
        EXPECT(gbc.pc(), 0xd9d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9d5), 0xcb);
        EXPECT(gbc.readMem(0xd9d6), 0x2e);
        EXPECT(gbc.readMem(0xe2ca), 0xe3);
        // CB 2E 005C
        gbc.setState(0x725e, 0xd755, 0x2850, 0xe7c3, 0xe6fa, 0x7d51, 0x0, 0x0);
        gbc.writeMem(0x725e, { 0xcb, 0x2e });
        gbc.writeMem(0x7d51, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd755);
        EXPECT(gbc.pc(), 0x7260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2E 0061
        gbc.setState(0xa3ca, 0x1fe4, 0x8210, 0x4ea9, 0x5573, 0xb80b, 0x0, 0x1);
        gbc.writeMem(0xa3ca, { 0xcb, 0x2e });
        gbc.writeMem(0xb80b, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1fe4);
        EXPECT(gbc.pc(), 0xa3cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ca), 0xcb);
        EXPECT(gbc.readMem(0xa3cb), 0x2e);
        EXPECT(gbc.readMem(0xb80b), 0x2e);
        // CB 2E 0062
        gbc.setState(0x9251, 0xe6ad, 0x3c00, 0x2f49, 0xd32b, 0xf89e, 0x0, 0x0);
        gbc.writeMem(0x9251, { 0xcb, 0x2e });
        gbc.writeMem(0xf89e, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe6ad);
        EXPECT(gbc.pc(), 0x9253);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9251), 0xcb);
        EXPECT(gbc.readMem(0x9252), 0x2e);
        EXPECT(gbc.readMem(0xf89e), 0x28);
        // CB 2E 0063
        gbc.setState(0xb477, 0xb366, 0x3c0, 0x2522, 0x7265, 0xbdb9, 0x0, 0x0);
        gbc.writeMem(0xb477, { 0xcb, 0x2e });
        gbc.writeMem(0xbdb9, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb366);
        EXPECT(gbc.pc(), 0xb479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb477), 0xcb);
        EXPECT(gbc.readMem(0xb478), 0x2e);
        EXPECT(gbc.readMem(0xbdb9), 0x1a);
        // CB 2E 006A
        gbc.setState(0x82c3, 0xbd6d, 0x4d20, 0xa169, 0xc202, 0x949a, 0x0, 0x1);
        gbc.writeMem(0x82c3, { 0xcb, 0x2e });
        gbc.writeMem(0x949a, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbd6d);
        EXPECT(gbc.pc(), 0x82c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c3), 0xcb);
        EXPECT(gbc.readMem(0x82c4), 0x2e);
        EXPECT(gbc.readMem(0x949a), 0x7);
        // CB 2E 006D
        gbc.setState(0xcf7d, 0x4bd9, 0x9450, 0x3ce6, 0x612e, 0xa497, 0x1, 0x0);
        gbc.writeMem(0xa497, { 0xa3 });
        gbc.writeMem(0xcf7d, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4bd9);
        EXPECT(gbc.pc(), 0xcf7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa497), 0xd1);
        EXPECT(gbc.readMem(0xcf7d), 0xcb);
        EXPECT(gbc.readMem(0xcf7e), 0x2e);
        // CB 2E 006F
        gbc.setState(0xa223, 0xd8c8, 0x5230, 0xe93d, 0x3a44, 0xe09e, 0x0, 0x1);
        gbc.writeMem(0xa223, { 0xcb, 0x2e });
        gbc.writeMem(0xe09e, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd8c8);
        EXPECT(gbc.pc(), 0xa225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa223), 0xcb);
        EXPECT(gbc.readMem(0xa224), 0x2e);
        EXPECT(gbc.readMem(0xe09e), 0x1e);
        // CB 2E 0070
        gbc.setState(0x325a, 0x5f82, 0x56f0, 0xac28, 0x9bec, 0x8791, 0x0, 0x0);
        gbc.writeMem(0x325a, { 0xcb, 0x2e });
        gbc.writeMem(0x8791, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5f82);
        EXPECT(gbc.pc(), 0x325c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8791), 0xef);
        // CB 2E 0073
        gbc.setState(0xbefc, 0x4e41, 0x4c30, 0xce1a, 0xc6d2, 0xee4f, 0x0, 0x1);
        gbc.writeMem(0xbefc, { 0xcb, 0x2e });
        gbc.writeMem(0xee4f, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4e41);
        EXPECT(gbc.pc(), 0xbefe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbefc), 0xcb);
        EXPECT(gbc.readMem(0xbefd), 0x2e);
        EXPECT(gbc.readMem(0xee4f), 0xec);
        // CB 2E 0076
        gbc.setState(0x5e93, 0x378c, 0x3ea0, 0xc221, 0xf4ed, 0x94ff, 0x1, 0x0);
        gbc.writeMem(0x5e93, { 0xcb, 0x2e });
        gbc.writeMem(0x94ff, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x378c);
        EXPECT(gbc.pc(), 0x5e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ff), 0x4);
        // CB 2E 0077
        gbc.setState(0xbdc3, 0xf981, 0x7710, 0xe8d, 0xe090, 0xacaf, 0x0, 0x1);
        gbc.writeMem(0xacaf, { 0x1c });
        gbc.writeMem(0xbdc3, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf981);
        EXPECT(gbc.pc(), 0xbdc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacaf), 0xe);
        EXPECT(gbc.readMem(0xbdc3), 0xcb);
        EXPECT(gbc.readMem(0xbdc4), 0x2e);
        // CB 2E 0078
        gbc.setState(0x5ca6, 0xce15, 0x14a0, 0x5ae, 0xeb92, 0xdc5d, 0x0, 0x0);
        gbc.writeMem(0x5ca6, { 0xcb, 0x2e });
        gbc.writeMem(0xdc5d, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xce15);
        EXPECT(gbc.pc(), 0x5ca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc5d), 0xf4);
        // CB 2E 007A
        gbc.setState(0xd7f0, 0xfaf2, 0x3090, 0xe0b6, 0xf89b, 0xee7b, 0x1, 0x1);
        gbc.writeMem(0xd7f0, { 0xcb, 0x2e });
        gbc.writeMem(0xee7b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xfaf2);
        EXPECT(gbc.pc(), 0xd7f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f0), 0xcb);
        EXPECT(gbc.readMem(0xd7f1), 0x2e);
        EXPECT(gbc.readMem(0xee7b), 0x3f);
        // CB 2E 007B
        gbc.setState(0xe271, 0x2df2, 0xb720, 0xd8b7, 0xcae2, 0xf371, 0x0, 0x0);
        gbc.writeMem(0xe271, { 0xcb, 0x2e });
        gbc.writeMem(0xf371, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2df2);
        EXPECT(gbc.pc(), 0xe273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe271), 0xcb);
        EXPECT(gbc.readMem(0xe272), 0x2e);
        EXPECT(gbc.readMem(0xf371), 0xfd);
        // CB 2E 007C
        gbc.setState(0xee3a, 0x9a41, 0x2320, 0x8733, 0x6900, 0xa96a, 0x0, 0x0);
        gbc.writeMem(0xa96a, { 0xc0 });
        gbc.writeMem(0xee3a, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9a41);
        EXPECT(gbc.pc(), 0xee3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96a), 0xe0);
        EXPECT(gbc.readMem(0xee3a), 0xcb);
        EXPECT(gbc.readMem(0xee3b), 0x2e);
        // CB 2E 007D
        gbc.setState(0x599b, 0x69d6, 0x7840, 0x39cb, 0xb848, 0xd8d0, 0x0, 0x1);
        gbc.writeMem(0x599b, { 0xcb, 0x2e });
        gbc.writeMem(0xd8d0, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x69d6);
        EXPECT(gbc.pc(), 0x599d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8d0), 0x2);
        // CB 2E 007F
        gbc.setState(0x2978, 0xe52d, 0x9560, 0x35e6, 0x1d30, 0xe3b7, 0x1, 0x0);
        gbc.writeMem(0x2978, { 0xcb, 0x2e });
        gbc.writeMem(0xe3b7, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe52d);
        EXPECT(gbc.pc(), 0x297a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b7), 0x3c);
        // CB 2E 0082
        gbc.setState(0x569d, 0x4d3d, 0xf400, 0x22ab, 0x83ea, 0xae1f, 0x1, 0x0);
        gbc.writeMem(0x569d, { 0xcb, 0x2e });
        gbc.writeMem(0xae1f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4d3d);
        EXPECT(gbc.pc(), 0x569f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae1f), 0x3f);
        // CB 2E 0085
        gbc.setState(0x9e9f, 0xbfc8, 0xcf00, 0x7bd7, 0x1460, 0xc2fb, 0x0, 0x0);
        gbc.writeMem(0x9e9f, { 0xcb, 0x2e });
        gbc.writeMem(0xc2fb, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xbfc8);
        EXPECT(gbc.pc(), 0x9ea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e9f), 0xcb);
        EXPECT(gbc.readMem(0x9ea0), 0x2e);
        EXPECT(gbc.readMem(0xc2fb), 0xcf);
        // CB 2E 0087
        gbc.setState(0xc5c0, 0x84fb, 0x23c0, 0x53c1, 0xf1ea, 0xdf18, 0x1, 0x0);
        gbc.writeMem(0xc5c0, { 0xcb, 0x2e });
        gbc.writeMem(0xdf18, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x84fb);
        EXPECT(gbc.pc(), 0xc5c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c0), 0xcb);
        EXPECT(gbc.readMem(0xc5c1), 0x2e);
        EXPECT(gbc.readMem(0xdf18), 0x8);
        // CB 2E 008A
        gbc.setState(0x330c, 0x7f99, 0x8b50, 0xde5b, 0x9e6a, 0xc93e, 0x0, 0x1);
        gbc.writeMem(0x330c, { 0xcb, 0x2e });
        gbc.writeMem(0xc93e, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x7f99);
        EXPECT(gbc.pc(), 0x330e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc93e), 0xd1);
        // CB 2E 008B
        gbc.setState(0xad63, 0x481, 0xc2f0, 0x81c, 0x81f5, 0xcd06, 0x1, 0x1);
        gbc.writeMem(0xad63, { 0xcb, 0x2e });
        gbc.writeMem(0xcd06, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x481);
        EXPECT(gbc.pc(), 0xad65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad63), 0xcb);
        EXPECT(gbc.readMem(0xad64), 0x2e);
        EXPECT(gbc.readMem(0xcd06), 0xc);
        // CB 2E 008C
        gbc.setState(0xeda7, 0x9c8a, 0xd650, 0xf01c, 0x822d, 0x8525, 0x0, 0x0);
        gbc.writeMem(0x8525, { 0x37 });
        gbc.writeMem(0xeda7, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9c8a);
        EXPECT(gbc.pc(), 0xeda9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8525), 0x1b);
        EXPECT(gbc.readMem(0xeda7), 0xcb);
        EXPECT(gbc.readMem(0xeda8), 0x2e);
        // CB 2E 008E
        gbc.setState(0xca00, 0x270, 0xc2e0, 0x21cb, 0x3a2a, 0x914a, 0x1, 0x1);
        gbc.writeMem(0x914a, { 0xa5 });
        gbc.writeMem(0xca00, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x270);
        EXPECT(gbc.pc(), 0xca02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x914a), 0xd2);
        EXPECT(gbc.readMem(0xca00), 0xcb);
        EXPECT(gbc.readMem(0xca01), 0x2e);
        // CB 2E 008F
        gbc.setState(0x7c4d, 0x53d2, 0x8c70, 0xd78b, 0x9762, 0xb436, 0x0, 0x0);
        gbc.writeMem(0x7c4d, { 0xcb, 0x2e });
        gbc.writeMem(0xb436, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x53d2);
        EXPECT(gbc.pc(), 0x7c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb436), 0xfb);
        // CB 2E 0090
        gbc.setState(0x484, 0x77b4, 0x90f0, 0xbb2e, 0x82ef, 0xee17, 0x0, 0x1);
        gbc.writeMem(0x484, { 0xcb, 0x2e });
        gbc.writeMem(0xee17, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x77b4);
        EXPECT(gbc.pc(), 0x486);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee17), 0xe2);
        // CB 2E 0092
        gbc.setState(0x7920, 0x10dc, 0x12b0, 0x26d9, 0xb554, 0xc7ba, 0x1, 0x1);
        gbc.writeMem(0x7920, { 0xcb, 0x2e });
        gbc.writeMem(0xc7ba, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x10dc);
        EXPECT(gbc.pc(), 0x7922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ba), 0xdc);
        // CB 2E 0093
        gbc.setState(0x8b00, 0x924c, 0xb030, 0xb474, 0x5b21, 0xf331, 0x0, 0x1);
        gbc.writeMem(0x8b00, { 0xcb, 0x2e });
        gbc.writeMem(0xf331, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x924c);
        EXPECT(gbc.pc(), 0x8b02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b00), 0xcb);
        EXPECT(gbc.readMem(0x8b01), 0x2e);
        EXPECT(gbc.readMem(0xf331), 0xd4);
        // CB 2E 0094
        gbc.setState(0x9f27, 0x430d, 0x75e0, 0xc0ba, 0x9410, 0xb1aa, 0x0, 0x0);
        gbc.writeMem(0x9f27, { 0xcb, 0x2e });
        gbc.writeMem(0xb1aa, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x430d);
        EXPECT(gbc.pc(), 0x9f29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f27), 0xcb);
        EXPECT(gbc.readMem(0x9f28), 0x2e);
        EXPECT(gbc.readMem(0xb1aa), 0xc3);
        // CB 2E 0097
        gbc.setState(0x72d6, 0xbf2a, 0x1f40, 0x3e56, 0x73e0, 0xbc84, 0x0, 0x1);
        gbc.writeMem(0x72d6, { 0xcb, 0x2e });
        gbc.writeMem(0xbc84, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbf2a);
        EXPECT(gbc.pc(), 0x72d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc84), 0xc5);
        // CB 2E 0098
        gbc.setState(0xda3, 0xfd44, 0x8790, 0x87b2, 0x122c, 0xbe08, 0x0, 0x0);
        gbc.writeMem(0xda3, { 0xcb, 0x2e });
        gbc.writeMem(0xbe08, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfd44);
        EXPECT(gbc.pc(), 0xda5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe08), 0xcc);
        // CB 2E 009C
        gbc.setState(0x54c4, 0x6631, 0x4a30, 0x1c25, 0xf5be, 0xbd53, 0x0, 0x1);
        gbc.writeMem(0x54c4, { 0xcb, 0x2e });
        gbc.writeMem(0xbd53, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6631);
        EXPECT(gbc.pc(), 0x54c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd53), 0x39);
        // CB 2E 009E
        gbc.setState(0x2eeb, 0x2f81, 0x8010, 0x6614, 0xf105, 0xc462, 0x0, 0x1);
        gbc.writeMem(0x2eeb, { 0xcb, 0x2e });
        gbc.writeMem(0xc462, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2f81);
        EXPECT(gbc.pc(), 0x2eed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc462), 0xf0);
        // CB 2E 00A0
        gbc.setState(0x657b, 0x349d, 0x2a20, 0xa717, 0x88fa, 0xb8f1, 0x0, 0x1);
        gbc.writeMem(0x657b, { 0xcb, 0x2e });
        gbc.writeMem(0xb8f1, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x349d);
        EXPECT(gbc.pc(), 0x657d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f1), 0xf8);
        // CB 2E 00A1
        gbc.setState(0x3359, 0x12, 0x9b40, 0x662b, 0x7c3d, 0xb28d, 0x0, 0x1);
        gbc.writeMem(0x3359, { 0xcb, 0x2e });
        gbc.writeMem(0xb28d, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x12);
        EXPECT(gbc.pc(), 0x335b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb28d), 0xf0);
        // CB 2E 00A3
        gbc.setState(0xa134, 0xaa7b, 0xf2c0, 0x8c81, 0xd040, 0xf6fc, 0x0, 0x1);
        gbc.writeMem(0xa134, { 0xcb, 0x2e });
        gbc.writeMem(0xf6fc, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xaa7b);
        EXPECT(gbc.pc(), 0xa136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa134), 0xcb);
        EXPECT(gbc.readMem(0xa135), 0x2e);
        EXPECT(gbc.readMem(0xf6fc), 0xc3);
        // CB 2E 00A7
        gbc.setState(0x453d, 0x1342, 0xfd0, 0x30af, 0x5f84, 0x9abf, 0x1, 0x1);
        gbc.writeMem(0x453d, { 0xcb, 0x2e });
        gbc.writeMem(0x9abf, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1342);
        EXPECT(gbc.pc(), 0x453f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9abf), 0x13);
        // CB 2E 00A9
        gbc.setState(0x4d1b, 0x2f29, 0x95b0, 0x51fa, 0x3a1b, 0xa124, 0x1, 0x0);
        gbc.writeMem(0x4d1b, { 0xcb, 0x2e });
        gbc.writeMem(0xa124, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2f29);
        EXPECT(gbc.pc(), 0x4d1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa124), 0xd2);
        // CB 2E 00AB
        gbc.setState(0xec89, 0xa7d2, 0x8840, 0x985e, 0x5d89, 0xc46f, 0x0, 0x1);
        gbc.writeMem(0xc46f, { 0xcb });
        gbc.writeMem(0xec89, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa7d2);
        EXPECT(gbc.pc(), 0xec8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc46f), 0xe5);
        EXPECT(gbc.readMem(0xec89), 0xcb);
        EXPECT(gbc.readMem(0xec8a), 0x2e);
        // CB 2E 00AF
        gbc.setState(0xf11, 0x5d74, 0xa1f0, 0x7740, 0xd2aa, 0x9aeb, 0x0, 0x1);
        gbc.writeMem(0xf11, { 0xcb, 0x2e });
        gbc.writeMem(0x9aeb, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5d74);
        EXPECT(gbc.pc(), 0xf13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aeb), 0xc8);
        // CB 2E 00B2
        gbc.setState(0x59f8, 0xe8a9, 0xcc20, 0x1ef1, 0x1171, 0xc331, 0x0, 0x1);
        gbc.writeMem(0x59f8, { 0xcb, 0x2e });
        gbc.writeMem(0xc331, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe8a9);
        EXPECT(gbc.pc(), 0x59fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc331), 0x3d);
        // CB 2E 00B4
        gbc.setState(0xb3d8, 0xc0ee, 0x1d00, 0x17a3, 0x27e4, 0xf3ef, 0x1, 0x1);
        gbc.writeMem(0xb3d8, { 0xcb, 0x2e });
        gbc.writeMem(0xf3ef, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc0ee);
        EXPECT(gbc.pc(), 0xb3da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d8), 0xcb);
        EXPECT(gbc.readMem(0xb3d9), 0x2e);
        EXPECT(gbc.readMem(0xf3ef), 0x1e);
        // CB 2E 00B5
        gbc.setState(0x1dc9, 0x7a27, 0x3500, 0x445, 0x8e6c, 0x825e, 0x0, 0x0);
        gbc.writeMem(0x1dc9, { 0xcb, 0x2e });
        gbc.writeMem(0x825e, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7a27);
        EXPECT(gbc.pc(), 0x1dcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x825e), 0xf4);
        // CB 2E 00B6
        gbc.setState(0x6cbd, 0x15ac, 0x2a60, 0x1061, 0x5a80, 0x8376, 0x1, 0x0);
        gbc.writeMem(0x6cbd, { 0xcb, 0x2e });
        gbc.writeMem(0x8376, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x15ac);
        EXPECT(gbc.pc(), 0x6cbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8376), 0xe7);
        // CB 2E 00B7
        gbc.setState(0x86a6, 0xfc15, 0xe280, 0x813c, 0xdd36, 0xa6b2, 0x0, 0x0);
        gbc.writeMem(0x86a6, { 0xcb, 0x2e });
        gbc.writeMem(0xa6b2, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfc15);
        EXPECT(gbc.pc(), 0x86a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a6), 0xcb);
        EXPECT(gbc.readMem(0x86a7), 0x2e);
        EXPECT(gbc.readMem(0xa6b2), 0xd0);
        // CB 2E 00B8
        gbc.setState(0x9ed7, 0xedfe, 0xb710, 0x42c6, 0xb503, 0xb27a, 0x0, 0x0);
        gbc.writeMem(0x9ed7, { 0xcb, 0x2e });
        gbc.writeMem(0xb27a, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xedfe);
        EXPECT(gbc.pc(), 0x9ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ed7), 0xcb);
        EXPECT(gbc.readMem(0x9ed8), 0x2e);
        EXPECT(gbc.readMem(0xb27a), 0xef);
        // CB 2E 00BA
        gbc.setState(0xf8, 0x58ae, 0x1560, 0xfef7, 0xb819, 0x95e9, 0x0, 0x0);
        gbc.writeMem(0xf8, { 0xcb, 0x2e });
        gbc.writeMem(0x95e9, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x58ae);
        EXPECT(gbc.pc(), 0xfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e9), 0x14);
        // CB 2E 00BF
        gbc.setState(0xa41, 0x9025, 0x8a60, 0xdc38, 0x9ac4, 0xd088, 0x1, 0x0);
        gbc.writeMem(0xa41, { 0xcb, 0x2e });
        gbc.writeMem(0xd088, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x9025);
        EXPECT(gbc.pc(), 0xa43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd088), 0xf);
        // CB 2E 00C1
        gbc.setState(0xef7b, 0x3b, 0x23d0, 0x7dd2, 0x4747, 0x83f5, 0x1, 0x0);
        gbc.writeMem(0x83f5, { 0x34 });
        gbc.writeMem(0xef7b, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3b);
        EXPECT(gbc.pc(), 0xef7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f5), 0x1a);
        EXPECT(gbc.readMem(0xef7b), 0xcb);
        EXPECT(gbc.readMem(0xef7c), 0x2e);
        // CB 2E 00C3
        gbc.setState(0x4890, 0x6fb3, 0x6be0, 0x1099, 0xe3b, 0xf365, 0x1, 0x0);
        gbc.writeMem(0x4890, { 0xcb, 0x2e });
        gbc.writeMem(0xf365, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x6fb3);
        EXPECT(gbc.pc(), 0x4892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf365), 0x13);
        // CB 2E 00C4
        gbc.setState(0x5baa, 0xc1f1, 0x3460, 0xf335, 0x3ae6, 0xe1f5, 0x0, 0x0);
        gbc.writeMem(0x5baa, { 0xcb, 0x2e });
        gbc.writeMem(0xe1f5, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc1f1);
        EXPECT(gbc.pc(), 0x5bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1f5), 0xd1);
        // CB 2E 00C6
        gbc.setState(0xafb4, 0x953f, 0x1dd0, 0xc762, 0x72a7, 0xe30a, 0x0, 0x0);
        gbc.writeMem(0xafb4, { 0xcb, 0x2e });
        gbc.writeMem(0xe30a, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x953f);
        EXPECT(gbc.pc(), 0xafb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafb4), 0xcb);
        EXPECT(gbc.readMem(0xafb5), 0x2e);
        EXPECT(gbc.readMem(0xe30a), 0xcb);
        // CB 2E 00C7
        gbc.setState(0x490b, 0x79c8, 0xe2c0, 0x7fc0, 0x7761, 0xaf7d, 0x0, 0x1);
        gbc.writeMem(0x490b, { 0xcb, 0x2e });
        gbc.writeMem(0xaf7d, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x79c8);
        EXPECT(gbc.pc(), 0x490d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf7d), 0xe8);
        // CB 2E 00C8
        gbc.setState(0x2ba3, 0x3a4f, 0x1570, 0x7a15, 0x31de, 0x9a52, 0x1, 0x1);
        gbc.writeMem(0x2ba3, { 0xcb, 0x2e });
        gbc.writeMem(0x9a52, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3a4f);
        EXPECT(gbc.pc(), 0x2ba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a52), 0x22);
        // CB 2E 00CB
        gbc.setState(0x1fb2, 0x918c, 0x3b20, 0x7fd5, 0xad74, 0xc7a2, 0x1, 0x1);
        gbc.writeMem(0x1fb2, { 0xcb, 0x2e });
        gbc.writeMem(0xc7a2, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x918c);
        EXPECT(gbc.pc(), 0x1fb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7a2), 0xd1);
        // CB 2E 00CF
        gbc.setState(0xd961, 0xf6e3, 0x4f50, 0xf883, 0x4304, 0xd794, 0x0, 0x0);
        gbc.writeMem(0xd794, { 0x4b });
        gbc.writeMem(0xd961, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf6e3);
        EXPECT(gbc.pc(), 0xd963);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd794), 0x25);
        EXPECT(gbc.readMem(0xd961), 0xcb);
        EXPECT(gbc.readMem(0xd962), 0x2e);
        // CB 2E 00D0
        gbc.setState(0x2f93, 0xaf28, 0xc8e0, 0xa896, 0x4d58, 0xc823, 0x1, 0x0);
        gbc.writeMem(0x2f93, { 0xcb, 0x2e });
        gbc.writeMem(0xc823, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xaf28);
        EXPECT(gbc.pc(), 0x2f95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc823), 0x3e);
        // CB 2E 00D4
        gbc.setState(0x7a96, 0x7f7e, 0x1ec0, 0xdc4b, 0xcd11, 0xb8e2, 0x1, 0x1);
        gbc.writeMem(0x7a96, { 0xcb, 0x2e });
        gbc.writeMem(0xb8e2, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7f7e);
        EXPECT(gbc.pc(), 0x7a98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8e2), 0x1c);
        // CB 2E 00D6
        gbc.setState(0x8e5f, 0x97a6, 0x51b0, 0x8fc7, 0x68df, 0xb6fc, 0x1, 0x0);
        gbc.writeMem(0x8e5f, { 0xcb, 0x2e });
        gbc.writeMem(0xb6fc, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x97a6);
        EXPECT(gbc.pc(), 0x8e61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5f), 0xcb);
        EXPECT(gbc.readMem(0x8e60), 0x2e);
        EXPECT(gbc.readMem(0xb6fc), 0x3e);
        // CB 2E 00DA
        gbc.setState(0xe6e7, 0x3273, 0xd220, 0x15ee, 0x31, 0xdd9e, 0x1, 0x1);
        gbc.writeMem(0xdd9e, { 0xbc });
        gbc.writeMem(0xe6e7, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3273);
        EXPECT(gbc.pc(), 0xe6e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd9e), 0xde);
        EXPECT(gbc.readMem(0xe6e7), 0xcb);
        EXPECT(gbc.readMem(0xe6e8), 0x2e);
        // CB 2E 00DC
        gbc.setState(0xc665, 0x121, 0x57a0, 0x62c5, 0xc18d, 0xbc52, 0x0, 0x0);
        gbc.writeMem(0xbc52, { 0x11 });
        gbc.writeMem(0xc665, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x121);
        EXPECT(gbc.pc(), 0xc667);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc52), 0x8);
        EXPECT(gbc.readMem(0xc665), 0xcb);
        EXPECT(gbc.readMem(0xc666), 0x2e);
        // CB 2E 00DE
        gbc.setState(0x2b48, 0x3716, 0x5bc0, 0xc1f0, 0x7f7e, 0xcad1, 0x1, 0x0);
        gbc.writeMem(0x2b48, { 0xcb, 0x2e });
        gbc.writeMem(0xcad1, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3716);
        EXPECT(gbc.pc(), 0x2b4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad1), 0x7);
        // CB 2E 00E0
        gbc.setState(0x5621, 0xc5db, 0x72e0, 0x6e83, 0xcc3, 0xf9b8, 0x0, 0x1);
        gbc.writeMem(0x5621, { 0xcb, 0x2e });
        gbc.writeMem(0xf9b8, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc5db);
        EXPECT(gbc.pc(), 0x5623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9b8), 0xc6);
        // CB 2E 00E1
        gbc.setState(0x7d0d, 0x9df3, 0xeb70, 0x596d, 0xfcbe, 0x8c11, 0x1, 0x0);
        gbc.writeMem(0x7d0d, { 0xcb, 0x2e });
        gbc.writeMem(0x8c11, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9df3);
        EXPECT(gbc.pc(), 0x7d0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c11), 0xec);
        // CB 2E 00E2
        gbc.setState(0x92b8, 0xe2d8, 0x9cb0, 0x8783, 0xbdf6, 0xb685, 0x1, 0x1);
        gbc.writeMem(0x92b8, { 0xcb, 0x2e });
        gbc.writeMem(0xb685, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe2d8);
        EXPECT(gbc.pc(), 0x92ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92b8), 0xcb);
        EXPECT(gbc.readMem(0x92b9), 0x2e);
        EXPECT(gbc.readMem(0xb685), 0xc5);
        // CB 2E 00EA
        gbc.setState(0x60a5, 0x5202, 0xb10, 0x2679, 0xceca, 0xae91, 0x1, 0x1);
        gbc.writeMem(0x60a5, { 0xcb, 0x2e });
        gbc.writeMem(0xae91, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5202);
        EXPECT(gbc.pc(), 0x60a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae91), 0xc);
        // CB 2E 00ED
        gbc.setState(0x75e2, 0xe177, 0x9e50, 0x52f1, 0x9ec1, 0x83d6, 0x0, 0x0);
        gbc.writeMem(0x75e2, { 0xcb, 0x2e });
        gbc.writeMem(0x83d6, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe177);
        EXPECT(gbc.pc(), 0x75e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83d6), 0x3c);
        // CB 2E 00F0
        gbc.setState(0x4d01, 0x115, 0x45a0, 0x451d, 0x1284, 0xe6c1, 0x1, 0x0);
        gbc.writeMem(0x4d01, { 0xcb, 0x2e });
        gbc.writeMem(0xe6c1, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x115);
        EXPECT(gbc.pc(), 0x4d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6c1), 0x3a);
        // CB 2E 00F3
        gbc.setState(0x2c0b, 0x741b, 0xe960, 0x5818, 0x46b3, 0xb9ed, 0x1, 0x0);
        gbc.writeMem(0x2c0b, { 0xcb, 0x2e });
        gbc.writeMem(0xb9ed, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x741b);
        EXPECT(gbc.pc(), 0x2c0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9ed), 0xd0);
        // CB 2E 00F4
        gbc.setState(0x16dc, 0x3987, 0x4010, 0x9ecf, 0x47e2, 0xed47, 0x1, 0x0);
        gbc.writeMem(0x16dc, { 0xcb, 0x2e });
        gbc.writeMem(0xed47, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3987);
        EXPECT(gbc.pc(), 0x16de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed47), 0xc6);
        // CB 2E 00F7
        gbc.setState(0xcfd4, 0xe35f, 0x47f0, 0x2e39, 0xb8ed, 0xf65b, 0x1, 0x1);
        gbc.writeMem(0xcfd4, { 0xcb, 0x2e });
        gbc.writeMem(0xf65b, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe35f);
        EXPECT(gbc.pc(), 0xcfd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd4), 0xcb);
        EXPECT(gbc.readMem(0xcfd5), 0x2e);
        EXPECT(gbc.readMem(0xf65b), 0xdb);
        // CB 2E 00FA
        gbc.setState(0x2f2c, 0x46b3, 0xdc30, 0x8f9a, 0xf1fc, 0xc0a0, 0x1, 0x0);
        gbc.writeMem(0x2f2c, { 0xcb, 0x2e });
        gbc.writeMem(0xc0a0, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x46b3);
        EXPECT(gbc.pc(), 0x2f2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0a0), 0x19);
        // CB 2E 00FF
        gbc.setState(0xde8, 0x51ae, 0x450, 0xbfcb, 0xcd87, 0xb7f4, 0x0, 0x0);
        gbc.writeMem(0xde8, { 0xcb, 0x2e });
        gbc.writeMem(0xb7f4, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x51ae);
        EXPECT(gbc.pc(), 0xdea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f4), 0x4);
        // CB 2E 0103
        gbc.setState(0x594d, 0x81f8, 0x5c30, 0x3623, 0xcf7d, 0xbb02, 0x1, 0x0);
        gbc.writeMem(0x594d, { 0xcb, 0x2e });
        gbc.writeMem(0xbb02, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x81f8);
        EXPECT(gbc.pc(), 0x594f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb02), 0xe);
        // CB 2E 0104
        gbc.setState(0xc93c, 0xf607, 0xc220, 0xa571, 0x36cd, 0xd47f, 0x1, 0x0);
        gbc.writeMem(0xc93c, { 0xcb, 0x2e });
        gbc.writeMem(0xd47f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf607);
        EXPECT(gbc.pc(), 0xc93e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc93c), 0xcb);
        EXPECT(gbc.readMem(0xc93d), 0x2e);
        EXPECT(gbc.readMem(0xd47f), 0xd1);
        // CB 2E 0105
        gbc.setState(0x5e9b, 0xc04b, 0x9e80, 0xd592, 0x84f8, 0xcf33, 0x1, 0x1);
        gbc.writeMem(0x5e9b, { 0xcb, 0x2e });
        gbc.writeMem(0xcf33, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc04b);
        EXPECT(gbc.pc(), 0x5e9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf33), 0xca);
        // CB 2E 0106
        gbc.setState(0x5422, 0x6122, 0xed00, 0xfb76, 0x3031, 0xb704, 0x1, 0x0);
        gbc.writeMem(0x5422, { 0xcb, 0x2e });
        gbc.writeMem(0xb704, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6122);
        EXPECT(gbc.pc(), 0x5424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb704), 0xf9);
        // CB 2E 0108
        gbc.setState(0xb110, 0xfd48, 0xc990, 0xd6b1, 0xe774, 0xaa96, 0x0, 0x0);
        gbc.writeMem(0xaa96, { 0xc4 });
        gbc.writeMem(0xb110, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfd48);
        EXPECT(gbc.pc(), 0xb112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa96), 0xe2);
        EXPECT(gbc.readMem(0xb110), 0xcb);
        EXPECT(gbc.readMem(0xb111), 0x2e);
        // CB 2E 0109
        gbc.setState(0x6623, 0xa9a0, 0xc690, 0x6d1, 0x8aaa, 0xb739, 0x0, 0x1);
        gbc.writeMem(0x6623, { 0xcb, 0x2e });
        gbc.writeMem(0xb739, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa9a0);
        EXPECT(gbc.pc(), 0x6625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb739), 0x17);
        // CB 2E 0114
        gbc.setState(0xdf22, 0xeb22, 0x49d0, 0x322f, 0x1bb0, 0xa637, 0x0, 0x0);
        gbc.writeMem(0xa637, { 0x2 });
        gbc.writeMem(0xdf22, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xeb22);
        EXPECT(gbc.pc(), 0xdf24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa637), 0x1);
        EXPECT(gbc.readMem(0xdf22), 0xcb);
        EXPECT(gbc.readMem(0xdf23), 0x2e);
        // CB 2E 0116
        gbc.setState(0x9aaa, 0xe916, 0x790, 0x9c8, 0xe45b, 0xeafc, 0x0, 0x1);
        gbc.writeMem(0x9aaa, { 0xcb, 0x2e });
        gbc.writeMem(0xeafc, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe916);
        EXPECT(gbc.pc(), 0x9aac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aaa), 0xcb);
        EXPECT(gbc.readMem(0x9aab), 0x2e);
        EXPECT(gbc.readMem(0xeafc), 0xcc);
        // CB 2E 0117
        gbc.setState(0xb5ba, 0xbb22, 0x1a70, 0x13de, 0x3a0a, 0x96b7, 0x0, 0x1);
        gbc.writeMem(0x96b7, { 0xc9 });
        gbc.writeMem(0xb5ba, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xbb22);
        EXPECT(gbc.pc(), 0xb5bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96b7), 0xe4);
        EXPECT(gbc.readMem(0xb5ba), 0xcb);
        EXPECT(gbc.readMem(0xb5bb), 0x2e);
        // CB 2E 0119
        gbc.setState(0xb9e9, 0x59c8, 0x6b90, 0x6b5b, 0x7ad3, 0xebbc, 0x0, 0x0);
        gbc.writeMem(0xb9e9, { 0xcb, 0x2e });
        gbc.writeMem(0xebbc, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x59c8);
        EXPECT(gbc.pc(), 0xb9eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9e9), 0xcb);
        EXPECT(gbc.readMem(0xb9ea), 0x2e);
        EXPECT(gbc.readMem(0xebbc), 0x10);
        // CB 2E 011B
        gbc.setState(0x630a, 0x3662, 0x17b0, 0xb64f, 0x2765, 0x855b, 0x1, 0x0);
        gbc.writeMem(0x630a, { 0xcb, 0x2e });
        gbc.writeMem(0x855b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3662);
        EXPECT(gbc.pc(), 0x630c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x855b), 0x35);
        // CB 2E 011C
        gbc.setState(0x5226, 0x8792, 0x2130, 0x9c8e, 0xe6b6, 0xbc14, 0x0, 0x1);
        gbc.writeMem(0x5226, { 0xcb, 0x2e });
        gbc.writeMem(0xbc14, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8792);
        EXPECT(gbc.pc(), 0x5228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc14), 0x2a);
        // CB 2E 011D
        gbc.setState(0x60c3, 0x6155, 0x650, 0x6818, 0xb214, 0xb163, 0x0, 0x1);
        gbc.writeMem(0x60c3, { 0xcb, 0x2e });
        gbc.writeMem(0xb163, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6155);
        EXPECT(gbc.pc(), 0x60c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb163), 0x2c);
        // CB 2E 011E
        gbc.setState(0xea9, 0xd127, 0x3b10, 0xb39c, 0x4f09, 0xeab5, 0x0, 0x0);
        gbc.writeMem(0xea9, { 0xcb, 0x2e });
        gbc.writeMem(0xeab5, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd127);
        EXPECT(gbc.pc(), 0xeab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeab5), 0xb);
        // CB 2E 0120
        gbc.setState(0xc5ce, 0xf3e0, 0xd480, 0x420a, 0xf3ce, 0xe4c3, 0x0, 0x0);
        gbc.writeMem(0xc5ce, { 0xcb, 0x2e });
        gbc.writeMem(0xe4c3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf3e0);
        EXPECT(gbc.pc(), 0xc5d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ce), 0xcb);
        EXPECT(gbc.readMem(0xc5cf), 0x2e);
        EXPECT(gbc.readMem(0xe4c3), 0xe4);
        // CB 2E 0127
        gbc.setState(0x7b7c, 0xe70d, 0x3830, 0xd2f7, 0xa883, 0x9841, 0x1, 0x1);
        gbc.writeMem(0x7b7c, { 0xcb, 0x2e });
        gbc.writeMem(0x9841, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe70d);
        EXPECT(gbc.pc(), 0x7b7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9841), 0x3c);
        // CB 2E 012A
        gbc.setState(0x56f6, 0x5d44, 0x1060, 0x248, 0x5496, 0xcd0a, 0x1, 0x1);
        gbc.writeMem(0x56f6, { 0xcb, 0x2e });
        gbc.writeMem(0xcd0a, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5d44);
        EXPECT(gbc.pc(), 0x56f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd0a), 0xfa);
        // CB 2E 012C
        gbc.setState(0x2bdb, 0x4393, 0x7b20, 0x4411, 0xef2f, 0xad09, 0x1, 0x0);
        gbc.writeMem(0x2bdb, { 0xcb, 0x2e });
        gbc.writeMem(0xad09, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4393);
        EXPECT(gbc.pc(), 0x2bdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad09), 0xde);
        // CB 2E 012E
        gbc.setState(0x12f7, 0x313f, 0xa110, 0x658e, 0xfc03, 0xc9d2, 0x0, 0x0);
        gbc.writeMem(0x12f7, { 0xcb, 0x2e });
        gbc.writeMem(0xc9d2, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x313f);
        EXPECT(gbc.pc(), 0x12f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9d2), 0xea);
        // CB 2E 012F
        gbc.setState(0x7cc, 0xf8c8, 0x620, 0xe3fc, 0x3404, 0xa701, 0x0, 0x1);
        gbc.writeMem(0x7cc, { 0xcb, 0x2e });
        gbc.writeMem(0xa701, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf8c8);
        EXPECT(gbc.pc(), 0x7ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa701), 0xcc);
        // CB 2E 0132
        gbc.setState(0xd74f, 0x2f50, 0x1f10, 0x548a, 0x3d1b, 0xa233, 0x0, 0x1);
        gbc.writeMem(0xa233, { 0xa5 });
        gbc.writeMem(0xd74f, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2f50);
        EXPECT(gbc.pc(), 0xd751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa233), 0xd2);
        EXPECT(gbc.readMem(0xd74f), 0xcb);
        EXPECT(gbc.readMem(0xd750), 0x2e);
        // CB 2E 0133
        gbc.setState(0x1d4c, 0x4b48, 0xc8e0, 0x6cb7, 0x18bf, 0xcf5c, 0x0, 0x1);
        gbc.writeMem(0x1d4c, { 0xcb, 0x2e });
        gbc.writeMem(0xcf5c, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4b48);
        EXPECT(gbc.pc(), 0x1d4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf5c), 0xf8);
        // CB 2E 0134
        gbc.setState(0xcdd8, 0x83cf, 0xd8f0, 0x56fc, 0xb308, 0xa20e, 0x0, 0x1);
        gbc.writeMem(0xa20e, { 0x3 });
        gbc.writeMem(0xcdd8, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x83cf);
        EXPECT(gbc.pc(), 0xcdda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa20e), 0x1);
        EXPECT(gbc.readMem(0xcdd8), 0xcb);
        EXPECT(gbc.readMem(0xcdd9), 0x2e);
        // CB 2E 0136
        gbc.setState(0x9cc7, 0x912d, 0x2230, 0xc6b, 0xd941, 0xce27, 0x1, 0x1);
        gbc.writeMem(0x9cc7, { 0xcb, 0x2e });
        gbc.writeMem(0xce27, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x912d);
        EXPECT(gbc.pc(), 0x9cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cc7), 0xcb);
        EXPECT(gbc.readMem(0x9cc8), 0x2e);
        EXPECT(gbc.readMem(0xce27), 0xdd);
        // CB 2E 0138
        gbc.setState(0xec92, 0xd9d7, 0xfc70, 0x80a2, 0x9b0, 0x91f6, 0x0, 0x1);
        gbc.writeMem(0x91f6, { 0x5a });
        gbc.writeMem(0xec92, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd9d7);
        EXPECT(gbc.pc(), 0xec94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f6), 0x2d);
        EXPECT(gbc.readMem(0xec92), 0xcb);
        EXPECT(gbc.readMem(0xec93), 0x2e);
        // CB 2E 0139
        gbc.setState(0xb85e, 0x39b7, 0xb9a0, 0x146f, 0xbaed, 0xf2fe, 0x1, 0x1);
        gbc.writeMem(0xb85e, { 0xcb, 0x2e });
        gbc.writeMem(0xf2fe, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x39b7);
        EXPECT(gbc.pc(), 0xb860);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb85e), 0xcb);
        EXPECT(gbc.readMem(0xb85f), 0x2e);
        EXPECT(gbc.readMem(0xf2fe), 0xc9);
        // CB 2E 013B
        gbc.setState(0xa442, 0xa768, 0x8780, 0xf4d8, 0xf6f6, 0xf43b, 0x0, 0x0);
        gbc.writeMem(0xa442, { 0xcb, 0x2e });
        gbc.writeMem(0xf43b, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa768);
        EXPECT(gbc.pc(), 0xa444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa442), 0xcb);
        EXPECT(gbc.readMem(0xa443), 0x2e);
        EXPECT(gbc.readMem(0xf43b), 0xde);
        // CB 2E 013E
        gbc.setState(0x7510, 0x83ae, 0xeee0, 0xca01, 0x48e4, 0xb687, 0x1, 0x0);
        gbc.writeMem(0x7510, { 0xcb, 0x2e });
        gbc.writeMem(0xb687, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x83ae);
        EXPECT(gbc.pc(), 0x7512);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb687), 0x1a);
        // CB 2E 0143
        gbc.setState(0x9a23, 0xe0e6, 0xf010, 0xa586, 0x5055, 0xb7f5, 0x0, 0x1);
        gbc.writeMem(0x9a23, { 0xcb, 0x2e });
        gbc.writeMem(0xb7f5, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe0e6);
        EXPECT(gbc.pc(), 0x9a25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a23), 0xcb);
        EXPECT(gbc.readMem(0x9a24), 0x2e);
        EXPECT(gbc.readMem(0xb7f5), 0x22);
        // CB 2E 0146
        gbc.setState(0x6f9a, 0x2c96, 0x9260, 0x3148, 0x2530, 0xd386, 0x1, 0x0);
        gbc.writeMem(0x6f9a, { 0xcb, 0x2e });
        gbc.writeMem(0xd386, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2c96);
        EXPECT(gbc.pc(), 0x6f9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd386), 0x32);
        // CB 2E 0147
        gbc.setState(0x998b, 0x9f06, 0x9d40, 0xa6ac, 0xb3cc, 0xcebc, 0x1, 0x0);
        gbc.writeMem(0x998b, { 0xcb, 0x2e });
        gbc.writeMem(0xcebc, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9f06);
        EXPECT(gbc.pc(), 0x998d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x998b), 0xcb);
        EXPECT(gbc.readMem(0x998c), 0x2e);
        EXPECT(gbc.readMem(0xcebc), 0xc7);
        // CB 2E 014D
        gbc.setState(0xab9e, 0xb785, 0x4660, 0xa1c7, 0x8110, 0xcec1, 0x0, 0x0);
        gbc.writeMem(0xab9e, { 0xcb, 0x2e });
        gbc.writeMem(0xcec1, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb785);
        EXPECT(gbc.pc(), 0xaba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab9e), 0xcb);
        EXPECT(gbc.readMem(0xab9f), 0x2e);
        EXPECT(gbc.readMem(0xcec1), 0x15);
        // CB 2E 014E
        gbc.setState(0xdf55, 0x77e6, 0x9600, 0xfe08, 0x3e19, 0xf32b, 0x1, 0x0);
        gbc.writeMem(0xdf55, { 0xcb, 0x2e });
        gbc.writeMem(0xf32b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x77e6);
        EXPECT(gbc.pc(), 0xdf57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf55), 0xcb);
        EXPECT(gbc.readMem(0xdf56), 0x2e);
        EXPECT(gbc.readMem(0xf32b), 0xf9);
        // CB 2E 014F
        gbc.setState(0x1c7b, 0x7d25, 0x4af0, 0xa303, 0xe105, 0xd37b, 0x0, 0x0);
        gbc.writeMem(0x1c7b, { 0xcb, 0x2e });
        gbc.writeMem(0xd37b, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7d25);
        EXPECT(gbc.pc(), 0x1c7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37b), 0xd9);
        // CB 2E 0152
        gbc.setState(0xb8c7, 0xa833, 0xa1c0, 0x8ab4, 0x5837, 0xffe9, 0x1, 0x1);
        gbc.writeMem(0xb8c7, { 0xcb, 0x2e });
        gbc.writeMem(0xffe9, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa833);
        EXPECT(gbc.pc(), 0xb8c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8c7), 0xcb);
        EXPECT(gbc.readMem(0xb8c8), 0x2e);
        EXPECT(gbc.readMem(0xffe9), 0xe0);
        // CB 2E 0153
        gbc.setState(0x89f6, 0x739f, 0xd2f0, 0xae3b, 0xbd25, 0xbab2, 0x1, 0x1);
        gbc.writeMem(0x89f6, { 0xcb, 0x2e });
        gbc.writeMem(0xbab2, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x739f);
        EXPECT(gbc.pc(), 0x89f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89f6), 0xcb);
        EXPECT(gbc.readMem(0x89f7), 0x2e);
        EXPECT(gbc.readMem(0xbab2), 0xf9);
        // CB 2E 0156
        gbc.setState(0x5da7, 0xc69e, 0xb7a0, 0xcaf2, 0xffab, 0xafb5, 0x0, 0x0);
        gbc.writeMem(0x5da7, { 0xcb, 0x2e });
        gbc.writeMem(0xafb5, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc69e);
        EXPECT(gbc.pc(), 0x5da9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafb5), 0x5);
        // CB 2E 0159
        gbc.setState(0x58e4, 0x1ab0, 0xef30, 0xe41d, 0x1cdf, 0xf9e6, 0x0, 0x1);
        gbc.writeMem(0x58e4, { 0xcb, 0x2e });
        gbc.writeMem(0xf9e6, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1ab0);
        EXPECT(gbc.pc(), 0x58e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9e6), 0xe);
        // CB 2E 015D
        gbc.setState(0x6332, 0xbb34, 0x6ba0, 0x548c, 0xcd09, 0xf6e7, 0x0, 0x0);
        gbc.writeMem(0x6332, { 0xcb, 0x2e });
        gbc.writeMem(0xf6e7, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xbb34);
        EXPECT(gbc.pc(), 0x6334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf6e7), 0xc5);
        // CB 2E 015E
        gbc.setState(0x368f, 0xd1dd, 0xa8f0, 0xb6af, 0x5bdd, 0x8e78, 0x0, 0x0);
        gbc.writeMem(0x368f, { 0xcb, 0x2e });
        gbc.writeMem(0x8e78, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd1dd);
        EXPECT(gbc.pc(), 0x3691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e78), 0x6);
        // CB 2E 0160
        gbc.setState(0xe98, 0x959a, 0x70b0, 0x14e6, 0x94b5, 0xe109, 0x0, 0x0);
        gbc.writeMem(0xe98, { 0xcb, 0x2e });
        gbc.writeMem(0xe109, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x959a);
        EXPECT(gbc.pc(), 0xe9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe109), 0xfa);
        // CB 2E 0162
        gbc.setState(0xba2f, 0xb5d, 0xbc60, 0x376a, 0xac9b, 0x80fd, 0x1, 0x1);
        gbc.writeMem(0x80fd, { 0x7f });
        gbc.writeMem(0xba2f, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb5d);
        EXPECT(gbc.pc(), 0xba31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80fd), 0x3f);
        EXPECT(gbc.readMem(0xba2f), 0xcb);
        EXPECT(gbc.readMem(0xba30), 0x2e);
        // CB 2E 0163
        gbc.setState(0xab5b, 0x1986, 0xb340, 0x6c9, 0x21f7, 0xb4c8, 0x1, 0x0);
        gbc.writeMem(0xab5b, { 0xcb, 0x2e });
        gbc.writeMem(0xb4c8, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1986);
        EXPECT(gbc.pc(), 0xab5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab5b), 0xcb);
        EXPECT(gbc.readMem(0xab5c), 0x2e);
        EXPECT(gbc.readMem(0xb4c8), 0xd6);
        // CB 2E 0165
        gbc.setState(0xa2ea, 0xb097, 0x5d80, 0x635a, 0x8061, 0xf9c9, 0x1, 0x0);
        gbc.writeMem(0xa2ea, { 0xcb, 0x2e });
        gbc.writeMem(0xf9c9, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb097);
        EXPECT(gbc.pc(), 0xa2ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ea), 0xcb);
        EXPECT(gbc.readMem(0xa2eb), 0x2e);
        EXPECT(gbc.readMem(0xf9c9), 0x25);
        // CB 2E 0167
        gbc.setState(0x5982, 0xe7c1, 0x34d0, 0x871a, 0x9f12, 0x8fe7, 0x1, 0x1);
        gbc.writeMem(0x5982, { 0xcb, 0x2e });
        gbc.writeMem(0x8fe7, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe7c1);
        EXPECT(gbc.pc(), 0x5984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fe7), 0x14);
        // CB 2E 0168
        gbc.setState(0xe1c8, 0x4f4b, 0xeb30, 0xa640, 0xe31c, 0x8057, 0x0, 0x0);
        gbc.writeMem(0x8057, { 0x7e });
        gbc.writeMem(0xe1c8, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4f4b);
        EXPECT(gbc.pc(), 0xe1ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8057), 0x3f);
        EXPECT(gbc.readMem(0xe1c8), 0xcb);
        EXPECT(gbc.readMem(0xe1c9), 0x2e);
        // CB 2E 016B
        gbc.setState(0xcf46, 0x6d96, 0x24e0, 0x8aed, 0xb7d4, 0xa92f, 0x1, 0x0);
        gbc.writeMem(0xa92f, { 0x99 });
        gbc.writeMem(0xcf46, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6d96);
        EXPECT(gbc.pc(), 0xcf48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa92f), 0xcc);
        EXPECT(gbc.readMem(0xcf46), 0xcb);
        EXPECT(gbc.readMem(0xcf47), 0x2e);
        // CB 2E 016C
        gbc.setState(0x1b30, 0xc32a, 0xfe50, 0xd02b, 0x1092, 0x9049, 0x1, 0x1);
        gbc.writeMem(0x1b30, { 0xcb, 0x2e });
        gbc.writeMem(0x9049, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc32a);
        EXPECT(gbc.pc(), 0x1b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9049), 0xd7);
        // CB 2E 0172
        gbc.setState(0x8722, 0x45bf, 0x8d10, 0xcc31, 0xe486, 0x8d69, 0x0, 0x1);
        gbc.writeMem(0x8722, { 0xcb, 0x2e });
        gbc.writeMem(0x8d69, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x45bf);
        EXPECT(gbc.pc(), 0x8724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8722), 0xcb);
        EXPECT(gbc.readMem(0x8723), 0x2e);
        EXPECT(gbc.readMem(0x8d69), 0xe3);
        // CB 2E 0179
        gbc.setState(0x33a8, 0x2bc5, 0x5df0, 0xff5b, 0x320a, 0xd1d8, 0x1, 0x0);
        gbc.writeMem(0x33a8, { 0xcb, 0x2e });
        gbc.writeMem(0xd1d8, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2bc5);
        EXPECT(gbc.pc(), 0x33aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d8), 0x28);
        // CB 2E 017A
        gbc.setState(0xd09, 0x75cc, 0x5e90, 0xc38a, 0xe724, 0xf966, 0x0, 0x1);
        gbc.writeMem(0xd09, { 0xcb, 0x2e });
        gbc.writeMem(0xf966, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x75cc);
        EXPECT(gbc.pc(), 0xd0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf966), 0xef);
        // CB 2E 017D
        gbc.setState(0xd3e3, 0x526c, 0x9ce0, 0x8b33, 0x162, 0x9928, 0x0, 0x0);
        gbc.writeMem(0x9928, { 0xc7 });
        gbc.writeMem(0xd3e3, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x526c);
        EXPECT(gbc.pc(), 0xd3e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9928), 0xe3);
        EXPECT(gbc.readMem(0xd3e3), 0xcb);
        EXPECT(gbc.readMem(0xd3e4), 0x2e);
        // CB 2E 017E
        gbc.setState(0x2db5, 0x679, 0x3ec0, 0x6df6, 0x1066, 0xfe68, 0x1, 0x1);
        gbc.writeMem(0x2db5, { 0xcb, 0x2e });
        gbc.writeMem(0xfe68, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x679);
        EXPECT(gbc.pc(), 0x2db7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe68), 0x6);
        // CB 2E 0182
        gbc.setState(0xdbb, 0x268e, 0x8550, 0x178e, 0xe877, 0xecbf, 0x1, 0x0);
        gbc.writeMem(0xdbb, { 0xcb, 0x2e });
        gbc.writeMem(0xecbf, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x268e);
        EXPECT(gbc.pc(), 0xdbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbf), 0x33);
        // CB 2E 0184
        gbc.setState(0x25ab, 0xb523, 0xc200, 0xcee, 0x9ea4, 0x92fd, 0x1, 0x1);
        gbc.writeMem(0x25ab, { 0xcb, 0x2e });
        gbc.writeMem(0x92fd, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb523);
        EXPECT(gbc.pc(), 0x25ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92fd), 0x10);
        // CB 2E 0186
        gbc.setState(0x45a, 0x53e8, 0x85c0, 0xed9b, 0xcb0e, 0xc9b1, 0x1, 0x0);
        gbc.writeMem(0x45a, { 0xcb, 0x2e });
        gbc.writeMem(0xc9b1, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x53e8);
        EXPECT(gbc.pc(), 0x45c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b1), 0xf9);
        // CB 2E 0188
        gbc.setState(0xede4, 0x70b9, 0xca30, 0x914d, 0x5203, 0x843d, 0x1, 0x0);
        gbc.writeMem(0x843d, { 0x2e });
        gbc.writeMem(0xede4, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x70b9);
        EXPECT(gbc.pc(), 0xede6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x843d), 0x17);
        EXPECT(gbc.readMem(0xede4), 0xcb);
        EXPECT(gbc.readMem(0xede5), 0x2e);
        // CB 2E 018E
        gbc.setState(0xcc0a, 0xd3dd, 0x2f30, 0xc44c, 0xd680, 0xf86e, 0x1, 0x1);
        gbc.writeMem(0xcc0a, { 0xcb, 0x2e });
        gbc.writeMem(0xf86e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd3dd);
        EXPECT(gbc.pc(), 0xcc0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc0a), 0xcb);
        EXPECT(gbc.readMem(0xcc0b), 0x2e);
        EXPECT(gbc.readMem(0xf86e), 0x3f);
        // CB 2E 018F
        gbc.setState(0xf29, 0x9d6d, 0x2320, 0x3c25, 0x811e, 0xcec1, 0x0, 0x0);
        gbc.writeMem(0xf29, { 0xcb, 0x2e });
        gbc.writeMem(0xcec1, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9d6d);
        EXPECT(gbc.pc(), 0xf2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcec1), 0x15);
        // CB 2E 0191
        gbc.setState(0x8b12, 0x5864, 0xc280, 0xac2, 0x45d4, 0xd9f2, 0x0, 0x1);
        gbc.writeMem(0x8b12, { 0xcb, 0x2e });
        gbc.writeMem(0xd9f2, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5864);
        EXPECT(gbc.pc(), 0x8b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b12), 0xcb);
        EXPECT(gbc.readMem(0x8b13), 0x2e);
        EXPECT(gbc.readMem(0xd9f2), 0xee);
        // CB 2E 0192
        gbc.setState(0xaa2b, 0x66a7, 0x3340, 0xef92, 0xf4b, 0xa4d4, 0x1, 0x0);
        gbc.writeMem(0xa4d4, { 0x50 });
        gbc.writeMem(0xaa2b, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x66a7);
        EXPECT(gbc.pc(), 0xaa2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4d4), 0x28);
        EXPECT(gbc.readMem(0xaa2b), 0xcb);
        EXPECT(gbc.readMem(0xaa2c), 0x2e);
        // CB 2E 0193
        gbc.setState(0x52ef, 0xe080, 0x3280, 0x3fc2, 0x4d59, 0xd45e, 0x0, 0x1);
        gbc.writeMem(0x52ef, { 0xcb, 0x2e });
        gbc.writeMem(0xd45e, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe080);
        EXPECT(gbc.pc(), 0x52f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd45e), 0xe7);
        // CB 2E 0197
        gbc.setState(0x1b4e, 0xad1e, 0xd860, 0x94aa, 0x3022, 0x8bb6, 0x0, 0x0);
        gbc.writeMem(0x1b4e, { 0xcb, 0x2e });
        gbc.writeMem(0x8bb6, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xad1e);
        EXPECT(gbc.pc(), 0x1b50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb6), 0x32);
        // CB 2E 0199
        gbc.setState(0x3a20, 0xe10, 0xb410, 0x1ba8, 0xa815, 0x8fbf, 0x1, 0x0);
        gbc.writeMem(0x3a20, { 0xcb, 0x2e });
        gbc.writeMem(0x8fbf, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe10);
        EXPECT(gbc.pc(), 0x3a22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fbf), 0x22);
        // CB 2E 019C
        gbc.setState(0xbb7a, 0x360f, 0x3d10, 0x5aa1, 0x34af, 0xd450, 0x1, 0x0);
        gbc.writeMem(0xbb7a, { 0xcb, 0x2e });
        gbc.writeMem(0xd450, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x360f);
        EXPECT(gbc.pc(), 0xbb7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb7a), 0xcb);
        EXPECT(gbc.readMem(0xbb7b), 0x2e);
        EXPECT(gbc.readMem(0xd450), 0xdf);
        // CB 2E 019E
        gbc.setState(0x2b2a, 0x3c8f, 0x9330, 0xed73, 0x283d, 0xb495, 0x0, 0x1);
        gbc.writeMem(0x2b2a, { 0xcb, 0x2e });
        gbc.writeMem(0xb495, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3c8f);
        EXPECT(gbc.pc(), 0x2b2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb495), 0xc6);
        // CB 2E 019F
        gbc.setState(0x53bf, 0x9343, 0xbb60, 0xc750, 0x15a7, 0xfe19, 0x1, 0x1);
        gbc.writeMem(0x53bf, { 0xcb, 0x2e });
        gbc.writeMem(0xfe19, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9343);
        EXPECT(gbc.pc(), 0x53c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfe19), 0xd8);
        // CB 2E 01A0
        gbc.setState(0x45e, 0xb394, 0x6580, 0x7ba8, 0xea55, 0xf45b, 0x1, 0x0);
        gbc.writeMem(0x45e, { 0xcb, 0x2e });
        gbc.writeMem(0xf45b, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb394);
        EXPECT(gbc.pc(), 0x460);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf45b), 0xd2);
        // CB 2E 01A1
        gbc.setState(0xe676, 0xaf0, 0x5d30, 0x49f2, 0x237f, 0xd7e6, 0x0, 0x1);
        gbc.writeMem(0xd7e6, { 0xce });
        gbc.writeMem(0xe676, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xaf0);
        EXPECT(gbc.pc(), 0xe678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7e6), 0xe7);
        EXPECT(gbc.readMem(0xe676), 0xcb);
        EXPECT(gbc.readMem(0xe677), 0x2e);
        // CB 2E 01A2
        gbc.setState(0x6cdd, 0x3427, 0x5ef0, 0x39e4, 0x7e6f, 0xca01, 0x1, 0x1);
        gbc.writeMem(0x6cdd, { 0xcb, 0x2e });
        gbc.writeMem(0xca01, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3427);
        EXPECT(gbc.pc(), 0x6cdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca01), 0x2);
        // CB 2E 01A4
        gbc.setState(0x4330, 0x28ae, 0x8bc0, 0x8064, 0x5ff4, 0xa5ef, 0x1, 0x1);
        gbc.writeMem(0x4330, { 0xcb, 0x2e });
        gbc.writeMem(0xa5ef, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x28ae);
        EXPECT(gbc.pc(), 0x4332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ef), 0xe5);
        // CB 2E 01A6
        gbc.setState(0xee50, 0x52c8, 0x6410, 0x81f9, 0x316e, 0xc3d3, 0x1, 0x1);
        gbc.writeMem(0xc3d3, { 0xb2 });
        gbc.writeMem(0xee50, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x52c8);
        EXPECT(gbc.pc(), 0xee52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d3), 0xd9);
        EXPECT(gbc.readMem(0xee50), 0xcb);
        EXPECT(gbc.readMem(0xee51), 0x2e);
        // CB 2E 01A9
        gbc.setState(0xb87b, 0x9f19, 0x2f0, 0x91d3, 0x1d89, 0xa747, 0x0, 0x1);
        gbc.writeMem(0xa747, { 0xe7 });
        gbc.writeMem(0xb87b, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9f19);
        EXPECT(gbc.pc(), 0xb87d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa747), 0xf3);
        EXPECT(gbc.readMem(0xb87b), 0xcb);
        EXPECT(gbc.readMem(0xb87c), 0x2e);
        // CB 2E 01AA
        gbc.setState(0xcaf2, 0x3e7a, 0x7290, 0xea72, 0xbbce, 0xa22b, 0x1, 0x0);
        gbc.writeMem(0xa22b, { 0x11 });
        gbc.writeMem(0xcaf2, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3e7a);
        EXPECT(gbc.pc(), 0xcaf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa22b), 0x8);
        EXPECT(gbc.readMem(0xcaf2), 0xcb);
        EXPECT(gbc.readMem(0xcaf3), 0x2e);
        // CB 2E 01AB
        gbc.setState(0x20b8, 0xd47a, 0xca60, 0x5148, 0x570e, 0x8962, 0x1, 0x0);
        gbc.writeMem(0x20b8, { 0xcb, 0x2e });
        gbc.writeMem(0x8962, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd47a);
        EXPECT(gbc.pc(), 0x20ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8962), 0x3b);
        // CB 2E 01AC
        gbc.setState(0x75e3, 0x1af9, 0x1800, 0x1596, 0x789d, 0xf313, 0x0, 0x0);
        gbc.writeMem(0x75e3, { 0xcb, 0x2e });
        gbc.writeMem(0xf313, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1af9);
        EXPECT(gbc.pc(), 0x75e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf313), 0x3e);
        // CB 2E 01B4
        gbc.setState(0xd532, 0x7a45, 0x4bb0, 0x3c0f, 0xde84, 0xceed, 0x1, 0x1);
        gbc.writeMem(0xceed, { 0x5d });
        gbc.writeMem(0xd532, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7a45);
        EXPECT(gbc.pc(), 0xd534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceed), 0x2e);
        EXPECT(gbc.readMem(0xd532), 0xcb);
        EXPECT(gbc.readMem(0xd533), 0x2e);
        // CB 2E 01B5
        gbc.setState(0x9082, 0x930d, 0x8e60, 0xca, 0xb36f, 0xbecd, 0x0, 0x1);
        gbc.writeMem(0x9082, { 0xcb, 0x2e });
        gbc.writeMem(0xbecd, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x930d);
        EXPECT(gbc.pc(), 0x9084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9082), 0xcb);
        EXPECT(gbc.readMem(0x9083), 0x2e);
        EXPECT(gbc.readMem(0xbecd), 0x7);
        // CB 2E 01B7
        gbc.setState(0x50ec, 0xf1d2, 0xfba0, 0x674d, 0xaf7, 0x95e6, 0x1, 0x1);
        gbc.writeMem(0x50ec, { 0xcb, 0x2e });
        gbc.writeMem(0x95e6, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf1d2);
        EXPECT(gbc.pc(), 0x50ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e6), 0x25);
        // CB 2E 01B8
        gbc.setState(0xad47, 0x6563, 0xf550, 0x97d7, 0x7711, 0xa79b, 0x1, 0x0);
        gbc.writeMem(0xa79b, { 0x33 });
        gbc.writeMem(0xad47, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6563);
        EXPECT(gbc.pc(), 0xad49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa79b), 0x19);
        EXPECT(gbc.readMem(0xad47), 0xcb);
        EXPECT(gbc.readMem(0xad48), 0x2e);
        // CB 2E 01B9
        gbc.setState(0x950b, 0x444d, 0x2380, 0xb701, 0xe4b2, 0xcafa, 0x1, 0x1);
        gbc.writeMem(0x950b, { 0xcb, 0x2e });
        gbc.writeMem(0xcafa, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x444d);
        EXPECT(gbc.pc(), 0x950d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x950b), 0xcb);
        EXPECT(gbc.readMem(0x950c), 0x2e);
        EXPECT(gbc.readMem(0xcafa), 0x4);
        // CB 2E 01BA
        gbc.setState(0xb2d3, 0xd3b, 0xb6d0, 0xcc10, 0x69cb, 0x8181, 0x0, 0x1);
        gbc.writeMem(0x8181, { 0x51 });
        gbc.writeMem(0xb2d3, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd3b);
        EXPECT(gbc.pc(), 0xb2d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8181), 0x28);
        EXPECT(gbc.readMem(0xb2d3), 0xcb);
        EXPECT(gbc.readMem(0xb2d4), 0x2e);
        // CB 2E 01BE
        gbc.setState(0x5f99, 0xee10, 0xb6e0, 0xc1d4, 0xd320, 0xa488, 0x1, 0x0);
        gbc.writeMem(0x5f99, { 0xcb, 0x2e });
        gbc.writeMem(0xa488, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xee10);
        EXPECT(gbc.pc(), 0x5f9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa488), 0xfc);
        // CB 2E 01BF
        gbc.setState(0xaf15, 0xa5f9, 0x6eb0, 0xd10, 0xaf55, 0xf293, 0x1, 0x0);
        gbc.writeMem(0xaf15, { 0xcb, 0x2e });
        gbc.writeMem(0xf293, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa5f9);
        EXPECT(gbc.pc(), 0xaf17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf15), 0xcb);
        EXPECT(gbc.readMem(0xaf16), 0x2e);
        EXPECT(gbc.readMem(0xf293), 0xfe);
        // CB 2E 01C0
        gbc.setState(0x688d, 0xb46c, 0xe690, 0x2d66, 0xf36b, 0x9dcd, 0x0, 0x1);
        gbc.writeMem(0x688d, { 0xcb, 0x2e });
        gbc.writeMem(0x9dcd, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb46c);
        EXPECT(gbc.pc(), 0x688f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dcd), 0xf8);
        // CB 2E 01C1
        gbc.setState(0xd1ab, 0x7e04, 0xc3d0, 0x5104, 0x7b06, 0x925b, 0x1, 0x1);
        gbc.writeMem(0x925b, { 0xc });
        gbc.writeMem(0xd1ab, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7e04);
        EXPECT(gbc.pc(), 0xd1ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x925b), 0x6);
        EXPECT(gbc.readMem(0xd1ab), 0xcb);
        EXPECT(gbc.readMem(0xd1ac), 0x2e);
        // CB 2E 01C2
        gbc.setState(0xee21, 0x1454, 0x64a0, 0x2d59, 0x98a7, 0xc998, 0x1, 0x1);
        gbc.writeMem(0xc998, { 0xa5 });
        gbc.writeMem(0xee21, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1454);
        EXPECT(gbc.pc(), 0xee23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc998), 0xd2);
        EXPECT(gbc.readMem(0xee21), 0xcb);
        EXPECT(gbc.readMem(0xee22), 0x2e);
        // CB 2E 01C4
        gbc.setState(0x4699, 0xc990, 0x8910, 0x444e, 0xa908, 0xbe1a, 0x1, 0x0);
        gbc.writeMem(0x4699, { 0xcb, 0x2e });
        gbc.writeMem(0xbe1a, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc990);
        EXPECT(gbc.pc(), 0x469b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe1a), 0x37);
        // CB 2E 01C5
        gbc.setState(0x23b6, 0xddbf, 0xfb30, 0xaddc, 0x9fb0, 0xea29, 0x0, 0x0);
        gbc.writeMem(0x23b6, { 0xcb, 0x2e });
        gbc.writeMem(0xea29, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xddbf);
        EXPECT(gbc.pc(), 0x23b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea29), 0xc2);
        // CB 2E 01C6
        gbc.setState(0xe669, 0xb6ba, 0xccc0, 0x124f, 0x9dcc, 0x90dd, 0x0, 0x1);
        gbc.writeMem(0x90dd, { 0x42 });
        gbc.writeMem(0xe669, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb6ba);
        EXPECT(gbc.pc(), 0xe66b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90dd), 0x21);
        EXPECT(gbc.readMem(0xe669), 0xcb);
        EXPECT(gbc.readMem(0xe66a), 0x2e);
        // CB 2E 01C8
        gbc.setState(0x8754, 0xb80b, 0xa560, 0x8464, 0x2ac1, 0xb674, 0x0, 0x1);
        gbc.writeMem(0x8754, { 0xcb, 0x2e });
        gbc.writeMem(0xb674, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb80b);
        EXPECT(gbc.pc(), 0x8756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8754), 0xcb);
        EXPECT(gbc.readMem(0x8755), 0x2e);
        EXPECT(gbc.readMem(0xb674), 0xf6);
        // CB 2E 01C9
        gbc.setState(0x75b3, 0x6b39, 0x2b40, 0xa740, 0x4385, 0xef81, 0x1, 0x1);
        gbc.writeMem(0x75b3, { 0xcb, 0x2e });
        gbc.writeMem(0xef81, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6b39);
        EXPECT(gbc.pc(), 0x75b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef81), 0xf2);
        // CB 2E 01CC
        gbc.setState(0x429c, 0x31d7, 0xe740, 0x57fc, 0x541b, 0xa142, 0x1, 0x1);
        gbc.writeMem(0x429c, { 0xcb, 0x2e });
        gbc.writeMem(0xa142, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x31d7);
        EXPECT(gbc.pc(), 0x429e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa142), 0xe);
        // CB 2E 01CE
        gbc.setState(0xd971, 0xe715, 0x1950, 0x1d1f, 0x7cd2, 0xe9cc, 0x0, 0x0);
        gbc.writeMem(0xd971, { 0xcb, 0x2e });
        gbc.writeMem(0xe9cc, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe715);
        EXPECT(gbc.pc(), 0xd973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd971), 0xcb);
        EXPECT(gbc.readMem(0xd972), 0x2e);
        EXPECT(gbc.readMem(0xe9cc), 0x16);
        // CB 2E 01D2
        gbc.setState(0xfe4, 0x7bd1, 0x8260, 0xf580, 0x9ebd, 0xb5d1, 0x0, 0x0);
        gbc.writeMem(0xfe4, { 0xcb, 0x2e });
        gbc.writeMem(0xb5d1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7bd1);
        EXPECT(gbc.pc(), 0xfe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5d1), 0x0);
        // CB 2E 01D4
        gbc.setState(0x67df, 0xf38c, 0x9670, 0x12e6, 0xc8f0, 0xb182, 0x1, 0x0);
        gbc.writeMem(0x67df, { 0xcb, 0x2e });
        gbc.writeMem(0xb182, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf38c);
        EXPECT(gbc.pc(), 0x67e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb182), 0xe7);
        // CB 2E 01D6
        gbc.setState(0xbaf, 0xc353, 0x5650, 0xd11c, 0xbd1c, 0xa9ce, 0x0, 0x0);
        gbc.writeMem(0xbaf, { 0xcb, 0x2e });
        gbc.writeMem(0xa9ce, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc353);
        EXPECT(gbc.pc(), 0xbb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ce), 0xd2);
        // CB 2E 01D7
        gbc.setState(0xef1, 0x99a4, 0x7ba0, 0x63b4, 0x26e7, 0xe360, 0x1, 0x0);
        gbc.writeMem(0xef1, { 0xcb, 0x2e });
        gbc.writeMem(0xe360, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x99a4);
        EXPECT(gbc.pc(), 0xef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe360), 0xe5);
        // CB 2E 01D8
        gbc.setState(0x88ee, 0xe09e, 0x1f0, 0x9791, 0x6dd0, 0x9fda, 0x1, 0x0);
        gbc.writeMem(0x88ee, { 0xcb, 0x2e });
        gbc.writeMem(0x9fda, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe09e);
        EXPECT(gbc.pc(), 0x88f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88ee), 0xcb);
        EXPECT(gbc.readMem(0x88ef), 0x2e);
        EXPECT(gbc.readMem(0x9fda), 0x25);
        // CB 2E 01DA
        gbc.setState(0xa78a, 0xdec, 0xb6a0, 0x7f5, 0xb3ae, 0xb79f, 0x0, 0x0);
        gbc.writeMem(0xa78a, { 0xcb, 0x2e });
        gbc.writeMem(0xb79f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xdec);
        EXPECT(gbc.pc(), 0xa78c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa78a), 0xcb);
        EXPECT(gbc.readMem(0xa78b), 0x2e);
        EXPECT(gbc.readMem(0xb79f), 0xc8);
        // CB 2E 01DB
        gbc.setState(0xed7c, 0xf540, 0x9ca0, 0x768c, 0xf2d3, 0xd840, 0x0, 0x0);
        gbc.writeMem(0xd840, { 0x1c });
        gbc.writeMem(0xed7c, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf540);
        EXPECT(gbc.pc(), 0xed7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd840), 0xe);
        EXPECT(gbc.readMem(0xed7c), 0xcb);
        EXPECT(gbc.readMem(0xed7d), 0x2e);
        // CB 2E 01DC
        gbc.setState(0x90fd, 0xfdbe, 0x15a0, 0x6fca, 0x206e, 0xc381, 0x0, 0x0);
        gbc.writeMem(0x90fd, { 0xcb, 0x2e });
        gbc.writeMem(0xc381, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xfdbe);
        EXPECT(gbc.pc(), 0x90ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90fd), 0xcb);
        EXPECT(gbc.readMem(0x90fe), 0x2e);
        EXPECT(gbc.readMem(0xc381), 0xf9);
        // CB 2E 01E0
        gbc.setState(0xe357, 0xdebb, 0xb640, 0x15d, 0x2079, 0x9d82, 0x0, 0x1);
        gbc.writeMem(0x9d82, { 0x5b });
        gbc.writeMem(0xe357, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xdebb);
        EXPECT(gbc.pc(), 0xe359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d82), 0x2d);
        EXPECT(gbc.readMem(0xe357), 0xcb);
        EXPECT(gbc.readMem(0xe358), 0x2e);
        // CB 2E 01E2
        gbc.setState(0x2fc1, 0x278, 0xefa0, 0xd574, 0x713, 0xb5fa, 0x0, 0x1);
        gbc.writeMem(0x2fc1, { 0xcb, 0x2e });
        gbc.writeMem(0xb5fa, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x278);
        EXPECT(gbc.pc(), 0x2fc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5fa), 0x20);
        // CB 2E 01E3
        gbc.setState(0x9f62, 0x5114, 0x1190, 0x3a73, 0xde77, 0xfd6e, 0x1, 0x1);
        gbc.writeMem(0x9f62, { 0xcb, 0x2e });
        gbc.writeMem(0xfd6e, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5114);
        EXPECT(gbc.pc(), 0x9f64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f62), 0xcb);
        EXPECT(gbc.readMem(0x9f63), 0x2e);
        EXPECT(gbc.readMem(0xfd6e), 0xfa);
        // CB 2E 01E5
        gbc.setState(0xb959, 0x526a, 0x8350, 0xb256, 0x3a0b, 0xb58b, 0x0, 0x1);
        gbc.writeMem(0xb58b, { 0xba });
        gbc.writeMem(0xb959, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x526a);
        EXPECT(gbc.pc(), 0xb95b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb58b), 0xdd);
        EXPECT(gbc.readMem(0xb959), 0xcb);
        EXPECT(gbc.readMem(0xb95a), 0x2e);
        // CB 2E 01E6
        gbc.setState(0x5b7e, 0xe27b, 0xea50, 0xa48d, 0x85f7, 0x884c, 0x1, 0x0);
        gbc.writeMem(0x5b7e, { 0xcb, 0x2e });
        gbc.writeMem(0x884c, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe27b);
        EXPECT(gbc.pc(), 0x5b80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884c), 0xe6);
        // CB 2E 01E8
        gbc.setState(0xb7fd, 0xc4eb, 0xe450, 0xa112, 0x2c63, 0x98bd, 0x1, 0x1);
        gbc.writeMem(0x98bd, { 0x21 });
        gbc.writeMem(0xb7fd, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc4eb);
        EXPECT(gbc.pc(), 0xb7ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98bd), 0x10);
        EXPECT(gbc.readMem(0xb7fd), 0xcb);
        EXPECT(gbc.readMem(0xb7fe), 0x2e);
        // CB 2E 01E9
        gbc.setState(0x1cc8, 0x96d6, 0x64a0, 0xbc12, 0xfa7d, 0xfb19, 0x0, 0x0);
        gbc.writeMem(0x1cc8, { 0xcb, 0x2e });
        gbc.writeMem(0xfb19, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x96d6);
        EXPECT(gbc.pc(), 0x1cca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfb19), 0x22);
        // CB 2E 01EA
        gbc.setState(0x62d8, 0x29b5, 0x1ea0, 0x444, 0x230c, 0xd432, 0x0, 0x1);
        gbc.writeMem(0x62d8, { 0xcb, 0x2e });
        gbc.writeMem(0xd432, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x29b5);
        EXPECT(gbc.pc(), 0x62da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd432), 0x25);
        // CB 2E 01EB
        gbc.setState(0xa7b3, 0x7417, 0xc3c0, 0x4cdd, 0x10bf, 0xebdf, 0x0, 0x0);
        gbc.writeMem(0xa7b3, { 0xcb, 0x2e });
        gbc.writeMem(0xebdf, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7417);
        EXPECT(gbc.pc(), 0xa7b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b3), 0xcb);
        EXPECT(gbc.readMem(0xa7b4), 0x2e);
        EXPECT(gbc.readMem(0xebdf), 0xfd);
        // CB 2E 01EE
        gbc.setState(0x29cd, 0x5943, 0x5680, 0xfeca, 0x57f6, 0xa77b, 0x1, 0x1);
        gbc.writeMem(0x29cd, { 0xcb, 0x2e });
        gbc.writeMem(0xa77b, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5943);
        EXPECT(gbc.pc(), 0x29cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77b), 0x17);
        // CB 2E 01F0
        gbc.setState(0x1aa5, 0xe7b4, 0x6370, 0x3887, 0xceed, 0xbff3, 0x0, 0x1);
        gbc.writeMem(0x1aa5, { 0xcb, 0x2e });
        gbc.writeMem(0xbff3, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe7b4);
        EXPECT(gbc.pc(), 0x1aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff3), 0xcc);
        // CB 2E 01F1
        gbc.setState(0x30ef, 0x8c19, 0x350, 0x8715, 0x7fcc, 0xb845, 0x0, 0x0);
        gbc.writeMem(0x30ef, { 0xcb, 0x2e });
        gbc.writeMem(0xb845, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8c19);
        EXPECT(gbc.pc(), 0x30f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb845), 0xfd);
        // CB 2E 01F3
        gbc.setState(0x4c95, 0x1f24, 0x7a10, 0xc904, 0xe7b, 0x8def, 0x0, 0x0);
        gbc.writeMem(0x4c95, { 0xcb, 0x2e });
        gbc.writeMem(0x8def, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1f24);
        EXPECT(gbc.pc(), 0x4c97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8def), 0xfc);
        // CB 2E 01F4
        gbc.setState(0x3ea9, 0xe6a, 0x66d0, 0xcceb, 0x2511, 0xa9cc, 0x0, 0x0);
        gbc.writeMem(0x3ea9, { 0xcb, 0x2e });
        gbc.writeMem(0xa9cc, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe6a);
        EXPECT(gbc.pc(), 0x3eab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9cc), 0xc);
        // CB 2E 01F5
        gbc.setState(0xd078, 0xfb4, 0x3830, 0xe8af, 0x490b, 0xacfd, 0x1, 0x1);
        gbc.writeMem(0xacfd, { 0x8c });
        gbc.writeMem(0xd078, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xfb4);
        EXPECT(gbc.pc(), 0xd07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacfd), 0xc6);
        EXPECT(gbc.readMem(0xd078), 0xcb);
        EXPECT(gbc.readMem(0xd079), 0x2e);
        // CB 2E 01F7
        gbc.setState(0x62cf, 0x379c, 0x73d0, 0xd249, 0x6054, 0x8213, 0x0, 0x0);
        gbc.writeMem(0x62cf, { 0xcb, 0x2e });
        gbc.writeMem(0x8213, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x379c);
        EXPECT(gbc.pc(), 0x62d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8213), 0xe3);
        // CB 2E 01F9
        gbc.setState(0x5f97, 0xd68b, 0x7f00, 0x91b2, 0xd993, 0x9fd0, 0x0, 0x0);
        gbc.writeMem(0x5f97, { 0xcb, 0x2e });
        gbc.writeMem(0x9fd0, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd68b);
        EXPECT(gbc.pc(), 0x5f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fd0), 0xff);
        // CB 2E 01FB
        gbc.setState(0x6442, 0xa072, 0xe0d0, 0x40fe, 0x3745, 0xaa8b, 0x1, 0x0);
        gbc.writeMem(0x6442, { 0xcb, 0x2e });
        gbc.writeMem(0xaa8b, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa072);
        EXPECT(gbc.pc(), 0x6444);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa8b), 0xdc);
        // CB 2E 01FD
        gbc.setState(0x462c, 0x366b, 0x2540, 0xcab0, 0x20ff, 0xfdd7, 0x1, 0x0);
        gbc.writeMem(0x462c, { 0xcb, 0x2e });
        gbc.writeMem(0xfdd7, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x366b);
        EXPECT(gbc.pc(), 0x462e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdd7), 0xd2);
        // CB 2E 0200
        gbc.setState(0x9671, 0xf8cb, 0xe470, 0xc990, 0xb4e2, 0xd8f3, 0x0, 0x0);
        gbc.writeMem(0x9671, { 0xcb, 0x2e });
        gbc.writeMem(0xd8f3, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf8cb);
        EXPECT(gbc.pc(), 0x9673);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9671), 0xcb);
        EXPECT(gbc.readMem(0x9672), 0x2e);
        EXPECT(gbc.readMem(0xd8f3), 0xc9);
        // CB 2E 0201
        gbc.setState(0x814a, 0xb6b6, 0x1540, 0x1067, 0x8f08, 0xc790, 0x0, 0x0);
        gbc.writeMem(0x814a, { 0xcb, 0x2e });
        gbc.writeMem(0xc790, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb6b6);
        EXPECT(gbc.pc(), 0x814c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x814a), 0xcb);
        EXPECT(gbc.readMem(0x814b), 0x2e);
        EXPECT(gbc.readMem(0xc790), 0x39);
        // CB 2E 0204
        gbc.setState(0xaf08, 0x32b2, 0x3480, 0xc3d1, 0xd3d0, 0xf603, 0x1, 0x0);
        gbc.writeMem(0xaf08, { 0xcb, 0x2e });
        gbc.writeMem(0xf603, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x32b2);
        EXPECT(gbc.pc(), 0xaf0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf08), 0xcb);
        EXPECT(gbc.readMem(0xaf09), 0x2e);
        EXPECT(gbc.readMem(0xf603), 0xc8);
        // CB 2E 0205
        gbc.setState(0x40da, 0xb639, 0x7ae0, 0xc401, 0x723c, 0xd6a7, 0x0, 0x0);
        gbc.writeMem(0x40da, { 0xcb, 0x2e });
        gbc.writeMem(0xd6a7, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb639);
        EXPECT(gbc.pc(), 0x40dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a7), 0x1c);
        // CB 2E 0206
        gbc.setState(0x1199, 0x1263, 0x7670, 0x1c39, 0x2739, 0x8c57, 0x0, 0x1);
        gbc.writeMem(0x1199, { 0xcb, 0x2e });
        gbc.writeMem(0x8c57, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1263);
        EXPECT(gbc.pc(), 0x119b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c57), 0x3);
        // CB 2E 0209
        gbc.setState(0xea0, 0x115, 0x9c0, 0xbb6b, 0x883d, 0xed37, 0x0, 0x0);
        gbc.writeMem(0xea0, { 0xcb, 0x2e });
        gbc.writeMem(0xed37, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x115);
        EXPECT(gbc.pc(), 0xea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed37), 0xcd);
        // CB 2E 020E
        gbc.setState(0x2813, 0xa861, 0x6700, 0xb74e, 0xb959, 0xaea6, 0x1, 0x1);
        gbc.writeMem(0x2813, { 0xcb, 0x2e });
        gbc.writeMem(0xaea6, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa861);
        EXPECT(gbc.pc(), 0x2815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaea6), 0x3a);
        // CB 2E 020F
        gbc.setState(0x91f0, 0xd518, 0x8020, 0x42a8, 0xfbea, 0xa130, 0x1, 0x1);
        gbc.writeMem(0x91f0, { 0xcb, 0x2e });
        gbc.writeMem(0xa130, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd518);
        EXPECT(gbc.pc(), 0x91f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91f0), 0xcb);
        EXPECT(gbc.readMem(0x91f1), 0x2e);
        EXPECT(gbc.readMem(0xa130), 0xe1);
        // CB 2E 0210
        gbc.setState(0x5846, 0x7275, 0x4ce0, 0x1ffd, 0xa748, 0xfd7d, 0x0, 0x1);
        gbc.writeMem(0x5846, { 0xcb, 0x2e });
        gbc.writeMem(0xfd7d, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7275);
        EXPECT(gbc.pc(), 0x5848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd7d), 0xc7);
        // CB 2E 0213
        gbc.setState(0x66e2, 0x554e, 0x9500, 0x4799, 0x1b5a, 0x8875, 0x1, 0x1);
        gbc.writeMem(0x66e2, { 0xcb, 0x2e });
        gbc.writeMem(0x8875, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x554e);
        EXPECT(gbc.pc(), 0x66e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8875), 0x3e);
        // CB 2E 0216
        gbc.setState(0x4fcc, 0x8fdd, 0x6880, 0x5c3d, 0xd206, 0xc09d, 0x0, 0x0);
        gbc.writeMem(0x4fcc, { 0xcb, 0x2e });
        gbc.writeMem(0xc09d, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8fdd);
        EXPECT(gbc.pc(), 0x4fce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc09d), 0x34);
        // CB 2E 0219
        gbc.setState(0xf12, 0x3348, 0x7fe0, 0x216d, 0x1571, 0xcdf0, 0x1, 0x1);
        gbc.writeMem(0xf12, { 0xcb, 0x2e });
        gbc.writeMem(0xcdf0, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3348);
        EXPECT(gbc.pc(), 0xf14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdf0), 0x13);
        // CB 2E 021A
        gbc.setState(0xe246, 0x8391, 0x8eb0, 0x3979, 0xaf8b, 0x990d, 0x0, 0x0);
        gbc.writeMem(0x990d, { 0x48 });
        gbc.writeMem(0xe246, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8391);
        EXPECT(gbc.pc(), 0xe248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x990d), 0x24);
        EXPECT(gbc.readMem(0xe246), 0xcb);
        EXPECT(gbc.readMem(0xe247), 0x2e);
        // CB 2E 021C
        gbc.setState(0xcef2, 0x4e68, 0x2980, 0x9481, 0xf3a4, 0xd248, 0x1, 0x0);
        gbc.writeMem(0xcef2, { 0xcb, 0x2e });
        gbc.writeMem(0xd248, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4e68);
        EXPECT(gbc.pc(), 0xcef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcef2), 0xcb);
        EXPECT(gbc.readMem(0xcef3), 0x2e);
        EXPECT(gbc.readMem(0xd248), 0xf5);
        // CB 2E 021D
        gbc.setState(0x220b, 0x1456, 0xe690, 0x4e9c, 0x9339, 0x9b8d, 0x1, 0x1);
        gbc.writeMem(0x220b, { 0xcb, 0x2e });
        gbc.writeMem(0x9b8d, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1456);
        EXPECT(gbc.pc(), 0x220d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b8d), 0xe0);
        // CB 2E 021E
        gbc.setState(0xce16, 0x6748, 0xf040, 0xdd0a, 0x855f, 0xbe92, 0x0, 0x0);
        gbc.writeMem(0xbe92, { 0x49 });
        gbc.writeMem(0xce16, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6748);
        EXPECT(gbc.pc(), 0xce18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe92), 0x24);
        EXPECT(gbc.readMem(0xce16), 0xcb);
        EXPECT(gbc.readMem(0xce17), 0x2e);
        // CB 2E 021F
        gbc.setState(0x4493, 0xea86, 0x2120, 0xe12f, 0x834c, 0xdaab, 0x1, 0x1);
        gbc.writeMem(0x4493, { 0xcb, 0x2e });
        gbc.writeMem(0xdaab, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xea86);
        EXPECT(gbc.pc(), 0x4495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaab), 0xe2);
        // CB 2E 0220
        gbc.setState(0xd552, 0x691e, 0xfbd0, 0x9e7e, 0xbf4f, 0xbcdf, 0x1, 0x0);
        gbc.writeMem(0xbcdf, { 0xb5 });
        gbc.writeMem(0xd552, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x691e);
        EXPECT(gbc.pc(), 0xd554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcdf), 0xda);
        EXPECT(gbc.readMem(0xd552), 0xcb);
        EXPECT(gbc.readMem(0xd553), 0x2e);
        // CB 2E 0225
        gbc.setState(0x5390, 0xa338, 0x3720, 0x19d5, 0x19ef, 0xf681, 0x1, 0x0);
        gbc.writeMem(0x5390, { 0xcb, 0x2e });
        gbc.writeMem(0xf681, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa338);
        EXPECT(gbc.pc(), 0x5392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf681), 0x1b);
        // CB 2E 022A
        gbc.setState(0x1838, 0x1869, 0xf030, 0x5cd, 0xb556, 0xfdc3, 0x1, 0x1);
        gbc.writeMem(0x1838, { 0xcb, 0x2e });
        gbc.writeMem(0xfdc3, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x1869);
        EXPECT(gbc.pc(), 0x183a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdc3), 0xf0);
        // CB 2E 022E
        gbc.setState(0xdf48, 0x4c96, 0x2790, 0xed3d, 0xb134, 0xcd86, 0x1, 0x0);
        gbc.writeMem(0xcd86, { 0x7 });
        gbc.writeMem(0xdf48, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4c96);
        EXPECT(gbc.pc(), 0xdf4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd86), 0x3);
        EXPECT(gbc.readMem(0xdf48), 0xcb);
        EXPECT(gbc.readMem(0xdf49), 0x2e);
        // CB 2E 022F
        gbc.setState(0x56df, 0xac15, 0x5800, 0x5094, 0xd880, 0x8e9f, 0x1, 0x1);
        gbc.writeMem(0x56df, { 0xcb, 0x2e });
        gbc.writeMem(0x8e9f, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xac15);
        EXPECT(gbc.pc(), 0x56e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e9f), 0xff);
        // CB 2E 0230
        gbc.setState(0x98a, 0xae7, 0x2400, 0xc002, 0xfdbb, 0x8173, 0x0, 0x1);
        gbc.writeMem(0x98a, { 0xcb, 0x2e });
        gbc.writeMem(0x8173, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xae7);
        EXPECT(gbc.pc(), 0x98c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8173), 0xec);
        // CB 2E 0232
        gbc.setState(0xe983, 0x228, 0x590, 0x2578, 0x3c01, 0xda5e, 0x1, 0x0);
        gbc.writeMem(0xda5e, { 0xd3 });
        gbc.writeMem(0xe983, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x228);
        EXPECT(gbc.pc(), 0xe985);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda5e), 0xe9);
        EXPECT(gbc.readMem(0xe983), 0xcb);
        EXPECT(gbc.readMem(0xe984), 0x2e);
        // CB 2E 0233
        gbc.setState(0x9e12, 0x4a84, 0xafd0, 0xf5a2, 0x98bd, 0xf208, 0x1, 0x0);
        gbc.writeMem(0x9e12, { 0xcb, 0x2e });
        gbc.writeMem(0xf208, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4a84);
        EXPECT(gbc.pc(), 0x9e14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e12), 0xcb);
        EXPECT(gbc.readMem(0x9e13), 0x2e);
        EXPECT(gbc.readMem(0xf208), 0xb);
        // CB 2E 0234
        gbc.setState(0x8b45, 0x963b, 0xc8f0, 0x698a, 0x655b, 0xfb9d, 0x1, 0x1);
        gbc.writeMem(0x8b45, { 0xcb, 0x2e });
        gbc.writeMem(0xfb9d, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x963b);
        EXPECT(gbc.pc(), 0x8b47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b45), 0xcb);
        EXPECT(gbc.readMem(0x8b46), 0x2e);
        EXPECT(gbc.readMem(0xfb9d), 0x20);
        // CB 2E 0235
        gbc.setState(0xdd74, 0xb2c4, 0x89f0, 0x8d5, 0xbc3f, 0x9647, 0x1, 0x1);
        gbc.writeMem(0x9647, { 0x3e });
        gbc.writeMem(0xdd74, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb2c4);
        EXPECT(gbc.pc(), 0xdd76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9647), 0x1f);
        EXPECT(gbc.readMem(0xdd74), 0xcb);
        EXPECT(gbc.readMem(0xdd75), 0x2e);
        // CB 2E 023A
        gbc.setState(0x34b1, 0xa587, 0xfac0, 0x3f5c, 0x3ff2, 0xc0bc, 0x1, 0x0);
        gbc.writeMem(0x34b1, { 0xcb, 0x2e });
        gbc.writeMem(0xc0bc, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa587);
        EXPECT(gbc.pc(), 0x34b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0bc), 0xd4);
        // CB 2E 023D
        gbc.setState(0xe400, 0xb51b, 0xfb50, 0x7dc2, 0x86a5, 0xf40a, 0x1, 0x0);
        gbc.writeMem(0xe400, { 0xcb, 0x2e });
        gbc.writeMem(0xf40a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb51b);
        EXPECT(gbc.pc(), 0xe402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe400), 0xcb);
        EXPECT(gbc.readMem(0xe401), 0x2e);
        EXPECT(gbc.readMem(0xf40a), 0xfc);
        // CB 2E 023F
        gbc.setState(0xa340, 0xced0, 0x8c0, 0xfb9, 0x668d, 0xd31e, 0x0, 0x0);
        gbc.writeMem(0xa340, { 0xcb, 0x2e });
        gbc.writeMem(0xd31e, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xced0);
        EXPECT(gbc.pc(), 0xa342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa340), 0xcb);
        EXPECT(gbc.readMem(0xa341), 0x2e);
        EXPECT(gbc.readMem(0xd31e), 0xd6);
        // CB 2E 0240
        gbc.setState(0x5892, 0x24ac, 0xb6d0, 0x188d, 0xc7bb, 0x9568, 0x0, 0x0);
        gbc.writeMem(0x5892, { 0xcb, 0x2e });
        gbc.writeMem(0x9568, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x24ac);
        EXPECT(gbc.pc(), 0x5894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9568), 0xcc);
        // CB 2E 0242
        gbc.setState(0xe2f8, 0xc6d7, 0xa430, 0x17bd, 0x9b3c, 0x9c75, 0x0, 0x0);
        gbc.writeMem(0x9c75, { 0x4f });
        gbc.writeMem(0xe2f8, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc6d7);
        EXPECT(gbc.pc(), 0xe2fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c75), 0x27);
        EXPECT(gbc.readMem(0xe2f8), 0xcb);
        EXPECT(gbc.readMem(0xe2f9), 0x2e);
        // CB 2E 0246
        gbc.setState(0x1056, 0x186d, 0xeca0, 0xc2c, 0x2b20, 0xb8b3, 0x0, 0x0);
        gbc.writeMem(0x1056, { 0xcb, 0x2e });
        gbc.writeMem(0xb8b3, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x186d);
        EXPECT(gbc.pc(), 0x1058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8b3), 0xdf);
        // CB 2E 0247
        gbc.setState(0x7c52, 0x6583, 0xa500, 0xba7e, 0x815e, 0xfa35, 0x1, 0x1);
        gbc.writeMem(0x7c52, { 0xcb, 0x2e });
        gbc.writeMem(0xfa35, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x6583);
        EXPECT(gbc.pc(), 0x7c54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa35), 0xf3);
        // CB 2E 0248
        gbc.setState(0x916c, 0x56d6, 0xd030, 0xac9c, 0x7792, 0xa3ae, 0x1, 0x1);
        gbc.writeMem(0x916c, { 0xcb, 0x2e });
        gbc.writeMem(0xa3ae, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x56d6);
        EXPECT(gbc.pc(), 0x916e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916c), 0xcb);
        EXPECT(gbc.readMem(0x916d), 0x2e);
        EXPECT(gbc.readMem(0xa3ae), 0xd3);
        // CB 2E 024A
        gbc.setState(0x5565, 0x4370, 0xc750, 0x7af5, 0x53b9, 0x997d, 0x1, 0x0);
        gbc.writeMem(0x5565, { 0xcb, 0x2e });
        gbc.writeMem(0x997d, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x4370);
        EXPECT(gbc.pc(), 0x5567);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x997d), 0xdc);
        // CB 2E 024D
        gbc.setState(0x80a3, 0x2e04, 0x8fc0, 0xa76c, 0x31c0, 0xf58c, 0x0, 0x0);
        gbc.writeMem(0x80a3, { 0xcb, 0x2e });
        gbc.writeMem(0xf58c, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2e04);
        EXPECT(gbc.pc(), 0x80a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a3), 0xcb);
        EXPECT(gbc.readMem(0x80a4), 0x2e);
        EXPECT(gbc.readMem(0xf58c), 0xb);
        // CB 2E 024E
        gbc.setState(0xc49b, 0xdd54, 0xed10, 0xd97c, 0xf510, 0xa732, 0x0, 0x0);
        gbc.writeMem(0xa732, { 0xed });
        gbc.writeMem(0xc49b, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xdd54);
        EXPECT(gbc.pc(), 0xc49d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa732), 0xf6);
        EXPECT(gbc.readMem(0xc49b), 0xcb);
        EXPECT(gbc.readMem(0xc49c), 0x2e);
        // CB 2E 024F
        gbc.setState(0x68b9, 0x6cd3, 0xf0a0, 0x55ad, 0x9a6b, 0x92c6, 0x0, 0x0);
        gbc.writeMem(0x68b9, { 0xcb, 0x2e });
        gbc.writeMem(0x92c6, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6cd3);
        EXPECT(gbc.pc(), 0x68bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c6), 0x22);
        // CB 2E 0251
        gbc.setState(0xd657, 0x6b9, 0x66d0, 0xcf1f, 0x9b14, 0x9f97, 0x1, 0x1);
        gbc.writeMem(0x9f97, { 0x15 });
        gbc.writeMem(0xd657, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6b9);
        EXPECT(gbc.pc(), 0xd659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f97), 0xa);
        EXPECT(gbc.readMem(0xd657), 0xcb);
        EXPECT(gbc.readMem(0xd658), 0x2e);
        // CB 2E 0252
        gbc.setState(0xbdc5, 0xe15c, 0x9750, 0xc4b2, 0xa51a, 0xf23d, 0x0, 0x0);
        gbc.writeMem(0xbdc5, { 0xcb, 0x2e });
        gbc.writeMem(0xf23d, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe15c);
        EXPECT(gbc.pc(), 0xbdc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdc5), 0xcb);
        EXPECT(gbc.readMem(0xbdc6), 0x2e);
        EXPECT(gbc.readMem(0xf23d), 0x20);
        // CB 2E 0253
        gbc.setState(0xbfc0, 0xa0de, 0x1b90, 0x3876, 0x3315, 0xa953, 0x0, 0x1);
        gbc.writeMem(0xa953, { 0x69 });
        gbc.writeMem(0xbfc0, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa0de);
        EXPECT(gbc.pc(), 0xbfc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa953), 0x34);
        EXPECT(gbc.readMem(0xbfc0), 0xcb);
        EXPECT(gbc.readMem(0xbfc1), 0x2e);
        // CB 2E 0254
        gbc.setState(0x599a, 0x2798, 0x1f10, 0x1ab7, 0xe46e, 0xd8dc, 0x0, 0x1);
        gbc.writeMem(0x599a, { 0xcb, 0x2e });
        gbc.writeMem(0xd8dc, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2798);
        EXPECT(gbc.pc(), 0x599c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8dc), 0xce);
        // CB 2E 0255
        gbc.setState(0x2d5, 0x1ad8, 0x2f90, 0x9e5f, 0x7601, 0xc0de, 0x0, 0x1);
        gbc.writeMem(0x2d5, { 0xcb, 0x2e });
        gbc.writeMem(0xc0de, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1ad8);
        EXPECT(gbc.pc(), 0x2d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0de), 0x1);
        // CB 2E 0257
        gbc.setState(0xda22, 0xe870, 0xb50, 0x2b89, 0x9631, 0x89c0, 0x1, 0x1);
        gbc.writeMem(0x89c0, { 0x0 });
        gbc.writeMem(0xda22, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe870);
        EXPECT(gbc.pc(), 0xda24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c0), 0x0);
        EXPECT(gbc.readMem(0xda22), 0xcb);
        EXPECT(gbc.readMem(0xda23), 0x2e);
        // CB 2E 0258
        gbc.setState(0x9f80, 0xafc7, 0x2720, 0xe4c5, 0x1988, 0xf3ac, 0x0, 0x0);
        gbc.writeMem(0x9f80, { 0xcb, 0x2e });
        gbc.writeMem(0xf3ac, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xafc7);
        EXPECT(gbc.pc(), 0x9f82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f80), 0xcb);
        EXPECT(gbc.readMem(0x9f81), 0x2e);
        EXPECT(gbc.readMem(0xf3ac), 0x26);
        // CB 2E 025A
        gbc.setState(0x1450, 0x8485, 0x1220, 0x379e, 0x2f7e, 0xe6b5, 0x1, 0x0);
        gbc.writeMem(0x1450, { 0xcb, 0x2e });
        gbc.writeMem(0xe6b5, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8485);
        EXPECT(gbc.pc(), 0x1452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6b5), 0xf0);
        // CB 2E 025B
        gbc.setState(0x6191, 0x2abd, 0x6e50, 0x1ddb, 0x5ad1, 0xadf7, 0x1, 0x0);
        gbc.writeMem(0x6191, { 0xcb, 0x2e });
        gbc.writeMem(0xadf7, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2abd);
        EXPECT(gbc.pc(), 0x6193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf7), 0x6);
        // CB 2E 025C
        gbc.setState(0x404c, 0xe2dc, 0x1110, 0xe8a6, 0xc31a, 0xaa19, 0x1, 0x1);
        gbc.writeMem(0x404c, { 0xcb, 0x2e });
        gbc.writeMem(0xaa19, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe2dc);
        EXPECT(gbc.pc(), 0x404e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa19), 0xf1);
        // CB 2E 0263
        gbc.setState(0xced2, 0x6b09, 0xd7c0, 0x9a17, 0xd74d, 0xf187, 0x1, 0x1);
        gbc.writeMem(0xced2, { 0xcb, 0x2e });
        gbc.writeMem(0xf187, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6b09);
        EXPECT(gbc.pc(), 0xced4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xced2), 0xcb);
        EXPECT(gbc.readMem(0xced3), 0x2e);
        EXPECT(gbc.readMem(0xf187), 0x1c);
        // CB 2E 0264
        gbc.setState(0x4955, 0x7f66, 0x2520, 0x44b1, 0xb056, 0xb308, 0x0, 0x1);
        gbc.writeMem(0x4955, { 0xcb, 0x2e });
        gbc.writeMem(0xb308, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7f66);
        EXPECT(gbc.pc(), 0x4957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb308), 0xd5);
        // CB 2E 0265
        gbc.setState(0x1b36, 0xc15e, 0xd740, 0xe2ea, 0xe149, 0xa3ac, 0x1, 0x0);
        gbc.writeMem(0x1b36, { 0xcb, 0x2e });
        gbc.writeMem(0xa3ac, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc15e);
        EXPECT(gbc.pc(), 0x1b38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ac), 0x2a);
        // CB 2E 0267
        gbc.setState(0x6f4, 0x26bf, 0x2e90, 0x6fbd, 0xba3c, 0xafda, 0x1, 0x1);
        gbc.writeMem(0x6f4, { 0xcb, 0x2e });
        gbc.writeMem(0xafda, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x26bf);
        EXPECT(gbc.pc(), 0x6f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafda), 0x11);
        // CB 2E 0269
        gbc.setState(0x5118, 0x66a3, 0x8800, 0xf397, 0x2745, 0x8bb2, 0x1, 0x1);
        gbc.writeMem(0x5118, { 0xcb, 0x2e });
        gbc.writeMem(0x8bb2, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x66a3);
        EXPECT(gbc.pc(), 0x511a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb2), 0x2b);
        // CB 2E 026A
        gbc.setState(0x3569, 0x12d3, 0x80, 0xdcc7, 0xeabe, 0xc7a0, 0x0, 0x1);
        gbc.writeMem(0x3569, { 0xcb, 0x2e });
        gbc.writeMem(0xc7a0, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x12d3);
        EXPECT(gbc.pc(), 0x356b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7a0), 0xdc);
        // CB 2E 026B
        gbc.setState(0x90ca, 0x351d, 0xd1d0, 0xfb5a, 0xa2c3, 0xdcbc, 0x0, 0x0);
        gbc.writeMem(0x90ca, { 0xcb, 0x2e });
        gbc.writeMem(0xdcbc, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x351d);
        EXPECT(gbc.pc(), 0x90cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90ca), 0xcb);
        EXPECT(gbc.readMem(0x90cb), 0x2e);
        EXPECT(gbc.readMem(0xdcbc), 0xfb);
        // CB 2E 026C
        gbc.setState(0x6e5d, 0x64b4, 0xfef0, 0x35c1, 0xc063, 0xa436, 0x0, 0x1);
        gbc.writeMem(0x6e5d, { 0xcb, 0x2e });
        gbc.writeMem(0xa436, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x64b4);
        EXPECT(gbc.pc(), 0x6e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa436), 0xe8);
        // CB 2E 026D
        gbc.setState(0xba4a, 0x448e, 0x3d90, 0xbb0e, 0xd324, 0x9f80, 0x1, 0x1);
        gbc.writeMem(0x9f80, { 0x85 });
        gbc.writeMem(0xba4a, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x448e);
        EXPECT(gbc.pc(), 0xba4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f80), 0xc2);
        EXPECT(gbc.readMem(0xba4a), 0xcb);
        EXPECT(gbc.readMem(0xba4b), 0x2e);
        // CB 2E 026F
        gbc.setState(0xe592, 0xd4a1, 0x3160, 0x706b, 0x6f92, 0xf6e9, 0x0, 0x1);
        gbc.writeMem(0xe592, { 0xcb, 0x2e });
        gbc.writeMem(0xf6e9, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd4a1);
        EXPECT(gbc.pc(), 0xe594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe592), 0xcb);
        EXPECT(gbc.readMem(0xe593), 0x2e);
        EXPECT(gbc.readMem(0xf6e9), 0xea);
        // CB 2E 0272
        gbc.setState(0x2bd0, 0xf8c2, 0x2a70, 0xea86, 0xff9, 0x861e, 0x1, 0x0);
        gbc.writeMem(0x2bd0, { 0xcb, 0x2e });
        gbc.writeMem(0x861e, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf8c2);
        EXPECT(gbc.pc(), 0x2bd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x861e), 0xc);
        // CB 2E 0274
        gbc.setState(0x8166, 0xf096, 0x7570, 0x65da, 0xcaca, 0x88c0, 0x1, 0x0);
        gbc.writeMem(0x8166, { 0xcb, 0x2e });
        gbc.writeMem(0x88c0, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf096);
        EXPECT(gbc.pc(), 0x8168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8166), 0xcb);
        EXPECT(gbc.readMem(0x8167), 0x2e);
        EXPECT(gbc.readMem(0x88c0), 0xc6);
        // CB 2E 0278
        gbc.setState(0x9d15, 0xee94, 0x3b50, 0x1f7d, 0x87c8, 0xf146, 0x0, 0x0);
        gbc.writeMem(0x9d15, { 0xcb, 0x2e });
        gbc.writeMem(0xf146, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xee94);
        EXPECT(gbc.pc(), 0x9d17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d15), 0xcb);
        EXPECT(gbc.readMem(0x9d16), 0x2e);
        EXPECT(gbc.readMem(0xf146), 0x1c);
        // CB 2E 027A
        gbc.setState(0xaeb0, 0xa4b2, 0x88c0, 0xc3df, 0x9109, 0xfe07, 0x0, 0x0);
        gbc.writeMem(0xaeb0, { 0xcb, 0x2e });
        gbc.writeMem(0xfe07, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa4b2);
        EXPECT(gbc.pc(), 0xaeb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeb0), 0xcb);
        EXPECT(gbc.readMem(0xaeb1), 0x2e);
        EXPECT(gbc.readMem(0xfe07), 0x11);
        // CB 2E 027B
        gbc.setState(0xa, 0xd89c, 0x9100, 0xbc32, 0xbacf, 0x8f61, 0x1, 0x0);
        gbc.writeMem(0xa, { 0xcb, 0x2e });
        gbc.writeMem(0x8f61, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd89c);
        EXPECT(gbc.pc(), 0xc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f61), 0x2f);
        // CB 2E 027D
        gbc.setState(0xb87f, 0x7e66, 0x1610, 0xf373, 0x3572, 0xd396, 0x1, 0x0);
        gbc.writeMem(0xb87f, { 0xcb, 0x2e });
        gbc.writeMem(0xd396, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7e66);
        EXPECT(gbc.pc(), 0xb881);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb87f), 0xcb);
        EXPECT(gbc.readMem(0xb880), 0x2e);
        EXPECT(gbc.readMem(0xd396), 0xc2);
        // CB 2E 027F
        gbc.setState(0x4af1, 0xad04, 0xf350, 0x271d, 0x3357, 0xed18, 0x0, 0x0);
        gbc.writeMem(0x4af1, { 0xcb, 0x2e });
        gbc.writeMem(0xed18, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xad04);
        EXPECT(gbc.pc(), 0x4af3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed18), 0xeb);
        // CB 2E 0283
        gbc.setState(0x83f8, 0xf2db, 0x5c10, 0x3420, 0xbc8, 0x80e6, 0x0, 0x0);
        gbc.writeMem(0x80e6, { 0x86 });
        gbc.writeMem(0x83f8, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf2db);
        EXPECT(gbc.pc(), 0x83fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e6), 0xc3);
        EXPECT(gbc.readMem(0x83f8), 0xcb);
        EXPECT(gbc.readMem(0x83f9), 0x2e);
        // CB 2E 0284
        gbc.setState(0x9374, 0x9046, 0xdfb0, 0x787e, 0xfc9d, 0xd66f, 0x1, 0x0);
        gbc.writeMem(0x9374, { 0xcb, 0x2e });
        gbc.writeMem(0xd66f, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9046);
        EXPECT(gbc.pc(), 0x9376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9374), 0xcb);
        EXPECT(gbc.readMem(0x9375), 0x2e);
        EXPECT(gbc.readMem(0xd66f), 0xc3);
        // CB 2E 0286
        gbc.setState(0x53fd, 0x657c, 0x1950, 0xcee7, 0x8e9d, 0xf312, 0x1, 0x0);
        gbc.writeMem(0x53fd, { 0xcb, 0x2e });
        gbc.writeMem(0xf312, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x657c);
        EXPECT(gbc.pc(), 0x53ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf312), 0x33);
        // CB 2E 0287
        gbc.setState(0x7ec8, 0x822b, 0x8820, 0xef62, 0x3fec, 0x9d24, 0x1, 0x0);
        gbc.writeMem(0x7ec8, { 0xcb, 0x2e });
        gbc.writeMem(0x9d24, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x822b);
        EXPECT(gbc.pc(), 0x7eca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d24), 0x28);
        // CB 2E 0288
        gbc.setState(0xd2d4, 0xc7ba, 0xa6d0, 0xd2ee, 0x96d8, 0xadd7, 0x1, 0x0);
        gbc.writeMem(0xadd7, { 0x19 });
        gbc.writeMem(0xd2d4, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc7ba);
        EXPECT(gbc.pc(), 0xd2d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadd7), 0xc);
        EXPECT(gbc.readMem(0xd2d4), 0xcb);
        EXPECT(gbc.readMem(0xd2d5), 0x2e);
        // CB 2E 028C
        gbc.setState(0x54f3, 0x50c5, 0xd2b0, 0xdfdf, 0x5d07, 0xb2de, 0x0, 0x0);
        gbc.writeMem(0x54f3, { 0xcb, 0x2e });
        gbc.writeMem(0xb2de, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x50c5);
        EXPECT(gbc.pc(), 0x54f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2de), 0xed);
        // CB 2E 028D
        gbc.setState(0xa585, 0xe0fe, 0x1040, 0xb43a, 0x3fe6, 0xf33a, 0x0, 0x1);
        gbc.writeMem(0xa585, { 0xcb, 0x2e });
        gbc.writeMem(0xf33a, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe0fe);
        EXPECT(gbc.pc(), 0xa587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa585), 0xcb);
        EXPECT(gbc.readMem(0xa586), 0x2e);
        EXPECT(gbc.readMem(0xf33a), 0xf2);
        // CB 2E 028E
        gbc.setState(0xe643, 0xca9f, 0xb620, 0x2c72, 0xd0ef, 0xee0b, 0x0, 0x0);
        gbc.writeMem(0xe643, { 0xcb, 0x2e });
        gbc.writeMem(0xee0b, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xca9f);
        EXPECT(gbc.pc(), 0xe645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe643), 0xcb);
        EXPECT(gbc.readMem(0xe644), 0x2e);
        EXPECT(gbc.readMem(0xee0b), 0x15);
        // CB 2E 028F
        gbc.setState(0x90e2, 0x6e03, 0xedd0, 0x3c0, 0x7217, 0xa891, 0x1, 0x0);
        gbc.writeMem(0x90e2, { 0xcb, 0x2e });
        gbc.writeMem(0xa891, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6e03);
        EXPECT(gbc.pc(), 0x90e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e2), 0xcb);
        EXPECT(gbc.readMem(0x90e3), 0x2e);
        EXPECT(gbc.readMem(0xa891), 0x1d);
        // CB 2E 0290
        gbc.setState(0xeea7, 0x18b1, 0x4cc0, 0xc331, 0xbc80, 0xc388, 0x1, 0x1);
        gbc.writeMem(0xc388, { 0xfe });
        gbc.writeMem(0xeea7, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x18b1);
        EXPECT(gbc.pc(), 0xeea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc388), 0xff);
        EXPECT(gbc.readMem(0xeea7), 0xcb);
        EXPECT(gbc.readMem(0xeea8), 0x2e);
        // CB 2E 0291
        gbc.setState(0xcc22, 0x1e6c, 0x43d0, 0x2ebb, 0xe92, 0x9b1a, 0x0, 0x1);
        gbc.writeMem(0x9b1a, { 0xa4 });
        gbc.writeMem(0xcc22, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1e6c);
        EXPECT(gbc.pc(), 0xcc24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1a), 0xd2);
        EXPECT(gbc.readMem(0xcc22), 0xcb);
        EXPECT(gbc.readMem(0xcc23), 0x2e);
        // CB 2E 0294
        gbc.setState(0xc120, 0xab17, 0x6180, 0x8b73, 0x493c, 0xe1e1, 0x1, 0x1);
        gbc.writeMem(0xc120, { 0xcb, 0x2e });
        gbc.writeMem(0xe1e1, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xab17);
        EXPECT(gbc.pc(), 0xc122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc120), 0xcb);
        EXPECT(gbc.readMem(0xc121), 0x2e);
        EXPECT(gbc.readMem(0xe1e1), 0x18);
        // CB 2E 0296
        gbc.setState(0xa19, 0xf73e, 0x3270, 0x8e7d, 0x4ff0, 0xc489, 0x1, 0x0);
        gbc.writeMem(0xa19, { 0xcb, 0x2e });
        gbc.writeMem(0xc489, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf73e);
        EXPECT(gbc.pc(), 0xa1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc489), 0x12);
        // CB 2E 0297
        gbc.setState(0x48e0, 0x8782, 0xea0, 0x4530, 0x5f49, 0x8a40, 0x1, 0x0);
        gbc.writeMem(0x48e0, { 0xcb, 0x2e });
        gbc.writeMem(0x8a40, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8782);
        EXPECT(gbc.pc(), 0x48e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a40), 0xed);
        // CB 2E 0299
        gbc.setState(0x2ecc, 0xfeb5, 0xbee0, 0x7760, 0x36d5, 0xb584, 0x1, 0x0);
        gbc.writeMem(0x2ecc, { 0xcb, 0x2e });
        gbc.writeMem(0xb584, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xfeb5);
        EXPECT(gbc.pc(), 0x2ece);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb584), 0x1b);
        // CB 2E 029A
        gbc.setState(0x4f92, 0x9b91, 0xca30, 0x2812, 0xfeec, 0xa239, 0x1, 0x0);
        gbc.writeMem(0x4f92, { 0xcb, 0x2e });
        gbc.writeMem(0xa239, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9b91);
        EXPECT(gbc.pc(), 0x4f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa239), 0xc0);
        // CB 2E 029C
        gbc.setState(0x59d3, 0xefc5, 0x170, 0x9ea5, 0xff76, 0xcbf7, 0x1, 0x1);
        gbc.writeMem(0x59d3, { 0xcb, 0x2e });
        gbc.writeMem(0xcbf7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xefc5);
        EXPECT(gbc.pc(), 0x59d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf7), 0xd2);
        // CB 2E 029D
        gbc.setState(0xe96c, 0x77ee, 0x1880, 0xa165, 0xd45, 0xee53, 0x1, 0x1);
        gbc.writeMem(0xe96c, { 0xcb, 0x2e });
        gbc.writeMem(0xee53, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x77ee);
        EXPECT(gbc.pc(), 0xe96e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe96c), 0xcb);
        EXPECT(gbc.readMem(0xe96d), 0x2e);
        EXPECT(gbc.readMem(0xee53), 0x2d);
        // CB 2E 029E
        gbc.setState(0xed06, 0xaffa, 0x6730, 0xbe6b, 0x145e, 0xdbab, 0x0, 0x1);
        gbc.writeMem(0xdbab, { 0x46 });
        gbc.writeMem(0xed06, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xaffa);
        EXPECT(gbc.pc(), 0xed08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbab), 0x23);
        EXPECT(gbc.readMem(0xed06), 0xcb);
        EXPECT(gbc.readMem(0xed07), 0x2e);
        // CB 2E 02A0
        gbc.setState(0x2a0, 0x8b87, 0x7430, 0x7dbf, 0x906d, 0xafc3, 0x0, 0x0);
        gbc.writeMem(0x2a0, { 0xcb, 0x2e });
        gbc.writeMem(0xafc3, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8b87);
        EXPECT(gbc.pc(), 0x2a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc3), 0xc0);
        // CB 2E 02A1
        gbc.setState(0x384b, 0xc227, 0xb060, 0x97b1, 0x2d21, 0xb161, 0x0, 0x1);
        gbc.writeMem(0x384b, { 0xcb, 0x2e });
        gbc.writeMem(0xb161, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc227);
        EXPECT(gbc.pc(), 0x384d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb161), 0xf7);
        // CB 2E 02A3
        gbc.setState(0xc8c, 0x9f8, 0x5380, 0x8e4b, 0xbeff, 0xdf47, 0x1, 0x1);
        gbc.writeMem(0xc8c, { 0xcb, 0x2e });
        gbc.writeMem(0xdf47, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9f8);
        EXPECT(gbc.pc(), 0xc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf47), 0x2a);
        // CB 2E 02A7
        gbc.setState(0xdc7, 0x28ec, 0xb3a0, 0xe1a5, 0x2c8b, 0xc752, 0x0, 0x0);
        gbc.writeMem(0xdc7, { 0xcb, 0x2e });
        gbc.writeMem(0xc752, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x28ec);
        EXPECT(gbc.pc(), 0xdc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc752), 0xe7);
        // CB 2E 02AB
        gbc.setState(0xb155, 0x26d6, 0x42c0, 0x6746, 0x1b37, 0xf257, 0x1, 0x0);
        gbc.writeMem(0xb155, { 0xcb, 0x2e });
        gbc.writeMem(0xf257, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x26d6);
        EXPECT(gbc.pc(), 0xb157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb155), 0xcb);
        EXPECT(gbc.readMem(0xb156), 0x2e);
        EXPECT(gbc.readMem(0xf257), 0xef);
        // CB 2E 02AC
        gbc.setState(0xe0ea, 0xf205, 0x2d80, 0x5fd, 0xd7a8, 0x9fa6, 0x0, 0x1);
        gbc.writeMem(0x9fa6, { 0xff });
        gbc.writeMem(0xe0ea, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf205);
        EXPECT(gbc.pc(), 0xe0ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fa6), 0xff);
        EXPECT(gbc.readMem(0xe0ea), 0xcb);
        EXPECT(gbc.readMem(0xe0eb), 0x2e);
        // CB 2E 02AD
        gbc.setState(0xe79a, 0xb24, 0xb870, 0x65d4, 0x672d, 0xad4c, 0x0, 0x1);
        gbc.writeMem(0xad4c, { 0xad });
        gbc.writeMem(0xe79a, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb24);
        EXPECT(gbc.pc(), 0xe79c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad4c), 0xd6);
        EXPECT(gbc.readMem(0xe79a), 0xcb);
        EXPECT(gbc.readMem(0xe79b), 0x2e);
        // CB 2E 02AE
        gbc.setState(0xd7c0, 0xc8e3, 0x43f0, 0xf7e9, 0x31f6, 0xa24a, 0x0, 0x0);
        gbc.writeMem(0xa24a, { 0xc7 });
        gbc.writeMem(0xd7c0, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc8e3);
        EXPECT(gbc.pc(), 0xd7c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24a), 0xe3);
        EXPECT(gbc.readMem(0xd7c0), 0xcb);
        EXPECT(gbc.readMem(0xd7c1), 0x2e);
        // CB 2E 02B4
        gbc.setState(0x3ffe, 0xa1dd, 0x1b50, 0xfc0b, 0xdbad, 0xa727, 0x0, 0x0);
        gbc.writeMem(0x3ffe, { 0xcb, 0x2e });
        gbc.writeMem(0xa727, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa1dd);
        EXPECT(gbc.pc(), 0x4000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa727), 0xf4);
        // CB 2E 02B7
        gbc.setState(0x5b71, 0xa0ed, 0x6340, 0x54ca, 0x7c3c, 0xd08e, 0x1, 0x1);
        gbc.writeMem(0x5b71, { 0xcb, 0x2e });
        gbc.writeMem(0xd08e, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa0ed);
        EXPECT(gbc.pc(), 0x5b73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd08e), 0xe2);
        // CB 2E 02B8
        gbc.setState(0x4448, 0x9ebd, 0x4ad0, 0x6b28, 0xc05e, 0x9b5c, 0x1, 0x0);
        gbc.writeMem(0x4448, { 0xcb, 0x2e });
        gbc.writeMem(0x9b5c, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9ebd);
        EXPECT(gbc.pc(), 0x444a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b5c), 0xec);
        // CB 2E 02B9
        gbc.setState(0x3edf, 0x343e, 0xf2b0, 0x1bb7, 0xc705, 0xd7ad, 0x1, 0x0);
        gbc.writeMem(0x3edf, { 0xcb, 0x2e });
        gbc.writeMem(0xd7ad, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x343e);
        EXPECT(gbc.pc(), 0x3ee1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7ad), 0xe5);
        // CB 2E 02BB
        gbc.setState(0xcf1c, 0x17b2, 0x6360, 0x30ab, 0xbb1, 0xdab7, 0x1, 0x0);
        gbc.writeMem(0xcf1c, { 0xcb, 0x2e });
        gbc.writeMem(0xdab7, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x17b2);
        EXPECT(gbc.pc(), 0xcf1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf1c), 0xcb);
        EXPECT(gbc.readMem(0xcf1d), 0x2e);
        EXPECT(gbc.readMem(0xdab7), 0x37);
        // CB 2E 02BE
        gbc.setState(0xef91, 0x4078, 0x1490, 0x849a, 0x4584, 0xa2fa, 0x1, 0x1);
        gbc.writeMem(0xa2fa, { 0xb3 });
        gbc.writeMem(0xef91, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4078);
        EXPECT(gbc.pc(), 0xef93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2fa), 0xd9);
        EXPECT(gbc.readMem(0xef91), 0xcb);
        EXPECT(gbc.readMem(0xef92), 0x2e);
        // CB 2E 02BF
        gbc.setState(0x722c, 0x31ad, 0xfb60, 0xa433, 0x3c73, 0x9756, 0x0, 0x0);
        gbc.writeMem(0x722c, { 0xcb, 0x2e });
        gbc.writeMem(0x9756, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x31ad);
        EXPECT(gbc.pc(), 0x722e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9756), 0xfa);
        // CB 2E 02C1
        gbc.setState(0xbd81, 0x25d, 0x1570, 0xeae1, 0xb0d3, 0xd72b, 0x0, 0x1);
        gbc.writeMem(0xbd81, { 0xcb, 0x2e });
        gbc.writeMem(0xd72b, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x25d);
        EXPECT(gbc.pc(), 0xbd83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd81), 0xcb);
        EXPECT(gbc.readMem(0xbd82), 0x2e);
        EXPECT(gbc.readMem(0xd72b), 0x1);
        // CB 2E 02C2
        gbc.setState(0x29e, 0x5bdb, 0x1d10, 0x4907, 0xe84a, 0x26d3, 0x1, 0x0);
        gbc.writeMem(0x29e, { 0xcb, 0x2e });
        gbc.writeMem(0x26d3, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x5bdb);
        EXPECT(gbc.pc(), 0x2a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2E 02CA
        gbc.setState(0x5406, 0x1f53, 0x6a60, 0xff49, 0x529f, 0xbe9b, 0x1, 0x1);
        gbc.writeMem(0x5406, { 0xcb, 0x2e });
        gbc.writeMem(0xbe9b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1f53);
        EXPECT(gbc.pc(), 0x5408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe9b), 0xd3);
        // CB 2E 02CC
        gbc.setState(0xe8f6, 0x9e37, 0xaf20, 0xf4f7, 0x34ec, 0x8b14, 0x1, 0x0);
        gbc.writeMem(0x8b14, { 0x2a });
        gbc.writeMem(0xe8f6, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9e37);
        EXPECT(gbc.pc(), 0xe8f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b14), 0x15);
        EXPECT(gbc.readMem(0xe8f6), 0xcb);
        EXPECT(gbc.readMem(0xe8f7), 0x2e);
        // CB 2E 02CD
        gbc.setState(0x1731, 0x4437, 0x68c0, 0xe8a2, 0xc5a0, 0xa017, 0x1, 0x0);
        gbc.writeMem(0x1731, { 0xcb, 0x2e });
        gbc.writeMem(0xa017, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4437);
        EXPECT(gbc.pc(), 0x1733);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa017), 0xe4);
        // CB 2E 02CE
        gbc.setState(0x1148, 0xaa31, 0x47f0, 0xf7f5, 0x5a12, 0xcfa1, 0x0, 0x1);
        gbc.writeMem(0x1148, { 0xcb, 0x2e });
        gbc.writeMem(0xcfa1, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xaa31);
        EXPECT(gbc.pc(), 0x114a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa1), 0x31);
        // CB 2E 02D3
        gbc.setState(0x129, 0x3e53, 0xb540, 0xc1d6, 0x670, 0xb72a, 0x1, 0x1);
        gbc.writeMem(0x129, { 0xcb, 0x2e });
        gbc.writeMem(0xb72a, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3e53);
        EXPECT(gbc.pc(), 0x12b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb72a), 0x25);
        // CB 2E 02D8
        gbc.setState(0x62df, 0xb4a, 0x9ea0, 0xde04, 0xa7c4, 0xe520, 0x1, 0x1);
        gbc.writeMem(0x62df, { 0xcb, 0x2e });
        gbc.writeMem(0xe520, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb4a);
        EXPECT(gbc.pc(), 0x62e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe520), 0x0);
        // CB 2E 02D9
        gbc.setState(0x6df0, 0x8bc, 0x870, 0x9aa, 0x5f0b, 0xe8ee, 0x0, 0x0);
        gbc.writeMem(0x6df0, { 0xcb, 0x2e });
        gbc.writeMem(0xe8ee, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8bc);
        EXPECT(gbc.pc(), 0x6df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8ee), 0xf4);
        // CB 2E 02DC
        gbc.setState(0x7aa, 0x7cb5, 0x6650, 0x19ca, 0x36c4, 0xeb6f, 0x0, 0x1);
        gbc.writeMem(0x7aa, { 0xcb, 0x2e });
        gbc.writeMem(0xeb6f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7cb5);
        EXPECT(gbc.pc(), 0x7ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb6f), 0xc5);
        // CB 2E 02DD
        gbc.setState(0x4574, 0xc5bc, 0x40d0, 0xe59d, 0xd30d, 0x877c, 0x1, 0x1);
        gbc.writeMem(0x4574, { 0xcb, 0x2e });
        gbc.writeMem(0x877c, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc5bc);
        EXPECT(gbc.pc(), 0x4576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x877c), 0xb);
        // CB 2E 02DE
        gbc.setState(0x8211, 0x2bfe, 0x84a0, 0x5f37, 0x2146, 0xde06, 0x0, 0x1);
        gbc.writeMem(0x8211, { 0xcb, 0x2e });
        gbc.writeMem(0xde06, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2bfe);
        EXPECT(gbc.pc(), 0x8213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8211), 0xcb);
        EXPECT(gbc.readMem(0x8212), 0x2e);
        EXPECT(gbc.readMem(0xde06), 0xc7);
        // CB 2E 02E1
        gbc.setState(0xa20e, 0x15df, 0x3dd0, 0x82d6, 0xaa2b, 0x8d2f, 0x1, 0x0);
        gbc.writeMem(0x8d2f, { 0x23 });
        gbc.writeMem(0xa20e, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x15df);
        EXPECT(gbc.pc(), 0xa210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d2f), 0x11);
        EXPECT(gbc.readMem(0xa20e), 0xcb);
        EXPECT(gbc.readMem(0xa20f), 0x2e);
        // CB 2E 02E2
        gbc.setState(0xb043, 0x19c3, 0xd860, 0x2ee, 0x2df3, 0xb8e4, 0x0, 0x0);
        gbc.writeMem(0xb043, { 0xcb, 0x2e });
        gbc.writeMem(0xb8e4, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x19c3);
        EXPECT(gbc.pc(), 0xb045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb043), 0xcb);
        EXPECT(gbc.readMem(0xb044), 0x2e);
        EXPECT(gbc.readMem(0xb8e4), 0x2f);
        // CB 2E 02E4
        gbc.setState(0x5210, 0x5178, 0x8a30, 0x71f9, 0x9a73, 0xeae1, 0x0, 0x1);
        gbc.writeMem(0x5210, { 0xcb, 0x2e });
        gbc.writeMem(0xeae1, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5178);
        EXPECT(gbc.pc(), 0x5212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeae1), 0xc5);
        // CB 2E 02E5
        gbc.setState(0xa273, 0x36a, 0x7340, 0x4ea0, 0xd5be, 0x8ca7, 0x1, 0x0);
        gbc.writeMem(0x8ca7, { 0x35 });
        gbc.writeMem(0xa273, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x36a);
        EXPECT(gbc.pc(), 0xa275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ca7), 0x1a);
        EXPECT(gbc.readMem(0xa273), 0xcb);
        EXPECT(gbc.readMem(0xa274), 0x2e);
        // CB 2E 02E8
        gbc.setState(0x7178, 0xb2d0, 0x4600, 0xb4c2, 0x5d6f, 0x9567, 0x0, 0x1);
        gbc.writeMem(0x7178, { 0xcb, 0x2e });
        gbc.writeMem(0x9567, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb2d0);
        EXPECT(gbc.pc(), 0x717a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9567), 0xcd);
        // CB 2E 02EA
        gbc.setState(0x6327, 0x7095, 0x4430, 0x1417, 0xbd3b, 0x932f, 0x1, 0x1);
        gbc.writeMem(0x6327, { 0xcb, 0x2e });
        gbc.writeMem(0x932f, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7095);
        EXPECT(gbc.pc(), 0x6329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932f), 0xcc);
        // CB 2E 02EB
        gbc.setState(0x8768, 0x24c6, 0xfda0, 0x2dce, 0xd8ab, 0xfb3d, 0x0, 0x1);
        gbc.writeMem(0x8768, { 0xcb, 0x2e });
        gbc.writeMem(0xfb3d, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x24c6);
        EXPECT(gbc.pc(), 0x876a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8768), 0xcb);
        EXPECT(gbc.readMem(0x8769), 0x2e);
        EXPECT(gbc.readMem(0xfb3d), 0x17);
        // CB 2E 02EC
        gbc.setState(0xb529, 0x8a6f, 0x1f60, 0xa035, 0xcb90, 0xc193, 0x0, 0x1);
        gbc.writeMem(0xb529, { 0xcb, 0x2e });
        gbc.writeMem(0xc193, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8a6f);
        EXPECT(gbc.pc(), 0xb52b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb529), 0xcb);
        EXPECT(gbc.readMem(0xb52a), 0x2e);
        EXPECT(gbc.readMem(0xc193), 0xe0);
        // CB 2E 02ED
        gbc.setState(0xa237, 0x2162, 0x32a0, 0x8dd2, 0x4e44, 0xc61a, 0x1, 0x1);
        gbc.writeMem(0xa237, { 0xcb, 0x2e });
        gbc.writeMem(0xc61a, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2162);
        EXPECT(gbc.pc(), 0xa239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa237), 0xcb);
        EXPECT(gbc.readMem(0xa238), 0x2e);
        EXPECT(gbc.readMem(0xc61a), 0xe8);
        // CB 2E 02EE
        gbc.setState(0xcf02, 0xc687, 0xfab0, 0x235b, 0x70de, 0xb0a1, 0x1, 0x0);
        gbc.writeMem(0xb0a1, { 0x89 });
        gbc.writeMem(0xcf02, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc687);
        EXPECT(gbc.pc(), 0xcf04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a1), 0xc4);
        EXPECT(gbc.readMem(0xcf02), 0xcb);
        EXPECT(gbc.readMem(0xcf03), 0x2e);
        // CB 2E 02F1
        gbc.setState(0x71d7, 0xa013, 0x5d60, 0x3518, 0x70d9, 0xe7a0, 0x0, 0x1);
        gbc.writeMem(0x71d7, { 0xcb, 0x2e });
        gbc.writeMem(0xe7a0, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa013);
        EXPECT(gbc.pc(), 0x71d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a0), 0x7);
        // CB 2E 02F3
        gbc.setState(0xaa09, 0x2914, 0xe9e0, 0x2019, 0xbf7b, 0xaeda, 0x1, 0x1);
        gbc.writeMem(0xaa09, { 0xcb, 0x2e });
        gbc.writeMem(0xaeda, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2914);
        EXPECT(gbc.pc(), 0xaa0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa09), 0xcb);
        EXPECT(gbc.readMem(0xaa0a), 0x2e);
        EXPECT(gbc.readMem(0xaeda), 0xd2);
        // CB 2E 02F6
        gbc.setState(0x7b01, 0x286b, 0x83b0, 0xf046, 0xd921, 0x93f7, 0x0, 0x0);
        gbc.writeMem(0x7b01, { 0xcb, 0x2e });
        gbc.writeMem(0x93f7, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x286b);
        EXPECT(gbc.pc(), 0x7b03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f7), 0xd6);
        // CB 2E 02F8
        gbc.setState(0x3aa8, 0x20a8, 0xcb20, 0x5e6, 0xb882, 0xa694, 0x0, 0x0);
        gbc.writeMem(0x3aa8, { 0xcb, 0x2e });
        gbc.writeMem(0xa694, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x20a8);
        EXPECT(gbc.pc(), 0x3aaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa694), 0x9);
        // CB 2E 02FC
        gbc.setState(0xa9ec, 0x5472, 0xa3d0, 0xaa9d, 0x4de6, 0x86a9, 0x0, 0x0);
        gbc.writeMem(0x86a9, { 0x84 });
        gbc.writeMem(0xa9ec, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5472);
        EXPECT(gbc.pc(), 0xa9ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a9), 0xc2);
        EXPECT(gbc.readMem(0xa9ec), 0xcb);
        EXPECT(gbc.readMem(0xa9ed), 0x2e);
        // CB 2E 02FD
        gbc.setState(0xe2be, 0xd0d9, 0x8b20, 0xb5d2, 0xb15d, 0xec93, 0x1, 0x0);
        gbc.writeMem(0xe2be, { 0xcb, 0x2e });
        gbc.writeMem(0xec93, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd0d9);
        EXPECT(gbc.pc(), 0xe2c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2be), 0xcb);
        EXPECT(gbc.readMem(0xe2bf), 0x2e);
        EXPECT(gbc.readMem(0xec93), 0x1f);
        // CB 2E 0300
        gbc.setState(0x39a7, 0x43c0, 0x4db0, 0x9370, 0x7ea7, 0xa979, 0x1, 0x0);
        gbc.writeMem(0x39a7, { 0xcb, 0x2e });
        gbc.writeMem(0xa979, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x43c0);
        EXPECT(gbc.pc(), 0x39a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa979), 0x1e);
        // CB 2E 0302
        gbc.setState(0xd2d5, 0xfcaa, 0x500, 0xa410, 0xe910, 0xf808, 0x0, 0x1);
        gbc.writeMem(0xd2d5, { 0xcb, 0x2e });
        gbc.writeMem(0xf808, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfcaa);
        EXPECT(gbc.pc(), 0xd2d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2d5), 0xcb);
        EXPECT(gbc.readMem(0xd2d6), 0x2e);
        EXPECT(gbc.readMem(0xf808), 0x1e);
        // CB 2E 0303
        gbc.setState(0x234a, 0xb7b4, 0x2f00, 0xefa6, 0xdeda, 0x8873, 0x1, 0x1);
        gbc.writeMem(0x234a, { 0xcb, 0x2e });
        gbc.writeMem(0x8873, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb7b4);
        EXPECT(gbc.pc(), 0x234c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8873), 0xfc);
        // CB 2E 0304
        gbc.setState(0x7a29, 0x2bc6, 0xb570, 0xcbda, 0x91ca, 0x9f89, 0x0, 0x1);
        gbc.writeMem(0x7a29, { 0xcb, 0x2e });
        gbc.writeMem(0x9f89, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2bc6);
        EXPECT(gbc.pc(), 0x7a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f89), 0x1d);
        // CB 2E 0307
        gbc.setState(0x8e9a, 0x7f9c, 0x96c0, 0x7053, 0xce7f, 0xbd77, 0x1, 0x0);
        gbc.writeMem(0x8e9a, { 0xcb, 0x2e });
        gbc.writeMem(0xbd77, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7f9c);
        EXPECT(gbc.pc(), 0x8e9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e9a), 0xcb);
        EXPECT(gbc.readMem(0x8e9b), 0x2e);
        EXPECT(gbc.readMem(0xbd77), 0xe3);
        // CB 2E 0308
        gbc.setState(0xb366, 0x9213, 0x57e0, 0x4586, 0x51df, 0x9b5c, 0x0, 0x0);
        gbc.writeMem(0x9b5c, { 0xd8 });
        gbc.writeMem(0xb366, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9213);
        EXPECT(gbc.pc(), 0xb368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b5c), 0xec);
        EXPECT(gbc.readMem(0xb366), 0xcb);
        EXPECT(gbc.readMem(0xb367), 0x2e);
        // CB 2E 0309
        gbc.setState(0x5700, 0x990d, 0x7380, 0xa757, 0x9e0c, 0xe4e5, 0x0, 0x1);
        gbc.writeMem(0x5700, { 0xcb, 0x2e });
        gbc.writeMem(0xe4e5, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x990d);
        EXPECT(gbc.pc(), 0x5702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e5), 0xd6);
        // CB 2E 030A
        gbc.setState(0x7cca, 0x49f6, 0xa880, 0x5c85, 0x53e2, 0xb116, 0x1, 0x1);
        gbc.writeMem(0x7cca, { 0xcb, 0x2e });
        gbc.writeMem(0xb116, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x49f6);
        EXPECT(gbc.pc(), 0x7ccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb116), 0x38);
        // CB 2E 030B
        gbc.setState(0xa650, 0x23b9, 0x8240, 0x60b9, 0x66e9, 0x9b15, 0x0, 0x1);
        gbc.writeMem(0x9b15, { 0x77 });
        gbc.writeMem(0xa650, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x23b9);
        EXPECT(gbc.pc(), 0xa652);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b15), 0x3b);
        EXPECT(gbc.readMem(0xa650), 0xcb);
        EXPECT(gbc.readMem(0xa651), 0x2e);
        // CB 2E 030E
        gbc.setState(0xac18, 0xcb33, 0xc1f0, 0xa5ff, 0x712, 0xf945, 0x1, 0x0);
        gbc.writeMem(0xac18, { 0xcb, 0x2e });
        gbc.writeMem(0xf945, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xcb33);
        EXPECT(gbc.pc(), 0xac1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac18), 0xcb);
        EXPECT(gbc.readMem(0xac19), 0x2e);
        EXPECT(gbc.readMem(0xf945), 0xef);
        // CB 2E 030F
        gbc.setState(0x6304, 0xef91, 0x6fb0, 0xa250, 0xc1ed, 0x8663, 0x1, 0x1);
        gbc.writeMem(0x6304, { 0xcb, 0x2e });
        gbc.writeMem(0x8663, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xef91);
        EXPECT(gbc.pc(), 0x6306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8663), 0x3e);
        // CB 2E 0310
        gbc.setState(0x1588, 0xab4b, 0x7ee0, 0xc1b2, 0x7fdf, 0xe90e, 0x0, 0x0);
        gbc.writeMem(0x1588, { 0xcb, 0x2e });
        gbc.writeMem(0xe90e, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xab4b);
        EXPECT(gbc.pc(), 0x158a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe90e), 0xe7);
        // CB 2E 0312
        gbc.setState(0x138d, 0xc8db, 0xb1c0, 0x1a0a, 0xe24e, 0xafd8, 0x1, 0x1);
        gbc.writeMem(0x138d, { 0xcb, 0x2e });
        gbc.writeMem(0xafd8, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc8db);
        EXPECT(gbc.pc(), 0x138f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd8), 0xe2);
        // CB 2E 0315
        gbc.setState(0x5cd9, 0x6880, 0x84a0, 0xdf89, 0xe75d, 0xbbfa, 0x0, 0x0);
        gbc.writeMem(0x5cd9, { 0xcb, 0x2e });
        gbc.writeMem(0xbbfa, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6880);
        EXPECT(gbc.pc(), 0x5cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbfa), 0xa);
        // CB 2E 031D
        gbc.setState(0xc1a9, 0x336f, 0x3cd0, 0x1fa4, 0x455, 0xa3e5, 0x1, 0x1);
        gbc.writeMem(0xa3e5, { 0xe6 });
        gbc.writeMem(0xc1a9, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x336f);
        EXPECT(gbc.pc(), 0xc1ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e5), 0xf3);
        EXPECT(gbc.readMem(0xc1a9), 0xcb);
        EXPECT(gbc.readMem(0xc1aa), 0x2e);
        // CB 2E 031E
        gbc.setState(0xbefa, 0x1440, 0x3d40, 0x4620, 0x5415, 0xdad5, 0x0, 0x1);
        gbc.writeMem(0xbefa, { 0xcb, 0x2e });
        gbc.writeMem(0xdad5, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x1440);
        EXPECT(gbc.pc(), 0xbefc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefa), 0xcb);
        EXPECT(gbc.readMem(0xbefb), 0x2e);
        EXPECT(gbc.readMem(0xdad5), 0x1);
        // CB 2E 031F
        gbc.setState(0x676f, 0x31a6, 0xb140, 0xf77a, 0x64ca, 0xf38e, 0x1, 0x1);
        gbc.writeMem(0x676f, { 0xcb, 0x2e });
        gbc.writeMem(0xf38e, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x31a6);
        EXPECT(gbc.pc(), 0x6771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf38e), 0xee);
        // CB 2E 0321
        gbc.setState(0x2820, 0x9bb7, 0x19c0, 0x1645, 0xbb23, 0xddd3, 0x0, 0x0);
        gbc.writeMem(0x2820, { 0xcb, 0x2e });
        gbc.writeMem(0xddd3, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9bb7);
        EXPECT(gbc.pc(), 0x2822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddd3), 0x6);
        // CB 2E 0325
        gbc.setState(0x1c92, 0x8aec, 0x16f0, 0xccbb, 0x7aae, 0xf69f, 0x0, 0x0);
        gbc.writeMem(0x1c92, { 0xcb, 0x2e });
        gbc.writeMem(0xf69f, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8aec);
        EXPECT(gbc.pc(), 0x1c94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf69f), 0xee);
        // CB 2E 0327
        gbc.setState(0x48c5, 0xa60e, 0x6760, 0x3c92, 0xbcad, 0xfa01, 0x1, 0x1);
        gbc.writeMem(0x48c5, { 0xcb, 0x2e });
        gbc.writeMem(0xfa01, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa60e);
        EXPECT(gbc.pc(), 0x48c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa01), 0xd1);
        // CB 2E 0328
        gbc.setState(0xca9a, 0x7f40, 0x3990, 0x29d9, 0x4fca, 0xdc45, 0x1, 0x1);
        gbc.writeMem(0xca9a, { 0xcb, 0x2e });
        gbc.writeMem(0xdc45, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7f40);
        EXPECT(gbc.pc(), 0xca9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca9a), 0xcb);
        EXPECT(gbc.readMem(0xca9b), 0x2e);
        EXPECT(gbc.readMem(0xdc45), 0x1a);
        // CB 2E 032C
        gbc.setState(0x360, 0x6014, 0x2ca0, 0x7baf, 0x1cb8, 0xaff7, 0x1, 0x0);
        gbc.writeMem(0x360, { 0xcb, 0x2e });
        gbc.writeMem(0xaff7, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6014);
        EXPECT(gbc.pc(), 0x362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff7), 0x25);
        // CB 2E 032E
        gbc.setState(0x61cc, 0x91ef, 0xe390, 0xb6b3, 0x12e3, 0xa63a, 0x0, 0x0);
        gbc.writeMem(0x61cc, { 0xcb, 0x2e });
        gbc.writeMem(0xa63a, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x91ef);
        EXPECT(gbc.pc(), 0x61ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa63a), 0x3c);
        // CB 2E 0332
        gbc.setState(0xddc2, 0x33f2, 0xc4d0, 0xb89d, 0xff8a, 0xcb9b, 0x0, 0x1);
        gbc.writeMem(0xcb9b, { 0x54 });
        gbc.writeMem(0xddc2, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x33f2);
        EXPECT(gbc.pc(), 0xddc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb9b), 0x2a);
        EXPECT(gbc.readMem(0xddc2), 0xcb);
        EXPECT(gbc.readMem(0xddc3), 0x2e);
        // CB 2E 0333
        gbc.setState(0x8005, 0xacda, 0x2c0, 0x687a, 0x67c8, 0xd768, 0x0, 0x1);
        gbc.writeMem(0x8005, { 0xcb, 0x2e });
        gbc.writeMem(0xd768, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xacda);
        EXPECT(gbc.pc(), 0x8007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8005), 0xcb);
        EXPECT(gbc.readMem(0x8006), 0x2e);
        EXPECT(gbc.readMem(0xd768), 0xfb);
        // CB 2E 0335
        gbc.setState(0x7600, 0x64b2, 0x5620, 0x3d11, 0xa9b0, 0x9871, 0x1, 0x0);
        gbc.writeMem(0x7600, { 0xcb, 0x2e });
        gbc.writeMem(0x9871, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x64b2);
        EXPECT(gbc.pc(), 0x7602);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9871), 0x1f);
        // CB 2E 0337
        gbc.setState(0xcde2, 0xb6bd, 0xc430, 0x64e8, 0x4ac3, 0x89ab, 0x0, 0x1);
        gbc.writeMem(0x89ab, { 0x96 });
        gbc.writeMem(0xcde2, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb6bd);
        EXPECT(gbc.pc(), 0xcde4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ab), 0xcb);
        EXPECT(gbc.readMem(0xcde2), 0xcb);
        EXPECT(gbc.readMem(0xcde3), 0x2e);
        // CB 2E 0339
        gbc.setState(0x48ca, 0x5945, 0x10a0, 0x9cb1, 0x372b, 0xdce9, 0x1, 0x0);
        gbc.writeMem(0x48ca, { 0xcb, 0x2e });
        gbc.writeMem(0xdce9, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5945);
        EXPECT(gbc.pc(), 0x48cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdce9), 0x36);
        // CB 2E 033A
        gbc.setState(0x3b51, 0x968e, 0xb310, 0x9860, 0xd4fa, 0xd97f, 0x1, 0x1);
        gbc.writeMem(0x3b51, { 0xcb, 0x2e });
        gbc.writeMem(0xd97f, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x968e);
        EXPECT(gbc.pc(), 0x3b53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97f), 0xee);
        // CB 2E 033E
        gbc.setState(0xb663, 0x71ad, 0xe160, 0x5d45, 0x3123, 0xf786, 0x1, 0x1);
        gbc.writeMem(0xb663, { 0xcb, 0x2e });
        gbc.writeMem(0xf786, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x71ad);
        EXPECT(gbc.pc(), 0xb665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb663), 0xcb);
        EXPECT(gbc.readMem(0xb664), 0x2e);
        EXPECT(gbc.readMem(0xf786), 0x8);
        // CB 2E 0341
        gbc.setState(0x9237, 0xc2af, 0x78e0, 0xc843, 0x3085, 0xad83, 0x1, 0x0);
        gbc.writeMem(0x9237, { 0xcb, 0x2e });
        gbc.writeMem(0xad83, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc2af);
        EXPECT(gbc.pc(), 0x9239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9237), 0xcb);
        EXPECT(gbc.readMem(0x9238), 0x2e);
        EXPECT(gbc.readMem(0xad83), 0xd1);
        // CB 2E 0344
        gbc.setState(0x7230, 0x506, 0x72d0, 0x255f, 0xe4e6, 0xa53c, 0x0, 0x0);
        gbc.writeMem(0x7230, { 0xcb, 0x2e });
        gbc.writeMem(0xa53c, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x506);
        EXPECT(gbc.pc(), 0x7232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa53c), 0x14);
        // CB 2E 0345
        gbc.setState(0xd0be, 0x9a2e, 0x9270, 0xa3f3, 0x17f0, 0xe9ef, 0x1, 0x1);
        gbc.writeMem(0xd0be, { 0xcb, 0x2e });
        gbc.writeMem(0xe9ef, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9a2e);
        EXPECT(gbc.pc(), 0xd0c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0be), 0xcb);
        EXPECT(gbc.readMem(0xd0bf), 0x2e);
        EXPECT(gbc.readMem(0xe9ef), 0xd9);
        // CB 2E 0347
        gbc.setState(0xe779, 0x9d30, 0x4640, 0x412e, 0xfa47, 0x8029, 0x1, 0x1);
        gbc.writeMem(0x8029, { 0x31 });
        gbc.writeMem(0xe779, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9d30);
        EXPECT(gbc.pc(), 0xe77b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8029), 0x18);
        EXPECT(gbc.readMem(0xe779), 0xcb);
        EXPECT(gbc.readMem(0xe77a), 0x2e);
        // CB 2E 0348
        gbc.setState(0x132c, 0xa480, 0x86b0, 0xd2d5, 0xa784, 0xb917, 0x0, 0x1);
        gbc.writeMem(0x132c, { 0xcb, 0x2e });
        gbc.writeMem(0xb917, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa480);
        EXPECT(gbc.pc(), 0x132e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb917), 0xfc);
        // CB 2E 0349
        gbc.setState(0xc70a, 0x64b5, 0xb2d0, 0x622b, 0x7117, 0xbde4, 0x1, 0x0);
        gbc.writeMem(0xbde4, { 0xd8 });
        gbc.writeMem(0xc70a, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x64b5);
        EXPECT(gbc.pc(), 0xc70c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbde4), 0xec);
        EXPECT(gbc.readMem(0xc70a), 0xcb);
        EXPECT(gbc.readMem(0xc70b), 0x2e);
        // CB 2E 034B
        gbc.setState(0x380c, 0x1d4c, 0xd50, 0x25ec, 0xa0ed, 0xdc42, 0x0, 0x1);
        gbc.writeMem(0x380c, { 0xcb, 0x2e });
        gbc.writeMem(0xdc42, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1d4c);
        EXPECT(gbc.pc(), 0x380e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc42), 0x24);
        // CB 2E 034E
        gbc.setState(0x14b2, 0x7417, 0xa20, 0xf1b8, 0x55d9, 0x8a12, 0x1, 0x0);
        gbc.writeMem(0x14b2, { 0xcb, 0x2e });
        gbc.writeMem(0x8a12, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7417);
        EXPECT(gbc.pc(), 0x14b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a12), 0x7);
        // CB 2E 0353
        gbc.setState(0xdc65, 0xe1d6, 0x9370, 0x8743, 0x6fd4, 0xe4a6, 0x0, 0x0);
        gbc.writeMem(0xdc65, { 0xcb, 0x2e });
        gbc.writeMem(0xe4a6, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe1d6);
        EXPECT(gbc.pc(), 0xdc67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc65), 0xcb);
        EXPECT(gbc.readMem(0xdc66), 0x2e);
        EXPECT(gbc.readMem(0xe4a6), 0x33);
        // CB 2E 0356
        gbc.setState(0x252c, 0xce38, 0xeb90, 0xd24c, 0x98bc, 0xf5cd, 0x1, 0x1);
        gbc.writeMem(0x252c, { 0xcb, 0x2e });
        gbc.writeMem(0xf5cd, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xce38);
        EXPECT(gbc.pc(), 0x252e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf5cd), 0xf6);
        // CB 2E 0359
        gbc.setState(0x2272, 0x523b, 0xd8d0, 0x45e9, 0x683e, 0xa8d8, 0x1, 0x0);
        gbc.writeMem(0x2272, { 0xcb, 0x2e });
        gbc.writeMem(0xa8d8, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x523b);
        EXPECT(gbc.pc(), 0x2274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d8), 0xec);
        // CB 2E 035B
        gbc.setState(0xc1f1, 0x6595, 0x26c0, 0x7f7a, 0x6a82, 0x90f1, 0x0, 0x0);
        gbc.writeMem(0x90f1, { 0x7b });
        gbc.writeMem(0xc1f1, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6595);
        EXPECT(gbc.pc(), 0xc1f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90f1), 0x3d);
        EXPECT(gbc.readMem(0xc1f1), 0xcb);
        EXPECT(gbc.readMem(0xc1f2), 0x2e);
        // CB 2E 035D
        gbc.setState(0x4488, 0xe201, 0x3d70, 0x5ee2, 0x9615, 0xe438, 0x0, 0x1);
        gbc.writeMem(0x4488, { 0xcb, 0x2e });
        gbc.writeMem(0xe438, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe201);
        EXPECT(gbc.pc(), 0x448a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe438), 0x3c);
        // CB 2E 035E
        gbc.setState(0xb648, 0xb95f, 0xbb0, 0x43e9, 0xd7ac, 0xf363, 0x1, 0x0);
        gbc.writeMem(0xb648, { 0xcb, 0x2e });
        gbc.writeMem(0xf363, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb95f);
        EXPECT(gbc.pc(), 0xb64a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb648), 0xcb);
        EXPECT(gbc.readMem(0xb649), 0x2e);
        EXPECT(gbc.readMem(0xf363), 0xf8);
        // CB 2E 035F
        gbc.setState(0xdedf, 0xc8f9, 0xc7b0, 0x71b, 0x49df, 0xa7d2, 0x1, 0x0);
        gbc.writeMem(0xa7d2, { 0x24 });
        gbc.writeMem(0xdedf, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xc8f9);
        EXPECT(gbc.pc(), 0xdee1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d2), 0x12);
        EXPECT(gbc.readMem(0xdedf), 0xcb);
        EXPECT(gbc.readMem(0xdee0), 0x2e);
        // CB 2E 0360
        gbc.setState(0x25f4, 0xdeed, 0x75b0, 0x22f4, 0x654e, 0xc710, 0x1, 0x0);
        gbc.writeMem(0x25f4, { 0xcb, 0x2e });
        gbc.writeMem(0xc710, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xdeed);
        EXPECT(gbc.pc(), 0x25f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc710), 0x11);
        // CB 2E 0362
        gbc.setState(0xa036, 0x305e, 0x98e0, 0xb5ff, 0x7427, 0xfe9c, 0x1, 0x0);
        gbc.writeMem(0xa036, { 0xcb, 0x2e });
        gbc.writeMem(0xfe9c, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x305e);
        EXPECT(gbc.pc(), 0xa038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa036), 0xcb);
        EXPECT(gbc.readMem(0xa037), 0x2e);
        EXPECT(gbc.readMem(0xfe9c), 0xc9);
        // CB 2E 0364
        gbc.setState(0x4f95, 0x4093, 0x1fe0, 0xf793, 0x5fe2, 0x9a60, 0x0, 0x0);
        gbc.writeMem(0x4f95, { 0xcb, 0x2e });
        gbc.writeMem(0x9a60, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4093);
        EXPECT(gbc.pc(), 0x4f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a60), 0x6);
        // CB 2E 0365
        gbc.setState(0x9721, 0xcb94, 0x9f90, 0x9db9, 0x150, 0x9aaf, 0x1, 0x0);
        gbc.writeMem(0x9721, { 0xcb, 0x2e });
        gbc.writeMem(0x9aaf, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcb94);
        EXPECT(gbc.pc(), 0x9723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9721), 0xcb);
        EXPECT(gbc.readMem(0x9722), 0x2e);
        EXPECT(gbc.readMem(0x9aaf), 0x2f);
        // CB 2E 0366
        gbc.setState(0xbf5c, 0x856f, 0xcac0, 0x7748, 0xb981, 0xfd07, 0x0, 0x1);
        gbc.writeMem(0xbf5c, { 0xcb, 0x2e });
        gbc.writeMem(0xfd07, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x856f);
        EXPECT(gbc.pc(), 0xbf5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf5c), 0xcb);
        EXPECT(gbc.readMem(0xbf5d), 0x2e);
        EXPECT(gbc.readMem(0xfd07), 0xde);
        // CB 2E 0368
        gbc.setState(0xd3d6, 0xe607, 0xed90, 0x97ff, 0xa900, 0xf18e, 0x0, 0x1);
        gbc.writeMem(0xd3d6, { 0xcb, 0x2e });
        gbc.writeMem(0xf18e, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe607);
        EXPECT(gbc.pc(), 0xd3d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d6), 0xcb);
        EXPECT(gbc.readMem(0xd3d7), 0x2e);
        EXPECT(gbc.readMem(0xf18e), 0xc8);
        // CB 2E 0369
        gbc.setState(0xe5db, 0xec08, 0x6170, 0x3e0e, 0x749f, 0x96f8, 0x1, 0x0);
        gbc.writeMem(0x96f8, { 0xb8 });
        gbc.writeMem(0xe5db, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xec08);
        EXPECT(gbc.pc(), 0xe5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f8), 0xdc);
        EXPECT(gbc.readMem(0xe5db), 0xcb);
        EXPECT(gbc.readMem(0xe5dc), 0x2e);
        // CB 2E 036A
        gbc.setState(0xa67f, 0xef0b, 0x9810, 0xe283, 0x486d, 0x8c88, 0x1, 0x0);
        gbc.writeMem(0x8c88, { 0x3 });
        gbc.writeMem(0xa67f, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xef0b);
        EXPECT(gbc.pc(), 0xa681);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c88), 0x1);
        EXPECT(gbc.readMem(0xa67f), 0xcb);
        EXPECT(gbc.readMem(0xa680), 0x2e);
        // CB 2E 036C
        gbc.setState(0x8591, 0x9849, 0xc60, 0x8e6d, 0xc879, 0xe4bd, 0x0, 0x0);
        gbc.writeMem(0x8591, { 0xcb, 0x2e });
        gbc.writeMem(0xe4bd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9849);
        EXPECT(gbc.pc(), 0x8593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8591), 0xcb);
        EXPECT(gbc.readMem(0x8592), 0x2e);
        EXPECT(gbc.readMem(0xe4bd), 0xd);
        // CB 2E 036E
        gbc.setState(0x315c, 0x799, 0x9d50, 0x9eb2, 0x313, 0x988d, 0x1, 0x1);
        gbc.writeMem(0x315c, { 0xcb, 0x2e });
        gbc.writeMem(0x988d, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x799);
        EXPECT(gbc.pc(), 0x315e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x988d), 0x1);
        // CB 2E 036F
        gbc.setState(0x2800, 0xed98, 0x8430, 0x992e, 0x75ec, 0xe275, 0x1, 0x1);
        gbc.writeMem(0x2800, { 0xcb, 0x2e });
        gbc.writeMem(0xe275, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xed98);
        EXPECT(gbc.pc(), 0x2802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe275), 0xc6);
        // CB 2E 0372
        gbc.setState(0x34c8, 0x6257, 0xf5c0, 0x57d6, 0xc9d8, 0x9e3e, 0x1, 0x1);
        gbc.writeMem(0x34c8, { 0xcb, 0x2e });
        gbc.writeMem(0x9e3e, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6257);
        EXPECT(gbc.pc(), 0x34ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e3e), 0xff);
        // CB 2E 0374
        gbc.setState(0x31a4, 0xee, 0x54a0, 0x866e, 0x2194, 0xae23, 0x1, 0x1);
        gbc.writeMem(0x31a4, { 0xcb, 0x2e });
        gbc.writeMem(0xae23, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xee);
        EXPECT(gbc.pc(), 0x31a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae23), 0xc1);
        // CB 2E 0377
        gbc.setState(0x606b, 0x1569, 0x1b30, 0x255d, 0x2a60, 0xb5b1, 0x1, 0x0);
        gbc.writeMem(0x606b, { 0xcb, 0x2e });
        gbc.writeMem(0xb5b1, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1569);
        EXPECT(gbc.pc(), 0x606d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5b1), 0x27);
        // CB 2E 0378
        gbc.setState(0x6c40, 0x9e1b, 0xf880, 0xa94, 0xaf55, 0xdec4, 0x1, 0x0);
        gbc.writeMem(0x6c40, { 0xcb, 0x2e });
        gbc.writeMem(0xdec4, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9e1b);
        EXPECT(gbc.pc(), 0x6c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdec4), 0x2b);
        // CB 2E 0379
        gbc.setState(0x1385, 0x402b, 0x3b20, 0xcb8, 0xba34, 0xc701, 0x0, 0x1);
        gbc.writeMem(0x1385, { 0xcb, 0x2e });
        gbc.writeMem(0xc701, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x402b);
        EXPECT(gbc.pc(), 0x1387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc701), 0x37);
        // CB 2E 037B
        gbc.setState(0x4b8e, 0xa6aa, 0x5ee0, 0xf16, 0x3df6, 0x9afe, 0x1, 0x1);
        gbc.writeMem(0x4b8e, { 0xcb, 0x2e });
        gbc.writeMem(0x9afe, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa6aa);
        EXPECT(gbc.pc(), 0x4b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afe), 0x12);
        // CB 2E 037D
        gbc.setState(0x294b, 0x672d, 0x6d40, 0x443f, 0x29ef, 0xa8dd, 0x0, 0x0);
        gbc.writeMem(0x294b, { 0xcb, 0x2e });
        gbc.writeMem(0xa8dd, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x672d);
        EXPECT(gbc.pc(), 0x294d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8dd), 0x25);
        // CB 2E 037F
        gbc.setState(0x9364, 0x3237, 0x7740, 0x81e6, 0x72d8, 0xeaa7, 0x1, 0x0);
        gbc.writeMem(0x9364, { 0xcb, 0x2e });
        gbc.writeMem(0xeaa7, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3237);
        EXPECT(gbc.pc(), 0x9366);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9364), 0xcb);
        EXPECT(gbc.readMem(0x9365), 0x2e);
        EXPECT(gbc.readMem(0xeaa7), 0x2c);
        // CB 2E 0382
        gbc.setState(0x3835, 0x731c, 0x1310, 0x5823, 0x9328, 0x9ec2, 0x1, 0x0);
        gbc.writeMem(0x3835, { 0xcb, 0x2e });
        gbc.writeMem(0x9ec2, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x731c);
        EXPECT(gbc.pc(), 0x3837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ec2), 0xed);
        // CB 2E 0384
        gbc.setState(0x60bd, 0x2897, 0xf8e0, 0xdbb4, 0xbbe5, 0xd693, 0x0, 0x1);
        gbc.writeMem(0x60bd, { 0xcb, 0x2e });
        gbc.writeMem(0xd693, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2897);
        EXPECT(gbc.pc(), 0x60bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd693), 0x1b);
        // CB 2E 0387
        gbc.setState(0xb12c, 0x41ad, 0x92d0, 0x52bc, 0x9713, 0xe6ed, 0x1, 0x1);
        gbc.writeMem(0xb12c, { 0xcb, 0x2e });
        gbc.writeMem(0xe6ed, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x41ad);
        EXPECT(gbc.pc(), 0xb12e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb12c), 0xcb);
        EXPECT(gbc.readMem(0xb12d), 0x2e);
        EXPECT(gbc.readMem(0xe6ed), 0xd8);
        // CB 2E 0388
        gbc.setState(0x1c6b, 0x94e4, 0x93a0, 0xdfe7, 0x3090, 0xa369, 0x0, 0x1);
        gbc.writeMem(0x1c6b, { 0xcb, 0x2e });
        gbc.writeMem(0xa369, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x94e4);
        EXPECT(gbc.pc(), 0x1c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa369), 0x18);
        // CB 2E 038A
        gbc.setState(0x1407, 0x725f, 0x1470, 0xdc28, 0x9758, 0x9ea9, 0x1, 0x0);
        gbc.writeMem(0x1407, { 0xcb, 0x2e });
        gbc.writeMem(0x9ea9, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x725f);
        EXPECT(gbc.pc(), 0x1409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea9), 0x2);
        // CB 2E 038C
        gbc.setState(0x1aea, 0x89b, 0xaac0, 0x9d4c, 0x674, 0x9e07, 0x0, 0x0);
        gbc.writeMem(0x1aea, { 0xcb, 0x2e });
        gbc.writeMem(0x9e07, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x89b);
        EXPECT(gbc.pc(), 0x1aec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e07), 0xc9);
        // CB 2E 038E
        gbc.setState(0x2ac2, 0x5f97, 0x45e0, 0x5701, 0xb070, 0x9456, 0x1, 0x1);
        gbc.writeMem(0x2ac2, { 0xcb, 0x2e });
        gbc.writeMem(0x9456, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x5f97);
        EXPECT(gbc.pc(), 0x2ac4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9456), 0x19);
        // CB 2E 038F
        gbc.setState(0x6fd4, 0xd566, 0xc8b0, 0x14fb, 0xe2c4, 0xdb43, 0x0, 0x0);
        gbc.writeMem(0x6fd4, { 0xcb, 0x2e });
        gbc.writeMem(0xdb43, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd566);
        EXPECT(gbc.pc(), 0x6fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb43), 0xf1);
        // CB 2E 0390
        gbc.setState(0x112c, 0x7721, 0x460, 0x9f9c, 0xcb31, 0xf5e2, 0x0, 0x0);
        gbc.writeMem(0x112c, { 0xcb, 0x2e });
        gbc.writeMem(0xf5e2, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7721);
        EXPECT(gbc.pc(), 0x112e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5e2), 0x33);
        // CB 2E 0391
        gbc.setState(0xc28b, 0x3c9c, 0x6c30, 0xd63d, 0x6b12, 0x8e18, 0x0, 0x1);
        gbc.writeMem(0x8e18, { 0x6b });
        gbc.writeMem(0xc28b, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3c9c);
        EXPECT(gbc.pc(), 0xc28d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e18), 0x35);
        EXPECT(gbc.readMem(0xc28b), 0xcb);
        EXPECT(gbc.readMem(0xc28c), 0x2e);
        // CB 2E 0392
        gbc.setState(0xc8f1, 0x43ce, 0x8fc0, 0x5944, 0xca6a, 0xc494, 0x0, 0x0);
        gbc.writeMem(0xc494, { 0x8e });
        gbc.writeMem(0xc8f1, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x43ce);
        EXPECT(gbc.pc(), 0xc8f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc494), 0xc7);
        EXPECT(gbc.readMem(0xc8f1), 0xcb);
        EXPECT(gbc.readMem(0xc8f2), 0x2e);
        // CB 2E 0393
        gbc.setState(0x27b1, 0x4794, 0x6e60, 0xc554, 0xfa4b, 0xf707, 0x1, 0x0);
        gbc.writeMem(0x27b1, { 0xcb, 0x2e });
        gbc.writeMem(0xf707, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4794);
        EXPECT(gbc.pc(), 0x27b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf707), 0xe2);
        // CB 2E 0394
        gbc.setState(0x8866, 0x1e78, 0x7b80, 0xb99f, 0x73c8, 0xf810, 0x0, 0x0);
        gbc.writeMem(0x8866, { 0xcb, 0x2e });
        gbc.writeMem(0xf810, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1e78);
        EXPECT(gbc.pc(), 0x8868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8866), 0xcb);
        EXPECT(gbc.readMem(0x8867), 0x2e);
        EXPECT(gbc.readMem(0xf810), 0x11);
        // CB 2E 0395
        gbc.setState(0x6790, 0x30, 0xe9f0, 0xdf03, 0xe702, 0xa770, 0x1, 0x0);
        gbc.writeMem(0x6790, { 0xcb, 0x2e });
        gbc.writeMem(0xa770, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x30);
        EXPECT(gbc.pc(), 0x6792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa770), 0x34);
        // CB 2E 0397
        gbc.setState(0x21f, 0xe136, 0xa190, 0x4e6a, 0xc4e2, 0xc7fa, 0x0, 0x1);
        gbc.writeMem(0x21f, { 0xcb, 0x2e });
        gbc.writeMem(0xc7fa, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe136);
        EXPECT(gbc.pc(), 0x221);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7fa), 0x1);
        // CB 2E 0399
        gbc.setState(0xa478, 0x4f4, 0x8d20, 0x6758, 0xbda7, 0x8fc4, 0x0, 0x1);
        gbc.writeMem(0x8fc4, { 0xb4 });
        gbc.writeMem(0xa478, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4f4);
        EXPECT(gbc.pc(), 0xa47a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc4), 0xda);
        EXPECT(gbc.readMem(0xa478), 0xcb);
        EXPECT(gbc.readMem(0xa479), 0x2e);
        // CB 2E 039D
        gbc.setState(0xe3c0, 0xb998, 0x6c50, 0x6f6, 0x2f77, 0xa1bd, 0x1, 0x1);
        gbc.writeMem(0xa1bd, { 0x95 });
        gbc.writeMem(0xe3c0, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb998);
        EXPECT(gbc.pc(), 0xe3c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1bd), 0xca);
        EXPECT(gbc.readMem(0xe3c0), 0xcb);
        EXPECT(gbc.readMem(0xe3c1), 0x2e);
        // CB 2E 039E
        gbc.setState(0xd22e, 0xad6f, 0x61f0, 0x5971, 0x4a7c, 0xb4de, 0x0, 0x0);
        gbc.writeMem(0xb4de, { 0xef });
        gbc.writeMem(0xd22e, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xad6f);
        EXPECT(gbc.pc(), 0xd230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4de), 0xf7);
        EXPECT(gbc.readMem(0xd22e), 0xcb);
        EXPECT(gbc.readMem(0xd22f), 0x2e);
        // CB 2E 039F
        gbc.setState(0x70b9, 0xef48, 0xa740, 0x31bc, 0x28e4, 0x8f06, 0x1, 0x1);
        gbc.writeMem(0x70b9, { 0xcb, 0x2e });
        gbc.writeMem(0x8f06, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xef48);
        EXPECT(gbc.pc(), 0x70bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f06), 0xda);
        // CB 2E 03A2
        gbc.setState(0xdf6b, 0x1aa9, 0x2e80, 0x66b8, 0x9936, 0xacb0, 0x1, 0x0);
        gbc.writeMem(0xacb0, { 0xe1 });
        gbc.writeMem(0xdf6b, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1aa9);
        EXPECT(gbc.pc(), 0xdf6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb0), 0xf0);
        EXPECT(gbc.readMem(0xdf6b), 0xcb);
        EXPECT(gbc.readMem(0xdf6c), 0x2e);
        // CB 2E 03A3
        gbc.setState(0xef1a, 0xfac7, 0x4330, 0x52bd, 0x3363, 0xb54d, 0x0, 0x0);
        gbc.writeMem(0xb54d, { 0xeb });
        gbc.writeMem(0xef1a, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfac7);
        EXPECT(gbc.pc(), 0xef1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb54d), 0xf5);
        EXPECT(gbc.readMem(0xef1a), 0xcb);
        EXPECT(gbc.readMem(0xef1b), 0x2e);
        // CB 2E 03A4
        gbc.setState(0x8051, 0xae01, 0x7c50, 0xa30, 0x8998, 0x89a2, 0x1, 0x0);
        gbc.writeMem(0x8051, { 0xcb, 0x2e });
        gbc.writeMem(0x89a2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xae01);
        EXPECT(gbc.pc(), 0x8053);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8051), 0xcb);
        EXPECT(gbc.readMem(0x8052), 0x2e);
        EXPECT(gbc.readMem(0x89a2), 0x1f);
        // CB 2E 03A5
        gbc.setState(0x8c7c, 0x8c22, 0x47d0, 0xb07a, 0x3e01, 0x90bd, 0x1, 0x0);
        gbc.writeMem(0x8c7c, { 0xcb, 0x2e });
        gbc.writeMem(0x90bd, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8c22);
        EXPECT(gbc.pc(), 0x8c7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c7c), 0xcb);
        EXPECT(gbc.readMem(0x8c7d), 0x2e);
        EXPECT(gbc.readMem(0x90bd), 0x5);
        // CB 2E 03A6
        gbc.setState(0x91a0, 0x34a7, 0xdc30, 0x5a2, 0xee15, 0xf1df, 0x0, 0x1);
        gbc.writeMem(0x91a0, { 0xcb, 0x2e });
        gbc.writeMem(0xf1df, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x34a7);
        EXPECT(gbc.pc(), 0x91a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a0), 0xcb);
        EXPECT(gbc.readMem(0x91a1), 0x2e);
        EXPECT(gbc.readMem(0xf1df), 0x29);
        // CB 2E 03A8
        gbc.setState(0xc60a, 0xce2a, 0xdbf0, 0x845e, 0xcdb0, 0xe800, 0x0, 0x0);
        gbc.writeMem(0xc60a, { 0xcb, 0x2e });
        gbc.writeMem(0xe800, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xce2a);
        EXPECT(gbc.pc(), 0xc60c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc60a), 0xcb);
        EXPECT(gbc.readMem(0xc60b), 0x2e);
        EXPECT(gbc.readMem(0xe800), 0x5);
        // CB 2E 03A9
        gbc.setState(0x9d16, 0xf8cb, 0x25b0, 0x3d43, 0xd8f2, 0xb18f, 0x1, 0x1);
        gbc.writeMem(0x9d16, { 0xcb, 0x2e });
        gbc.writeMem(0xb18f, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf8cb);
        EXPECT(gbc.pc(), 0x9d18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d16), 0xcb);
        EXPECT(gbc.readMem(0x9d17), 0x2e);
        EXPECT(gbc.readMem(0xb18f), 0xc2);
        // CB 2E 03AD
        gbc.setState(0x17f6, 0x6cd0, 0x5550, 0xf1a7, 0x8393, 0xe2e9, 0x0, 0x0);
        gbc.writeMem(0x17f6, { 0xcb, 0x2e });
        gbc.writeMem(0xe2e9, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6cd0);
        EXPECT(gbc.pc(), 0x17f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2e9), 0xdd);
        // CB 2E 03B3
        gbc.setState(0xa74b, 0x6fb3, 0x1af0, 0x6fe2, 0x23c3, 0xef33, 0x1, 0x1);
        gbc.writeMem(0xa74b, { 0xcb, 0x2e });
        gbc.writeMem(0xef33, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6fb3);
        EXPECT(gbc.pc(), 0xa74d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa74b), 0xcb);
        EXPECT(gbc.readMem(0xa74c), 0x2e);
        EXPECT(gbc.readMem(0xef33), 0x29);
        // CB 2E 03B4
        gbc.setState(0xb73, 0xe6b, 0xd030, 0x31f0, 0x58aa, 0xfd24, 0x1, 0x0);
        gbc.writeMem(0xb73, { 0xcb, 0x2e });
        gbc.writeMem(0xfd24, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe6b);
        EXPECT(gbc.pc(), 0xb75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd24), 0xd5);
        // CB 2E 03B5
        gbc.setState(0x3dde, 0x8342, 0x5e00, 0x26eb, 0x4e34, 0x8b4b, 0x0, 0x0);
        gbc.writeMem(0x3dde, { 0xcb, 0x2e });
        gbc.writeMem(0x8b4b, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8342);
        EXPECT(gbc.pc(), 0x3de0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b4b), 0xf4);
        // CB 2E 03B8
        gbc.setState(0x9917, 0xa343, 0x9cd0, 0xe4a, 0x522b, 0xa61f, 0x0, 0x1);
        gbc.writeMem(0x9917, { 0xcb, 0x2e });
        gbc.writeMem(0xa61f, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa343);
        EXPECT(gbc.pc(), 0x9919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9917), 0xcb);
        EXPECT(gbc.readMem(0x9918), 0x2e);
        EXPECT(gbc.readMem(0xa61f), 0x11);
        // CB 2E 03B9
        gbc.setState(0x6d16, 0x177f, 0x4ce0, 0x9279, 0x3344, 0x8ae6, 0x0, 0x1);
        gbc.writeMem(0x6d16, { 0xcb, 0x2e });
        gbc.writeMem(0x8ae6, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x177f);
        EXPECT(gbc.pc(), 0x6d18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ae6), 0xdd);
        // CB 2E 03BA
        gbc.setState(0x5948, 0x8121, 0xbe80, 0x79fe, 0x5db, 0x95fd, 0x0, 0x1);
        gbc.writeMem(0x5948, { 0xcb, 0x2e });
        gbc.writeMem(0x95fd, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8121);
        EXPECT(gbc.pc(), 0x594a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fd), 0x18);
        // CB 2E 03BB
        gbc.setState(0x5cbe, 0x4057, 0x5940, 0x171b, 0x6e9f, 0xa2d4, 0x0, 0x1);
        gbc.writeMem(0x5cbe, { 0xcb, 0x2e });
        gbc.writeMem(0xa2d4, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4057);
        EXPECT(gbc.pc(), 0x5cc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2d4), 0xea);
        // CB 2E 03BD
        gbc.setState(0x2b55, 0x471d, 0x6a0, 0x1565, 0x7981, 0x9c42, 0x1, 0x0);
        gbc.writeMem(0x2b55, { 0xcb, 0x2e });
        gbc.writeMem(0x9c42, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x471d);
        EXPECT(gbc.pc(), 0x2b57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c42), 0xcc);
        // CB 2E 03BE
        gbc.setState(0x7c20, 0xf8ea, 0x6e20, 0xf75, 0x4d8f, 0xc2ef, 0x0, 0x1);
        gbc.writeMem(0x7c20, { 0xcb, 0x2e });
        gbc.writeMem(0xc2ef, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf8ea);
        EXPECT(gbc.pc(), 0x7c22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2ef), 0xf1);
        // CB 2E 03C1
        gbc.setState(0x963f, 0x9a88, 0x8500, 0x2513, 0x86c7, 0xd555, 0x1, 0x1);
        gbc.writeMem(0x963f, { 0xcb, 0x2e });
        gbc.writeMem(0xd555, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9a88);
        EXPECT(gbc.pc(), 0x9641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x963f), 0xcb);
        EXPECT(gbc.readMem(0x9640), 0x2e);
        EXPECT(gbc.readMem(0xd555), 0xdc);
        // CB 2E 03C2
        gbc.setState(0xe9de, 0x92f9, 0x6930, 0x909d, 0xec4f, 0xad07, 0x0, 0x1);
        gbc.writeMem(0xad07, { 0x31 });
        gbc.writeMem(0xe9de, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x92f9);
        EXPECT(gbc.pc(), 0xe9e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad07), 0x18);
        EXPECT(gbc.readMem(0xe9de), 0xcb);
        EXPECT(gbc.readMem(0xe9df), 0x2e);
        // CB 2E 03C6
        gbc.setState(0xd3e8, 0xf437, 0x38b0, 0x645d, 0xb0a3, 0x9493, 0x1, 0x1);
        gbc.writeMem(0x9493, { 0x2e });
        gbc.writeMem(0xd3e8, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf437);
        EXPECT(gbc.pc(), 0xd3ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9493), 0x17);
        EXPECT(gbc.readMem(0xd3e8), 0xcb);
        EXPECT(gbc.readMem(0xd3e9), 0x2e);
        // CB 2E 03C8
        gbc.setState(0x59bb, 0x679e, 0xb010, 0x315a, 0xe8ad, 0xcabe, 0x1, 0x0);
        gbc.writeMem(0x59bb, { 0xcb, 0x2e });
        gbc.writeMem(0xcabe, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x679e);
        EXPECT(gbc.pc(), 0x59bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcabe), 0x34);
        // CB 2E 03D0
        gbc.setState(0x3f0e, 0xf833, 0x1580, 0xf6dd, 0x89f1, 0xc474, 0x0, 0x1);
        gbc.writeMem(0x3f0e, { 0xcb, 0x2e });
        gbc.writeMem(0xc474, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf833);
        EXPECT(gbc.pc(), 0x3f10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc474), 0xe6);
        // CB 2E 03D3
        gbc.setState(0x59fd, 0xf02a, 0x2170, 0x6890, 0xbdb5, 0xb6c5, 0x1, 0x1);
        gbc.writeMem(0x59fd, { 0xcb, 0x2e });
        gbc.writeMem(0xb6c5, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf02a);
        EXPECT(gbc.pc(), 0x59ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c5), 0x2a);
        // CB 2E 03D5
        gbc.setState(0x4c7b, 0xfaf8, 0xa060, 0x462c, 0xd3f0, 0xbcbe, 0x0, 0x0);
        gbc.writeMem(0x4c7b, { 0xcb, 0x2e });
        gbc.writeMem(0xbcbe, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfaf8);
        EXPECT(gbc.pc(), 0x4c7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcbe), 0xcc);
        // CB 2E 03D7
        gbc.setState(0x18f, 0x8652, 0x4360, 0xd222, 0xd6e6, 0xe963, 0x0, 0x0);
        gbc.writeMem(0x18f, { 0xcb, 0x2e });
        gbc.writeMem(0xe963, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8652);
        EXPECT(gbc.pc(), 0x191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe963), 0x5);
        // CB 2E 03D8
        gbc.setState(0x980d, 0x4750, 0xa170, 0x9403, 0xa899, 0xc910, 0x0, 0x0);
        gbc.writeMem(0x980d, { 0xcb, 0x2e });
        gbc.writeMem(0xc910, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4750);
        EXPECT(gbc.pc(), 0x980f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980d), 0xcb);
        EXPECT(gbc.readMem(0x980e), 0x2e);
        EXPECT(gbc.readMem(0xc910), 0xe1);
        // CB 2E 03DC
        gbc.setState(0x8f54, 0x28b7, 0x8ff0, 0xad10, 0xf410, 0xe0d7, 0x0, 0x0);
        gbc.writeMem(0x8f54, { 0xcb, 0x2e });
        gbc.writeMem(0xe0d7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x28b7);
        EXPECT(gbc.pc(), 0x8f56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f54), 0xcb);
        EXPECT(gbc.readMem(0x8f55), 0x2e);
        EXPECT(gbc.readMem(0xe0d7), 0x0);
        // CB 2E 03DF
        gbc.setState(0x2f59, 0x2a41, 0xa340, 0x54f0, 0x9cc1, 0xc3e8, 0x1, 0x0);
        gbc.writeMem(0x2f59, { 0xcb, 0x2e });
        gbc.writeMem(0xc3e8, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2a41);
        EXPECT(gbc.pc(), 0x2f5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e8), 0x4);
        // CB 2E 03E0
        gbc.setState(0x41eb, 0xe7a5, 0x62d0, 0xbc23, 0x5ebe, 0xf300, 0x1, 0x1);
        gbc.writeMem(0x41eb, { 0xcb, 0x2e });
        gbc.writeMem(0xf300, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe7a5);
        EXPECT(gbc.pc(), 0x41ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf300), 0x6);
        // CB 2E 03E1
        gbc.setState(0x316, 0xe3e3, 0x3d60, 0xddf2, 0x739c, 0xb812, 0x0, 0x0);
        gbc.writeMem(0x316, { 0xcb, 0x2e });
        gbc.writeMem(0xb812, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe3e3);
        EXPECT(gbc.pc(), 0x318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb812), 0xf4);
        // CB 2E 03E3
        gbc.setState(0x43cb, 0xac06, 0x8190, 0x40aa, 0x43f2, 0xff14, 0x0, 0x0);
        gbc.writeMem(0x43cb, { 0xcb, 0x2e });
        gbc.writeMem(0xff14, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xac06);
        EXPECT(gbc.pc(), 0x43cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff14), 0xd7);
        // CB 2E 03E6
        gbc.setState(0xd167, 0x225, 0x71c0, 0x3e9, 0xd0eb, 0xc50c, 0x1, 0x1);
        gbc.writeMem(0xc50c, { 0xbc });
        gbc.writeMem(0xd167, { 0xcb, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x225);
        EXPECT(gbc.pc(), 0xd169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc50c), 0xde);
        EXPECT(gbc.readMem(0xd167), 0xcb);
        EXPECT(gbc.readMem(0xd168), 0x2e);
        // CB 2E 03E7
        gbc.setState(0xe1c4, 0xad7e, 0xf9f0, 0xd811, 0xf61f, 0xfb11, 0x0, 0x1);
        gbc.writeMem(0xe1c4, { 0xcb, 0x2e });
        gbc.writeMem(0xfb11, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xad7e);
        EXPECT(gbc.pc(), 0xe1c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1c4), 0xcb);
        EXPECT(gbc.readMem(0xe1c5), 0x2e);
        EXPECT(gbc.readMem(0xfb11), 0xd8);
    }
}
#endif
