    TEST(gbcemu, opcode_cb_17) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 17 0000
        gbc.setState(0x3175, 0x9f62, 0xd120, 0x4ec0, 0xeffc, 0xcdec, 0x0, 0x1);
        gbc.writeMem(0x3175, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9f62);
        EXPECT(gbc.pc(), 0x3177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0001
        gbc.setState(0x4cfd, 0x60fc, 0xd810, 0xa218, 0xdf0e, 0x744b, 0x1, 0x1);
        gbc.writeMem(0x4cfd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x60fc);
        EXPECT(gbc.pc(), 0x4cff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0002
        gbc.setState(0xafd1, 0x4072, 0xb8b0, 0x5f23, 0xfde4, 0x5921, 0x0, 0x0);
        gbc.writeMem(0xafd1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4072);
        EXPECT(gbc.pc(), 0xafd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd1), 0xcb);
        EXPECT(gbc.readMem(0xafd2), 0x17);
        // CB 17 0003
        gbc.setState(0xbc5e, 0x2f8f, 0x63e0, 0xbd54, 0xdd12, 0x9626, 0x0, 0x0);
        gbc.writeMem(0xbc5e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2f8f);
        EXPECT(gbc.pc(), 0xbc60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5e), 0xcb);
        EXPECT(gbc.readMem(0xbc5f), 0x17);
        // CB 17 0004
        gbc.setState(0x3524, 0x53f3, 0x9870, 0x5009, 0xfe17, 0x70b9, 0x1, 0x0);
        gbc.writeMem(0x3524, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x53f3);
        EXPECT(gbc.pc(), 0x3526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0005
        gbc.setState(0x7e0e, 0x9c72, 0x9bd0, 0xe013, 0xd09, 0x5b71, 0x1, 0x0);
        gbc.writeMem(0x7e0e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9c72);
        EXPECT(gbc.pc(), 0x7e10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0006
        gbc.setState(0xa672, 0xab81, 0x3940, 0xa7c8, 0xe217, 0x354a, 0x0, 0x1);
        gbc.writeMem(0xa672, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xab81);
        EXPECT(gbc.pc(), 0xa674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa672), 0xcb);
        EXPECT(gbc.readMem(0xa673), 0x17);
        // CB 17 0007
        gbc.setState(0xdccb, 0xb78f, 0x4400, 0x2c99, 0x36ec, 0x2e54, 0x0, 0x1);
        gbc.writeMem(0xdccb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb78f);
        EXPECT(gbc.pc(), 0xdccd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdccb), 0xcb);
        EXPECT(gbc.readMem(0xdccc), 0x17);
        // CB 17 0008
        gbc.setState(0xa883, 0x720f, 0x6090, 0xe67e, 0x6465, 0x90db, 0x0, 0x0);
        gbc.writeMem(0xa883, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x720f);
        EXPECT(gbc.pc(), 0xa885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa883), 0xcb);
        EXPECT(gbc.readMem(0xa884), 0x17);
        // CB 17 0009
        gbc.setState(0x1ac, 0xe8a3, 0xe90, 0x12e1, 0x6e18, 0x3223, 0x0, 0x0);
        gbc.writeMem(0x1ac, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe8a3);
        EXPECT(gbc.pc(), 0x1ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 000A
        gbc.setState(0x743b, 0xf2ae, 0x9f20, 0xe273, 0x876d, 0x10b6, 0x0, 0x1);
        gbc.writeMem(0x743b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf2ae);
        EXPECT(gbc.pc(), 0x743d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 000B
        gbc.setState(0x49c0, 0x1016, 0x51a0, 0xba5, 0xd7c9, 0x60d1, 0x0, 0x0);
        gbc.writeMem(0x49c0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1016);
        EXPECT(gbc.pc(), 0x49c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 000C
        gbc.setState(0x128e, 0x8074, 0xcfa0, 0xde34, 0x25d9, 0x5ae0, 0x1, 0x1);
        gbc.writeMem(0x128e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8074);
        EXPECT(gbc.pc(), 0x1290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 000D
        gbc.setState(0x93db, 0xf2b1, 0x5920, 0xd3b1, 0xdebb, 0x1522, 0x0, 0x1);
        gbc.writeMem(0x93db, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf2b1);
        EXPECT(gbc.pc(), 0x93dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93db), 0xcb);
        EXPECT(gbc.readMem(0x93dc), 0x17);
        // CB 17 000F
        gbc.setState(0x5eba, 0x8f45, 0x18b0, 0x3a39, 0xc879, 0xe048, 0x0, 0x0);
        gbc.writeMem(0x5eba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8f45);
        EXPECT(gbc.pc(), 0x5ebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0011
        gbc.setState(0xef5d, 0x7627, 0x970, 0xdc07, 0x3172, 0xf652, 0x0, 0x0);
        gbc.writeMem(0xef5d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7627);
        EXPECT(gbc.pc(), 0xef5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef5d), 0xcb);
        EXPECT(gbc.readMem(0xef5e), 0x17);
        // CB 17 0012
        gbc.setState(0xb6b, 0xf935, 0xd6e0, 0x9109, 0x8dce, 0x83bc, 0x0, 0x0);
        gbc.writeMem(0xb6b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf935);
        EXPECT(gbc.pc(), 0xb6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0013
        gbc.setState(0x2779, 0x5f32, 0xbda0, 0xe32e, 0x6efd, 0xfda7, 0x0, 0x1);
        gbc.writeMem(0x2779, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5f32);
        EXPECT(gbc.pc(), 0x277b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0014
        gbc.setState(0x639c, 0xf380, 0x72e0, 0x90f, 0x1ae9, 0x766f, 0x0, 0x1);
        gbc.writeMem(0x639c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf380);
        EXPECT(gbc.pc(), 0x639e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0015
        gbc.setState(0x87f4, 0xdc91, 0x3a20, 0x8147, 0xf00f, 0x9143, 0x0, 0x0);
        gbc.writeMem(0x87f4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xdc91);
        EXPECT(gbc.pc(), 0x87f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87f4), 0xcb);
        EXPECT(gbc.readMem(0x87f5), 0x17);
        // CB 17 0016
        gbc.setState(0x8432, 0xf183, 0xc370, 0x9407, 0x2cd6, 0x5878, 0x1, 0x0);
        gbc.writeMem(0x8432, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf183);
        EXPECT(gbc.pc(), 0x8434);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8432), 0xcb);
        EXPECT(gbc.readMem(0x8433), 0x17);
        // CB 17 0017
        gbc.setState(0xc5c6, 0x6d30, 0x8a50, 0x6ea3, 0xe1d4, 0x8698, 0x0, 0x0);
        gbc.writeMem(0xc5c6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6d30);
        EXPECT(gbc.pc(), 0xc5c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c6), 0xcb);
        EXPECT(gbc.readMem(0xc5c7), 0x17);
        // CB 17 0019
        gbc.setState(0x6471, 0x59a1, 0x4d20, 0x2f58, 0x5976, 0xd6b1, 0x0, 0x0);
        gbc.writeMem(0x6471, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x59a1);
        EXPECT(gbc.pc(), 0x6473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 001A
        gbc.setState(0x6c12, 0xa2b1, 0x14c0, 0xe89a, 0xa14c, 0xaa6b, 0x1, 0x1);
        gbc.writeMem(0x6c12, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa2b1);
        EXPECT(gbc.pc(), 0x6c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 001B
        gbc.setState(0x5258, 0x4259, 0x7b90, 0xe04a, 0xbce4, 0xf28, 0x0, 0x0);
        gbc.writeMem(0x5258, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4259);
        EXPECT(gbc.pc(), 0x525a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 001C
        gbc.setState(0x660a, 0xc18d, 0xea70, 0x78b6, 0xbe72, 0x3492, 0x0, 0x1);
        gbc.writeMem(0x660a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc18d);
        EXPECT(gbc.pc(), 0x660c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 001D
        gbc.setState(0x8c18, 0xd8f5, 0xcba0, 0xfeee, 0xe972, 0x3b8e, 0x1, 0x1);
        gbc.writeMem(0x8c18, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd8f5);
        EXPECT(gbc.pc(), 0x8c1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c18), 0xcb);
        EXPECT(gbc.readMem(0x8c19), 0x17);
        // CB 17 001F
        gbc.setState(0xe73b, 0x1d55, 0x8330, 0xa3f2, 0x6f19, 0x10b8, 0x0, 0x0);
        gbc.writeMem(0xe73b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1d55);
        EXPECT(gbc.pc(), 0xe73d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe73b), 0xcb);
        EXPECT(gbc.readMem(0xe73c), 0x17);
        // CB 17 0020
        gbc.setState(0x2d78, 0x7f36, 0x6a80, 0xed18, 0xa519, 0xb292, 0x1, 0x1);
        gbc.writeMem(0x2d78, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7f36);
        EXPECT(gbc.pc(), 0x2d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0021
        gbc.setState(0x5a4a, 0x1339, 0xddc0, 0x1256, 0x5631, 0x249c, 0x1, 0x1);
        gbc.writeMem(0x5a4a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1339);
        EXPECT(gbc.pc(), 0x5a4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0022
        gbc.setState(0x61ec, 0xce49, 0xfb20, 0x5cb9, 0x476e, 0xa4ac, 0x1, 0x1);
        gbc.writeMem(0x61ec, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xce49);
        EXPECT(gbc.pc(), 0x61ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0023
        gbc.setState(0xb2ba, 0x689, 0xd4b0, 0x865d, 0x9eb2, 0xee84, 0x0, 0x0);
        gbc.writeMem(0xb2ba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x689);
        EXPECT(gbc.pc(), 0xb2bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ba), 0xcb);
        EXPECT(gbc.readMem(0xb2bb), 0x17);
        // CB 17 0024
        gbc.setState(0xdea6, 0xd497, 0x8c80, 0x6249, 0x7559, 0xabc6, 0x1, 0x1);
        gbc.writeMem(0xdea6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd497);
        EXPECT(gbc.pc(), 0xdea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea6), 0xcb);
        EXPECT(gbc.readMem(0xdea7), 0x17);
        // CB 17 0025
        gbc.setState(0x1db1, 0xf473, 0x96a0, 0x1279, 0x1a52, 0xcac7, 0x1, 0x0);
        gbc.writeMem(0x1db1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf473);
        EXPECT(gbc.pc(), 0x1db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0026
        gbc.setState(0x17c6, 0x5980, 0x2650, 0xf7e5, 0x5d5d, 0x39ea, 0x0, 0x1);
        gbc.writeMem(0x17c6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5980);
        EXPECT(gbc.pc(), 0x17c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0027
        gbc.setState(0x81fb, 0x44df, 0x8f40, 0x936d, 0x852c, 0x7908, 0x1, 0x0);
        gbc.writeMem(0x81fb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x44df);
        EXPECT(gbc.pc(), 0x81fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81fb), 0xcb);
        EXPECT(gbc.readMem(0x81fc), 0x17);
        // CB 17 0028
        gbc.setState(0x7e61, 0xd7f4, 0xe930, 0x376d, 0xd323, 0x1c8a, 0x0, 0x0);
        gbc.writeMem(0x7e61, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd7f4);
        EXPECT(gbc.pc(), 0x7e63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0029
        gbc.setState(0xddca, 0xd842, 0xc8d0, 0xbaa5, 0x464c, 0xb83, 0x1, 0x0);
        gbc.writeMem(0xddca, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd842);
        EXPECT(gbc.pc(), 0xddcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddca), 0xcb);
        EXPECT(gbc.readMem(0xddcb), 0x17);
        // CB 17 002A
        gbc.setState(0x331c, 0xd0fc, 0x2bb0, 0x766b, 0xbad7, 0x1a59, 0x0, 0x1);
        gbc.writeMem(0x331c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd0fc);
        EXPECT(gbc.pc(), 0x331e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 002B
        gbc.setState(0xe033, 0xe2a8, 0x7640, 0x8a27, 0xf75e, 0x3130, 0x1, 0x0);
        gbc.writeMem(0xe033, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe2a8);
        EXPECT(gbc.pc(), 0xe035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe033), 0xcb);
        EXPECT(gbc.readMem(0xe034), 0x17);
        // CB 17 002C
        gbc.setState(0xcffe, 0x8fd5, 0x7b90, 0xe4f5, 0x74da, 0x447a, 0x0, 0x1);
        gbc.writeMem(0xcffe, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8fd5);
        EXPECT(gbc.pc(), 0xd000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcffe), 0xcb);
        EXPECT(gbc.readMem(0xcfff), 0x17);
        // CB 17 002D
        gbc.setState(0xe556, 0x5b7f, 0xd2b0, 0xb2c0, 0xe8b4, 0x4923, 0x1, 0x1);
        gbc.writeMem(0xe556, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5b7f);
        EXPECT(gbc.pc(), 0xe558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe556), 0xcb);
        EXPECT(gbc.readMem(0xe557), 0x17);
        // CB 17 002E
        gbc.setState(0x5e45, 0xb893, 0x10b0, 0x9e00, 0xe7d0, 0xa4a, 0x0, 0x1);
        gbc.writeMem(0x5e45, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb893);
        EXPECT(gbc.pc(), 0x5e47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 002F
        gbc.setState(0xa60c, 0x55e0, 0xe400, 0x49da, 0xe1fa, 0x27e6, 0x0, 0x0);
        gbc.writeMem(0xa60c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x55e0);
        EXPECT(gbc.pc(), 0xa60e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa60c), 0xcb);
        EXPECT(gbc.readMem(0xa60d), 0x17);
        // CB 17 0030
        gbc.setState(0x3957, 0x3199, 0xf540, 0x318, 0xbeb0, 0x2dd6, 0x0, 0x0);
        gbc.writeMem(0x3957, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3199);
        EXPECT(gbc.pc(), 0x3959);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0031
        gbc.setState(0xb4a4, 0x4a8d, 0x60, 0x1f9, 0xac14, 0x3ee4, 0x1, 0x1);
        gbc.writeMem(0xb4a4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4a8d);
        EXPECT(gbc.pc(), 0xb4a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a4), 0xcb);
        EXPECT(gbc.readMem(0xb4a5), 0x17);
        // CB 17 0033
        gbc.setState(0x7c74, 0xc1f, 0x6010, 0x9bab, 0x1e7e, 0x8149, 0x0, 0x0);
        gbc.writeMem(0x7c74, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc1f);
        EXPECT(gbc.pc(), 0x7c76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0034
        gbc.setState(0xed4d, 0xe978, 0xce30, 0xa268, 0x7f16, 0x1464, 0x1, 0x1);
        gbc.writeMem(0xed4d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe978);
        EXPECT(gbc.pc(), 0xed4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed4d), 0xcb);
        EXPECT(gbc.readMem(0xed4e), 0x17);
        // CB 17 0036
        gbc.setState(0xed29, 0xda36, 0x2d90, 0x583, 0xb050, 0xc434, 0x0, 0x0);
        gbc.writeMem(0xed29, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xda36);
        EXPECT(gbc.pc(), 0xed2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed29), 0xcb);
        EXPECT(gbc.readMem(0xed2a), 0x17);
        // CB 17 0037
        gbc.setState(0xaa89, 0x3b72, 0xb9f0, 0x4f20, 0x5d85, 0xce78, 0x1, 0x1);
        gbc.writeMem(0xaa89, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3b72);
        EXPECT(gbc.pc(), 0xaa8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa89), 0xcb);
        EXPECT(gbc.readMem(0xaa8a), 0x17);
        // CB 17 0039
        gbc.setState(0x23ab, 0x5cc6, 0xb940, 0xc620, 0x9d67, 0x5c65, 0x1, 0x0);
        gbc.writeMem(0x23ab, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5cc6);
        EXPECT(gbc.pc(), 0x23ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 003A
        gbc.setState(0x1de0, 0x959, 0x63e0, 0x6202, 0x7213, 0x7574, 0x0, 0x1);
        gbc.writeMem(0x1de0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x959);
        EXPECT(gbc.pc(), 0x1de2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 003B
        gbc.setState(0xbc5e, 0x73, 0xc920, 0x5bd1, 0x3f9b, 0x70e2, 0x1, 0x1);
        gbc.writeMem(0xbc5e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x73);
        EXPECT(gbc.pc(), 0xbc60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc5e), 0xcb);
        EXPECT(gbc.readMem(0xbc5f), 0x17);
        // CB 17 003C
        gbc.setState(0xc253, 0x47b1, 0xba30, 0xb233, 0xaeeb, 0xac69, 0x1, 0x0);
        gbc.writeMem(0xc253, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x47b1);
        EXPECT(gbc.pc(), 0xc255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc253), 0xcb);
        EXPECT(gbc.readMem(0xc254), 0x17);
        // CB 17 003D
        gbc.setState(0x3369, 0x7422, 0xe60, 0xb028, 0x8c4, 0x9cd0, 0x1, 0x1);
        gbc.writeMem(0x3369, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7422);
        EXPECT(gbc.pc(), 0x336b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 003E
        gbc.setState(0xe654, 0x159a, 0x9cb0, 0xc265, 0x2413, 0x4b76, 0x1, 0x0);
        gbc.writeMem(0xe654, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x159a);
        EXPECT(gbc.pc(), 0xe656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe654), 0xcb);
        EXPECT(gbc.readMem(0xe655), 0x17);
        // CB 17 003F
        gbc.setState(0x2b46, 0x2a46, 0xc460, 0xa25f, 0x781, 0xf66b, 0x1, 0x1);
        gbc.writeMem(0x2b46, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2a46);
        EXPECT(gbc.pc(), 0x2b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0040
        gbc.setState(0xa3a5, 0x67fc, 0x9ff0, 0xd14a, 0x70d, 0xab95, 0x1, 0x1);
        gbc.writeMem(0xa3a5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x67fc);
        EXPECT(gbc.pc(), 0xa3a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3a5), 0xcb);
        EXPECT(gbc.readMem(0xa3a6), 0x17);
        // CB 17 0041
        gbc.setState(0x19e3, 0x53a7, 0x8eb0, 0x7310, 0xcf54, 0x51b1, 0x1, 0x1);
        gbc.writeMem(0x19e3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x53a7);
        EXPECT(gbc.pc(), 0x19e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0042
        gbc.setState(0x40a4, 0x40cc, 0x3390, 0xfc40, 0x86ac, 0xdf7e, 0x0, 0x0);
        gbc.writeMem(0x40a4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x40cc);
        EXPECT(gbc.pc(), 0x40a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0043
        gbc.setState(0x91c7, 0x2316, 0xd460, 0xbc5b, 0x89ab, 0x8e43, 0x0, 0x0);
        gbc.writeMem(0x91c7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2316);
        EXPECT(gbc.pc(), 0x91c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91c7), 0xcb);
        EXPECT(gbc.readMem(0x91c8), 0x17);
        // CB 17 0044
        gbc.setState(0x7705, 0x5ca6, 0x4080, 0xd170, 0xd19c, 0x4130, 0x0, 0x0);
        gbc.writeMem(0x7705, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5ca6);
        EXPECT(gbc.pc(), 0x7707);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0046
        gbc.setState(0xd9ce, 0x3024, 0x8810, 0x2426, 0x455a, 0x1ba2, 0x0, 0x1);
        gbc.writeMem(0xd9ce, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x3024);
        EXPECT(gbc.pc(), 0xd9d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ce), 0xcb);
        EXPECT(gbc.readMem(0xd9cf), 0x17);
        // CB 17 0047
        gbc.setState(0x4c9f, 0x1e88, 0xed80, 0x8e73, 0x797, 0x5f45, 0x0, 0x0);
        gbc.writeMem(0x4c9f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1e88);
        EXPECT(gbc.pc(), 0x4ca1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0048
        gbc.setState(0xb115, 0x3d2e, 0xf880, 0x8e1e, 0xf959, 0x8933, 0x1, 0x1);
        gbc.writeMem(0xb115, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3d2e);
        EXPECT(gbc.pc(), 0xb117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb115), 0xcb);
        EXPECT(gbc.readMem(0xb116), 0x17);
        // CB 17 0049
        gbc.setState(0x34dd, 0xd4d, 0x8150, 0x86f4, 0x51c4, 0x4b0a, 0x0, 0x0);
        gbc.writeMem(0x34dd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd4d);
        EXPECT(gbc.pc(), 0x34df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 004A
        gbc.setState(0x5a7f, 0x2f79, 0x31a0, 0x8261, 0x7bf7, 0xbe4f, 0x0, 0x0);
        gbc.writeMem(0x5a7f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2f79);
        EXPECT(gbc.pc(), 0x5a81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 004B
        gbc.setState(0x48c6, 0xa1e, 0xee30, 0x7d21, 0xaaf3, 0x1878, 0x1, 0x1);
        gbc.writeMem(0x48c6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa1e);
        EXPECT(gbc.pc(), 0x48c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 004C
        gbc.setState(0xa256, 0x8e22, 0xc840, 0xa3dd, 0x7db6, 0x123e, 0x0, 0x1);
        gbc.writeMem(0xa256, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8e22);
        EXPECT(gbc.pc(), 0xa258);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa256), 0xcb);
        EXPECT(gbc.readMem(0xa257), 0x17);
        // CB 17 004D
        gbc.setState(0xfc9, 0xda3f, 0x9df0, 0x3a67, 0x3e9a, 0x34c0, 0x0, 0x0);
        gbc.writeMem(0xfc9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xda3f);
        EXPECT(gbc.pc(), 0xfcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 004E
        gbc.setState(0xd259, 0x5f32, 0x3110, 0x2e59, 0xb3b6, 0x16f1, 0x1, 0x0);
        gbc.writeMem(0xd259, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5f32);
        EXPECT(gbc.pc(), 0xd25b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd259), 0xcb);
        EXPECT(gbc.readMem(0xd25a), 0x17);
        // CB 17 004F
        gbc.setState(0x60a0, 0x9f72, 0xc000, 0x8b33, 0x5bc, 0x5b3a, 0x1, 0x1);
        gbc.writeMem(0x60a0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9f72);
        EXPECT(gbc.pc(), 0x60a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0050
        gbc.setState(0x5b6a, 0x3432, 0x6000, 0x7aa2, 0x7848, 0xb6f, 0x1, 0x0);
        gbc.writeMem(0x5b6a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x3432);
        EXPECT(gbc.pc(), 0x5b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0051
        gbc.setState(0x2ba7, 0x9d94, 0x44b0, 0x6cf, 0xc32d, 0x4e65, 0x1, 0x1);
        gbc.writeMem(0x2ba7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9d94);
        EXPECT(gbc.pc(), 0x2ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0052
        gbc.setState(0xceab, 0xcf43, 0xab10, 0xecf6, 0xcfcc, 0x9500, 0x1, 0x1);
        gbc.writeMem(0xceab, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xcf43);
        EXPECT(gbc.pc(), 0xcead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceab), 0xcb);
        EXPECT(gbc.readMem(0xceac), 0x17);
        // CB 17 0053
        gbc.setState(0x5dd1, 0x4f84, 0x8170, 0xc2c, 0x1f5f, 0xa34c, 0x1, 0x1);
        gbc.writeMem(0x5dd1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4f84);
        EXPECT(gbc.pc(), 0x5dd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0054
        gbc.setState(0x928c, 0x2986, 0x8130, 0x255b, 0xd9e7, 0x397b, 0x1, 0x0);
        gbc.writeMem(0x928c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2986);
        EXPECT(gbc.pc(), 0x928e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x928c), 0xcb);
        EXPECT(gbc.readMem(0x928d), 0x17);
        // CB 17 0055
        gbc.setState(0x4d2d, 0x215f, 0xabd0, 0xd43e, 0x92a2, 0xda37, 0x0, 0x0);
        gbc.writeMem(0x4d2d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x215f);
        EXPECT(gbc.pc(), 0x4d2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0056
        gbc.setState(0x9f5b, 0xcd98, 0x4d80, 0x8eae, 0x6ea9, 0x87cb, 0x0, 0x0);
        gbc.writeMem(0x9f5b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcd98);
        EXPECT(gbc.pc(), 0x9f5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5b), 0xcb);
        EXPECT(gbc.readMem(0x9f5c), 0x17);
        // CB 17 0057
        gbc.setState(0x8296, 0xc317, 0xffc0, 0x8963, 0x2cd8, 0xa557, 0x0, 0x0);
        gbc.writeMem(0x8296, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xc317);
        EXPECT(gbc.pc(), 0x8298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8296), 0xcb);
        EXPECT(gbc.readMem(0x8297), 0x17);
        // CB 17 0059
        gbc.setState(0x3ede, 0xd8a2, 0x7170, 0x3ba3, 0x5b8f, 0x26b7, 0x1, 0x0);
        gbc.writeMem(0x3ede, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd8a2);
        EXPECT(gbc.pc(), 0x3ee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 005A
        gbc.setState(0xacbb, 0x3b22, 0x5840, 0x8ba9, 0xa3bb, 0xfdb4, 0x0, 0x1);
        gbc.writeMem(0xacbb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3b22);
        EXPECT(gbc.pc(), 0xacbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacbb), 0xcb);
        EXPECT(gbc.readMem(0xacbc), 0x17);
        // CB 17 005B
        gbc.setState(0xaede, 0x6876, 0x84a0, 0x43f2, 0x62b7, 0xc598, 0x0, 0x0);
        gbc.writeMem(0xaede, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6876);
        EXPECT(gbc.pc(), 0xaee0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaede), 0xcb);
        EXPECT(gbc.readMem(0xaedf), 0x17);
        // CB 17 005C
        gbc.setState(0xabf3, 0x4c9b, 0xb0f0, 0xba05, 0xc36, 0x4b7, 0x0, 0x0);
        gbc.writeMem(0xabf3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4c9b);
        EXPECT(gbc.pc(), 0xabf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf3), 0xcb);
        EXPECT(gbc.readMem(0xabf4), 0x17);
        // CB 17 005D
        gbc.setState(0x33f0, 0xcd40, 0x5500, 0x1e43, 0x64a, 0x43fb, 0x1, 0x1);
        gbc.writeMem(0x33f0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xcd40);
        EXPECT(gbc.pc(), 0x33f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 005E
        gbc.setState(0x51d7, 0x5c0d, 0x2960, 0x2547, 0xa17b, 0xab40, 0x0, 0x0);
        gbc.writeMem(0x51d7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x5c0d);
        EXPECT(gbc.pc(), 0x51d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 005F
        gbc.setState(0x3206, 0x306d, 0xa730, 0xba62, 0xf451, 0xe2d, 0x0, 0x1);
        gbc.writeMem(0x3206, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x306d);
        EXPECT(gbc.pc(), 0x3208);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0060
        gbc.setState(0xd19b, 0x131c, 0x6b0, 0x126, 0xc588, 0xb9f7, 0x0, 0x0);
        gbc.writeMem(0xd19b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x131c);
        EXPECT(gbc.pc(), 0xd19d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd19b), 0xcb);
        EXPECT(gbc.readMem(0xd19c), 0x17);
        // CB 17 0061
        gbc.setState(0x4261, 0xca42, 0x20c0, 0xaed2, 0xb062, 0x59b2, 0x0, 0x1);
        gbc.writeMem(0x4261, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xca42);
        EXPECT(gbc.pc(), 0x4263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0062
        gbc.setState(0x327a, 0xa608, 0x9d0, 0x8669, 0x8613, 0x99ae, 0x1, 0x0);
        gbc.writeMem(0x327a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa608);
        EXPECT(gbc.pc(), 0x327c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0063
        gbc.setState(0x6d43, 0x97ec, 0xa310, 0x3317, 0x3684, 0xf298, 0x0, 0x0);
        gbc.writeMem(0x6d43, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x97ec);
        EXPECT(gbc.pc(), 0x6d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0064
        gbc.setState(0xdb9d, 0x453e, 0xf440, 0x75d7, 0xe90c, 0xc6ce, 0x1, 0x1);
        gbc.writeMem(0xdb9d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x453e);
        EXPECT(gbc.pc(), 0xdb9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb9d), 0xcb);
        EXPECT(gbc.readMem(0xdb9e), 0x17);
        // CB 17 0065
        gbc.setState(0x83ab, 0x8c93, 0x1690, 0x7ad8, 0xcc47, 0x6412, 0x1, 0x1);
        gbc.writeMem(0x83ab, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8c93);
        EXPECT(gbc.pc(), 0x83ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ab), 0xcb);
        EXPECT(gbc.readMem(0x83ac), 0x17);
        // CB 17 0066
        gbc.setState(0x4cc2, 0x4604, 0x2f20, 0x8244, 0xd742, 0x9c18, 0x1, 0x0);
        gbc.writeMem(0x4cc2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4604);
        EXPECT(gbc.pc(), 0x4cc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0067
        gbc.setState(0x35f, 0x117f, 0xded0, 0x22fa, 0xaabf, 0xd67, 0x0, 0x1);
        gbc.writeMem(0x35f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x117f);
        EXPECT(gbc.pc(), 0x361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0068
        gbc.setState(0x6b84, 0xcc92, 0xfee0, 0xc73b, 0xe599, 0xdf18, 0x0, 0x0);
        gbc.writeMem(0x6b84, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xcc92);
        EXPECT(gbc.pc(), 0x6b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0069
        gbc.setState(0xb93e, 0x578, 0x4270, 0xd156, 0x48ef, 0x5b68, 0x1, 0x0);
        gbc.writeMem(0xb93e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x578);
        EXPECT(gbc.pc(), 0xb940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93e), 0xcb);
        EXPECT(gbc.readMem(0xb93f), 0x17);
        // CB 17 006A
        gbc.setState(0x5ed2, 0x2a5f, 0x5900, 0x93dc, 0x63b6, 0x88c6, 0x1, 0x0);
        gbc.writeMem(0x5ed2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2a5f);
        EXPECT(gbc.pc(), 0x5ed4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 006B
        gbc.setState(0xad4b, 0xe0d, 0x8520, 0x8d41, 0x428f, 0xe46c, 0x1, 0x1);
        gbc.writeMem(0xad4b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe0d);
        EXPECT(gbc.pc(), 0xad4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad4b), 0xcb);
        EXPECT(gbc.readMem(0xad4c), 0x17);
        // CB 17 006C
        gbc.setState(0x44fc, 0xfc5d, 0xade0, 0x95cf, 0x9e37, 0x77c4, 0x1, 0x0);
        gbc.writeMem(0x44fc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xfc5d);
        EXPECT(gbc.pc(), 0x44fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 006D
        gbc.setState(0x9787, 0xf6d6, 0xd350, 0x513b, 0x81bb, 0x70c8, 0x0, 0x0);
        gbc.writeMem(0x9787, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf6d6);
        EXPECT(gbc.pc(), 0x9789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9787), 0xcb);
        EXPECT(gbc.readMem(0x9788), 0x17);
        // CB 17 006F
        gbc.setState(0xd38e, 0x8814, 0xe120, 0x8198, 0x2b2a, 0xff6f, 0x1, 0x0);
        gbc.writeMem(0xd38e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8814);
        EXPECT(gbc.pc(), 0xd390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd38e), 0xcb);
        EXPECT(gbc.readMem(0xd38f), 0x17);
        // CB 17 0070
        gbc.setState(0x6e7d, 0x4ebd, 0x2710, 0x4ba1, 0x9b6, 0xe104, 0x0, 0x1);
        gbc.writeMem(0x6e7d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4ebd);
        EXPECT(gbc.pc(), 0x6e7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0071
        gbc.setState(0x3f19, 0x70cd, 0x49f0, 0x48bb, 0x49cf, 0x5082, 0x0, 0x0);
        gbc.writeMem(0x3f19, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x70cd);
        EXPECT(gbc.pc(), 0x3f1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0072
        gbc.setState(0x7c24, 0x9c60, 0x8fe0, 0x6b76, 0xa0da, 0xcac5, 0x1, 0x1);
        gbc.writeMem(0x7c24, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9c60);
        EXPECT(gbc.pc(), 0x7c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0073
        gbc.setState(0x4a73, 0xbd6b, 0xc1a0, 0x7eb4, 0xa9bb, 0x6a09, 0x0, 0x0);
        gbc.writeMem(0x4a73, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xbd6b);
        EXPECT(gbc.pc(), 0x4a75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0074
        gbc.setState(0x2301, 0xa706, 0xba80, 0x2fdd, 0x765e, 0xd404, 0x1, 0x1);
        gbc.writeMem(0x2301, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa706);
        EXPECT(gbc.pc(), 0x2303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0075
        gbc.setState(0x4564, 0xe11b, 0xa060, 0x67cb, 0x14d1, 0x1abf, 0x1, 0x0);
        gbc.writeMem(0x4564, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe11b);
        EXPECT(gbc.pc(), 0x4566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0076
        gbc.setState(0x70cf, 0xe11, 0x7d50, 0xe374, 0xf50a, 0xd938, 0x0, 0x1);
        gbc.writeMem(0x70cf, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe11);
        EXPECT(gbc.pc(), 0x70d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0077
        gbc.setState(0x58ed, 0x20f8, 0xb620, 0x62c7, 0xb5d5, 0xf608, 0x1, 0x0);
        gbc.writeMem(0x58ed, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x20f8);
        EXPECT(gbc.pc(), 0x58ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0078
        gbc.setState(0xa4c, 0xaf92, 0x1300, 0xfbf2, 0x968c, 0x164c, 0x0, 0x0);
        gbc.writeMem(0xa4c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xaf92);
        EXPECT(gbc.pc(), 0xa4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0079
        gbc.setState(0xaccb, 0xf421, 0xa9f0, 0xf03c, 0x9158, 0xe503, 0x1, 0x1);
        gbc.writeMem(0xaccb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf421);
        EXPECT(gbc.pc(), 0xaccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaccb), 0xcb);
        EXPECT(gbc.readMem(0xaccc), 0x17);
        // CB 17 007A
        gbc.setState(0x3bce, 0xc889, 0x8030, 0x5c52, 0x5996, 0xd9d3, 0x0, 0x0);
        gbc.writeMem(0x3bce, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc889);
        EXPECT(gbc.pc(), 0x3bd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 007B
        gbc.setState(0xeed7, 0xbb8a, 0xc730, 0xb658, 0x1d02, 0xf102, 0x1, 0x1);
        gbc.writeMem(0xeed7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xbb8a);
        EXPECT(gbc.pc(), 0xeed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeed7), 0xcb);
        EXPECT(gbc.readMem(0xeed8), 0x17);
        // CB 17 007C
        gbc.setState(0x9f7, 0xf5b6, 0x51b0, 0xad9a, 0x651a, 0x372c, 0x1, 0x0);
        gbc.writeMem(0x9f7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf5b6);
        EXPECT(gbc.pc(), 0x9f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 007D
        gbc.setState(0x1fb1, 0x14f1, 0x32f0, 0x4d41, 0x511b, 0xa421, 0x1, 0x0);
        gbc.writeMem(0x1fb1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x14f1);
        EXPECT(gbc.pc(), 0x1fb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 007E
        gbc.setState(0x5a72, 0x145e, 0xa820, 0xbbbe, 0xc6e6, 0x6444, 0x0, 0x1);
        gbc.writeMem(0x5a72, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x145e);
        EXPECT(gbc.pc(), 0x5a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 007F
        gbc.setState(0x8b6b, 0x22b9, 0x6ff0, 0xb59f, 0xe606, 0x4af3, 0x1, 0x0);
        gbc.writeMem(0x8b6b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x22b9);
        EXPECT(gbc.pc(), 0x8b6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b6b), 0xcb);
        EXPECT(gbc.readMem(0x8b6c), 0x17);
        // CB 17 0080
        gbc.setState(0x36cc, 0xeb38, 0xab80, 0x233c, 0x6c2a, 0x22be, 0x1, 0x1);
        gbc.writeMem(0x36cc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xeb38);
        EXPECT(gbc.pc(), 0x36ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0081
        gbc.setState(0x8871, 0x50aa, 0x7b0, 0xc713, 0x35cb, 0xa7db, 0x0, 0x0);
        gbc.writeMem(0x8871, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x50aa);
        EXPECT(gbc.pc(), 0x8873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8871), 0xcb);
        EXPECT(gbc.readMem(0x8872), 0x17);
        // CB 17 0082
        gbc.setState(0xc939, 0x9ce, 0x89e0, 0xcbb7, 0x625d, 0x5796, 0x1, 0x0);
        gbc.writeMem(0xc939, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9ce);
        EXPECT(gbc.pc(), 0xc93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc939), 0xcb);
        EXPECT(gbc.readMem(0xc93a), 0x17);
        // CB 17 0083
        gbc.setState(0x272d, 0x99f3, 0xfa60, 0x4ed, 0x699b, 0x986b, 0x0, 0x1);
        gbc.writeMem(0x272d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x99f3);
        EXPECT(gbc.pc(), 0x272f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0084
        gbc.setState(0x89dc, 0x582, 0x7940, 0x77bb, 0xcec, 0xc9c8, 0x0, 0x1);
        gbc.writeMem(0x89dc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x582);
        EXPECT(gbc.pc(), 0x89de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89dc), 0xcb);
        EXPECT(gbc.readMem(0x89dd), 0x17);
        // CB 17 0085
        gbc.setState(0x587f, 0x151b, 0xb220, 0x1126, 0x3464, 0xc762, 0x1, 0x1);
        gbc.writeMem(0x587f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x151b);
        EXPECT(gbc.pc(), 0x5881);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0086
        gbc.setState(0x3be8, 0x9428, 0x630, 0x365f, 0xce81, 0xb84c, 0x1, 0x1);
        gbc.writeMem(0x3be8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9428);
        EXPECT(gbc.pc(), 0x3bea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0087
        gbc.setState(0xadc5, 0x8452, 0xe5d0, 0x3f34, 0x3153, 0x9867, 0x0, 0x0);
        gbc.writeMem(0xadc5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8452);
        EXPECT(gbc.pc(), 0xadc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc5), 0xcb);
        EXPECT(gbc.readMem(0xadc6), 0x17);
        // CB 17 0088
        gbc.setState(0xa128, 0x8ed0, 0xce00, 0x88b5, 0x82dd, 0xb3cd, 0x1, 0x0);
        gbc.writeMem(0xa128, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8ed0);
        EXPECT(gbc.pc(), 0xa12a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa128), 0xcb);
        EXPECT(gbc.readMem(0xa129), 0x17);
        // CB 17 0089
        gbc.setState(0x6233, 0x4d89, 0x6570, 0xfcf8, 0x1c4c, 0xe110, 0x1, 0x0);
        gbc.writeMem(0x6233, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4d89);
        EXPECT(gbc.pc(), 0x6235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 008A
        gbc.setState(0xc92b, 0xfc3f, 0xd560, 0x44fb, 0xcea6, 0x24f, 0x1, 0x1);
        gbc.writeMem(0xc92b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xfc3f);
        EXPECT(gbc.pc(), 0xc92d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc92b), 0xcb);
        EXPECT(gbc.readMem(0xc92c), 0x17);
        // CB 17 008B
        gbc.setState(0xd663, 0xcca, 0x2140, 0xe44a, 0x1e7b, 0xd8a, 0x1, 0x0);
        gbc.writeMem(0xd663, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcca);
        EXPECT(gbc.pc(), 0xd665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd663), 0xcb);
        EXPECT(gbc.readMem(0xd664), 0x17);
        // CB 17 008C
        gbc.setState(0x9894, 0x958c, 0x3270, 0x3fc0, 0x5ba6, 0xc8d, 0x0, 0x1);
        gbc.writeMem(0x9894, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x958c);
        EXPECT(gbc.pc(), 0x9896);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9894), 0xcb);
        EXPECT(gbc.readMem(0x9895), 0x17);
        // CB 17 008D
        gbc.setState(0x1fc9, 0x89d8, 0x69a0, 0x6a1d, 0x1d36, 0x54d2, 0x1, 0x0);
        gbc.writeMem(0x1fc9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x89d8);
        EXPECT(gbc.pc(), 0x1fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 008E
        gbc.setState(0x9cf6, 0x4fd1, 0x3e70, 0x6080, 0xbeb9, 0x6b2c, 0x0, 0x1);
        gbc.writeMem(0x9cf6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4fd1);
        EXPECT(gbc.pc(), 0x9cf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf6), 0xcb);
        EXPECT(gbc.readMem(0x9cf7), 0x17);
        // CB 17 008F
        gbc.setState(0x4c00, 0xf6f7, 0xbd80, 0x18a8, 0x3ec6, 0x671e, 0x1, 0x1);
        gbc.writeMem(0x4c00, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf6f7);
        EXPECT(gbc.pc(), 0x4c02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0090
        gbc.setState(0x74d6, 0x15ff, 0xd380, 0x5d54, 0x2e19, 0x63ed, 0x1, 0x1);
        gbc.writeMem(0x74d6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x15ff);
        EXPECT(gbc.pc(), 0x74d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0092
        gbc.setState(0xbf62, 0x9d4c, 0x6500, 0xf99c, 0xd7a7, 0x7d76, 0x0, 0x1);
        gbc.writeMem(0xbf62, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9d4c);
        EXPECT(gbc.pc(), 0xbf64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf62), 0xcb);
        EXPECT(gbc.readMem(0xbf63), 0x17);
        // CB 17 0094
        gbc.setState(0x9c5b, 0xfd3e, 0xe4d0, 0x5930, 0x6a55, 0xd47e, 0x1, 0x0);
        gbc.writeMem(0x9c5b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xfd3e);
        EXPECT(gbc.pc(), 0x9c5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c5b), 0xcb);
        EXPECT(gbc.readMem(0x9c5c), 0x17);
        // CB 17 0095
        gbc.setState(0x94f4, 0x56a7, 0x1ff0, 0xb667, 0xcceb, 0x8357, 0x1, 0x1);
        gbc.writeMem(0x94f4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x56a7);
        EXPECT(gbc.pc(), 0x94f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f4), 0xcb);
        EXPECT(gbc.readMem(0x94f5), 0x17);
        // CB 17 0096
        gbc.setState(0x6158, 0xa14f, 0x7e50, 0x6863, 0x3dbb, 0x978d, 0x0, 0x1);
        gbc.writeMem(0x6158, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa14f);
        EXPECT(gbc.pc(), 0x615a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0097
        gbc.setState(0x5ae0, 0x746e, 0x85c0, 0xbe0e, 0x9beb, 0x6de1, 0x1, 0x0);
        gbc.writeMem(0x5ae0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x746e);
        EXPECT(gbc.pc(), 0x5ae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0098
        gbc.setState(0x340f, 0xed56, 0x9290, 0x391d, 0x8a72, 0x8e5a, 0x1, 0x0);
        gbc.writeMem(0x340f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xed56);
        EXPECT(gbc.pc(), 0x3411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0099
        gbc.setState(0xa963, 0x6b66, 0x2f20, 0x383e, 0x961d, 0x16e7, 0x0, 0x0);
        gbc.writeMem(0xa963, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6b66);
        EXPECT(gbc.pc(), 0xa965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa963), 0xcb);
        EXPECT(gbc.readMem(0xa964), 0x17);
        // CB 17 009A
        gbc.setState(0x8dc1, 0x25e4, 0x6570, 0xea68, 0xaf99, 0x77ad, 0x0, 0x1);
        gbc.writeMem(0x8dc1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x25e4);
        EXPECT(gbc.pc(), 0x8dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc1), 0xcb);
        EXPECT(gbc.readMem(0x8dc2), 0x17);
        // CB 17 009B
        gbc.setState(0x376e, 0xf2a2, 0x10a0, 0xe008, 0x8cd4, 0x91aa, 0x0, 0x0);
        gbc.writeMem(0x376e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf2a2);
        EXPECT(gbc.pc(), 0x3770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 009D
        gbc.setState(0x518e, 0x152d, 0x8bc0, 0x99b7, 0x37ec, 0x6224, 0x1, 0x1);
        gbc.writeMem(0x518e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x152d);
        EXPECT(gbc.pc(), 0x5190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 009F
        gbc.setState(0x67f5, 0xdfa1, 0xbbc0, 0xfde1, 0x805, 0x12eb, 0x1, 0x1);
        gbc.writeMem(0x67f5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdfa1);
        EXPECT(gbc.pc(), 0x67f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00A0
        gbc.setState(0x5be7, 0x2911, 0x5990, 0x6af8, 0xc21a, 0xdc92, 0x0, 0x0);
        gbc.writeMem(0x5be7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2911);
        EXPECT(gbc.pc(), 0x5be9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00A1
        gbc.setState(0x43d9, 0xe991, 0x1460, 0xbfaa, 0x7158, 0x5882, 0x0, 0x1);
        gbc.writeMem(0x43d9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe991);
        EXPECT(gbc.pc(), 0x43db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00A2
        gbc.setState(0xe2b2, 0x723b, 0x7380, 0xd98a, 0xb484, 0x92, 0x1, 0x0);
        gbc.writeMem(0xe2b2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x723b);
        EXPECT(gbc.pc(), 0xe2b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2b2), 0xcb);
        EXPECT(gbc.readMem(0xe2b3), 0x17);
        // CB 17 00A3
        gbc.setState(0x79eb, 0xa378, 0xd310, 0xfa2f, 0xbd57, 0xff95, 0x0, 0x0);
        gbc.writeMem(0x79eb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa378);
        EXPECT(gbc.pc(), 0x79ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00A4
        gbc.setState(0x434a, 0x457b, 0x7b90, 0xeab, 0xc28, 0x347, 0x1, 0x1);
        gbc.writeMem(0x434a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x457b);
        EXPECT(gbc.pc(), 0x434c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00A6
        gbc.setState(0xe9a, 0x4fbd, 0x6820, 0x24a6, 0x8152, 0x5589, 0x1, 0x0);
        gbc.writeMem(0xe9a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4fbd);
        EXPECT(gbc.pc(), 0xe9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00A7
        gbc.setState(0xe211, 0xff7b, 0x5200, 0x440c, 0x3814, 0x26a5, 0x1, 0x1);
        gbc.writeMem(0xe211, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xff7b);
        EXPECT(gbc.pc(), 0xe213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe211), 0xcb);
        EXPECT(gbc.readMem(0xe212), 0x17);
        // CB 17 00A8
        gbc.setState(0x52a4, 0x4c70, 0xe850, 0xc128, 0x312, 0x1aa4, 0x1, 0x0);
        gbc.writeMem(0x52a4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4c70);
        EXPECT(gbc.pc(), 0x52a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00A9
        gbc.setState(0x9927, 0xc8aa, 0x6f10, 0xe9ef, 0x3e14, 0xd58c, 0x1, 0x0);
        gbc.writeMem(0x9927, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xc8aa);
        EXPECT(gbc.pc(), 0x9929);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9927), 0xcb);
        EXPECT(gbc.readMem(0x9928), 0x17);
        // CB 17 00AA
        gbc.setState(0x3633, 0xb7f2, 0x7d70, 0x2752, 0x18be, 0x7e3d, 0x1, 0x0);
        gbc.writeMem(0x3633, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb7f2);
        EXPECT(gbc.pc(), 0x3635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00AB
        gbc.setState(0x9e93, 0xf5f0, 0xd2c0, 0xe3fa, 0xc457, 0xfc86, 0x0, 0x0);
        gbc.writeMem(0x9e93, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf5f0);
        EXPECT(gbc.pc(), 0x9e95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e93), 0xcb);
        EXPECT(gbc.readMem(0x9e94), 0x17);
        // CB 17 00AC
        gbc.setState(0x7bf2, 0xd0fd, 0x9030, 0x44c5, 0x7387, 0x42a4, 0x0, 0x0);
        gbc.writeMem(0x7bf2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd0fd);
        EXPECT(gbc.pc(), 0x7bf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00AD
        gbc.setState(0xb2b7, 0xe4b4, 0x8f20, 0xa002, 0x3c7f, 0x8a78, 0x0, 0x1);
        gbc.writeMem(0xb2b7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe4b4);
        EXPECT(gbc.pc(), 0xb2b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2b7), 0xcb);
        EXPECT(gbc.readMem(0xb2b8), 0x17);
        // CB 17 00AE
        gbc.setState(0x95af, 0x81a3, 0x2aa0, 0xa69c, 0xd1bd, 0x67f8, 0x0, 0x0);
        gbc.writeMem(0x95af, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x81a3);
        EXPECT(gbc.pc(), 0x95b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95af), 0xcb);
        EXPECT(gbc.readMem(0x95b0), 0x17);
        // CB 17 00AF
        gbc.setState(0x20e, 0xce35, 0xd900, 0x6f35, 0x6ff4, 0xdc39, 0x0, 0x0);
        gbc.writeMem(0x20e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xce35);
        EXPECT(gbc.pc(), 0x210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00B0
        gbc.setState(0x1de4, 0x1408, 0x930, 0x53f0, 0xed30, 0xdb49, 0x1, 0x0);
        gbc.writeMem(0x1de4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1408);
        EXPECT(gbc.pc(), 0x1de6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00B1
        gbc.setState(0xaae3, 0xf9f0, 0x9cf0, 0x7ce4, 0xb461, 0x80be, 0x0, 0x1);
        gbc.writeMem(0xaae3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf9f0);
        EXPECT(gbc.pc(), 0xaae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaae3), 0xcb);
        EXPECT(gbc.readMem(0xaae4), 0x17);
        // CB 17 00B2
        gbc.setState(0x3220, 0xa2e0, 0x6950, 0xc66e, 0xd67d, 0x5ed4, 0x1, 0x1);
        gbc.writeMem(0x3220, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa2e0);
        EXPECT(gbc.pc(), 0x3222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00B3
        gbc.setState(0xd3cf, 0x463f, 0x4390, 0xe482, 0x4862, 0xc76a, 0x1, 0x1);
        gbc.writeMem(0xd3cf, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x463f);
        EXPECT(gbc.pc(), 0xd3d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3cf), 0xcb);
        EXPECT(gbc.readMem(0xd3d0), 0x17);
        // CB 17 00B4
        gbc.setState(0x27ad, 0xcd8e, 0xcf50, 0x400, 0x2bcd, 0xf356, 0x1, 0x1);
        gbc.writeMem(0x27ad, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcd8e);
        EXPECT(gbc.pc(), 0x27af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00B5
        gbc.setState(0x54ff, 0x32d3, 0xbe50, 0xec51, 0xd021, 0xd7f3, 0x1, 0x0);
        gbc.writeMem(0x54ff, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x32d3);
        EXPECT(gbc.pc(), 0x5501);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00B6
        gbc.setState(0xeef, 0x7c51, 0x5920, 0x5232, 0xc82f, 0xcfa8, 0x0, 0x0);
        gbc.writeMem(0xeef, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7c51);
        EXPECT(gbc.pc(), 0xef1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00B7
        gbc.setState(0x8e87, 0xda0a, 0x2c90, 0xa61b, 0x9f4b, 0x7d4e, 0x0, 0x1);
        gbc.writeMem(0x8e87, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xda0a);
        EXPECT(gbc.pc(), 0x8e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e87), 0xcb);
        EXPECT(gbc.readMem(0x8e88), 0x17);
        // CB 17 00B8
        gbc.setState(0xd70, 0x72d2, 0x9f70, 0x916, 0xff0f, 0x3767, 0x0, 0x0);
        gbc.writeMem(0xd70, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x72d2);
        EXPECT(gbc.pc(), 0xd72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00B9
        gbc.setState(0xb3af, 0x43c5, 0xe5c0, 0xa0c9, 0x9531, 0x595c, 0x1, 0x0);
        gbc.writeMem(0xb3af, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x43c5);
        EXPECT(gbc.pc(), 0xb3b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3af), 0xcb);
        EXPECT(gbc.readMem(0xb3b0), 0x17);
        // CB 17 00BA
        gbc.setState(0x1234, 0xca79, 0xb590, 0xd45f, 0x496e, 0xb1f8, 0x1, 0x0);
        gbc.writeMem(0x1234, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xca79);
        EXPECT(gbc.pc(), 0x1236);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00BB
        gbc.setState(0x4656, 0x7b85, 0xdc00, 0x4ed6, 0x804d, 0x56d8, 0x1, 0x1);
        gbc.writeMem(0x4656, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7b85);
        EXPECT(gbc.pc(), 0x4658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00BC
        gbc.setState(0x661f, 0xbba4, 0x3550, 0xd56f, 0x4be6, 0x4e2d, 0x0, 0x0);
        gbc.writeMem(0x661f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbba4);
        EXPECT(gbc.pc(), 0x6621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00BD
        gbc.setState(0xe149, 0xcd05, 0xa860, 0xd70, 0xc450, 0x447e, 0x1, 0x0);
        gbc.writeMem(0xe149, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xcd05);
        EXPECT(gbc.pc(), 0xe14b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe149), 0xcb);
        EXPECT(gbc.readMem(0xe14a), 0x17);
        // CB 17 00BE
        gbc.setState(0xd56d, 0x1a56, 0x7ea0, 0x7eaa, 0xe293, 0x39d3, 0x1, 0x1);
        gbc.writeMem(0xd56d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1a56);
        EXPECT(gbc.pc(), 0xd56f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd56d), 0xcb);
        EXPECT(gbc.readMem(0xd56e), 0x17);
        // CB 17 00BF
        gbc.setState(0xbcd9, 0xb99d, 0x460, 0x20a4, 0x34, 0x8163, 0x1, 0x1);
        gbc.writeMem(0xbcd9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb99d);
        EXPECT(gbc.pc(), 0xbcdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd9), 0xcb);
        EXPECT(gbc.readMem(0xbcda), 0x17);
        // CB 17 00C0
        gbc.setState(0xdad8, 0x8378, 0x93b0, 0x7bf6, 0xdc40, 0x285a, 0x0, 0x0);
        gbc.writeMem(0xdad8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8378);
        EXPECT(gbc.pc(), 0xdada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdad8), 0xcb);
        EXPECT(gbc.readMem(0xdad9), 0x17);
        // CB 17 00C1
        gbc.setState(0x3507, 0xd0b5, 0xee70, 0x2692, 0x1a5b, 0x748f, 0x0, 0x1);
        gbc.writeMem(0x3507, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd0b5);
        EXPECT(gbc.pc(), 0x3509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00C2
        gbc.setState(0x154e, 0x8d7d, 0xc60, 0x43fe, 0x95f, 0x656, 0x0, 0x1);
        gbc.writeMem(0x154e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8d7d);
        EXPECT(gbc.pc(), 0x1550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00C3
        gbc.setState(0xb917, 0x8740, 0x2010, 0x27b9, 0xf87c, 0x10f6, 0x1, 0x0);
        gbc.writeMem(0xb917, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8740);
        EXPECT(gbc.pc(), 0xb919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb917), 0xcb);
        EXPECT(gbc.readMem(0xb918), 0x17);
        // CB 17 00C4
        gbc.setState(0xd1ad, 0x5841, 0x97b0, 0x23a4, 0x99f6, 0x53c, 0x1, 0x1);
        gbc.writeMem(0xd1ad, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5841);
        EXPECT(gbc.pc(), 0xd1af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ad), 0xcb);
        EXPECT(gbc.readMem(0xd1ae), 0x17);
        // CB 17 00C5
        gbc.setState(0x9dfc, 0x692e, 0xbaf0, 0x71e, 0x315d, 0x414b, 0x1, 0x1);
        gbc.writeMem(0x9dfc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x692e);
        EXPECT(gbc.pc(), 0x9dfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dfc), 0xcb);
        EXPECT(gbc.readMem(0x9dfd), 0x17);
        // CB 17 00C7
        gbc.setState(0x5263, 0x2a78, 0x8ae0, 0x4bc8, 0xaa31, 0xcbbc, 0x1, 0x0);
        gbc.writeMem(0x5263, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2a78);
        EXPECT(gbc.pc(), 0x5265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00C8
        gbc.setState(0x5c17, 0xb1ab, 0x420, 0x1b66, 0x3c1c, 0xc5a5, 0x0, 0x1);
        gbc.writeMem(0x5c17, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb1ab);
        EXPECT(gbc.pc(), 0x5c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00C9
        gbc.setState(0x6bb1, 0x6c68, 0x910, 0x2cf9, 0xf291, 0xec60, 0x0, 0x1);
        gbc.writeMem(0x6bb1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6c68);
        EXPECT(gbc.pc(), 0x6bb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00CA
        gbc.setState(0x398b, 0x87e8, 0xa750, 0x3f30, 0x4dd9, 0xf03f, 0x1, 0x1);
        gbc.writeMem(0x398b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x87e8);
        EXPECT(gbc.pc(), 0x398d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00CB
        gbc.setState(0xacdf, 0xc5ae, 0x7900, 0xf707, 0xf2a9, 0xb3f2, 0x0, 0x0);
        gbc.writeMem(0xacdf, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc5ae);
        EXPECT(gbc.pc(), 0xace1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacdf), 0xcb);
        EXPECT(gbc.readMem(0xace0), 0x17);
        // CB 17 00CD
        gbc.setState(0x7c9f, 0x5dfb, 0xe740, 0x9c2a, 0xe811, 0x3d7f, 0x0, 0x1);
        gbc.writeMem(0x7c9f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5dfb);
        EXPECT(gbc.pc(), 0x7ca1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00CE
        gbc.setState(0x470e, 0x88a8, 0x8c80, 0xfa12, 0x4982, 0x1fc5, 0x0, 0x0);
        gbc.writeMem(0x470e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x88a8);
        EXPECT(gbc.pc(), 0x4710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00CF
        gbc.setState(0xcd4, 0x2488, 0xdaa0, 0x8f90, 0x8638, 0x6e77, 0x0, 0x1);
        gbc.writeMem(0xcd4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2488);
        EXPECT(gbc.pc(), 0xcd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00D0
        gbc.setState(0x12f6, 0xeaaf, 0x3e50, 0x4fb2, 0xd37f, 0xcf4b, 0x1, 0x0);
        gbc.writeMem(0x12f6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xeaaf);
        EXPECT(gbc.pc(), 0x12f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00D1
        gbc.setState(0xae3a, 0x9d57, 0xbe90, 0x9703, 0x9a79, 0x2be2, 0x1, 0x1);
        gbc.writeMem(0xae3a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9d57);
        EXPECT(gbc.pc(), 0xae3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae3a), 0xcb);
        EXPECT(gbc.readMem(0xae3b), 0x17);
        // CB 17 00D2
        gbc.setState(0x801a, 0xfe99, 0xb120, 0xd96c, 0xe109, 0xf517, 0x0, 0x1);
        gbc.writeMem(0x801a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfe99);
        EXPECT(gbc.pc(), 0x801c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x801a), 0xcb);
        EXPECT(gbc.readMem(0x801b), 0x17);
        // CB 17 00D3
        gbc.setState(0x117e, 0xe181, 0xc750, 0xa46e, 0x8d4e, 0xf029, 0x0, 0x1);
        gbc.writeMem(0x117e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe181);
        EXPECT(gbc.pc(), 0x1180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00D4
        gbc.setState(0x7947, 0xfa6b, 0x3cd0, 0xfbca, 0x7a66, 0x23da, 0x1, 0x1);
        gbc.writeMem(0x7947, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xfa6b);
        EXPECT(gbc.pc(), 0x7949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00D6
        gbc.setState(0xea02, 0xe64b, 0xc6a0, 0x43ad, 0xd143, 0xad12, 0x1, 0x1);
        gbc.writeMem(0xea02, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe64b);
        EXPECT(gbc.pc(), 0xea04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea02), 0xcb);
        EXPECT(gbc.readMem(0xea03), 0x17);
        // CB 17 00D7
        gbc.setState(0x6b91, 0xf6c5, 0x44b0, 0x957f, 0xd134, 0xd013, 0x0, 0x0);
        gbc.writeMem(0x6b91, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf6c5);
        EXPECT(gbc.pc(), 0x6b93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00D9
        gbc.setState(0xc87f, 0xddae, 0xb3c0, 0xc25, 0xfabd, 0xe14e, 0x0, 0x1);
        gbc.writeMem(0xc87f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xddae);
        EXPECT(gbc.pc(), 0xc881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc87f), 0xcb);
        EXPECT(gbc.readMem(0xc880), 0x17);
        // CB 17 00DA
        gbc.setState(0xa31f, 0x854a, 0x5e40, 0xbfde, 0x6b31, 0x5cdd, 0x0, 0x0);
        gbc.writeMem(0xa31f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x854a);
        EXPECT(gbc.pc(), 0xa321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa31f), 0xcb);
        EXPECT(gbc.readMem(0xa320), 0x17);
        // CB 17 00DB
        gbc.setState(0x1d1e, 0xb578, 0x4350, 0xbdb6, 0xee5e, 0xf67, 0x0, 0x1);
        gbc.writeMem(0x1d1e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb578);
        EXPECT(gbc.pc(), 0x1d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00DC
        gbc.setState(0xda49, 0x8808, 0x280, 0x6307, 0xfee1, 0x8538, 0x1, 0x0);
        gbc.writeMem(0xda49, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8808);
        EXPECT(gbc.pc(), 0xda4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda49), 0xcb);
        EXPECT(gbc.readMem(0xda4a), 0x17);
        // CB 17 00DD
        gbc.setState(0x33fa, 0x9c9d, 0x1ac0, 0xcf16, 0x1318, 0xdbf2, 0x0, 0x0);
        gbc.writeMem(0x33fa, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9c9d);
        EXPECT(gbc.pc(), 0x33fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00DE
        gbc.setState(0x71e5, 0x8ae0, 0x8f00, 0x1dd9, 0x9209, 0x2216, 0x1, 0x0);
        gbc.writeMem(0x71e5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8ae0);
        EXPECT(gbc.pc(), 0x71e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00DF
        gbc.setState(0x2b77, 0xffc4, 0x5530, 0x3734, 0x29c2, 0x52de, 0x1, 0x1);
        gbc.writeMem(0x2b77, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xffc4);
        EXPECT(gbc.pc(), 0x2b79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00E0
        gbc.setState(0xdec, 0x9996, 0x4b10, 0xef46, 0xfd32, 0x609f, 0x0, 0x0);
        gbc.writeMem(0xdec, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9996);
        EXPECT(gbc.pc(), 0xdee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00E1
        gbc.setState(0x42c8, 0xd8be, 0x9260, 0xce50, 0x15a5, 0x3b90, 0x1, 0x0);
        gbc.writeMem(0x42c8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd8be);
        EXPECT(gbc.pc(), 0x42ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00E2
        gbc.setState(0xa9b0, 0x6058, 0xe940, 0xfbc, 0x6d98, 0x40f1, 0x0, 0x0);
        gbc.writeMem(0xa9b0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6058);
        EXPECT(gbc.pc(), 0xa9b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b0), 0xcb);
        EXPECT(gbc.readMem(0xa9b1), 0x17);
        // CB 17 00E3
        gbc.setState(0xa2f, 0xf42a, 0x98a0, 0x6c28, 0x9da3, 0x455a, 0x0, 0x0);
        gbc.writeMem(0xa2f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf42a);
        EXPECT(gbc.pc(), 0xa31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00E4
        gbc.setState(0x872, 0xd12a, 0x8730, 0xc919, 0x9a9d, 0xdc8a, 0x0, 0x1);
        gbc.writeMem(0x872, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd12a);
        EXPECT(gbc.pc(), 0x874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00E5
        gbc.setState(0xb313, 0xaad4, 0x14a0, 0xc6e1, 0x2d0d, 0xee4f, 0x1, 0x1);
        gbc.writeMem(0xb313, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xaad4);
        EXPECT(gbc.pc(), 0xb315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb313), 0xcb);
        EXPECT(gbc.readMem(0xb314), 0x17);
        // CB 17 00E6
        gbc.setState(0x9729, 0x27bc, 0xeab0, 0xd1ea, 0x9489, 0x847a, 0x1, 0x1);
        gbc.writeMem(0x9729, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x27bc);
        EXPECT(gbc.pc(), 0x972b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9729), 0xcb);
        EXPECT(gbc.readMem(0x972a), 0x17);
        // CB 17 00E7
        gbc.setState(0xbd9c, 0x26e6, 0xed90, 0x65ce, 0x3c11, 0x7581, 0x1, 0x0);
        gbc.writeMem(0xbd9c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x26e6);
        EXPECT(gbc.pc(), 0xbd9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd9c), 0xcb);
        EXPECT(gbc.readMem(0xbd9d), 0x17);
        // CB 17 00E8
        gbc.setState(0x9a1b, 0x5210, 0xdf80, 0xc8cd, 0x28a7, 0x1ff6, 0x1, 0x1);
        gbc.writeMem(0x9a1b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5210);
        EXPECT(gbc.pc(), 0x9a1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a1b), 0xcb);
        EXPECT(gbc.readMem(0x9a1c), 0x17);
        // CB 17 00E9
        gbc.setState(0x47b2, 0xb560, 0xdfa0, 0x19e1, 0xbf6f, 0xa68a, 0x1, 0x1);
        gbc.writeMem(0x47b2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb560);
        EXPECT(gbc.pc(), 0x47b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00EA
        gbc.setState(0x6eee, 0x659b, 0xb150, 0xdada, 0x452b, 0x96fc, 0x1, 0x1);
        gbc.writeMem(0x6eee, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x659b);
        EXPECT(gbc.pc(), 0x6ef0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00EB
        gbc.setState(0x43ed, 0x7ed8, 0x1460, 0xc6dc, 0xce08, 0x13a, 0x1, 0x0);
        gbc.writeMem(0x43ed, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x7ed8);
        EXPECT(gbc.pc(), 0x43ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00EC
        gbc.setState(0xd707, 0xdf61, 0xa580, 0x4a3f, 0x99cb, 0xe227, 0x1, 0x0);
        gbc.writeMem(0xd707, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xdf61);
        EXPECT(gbc.pc(), 0xd709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd707), 0xcb);
        EXPECT(gbc.readMem(0xd708), 0x17);
        // CB 17 00ED
        gbc.setState(0x3519, 0x8798, 0x81e0, 0xdb99, 0x1e77, 0xfe78, 0x1, 0x1);
        gbc.writeMem(0x3519, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x8798);
        EXPECT(gbc.pc(), 0x351b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00EE
        gbc.setState(0x1ebd, 0xf49, 0xee60, 0x89ed, 0x6fc2, 0xaeb2, 0x1, 0x0);
        gbc.writeMem(0x1ebd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf49);
        EXPECT(gbc.pc(), 0x1ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00EF
        gbc.setState(0x8e9, 0x2a85, 0x74d0, 0xa31e, 0x687a, 0x9b69, 0x1, 0x1);
        gbc.writeMem(0x8e9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2a85);
        EXPECT(gbc.pc(), 0x8eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00F0
        gbc.setState(0xb45d, 0x1d5f, 0x7860, 0xf44e, 0xb541, 0xd233, 0x0, 0x0);
        gbc.writeMem(0xb45d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1d5f);
        EXPECT(gbc.pc(), 0xb45f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45d), 0xcb);
        EXPECT(gbc.readMem(0xb45e), 0x17);
        // CB 17 00F2
        gbc.setState(0x1d82, 0x28f2, 0xeee0, 0x9380, 0xfbde, 0x4d49, 0x0, 0x0);
        gbc.writeMem(0x1d82, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x28f2);
        EXPECT(gbc.pc(), 0x1d84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 00F3
        gbc.setState(0xed4c, 0x20a, 0xc890, 0x9baa, 0xa112, 0xd986, 0x1, 0x0);
        gbc.writeMem(0xed4c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x20a);
        EXPECT(gbc.pc(), 0xed4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed4c), 0xcb);
        EXPECT(gbc.readMem(0xed4d), 0x17);
        // CB 17 00F4
        gbc.setState(0xedba, 0xf4af, 0x8070, 0x7991, 0x4d79, 0xdf90, 0x1, 0x0);
        gbc.writeMem(0xedba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf4af);
        EXPECT(gbc.pc(), 0xedbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedba), 0xcb);
        EXPECT(gbc.readMem(0xedbb), 0x17);
        // CB 17 00F5
        gbc.setState(0x3bba, 0x11c3, 0x7810, 0xca24, 0x2c61, 0x90b3, 0x0, 0x1);
        gbc.writeMem(0x3bba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x11c3);
        EXPECT(gbc.pc(), 0x3bbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00F6
        gbc.setState(0xda73, 0xfd72, 0xdc00, 0x5d1e, 0x7135, 0xe1fc, 0x0, 0x0);
        gbc.writeMem(0xda73, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xfd72);
        EXPECT(gbc.pc(), 0xda75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda73), 0xcb);
        EXPECT(gbc.readMem(0xda74), 0x17);
        // CB 17 00F7
        gbc.setState(0xb19b, 0x2b02, 0xf10, 0x28b9, 0xc28e, 0x7a0d, 0x0, 0x0);
        gbc.writeMem(0xb19b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2b02);
        EXPECT(gbc.pc(), 0xb19d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb19b), 0xcb);
        EXPECT(gbc.readMem(0xb19c), 0x17);
        // CB 17 00F9
        gbc.setState(0xd75d, 0xf47c, 0xd6a0, 0xa90e, 0xeea0, 0xd588, 0x1, 0x1);
        gbc.writeMem(0xd75d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf47c);
        EXPECT(gbc.pc(), 0xd75f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd75d), 0xcb);
        EXPECT(gbc.readMem(0xd75e), 0x17);
        // CB 17 00FA
        gbc.setState(0xb565, 0x1525, 0x4f20, 0xa8ad, 0xce4b, 0x2dee, 0x1, 0x1);
        gbc.writeMem(0xb565, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1525);
        EXPECT(gbc.pc(), 0xb567);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb565), 0xcb);
        EXPECT(gbc.readMem(0xb566), 0x17);
        // CB 17 00FB
        gbc.setState(0xc88d, 0x7c50, 0x4b0, 0xbd4f, 0xa09c, 0xae0c, 0x1, 0x0);
        gbc.writeMem(0xc88d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7c50);
        EXPECT(gbc.pc(), 0xc88f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88d), 0xcb);
        EXPECT(gbc.readMem(0xc88e), 0x17);
        // CB 17 00FC
        gbc.setState(0x5dc, 0x50e7, 0x1310, 0x9eba, 0x2375, 0xc21f, 0x1, 0x0);
        gbc.writeMem(0x5dc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x50e7);
        EXPECT(gbc.pc(), 0x5de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00FD
        gbc.setState(0xd4b5, 0x671, 0xd0b0, 0x4ab1, 0xaa3, 0x15d3, 0x1, 0x1);
        gbc.writeMem(0xd4b5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x671);
        EXPECT(gbc.pc(), 0xd4b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4b5), 0xcb);
        EXPECT(gbc.readMem(0xd4b6), 0x17);
        // CB 17 00FE
        gbc.setState(0x1677, 0x1226, 0x6960, 0xd128, 0xed18, 0x99c6, 0x1, 0x0);
        gbc.writeMem(0x1677, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1226);
        EXPECT(gbc.pc(), 0x1679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 00FF
        gbc.setState(0x388, 0xfbeb, 0x45d0, 0x0, 0xcde7, 0x52e6, 0x0, 0x1);
        gbc.writeMem(0x388, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfbeb);
        EXPECT(gbc.pc(), 0x38a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0100
        gbc.setState(0xd209, 0xfb77, 0xa1d0, 0xc1e9, 0xdaf7, 0xe16c, 0x1, 0x0);
        gbc.writeMem(0xd209, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfb77);
        EXPECT(gbc.pc(), 0xd20b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd209), 0xcb);
        EXPECT(gbc.readMem(0xd20a), 0x17);
        // CB 17 0101
        gbc.setState(0xf51, 0x2003, 0x8b00, 0xf676, 0x5cfd, 0xd7c3, 0x0, 0x1);
        gbc.writeMem(0xf51, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2003);
        EXPECT(gbc.pc(), 0xf53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0102
        gbc.setState(0x1ee6, 0x6e1f, 0x5f60, 0xeb83, 0x1257, 0x8b32, 0x0, 0x0);
        gbc.writeMem(0x1ee6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6e1f);
        EXPECT(gbc.pc(), 0x1ee8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0103
        gbc.setState(0xcd86, 0x4a11, 0x60e0, 0x6f93, 0x9102, 0xf695, 0x1, 0x1);
        gbc.writeMem(0xcd86, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4a11);
        EXPECT(gbc.pc(), 0xcd88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd86), 0xcb);
        EXPECT(gbc.readMem(0xcd87), 0x17);
        // CB 17 0104
        gbc.setState(0x1ec0, 0x7980, 0x9940, 0xc02f, 0xc85d, 0xc949, 0x0, 0x1);
        gbc.writeMem(0x1ec0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7980);
        EXPECT(gbc.pc(), 0x1ec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0105
        gbc.setState(0x1c91, 0x575b, 0xfb70, 0xf611, 0xfeb1, 0xf943, 0x1, 0x0);
        gbc.writeMem(0x1c91, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x575b);
        EXPECT(gbc.pc(), 0x1c93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0107
        gbc.setState(0x3141, 0x7288, 0x4490, 0x2535, 0xe98, 0x4f3c, 0x0, 0x0);
        gbc.writeMem(0x3141, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7288);
        EXPECT(gbc.pc(), 0x3143);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0108
        gbc.setState(0x1ea4, 0x632d, 0x89e0, 0xc495, 0x5235, 0x8d2d, 0x1, 0x0);
        gbc.writeMem(0x1ea4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x632d);
        EXPECT(gbc.pc(), 0x1ea6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0109
        gbc.setState(0x5fa9, 0x9349, 0x2620, 0x7ced, 0x1e60, 0xdbb9, 0x1, 0x0);
        gbc.writeMem(0x5fa9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9349);
        EXPECT(gbc.pc(), 0x5fab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 010A
        gbc.setState(0x1851, 0x89e1, 0xaf70, 0xa9a5, 0x1e3f, 0x5df0, 0x1, 0x0);
        gbc.writeMem(0x1851, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x89e1);
        EXPECT(gbc.pc(), 0x1853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 010B
        gbc.setState(0x32ad, 0xdb3d, 0xbc70, 0xdd24, 0xa4ca, 0x38fa, 0x1, 0x1);
        gbc.writeMem(0x32ad, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdb3d);
        EXPECT(gbc.pc(), 0x32af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 010C
        gbc.setState(0x6c07, 0xf6f4, 0x2100, 0xcabf, 0x6cff, 0xe6f2, 0x1, 0x0);
        gbc.writeMem(0x6c07, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf6f4);
        EXPECT(gbc.pc(), 0x6c09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 010D
        gbc.setState(0x3bd1, 0x3be6, 0x4c70, 0x9b76, 0xc790, 0x8ce3, 0x1, 0x1);
        gbc.writeMem(0x3bd1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3be6);
        EXPECT(gbc.pc(), 0x3bd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 010E
        gbc.setState(0x4126, 0xe61b, 0xd700, 0xeb85, 0xc431, 0x8aba, 0x1, 0x1);
        gbc.writeMem(0x4126, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe61b);
        EXPECT(gbc.pc(), 0x4128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 010F
        gbc.setState(0x6a25, 0x4804, 0x8550, 0x6732, 0x3000, 0x1564, 0x0, 0x0);
        gbc.writeMem(0x6a25, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4804);
        EXPECT(gbc.pc(), 0x6a27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0110
        gbc.setState(0x36fd, 0xc6bf, 0x1430, 0x3351, 0xcb45, 0x5000, 0x1, 0x1);
        gbc.writeMem(0x36fd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc6bf);
        EXPECT(gbc.pc(), 0x36ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0111
        gbc.setState(0x5e32, 0xf7f, 0x96f0, 0xc60, 0x2063, 0x2800, 0x1, 0x1);
        gbc.writeMem(0x5e32, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf7f);
        EXPECT(gbc.pc(), 0x5e34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0112
        gbc.setState(0x8ea9, 0xb342, 0x4ba0, 0xef5e, 0x9892, 0x4649, 0x1, 0x1);
        gbc.writeMem(0x8ea9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb342);
        EXPECT(gbc.pc(), 0x8eab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea9), 0xcb);
        EXPECT(gbc.readMem(0x8eaa), 0x17);
        // CB 17 0113
        gbc.setState(0x53e2, 0xcc32, 0xbb00, 0xb5f0, 0x6ce3, 0xdb55, 0x0, 0x0);
        gbc.writeMem(0x53e2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xcc32);
        EXPECT(gbc.pc(), 0x53e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0114
        gbc.setState(0x9a0, 0x5be1, 0xe120, 0x588a, 0x305f, 0x9b6f, 0x1, 0x0);
        gbc.writeMem(0x9a0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5be1);
        EXPECT(gbc.pc(), 0x9a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0115
        gbc.setState(0xb823, 0x6256, 0x42b0, 0x1d48, 0xacf9, 0x136a, 0x1, 0x1);
        gbc.writeMem(0xb823, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6256);
        EXPECT(gbc.pc(), 0xb825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb823), 0xcb);
        EXPECT(gbc.readMem(0xb824), 0x17);
        // CB 17 0116
        gbc.setState(0x42e7, 0xdc8b, 0x7400, 0x9b16, 0x8395, 0xe78d, 0x1, 0x0);
        gbc.writeMem(0x42e7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xdc8b);
        EXPECT(gbc.pc(), 0x42e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0117
        gbc.setState(0x481d, 0xc873, 0xc630, 0xd381, 0xa1e4, 0x58a7, 0x0, 0x1);
        gbc.writeMem(0x481d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc873);
        EXPECT(gbc.pc(), 0x481f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0118
        gbc.setState(0xc61a, 0xcc76, 0x2140, 0x6fba, 0xbd77, 0x34ea, 0x0, 0x1);
        gbc.writeMem(0xc61a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xcc76);
        EXPECT(gbc.pc(), 0xc61c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61a), 0xcb);
        EXPECT(gbc.readMem(0xc61b), 0x17);
        // CB 17 0119
        gbc.setState(0x6317, 0xeafe, 0xf8d0, 0x7956, 0x17e4, 0xa492, 0x0, 0x1);
        gbc.writeMem(0x6317, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xeafe);
        EXPECT(gbc.pc(), 0x6319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 011A
        gbc.setState(0x4790, 0x9761, 0x8260, 0xcbf1, 0x874a, 0x1ded, 0x1, 0x0);
        gbc.writeMem(0x4790, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9761);
        EXPECT(gbc.pc(), 0x4792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 011B
        gbc.setState(0x7537, 0x97bc, 0x9200, 0x65e5, 0xab3c, 0x50f8, 0x0, 0x1);
        gbc.writeMem(0x7537, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x97bc);
        EXPECT(gbc.pc(), 0x7539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 011C
        gbc.setState(0x21b4, 0xc2e9, 0x5280, 0xc2c1, 0x1974, 0x986, 0x0, 0x1);
        gbc.writeMem(0x21b4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc2e9);
        EXPECT(gbc.pc(), 0x21b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 011D
        gbc.setState(0x8ecb, 0x21ae, 0x1c60, 0xd701, 0x95c6, 0x8964, 0x0, 0x0);
        gbc.writeMem(0x8ecb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x21ae);
        EXPECT(gbc.pc(), 0x8ecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ecb), 0xcb);
        EXPECT(gbc.readMem(0x8ecc), 0x17);
        // CB 17 011E
        gbc.setState(0x1175, 0x385c, 0x8940, 0xd507, 0x79b3, 0xad38, 0x0, 0x0);
        gbc.writeMem(0x1175, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x385c);
        EXPECT(gbc.pc(), 0x1177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0120
        gbc.setState(0x4b51, 0x5a23, 0x6230, 0x320e, 0x34ae, 0x5a62, 0x1, 0x0);
        gbc.writeMem(0x4b51, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5a23);
        EXPECT(gbc.pc(), 0x4b53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0121
        gbc.setState(0xb97d, 0xa674, 0x1970, 0x8e69, 0x2a27, 0x4d50, 0x0, 0x0);
        gbc.writeMem(0xb97d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa674);
        EXPECT(gbc.pc(), 0xb97f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97d), 0xcb);
        EXPECT(gbc.readMem(0xb97e), 0x17);
        // CB 17 0122
        gbc.setState(0x6155, 0x6a1b, 0x4b00, 0xb2a, 0x9282, 0xe8fc, 0x1, 0x1);
        gbc.writeMem(0x6155, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6a1b);
        EXPECT(gbc.pc(), 0x6157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0123
        gbc.setState(0xb1d, 0x43d3, 0x8e30, 0x30c2, 0x18c9, 0xd038, 0x0, 0x1);
        gbc.writeMem(0xb1d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x43d3);
        EXPECT(gbc.pc(), 0xb1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0124
        gbc.setState(0xb7e, 0xe020, 0x3c90, 0x4600, 0x71a5, 0x1225, 0x1, 0x1);
        gbc.writeMem(0xb7e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe020);
        EXPECT(gbc.pc(), 0xb80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0125
        gbc.setState(0xa716, 0x4171, 0x6140, 0xd6ee, 0xb46b, 0xe6cf, 0x1, 0x0);
        gbc.writeMem(0xa716, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4171);
        EXPECT(gbc.pc(), 0xa718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa716), 0xcb);
        EXPECT(gbc.readMem(0xa717), 0x17);
        // CB 17 0126
        gbc.setState(0x9bbc, 0xc15d, 0x6360, 0xa13, 0xd089, 0x5f16, 0x1, 0x0);
        gbc.writeMem(0x9bbc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc15d);
        EXPECT(gbc.pc(), 0x9bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbc), 0xcb);
        EXPECT(gbc.readMem(0x9bbd), 0x17);
        // CB 17 0127
        gbc.setState(0x6c9c, 0xdcfc, 0x88d0, 0xadf3, 0xbb3b, 0xe8e3, 0x1, 0x0);
        gbc.writeMem(0x6c9c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xdcfc);
        EXPECT(gbc.pc(), 0x6c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0128
        gbc.setState(0xeaee, 0x2784, 0x76f0, 0x24cf, 0x84ea, 0x175, 0x1, 0x1);
        gbc.writeMem(0xeaee, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2784);
        EXPECT(gbc.pc(), 0xeaf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaee), 0xcb);
        EXPECT(gbc.readMem(0xeaef), 0x17);
        // CB 17 0129
        gbc.setState(0xcc2e, 0x7030, 0x32e0, 0x6f86, 0xe020, 0xc8e6, 0x1, 0x0);
        gbc.writeMem(0xcc2e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7030);
        EXPECT(gbc.pc(), 0xcc30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2e), 0xcb);
        EXPECT(gbc.readMem(0xcc2f), 0x17);
        // CB 17 012A
        gbc.setState(0xd2b1, 0xd996, 0x9240, 0x7a00, 0x4ab0, 0x8e7f, 0x1, 0x1);
        gbc.writeMem(0xd2b1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd996);
        EXPECT(gbc.pc(), 0xd2b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2b1), 0xcb);
        EXPECT(gbc.readMem(0xd2b2), 0x17);
        // CB 17 012B
        gbc.setState(0x6709, 0xdf8b, 0xb6b0, 0x9521, 0x53a2, 0xa105, 0x1, 0x0);
        gbc.writeMem(0x6709, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdf8b);
        EXPECT(gbc.pc(), 0x670b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 012C
        gbc.setState(0x1c0b, 0x910d, 0xdcb0, 0x6a66, 0xa309, 0x6870, 0x0, 0x0);
        gbc.writeMem(0x1c0b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x910d);
        EXPECT(gbc.pc(), 0x1c0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 012D
        gbc.setState(0x86cc, 0xb15b, 0xc2d0, 0x6ae, 0xcdb5, 0x6f56, 0x0, 0x1);
        gbc.writeMem(0x86cc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb15b);
        EXPECT(gbc.pc(), 0x86ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86cc), 0xcb);
        EXPECT(gbc.readMem(0x86cd), 0x17);
        // CB 17 012E
        gbc.setState(0x92e8, 0x6c63, 0xb7e0, 0xe908, 0x8925, 0x9e74, 0x1, 0x0);
        gbc.writeMem(0x92e8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6c63);
        EXPECT(gbc.pc(), 0x92ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92e8), 0xcb);
        EXPECT(gbc.readMem(0x92e9), 0x17);
        // CB 17 012F
        gbc.setState(0xa0ef, 0x7b63, 0x9030, 0x4c39, 0x679c, 0xeafc, 0x1, 0x0);
        gbc.writeMem(0xa0ef, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7b63);
        EXPECT(gbc.pc(), 0xa0f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ef), 0xcb);
        EXPECT(gbc.readMem(0xa0f0), 0x17);
        // CB 17 0130
        gbc.setState(0xbe4c, 0x957a, 0x5b80, 0xfeea, 0xc33a, 0xc194, 0x0, 0x1);
        gbc.writeMem(0xbe4c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x957a);
        EXPECT(gbc.pc(), 0xbe4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe4c), 0xcb);
        EXPECT(gbc.readMem(0xbe4d), 0x17);
        // CB 17 0131
        gbc.setState(0x5d7c, 0x2f16, 0x6750, 0xace9, 0x2383, 0xa677, 0x0, 0x1);
        gbc.writeMem(0x5d7c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2f16);
        EXPECT(gbc.pc(), 0x5d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0132
        gbc.setState(0xedb6, 0x962f, 0x27f0, 0xaee3, 0x9c01, 0xd220, 0x1, 0x0);
        gbc.writeMem(0xedb6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x962f);
        EXPECT(gbc.pc(), 0xedb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedb6), 0xcb);
        EXPECT(gbc.readMem(0xedb7), 0x17);
        // CB 17 0133
        gbc.setState(0x8727, 0x462d, 0x86e0, 0x90b3, 0xcafd, 0x96a8, 0x0, 0x1);
        gbc.writeMem(0x8727, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x462d);
        EXPECT(gbc.pc(), 0x8729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8727), 0xcb);
        EXPECT(gbc.readMem(0x8728), 0x17);
        // CB 17 0134
        gbc.setState(0xab9, 0x908e, 0x10c0, 0x784a, 0xb999, 0xe6d2, 0x1, 0x1);
        gbc.writeMem(0xab9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x908e);
        EXPECT(gbc.pc(), 0xabb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0135
        gbc.setState(0x2bd, 0x834a, 0x6f80, 0xef79, 0xea7e, 0xb850, 0x0, 0x1);
        gbc.writeMem(0x2bd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x834a);
        EXPECT(gbc.pc(), 0x2bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0136
        gbc.setState(0x75b8, 0x6818, 0xa2f0, 0x4753, 0x7d52, 0xd7df, 0x0, 0x0);
        gbc.writeMem(0x75b8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6818);
        EXPECT(gbc.pc(), 0x75ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0137
        gbc.setState(0x4f0, 0x224d, 0xc3e0, 0xcf4, 0x2b28, 0xefd5, 0x0, 0x0);
        gbc.writeMem(0x4f0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x224d);
        EXPECT(gbc.pc(), 0x4f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0138
        gbc.setState(0x64f4, 0x7cd0, 0x8fb0, 0x11f8, 0xaef3, 0xc085, 0x0, 0x1);
        gbc.writeMem(0x64f4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7cd0);
        EXPECT(gbc.pc(), 0x64f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0139
        gbc.setState(0xe321, 0x886d, 0xb300, 0x1e6a, 0xabcd, 0x1054, 0x0, 0x0);
        gbc.writeMem(0xe321, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x886d);
        EXPECT(gbc.pc(), 0xe323);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe321), 0xcb);
        EXPECT(gbc.readMem(0xe322), 0x17);
        // CB 17 013A
        gbc.setState(0xd969, 0x285d, 0x9550, 0x3463, 0xc2b8, 0x5f82, 0x1, 0x1);
        gbc.writeMem(0xd969, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x285d);
        EXPECT(gbc.pc(), 0xd96b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd969), 0xcb);
        EXPECT(gbc.readMem(0xd96a), 0x17);
        // CB 17 013B
        gbc.setState(0x990, 0x9382, 0xc670, 0xb900, 0x7b60, 0xbafe, 0x1, 0x1);
        gbc.writeMem(0x990, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9382);
        EXPECT(gbc.pc(), 0x992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 013C
        gbc.setState(0x2a76, 0x715b, 0xee0, 0xd098, 0x1efc, 0x2613, 0x1, 0x0);
        gbc.writeMem(0x2a76, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x715b);
        EXPECT(gbc.pc(), 0x2a78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 013E
        gbc.setState(0x909f, 0xbb1b, 0x3430, 0x51a0, 0x7a8b, 0xed5, 0x0, 0x0);
        gbc.writeMem(0x909f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xbb1b);
        EXPECT(gbc.pc(), 0x90a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x909f), 0xcb);
        EXPECT(gbc.readMem(0x90a0), 0x17);
        // CB 17 013F
        gbc.setState(0x7823, 0x7d5a, 0xb280, 0xa8bd, 0xdbb4, 0xc344, 0x1, 0x1);
        gbc.writeMem(0x7823, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7d5a);
        EXPECT(gbc.pc(), 0x7825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0140
        gbc.setState(0x88b8, 0x2b71, 0x1b40, 0xf876, 0x7e12, 0x16fa, 0x0, 0x1);
        gbc.writeMem(0x88b8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2b71);
        EXPECT(gbc.pc(), 0x88ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b8), 0xcb);
        EXPECT(gbc.readMem(0x88b9), 0x17);
        // CB 17 0141
        gbc.setState(0x252e, 0x8547, 0x4990, 0xc0f8, 0x74f3, 0x56b1, 0x0, 0x0);
        gbc.writeMem(0x252e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8547);
        EXPECT(gbc.pc(), 0x2530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0142
        gbc.setState(0xea0d, 0x8f44, 0x2b90, 0x6e5a, 0x6931, 0xc7ff, 0x0, 0x0);
        gbc.writeMem(0xea0d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8f44);
        EXPECT(gbc.pc(), 0xea0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea0d), 0xcb);
        EXPECT(gbc.readMem(0xea0e), 0x17);
        // CB 17 0143
        gbc.setState(0x9ac6, 0x7fd, 0x8ab0, 0xde54, 0xbc2b, 0x6a5a, 0x0, 0x0);
        gbc.writeMem(0x9ac6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7fd);
        EXPECT(gbc.pc(), 0x9ac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac6), 0xcb);
        EXPECT(gbc.readMem(0x9ac7), 0x17);
        // CB 17 0144
        gbc.setState(0x80db, 0xecae, 0xcaa0, 0xf4c8, 0x3701, 0xfc94, 0x1, 0x0);
        gbc.writeMem(0x80db, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xecae);
        EXPECT(gbc.pc(), 0x80dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80db), 0xcb);
        EXPECT(gbc.readMem(0x80dc), 0x17);
        // CB 17 0145
        gbc.setState(0xdf85, 0xa99, 0x2690, 0x718e, 0xdec, 0xa463, 0x1, 0x0);
        gbc.writeMem(0xdf85, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xa99);
        EXPECT(gbc.pc(), 0xdf87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf85), 0xcb);
        EXPECT(gbc.readMem(0xdf86), 0x17);
        // CB 17 0146
        gbc.setState(0x1435, 0xc36a, 0x50f0, 0x78f3, 0x8d40, 0x693f, 0x1, 0x1);
        gbc.writeMem(0x1435, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc36a);
        EXPECT(gbc.pc(), 0x1437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0147
        gbc.setState(0xfca, 0xdc5f, 0xa360, 0x78ef, 0xddbb, 0xc2c8, 0x0, 0x1);
        gbc.writeMem(0xfca, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdc5f);
        EXPECT(gbc.pc(), 0xfcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0148
        gbc.setState(0x76e5, 0x7c20, 0x4940, 0x5baf, 0x116d, 0xb1a3, 0x0, 0x0);
        gbc.writeMem(0x76e5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7c20);
        EXPECT(gbc.pc(), 0x76e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0149
        gbc.setState(0xabdb, 0xe754, 0xf9c0, 0x469a, 0x6e9c, 0xda44, 0x0, 0x0);
        gbc.writeMem(0xabdb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe754);
        EXPECT(gbc.pc(), 0xabdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabdb), 0xcb);
        EXPECT(gbc.readMem(0xabdc), 0x17);
        // CB 17 014A
        gbc.setState(0xc54f, 0x3b6a, 0xb050, 0x4ba3, 0xde8c, 0x737c, 0x1, 0x0);
        gbc.writeMem(0xc54f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3b6a);
        EXPECT(gbc.pc(), 0xc551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54f), 0xcb);
        EXPECT(gbc.readMem(0xc550), 0x17);
        // CB 17 014B
        gbc.setState(0xb90e, 0x8899, 0x1e20, 0x64f6, 0xd95f, 0x7c6d, 0x1, 0x1);
        gbc.writeMem(0xb90e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8899);
        EXPECT(gbc.pc(), 0xb910);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb90e), 0xcb);
        EXPECT(gbc.readMem(0xb90f), 0x17);
        // CB 17 014C
        gbc.setState(0x1df7, 0x858d, 0x19d0, 0x97fc, 0xa121, 0x9db5, 0x1, 0x0);
        gbc.writeMem(0x1df7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x858d);
        EXPECT(gbc.pc(), 0x1df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 014D
        gbc.setState(0x63d, 0x2d51, 0xe140, 0x1615, 0x135c, 0xd411, 0x0, 0x1);
        gbc.writeMem(0x63d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2d51);
        EXPECT(gbc.pc(), 0x63f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 014E
        gbc.setState(0x86fb, 0xe33c, 0x57c0, 0x89d6, 0x3670, 0xd94b, 0x0, 0x1);
        gbc.writeMem(0x86fb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe33c);
        EXPECT(gbc.pc(), 0x86fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86fb), 0xcb);
        EXPECT(gbc.readMem(0x86fc), 0x17);
        // CB 17 014F
        gbc.setState(0x56e0, 0x1643, 0x57b0, 0x8b2a, 0xf3b8, 0xa466, 0x0, 0x0);
        gbc.writeMem(0x56e0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1643);
        EXPECT(gbc.pc(), 0x56e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0150
        gbc.setState(0xbbe7, 0xfe75, 0x25f0, 0x9102, 0xbf65, 0x2d3e, 0x1, 0x0);
        gbc.writeMem(0xbbe7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xfe75);
        EXPECT(gbc.pc(), 0xbbe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe7), 0xcb);
        EXPECT(gbc.readMem(0xbbe8), 0x17);
        // CB 17 0151
        gbc.setState(0x5c8a, 0x379c, 0x9930, 0x2ad5, 0xf2e4, 0xb20d, 0x0, 0x0);
        gbc.writeMem(0x5c8a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x379c);
        EXPECT(gbc.pc(), 0x5c8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0152
        gbc.setState(0x890e, 0xa028, 0xb790, 0x6f23, 0xc401, 0x4454, 0x0, 0x1);
        gbc.writeMem(0x890e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa028);
        EXPECT(gbc.pc(), 0x8910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x890e), 0xcb);
        EXPECT(gbc.readMem(0x890f), 0x17);
        // CB 17 0153
        gbc.setState(0x9a64, 0xc401, 0x96f0, 0xcebc, 0x1d8b, 0x7ba7, 0x1, 0x0);
        gbc.writeMem(0x9a64, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc401);
        EXPECT(gbc.pc(), 0x9a66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a64), 0xcb);
        EXPECT(gbc.readMem(0x9a65), 0x17);
        // CB 17 0154
        gbc.setState(0x5b2e, 0x281d, 0x4f20, 0xcb59, 0x264b, 0x3540, 0x1, 0x0);
        gbc.writeMem(0x5b2e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x281d);
        EXPECT(gbc.pc(), 0x5b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0155
        gbc.setState(0x15b6, 0x7949, 0x1ab0, 0x767c, 0x56cf, 0x657d, 0x0, 0x0);
        gbc.writeMem(0x15b6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7949);
        EXPECT(gbc.pc(), 0x15b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0156
        gbc.setState(0x608e, 0x3c8a, 0x1f60, 0xc757, 0x7a13, 0x540a, 0x0, 0x0);
        gbc.writeMem(0x608e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3c8a);
        EXPECT(gbc.pc(), 0x6090);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0158
        gbc.setState(0x4b7a, 0x951e, 0x3950, 0xdf04, 0xf16d, 0x3e8a, 0x1, 0x1);
        gbc.writeMem(0x4b7a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x951e);
        EXPECT(gbc.pc(), 0x4b7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0159
        gbc.setState(0x110c, 0x4ca6, 0x6850, 0x979f, 0x188a, 0xcf30, 0x0, 0x1);
        gbc.writeMem(0x110c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4ca6);
        EXPECT(gbc.pc(), 0x110e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 015A
        gbc.setState(0x4e73, 0x81c3, 0x49c0, 0xc63f, 0xfc96, 0x1881, 0x0, 0x0);
        gbc.writeMem(0x4e73, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x81c3);
        EXPECT(gbc.pc(), 0x4e75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 015B
        gbc.setState(0x5adb, 0x3cc4, 0x5010, 0x50c6, 0xa868, 0xf795, 0x0, 0x0);
        gbc.writeMem(0x5adb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3cc4);
        EXPECT(gbc.pc(), 0x5add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 015C
        gbc.setState(0xe675, 0x860, 0xe1f0, 0xbfd2, 0x74db, 0xd351, 0x1, 0x1);
        gbc.writeMem(0xe675, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x860);
        EXPECT(gbc.pc(), 0xe677);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe675), 0xcb);
        EXPECT(gbc.readMem(0xe676), 0x17);
        // CB 17 015D
        gbc.setState(0x9db4, 0x3c71, 0x860, 0x28f7, 0x84fa, 0x4eeb, 0x1, 0x1);
        gbc.writeMem(0x9db4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3c71);
        EXPECT(gbc.pc(), 0x9db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db4), 0xcb);
        EXPECT(gbc.readMem(0x9db5), 0x17);
        // CB 17 015E
        gbc.setState(0x9c2b, 0xe962, 0x66e0, 0xcbf, 0x558e, 0xc20f, 0x1, 0x1);
        gbc.writeMem(0x9c2b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xe962);
        EXPECT(gbc.pc(), 0x9c2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2b), 0xcb);
        EXPECT(gbc.readMem(0x9c2c), 0x17);
        // CB 17 015F
        gbc.setState(0x8fcd, 0xfbee, 0x6cd0, 0x77b6, 0xbebe, 0x980a, 0x1, 0x1);
        gbc.writeMem(0x8fcd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfbee);
        EXPECT(gbc.pc(), 0x8fcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fcd), 0xcb);
        EXPECT(gbc.readMem(0x8fce), 0x17);
        // CB 17 0160
        gbc.setState(0x81d1, 0x98de, 0xe210, 0x1820, 0xd727, 0xcd61, 0x1, 0x1);
        gbc.writeMem(0x81d1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x98de);
        EXPECT(gbc.pc(), 0x81d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81d1), 0xcb);
        EXPECT(gbc.readMem(0x81d2), 0x17);
        // CB 17 0161
        gbc.setState(0xcace, 0x785f, 0x8f10, 0x343b, 0xee74, 0xd3c8, 0x0, 0x1);
        gbc.writeMem(0xcace, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x785f);
        EXPECT(gbc.pc(), 0xcad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcace), 0xcb);
        EXPECT(gbc.readMem(0xcacf), 0x17);
        // CB 17 0162
        gbc.setState(0xba97, 0x11cc, 0x1810, 0x755c, 0x7155, 0xe0f, 0x1, 0x1);
        gbc.writeMem(0xba97, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x11cc);
        EXPECT(gbc.pc(), 0xba99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba97), 0xcb);
        EXPECT(gbc.readMem(0xba98), 0x17);
        // CB 17 0163
        gbc.setState(0x2ba0, 0xaec0, 0x4fc0, 0x762b, 0xd7ca, 0x9932, 0x0, 0x1);
        gbc.writeMem(0x2ba0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xaec0);
        EXPECT(gbc.pc(), 0x2ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0164
        gbc.setState(0x983, 0x4a30, 0x190, 0xcfc1, 0xf808, 0x59db, 0x0, 0x0);
        gbc.writeMem(0x983, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4a30);
        EXPECT(gbc.pc(), 0x985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0165
        gbc.setState(0xc95, 0x6bae, 0xa9a0, 0x16df, 0x5a5f, 0xc6b7, 0x0, 0x1);
        gbc.writeMem(0xc95, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6bae);
        EXPECT(gbc.pc(), 0xc97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0166
        gbc.setState(0x7cda, 0x5d9f, 0x65f0, 0x60b3, 0xe1f4, 0x1d2b, 0x0, 0x0);
        gbc.writeMem(0x7cda, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5d9f);
        EXPECT(gbc.pc(), 0x7cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0168
        gbc.setState(0xa2f1, 0x1ac4, 0xcbb0, 0x73c6, 0xfee1, 0x1b58, 0x0, 0x1);
        gbc.writeMem(0xa2f1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1ac4);
        EXPECT(gbc.pc(), 0xa2f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2f1), 0xcb);
        EXPECT(gbc.readMem(0xa2f2), 0x17);
        // CB 17 016A
        gbc.setState(0x38b0, 0xd2e, 0x2df0, 0xc72d, 0x88cd, 0xa128, 0x1, 0x1);
        gbc.writeMem(0x38b0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd2e);
        EXPECT(gbc.pc(), 0x38b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 016B
        gbc.setState(0xc0bf, 0x632c, 0xbba0, 0xb88e, 0x47bd, 0xf9e4, 0x0, 0x0);
        gbc.writeMem(0xc0bf, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x632c);
        EXPECT(gbc.pc(), 0xc0c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0bf), 0xcb);
        EXPECT(gbc.readMem(0xc0c0), 0x17);
        // CB 17 016C
        gbc.setState(0x915e, 0x39b2, 0x2d50, 0xf635, 0x7067, 0x1b14, 0x1, 0x0);
        gbc.writeMem(0x915e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x39b2);
        EXPECT(gbc.pc(), 0x9160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x915e), 0xcb);
        EXPECT(gbc.readMem(0x915f), 0x17);
        // CB 17 016E
        gbc.setState(0x4fc0, 0x32d, 0xf470, 0xf4b2, 0xb845, 0x9fe8, 0x0, 0x1);
        gbc.writeMem(0x4fc0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x32d);
        EXPECT(gbc.pc(), 0x4fc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 016F
        gbc.setState(0x5f7b, 0x9636, 0x9f10, 0x52b9, 0xa915, 0x98a6, 0x1, 0x1);
        gbc.writeMem(0x5f7b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9636);
        EXPECT(gbc.pc(), 0x5f7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0170
        gbc.setState(0x8b45, 0x8a40, 0x8bc0, 0xc2c8, 0x1693, 0x495a, 0x0, 0x0);
        gbc.writeMem(0x8b45, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8a40);
        EXPECT(gbc.pc(), 0x8b47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b45), 0xcb);
        EXPECT(gbc.readMem(0x8b46), 0x17);
        // CB 17 0171
        gbc.setState(0xe7ff, 0x93ec, 0xe5a0, 0x14d2, 0x2651, 0xc7c1, 0x0, 0x1);
        gbc.writeMem(0xe7ff, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x93ec);
        EXPECT(gbc.pc(), 0xe801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7ff), 0xcb);
        EXPECT(gbc.readMem(0xe800), 0x17);
        // CB 17 0172
        gbc.setState(0xb2f0, 0x7bd3, 0x8380, 0x85d8, 0xb649, 0x8f8a, 0x1, 0x1);
        gbc.writeMem(0xb2f0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x7bd3);
        EXPECT(gbc.pc(), 0xb2f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f0), 0xcb);
        EXPECT(gbc.readMem(0xb2f1), 0x17);
        // CB 17 0174
        gbc.setState(0x312, 0xa3fd, 0xea40, 0x8c94, 0xdfd5, 0xc27b, 0x0, 0x1);
        gbc.writeMem(0x312, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa3fd);
        EXPECT(gbc.pc(), 0x314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0175
        gbc.setState(0x398e, 0x5153, 0x1300, 0xbee8, 0x1595, 0x2b77, 0x0, 0x1);
        gbc.writeMem(0x398e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5153);
        EXPECT(gbc.pc(), 0x3990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0176
        gbc.setState(0x156e, 0xf204, 0xd400, 0x821b, 0xdb8, 0x66bb, 0x1, 0x1);
        gbc.writeMem(0x156e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf204);
        EXPECT(gbc.pc(), 0x1570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0177
        gbc.setState(0x30ed, 0x7823, 0x3720, 0xb979, 0x24d4, 0xbdd1, 0x1, 0x0);
        gbc.writeMem(0x30ed, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7823);
        EXPECT(gbc.pc(), 0x30ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0178
        gbc.setState(0x3f9d, 0x44fe, 0x22e0, 0xa9f1, 0x847a, 0x6e5b, 0x1, 0x0);
        gbc.writeMem(0x3f9d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x44fe);
        EXPECT(gbc.pc(), 0x3f9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 017A
        gbc.setState(0x423c, 0xc166, 0x7750, 0x18c5, 0xf102, 0xd60c, 0x0, 0x1);
        gbc.writeMem(0x423c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc166);
        EXPECT(gbc.pc(), 0x423e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 017B
        gbc.setState(0x68dd, 0xef6b, 0x9f50, 0x18c8, 0x1956, 0xf4a4, 0x1, 0x1);
        gbc.writeMem(0x68dd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xef6b);
        EXPECT(gbc.pc(), 0x68df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 017C
        gbc.setState(0xbe4, 0x25c6, 0xf060, 0x4f47, 0xbfdb, 0x90fd, 0x1, 0x1);
        gbc.writeMem(0xbe4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x25c6);
        EXPECT(gbc.pc(), 0xbe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 017D
        gbc.setState(0x7b53, 0x2d8f, 0x8360, 0x8cd4, 0x2d99, 0x4a71, 0x1, 0x0);
        gbc.writeMem(0x7b53, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2d8f);
        EXPECT(gbc.pc(), 0x7b55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 017E
        gbc.setState(0x16aa, 0xc05e, 0x8d20, 0xafcc, 0x1529, 0x4f88, 0x0, 0x1);
        gbc.writeMem(0x16aa, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc05e);
        EXPECT(gbc.pc(), 0x16ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 017F
        gbc.setState(0xca2f, 0xa290, 0xd510, 0x6f73, 0x7b30, 0x5c11, 0x1, 0x1);
        gbc.writeMem(0xca2f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa290);
        EXPECT(gbc.pc(), 0xca31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca2f), 0xcb);
        EXPECT(gbc.readMem(0xca30), 0x17);
        // CB 17 0180
        gbc.setState(0x8506, 0x3e52, 0xc8b0, 0x57d2, 0x26d3, 0xad67, 0x1, 0x1);
        gbc.writeMem(0x8506, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x3e52);
        EXPECT(gbc.pc(), 0x8508);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8506), 0xcb);
        EXPECT(gbc.readMem(0x8507), 0x17);
        // CB 17 0181
        gbc.setState(0x20ba, 0x38b2, 0xda10, 0xf20a, 0x7cf6, 0x2bf0, 0x1, 0x1);
        gbc.writeMem(0x20ba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x38b2);
        EXPECT(gbc.pc(), 0x20bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0182
        gbc.setState(0xed70, 0xf1a9, 0x8030, 0x513d, 0xeffb, 0x5d17, 0x0, 0x1);
        gbc.writeMem(0xed70, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf1a9);
        EXPECT(gbc.pc(), 0xed72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed70), 0xcb);
        EXPECT(gbc.readMem(0xed71), 0x17);
        // CB 17 0183
        gbc.setState(0xbbbb, 0x6366, 0xccd0, 0x2ed2, 0x51ae, 0x1342, 0x0, 0x1);
        gbc.writeMem(0xbbbb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6366);
        EXPECT(gbc.pc(), 0xbbbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbbb), 0xcb);
        EXPECT(gbc.readMem(0xbbbc), 0x17);
        // CB 17 0184
        gbc.setState(0xc989, 0xf893, 0xbc50, 0x3de3, 0x7f8, 0x5f0c, 0x1, 0x0);
        gbc.writeMem(0xc989, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf893);
        EXPECT(gbc.pc(), 0xc98b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc989), 0xcb);
        EXPECT(gbc.readMem(0xc98a), 0x17);
        // CB 17 0185
        gbc.setState(0x6ae, 0xd2d3, 0xcd40, 0xa8d9, 0x9ee5, 0xd5c8, 0x1, 0x0);
        gbc.writeMem(0x6ae, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd2d3);
        EXPECT(gbc.pc(), 0x6b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0186
        gbc.setState(0x5e99, 0xe54a, 0x5c10, 0x9719, 0x9a7d, 0x150e, 0x0, 0x0);
        gbc.writeMem(0x5e99, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe54a);
        EXPECT(gbc.pc(), 0x5e9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0187
        gbc.setState(0x118a, 0x2776, 0xecb0, 0x6ac8, 0x3382, 0x2dac, 0x0, 0x0);
        gbc.writeMem(0x118a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2776);
        EXPECT(gbc.pc(), 0x118c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0188
        gbc.setState(0x5207, 0x508a, 0xd490, 0x9d90, 0xe710, 0xa10c, 0x1, 0x1);
        gbc.writeMem(0x5207, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x508a);
        EXPECT(gbc.pc(), 0x5209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0189
        gbc.setState(0xd775, 0xedbb, 0xc980, 0xebe0, 0xbda0, 0x5aec, 0x0, 0x0);
        gbc.writeMem(0xd775, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xedbb);
        EXPECT(gbc.pc(), 0xd777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd775), 0xcb);
        EXPECT(gbc.readMem(0xd776), 0x17);
        // CB 17 018A
        gbc.setState(0x6462, 0x69b6, 0x6970, 0x6f70, 0x1d20, 0x884b, 0x0, 0x1);
        gbc.writeMem(0x6462, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x69b6);
        EXPECT(gbc.pc(), 0x6464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 018B
        gbc.setState(0x3993, 0x8fd, 0x960, 0xfce3, 0x700f, 0x87c0, 0x1, 0x1);
        gbc.writeMem(0x3993, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8fd);
        EXPECT(gbc.pc(), 0x3995);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 018C
        gbc.setState(0xc7cc, 0x2aea, 0xed70, 0x4445, 0x89a5, 0x677e, 0x0, 0x1);
        gbc.writeMem(0xc7cc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2aea);
        EXPECT(gbc.pc(), 0xc7ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7cc), 0xcb);
        EXPECT(gbc.readMem(0xc7cd), 0x17);
        // CB 17 018D
        gbc.setState(0x40f7, 0xfebf, 0x42b0, 0xbbde, 0x9583, 0x5ead, 0x0, 0x1);
        gbc.writeMem(0x40f7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xfebf);
        EXPECT(gbc.pc(), 0x40f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 018E
        gbc.setState(0x8d7d, 0x570e, 0x75b0, 0xd8ea, 0x8b4c, 0xdc8c, 0x0, 0x0);
        gbc.writeMem(0x8d7d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x570e);
        EXPECT(gbc.pc(), 0x8d7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7d), 0xcb);
        EXPECT(gbc.readMem(0x8d7e), 0x17);
        // CB 17 0190
        gbc.setState(0x56a5, 0xb17e, 0x98c0, 0x50f8, 0xfeec, 0x4cf, 0x1, 0x0);
        gbc.writeMem(0x56a5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb17e);
        EXPECT(gbc.pc(), 0x56a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0191
        gbc.setState(0x935e, 0xa942, 0x6220, 0x10e3, 0xb1fd, 0xe3c3, 0x1, 0x0);
        gbc.writeMem(0x935e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa942);
        EXPECT(gbc.pc(), 0x9360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935e), 0xcb);
        EXPECT(gbc.readMem(0x935f), 0x17);
        // CB 17 0192
        gbc.setState(0xcb9a, 0x625, 0x660, 0xbdf4, 0x1f6a, 0x57e9, 0x1, 0x1);
        gbc.writeMem(0xcb9a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x625);
        EXPECT(gbc.pc(), 0xcb9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb9a), 0xcb);
        EXPECT(gbc.readMem(0xcb9b), 0x17);
        // CB 17 0193
        gbc.setState(0x29bd, 0x10c5, 0x6e80, 0x2d01, 0xc530, 0xc6fb, 0x0, 0x1);
        gbc.writeMem(0x29bd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x10c5);
        EXPECT(gbc.pc(), 0x29bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0194
        gbc.setState(0x50aa, 0x6a21, 0xe880, 0x778b, 0x327f, 0xdf6, 0x0, 0x1);
        gbc.writeMem(0x50aa, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6a21);
        EXPECT(gbc.pc(), 0x50ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0195
        gbc.setState(0x5b28, 0x4c03, 0xd070, 0xb55e, 0xa448, 0x3a1, 0x1, 0x0);
        gbc.writeMem(0x5b28, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4c03);
        EXPECT(gbc.pc(), 0x5b2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0196
        gbc.setState(0x91fb, 0x2cc7, 0xfb40, 0x58df, 0x1865, 0x82e5, 0x1, 0x1);
        gbc.writeMem(0x91fb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2cc7);
        EXPECT(gbc.pc(), 0x91fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91fb), 0xcb);
        EXPECT(gbc.readMem(0x91fc), 0x17);
        // CB 17 0197
        gbc.setState(0x15f9, 0xcbc9, 0xd750, 0x137a, 0xd4d8, 0xeb17, 0x1, 0x0);
        gbc.writeMem(0x15f9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xcbc9);
        EXPECT(gbc.pc(), 0x15fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0198
        gbc.setState(0xce1c, 0xbb98, 0xc9c0, 0xc18e, 0x4475, 0xe183, 0x1, 0x0);
        gbc.writeMem(0xce1c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xbb98);
        EXPECT(gbc.pc(), 0xce1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce1c), 0xcb);
        EXPECT(gbc.readMem(0xce1d), 0x17);
        // CB 17 0199
        gbc.setState(0xed14, 0xbb74, 0x91d0, 0x44a7, 0x6db7, 0xa93b, 0x1, 0x1);
        gbc.writeMem(0xed14, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xbb74);
        EXPECT(gbc.pc(), 0xed16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed14), 0xcb);
        EXPECT(gbc.readMem(0xed15), 0x17);
        // CB 17 019A
        gbc.setState(0x8ca, 0x79a8, 0x59d0, 0x2c06, 0x99cc, 0x6745, 0x1, 0x0);
        gbc.writeMem(0x8ca, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x79a8);
        EXPECT(gbc.pc(), 0x8cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 019B
        gbc.setState(0x6608, 0xcf90, 0xf220, 0x74c2, 0x955e, 0xf1be, 0x0, 0x0);
        gbc.writeMem(0x6608, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xcf90);
        EXPECT(gbc.pc(), 0x660a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 019C
        gbc.setState(0x27fc, 0x5b83, 0x9ff0, 0x3af7, 0xa21b, 0xb7a6, 0x1, 0x1);
        gbc.writeMem(0x27fc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5b83);
        EXPECT(gbc.pc(), 0x27fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 019D
        gbc.setState(0xb6aa, 0xde7f, 0x6fb0, 0x82a9, 0x2c74, 0x3a9d, 0x0, 0x0);
        gbc.writeMem(0xb6aa, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xde7f);
        EXPECT(gbc.pc(), 0xb6ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6aa), 0xcb);
        EXPECT(gbc.readMem(0xb6ab), 0x17);
        // CB 17 019E
        gbc.setState(0x8d93, 0xa399, 0x4e10, 0x7fbc, 0x59bf, 0xaaea, 0x1, 0x1);
        gbc.writeMem(0x8d93, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa399);
        EXPECT(gbc.pc(), 0x8d95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d93), 0xcb);
        EXPECT(gbc.readMem(0x8d94), 0x17);
        // CB 17 019F
        gbc.setState(0x4cf5, 0xf5fa, 0x9e00, 0xbbe5, 0x421b, 0xf9ea, 0x1, 0x1);
        gbc.writeMem(0x4cf5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf5fa);
        EXPECT(gbc.pc(), 0x4cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01A0
        gbc.setState(0x1169, 0xe303, 0x8c60, 0x9ed2, 0xa4d6, 0xbe21, 0x0, 0x1);
        gbc.writeMem(0x1169, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe303);
        EXPECT(gbc.pc(), 0x116b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01A1
        gbc.setState(0xc3e2, 0xbd0b, 0x4c80, 0xaa15, 0xc68f, 0xb2e6, 0x1, 0x1);
        gbc.writeMem(0xc3e2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xbd0b);
        EXPECT(gbc.pc(), 0xc3e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e2), 0xcb);
        EXPECT(gbc.readMem(0xc3e3), 0x17);
        // CB 17 01A2
        gbc.setState(0x71a2, 0x3fa4, 0x1380, 0x8bd9, 0x52f7, 0xf87, 0x1, 0x0);
        gbc.writeMem(0x71a2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3fa4);
        EXPECT(gbc.pc(), 0x71a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01A3
        gbc.setState(0x8f94, 0xb20b, 0xf900, 0x4358, 0xf887, 0x7b1, 0x1, 0x1);
        gbc.writeMem(0x8f94, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb20b);
        EXPECT(gbc.pc(), 0x8f96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f94), 0xcb);
        EXPECT(gbc.readMem(0x8f95), 0x17);
        // CB 17 01A4
        gbc.setState(0x5e65, 0xd939, 0xc7f0, 0x8281, 0x37be, 0x7557, 0x1, 0x1);
        gbc.writeMem(0x5e65, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd939);
        EXPECT(gbc.pc(), 0x5e67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01A6
        gbc.setState(0xefd, 0x34db, 0xae00, 0x51a7, 0x3056, 0x9194, 0x0, 0x1);
        gbc.writeMem(0xefd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x34db);
        EXPECT(gbc.pc(), 0xeff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01A7
        gbc.setState(0x5067, 0x7c5b, 0x3910, 0x2439, 0x6f02, 0x45c2, 0x1, 0x1);
        gbc.writeMem(0x5067, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7c5b);
        EXPECT(gbc.pc(), 0x5069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01A8
        gbc.setState(0xe02f, 0xc2e1, 0x3fc0, 0x8c65, 0x7bc, 0x9275, 0x1, 0x0);
        gbc.writeMem(0xe02f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc2e1);
        EXPECT(gbc.pc(), 0xe031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02f), 0xcb);
        EXPECT(gbc.readMem(0xe030), 0x17);
        // CB 17 01A9
        gbc.setState(0x334f, 0xa5f2, 0xdbc0, 0xbf3e, 0xd433, 0x2847, 0x1, 0x1);
        gbc.writeMem(0x334f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa5f2);
        EXPECT(gbc.pc(), 0x3351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01AA
        gbc.setState(0xab2f, 0x150f, 0xcf60, 0x98ba, 0x5c8d, 0xe1e7, 0x0, 0x1);
        gbc.writeMem(0xab2f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x150f);
        EXPECT(gbc.pc(), 0xab31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab2f), 0xcb);
        EXPECT(gbc.readMem(0xab30), 0x17);
        // CB 17 01AB
        gbc.setState(0x1872, 0x196a, 0xee30, 0xa1b4, 0x897f, 0x19a7, 0x1, 0x1);
        gbc.writeMem(0x1872, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x196a);
        EXPECT(gbc.pc(), 0x1874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01AC
        gbc.setState(0x93e7, 0x4515, 0x88c0, 0x33cb, 0x647a, 0xb751, 0x0, 0x1);
        gbc.writeMem(0x93e7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4515);
        EXPECT(gbc.pc(), 0x93e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e7), 0xcb);
        EXPECT(gbc.readMem(0x93e8), 0x17);
        // CB 17 01AD
        gbc.setState(0xe0d3, 0xfe6c, 0x76e0, 0x5206, 0x5ed7, 0x513b, 0x1, 0x1);
        gbc.writeMem(0xe0d3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xfe6c);
        EXPECT(gbc.pc(), 0xe0d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d3), 0xcb);
        EXPECT(gbc.readMem(0xe0d4), 0x17);
        // CB 17 01AE
        gbc.setState(0xcb73, 0x6122, 0x68c0, 0xcc74, 0xa733, 0x8872, 0x0, 0x0);
        gbc.writeMem(0xcb73, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6122);
        EXPECT(gbc.pc(), 0xcb75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb73), 0xcb);
        EXPECT(gbc.readMem(0xcb74), 0x17);
        // CB 17 01AF
        gbc.setState(0x792e, 0x272f, 0xa630, 0x48a1, 0x206d, 0xb569, 0x0, 0x0);
        gbc.writeMem(0x792e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x272f);
        EXPECT(gbc.pc(), 0x7930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01B0
        gbc.setState(0x209d, 0xe74c, 0x6690, 0x1307, 0x659c, 0xaed4, 0x0, 0x0);
        gbc.writeMem(0x209d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe74c);
        EXPECT(gbc.pc(), 0x209f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01B1
        gbc.setState(0x7f57, 0x591a, 0x7a10, 0x12f4, 0x35da, 0x963a, 0x1, 0x1);
        gbc.writeMem(0x7f57, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x591a);
        EXPECT(gbc.pc(), 0x7f59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01B4
        gbc.setState(0xb77a, 0xc9f, 0xac00, 0x138e, 0x6d9e, 0xf7e8, 0x0, 0x1);
        gbc.writeMem(0xb77a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc9f);
        EXPECT(gbc.pc(), 0xb77c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb77a), 0xcb);
        EXPECT(gbc.readMem(0xb77b), 0x17);
        // CB 17 01B5
        gbc.setState(0xe50e, 0xfaa6, 0xde50, 0xccc2, 0x20eb, 0xccd, 0x1, 0x1);
        gbc.writeMem(0xe50e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xfaa6);
        EXPECT(gbc.pc(), 0xe510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe50e), 0xcb);
        EXPECT(gbc.readMem(0xe50f), 0x17);
        // CB 17 01B6
        gbc.setState(0xa1d9, 0xcf66, 0x1d30, 0xf128, 0xf84d, 0x5e43, 0x1, 0x1);
        gbc.writeMem(0xa1d9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xcf66);
        EXPECT(gbc.pc(), 0xa1db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d9), 0xcb);
        EXPECT(gbc.readMem(0xa1da), 0x17);
        // CB 17 01B7
        gbc.setState(0x59b4, 0xeb2e, 0x4e40, 0x99f6, 0xa3b7, 0x8bb8, 0x0, 0x0);
        gbc.writeMem(0x59b4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xeb2e);
        EXPECT(gbc.pc(), 0x59b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01B8
        gbc.setState(0x43b5, 0x8998, 0x5bc0, 0xa5d3, 0xa499, 0xcb4f, 0x1, 0x1);
        gbc.writeMem(0x43b5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8998);
        EXPECT(gbc.pc(), 0x43b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01B9
        gbc.setState(0x5c6a, 0x43be, 0x550, 0x4e17, 0xe0e0, 0x4657, 0x0, 0x1);
        gbc.writeMem(0x5c6a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x43be);
        EXPECT(gbc.pc(), 0x5c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01BA
        gbc.setState(0xc3fb, 0x7365, 0x1e10, 0x1e3f, 0x794b, 0xc086, 0x1, 0x0);
        gbc.writeMem(0xc3fb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7365);
        EXPECT(gbc.pc(), 0xc3fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3fb), 0xcb);
        EXPECT(gbc.readMem(0xc3fc), 0x17);
        // CB 17 01BB
        gbc.setState(0xc2d4, 0x8ae8, 0x550, 0xf425, 0xf162, 0xd3b1, 0x1, 0x1);
        gbc.writeMem(0xc2d4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8ae8);
        EXPECT(gbc.pc(), 0xc2d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d4), 0xcb);
        EXPECT(gbc.readMem(0xc2d5), 0x17);
        // CB 17 01BC
        gbc.setState(0x478, 0x5600, 0x6080, 0xfb86, 0x7bb0, 0x10b, 0x1, 0x0);
        gbc.writeMem(0x478, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x5600);
        EXPECT(gbc.pc(), 0x47a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01BD
        gbc.setState(0x36da, 0x7cd9, 0x86b0, 0xeaf1, 0xedc5, 0x6373, 0x0, 0x0);
        gbc.writeMem(0x36da, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7cd9);
        EXPECT(gbc.pc(), 0x36dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01BE
        gbc.setState(0x360c, 0x2167, 0x57a0, 0xfffb, 0xf781, 0xf563, 0x0, 0x0);
        gbc.writeMem(0x360c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2167);
        EXPECT(gbc.pc(), 0x360e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01BF
        gbc.setState(0xcc46, 0x50fd, 0x37d0, 0xf541, 0x8958, 0xe87c, 0x1, 0x0);
        gbc.writeMem(0xcc46, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x50fd);
        EXPECT(gbc.pc(), 0xcc48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc46), 0xcb);
        EXPECT(gbc.readMem(0xcc47), 0x17);
        // CB 17 01C0
        gbc.setState(0x7e18, 0x9794, 0xb1b0, 0xbba3, 0x57f7, 0xb6fd, 0x1, 0x1);
        gbc.writeMem(0x7e18, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9794);
        EXPECT(gbc.pc(), 0x7e1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01C1
        gbc.setState(0x72f4, 0xc5a0, 0x9080, 0x2301, 0xa355, 0x9cda, 0x0, 0x1);
        gbc.writeMem(0x72f4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc5a0);
        EXPECT(gbc.pc(), 0x72f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01C3
        gbc.setState(0xb198, 0xfd7, 0xe670, 0x2fba, 0x1f54, 0xef79, 0x0, 0x1);
        gbc.writeMem(0xb198, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xfd7);
        EXPECT(gbc.pc(), 0xb19a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb198), 0xcb);
        EXPECT(gbc.readMem(0xb199), 0x17);
        // CB 17 01C4
        gbc.setState(0xafda, 0x7329, 0x6ae0, 0x4878, 0xe1fa, 0xb7e4, 0x0, 0x0);
        gbc.writeMem(0xafda, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7329);
        EXPECT(gbc.pc(), 0xafdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafda), 0xcb);
        EXPECT(gbc.readMem(0xafdb), 0x17);
        // CB 17 01C5
        gbc.setState(0x7102, 0xce82, 0xef60, 0xa181, 0xa1a0, 0xc29f, 0x1, 0x0);
        gbc.writeMem(0x7102, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xce82);
        EXPECT(gbc.pc(), 0x7104);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01C6
        gbc.setState(0xc3fd, 0xd8ee, 0x86c0, 0xbf9a, 0xc332, 0x5327, 0x0, 0x1);
        gbc.writeMem(0xc3fd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd8ee);
        EXPECT(gbc.pc(), 0xc3ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3fd), 0xcb);
        EXPECT(gbc.readMem(0xc3fe), 0x17);
        // CB 17 01C7
        gbc.setState(0xb8b3, 0x47c5, 0x3f10, 0xda1b, 0x58c0, 0xbe09, 0x1, 0x0);
        gbc.writeMem(0xb8b3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x47c5);
        EXPECT(gbc.pc(), 0xb8b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8b3), 0xcb);
        EXPECT(gbc.readMem(0xb8b4), 0x17);
        // CB 17 01C8
        gbc.setState(0x93e7, 0x33a4, 0xdea0, 0x4e68, 0xf0bc, 0x5421, 0x1, 0x1);
        gbc.writeMem(0x93e7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x33a4);
        EXPECT(gbc.pc(), 0x93e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e7), 0xcb);
        EXPECT(gbc.readMem(0x93e8), 0x17);
        // CB 17 01C9
        gbc.setState(0x45b5, 0x8308, 0xaa80, 0x9201, 0x98ee, 0x3d14, 0x1, 0x1);
        gbc.writeMem(0x45b5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8308);
        EXPECT(gbc.pc(), 0x45b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01CA
        gbc.setState(0x266e, 0xc369, 0xf240, 0x16ac, 0x3e78, 0x6afe, 0x0, 0x1);
        gbc.writeMem(0x266e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc369);
        EXPECT(gbc.pc(), 0x2670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01CB
        gbc.setState(0xd477, 0x26dd, 0x5520, 0xb009, 0xdf54, 0xe804, 0x0, 0x1);
        gbc.writeMem(0xd477, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x26dd);
        EXPECT(gbc.pc(), 0xd479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd477), 0xcb);
        EXPECT(gbc.readMem(0xd478), 0x17);
        // CB 17 01CD
        gbc.setState(0xc214, 0x1ab9, 0xb150, 0xd1a4, 0x1865, 0x2d3a, 0x1, 0x1);
        gbc.writeMem(0xc214, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1ab9);
        EXPECT(gbc.pc(), 0xc216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc214), 0xcb);
        EXPECT(gbc.readMem(0xc215), 0x17);
        // CB 17 01CE
        gbc.setState(0x839f, 0x5376, 0xa3a0, 0x6c67, 0x682f, 0xd654, 0x0, 0x0);
        gbc.writeMem(0x839f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5376);
        EXPECT(gbc.pc(), 0x83a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x839f), 0xcb);
        EXPECT(gbc.readMem(0x83a0), 0x17);
        // CB 17 01D0
        gbc.setState(0x150f, 0x5062, 0x8810, 0x575f, 0xc17c, 0xfa6b, 0x0, 0x1);
        gbc.writeMem(0x150f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5062);
        EXPECT(gbc.pc(), 0x1511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01D1
        gbc.setState(0x1d17, 0x373, 0xd570, 0x49f9, 0x56fb, 0x26aa, 0x1, 0x1);
        gbc.writeMem(0x1d17, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x373);
        EXPECT(gbc.pc(), 0x1d19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01D2
        gbc.setState(0x87dd, 0x4ba2, 0x4f80, 0x6fc5, 0xeb30, 0x86ab, 0x1, 0x1);
        gbc.writeMem(0x87dd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4ba2);
        EXPECT(gbc.pc(), 0x87df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87dd), 0xcb);
        EXPECT(gbc.readMem(0x87de), 0x17);
        // CB 17 01D3
        gbc.setState(0xd412, 0xae9b, 0xf050, 0xf52, 0x1654, 0xffa8, 0x1, 0x0);
        gbc.writeMem(0xd412, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xae9b);
        EXPECT(gbc.pc(), 0xd414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd412), 0xcb);
        EXPECT(gbc.readMem(0xd413), 0x17);
        // CB 17 01D5
        gbc.setState(0x664, 0xfbd0, 0x49b0, 0xa833, 0xb6a, 0xfc3f, 0x1, 0x1);
        gbc.writeMem(0x664, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xfbd0);
        EXPECT(gbc.pc(), 0x666);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01D6
        gbc.setState(0xab2b, 0x2547, 0xf800, 0xe932, 0x10ec, 0x97cf, 0x1, 0x0);
        gbc.writeMem(0xab2b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2547);
        EXPECT(gbc.pc(), 0xab2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab2b), 0xcb);
        EXPECT(gbc.readMem(0xab2c), 0x17);
        // CB 17 01D7
        gbc.setState(0x897, 0xbcfb, 0x7a20, 0xf82c, 0x8171, 0x2b96, 0x0, 0x1);
        gbc.writeMem(0x897, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xbcfb);
        EXPECT(gbc.pc(), 0x899);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01D8
        gbc.setState(0x6fee, 0xc2d6, 0x6650, 0xb13, 0x33b1, 0x63f0, 0x1, 0x0);
        gbc.writeMem(0x6fee, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc2d6);
        EXPECT(gbc.pc(), 0x6ff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01D9
        gbc.setState(0xda00, 0x5418, 0xaf30, 0xbb6e, 0xf8ca, 0xd8d4, 0x1, 0x1);
        gbc.writeMem(0xda00, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5418);
        EXPECT(gbc.pc(), 0xda02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda00), 0xcb);
        EXPECT(gbc.readMem(0xda01), 0x17);
        // CB 17 01DA
        gbc.setState(0x4711, 0x7ddd, 0xd3c0, 0x11c4, 0x3f12, 0x7c0b, 0x1, 0x1);
        gbc.writeMem(0x4711, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7ddd);
        EXPECT(gbc.pc(), 0x4713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01DB
        gbc.setState(0x3926, 0x696f, 0xc460, 0x9d67, 0x7d21, 0x8f32, 0x1, 0x0);
        gbc.writeMem(0x3926, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x696f);
        EXPECT(gbc.pc(), 0x3928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01DC
        gbc.setState(0x4ada, 0xec9c, 0x66a0, 0xfb71, 0x7c07, 0xe927, 0x1, 0x1);
        gbc.writeMem(0x4ada, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xec9c);
        EXPECT(gbc.pc(), 0x4adc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01DD
        gbc.setState(0x9152, 0xe11f, 0xd440, 0xc61f, 0x7238, 0x9b4d, 0x1, 0x0);
        gbc.writeMem(0x9152, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe11f);
        EXPECT(gbc.pc(), 0x9154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9152), 0xcb);
        EXPECT(gbc.readMem(0x9153), 0x17);
        // CB 17 01DE
        gbc.setState(0x310a, 0x35d1, 0x6080, 0xd12f, 0xa132, 0x2a51, 0x1, 0x1);
        gbc.writeMem(0x310a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x35d1);
        EXPECT(gbc.pc(), 0x310c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01E0
        gbc.setState(0x158a, 0x8571, 0xc410, 0x1d64, 0xe604, 0x8271, 0x0, 0x1);
        gbc.writeMem(0x158a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8571);
        EXPECT(gbc.pc(), 0x158c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01E1
        gbc.setState(0x6213, 0x2735, 0x70d0, 0xbf89, 0xde8a, 0x94c8, 0x0, 0x0);
        gbc.writeMem(0x6213, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2735);
        EXPECT(gbc.pc(), 0x6215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01E2
        gbc.setState(0x6535, 0xc9, 0xe440, 0x3b00, 0x1f7b, 0x44f6, 0x1, 0x0);
        gbc.writeMem(0x6535, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc9);
        EXPECT(gbc.pc(), 0x6537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01E3
        gbc.setState(0x229a, 0x5e97, 0xf760, 0x8ad8, 0x71b3, 0xf19f, 0x1, 0x1);
        gbc.writeMem(0x229a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x5e97);
        EXPECT(gbc.pc(), 0x229c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01E4
        gbc.setState(0xe15c, 0x1501, 0x90a0, 0xb206, 0x9b9e, 0x2b75, 0x0, 0x1);
        gbc.writeMem(0xe15c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1501);
        EXPECT(gbc.pc(), 0xe15e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe15c), 0xcb);
        EXPECT(gbc.readMem(0xe15d), 0x17);
        // CB 17 01E5
        gbc.setState(0x50e2, 0xecdc, 0x6b70, 0xb0a5, 0x33e, 0x6070, 0x1, 0x0);
        gbc.writeMem(0x50e2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xecdc);
        EXPECT(gbc.pc(), 0x50e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01E6
        gbc.setState(0x4036, 0xf520, 0x40c0, 0xcd99, 0xb236, 0xcb56, 0x0, 0x0);
        gbc.writeMem(0x4036, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf520);
        EXPECT(gbc.pc(), 0x4038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01E7
        gbc.setState(0x808a, 0x5d14, 0xff00, 0x40, 0x9e1b, 0x975f, 0x0, 0x1);
        gbc.writeMem(0x808a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5d14);
        EXPECT(gbc.pc(), 0x808c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x808a), 0xcb);
        EXPECT(gbc.readMem(0x808b), 0x17);
        // CB 17 01E8
        gbc.setState(0x7f75, 0x4a4b, 0xd0e0, 0x6bb3, 0x5eb, 0x9be1, 0x1, 0x0);
        gbc.writeMem(0x7f75, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4a4b);
        EXPECT(gbc.pc(), 0x7f77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01E9
        gbc.setState(0xd360, 0xb239, 0x2c60, 0x61e4, 0x8d84, 0x6181, 0x0, 0x0);
        gbc.writeMem(0xd360, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb239);
        EXPECT(gbc.pc(), 0xd362);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd360), 0xcb);
        EXPECT(gbc.readMem(0xd361), 0x17);
        // CB 17 01EA
        gbc.setState(0x61bc, 0x3d5a, 0x3a50, 0x5646, 0xb4d, 0xfa6c, 0x0, 0x0);
        gbc.writeMem(0x61bc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3d5a);
        EXPECT(gbc.pc(), 0x61be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01EB
        gbc.setState(0xa937, 0xe5b, 0xbb10, 0xfbd3, 0x2ca7, 0x1318, 0x1, 0x0);
        gbc.writeMem(0xa937, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe5b);
        EXPECT(gbc.pc(), 0xa939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa937), 0xcb);
        EXPECT(gbc.readMem(0xa938), 0x17);
        // CB 17 01EC
        gbc.setState(0xba19, 0x5d66, 0x5a10, 0xe611, 0x59ff, 0x176d, 0x0, 0x0);
        gbc.writeMem(0xba19, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5d66);
        EXPECT(gbc.pc(), 0xba1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba19), 0xcb);
        EXPECT(gbc.readMem(0xba1a), 0x17);
        // CB 17 01EE
        gbc.setState(0x8921, 0x579d, 0xfe30, 0xe32f, 0x93e0, 0x10bd, 0x0, 0x0);
        gbc.writeMem(0x8921, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x579d);
        EXPECT(gbc.pc(), 0x8923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8921), 0xcb);
        EXPECT(gbc.readMem(0x8922), 0x17);
        // CB 17 01EF
        gbc.setState(0xb438, 0xdf55, 0x1330, 0x75e3, 0xf7a, 0xc090, 0x0, 0x1);
        gbc.writeMem(0xb438, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdf55);
        EXPECT(gbc.pc(), 0xb43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb438), 0xcb);
        EXPECT(gbc.readMem(0xb439), 0x17);
        // CB 17 01F0
        gbc.setState(0x84f3, 0xc635, 0x310, 0xc758, 0xe11e, 0x8006, 0x0, 0x0);
        gbc.writeMem(0x84f3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc635);
        EXPECT(gbc.pc(), 0x84f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f3), 0xcb);
        EXPECT(gbc.readMem(0x84f4), 0x17);
        // CB 17 01F2
        gbc.setState(0x5a1f, 0xab9, 0x9fb0, 0x25a9, 0x8e4b, 0x3174, 0x0, 0x1);
        gbc.writeMem(0x5a1f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xab9);
        EXPECT(gbc.pc(), 0x5a21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01F3
        gbc.setState(0x20c8, 0x406, 0xeee0, 0x6885, 0xada1, 0x4de2, 0x0, 0x1);
        gbc.writeMem(0x20c8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x406);
        EXPECT(gbc.pc(), 0x20ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01F4
        gbc.setState(0x435b, 0x8cec, 0xba40, 0xe09, 0xe208, 0xa88c, 0x0, 0x1);
        gbc.writeMem(0x435b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8cec);
        EXPECT(gbc.pc(), 0x435d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01F6
        gbc.setState(0x46ce, 0xd8a8, 0x1590, 0x944d, 0x44af, 0xf9da, 0x1, 0x1);
        gbc.writeMem(0x46ce, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd8a8);
        EXPECT(gbc.pc(), 0x46d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01F7
        gbc.setState(0xd386, 0x83dd, 0xa1c0, 0x8856, 0x5d55, 0xbc5b, 0x1, 0x1);
        gbc.writeMem(0xd386, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x83dd);
        EXPECT(gbc.pc(), 0xd388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd386), 0xcb);
        EXPECT(gbc.readMem(0xd387), 0x17);
        // CB 17 01F8
        gbc.setState(0xa563, 0xb938, 0x5db0, 0xec5f, 0x71bf, 0x9b75, 0x1, 0x0);
        gbc.writeMem(0xa563, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb938);
        EXPECT(gbc.pc(), 0xa565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa563), 0xcb);
        EXPECT(gbc.readMem(0xa564), 0x17);
        // CB 17 01F9
        gbc.setState(0x230d, 0x6d83, 0x6ec0, 0x5965, 0xcfaa, 0x632b, 0x0, 0x1);
        gbc.writeMem(0x230d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6d83);
        EXPECT(gbc.pc(), 0x230f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01FA
        gbc.setState(0x1b77, 0xd610, 0xd2d0, 0xbd36, 0xfb31, 0x9451, 0x0, 0x1);
        gbc.writeMem(0x1b77, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd610);
        EXPECT(gbc.pc(), 0x1b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01FB
        gbc.setState(0x7bbb, 0x794d, 0xaeb0, 0xbf26, 0x6783, 0xbd39, 0x0, 0x1);
        gbc.writeMem(0x7bbb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x794d);
        EXPECT(gbc.pc(), 0x7bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 01FD
        gbc.setState(0x7171, 0x8006, 0x1170, 0xc660, 0x7d5b, 0x9f89, 0x1, 0x0);
        gbc.writeMem(0x7171, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8006);
        EXPECT(gbc.pc(), 0x7173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 01FF
        gbc.setState(0xbf4a, 0x5e5f, 0x9e50, 0x5389, 0x4e9a, 0x1747, 0x1, 0x1);
        gbc.writeMem(0xbf4a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5e5f);
        EXPECT(gbc.pc(), 0xbf4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf4a), 0xcb);
        EXPECT(gbc.readMem(0xbf4b), 0x17);
        // CB 17 0200
        gbc.setState(0xb111, 0xb972, 0xc050, 0xcdb6, 0x5731, 0x3fff, 0x0, 0x1);
        gbc.writeMem(0xb111, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb972);
        EXPECT(gbc.pc(), 0xb113);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb111), 0xcb);
        EXPECT(gbc.readMem(0xb112), 0x17);
        // CB 17 0201
        gbc.setState(0x7f92, 0xb57, 0x6ad0, 0x3452, 0x7085, 0x7f80, 0x1, 0x0);
        gbc.writeMem(0x7f92, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb57);
        EXPECT(gbc.pc(), 0x7f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0202
        gbc.setState(0x8f19, 0x7b02, 0xfb60, 0x2c6b, 0xd07f, 0x9ffd, 0x1, 0x1);
        gbc.writeMem(0x8f19, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7b02);
        EXPECT(gbc.pc(), 0x8f1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f19), 0xcb);
        EXPECT(gbc.readMem(0x8f1a), 0x17);
        // CB 17 0203
        gbc.setState(0x137c, 0x1e96, 0xd1a0, 0x33e1, 0x42f2, 0x9181, 0x1, 0x1);
        gbc.writeMem(0x137c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1e96);
        EXPECT(gbc.pc(), 0x137e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0204
        gbc.setState(0x5cee, 0x6ff6, 0xa920, 0x4382, 0xe7ac, 0xbac7, 0x0, 0x1);
        gbc.writeMem(0x5cee, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6ff6);
        EXPECT(gbc.pc(), 0x5cf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0205
        gbc.setState(0xabaf, 0xabe8, 0xc320, 0x553e, 0x3135, 0x5ee9, 0x1, 0x1);
        gbc.writeMem(0xabaf, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xabe8);
        EXPECT(gbc.pc(), 0xabb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabaf), 0xcb);
        EXPECT(gbc.readMem(0xabb0), 0x17);
        // CB 17 0206
        gbc.setState(0x75c5, 0xd980, 0xa670, 0xbfb8, 0x39eb, 0x9cd4, 0x0, 0x1);
        gbc.writeMem(0x75c5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd980);
        EXPECT(gbc.pc(), 0x75c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0207
        gbc.setState(0xa665, 0x2979, 0x7a80, 0x67c7, 0xe685, 0x3dce, 0x1, 0x0);
        gbc.writeMem(0xa665, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2979);
        EXPECT(gbc.pc(), 0xa667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa665), 0xcb);
        EXPECT(gbc.readMem(0xa666), 0x17);
        // CB 17 0208
        gbc.setState(0x3892, 0xb117, 0xb100, 0xc1aa, 0xbe7b, 0x5f4e, 0x1, 0x1);
        gbc.writeMem(0x3892, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb117);
        EXPECT(gbc.pc(), 0x3894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0209
        gbc.setState(0xd12, 0xe951, 0x8d0, 0x900b, 0x9b81, 0x358, 0x1, 0x1);
        gbc.writeMem(0xd12, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe951);
        EXPECT(gbc.pc(), 0xd14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 020A
        gbc.setState(0x282c, 0x7fe7, 0x8e10, 0x1220, 0x3d6b, 0x3dc1, 0x1, 0x0);
        gbc.writeMem(0x282c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7fe7);
        EXPECT(gbc.pc(), 0x282e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 020B
        gbc.setState(0x2420, 0x9f40, 0x1370, 0xcdfa, 0x47d4, 0xc832, 0x1, 0x0);
        gbc.writeMem(0x2420, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9f40);
        EXPECT(gbc.pc(), 0x2422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 020C
        gbc.setState(0x99dd, 0xdbc2, 0x6740, 0x55e0, 0xce58, 0x54f9, 0x1, 0x1);
        gbc.writeMem(0x99dd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xdbc2);
        EXPECT(gbc.pc(), 0x99df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99dd), 0xcb);
        EXPECT(gbc.readMem(0x99de), 0x17);
        // CB 17 020D
        gbc.setState(0xacd4, 0x294f, 0xbc00, 0x7105, 0xb276, 0x8907, 0x1, 0x0);
        gbc.writeMem(0xacd4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x294f);
        EXPECT(gbc.pc(), 0xacd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacd4), 0xcb);
        EXPECT(gbc.readMem(0xacd5), 0x17);
        // CB 17 020E
        gbc.setState(0xa0fd, 0xc2c8, 0x7940, 0xf213, 0x4df8, 0xc7c, 0x0, 0x1);
        gbc.writeMem(0xa0fd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc2c8);
        EXPECT(gbc.pc(), 0xa0ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0fd), 0xcb);
        EXPECT(gbc.readMem(0xa0fe), 0x17);
        // CB 17 020F
        gbc.setState(0x91ca, 0x69e3, 0x1760, 0x85d1, 0x83c8, 0xeca8, 0x1, 0x1);
        gbc.writeMem(0x91ca, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x69e3);
        EXPECT(gbc.pc(), 0x91cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ca), 0xcb);
        EXPECT(gbc.readMem(0x91cb), 0x17);
        // CB 17 0210
        gbc.setState(0xa471, 0xcd93, 0x43e0, 0xd930, 0x7e7d, 0x3da2, 0x1, 0x1);
        gbc.writeMem(0xa471, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xcd93);
        EXPECT(gbc.pc(), 0xa473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa471), 0xcb);
        EXPECT(gbc.readMem(0xa472), 0x17);
        // CB 17 0211
        gbc.setState(0x8116, 0xf82e, 0xc4e0, 0x15ed, 0x7abd, 0x5c82, 0x1, 0x1);
        gbc.writeMem(0x8116, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf82e);
        EXPECT(gbc.pc(), 0x8118);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8116), 0xcb);
        EXPECT(gbc.readMem(0x8117), 0x17);
        // CB 17 0212
        gbc.setState(0xd5e9, 0x98b5, 0xb060, 0x9498, 0xd47d, 0xf22d, 0x1, 0x1);
        gbc.writeMem(0xd5e9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x98b5);
        EXPECT(gbc.pc(), 0xd5eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e9), 0xcb);
        EXPECT(gbc.readMem(0xd5ea), 0x17);
        // CB 17 0214
        gbc.setState(0x26d2, 0x7fa2, 0x2070, 0x5709, 0x1d3d, 0xc35a, 0x0, 0x1);
        gbc.writeMem(0x26d2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7fa2);
        EXPECT(gbc.pc(), 0x26d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0215
        gbc.setState(0x7738, 0x2475, 0x4e60, 0x5fbf, 0xd6b9, 0xdc74, 0x1, 0x0);
        gbc.writeMem(0x7738, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2475);
        EXPECT(gbc.pc(), 0x773a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0216
        gbc.setState(0x4b04, 0xe243, 0x6b20, 0x890a, 0x5241, 0xdaa7, 0x0, 0x0);
        gbc.writeMem(0x4b04, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe243);
        EXPECT(gbc.pc(), 0x4b06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0217
        gbc.setState(0xb8bb, 0x58a8, 0xf900, 0x1d87, 0xca94, 0x6227, 0x0, 0x1);
        gbc.writeMem(0xb8bb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x58a8);
        EXPECT(gbc.pc(), 0xb8bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8bb), 0xcb);
        EXPECT(gbc.readMem(0xb8bc), 0x17);
        // CB 17 0218
        gbc.setState(0x8360, 0x583f, 0x100, 0x317b, 0x98bd, 0xac33, 0x1, 0x1);
        gbc.writeMem(0x8360, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x583f);
        EXPECT(gbc.pc(), 0x8362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8360), 0xcb);
        EXPECT(gbc.readMem(0x8361), 0x17);
        // CB 17 0219
        gbc.setState(0xd8b4, 0xa31d, 0x20e0, 0x602a, 0x39d4, 0x2709, 0x0, 0x0);
        gbc.writeMem(0xd8b4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa31d);
        EXPECT(gbc.pc(), 0xd8b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8b4), 0xcb);
        EXPECT(gbc.readMem(0xd8b5), 0x17);
        // CB 17 021A
        gbc.setState(0xf8c, 0x6a46, 0x5330, 0x6e43, 0xd83f, 0x9890, 0x0, 0x1);
        gbc.writeMem(0xf8c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6a46);
        EXPECT(gbc.pc(), 0xf8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 021B
        gbc.setState(0x627c, 0x9387, 0xfb0, 0xf7b, 0x46e9, 0x3b4b, 0x0, 0x1);
        gbc.writeMem(0x627c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9387);
        EXPECT(gbc.pc(), 0x627e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 021C
        gbc.setState(0xf7, 0x8f15, 0xe5d0, 0x6706, 0xd5d7, 0x5807, 0x0, 0x1);
        gbc.writeMem(0xf7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8f15);
        EXPECT(gbc.pc(), 0xf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 021D
        gbc.setState(0xe5f5, 0x3fcb, 0x3f50, 0xd39a, 0x20d5, 0x7d8b, 0x1, 0x0);
        gbc.writeMem(0xe5f5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3fcb);
        EXPECT(gbc.pc(), 0xe5f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f5), 0xcb);
        EXPECT(gbc.readMem(0xe5f6), 0x17);
        // CB 17 021E
        gbc.setState(0xaef4, 0x95ea, 0xd960, 0xb31f, 0x3984, 0x10f7, 0x0, 0x1);
        gbc.writeMem(0xaef4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x95ea);
        EXPECT(gbc.pc(), 0xaef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef4), 0xcb);
        EXPECT(gbc.readMem(0xaef5), 0x17);
        // CB 17 021F
        gbc.setState(0xafed, 0xc3f9, 0xe630, 0x320e, 0xef3, 0xc207, 0x1, 0x0);
        gbc.writeMem(0xafed, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc3f9);
        EXPECT(gbc.pc(), 0xafef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafed), 0xcb);
        EXPECT(gbc.readMem(0xafee), 0x17);
        // CB 17 0220
        gbc.setState(0x9af1, 0xc61, 0xacf0, 0x541d, 0x7876, 0x8ea2, 0x1, 0x0);
        gbc.writeMem(0x9af1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc61);
        EXPECT(gbc.pc(), 0x9af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9af1), 0xcb);
        EXPECT(gbc.readMem(0x9af2), 0x17);
        // CB 17 0221
        gbc.setState(0xaa69, 0x1918, 0x37a0, 0xe72d, 0x85a8, 0xf26b, 0x0, 0x0);
        gbc.writeMem(0xaa69, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1918);
        EXPECT(gbc.pc(), 0xaa6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa69), 0xcb);
        EXPECT(gbc.readMem(0xaa6a), 0x17);
        // CB 17 0222
        gbc.setState(0x9009, 0xa88f, 0x470, 0x9b3b, 0x809d, 0xf63d, 0x0, 0x1);
        gbc.writeMem(0x9009, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa88f);
        EXPECT(gbc.pc(), 0x900b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9009), 0xcb);
        EXPECT(gbc.readMem(0x900a), 0x17);
        // CB 17 0223
        gbc.setState(0xe06e, 0x7111, 0xa100, 0x2783, 0x47f8, 0xd1d7, 0x0, 0x0);
        gbc.writeMem(0xe06e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x7111);
        EXPECT(gbc.pc(), 0xe070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe06e), 0xcb);
        EXPECT(gbc.readMem(0xe06f), 0x17);
        // CB 17 0224
        gbc.setState(0x73a, 0x7816, 0x3710, 0x36f9, 0x8e6b, 0xc781, 0x1, 0x0);
        gbc.writeMem(0x73a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7816);
        EXPECT(gbc.pc(), 0x73c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0225
        gbc.setState(0xd83a, 0xc49f, 0x8b50, 0x8b6b, 0x491d, 0x6ea1, 0x1, 0x1);
        gbc.writeMem(0xd83a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc49f);
        EXPECT(gbc.pc(), 0xd83c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd83a), 0xcb);
        EXPECT(gbc.readMem(0xd83b), 0x17);
        // CB 17 0226
        gbc.setState(0xa83a, 0x42f, 0xabc0, 0x2a60, 0xe402, 0x3575, 0x1, 0x1);
        gbc.writeMem(0xa83a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x42f);
        EXPECT(gbc.pc(), 0xa83c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa83a), 0xcb);
        EXPECT(gbc.readMem(0xa83b), 0x17);
        // CB 17 0227
        gbc.setState(0x53a0, 0x1b61, 0x4580, 0x7f4c, 0x73ab, 0x6e4b, 0x1, 0x1);
        gbc.writeMem(0x53a0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1b61);
        EXPECT(gbc.pc(), 0x53a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0229
        gbc.setState(0x253d, 0x80ad, 0xa70, 0x8b15, 0xb98c, 0x3acd, 0x0, 0x1);
        gbc.writeMem(0x253d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x80ad);
        EXPECT(gbc.pc(), 0x253f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 022A
        gbc.setState(0xdc65, 0xc8a6, 0xa870, 0x1bcc, 0xfae0, 0xc57c, 0x1, 0x0);
        gbc.writeMem(0xdc65, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc8a6);
        EXPECT(gbc.pc(), 0xdc67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc65), 0xcb);
        EXPECT(gbc.readMem(0xdc66), 0x17);
        // CB 17 022B
        gbc.setState(0xcf8d, 0x3ca9, 0x2570, 0xf103, 0xaf2e, 0xc620, 0x1, 0x0);
        gbc.writeMem(0xcf8d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3ca9);
        EXPECT(gbc.pc(), 0xcf8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf8d), 0xcb);
        EXPECT(gbc.readMem(0xcf8e), 0x17);
        // CB 17 022C
        gbc.setState(0xe89f, 0xd26f, 0xd490, 0xca73, 0x13ac, 0x75a9, 0x0, 0x1);
        gbc.writeMem(0xe89f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd26f);
        EXPECT(gbc.pc(), 0xe8a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe89f), 0xcb);
        EXPECT(gbc.readMem(0xe8a0), 0x17);
        // CB 17 022D
        gbc.setState(0x80a8, 0xc3af, 0xe820, 0x5ecb, 0x8edb, 0xe965, 0x1, 0x1);
        gbc.writeMem(0x80a8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc3af);
        EXPECT(gbc.pc(), 0x80aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a8), 0xcb);
        EXPECT(gbc.readMem(0x80a9), 0x17);
        // CB 17 022E
        gbc.setState(0x787e, 0x25ec, 0xed10, 0xdeb1, 0x9a44, 0xc2d8, 0x1, 0x1);
        gbc.writeMem(0x787e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x25ec);
        EXPECT(gbc.pc(), 0x7880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 022F
        gbc.setState(0xd13c, 0xd422, 0x55f0, 0xb5de, 0x9b14, 0xe3d5, 0x0, 0x0);
        gbc.writeMem(0xd13c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd422);
        EXPECT(gbc.pc(), 0xd13e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13c), 0xcb);
        EXPECT(gbc.readMem(0xd13d), 0x17);
        // CB 17 0230
        gbc.setState(0x9ff4, 0xe4d5, 0x1bb0, 0xb210, 0x5bc, 0x5a86, 0x0, 0x1);
        gbc.writeMem(0x9ff4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe4d5);
        EXPECT(gbc.pc(), 0x9ff6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff4), 0xcb);
        EXPECT(gbc.readMem(0x9ff5), 0x17);
        // CB 17 0232
        gbc.setState(0xcb0, 0x950a, 0x6ab0, 0x322f, 0x899, 0xb2f, 0x1, 0x0);
        gbc.writeMem(0xcb0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x950a);
        EXPECT(gbc.pc(), 0xcb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0234
        gbc.setState(0xd9c7, 0x11e9, 0x4340, 0x358f, 0x1073, 0x825f, 0x1, 0x1);
        gbc.writeMem(0xd9c7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x11e9);
        EXPECT(gbc.pc(), 0xd9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c7), 0xcb);
        EXPECT(gbc.readMem(0xd9c8), 0x17);
        // CB 17 0235
        gbc.setState(0x7466, 0xabfe, 0xb2d0, 0xacf7, 0x92e1, 0x6c75, 0x1, 0x0);
        gbc.writeMem(0x7466, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xabfe);
        EXPECT(gbc.pc(), 0x7468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0236
        gbc.setState(0x4334, 0xa676, 0x2130, 0x3ddd, 0x6a19, 0xa209, 0x0, 0x0);
        gbc.writeMem(0x4334, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa676);
        EXPECT(gbc.pc(), 0x4336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0237
        gbc.setState(0x1482, 0x82e5, 0xdea0, 0xa3a3, 0xb6a3, 0x3e88, 0x0, 0x0);
        gbc.writeMem(0x1482, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x82e5);
        EXPECT(gbc.pc(), 0x1484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0238
        gbc.setState(0x2fe4, 0xabdb, 0xc610, 0x8a49, 0xc1a2, 0x2d7, 0x1, 0x0);
        gbc.writeMem(0x2fe4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xabdb);
        EXPECT(gbc.pc(), 0x2fe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0239
        gbc.setState(0xa861, 0x107a, 0x6b0, 0xf078, 0xbe29, 0xf253, 0x1, 0x0);
        gbc.writeMem(0xa861, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x107a);
        EXPECT(gbc.pc(), 0xa863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa861), 0xcb);
        EXPECT(gbc.readMem(0xa862), 0x17);
        // CB 17 023A
        gbc.setState(0x8ee9, 0x3374, 0x2460, 0x97d2, 0x8339, 0x15cf, 0x0, 0x0);
        gbc.writeMem(0x8ee9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3374);
        EXPECT(gbc.pc(), 0x8eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ee9), 0xcb);
        EXPECT(gbc.readMem(0x8eea), 0x17);
        // CB 17 023B
        gbc.setState(0x62f6, 0xafb, 0x2ec0, 0x14af, 0xe500, 0x4ed3, 0x0, 0x0);
        gbc.writeMem(0x62f6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xafb);
        EXPECT(gbc.pc(), 0x62f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 023C
        gbc.setState(0x32c4, 0x5593, 0xf7d0, 0x12da, 0x699e, 0xd4f7, 0x0, 0x1);
        gbc.writeMem(0x32c4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5593);
        EXPECT(gbc.pc(), 0x32c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 023D
        gbc.setState(0x20bc, 0x275e, 0x2720, 0x44e8, 0x34f9, 0x2b12, 0x0, 0x1);
        gbc.writeMem(0x20bc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x275e);
        EXPECT(gbc.pc(), 0x20be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 023E
        gbc.setState(0xdb01, 0xb343, 0x95c0, 0x4c8a, 0xb88f, 0x4c78, 0x1, 0x0);
        gbc.writeMem(0xdb01, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb343);
        EXPECT(gbc.pc(), 0xdb03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb01), 0xcb);
        EXPECT(gbc.readMem(0xdb02), 0x17);
        // CB 17 023F
        gbc.setState(0x633c, 0x7769, 0x4eb0, 0x85be, 0x226d, 0x13eb, 0x0, 0x0);
        gbc.writeMem(0x633c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7769);
        EXPECT(gbc.pc(), 0x633e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0240
        gbc.setState(0xb419, 0x3b59, 0xcff0, 0x9dd1, 0xe70, 0x51d4, 0x1, 0x1);
        gbc.writeMem(0xb419, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3b59);
        EXPECT(gbc.pc(), 0xb41b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb419), 0xcb);
        EXPECT(gbc.readMem(0xb41a), 0x17);
        // CB 17 0241
        gbc.setState(0xb46a, 0x1a7b, 0xcdb0, 0x570f, 0x3c82, 0xfae4, 0x0, 0x1);
        gbc.writeMem(0xb46a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1a7b);
        EXPECT(gbc.pc(), 0xb46c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb46a), 0xcb);
        EXPECT(gbc.readMem(0xb46b), 0x17);
        // CB 17 0242
        gbc.setState(0x52f3, 0x3c39, 0xa310, 0x8237, 0x1313, 0xd156, 0x1, 0x0);
        gbc.writeMem(0x52f3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3c39);
        EXPECT(gbc.pc(), 0x52f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0243
        gbc.setState(0xc1e8, 0xa799, 0x6f30, 0xe467, 0xef61, 0x4f09, 0x1, 0x0);
        gbc.writeMem(0xc1e8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa799);
        EXPECT(gbc.pc(), 0xc1ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1e8), 0xcb);
        EXPECT(gbc.readMem(0xc1e9), 0x17);
        // CB 17 0244
        gbc.setState(0xdfa5, 0xbc2e, 0x9470, 0x8796, 0x915a, 0xbd5d, 0x0, 0x0);
        gbc.writeMem(0xdfa5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xbc2e);
        EXPECT(gbc.pc(), 0xdfa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa5), 0xcb);
        EXPECT(gbc.readMem(0xdfa6), 0x17);
        // CB 17 0246
        gbc.setState(0x400c, 0x60b1, 0x5c60, 0x8c37, 0xe315, 0xc69e, 0x1, 0x1);
        gbc.writeMem(0x400c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x60b1);
        EXPECT(gbc.pc(), 0x400e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0247
        gbc.setState(0xa6ba, 0x7e2f, 0x250, 0x3f1b, 0x94eb, 0x1e60, 0x1, 0x0);
        gbc.writeMem(0xa6ba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7e2f);
        EXPECT(gbc.pc(), 0xa6bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ba), 0xcb);
        EXPECT(gbc.readMem(0xa6bb), 0x17);
        // CB 17 0248
        gbc.setState(0x122, 0x80db, 0x53a0, 0x694d, 0x70df, 0x728b, 0x1, 0x0);
        gbc.writeMem(0x122, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x80db);
        EXPECT(gbc.pc(), 0x124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0249
        gbc.setState(0xbc5a, 0x7828, 0xa0a0, 0xbd53, 0xdd06, 0x8e0d, 0x1, 0x1);
        gbc.writeMem(0xbc5a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7828);
        EXPECT(gbc.pc(), 0xbc5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc5a), 0xcb);
        EXPECT(gbc.readMem(0xbc5b), 0x17);
        // CB 17 024A
        gbc.setState(0x1b18, 0xe554, 0xc650, 0x8768, 0x706f, 0x590, 0x0, 0x1);
        gbc.writeMem(0x1b18, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe554);
        EXPECT(gbc.pc(), 0x1b1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 024B
        gbc.setState(0x3490, 0xf1a5, 0x34b0, 0x3a96, 0x1cef, 0x75d2, 0x1, 0x0);
        gbc.writeMem(0x3490, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf1a5);
        EXPECT(gbc.pc(), 0x3492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 024C
        gbc.setState(0x9510, 0xb994, 0x45a0, 0x10dc, 0xabaf, 0x275b, 0x0, 0x0);
        gbc.writeMem(0x9510, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb994);
        EXPECT(gbc.pc(), 0x9512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9510), 0xcb);
        EXPECT(gbc.readMem(0x9511), 0x17);
        // CB 17 024D
        gbc.setState(0xd54, 0x4d9f, 0xfe20, 0x3a3e, 0x174f, 0x4e0b, 0x1, 0x1);
        gbc.writeMem(0xd54, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4d9f);
        EXPECT(gbc.pc(), 0xd56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 024E
        gbc.setState(0x3b9b, 0xe5ac, 0x9200, 0xaa77, 0xb614, 0x81ce, 0x1, 0x0);
        gbc.writeMem(0x3b9b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe5ac);
        EXPECT(gbc.pc(), 0x3b9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 024F
        gbc.setState(0x4a30, 0x52d7, 0x1f10, 0x2094, 0x7d20, 0x808, 0x1, 0x1);
        gbc.writeMem(0x4a30, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x52d7);
        EXPECT(gbc.pc(), 0x4a32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0250
        gbc.setState(0xe5ac, 0xee4f, 0xa890, 0x56a1, 0x6ec7, 0x9e1f, 0x1, 0x0);
        gbc.writeMem(0xe5ac, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xee4f);
        EXPECT(gbc.pc(), 0xe5ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ac), 0xcb);
        EXPECT(gbc.readMem(0xe5ad), 0x17);
        // CB 17 0252
        gbc.setState(0x9b33, 0x6f01, 0x3bd0, 0x7b8a, 0x7828, 0xa28a, 0x0, 0x1);
        gbc.writeMem(0x9b33, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6f01);
        EXPECT(gbc.pc(), 0x9b35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b33), 0xcb);
        EXPECT(gbc.readMem(0x9b34), 0x17);
        // CB 17 0253
        gbc.setState(0x8487, 0xb4e2, 0x3a50, 0xd37a, 0x98a7, 0x2249, 0x1, 0x1);
        gbc.writeMem(0x8487, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb4e2);
        EXPECT(gbc.pc(), 0x8489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8487), 0xcb);
        EXPECT(gbc.readMem(0x8488), 0x17);
        // CB 17 0254
        gbc.setState(0xb0a0, 0x89d1, 0x2bf0, 0x1f35, 0x21b2, 0xf95f, 0x1, 0x0);
        gbc.writeMem(0xb0a0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x89d1);
        EXPECT(gbc.pc(), 0xb0a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a0), 0xcb);
        EXPECT(gbc.readMem(0xb0a1), 0x17);
        // CB 17 0255
        gbc.setState(0x8aa, 0x4a0a, 0x1320, 0x760, 0x1258, 0xe7a4, 0x1, 0x0);
        gbc.writeMem(0x8aa, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4a0a);
        EXPECT(gbc.pc(), 0x8ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0256
        gbc.setState(0xbde7, 0x5ef9, 0xf640, 0x5755, 0x3c2, 0xe2fa, 0x0, 0x0);
        gbc.writeMem(0xbde7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5ef9);
        EXPECT(gbc.pc(), 0xbde9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde7), 0xcb);
        EXPECT(gbc.readMem(0xbde8), 0x17);
        // CB 17 0257
        gbc.setState(0x65aa, 0xc116, 0xcc0, 0x235c, 0x6fed, 0xb579, 0x0, 0x0);
        gbc.writeMem(0x65aa, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xc116);
        EXPECT(gbc.pc(), 0x65ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0258
        gbc.setState(0x2cf9, 0x3883, 0xf1a0, 0x6faa, 0xcbf1, 0xd773, 0x0, 0x1);
        gbc.writeMem(0x2cf9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3883);
        EXPECT(gbc.pc(), 0x2cfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0259
        gbc.setState(0xb8a6, 0xe477, 0xcf10, 0xeb94, 0x9c81, 0xf88a, 0x0, 0x1);
        gbc.writeMem(0xb8a6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe477);
        EXPECT(gbc.pc(), 0xb8a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a6), 0xcb);
        EXPECT(gbc.readMem(0xb8a7), 0x17);
        // CB 17 025A
        gbc.setState(0x78e7, 0xde08, 0x6130, 0xd1c5, 0x3720, 0x3d2e, 0x1, 0x0);
        gbc.writeMem(0x78e7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xde08);
        EXPECT(gbc.pc(), 0x78e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 025B
        gbc.setState(0x47a3, 0xfc55, 0x18e0, 0x4820, 0x696d, 0x819e, 0x0, 0x1);
        gbc.writeMem(0x47a3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xfc55);
        EXPECT(gbc.pc(), 0x47a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 025C
        gbc.setState(0xee75, 0x40e8, 0x4a60, 0x742c, 0xf8a7, 0x809e, 0x1, 0x1);
        gbc.writeMem(0xee75, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x40e8);
        EXPECT(gbc.pc(), 0xee77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee75), 0xcb);
        EXPECT(gbc.readMem(0xee76), 0x17);
        // CB 17 025D
        gbc.setState(0x40d8, 0xc9f7, 0x4f50, 0xb8ca, 0xdc1, 0x287, 0x1, 0x0);
        gbc.writeMem(0x40d8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc9f7);
        EXPECT(gbc.pc(), 0x40da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 025E
        gbc.setState(0x2c71, 0xa697, 0xa490, 0xcb1, 0xb7c, 0x15f7, 0x1, 0x1);
        gbc.writeMem(0x2c71, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa697);
        EXPECT(gbc.pc(), 0x2c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 025F
        gbc.setState(0x1d04, 0xa53d, 0x3ea0, 0x6f7a, 0x9f5f, 0x3002, 0x1, 0x0);
        gbc.writeMem(0x1d04, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa53d);
        EXPECT(gbc.pc(), 0x1d06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0260
        gbc.setState(0xc6a0, 0xaf61, 0x4910, 0x3ded, 0xa2e, 0xe1c6, 0x0, 0x0);
        gbc.writeMem(0xc6a0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xaf61);
        EXPECT(gbc.pc(), 0xc6a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a0), 0xcb);
        EXPECT(gbc.readMem(0xc6a1), 0x17);
        // CB 17 0261
        gbc.setState(0x4d23, 0x8592, 0xcad0, 0x98f3, 0xacaa, 0x73ca, 0x0, 0x0);
        gbc.writeMem(0x4d23, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8592);
        EXPECT(gbc.pc(), 0x4d25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0262
        gbc.setState(0x4949, 0x40ea, 0x22b0, 0x6b89, 0x9bc0, 0x8878, 0x0, 0x0);
        gbc.writeMem(0x4949, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x40ea);
        EXPECT(gbc.pc(), 0x494b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0263
        gbc.setState(0xcdea, 0x8b4b, 0x13d0, 0x9531, 0x266d, 0x5b7, 0x1, 0x1);
        gbc.writeMem(0xcdea, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8b4b);
        EXPECT(gbc.pc(), 0xcdec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdea), 0xcb);
        EXPECT(gbc.readMem(0xcdeb), 0x17);
        // CB 17 0264
        gbc.setState(0x4fce, 0x2189, 0x1720, 0x6d88, 0xc057, 0xde5f, 0x0, 0x0);
        gbc.writeMem(0x4fce, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2189);
        EXPECT(gbc.pc(), 0x4fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0265
        gbc.setState(0x955e, 0x2b37, 0x28d0, 0xf23b, 0xfc97, 0x205d, 0x0, 0x1);
        gbc.writeMem(0x955e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2b37);
        EXPECT(gbc.pc(), 0x9560);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x955e), 0xcb);
        EXPECT(gbc.readMem(0x955f), 0x17);
        // CB 17 0266
        gbc.setState(0x2033, 0xd80, 0x67b0, 0xadbf, 0x4a3, 0xba5e, 0x0, 0x1);
        gbc.writeMem(0x2033, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd80);
        EXPECT(gbc.pc(), 0x2035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0267
        gbc.setState(0x945e, 0xf979, 0x4cb0, 0x1087, 0x38a2, 0xb450, 0x1, 0x0);
        gbc.writeMem(0x945e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf979);
        EXPECT(gbc.pc(), 0x9460);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x945e), 0xcb);
        EXPECT(gbc.readMem(0x945f), 0x17);
        // CB 17 0268
        gbc.setState(0x9fb1, 0xc6fd, 0xc3f0, 0x218, 0x6512, 0x725e, 0x1, 0x0);
        gbc.writeMem(0x9fb1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc6fd);
        EXPECT(gbc.pc(), 0x9fb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb1), 0xcb);
        EXPECT(gbc.readMem(0x9fb2), 0x17);
        // CB 17 0269
        gbc.setState(0x9118, 0x814b, 0x64b0, 0xe7a2, 0x1569, 0x2e57, 0x0, 0x1);
        gbc.writeMem(0x9118, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x814b);
        EXPECT(gbc.pc(), 0x911a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9118), 0xcb);
        EXPECT(gbc.readMem(0x9119), 0x17);
        // CB 17 026A
        gbc.setState(0x920f, 0xe910, 0x3e80, 0x808e, 0x6fe1, 0xb66c, 0x1, 0x0);
        gbc.writeMem(0x920f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe910);
        EXPECT(gbc.pc(), 0x9211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x920f), 0xcb);
        EXPECT(gbc.readMem(0x9210), 0x17);
        // CB 17 026B
        gbc.setState(0x7d36, 0x9159, 0xdb10, 0xea25, 0xc5b6, 0x1f1e, 0x0, 0x0);
        gbc.writeMem(0x7d36, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9159);
        EXPECT(gbc.pc(), 0x7d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 026C
        gbc.setState(0x73d7, 0x3161, 0x9c70, 0x2fb8, 0xf803, 0x3e77, 0x0, 0x0);
        gbc.writeMem(0x73d7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3161);
        EXPECT(gbc.pc(), 0x73d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 026D
        gbc.setState(0x6913, 0xb05, 0x49b0, 0x9435, 0x7427, 0x8da3, 0x1, 0x1);
        gbc.writeMem(0x6913, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb05);
        EXPECT(gbc.pc(), 0x6915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 026E
        gbc.setState(0xed29, 0xce0, 0x54a0, 0x71db, 0xd041, 0xab22, 0x1, 0x0);
        gbc.writeMem(0xed29, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xce0);
        EXPECT(gbc.pc(), 0xed2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed29), 0xcb);
        EXPECT(gbc.readMem(0xed2a), 0x17);
        // CB 17 026F
        gbc.setState(0xba48, 0x763c, 0x2610, 0xf68, 0xd769, 0xadcd, 0x0, 0x0);
        gbc.writeMem(0xba48, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x763c);
        EXPECT(gbc.pc(), 0xba4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba48), 0xcb);
        EXPECT(gbc.readMem(0xba49), 0x17);
        // CB 17 0270
        gbc.setState(0xa15d, 0xcf0, 0xa420, 0xe1b2, 0x10f0, 0x6b8e, 0x0, 0x1);
        gbc.writeMem(0xa15d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xcf0);
        EXPECT(gbc.pc(), 0xa15f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa15d), 0xcb);
        EXPECT(gbc.readMem(0xa15e), 0x17);
        // CB 17 0271
        gbc.setState(0xe969, 0xb477, 0xabf0, 0xb93c, 0x6685, 0x39c7, 0x0, 0x0);
        gbc.writeMem(0xe969, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb477);
        EXPECT(gbc.pc(), 0xe96b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe969), 0xcb);
        EXPECT(gbc.readMem(0xe96a), 0x17);
        // CB 17 0272
        gbc.setState(0x9ac4, 0xf59d, 0x57d0, 0xdddf, 0x59fd, 0x6b97, 0x0, 0x1);
        gbc.writeMem(0x9ac4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf59d);
        EXPECT(gbc.pc(), 0x9ac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac4), 0xcb);
        EXPECT(gbc.readMem(0x9ac5), 0x17);
        // CB 17 0273
        gbc.setState(0xbb24, 0xc5d0, 0xdc80, 0x8dcb, 0x5ae4, 0xfb4, 0x1, 0x1);
        gbc.writeMem(0xbb24, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc5d0);
        EXPECT(gbc.pc(), 0xbb26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb24), 0xcb);
        EXPECT(gbc.readMem(0xbb25), 0x17);
        // CB 17 0274
        gbc.setState(0x8f5a, 0xbd2b, 0x3bf0, 0xf69d, 0x54c2, 0x11b, 0x1, 0x0);
        gbc.writeMem(0x8f5a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xbd2b);
        EXPECT(gbc.pc(), 0x8f5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f5a), 0xcb);
        EXPECT(gbc.readMem(0x8f5b), 0x17);
        // CB 17 0275
        gbc.setState(0x8f2d, 0xd9b0, 0x6380, 0xc71e, 0x8eca, 0x861a, 0x1, 0x0);
        gbc.writeMem(0x8f2d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd9b0);
        EXPECT(gbc.pc(), 0x8f2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f2d), 0xcb);
        EXPECT(gbc.readMem(0x8f2e), 0x17);
        // CB 17 0276
        gbc.setState(0xd113, 0x615d, 0x3f70, 0x60d8, 0x93fd, 0x1b33, 0x1, 0x1);
        gbc.writeMem(0xd113, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x615d);
        EXPECT(gbc.pc(), 0xd115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd113), 0xcb);
        EXPECT(gbc.readMem(0xd114), 0x17);
        // CB 17 0277
        gbc.setState(0x529, 0xc94c, 0x81b0, 0x150a, 0x3f4f, 0xe9ba, 0x1, 0x1);
        gbc.writeMem(0x529, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc94c);
        EXPECT(gbc.pc(), 0x52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0278
        gbc.setState(0x825a, 0x6b48, 0x46c0, 0x64b, 0xbeb1, 0xd6c0, 0x0, 0x0);
        gbc.writeMem(0x825a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6b48);
        EXPECT(gbc.pc(), 0x825c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x825a), 0xcb);
        EXPECT(gbc.readMem(0x825b), 0x17);
        // CB 17 0279
        gbc.setState(0x7535, 0x3a71, 0xccd0, 0xbf8a, 0x5cba, 0xb160, 0x0, 0x1);
        gbc.writeMem(0x7535, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3a71);
        EXPECT(gbc.pc(), 0x7537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 027A
        gbc.setState(0x5c6b, 0xfee4, 0x77f0, 0x241b, 0xa2c, 0x207, 0x0, 0x1);
        gbc.writeMem(0x5c6b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfee4);
        EXPECT(gbc.pc(), 0x5c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 027B
        gbc.setState(0x6935, 0xeb4b, 0xd610, 0xec84, 0x2421, 0xcef4, 0x0, 0x0);
        gbc.writeMem(0x6935, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xeb4b);
        EXPECT(gbc.pc(), 0x6937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 027C
        gbc.setState(0x7c57, 0x284f, 0x1b20, 0xf70a, 0x5a31, 0x4443, 0x0, 0x0);
        gbc.writeMem(0x7c57, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x284f);
        EXPECT(gbc.pc(), 0x7c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 027D
        gbc.setState(0x4a3, 0x9bcd, 0x90c0, 0x3eed, 0xe2c9, 0xadae, 0x1, 0x0);
        gbc.writeMem(0x4a3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9bcd);
        EXPECT(gbc.pc(), 0x4a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 027E
        gbc.setState(0xafe1, 0x94eb, 0x9b80, 0x8d42, 0x3411, 0xea68, 0x1, 0x0);
        gbc.writeMem(0xafe1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x94eb);
        EXPECT(gbc.pc(), 0xafe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafe1), 0xcb);
        EXPECT(gbc.readMem(0xafe2), 0x17);
        // CB 17 027F
        gbc.setState(0x887e, 0x4484, 0xb50, 0x92c8, 0xbc67, 0x2be2, 0x1, 0x1);
        gbc.writeMem(0x887e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4484);
        EXPECT(gbc.pc(), 0x8880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x887e), 0xcb);
        EXPECT(gbc.readMem(0x887f), 0x17);
        // CB 17 0281
        gbc.setState(0x1bcc, 0xadde, 0xcc60, 0x8ea7, 0x98da, 0x3d00, 0x0, 0x0);
        gbc.writeMem(0x1bcc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xadde);
        EXPECT(gbc.pc(), 0x1bce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0283
        gbc.setState(0xc0fe, 0xf235, 0x840, 0x3aa5, 0x1275, 0xf809, 0x1, 0x0);
        gbc.writeMem(0xc0fe, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf235);
        EXPECT(gbc.pc(), 0xc100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0fe), 0xcb);
        EXPECT(gbc.readMem(0xc0ff), 0x17);
        // CB 17 0284
        gbc.setState(0xcff6, 0x1de6, 0x8d20, 0xd3c8, 0x8843, 0x1ceb, 0x0, 0x1);
        gbc.writeMem(0xcff6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1de6);
        EXPECT(gbc.pc(), 0xcff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcff6), 0xcb);
        EXPECT(gbc.readMem(0xcff7), 0x17);
        // CB 17 0285
        gbc.setState(0x4852, 0x7e14, 0x2d10, 0xaaa8, 0xe824, 0x4e63, 0x0, 0x0);
        gbc.writeMem(0x4852, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7e14);
        EXPECT(gbc.pc(), 0x4854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0286
        gbc.setState(0xc12b, 0x70a7, 0x6ad0, 0xe87b, 0x6bc4, 0xd383, 0x1, 0x1);
        gbc.writeMem(0xc12b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x70a7);
        EXPECT(gbc.pc(), 0xc12d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc12b), 0xcb);
        EXPECT(gbc.readMem(0xc12c), 0x17);
        // CB 17 0287
        gbc.setState(0xb90b, 0xfa9d, 0x95f0, 0xdf70, 0x3bc9, 0x8725, 0x1, 0x1);
        gbc.writeMem(0xb90b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfa9d);
        EXPECT(gbc.pc(), 0xb90d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb90b), 0xcb);
        EXPECT(gbc.readMem(0xb90c), 0x17);
        // CB 17 0288
        gbc.setState(0x891e, 0x248b, 0xa640, 0x82cc, 0xd1cb, 0x922, 0x1, 0x0);
        gbc.writeMem(0x891e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x248b);
        EXPECT(gbc.pc(), 0x8920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x891e), 0xcb);
        EXPECT(gbc.readMem(0x891f), 0x17);
        // CB 17 0289
        gbc.setState(0xda26, 0xb0b7, 0xe310, 0x79ee, 0xca13, 0xf962, 0x1, 0x0);
        gbc.writeMem(0xda26, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb0b7);
        EXPECT(gbc.pc(), 0xda28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda26), 0xcb);
        EXPECT(gbc.readMem(0xda27), 0x17);
        // CB 17 028B
        gbc.setState(0xde66, 0xbcd4, 0x2810, 0xfdf2, 0x659e, 0x5457, 0x1, 0x0);
        gbc.writeMem(0xde66, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xbcd4);
        EXPECT(gbc.pc(), 0xde68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde66), 0xcb);
        EXPECT(gbc.readMem(0xde67), 0x17);
        // CB 17 028C
        gbc.setState(0xb345, 0x50e6, 0x5e10, 0x5ce6, 0x6b49, 0x73e8, 0x0, 0x1);
        gbc.writeMem(0xb345, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x50e6);
        EXPECT(gbc.pc(), 0xb347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb345), 0xcb);
        EXPECT(gbc.readMem(0xb346), 0x17);
        // CB 17 028D
        gbc.setState(0xacb5, 0xc69b, 0xd380, 0x6a1e, 0xa083, 0x9b85, 0x1, 0x0);
        gbc.writeMem(0xacb5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc69b);
        EXPECT(gbc.pc(), 0xacb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb5), 0xcb);
        EXPECT(gbc.readMem(0xacb6), 0x17);
        // CB 17 028E
        gbc.setState(0x2f3, 0x7e62, 0xc630, 0x39e5, 0x7f6, 0x497a, 0x1, 0x0);
        gbc.writeMem(0x2f3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7e62);
        EXPECT(gbc.pc(), 0x2f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 028F
        gbc.setState(0xd5b3, 0x133a, 0x51b0, 0xbd11, 0xff0f, 0xdc44, 0x0, 0x0);
        gbc.writeMem(0xd5b3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x133a);
        EXPECT(gbc.pc(), 0xd5b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b3), 0xcb);
        EXPECT(gbc.readMem(0xd5b4), 0x17);
        // CB 17 0290
        gbc.setState(0x514e, 0xeed3, 0xe930, 0xccd3, 0x6c77, 0x5c7, 0x0, 0x1);
        gbc.writeMem(0x514e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xeed3);
        EXPECT(gbc.pc(), 0x5150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0291
        gbc.setState(0x3c50, 0xf224, 0x8180, 0x3cd9, 0x8483, 0x9d9c, 0x0, 0x1);
        gbc.writeMem(0x3c50, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf224);
        EXPECT(gbc.pc(), 0x3c52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0292
        gbc.setState(0x232f, 0x5c51, 0x8d80, 0x2b7c, 0x6169, 0x6858, 0x1, 0x1);
        gbc.writeMem(0x232f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5c51);
        EXPECT(gbc.pc(), 0x2331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0293
        gbc.setState(0x8eb0, 0x3b58, 0xcba0, 0xca7, 0xd73, 0x1eea, 0x1, 0x0);
        gbc.writeMem(0x8eb0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3b58);
        EXPECT(gbc.pc(), 0x8eb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eb0), 0xcb);
        EXPECT(gbc.readMem(0x8eb1), 0x17);
        // CB 17 0294
        gbc.setState(0xdad8, 0x1f08, 0x1410, 0xbf22, 0x92ed, 0xb1a3, 0x0, 0x1);
        gbc.writeMem(0xdad8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1f08);
        EXPECT(gbc.pc(), 0xdada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdad8), 0xcb);
        EXPECT(gbc.readMem(0xdad9), 0x17);
        // CB 17 0295
        gbc.setState(0xcf7, 0x4a69, 0x3de0, 0xdf45, 0xf1ca, 0x2c2e, 0x1, 0x0);
        gbc.writeMem(0xcf7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4a69);
        EXPECT(gbc.pc(), 0xcf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0296
        gbc.setState(0x33f7, 0xbb62, 0xafa0, 0x6d4d, 0xe643, 0xbaca, 0x1, 0x0);
        gbc.writeMem(0x33f7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbb62);
        EXPECT(gbc.pc(), 0x33f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0297
        gbc.setState(0x81fc, 0xabf8, 0x58e0, 0xdb8, 0xad50, 0xca, 0x0, 0x1);
        gbc.writeMem(0x81fc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xabf8);
        EXPECT(gbc.pc(), 0x81fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81fc), 0xcb);
        EXPECT(gbc.readMem(0x81fd), 0x17);
        // CB 17 0298
        gbc.setState(0x2df4, 0x3774, 0x7d0, 0xb699, 0xb9f2, 0xb77e, 0x0, 0x0);
        gbc.writeMem(0x2df4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3774);
        EXPECT(gbc.pc(), 0x2df6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0299
        gbc.setState(0x43fc, 0xe692, 0xecc0, 0xaf9b, 0xd5d6, 0xff3d, 0x1, 0x0);
        gbc.writeMem(0x43fc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe692);
        EXPECT(gbc.pc(), 0x43fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 029B
        gbc.setState(0xf3a, 0x2b35, 0x6550, 0xf840, 0x743a, 0x6919, 0x1, 0x0);
        gbc.writeMem(0xf3a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2b35);
        EXPECT(gbc.pc(), 0xf3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 029C
        gbc.setState(0x4c78, 0xcf0b, 0x2de0, 0x98c1, 0x5dda, 0x3682, 0x1, 0x0);
        gbc.writeMem(0x4c78, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xcf0b);
        EXPECT(gbc.pc(), 0x4c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 029D
        gbc.setState(0x3c05, 0x9a9b, 0x540, 0x6797, 0x3dae, 0xfeb6, 0x0, 0x1);
        gbc.writeMem(0x3c05, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9a9b);
        EXPECT(gbc.pc(), 0x3c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 029E
        gbc.setState(0x37cf, 0x46d8, 0x64a0, 0x93a, 0xa1b, 0x720f, 0x0, 0x0);
        gbc.writeMem(0x37cf, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x46d8);
        EXPECT(gbc.pc(), 0x37d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 029F
        gbc.setState(0x2ee, 0x3f4, 0x1810, 0x89e3, 0xc5d0, 0x76c0, 0x1, 0x1);
        gbc.writeMem(0x2ee, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3f4);
        EXPECT(gbc.pc(), 0x2f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02A0
        gbc.setState(0xd3bd, 0xbe88, 0xaa90, 0xc23f, 0x1c9e, 0x2aec, 0x1, 0x1);
        gbc.writeMem(0xd3bd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xbe88);
        EXPECT(gbc.pc(), 0xd3bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3bd), 0xcb);
        EXPECT(gbc.readMem(0xd3be), 0x17);
        // CB 17 02A1
        gbc.setState(0x4ac3, 0xd64b, 0xcbc0, 0xf6c2, 0xfa42, 0x4f3c, 0x0, 0x1);
        gbc.writeMem(0x4ac3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd64b);
        EXPECT(gbc.pc(), 0x4ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02A2
        gbc.setState(0xc7ef, 0x8434, 0xbd10, 0xec82, 0xb1eb, 0x960c, 0x1, 0x0);
        gbc.writeMem(0xc7ef, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8434);
        EXPECT(gbc.pc(), 0xc7f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ef), 0xcb);
        EXPECT(gbc.readMem(0xc7f0), 0x17);
        // CB 17 02A3
        gbc.setState(0xbcf7, 0xe0c6, 0x44c0, 0xe57, 0x71eb, 0xb8ee, 0x1, 0x1);
        gbc.writeMem(0xbcf7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe0c6);
        EXPECT(gbc.pc(), 0xbcf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcf7), 0xcb);
        EXPECT(gbc.readMem(0xbcf8), 0x17);
        // CB 17 02A4
        gbc.setState(0x93da, 0xf0f4, 0x4de0, 0xf50e, 0xaea0, 0x56f2, 0x1, 0x0);
        gbc.writeMem(0x93da, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf0f4);
        EXPECT(gbc.pc(), 0x93dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93da), 0xcb);
        EXPECT(gbc.readMem(0x93db), 0x17);
        // CB 17 02A5
        gbc.setState(0xc61f, 0x258b, 0x5f60, 0x2a4, 0xbb7d, 0x75a8, 0x1, 0x0);
        gbc.writeMem(0xc61f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x258b);
        EXPECT(gbc.pc(), 0xc621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61f), 0xcb);
        EXPECT(gbc.readMem(0xc620), 0x17);
        // CB 17 02A6
        gbc.setState(0xc7fb, 0xd003, 0x8380, 0xf3f5, 0x7307, 0x7e59, 0x1, 0x0);
        gbc.writeMem(0xc7fb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd003);
        EXPECT(gbc.pc(), 0xc7fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7fb), 0xcb);
        EXPECT(gbc.readMem(0xc7fc), 0x17);
        // CB 17 02A7
        gbc.setState(0xb6cb, 0xa532, 0x2010, 0xc0c1, 0x2a81, 0x34f1, 0x0, 0x1);
        gbc.writeMem(0xb6cb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa532);
        EXPECT(gbc.pc(), 0xb6cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6cb), 0xcb);
        EXPECT(gbc.readMem(0xb6cc), 0x17);
        // CB 17 02A8
        gbc.setState(0x6001, 0xb29f, 0xda80, 0xc654, 0x1644, 0x7e1, 0x0, 0x0);
        gbc.writeMem(0x6001, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb29f);
        EXPECT(gbc.pc(), 0x6003);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02A9
        gbc.setState(0x318e, 0x7da0, 0x8ed0, 0xefff, 0x200f, 0x87d3, 0x1, 0x1);
        gbc.writeMem(0x318e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7da0);
        EXPECT(gbc.pc(), 0x3190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02AA
        gbc.setState(0x9c8f, 0x5216, 0xf1c0, 0x4d47, 0xd96f, 0x9d7d, 0x1, 0x1);
        gbc.writeMem(0x9c8f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5216);
        EXPECT(gbc.pc(), 0x9c91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c8f), 0xcb);
        EXPECT(gbc.readMem(0x9c90), 0x17);
        // CB 17 02AB
        gbc.setState(0x2645, 0xe98, 0x5d50, 0x58f0, 0x993c, 0xb7ae, 0x0, 0x0);
        gbc.writeMem(0x2645, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe98);
        EXPECT(gbc.pc(), 0x2647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02AC
        gbc.setState(0x2b28, 0xa063, 0xd4e0, 0xb55, 0x46e4, 0x3e9c, 0x0, 0x0);
        gbc.writeMem(0x2b28, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa063);
        EXPECT(gbc.pc(), 0x2b2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02AD
        gbc.setState(0x9c02, 0xb132, 0x6870, 0x864e, 0x2181, 0xc803, 0x1, 0x0);
        gbc.writeMem(0x9c02, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb132);
        EXPECT(gbc.pc(), 0x9c04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c02), 0xcb);
        EXPECT(gbc.readMem(0x9c03), 0x17);
        // CB 17 02AE
        gbc.setState(0xc499, 0x7776, 0x78a0, 0x45d8, 0x4baf, 0xae42, 0x0, 0x1);
        gbc.writeMem(0xc499, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7776);
        EXPECT(gbc.pc(), 0xc49b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc499), 0xcb);
        EXPECT(gbc.readMem(0xc49a), 0x17);
        // CB 17 02AF
        gbc.setState(0x6cf4, 0x5be9, 0x5c40, 0x820c, 0xdb2d, 0x42ba, 0x0, 0x1);
        gbc.writeMem(0x6cf4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5be9);
        EXPECT(gbc.pc(), 0x6cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02B1
        gbc.setState(0xde66, 0x87a9, 0x4120, 0x31d3, 0x7dbd, 0xe615, 0x0, 0x0);
        gbc.writeMem(0xde66, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x87a9);
        EXPECT(gbc.pc(), 0xde68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde66), 0xcb);
        EXPECT(gbc.readMem(0xde67), 0x17);
        // CB 17 02B2
        gbc.setState(0x3af1, 0xdf7e, 0x1c40, 0xffcc, 0x26cb, 0x9e14, 0x0, 0x0);
        gbc.writeMem(0x3af1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdf7e);
        EXPECT(gbc.pc(), 0x3af3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02B3
        gbc.setState(0xa252, 0xa718, 0xf930, 0x5e06, 0x78b0, 0xf100, 0x0, 0x1);
        gbc.writeMem(0xa252, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa718);
        EXPECT(gbc.pc(), 0xa254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa252), 0xcb);
        EXPECT(gbc.readMem(0xa253), 0x17);
        // CB 17 02B4
        gbc.setState(0xdc90, 0xba54, 0x5eb0, 0xfd42, 0x17cf, 0x6f04, 0x0, 0x1);
        gbc.writeMem(0xdc90, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xba54);
        EXPECT(gbc.pc(), 0xdc92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc90), 0xcb);
        EXPECT(gbc.readMem(0xdc91), 0x17);
        // CB 17 02B6
        gbc.setState(0x973d, 0xe260, 0x4170, 0xdd1f, 0x54dd, 0x3a3b, 0x1, 0x0);
        gbc.writeMem(0x973d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe260);
        EXPECT(gbc.pc(), 0x973f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x973d), 0xcb);
        EXPECT(gbc.readMem(0x973e), 0x17);
        // CB 17 02B7
        gbc.setState(0x6ed8, 0x1a4, 0x2ba0, 0x77dd, 0x5183, 0xd0f6, 0x1, 0x0);
        gbc.writeMem(0x6ed8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x1a4);
        EXPECT(gbc.pc(), 0x6eda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02B8
        gbc.setState(0x160e, 0xafe, 0xc650, 0x40ee, 0x89ea, 0x928d, 0x0, 0x0);
        gbc.writeMem(0x160e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xafe);
        EXPECT(gbc.pc(), 0x1610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02B9
        gbc.setState(0xcf5c, 0x88f2, 0x3180, 0x3345, 0xc19d, 0x398a, 0x1, 0x1);
        gbc.writeMem(0xcf5c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x88f2);
        EXPECT(gbc.pc(), 0xcf5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf5c), 0xcb);
        EXPECT(gbc.readMem(0xcf5d), 0x17);
        // CB 17 02BA
        gbc.setState(0xe0ce, 0x59a1, 0x7490, 0x7cb5, 0x6f17, 0x107c, 0x0, 0x1);
        gbc.writeMem(0xe0ce, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x59a1);
        EXPECT(gbc.pc(), 0xe0d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ce), 0xcb);
        EXPECT(gbc.readMem(0xe0cf), 0x17);
        // CB 17 02BB
        gbc.setState(0x21d, 0x3d9c, 0xe2a0, 0x213e, 0xd394, 0xa8ee, 0x0, 0x0);
        gbc.writeMem(0x21d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3d9c);
        EXPECT(gbc.pc(), 0x21f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02BC
        gbc.setState(0xc58d, 0xcdbe, 0xbdb0, 0xc774, 0x2ff0, 0x423b, 0x1, 0x1);
        gbc.writeMem(0xc58d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xcdbe);
        EXPECT(gbc.pc(), 0xc58f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc58d), 0xcb);
        EXPECT(gbc.readMem(0xc58e), 0x17);
        // CB 17 02BD
        gbc.setState(0x60e9, 0xa611, 0xe100, 0xd7f1, 0x80ac, 0x2e46, 0x0, 0x1);
        gbc.writeMem(0x60e9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa611);
        EXPECT(gbc.pc(), 0x60eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02BE
        gbc.setState(0x33fc, 0x48cc, 0x2e30, 0x15f2, 0xc843, 0x4605, 0x0, 0x0);
        gbc.writeMem(0x33fc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x48cc);
        EXPECT(gbc.pc(), 0x33fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02BF
        gbc.setState(0x5253, 0x6497, 0x5d40, 0x5b64, 0x7247, 0xade3, 0x1, 0x0);
        gbc.writeMem(0x5253, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6497);
        EXPECT(gbc.pc(), 0x5255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02C0
        gbc.setState(0xad13, 0x5472, 0x9320, 0x76e5, 0x28af, 0x9d65, 0x0, 0x0);
        gbc.writeMem(0xad13, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5472);
        EXPECT(gbc.pc(), 0xad15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad13), 0xcb);
        EXPECT(gbc.readMem(0xad14), 0x17);
        // CB 17 02C1
        gbc.setState(0xebe1, 0x6035, 0x7860, 0xd6da, 0x6515, 0xdaf4, 0x0, 0x1);
        gbc.writeMem(0xebe1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6035);
        EXPECT(gbc.pc(), 0xebe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe1), 0xcb);
        EXPECT(gbc.readMem(0xebe2), 0x17);
        // CB 17 02C2
        gbc.setState(0x6038, 0xbedc, 0xb9f0, 0xfa89, 0x48b7, 0xae43, 0x1, 0x1);
        gbc.writeMem(0x6038, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xbedc);
        EXPECT(gbc.pc(), 0x603a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02C3
        gbc.setState(0xcd8, 0x6900, 0xaa90, 0x1d91, 0x905d, 0x4a2a, 0x0, 0x0);
        gbc.writeMem(0xcd8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6900);
        EXPECT(gbc.pc(), 0xcda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02C4
        gbc.setState(0x58dd, 0x44d1, 0xee80, 0x720f, 0x33b2, 0xf5a0, 0x0, 0x0);
        gbc.writeMem(0x58dd, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x44d1);
        EXPECT(gbc.pc(), 0x58df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02C5
        gbc.setState(0x82e, 0x6061, 0x660, 0xf681, 0x908, 0xecb1, 0x1, 0x1);
        gbc.writeMem(0x82e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6061);
        EXPECT(gbc.pc(), 0x830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02C6
        gbc.setState(0xedc3, 0xe9d4, 0x2aa0, 0x8b0, 0x5684, 0xc8d4, 0x0, 0x1);
        gbc.writeMem(0xedc3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe9d4);
        EXPECT(gbc.pc(), 0xedc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc3), 0xcb);
        EXPECT(gbc.readMem(0xedc4), 0x17);
        // CB 17 02C7
        gbc.setState(0xe1f1, 0x2800, 0xf060, 0x4b61, 0xcf4f, 0x9f6c, 0x1, 0x1);
        gbc.writeMem(0xe1f1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2800);
        EXPECT(gbc.pc(), 0xe1f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1f1), 0xcb);
        EXPECT(gbc.readMem(0xe1f2), 0x17);
        // CB 17 02C8
        gbc.setState(0x8ce7, 0x25db, 0x5a10, 0x9c55, 0xc670, 0xa4e4, 0x0, 0x0);
        gbc.writeMem(0x8ce7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x25db);
        EXPECT(gbc.pc(), 0x8ce9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce7), 0xcb);
        EXPECT(gbc.readMem(0x8ce8), 0x17);
        // CB 17 02C9
        gbc.setState(0xa3f7, 0xe4c3, 0x3290, 0x810, 0xead4, 0xf75c, 0x1, 0x1);
        gbc.writeMem(0xa3f7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe4c3);
        EXPECT(gbc.pc(), 0xa3f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3f7), 0xcb);
        EXPECT(gbc.readMem(0xa3f8), 0x17);
        // CB 17 02CA
        gbc.setState(0xbcc4, 0x4cc9, 0x9a40, 0x8eae, 0xf1f4, 0xff92, 0x0, 0x0);
        gbc.writeMem(0xbcc4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4cc9);
        EXPECT(gbc.pc(), 0xbcc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc4), 0xcb);
        EXPECT(gbc.readMem(0xbcc5), 0x17);
        // CB 17 02CB
        gbc.setState(0xc92a, 0xbdf7, 0xeb0, 0x2509, 0x6702, 0xb447, 0x1, 0x1);
        gbc.writeMem(0xc92a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbdf7);
        EXPECT(gbc.pc(), 0xc92c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc92a), 0xcb);
        EXPECT(gbc.readMem(0xc92b), 0x17);
        // CB 17 02CC
        gbc.setState(0xbf80, 0xc9de, 0x9220, 0xbc1, 0xc448, 0x9d4a, 0x1, 0x1);
        gbc.writeMem(0xbf80, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc9de);
        EXPECT(gbc.pc(), 0xbf82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf80), 0xcb);
        EXPECT(gbc.readMem(0xbf81), 0x17);
        // CB 17 02CD
        gbc.setState(0x5653, 0xdd97, 0x9e10, 0x2de8, 0x5c71, 0x69a4, 0x1, 0x0);
        gbc.writeMem(0x5653, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xdd97);
        EXPECT(gbc.pc(), 0x5655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02CE
        gbc.setState(0x272c, 0x503, 0x95d0, 0x198b, 0xc2c5, 0xb241, 0x1, 0x0);
        gbc.writeMem(0x272c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x503);
        EXPECT(gbc.pc(), 0x272e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02CF
        gbc.setState(0x3d3d, 0xf050, 0x9b90, 0xdf9e, 0x9dce, 0xbceb, 0x1, 0x1);
        gbc.writeMem(0x3d3d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf050);
        EXPECT(gbc.pc(), 0x3d3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02D0
        gbc.setState(0xcabe, 0xa1c7, 0x11b0, 0x61c6, 0x1027, 0xeabe, 0x0, 0x0);
        gbc.writeMem(0xcabe, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa1c7);
        EXPECT(gbc.pc(), 0xcac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcabe), 0xcb);
        EXPECT(gbc.readMem(0xcabf), 0x17);
        // CB 17 02D1
        gbc.setState(0x1a0, 0xcbad, 0x1b70, 0x6ebb, 0x7933, 0x74bf, 0x0, 0x1);
        gbc.writeMem(0x1a0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xcbad);
        EXPECT(gbc.pc(), 0x1a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02D2
        gbc.setState(0x7aa1, 0xc1fe, 0x7970, 0xc32d, 0x6eb5, 0x8935, 0x0, 0x1);
        gbc.writeMem(0x7aa1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc1fe);
        EXPECT(gbc.pc(), 0x7aa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02D3
        gbc.setState(0xea31, 0x9afd, 0x9710, 0x724c, 0xcb03, 0x532d, 0x1, 0x0);
        gbc.writeMem(0xea31, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9afd);
        EXPECT(gbc.pc(), 0xea33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea31), 0xcb);
        EXPECT(gbc.readMem(0xea32), 0x17);
        // CB 17 02D4
        gbc.setState(0x7718, 0xad6, 0xa910, 0x1488, 0xae4b, 0x419, 0x1, 0x0);
        gbc.writeMem(0x7718, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xad6);
        EXPECT(gbc.pc(), 0x771a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02D5
        gbc.setState(0xc0b6, 0x7ebf, 0xb0f0, 0x5d7f, 0x94f, 0xbecc, 0x0, 0x0);
        gbc.writeMem(0xc0b6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7ebf);
        EXPECT(gbc.pc(), 0xc0b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0b6), 0xcb);
        EXPECT(gbc.readMem(0xc0b7), 0x17);
        // CB 17 02D7
        gbc.setState(0x4317, 0xf327, 0x38d0, 0xff07, 0xb1ce, 0xf5dd, 0x0, 0x0);
        gbc.writeMem(0x4317, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf327);
        EXPECT(gbc.pc(), 0x4319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02D8
        gbc.setState(0x4f2f, 0xf7e1, 0xb7f0, 0x23d, 0x25e7, 0x7366, 0x1, 0x0);
        gbc.writeMem(0x4f2f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf7e1);
        EXPECT(gbc.pc(), 0x4f31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02D9
        gbc.setState(0x6454, 0xdb74, 0xec80, 0x3f2f, 0x2b1f, 0x8b1a, 0x1, 0x1);
        gbc.writeMem(0x6454, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xdb74);
        EXPECT(gbc.pc(), 0x6456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02DA
        gbc.setState(0x579a, 0xe64d, 0x1d90, 0xc5bf, 0x9e8f, 0x3d11, 0x1, 0x0);
        gbc.writeMem(0x579a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe64d);
        EXPECT(gbc.pc(), 0x579c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02DB
        gbc.setState(0x86f0, 0xd352, 0x75f0, 0x7c4, 0xd60a, 0x58df, 0x0, 0x1);
        gbc.writeMem(0x86f0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd352);
        EXPECT(gbc.pc(), 0x86f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f0), 0xcb);
        EXPECT(gbc.readMem(0x86f1), 0x17);
        // CB 17 02DC
        gbc.setState(0xec31, 0x2bda, 0xa2c0, 0xe36c, 0x8b6e, 0x6838, 0x0, 0x1);
        gbc.writeMem(0xec31, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2bda);
        EXPECT(gbc.pc(), 0xec33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec31), 0xcb);
        EXPECT(gbc.readMem(0xec32), 0x17);
        // CB 17 02DD
        gbc.setState(0x77ed, 0xafc3, 0xff20, 0x3708, 0xbfef, 0xe9b5, 0x1, 0x0);
        gbc.writeMem(0x77ed, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xafc3);
        EXPECT(gbc.pc(), 0x77ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02DE
        gbc.setState(0x7a28, 0x2424, 0xb450, 0xdcc0, 0x70c6, 0x6631, 0x1, 0x1);
        gbc.writeMem(0x7a28, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2424);
        EXPECT(gbc.pc(), 0x7a2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02DF
        gbc.setState(0xad0a, 0x9339, 0x49c0, 0x6b1e, 0x972e, 0x4bea, 0x0, 0x1);
        gbc.writeMem(0xad0a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9339);
        EXPECT(gbc.pc(), 0xad0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0a), 0xcb);
        EXPECT(gbc.readMem(0xad0b), 0x17);
        // CB 17 02E0
        gbc.setState(0x2e4b, 0xc1c6, 0x71c0, 0x2f85, 0xed26, 0xdb6c, 0x1, 0x1);
        gbc.writeMem(0x2e4b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc1c6);
        EXPECT(gbc.pc(), 0x2e4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02E1
        gbc.setState(0xdeff, 0x1390, 0x8260, 0xb0bc, 0xd429, 0xd36, 0x1, 0x1);
        gbc.writeMem(0xdeff, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1390);
        EXPECT(gbc.pc(), 0xdf01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeff), 0xcb);
        EXPECT(gbc.readMem(0xdf00), 0x17);
        // CB 17 02E2
        gbc.setState(0xb3e1, 0x13c8, 0x2630, 0x52e3, 0x98e9, 0xade, 0x1, 0x1);
        gbc.writeMem(0xb3e1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x13c8);
        EXPECT(gbc.pc(), 0xb3e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3e1), 0xcb);
        EXPECT(gbc.readMem(0xb3e2), 0x17);
        // CB 17 02E3
        gbc.setState(0x64d8, 0x98db, 0x6160, 0x1c6, 0xfea, 0x5811, 0x1, 0x1);
        gbc.writeMem(0x64d8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x98db);
        EXPECT(gbc.pc(), 0x64da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02E4
        gbc.setState(0xc1a8, 0xf31, 0x5890, 0xfb2e, 0x271e, 0xd0e, 0x1, 0x1);
        gbc.writeMem(0xc1a8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf31);
        EXPECT(gbc.pc(), 0xc1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a8), 0xcb);
        EXPECT(gbc.readMem(0xc1a9), 0x17);
        // CB 17 02E5
        gbc.setState(0xa038, 0xac36, 0xce90, 0x2d1c, 0x224d, 0xac40, 0x1, 0x1);
        gbc.writeMem(0xa038, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xac36);
        EXPECT(gbc.pc(), 0xa03a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa038), 0xcb);
        EXPECT(gbc.readMem(0xa039), 0x17);
        // CB 17 02E6
        gbc.setState(0x3b6c, 0x72b, 0x54e0, 0x1c2, 0xdc4, 0xabf0, 0x0, 0x0);
        gbc.writeMem(0x3b6c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x72b);
        EXPECT(gbc.pc(), 0x3b6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02E7
        gbc.setState(0x6be6, 0x81a8, 0xe820, 0x5d40, 0xa3f5, 0xa4b5, 0x1, 0x0);
        gbc.writeMem(0x6be6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x81a8);
        EXPECT(gbc.pc(), 0x6be8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02EA
        gbc.setState(0xa003, 0x79ef, 0x7030, 0xe4cd, 0x7aee, 0x6920, 0x1, 0x1);
        gbc.writeMem(0xa003, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x79ef);
        EXPECT(gbc.pc(), 0xa005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa003), 0xcb);
        EXPECT(gbc.readMem(0xa004), 0x17);
        // CB 17 02EB
        gbc.setState(0x99a8, 0xcb38, 0x1060, 0x2fcf, 0x8632, 0x71e5, 0x1, 0x0);
        gbc.writeMem(0x99a8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcb38);
        EXPECT(gbc.pc(), 0x99aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99a8), 0xcb);
        EXPECT(gbc.readMem(0x99a9), 0x17);
        // CB 17 02EC
        gbc.setState(0x1798, 0x37bc, 0x25d0, 0x77a6, 0x29e9, 0xc517, 0x0, 0x0);
        gbc.writeMem(0x1798, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x37bc);
        EXPECT(gbc.pc(), 0x179a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02ED
        gbc.setState(0x1d47, 0x1efa, 0x6d50, 0x46b9, 0xadf0, 0x30f6, 0x1, 0x1);
        gbc.writeMem(0x1d47, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x1efa);
        EXPECT(gbc.pc(), 0x1d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02EE
        gbc.setState(0xe6e3, 0x729a, 0xc140, 0x8a89, 0xfcff, 0xcb36, 0x0, 0x0);
        gbc.writeMem(0xe6e3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x729a);
        EXPECT(gbc.pc(), 0xe6e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e3), 0xcb);
        EXPECT(gbc.readMem(0xe6e4), 0x17);
        // CB 17 02EF
        gbc.setState(0x4944, 0x98f4, 0x5650, 0x7dc8, 0xa81d, 0xfd01, 0x0, 0x0);
        gbc.writeMem(0x4944, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x98f4);
        EXPECT(gbc.pc(), 0x4946);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02F1
        gbc.setState(0xee99, 0x5a37, 0x8e80, 0xc66b, 0xf7d7, 0x3bb9, 0x1, 0x0);
        gbc.writeMem(0xee99, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5a37);
        EXPECT(gbc.pc(), 0xee9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee99), 0xcb);
        EXPECT(gbc.readMem(0xee9a), 0x17);
        // CB 17 02F2
        gbc.setState(0x98c6, 0x3b98, 0x8510, 0x992c, 0xb2ae, 0xb655, 0x0, 0x1);
        gbc.writeMem(0x98c6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3b98);
        EXPECT(gbc.pc(), 0x98c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c6), 0xcb);
        EXPECT(gbc.readMem(0x98c7), 0x17);
        // CB 17 02F3
        gbc.setState(0x98b4, 0xe06a, 0x9eb0, 0x75a4, 0x908d, 0xa076, 0x0, 0x1);
        gbc.writeMem(0x98b4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe06a);
        EXPECT(gbc.pc(), 0x98b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98b4), 0xcb);
        EXPECT(gbc.readMem(0x98b5), 0x17);
        // CB 17 02F4
        gbc.setState(0xc682, 0x753b, 0xdb90, 0x45ab, 0x4330, 0xd56a, 0x0, 0x1);
        gbc.writeMem(0xc682, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x753b);
        EXPECT(gbc.pc(), 0xc684);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc682), 0xcb);
        EXPECT(gbc.readMem(0xc683), 0x17);
        // CB 17 02F5
        gbc.setState(0xa236, 0xcd37, 0xb1a0, 0xc8e5, 0xe2f2, 0x18c8, 0x0, 0x0);
        gbc.writeMem(0xa236, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xcd37);
        EXPECT(gbc.pc(), 0xa238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa236), 0xcb);
        EXPECT(gbc.readMem(0xa237), 0x17);
        // CB 17 02F6
        gbc.setState(0xc07b, 0xd13, 0xf9b0, 0x87c4, 0x52d4, 0x6361, 0x1, 0x1);
        gbc.writeMem(0xc07b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd13);
        EXPECT(gbc.pc(), 0xc07d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc07b), 0xcb);
        EXPECT(gbc.readMem(0xc07c), 0x17);
        // CB 17 02F7
        gbc.setState(0x88f3, 0x61e7, 0x59b0, 0x40d0, 0x4102, 0x7827, 0x1, 0x1);
        gbc.writeMem(0x88f3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x61e7);
        EXPECT(gbc.pc(), 0x88f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f3), 0xcb);
        EXPECT(gbc.readMem(0x88f4), 0x17);
        // CB 17 02F8
        gbc.setState(0x4eae, 0x2e10, 0xe300, 0xec00, 0xc5d7, 0x2b75, 0x0, 0x1);
        gbc.writeMem(0x4eae, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2e10);
        EXPECT(gbc.pc(), 0x4eb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02F9
        gbc.setState(0x45b6, 0xd016, 0xd40, 0xcbf5, 0xc347, 0xb5ff, 0x0, 0x0);
        gbc.writeMem(0x45b6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd016);
        EXPECT(gbc.pc(), 0x45b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02FA
        gbc.setState(0x92f, 0x6b5b, 0x4840, 0x3d40, 0xc94, 0x4480, 0x0, 0x0);
        gbc.writeMem(0x92f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6b5b);
        EXPECT(gbc.pc(), 0x931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 02FB
        gbc.setState(0xe934, 0x25e3, 0x6ef0, 0xa49c, 0x94a3, 0xa2ad, 0x1, 0x0);
        gbc.writeMem(0xe934, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x25e3);
        EXPECT(gbc.pc(), 0xe936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe934), 0xcb);
        EXPECT(gbc.readMem(0xe935), 0x17);
        // CB 17 02FC
        gbc.setState(0xb3be, 0x51f4, 0x8660, 0xa3f3, 0xd4be, 0xa2ce, 0x0, 0x1);
        gbc.writeMem(0xb3be, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x51f4);
        EXPECT(gbc.pc(), 0xb3c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3be), 0xcb);
        EXPECT(gbc.readMem(0xb3bf), 0x17);
        // CB 17 02FD
        gbc.setState(0xcd9b, 0x8947, 0x1650, 0x7867, 0x3773, 0xe517, 0x1, 0x1);
        gbc.writeMem(0xcd9b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8947);
        EXPECT(gbc.pc(), 0xcd9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd9b), 0xcb);
        EXPECT(gbc.readMem(0xcd9c), 0x17);
        // CB 17 02FE
        gbc.setState(0x7103, 0x2ce5, 0xeda0, 0xc32a, 0x1dfd, 0xc5f7, 0x0, 0x0);
        gbc.writeMem(0x7103, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2ce5);
        EXPECT(gbc.pc(), 0x7105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 02FF
        gbc.setState(0xd718, 0xda92, 0x3cb0, 0x6b9e, 0x587e, 0xa8b3, 0x1, 0x0);
        gbc.writeMem(0xd718, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xda92);
        EXPECT(gbc.pc(), 0xd71a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd718), 0xcb);
        EXPECT(gbc.readMem(0xd719), 0x17);
        // CB 17 0300
        gbc.setState(0x45b9, 0xb34f, 0xf160, 0x73c6, 0x38d8, 0x39bd, 0x0, 0x0);
        gbc.writeMem(0x45b9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb34f);
        EXPECT(gbc.pc(), 0x45bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0301
        gbc.setState(0x37c0, 0x8530, 0x8c90, 0xbfe0, 0xe5c2, 0x25d3, 0x0, 0x0);
        gbc.writeMem(0x37c0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8530);
        EXPECT(gbc.pc(), 0x37c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0302
        gbc.setState(0x84c4, 0x40f6, 0x20f0, 0xf27e, 0xd1de, 0x68ad, 0x1, 0x0);
        gbc.writeMem(0x84c4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x40f6);
        EXPECT(gbc.pc(), 0x84c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c4), 0xcb);
        EXPECT(gbc.readMem(0x84c5), 0x17);
        // CB 17 0303
        gbc.setState(0xed62, 0x4d83, 0xebc0, 0xd9a, 0x9d13, 0x8234, 0x1, 0x1);
        gbc.writeMem(0xed62, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4d83);
        EXPECT(gbc.pc(), 0xed64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed62), 0xcb);
        EXPECT(gbc.readMem(0xed63), 0x17);
        // CB 17 0304
        gbc.setState(0x511c, 0xc337, 0xd8e0, 0xbad6, 0xb178, 0x78b3, 0x1, 0x0);
        gbc.writeMem(0x511c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc337);
        EXPECT(gbc.pc(), 0x511e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0305
        gbc.setState(0x79aa, 0x659c, 0x81d0, 0xe50e, 0xa3ab, 0x8222, 0x1, 0x0);
        gbc.writeMem(0x79aa, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x659c);
        EXPECT(gbc.pc(), 0x79ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0306
        gbc.setState(0xdab, 0x42a8, 0x5260, 0xa34a, 0xca0, 0xb65c, 0x1, 0x0);
        gbc.writeMem(0xdab, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x42a8);
        EXPECT(gbc.pc(), 0xdad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0307
        gbc.setState(0x85b3, 0x8d5c, 0x5420, 0x4d01, 0xbb77, 0x4852, 0x1, 0x0);
        gbc.writeMem(0x85b3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8d5c);
        EXPECT(gbc.pc(), 0x85b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b3), 0xcb);
        EXPECT(gbc.readMem(0x85b4), 0x17);
        // CB 17 0308
        gbc.setState(0x601e, 0xed2e, 0xdff0, 0x907, 0xce1b, 0x63e0, 0x0, 0x0);
        gbc.writeMem(0x601e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xed2e);
        EXPECT(gbc.pc(), 0x6020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0309
        gbc.setState(0x2771, 0xe55f, 0x6110, 0x6f08, 0x11bf, 0x601c, 0x1, 0x0);
        gbc.writeMem(0x2771, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe55f);
        EXPECT(gbc.pc(), 0x2773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 030A
        gbc.setState(0x4cda, 0xfe18, 0x580, 0xd8df, 0x33d7, 0xd826, 0x1, 0x1);
        gbc.writeMem(0x4cda, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xfe18);
        EXPECT(gbc.pc(), 0x4cdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 030B
        gbc.setState(0x6cd3, 0x3c4b, 0x14d0, 0x6421, 0xa524, 0xd5b5, 0x0, 0x0);
        gbc.writeMem(0x6cd3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3c4b);
        EXPECT(gbc.pc(), 0x6cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 030C
        gbc.setState(0xaeab, 0xec96, 0x59f0, 0xf93a, 0xb2b8, 0x5c9c, 0x0, 0x1);
        gbc.writeMem(0xaeab, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xec96);
        EXPECT(gbc.pc(), 0xaead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeab), 0xcb);
        EXPECT(gbc.readMem(0xaeac), 0x17);
        // CB 17 030D
        gbc.setState(0x2b79, 0xefa6, 0xfe50, 0x2573, 0x7bd5, 0x7f7a, 0x1, 0x1);
        gbc.writeMem(0x2b79, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xefa6);
        EXPECT(gbc.pc(), 0x2b7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 030E
        gbc.setState(0x372b, 0x481a, 0xee40, 0x9614, 0xb6, 0x137c, 0x0, 0x1);
        gbc.writeMem(0x372b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x481a);
        EXPECT(gbc.pc(), 0x372d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 030F
        gbc.setState(0x6c25, 0x928d, 0x8460, 0xe643, 0x124d, 0x87cd, 0x1, 0x1);
        gbc.writeMem(0x6c25, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x928d);
        EXPECT(gbc.pc(), 0x6c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0310
        gbc.setState(0xead8, 0xa499, 0xcb60, 0xdecb, 0xa878, 0x9e2e, 0x0, 0x1);
        gbc.writeMem(0xead8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa499);
        EXPECT(gbc.pc(), 0xeada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead8), 0xcb);
        EXPECT(gbc.readMem(0xead9), 0x17);
        // CB 17 0312
        gbc.setState(0x950a, 0xf6b2, 0x1d50, 0xc72c, 0xbc61, 0xf6b0, 0x1, 0x1);
        gbc.writeMem(0x950a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf6b2);
        EXPECT(gbc.pc(), 0x950c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x950a), 0xcb);
        EXPECT(gbc.readMem(0x950b), 0x17);
        // CB 17 0313
        gbc.setState(0x58f0, 0x226f, 0x8ec0, 0xdc7d, 0x8ee8, 0x2b0e, 0x1, 0x0);
        gbc.writeMem(0x58f0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x226f);
        EXPECT(gbc.pc(), 0x58f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0314
        gbc.setState(0x2897, 0x8be, 0x8bd0, 0x1e4, 0x6eed, 0xe65e, 0x1, 0x1);
        gbc.writeMem(0x2897, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8be);
        EXPECT(gbc.pc(), 0x2899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0315
        gbc.setState(0x7109, 0x2925, 0xfe10, 0x1221, 0x51f8, 0x4db7, 0x1, 0x0);
        gbc.writeMem(0x7109, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2925);
        EXPECT(gbc.pc(), 0x710b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0316
        gbc.setState(0x44da, 0x6ef3, 0xf0c0, 0xb501, 0xdf31, 0xf6f1, 0x0, 0x0);
        gbc.writeMem(0x44da, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6ef3);
        EXPECT(gbc.pc(), 0x44dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0317
        gbc.setState(0xbf54, 0x2828, 0xe840, 0x959c, 0xf4ca, 0x1728, 0x0, 0x0);
        gbc.writeMem(0xbf54, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2828);
        EXPECT(gbc.pc(), 0xbf56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf54), 0xcb);
        EXPECT(gbc.readMem(0xbf55), 0x17);
        // CB 17 0318
        gbc.setState(0x15ce, 0x7aa6, 0x7a60, 0xc8fb, 0xc257, 0x7cd5, 0x1, 0x0);
        gbc.writeMem(0x15ce, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7aa6);
        EXPECT(gbc.pc(), 0x15d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0319
        gbc.setState(0x1da8, 0x4343, 0xb140, 0x3241, 0xfe3d, 0x3b9a, 0x1, 0x0);
        gbc.writeMem(0x1da8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4343);
        EXPECT(gbc.pc(), 0x1daa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 031A
        gbc.setState(0xc420, 0x5349, 0x4850, 0x7ac8, 0x9284, 0x593d, 0x0, 0x1);
        gbc.writeMem(0xc420, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5349);
        EXPECT(gbc.pc(), 0xc422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc420), 0xcb);
        EXPECT(gbc.readMem(0xc421), 0x17);
        // CB 17 031B
        gbc.setState(0x8ba4, 0x2d7b, 0x9d40, 0xc1db, 0xe30d, 0x9af0, 0x1, 0x1);
        gbc.writeMem(0x8ba4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2d7b);
        EXPECT(gbc.pc(), 0x8ba6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba4), 0xcb);
        EXPECT(gbc.readMem(0x8ba5), 0x17);
        // CB 17 031C
        gbc.setState(0x7996, 0x1c20, 0xfa70, 0xbb5f, 0xe80, 0x88c3, 0x1, 0x1);
        gbc.writeMem(0x7996, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x1c20);
        EXPECT(gbc.pc(), 0x7998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 031D
        gbc.setState(0x6432, 0x4924, 0xfe10, 0x7d41, 0x3049, 0x879a, 0x0, 0x0);
        gbc.writeMem(0x6432, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4924);
        EXPECT(gbc.pc(), 0x6434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 031E
        gbc.setState(0x94f3, 0xb026, 0x6d00, 0xfa2, 0x230c, 0x451, 0x1, 0x1);
        gbc.writeMem(0x94f3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb026);
        EXPECT(gbc.pc(), 0x94f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f3), 0xcb);
        EXPECT(gbc.readMem(0x94f4), 0x17);
        // CB 17 0320
        gbc.setState(0xd01, 0xf894, 0x41c0, 0x16b7, 0x725c, 0x77b7, 0x1, 0x0);
        gbc.writeMem(0xd01, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf894);
        EXPECT(gbc.pc(), 0xd03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0321
        gbc.setState(0x7261, 0xc277, 0x8280, 0xbafa, 0x23d9, 0x5e10, 0x0, 0x1);
        gbc.writeMem(0x7261, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc277);
        EXPECT(gbc.pc(), 0x7263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0322
        gbc.setState(0x8753, 0x34bf, 0xc2f0, 0x40ce, 0x2974, 0xadb0, 0x0, 0x1);
        gbc.writeMem(0x8753, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x34bf);
        EXPECT(gbc.pc(), 0x8755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8753), 0xcb);
        EXPECT(gbc.readMem(0x8754), 0x17);
        // CB 17 0323
        gbc.setState(0xc154, 0xf07, 0xe780, 0xc894, 0xe89, 0x980d, 0x0, 0x1);
        gbc.writeMem(0xc154, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf07);
        EXPECT(gbc.pc(), 0xc156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc154), 0xcb);
        EXPECT(gbc.readMem(0xc155), 0x17);
        // CB 17 0324
        gbc.setState(0x2728, 0x4ea2, 0x42a0, 0xf03c, 0xc059, 0x2733, 0x0, 0x0);
        gbc.writeMem(0x2728, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4ea2);
        EXPECT(gbc.pc(), 0x272a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0325
        gbc.setState(0x815d, 0xbe2c, 0x6570, 0x3d07, 0x7901, 0xa42a, 0x0, 0x1);
        gbc.writeMem(0x815d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xbe2c);
        EXPECT(gbc.pc(), 0x815f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x815d), 0xcb);
        EXPECT(gbc.readMem(0x815e), 0x17);
        // CB 17 0326
        gbc.setState(0x86ef, 0x6ddc, 0xb2e0, 0x9cf2, 0x84b, 0x1262, 0x1, 0x0);
        gbc.writeMem(0x86ef, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6ddc);
        EXPECT(gbc.pc(), 0x86f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ef), 0xcb);
        EXPECT(gbc.readMem(0x86f0), 0x17);
        // CB 17 0327
        gbc.setState(0xa44f, 0xcf55, 0x7c30, 0xcb4f, 0x685c, 0x5a49, 0x0, 0x0);
        gbc.writeMem(0xa44f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xcf55);
        EXPECT(gbc.pc(), 0xa451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa44f), 0xcb);
        EXPECT(gbc.readMem(0xa450), 0x17);
        // CB 17 0328
        gbc.setState(0x6850, 0xed68, 0x6fc0, 0xa14f, 0xdad5, 0x45b, 0x1, 0x0);
        gbc.writeMem(0x6850, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xed68);
        EXPECT(gbc.pc(), 0x6852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0329
        gbc.setState(0x5f5f, 0x102e, 0xf2d0, 0xfd70, 0x8d81, 0x5856, 0x1, 0x0);
        gbc.writeMem(0x5f5f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x102e);
        EXPECT(gbc.pc(), 0x5f61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 032A
        gbc.setState(0x3cd2, 0x3e8a, 0xd950, 0x1f43, 0x4a0b, 0xf381, 0x0, 0x1);
        gbc.writeMem(0x3cd2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3e8a);
        EXPECT(gbc.pc(), 0x3cd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 032B
        gbc.setState(0x1c71, 0x21cc, 0x5aa0, 0xa92a, 0xd983, 0x5479, 0x1, 0x1);
        gbc.writeMem(0x1c71, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x21cc);
        EXPECT(gbc.pc(), 0x1c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 032C
        gbc.setState(0x7a40, 0x114c, 0x8bb0, 0x32de, 0xbb67, 0x9bab, 0x1, 0x1);
        gbc.writeMem(0x7a40, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x114c);
        EXPECT(gbc.pc(), 0x7a42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 032D
        gbc.setState(0x6df3, 0xf351, 0xa060, 0x4fe6, 0xf5b0, 0x4f96, 0x1, 0x0);
        gbc.writeMem(0x6df3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf351);
        EXPECT(gbc.pc(), 0x6df5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 032E
        gbc.setState(0xc123, 0x908d, 0x4020, 0x8dea, 0x8a78, 0xd6cd, 0x0, 0x1);
        gbc.writeMem(0xc123, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x908d);
        EXPECT(gbc.pc(), 0xc125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc123), 0xcb);
        EXPECT(gbc.readMem(0xc124), 0x17);
        // CB 17 032F
        gbc.setState(0xb, 0x22f1, 0xd3a0, 0x2e4e, 0xcb5, 0xe8c4, 0x0, 0x1);
        gbc.writeMem(0xb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x22f1);
        EXPECT(gbc.pc(), 0xd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0330
        gbc.setState(0xbc09, 0x5640, 0x3800, 0x6fe4, 0x4268, 0x3a92, 0x0, 0x0);
        gbc.writeMem(0xbc09, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5640);
        EXPECT(gbc.pc(), 0xbc0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc09), 0xcb);
        EXPECT(gbc.readMem(0xbc0a), 0x17);
        // CB 17 0331
        gbc.setState(0x5170, 0x451e, 0x29c0, 0xf831, 0x644b, 0x7495, 0x0, 0x0);
        gbc.writeMem(0x5170, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x451e);
        EXPECT(gbc.pc(), 0x5172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0332
        gbc.setState(0xaad0, 0x5c1, 0x5be0, 0x389f, 0x3aa4, 0xd0ea, 0x1, 0x1);
        gbc.writeMem(0xaad0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5c1);
        EXPECT(gbc.pc(), 0xaad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad0), 0xcb);
        EXPECT(gbc.readMem(0xaad1), 0x17);
        // CB 17 0333
        gbc.setState(0x7838, 0xa28d, 0xa670, 0xde31, 0x53a3, 0x96df, 0x0, 0x1);
        gbc.writeMem(0x7838, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa28d);
        EXPECT(gbc.pc(), 0x783a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0334
        gbc.setState(0x2234, 0xbdfe, 0xfc10, 0x3958, 0xe803, 0x3baf, 0x0, 0x1);
        gbc.writeMem(0x2234, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xbdfe);
        EXPECT(gbc.pc(), 0x2236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0335
        gbc.setState(0x5771, 0x6982, 0x7730, 0x464b, 0x6e5e, 0x9bb2, 0x1, 0x1);
        gbc.writeMem(0x5771, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6982);
        EXPECT(gbc.pc(), 0x5773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0336
        gbc.setState(0x1c47, 0x3478, 0x2840, 0x3040, 0xcde2, 0x316c, 0x0, 0x0);
        gbc.writeMem(0x1c47, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3478);
        EXPECT(gbc.pc(), 0x1c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0337
        gbc.setState(0x4be5, 0x1c17, 0xe890, 0x73a0, 0x15e8, 0x4264, 0x0, 0x1);
        gbc.writeMem(0x4be5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1c17);
        EXPECT(gbc.pc(), 0x4be7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0338
        gbc.setState(0x1af1, 0x2709, 0xd770, 0x6c0f, 0x7f2e, 0xed68, 0x1, 0x0);
        gbc.writeMem(0x1af1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2709);
        EXPECT(gbc.pc(), 0x1af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 033A
        gbc.setState(0xa79c, 0xe088, 0x1290, 0xe0a, 0xe63f, 0xb885, 0x0, 0x1);
        gbc.writeMem(0xa79c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe088);
        EXPECT(gbc.pc(), 0xa79e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa79c), 0xcb);
        EXPECT(gbc.readMem(0xa79d), 0x17);
        // CB 17 033B
        gbc.setState(0xe5bc, 0x1af1, 0x7ee0, 0xf4b7, 0xa6ef, 0x61e, 0x1, 0x1);
        gbc.writeMem(0xe5bc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1af1);
        EXPECT(gbc.pc(), 0xe5be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5bc), 0xcb);
        EXPECT(gbc.readMem(0xe5bd), 0x17);
        // CB 17 033C
        gbc.setState(0x1c90, 0xee2e, 0x3370, 0xff63, 0xda65, 0x43bf, 0x0, 0x1);
        gbc.writeMem(0x1c90, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xee2e);
        EXPECT(gbc.pc(), 0x1c92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 033D
        gbc.setState(0x5d2c, 0x63e1, 0xab90, 0xf050, 0x6b41, 0x3dfe, 0x1, 0x0);
        gbc.writeMem(0x5d2c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x63e1);
        EXPECT(gbc.pc(), 0x5d2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 033E
        gbc.setState(0x3d53, 0x26ff, 0x6f0, 0xd1b8, 0x976d, 0x610c, 0x0, 0x0);
        gbc.writeMem(0x3d53, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x26ff);
        EXPECT(gbc.pc(), 0x3d55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 033F
        gbc.setState(0xd16e, 0x2dcf, 0x7af0, 0x87da, 0x70e0, 0xb020, 0x0, 0x1);
        gbc.writeMem(0xd16e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2dcf);
        EXPECT(gbc.pc(), 0xd170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd16e), 0xcb);
        EXPECT(gbc.readMem(0xd16f), 0x17);
        // CB 17 0340
        gbc.setState(0x2581, 0xb56b, 0x96c0, 0xea66, 0x4e68, 0x3cbe, 0x0, 0x0);
        gbc.writeMem(0x2581, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb56b);
        EXPECT(gbc.pc(), 0x2583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0341
        gbc.setState(0xbbf8, 0x4e9d, 0xcac0, 0x8a1c, 0xd527, 0x31b0, 0x0, 0x0);
        gbc.writeMem(0xbbf8, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4e9d);
        EXPECT(gbc.pc(), 0xbbfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbf8), 0xcb);
        EXPECT(gbc.readMem(0xbbf9), 0x17);
        // CB 17 0342
        gbc.setState(0x9403, 0xeda, 0x3bd0, 0x8d39, 0x8894, 0x7d2e, 0x0, 0x1);
        gbc.writeMem(0x9403, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xeda);
        EXPECT(gbc.pc(), 0x9405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9403), 0xcb);
        EXPECT(gbc.readMem(0x9404), 0x17);
        // CB 17 0343
        gbc.setState(0x34b2, 0x4c66, 0x8a30, 0x41d3, 0xe31b, 0x8c7b, 0x0, 0x0);
        gbc.writeMem(0x34b2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4c66);
        EXPECT(gbc.pc(), 0x34b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0344
        gbc.setState(0x5ce4, 0xfe17, 0x8490, 0x77ec, 0xbead, 0x102d, 0x1, 0x0);
        gbc.writeMem(0x5ce4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfe17);
        EXPECT(gbc.pc(), 0x5ce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0345
        gbc.setState(0x999c, 0x10de, 0x9800, 0xf378, 0x8c60, 0x621a, 0x0, 0x0);
        gbc.writeMem(0x999c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x10de);
        EXPECT(gbc.pc(), 0x999e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x999c), 0xcb);
        EXPECT(gbc.readMem(0x999d), 0x17);
        // CB 17 0346
        gbc.setState(0xcaf3, 0xfbac, 0x13e0, 0x24bb, 0xd8aa, 0x8feb, 0x1, 0x0);
        gbc.writeMem(0xcaf3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfbac);
        EXPECT(gbc.pc(), 0xcaf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf3), 0xcb);
        EXPECT(gbc.readMem(0xcaf4), 0x17);
        // CB 17 0347
        gbc.setState(0xa7eb, 0xdb8b, 0xe2b0, 0xf43d, 0x1819, 0x1fbc, 0x1, 0x1);
        gbc.writeMem(0xa7eb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdb8b);
        EXPECT(gbc.pc(), 0xa7ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7eb), 0xcb);
        EXPECT(gbc.readMem(0xa7ec), 0x17);
        // CB 17 0348
        gbc.setState(0xbe96, 0x9472, 0x7e0, 0xe0b0, 0x328c, 0x90ef, 0x0, 0x1);
        gbc.writeMem(0xbe96, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9472);
        EXPECT(gbc.pc(), 0xbe98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe96), 0xcb);
        EXPECT(gbc.readMem(0xbe97), 0x17);
        // CB 17 0349
        gbc.setState(0x49d6, 0x2636, 0x3ac0, 0x3104, 0x175c, 0xe88, 0x1, 0x1);
        gbc.writeMem(0x49d6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2636);
        EXPECT(gbc.pc(), 0x49d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 034A
        gbc.setState(0xe266, 0x9739, 0xd930, 0xed3b, 0x4f15, 0x312d, 0x0, 0x0);
        gbc.writeMem(0xe266, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9739);
        EXPECT(gbc.pc(), 0xe268);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe266), 0xcb);
        EXPECT(gbc.readMem(0xe267), 0x17);
        // CB 17 034B
        gbc.setState(0x597f, 0x5d46, 0xcab0, 0xa41, 0x84ab, 0x5be7, 0x1, 0x0);
        gbc.writeMem(0x597f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5d46);
        EXPECT(gbc.pc(), 0x5981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 034C
        gbc.setState(0x20a5, 0xcd3c, 0xaad0, 0xb406, 0xd6bf, 0x3d2f, 0x0, 0x0);
        gbc.writeMem(0x20a5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcd3c);
        EXPECT(gbc.pc(), 0x20a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 034D
        gbc.setState(0xb116, 0xd99a, 0xf280, 0x6149, 0x542b, 0xa821, 0x0, 0x0);
        gbc.writeMem(0xb116, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd99a);
        EXPECT(gbc.pc(), 0xb118);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb116), 0xcb);
        EXPECT(gbc.readMem(0xb117), 0x17);
        // CB 17 034E
        gbc.setState(0xcef5, 0xe1b0, 0xad0, 0x4c49, 0x737e, 0x2c5, 0x0, 0x0);
        gbc.writeMem(0xcef5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe1b0);
        EXPECT(gbc.pc(), 0xcef7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef5), 0xcb);
        EXPECT(gbc.readMem(0xcef6), 0x17);
        // CB 17 034F
        gbc.setState(0x8593, 0xc9a3, 0xc660, 0xd4b9, 0xf71f, 0x8ec0, 0x0, 0x1);
        gbc.writeMem(0x8593, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc9a3);
        EXPECT(gbc.pc(), 0x8595);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8593), 0xcb);
        EXPECT(gbc.readMem(0x8594), 0x17);
        // CB 17 0350
        gbc.setState(0x2e78, 0xabd2, 0x6b80, 0x53e5, 0xad42, 0x67d2, 0x1, 0x1);
        gbc.writeMem(0x2e78, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xabd2);
        EXPECT(gbc.pc(), 0x2e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0351
        gbc.setState(0xccb4, 0x5a53, 0x3130, 0xfedb, 0x290a, 0xbb36, 0x0, 0x0);
        gbc.writeMem(0xccb4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5a53);
        EXPECT(gbc.pc(), 0xccb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb4), 0xcb);
        EXPECT(gbc.readMem(0xccb5), 0x17);
        // CB 17 0352
        gbc.setState(0xaaeb, 0x8880, 0x6050, 0xabd1, 0x262b, 0x22ea, 0x0, 0x1);
        gbc.writeMem(0xaaeb, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8880);
        EXPECT(gbc.pc(), 0xaaed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaeb), 0xcb);
        EXPECT(gbc.readMem(0xaaec), 0x17);
        // CB 17 0354
        gbc.setState(0x73e9, 0xe2a0, 0x6b40, 0x771a, 0xe28f, 0x6888, 0x0, 0x1);
        gbc.writeMem(0x73e9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe2a0);
        EXPECT(gbc.pc(), 0x73eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0355
        gbc.setState(0x8c1b, 0x43cf, 0x8560, 0x82ec, 0xa89f, 0xdfc6, 0x1, 0x1);
        gbc.writeMem(0x8c1b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x43cf);
        EXPECT(gbc.pc(), 0x8c1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c1b), 0xcb);
        EXPECT(gbc.readMem(0x8c1c), 0x17);
        // CB 17 0356
        gbc.setState(0x9090, 0x68d1, 0x7320, 0x2319, 0xcef2, 0xec46, 0x0, 0x0);
        gbc.writeMem(0x9090, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x68d1);
        EXPECT(gbc.pc(), 0x9092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9090), 0xcb);
        EXPECT(gbc.readMem(0x9091), 0x17);
        // CB 17 0357
        gbc.setState(0x9aae, 0xd947, 0xf6e0, 0xb0f8, 0xa0c8, 0x3a25, 0x1, 0x1);
        gbc.writeMem(0x9aae, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd947);
        EXPECT(gbc.pc(), 0x9ab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aae), 0xcb);
        EXPECT(gbc.readMem(0x9aaf), 0x17);
        // CB 17 0358
        gbc.setState(0x5574, 0x5482, 0xdc90, 0x7587, 0xb658, 0x99e1, 0x1, 0x1);
        gbc.writeMem(0x5574, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5482);
        EXPECT(gbc.pc(), 0x5576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0359
        gbc.setState(0xcc5, 0x3e0e, 0xa410, 0x8b7b, 0xc144, 0x48f2, 0x0, 0x0);
        gbc.writeMem(0xcc5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3e0e);
        EXPECT(gbc.pc(), 0xcc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 035A
        gbc.setState(0x3b2d, 0x3fd1, 0x15f0, 0x5845, 0x4c86, 0x4ee9, 0x1, 0x0);
        gbc.writeMem(0x3b2d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3fd1);
        EXPECT(gbc.pc(), 0x3b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 035B
        gbc.setState(0xa641, 0xc2b6, 0x250, 0x7674, 0xd568, 0x892d, 0x0, 0x1);
        gbc.writeMem(0xa641, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc2b6);
        EXPECT(gbc.pc(), 0xa643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa641), 0xcb);
        EXPECT(gbc.readMem(0xa642), 0x17);
        // CB 17 035C
        gbc.setState(0xcb2e, 0x9437, 0x49c0, 0x1698, 0xf373, 0xa78f, 0x1, 0x0);
        gbc.writeMem(0xcb2e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9437);
        EXPECT(gbc.pc(), 0xcb30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2e), 0xcb);
        EXPECT(gbc.readMem(0xcb2f), 0x17);
        // CB 17 035D
        gbc.setState(0x28c0, 0x2cb4, 0x7e30, 0x37d7, 0x930f, 0x6ec0, 0x0, 0x1);
        gbc.writeMem(0x28c0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2cb4);
        EXPECT(gbc.pc(), 0x28c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 035E
        gbc.setState(0xb936, 0x2271, 0xd940, 0xd059, 0x6fd8, 0x22e7, 0x0, 0x1);
        gbc.writeMem(0xb936, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2271);
        EXPECT(gbc.pc(), 0xb938);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb936), 0xcb);
        EXPECT(gbc.readMem(0xb937), 0x17);
        // CB 17 035F
        gbc.setState(0x3f06, 0x8bb1, 0x6760, 0xc0c5, 0x2caf, 0x83a5, 0x0, 0x1);
        gbc.writeMem(0x3f06, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8bb1);
        EXPECT(gbc.pc(), 0x3f08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0360
        gbc.setState(0x8d97, 0x229c, 0xc460, 0xae9b, 0xa9ea, 0xb3ed, 0x1, 0x0);
        gbc.writeMem(0x8d97, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x229c);
        EXPECT(gbc.pc(), 0x8d99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d97), 0xcb);
        EXPECT(gbc.readMem(0x8d98), 0x17);
        // CB 17 0361
        gbc.setState(0x6f52, 0x55fb, 0x5fb0, 0xd5bf, 0x9516, 0x87f9, 0x0, 0x0);
        gbc.writeMem(0x6f52, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x55fb);
        EXPECT(gbc.pc(), 0x6f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0362
        gbc.setState(0xafc1, 0xad6c, 0x5000, 0x8ca8, 0xa18e, 0x58ac, 0x1, 0x1);
        gbc.writeMem(0xafc1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xad6c);
        EXPECT(gbc.pc(), 0xafc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc1), 0xcb);
        EXPECT(gbc.readMem(0xafc2), 0x17);
        // CB 17 0363
        gbc.setState(0x89af, 0x9ed0, 0x88f0, 0x52ed, 0xc767, 0xbee8, 0x0, 0x0);
        gbc.writeMem(0x89af, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9ed0);
        EXPECT(gbc.pc(), 0x89b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89af), 0xcb);
        EXPECT(gbc.readMem(0x89b0), 0x17);
        // CB 17 0364
        gbc.setState(0x6ee7, 0x6c00, 0x9d20, 0x2d71, 0x645f, 0x78b7, 0x0, 0x1);
        gbc.writeMem(0x6ee7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6c00);
        EXPECT(gbc.pc(), 0x6ee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0365
        gbc.setState(0x4521, 0x3286, 0xd7e0, 0x5bd3, 0xc5d4, 0xade2, 0x1, 0x1);
        gbc.writeMem(0x4521, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3286);
        EXPECT(gbc.pc(), 0x4523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0366
        gbc.setState(0x6fe3, 0xfcc0, 0x3d10, 0x4daa, 0x478a, 0xde86, 0x1, 0x0);
        gbc.writeMem(0x6fe3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xfcc0);
        EXPECT(gbc.pc(), 0x6fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0367
        gbc.setState(0xe98d, 0xa41d, 0xeb70, 0xc546, 0xc01d, 0x41ed, 0x1, 0x1);
        gbc.writeMem(0xe98d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa41d);
        EXPECT(gbc.pc(), 0xe98f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe98d), 0xcb);
        EXPECT(gbc.readMem(0xe98e), 0x17);
        // CB 17 0368
        gbc.setState(0xe52b, 0x8d78, 0x4840, 0x3a94, 0x193f, 0xcc39, 0x1, 0x0);
        gbc.writeMem(0xe52b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8d78);
        EXPECT(gbc.pc(), 0xe52d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe52b), 0xcb);
        EXPECT(gbc.readMem(0xe52c), 0x17);
        // CB 17 0369
        gbc.setState(0xbd7a, 0x1d39, 0xa0b0, 0x96f5, 0x67a3, 0xe582, 0x0, 0x1);
        gbc.writeMem(0xbd7a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1d39);
        EXPECT(gbc.pc(), 0xbd7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd7a), 0xcb);
        EXPECT(gbc.readMem(0xbd7b), 0x17);
        // CB 17 036A
        gbc.setState(0x2577, 0x9e49, 0xbbe0, 0xffbd, 0xd5bf, 0x16d1, 0x0, 0x0);
        gbc.writeMem(0x2577, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9e49);
        EXPECT(gbc.pc(), 0x2579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 036B
        gbc.setState(0x92a, 0x8e17, 0x2410, 0xe4dc, 0x93c, 0xfbb3, 0x1, 0x0);
        gbc.writeMem(0x92a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8e17);
        EXPECT(gbc.pc(), 0x92c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 036C
        gbc.setState(0xd9a4, 0x1b71, 0x86b0, 0x6868, 0x542c, 0xb694, 0x1, 0x1);
        gbc.writeMem(0xd9a4, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1b71);
        EXPECT(gbc.pc(), 0xd9a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9a4), 0xcb);
        EXPECT(gbc.readMem(0xd9a5), 0x17);
        // CB 17 036D
        gbc.setState(0x932e, 0x881f, 0xff20, 0xa0e0, 0x8088, 0xf359, 0x1, 0x1);
        gbc.writeMem(0x932e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x881f);
        EXPECT(gbc.pc(), 0x9330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932e), 0xcb);
        EXPECT(gbc.readMem(0x932f), 0x17);
        // CB 17 036E
        gbc.setState(0xc657, 0x6e1d, 0x2010, 0x756, 0x4842, 0x9bfd, 0x1, 0x1);
        gbc.writeMem(0xc657, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6e1d);
        EXPECT(gbc.pc(), 0xc659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc657), 0xcb);
        EXPECT(gbc.readMem(0xc658), 0x17);
        // CB 17 036F
        gbc.setState(0xbd9a, 0xef3b, 0xb00, 0x77d8, 0xbf01, 0x1adf, 0x0, 0x0);
        gbc.writeMem(0xbd9a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xef3b);
        EXPECT(gbc.pc(), 0xbd9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd9a), 0xcb);
        EXPECT(gbc.readMem(0xbd9b), 0x17);
        // CB 17 0370
        gbc.setState(0x2b09, 0xad27, 0x4ec0, 0xe35b, 0x2848, 0x760a, 0x0, 0x1);
        gbc.writeMem(0x2b09, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xad27);
        EXPECT(gbc.pc(), 0x2b0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0371
        gbc.setState(0x427c, 0x1c9a, 0xfc20, 0xd42d, 0xaf4f, 0xbdb9, 0x0, 0x0);
        gbc.writeMem(0x427c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1c9a);
        EXPECT(gbc.pc(), 0x427e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0372
        gbc.setState(0x9b23, 0x8260, 0x59a0, 0x9dec, 0x8153, 0x2780, 0x0, 0x1);
        gbc.writeMem(0x9b23, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8260);
        EXPECT(gbc.pc(), 0x9b25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b23), 0xcb);
        EXPECT(gbc.readMem(0x9b24), 0x17);
        // CB 17 0373
        gbc.setState(0x1a56, 0x3404, 0x9190, 0x6e64, 0x731e, 0x7bea, 0x0, 0x0);
        gbc.writeMem(0x1a56, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3404);
        EXPECT(gbc.pc(), 0x1a58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0374
        gbc.setState(0xc177, 0xa43e, 0x61c0, 0x82c9, 0xa168, 0x7087, 0x0, 0x0);
        gbc.writeMem(0xc177, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa43e);
        EXPECT(gbc.pc(), 0xc179);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc177), 0xcb);
        EXPECT(gbc.readMem(0xc178), 0x17);
        // CB 17 0375
        gbc.setState(0x2ebc, 0x5050, 0xe420, 0x9dde, 0x3e12, 0xc7a7, 0x1, 0x1);
        gbc.writeMem(0x2ebc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5050);
        EXPECT(gbc.pc(), 0x2ebe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0376
        gbc.setState(0xc115, 0x9934, 0xbfb0, 0xac7d, 0xa7b, 0x755, 0x0, 0x0);
        gbc.writeMem(0xc115, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9934);
        EXPECT(gbc.pc(), 0xc117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc115), 0xcb);
        EXPECT(gbc.readMem(0xc116), 0x17);
        // CB 17 0377
        gbc.setState(0x7504, 0x17cd, 0x9270, 0xebb, 0x30e2, 0xef21, 0x0, 0x0);
        gbc.writeMem(0x7504, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x17cd);
        EXPECT(gbc.pc(), 0x7506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0378
        gbc.setState(0x83ac, 0xdb37, 0x7c10, 0x67cc, 0x9e36, 0x3d3f, 0x0, 0x0);
        gbc.writeMem(0x83ac, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xdb37);
        EXPECT(gbc.pc(), 0x83ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ac), 0xcb);
        EXPECT(gbc.readMem(0x83ad), 0x17);
        // CB 17 0379
        gbc.setState(0x9aa2, 0x3e84, 0x9e80, 0x58d6, 0xb056, 0x70d9, 0x1, 0x0);
        gbc.writeMem(0x9aa2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3e84);
        EXPECT(gbc.pc(), 0x9aa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa2), 0xcb);
        EXPECT(gbc.readMem(0x9aa3), 0x17);
        // CB 17 037A
        gbc.setState(0xa718, 0x77e3, 0xa0, 0x65b7, 0xc847, 0xbb46, 0x0, 0x0);
        gbc.writeMem(0xa718, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x77e3);
        EXPECT(gbc.pc(), 0xa71a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa718), 0xcb);
        EXPECT(gbc.readMem(0xa719), 0x17);
        // CB 17 037B
        gbc.setState(0x3752, 0xc5c, 0x9820, 0xc854, 0xfbfd, 0xc101, 0x1, 0x1);
        gbc.writeMem(0x3752, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc5c);
        EXPECT(gbc.pc(), 0x3754);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 037C
        gbc.setState(0xcba1, 0x7ce0, 0x3500, 0xa0e8, 0x9c95, 0xbfb2, 0x0, 0x0);
        gbc.writeMem(0xcba1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7ce0);
        EXPECT(gbc.pc(), 0xcba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba1), 0xcb);
        EXPECT(gbc.readMem(0xcba2), 0x17);
        // CB 17 037D
        gbc.setState(0x147e, 0x4074, 0x3940, 0x6c4, 0x5d0a, 0x7b20, 0x1, 0x1);
        gbc.writeMem(0x147e, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4074);
        EXPECT(gbc.pc(), 0x1480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 037E
        gbc.setState(0x2bc, 0x711f, 0xf680, 0x9088, 0x15db, 0x8727, 0x0, 0x0);
        gbc.writeMem(0x2bc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x711f);
        EXPECT(gbc.pc(), 0x2be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 037F
        gbc.setState(0x6c11, 0x979f, 0x2fb0, 0x2cca, 0xf2ea, 0x9e1d, 0x0, 0x1);
        gbc.writeMem(0x6c11, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x979f);
        EXPECT(gbc.pc(), 0x6c13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0380
        gbc.setState(0x78ac, 0xa842, 0x60c0, 0xc64f, 0x6932, 0xf33e, 0x0, 0x1);
        gbc.writeMem(0x78ac, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa842);
        EXPECT(gbc.pc(), 0x78ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0381
        gbc.setState(0x5f1c, 0x53c1, 0xd450, 0x66cb, 0xb317, 0x9218, 0x0, 0x1);
        gbc.writeMem(0x5f1c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x53c1);
        EXPECT(gbc.pc(), 0x5f1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0382
        gbc.setState(0x63bc, 0x2931, 0xf740, 0xf93d, 0xc80c, 0x42f7, 0x1, 0x0);
        gbc.writeMem(0x63bc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2931);
        EXPECT(gbc.pc(), 0x63be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0383
        gbc.setState(0x41f6, 0xd335, 0x1f50, 0x4c3a, 0x81f4, 0x829c, 0x0, 0x0);
        gbc.writeMem(0x41f6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd335);
        EXPECT(gbc.pc(), 0x41f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0384
        gbc.setState(0xafa9, 0xeb8f, 0x68f0, 0x69fc, 0xa1b, 0x8ac1, 0x0, 0x0);
        gbc.writeMem(0xafa9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xeb8f);
        EXPECT(gbc.pc(), 0xafab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa9), 0xcb);
        EXPECT(gbc.readMem(0xafaa), 0x17);
        // CB 17 0385
        gbc.setState(0x3e3c, 0xa5f0, 0x3000, 0xb640, 0x4598, 0x8c5d, 0x1, 0x0);
        gbc.writeMem(0x3e3c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa5f0);
        EXPECT(gbc.pc(), 0x3e3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 0387
        gbc.setState(0x8cf3, 0x56e7, 0xf9f0, 0xe397, 0x219a, 0x80be, 0x0, 0x0);
        gbc.writeMem(0x8cf3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x56e7);
        EXPECT(gbc.pc(), 0x8cf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cf3), 0xcb);
        EXPECT(gbc.readMem(0x8cf4), 0x17);
        // CB 17 0388
        gbc.setState(0x5810, 0x5e29, 0x2e00, 0xda05, 0xedf1, 0x2a41, 0x1, 0x0);
        gbc.writeMem(0x5810, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5e29);
        EXPECT(gbc.pc(), 0x5812);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 038B
        gbc.setState(0x6591, 0x3c8c, 0xd060, 0x441b, 0x1a9d, 0x61cc, 0x0, 0x1);
        gbc.writeMem(0x6591, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3c8c);
        EXPECT(gbc.pc(), 0x6593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 038C
        gbc.setState(0x1160, 0x8eb3, 0x58c0, 0x66d6, 0x65fb, 0x1f5a, 0x0, 0x0);
        gbc.writeMem(0x1160, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8eb3);
        EXPECT(gbc.pc(), 0x1162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 038D
        gbc.setState(0x4479, 0xc442, 0xe020, 0x7cb4, 0x395c, 0x386d, 0x0, 0x1);
        gbc.writeMem(0x4479, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc442);
        EXPECT(gbc.pc(), 0x447b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 038E
        gbc.setState(0xd052, 0x51f0, 0x2390, 0x375b, 0x2f23, 0x7752, 0x1, 0x0);
        gbc.writeMem(0xd052, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x51f0);
        EXPECT(gbc.pc(), 0xd054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd052), 0xcb);
        EXPECT(gbc.readMem(0xd053), 0x17);
        // CB 17 038F
        gbc.setState(0x99ee, 0x11a, 0x2fa0, 0x522, 0x6b1c, 0x9677, 0x0, 0x0);
        gbc.writeMem(0x99ee, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x11a);
        EXPECT(gbc.pc(), 0x99f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ee), 0xcb);
        EXPECT(gbc.readMem(0x99ef), 0x17);
        // CB 17 0390
        gbc.setState(0xe54a, 0x68ba, 0x7960, 0x6239, 0xd047, 0xd5d5, 0x1, 0x0);
        gbc.writeMem(0xe54a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x68ba);
        EXPECT(gbc.pc(), 0xe54c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54a), 0xcb);
        EXPECT(gbc.readMem(0xe54b), 0x17);
        // CB 17 0391
        gbc.setState(0x1f05, 0x3c80, 0xe020, 0x8c75, 0xa915, 0x2e8c, 0x1, 0x0);
        gbc.writeMem(0x1f05, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3c80);
        EXPECT(gbc.pc(), 0x1f07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0392
        gbc.setState(0x2bf6, 0x5f06, 0xd710, 0x2a72, 0xe7e2, 0x3994, 0x1, 0x1);
        gbc.writeMem(0x2bf6, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5f06);
        EXPECT(gbc.pc(), 0x2bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0393
        gbc.setState(0x8783, 0x7dcf, 0xe2a0, 0xc61c, 0xe426, 0xd8c6, 0x0, 0x0);
        gbc.writeMem(0x8783, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7dcf);
        EXPECT(gbc.pc(), 0x8785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8783), 0xcb);
        EXPECT(gbc.readMem(0x8784), 0x17);
        // CB 17 0394
        gbc.setState(0x35c7, 0xd893, 0x9930, 0xd380, 0xe7b7, 0xc971, 0x0, 0x0);
        gbc.writeMem(0x35c7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd893);
        EXPECT(gbc.pc(), 0x35c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0395
        gbc.setState(0xafad, 0xfea3, 0x1460, 0xbdee, 0x9cbe, 0xa83c, 0x0, 0x1);
        gbc.writeMem(0xafad, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfea3);
        EXPECT(gbc.pc(), 0xafaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafad), 0xcb);
        EXPECT(gbc.readMem(0xafae), 0x17);
        // CB 17 0396
        gbc.setState(0x1f61, 0x1f24, 0xbc60, 0x41f, 0x4dbf, 0x999, 0x1, 0x0);
        gbc.writeMem(0x1f61, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1f24);
        EXPECT(gbc.pc(), 0x1f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0397
        gbc.setState(0x28db, 0x8803, 0xa070, 0x5e19, 0xcd23, 0xcb6a, 0x0, 0x1);
        gbc.writeMem(0x28db, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8803);
        EXPECT(gbc.pc(), 0x28dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 0398
        gbc.setState(0xcc85, 0xa44b, 0x6b80, 0x4fd1, 0x72f2, 0x77e1, 0x1, 0x1);
        gbc.writeMem(0xcc85, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa44b);
        EXPECT(gbc.pc(), 0xcc87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc85), 0xcb);
        EXPECT(gbc.readMem(0xcc86), 0x17);
        // CB 17 0399
        gbc.setState(0xb6cc, 0x343d, 0xd8a0, 0x3b9, 0x4625, 0x3c40, 0x1, 0x1);
        gbc.writeMem(0xb6cc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x343d);
        EXPECT(gbc.pc(), 0xb6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6cc), 0xcb);
        EXPECT(gbc.readMem(0xb6cd), 0x17);
        // CB 17 039A
        gbc.setState(0x7e4c, 0x8492, 0xba50, 0xd790, 0x6ab5, 0x3444, 0x0, 0x0);
        gbc.writeMem(0x7e4c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8492);
        EXPECT(gbc.pc(), 0x7e4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 039B
        gbc.setState(0x3c3c, 0x3100, 0xfd20, 0xfc2b, 0x372b, 0x58a4, 0x0, 0x0);
        gbc.writeMem(0x3c3c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3100);
        EXPECT(gbc.pc(), 0x3c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 039C
        gbc.setState(0x31af, 0x63c1, 0x9d00, 0x8ba1, 0x820a, 0x3860, 0x1, 0x1);
        gbc.writeMem(0x31af, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x63c1);
        EXPECT(gbc.pc(), 0x31b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 039D
        gbc.setState(0xac52, 0x5cb2, 0x5eb0, 0xbd09, 0x67b6, 0x3925, 0x0, 0x0);
        gbc.writeMem(0xac52, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5cb2);
        EXPECT(gbc.pc(), 0xac54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac52), 0xcb);
        EXPECT(gbc.readMem(0xac53), 0x17);
        // CB 17 039E
        gbc.setState(0xbe54, 0xaf0f, 0xb8a0, 0xdb0, 0x9e63, 0xf735, 0x0, 0x1);
        gbc.writeMem(0xbe54, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xaf0f);
        EXPECT(gbc.pc(), 0xbe56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe54), 0xcb);
        EXPECT(gbc.readMem(0xbe55), 0x17);
        // CB 17 039F
        gbc.setState(0x3e03, 0xde87, 0x50b0, 0x8500, 0x95c8, 0xf1ef, 0x1, 0x0);
        gbc.writeMem(0x3e03, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xde87);
        EXPECT(gbc.pc(), 0x3e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03A0
        gbc.setState(0x68a, 0xd6de, 0xdb90, 0x1a2e, 0x74a6, 0xb1f2, 0x0, 0x1);
        gbc.writeMem(0x68a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd6de);
        EXPECT(gbc.pc(), 0x68c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03A2
        gbc.setState(0x4101, 0xdb04, 0xb980, 0x2b70, 0xab1d, 0x46e0, 0x0, 0x0);
        gbc.writeMem(0x4101, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xdb04);
        EXPECT(gbc.pc(), 0x4103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03A3
        gbc.setState(0x84d, 0x9a86, 0x5210, 0x1602, 0xe1f0, 0x836f, 0x0, 0x0);
        gbc.writeMem(0x84d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9a86);
        EXPECT(gbc.pc(), 0x84f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03A4
        gbc.setState(0x849, 0xdde4, 0xd100, 0x15a1, 0x2d8, 0xf8ca, 0x1, 0x0);
        gbc.writeMem(0x849, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xdde4);
        EXPECT(gbc.pc(), 0x84b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03A5
        gbc.setState(0xe6b9, 0xe9de, 0xc600, 0x1d1f, 0x7529, 0xe505, 0x1, 0x1);
        gbc.writeMem(0xe6b9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe9de);
        EXPECT(gbc.pc(), 0xe6bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6b9), 0xcb);
        EXPECT(gbc.readMem(0xe6ba), 0x17);
        // CB 17 03A6
        gbc.setState(0xce23, 0xd1b4, 0xec00, 0xdfed, 0x3a23, 0x73e2, 0x1, 0x1);
        gbc.writeMem(0xce23, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd1b4);
        EXPECT(gbc.pc(), 0xce25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce23), 0xcb);
        EXPECT(gbc.readMem(0xce24), 0x17);
        // CB 17 03A7
        gbc.setState(0xeb0, 0xa0f4, 0xdb90, 0xcf04, 0x632, 0x47ff, 0x0, 0x0);
        gbc.writeMem(0xeb0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa0f4);
        EXPECT(gbc.pc(), 0xeb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03A8
        gbc.setState(0x48ba, 0x34b1, 0xd820, 0x8cc5, 0xdcb4, 0xc499, 0x0, 0x0);
        gbc.writeMem(0x48ba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x34b1);
        EXPECT(gbc.pc(), 0x48bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03A9
        gbc.setState(0x597c, 0xb8ec, 0x9940, 0xbe61, 0x6236, 0x253f, 0x0, 0x1);
        gbc.writeMem(0x597c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb8ec);
        EXPECT(gbc.pc(), 0x597e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03AA
        gbc.setState(0x8f4a, 0xc894, 0x1580, 0xa9f, 0xad73, 0xa2da, 0x1, 0x0);
        gbc.writeMem(0x8f4a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc894);
        EXPECT(gbc.pc(), 0x8f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f4a), 0xcb);
        EXPECT(gbc.readMem(0x8f4b), 0x17);
        // CB 17 03AB
        gbc.setState(0xcb25, 0x73a7, 0xd300, 0x58bf, 0x75af, 0xd0cb, 0x1, 0x1);
        gbc.writeMem(0xcb25, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x73a7);
        EXPECT(gbc.pc(), 0xcb27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb25), 0xcb);
        EXPECT(gbc.readMem(0xcb26), 0x17);
        // CB 17 03AC
        gbc.setState(0x261d, 0x7fb6, 0xb050, 0x34db, 0xb48e, 0x6654, 0x0, 0x1);
        gbc.writeMem(0x261d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7fb6);
        EXPECT(gbc.pc(), 0x261f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03AD
        gbc.setState(0x2471, 0x6a87, 0x4260, 0xd683, 0x1e0c, 0x3e49, 0x0, 0x1);
        gbc.writeMem(0x2471, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6a87);
        EXPECT(gbc.pc(), 0x2473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03AE
        gbc.setState(0x2f84, 0xbeaa, 0x2210, 0x897b, 0xf9c5, 0xa16, 0x1, 0x0);
        gbc.writeMem(0x2f84, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbeaa);
        EXPECT(gbc.pc(), 0x2f86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03AF
        gbc.setState(0x3ba, 0x5947, 0x9f10, 0x3770, 0xec68, 0xe4b2, 0x0, 0x1);
        gbc.writeMem(0x3ba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5947);
        EXPECT(gbc.pc(), 0x3bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03B0
        gbc.setState(0xa553, 0x736f, 0xd400, 0x97f1, 0x24dc, 0xb7c2, 0x1, 0x0);
        gbc.writeMem(0xa553, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x736f);
        EXPECT(gbc.pc(), 0xa555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa553), 0xcb);
        EXPECT(gbc.readMem(0xa554), 0x17);
        // CB 17 03B1
        gbc.setState(0xbace, 0x80af, 0xef20, 0x10d8, 0xab49, 0x2ff9, 0x1, 0x1);
        gbc.writeMem(0xbace, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x80af);
        EXPECT(gbc.pc(), 0xbad0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbace), 0xcb);
        EXPECT(gbc.readMem(0xbacf), 0x17);
        // CB 17 03B2
        gbc.setState(0x69dc, 0xafd2, 0xd650, 0xc799, 0x166d, 0x726e, 0x0, 0x1);
        gbc.writeMem(0x69dc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xafd2);
        EXPECT(gbc.pc(), 0x69de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03B3
        gbc.setState(0xc11f, 0xcc35, 0xa050, 0x90ea, 0x1286, 0x9630, 0x1, 0x1);
        gbc.writeMem(0xc11f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xcc35);
        EXPECT(gbc.pc(), 0xc121);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc11f), 0xcb);
        EXPECT(gbc.readMem(0xc120), 0x17);
        // CB 17 03B4
        gbc.setState(0x7f4d, 0xa3ff, 0xaa00, 0xbe0b, 0x2bae, 0x977c, 0x0, 0x1);
        gbc.writeMem(0x7f4d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa3ff);
        EXPECT(gbc.pc(), 0x7f4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03B5
        gbc.setState(0x609d, 0x2a17, 0x1040, 0x9ca9, 0x96e1, 0x342, 0x1, 0x0);
        gbc.writeMem(0x609d, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2a17);
        EXPECT(gbc.pc(), 0x609f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03B6
        gbc.setState(0x964, 0xf23c, 0xaa70, 0xd33d, 0x8bcd, 0x6691, 0x1, 0x1);
        gbc.writeMem(0x964, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf23c);
        EXPECT(gbc.pc(), 0x966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03B7
        gbc.setState(0xd785, 0xee46, 0x2e20, 0xff0f, 0x26cf, 0x7704, 0x1, 0x0);
        gbc.writeMem(0xd785, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xee46);
        EXPECT(gbc.pc(), 0xd787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd785), 0xcb);
        EXPECT(gbc.readMem(0xd786), 0x17);
        // CB 17 03B9
        gbc.setState(0xed88, 0xedaf, 0x8930, 0x19dd, 0x3a2c, 0x8780, 0x0, 0x0);
        gbc.writeMem(0xed88, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xedaf);
        EXPECT(gbc.pc(), 0xed8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed88), 0xcb);
        EXPECT(gbc.readMem(0xed89), 0x17);
        // CB 17 03BA
        gbc.setState(0x96d3, 0xbf35, 0x2f10, 0x62eb, 0xb02, 0x717c, 0x1, 0x0);
        gbc.writeMem(0x96d3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbf35);
        EXPECT(gbc.pc(), 0x96d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d3), 0xcb);
        EXPECT(gbc.readMem(0x96d4), 0x17);
        // CB 17 03BB
        gbc.setState(0xd4d0, 0xc6f9, 0x1420, 0xc6d6, 0xddd5, 0xd992, 0x1, 0x1);
        gbc.writeMem(0xd4d0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc6f9);
        EXPECT(gbc.pc(), 0xd4d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d0), 0xcb);
        EXPECT(gbc.readMem(0xd4d1), 0x17);
        // CB 17 03BC
        gbc.setState(0x4cd9, 0x98b0, 0x6410, 0x7843, 0xdadf, 0xd6f6, 0x1, 0x0);
        gbc.writeMem(0x4cd9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x98b0);
        EXPECT(gbc.pc(), 0x4cdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03BD
        gbc.setState(0x666a, 0xc53a, 0x4ff0, 0x2d60, 0x729c, 0x6f3d, 0x0, 0x0);
        gbc.writeMem(0x666a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc53a);
        EXPECT(gbc.pc(), 0x666c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03BE
        gbc.setState(0xc342, 0x3daf, 0xe920, 0xfd2e, 0x442c, 0x9cda, 0x0, 0x0);
        gbc.writeMem(0xc342, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3daf);
        EXPECT(gbc.pc(), 0xc344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc342), 0xcb);
        EXPECT(gbc.readMem(0xc343), 0x17);
        // CB 17 03BF
        gbc.setState(0x35f1, 0x7f6b, 0x9250, 0xf8cd, 0xf90, 0x6a43, 0x1, 0x1);
        gbc.writeMem(0x35f1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7f6b);
        EXPECT(gbc.pc(), 0x35f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03C0
        gbc.setState(0x13a1, 0x37df, 0x9b60, 0xc844, 0x69c4, 0xf697, 0x1, 0x0);
        gbc.writeMem(0x13a1, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x37df);
        EXPECT(gbc.pc(), 0x13a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03C1
        gbc.setState(0xd73f, 0x3932, 0x8bb0, 0x82b1, 0xc601, 0xd470, 0x1, 0x0);
        gbc.writeMem(0xd73f, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3932);
        EXPECT(gbc.pc(), 0xd741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd73f), 0xcb);
        EXPECT(gbc.readMem(0xd740), 0x17);
        // CB 17 03C2
        gbc.setState(0xac5a, 0x5026, 0x3b40, 0xe45a, 0x2c10, 0x308, 0x0, 0x0);
        gbc.writeMem(0xac5a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5026);
        EXPECT(gbc.pc(), 0xac5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5a), 0xcb);
        EXPECT(gbc.readMem(0xac5b), 0x17);
        // CB 17 03C3
        gbc.setState(0xda57, 0xde4e, 0xd2e0, 0x95fd, 0x394b, 0x9518, 0x0, 0x0);
        gbc.writeMem(0xda57, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xde4e);
        EXPECT(gbc.pc(), 0xda59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda57), 0xcb);
        EXPECT(gbc.readMem(0xda58), 0x17);
        // CB 17 03C4
        gbc.setState(0xebe2, 0x8180, 0x8230, 0x1ba6, 0x2549, 0x6f1d, 0x1, 0x0);
        gbc.writeMem(0xebe2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8180);
        EXPECT(gbc.pc(), 0xebe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe2), 0xcb);
        EXPECT(gbc.readMem(0xebe3), 0x17);
        // CB 17 03C5
        gbc.setState(0x69f3, 0x81f2, 0x1c00, 0xeedb, 0x3220, 0x964a, 0x1, 0x0);
        gbc.writeMem(0x69f3, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x81f2);
        EXPECT(gbc.pc(), 0x69f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03C6
        gbc.setState(0x1971, 0x883c, 0xddf0, 0x7f37, 0x628d, 0x76cb, 0x0, 0x1);
        gbc.writeMem(0x1971, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x883c);
        EXPECT(gbc.pc(), 0x1973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03C7
        gbc.setState(0x9205, 0x90e6, 0xdbd0, 0xe26e, 0xfaca, 0x8a07, 0x1, 0x1);
        gbc.writeMem(0x9205, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x90e6);
        EXPECT(gbc.pc(), 0x9207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9205), 0xcb);
        EXPECT(gbc.readMem(0x9206), 0x17);
        // CB 17 03C8
        gbc.setState(0x2740, 0x553f, 0x7860, 0x35a8, 0xd766, 0x7efd, 0x1, 0x1);
        gbc.writeMem(0x2740, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x553f);
        EXPECT(gbc.pc(), 0x2742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03C9
        gbc.setState(0x8a86, 0xcea6, 0x1130, 0x6c6f, 0xda4c, 0xc154, 0x1, 0x0);
        gbc.writeMem(0x8a86, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xcea6);
        EXPECT(gbc.pc(), 0x8a88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a86), 0xcb);
        EXPECT(gbc.readMem(0x8a87), 0x17);
        // CB 17 03CA
        gbc.setState(0x2761, 0x538d, 0x6b80, 0x8349, 0xbfd4, 0x6bda, 0x1, 0x0);
        gbc.writeMem(0x2761, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x538d);
        EXPECT(gbc.pc(), 0x2763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03CB
        gbc.setState(0xcba0, 0xbb6a, 0x6360, 0x465e, 0x7372, 0x38ba, 0x0, 0x1);
        gbc.writeMem(0xcba0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbb6a);
        EXPECT(gbc.pc(), 0xcba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba0), 0xcb);
        EXPECT(gbc.readMem(0xcba1), 0x17);
        // CB 17 03CC
        gbc.setState(0xd60c, 0x71ab, 0x3430, 0x1188, 0x9d0a, 0x64e6, 0x1, 0x1);
        gbc.writeMem(0xd60c, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x71ab);
        EXPECT(gbc.pc(), 0xd60e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd60c), 0xcb);
        EXPECT(gbc.readMem(0xd60d), 0x17);
        // CB 17 03CD
        gbc.setState(0xd0c9, 0x7790, 0x9fc0, 0x2f31, 0x969f, 0xa5b5, 0x0, 0x0);
        gbc.writeMem(0xd0c9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7790);
        EXPECT(gbc.pc(), 0xd0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0c9), 0xcb);
        EXPECT(gbc.readMem(0xd0ca), 0x17);
        // CB 17 03CE
        gbc.setState(0xd44, 0xb68c, 0xc8b0, 0x9473, 0x4acb, 0x9648, 0x1, 0x1);
        gbc.writeMem(0xd44, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xb68c);
        EXPECT(gbc.pc(), 0xd46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03CF
        gbc.setState(0x3028, 0x7f18, 0xc2d0, 0xc598, 0xc015, 0xab3e, 0x1, 0x0);
        gbc.writeMem(0x3028, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x7f18);
        EXPECT(gbc.pc(), 0x302a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03D0
        gbc.setState(0x9cf5, 0x388a, 0xbc00, 0x2979, 0x2283, 0xd679, 0x0, 0x0);
        gbc.writeMem(0x9cf5, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x388a);
        EXPECT(gbc.pc(), 0x9cf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cf5), 0xcb);
        EXPECT(gbc.readMem(0x9cf6), 0x17);
        // CB 17 03D1
        gbc.setState(0x6ac9, 0x1ec7, 0xcd0, 0x7dc1, 0xdd4e, 0x844, 0x1, 0x0);
        gbc.writeMem(0x6ac9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x1ec7);
        EXPECT(gbc.pc(), 0x6acb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03D2
        gbc.setState(0x9078, 0x7ef5, 0xda50, 0xed88, 0x347a, 0xe0a4, 0x1, 0x1);
        gbc.writeMem(0x9078, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7ef5);
        EXPECT(gbc.pc(), 0x907a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9078), 0xcb);
        EXPECT(gbc.readMem(0x9079), 0x17);
        // CB 17 03D3
        gbc.setState(0xadf0, 0xd82, 0xc90, 0xc1ff, 0xf27f, 0x7e3a, 0x0, 0x1);
        gbc.writeMem(0xadf0, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd82);
        EXPECT(gbc.pc(), 0xadf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf0), 0xcb);
        EXPECT(gbc.readMem(0xadf1), 0x17);
        // CB 17 03D4
        gbc.setState(0xb0af, 0xdfd0, 0x54b0, 0x9e1d, 0x98e, 0x6cde, 0x1, 0x1);
        gbc.writeMem(0xb0af, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xdfd0);
        EXPECT(gbc.pc(), 0xb0b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0af), 0xcb);
        EXPECT(gbc.readMem(0xb0b0), 0x17);
        // CB 17 03D5
        gbc.setState(0x871b, 0x860e, 0xbb60, 0xae7f, 0xe77b, 0x71e6, 0x0, 0x0);
        gbc.writeMem(0x871b, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x860e);
        EXPECT(gbc.pc(), 0x871d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x871b), 0xcb);
        EXPECT(gbc.readMem(0x871c), 0x17);
        // CB 17 03D6
        gbc.setState(0x93ba, 0x649, 0xe9f0, 0xf1d6, 0x73a8, 0x1c82, 0x0, 0x1);
        gbc.writeMem(0x93ba, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x649);
        EXPECT(gbc.pc(), 0x93bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ba), 0xcb);
        EXPECT(gbc.readMem(0x93bb), 0x17);
        // CB 17 03D7
        gbc.setState(0xae27, 0xd831, 0x24e0, 0x480a, 0x289e, 0xa39f, 0x1, 0x0);
        gbc.writeMem(0xae27, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd831);
        EXPECT(gbc.pc(), 0xae29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae27), 0xcb);
        EXPECT(gbc.readMem(0xae28), 0x17);
        // CB 17 03D8
        gbc.setState(0x6f30, 0x94c8, 0x2a40, 0x6e93, 0x8800, 0x174e, 0x0, 0x0);
        gbc.writeMem(0x6f30, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x94c8);
        EXPECT(gbc.pc(), 0x6f32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03D9
        gbc.setState(0x7755, 0x2c50, 0xec20, 0x3be2, 0x30dd, 0x249a, 0x0, 0x0);
        gbc.writeMem(0x7755, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2c50);
        EXPECT(gbc.pc(), 0x7757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03DA
        gbc.setState(0xc02, 0x3d2f, 0x74c0, 0xdff3, 0x957d, 0x4ce0, 0x1, 0x1);
        gbc.writeMem(0xc02, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3d2f);
        EXPECT(gbc.pc(), 0xc04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03DB
        gbc.setState(0x61c9, 0x8c85, 0xa1c0, 0xfbc7, 0x1c63, 0x9edf, 0x1, 0x1);
        gbc.writeMem(0x61c9, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8c85);
        EXPECT(gbc.pc(), 0x61cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03DC
        gbc.setState(0x1954, 0x4d1f, 0x4e30, 0x19e0, 0x2764, 0x8c36, 0x0, 0x0);
        gbc.writeMem(0x1954, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4d1f);
        EXPECT(gbc.pc(), 0x1956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03DD
        gbc.setState(0x9812, 0x9ab0, 0x7f40, 0x853c, 0x7949, 0xca28, 0x1, 0x1);
        gbc.writeMem(0x9812, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9ab0);
        EXPECT(gbc.pc(), 0x9814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9812), 0xcb);
        EXPECT(gbc.readMem(0x9813), 0x17);
        // CB 17 03DE
        gbc.setState(0x5657, 0xafe7, 0xe600, 0xc54, 0x8e1f, 0x2b49, 0x0, 0x1);
        gbc.writeMem(0x5657, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xafe7);
        EXPECT(gbc.pc(), 0x5659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03DF
        gbc.setState(0x6d00, 0x1361, 0xcd40, 0x2e17, 0x4f36, 0x3fb3, 0x0, 0x0);
        gbc.writeMem(0x6d00, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1361);
        EXPECT(gbc.pc(), 0x6d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03E0
        gbc.setState(0x42cc, 0x4ff4, 0xe330, 0x241f, 0xa205, 0x2cda, 0x1, 0x1);
        gbc.writeMem(0x42cc, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4ff4);
        EXPECT(gbc.pc(), 0x42ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03E1
        gbc.setState(0xc778, 0x7fdf, 0x8c70, 0x4494, 0xe5dd, 0xf36f, 0x0, 0x0);
        gbc.writeMem(0xc778, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7fdf);
        EXPECT(gbc.pc(), 0xc77a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc778), 0xcb);
        EXPECT(gbc.readMem(0xc779), 0x17);
        // CB 17 03E2
        gbc.setState(0xa0ae, 0xc340, 0xfe80, 0x7552, 0xbc8f, 0x1f1, 0x0, 0x0);
        gbc.writeMem(0xa0ae, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc340);
        EXPECT(gbc.pc(), 0xa0b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ae), 0xcb);
        EXPECT(gbc.readMem(0xa0af), 0x17);
        // CB 17 03E3
        gbc.setState(0x548a, 0x1bbd, 0x4990, 0x2319, 0x6cfe, 0xbac4, 0x0, 0x0);
        gbc.writeMem(0x548a, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1bbd);
        EXPECT(gbc.pc(), 0x548c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 17 03E6
        gbc.setState(0x16e7, 0xae5f, 0x9a60, 0xdcb3, 0xc0f1, 0xe131, 0x0, 0x1);
        gbc.writeMem(0x16e7, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xae5f);
        EXPECT(gbc.pc(), 0x16e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 17 03E7
        gbc.setState(0x5eb2, 0x5284, 0x2d00, 0x7348, 0xf140, 0xf27e, 0x1, 0x0);
        gbc.writeMem(0x5eb2, { 0xcb, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5284);
        EXPECT(gbc.pc(), 0x5eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
