    TEST(gbcemu, opcode_fb) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // FB 0000
        gbc.setState(0x96b9, 0xfba3, 0x1f60, 0x250d, 0xfc27, 0xd333, 0x0, 0x0);
        gbc.writeMem(0x96b9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfba3);
        EXPECT(gbc.pc(), 0x96ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96b9), 0xfb);
        // FB 0001
        gbc.setState(0x333f, 0x974e, 0x790, 0xfd93, 0x524f, 0x1807, 0x0, 0x0);
        gbc.writeMem(0x333f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x974e);
        EXPECT(gbc.pc(), 0x3340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0002
        gbc.setState(0xc1e3, 0x1692, 0x2710, 0x4cb6, 0x6c02, 0xe7bb, 0x1, 0x0);
        gbc.writeMem(0xc1e3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1692);
        EXPECT(gbc.pc(), 0xc1e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1e3), 0xfb);
        // FB 0003
        gbc.setState(0x1296, 0xfd4f, 0x35f0, 0xe3ec, 0x57e4, 0xa1e4, 0x0, 0x0);
        gbc.writeMem(0x1296, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfd4f);
        EXPECT(gbc.pc(), 0x1297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0005
        gbc.setState(0x3a2d, 0x9519, 0xd6a0, 0x1944, 0x9894, 0xd962, 0x0, 0x1);
        gbc.writeMem(0x3a2d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9519);
        EXPECT(gbc.pc(), 0x3a2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0006
        gbc.setState(0xe2a0, 0x5b53, 0x5060, 0xb3d7, 0xefbb, 0x3c6b, 0x1, 0x0);
        gbc.writeMem(0xe2a0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5b53);
        EXPECT(gbc.pc(), 0xe2a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2a0), 0xfb);
        // FB 0007
        gbc.setState(0x4760, 0x86cc, 0x9d50, 0x34d7, 0x9e15, 0xd8bd, 0x1, 0x1);
        gbc.writeMem(0x4760, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x86cc);
        EXPECT(gbc.pc(), 0x4761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0008
        gbc.setState(0x2c2e, 0x357a, 0x9370, 0x643f, 0x617e, 0xb936, 0x1, 0x1);
        gbc.writeMem(0x2c2e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x357a);
        EXPECT(gbc.pc(), 0x2c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 000A
        gbc.setState(0x4052, 0x6b0d, 0xf9a0, 0x97f7, 0x2abd, 0x8622, 0x1, 0x0);
        gbc.writeMem(0x4052, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6b0d);
        EXPECT(gbc.pc(), 0x4053);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 000B
        gbc.setState(0xe4fe, 0x553e, 0x7a10, 0xac62, 0x8bc4, 0x588b, 0x1, 0x0);
        gbc.writeMem(0xe4fe, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x553e);
        EXPECT(gbc.pc(), 0xe4ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4fe), 0xfb);
        // FB 000C
        gbc.setState(0xc5d, 0xab96, 0x1df0, 0xcb36, 0xb9fe, 0x1cec, 0x0, 0x1);
        gbc.writeMem(0xc5d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xab96);
        EXPECT(gbc.pc(), 0xc5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 000D
        gbc.setState(0xe9a, 0x2d2, 0x3e20, 0xcee9, 0xde2c, 0x9d3b, 0x1, 0x1);
        gbc.writeMem(0xe9a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2d2);
        EXPECT(gbc.pc(), 0xe9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 000E
        gbc.setState(0xd3f4, 0x5b1b, 0x5d10, 0x7189, 0x45d0, 0x5e5b, 0x1, 0x1);
        gbc.writeMem(0xd3f4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5b1b);
        EXPECT(gbc.pc(), 0xd3f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3f4), 0xfb);
        // FB 000F
        gbc.setState(0xa964, 0x74d3, 0x76e0, 0xa128, 0xb772, 0xfebd, 0x1, 0x1);
        gbc.writeMem(0xa964, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x74d3);
        EXPECT(gbc.pc(), 0xa965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa964), 0xfb);
        // FB 0010
        gbc.setState(0x59db, 0x972, 0xeec0, 0x8d54, 0x9ccd, 0x12b1, 0x0, 0x0);
        gbc.writeMem(0x59db, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x972);
        EXPECT(gbc.pc(), 0x59dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0011
        gbc.setState(0x84c7, 0xa314, 0x6410, 0xef94, 0x88bb, 0x1d8a, 0x0, 0x1);
        gbc.writeMem(0x84c7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa314);
        EXPECT(gbc.pc(), 0x84c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c7), 0xfb);
        // FB 0012
        gbc.setState(0x322e, 0x4be3, 0x2e10, 0x1028, 0xbf9f, 0x5c7f, 0x1, 0x1);
        gbc.writeMem(0x322e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4be3);
        EXPECT(gbc.pc(), 0x322f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0013
        gbc.setState(0x8c8d, 0xc5aa, 0x630, 0x94b5, 0x2702, 0x37da, 0x0, 0x0);
        gbc.writeMem(0x8c8d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc5aa);
        EXPECT(gbc.pc(), 0x8c8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c8d), 0xfb);
        // FB 0014
        gbc.setState(0x880b, 0x242f, 0xe480, 0x78ca, 0xc46a, 0x43be, 0x0, 0x0);
        gbc.writeMem(0x880b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x242f);
        EXPECT(gbc.pc(), 0x880c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x880b), 0xfb);
        // FB 0015
        gbc.setState(0xd746, 0x5702, 0xfda0, 0xf5a8, 0x22ec, 0xb9c0, 0x0, 0x0);
        gbc.writeMem(0xd746, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5702);
        EXPECT(gbc.pc(), 0xd747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd746), 0xfb);
        // FB 0016
        gbc.setState(0xc8e5, 0xc174, 0xe5a0, 0x80db, 0x2a52, 0x4ced, 0x0, 0x1);
        gbc.writeMem(0xc8e5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc174);
        EXPECT(gbc.pc(), 0xc8e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e5), 0xfb);
        // FB 0017
        gbc.setState(0xc977, 0x9709, 0x3c70, 0x926a, 0x7bcf, 0x1358, 0x0, 0x0);
        gbc.writeMem(0xc977, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9709);
        EXPECT(gbc.pc(), 0xc978);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc977), 0xfb);
        // FB 0018
        gbc.setState(0xc6cc, 0x6891, 0xf90, 0x51c6, 0x5991, 0xe4a9, 0x1, 0x1);
        gbc.writeMem(0xc6cc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6891);
        EXPECT(gbc.pc(), 0xc6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6cc), 0xfb);
        // FB 0019
        gbc.setState(0x6ac7, 0x8e05, 0xa2f0, 0xab7b, 0x453f, 0xc68c, 0x0, 0x0);
        gbc.writeMem(0x6ac7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8e05);
        EXPECT(gbc.pc(), 0x6ac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 001A
        gbc.setState(0x5768, 0xc29, 0x11d0, 0x8dae, 0xb737, 0xa1ad, 0x0, 0x0);
        gbc.writeMem(0x5768, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc29);
        EXPECT(gbc.pc(), 0x5769);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 001B
        gbc.setState(0xad1f, 0x59e5, 0x9340, 0x7ed8, 0xfba8, 0xc9ea, 0x0, 0x1);
        gbc.writeMem(0xad1f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x59e5);
        EXPECT(gbc.pc(), 0xad20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1f), 0xfb);
        // FB 001C
        gbc.setState(0x4efb, 0x4157, 0x9050, 0x6c74, 0xdc3e, 0x89f2, 0x1, 0x0);
        gbc.writeMem(0x4efb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4157);
        EXPECT(gbc.pc(), 0x4efc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 001D
        gbc.setState(0x187e, 0xf2d4, 0x3e80, 0x848b, 0x700, 0x7984, 0x0, 0x0);
        gbc.writeMem(0x187e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf2d4);
        EXPECT(gbc.pc(), 0x187f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 001E
        gbc.setState(0xa650, 0x70c4, 0x6bc0, 0x8a02, 0xcf0c, 0xde55, 0x1, 0x1);
        gbc.writeMem(0xa650, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x70c4);
        EXPECT(gbc.pc(), 0xa651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa650), 0xfb);
        // FB 001F
        gbc.setState(0x87ae, 0xc360, 0xfbf0, 0xcb99, 0x85fd, 0x45ac, 0x1, 0x0);
        gbc.writeMem(0x87ae, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc360);
        EXPECT(gbc.pc(), 0x87af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87ae), 0xfb);
        // FB 0020
        gbc.setState(0x6e79, 0xcac, 0xed90, 0x6b41, 0x5ba7, 0xb5d0, 0x1, 0x1);
        gbc.writeMem(0x6e79, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xcac);
        EXPECT(gbc.pc(), 0x6e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0021
        gbc.setState(0xbe26, 0xfbd, 0xa9f0, 0x4075, 0x28f1, 0xd3eb, 0x1, 0x0);
        gbc.writeMem(0xbe26, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfbd);
        EXPECT(gbc.pc(), 0xbe27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe26), 0xfb);
        // FB 0022
        gbc.setState(0x60c1, 0x470e, 0x9390, 0x3bc4, 0xa7bb, 0x6248, 0x1, 0x0);
        gbc.writeMem(0x60c1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x470e);
        EXPECT(gbc.pc(), 0x60c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0023
        gbc.setState(0x6efb, 0x1165, 0x5e0, 0xe3aa, 0xb51, 0xc848, 0x0, 0x0);
        gbc.writeMem(0x6efb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1165);
        EXPECT(gbc.pc(), 0x6efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0024
        gbc.setState(0x4d99, 0x66a6, 0xdaa0, 0xa840, 0x416c, 0x1d4d, 0x0, 0x0);
        gbc.writeMem(0x4d99, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x66a6);
        EXPECT(gbc.pc(), 0x4d9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0025
        gbc.setState(0xd063, 0x2726, 0xc7a0, 0x5370, 0x61a8, 0xb893, 0x1, 0x0);
        gbc.writeMem(0xd063, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2726);
        EXPECT(gbc.pc(), 0xd064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd063), 0xfb);
        // FB 0026
        gbc.setState(0x90d5, 0xedf8, 0x6390, 0xb209, 0xa33a, 0x8f98, 0x0, 0x1);
        gbc.writeMem(0x90d5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xedf8);
        EXPECT(gbc.pc(), 0x90d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d5), 0xfb);
        // FB 0027
        gbc.setState(0x135e, 0x985b, 0x4270, 0xc4f0, 0x98c8, 0x5cdb, 0x1, 0x0);
        gbc.writeMem(0x135e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x985b);
        EXPECT(gbc.pc(), 0x135f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0028
        gbc.setState(0x676f, 0xdec3, 0x290, 0xe0bb, 0x5cdc, 0x6e01, 0x0, 0x1);
        gbc.writeMem(0x676f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xdec3);
        EXPECT(gbc.pc(), 0x6770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0029
        gbc.setState(0x6efe, 0x1346, 0x6d40, 0x8770, 0xfdab, 0x8c14, 0x0, 0x0);
        gbc.writeMem(0x6efe, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1346);
        EXPECT(gbc.pc(), 0x6eff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 002A
        gbc.setState(0x3bf9, 0x769, 0x56c0, 0xbfa1, 0xf2f7, 0x376b, 0x1, 0x1);
        gbc.writeMem(0x3bf9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x769);
        EXPECT(gbc.pc(), 0x3bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 002B
        gbc.setState(0x70a4, 0x5f53, 0x9e70, 0xfecf, 0xed40, 0x6992, 0x0, 0x0);
        gbc.writeMem(0x70a4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5f53);
        EXPECT(gbc.pc(), 0x70a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 002C
        gbc.setState(0x850e, 0xa1d9, 0x8a80, 0x7dce, 0x2984, 0x8d44, 0x1, 0x1);
        gbc.writeMem(0x850e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa1d9);
        EXPECT(gbc.pc(), 0x850f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850e), 0xfb);
        // FB 002D
        gbc.setState(0x4e25, 0xffa0, 0xb480, 0x6ddb, 0x218c, 0x3b02, 0x0, 0x1);
        gbc.writeMem(0x4e25, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xffa0);
        EXPECT(gbc.pc(), 0x4e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 002E
        gbc.setState(0xae35, 0x4aaa, 0x9100, 0xcc1a, 0x5462, 0x54db, 0x1, 0x0);
        gbc.writeMem(0xae35, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4aaa);
        EXPECT(gbc.pc(), 0xae36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae35), 0xfb);
        // FB 002F
        gbc.setState(0xf0f, 0xf48a, 0x2190, 0x1337, 0xae61, 0x10b1, 0x1, 0x1);
        gbc.writeMem(0xf0f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf48a);
        EXPECT(gbc.pc(), 0xf10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0030
        gbc.setState(0x8751, 0x175, 0xdb30, 0xd8c2, 0xff4a, 0x420, 0x1, 0x1);
        gbc.writeMem(0x8751, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x175);
        EXPECT(gbc.pc(), 0x8752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8751), 0xfb);
        // FB 0031
        gbc.setState(0xaabc, 0xd272, 0x6db0, 0xdef0, 0xd3e3, 0x73b0, 0x0, 0x0);
        gbc.writeMem(0xaabc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd272);
        EXPECT(gbc.pc(), 0xaabd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaabc), 0xfb);
        // FB 0032
        gbc.setState(0x6f78, 0x5cc4, 0xd9c0, 0x7dfe, 0xd34d, 0x4023, 0x0, 0x0);
        gbc.writeMem(0x6f78, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5cc4);
        EXPECT(gbc.pc(), 0x6f79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0033
        gbc.setState(0x73f6, 0xc5db, 0x6cf0, 0x1344, 0xda92, 0x6811, 0x1, 0x0);
        gbc.writeMem(0x73f6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc5db);
        EXPECT(gbc.pc(), 0x73f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0034
        gbc.setState(0x57b0, 0xbfc3, 0xda50, 0x9f77, 0xe141, 0xc1cf, 0x1, 0x0);
        gbc.writeMem(0x57b0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xbfc3);
        EXPECT(gbc.pc(), 0x57b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0035
        gbc.setState(0x3c8e, 0xce69, 0xe160, 0x5a0b, 0xee61, 0xd20f, 0x1, 0x0);
        gbc.writeMem(0x3c8e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xce69);
        EXPECT(gbc.pc(), 0x3c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0036
        gbc.setState(0x6484, 0x9a84, 0x5230, 0xb59c, 0xc437, 0x4532, 0x0, 0x1);
        gbc.writeMem(0x6484, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9a84);
        EXPECT(gbc.pc(), 0x6485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0037
        gbc.setState(0xdb36, 0xbc94, 0xc030, 0x3be1, 0x37fb, 0x6d7, 0x1, 0x0);
        gbc.writeMem(0xdb36, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xbc94);
        EXPECT(gbc.pc(), 0xdb37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb36), 0xfb);
        // FB 0038
        gbc.setState(0x796b, 0x379d, 0xeeb0, 0x5c73, 0x2989, 0x8aef, 0x0, 0x1);
        gbc.writeMem(0x796b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x379d);
        EXPECT(gbc.pc(), 0x796c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0039
        gbc.setState(0x3a32, 0x9844, 0x1680, 0x8b48, 0xd701, 0x448f, 0x1, 0x0);
        gbc.writeMem(0x3a32, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9844);
        EXPECT(gbc.pc(), 0x3a33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 003B
        gbc.setState(0x3c5c, 0xc385, 0xd880, 0xd34f, 0x3b57, 0x6a3, 0x0, 0x1);
        gbc.writeMem(0x3c5c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc385);
        EXPECT(gbc.pc(), 0x3c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 003C
        gbc.setState(0xcf21, 0x4afb, 0x5370, 0xf104, 0x8bc6, 0xbadc, 0x1, 0x1);
        gbc.writeMem(0xcf21, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4afb);
        EXPECT(gbc.pc(), 0xcf22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf21), 0xfb);
        // FB 003D
        gbc.setState(0xd49, 0xb78e, 0xf430, 0x78e7, 0x55d7, 0x1fb3, 0x0, 0x1);
        gbc.writeMem(0xd49, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb78e);
        EXPECT(gbc.pc(), 0xd4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 003E
        gbc.setState(0xd850, 0x24fb, 0xa410, 0xf1b9, 0x9c9f, 0x1d7a, 0x0, 0x0);
        gbc.writeMem(0xd850, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x24fb);
        EXPECT(gbc.pc(), 0xd851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd850), 0xfb);
        // FB 003F
        gbc.setState(0xecbd, 0x451b, 0x3640, 0x26b6, 0x3d04, 0xb64f, 0x0, 0x0);
        gbc.writeMem(0xecbd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x451b);
        EXPECT(gbc.pc(), 0xecbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbd), 0xfb);
        // FB 0040
        gbc.setState(0x2600, 0x67ee, 0x8d20, 0xd559, 0x9821, 0xd47c, 0x0, 0x0);
        gbc.writeMem(0x2600, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x67ee);
        EXPECT(gbc.pc(), 0x2601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0041
        gbc.setState(0x3b50, 0xd661, 0xb9c0, 0x5736, 0x3e60, 0x9b27, 0x0, 0x1);
        gbc.writeMem(0x3b50, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd661);
        EXPECT(gbc.pc(), 0x3b51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0042
        gbc.setState(0x6b99, 0x3d41, 0x8cb0, 0x98ae, 0xd08e, 0xab41, 0x0, 0x0);
        gbc.writeMem(0x6b99, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3d41);
        EXPECT(gbc.pc(), 0x6b9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0043
        gbc.setState(0xdbfa, 0xe123, 0x1650, 0x5000, 0x745, 0xfedf, 0x0, 0x0);
        gbc.writeMem(0xdbfa, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe123);
        EXPECT(gbc.pc(), 0xdbfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbfa), 0xfb);
        // FB 0044
        gbc.setState(0x485d, 0x5fb, 0xcf10, 0x544b, 0xca1f, 0xa4f6, 0x0, 0x0);
        gbc.writeMem(0x485d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5fb);
        EXPECT(gbc.pc(), 0x485e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0045
        gbc.setState(0xe6ac, 0x45b1, 0x3c00, 0x2bc7, 0x187b, 0xb4a1, 0x0, 0x1);
        gbc.writeMem(0xe6ac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x45b1);
        EXPECT(gbc.pc(), 0xe6ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ac), 0xfb);
        // FB 0046
        gbc.setState(0xc9db, 0x6577, 0x73d0, 0xd3c3, 0x7f4b, 0x5b94, 0x0, 0x1);
        gbc.writeMem(0xc9db, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6577);
        EXPECT(gbc.pc(), 0xc9dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9db), 0xfb);
        // FB 0047
        gbc.setState(0x2ac2, 0x6709, 0xec90, 0x8d0, 0xb834, 0x3a04, 0x1, 0x1);
        gbc.writeMem(0x2ac2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6709);
        EXPECT(gbc.pc(), 0x2ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0048
        gbc.setState(0x1db9, 0x1139, 0xa190, 0x6c19, 0x2ede, 0x9eea, 0x0, 0x0);
        gbc.writeMem(0x1db9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1139);
        EXPECT(gbc.pc(), 0x1dba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0049
        gbc.setState(0xde5, 0xb614, 0x15a0, 0x8a45, 0x6a55, 0xfe3, 0x1, 0x0);
        gbc.writeMem(0xde5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xb614);
        EXPECT(gbc.pc(), 0xde6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 004A
        gbc.setState(0xd9ef, 0xe39, 0x3e50, 0x70d7, 0x6464, 0xe618, 0x1, 0x1);
        gbc.writeMem(0xd9ef, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe39);
        EXPECT(gbc.pc(), 0xd9f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ef), 0xfb);
        // FB 004B
        gbc.setState(0x197e, 0xad12, 0xb690, 0x3f9f, 0x47c3, 0xd4c4, 0x0, 0x0);
        gbc.writeMem(0x197e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xad12);
        EXPECT(gbc.pc(), 0x197f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 004C
        gbc.setState(0xb13b, 0xb996, 0x6d40, 0xbc21, 0x3649, 0x11d6, 0x1, 0x0);
        gbc.writeMem(0xb13b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb996);
        EXPECT(gbc.pc(), 0xb13c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb13b), 0xfb);
        // FB 004D
        gbc.setState(0x65f6, 0x72c4, 0x43a0, 0x3cf9, 0x85f4, 0xd2c6, 0x1, 0x1);
        gbc.writeMem(0x65f6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x72c4);
        EXPECT(gbc.pc(), 0x65f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 004E
        gbc.setState(0x4210, 0x56d4, 0x8ab0, 0x7f5d, 0xe2c8, 0x9479, 0x0, 0x0);
        gbc.writeMem(0x4210, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x56d4);
        EXPECT(gbc.pc(), 0x4211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 004F
        gbc.setState(0x347b, 0x6974, 0x46a0, 0x656c, 0xd5d6, 0x3438, 0x0, 0x1);
        gbc.writeMem(0x347b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6974);
        EXPECT(gbc.pc(), 0x347c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0050
        gbc.setState(0x80c0, 0xb2af, 0xdf30, 0x29ca, 0x23b9, 0xfbb8, 0x0, 0x0);
        gbc.writeMem(0x80c0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb2af);
        EXPECT(gbc.pc(), 0x80c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c0), 0xfb);
        // FB 0051
        gbc.setState(0x6e64, 0xa48a, 0x3b0, 0x49e0, 0xa49a, 0x8ab0, 0x0, 0x1);
        gbc.writeMem(0x6e64, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa48a);
        EXPECT(gbc.pc(), 0x6e65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0052
        gbc.setState(0xd872, 0xbcbc, 0xa320, 0xe78e, 0x1135, 0xa41f, 0x0, 0x1);
        gbc.writeMem(0xd872, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xbcbc);
        EXPECT(gbc.pc(), 0xd873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd872), 0xfb);
        // FB 0053
        gbc.setState(0xcdc, 0xe964, 0xbb70, 0x8da7, 0xd9db, 0x25d, 0x1, 0x0);
        gbc.writeMem(0xcdc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe964);
        EXPECT(gbc.pc(), 0xcdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0054
        gbc.setState(0x3125, 0xc610, 0x63f0, 0x5cef, 0x7e97, 0xf206, 0x1, 0x0);
        gbc.writeMem(0x3125, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc610);
        EXPECT(gbc.pc(), 0x3126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0055
        gbc.setState(0xaea1, 0x18e2, 0x7430, 0x35ab, 0x27e5, 0xc493, 0x1, 0x0);
        gbc.writeMem(0xaea1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x18e2);
        EXPECT(gbc.pc(), 0xaea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaea1), 0xfb);
        // FB 0056
        gbc.setState(0x9f72, 0x4d8f, 0x5fe0, 0x72ab, 0x728e, 0xca5b, 0x1, 0x0);
        gbc.writeMem(0x9f72, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4d8f);
        EXPECT(gbc.pc(), 0x9f73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f72), 0xfb);
        // FB 0057
        gbc.setState(0xa5e8, 0xa3fc, 0x4b0, 0x6c30, 0xb219, 0x3633, 0x1, 0x1);
        gbc.writeMem(0xa5e8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa3fc);
        EXPECT(gbc.pc(), 0xa5e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5e8), 0xfb);
        // FB 0058
        gbc.setState(0x4032, 0xe20c, 0x6650, 0xacdf, 0x6d23, 0xfbd9, 0x0, 0x0);
        gbc.writeMem(0x4032, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe20c);
        EXPECT(gbc.pc(), 0x4033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0059
        gbc.setState(0x94b7, 0xd12e, 0xf4a0, 0x2eb8, 0x2cf1, 0x6ee1, 0x0, 0x0);
        gbc.writeMem(0x94b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd12e);
        EXPECT(gbc.pc(), 0x94b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94b7), 0xfb);
        // FB 005A
        gbc.setState(0x9ae0, 0x3f0b, 0xc100, 0xa319, 0x8fb5, 0x1268, 0x1, 0x1);
        gbc.writeMem(0x9ae0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3f0b);
        EXPECT(gbc.pc(), 0x9ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae0), 0xfb);
        // FB 005B
        gbc.setState(0x9b28, 0xa800, 0x5c80, 0x189, 0xfa6f, 0xf241, 0x0, 0x0);
        gbc.writeMem(0x9b28, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa800);
        EXPECT(gbc.pc(), 0x9b29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b28), 0xfb);
        // FB 005C
        gbc.setState(0xc787, 0x641d, 0x7210, 0x17cc, 0xe5cf, 0x7e32, 0x1, 0x1);
        gbc.writeMem(0xc787, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x641d);
        EXPECT(gbc.pc(), 0xc788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc787), 0xfb);
        // FB 005D
        gbc.setState(0x22a6, 0xcd2d, 0xe620, 0xd712, 0x847f, 0x26c7, 0x1, 0x1);
        gbc.writeMem(0x22a6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcd2d);
        EXPECT(gbc.pc(), 0x22a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 005E
        gbc.setState(0x79d4, 0x51e7, 0x61d0, 0xe4ee, 0x5659, 0xdbf2, 0x0, 0x0);
        gbc.writeMem(0x79d4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x51e7);
        EXPECT(gbc.pc(), 0x79d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 005F
        gbc.setState(0xb668, 0x2c99, 0x6110, 0x4779, 0x3b22, 0xac91, 0x1, 0x0);
        gbc.writeMem(0xb668, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2c99);
        EXPECT(gbc.pc(), 0xb669);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb668), 0xfb);
        // FB 0060
        gbc.setState(0xa696, 0x68ec, 0x860, 0xa748, 0xbd59, 0xee2b, 0x1, 0x1);
        gbc.writeMem(0xa696, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x68ec);
        EXPECT(gbc.pc(), 0xa697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa696), 0xfb);
        // FB 0061
        gbc.setState(0x7fa6, 0x6ad7, 0xefe0, 0xb7a6, 0x5991, 0xadf7, 0x1, 0x0);
        gbc.writeMem(0x7fa6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6ad7);
        EXPECT(gbc.pc(), 0x7fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0062
        gbc.setState(0xb79b, 0xfece, 0x68a0, 0x20a1, 0x4f77, 0x3992, 0x0, 0x1);
        gbc.writeMem(0xb79b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfece);
        EXPECT(gbc.pc(), 0xb79c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79b), 0xfb);
        // FB 0063
        gbc.setState(0xe130, 0x473c, 0xe620, 0x9105, 0x42fc, 0xc41c, 0x1, 0x1);
        gbc.writeMem(0xe130, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x473c);
        EXPECT(gbc.pc(), 0xe131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe130), 0xfb);
        // FB 0064
        gbc.setState(0x2f6a, 0x8852, 0x81a0, 0xc9cb, 0x595c, 0x858b, 0x1, 0x1);
        gbc.writeMem(0x2f6a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8852);
        EXPECT(gbc.pc(), 0x2f6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0066
        gbc.setState(0xb9b5, 0x9314, 0xcf70, 0x2c7d, 0xcd5f, 0x5594, 0x1, 0x0);
        gbc.writeMem(0xb9b5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9314);
        EXPECT(gbc.pc(), 0xb9b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b5), 0xfb);
        // FB 0067
        gbc.setState(0xb4c8, 0xfd43, 0x2850, 0x6dcc, 0xab95, 0xb28a, 0x1, 0x1);
        gbc.writeMem(0xb4c8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfd43);
        EXPECT(gbc.pc(), 0xb4c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4c8), 0xfb);
        // FB 0068
        gbc.setState(0x5978, 0x8cc0, 0x4280, 0xb0e5, 0xa26f, 0x4bd8, 0x0, 0x0);
        gbc.writeMem(0x5978, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x8cc0);
        EXPECT(gbc.pc(), 0x5979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0069
        gbc.setState(0x5a0, 0x95a1, 0xf590, 0x5126, 0x8171, 0x30b0, 0x0, 0x0);
        gbc.writeMem(0x5a0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x95a1);
        EXPECT(gbc.pc(), 0x5a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 006A
        gbc.setState(0x197e, 0x8a17, 0xbd50, 0xabf3, 0xb1bb, 0x459c, 0x1, 0x0);
        gbc.writeMem(0x197e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8a17);
        EXPECT(gbc.pc(), 0x197f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 006B
        gbc.setState(0xdcb2, 0x459e, 0x7c50, 0x6b6f, 0xd61c, 0x6102, 0x0, 0x1);
        gbc.writeMem(0xdcb2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x459e);
        EXPECT(gbc.pc(), 0xdcb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb2), 0xfb);
        // FB 006C
        gbc.setState(0x1e67, 0x654c, 0x640, 0x107a, 0x25d3, 0x7f91, 0x1, 0x1);
        gbc.writeMem(0x1e67, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x654c);
        EXPECT(gbc.pc(), 0x1e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 006D
        gbc.setState(0x5386, 0xa700, 0xbc0, 0x940c, 0x5ecd, 0x9ddb, 0x1, 0x0);
        gbc.writeMem(0x5386, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa700);
        EXPECT(gbc.pc(), 0x5387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 006E
        gbc.setState(0x10c3, 0xf871, 0x6e30, 0xbef5, 0x8db0, 0xeb58, 0x1, 0x0);
        gbc.writeMem(0x10c3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf871);
        EXPECT(gbc.pc(), 0x10c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 006F
        gbc.setState(0xe903, 0x6bcc, 0x5100, 0x8a7c, 0xc0fa, 0x3df2, 0x0, 0x1);
        gbc.writeMem(0xe903, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6bcc);
        EXPECT(gbc.pc(), 0xe904);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe903), 0xfb);
        // FB 0070
        gbc.setState(0x9571, 0x642a, 0xcb0, 0x9f89, 0x1d66, 0xa041, 0x0, 0x0);
        gbc.writeMem(0x9571, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x642a);
        EXPECT(gbc.pc(), 0x9572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9571), 0xfb);
        // FB 0071
        gbc.setState(0xae3c, 0x4b22, 0x19f0, 0x393f, 0x3e31, 0x4243, 0x0, 0x1);
        gbc.writeMem(0xae3c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4b22);
        EXPECT(gbc.pc(), 0xae3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae3c), 0xfb);
        // FB 0073
        gbc.setState(0x244f, 0x6d79, 0x7880, 0x4312, 0xf700, 0xadf2, 0x1, 0x1);
        gbc.writeMem(0x244f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6d79);
        EXPECT(gbc.pc(), 0x2450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0074
        gbc.setState(0x4e5f, 0xfb8b, 0xd4f0, 0x12f2, 0xa787, 0x8c6d, 0x0, 0x1);
        gbc.writeMem(0x4e5f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfb8b);
        EXPECT(gbc.pc(), 0x4e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0075
        gbc.setState(0x2df2, 0x12e4, 0x6390, 0x7109, 0xb3ef, 0x9b18, 0x0, 0x1);
        gbc.writeMem(0x2df2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x12e4);
        EXPECT(gbc.pc(), 0x2df3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0077
        gbc.setState(0x994b, 0xbc8, 0x29b0, 0x6e1a, 0x63c2, 0x5b51, 0x1, 0x1);
        gbc.writeMem(0x994b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbc8);
        EXPECT(gbc.pc(), 0x994c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x994b), 0xfb);
        // FB 0079
        gbc.setState(0x9fa, 0x2fb8, 0xcfb0, 0xad3e, 0x4f1b, 0xe105, 0x0, 0x1);
        gbc.writeMem(0x9fa, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2fb8);
        EXPECT(gbc.pc(), 0x9fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 007A
        gbc.setState(0x9bac, 0x694f, 0xfbc0, 0x11a8, 0xd8e4, 0x4a06, 0x0, 0x0);
        gbc.writeMem(0x9bac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x694f);
        EXPECT(gbc.pc(), 0x9bad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bac), 0xfb);
        // FB 007B
        gbc.setState(0x258d, 0x129a, 0xc790, 0x535c, 0xcbf2, 0xfa02, 0x1, 0x0);
        gbc.writeMem(0x258d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x129a);
        EXPECT(gbc.pc(), 0x258e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 007C
        gbc.setState(0xa6d, 0xa929, 0x8070, 0x9ac1, 0x8989, 0xb828, 0x0, 0x0);
        gbc.writeMem(0xa6d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xa929);
        EXPECT(gbc.pc(), 0xa6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 007D
        gbc.setState(0x8635, 0xe55d, 0xb770, 0xa959, 0xadaa, 0x1e59, 0x1, 0x0);
        gbc.writeMem(0x8635, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xe55d);
        EXPECT(gbc.pc(), 0x8636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8635), 0xfb);
        // FB 007E
        gbc.setState(0xc2e6, 0x51d9, 0x40c0, 0x59c0, 0x50d, 0xe5cd, 0x1, 0x1);
        gbc.writeMem(0xc2e6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x51d9);
        EXPECT(gbc.pc(), 0xc2e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2e6), 0xfb);
        // FB 007F
        gbc.setState(0x9f2d, 0xbe3b, 0x45b0, 0x5bba, 0x5cf1, 0xaf69, 0x0, 0x0);
        gbc.writeMem(0x9f2d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbe3b);
        EXPECT(gbc.pc(), 0x9f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f2d), 0xfb);
        // FB 0080
        gbc.setState(0xe454, 0x817d, 0xa2c0, 0xe080, 0xf0df, 0x5741, 0x0, 0x1);
        gbc.writeMem(0xe454, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x817d);
        EXPECT(gbc.pc(), 0xe455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe454), 0xfb);
        // FB 0081
        gbc.setState(0xe454, 0x53b7, 0xd050, 0x1a95, 0xb45e, 0xb7aa, 0x1, 0x1);
        gbc.writeMem(0xe454, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x53b7);
        EXPECT(gbc.pc(), 0xe455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe454), 0xfb);
        // FB 0082
        gbc.setState(0xd3b9, 0x72b0, 0x28e0, 0x3b6a, 0x18aa, 0xfc79, 0x1, 0x1);
        gbc.writeMem(0xd3b9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x72b0);
        EXPECT(gbc.pc(), 0xd3ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b9), 0xfb);
        // FB 0083
        gbc.setState(0x21cf, 0xd3d8, 0x4840, 0xe904, 0x4356, 0x4c5e, 0x1, 0x0);
        gbc.writeMem(0x21cf, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd3d8);
        EXPECT(gbc.pc(), 0x21d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0084
        gbc.setState(0x7d89, 0x13d4, 0x3510, 0x688c, 0x117d, 0xc625, 0x0, 0x1);
        gbc.writeMem(0x7d89, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x13d4);
        EXPECT(gbc.pc(), 0x7d8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0085
        gbc.setState(0x821a, 0x8289, 0x9e40, 0x199d, 0x406f, 0x942c, 0x0, 0x1);
        gbc.writeMem(0x821a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8289);
        EXPECT(gbc.pc(), 0x821b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821a), 0xfb);
        // FB 0086
        gbc.setState(0xe69f, 0x2085, 0x8e40, 0xbb27, 0x4337, 0xd27e, 0x0, 0x0);
        gbc.writeMem(0xe69f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2085);
        EXPECT(gbc.pc(), 0xe6a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe69f), 0xfb);
        // FB 0087
        gbc.setState(0x4124, 0xff5b, 0x6170, 0x8a6b, 0xe78, 0x52db, 0x1, 0x0);
        gbc.writeMem(0x4124, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xff5b);
        EXPECT(gbc.pc(), 0x4125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0088
        gbc.setState(0x3d07, 0xccce, 0xac50, 0x581c, 0xffb9, 0x6934, 0x0, 0x0);
        gbc.writeMem(0x3d07, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xccce);
        EXPECT(gbc.pc(), 0x3d08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0089
        gbc.setState(0xb28b, 0x333e, 0x3fd0, 0x9793, 0xf657, 0xba0, 0x0, 0x1);
        gbc.writeMem(0xb28b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x333e);
        EXPECT(gbc.pc(), 0xb28c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb28b), 0xfb);
        // FB 008A
        gbc.setState(0x1723, 0x7484, 0xa3a0, 0xa0bb, 0xb362, 0x82ee, 0x1, 0x0);
        gbc.writeMem(0x1723, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7484);
        EXPECT(gbc.pc(), 0x1724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 008B
        gbc.setState(0x8fa3, 0x3cd0, 0xcd30, 0xc04, 0x7a5, 0x34c5, 0x0, 0x0);
        gbc.writeMem(0x8fa3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3cd0);
        EXPECT(gbc.pc(), 0x8fa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa3), 0xfb);
        // FB 008C
        gbc.setState(0xcbb4, 0xd87a, 0x7fc0, 0x8f56, 0xfd91, 0x588f, 0x1, 0x0);
        gbc.writeMem(0xcbb4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd87a);
        EXPECT(gbc.pc(), 0xcbb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb4), 0xfb);
        // FB 008D
        gbc.setState(0x1439, 0x1739, 0x3b50, 0x5748, 0x5ba4, 0x39d8, 0x1, 0x0);
        gbc.writeMem(0x1439, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x1739);
        EXPECT(gbc.pc(), 0x143a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 008E
        gbc.setState(0x370a, 0xc826, 0xef90, 0x773e, 0xfe7b, 0xe48e, 0x1, 0x1);
        gbc.writeMem(0x370a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc826);
        EXPECT(gbc.pc(), 0x370b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 008F
        gbc.setState(0x5cd, 0x717, 0x15d0, 0x754e, 0xe36b, 0xcbc8, 0x1, 0x1);
        gbc.writeMem(0x5cd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x717);
        EXPECT(gbc.pc(), 0x5ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0090
        gbc.setState(0xca01, 0xa0af, 0x2a00, 0x60f3, 0xfc4c, 0x3562, 0x1, 0x0);
        gbc.writeMem(0xca01, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa0af);
        EXPECT(gbc.pc(), 0xca02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca01), 0xfb);
        // FB 0091
        gbc.setState(0x7984, 0x8366, 0xba00, 0xc675, 0x3046, 0x3cd0, 0x0, 0x1);
        gbc.writeMem(0x7984, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8366);
        EXPECT(gbc.pc(), 0x7985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0092
        gbc.setState(0xb625, 0xa66d, 0x7d10, 0xe7c3, 0xd8ef, 0xd9a5, 0x1, 0x0);
        gbc.writeMem(0xb625, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa66d);
        EXPECT(gbc.pc(), 0xb626);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb625), 0xfb);
        // FB 0093
        gbc.setState(0x58a7, 0xed48, 0x39c0, 0x7a3b, 0x9808, 0x43cf, 0x1, 0x1);
        gbc.writeMem(0x58a7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xed48);
        EXPECT(gbc.pc(), 0x58a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0094
        gbc.setState(0x486b, 0x4db8, 0x90f0, 0x8ccd, 0x6b40, 0xeb42, 0x1, 0x0);
        gbc.writeMem(0x486b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4db8);
        EXPECT(gbc.pc(), 0x486c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0096
        gbc.setState(0xe5e3, 0x3db5, 0xbda0, 0x36f5, 0x5772, 0x947e, 0x0, 0x1);
        gbc.writeMem(0xe5e3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3db5);
        EXPECT(gbc.pc(), 0xe5e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5e3), 0xfb);
        // FB 0097
        gbc.setState(0xa217, 0x4bc3, 0x700, 0x2439, 0x8dbb, 0xd042, 0x0, 0x1);
        gbc.writeMem(0xa217, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4bc3);
        EXPECT(gbc.pc(), 0xa218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa217), 0xfb);
        // FB 0098
        gbc.setState(0xfff, 0x80fc, 0x76b0, 0x51a8, 0x6023, 0x59b4, 0x0, 0x0);
        gbc.writeMem(0xfff, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x80fc);
        EXPECT(gbc.pc(), 0x1000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0099
        gbc.setState(0x4c9f, 0x1963, 0x8020, 0x1c8b, 0x8e91, 0xbfa2, 0x0, 0x1);
        gbc.writeMem(0x4c9f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1963);
        EXPECT(gbc.pc(), 0x4ca0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 009B
        gbc.setState(0x59fb, 0x86a2, 0x320, 0xb681, 0xb21d, 0x894a, 0x0, 0x1);
        gbc.writeMem(0x59fb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x86a2);
        EXPECT(gbc.pc(), 0x59fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 009C
        gbc.setState(0x8cdb, 0x4614, 0x44e0, 0xeb27, 0xd58d, 0x9f91, 0x0, 0x1);
        gbc.writeMem(0x8cdb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4614);
        EXPECT(gbc.pc(), 0x8cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cdb), 0xfb);
        // FB 009D
        gbc.setState(0x41d0, 0xc9da, 0x7e30, 0xcc8a, 0x22dd, 0x90ce, 0x0, 0x0);
        gbc.writeMem(0x41d0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc9da);
        EXPECT(gbc.pc(), 0x41d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 009E
        gbc.setState(0xcd08, 0xf282, 0x5570, 0x2dce, 0xc663, 0xaa5e, 0x0, 0x1);
        gbc.writeMem(0xcd08, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf282);
        EXPECT(gbc.pc(), 0xcd09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd08), 0xfb);
        // FB 009F
        gbc.setState(0xa3e1, 0x5fb, 0x55e0, 0x251d, 0x588a, 0xca26, 0x1, 0x1);
        gbc.writeMem(0xa3e1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5fb);
        EXPECT(gbc.pc(), 0xa3e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e1), 0xfb);
        // FB 00A0
        gbc.setState(0xa0c5, 0xb75, 0x80d0, 0xc977, 0x779e, 0xb84, 0x1, 0x0);
        gbc.writeMem(0xa0c5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb75);
        EXPECT(gbc.pc(), 0xa0c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0c5), 0xfb);
        // FB 00A1
        gbc.setState(0x309a, 0x99f7, 0x3420, 0x2873, 0x64d1, 0x2114, 0x0, 0x1);
        gbc.writeMem(0x309a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x99f7);
        EXPECT(gbc.pc(), 0x309b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00A2
        gbc.setState(0x9ae5, 0x1735, 0x5f0, 0x1099, 0x10a7, 0x4e5c, 0x1, 0x1);
        gbc.writeMem(0x9ae5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1735);
        EXPECT(gbc.pc(), 0x9ae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae5), 0xfb);
        // FB 00A3
        gbc.setState(0xb925, 0xfeaa, 0x6510, 0x27f, 0x3563, 0x5bf6, 0x0, 0x1);
        gbc.writeMem(0xb925, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfeaa);
        EXPECT(gbc.pc(), 0xb926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb925), 0xfb);
        // FB 00A4
        gbc.setState(0x61e4, 0x8a65, 0x97c0, 0x7504, 0x1392, 0xee8d, 0x1, 0x0);
        gbc.writeMem(0x61e4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8a65);
        EXPECT(gbc.pc(), 0x61e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00A5
        gbc.setState(0x48b0, 0x26ba, 0xe1a0, 0x87e9, 0x9f00, 0xcdae, 0x0, 0x1);
        gbc.writeMem(0x48b0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x26ba);
        EXPECT(gbc.pc(), 0x48b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00A6
        gbc.setState(0xd52f, 0x8a55, 0x59d0, 0xee58, 0x4f9c, 0xaaca, 0x0, 0x1);
        gbc.writeMem(0xd52f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8a55);
        EXPECT(gbc.pc(), 0xd530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd52f), 0xfb);
        // FB 00A7
        gbc.setState(0xb798, 0x7a22, 0x45b0, 0x6680, 0x9d72, 0x6d9f, 0x1, 0x0);
        gbc.writeMem(0xb798, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7a22);
        EXPECT(gbc.pc(), 0xb799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb798), 0xfb);
        // FB 00A8
        gbc.setState(0xdaac, 0x3ecf, 0x6c20, 0x39ab, 0x12e8, 0xac17, 0x1, 0x0);
        gbc.writeMem(0xdaac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3ecf);
        EXPECT(gbc.pc(), 0xdaad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaac), 0xfb);
        // FB 00A9
        gbc.setState(0x3de3, 0xe71, 0x30, 0x17fc, 0x8020, 0x9e48, 0x0, 0x0);
        gbc.writeMem(0x3de3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe71);
        EXPECT(gbc.pc(), 0x3de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00AA
        gbc.setState(0x706b, 0x630a, 0x6a20, 0x37bd, 0x2fc0, 0x465, 0x0, 0x1);
        gbc.writeMem(0x706b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x630a);
        EXPECT(gbc.pc(), 0x706c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00AB
        gbc.setState(0x7a54, 0xf8af, 0x1ca0, 0x8710, 0x40e0, 0x32a6, 0x0, 0x1);
        gbc.writeMem(0x7a54, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf8af);
        EXPECT(gbc.pc(), 0x7a55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00AC
        gbc.setState(0x7a0c, 0x4130, 0x8920, 0x7e27, 0x2bba, 0xc970, 0x0, 0x0);
        gbc.writeMem(0x7a0c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4130);
        EXPECT(gbc.pc(), 0x7a0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00AE
        gbc.setState(0xc5d8, 0xe285, 0xa220, 0xf22e, 0x86d8, 0x4794, 0x0, 0x0);
        gbc.writeMem(0xc5d8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe285);
        EXPECT(gbc.pc(), 0xc5d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5d8), 0xfb);
        // FB 00AF
        gbc.setState(0x294f, 0x1c9c, 0xcde0, 0x36bb, 0xb8bb, 0x5eb7, 0x0, 0x0);
        gbc.writeMem(0x294f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x1c9c);
        EXPECT(gbc.pc(), 0x2950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00B0
        gbc.setState(0x5483, 0xe402, 0x9150, 0xd783, 0xb8aa, 0xa4f3, 0x1, 0x0);
        gbc.writeMem(0x5483, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe402);
        EXPECT(gbc.pc(), 0x5484);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 00B1
        gbc.setState(0xb0b7, 0x3c98, 0x6510, 0x42b0, 0x6f3c, 0x63af, 0x0, 0x0);
        gbc.writeMem(0xb0b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3c98);
        EXPECT(gbc.pc(), 0xb0b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0b7), 0xfb);
        // FB 00B2
        gbc.setState(0xe511, 0xec75, 0x5320, 0x5f9f, 0xa283, 0xa875, 0x1, 0x0);
        gbc.writeMem(0xe511, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xec75);
        EXPECT(gbc.pc(), 0xe512);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe511), 0xfb);
        // FB 00B3
        gbc.setState(0xe94f, 0x8f20, 0xe730, 0xf235, 0x2b47, 0x38cf, 0x0, 0x0);
        gbc.writeMem(0xe94f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8f20);
        EXPECT(gbc.pc(), 0xe950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe94f), 0xfb);
        // FB 00B4
        gbc.setState(0xa19, 0xaa35, 0xf300, 0x95d, 0x5708, 0x787, 0x1, 0x0);
        gbc.writeMem(0xa19, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xaa35);
        EXPECT(gbc.pc(), 0xa1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00B5
        gbc.setState(0xc069, 0x420e, 0x4a60, 0xb5ee, 0x468d, 0xf556, 0x0, 0x1);
        gbc.writeMem(0xc069, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x420e);
        EXPECT(gbc.pc(), 0xc06a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc069), 0xfb);
        // FB 00B6
        gbc.setState(0x9f02, 0x3bed, 0xc580, 0x83ee, 0xe16e, 0x112b, 0x0, 0x1);
        gbc.writeMem(0x9f02, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3bed);
        EXPECT(gbc.pc(), 0x9f03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f02), 0xfb);
        // FB 00B7
        gbc.setState(0xd552, 0x3531, 0xfea0, 0x7b8c, 0xa5e0, 0x44e1, 0x0, 0x1);
        gbc.writeMem(0xd552, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3531);
        EXPECT(gbc.pc(), 0xd553);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd552), 0xfb);
        // FB 00B8
        gbc.setState(0xb9a, 0xc448, 0x3dd0, 0xe941, 0x6fd9, 0xe7f1, 0x1, 0x0);
        gbc.writeMem(0xb9a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc448);
        EXPECT(gbc.pc(), 0xb9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 00B9
        gbc.setState(0x8d9a, 0x9d5b, 0xfb0, 0xc288, 0xee26, 0xe949, 0x1, 0x1);
        gbc.writeMem(0x8d9a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9d5b);
        EXPECT(gbc.pc(), 0x8d9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d9a), 0xfb);
        // FB 00BA
        gbc.setState(0xcc05, 0x38bb, 0xe920, 0x58f6, 0x2dbb, 0x1c18, 0x0, 0x0);
        gbc.writeMem(0xcc05, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x38bb);
        EXPECT(gbc.pc(), 0xcc06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc05), 0xfb);
        // FB 00BB
        gbc.setState(0x9d68, 0x2aae, 0x7d0, 0xeb6a, 0xfcbe, 0xdbb1, 0x1, 0x1);
        gbc.writeMem(0x9d68, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2aae);
        EXPECT(gbc.pc(), 0x9d69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d68), 0xfb);
        // FB 00BD
        gbc.setState(0xb713, 0x40a, 0x1a00, 0xdc00, 0xf9e3, 0xd3bf, 0x0, 0x1);
        gbc.writeMem(0xb713, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x40a);
        EXPECT(gbc.pc(), 0xb714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb713), 0xfb);
        // FB 00BE
        gbc.setState(0xb30f, 0xbc4a, 0xcd40, 0x4e70, 0x4f7d, 0x2dbe, 0x0, 0x0);
        gbc.writeMem(0xb30f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xbc4a);
        EXPECT(gbc.pc(), 0xb310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb30f), 0xfb);
        // FB 00BF
        gbc.setState(0x6c6d, 0x8b9c, 0x6330, 0x5060, 0xe072, 0xb55c, 0x1, 0x0);
        gbc.writeMem(0x6c6d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8b9c);
        EXPECT(gbc.pc(), 0x6c6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00C0
        gbc.setState(0xa750, 0xe35e, 0xb220, 0x6106, 0x437c, 0xc5b, 0x1, 0x1);
        gbc.writeMem(0xa750, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe35e);
        EXPECT(gbc.pc(), 0xa751);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa750), 0xfb);
        // FB 00C1
        gbc.setState(0x5c0, 0x5283, 0x5c0, 0xa4eb, 0x2d60, 0x3d96, 0x1, 0x1);
        gbc.writeMem(0x5c0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5283);
        EXPECT(gbc.pc(), 0x5c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00C2
        gbc.setState(0x7fb8, 0xa1ce, 0x2570, 0xf98c, 0xdc08, 0x587b, 0x0, 0x0);
        gbc.writeMem(0x7fb8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa1ce);
        EXPECT(gbc.pc(), 0x7fb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00C3
        gbc.setState(0xa1a3, 0xb755, 0x6750, 0xf6ea, 0x54dc, 0x1dcf, 0x0, 0x0);
        gbc.writeMem(0xa1a3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb755);
        EXPECT(gbc.pc(), 0xa1a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1a3), 0xfb);
        // FB 00C4
        gbc.setState(0x181d, 0x5286, 0xfb20, 0xfc71, 0x5c32, 0x834e, 0x0, 0x1);
        gbc.writeMem(0x181d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5286);
        EXPECT(gbc.pc(), 0x181e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00C5
        gbc.setState(0xa1eb, 0xf25a, 0xf7f0, 0xdeee, 0x6eb4, 0xcc81, 0x0, 0x0);
        gbc.writeMem(0xa1eb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf25a);
        EXPECT(gbc.pc(), 0xa1ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1eb), 0xfb);
        // FB 00C6
        gbc.setState(0xd1e4, 0x4f1a, 0x820, 0x6ddb, 0xf054, 0xf4b9, 0x0, 0x0);
        gbc.writeMem(0xd1e4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4f1a);
        EXPECT(gbc.pc(), 0xd1e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e4), 0xfb);
        // FB 00C8
        gbc.setState(0x9a3c, 0x4188, 0x73e0, 0x6749, 0xb720, 0x17ae, 0x0, 0x1);
        gbc.writeMem(0x9a3c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4188);
        EXPECT(gbc.pc(), 0x9a3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a3c), 0xfb);
        // FB 00C9
        gbc.setState(0x202, 0x862d, 0xd7f0, 0x6d94, 0xe5a5, 0x2a1b, 0x0, 0x1);
        gbc.writeMem(0x202, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x862d);
        EXPECT(gbc.pc(), 0x203);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00CA
        gbc.setState(0xeeb6, 0xdc21, 0x6ee0, 0x199f, 0x7f17, 0x9f5, 0x1, 0x1);
        gbc.writeMem(0xeeb6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdc21);
        EXPECT(gbc.pc(), 0xeeb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb6), 0xfb);
        // FB 00CB
        gbc.setState(0x39c9, 0xb98, 0xb1c0, 0x3113, 0x1484, 0xe42a, 0x0, 0x1);
        gbc.writeMem(0x39c9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb98);
        EXPECT(gbc.pc(), 0x39ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00CC
        gbc.setState(0x6f3f, 0x93ef, 0x7400, 0x8280, 0xcd16, 0x2c9d, 0x0, 0x1);
        gbc.writeMem(0x6f3f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x93ef);
        EXPECT(gbc.pc(), 0x6f40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00CD
        gbc.setState(0x4a1a, 0x1e2f, 0x5330, 0x8abb, 0x6747, 0xdf01, 0x1, 0x0);
        gbc.writeMem(0x4a1a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1e2f);
        EXPECT(gbc.pc(), 0x4a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00CE
        gbc.setState(0x84a0, 0xbf4, 0x3890, 0x7ac2, 0x7d5f, 0x95db, 0x0, 0x0);
        gbc.writeMem(0x84a0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbf4);
        EXPECT(gbc.pc(), 0x84a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a0), 0xfb);
        // FB 00CF
        gbc.setState(0xda00, 0x2592, 0xc2e0, 0x576c, 0x629e, 0x8dcd, 0x1, 0x1);
        gbc.writeMem(0xda00, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2592);
        EXPECT(gbc.pc(), 0xda01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda00), 0xfb);
        // FB 00D0
        gbc.setState(0xcdf8, 0xb409, 0xff90, 0x9032, 0x114c, 0x6fe0, 0x1, 0x1);
        gbc.writeMem(0xcdf8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb409);
        EXPECT(gbc.pc(), 0xcdf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdf8), 0xfb);
        // FB 00D2
        gbc.setState(0x7e7a, 0x99cf, 0xfa00, 0xcf86, 0xe78c, 0xfc69, 0x0, 0x1);
        gbc.writeMem(0x7e7a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x99cf);
        EXPECT(gbc.pc(), 0x7e7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00D3
        gbc.setState(0x21e1, 0xe88, 0x2d80, 0x999c, 0x6e7f, 0xf288, 0x1, 0x0);
        gbc.writeMem(0x21e1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe88);
        EXPECT(gbc.pc(), 0x21e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00D4
        gbc.setState(0x2077, 0x4c5c, 0xabb0, 0x6d31, 0x55fe, 0xd24c, 0x1, 0x0);
        gbc.writeMem(0x2077, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4c5c);
        EXPECT(gbc.pc(), 0x2078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00D5
        gbc.setState(0x3a76, 0x1e16, 0x7540, 0x46d5, 0x499d, 0x8cf6, 0x1, 0x0);
        gbc.writeMem(0x3a76, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x1e16);
        EXPECT(gbc.pc(), 0x3a77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00D6
        gbc.setState(0x3485, 0x4a40, 0x7d60, 0xd413, 0xedeb, 0x6cc4, 0x0, 0x0);
        gbc.writeMem(0x3485, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4a40);
        EXPECT(gbc.pc(), 0x3486);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00D7
        gbc.setState(0xa4e8, 0x3830, 0x2f10, 0xb063, 0x4673, 0xa512, 0x1, 0x1);
        gbc.writeMem(0xa4e8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3830);
        EXPECT(gbc.pc(), 0xa4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4e8), 0xfb);
        // FB 00D8
        gbc.setState(0x4c50, 0xbd5b, 0x3920, 0x5356, 0xdec7, 0x997c, 0x0, 0x0);
        gbc.writeMem(0x4c50, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbd5b);
        EXPECT(gbc.pc(), 0x4c51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00D9
        gbc.setState(0x3239, 0xbd6f, 0xa380, 0x2e75, 0xb5ea, 0xdc54, 0x1, 0x0);
        gbc.writeMem(0x3239, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbd6f);
        EXPECT(gbc.pc(), 0x323a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 00DA
        gbc.setState(0x68c1, 0x1f12, 0xd450, 0x7cbb, 0x2390, 0x4109, 0x1, 0x0);
        gbc.writeMem(0x68c1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1f12);
        EXPECT(gbc.pc(), 0x68c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 00DB
        gbc.setState(0x8844, 0x923c, 0x8750, 0x29e2, 0x584f, 0x7016, 0x1, 0x1);
        gbc.writeMem(0x8844, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x923c);
        EXPECT(gbc.pc(), 0x8845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8844), 0xfb);
        // FB 00DC
        gbc.setState(0x5b48, 0x469, 0xe320, 0x1339, 0x1a4, 0xf6d8, 0x0, 0x0);
        gbc.writeMem(0x5b48, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x469);
        EXPECT(gbc.pc(), 0x5b49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00DD
        gbc.setState(0x8eb3, 0x6d9d, 0x9b80, 0x3c32, 0x2db9, 0xb35b, 0x0, 0x0);
        gbc.writeMem(0x8eb3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6d9d);
        EXPECT(gbc.pc(), 0x8eb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eb3), 0xfb);
        // FB 00DE
        gbc.setState(0x45e7, 0xc7a3, 0xb6f0, 0xaba8, 0x2940, 0x3f87, 0x1, 0x1);
        gbc.writeMem(0x45e7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc7a3);
        EXPECT(gbc.pc(), 0x45e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00DF
        gbc.setState(0x879, 0x72e, 0xb5b0, 0x55d8, 0x9a0d, 0x6aab, 0x0, 0x0);
        gbc.writeMem(0x879, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x72e);
        EXPECT(gbc.pc(), 0x87a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00E0
        gbc.setState(0xd6d7, 0xd57c, 0xb3e0, 0xfbbd, 0x5922, 0x8514, 0x0, 0x1);
        gbc.writeMem(0xd6d7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd57c);
        EXPECT(gbc.pc(), 0xd6d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6d7), 0xfb);
        // FB 00E1
        gbc.setState(0xba75, 0x250e, 0xe460, 0xec25, 0x14c2, 0xb507, 0x1, 0x1);
        gbc.writeMem(0xba75, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x250e);
        EXPECT(gbc.pc(), 0xba76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba75), 0xfb);
        // FB 00E2
        gbc.setState(0xa9da, 0x6419, 0xc6e0, 0x829d, 0x1246, 0xca81, 0x0, 0x1);
        gbc.writeMem(0xa9da, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6419);
        EXPECT(gbc.pc(), 0xa9db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9da), 0xfb);
        // FB 00E3
        gbc.setState(0xc2dd, 0x2802, 0xcf50, 0x5c85, 0xeaa, 0x9542, 0x1, 0x0);
        gbc.writeMem(0xc2dd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2802);
        EXPECT(gbc.pc(), 0xc2de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2dd), 0xfb);
        // FB 00E4
        gbc.setState(0xecb9, 0x45e3, 0xc800, 0x5dff, 0x727a, 0x683c, 0x0, 0x0);
        gbc.writeMem(0xecb9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x45e3);
        EXPECT(gbc.pc(), 0xecba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb9), 0xfb);
        // FB 00E5
        gbc.setState(0xa47b, 0x12ed, 0xec10, 0x615d, 0xec04, 0xa845, 0x0, 0x0);
        gbc.writeMem(0xa47b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x12ed);
        EXPECT(gbc.pc(), 0xa47c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa47b), 0xfb);
        // FB 00E6
        gbc.setState(0x62de, 0xa876, 0xf3b0, 0x77d, 0x5f85, 0xffc5, 0x0, 0x1);
        gbc.writeMem(0x62de, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa876);
        EXPECT(gbc.pc(), 0x62df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00E8
        gbc.setState(0x69c7, 0x8e21, 0x6890, 0x16c0, 0xdae0, 0xadff, 0x0, 0x0);
        gbc.writeMem(0x69c7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8e21);
        EXPECT(gbc.pc(), 0x69c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 00E9
        gbc.setState(0xedf7, 0xbdca, 0x7060, 0x795b, 0xcaa0, 0xf31c, 0x1, 0x0);
        gbc.writeMem(0xedf7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xbdca);
        EXPECT(gbc.pc(), 0xedf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf7), 0xfb);
        // FB 00EA
        gbc.setState(0x2b1d, 0xa3d5, 0xc850, 0xd9b7, 0xe25, 0x5cb5, 0x0, 0x0);
        gbc.writeMem(0x2b1d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa3d5);
        EXPECT(gbc.pc(), 0x2b1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 00EB
        gbc.setState(0xe517, 0xb261, 0x330, 0x1b01, 0xc356, 0x9066, 0x0, 0x1);
        gbc.writeMem(0xe517, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xb261);
        EXPECT(gbc.pc(), 0xe518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe517), 0xfb);
        // FB 00EC
        gbc.setState(0x8220, 0xbc3b, 0x79b0, 0x3f16, 0x4aa7, 0xea3f, 0x1, 0x0);
        gbc.writeMem(0x8220, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbc3b);
        EXPECT(gbc.pc(), 0x8221);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8220), 0xfb);
        // FB 00EE
        gbc.setState(0x624d, 0x3cc5, 0x83a0, 0x1a47, 0xf571, 0x72c6, 0x0, 0x0);
        gbc.writeMem(0x624d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3cc5);
        EXPECT(gbc.pc(), 0x624e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00EF
        gbc.setState(0xe2bc, 0x25c8, 0x6020, 0x5545, 0x5a5, 0x5e01, 0x0, 0x0);
        gbc.writeMem(0xe2bc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x25c8);
        EXPECT(gbc.pc(), 0xe2bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2bc), 0xfb);
        // FB 00F0
        gbc.setState(0xca29, 0xfb8a, 0x780, 0x3250, 0x2ed1, 0xc867, 0x0, 0x0);
        gbc.writeMem(0xca29, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfb8a);
        EXPECT(gbc.pc(), 0xca2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca29), 0xfb);
        // FB 00F1
        gbc.setState(0x7d2b, 0xd1f7, 0x9990, 0xab10, 0xc571, 0x3003, 0x1, 0x0);
        gbc.writeMem(0x7d2b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd1f7);
        EXPECT(gbc.pc(), 0x7d2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 00F2
        gbc.setState(0x84d2, 0x5101, 0xd310, 0x3674, 0x69bf, 0xa6a1, 0x1, 0x1);
        gbc.writeMem(0x84d2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5101);
        EXPECT(gbc.pc(), 0x84d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d2), 0xfb);
        // FB 00F3
        gbc.setState(0xcdfd, 0x6a25, 0xd8c0, 0xc7b8, 0x7946, 0xfea6, 0x0, 0x0);
        gbc.writeMem(0xcdfd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6a25);
        EXPECT(gbc.pc(), 0xcdfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdfd), 0xfb);
        // FB 00F4
        gbc.setState(0x3974, 0x24c2, 0x90, 0x231b, 0x6e65, 0x41ca, 0x1, 0x1);
        gbc.writeMem(0x3974, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x24c2);
        EXPECT(gbc.pc(), 0x3975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 00F5
        gbc.setState(0xd596, 0x9a54, 0x6310, 0xdd7a, 0x3ed8, 0x59d4, 0x0, 0x0);
        gbc.writeMem(0xd596, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9a54);
        EXPECT(gbc.pc(), 0xd597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd596), 0xfb);
        // FB 00F6
        gbc.setState(0x9c2e, 0x7d94, 0x1240, 0x7c4f, 0x4408, 0xc46d, 0x1, 0x1);
        gbc.writeMem(0x9c2e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7d94);
        EXPECT(gbc.pc(), 0x9c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2e), 0xfb);
        // FB 00F7
        gbc.setState(0x2d75, 0xc8f9, 0xb2e0, 0x582e, 0x6207, 0x785a, 0x0, 0x0);
        gbc.writeMem(0x2d75, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc8f9);
        EXPECT(gbc.pc(), 0x2d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 00F8
        gbc.setState(0x4b2b, 0x39bd, 0x69d0, 0xdec2, 0xfea4, 0xef4, 0x1, 0x1);
        gbc.writeMem(0x4b2b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x39bd);
        EXPECT(gbc.pc(), 0x4b2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 00F9
        gbc.setState(0x555c, 0xf51b, 0x5230, 0xd17e, 0xf00d, 0x5a8d, 0x1, 0x0);
        gbc.writeMem(0x555c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf51b);
        EXPECT(gbc.pc(), 0x555d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 00FA
        gbc.setState(0xca98, 0x5a3e, 0x6e10, 0xa06a, 0xa699, 0xb4a1, 0x0, 0x1);
        gbc.writeMem(0xca98, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5a3e);
        EXPECT(gbc.pc(), 0xca99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca98), 0xfb);
        // FB 00FB
        gbc.setState(0xa155, 0xd2a1, 0xdee0, 0x1074, 0x1b76, 0x89fa, 0x0, 0x1);
        gbc.writeMem(0xa155, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd2a1);
        EXPECT(gbc.pc(), 0xa156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa155), 0xfb);
        // FB 00FC
        gbc.setState(0x8d05, 0xd4ab, 0xbd60, 0x9148, 0xd595, 0x99d8, 0x1, 0x1);
        gbc.writeMem(0x8d05, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd4ab);
        EXPECT(gbc.pc(), 0x8d06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d05), 0xfb);
        // FB 00FD
        gbc.setState(0xef1b, 0xc45b, 0x7840, 0x500a, 0x2647, 0xcf7f, 0x1, 0x0);
        gbc.writeMem(0xef1b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc45b);
        EXPECT(gbc.pc(), 0xef1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef1b), 0xfb);
        // FB 0100
        gbc.setState(0x4820, 0xfb79, 0x6a00, 0x8c8c, 0x7784, 0xf4d, 0x1, 0x1);
        gbc.writeMem(0x4820, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfb79);
        EXPECT(gbc.pc(), 0x4821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0101
        gbc.setState(0x9af2, 0x88a8, 0xfd80, 0x6dc4, 0x9b4f, 0x2cae, 0x1, 0x1);
        gbc.writeMem(0x9af2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x88a8);
        EXPECT(gbc.pc(), 0x9af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af2), 0xfb);
        // FB 0102
        gbc.setState(0xc05a, 0xbbb9, 0x8b90, 0x2ab4, 0x8d1c, 0x8440, 0x1, 0x0);
        gbc.writeMem(0xc05a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbbb9);
        EXPECT(gbc.pc(), 0xc05b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc05a), 0xfb);
        // FB 0103
        gbc.setState(0x9278, 0x57b8, 0xaa30, 0x1231, 0x5939, 0x64de, 0x1, 0x1);
        gbc.writeMem(0x9278, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x57b8);
        EXPECT(gbc.pc(), 0x9279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9278), 0xfb);
        // FB 0104
        gbc.setState(0x97f4, 0x113e, 0x1cb0, 0x1cad, 0xf163, 0x7ac, 0x0, 0x1);
        gbc.writeMem(0x97f4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x113e);
        EXPECT(gbc.pc(), 0x97f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97f4), 0xfb);
        // FB 0105
        gbc.setState(0x80a9, 0x808f, 0x5c70, 0x3550, 0x52ed, 0x6ad4, 0x1, 0x0);
        gbc.writeMem(0x80a9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x808f);
        EXPECT(gbc.pc(), 0x80aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a9), 0xfb);
        // FB 0106
        gbc.setState(0x592a, 0x9fd6, 0x43d0, 0xbdbc, 0x3f5f, 0x5ac8, 0x1, 0x1);
        gbc.writeMem(0x592a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9fd6);
        EXPECT(gbc.pc(), 0x592b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0107
        gbc.setState(0x586a, 0x33e, 0x6130, 0x5132, 0xb00d, 0x94ac, 0x0, 0x1);
        gbc.writeMem(0x586a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x33e);
        EXPECT(gbc.pc(), 0x586b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0108
        gbc.setState(0xb4d1, 0x2c79, 0xe400, 0xff1f, 0xee43, 0xb2c8, 0x0, 0x1);
        gbc.writeMem(0xb4d1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2c79);
        EXPECT(gbc.pc(), 0xb4d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d1), 0xfb);
        // FB 0109
        gbc.setState(0xccc6, 0x33ba, 0x81a0, 0xb32, 0x2c3e, 0x7f58, 0x0, 0x1);
        gbc.writeMem(0xccc6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x33ba);
        EXPECT(gbc.pc(), 0xccc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc6), 0xfb);
        // FB 010A
        gbc.setState(0x4cd1, 0x96f6, 0xe670, 0x39f, 0xc10c, 0x2f6, 0x0, 0x1);
        gbc.writeMem(0x4cd1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x96f6);
        EXPECT(gbc.pc(), 0x4cd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 010B
        gbc.setState(0x3d7d, 0x2bd9, 0x9cd0, 0x8a2d, 0xf3cd, 0xa602, 0x0, 0x1);
        gbc.writeMem(0x3d7d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2bd9);
        EXPECT(gbc.pc(), 0x3d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 010C
        gbc.setState(0xb6e1, 0xb1c4, 0xe340, 0xb64c, 0x9dee, 0xf50a, 0x0, 0x1);
        gbc.writeMem(0xb6e1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb1c4);
        EXPECT(gbc.pc(), 0xb6e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e1), 0xfb);
        // FB 010D
        gbc.setState(0x2469, 0xab2d, 0xbf10, 0x95e4, 0x25d3, 0x2621, 0x1, 0x1);
        gbc.writeMem(0x2469, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xab2d);
        EXPECT(gbc.pc(), 0x246a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 010F
        gbc.setState(0xacd9, 0x8333, 0x3de0, 0x1bd4, 0x86fe, 0xb0b8, 0x1, 0x0);
        gbc.writeMem(0xacd9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8333);
        EXPECT(gbc.pc(), 0xacda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd9), 0xfb);
        // FB 0110
        gbc.setState(0x2fc5, 0xbb1f, 0x8960, 0x93f, 0x6945, 0xe6d9, 0x0, 0x1);
        gbc.writeMem(0x2fc5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xbb1f);
        EXPECT(gbc.pc(), 0x2fc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0111
        gbc.setState(0x2dc1, 0x36ef, 0xd1a0, 0xb7b5, 0x6c1c, 0x1a57, 0x0, 0x1);
        gbc.writeMem(0x2dc1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x36ef);
        EXPECT(gbc.pc(), 0x2dc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0112
        gbc.setState(0x2c42, 0x7e2c, 0xcea0, 0x834a, 0x43ef, 0x84a2, 0x0, 0x1);
        gbc.writeMem(0x2c42, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7e2c);
        EXPECT(gbc.pc(), 0x2c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0113
        gbc.setState(0x58c, 0x7e9c, 0xc1a0, 0xc054, 0x5f30, 0xc391, 0x1, 0x0);
        gbc.writeMem(0x58c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7e9c);
        EXPECT(gbc.pc(), 0x58d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0114
        gbc.setState(0x69f3, 0x53a5, 0x4380, 0x9460, 0x7ac5, 0xa3a1, 0x1, 0x1);
        gbc.writeMem(0x69f3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x53a5);
        EXPECT(gbc.pc(), 0x69f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0115
        gbc.setState(0x7040, 0x505f, 0x5fb0, 0xbafc, 0x5759, 0xefc7, 0x1, 0x0);
        gbc.writeMem(0x7040, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x505f);
        EXPECT(gbc.pc(), 0x7041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0116
        gbc.setState(0x2b7a, 0xd153, 0x7760, 0x1cce, 0x3479, 0xae3c, 0x1, 0x1);
        gbc.writeMem(0x2b7a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd153);
        EXPECT(gbc.pc(), 0x2b7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0117
        gbc.setState(0xead9, 0x5dbf, 0xba50, 0x6a33, 0x9d77, 0xc89c, 0x0, 0x0);
        gbc.writeMem(0xead9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5dbf);
        EXPECT(gbc.pc(), 0xeada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead9), 0xfb);
        // FB 0118
        gbc.setState(0x51ba, 0x6d06, 0xfb10, 0x50e6, 0x58b6, 0xe148, 0x1, 0x0);
        gbc.writeMem(0x51ba, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6d06);
        EXPECT(gbc.pc(), 0x51bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0119
        gbc.setState(0x44c9, 0xa7db, 0xd9f0, 0xb816, 0xd230, 0x7b35, 0x0, 0x0);
        gbc.writeMem(0x44c9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa7db);
        EXPECT(gbc.pc(), 0x44ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 011A
        gbc.setState(0xa774, 0x3338, 0xae80, 0x99d3, 0xfef1, 0x7430, 0x1, 0x1);
        gbc.writeMem(0xa774, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3338);
        EXPECT(gbc.pc(), 0xa775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa774), 0xfb);
        // FB 011B
        gbc.setState(0x6368, 0x2621, 0x59f0, 0x50f9, 0xd7f1, 0xa34f, 0x0, 0x0);
        gbc.writeMem(0x6368, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2621);
        EXPECT(gbc.pc(), 0x6369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 011E
        gbc.setState(0x40c2, 0x34cf, 0x94c0, 0xe48e, 0xa8da, 0x9c98, 0x1, 0x0);
        gbc.writeMem(0x40c2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x34cf);
        EXPECT(gbc.pc(), 0x40c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0120
        gbc.setState(0x2e6a, 0x2fa8, 0x7940, 0xa970, 0x977e, 0xcfba, 0x1, 0x0);
        gbc.writeMem(0x2e6a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2fa8);
        EXPECT(gbc.pc(), 0x2e6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0121
        gbc.setState(0xcb12, 0x75f1, 0xb830, 0xbd14, 0x8254, 0x452, 0x1, 0x1);
        gbc.writeMem(0xcb12, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x75f1);
        EXPECT(gbc.pc(), 0xcb13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb12), 0xfb);
        // FB 0122
        gbc.setState(0x2f96, 0xdabd, 0x3e40, 0xa744, 0x82a5, 0xa4c, 0x1, 0x0);
        gbc.writeMem(0x2f96, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xdabd);
        EXPECT(gbc.pc(), 0x2f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0123
        gbc.setState(0xd2a6, 0xf08c, 0xc7d0, 0x5cd8, 0x7d36, 0x37e3, 0x0, 0x1);
        gbc.writeMem(0xd2a6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf08c);
        EXPECT(gbc.pc(), 0xd2a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2a6), 0xfb);
        // FB 0125
        gbc.setState(0x837f, 0x64b2, 0xd150, 0x7b0f, 0xa109, 0xa3a0, 0x0, 0x0);
        gbc.writeMem(0x837f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x64b2);
        EXPECT(gbc.pc(), 0x8380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x837f), 0xfb);
        // FB 0126
        gbc.setState(0x34d0, 0xaaed, 0xbc10, 0xb3ce, 0x78bb, 0x1025, 0x1, 0x1);
        gbc.writeMem(0x34d0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xaaed);
        EXPECT(gbc.pc(), 0x34d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0127
        gbc.setState(0xd07d, 0xa850, 0xb5d0, 0x70d5, 0xd634, 0xf278, 0x0, 0x1);
        gbc.writeMem(0xd07d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa850);
        EXPECT(gbc.pc(), 0xd07e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd07d), 0xfb);
        // FB 0128
        gbc.setState(0xd50b, 0x7c21, 0xdec0, 0x85c, 0x76da, 0xf832, 0x0, 0x0);
        gbc.writeMem(0xd50b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7c21);
        EXPECT(gbc.pc(), 0xd50c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd50b), 0xfb);
        // FB 0129
        gbc.setState(0xdf06, 0x9807, 0x9b0, 0x3869, 0x6e8d, 0xf40, 0x0, 0x1);
        gbc.writeMem(0xdf06, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9807);
        EXPECT(gbc.pc(), 0xdf07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf06), 0xfb);
        // FB 012A
        gbc.setState(0xbf1b, 0x5d8a, 0x4420, 0x73fe, 0xee21, 0xcfab, 0x1, 0x1);
        gbc.writeMem(0xbf1b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5d8a);
        EXPECT(gbc.pc(), 0xbf1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf1b), 0xfb);
        // FB 012B
        gbc.setState(0x45b4, 0x4ead, 0x1200, 0x64fa, 0x5202, 0x6d69, 0x1, 0x0);
        gbc.writeMem(0x45b4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4ead);
        EXPECT(gbc.pc(), 0x45b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 012C
        gbc.setState(0x671a, 0x3669, 0x5900, 0x98ef, 0xa972, 0xa66e, 0x0, 0x0);
        gbc.writeMem(0x671a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x3669);
        EXPECT(gbc.pc(), 0x671b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 012D
        gbc.setState(0x7430, 0x897, 0x73b0, 0xca51, 0x2d0, 0xaf19, 0x1, 0x1);
        gbc.writeMem(0x7430, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x897);
        EXPECT(gbc.pc(), 0x7431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 012E
        gbc.setState(0x2ba2, 0x9e5, 0x39c0, 0x800a, 0x151a, 0x7f99, 0x1, 0x1);
        gbc.writeMem(0x2ba2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9e5);
        EXPECT(gbc.pc(), 0x2ba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 012F
        gbc.setState(0x9b06, 0xe91f, 0x9b20, 0x61db, 0x7ec6, 0x28d6, 0x1, 0x1);
        gbc.writeMem(0x9b06, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe91f);
        EXPECT(gbc.pc(), 0x9b07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b06), 0xfb);
        // FB 0132
        gbc.setState(0xde95, 0x819b, 0x3a0, 0xb8d1, 0x6ff2, 0xe47d, 0x0, 0x1);
        gbc.writeMem(0xde95, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x819b);
        EXPECT(gbc.pc(), 0xde96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde95), 0xfb);
        // FB 0133
        gbc.setState(0x9161, 0x1c16, 0x29c0, 0xa020, 0x1c4b, 0x40a4, 0x0, 0x0);
        gbc.writeMem(0x9161, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x1c16);
        EXPECT(gbc.pc(), 0x9162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9161), 0xfb);
        // FB 0134
        gbc.setState(0xa29, 0x4c5a, 0xc9f0, 0xcab7, 0x6cc7, 0xedc9, 0x1, 0x0);
        gbc.writeMem(0xa29, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4c5a);
        EXPECT(gbc.pc(), 0xa2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0135
        gbc.setState(0xd402, 0xa6a3, 0xcdb0, 0x9341, 0x5bf3, 0xea3a, 0x1, 0x1);
        gbc.writeMem(0xd402, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa6a3);
        EXPECT(gbc.pc(), 0xd403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd402), 0xfb);
        // FB 0136
        gbc.setState(0x88fd, 0xc46b, 0xbc90, 0x767b, 0x5d3f, 0xd0c7, 0x0, 0x0);
        gbc.writeMem(0x88fd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc46b);
        EXPECT(gbc.pc(), 0x88fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88fd), 0xfb);
        // FB 0137
        gbc.setState(0x762, 0x8a8c, 0xb380, 0xd80d, 0x304e, 0xacf8, 0x0, 0x0);
        gbc.writeMem(0x762, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8a8c);
        EXPECT(gbc.pc(), 0x763);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0138
        gbc.setState(0x96c7, 0x65de, 0x1fa0, 0x9c4f, 0x4409, 0xac92, 0x1, 0x0);
        gbc.writeMem(0x96c7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x65de);
        EXPECT(gbc.pc(), 0x96c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c7), 0xfb);
        // FB 0139
        gbc.setState(0x9d76, 0x98cd, 0x1b0, 0xf406, 0xeaea, 0x6e7f, 0x0, 0x0);
        gbc.writeMem(0x9d76, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x98cd);
        EXPECT(gbc.pc(), 0x9d77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d76), 0xfb);
        // FB 013A
        gbc.setState(0x1ef2, 0x47eb, 0xea60, 0xbb39, 0x6342, 0xf286, 0x1, 0x1);
        gbc.writeMem(0x1ef2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x47eb);
        EXPECT(gbc.pc(), 0x1ef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 013B
        gbc.setState(0x1e94, 0x94ac, 0x7ff0, 0x298b, 0xc97, 0xef95, 0x1, 0x1);
        gbc.writeMem(0x1e94, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x94ac);
        EXPECT(gbc.pc(), 0x1e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 013C
        gbc.setState(0x6989, 0x8780, 0x5280, 0xf255, 0x38bb, 0xd060, 0x0, 0x1);
        gbc.writeMem(0x6989, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8780);
        EXPECT(gbc.pc(), 0x698a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 013D
        gbc.setState(0xc4c7, 0xda2f, 0x7e60, 0xb7d4, 0xe41d, 0x6ed7, 0x0, 0x0);
        gbc.writeMem(0xc4c7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xda2f);
        EXPECT(gbc.pc(), 0xc4c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4c7), 0xfb);
        // FB 013E
        gbc.setState(0x1552, 0xea83, 0xff00, 0x6d39, 0xfe00, 0x173e, 0x0, 0x1);
        gbc.writeMem(0x1552, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xea83);
        EXPECT(gbc.pc(), 0x1553);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 013F
        gbc.setState(0x72b9, 0x8edc, 0x180, 0x3cc3, 0x1402, 0x1ca, 0x0, 0x0);
        gbc.writeMem(0x72b9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8edc);
        EXPECT(gbc.pc(), 0x72ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0140
        gbc.setState(0x33c8, 0x9b0f, 0x5d90, 0xaec3, 0x96e6, 0x7f72, 0x0, 0x1);
        gbc.writeMem(0x33c8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9b0f);
        EXPECT(gbc.pc(), 0x33c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0142
        gbc.setState(0x453b, 0x5720, 0x8170, 0x484a, 0xd2f0, 0x41b5, 0x0, 0x1);
        gbc.writeMem(0x453b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5720);
        EXPECT(gbc.pc(), 0x453c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0143
        gbc.setState(0xda32, 0xb08a, 0xb30, 0xb2dc, 0x5bea, 0x3d6f, 0x0, 0x0);
        gbc.writeMem(0xda32, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb08a);
        EXPECT(gbc.pc(), 0xda33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda32), 0xfb);
        // FB 0144
        gbc.setState(0xd80d, 0x8d39, 0x7330, 0xfbb5, 0x4ffd, 0xcf46, 0x0, 0x0);
        gbc.writeMem(0xd80d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8d39);
        EXPECT(gbc.pc(), 0xd80e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd80d), 0xfb);
        // FB 0145
        gbc.setState(0x87a7, 0x88f1, 0xf2c0, 0x2b43, 0x62d3, 0xef7, 0x0, 0x0);
        gbc.writeMem(0x87a7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x88f1);
        EXPECT(gbc.pc(), 0x87a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a7), 0xfb);
        // FB 0146
        gbc.setState(0x8408, 0x35e8, 0xf9b0, 0x4e49, 0x1416, 0xedc4, 0x0, 0x1);
        gbc.writeMem(0x8408, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x35e8);
        EXPECT(gbc.pc(), 0x8409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8408), 0xfb);
        // FB 0147
        gbc.setState(0xb3f3, 0x7564, 0x4680, 0x10e9, 0x9c3e, 0xe03f, 0x1, 0x1);
        gbc.writeMem(0xb3f3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7564);
        EXPECT(gbc.pc(), 0xb3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f3), 0xfb);
        // FB 0148
        gbc.setState(0x2587, 0xc746, 0x2f0, 0xa536, 0x5fec, 0xd896, 0x1, 0x0);
        gbc.writeMem(0x2587, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc746);
        EXPECT(gbc.pc(), 0x2588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0149
        gbc.setState(0xe3ab, 0x9e86, 0x8290, 0x4a3e, 0x75b5, 0x2e9, 0x0, 0x0);
        gbc.writeMem(0xe3ab, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9e86);
        EXPECT(gbc.pc(), 0xe3ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3ab), 0xfb);
        // FB 014A
        gbc.setState(0x3a85, 0x9fca, 0x1360, 0xafb2, 0xaf1a, 0x77ed, 0x1, 0x0);
        gbc.writeMem(0x3a85, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9fca);
        EXPECT(gbc.pc(), 0x3a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 014B
        gbc.setState(0x81b4, 0xea05, 0x11b0, 0x6301, 0xe9ea, 0xf94f, 0x1, 0x1);
        gbc.writeMem(0x81b4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xea05);
        EXPECT(gbc.pc(), 0x81b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81b4), 0xfb);
        // FB 014C
        gbc.setState(0xd9dd, 0x118d, 0x9e0, 0xf1fb, 0x832f, 0xb256, 0x1, 0x1);
        gbc.writeMem(0xd9dd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x118d);
        EXPECT(gbc.pc(), 0xd9de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9dd), 0xfb);
        // FB 014D
        gbc.setState(0x265c, 0x1514, 0x2bf0, 0xa6ae, 0x2151, 0xe4a0, 0x0, 0x0);
        gbc.writeMem(0x265c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1514);
        EXPECT(gbc.pc(), 0x265d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 014E
        gbc.setState(0xe9c4, 0x4d0e, 0x3460, 0xaf5d, 0xd6eb, 0xb3fb, 0x1, 0x1);
        gbc.writeMem(0xe9c4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4d0e);
        EXPECT(gbc.pc(), 0xe9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c4), 0xfb);
        // FB 014F
        gbc.setState(0x1824, 0xebbb, 0xf600, 0xe1f6, 0x7b44, 0xed9a, 0x1, 0x0);
        gbc.writeMem(0x1824, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xebbb);
        EXPECT(gbc.pc(), 0x1825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0150
        gbc.setState(0x4024, 0xa301, 0xb8e0, 0x7f74, 0x8c5, 0x8f5, 0x1, 0x0);
        gbc.writeMem(0x4024, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa301);
        EXPECT(gbc.pc(), 0x4025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0151
        gbc.setState(0x3e40, 0x65ed, 0x7350, 0xa1b8, 0xcd11, 0xe82e, 0x0, 0x1);
        gbc.writeMem(0x3e40, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x65ed);
        EXPECT(gbc.pc(), 0x3e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0152
        gbc.setState(0x4e09, 0x23c9, 0x2f70, 0xbd27, 0x9bc6, 0x1ac8, 0x1, 0x1);
        gbc.writeMem(0x4e09, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x23c9);
        EXPECT(gbc.pc(), 0x4e0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0153
        gbc.setState(0xd8a8, 0x57c4, 0x58d0, 0x1d9f, 0x5b21, 0x4269, 0x1, 0x1);
        gbc.writeMem(0xd8a8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x57c4);
        EXPECT(gbc.pc(), 0xd8a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8a8), 0xfb);
        // FB 0155
        gbc.setState(0x41b8, 0xe803, 0xbf0, 0xb6d1, 0xd45e, 0xe979, 0x0, 0x1);
        gbc.writeMem(0x41b8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe803);
        EXPECT(gbc.pc(), 0x41b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0156
        gbc.setState(0xd6cb, 0x725, 0x9460, 0xfedd, 0xeb2f, 0xd1, 0x1, 0x1);
        gbc.writeMem(0xd6cb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x725);
        EXPECT(gbc.pc(), 0xd6cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6cb), 0xfb);
        // FB 0157
        gbc.setState(0xa837, 0xeb2, 0x8990, 0xf305, 0x2794, 0x39e8, 0x0, 0x0);
        gbc.writeMem(0xa837, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xeb2);
        EXPECT(gbc.pc(), 0xa838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa837), 0xfb);
        // FB 0159
        gbc.setState(0x78f2, 0xae42, 0x4ca0, 0xe6aa, 0x400, 0x99cc, 0x1, 0x0);
        gbc.writeMem(0x78f2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xae42);
        EXPECT(gbc.pc(), 0x78f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 015A
        gbc.setState(0x7cfc, 0x65e5, 0x5f50, 0x984f, 0xb989, 0x523f, 0x1, 0x1);
        gbc.writeMem(0x7cfc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x65e5);
        EXPECT(gbc.pc(), 0x7cfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 015C
        gbc.setState(0x93e5, 0x5159, 0x4350, 0xca33, 0x96ce, 0xe8bf, 0x1, 0x0);
        gbc.writeMem(0x93e5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5159);
        EXPECT(gbc.pc(), 0x93e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93e5), 0xfb);
        // FB 015D
        gbc.setState(0x42ba, 0x6cf6, 0x52b0, 0x3b44, 0x73a4, 0x8461, 0x1, 0x0);
        gbc.writeMem(0x42ba, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6cf6);
        EXPECT(gbc.pc(), 0x42bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 015E
        gbc.setState(0x1c75, 0xe168, 0x24a0, 0xcae4, 0x82ec, 0x460c, 0x1, 0x0);
        gbc.writeMem(0x1c75, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe168);
        EXPECT(gbc.pc(), 0x1c76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 015F
        gbc.setState(0x1334, 0xda41, 0x3b20, 0x537f, 0xfbf4, 0xb33b, 0x0, 0x1);
        gbc.writeMem(0x1334, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xda41);
        EXPECT(gbc.pc(), 0x1335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0160
        gbc.setState(0xe1d8, 0x7966, 0x8cd0, 0x6ee3, 0x1ec, 0x65bf, 0x1, 0x1);
        gbc.writeMem(0xe1d8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7966);
        EXPECT(gbc.pc(), 0xe1d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1d8), 0xfb);
        // FB 0161
        gbc.setState(0x287a, 0x78d6, 0x1850, 0x9e7a, 0x5a03, 0x36e9, 0x1, 0x0);
        gbc.writeMem(0x287a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x78d6);
        EXPECT(gbc.pc(), 0x287b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0162
        gbc.setState(0xa22, 0x3431, 0x2290, 0xe1bd, 0x1545, 0xfc8e, 0x0, 0x0);
        gbc.writeMem(0xa22, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3431);
        EXPECT(gbc.pc(), 0xa23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0163
        gbc.setState(0x2d87, 0xd964, 0xbb10, 0x9aef, 0xddfc, 0x54a2, 0x0, 0x1);
        gbc.writeMem(0x2d87, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd964);
        EXPECT(gbc.pc(), 0x2d88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0164
        gbc.setState(0xa825, 0x4165, 0xd3a0, 0xfe94, 0xe2fa, 0xd07f, 0x0, 0x0);
        gbc.writeMem(0xa825, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4165);
        EXPECT(gbc.pc(), 0xa826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa825), 0xfb);
        // FB 0165
        gbc.setState(0xd577, 0xf36b, 0xa350, 0xe06e, 0x8d89, 0x4b4d, 0x0, 0x0);
        gbc.writeMem(0xd577, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf36b);
        EXPECT(gbc.pc(), 0xd578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd577), 0xfb);
        // FB 0166
        gbc.setState(0xe7fc, 0x4baf, 0xb5e0, 0xfc3a, 0x2b6c, 0x7a13, 0x0, 0x1);
        gbc.writeMem(0xe7fc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4baf);
        EXPECT(gbc.pc(), 0xe7fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7fc), 0xfb);
        // FB 0168
        gbc.setState(0x89c2, 0xfb18, 0xd410, 0x84d3, 0x1ea5, 0xf261, 0x1, 0x1);
        gbc.writeMem(0x89c2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xfb18);
        EXPECT(gbc.pc(), 0x89c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c2), 0xfb);
        // FB 0169
        gbc.setState(0x6d41, 0x56b6, 0xd770, 0x1de1, 0x3e7f, 0x8ff2, 0x0, 0x0);
        gbc.writeMem(0x6d41, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x56b6);
        EXPECT(gbc.pc(), 0x6d42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 016A
        gbc.setState(0x344, 0x34af, 0x3700, 0x8572, 0x8f55, 0x9bb9, 0x1, 0x0);
        gbc.writeMem(0x344, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x34af);
        EXPECT(gbc.pc(), 0x345);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 016B
        gbc.setState(0x9c13, 0xcf6c, 0x6a60, 0xde62, 0x8c94, 0xaf15, 0x1, 0x0);
        gbc.writeMem(0x9c13, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xcf6c);
        EXPECT(gbc.pc(), 0x9c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c13), 0xfb);
        // FB 016C
        gbc.setState(0xbbb0, 0xbeb9, 0xc4c0, 0x4a81, 0x6b94, 0xde20, 0x1, 0x1);
        gbc.writeMem(0xbbb0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xbeb9);
        EXPECT(gbc.pc(), 0xbbb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb0), 0xfb);
        // FB 016D
        gbc.setState(0x161, 0xd64e, 0x2650, 0xb38b, 0x1f45, 0xb38f, 0x0, 0x0);
        gbc.writeMem(0x161, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd64e);
        EXPECT(gbc.pc(), 0x162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 016E
        gbc.setState(0xec11, 0x9876, 0xd200, 0xec64, 0x4041, 0xf6c0, 0x1, 0x1);
        gbc.writeMem(0xec11, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9876);
        EXPECT(gbc.pc(), 0xec12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec11), 0xfb);
        // FB 016F
        gbc.setState(0xa25, 0xc547, 0xf3c0, 0x9e52, 0x2f58, 0xf0b4, 0x0, 0x0);
        gbc.writeMem(0xa25, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc547);
        EXPECT(gbc.pc(), 0xa26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0170
        gbc.setState(0xb26b, 0x8392, 0x67c0, 0xdfbe, 0xd894, 0xf0e1, 0x0, 0x0);
        gbc.writeMem(0xb26b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8392);
        EXPECT(gbc.pc(), 0xb26c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb26b), 0xfb);
        // FB 0171
        gbc.setState(0x142d, 0x7ee9, 0x30b0, 0x6c48, 0x49ee, 0x37a6, 0x1, 0x1);
        gbc.writeMem(0x142d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7ee9);
        EXPECT(gbc.pc(), 0x142e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0172
        gbc.setState(0x86ec, 0x2e3a, 0x4a40, 0x3e5d, 0x236b, 0xd9bd, 0x1, 0x0);
        gbc.writeMem(0x86ec, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2e3a);
        EXPECT(gbc.pc(), 0x86ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86ec), 0xfb);
        // FB 0173
        gbc.setState(0xdbe4, 0x432, 0x2ca0, 0xa8b6, 0x5236, 0x47c6, 0x0, 0x0);
        gbc.writeMem(0xdbe4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x432);
        EXPECT(gbc.pc(), 0xdbe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbe4), 0xfb);
        // FB 0174
        gbc.setState(0x5984, 0xab0e, 0xae50, 0xc317, 0x8c80, 0xbb55, 0x1, 0x1);
        gbc.writeMem(0x5984, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xab0e);
        EXPECT(gbc.pc(), 0x5985);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0175
        gbc.setState(0x6b85, 0xd63c, 0x74c0, 0xc8c3, 0x9b76, 0x7079, 0x1, 0x0);
        gbc.writeMem(0x6b85, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd63c);
        EXPECT(gbc.pc(), 0x6b86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0176
        gbc.setState(0x25df, 0x262a, 0x5d80, 0x248f, 0xe11c, 0xaf72, 0x1, 0x0);
        gbc.writeMem(0x25df, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x262a);
        EXPECT(gbc.pc(), 0x25e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0177
        gbc.setState(0xe506, 0xe1d3, 0x4760, 0x3ad2, 0x2e34, 0xcff1, 0x0, 0x0);
        gbc.writeMem(0xe506, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe1d3);
        EXPECT(gbc.pc(), 0xe507);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe506), 0xfb);
        // FB 0178
        gbc.setState(0x7cd, 0xb466, 0x4500, 0x132, 0x8216, 0xecde, 0x0, 0x1);
        gbc.writeMem(0x7cd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb466);
        EXPECT(gbc.pc(), 0x7ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0179
        gbc.setState(0xde1e, 0x992, 0xbd10, 0x9e63, 0x1494, 0x1933, 0x1, 0x0);
        gbc.writeMem(0xde1e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x992);
        EXPECT(gbc.pc(), 0xde1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde1e), 0xfb);
        // FB 017A
        gbc.setState(0xa180, 0xf9df, 0x5930, 0xa6f9, 0xc2e0, 0xd7d5, 0x1, 0x0);
        gbc.writeMem(0xa180, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf9df);
        EXPECT(gbc.pc(), 0xa181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa180), 0xfb);
        // FB 017B
        gbc.setState(0xd042, 0x9b70, 0x9970, 0x42a9, 0x2f3b, 0x4523, 0x0, 0x1);
        gbc.writeMem(0xd042, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9b70);
        EXPECT(gbc.pc(), 0xd043);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd042), 0xfb);
        // FB 017C
        gbc.setState(0x1324, 0x7f87, 0x530, 0xd0f6, 0x2c14, 0xceaf, 0x1, 0x1);
        gbc.writeMem(0x1324, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7f87);
        EXPECT(gbc.pc(), 0x1325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 017D
        gbc.setState(0x5c90, 0xbf1a, 0xdcf0, 0x8d79, 0x686e, 0xfc2d, 0x1, 0x1);
        gbc.writeMem(0x5c90, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbf1a);
        EXPECT(gbc.pc(), 0x5c91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 017E
        gbc.setState(0x994d, 0xeeb1, 0x5fb0, 0xa022, 0x5d38, 0xf09b, 0x0, 0x1);
        gbc.writeMem(0x994d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xeeb1);
        EXPECT(gbc.pc(), 0x994e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x994d), 0xfb);
        // FB 017F
        gbc.setState(0x707d, 0x4949, 0xed0, 0xb743, 0xd64f, 0x1bdc, 0x1, 0x0);
        gbc.writeMem(0x707d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4949);
        EXPECT(gbc.pc(), 0x707e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0180
        gbc.setState(0xdd04, 0x3fca, 0xcd10, 0x382d, 0x6a45, 0x2b71, 0x1, 0x0);
        gbc.writeMem(0xdd04, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3fca);
        EXPECT(gbc.pc(), 0xdd05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd04), 0xfb);
        // FB 0181
        gbc.setState(0x1de2, 0x50f9, 0xf290, 0x5b96, 0x21c, 0xdd47, 0x0, 0x1);
        gbc.writeMem(0x1de2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x50f9);
        EXPECT(gbc.pc(), 0x1de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0182
        gbc.setState(0xa2b4, 0x47bd, 0x1ec0, 0x50a4, 0x60ee, 0xe3eb, 0x1, 0x0);
        gbc.writeMem(0xa2b4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x47bd);
        EXPECT(gbc.pc(), 0xa2b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b4), 0xfb);
        // FB 0183
        gbc.setState(0x53ad, 0x283f, 0xb1b0, 0x8002, 0x27fb, 0xb2df, 0x1, 0x0);
        gbc.writeMem(0x53ad, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x283f);
        EXPECT(gbc.pc(), 0x53ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0185
        gbc.setState(0x4c36, 0xedec, 0xa740, 0x13b4, 0xa97, 0x43c2, 0x0, 0x1);
        gbc.writeMem(0x4c36, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xedec);
        EXPECT(gbc.pc(), 0x4c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0186
        gbc.setState(0x96c9, 0xddee, 0xf110, 0xdc13, 0x3017, 0xb785, 0x0, 0x0);
        gbc.writeMem(0x96c9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xddee);
        EXPECT(gbc.pc(), 0x96ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96c9), 0xfb);
        // FB 0187
        gbc.setState(0xa6e3, 0x9ddf, 0xf6b0, 0x6a63, 0x6fca, 0x7f2a, 0x1, 0x0);
        gbc.writeMem(0xa6e3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9ddf);
        EXPECT(gbc.pc(), 0xa6e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6e3), 0xfb);
        // FB 0188
        gbc.setState(0x2471, 0x49e, 0x34c0, 0xe43f, 0xfbdb, 0xb81b, 0x0, 0x0);
        gbc.writeMem(0x2471, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x49e);
        EXPECT(gbc.pc(), 0x2472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0189
        gbc.setState(0x3acc, 0xec5a, 0x81a0, 0xdc54, 0xb9ad, 0x8972, 0x0, 0x1);
        gbc.writeMem(0x3acc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xec5a);
        EXPECT(gbc.pc(), 0x3acd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 018A
        gbc.setState(0x7287, 0x767d, 0x3400, 0x4255, 0x6a32, 0xb0ae, 0x0, 0x0);
        gbc.writeMem(0x7287, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x767d);
        EXPECT(gbc.pc(), 0x7288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 018B
        gbc.setState(0xa3e0, 0xc1ff, 0xcb90, 0x7d4f, 0xe469, 0x5358, 0x1, 0x0);
        gbc.writeMem(0xa3e0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc1ff);
        EXPECT(gbc.pc(), 0xa3e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3e0), 0xfb);
        // FB 018C
        gbc.setState(0xed5b, 0x879c, 0x3b50, 0x22e2, 0xcb44, 0x82e2, 0x0, 0x1);
        gbc.writeMem(0xed5b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x879c);
        EXPECT(gbc.pc(), 0xed5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed5b), 0xfb);
        // FB 018D
        gbc.setState(0x9b3f, 0x8bd0, 0xe010, 0xf219, 0xb0a0, 0xe769, 0x1, 0x1);
        gbc.writeMem(0x9b3f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8bd0);
        EXPECT(gbc.pc(), 0x9b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b3f), 0xfb);
        // FB 018E
        gbc.setState(0x9192, 0x8395, 0xffd0, 0xb4e9, 0x69ee, 0x60a3, 0x0, 0x1);
        gbc.writeMem(0x9192, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8395);
        EXPECT(gbc.pc(), 0x9193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9192), 0xfb);
        // FB 018F
        gbc.setState(0x4a8d, 0x2ee0, 0xb0f0, 0xa97c, 0xec1a, 0xf838, 0x0, 0x0);
        gbc.writeMem(0x4a8d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2ee0);
        EXPECT(gbc.pc(), 0x4a8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0191
        gbc.setState(0xd413, 0xd309, 0x60c0, 0xd56c, 0xf915, 0x80a5, 0x1, 0x0);
        gbc.writeMem(0xd413, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd309);
        EXPECT(gbc.pc(), 0xd414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd413), 0xfb);
        // FB 0192
        gbc.setState(0xe760, 0x14b6, 0x1f20, 0x9926, 0xeeba, 0xbc7e, 0x1, 0x1);
        gbc.writeMem(0xe760, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x14b6);
        EXPECT(gbc.pc(), 0xe761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe760), 0xfb);
        // FB 0193
        gbc.setState(0x4331, 0x971d, 0xa850, 0x444b, 0x611f, 0xb96d, 0x0, 0x0);
        gbc.writeMem(0x4331, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x971d);
        EXPECT(gbc.pc(), 0x4332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0194
        gbc.setState(0xbbac, 0xe764, 0xc580, 0x2720, 0xb549, 0x346, 0x0, 0x0);
        gbc.writeMem(0xbbac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe764);
        EXPECT(gbc.pc(), 0xbbad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbac), 0xfb);
        // FB 0195
        gbc.setState(0x3fda, 0xafb7, 0x2700, 0x9386, 0x74a1, 0x791a, 0x0, 0x1);
        gbc.writeMem(0x3fda, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xafb7);
        EXPECT(gbc.pc(), 0x3fdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0197
        gbc.setState(0x444e, 0x4177, 0x7050, 0x6064, 0x6fe3, 0xed29, 0x0, 0x1);
        gbc.writeMem(0x444e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x4177);
        EXPECT(gbc.pc(), 0x444f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0198
        gbc.setState(0xef0b, 0xe931, 0xb280, 0x3970, 0x86af, 0xefbb, 0x0, 0x0);
        gbc.writeMem(0xef0b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe931);
        EXPECT(gbc.pc(), 0xef0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef0b), 0xfb);
        // FB 0199
        gbc.setState(0xa852, 0xc016, 0xbcb0, 0x8678, 0x7001, 0x7734, 0x0, 0x1);
        gbc.writeMem(0xa852, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc016);
        EXPECT(gbc.pc(), 0xa853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa852), 0xfb);
        // FB 019A
        gbc.setState(0xe8a7, 0x93c0, 0xb3f0, 0x946, 0x6440, 0x941d, 0x0, 0x0);
        gbc.writeMem(0xe8a7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x93c0);
        EXPECT(gbc.pc(), 0xe8a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8a7), 0xfb);
        // FB 019B
        gbc.setState(0x1a36, 0xd143, 0x8ce0, 0xe1da, 0xbae9, 0x6f0f, 0x1, 0x1);
        gbc.writeMem(0x1a36, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd143);
        EXPECT(gbc.pc(), 0x1a37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 019C
        gbc.setState(0x915b, 0xe043, 0x89f0, 0x1d28, 0x9949, 0xa1ed, 0x1, 0x1);
        gbc.writeMem(0x915b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe043);
        EXPECT(gbc.pc(), 0x915c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x915b), 0xfb);
        // FB 019D
        gbc.setState(0x7c6b, 0x8380, 0x1ab0, 0x1478, 0x7696, 0xf3, 0x1, 0x0);
        gbc.writeMem(0x7c6b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8380);
        EXPECT(gbc.pc(), 0x7c6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 019E
        gbc.setState(0xd03e, 0xceb7, 0xca30, 0xe927, 0x2fd1, 0x3bc, 0x1, 0x1);
        gbc.writeMem(0xd03e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xceb7);
        EXPECT(gbc.pc(), 0xd03f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd03e), 0xfb);
        // FB 01A0
        gbc.setState(0x80b7, 0xdead, 0xc920, 0xf498, 0x602e, 0x88c5, 0x0, 0x0);
        gbc.writeMem(0x80b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdead);
        EXPECT(gbc.pc(), 0x80b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b7), 0xfb);
        // FB 01A1
        gbc.setState(0xabfa, 0x12ea, 0xcf50, 0x6873, 0xaef2, 0xf80a, 0x1, 0x0);
        gbc.writeMem(0xabfa, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x12ea);
        EXPECT(gbc.pc(), 0xabfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabfa), 0xfb);
        // FB 01A2
        gbc.setState(0x3b, 0x6260, 0xa1b0, 0xe092, 0x5f56, 0x111e, 0x0, 0x0);
        gbc.writeMem(0x3b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6260);
        EXPECT(gbc.pc(), 0x3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01A3
        gbc.setState(0x4963, 0x8357, 0x2340, 0x13fd, 0xad7d, 0x69e6, 0x1, 0x1);
        gbc.writeMem(0x4963, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8357);
        EXPECT(gbc.pc(), 0x4964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01A4
        gbc.setState(0xb079, 0xd842, 0xe0a0, 0x62cb, 0xe6f4, 0x1b39, 0x1, 0x1);
        gbc.writeMem(0xb079, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd842);
        EXPECT(gbc.pc(), 0xb07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb079), 0xfb);
        // FB 01A5
        gbc.setState(0x4f31, 0x1637, 0x8f50, 0x2724, 0x4bc6, 0xfa52, 0x1, 0x1);
        gbc.writeMem(0x4f31, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1637);
        EXPECT(gbc.pc(), 0x4f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01A6
        gbc.setState(0x999, 0xf28b, 0xb4a0, 0xc5a9, 0xf056, 0xd46e, 0x1, 0x1);
        gbc.writeMem(0x999, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf28b);
        EXPECT(gbc.pc(), 0x99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01A7
        gbc.setState(0x99fe, 0xa2c0, 0x50f0, 0x9aae, 0x44ab, 0x26a, 0x1, 0x1);
        gbc.writeMem(0x99fe, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa2c0);
        EXPECT(gbc.pc(), 0x99ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99fe), 0xfb);
        // FB 01A8
        gbc.setState(0xd003, 0xaf65, 0xc290, 0xbec9, 0x13ad, 0x9531, 0x0, 0x0);
        gbc.writeMem(0xd003, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xaf65);
        EXPECT(gbc.pc(), 0xd004);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd003), 0xfb);
        // FB 01A9
        gbc.setState(0x893, 0xc884, 0x5530, 0xa015, 0xb187, 0x9d80, 0x1, 0x0);
        gbc.writeMem(0x893, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc884);
        EXPECT(gbc.pc(), 0x894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01AA
        gbc.setState(0x9202, 0xef33, 0x7ec0, 0xd0ce, 0x90ec, 0xf9f8, 0x0, 0x0);
        gbc.writeMem(0x9202, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xef33);
        EXPECT(gbc.pc(), 0x9203);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9202), 0xfb);
        // FB 01AB
        gbc.setState(0x49a3, 0x2045, 0x4f90, 0x503f, 0x931a, 0x69d0, 0x0, 0x0);
        gbc.writeMem(0x49a3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2045);
        EXPECT(gbc.pc(), 0x49a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01AC
        gbc.setState(0x24a3, 0x845f, 0x8bb0, 0xfb0b, 0xdb96, 0xab0f, 0x1, 0x0);
        gbc.writeMem(0x24a3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x845f);
        EXPECT(gbc.pc(), 0x24a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01AD
        gbc.setState(0x4cb9, 0x9328, 0x5310, 0x8a9f, 0x738b, 0x5834, 0x0, 0x0);
        gbc.writeMem(0x4cb9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9328);
        EXPECT(gbc.pc(), 0x4cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01AE
        gbc.setState(0x5188, 0x9316, 0xe5e0, 0x9d62, 0x3b7c, 0x3bec, 0x0, 0x1);
        gbc.writeMem(0x5188, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9316);
        EXPECT(gbc.pc(), 0x5189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01AF
        gbc.setState(0xe450, 0x1333, 0x31c0, 0x3ec6, 0x1dbd, 0xb5cc, 0x0, 0x1);
        gbc.writeMem(0xe450, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1333);
        EXPECT(gbc.pc(), 0xe451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe450), 0xfb);
        // FB 01B0
        gbc.setState(0x9df6, 0xefdf, 0xa600, 0x9551, 0x2047, 0xaf44, 0x1, 0x1);
        gbc.writeMem(0x9df6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xefdf);
        EXPECT(gbc.pc(), 0x9df7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df6), 0xfb);
        // FB 01B1
        gbc.setState(0x7942, 0xfb5a, 0x4100, 0x9367, 0x99e3, 0x80d0, 0x1, 0x1);
        gbc.writeMem(0x7942, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfb5a);
        EXPECT(gbc.pc(), 0x7943);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01B2
        gbc.setState(0xf66, 0x3d55, 0xf830, 0xb022, 0x61d6, 0x2337, 0x0, 0x1);
        gbc.writeMem(0xf66, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3d55);
        EXPECT(gbc.pc(), 0xf67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01B3
        gbc.setState(0xd836, 0x9443, 0x11d0, 0xc25a, 0xb36, 0x5562, 0x1, 0x0);
        gbc.writeMem(0xd836, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9443);
        EXPECT(gbc.pc(), 0xd837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd836), 0xfb);
        // FB 01B4
        gbc.setState(0x403f, 0x50fa, 0x4910, 0xb91, 0x54a0, 0xc203, 0x1, 0x0);
        gbc.writeMem(0x403f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x50fa);
        EXPECT(gbc.pc(), 0x4040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01B6
        gbc.setState(0x1027, 0x67ba, 0x36d0, 0xd93a, 0x36df, 0x2e77, 0x0, 0x0);
        gbc.writeMem(0x1027, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x67ba);
        EXPECT(gbc.pc(), 0x1028);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01B7
        gbc.setState(0x6e3e, 0xaeca, 0x9870, 0xb9bf, 0xd619, 0xb45a, 0x0, 0x1);
        gbc.writeMem(0x6e3e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xaeca);
        EXPECT(gbc.pc(), 0x6e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01B8
        gbc.setState(0xbd41, 0xd22, 0x8d30, 0x4f54, 0x532e, 0x12a8, 0x0, 0x0);
        gbc.writeMem(0xbd41, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd22);
        EXPECT(gbc.pc(), 0xbd42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd41), 0xfb);
        // FB 01B9
        gbc.setState(0xa2b8, 0xa417, 0x8c60, 0x2110, 0xf9fa, 0xd107, 0x0, 0x1);
        gbc.writeMem(0xa2b8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa417);
        EXPECT(gbc.pc(), 0xa2b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b8), 0xfb);
        // FB 01BA
        gbc.setState(0x9c1f, 0xa6c6, 0xa140, 0xcab3, 0x3263, 0x7ffd, 0x0, 0x0);
        gbc.writeMem(0x9c1f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa6c6);
        EXPECT(gbc.pc(), 0x9c20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c1f), 0xfb);
        // FB 01BB
        gbc.setState(0x7e9d, 0xb769, 0x9120, 0xf3d, 0xc87b, 0xd756, 0x0, 0x0);
        gbc.writeMem(0x7e9d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb769);
        EXPECT(gbc.pc(), 0x7e9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01BC
        gbc.setState(0x5fad, 0x61b4, 0x48c0, 0x571e, 0x4c80, 0xa23d, 0x1, 0x1);
        gbc.writeMem(0x5fad, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x61b4);
        EXPECT(gbc.pc(), 0x5fae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01BD
        gbc.setState(0x2cb7, 0xef4, 0xb9f0, 0x86d3, 0x7f7c, 0xce8a, 0x0, 0x1);
        gbc.writeMem(0x2cb7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xef4);
        EXPECT(gbc.pc(), 0x2cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01BF
        gbc.setState(0xbf85, 0x1ce1, 0xce10, 0xf109, 0x16c1, 0xbf0e, 0x0, 0x1);
        gbc.writeMem(0xbf85, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1ce1);
        EXPECT(gbc.pc(), 0xbf86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf85), 0xfb);
        // FB 01C0
        gbc.setState(0xa6d7, 0x2103, 0x7570, 0x2c51, 0xf05, 0x4986, 0x0, 0x1);
        gbc.writeMem(0xa6d7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2103);
        EXPECT(gbc.pc(), 0xa6d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6d7), 0xfb);
        // FB 01C1
        gbc.setState(0x5220, 0x6bf9, 0x1a70, 0xc44d, 0xbd67, 0x7e05, 0x1, 0x0);
        gbc.writeMem(0x5220, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6bf9);
        EXPECT(gbc.pc(), 0x5221);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01C2
        gbc.setState(0xb287, 0xda77, 0x9c60, 0xbba6, 0x19c4, 0xcb05, 0x1, 0x0);
        gbc.writeMem(0xb287, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xda77);
        EXPECT(gbc.pc(), 0xb288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb287), 0xfb);
        // FB 01C3
        gbc.setState(0x46e5, 0xd024, 0x1f30, 0xf27f, 0x7cd7, 0x6313, 0x1, 0x1);
        gbc.writeMem(0x46e5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd024);
        EXPECT(gbc.pc(), 0x46e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01C4
        gbc.setState(0x5fcc, 0x8a67, 0x6070, 0x56de, 0x3807, 0x9276, 0x1, 0x0);
        gbc.writeMem(0x5fcc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8a67);
        EXPECT(gbc.pc(), 0x5fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01C5
        gbc.setState(0xa899, 0x830d, 0x36a0, 0x9234, 0x2616, 0xdb46, 0x1, 0x0);
        gbc.writeMem(0xa899, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x830d);
        EXPECT(gbc.pc(), 0xa89a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa899), 0xfb);
        // FB 01C6
        gbc.setState(0xa618, 0xf5d7, 0xb770, 0x9071, 0x44da, 0xc971, 0x0, 0x1);
        gbc.writeMem(0xa618, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf5d7);
        EXPECT(gbc.pc(), 0xa619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa618), 0xfb);
        // FB 01C7
        gbc.setState(0x6d5e, 0x3908, 0x3890, 0xd1e4, 0xdcd, 0x3032, 0x0, 0x1);
        gbc.writeMem(0x6d5e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3908);
        EXPECT(gbc.pc(), 0x6d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01C8
        gbc.setState(0xa54a, 0x7b26, 0xee40, 0xbe88, 0xa6be, 0x9d61, 0x1, 0x0);
        gbc.writeMem(0xa54a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7b26);
        EXPECT(gbc.pc(), 0xa54b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa54a), 0xfb);
        // FB 01C9
        gbc.setState(0xa10a, 0x43f0, 0x640, 0x4c9e, 0x8e71, 0x575e, 0x0, 0x0);
        gbc.writeMem(0xa10a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x43f0);
        EXPECT(gbc.pc(), 0xa10b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa10a), 0xfb);
        // FB 01CA
        gbc.setState(0x61bd, 0xb9b3, 0xbd90, 0x1b2a, 0x5827, 0x835f, 0x0, 0x1);
        gbc.writeMem(0x61bd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb9b3);
        EXPECT(gbc.pc(), 0x61be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01CB
        gbc.setState(0xdbd, 0x49c6, 0x8d20, 0x3065, 0xeb72, 0x438a, 0x1, 0x0);
        gbc.writeMem(0xdbd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x49c6);
        EXPECT(gbc.pc(), 0xdbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01CC
        gbc.setState(0x9384, 0xaead, 0x93a0, 0xa41b, 0xe5a4, 0xec5b, 0x1, 0x1);
        gbc.writeMem(0x9384, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xaead);
        EXPECT(gbc.pc(), 0x9385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9384), 0xfb);
        // FB 01CD
        gbc.setState(0x2129, 0xee10, 0xd8a0, 0x8990, 0xf708, 0xbac, 0x1, 0x0);
        gbc.writeMem(0x2129, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xee10);
        EXPECT(gbc.pc(), 0x212a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01CE
        gbc.setState(0xd2f4, 0x8cf2, 0x8d60, 0x6511, 0x3113, 0xf925, 0x0, 0x1);
        gbc.writeMem(0xd2f4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8cf2);
        EXPECT(gbc.pc(), 0xd2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2f4), 0xfb);
        // FB 01CF
        gbc.setState(0x3228, 0x437a, 0xdc50, 0x50ea, 0xc98a, 0xc7ba, 0x0, 0x0);
        gbc.writeMem(0x3228, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x437a);
        EXPECT(gbc.pc(), 0x3229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01D0
        gbc.setState(0xdc31, 0xef5e, 0xd970, 0x91bf, 0x7b4e, 0xdd64, 0x1, 0x1);
        gbc.writeMem(0xdc31, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xef5e);
        EXPECT(gbc.pc(), 0xdc32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc31), 0xfb);
        // FB 01D1
        gbc.setState(0x3658, 0x852f, 0x9d90, 0xa35c, 0x727e, 0x9cf8, 0x0, 0x0);
        gbc.writeMem(0x3658, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x852f);
        EXPECT(gbc.pc(), 0x3659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01D2
        gbc.setState(0x2af9, 0xdc6, 0xebc0, 0x72bf, 0x190c, 0x6b37, 0x1, 0x0);
        gbc.writeMem(0x2af9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdc6);
        EXPECT(gbc.pc(), 0x2afa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01D3
        gbc.setState(0x8e3e, 0x930c, 0x35e0, 0x102b, 0xf65a, 0xbf0b, 0x0, 0x1);
        gbc.writeMem(0x8e3e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x930c);
        EXPECT(gbc.pc(), 0x8e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e3e), 0xfb);
        // FB 01D4
        gbc.setState(0x7156, 0x1ccf, 0x3a00, 0x1ea6, 0x8191, 0x6095, 0x1, 0x1);
        gbc.writeMem(0x7156, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1ccf);
        EXPECT(gbc.pc(), 0x7157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01D5
        gbc.setState(0x4701, 0x4992, 0x130, 0xc2a, 0xbc2d, 0x5e56, 0x1, 0x1);
        gbc.writeMem(0x4701, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4992);
        EXPECT(gbc.pc(), 0x4702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01D6
        gbc.setState(0x1e62, 0x9a70, 0xfbc0, 0xd6c3, 0xcf5a, 0x14a6, 0x1, 0x1);
        gbc.writeMem(0x1e62, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9a70);
        EXPECT(gbc.pc(), 0x1e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01D7
        gbc.setState(0x12a6, 0x6764, 0xd4f0, 0x5eaa, 0x1f2f, 0x32dc, 0x1, 0x0);
        gbc.writeMem(0x12a6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x6764);
        EXPECT(gbc.pc(), 0x12a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01D8
        gbc.setState(0x45e3, 0x3574, 0x8bc0, 0xcd65, 0xe741, 0x68c2, 0x1, 0x0);
        gbc.writeMem(0x45e3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3574);
        EXPECT(gbc.pc(), 0x45e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01D9
        gbc.setState(0x655c, 0x7254, 0xf310, 0x6102, 0x6063, 0x8a15, 0x1, 0x0);
        gbc.writeMem(0x655c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7254);
        EXPECT(gbc.pc(), 0x655d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01DA
        gbc.setState(0x3d5e, 0xaaea, 0xa30, 0x119e, 0x192d, 0x826d, 0x0, 0x1);
        gbc.writeMem(0x3d5e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xaaea);
        EXPECT(gbc.pc(), 0x3d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01DB
        gbc.setState(0xb936, 0xe25d, 0x5460, 0xc863, 0xf3e5, 0xa140, 0x1, 0x0);
        gbc.writeMem(0xb936, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe25d);
        EXPECT(gbc.pc(), 0xb937);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb936), 0xfb);
        // FB 01DC
        gbc.setState(0x112b, 0x8f17, 0xe480, 0x696a, 0x1a4c, 0xc96a, 0x1, 0x0);
        gbc.writeMem(0x112b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8f17);
        EXPECT(gbc.pc(), 0x112c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01DE
        gbc.setState(0xd4b8, 0xa83a, 0xcbb0, 0x1ca5, 0x733f, 0x57f7, 0x0, 0x0);
        gbc.writeMem(0xd4b8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa83a);
        EXPECT(gbc.pc(), 0xd4b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4b8), 0xfb);
        // FB 01DF
        gbc.setState(0x44cf, 0xf988, 0x2b40, 0x141c, 0x20ab, 0xc816, 0x0, 0x1);
        gbc.writeMem(0x44cf, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf988);
        EXPECT(gbc.pc(), 0x44d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01E0
        gbc.setState(0xc4e9, 0x5a76, 0x31d0, 0x67f, 0x9a8e, 0x6464, 0x1, 0x0);
        gbc.writeMem(0xc4e9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5a76);
        EXPECT(gbc.pc(), 0xc4ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4e9), 0xfb);
        // FB 01E2
        gbc.setState(0x8b, 0x9cb5, 0x6c40, 0xc0ae, 0x4c31, 0xbb94, 0x0, 0x0);
        gbc.writeMem(0x8b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9cb5);
        EXPECT(gbc.pc(), 0x8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01E3
        gbc.setState(0x1297, 0x1712, 0x8e70, 0x8262, 0x275f, 0xf922, 0x0, 0x0);
        gbc.writeMem(0x1297, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1712);
        EXPECT(gbc.pc(), 0x1298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01E4
        gbc.setState(0x3a73, 0x1a35, 0xe0, 0x85d9, 0xf33b, 0xf735, 0x0, 0x0);
        gbc.writeMem(0x3a73, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x1a35);
        EXPECT(gbc.pc(), 0x3a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01E5
        gbc.setState(0x2fe3, 0x922a, 0xb9b0, 0xe2c8, 0x67a2, 0xb81f, 0x1, 0x1);
        gbc.writeMem(0x2fe3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x922a);
        EXPECT(gbc.pc(), 0x2fe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01E6
        gbc.setState(0x6dc4, 0xc148, 0xb8b0, 0x6ab7, 0xff18, 0x4327, 0x0, 0x0);
        gbc.writeMem(0x6dc4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc148);
        EXPECT(gbc.pc(), 0x6dc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01E8
        gbc.setState(0x3ccd, 0x447c, 0x24d0, 0xd357, 0x11e7, 0xeacc, 0x0, 0x1);
        gbc.writeMem(0x3ccd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x447c);
        EXPECT(gbc.pc(), 0x3cce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01E9
        gbc.setState(0x58b2, 0xca9c, 0x5c40, 0x2048, 0x8964, 0xa2d3, 0x0, 0x1);
        gbc.writeMem(0x58b2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xca9c);
        EXPECT(gbc.pc(), 0x58b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01EA
        gbc.setState(0x3014, 0x9f49, 0xa50, 0x3477, 0x1a9f, 0x16d1, 0x1, 0x1);
        gbc.writeMem(0x3014, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9f49);
        EXPECT(gbc.pc(), 0x3015);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01EB
        gbc.setState(0x59d6, 0x898b, 0x4da0, 0xb28e, 0xdc2b, 0x3765, 0x1, 0x0);
        gbc.writeMem(0x59d6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x898b);
        EXPECT(gbc.pc(), 0x59d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01EC
        gbc.setState(0xaedb, 0x44fe, 0xd4d0, 0xc04, 0x4985, 0xde1e, 0x0, 0x0);
        gbc.writeMem(0xaedb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x44fe);
        EXPECT(gbc.pc(), 0xaedc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaedb), 0xfb);
        // FB 01ED
        gbc.setState(0x2643, 0x2328, 0x8580, 0x30cb, 0x8d38, 0xe313, 0x1, 0x0);
        gbc.writeMem(0x2643, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2328);
        EXPECT(gbc.pc(), 0x2644);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01EE
        gbc.setState(0xbb2a, 0xb06a, 0x5c80, 0x1812, 0xc333, 0xe91, 0x1, 0x0);
        gbc.writeMem(0xbb2a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb06a);
        EXPECT(gbc.pc(), 0xbb2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb2a), 0xfb);
        // FB 01EF
        gbc.setState(0x56dd, 0x2a7b, 0x9a90, 0x1284, 0xf672, 0x3632, 0x0, 0x0);
        gbc.writeMem(0x56dd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2a7b);
        EXPECT(gbc.pc(), 0x56de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 01F1
        gbc.setState(0x2530, 0xca0b, 0x5ba0, 0x652f, 0x818, 0x26e6, 0x0, 0x1);
        gbc.writeMem(0x2530, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xca0b);
        EXPECT(gbc.pc(), 0x2531);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01F2
        gbc.setState(0x9dfe, 0x687d, 0x9370, 0x618, 0xcef, 0xf85f, 0x0, 0x0);
        gbc.writeMem(0x9dfe, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x687d);
        EXPECT(gbc.pc(), 0x9dff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dfe), 0xfb);
        // FB 01F3
        gbc.setState(0x7d2a, 0xe663, 0xc160, 0xc96f, 0xbe45, 0x8602, 0x1, 0x1);
        gbc.writeMem(0x7d2a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe663);
        EXPECT(gbc.pc(), 0x7d2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 01F4
        gbc.setState(0xdfcd, 0x827b, 0x3960, 0x303e, 0x406, 0x9a4f, 0x1, 0x0);
        gbc.writeMem(0xdfcd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x827b);
        EXPECT(gbc.pc(), 0xdfce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfcd), 0xfb);
        // FB 01F5
        gbc.setState(0x2935, 0x6ea1, 0x47f0, 0x41e2, 0x48e3, 0x232f, 0x0, 0x0);
        gbc.writeMem(0x2935, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6ea1);
        EXPECT(gbc.pc(), 0x2936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01F6
        gbc.setState(0xac55, 0x6c01, 0x2290, 0xcb4f, 0x44ac, 0x2e31, 0x0, 0x1);
        gbc.writeMem(0xac55, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6c01);
        EXPECT(gbc.pc(), 0xac56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac55), 0xfb);
        // FB 01F8
        gbc.setState(0x6bf6, 0x37c2, 0x25c0, 0xa5e8, 0xbf60, 0x93a3, 0x1, 0x1);
        gbc.writeMem(0x6bf6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x37c2);
        EXPECT(gbc.pc(), 0x6bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01F9
        gbc.setState(0x5151, 0x2644, 0x20b0, 0x866d, 0x5581, 0x1d3e, 0x1, 0x1);
        gbc.writeMem(0x5151, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2644);
        EXPECT(gbc.pc(), 0x5152);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 01FA
        gbc.setState(0xd41a, 0x87cd, 0x7cc0, 0xe2bc, 0xf243, 0x7d50, 0x0, 0x0);
        gbc.writeMem(0xd41a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x87cd);
        EXPECT(gbc.pc(), 0xd41b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41a), 0xfb);
        // FB 01FB
        gbc.setState(0xda5d, 0xa945, 0xbb80, 0xf88e, 0x7730, 0x64ae, 0x0, 0x0);
        gbc.writeMem(0xda5d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa945);
        EXPECT(gbc.pc(), 0xda5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5d), 0xfb);
        // FB 01FC
        gbc.setState(0x5b93, 0x8196, 0x7140, 0x6c6a, 0xfd95, 0xe13a, 0x0, 0x1);
        gbc.writeMem(0x5b93, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8196);
        EXPECT(gbc.pc(), 0x5b94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 01FE
        gbc.setState(0xc2ec, 0xadcf, 0x9b70, 0x7f00, 0xada0, 0x6ba, 0x0, 0x1);
        gbc.writeMem(0xc2ec, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xadcf);
        EXPECT(gbc.pc(), 0xc2ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2ec), 0xfb);
        // FB 01FF
        gbc.setState(0xebed, 0x96d0, 0xae00, 0x3ccb, 0xd6bb, 0x854a, 0x0, 0x0);
        gbc.writeMem(0xebed, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x96d0);
        EXPECT(gbc.pc(), 0xebee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebed), 0xfb);
        // FB 0200
        gbc.setState(0x60d, 0xb88d, 0xb740, 0xf01c, 0x1c9c, 0x226a, 0x0, 0x1);
        gbc.writeMem(0x60d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb88d);
        EXPECT(gbc.pc(), 0x60e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0201
        gbc.setState(0x613c, 0xcc3a, 0x3330, 0xd424, 0xd5a8, 0x1d1b, 0x0, 0x1);
        gbc.writeMem(0x613c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xcc3a);
        EXPECT(gbc.pc(), 0x613d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0202
        gbc.setState(0xb866, 0xd3ee, 0x5810, 0x2365, 0xb71e, 0xaa96, 0x1, 0x0);
        gbc.writeMem(0xb866, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd3ee);
        EXPECT(gbc.pc(), 0xb867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb866), 0xfb);
        // FB 0203
        gbc.setState(0x4b6b, 0xfb5f, 0x5ce0, 0xa182, 0x1888, 0x77e3, 0x1, 0x0);
        gbc.writeMem(0x4b6b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xfb5f);
        EXPECT(gbc.pc(), 0x4b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0204
        gbc.setState(0x45ab, 0x4ba, 0x68d0, 0x9ac8, 0x359d, 0xaa40, 0x0, 0x1);
        gbc.writeMem(0x45ab, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4ba);
        EXPECT(gbc.pc(), 0x45ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0206
        gbc.setState(0xe808, 0x4bfa, 0x5360, 0x51e7, 0xef17, 0x3f9d, 0x0, 0x0);
        gbc.writeMem(0xe808, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4bfa);
        EXPECT(gbc.pc(), 0xe809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe808), 0xfb);
        // FB 0207
        gbc.setState(0x59d9, 0xc95f, 0x4a80, 0xdb35, 0xfe7c, 0x9762, 0x0, 0x0);
        gbc.writeMem(0x59d9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc95f);
        EXPECT(gbc.pc(), 0x59da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0208
        gbc.setState(0xc4b6, 0x83e3, 0x32c0, 0x50e3, 0x680f, 0xea01, 0x0, 0x0);
        gbc.writeMem(0xc4b6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x83e3);
        EXPECT(gbc.pc(), 0xc4b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b6), 0xfb);
        // FB 0209
        gbc.setState(0x7650, 0x439b, 0x54f0, 0xefdb, 0x228d, 0xec07, 0x1, 0x1);
        gbc.writeMem(0x7650, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x439b);
        EXPECT(gbc.pc(), 0x7651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 020A
        gbc.setState(0x7f5d, 0x9809, 0xa340, 0xad05, 0x4cd2, 0x4bcd, 0x0, 0x0);
        gbc.writeMem(0x7f5d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9809);
        EXPECT(gbc.pc(), 0x7f5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 020B
        gbc.setState(0x344d, 0x76ca, 0xff0, 0xcdd5, 0xac3d, 0x246e, 0x1, 0x1);
        gbc.writeMem(0x344d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x76ca);
        EXPECT(gbc.pc(), 0x344e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 020C
        gbc.setState(0x4e67, 0x220b, 0xa00, 0x8cb7, 0xfa94, 0x8e2a, 0x1, 0x0);
        gbc.writeMem(0x4e67, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x220b);
        EXPECT(gbc.pc(), 0x4e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 020D
        gbc.setState(0x9332, 0xc0b5, 0xfd40, 0x9b23, 0x61f8, 0x4b13, 0x1, 0x1);
        gbc.writeMem(0x9332, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc0b5);
        EXPECT(gbc.pc(), 0x9333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9332), 0xfb);
        // FB 020E
        gbc.setState(0x33f9, 0x258d, 0xd9a0, 0x3b07, 0xc390, 0x5d5b, 0x1, 0x1);
        gbc.writeMem(0x33f9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x258d);
        EXPECT(gbc.pc(), 0x33fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0210
        gbc.setState(0x9580, 0x70f1, 0x6440, 0xef75, 0x812a, 0x52b7, 0x1, 0x0);
        gbc.writeMem(0x9580, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x70f1);
        EXPECT(gbc.pc(), 0x9581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9580), 0xfb);
        // FB 0211
        gbc.setState(0xc749, 0xd60d, 0x8f10, 0xd39b, 0xd804, 0x380b, 0x1, 0x1);
        gbc.writeMem(0xc749, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd60d);
        EXPECT(gbc.pc(), 0xc74a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc749), 0xfb);
        // FB 0212
        gbc.setState(0xe37e, 0xd018, 0x450, 0xa0a8, 0x23bd, 0xa132, 0x1, 0x1);
        gbc.writeMem(0xe37e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd018);
        EXPECT(gbc.pc(), 0xe37f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe37e), 0xfb);
        // FB 0213
        gbc.setState(0x16a2, 0x398b, 0xf2d0, 0x3531, 0xb04e, 0x58c7, 0x1, 0x0);
        gbc.writeMem(0x16a2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x398b);
        EXPECT(gbc.pc(), 0x16a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0214
        gbc.setState(0xab57, 0x5797, 0xe7e0, 0x2504, 0x5956, 0x2432, 0x0, 0x0);
        gbc.writeMem(0xab57, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5797);
        EXPECT(gbc.pc(), 0xab58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab57), 0xfb);
        // FB 0215
        gbc.setState(0x22ac, 0x6a1, 0x4f90, 0xbc15, 0x9e12, 0x6284, 0x0, 0x0);
        gbc.writeMem(0x22ac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6a1);
        EXPECT(gbc.pc(), 0x22ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0216
        gbc.setState(0x326, 0x5f, 0x3120, 0x66c3, 0x224a, 0xe4e5, 0x0, 0x0);
        gbc.writeMem(0x326, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5f);
        EXPECT(gbc.pc(), 0x327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0217
        gbc.setState(0xe98e, 0xa477, 0xf310, 0x3a79, 0x8821, 0x8f37, 0x1, 0x0);
        gbc.writeMem(0xe98e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa477);
        EXPECT(gbc.pc(), 0xe98f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe98e), 0xfb);
        // FB 0218
        gbc.setState(0xfb8, 0xd9c6, 0x8d00, 0xd7fd, 0x4328, 0x93a2, 0x1, 0x1);
        gbc.writeMem(0xfb8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd9c6);
        EXPECT(gbc.pc(), 0xfb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0219
        gbc.setState(0xddf5, 0x5c4a, 0x8de0, 0xdff3, 0x9a34, 0x861, 0x0, 0x0);
        gbc.writeMem(0xddf5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5c4a);
        EXPECT(gbc.pc(), 0xddf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddf5), 0xfb);
        // FB 021A
        gbc.setState(0x5213, 0xaf0d, 0xbb90, 0x7ce8, 0xbbad, 0x4fac, 0x1, 0x1);
        gbc.writeMem(0x5213, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xaf0d);
        EXPECT(gbc.pc(), 0x5214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 021B
        gbc.setState(0x88b3, 0x4247, 0x7860, 0x97a2, 0x5be, 0xb805, 0x1, 0x0);
        gbc.writeMem(0x88b3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4247);
        EXPECT(gbc.pc(), 0x88b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b3), 0xfb);
        // FB 021C
        gbc.setState(0xd721, 0x4f9c, 0x24b0, 0xabcd, 0x6a9, 0x830a, 0x0, 0x0);
        gbc.writeMem(0xd721, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4f9c);
        EXPECT(gbc.pc(), 0xd722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd721), 0xfb);
        // FB 021D
        gbc.setState(0xbb5f, 0xca9d, 0x3130, 0x83f2, 0x98d8, 0x1882, 0x1, 0x0);
        gbc.writeMem(0xbb5f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xca9d);
        EXPECT(gbc.pc(), 0xbb60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb5f), 0xfb);
        // FB 021E
        gbc.setState(0xaf2, 0x8963, 0xea50, 0xed9f, 0x1ab, 0x9648, 0x1, 0x0);
        gbc.writeMem(0xaf2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8963);
        EXPECT(gbc.pc(), 0xaf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 021F
        gbc.setState(0x1a8e, 0x7aa7, 0x6b80, 0x2839, 0x56d, 0x87c, 0x1, 0x1);
        gbc.writeMem(0x1a8e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7aa7);
        EXPECT(gbc.pc(), 0x1a8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0220
        gbc.setState(0x3fdd, 0x6bf, 0x73a0, 0x9f27, 0xc12d, 0x5767, 0x0, 0x0);
        gbc.writeMem(0x3fdd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6bf);
        EXPECT(gbc.pc(), 0x3fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0221
        gbc.setState(0x3c22, 0x83f4, 0x300, 0x9600, 0x34fe, 0x8681, 0x0, 0x1);
        gbc.writeMem(0x3c22, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x83f4);
        EXPECT(gbc.pc(), 0x3c23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0222
        gbc.setState(0xe305, 0x43f, 0xb4a0, 0x7384, 0x99f2, 0x5953, 0x1, 0x1);
        gbc.writeMem(0xe305, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x43f);
        EXPECT(gbc.pc(), 0xe306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe305), 0xfb);
        // FB 0223
        gbc.setState(0x97e1, 0xd048, 0x1ef0, 0x6dd1, 0x4677, 0xaa14, 0x0, 0x1);
        gbc.writeMem(0x97e1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd048);
        EXPECT(gbc.pc(), 0x97e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97e1), 0xfb);
        // FB 0224
        gbc.setState(0x7176, 0x98e9, 0xf0c0, 0xc950, 0x2bd7, 0x8945, 0x0, 0x1);
        gbc.writeMem(0x7176, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x98e9);
        EXPECT(gbc.pc(), 0x7177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0225
        gbc.setState(0xc650, 0xc7ae, 0xdc10, 0x9049, 0x971a, 0x61f1, 0x0, 0x1);
        gbc.writeMem(0xc650, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc7ae);
        EXPECT(gbc.pc(), 0xc651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc650), 0xfb);
        // FB 0227
        gbc.setState(0x2b7b, 0xb1a6, 0x4600, 0x1e2f, 0x6d89, 0xba37, 0x1, 0x1);
        gbc.writeMem(0x2b7b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb1a6);
        EXPECT(gbc.pc(), 0x2b7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0228
        gbc.setState(0x83f0, 0xd6a5, 0xcc20, 0x1f4a, 0xaa28, 0xaafc, 0x1, 0x0);
        gbc.writeMem(0x83f0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd6a5);
        EXPECT(gbc.pc(), 0x83f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f0), 0xfb);
        // FB 0229
        gbc.setState(0x28b2, 0x4046, 0x2480, 0xb00d, 0xb501, 0x2c3f, 0x0, 0x0);
        gbc.writeMem(0x28b2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4046);
        EXPECT(gbc.pc(), 0x28b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 022A
        gbc.setState(0xdd06, 0x4338, 0x1430, 0x7b6, 0x2870, 0xceff, 0x1, 0x0);
        gbc.writeMem(0xdd06, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4338);
        EXPECT(gbc.pc(), 0xdd07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd06), 0xfb);
        // FB 022B
        gbc.setState(0xc8a7, 0x5e76, 0xded0, 0xfc3f, 0xd5f6, 0x7c62, 0x0, 0x0);
        gbc.writeMem(0xc8a7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5e76);
        EXPECT(gbc.pc(), 0xc8a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a7), 0xfb);
        // FB 022C
        gbc.setState(0xb06c, 0xb804, 0x6f30, 0xb178, 0x318e, 0x378f, 0x0, 0x0);
        gbc.writeMem(0xb06c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb804);
        EXPECT(gbc.pc(), 0xb06d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb06c), 0xfb);
        // FB 022D
        gbc.setState(0xdd3f, 0x2838, 0x9080, 0x5653, 0x798a, 0x82f, 0x0, 0x1);
        gbc.writeMem(0xdd3f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2838);
        EXPECT(gbc.pc(), 0xdd40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd3f), 0xfb);
        // FB 022E
        gbc.setState(0xd76a, 0x5381, 0xf2f0, 0xf3dc, 0x25ac, 0xae06, 0x1, 0x0);
        gbc.writeMem(0xd76a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5381);
        EXPECT(gbc.pc(), 0xd76b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd76a), 0xfb);
        // FB 022F
        gbc.setState(0x20a7, 0xf6e3, 0x1690, 0x68f3, 0x6a45, 0xc90e, 0x0, 0x0);
        gbc.writeMem(0x20a7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf6e3);
        EXPECT(gbc.pc(), 0x20a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0230
        gbc.setState(0xda8d, 0x628e, 0xa110, 0xfc0a, 0xdeb0, 0x5b3e, 0x1, 0x0);
        gbc.writeMem(0xda8d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x628e);
        EXPECT(gbc.pc(), 0xda8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda8d), 0xfb);
        // FB 0231
        gbc.setState(0x9be4, 0xa8a4, 0x3050, 0xb429, 0x16f0, 0x756a, 0x0, 0x0);
        gbc.writeMem(0x9be4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa8a4);
        EXPECT(gbc.pc(), 0x9be5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9be4), 0xfb);
        // FB 0232
        gbc.setState(0x49fd, 0x6fb7, 0x7fd0, 0x2dc3, 0x2cfd, 0x53e, 0x1, 0x0);
        gbc.writeMem(0x49fd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6fb7);
        EXPECT(gbc.pc(), 0x49fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0233
        gbc.setState(0x47b7, 0x629c, 0xcdf0, 0xc19e, 0xecd3, 0x5737, 0x1, 0x1);
        gbc.writeMem(0x47b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x629c);
        EXPECT(gbc.pc(), 0x47b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0234
        gbc.setState(0x79ed, 0x5435, 0x1530, 0x8298, 0xfaf4, 0x3e38, 0x1, 0x1);
        gbc.writeMem(0x79ed, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5435);
        EXPECT(gbc.pc(), 0x79ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0235
        gbc.setState(0x48a7, 0x4728, 0x7360, 0x5dc6, 0x3058, 0x7224, 0x0, 0x0);
        gbc.writeMem(0x48a7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4728);
        EXPECT(gbc.pc(), 0x48a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0236
        gbc.setState(0xa50d, 0x4cd8, 0x7f0, 0xafa8, 0x203, 0x9c7a, 0x0, 0x1);
        gbc.writeMem(0xa50d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4cd8);
        EXPECT(gbc.pc(), 0xa50e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50d), 0xfb);
        // FB 0237
        gbc.setState(0x87e8, 0xce59, 0x380, 0xd3bd, 0xc823, 0xa1a2, 0x0, 0x0);
        gbc.writeMem(0x87e8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xce59);
        EXPECT(gbc.pc(), 0x87e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e8), 0xfb);
        // FB 0238
        gbc.setState(0x43f8, 0xa984, 0x5d70, 0x57f3, 0x562f, 0x73a1, 0x1, 0x1);
        gbc.writeMem(0x43f8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa984);
        EXPECT(gbc.pc(), 0x43f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0239
        gbc.setState(0xebb, 0x55e9, 0x3aa0, 0x447c, 0x5442, 0x2814, 0x1, 0x1);
        gbc.writeMem(0xebb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x55e9);
        EXPECT(gbc.pc(), 0xebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 023A
        gbc.setState(0xbc81, 0xab11, 0x61d0, 0x135, 0x2a65, 0x7e38, 0x0, 0x1);
        gbc.writeMem(0xbc81, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xab11);
        EXPECT(gbc.pc(), 0xbc82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc81), 0xfb);
        // FB 023C
        gbc.setState(0x988b, 0xdedd, 0xf4b0, 0x8c59, 0xc116, 0xcef0, 0x0, 0x0);
        gbc.writeMem(0x988b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xdedd);
        EXPECT(gbc.pc(), 0x988c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x988b), 0xfb);
        // FB 023D
        gbc.setState(0x6404, 0x14a, 0x26f0, 0xbe1e, 0xff95, 0x49e2, 0x1, 0x1);
        gbc.writeMem(0x6404, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x14a);
        EXPECT(gbc.pc(), 0x6405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 023E
        gbc.setState(0x3da3, 0xa992, 0x8460, 0x63b0, 0x5fc6, 0x793b, 0x1, 0x0);
        gbc.writeMem(0x3da3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa992);
        EXPECT(gbc.pc(), 0x3da4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 023F
        gbc.setState(0x4c8b, 0x8e4e, 0xe590, 0x8fa2, 0xd9c1, 0xf9a, 0x1, 0x0);
        gbc.writeMem(0x4c8b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8e4e);
        EXPECT(gbc.pc(), 0x4c8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0241
        gbc.setState(0x751e, 0x6e7f, 0x4850, 0x345f, 0x69dc, 0x82d, 0x0, 0x1);
        gbc.writeMem(0x751e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x6e7f);
        EXPECT(gbc.pc(), 0x751f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0242
        gbc.setState(0x4c8a, 0xf4b4, 0x19b0, 0x5afd, 0x52a2, 0xaa79, 0x1, 0x1);
        gbc.writeMem(0x4c8a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf4b4);
        EXPECT(gbc.pc(), 0x4c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0243
        gbc.setState(0x2936, 0x8f44, 0x3f20, 0x72b2, 0xeb92, 0x4e, 0x0, 0x1);
        gbc.writeMem(0x2936, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8f44);
        EXPECT(gbc.pc(), 0x2937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0244
        gbc.setState(0x5440, 0xe986, 0x5360, 0x33a4, 0x4060, 0x7c49, 0x0, 0x0);
        gbc.writeMem(0x5440, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe986);
        EXPECT(gbc.pc(), 0x5441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0245
        gbc.setState(0x9626, 0xf621, 0x63e0, 0xf4fb, 0x1e4e, 0x6c55, 0x1, 0x0);
        gbc.writeMem(0x9626, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf621);
        EXPECT(gbc.pc(), 0x9627);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9626), 0xfb);
        // FB 0246
        gbc.setState(0xa91e, 0x9ac5, 0x1bf0, 0xabc1, 0x3906, 0x1fe5, 0x0, 0x0);
        gbc.writeMem(0xa91e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9ac5);
        EXPECT(gbc.pc(), 0xa91f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa91e), 0xfb);
        // FB 0247
        gbc.setState(0x3410, 0x7fba, 0x310, 0x1424, 0xbd08, 0x944a, 0x1, 0x0);
        gbc.writeMem(0x3410, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7fba);
        EXPECT(gbc.pc(), 0x3411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0248
        gbc.setState(0x3f23, 0x640e, 0x22f0, 0x884e, 0x9268, 0x8fb9, 0x0, 0x0);
        gbc.writeMem(0x3f23, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x640e);
        EXPECT(gbc.pc(), 0x3f24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0249
        gbc.setState(0xa11c, 0xe3f3, 0x8920, 0x411d, 0xa7ba, 0xc0ef, 0x1, 0x0);
        gbc.writeMem(0xa11c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe3f3);
        EXPECT(gbc.pc(), 0xa11d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa11c), 0xfb);
        // FB 024A
        gbc.setState(0x5f5b, 0x5249, 0x7a20, 0x3876, 0x41df, 0x7abe, 0x0, 0x0);
        gbc.writeMem(0x5f5b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5249);
        EXPECT(gbc.pc(), 0x5f5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 024B
        gbc.setState(0xbe02, 0x39a2, 0xca10, 0x88ff, 0x143f, 0x57ff, 0x0, 0x0);
        gbc.writeMem(0xbe02, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x39a2);
        EXPECT(gbc.pc(), 0xbe03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe02), 0xfb);
        // FB 024C
        gbc.setState(0xea39, 0x91ab, 0x4950, 0x1197, 0x2f4c, 0x4ee0, 0x1, 0x0);
        gbc.writeMem(0xea39, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x91ab);
        EXPECT(gbc.pc(), 0xea3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea39), 0xfb);
        // FB 024D
        gbc.setState(0x91ba, 0x21fd, 0x9520, 0xe1d4, 0x9a0f, 0x55db, 0x0, 0x1);
        gbc.writeMem(0x91ba, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x21fd);
        EXPECT(gbc.pc(), 0x91bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ba), 0xfb);
        // FB 024E
        gbc.setState(0xb845, 0xb070, 0xd6c0, 0x4498, 0x9e16, 0xf7, 0x0, 0x1);
        gbc.writeMem(0xb845, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb070);
        EXPECT(gbc.pc(), 0xb846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb845), 0xfb);
        // FB 024F
        gbc.setState(0x85f0, 0xe887, 0x2ec0, 0x49e4, 0x4e22, 0x673, 0x0, 0x0);
        gbc.writeMem(0x85f0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe887);
        EXPECT(gbc.pc(), 0x85f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f0), 0xfb);
        // FB 0250
        gbc.setState(0xde06, 0xf719, 0x6bf0, 0x7e2, 0x6233, 0x5b54, 0x0, 0x0);
        gbc.writeMem(0xde06, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf719);
        EXPECT(gbc.pc(), 0xde07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde06), 0xfb);
        // FB 0251
        gbc.setState(0x811a, 0x6307, 0x7130, 0x46f6, 0xf4e1, 0x9349, 0x0, 0x0);
        gbc.writeMem(0x811a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6307);
        EXPECT(gbc.pc(), 0x811b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x811a), 0xfb);
        // FB 0252
        gbc.setState(0x3fc8, 0xe001, 0xb950, 0xfb68, 0xbd8d, 0x2bed, 0x1, 0x1);
        gbc.writeMem(0x3fc8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe001);
        EXPECT(gbc.pc(), 0x3fc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0253
        gbc.setState(0xda1f, 0x741e, 0x7f00, 0x76cc, 0xc381, 0xb53, 0x1, 0x0);
        gbc.writeMem(0xda1f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x741e);
        EXPECT(gbc.pc(), 0xda20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda1f), 0xfb);
        // FB 0254
        gbc.setState(0x11e4, 0x3edf, 0x1c80, 0x9065, 0x4175, 0x58c0, 0x1, 0x1);
        gbc.writeMem(0x11e4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3edf);
        EXPECT(gbc.pc(), 0x11e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0255
        gbc.setState(0xcb65, 0x4c1e, 0x80a0, 0xd43, 0xa01e, 0x48e, 0x1, 0x0);
        gbc.writeMem(0xcb65, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4c1e);
        EXPECT(gbc.pc(), 0xcb66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb65), 0xfb);
        // FB 0256
        gbc.setState(0x49ff, 0x7f71, 0x4d70, 0x142d, 0xcd88, 0x35f, 0x0, 0x0);
        gbc.writeMem(0x49ff, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7f71);
        EXPECT(gbc.pc(), 0x4a00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0257
        gbc.setState(0x653d, 0xa4c1, 0x45f0, 0x5732, 0x98d1, 0xc1c9, 0x0, 0x1);
        gbc.writeMem(0x653d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa4c1);
        EXPECT(gbc.pc(), 0x653e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0258
        gbc.setState(0xe4f1, 0xe4ec, 0x7940, 0x5ecd, 0xcf58, 0x453f, 0x1, 0x0);
        gbc.writeMem(0xe4f1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe4ec);
        EXPECT(gbc.pc(), 0xe4f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f1), 0xfb);
        // FB 0259
        gbc.setState(0xe841, 0xafb1, 0x3070, 0x9ab7, 0xd22a, 0x6b04, 0x1, 0x1);
        gbc.writeMem(0xe841, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xafb1);
        EXPECT(gbc.pc(), 0xe842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe841), 0xfb);
        // FB 025A
        gbc.setState(0x8c84, 0xc6e2, 0xf260, 0xd058, 0xd019, 0x6cfc, 0x0, 0x0);
        gbc.writeMem(0x8c84, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc6e2);
        EXPECT(gbc.pc(), 0x8c85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c84), 0xfb);
        // FB 025B
        gbc.setState(0xc867, 0x2c16, 0xb3a0, 0xb217, 0x896d, 0x4e00, 0x1, 0x1);
        gbc.writeMem(0xc867, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2c16);
        EXPECT(gbc.pc(), 0xc868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc867), 0xfb);
        // FB 025C
        gbc.setState(0x1404, 0xfc4b, 0xa580, 0x770c, 0x3d92, 0x336a, 0x0, 0x0);
        gbc.writeMem(0x1404, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfc4b);
        EXPECT(gbc.pc(), 0x1405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 025D
        gbc.setState(0xba97, 0x7f08, 0xb8f0, 0x1df4, 0xef1d, 0x40c8, 0x0, 0x0);
        gbc.writeMem(0xba97, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7f08);
        EXPECT(gbc.pc(), 0xba98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba97), 0xfb);
        // FB 025E
        gbc.setState(0x2432, 0x8490, 0x630, 0xeecb, 0xd16d, 0xa39a, 0x1, 0x1);
        gbc.writeMem(0x2432, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8490);
        EXPECT(gbc.pc(), 0x2433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 025F
        gbc.setState(0x339d, 0x4ad9, 0x4640, 0x2b84, 0x80ad, 0xdad4, 0x1, 0x1);
        gbc.writeMem(0x339d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4ad9);
        EXPECT(gbc.pc(), 0x339e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0260
        gbc.setState(0xbbfc, 0x65f5, 0xaec0, 0x92f9, 0x9a0a, 0xca2f, 0x1, 0x0);
        gbc.writeMem(0xbbfc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x65f5);
        EXPECT(gbc.pc(), 0xbbfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbfc), 0xfb);
        // FB 0262
        gbc.setState(0x1ea6, 0x1571, 0x8530, 0xc1f, 0x83, 0x5082, 0x1, 0x1);
        gbc.writeMem(0x1ea6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1571);
        EXPECT(gbc.pc(), 0x1ea7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0263
        gbc.setState(0x237, 0xa109, 0xf110, 0xf1de, 0xe7fc, 0x21aa, 0x0, 0x1);
        gbc.writeMem(0x237, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa109);
        EXPECT(gbc.pc(), 0x238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0264
        gbc.setState(0xd4b, 0x1899, 0x4ed0, 0x9867, 0x8685, 0x40cc, 0x0, 0x0);
        gbc.writeMem(0xd4b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1899);
        EXPECT(gbc.pc(), 0xd4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0265
        gbc.setState(0x8204, 0x420f, 0xba80, 0x627f, 0x2c89, 0x1d22, 0x1, 0x0);
        gbc.writeMem(0x8204, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x420f);
        EXPECT(gbc.pc(), 0x8205);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8204), 0xfb);
        // FB 0266
        gbc.setState(0xe309, 0x711f, 0xdd30, 0xe10e, 0xcc4f, 0x3129, 0x1, 0x1);
        gbc.writeMem(0xe309, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x711f);
        EXPECT(gbc.pc(), 0xe30a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe309), 0xfb);
        // FB 0267
        gbc.setState(0x67c7, 0x863d, 0xd900, 0xf122, 0xfdb8, 0x5253, 0x0, 0x0);
        gbc.writeMem(0x67c7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x863d);
        EXPECT(gbc.pc(), 0x67c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0268
        gbc.setState(0x8bf9, 0x95b5, 0xf430, 0x48d7, 0x7d53, 0xddda, 0x1, 0x0);
        gbc.writeMem(0x8bf9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x95b5);
        EXPECT(gbc.pc(), 0x8bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bf9), 0xfb);
        // FB 0269
        gbc.setState(0x4fa6, 0x6339, 0x50c0, 0x89e5, 0xb88d, 0xbdeb, 0x0, 0x1);
        gbc.writeMem(0x4fa6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6339);
        EXPECT(gbc.pc(), 0x4fa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 026A
        gbc.setState(0x851e, 0xa436, 0x620, 0xe574, 0x865b, 0x2280, 0x0, 0x1);
        gbc.writeMem(0x851e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa436);
        EXPECT(gbc.pc(), 0x851f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x851e), 0xfb);
        // FB 026B
        gbc.setState(0x1a97, 0x828c, 0x2e10, 0x65fa, 0x16b4, 0x99c0, 0x0, 0x1);
        gbc.writeMem(0x1a97, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x828c);
        EXPECT(gbc.pc(), 0x1a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 026C
        gbc.setState(0x4f7a, 0xd9be, 0x6150, 0x28d7, 0x782c, 0xb352, 0x1, 0x0);
        gbc.writeMem(0x4f7a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd9be);
        EXPECT(gbc.pc(), 0x4f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 026D
        gbc.setState(0x83b2, 0x29c3, 0x3420, 0xc951, 0x94b5, 0x8e14, 0x0, 0x1);
        gbc.writeMem(0x83b2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x29c3);
        EXPECT(gbc.pc(), 0x83b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b2), 0xfb);
        // FB 026E
        gbc.setState(0x9bde, 0xd12d, 0x7220, 0x1338, 0x696b, 0x443c, 0x1, 0x1);
        gbc.writeMem(0x9bde, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd12d);
        EXPECT(gbc.pc(), 0x9bdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bde), 0xfb);
        // FB 026F
        gbc.setState(0x1559, 0x7741, 0xd510, 0x7011, 0xa7c5, 0x13e, 0x0, 0x1);
        gbc.writeMem(0x1559, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x7741);
        EXPECT(gbc.pc(), 0x155a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0270
        gbc.setState(0x83a1, 0x66b4, 0x5fd0, 0xb004, 0xe5fd, 0x2ba9, 0x1, 0x0);
        gbc.writeMem(0x83a1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x66b4);
        EXPECT(gbc.pc(), 0x83a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a1), 0xfb);
        // FB 0271
        gbc.setState(0x26e4, 0xb910, 0x3ee0, 0x8756, 0x2101, 0xd0c2, 0x1, 0x1);
        gbc.writeMem(0x26e4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb910);
        EXPECT(gbc.pc(), 0x26e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0272
        gbc.setState(0xbb1e, 0xf8f9, 0x4720, 0x864e, 0xf962, 0x97ee, 0x0, 0x1);
        gbc.writeMem(0xbb1e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf8f9);
        EXPECT(gbc.pc(), 0xbb1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb1e), 0xfb);
        // FB 0273
        gbc.setState(0xd240, 0xccc9, 0x4080, 0x625, 0xe8d1, 0xd475, 0x1, 0x1);
        gbc.writeMem(0xd240, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xccc9);
        EXPECT(gbc.pc(), 0xd241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd240), 0xfb);
        // FB 0274
        gbc.setState(0xa134, 0xa1c6, 0x4d50, 0x18be, 0xd957, 0xe78e, 0x0, 0x1);
        gbc.writeMem(0xa134, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa1c6);
        EXPECT(gbc.pc(), 0xa135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa134), 0xfb);
        // FB 0275
        gbc.setState(0xd525, 0xcdf4, 0xeb0, 0x6958, 0xa91b, 0x7825, 0x0, 0x1);
        gbc.writeMem(0xd525, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xcdf4);
        EXPECT(gbc.pc(), 0xd526);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd525), 0xfb);
        // FB 0277
        gbc.setState(0xb1e4, 0x1c3d, 0x9a40, 0x174f, 0xf4bb, 0xad95, 0x0, 0x1);
        gbc.writeMem(0xb1e4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1c3d);
        EXPECT(gbc.pc(), 0xb1e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e4), 0xfb);
        // FB 0278
        gbc.setState(0x505b, 0x1ffd, 0x8690, 0x32e8, 0x13ca, 0xe0f9, 0x0, 0x1);
        gbc.writeMem(0x505b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1ffd);
        EXPECT(gbc.pc(), 0x505c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0279
        gbc.setState(0x9223, 0x448c, 0xe740, 0xdfd2, 0xa898, 0x9abf, 0x0, 0x1);
        gbc.writeMem(0x9223, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x448c);
        EXPECT(gbc.pc(), 0x9224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9223), 0xfb);
        // FB 027A
        gbc.setState(0xc311, 0xd2a7, 0x67a0, 0xb41e, 0x2e27, 0xa18d, 0x0, 0x0);
        gbc.writeMem(0xc311, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd2a7);
        EXPECT(gbc.pc(), 0xc312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc311), 0xfb);
        // FB 027B
        gbc.setState(0x372, 0x406a, 0xeef0, 0xec16, 0xf347, 0xef0a, 0x0, 0x1);
        gbc.writeMem(0x372, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x406a);
        EXPECT(gbc.pc(), 0x373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 027C
        gbc.setState(0x8d6a, 0x213, 0x290, 0x60ba, 0x2525, 0x3327, 0x0, 0x1);
        gbc.writeMem(0x8d6a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x213);
        EXPECT(gbc.pc(), 0x8d6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d6a), 0xfb);
        // FB 027D
        gbc.setState(0xdfd5, 0x6ce5, 0xafc0, 0xdc7, 0x53db, 0x165c, 0x0, 0x0);
        gbc.writeMem(0xdfd5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6ce5);
        EXPECT(gbc.pc(), 0xdfd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfd5), 0xfb);
        // FB 027F
        gbc.setState(0xa96f, 0xd7a, 0xb880, 0x6ad6, 0x3e5e, 0x68a3, 0x0, 0x1);
        gbc.writeMem(0xa96f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd7a);
        EXPECT(gbc.pc(), 0xa970);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96f), 0xfb);
        // FB 0280
        gbc.setState(0x3188, 0x1b0a, 0xe080, 0x7d90, 0xaf71, 0x6b, 0x0, 0x0);
        gbc.writeMem(0x3188, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1b0a);
        EXPECT(gbc.pc(), 0x3189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0282
        gbc.setState(0x9452, 0x8bc2, 0xa820, 0x8499, 0x15de, 0x4cf9, 0x1, 0x0);
        gbc.writeMem(0x9452, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8bc2);
        EXPECT(gbc.pc(), 0x9453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9452), 0xfb);
        // FB 0283
        gbc.setState(0x10cd, 0x629f, 0xd0c0, 0xc45, 0x2fd9, 0xd910, 0x0, 0x0);
        gbc.writeMem(0x10cd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x629f);
        EXPECT(gbc.pc(), 0x10ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0284
        gbc.setState(0xb49c, 0x1597, 0xf7e0, 0x88d9, 0x6a54, 0x28c6, 0x1, 0x1);
        gbc.writeMem(0xb49c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1597);
        EXPECT(gbc.pc(), 0xb49d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb49c), 0xfb);
        // FB 0285
        gbc.setState(0xac7e, 0x50a2, 0x6190, 0x84db, 0xda4e, 0x9843, 0x0, 0x1);
        gbc.writeMem(0xac7e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x50a2);
        EXPECT(gbc.pc(), 0xac7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac7e), 0xfb);
        // FB 0286
        gbc.setState(0x5555, 0xe089, 0x9a80, 0xd0ff, 0x83c4, 0xb989, 0x1, 0x1);
        gbc.writeMem(0x5555, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe089);
        EXPECT(gbc.pc(), 0x5556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0287
        gbc.setState(0x6bf6, 0xfffa, 0xd8d0, 0xf965, 0x6033, 0x5c67, 0x1, 0x0);
        gbc.writeMem(0x6bf6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfffa);
        EXPECT(gbc.pc(), 0x6bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0288
        gbc.setState(0xb799, 0x7242, 0xcc30, 0x9abf, 0xa1fe, 0x5041, 0x1, 0x0);
        gbc.writeMem(0xb799, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7242);
        EXPECT(gbc.pc(), 0xb79a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb799), 0xfb);
        // FB 0289
        gbc.setState(0xd8e7, 0x2a56, 0x9190, 0xa369, 0xa1f3, 0x19d8, 0x1, 0x1);
        gbc.writeMem(0xd8e7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2a56);
        EXPECT(gbc.pc(), 0xd8e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8e7), 0xfb);
        // FB 028A
        gbc.setState(0x922e, 0xe51c, 0xd110, 0x1aaa, 0xfecd, 0x6628, 0x1, 0x1);
        gbc.writeMem(0x922e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe51c);
        EXPECT(gbc.pc(), 0x922f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x922e), 0xfb);
        // FB 028B
        gbc.setState(0x8597, 0xfc7d, 0xb440, 0x8120, 0x7c29, 0x59b1, 0x1, 0x1);
        gbc.writeMem(0x8597, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xfc7d);
        EXPECT(gbc.pc(), 0x8598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8597), 0xfb);
        // FB 028C
        gbc.setState(0xd8a6, 0xd231, 0x95f0, 0xffcf, 0x2895, 0xa2c8, 0x0, 0x0);
        gbc.writeMem(0xd8a6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd231);
        EXPECT(gbc.pc(), 0xd8a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8a6), 0xfb);
        // FB 028E
        gbc.setState(0x14c, 0x273a, 0xc8d0, 0x11e2, 0x3d50, 0xb45a, 0x0, 0x1);
        gbc.writeMem(0x14c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x273a);
        EXPECT(gbc.pc(), 0x14d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 028F
        gbc.setState(0x4fb8, 0x59ec, 0xbaa0, 0xe391, 0xc24b, 0x7b5e, 0x0, 0x1);
        gbc.writeMem(0x4fb8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x59ec);
        EXPECT(gbc.pc(), 0x4fb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0290
        gbc.setState(0xc06b, 0xfa0, 0x5b80, 0xcfd, 0xaee8, 0xa476, 0x0, 0x1);
        gbc.writeMem(0xc06b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfa0);
        EXPECT(gbc.pc(), 0xc06c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc06b), 0xfb);
        // FB 0292
        gbc.setState(0xc113, 0x152d, 0x7910, 0xa0d9, 0xe108, 0xcac6, 0x1, 0x0);
        gbc.writeMem(0xc113, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x152d);
        EXPECT(gbc.pc(), 0xc114);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc113), 0xfb);
        // FB 0293
        gbc.setState(0x4e92, 0x784, 0xc3b0, 0x6988, 0xf5fd, 0x9120, 0x0, 0x1);
        gbc.writeMem(0x4e92, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x784);
        EXPECT(gbc.pc(), 0x4e93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0294
        gbc.setState(0xdae9, 0x4cc4, 0xcb90, 0xa18b, 0xb8b4, 0x308b, 0x0, 0x0);
        gbc.writeMem(0xdae9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4cc4);
        EXPECT(gbc.pc(), 0xdaea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae9), 0xfb);
        // FB 0295
        gbc.setState(0x2dcb, 0x8445, 0xd9c0, 0x9675, 0x3b95, 0x6e0a, 0x0, 0x0);
        gbc.writeMem(0x2dcb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8445);
        EXPECT(gbc.pc(), 0x2dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0296
        gbc.setState(0x2b03, 0x9c3, 0x64c0, 0x569c, 0xb0f1, 0x7913, 0x0, 0x0);
        gbc.writeMem(0x2b03, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9c3);
        EXPECT(gbc.pc(), 0x2b04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0297
        gbc.setState(0xbf3f, 0x2631, 0xe4a0, 0x7642, 0xf7d4, 0xd7d2, 0x1, 0x1);
        gbc.writeMem(0xbf3f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2631);
        EXPECT(gbc.pc(), 0xbf40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf3f), 0xfb);
        // FB 0298
        gbc.setState(0x9808, 0xbf30, 0x1e0, 0xd61f, 0xfc10, 0x79a0, 0x0, 0x1);
        gbc.writeMem(0x9808, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xbf30);
        EXPECT(gbc.pc(), 0x9809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9808), 0xfb);
        // FB 0299
        gbc.setState(0xa238, 0x2f1e, 0x64c0, 0x6eeb, 0xa9d1, 0xda, 0x1, 0x0);
        gbc.writeMem(0xa238, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2f1e);
        EXPECT(gbc.pc(), 0xa239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa238), 0xfb);
        // FB 029B
        gbc.setState(0x81e0, 0xa730, 0x8de0, 0x5dfb, 0x1c1d, 0xc006, 0x0, 0x0);
        gbc.writeMem(0x81e0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa730);
        EXPECT(gbc.pc(), 0x81e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e0), 0xfb);
        // FB 029D
        gbc.setState(0xb1fa, 0x13f3, 0x6f70, 0x6c38, 0x8a9c, 0xd083, 0x1, 0x1);
        gbc.writeMem(0xb1fa, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x13f3);
        EXPECT(gbc.pc(), 0xb1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1fa), 0xfb);
        // FB 029E
        gbc.setState(0x44c1, 0x4445, 0x45f0, 0x4388, 0x9087, 0x141b, 0x0, 0x1);
        gbc.writeMem(0x44c1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4445);
        EXPECT(gbc.pc(), 0x44c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 029F
        gbc.setState(0xaf54, 0xdcd8, 0x80b0, 0x6a69, 0x54b9, 0xb8f9, 0x0, 0x1);
        gbc.writeMem(0xaf54, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xdcd8);
        EXPECT(gbc.pc(), 0xaf55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf54), 0xfb);
        // FB 02A0
        gbc.setState(0x8670, 0x79d1, 0xd8f0, 0xb0ea, 0x1f4b, 0x3bdd, 0x1, 0x1);
        gbc.writeMem(0x8670, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x79d1);
        EXPECT(gbc.pc(), 0x8671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8670), 0xfb);
        // FB 02A1
        gbc.setState(0x5f8b, 0x1e77, 0x4ce0, 0xb0c7, 0x683a, 0x5659, 0x0, 0x1);
        gbc.writeMem(0x5f8b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1e77);
        EXPECT(gbc.pc(), 0x5f8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02A2
        gbc.setState(0x798e, 0x81b4, 0x5d30, 0x8073, 0x72f7, 0xe6cb, 0x0, 0x0);
        gbc.writeMem(0x798e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x81b4);
        EXPECT(gbc.pc(), 0x798f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02A3
        gbc.setState(0x8402, 0xa3a2, 0xb6e0, 0xd430, 0xb54f, 0xf71d, 0x1, 0x1);
        gbc.writeMem(0x8402, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa3a2);
        EXPECT(gbc.pc(), 0x8403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8402), 0xfb);
        // FB 02A4
        gbc.setState(0x5518, 0x944e, 0x2f70, 0xe44a, 0x8cf7, 0x791f, 0x0, 0x0);
        gbc.writeMem(0x5518, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x944e);
        EXPECT(gbc.pc(), 0x5519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02A5
        gbc.setState(0x42da, 0xe4ac, 0xc930, 0x1ad2, 0x3cf4, 0x3408, 0x1, 0x0);
        gbc.writeMem(0x42da, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe4ac);
        EXPECT(gbc.pc(), 0x42db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02A6
        gbc.setState(0xc579, 0x6956, 0xc460, 0x970b, 0xfe8a, 0x2f3d, 0x1, 0x0);
        gbc.writeMem(0xc579, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6956);
        EXPECT(gbc.pc(), 0xc57a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc579), 0xfb);
        // FB 02A7
        gbc.setState(0x1cfd, 0xd39, 0x4020, 0xcb68, 0xad9e, 0xa9af, 0x1, 0x0);
        gbc.writeMem(0x1cfd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd39);
        EXPECT(gbc.pc(), 0x1cfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02A8
        gbc.setState(0xb16a, 0x9a17, 0x9370, 0xe60c, 0xc539, 0x225b, 0x0, 0x0);
        gbc.writeMem(0xb16a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9a17);
        EXPECT(gbc.pc(), 0xb16b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16a), 0xfb);
        // FB 02A9
        gbc.setState(0x1666, 0x352e, 0x1290, 0xc979, 0xbfdb, 0x4348, 0x1, 0x0);
        gbc.writeMem(0x1666, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x352e);
        EXPECT(gbc.pc(), 0x1667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02AA
        gbc.setState(0x2130, 0x8d12, 0xc820, 0x56c8, 0xa2ef, 0xb394, 0x1, 0x1);
        gbc.writeMem(0x2130, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8d12);
        EXPECT(gbc.pc(), 0x2131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02AC
        gbc.setState(0x2e66, 0x47d5, 0x4080, 0xc746, 0xe82f, 0xf2e4, 0x0, 0x0);
        gbc.writeMem(0x2e66, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x47d5);
        EXPECT(gbc.pc(), 0x2e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02AD
        gbc.setState(0x582a, 0xa3c8, 0xcc80, 0x4dcf, 0xcfce, 0xec95, 0x0, 0x0);
        gbc.writeMem(0x582a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa3c8);
        EXPECT(gbc.pc(), 0x582b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02AE
        gbc.setState(0xec3a, 0xa3b5, 0x3620, 0xc25c, 0xd0c0, 0xe04c, 0x0, 0x0);
        gbc.writeMem(0xec3a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa3b5);
        EXPECT(gbc.pc(), 0xec3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec3a), 0xfb);
        // FB 02AF
        gbc.setState(0x24c2, 0xaa63, 0x5310, 0x14b5, 0xffd, 0x466, 0x1, 0x1);
        gbc.writeMem(0x24c2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xaa63);
        EXPECT(gbc.pc(), 0x24c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02B0
        gbc.setState(0x5bbb, 0xd93a, 0x68a0, 0xfa31, 0xc5aa, 0x7de4, 0x1, 0x0);
        gbc.writeMem(0x5bbb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd93a);
        EXPECT(gbc.pc(), 0x5bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02B1
        gbc.setState(0xa4bb, 0x3b62, 0xd810, 0x1b71, 0x5a97, 0xd701, 0x1, 0x0);
        gbc.writeMem(0xa4bb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3b62);
        EXPECT(gbc.pc(), 0xa4bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4bb), 0xfb);
        // FB 02B2
        gbc.setState(0x1eb9, 0x1fe7, 0x7b70, 0x69b4, 0x1245, 0x11d7, 0x1, 0x1);
        gbc.writeMem(0x1eb9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1fe7);
        EXPECT(gbc.pc(), 0x1eba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02B3
        gbc.setState(0x5031, 0xbd5a, 0x5910, 0x91ad, 0x69e2, 0xba7b, 0x0, 0x1);
        gbc.writeMem(0x5031, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xbd5a);
        EXPECT(gbc.pc(), 0x5032);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02B4
        gbc.setState(0x781a, 0x4a7c, 0x63b0, 0xa470, 0x39fd, 0x4285, 0x1, 0x1);
        gbc.writeMem(0x781a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4a7c);
        EXPECT(gbc.pc(), 0x781b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02B5
        gbc.setState(0xed8f, 0xdc28, 0x81c0, 0xad85, 0xd5c, 0x9eb3, 0x1, 0x1);
        gbc.writeMem(0xed8f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdc28);
        EXPECT(gbc.pc(), 0xed90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed8f), 0xfb);
        // FB 02B6
        gbc.setState(0xa3ee, 0xd9b4, 0x7010, 0x8665, 0xc451, 0xd8f5, 0x1, 0x1);
        gbc.writeMem(0xa3ee, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd9b4);
        EXPECT(gbc.pc(), 0xa3ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ee), 0xfb);
        // FB 02B7
        gbc.setState(0x5331, 0x5d69, 0x6de0, 0x7a0a, 0x50c6, 0xd, 0x0, 0x1);
        gbc.writeMem(0x5331, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5d69);
        EXPECT(gbc.pc(), 0x5332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02B9
        gbc.setState(0x302d, 0x3af4, 0x8f0, 0xed2f, 0x77c5, 0x54df, 0x0, 0x1);
        gbc.writeMem(0x302d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3af4);
        EXPECT(gbc.pc(), 0x302e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02BA
        gbc.setState(0x6e3d, 0x92b4, 0xd0f0, 0xf263, 0x8378, 0xbea7, 0x0, 0x0);
        gbc.writeMem(0x6e3d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x92b4);
        EXPECT(gbc.pc(), 0x6e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02BB
        gbc.setState(0x32c7, 0xc72d, 0xc990, 0x46ce, 0x87dc, 0xfcd6, 0x0, 0x1);
        gbc.writeMem(0x32c7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc72d);
        EXPECT(gbc.pc(), 0x32c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02BC
        gbc.setState(0xde37, 0x348c, 0x9b90, 0x1346, 0xecec, 0x8fea, 0x1, 0x0);
        gbc.writeMem(0xde37, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x348c);
        EXPECT(gbc.pc(), 0xde38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde37), 0xfb);
        // FB 02BD
        gbc.setState(0x29da, 0xcb6d, 0xbb50, 0x1784, 0x1278, 0x4694, 0x0, 0x1);
        gbc.writeMem(0x29da, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xcb6d);
        EXPECT(gbc.pc(), 0x29db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02BE
        gbc.setState(0x516e, 0xad00, 0xe830, 0x31ff, 0x62d9, 0x1327, 0x1, 0x0);
        gbc.writeMem(0x516e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xad00);
        EXPECT(gbc.pc(), 0x516f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02BF
        gbc.setState(0xdd11, 0x2bb2, 0x7a0, 0xcd30, 0x4add, 0x7d2b, 0x0, 0x1);
        gbc.writeMem(0xdd11, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2bb2);
        EXPECT(gbc.pc(), 0xdd12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd11), 0xfb);
        // FB 02C0
        gbc.setState(0x423d, 0x15b4, 0x3850, 0x2d02, 0x5dcd, 0xd09b, 0x1, 0x1);
        gbc.writeMem(0x423d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x15b4);
        EXPECT(gbc.pc(), 0x423e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02C1
        gbc.setState(0xd424, 0x419a, 0x7a0, 0x9143, 0xae89, 0x59af, 0x0, 0x1);
        gbc.writeMem(0xd424, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x419a);
        EXPECT(gbc.pc(), 0xd425);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd424), 0xfb);
        // FB 02C2
        gbc.setState(0xd1d3, 0x6d34, 0xf80, 0x99d4, 0xf2f1, 0x3b3, 0x0, 0x1);
        gbc.writeMem(0xd1d3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6d34);
        EXPECT(gbc.pc(), 0xd1d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d3), 0xfb);
        // FB 02C3
        gbc.setState(0x69e9, 0xbeff, 0x6d40, 0x5db2, 0x7b1e, 0x778a, 0x1, 0x0);
        gbc.writeMem(0x69e9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xbeff);
        EXPECT(gbc.pc(), 0x69ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02C4
        gbc.setState(0x2c3b, 0xfdb4, 0x3a60, 0x45f6, 0xd6ed, 0xd9dc, 0x1, 0x1);
        gbc.writeMem(0x2c3b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfdb4);
        EXPECT(gbc.pc(), 0x2c3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02C5
        gbc.setState(0xc611, 0xaea0, 0x3ea0, 0xd0e0, 0xda3d, 0x80c4, 0x1, 0x0);
        gbc.writeMem(0xc611, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xaea0);
        EXPECT(gbc.pc(), 0xc612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc611), 0xfb);
        // FB 02C6
        gbc.setState(0x453c, 0x3e79, 0x6580, 0x68a8, 0xf6b3, 0x368a, 0x1, 0x0);
        gbc.writeMem(0x453c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3e79);
        EXPECT(gbc.pc(), 0x453d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02C7
        gbc.setState(0x1634, 0x51ef, 0x9190, 0x2aa3, 0x334d, 0x8559, 0x0, 0x0);
        gbc.writeMem(0x1634, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x51ef);
        EXPECT(gbc.pc(), 0x1635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02C8
        gbc.setState(0x8fa0, 0xf6ff, 0x1e90, 0x1537, 0xd74, 0x32d4, 0x1, 0x0);
        gbc.writeMem(0x8fa0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf6ff);
        EXPECT(gbc.pc(), 0x8fa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa0), 0xfb);
        // FB 02C9
        gbc.setState(0x7a94, 0xa96d, 0x1420, 0x3eaf, 0x98e, 0x5f38, 0x1, 0x0);
        gbc.writeMem(0x7a94, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa96d);
        EXPECT(gbc.pc(), 0x7a95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02CA
        gbc.setState(0xc2d4, 0xe761, 0xd1e0, 0xd292, 0x3d59, 0xdb4e, 0x0, 0x0);
        gbc.writeMem(0xc2d4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe761);
        EXPECT(gbc.pc(), 0xc2d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d4), 0xfb);
        // FB 02CB
        gbc.setState(0x80dd, 0xb77e, 0x46b0, 0x993, 0xca91, 0x2a32, 0x0, 0x0);
        gbc.writeMem(0x80dd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb77e);
        EXPECT(gbc.pc(), 0x80de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80dd), 0xfb);
        // FB 02CC
        gbc.setState(0xeb83, 0x8a30, 0x9160, 0x4e95, 0xc31d, 0x4cea, 0x0, 0x0);
        gbc.writeMem(0xeb83, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8a30);
        EXPECT(gbc.pc(), 0xeb84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb83), 0xfb);
        // FB 02CD
        gbc.setState(0xc0b0, 0xb706, 0x1510, 0x5a83, 0xb198, 0x53fb, 0x0, 0x1);
        gbc.writeMem(0xc0b0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb706);
        EXPECT(gbc.pc(), 0xc0b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0b0), 0xfb);
        // FB 02CE
        gbc.setState(0x5afd, 0xdbc3, 0xfa90, 0x78ce, 0xc1fc, 0xa148, 0x1, 0x0);
        gbc.writeMem(0x5afd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdbc3);
        EXPECT(gbc.pc(), 0x5afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02CF
        gbc.setState(0x7554, 0xf148, 0xfb40, 0x9e28, 0xbecc, 0xa77a, 0x0, 0x1);
        gbc.writeMem(0x7554, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf148);
        EXPECT(gbc.pc(), 0x7555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02D0
        gbc.setState(0xb0a1, 0x8366, 0xf910, 0x29cc, 0x9cc0, 0xf130, 0x0, 0x0);
        gbc.writeMem(0xb0a1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8366);
        EXPECT(gbc.pc(), 0xb0a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a1), 0xfb);
        // FB 02D1
        gbc.setState(0x58b5, 0xb25, 0x9b20, 0xea8e, 0xe2a0, 0x69f5, 0x1, 0x1);
        gbc.writeMem(0x58b5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb25);
        EXPECT(gbc.pc(), 0x58b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02D2
        gbc.setState(0xb118, 0xf6d4, 0x9e60, 0xd980, 0xd8e6, 0xbe93, 0x0, 0x1);
        gbc.writeMem(0xb118, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf6d4);
        EXPECT(gbc.pc(), 0xb119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb118), 0xfb);
        // FB 02D4
        gbc.setState(0x51e, 0x9202, 0x3020, 0x1a6, 0xc982, 0x9937, 0x0, 0x1);
        gbc.writeMem(0x51e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9202);
        EXPECT(gbc.pc(), 0x51f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02D5
        gbc.setState(0xd933, 0x7f03, 0x8f80, 0x3133, 0x21ea, 0xd773, 0x1, 0x1);
        gbc.writeMem(0xd933, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7f03);
        EXPECT(gbc.pc(), 0xd934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd933), 0xfb);
        // FB 02D7
        gbc.setState(0x75df, 0xbd98, 0x3e60, 0xaeec, 0x3375, 0x464, 0x1, 0x1);
        gbc.writeMem(0x75df, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xbd98);
        EXPECT(gbc.pc(), 0x75e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02D8
        gbc.setState(0x1400, 0xc33a, 0xdb90, 0x658a, 0x5531, 0x6048, 0x0, 0x1);
        gbc.writeMem(0x1400, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc33a);
        EXPECT(gbc.pc(), 0x1401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02D9
        gbc.setState(0x1517, 0xbc6e, 0x9510, 0x2b75, 0xdf23, 0x33d7, 0x1, 0x1);
        gbc.writeMem(0x1517, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xbc6e);
        EXPECT(gbc.pc(), 0x1518);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02DB
        gbc.setState(0x8d10, 0x3d87, 0xe700, 0x3932, 0x986, 0x1d9e, 0x0, 0x0);
        gbc.writeMem(0x8d10, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3d87);
        EXPECT(gbc.pc(), 0x8d11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d10), 0xfb);
        // FB 02DC
        gbc.setState(0x3080, 0xe0e8, 0xae40, 0x3428, 0x47ad, 0xe554, 0x0, 0x0);
        gbc.writeMem(0x3080, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe0e8);
        EXPECT(gbc.pc(), 0x3081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02DD
        gbc.setState(0x8bb8, 0x20e3, 0x2730, 0xfb82, 0x67af, 0x9a8b, 0x1, 0x0);
        gbc.writeMem(0x8bb8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x20e3);
        EXPECT(gbc.pc(), 0x8bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb8), 0xfb);
        // FB 02DE
        gbc.setState(0x328, 0x79b0, 0xb1d0, 0x4f9c, 0x918f, 0x7016, 0x1, 0x0);
        gbc.writeMem(0x328, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x79b0);
        EXPECT(gbc.pc(), 0x329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02DF
        gbc.setState(0x1429, 0xbce, 0xe200, 0x26f3, 0x47ac, 0xb029, 0x1, 0x1);
        gbc.writeMem(0x1429, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbce);
        EXPECT(gbc.pc(), 0x142a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02E0
        gbc.setState(0x3197, 0xb9fb, 0xb4d0, 0x10fc, 0xdb65, 0x1c4b, 0x0, 0x1);
        gbc.writeMem(0x3197, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb9fb);
        EXPECT(gbc.pc(), 0x3198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02E1
        gbc.setState(0x9d63, 0x9f86, 0xcef0, 0xec31, 0x6d6f, 0xb964, 0x0, 0x1);
        gbc.writeMem(0x9d63, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9f86);
        EXPECT(gbc.pc(), 0x9d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d63), 0xfb);
        // FB 02E2
        gbc.setState(0x9158, 0xdbf9, 0xae0, 0x7f4e, 0x59e, 0xa5a5, 0x0, 0x0);
        gbc.writeMem(0x9158, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xdbf9);
        EXPECT(gbc.pc(), 0x9159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9158), 0xfb);
        // FB 02E3
        gbc.setState(0x90e7, 0x62e5, 0xae40, 0xabe7, 0xe9b0, 0xcd36, 0x0, 0x0);
        gbc.writeMem(0x90e7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x62e5);
        EXPECT(gbc.pc(), 0x90e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90e7), 0xfb);
        // FB 02E5
        gbc.setState(0x6943, 0x40c6, 0x8580, 0xcbdc, 0xdf2c, 0x1514, 0x1, 0x0);
        gbc.writeMem(0x6943, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x40c6);
        EXPECT(gbc.pc(), 0x6944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02E6
        gbc.setState(0xd827, 0x4035, 0xf400, 0xdf3d, 0x2959, 0xb032, 0x0, 0x0);
        gbc.writeMem(0xd827, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4035);
        EXPECT(gbc.pc(), 0xd828);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd827), 0xfb);
        // FB 02E7
        gbc.setState(0x17ac, 0x861f, 0x2d50, 0xca1f, 0xa40a, 0x2895, 0x0, 0x0);
        gbc.writeMem(0x17ac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x861f);
        EXPECT(gbc.pc(), 0x17ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02E8
        gbc.setState(0x7001, 0x716f, 0x5930, 0xa550, 0x3f1c, 0xda60, 0x1, 0x1);
        gbc.writeMem(0x7001, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x716f);
        EXPECT(gbc.pc(), 0x7002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02E9
        gbc.setState(0x109a, 0xe575, 0xf850, 0xdfcf, 0x766f, 0x1cf2, 0x1, 0x1);
        gbc.writeMem(0x109a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe575);
        EXPECT(gbc.pc(), 0x109b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02EA
        gbc.setState(0x7b00, 0xcc2d, 0xb0, 0x92c4, 0x3b05, 0xaac9, 0x0, 0x0);
        gbc.writeMem(0x7b00, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcc2d);
        EXPECT(gbc.pc(), 0x7b01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02EB
        gbc.setState(0x5d13, 0x16b3, 0x6160, 0x78ec, 0x5928, 0x6579, 0x0, 0x0);
        gbc.writeMem(0x5d13, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x16b3);
        EXPECT(gbc.pc(), 0x5d14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02EC
        gbc.setState(0x62ec, 0x181f, 0x9920, 0x89fc, 0x48, 0x4603, 0x0, 0x0);
        gbc.writeMem(0x62ec, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x181f);
        EXPECT(gbc.pc(), 0x62ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02ED
        gbc.setState(0xd9e5, 0x9690, 0xad00, 0x3044, 0x2edb, 0xf682, 0x0, 0x1);
        gbc.writeMem(0xd9e5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9690);
        EXPECT(gbc.pc(), 0xd9e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e5), 0xfb);
        // FB 02EE
        gbc.setState(0x50c9, 0x939, 0x8f0, 0x839c, 0x1706, 0xa336, 0x0, 0x1);
        gbc.writeMem(0x50c9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x939);
        EXPECT(gbc.pc(), 0x50ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02EF
        gbc.setState(0x420, 0x429c, 0x34f0, 0x93f6, 0x2ff7, 0x1a60, 0x1, 0x0);
        gbc.writeMem(0x420, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x429c);
        EXPECT(gbc.pc(), 0x421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02F0
        gbc.setState(0x452, 0x7a9e, 0xda10, 0x8482, 0xcffd, 0x6bae, 0x1, 0x1);
        gbc.writeMem(0x452, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7a9e);
        EXPECT(gbc.pc(), 0x453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02F1
        gbc.setState(0x3205, 0xd048, 0x9690, 0xa587, 0x5b89, 0xaf3f, 0x0, 0x1);
        gbc.writeMem(0x3205, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd048);
        EXPECT(gbc.pc(), 0x3206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02F2
        gbc.setState(0x2c12, 0xa596, 0xc620, 0x1ec, 0x3be6, 0xa321, 0x0, 0x1);
        gbc.writeMem(0x2c12, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa596);
        EXPECT(gbc.pc(), 0x2c13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02F3
        gbc.setState(0xdfcb, 0x1337, 0xeb00, 0x1481, 0x4906, 0x1d3c, 0x1, 0x0);
        gbc.writeMem(0xdfcb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1337);
        EXPECT(gbc.pc(), 0xdfcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfcb), 0xfb);
        // FB 02F4
        gbc.setState(0x9c06, 0xb6ae, 0x3d20, 0x8476, 0x9f30, 0xefeb, 0x0, 0x1);
        gbc.writeMem(0x9c06, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb6ae);
        EXPECT(gbc.pc(), 0x9c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c06), 0xfb);
        // FB 02F5
        gbc.setState(0x91da, 0x646f, 0x4230, 0x60c9, 0xc73, 0xbede, 0x0, 0x1);
        gbc.writeMem(0x91da, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x646f);
        EXPECT(gbc.pc(), 0x91db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91da), 0xfb);
        // FB 02F6
        gbc.setState(0x1016, 0x7070, 0x2f20, 0x99de, 0xbb04, 0xd4b0, 0x1, 0x0);
        gbc.writeMem(0x1016, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7070);
        EXPECT(gbc.pc(), 0x1017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 02F7
        gbc.setState(0xe709, 0xa7c3, 0xac90, 0x21c1, 0xd0ae, 0xd7ef, 0x1, 0x1);
        gbc.writeMem(0xe709, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xa7c3);
        EXPECT(gbc.pc(), 0xe70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe709), 0xfb);
        // FB 02F8
        gbc.setState(0xbeef, 0xe673, 0x80c0, 0xc714, 0x521, 0x4381, 0x1, 0x0);
        gbc.writeMem(0xbeef, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe673);
        EXPECT(gbc.pc(), 0xbef0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeef), 0xfb);
        // FB 02F9
        gbc.setState(0x4115, 0xb49b, 0xba30, 0x6fb6, 0xc02, 0x9e44, 0x1, 0x1);
        gbc.writeMem(0x4115, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb49b);
        EXPECT(gbc.pc(), 0x4116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02FA
        gbc.setState(0xaf9d, 0xcf59, 0x54f0, 0x5138, 0xf05c, 0xfba3, 0x0, 0x1);
        gbc.writeMem(0xaf9d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcf59);
        EXPECT(gbc.pc(), 0xaf9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf9d), 0xfb);
        // FB 02FB
        gbc.setState(0x5d7f, 0x67aa, 0xe3c0, 0x5e17, 0x70fa, 0x3ef7, 0x0, 0x1);
        gbc.writeMem(0x5d7f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x67aa);
        EXPECT(gbc.pc(), 0x5d80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 02FC
        gbc.setState(0x2a1c, 0x2b4d, 0x3d30, 0xb3c2, 0xd582, 0xd8a6, 0x0, 0x0);
        gbc.writeMem(0x2a1c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2b4d);
        EXPECT(gbc.pc(), 0x2a1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 02FD
        gbc.setState(0x6ca0, 0xa896, 0xccd0, 0x3b02, 0xbd15, 0xbd06, 0x0, 0x1);
        gbc.writeMem(0x6ca0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa896);
        EXPECT(gbc.pc(), 0x6ca1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 02FE
        gbc.setState(0xb5bd, 0x8326, 0xfb80, 0x3cb4, 0x3a49, 0x9969, 0x1, 0x0);
        gbc.writeMem(0xb5bd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8326);
        EXPECT(gbc.pc(), 0xb5be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5bd), 0xfb);
        // FB 02FF
        gbc.setState(0xd66e, 0x7a0d, 0xa0d0, 0x9b5, 0xc0d0, 0xe2f, 0x1, 0x0);
        gbc.writeMem(0xd66e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7a0d);
        EXPECT(gbc.pc(), 0xd66f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd66e), 0xfb);
        // FB 0300
        gbc.setState(0x9519, 0xd3ec, 0x9210, 0xf46b, 0x168c, 0x6f52, 0x1, 0x0);
        gbc.writeMem(0x9519, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd3ec);
        EXPECT(gbc.pc(), 0x951a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9519), 0xfb);
        // FB 0301
        gbc.setState(0xe32b, 0xc3d3, 0xce10, 0x762b, 0xa58f, 0xba34, 0x1, 0x1);
        gbc.writeMem(0xe32b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc3d3);
        EXPECT(gbc.pc(), 0xe32c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe32b), 0xfb);
        // FB 0302
        gbc.setState(0xb313, 0xd90e, 0xab60, 0xbacd, 0xf1a6, 0x8321, 0x1, 0x0);
        gbc.writeMem(0xb313, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd90e);
        EXPECT(gbc.pc(), 0xb314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb313), 0xfb);
        // FB 0303
        gbc.setState(0xcac4, 0x3226, 0x9ab0, 0x5931, 0xc699, 0xe024, 0x0, 0x0);
        gbc.writeMem(0xcac4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3226);
        EXPECT(gbc.pc(), 0xcac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcac4), 0xfb);
        // FB 0304
        gbc.setState(0xdf6b, 0x7b4f, 0x2aa0, 0x70ac, 0x996e, 0x70f0, 0x0, 0x1);
        gbc.writeMem(0xdf6b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7b4f);
        EXPECT(gbc.pc(), 0xdf6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf6b), 0xfb);
        // FB 0305
        gbc.setState(0xb052, 0x3cf9, 0xa140, 0x84cc, 0x2e18, 0x77c2, 0x1, 0x1);
        gbc.writeMem(0xb052, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3cf9);
        EXPECT(gbc.pc(), 0xb053);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb052), 0xfb);
        // FB 0306
        gbc.setState(0x1f4f, 0x155f, 0x5250, 0xd465, 0x9146, 0x4ab, 0x1, 0x1);
        gbc.writeMem(0x1f4f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x155f);
        EXPECT(gbc.pc(), 0x1f50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0307
        gbc.setState(0xe135, 0x2fed, 0xb20, 0x6af, 0x6a2, 0x9f66, 0x1, 0x0);
        gbc.writeMem(0xe135, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2fed);
        EXPECT(gbc.pc(), 0xe136);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe135), 0xfb);
        // FB 0308
        gbc.setState(0x2426, 0xea7e, 0x3df0, 0x8c30, 0x235f, 0x7114, 0x1, 0x1);
        gbc.writeMem(0x2426, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xea7e);
        EXPECT(gbc.pc(), 0x2427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0309
        gbc.setState(0xc846, 0xab56, 0x6dd0, 0xcc35, 0xb5e9, 0xd8ce, 0x0, 0x0);
        gbc.writeMem(0xc846, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xab56);
        EXPECT(gbc.pc(), 0xc847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc846), 0xfb);
        // FB 030A
        gbc.setState(0xe688, 0x72b5, 0xa140, 0xf028, 0xd019, 0x3933, 0x1, 0x0);
        gbc.writeMem(0xe688, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x72b5);
        EXPECT(gbc.pc(), 0xe689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe688), 0xfb);
        // FB 030C
        gbc.setState(0x27b, 0xbee9, 0x1fd0, 0x97d1, 0x5fa3, 0xe7d6, 0x0, 0x1);
        gbc.writeMem(0x27b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbee9);
        EXPECT(gbc.pc(), 0x27c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 030D
        gbc.setState(0x5bd6, 0x4325, 0xa0c0, 0x775d, 0xa465, 0x7877, 0x1, 0x1);
        gbc.writeMem(0x5bd6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4325);
        EXPECT(gbc.pc(), 0x5bd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 030E
        gbc.setState(0xe0e1, 0x5cf3, 0x89e0, 0xcbc4, 0x99ce, 0x8c6b, 0x1, 0x0);
        gbc.writeMem(0xe0e1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5cf3);
        EXPECT(gbc.pc(), 0xe0e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e1), 0xfb);
        // FB 0310
        gbc.setState(0x8210, 0x2231, 0x50d0, 0x5196, 0x5301, 0xc252, 0x0, 0x0);
        gbc.writeMem(0x8210, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2231);
        EXPECT(gbc.pc(), 0x8211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8210), 0xfb);
        // FB 0311
        gbc.setState(0x2d48, 0xf3d6, 0xc1e0, 0x3e46, 0x80a8, 0x6b75, 0x0, 0x0);
        gbc.writeMem(0x2d48, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf3d6);
        EXPECT(gbc.pc(), 0x2d49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0312
        gbc.setState(0x84f8, 0x5dbd, 0xed60, 0xfe14, 0x89c0, 0xf38e, 0x0, 0x1);
        gbc.writeMem(0x84f8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5dbd);
        EXPECT(gbc.pc(), 0x84f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f8), 0xfb);
        // FB 0313
        gbc.setState(0x790b, 0xbae1, 0x4e80, 0xc44a, 0xf6c4, 0x814a, 0x0, 0x1);
        gbc.writeMem(0x790b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xbae1);
        EXPECT(gbc.pc(), 0x790c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0314
        gbc.setState(0xbff0, 0xe5ad, 0x4b50, 0xbf9d, 0xc048, 0x69ca, 0x1, 0x1);
        gbc.writeMem(0xbff0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe5ad);
        EXPECT(gbc.pc(), 0xbff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbff0), 0xfb);
        // FB 0315
        gbc.setState(0x200e, 0xc07, 0x8c0, 0xdf11, 0xfd94, 0x1129, 0x0, 0x1);
        gbc.writeMem(0x200e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc07);
        EXPECT(gbc.pc(), 0x200f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0316
        gbc.setState(0x13c2, 0xb952, 0xa680, 0xc682, 0x3984, 0x2e93, 0x0, 0x0);
        gbc.writeMem(0x13c2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb952);
        EXPECT(gbc.pc(), 0x13c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0317
        gbc.setState(0xca65, 0x7876, 0xd430, 0xd2e1, 0x51eb, 0xa686, 0x1, 0x0);
        gbc.writeMem(0xca65, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7876);
        EXPECT(gbc.pc(), 0xca66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca65), 0xfb);
        // FB 0318
        gbc.setState(0xa413, 0x62d0, 0x4f50, 0x606b, 0x14d, 0xc279, 0x0, 0x1);
        gbc.writeMem(0xa413, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x62d0);
        EXPECT(gbc.pc(), 0xa414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa413), 0xfb);
        // FB 0319
        gbc.setState(0x2dd9, 0xe551, 0xa640, 0xe066, 0xceb2, 0xe1ab, 0x1, 0x0);
        gbc.writeMem(0x2dd9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe551);
        EXPECT(gbc.pc(), 0x2dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 031A
        gbc.setState(0xed34, 0x8506, 0x2d80, 0x91b9, 0xc5e, 0x8e51, 0x1, 0x0);
        gbc.writeMem(0xed34, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8506);
        EXPECT(gbc.pc(), 0xed35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed34), 0xfb);
        // FB 031B
        gbc.setState(0x6bea, 0xc38a, 0x8ab0, 0xf61, 0x1a5f, 0x7bae, 0x0, 0x0);
        gbc.writeMem(0x6bea, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc38a);
        EXPECT(gbc.pc(), 0x6beb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 031C
        gbc.setState(0xd26b, 0x7b84, 0xa230, 0xc1a3, 0x1176, 0x894c, 0x1, 0x1);
        gbc.writeMem(0xd26b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7b84);
        EXPECT(gbc.pc(), 0xd26c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd26b), 0xfb);
        // FB 031D
        gbc.setState(0x51a3, 0x51fd, 0x2490, 0x2914, 0x24c1, 0xcb7a, 0x0, 0x0);
        gbc.writeMem(0x51a3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x51fd);
        EXPECT(gbc.pc(), 0x51a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 031E
        gbc.setState(0x854d, 0xcfe8, 0x2340, 0xfc54, 0x5173, 0x7afb, 0x1, 0x0);
        gbc.writeMem(0x854d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xcfe8);
        EXPECT(gbc.pc(), 0x854e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854d), 0xfb);
        // FB 031F
        gbc.setState(0x9a34, 0x2f3f, 0x5b70, 0x3b85, 0xaa21, 0xf027, 0x1, 0x1);
        gbc.writeMem(0x9a34, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2f3f);
        EXPECT(gbc.pc(), 0x9a35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a34), 0xfb);
        // FB 0320
        gbc.setState(0x8a3b, 0x4ed8, 0x3b50, 0xa7ab, 0x89b7, 0x559b, 0x0, 0x0);
        gbc.writeMem(0x8a3b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4ed8);
        EXPECT(gbc.pc(), 0x8a3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a3b), 0xfb);
        // FB 0321
        gbc.setState(0x3a02, 0x1ed5, 0xcd00, 0x9538, 0xe5bc, 0xbb76, 0x1, 0x1);
        gbc.writeMem(0x3a02, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1ed5);
        EXPECT(gbc.pc(), 0x3a03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0322
        gbc.setState(0x5ab8, 0xde80, 0x2210, 0x9bbe, 0xc11e, 0x4dd1, 0x0, 0x0);
        gbc.writeMem(0x5ab8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xde80);
        EXPECT(gbc.pc(), 0x5ab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0323
        gbc.setState(0x734a, 0x38a6, 0xc330, 0x6334, 0x3622, 0xcced, 0x1, 0x0);
        gbc.writeMem(0x734a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x38a6);
        EXPECT(gbc.pc(), 0x734b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0324
        gbc.setState(0x290b, 0x9ac7, 0x41c0, 0xeb36, 0xd436, 0xce1b, 0x0, 0x0);
        gbc.writeMem(0x290b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9ac7);
        EXPECT(gbc.pc(), 0x290c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0325
        gbc.setState(0x9f2e, 0xf41e, 0x3d80, 0xf7ea, 0x6bf6, 0x526c, 0x1, 0x1);
        gbc.writeMem(0x9f2e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf41e);
        EXPECT(gbc.pc(), 0x9f2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f2e), 0xfb);
        // FB 0326
        gbc.setState(0x6b7d, 0x78be, 0x8ae0, 0x3191, 0x9f54, 0x8a, 0x1, 0x1);
        gbc.writeMem(0x6b7d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x78be);
        EXPECT(gbc.pc(), 0x6b7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0327
        gbc.setState(0x7344, 0xbdf9, 0xe520, 0x9507, 0x23f4, 0x72ab, 0x1, 0x0);
        gbc.writeMem(0x7344, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xbdf9);
        EXPECT(gbc.pc(), 0x7345);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0328
        gbc.setState(0x9693, 0xd930, 0xded0, 0xf49d, 0x9daa, 0xf4d7, 0x0, 0x1);
        gbc.writeMem(0x9693, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd930);
        EXPECT(gbc.pc(), 0x9694);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9693), 0xfb);
        // FB 0329
        gbc.setState(0x6105, 0x5977, 0xc820, 0xcbe5, 0xf426, 0x505b, 0x0, 0x0);
        gbc.writeMem(0x6105, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5977);
        EXPECT(gbc.pc(), 0x6106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 032A
        gbc.setState(0x69fa, 0xc428, 0x1390, 0x91de, 0xae9d, 0xa884, 0x1, 0x1);
        gbc.writeMem(0x69fa, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc428);
        EXPECT(gbc.pc(), 0x69fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 032B
        gbc.setState(0x2a, 0x989d, 0x55b0, 0x2c98, 0xec03, 0xc53, 0x0, 0x0);
        gbc.writeMem(0x2a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x989d);
        EXPECT(gbc.pc(), 0x2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 032C
        gbc.setState(0x51ca, 0x245d, 0x1700, 0x99c, 0xce49, 0x270, 0x1, 0x1);
        gbc.writeMem(0x51ca, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x245d);
        EXPECT(gbc.pc(), 0x51cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 032D
        gbc.setState(0x6032, 0x8ed7, 0x8c60, 0xdb5, 0x4469, 0xb1de, 0x1, 0x0);
        gbc.writeMem(0x6032, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8ed7);
        EXPECT(gbc.pc(), 0x6033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 032E
        gbc.setState(0xa7a1, 0x51d, 0xdcf0, 0xf8b5, 0xe7aa, 0xada, 0x0, 0x0);
        gbc.writeMem(0xa7a1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x51d);
        EXPECT(gbc.pc(), 0xa7a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7a1), 0xfb);
        // FB 032F
        gbc.setState(0xd345, 0x899b, 0xb220, 0x98bb, 0x9e4c, 0x309c, 0x0, 0x1);
        gbc.writeMem(0xd345, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x899b);
        EXPECT(gbc.pc(), 0xd346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd345), 0xfb);
        // FB 0330
        gbc.setState(0xaae0, 0xf7c6, 0x9eb0, 0x355d, 0xea39, 0x9b4c, 0x1, 0x1);
        gbc.writeMem(0xaae0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf7c6);
        EXPECT(gbc.pc(), 0xaae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaae0), 0xfb);
        // FB 0331
        gbc.setState(0x7207, 0x3695, 0x12a0, 0x134, 0xe2f6, 0x2582, 0x0, 0x0);
        gbc.writeMem(0x7207, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3695);
        EXPECT(gbc.pc(), 0x7208);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0333
        gbc.setState(0xc669, 0xd542, 0xd7c0, 0x6210, 0x5151, 0xee36, 0x1, 0x1);
        gbc.writeMem(0xc669, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd542);
        EXPECT(gbc.pc(), 0xc66a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc669), 0xfb);
        // FB 0334
        gbc.setState(0x28a3, 0x907f, 0xc440, 0x397c, 0x9868, 0x236, 0x1, 0x1);
        gbc.writeMem(0x28a3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x907f);
        EXPECT(gbc.pc(), 0x28a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0335
        gbc.setState(0x3d86, 0x85f, 0xfa50, 0x931c, 0x318e, 0x1088, 0x1, 0x0);
        gbc.writeMem(0x3d86, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x85f);
        EXPECT(gbc.pc(), 0x3d87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0336
        gbc.setState(0xd08b, 0x4519, 0x1850, 0x38c5, 0x3d63, 0x7b19, 0x1, 0x0);
        gbc.writeMem(0xd08b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4519);
        EXPECT(gbc.pc(), 0xd08c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd08b), 0xfb);
        // FB 0337
        gbc.setState(0x7ccd, 0x7a51, 0x1d20, 0x6853, 0x8d9a, 0x5f87, 0x1, 0x1);
        gbc.writeMem(0x7ccd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7a51);
        EXPECT(gbc.pc(), 0x7cce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0338
        gbc.setState(0x13d5, 0x2d60, 0x3430, 0x2aef, 0xcec5, 0x7ccc, 0x1, 0x0);
        gbc.writeMem(0x13d5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2d60);
        EXPECT(gbc.pc(), 0x13d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0339
        gbc.setState(0x13a1, 0x8c1f, 0xe090, 0xbb58, 0xcfb2, 0x9f2d, 0x1, 0x1);
        gbc.writeMem(0x13a1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8c1f);
        EXPECT(gbc.pc(), 0x13a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 033A
        gbc.setState(0xdd11, 0x34e3, 0xbad0, 0xe846, 0x10f9, 0x715, 0x1, 0x1);
        gbc.writeMem(0xdd11, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x34e3);
        EXPECT(gbc.pc(), 0xdd12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd11), 0xfb);
        // FB 033B
        gbc.setState(0xc17d, 0x3715, 0x2200, 0xb22a, 0x1861, 0x212c, 0x1, 0x0);
        gbc.writeMem(0xc17d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3715);
        EXPECT(gbc.pc(), 0xc17e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc17d), 0xfb);
        // FB 033C
        gbc.setState(0xc3ff, 0x8628, 0xa070, 0x8bdc, 0xcde9, 0xe884, 0x1, 0x0);
        gbc.writeMem(0xc3ff, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8628);
        EXPECT(gbc.pc(), 0xc400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3ff), 0xfb);
        // FB 033D
        gbc.setState(0x7a34, 0x5f4, 0x1390, 0xcccf, 0x553e, 0xc18e, 0x0, 0x1);
        gbc.writeMem(0x7a34, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5f4);
        EXPECT(gbc.pc(), 0x7a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 033E
        gbc.setState(0xe4bf, 0x2c38, 0x80d0, 0x6b20, 0x5c83, 0x453a, 0x0, 0x1);
        gbc.writeMem(0xe4bf, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2c38);
        EXPECT(gbc.pc(), 0xe4c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4bf), 0xfb);
        // FB 033F
        gbc.setState(0x46c4, 0x4207, 0xc4d0, 0xbe90, 0x24ff, 0x5000, 0x0, 0x0);
        gbc.writeMem(0x46c4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4207);
        EXPECT(gbc.pc(), 0x46c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0340
        gbc.setState(0x8db4, 0xe9b0, 0x89e0, 0x3539, 0xeff2, 0x6fa7, 0x0, 0x1);
        gbc.writeMem(0x8db4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe9b0);
        EXPECT(gbc.pc(), 0x8db5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db4), 0xfb);
        // FB 0341
        gbc.setState(0x4b41, 0xf6bc, 0x4f50, 0x6bc6, 0xc58f, 0x6010, 0x1, 0x1);
        gbc.writeMem(0x4b41, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf6bc);
        EXPECT(gbc.pc(), 0x4b42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0342
        gbc.setState(0x7088, 0x66f1, 0xd660, 0xe62c, 0x5aed, 0x6fa2, 0x1, 0x1);
        gbc.writeMem(0x7088, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x66f1);
        EXPECT(gbc.pc(), 0x7089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0344
        gbc.setState(0x8081, 0x9856, 0x8c40, 0x1f69, 0xfed5, 0x7740, 0x1, 0x1);
        gbc.writeMem(0x8081, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9856);
        EXPECT(gbc.pc(), 0x8082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8081), 0xfb);
        // FB 0345
        gbc.setState(0x6c97, 0xa7fc, 0x8400, 0xab2a, 0x5a07, 0xf377, 0x1, 0x0);
        gbc.writeMem(0x6c97, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa7fc);
        EXPECT(gbc.pc(), 0x6c98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0346
        gbc.setState(0xccae, 0x4890, 0xfc40, 0xf602, 0x356e, 0xbbd9, 0x0, 0x0);
        gbc.writeMem(0xccae, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4890);
        EXPECT(gbc.pc(), 0xccaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccae), 0xfb);
        // FB 0347
        gbc.setState(0xe3f8, 0x59e4, 0x9d90, 0x1429, 0x7d80, 0x5f9f, 0x1, 0x0);
        gbc.writeMem(0xe3f8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x59e4);
        EXPECT(gbc.pc(), 0xe3f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3f8), 0xfb);
        // FB 0348
        gbc.setState(0x7dee, 0x3764, 0x1200, 0x446b, 0x641a, 0x51ec, 0x1, 0x0);
        gbc.writeMem(0x7dee, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3764);
        EXPECT(gbc.pc(), 0x7def);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0349
        gbc.setState(0x85d5, 0x631, 0xa450, 0x5f88, 0x7e36, 0x4d99, 0x0, 0x0);
        gbc.writeMem(0x85d5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x631);
        EXPECT(gbc.pc(), 0x85d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85d5), 0xfb);
        // FB 034A
        gbc.setState(0x9d5d, 0xeae8, 0xa5e0, 0x274b, 0xc7e1, 0x86f4, 0x1, 0x0);
        gbc.writeMem(0x9d5d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xeae8);
        EXPECT(gbc.pc(), 0x9d5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d5d), 0xfb);
        // FB 034B
        gbc.setState(0x4ed7, 0x9bdc, 0x7ab0, 0xca92, 0x420d, 0xd8dc, 0x1, 0x1);
        gbc.writeMem(0x4ed7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9bdc);
        EXPECT(gbc.pc(), 0x4ed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 034C
        gbc.setState(0xb481, 0x6cbe, 0xa2f0, 0xd58e, 0xb9da, 0xb148, 0x1, 0x0);
        gbc.writeMem(0xb481, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6cbe);
        EXPECT(gbc.pc(), 0xb482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb481), 0xfb);
        // FB 034D
        gbc.setState(0xa8b7, 0x3aaf, 0xd2e0, 0x1a3f, 0xc8dc, 0x3c02, 0x1, 0x0);
        gbc.writeMem(0xa8b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3aaf);
        EXPECT(gbc.pc(), 0xa8b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8b7), 0xfb);
        // FB 034F
        gbc.setState(0x2bce, 0x919d, 0x8930, 0x4cbc, 0x7516, 0xf30e, 0x0, 0x0);
        gbc.writeMem(0x2bce, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x919d);
        EXPECT(gbc.pc(), 0x2bcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0350
        gbc.setState(0x1e6c, 0xa3e8, 0x6d40, 0x29cb, 0xeb93, 0x39bf, 0x1, 0x1);
        gbc.writeMem(0x1e6c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa3e8);
        EXPECT(gbc.pc(), 0x1e6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0351
        gbc.setState(0x496e, 0xb264, 0xd8e0, 0x421b, 0x2ca, 0xca85, 0x0, 0x1);
        gbc.writeMem(0x496e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb264);
        EXPECT(gbc.pc(), 0x496f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0352
        gbc.setState(0x6121, 0x2f2d, 0xe50, 0xde38, 0x6550, 0xd714, 0x1, 0x0);
        gbc.writeMem(0x6121, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2f2d);
        EXPECT(gbc.pc(), 0x6122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0353
        gbc.setState(0x7f43, 0xdd85, 0x8d0, 0xe7a6, 0xe0d9, 0x3173, 0x0, 0x1);
        gbc.writeMem(0x7f43, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xdd85);
        EXPECT(gbc.pc(), 0x7f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0354
        gbc.setState(0x229f, 0xa896, 0x5820, 0xe0e8, 0x7e14, 0xefe9, 0x0, 0x0);
        gbc.writeMem(0x229f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa896);
        EXPECT(gbc.pc(), 0x22a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0355
        gbc.setState(0xe588, 0xed2a, 0xfcf0, 0x58b3, 0xa735, 0x972a, 0x0, 0x0);
        gbc.writeMem(0xe588, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xed2a);
        EXPECT(gbc.pc(), 0xe589);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe588), 0xfb);
        // FB 0356
        gbc.setState(0x6cd7, 0xce4b, 0x2470, 0x6177, 0xfc9b, 0x9ce7, 0x0, 0x0);
        gbc.writeMem(0x6cd7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xce4b);
        EXPECT(gbc.pc(), 0x6cd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0357
        gbc.setState(0x3093, 0x4f2e, 0xd810, 0x7146, 0x190e, 0x6e83, 0x1, 0x1);
        gbc.writeMem(0x3093, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4f2e);
        EXPECT(gbc.pc(), 0x3094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0359
        gbc.setState(0xe855, 0xbf1, 0xbd40, 0x6cac, 0x9847, 0x427c, 0x1, 0x1);
        gbc.writeMem(0xe855, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbf1);
        EXPECT(gbc.pc(), 0xe856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe855), 0xfb);
        // FB 035A
        gbc.setState(0xbb7e, 0xfe1b, 0xb010, 0x631f, 0xc063, 0x4ca, 0x0, 0x1);
        gbc.writeMem(0xbb7e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xfe1b);
        EXPECT(gbc.pc(), 0xbb7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb7e), 0xfb);
        // FB 035C
        gbc.setState(0x5771, 0xb2d9, 0x3b80, 0x87a8, 0xc175, 0x2d70, 0x0, 0x1);
        gbc.writeMem(0x5771, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb2d9);
        EXPECT(gbc.pc(), 0x5772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 035D
        gbc.setState(0x8130, 0x56c1, 0x1b50, 0x11e, 0x38f9, 0x8653, 0x1, 0x0);
        gbc.writeMem(0x8130, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x56c1);
        EXPECT(gbc.pc(), 0x8131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8130), 0xfb);
        // FB 035E
        gbc.setState(0x13c4, 0x6a, 0xde50, 0x6935, 0x2013, 0x625d, 0x1, 0x0);
        gbc.writeMem(0x13c4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6a);
        EXPECT(gbc.pc(), 0x13c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 035F
        gbc.setState(0xc2db, 0xf5ff, 0x3110, 0x5a52, 0x92a, 0xea69, 0x1, 0x0);
        gbc.writeMem(0xc2db, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf5ff);
        EXPECT(gbc.pc(), 0xc2dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2db), 0xfb);
        // FB 0360
        gbc.setState(0x88ea, 0x812d, 0xbf60, 0x2b77, 0x469a, 0xbb3, 0x1, 0x1);
        gbc.writeMem(0x88ea, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x812d);
        EXPECT(gbc.pc(), 0x88eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ea), 0xfb);
        // FB 0361
        gbc.setState(0xdf5e, 0xaa54, 0xe1a0, 0xdebb, 0x7600, 0x8320, 0x1, 0x1);
        gbc.writeMem(0xdf5e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xaa54);
        EXPECT(gbc.pc(), 0xdf5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf5e), 0xfb);
        // FB 0362
        gbc.setState(0x41c5, 0x6b21, 0x6810, 0x6ab0, 0x42ab, 0xad0, 0x0, 0x1);
        gbc.writeMem(0x41c5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6b21);
        EXPECT(gbc.pc(), 0x41c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0363
        gbc.setState(0x6d8f, 0x11ce, 0x55c0, 0xeaeb, 0x6fa9, 0x227c, 0x1, 0x0);
        gbc.writeMem(0x6d8f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x11ce);
        EXPECT(gbc.pc(), 0x6d90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0364
        gbc.setState(0x4daa, 0x1993, 0xc540, 0x1bc0, 0x9f37, 0xec47, 0x0, 0x1);
        gbc.writeMem(0x4daa, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1993);
        EXPECT(gbc.pc(), 0x4dab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0365
        gbc.setState(0x325f, 0x6405, 0x61a0, 0x6be0, 0x4258, 0xc8ef, 0x0, 0x0);
        gbc.writeMem(0x325f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6405);
        EXPECT(gbc.pc(), 0x3260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0367
        gbc.setState(0xe69d, 0xb6a7, 0x7de0, 0x1190, 0x3a09, 0x870a, 0x0, 0x1);
        gbc.writeMem(0xe69d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb6a7);
        EXPECT(gbc.pc(), 0xe69e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe69d), 0xfb);
        // FB 0369
        gbc.setState(0x7fdb, 0xe48c, 0x3c90, 0x8912, 0xfb8, 0x87c5, 0x0, 0x1);
        gbc.writeMem(0x7fdb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe48c);
        EXPECT(gbc.pc(), 0x7fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 036A
        gbc.setState(0x5fbc, 0xb6fd, 0x9c10, 0xd4ee, 0xccd3, 0x424a, 0x1, 0x0);
        gbc.writeMem(0x5fbc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb6fd);
        EXPECT(gbc.pc(), 0x5fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 036B
        gbc.setState(0xc8b7, 0xdd51, 0x48a0, 0x394, 0x91fc, 0xe3ef, 0x0, 0x1);
        gbc.writeMem(0xc8b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xdd51);
        EXPECT(gbc.pc(), 0xc8b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b7), 0xfb);
        // FB 036C
        gbc.setState(0x1d12, 0xa80b, 0xddd0, 0x1677, 0x9ae1, 0x9c4b, 0x0, 0x1);
        gbc.writeMem(0x1d12, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa80b);
        EXPECT(gbc.pc(), 0x1d13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 036D
        gbc.setState(0x1ddd, 0x8d14, 0x9940, 0x5d7d, 0xa970, 0xcfe8, 0x0, 0x1);
        gbc.writeMem(0x1ddd, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8d14);
        EXPECT(gbc.pc(), 0x1dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 036E
        gbc.setState(0xb013, 0xaf79, 0x8d30, 0x5d1, 0xfa38, 0x536a, 0x1, 0x1);
        gbc.writeMem(0xb013, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xaf79);
        EXPECT(gbc.pc(), 0xb014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb013), 0xfb);
        // FB 0370
        gbc.setState(0x5048, 0xac79, 0x8f80, 0x2f8f, 0xeeea, 0x8b5, 0x1, 0x0);
        gbc.writeMem(0x5048, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xac79);
        EXPECT(gbc.pc(), 0x5049);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0371
        gbc.setState(0x9c4d, 0x8854, 0xb740, 0xe3c, 0x8b6e, 0x7dbe, 0x0, 0x1);
        gbc.writeMem(0x9c4d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8854);
        EXPECT(gbc.pc(), 0x9c4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c4d), 0xfb);
        // FB 0372
        gbc.setState(0x5a4c, 0xf65, 0x9ff0, 0x9282, 0x3566, 0x644a, 0x0, 0x1);
        gbc.writeMem(0x5a4c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf65);
        EXPECT(gbc.pc(), 0x5a4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0373
        gbc.setState(0x42b7, 0xb3f9, 0x4f0, 0x8b77, 0xbe61, 0x8cd1, 0x1, 0x0);
        gbc.writeMem(0x42b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb3f9);
        EXPECT(gbc.pc(), 0x42b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0374
        gbc.setState(0x9b9e, 0xe71e, 0x4cf0, 0x37bb, 0x8d21, 0xb45f, 0x1, 0x1);
        gbc.writeMem(0x9b9e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe71e);
        EXPECT(gbc.pc(), 0x9b9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b9e), 0xfb);
        // FB 0375
        gbc.setState(0x48ba, 0xacdb, 0x40b0, 0xf5a7, 0xcc53, 0x93f5, 0x1, 0x0);
        gbc.writeMem(0x48ba, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xacdb);
        EXPECT(gbc.pc(), 0x48bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0376
        gbc.setState(0xaf2c, 0x4c07, 0x4440, 0xe50e, 0x697b, 0x730e, 0x0, 0x1);
        gbc.writeMem(0xaf2c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4c07);
        EXPECT(gbc.pc(), 0xaf2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf2c), 0xfb);
        // FB 0377
        gbc.setState(0x2e2, 0x37ad, 0xd320, 0x9820, 0x896a, 0x98f2, 0x0, 0x0);
        gbc.writeMem(0x2e2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x37ad);
        EXPECT(gbc.pc(), 0x2e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 0378
        gbc.setState(0x89aa, 0x6bd6, 0xf560, 0xe3f4, 0x797d, 0x83c9, 0x1, 0x0);
        gbc.writeMem(0x89aa, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6bd6);
        EXPECT(gbc.pc(), 0x89ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89aa), 0xfb);
        // FB 037A
        gbc.setState(0x9e5, 0xe691, 0x9800, 0xea94, 0x4945, 0xe31d, 0x1, 0x1);
        gbc.writeMem(0x9e5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe691);
        EXPECT(gbc.pc(), 0x9e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 037B
        gbc.setState(0x1ebb, 0x2fd7, 0x8870, 0x9719, 0x2f01, 0x856a, 0x1, 0x0);
        gbc.writeMem(0x1ebb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2fd7);
        EXPECT(gbc.pc(), 0x1ebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 037C
        gbc.setState(0x8564, 0xe6ed, 0xaa0, 0xa8e8, 0x68d5, 0xc62f, 0x1, 0x0);
        gbc.writeMem(0x8564, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe6ed);
        EXPECT(gbc.pc(), 0x8565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8564), 0xfb);
        // FB 037D
        gbc.setState(0x9fa2, 0xb96f, 0xe730, 0x54bf, 0xab81, 0x666a, 0x0, 0x1);
        gbc.writeMem(0x9fa2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb96f);
        EXPECT(gbc.pc(), 0x9fa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fa2), 0xfb);
        // FB 037E
        gbc.setState(0x3d06, 0x1b5, 0xa450, 0x93b0, 0x9e6d, 0xd425, 0x1, 0x0);
        gbc.writeMem(0x3d06, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1b5);
        EXPECT(gbc.pc(), 0x3d07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 037F
        gbc.setState(0xe317, 0x62f8, 0xcfc0, 0x358c, 0x7577, 0x4bf1, 0x1, 0x1);
        gbc.writeMem(0xe317, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x62f8);
        EXPECT(gbc.pc(), 0xe318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe317), 0xfb);
        // FB 0380
        gbc.setState(0x790a, 0x4bdc, 0x46d0, 0x1bef, 0x8b6, 0x5cf0, 0x0, 0x1);
        gbc.writeMem(0x790a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4bdc);
        EXPECT(gbc.pc(), 0x790b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0381
        gbc.setState(0xda51, 0x19a7, 0xc60, 0xc68f, 0x6aff, 0xe3c4, 0x1, 0x0);
        gbc.writeMem(0xda51, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x19a7);
        EXPECT(gbc.pc(), 0xda52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda51), 0xfb);
        // FB 0382
        gbc.setState(0x9194, 0xcd83, 0x1f90, 0x7e33, 0x6cb5, 0x9bf2, 0x1, 0x0);
        gbc.writeMem(0x9194, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcd83);
        EXPECT(gbc.pc(), 0x9195);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9194), 0xfb);
        // FB 0383
        gbc.setState(0xa1d9, 0x9fe, 0x2090, 0x1e85, 0xfdd3, 0x7526, 0x1, 0x1);
        gbc.writeMem(0xa1d9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9fe);
        EXPECT(gbc.pc(), 0xa1da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1d9), 0xfb);
        // FB 0384
        gbc.setState(0xb9e2, 0x7c93, 0x8d40, 0x6f48, 0x44b4, 0x645e, 0x1, 0x1);
        gbc.writeMem(0xb9e2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7c93);
        EXPECT(gbc.pc(), 0xb9e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9e2), 0xfb);
        // FB 0385
        gbc.setState(0x9d9b, 0x6155, 0x220, 0x119, 0xd701, 0x28a2, 0x0, 0x0);
        gbc.writeMem(0x9d9b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6155);
        EXPECT(gbc.pc(), 0x9d9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9b), 0xfb);
        // FB 0386
        gbc.setState(0x723b, 0xf5fd, 0x3650, 0xcab, 0x3a50, 0x2828, 0x1, 0x0);
        gbc.writeMem(0x723b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf5fd);
        EXPECT(gbc.pc(), 0x723c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0387
        gbc.setState(0x83d8, 0xc5c0, 0x3e60, 0xf511, 0xdd10, 0x3ac5, 0x1, 0x1);
        gbc.writeMem(0x83d8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc5c0);
        EXPECT(gbc.pc(), 0x83d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83d8), 0xfb);
        // FB 0388
        gbc.setState(0xeca, 0xa0f9, 0xe9c0, 0x2619, 0x5a1c, 0x6091, 0x0, 0x1);
        gbc.writeMem(0xeca, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa0f9);
        EXPECT(gbc.pc(), 0xecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 0389
        gbc.setState(0xb1b7, 0x993b, 0x3390, 0x4173, 0x1314, 0xfea6, 0x0, 0x0);
        gbc.writeMem(0xb1b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x993b);
        EXPECT(gbc.pc(), 0xb1b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1b7), 0xfb);
        // FB 038A
        gbc.setState(0xcdc2, 0xfd9d, 0x45f0, 0xfdd1, 0x1556, 0x8def, 0x1, 0x0);
        gbc.writeMem(0xcdc2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xfd9d);
        EXPECT(gbc.pc(), 0xcdc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdc2), 0xfb);
        // FB 038B
        gbc.setState(0x528e, 0x714d, 0xe030, 0x5332, 0xebae, 0xc75, 0x0, 0x0);
        gbc.writeMem(0x528e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x714d);
        EXPECT(gbc.pc(), 0x528f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 038C
        gbc.setState(0x4a10, 0xb6a1, 0x7960, 0x7f2a, 0x74f1, 0xca59, 0x0, 0x0);
        gbc.writeMem(0x4a10, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb6a1);
        EXPECT(gbc.pc(), 0x4a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 038D
        gbc.setState(0x28fc, 0xe231, 0xf610, 0xb9c6, 0xe1c0, 0x53e2, 0x1, 0x0);
        gbc.writeMem(0x28fc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe231);
        EXPECT(gbc.pc(), 0x28fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 038E
        gbc.setState(0xe825, 0x2e40, 0xd4e0, 0x7dd1, 0x4664, 0xdc25, 0x0, 0x1);
        gbc.writeMem(0xe825, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2e40);
        EXPECT(gbc.pc(), 0xe826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe825), 0xfb);
        // FB 038F
        gbc.setState(0xa56c, 0xed61, 0xf880, 0xd179, 0x910d, 0xd4f7, 0x0, 0x0);
        gbc.writeMem(0xa56c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xed61);
        EXPECT(gbc.pc(), 0xa56d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa56c), 0xfb);
        // FB 0390
        gbc.setState(0x8a3f, 0x7c03, 0x5810, 0x6d6c, 0xc69d, 0xf92c, 0x0, 0x0);
        gbc.writeMem(0x8a3f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7c03);
        EXPECT(gbc.pc(), 0x8a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a3f), 0xfb);
        // FB 0391
        gbc.setState(0xd13a, 0xb4a0, 0x480, 0xba4b, 0x777f, 0x48b1, 0x0, 0x1);
        gbc.writeMem(0xd13a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb4a0);
        EXPECT(gbc.pc(), 0xd13b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13a), 0xfb);
        // FB 0392
        gbc.setState(0x2dee, 0xc5a3, 0x9cd0, 0x3010, 0x9c77, 0xa487, 0x1, 0x0);
        gbc.writeMem(0x2dee, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc5a3);
        EXPECT(gbc.pc(), 0x2def);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0394
        gbc.setState(0x4579, 0xee51, 0x8250, 0x2ba8, 0x4ba5, 0x5015, 0x1, 0x1);
        gbc.writeMem(0x4579, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xee51);
        EXPECT(gbc.pc(), 0x457a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 0395
        gbc.setState(0x5bc7, 0x585, 0xa9b0, 0x81eb, 0x2376, 0xca0e, 0x1, 0x0);
        gbc.writeMem(0x5bc7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x585);
        EXPECT(gbc.pc(), 0x5bc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 0396
        gbc.setState(0xd713, 0xde3c, 0x15d0, 0xd7e9, 0x1b82, 0x4fb5, 0x1, 0x0);
        gbc.writeMem(0xd713, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xde3c);
        EXPECT(gbc.pc(), 0xd714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd713), 0xfb);
        // FB 0397
        gbc.setState(0x8ac8, 0x2ac9, 0x4bd0, 0xde06, 0x102e, 0x7485, 0x0, 0x1);
        gbc.writeMem(0x8ac8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2ac9);
        EXPECT(gbc.pc(), 0x8ac9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac8), 0xfb);
        // FB 0398
        gbc.setState(0xc6b3, 0xc17c, 0x22b0, 0xf5c0, 0x2014, 0x105d, 0x1, 0x1);
        gbc.writeMem(0xc6b3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc17c);
        EXPECT(gbc.pc(), 0xc6b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b3), 0xfb);
        // FB 0399
        gbc.setState(0x33c1, 0x921c, 0x8e00, 0x7c3b, 0xb790, 0xd014, 0x0, 0x1);
        gbc.writeMem(0x33c1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x921c);
        EXPECT(gbc.pc(), 0x33c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 039A
        gbc.setState(0xf30, 0x61a1, 0xdb10, 0x2071, 0x5357, 0x27da, 0x0, 0x0);
        gbc.writeMem(0xf30, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x61a1);
        EXPECT(gbc.pc(), 0xf31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 039C
        gbc.setState(0xa1fc, 0xb7c6, 0x3f20, 0x42ea, 0x9306, 0x7ab3, 0x0, 0x0);
        gbc.writeMem(0xa1fc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb7c6);
        EXPECT(gbc.pc(), 0xa1fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1fc), 0xfb);
        // FB 039D
        gbc.setState(0xad2c, 0x1510, 0xb120, 0x3518, 0xc4bf, 0xe766, 0x1, 0x1);
        gbc.writeMem(0xad2c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1510);
        EXPECT(gbc.pc(), 0xad2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2c), 0xfb);
        // FB 039E
        gbc.setState(0x8407, 0xc54d, 0xeda0, 0x2bef, 0x9ad4, 0x5b9c, 0x0, 0x0);
        gbc.writeMem(0x8407, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc54d);
        EXPECT(gbc.pc(), 0x8408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8407), 0xfb);
        // FB 039F
        gbc.setState(0xe409, 0xb04, 0xf30, 0x30ff, 0x2bb7, 0x646b, 0x0, 0x0);
        gbc.writeMem(0xe409, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb04);
        EXPECT(gbc.pc(), 0xe40a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe409), 0xfb);
        // FB 03A0
        gbc.setState(0x96cc, 0x5bb, 0x3bf0, 0x2058, 0x91a7, 0x68e8, 0x0, 0x1);
        gbc.writeMem(0x96cc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5bb);
        EXPECT(gbc.pc(), 0x96cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96cc), 0xfb);
        // FB 03A1
        gbc.setState(0x96ff, 0x8b31, 0x4440, 0x4953, 0xd328, 0x8c4a, 0x1, 0x1);
        gbc.writeMem(0x96ff, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8b31);
        EXPECT(gbc.pc(), 0x9700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ff), 0xfb);
        // FB 03A2
        gbc.setState(0x29b7, 0xbc16, 0xc390, 0x634e, 0x25a8, 0x44bd, 0x0, 0x0);
        gbc.writeMem(0x29b7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xbc16);
        EXPECT(gbc.pc(), 0x29b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03A3
        gbc.setState(0x3595, 0x55d4, 0xbdf0, 0xad30, 0xbc2a, 0x650a, 0x1, 0x0);
        gbc.writeMem(0x3595, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x55d4);
        EXPECT(gbc.pc(), 0x3596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03A4
        gbc.setState(0x4f, 0x8c25, 0x3ab0, 0x344b, 0x9443, 0xcb4, 0x1, 0x0);
        gbc.writeMem(0x4f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8c25);
        EXPECT(gbc.pc(), 0x50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03A5
        gbc.setState(0xded6, 0x3acd, 0x940, 0x426d, 0x5a2a, 0x2118, 0x1, 0x1);
        gbc.writeMem(0xded6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3acd);
        EXPECT(gbc.pc(), 0xded7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded6), 0xfb);
        // FB 03A6
        gbc.setState(0x1332, 0x66c8, 0x8340, 0x3d3a, 0xbcad, 0x1210, 0x1, 0x0);
        gbc.writeMem(0x1332, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x66c8);
        EXPECT(gbc.pc(), 0x1333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03A7
        gbc.setState(0xe686, 0x6a70, 0x4b00, 0xf371, 0xc7e2, 0x55e0, 0x0, 0x1);
        gbc.writeMem(0xe686, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x6a70);
        EXPECT(gbc.pc(), 0xe687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe686), 0xfb);
        // FB 03A8
        gbc.setState(0x1735, 0x1394, 0x2070, 0xfee5, 0x28d8, 0xb137, 0x1, 0x1);
        gbc.writeMem(0x1735, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1394);
        EXPECT(gbc.pc(), 0x1736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03AB
        gbc.setState(0x3768, 0x63ba, 0x6760, 0x122e, 0xa630, 0x16d7, 0x1, 0x0);
        gbc.writeMem(0x3768, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x63ba);
        EXPECT(gbc.pc(), 0x3769);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 03AC
        gbc.setState(0x9c6e, 0xcaa7, 0x8280, 0xc900, 0xd498, 0x2ee, 0x0, 0x1);
        gbc.writeMem(0x9c6e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xcaa7);
        EXPECT(gbc.pc(), 0x9c6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c6e), 0xfb);
        // FB 03AD
        gbc.setState(0x6de4, 0x555d, 0x9640, 0x6ac6, 0x3dbc, 0xb155, 0x1, 0x0);
        gbc.writeMem(0x6de4, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x555d);
        EXPECT(gbc.pc(), 0x6de5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03AE
        gbc.setState(0xeb72, 0x73fa, 0x1510, 0x99ec, 0xfa, 0x40ee, 0x0, 0x1);
        gbc.writeMem(0xeb72, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x73fa);
        EXPECT(gbc.pc(), 0xeb73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb72), 0xfb);
        // FB 03AF
        gbc.setState(0x9d5d, 0x1a02, 0xc430, 0x7aae, 0x84af, 0xf7dd, 0x0, 0x0);
        gbc.writeMem(0x9d5d, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1a02);
        EXPECT(gbc.pc(), 0x9d5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d5d), 0xfb);
        // FB 03B0
        gbc.setState(0x411a, 0x2471, 0x96b0, 0x7104, 0xf811, 0xcfe5, 0x0, 0x1);
        gbc.writeMem(0x411a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2471);
        EXPECT(gbc.pc(), 0x411b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03B1
        gbc.setState(0xe3eb, 0xa4bd, 0x4050, 0x8570, 0xe42, 0x3da, 0x1, 0x0);
        gbc.writeMem(0xe3eb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa4bd);
        EXPECT(gbc.pc(), 0xe3ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3eb), 0xfb);
        // FB 03B2
        gbc.setState(0x21c2, 0x2220, 0x6bf0, 0x7564, 0x8c93, 0x2ffa, 0x0, 0x1);
        gbc.writeMem(0x21c2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2220);
        EXPECT(gbc.pc(), 0x21c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03B3
        gbc.setState(0x93c0, 0x9e00, 0x9a40, 0xa205, 0x46db, 0xcac3, 0x0, 0x0);
        gbc.writeMem(0x93c0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9e00);
        EXPECT(gbc.pc(), 0x93c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c0), 0xfb);
        // FB 03B4
        gbc.setState(0x5c6, 0x5ab7, 0x2630, 0x8302, 0xe189, 0xe93d, 0x0, 0x0);
        gbc.writeMem(0x5c6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5ab7);
        EXPECT(gbc.pc(), 0x5c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03B5
        gbc.setState(0xc84c, 0x1c0f, 0x60c0, 0xd187, 0x522a, 0x16a1, 0x0, 0x1);
        gbc.writeMem(0xc84c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1c0f);
        EXPECT(gbc.pc(), 0xc84d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc84c), 0xfb);
        // FB 03B6
        gbc.setState(0xebc, 0x8776, 0xcf10, 0xa6dc, 0xbd5a, 0xbcd4, 0x0, 0x1);
        gbc.writeMem(0xebc, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8776);
        EXPECT(gbc.pc(), 0xebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03B7
        gbc.setState(0x7950, 0x1969, 0x8250, 0x7938, 0x65bf, 0x8ab5, 0x0, 0x0);
        gbc.writeMem(0x7950, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1969);
        EXPECT(gbc.pc(), 0x7951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03B8
        gbc.setState(0x92c1, 0x6ffa, 0x9ed0, 0xe80f, 0xcecf, 0x9a12, 0x0, 0x1);
        gbc.writeMem(0x92c1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6ffa);
        EXPECT(gbc.pc(), 0x92c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c1), 0xfb);
        // FB 03B9
        gbc.setState(0x5047, 0x9488, 0xbfc0, 0xa03b, 0x6922, 0x3309, 0x1, 0x0);
        gbc.writeMem(0x5047, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9488);
        EXPECT(gbc.pc(), 0x5048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03BA
        gbc.setState(0xc9f0, 0x3c97, 0xf0, 0xa7e1, 0x35d8, 0x3b0a, 0x1, 0x1);
        gbc.writeMem(0xc9f0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3c97);
        EXPECT(gbc.pc(), 0xc9f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f0), 0xfb);
        // FB 03BB
        gbc.setState(0xef2, 0xba76, 0x3b10, 0x68be, 0x6d1b, 0xbd0b, 0x1, 0x0);
        gbc.writeMem(0xef2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xba76);
        EXPECT(gbc.pc(), 0xef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03BC
        gbc.setState(0x2ea, 0x284e, 0x4e20, 0x18e8, 0xa99e, 0x2e7a, 0x0, 0x0);
        gbc.writeMem(0x2ea, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x284e);
        EXPECT(gbc.pc(), 0x2eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 03BD
        gbc.setState(0x597f, 0xd73a, 0x6cb0, 0xfd3c, 0xb2af, 0x43fc, 0x1, 0x0);
        gbc.writeMem(0x597f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd73a);
        EXPECT(gbc.pc(), 0x5980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03BE
        gbc.setState(0x5c79, 0x927b, 0xa470, 0x6521, 0x4803, 0xba45, 0x0, 0x0);
        gbc.writeMem(0x5c79, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x927b);
        EXPECT(gbc.pc(), 0x5c7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03BF
        gbc.setState(0x77a9, 0x9e21, 0xb900, 0xb7c5, 0xc3f2, 0xa7f8, 0x0, 0x1);
        gbc.writeMem(0x77a9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9e21);
        EXPECT(gbc.pc(), 0x77aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03C0
        gbc.setState(0xa2ac, 0xa999, 0xaf70, 0xd875, 0x7b00, 0xceea, 0x0, 0x0);
        gbc.writeMem(0xa2ac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa999);
        EXPECT(gbc.pc(), 0xa2ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ac), 0xfb);
        // FB 03C1
        gbc.setState(0x2382, 0x300e, 0x8600, 0xcdc9, 0xa09, 0x56a0, 0x1, 0x1);
        gbc.writeMem(0x2382, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x300e);
        EXPECT(gbc.pc(), 0x2383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03C2
        gbc.setState(0xa661, 0x8892, 0xd090, 0x9ffd, 0xf1e5, 0x97d3, 0x1, 0x1);
        gbc.writeMem(0xa661, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8892);
        EXPECT(gbc.pc(), 0xa662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa661), 0xfb);
        // FB 03C3
        gbc.setState(0x3bb, 0xd5e1, 0x82f0, 0xe2fb, 0xc521, 0x14cb, 0x0, 0x1);
        gbc.writeMem(0x3bb, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd5e1);
        EXPECT(gbc.pc(), 0x3bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03C4
        gbc.setState(0x4528, 0x64ed, 0x4fd0, 0xe540, 0xe6ed, 0x9ed1, 0x1, 0x0);
        gbc.writeMem(0x4528, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x64ed);
        EXPECT(gbc.pc(), 0x4529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03C5
        gbc.setState(0x33f9, 0x2db1, 0x7650, 0x55d8, 0xd9c5, 0x627a, 0x0, 0x1);
        gbc.writeMem(0x33f9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2db1);
        EXPECT(gbc.pc(), 0x33fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03C6
        gbc.setState(0xeff6, 0x7189, 0x1590, 0x9ab1, 0x8eb5, 0x11da, 0x0, 0x0);
        gbc.writeMem(0xeff6, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7189);
        EXPECT(gbc.pc(), 0xeff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeff6), 0xfb);
        // FB 03C7
        gbc.setState(0xa5e, 0x4b2e, 0x8870, 0x9af1, 0x354e, 0x914f, 0x0, 0x1);
        gbc.writeMem(0xa5e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4b2e);
        EXPECT(gbc.pc(), 0xa5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03C8
        gbc.setState(0xa8d0, 0xf2de, 0x48a0, 0xe5ff, 0xfeb1, 0xf773, 0x1, 0x0);
        gbc.writeMem(0xa8d0, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf2de);
        EXPECT(gbc.pc(), 0xa8d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d0), 0xfb);
        // FB 03C9
        gbc.setState(0xa8a8, 0x8c9c, 0x1840, 0xb71b, 0x4feb, 0x3d8a, 0x1, 0x1);
        gbc.writeMem(0xa8a8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8c9c);
        EXPECT(gbc.pc(), 0xa8a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a8), 0xfb);
        // FB 03CA
        gbc.setState(0x2654, 0xf2c1, 0xa4e0, 0x19cc, 0x33bc, 0x18b0, 0x0, 0x0);
        gbc.writeMem(0x2654, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf2c1);
        EXPECT(gbc.pc(), 0x2655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 03CB
        gbc.setState(0x590c, 0x2200, 0x2990, 0x7989, 0x18, 0x2f0b, 0x0, 0x1);
        gbc.writeMem(0x590c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2200);
        EXPECT(gbc.pc(), 0x590d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03CC
        gbc.setState(0xb177, 0x1462, 0x8670, 0xdc99, 0x4dc3, 0x60ab, 0x1, 0x1);
        gbc.writeMem(0xb177, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1462);
        EXPECT(gbc.pc(), 0xb178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb177), 0xfb);
        // FB 03CD
        gbc.setState(0xa74f, 0xdbe8, 0x2ac0, 0x58e9, 0x33e8, 0xd78b, 0x0, 0x0);
        gbc.writeMem(0xa74f, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xdbe8);
        EXPECT(gbc.pc(), 0xa750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa74f), 0xfb);
        // FB 03CE
        gbc.setState(0xe83e, 0x2f99, 0xc9a0, 0x474d, 0x1484, 0xf4e5, 0x0, 0x1);
        gbc.writeMem(0xe83e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2f99);
        EXPECT(gbc.pc(), 0xe83f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe83e), 0xfb);
        // FB 03CF
        gbc.setState(0x1aea, 0x2093, 0xd90, 0x5d1e, 0x5d05, 0x87e3, 0x1, 0x1);
        gbc.writeMem(0x1aea, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2093);
        EXPECT(gbc.pc(), 0x1aeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03D0
        gbc.setState(0x51c3, 0x37d7, 0xbe10, 0x73f7, 0x3e8b, 0xeae5, 0x0, 0x1);
        gbc.writeMem(0x51c3, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x37d7);
        EXPECT(gbc.pc(), 0x51c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // FB 03D1
        gbc.setState(0x4b91, 0xadd6, 0xd1e0, 0xb2b6, 0x5082, 0xb3ed, 0x0, 0x0);
        gbc.writeMem(0x4b91, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xadd6);
        EXPECT(gbc.pc(), 0x4b92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 03D2
        gbc.setState(0x2892, 0x4ac, 0x59e0, 0x6ce2, 0xd6d4, 0xaee5, 0x0, 0x0);
        gbc.writeMem(0x2892, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x4ac);
        EXPECT(gbc.pc(), 0x2893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 03D3
        gbc.setState(0x22ec, 0xbb7c, 0xca40, 0xca71, 0x3f24, 0x89e0, 0x0, 0x0);
        gbc.writeMem(0x22ec, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xbb7c);
        EXPECT(gbc.pc(), 0x22ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03D4
        gbc.setState(0x8b7c, 0x5451, 0xcc10, 0xc2db, 0xab65, 0x2b0e, 0x0, 0x0);
        gbc.writeMem(0x8b7c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5451);
        EXPECT(gbc.pc(), 0x8b7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b7c), 0xfb);
        // FB 03D5
        gbc.setState(0xa0ac, 0x8972, 0x1250, 0xa0df, 0x6946, 0xe9ae, 0x0, 0x0);
        gbc.writeMem(0xa0ac, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8972);
        EXPECT(gbc.pc(), 0xa0ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ac), 0xfb);
        // FB 03D6
        gbc.setState(0xd247, 0xa00b, 0x3dc0, 0x5035, 0xe78e, 0x15b4, 0x1, 0x1);
        gbc.writeMem(0xd247, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa00b);
        EXPECT(gbc.pc(), 0xd248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd247), 0xfb);
        // FB 03D7
        gbc.setState(0xa5c, 0x3470, 0xccf0, 0xe7b2, 0xde33, 0xa4b0, 0x0, 0x0);
        gbc.writeMem(0xa5c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3470);
        EXPECT(gbc.pc(), 0xa5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03D8
        gbc.setState(0xe79a, 0xac54, 0xa700, 0xc60, 0x43d3, 0xc41, 0x1, 0x0);
        gbc.writeMem(0xe79a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xac54);
        EXPECT(gbc.pc(), 0xe79b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe79a), 0xfb);
        // FB 03D9
        gbc.setState(0x4ea8, 0x6ca4, 0x160, 0xd646, 0x302e, 0x66c, 0x1, 0x1);
        gbc.writeMem(0x4ea8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6ca4);
        EXPECT(gbc.pc(), 0x4ea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 03DA
        gbc.setState(0x787e, 0x165, 0x9700, 0x1ab4, 0x2d91, 0x1ace, 0x1, 0x0);
        gbc.writeMem(0x787e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x165);
        EXPECT(gbc.pc(), 0x787f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03DB
        gbc.setState(0xcfd5, 0x28dd, 0x7180, 0x64b8, 0xb23a, 0x9b15, 0x1, 0x1);
        gbc.writeMem(0xcfd5, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x28dd);
        EXPECT(gbc.pc(), 0xcfd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd5), 0xfb);
        // FB 03DC
        gbc.setState(0x2fab, 0x5849, 0xad60, 0x1c64, 0x69d9, 0x3c5a, 0x1, 0x1);
        gbc.writeMem(0x2fab, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5849);
        EXPECT(gbc.pc(), 0x2fac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 03DD
        gbc.setState(0x1bf7, 0xad6b, 0x5ef0, 0xc7eb, 0xc45, 0x18aa, 0x1, 0x0);
        gbc.writeMem(0x1bf7, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xad6b);
        EXPECT(gbc.pc(), 0x1bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03DE
        gbc.setState(0x1641, 0x182d, 0x4740, 0x2e8c, 0x2c24, 0xc354, 0x1, 0x0);
        gbc.writeMem(0x1641, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x182d);
        EXPECT(gbc.pc(), 0x1642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03DF
        gbc.setState(0x6ebf, 0x5c96, 0xd600, 0x9555, 0x23b3, 0xab28, 0x1, 0x0);
        gbc.writeMem(0x6ebf, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x5c96);
        EXPECT(gbc.pc(), 0x6ec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // FB 03E0
        gbc.setState(0x178c, 0x9b2d, 0xaf30, 0x63a0, 0x83c7, 0xe52a, 0x0, 0x1);
        gbc.writeMem(0x178c, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9b2d);
        EXPECT(gbc.pc(), 0x178d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // FB 03E1
        gbc.setState(0xb197, 0xb954, 0xf1a0, 0xa885, 0x3e8a, 0x5a5f, 0x1, 0x1);
        gbc.writeMem(0xb197, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb954);
        EXPECT(gbc.pc(), 0xb198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb197), 0xfb);
        // FB 03E2
        gbc.setState(0xe6ee, 0x1153, 0x8d10, 0xca06, 0xe8e3, 0x5434, 0x0, 0x0);
        gbc.writeMem(0xe6ee, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1153);
        EXPECT(gbc.pc(), 0xe6ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6ee), 0xfb);
        // FB 03E3
        gbc.setState(0xcfca, 0xb64b, 0xe800, 0x643c, 0x2095, 0xe4ee, 0x1, 0x0);
        gbc.writeMem(0xcfca, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb64b);
        EXPECT(gbc.pc(), 0xcfcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfca), 0xfb);
        // FB 03E4
        gbc.setState(0x318, 0x2842, 0x3be0, 0x886d, 0x20fe, 0x609d, 0x1, 0x0);
        gbc.writeMem(0x318, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2842);
        EXPECT(gbc.pc(), 0x319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // FB 03E5
        gbc.setState(0x87c2, 0x4882, 0x9150, 0xe15e, 0x97c1, 0x698e, 0x0, 0x0);
        gbc.writeMem(0x87c2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4882);
        EXPECT(gbc.pc(), 0x87c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87c2), 0xfb);
        // FB 03E6
        gbc.setState(0x8f55, 0x353, 0xfde0, 0x36ef, 0x8b10, 0x4690, 0x1, 0x1);
        gbc.writeMem(0x8f55, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x353);
        EXPECT(gbc.pc(), 0x8f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f55), 0xfb);
        // FB 03E7
        gbc.setState(0x2100, 0xe88f, 0xa990, 0xec2f, 0x956d, 0xee5, 0x1, 0x1);
        gbc.writeMem(0x2100, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe88f);
        EXPECT(gbc.pc(), 0x2101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
