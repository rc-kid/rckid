#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_b3)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_b3) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB B3 0000
        gbc.setState(0x25b5, 0x2b13, 0x7900, 0xbfb4, 0x65cb, 0xcdf7, 0x1, 0x1);
        gbc.writeMem(0x25b5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2b13);
        EXPECT(gbc.pc(), 0x25b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0001
        gbc.setState(0x9d74, 0x73ea, 0xa990, 0xd726, 0xc589, 0x1e5b, 0x0, 0x0);
        gbc.writeMem(0x9d74, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x73ea);
        EXPECT(gbc.pc(), 0x9d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d74), 0xcb);
        EXPECT(gbc.readMem(0x9d75), 0xb3);
        // CB B3 0002
        gbc.setState(0x631, 0xbfb0, 0xb860, 0xe975, 0xc597, 0x7c50, 0x0, 0x1);
        gbc.writeMem(0x631, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbfb0);
        EXPECT(gbc.pc(), 0x633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0003
        gbc.setState(0x3560, 0xbc16, 0xedb0, 0x6221, 0xf342, 0x922b, 0x0, 0x0);
        gbc.writeMem(0x3560, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xbc16);
        EXPECT(gbc.pc(), 0x3562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0004
        gbc.setState(0xfdc, 0x5257, 0xc580, 0x349a, 0x469a, 0xba31, 0x1, 0x0);
        gbc.writeMem(0xfdc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5257);
        EXPECT(gbc.pc(), 0xfde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0005
        gbc.setState(0xebe8, 0xf6a8, 0x78b0, 0xd201, 0xa6b8, 0x74f5, 0x0, 0x1);
        gbc.writeMem(0xebe8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf6a8);
        EXPECT(gbc.pc(), 0xebea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe8), 0xcb);
        EXPECT(gbc.readMem(0xebe9), 0xb3);
        // CB B3 0006
        gbc.setState(0x5a65, 0xdd8a, 0x9ee0, 0x70d2, 0x2546, 0x2f, 0x0, 0x0);
        gbc.writeMem(0x5a65, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xdd8a);
        EXPECT(gbc.pc(), 0x5a67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0007
        gbc.setState(0x3c4d, 0x350c, 0x7000, 0x87b8, 0x6478, 0x74f7, 0x0, 0x0);
        gbc.writeMem(0x3c4d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x350c);
        EXPECT(gbc.pc(), 0x3c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0008
        gbc.setState(0xe85c, 0x1817, 0x34b0, 0xfa71, 0xea3f, 0xa99e, 0x1, 0x0);
        gbc.writeMem(0xe85c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1817);
        EXPECT(gbc.pc(), 0xe85e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe85c), 0xcb);
        EXPECT(gbc.readMem(0xe85d), 0xb3);
        // CB B3 0009
        gbc.setState(0x91d3, 0xe0d4, 0x70, 0x1c2e, 0x2128, 0xac52, 0x0, 0x0);
        gbc.writeMem(0x91d3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe0d4);
        EXPECT(gbc.pc(), 0x91d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91d3), 0xcb);
        EXPECT(gbc.readMem(0x91d4), 0xb3);
        // CB B3 000A
        gbc.setState(0x207, 0xd303, 0x7120, 0xd1f3, 0x227a, 0x36e9, 0x0, 0x0);
        gbc.writeMem(0x207, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd303);
        EXPECT(gbc.pc(), 0x209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 000B
        gbc.setState(0xa24a, 0x5bfb, 0xa4e0, 0x20ce, 0xa49d, 0x3452, 0x1, 0x1);
        gbc.writeMem(0xa24a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5bfb);
        EXPECT(gbc.pc(), 0xa24c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa24a), 0xcb);
        EXPECT(gbc.readMem(0xa24b), 0xb3);
        // CB B3 000C
        gbc.setState(0x5da3, 0x1553, 0xa4c0, 0xd55d, 0xfc47, 0x4cda, 0x0, 0x0);
        gbc.writeMem(0x5da3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1553);
        EXPECT(gbc.pc(), 0x5da5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 000D
        gbc.setState(0xe718, 0x3c19, 0x1880, 0x74d6, 0xc989, 0x7e97, 0x0, 0x0);
        gbc.writeMem(0xe718, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3c19);
        EXPECT(gbc.pc(), 0xe71a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe718), 0xcb);
        EXPECT(gbc.readMem(0xe719), 0xb3);
        // CB B3 000E
        gbc.setState(0x1397, 0xbbcf, 0x94e0, 0x8be3, 0x70cc, 0xfcd0, 0x0, 0x1);
        gbc.writeMem(0x1397, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xbbcf);
        EXPECT(gbc.pc(), 0x1399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 000F
        gbc.setState(0xe83f, 0x48e8, 0x3130, 0x97bc, 0x43df, 0x1e83, 0x1, 0x1);
        gbc.writeMem(0xe83f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x48e8);
        EXPECT(gbc.pc(), 0xe841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe83f), 0xcb);
        EXPECT(gbc.readMem(0xe840), 0xb3);
        // CB B3 0010
        gbc.setState(0x3ec6, 0xbd78, 0x63a0, 0xfc7, 0xf696, 0x540d, 0x1, 0x1);
        gbc.writeMem(0x3ec6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xbd78);
        EXPECT(gbc.pc(), 0x3ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0012
        gbc.setState(0xb8cf, 0xed9b, 0x870, 0x6b66, 0x535f, 0xff2f, 0x1, 0x1);
        gbc.writeMem(0xb8cf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xed9b);
        EXPECT(gbc.pc(), 0xb8d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8cf), 0xcb);
        EXPECT(gbc.readMem(0xb8d0), 0xb3);
        // CB B3 0013
        gbc.setState(0x44ac, 0x7ebd, 0x83d0, 0xdcf8, 0xb39c, 0x924d, 0x0, 0x1);
        gbc.writeMem(0x44ac, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7ebd);
        EXPECT(gbc.pc(), 0x44ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0014
        gbc.setState(0x2225, 0xebe8, 0x6b10, 0xaa46, 0xc881, 0xb47d, 0x0, 0x0);
        gbc.writeMem(0x2225, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xebe8);
        EXPECT(gbc.pc(), 0x2227);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0015
        gbc.setState(0x4017, 0xb077, 0x6dc0, 0x9a64, 0x22c8, 0x7c56, 0x1, 0x0);
        gbc.writeMem(0x4017, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb077);
        EXPECT(gbc.pc(), 0x4019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0016
        gbc.setState(0x2867, 0xc49b, 0xc050, 0x3d64, 0x6b58, 0xc4ad, 0x0, 0x0);
        gbc.writeMem(0x2867, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc49b);
        EXPECT(gbc.pc(), 0x2869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0017
        gbc.setState(0xe765, 0x158e, 0xb570, 0x5f0b, 0xfe4b, 0x6fab, 0x1, 0x0);
        gbc.writeMem(0xe765, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x158e);
        EXPECT(gbc.pc(), 0xe767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe765), 0xcb);
        EXPECT(gbc.readMem(0xe766), 0xb3);
        // CB B3 0018
        gbc.setState(0x8fa6, 0xdd69, 0x960, 0x3cee, 0x70dc, 0xac57, 0x1, 0x1);
        gbc.writeMem(0x8fa6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xdd69);
        EXPECT(gbc.pc(), 0x8fa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa6), 0xcb);
        EXPECT(gbc.readMem(0x8fa7), 0xb3);
        // CB B3 0019
        gbc.setState(0x5af9, 0x3c1e, 0xa0f0, 0xbe77, 0xe28, 0xa4cd, 0x0, 0x1);
        gbc.writeMem(0x5af9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3c1e);
        EXPECT(gbc.pc(), 0x5afb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 001A
        gbc.setState(0x7521, 0xda35, 0xc0b0, 0x3296, 0xa898, 0xe254, 0x0, 0x1);
        gbc.writeMem(0x7521, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xda35);
        EXPECT(gbc.pc(), 0x7523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 001B
        gbc.setState(0x471b, 0x69cd, 0x1360, 0xcb16, 0x8fd9, 0xbe16, 0x1, 0x0);
        gbc.writeMem(0x471b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x69cd);
        EXPECT(gbc.pc(), 0x471d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 001C
        gbc.setState(0x8803, 0x377b, 0x5240, 0x1363, 0xd208, 0xd77f, 0x1, 0x0);
        gbc.writeMem(0x8803, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x377b);
        EXPECT(gbc.pc(), 0x8805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8803), 0xcb);
        EXPECT(gbc.readMem(0x8804), 0xb3);
        // CB B3 001D
        gbc.setState(0x2759, 0x976c, 0x8f00, 0x4d51, 0x2015, 0xe2cc, 0x1, 0x1);
        gbc.writeMem(0x2759, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x976c);
        EXPECT(gbc.pc(), 0x275b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 001E
        gbc.setState(0x20e3, 0x2e23, 0xbb60, 0x4c60, 0x4632, 0xdd8e, 0x1, 0x1);
        gbc.writeMem(0x20e3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x2e23);
        EXPECT(gbc.pc(), 0x20e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 001F
        gbc.setState(0x6128, 0x3fa7, 0x8050, 0x72bb, 0x5ccb, 0xcf30, 0x1, 0x0);
        gbc.writeMem(0x6128, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3fa7);
        EXPECT(gbc.pc(), 0x612a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0020
        gbc.setState(0x438a, 0x170f, 0xd8b0, 0xa0cb, 0xfd29, 0x6b41, 0x1, 0x1);
        gbc.writeMem(0x438a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x170f);
        EXPECT(gbc.pc(), 0x438c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0021
        gbc.setState(0x4272, 0x9e6, 0x3240, 0xa5c0, 0x2c86, 0xe6f0, 0x0, 0x1);
        gbc.writeMem(0x4272, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9e6);
        EXPECT(gbc.pc(), 0x4274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0022
        gbc.setState(0x1af0, 0x2ce2, 0x7110, 0x1ec4, 0xabc8, 0x2407, 0x1, 0x1);
        gbc.writeMem(0x1af0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2ce2);
        EXPECT(gbc.pc(), 0x1af2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0023
        gbc.setState(0x9ee2, 0x50da, 0xcad0, 0x6c6d, 0xf2d, 0x490, 0x0, 0x0);
        gbc.writeMem(0x9ee2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x50da);
        EXPECT(gbc.pc(), 0x9ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee2), 0xcb);
        EXPECT(gbc.readMem(0x9ee3), 0xb3);
        // CB B3 0024
        gbc.setState(0x8df0, 0xe431, 0xa790, 0xa947, 0xff2, 0xecf1, 0x1, 0x0);
        gbc.writeMem(0x8df0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe431);
        EXPECT(gbc.pc(), 0x8df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df0), 0xcb);
        EXPECT(gbc.readMem(0x8df1), 0xb3);
        // CB B3 0025
        gbc.setState(0x368a, 0x322b, 0xaf30, 0xd4af, 0x1d96, 0xd4eb, 0x0, 0x1);
        gbc.writeMem(0x368a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x322b);
        EXPECT(gbc.pc(), 0x368c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0026
        gbc.setState(0x9d16, 0x6934, 0x17f0, 0xbb51, 0x66f9, 0x41bc, 0x1, 0x1);
        gbc.writeMem(0x9d16, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6934);
        EXPECT(gbc.pc(), 0x9d18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d16), 0xcb);
        EXPECT(gbc.readMem(0x9d17), 0xb3);
        // CB B3 0027
        gbc.setState(0x3aea, 0x4f34, 0x70, 0xc43b, 0xcadd, 0xc064, 0x1, 0x1);
        gbc.writeMem(0x3aea, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4f34);
        EXPECT(gbc.pc(), 0x3aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0028
        gbc.setState(0x7413, 0x9d30, 0x1880, 0xc274, 0x7a7, 0x3ea2, 0x0, 0x1);
        gbc.writeMem(0x7413, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9d30);
        EXPECT(gbc.pc(), 0x7415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0029
        gbc.setState(0xa5e4, 0x7b2b, 0x49a0, 0x8431, 0xee67, 0x975f, 0x0, 0x0);
        gbc.writeMem(0xa5e4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7b2b);
        EXPECT(gbc.pc(), 0xa5e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e4), 0xcb);
        EXPECT(gbc.readMem(0xa5e5), 0xb3);
        // CB B3 002A
        gbc.setState(0x5873, 0x29d0, 0x72f0, 0x38db, 0x8954, 0x3602, 0x0, 0x0);
        gbc.writeMem(0x5873, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x29d0);
        EXPECT(gbc.pc(), 0x5875);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 002B
        gbc.setState(0xd6d2, 0x316c, 0xa9d0, 0x47ff, 0x6518, 0x731a, 0x1, 0x1);
        gbc.writeMem(0xd6d2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x316c);
        EXPECT(gbc.pc(), 0xd6d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6d2), 0xcb);
        EXPECT(gbc.readMem(0xd6d3), 0xb3);
        // CB B3 002C
        gbc.setState(0x8c88, 0x24ef, 0x3790, 0x86cf, 0x4128, 0x2304, 0x1, 0x1);
        gbc.writeMem(0x8c88, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x24ef);
        EXPECT(gbc.pc(), 0x8c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c88), 0xcb);
        EXPECT(gbc.readMem(0x8c89), 0xb3);
        // CB B3 002D
        gbc.setState(0xda5a, 0xf8f2, 0x1da0, 0xca57, 0x4ea6, 0xc18a, 0x0, 0x0);
        gbc.writeMem(0xda5a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf8f2);
        EXPECT(gbc.pc(), 0xda5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5a), 0xcb);
        EXPECT(gbc.readMem(0xda5b), 0xb3);
        // CB B3 002E
        gbc.setState(0x97af, 0xf8f0, 0x1350, 0xfcf2, 0xa62a, 0xeab, 0x1, 0x1);
        gbc.writeMem(0x97af, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf8f0);
        EXPECT(gbc.pc(), 0x97b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97af), 0xcb);
        EXPECT(gbc.readMem(0x97b0), 0xb3);
        // CB B3 002F
        gbc.setState(0x2dc0, 0x72bf, 0x4210, 0x83b3, 0x14d3, 0x3dd7, 0x0, 0x0);
        gbc.writeMem(0x2dc0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x72bf);
        EXPECT(gbc.pc(), 0x2dc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0030
        gbc.setState(0x3468, 0x8072, 0x4e90, 0xcfaf, 0x60b4, 0x5705, 0x1, 0x1);
        gbc.writeMem(0x3468, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8072);
        EXPECT(gbc.pc(), 0x346a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0031
        gbc.setState(0xce61, 0x8c3, 0x4240, 0x4f2a, 0x2051, 0xa4fa, 0x0, 0x1);
        gbc.writeMem(0xce61, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8c3);
        EXPECT(gbc.pc(), 0xce63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce61), 0xcb);
        EXPECT(gbc.readMem(0xce62), 0xb3);
        // CB B3 0032
        gbc.setState(0x3980, 0x2594, 0x6340, 0xadcb, 0x282e, 0xd734, 0x1, 0x1);
        gbc.writeMem(0x3980, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2594);
        EXPECT(gbc.pc(), 0x3982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0033
        gbc.setState(0xc8e1, 0x6551, 0x7c50, 0x9ed, 0x9a92, 0x5f7e, 0x0, 0x0);
        gbc.writeMem(0xc8e1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6551);
        EXPECT(gbc.pc(), 0xc8e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8e1), 0xcb);
        EXPECT(gbc.readMem(0xc8e2), 0xb3);
        // CB B3 0034
        gbc.setState(0x75f1, 0x4fa, 0x7bd0, 0xfcc3, 0x24dd, 0xcc2, 0x0, 0x0);
        gbc.writeMem(0x75f1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4fa);
        EXPECT(gbc.pc(), 0x75f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0035
        gbc.setState(0x38e7, 0x7b96, 0x38c0, 0xd24a, 0xaa5e, 0x7221, 0x0, 0x1);
        gbc.writeMem(0x38e7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7b96);
        EXPECT(gbc.pc(), 0x38e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0036
        gbc.setState(0xdb43, 0x9e36, 0xf8e0, 0xeae3, 0xe8cc, 0x4706, 0x0, 0x1);
        gbc.writeMem(0xdb43, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9e36);
        EXPECT(gbc.pc(), 0xdb45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb43), 0xcb);
        EXPECT(gbc.readMem(0xdb44), 0xb3);
        // CB B3 0038
        gbc.setState(0xeebe, 0x5251, 0x4130, 0xfe16, 0xb068, 0xf3aa, 0x0, 0x1);
        gbc.writeMem(0xeebe, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5251);
        EXPECT(gbc.pc(), 0xeec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeebe), 0xcb);
        EXPECT(gbc.readMem(0xeebf), 0xb3);
        // CB B3 0039
        gbc.setState(0x9d50, 0xe895, 0x1be0, 0x92c5, 0x9460, 0x42a2, 0x1, 0x1);
        gbc.writeMem(0x9d50, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xe895);
        EXPECT(gbc.pc(), 0x9d52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d50), 0xcb);
        EXPECT(gbc.readMem(0x9d51), 0xb3);
        // CB B3 003A
        gbc.setState(0x89d2, 0x97c1, 0x5420, 0xe6d1, 0xd88c, 0x8c6b, 0x1, 0x1);
        gbc.writeMem(0x89d2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x97c1);
        EXPECT(gbc.pc(), 0x89d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d2), 0xcb);
        EXPECT(gbc.readMem(0x89d3), 0xb3);
        // CB B3 003B
        gbc.setState(0xd4c1, 0x6ff2, 0x2bf0, 0x8fdf, 0xf5ba, 0xd6f0, 0x0, 0x1);
        gbc.writeMem(0xd4c1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6ff2);
        EXPECT(gbc.pc(), 0xd4c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4c1), 0xcb);
        EXPECT(gbc.readMem(0xd4c2), 0xb3);
        // CB B3 003C
        gbc.setState(0xe0a4, 0x4aae, 0xf350, 0x845d, 0xd473, 0xf39d, 0x0, 0x0);
        gbc.writeMem(0xe0a4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4aae);
        EXPECT(gbc.pc(), 0xe0a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a4), 0xcb);
        EXPECT(gbc.readMem(0xe0a5), 0xb3);
        // CB B3 003D
        gbc.setState(0x6a2e, 0x58ad, 0x8d20, 0x6283, 0x8623, 0xb961, 0x0, 0x0);
        gbc.writeMem(0x6a2e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x58ad);
        EXPECT(gbc.pc(), 0x6a30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 003E
        gbc.setState(0xa758, 0x71d, 0x1fb0, 0xfa62, 0x3ba8, 0x3e23, 0x1, 0x1);
        gbc.writeMem(0xa758, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x71d);
        EXPECT(gbc.pc(), 0xa75a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa758), 0xcb);
        EXPECT(gbc.readMem(0xa759), 0xb3);
        // CB B3 003F
        gbc.setState(0x21f9, 0x1cff, 0x3dc0, 0xcb61, 0xbb3a, 0xd055, 0x1, 0x1);
        gbc.writeMem(0x21f9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1cff);
        EXPECT(gbc.pc(), 0x21fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0040
        gbc.setState(0x1007, 0xf139, 0x9fd0, 0x49d6, 0x769e, 0xdb0f, 0x1, 0x0);
        gbc.writeMem(0x1007, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf139);
        EXPECT(gbc.pc(), 0x1009);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0041
        gbc.setState(0x30fc, 0x235a, 0xa10, 0x9906, 0xfe7a, 0x7d00, 0x1, 0x0);
        gbc.writeMem(0x30fc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x235a);
        EXPECT(gbc.pc(), 0x30fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0042
        gbc.setState(0x5907, 0x7e30, 0xb840, 0xfcef, 0xd6ed, 0x97af, 0x0, 0x0);
        gbc.writeMem(0x5907, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7e30);
        EXPECT(gbc.pc(), 0x5909);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0043
        gbc.setState(0x313b, 0xed72, 0x32b0, 0xa019, 0x7399, 0xc6a8, 0x0, 0x0);
        gbc.writeMem(0x313b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xed72);
        EXPECT(gbc.pc(), 0x313d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0044
        gbc.setState(0x9f21, 0x3c5c, 0xc600, 0xaa28, 0x62f1, 0xee8d, 0x1, 0x0);
        gbc.writeMem(0x9f21, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3c5c);
        EXPECT(gbc.pc(), 0x9f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f21), 0xcb);
        EXPECT(gbc.readMem(0x9f22), 0xb3);
        // CB B3 0045
        gbc.setState(0x66e3, 0x9b94, 0x6ef0, 0xdc42, 0xf816, 0x6280, 0x1, 0x1);
        gbc.writeMem(0x66e3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9b94);
        EXPECT(gbc.pc(), 0x66e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0046
        gbc.setState(0xdd6d, 0x6406, 0xe560, 0x35b5, 0x5d6c, 0xd13, 0x0, 0x0);
        gbc.writeMem(0xdd6d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6406);
        EXPECT(gbc.pc(), 0xdd6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6d), 0xcb);
        EXPECT(gbc.readMem(0xdd6e), 0xb3);
        // CB B3 0047
        gbc.setState(0x7400, 0xa121, 0x40c0, 0xdbe2, 0x9943, 0xce15, 0x1, 0x0);
        gbc.writeMem(0x7400, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa121);
        EXPECT(gbc.pc(), 0x7402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0048
        gbc.setState(0xef7e, 0xa139, 0x6870, 0xed05, 0x2045, 0x805d, 0x0, 0x1);
        gbc.writeMem(0xef7e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa139);
        EXPECT(gbc.pc(), 0xef80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef7e), 0xcb);
        EXPECT(gbc.readMem(0xef7f), 0xb3);
        // CB B3 0049
        gbc.setState(0x7768, 0xe54b, 0x13e0, 0x4fe3, 0x22b9, 0x3b07, 0x1, 0x0);
        gbc.writeMem(0x7768, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe54b);
        EXPECT(gbc.pc(), 0x776a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 004B
        gbc.setState(0x2563, 0xf085, 0xdc40, 0xcb3a, 0xcaf2, 0x17d4, 0x0, 0x1);
        gbc.writeMem(0x2563, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf085);
        EXPECT(gbc.pc(), 0x2565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 004C
        gbc.setState(0x7795, 0xe79f, 0xa980, 0x50c3, 0xc125, 0x3e3b, 0x0, 0x0);
        gbc.writeMem(0x7795, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe79f);
        EXPECT(gbc.pc(), 0x7797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 004D
        gbc.setState(0xc84c, 0x9b8b, 0xfa0, 0xdeca, 0xc7bf, 0x5e16, 0x1, 0x0);
        gbc.writeMem(0xc84c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9b8b);
        EXPECT(gbc.pc(), 0xc84e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc84c), 0xcb);
        EXPECT(gbc.readMem(0xc84d), 0xb3);
        // CB B3 004E
        gbc.setState(0x1c1a, 0x496e, 0xdf80, 0x6b4e, 0x600c, 0xd7c6, 0x1, 0x1);
        gbc.writeMem(0x1c1a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x496e);
        EXPECT(gbc.pc(), 0x1c1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 004F
        gbc.setState(0x85de, 0x68f0, 0x6b50, 0x7a13, 0xbb46, 0xd10e, 0x1, 0x0);
        gbc.writeMem(0x85de, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x68f0);
        EXPECT(gbc.pc(), 0x85e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85de), 0xcb);
        EXPECT(gbc.readMem(0x85df), 0xb3);
        // CB B3 0050
        gbc.setState(0xec1f, 0x8509, 0xe3a0, 0x42e6, 0xc425, 0x8a43, 0x1, 0x0);
        gbc.writeMem(0xec1f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8509);
        EXPECT(gbc.pc(), 0xec21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec1f), 0xcb);
        EXPECT(gbc.readMem(0xec20), 0xb3);
        // CB B3 0051
        gbc.setState(0x44a, 0xcbde, 0xd7e0, 0x618, 0x4ece, 0xfeca, 0x0, 0x0);
        gbc.writeMem(0x44a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xcbde);
        EXPECT(gbc.pc(), 0x44c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0053
        gbc.setState(0xa22a, 0xabb9, 0x2f20, 0xf3f8, 0x47bd, 0x22b0, 0x0, 0x1);
        gbc.writeMem(0xa22a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xabb9);
        EXPECT(gbc.pc(), 0xa22c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa22a), 0xcb);
        EXPECT(gbc.readMem(0xa22b), 0xb3);
        // CB B3 0054
        gbc.setState(0x75d2, 0xc925, 0x7b10, 0x398a, 0x6198, 0x9b28, 0x1, 0x0);
        gbc.writeMem(0x75d2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc925);
        EXPECT(gbc.pc(), 0x75d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0055
        gbc.setState(0xbbd6, 0xe0ec, 0x1fc0, 0xcde5, 0x68e5, 0x815, 0x0, 0x0);
        gbc.writeMem(0xbbd6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe0ec);
        EXPECT(gbc.pc(), 0xbbd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbd6), 0xcb);
        EXPECT(gbc.readMem(0xbbd7), 0xb3);
        // CB B3 0056
        gbc.setState(0xdc73, 0x9f05, 0xcf40, 0x85b, 0xc383, 0xfdab, 0x0, 0x0);
        gbc.writeMem(0xdc73, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9f05);
        EXPECT(gbc.pc(), 0xdc75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc73), 0xcb);
        EXPECT(gbc.readMem(0xdc74), 0xb3);
        // CB B3 0057
        gbc.setState(0x3a7e, 0x622c, 0xa5c0, 0xe1f4, 0xb5e2, 0x82fc, 0x1, 0x0);
        gbc.writeMem(0x3a7e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x622c);
        EXPECT(gbc.pc(), 0x3a80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0058
        gbc.setState(0x8082, 0xce5e, 0xe250, 0x1966, 0xa702, 0x2403, 0x0, 0x0);
        gbc.writeMem(0x8082, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xce5e);
        EXPECT(gbc.pc(), 0x8084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8082), 0xcb);
        EXPECT(gbc.readMem(0x8083), 0xb3);
        // CB B3 0059
        gbc.setState(0xc42, 0xf21b, 0x7070, 0x79dc, 0xdc5a, 0x94c5, 0x0, 0x0);
        gbc.writeMem(0xc42, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf21b);
        EXPECT(gbc.pc(), 0xc44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 005A
        gbc.setState(0xe915, 0xadd5, 0xd9f0, 0x633, 0x3c45, 0x360f, 0x0, 0x0);
        gbc.writeMem(0xe915, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xadd5);
        EXPECT(gbc.pc(), 0xe917);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe915), 0xcb);
        EXPECT(gbc.readMem(0xe916), 0xb3);
        // CB B3 005C
        gbc.setState(0x57bf, 0x8492, 0x58e0, 0x7686, 0x2112, 0xa193, 0x1, 0x0);
        gbc.writeMem(0x57bf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8492);
        EXPECT(gbc.pc(), 0x57c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 005D
        gbc.setState(0xc708, 0x2616, 0x6c40, 0x3588, 0x91c7, 0xf946, 0x0, 0x0);
        gbc.writeMem(0xc708, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2616);
        EXPECT(gbc.pc(), 0xc70a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc708), 0xcb);
        EXPECT(gbc.readMem(0xc709), 0xb3);
        // CB B3 005E
        gbc.setState(0x922e, 0x8541, 0x8810, 0x7322, 0x41c3, 0xc0fc, 0x0, 0x1);
        gbc.writeMem(0x922e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8541);
        EXPECT(gbc.pc(), 0x9230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x922e), 0xcb);
        EXPECT(gbc.readMem(0x922f), 0xb3);
        // CB B3 005F
        gbc.setState(0x4f41, 0x40a, 0x9600, 0x8e16, 0xeef7, 0x813b, 0x0, 0x0);
        gbc.writeMem(0x4f41, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x40a);
        EXPECT(gbc.pc(), 0x4f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0060
        gbc.setState(0x1c0d, 0xc3f5, 0x5060, 0x8d76, 0x3a15, 0x7555, 0x1, 0x1);
        gbc.writeMem(0x1c0d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc3f5);
        EXPECT(gbc.pc(), 0x1c0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0063
        gbc.setState(0x98e4, 0xda89, 0x1690, 0x98ef, 0xc782, 0x1506, 0x1, 0x0);
        gbc.writeMem(0x98e4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xda89);
        EXPECT(gbc.pc(), 0x98e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e4), 0xcb);
        EXPECT(gbc.readMem(0x98e5), 0xb3);
        // CB B3 0064
        gbc.setState(0x907f, 0xe624, 0xcf30, 0x70ed, 0xc987, 0x28d4, 0x0, 0x0);
        gbc.writeMem(0x907f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe624);
        EXPECT(gbc.pc(), 0x9081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x907f), 0xcb);
        EXPECT(gbc.readMem(0x9080), 0xb3);
        // CB B3 0065
        gbc.setState(0xc205, 0x7535, 0x1db0, 0xb073, 0x3386, 0x34fb, 0x0, 0x0);
        gbc.writeMem(0xc205, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7535);
        EXPECT(gbc.pc(), 0xc207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc205), 0xcb);
        EXPECT(gbc.readMem(0xc206), 0xb3);
        // CB B3 0066
        gbc.setState(0xbdb5, 0x5d54, 0xac50, 0x8801, 0xfda9, 0xb98f, 0x0, 0x0);
        gbc.writeMem(0xbdb5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5d54);
        EXPECT(gbc.pc(), 0xbdb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdb5), 0xcb);
        EXPECT(gbc.readMem(0xbdb6), 0xb3);
        // CB B3 0067
        gbc.setState(0xc4eb, 0x83d2, 0x7e50, 0x188d, 0xed88, 0x5000, 0x1, 0x0);
        gbc.writeMem(0xc4eb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x83d2);
        EXPECT(gbc.pc(), 0xc4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4eb), 0xcb);
        EXPECT(gbc.readMem(0xc4ec), 0xb3);
        // CB B3 0068
        gbc.setState(0xc94b, 0x4344, 0x1410, 0x5f9e, 0x1ed1, 0xee28, 0x1, 0x1);
        gbc.writeMem(0xc94b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4344);
        EXPECT(gbc.pc(), 0xc94d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc94b), 0xcb);
        EXPECT(gbc.readMem(0xc94c), 0xb3);
        // CB B3 0069
        gbc.setState(0x98cf, 0xe780, 0x8460, 0xdcdf, 0x3db, 0xb5da, 0x1, 0x0);
        gbc.writeMem(0x98cf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe780);
        EXPECT(gbc.pc(), 0x98d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98cf), 0xcb);
        EXPECT(gbc.readMem(0x98d0), 0xb3);
        // CB B3 006A
        gbc.setState(0x6c8f, 0xa2aa, 0xbfc0, 0xfdf9, 0xbf11, 0x1764, 0x0, 0x0);
        gbc.writeMem(0x6c8f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa2aa);
        EXPECT(gbc.pc(), 0x6c91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 006B
        gbc.setState(0xab35, 0x6bb9, 0x2e80, 0x6273, 0xe19e, 0x634d, 0x0, 0x1);
        gbc.writeMem(0xab35, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6bb9);
        EXPECT(gbc.pc(), 0xab37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab35), 0xcb);
        EXPECT(gbc.readMem(0xab36), 0xb3);
        // CB B3 006C
        gbc.setState(0x8889, 0x3665, 0xc9b0, 0xc0db, 0xb121, 0x59ec, 0x0, 0x0);
        gbc.writeMem(0x8889, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3665);
        EXPECT(gbc.pc(), 0x888b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8889), 0xcb);
        EXPECT(gbc.readMem(0x888a), 0xb3);
        // CB B3 006D
        gbc.setState(0xd633, 0xa360, 0x6500, 0xa610, 0x432e, 0xb8bc, 0x1, 0x0);
        gbc.writeMem(0xd633, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa360);
        EXPECT(gbc.pc(), 0xd635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd633), 0xcb);
        EXPECT(gbc.readMem(0xd634), 0xb3);
        // CB B3 006E
        gbc.setState(0xa9f3, 0x4a79, 0x6b90, 0xe2a9, 0xd68a, 0x8128, 0x0, 0x1);
        gbc.writeMem(0xa9f3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4a79);
        EXPECT(gbc.pc(), 0xa9f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9f3), 0xcb);
        EXPECT(gbc.readMem(0xa9f4), 0xb3);
        // CB B3 006F
        gbc.setState(0x12d7, 0x3a37, 0x5c40, 0x8786, 0x26fa, 0xa5a6, 0x1, 0x1);
        gbc.writeMem(0x12d7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3a37);
        EXPECT(gbc.pc(), 0x12d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0070
        gbc.setState(0x6f0f, 0xf07b, 0xcb70, 0x9014, 0x10af, 0xfb52, 0x1, 0x0);
        gbc.writeMem(0x6f0f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf07b);
        EXPECT(gbc.pc(), 0x6f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0071
        gbc.setState(0x3f, 0x28dc, 0x9880, 0x7c02, 0xb89, 0x4eee, 0x1, 0x0);
        gbc.writeMem(0x3f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x28dc);
        EXPECT(gbc.pc(), 0x41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0072
        gbc.setState(0x9efe, 0x255b, 0xbbb0, 0x209d, 0xb411, 0x60d, 0x1, 0x1);
        gbc.writeMem(0x9efe, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x255b);
        EXPECT(gbc.pc(), 0x9f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9efe), 0xcb);
        EXPECT(gbc.readMem(0x9eff), 0xb3);
        // CB B3 0073
        gbc.setState(0x2af5, 0xce3c, 0x2d00, 0x38bd, 0xc796, 0xc329, 0x1, 0x1);
        gbc.writeMem(0x2af5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xce3c);
        EXPECT(gbc.pc(), 0x2af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0074
        gbc.setState(0xae7e, 0x1aaa, 0x57e0, 0x8b08, 0xda7e, 0xc30, 0x1, 0x0);
        gbc.writeMem(0xae7e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1aaa);
        EXPECT(gbc.pc(), 0xae80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7e), 0xcb);
        EXPECT(gbc.readMem(0xae7f), 0xb3);
        // CB B3 0075
        gbc.setState(0xdc6c, 0x8647, 0xd6a0, 0xe0df, 0xaf2, 0x2d31, 0x1, 0x0);
        gbc.writeMem(0xdc6c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8647);
        EXPECT(gbc.pc(), 0xdc6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc6c), 0xcb);
        EXPECT(gbc.readMem(0xdc6d), 0xb3);
        // CB B3 0076
        gbc.setState(0x1eeb, 0xd543, 0x6ea0, 0x7e68, 0x4432, 0x215, 0x1, 0x0);
        gbc.writeMem(0x1eeb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd543);
        EXPECT(gbc.pc(), 0x1eed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0077
        gbc.setState(0xbe6e, 0x1040, 0x6a50, 0x2a8a, 0x2b24, 0xc37c, 0x0, 0x1);
        gbc.writeMem(0xbe6e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1040);
        EXPECT(gbc.pc(), 0xbe70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe6e), 0xcb);
        EXPECT(gbc.readMem(0xbe6f), 0xb3);
        // CB B3 0078
        gbc.setState(0x400c, 0x87bc, 0x2ea0, 0xbfd6, 0xa049, 0xe324, 0x1, 0x1);
        gbc.writeMem(0x400c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x87bc);
        EXPECT(gbc.pc(), 0x400e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0079
        gbc.setState(0x17f4, 0xc9d3, 0x19a0, 0x8a05, 0x8518, 0xa83c, 0x0, 0x1);
        gbc.writeMem(0x17f4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc9d3);
        EXPECT(gbc.pc(), 0x17f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 007A
        gbc.setState(0xada5, 0x40ff, 0x3540, 0x8c1, 0x88d7, 0x4eb8, 0x0, 0x1);
        gbc.writeMem(0xada5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x40ff);
        EXPECT(gbc.pc(), 0xada7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada5), 0xcb);
        EXPECT(gbc.readMem(0xada6), 0xb3);
        // CB B3 007B
        gbc.setState(0xb393, 0x929b, 0x56f0, 0xa04f, 0x1db, 0x2a46, 0x1, 0x1);
        gbc.writeMem(0xb393, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x929b);
        EXPECT(gbc.pc(), 0xb395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb393), 0xcb);
        EXPECT(gbc.readMem(0xb394), 0xb3);
        // CB B3 007C
        gbc.setState(0x5238, 0xef86, 0xad10, 0x8384, 0xe691, 0xb938, 0x1, 0x1);
        gbc.writeMem(0x5238, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xef86);
        EXPECT(gbc.pc(), 0x523a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 007D
        gbc.setState(0xa2eb, 0x5a82, 0x67a0, 0xfdc8, 0x4bd, 0xaeb4, 0x0, 0x1);
        gbc.writeMem(0xa2eb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5a82);
        EXPECT(gbc.pc(), 0xa2ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2eb), 0xcb);
        EXPECT(gbc.readMem(0xa2ec), 0xb3);
        // CB B3 007E
        gbc.setState(0x4e77, 0x86b6, 0xd500, 0x84, 0x7678, 0xd7b9, 0x1, 0x0);
        gbc.writeMem(0x4e77, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x86b6);
        EXPECT(gbc.pc(), 0x4e79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 007F
        gbc.setState(0xc2ba, 0xc0d5, 0x6820, 0x5c77, 0xdc7c, 0x916e, 0x1, 0x1);
        gbc.writeMem(0xc2ba, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc0d5);
        EXPECT(gbc.pc(), 0xc2bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ba), 0xcb);
        EXPECT(gbc.readMem(0xc2bb), 0xb3);
        // CB B3 0080
        gbc.setState(0x4093, 0xa6e3, 0xb0b0, 0x620b, 0xc826, 0x12a, 0x1, 0x1);
        gbc.writeMem(0x4093, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa6e3);
        EXPECT(gbc.pc(), 0x4095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0081
        gbc.setState(0xa033, 0x384a, 0x1b20, 0xc186, 0xdf95, 0xde95, 0x0, 0x0);
        gbc.writeMem(0xa033, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x384a);
        EXPECT(gbc.pc(), 0xa035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa033), 0xcb);
        EXPECT(gbc.readMem(0xa034), 0xb3);
        // CB B3 0082
        gbc.setState(0x23f7, 0xea35, 0xafd0, 0x7ff8, 0xfa7b, 0x86e1, 0x0, 0x1);
        gbc.writeMem(0x23f7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xea35);
        EXPECT(gbc.pc(), 0x23f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0083
        gbc.setState(0xda34, 0xb5b, 0x2f20, 0x1b80, 0xeaa, 0x45b7, 0x0, 0x0);
        gbc.writeMem(0xda34, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb5b);
        EXPECT(gbc.pc(), 0xda36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda34), 0xcb);
        EXPECT(gbc.readMem(0xda35), 0xb3);
        // CB B3 0084
        gbc.setState(0x5af3, 0xcbef, 0xdf80, 0x41a, 0x9b, 0x816, 0x0, 0x1);
        gbc.writeMem(0x5af3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xcbef);
        EXPECT(gbc.pc(), 0x5af5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0085
        gbc.setState(0xdec3, 0x243b, 0x3020, 0x1095, 0x5e9a, 0xd5d4, 0x1, 0x0);
        gbc.writeMem(0xdec3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x243b);
        EXPECT(gbc.pc(), 0xdec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdec3), 0xcb);
        EXPECT(gbc.readMem(0xdec4), 0xb3);
        // CB B3 0086
        gbc.setState(0x679c, 0x1ff6, 0x72c0, 0xa410, 0x82c0, 0x486a, 0x0, 0x0);
        gbc.writeMem(0x679c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1ff6);
        EXPECT(gbc.pc(), 0x679e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0087
        gbc.setState(0xac6, 0x683, 0x4c80, 0x3a69, 0x620, 0xe07b, 0x1, 0x1);
        gbc.writeMem(0xac6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x683);
        EXPECT(gbc.pc(), 0xac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0088
        gbc.setState(0x46a7, 0x13e1, 0xe8f0, 0x6aa6, 0x38bb, 0x91dc, 0x1, 0x0);
        gbc.writeMem(0x46a7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x13e1);
        EXPECT(gbc.pc(), 0x46a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0089
        gbc.setState(0x9382, 0xc61b, 0xf6a0, 0x5d56, 0x27fd, 0x8fe1, 0x1, 0x0);
        gbc.writeMem(0x9382, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc61b);
        EXPECT(gbc.pc(), 0x9384);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9382), 0xcb);
        EXPECT(gbc.readMem(0x9383), 0xb3);
        // CB B3 008A
        gbc.setState(0x63dc, 0x5436, 0x73c0, 0x1134, 0x55af, 0x94dc, 0x0, 0x0);
        gbc.writeMem(0x63dc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5436);
        EXPECT(gbc.pc(), 0x63de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 008B
        gbc.setState(0x559d, 0x7e84, 0xe7d0, 0x891, 0x8efd, 0x369c, 0x1, 0x0);
        gbc.writeMem(0x559d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7e84);
        EXPECT(gbc.pc(), 0x559f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 008C
        gbc.setState(0x1f67, 0x137a, 0x71f0, 0xf685, 0x159e, 0xb51a, 0x1, 0x1);
        gbc.writeMem(0x1f67, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x137a);
        EXPECT(gbc.pc(), 0x1f69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 008D
        gbc.setState(0x98eb, 0x5877, 0x53f0, 0x5fab, 0x8866, 0x1386, 0x1, 0x0);
        gbc.writeMem(0x98eb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5877);
        EXPECT(gbc.pc(), 0x98ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98eb), 0xcb);
        EXPECT(gbc.readMem(0x98ec), 0xb3);
        // CB B3 008E
        gbc.setState(0xec87, 0xef1, 0xa870, 0xd31b, 0xae42, 0xb84b, 0x1, 0x0);
        gbc.writeMem(0xec87, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xef1);
        EXPECT(gbc.pc(), 0xec89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec87), 0xcb);
        EXPECT(gbc.readMem(0xec88), 0xb3);
        // CB B3 008F
        gbc.setState(0x527a, 0x48fb, 0xdf10, 0x211, 0xed5, 0x8455, 0x0, 0x0);
        gbc.writeMem(0x527a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x48fb);
        EXPECT(gbc.pc(), 0x527c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0090
        gbc.setState(0x18a, 0xc72e, 0x7cc0, 0x51b9, 0x6b21, 0x975c, 0x0, 0x1);
        gbc.writeMem(0x18a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc72e);
        EXPECT(gbc.pc(), 0x18c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0091
        gbc.setState(0xba25, 0x1663, 0xd30, 0x739e, 0xb957, 0xe4fc, 0x1, 0x0);
        gbc.writeMem(0xba25, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1663);
        EXPECT(gbc.pc(), 0xba27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba25), 0xcb);
        EXPECT(gbc.readMem(0xba26), 0xb3);
        // CB B3 0092
        gbc.setState(0xeff8, 0x98d2, 0x89d0, 0xab84, 0xaca7, 0xfd51, 0x1, 0x0);
        gbc.writeMem(0xeff8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x98d2);
        EXPECT(gbc.pc(), 0xeffa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeff8), 0xcb);
        EXPECT(gbc.readMem(0xeff9), 0xb3);
        // CB B3 0093
        gbc.setState(0xb19c, 0xb33d, 0xc570, 0x6650, 0x1cd3, 0x6fd8, 0x1, 0x0);
        gbc.writeMem(0xb19c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb33d);
        EXPECT(gbc.pc(), 0xb19e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19c), 0xcb);
        EXPECT(gbc.readMem(0xb19d), 0xb3);
        // CB B3 0094
        gbc.setState(0x400, 0x2cd3, 0x320, 0x40d4, 0x1597, 0x8a07, 0x1, 0x1);
        gbc.writeMem(0x400, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2cd3);
        EXPECT(gbc.pc(), 0x402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0095
        gbc.setState(0xae0b, 0x2e72, 0x3200, 0x47ae, 0x48fb, 0xbac3, 0x0, 0x0);
        gbc.writeMem(0xae0b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2e72);
        EXPECT(gbc.pc(), 0xae0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae0b), 0xcb);
        EXPECT(gbc.readMem(0xae0c), 0xb3);
        // CB B3 0096
        gbc.setState(0xe0b3, 0x7056, 0xf870, 0xedbf, 0x532f, 0x49f0, 0x0, 0x1);
        gbc.writeMem(0xe0b3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7056);
        EXPECT(gbc.pc(), 0xe0b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0b3), 0xcb);
        EXPECT(gbc.readMem(0xe0b4), 0xb3);
        // CB B3 0097
        gbc.setState(0x71a1, 0x1ebe, 0x7480, 0x7e14, 0x8092, 0x3167, 0x1, 0x0);
        gbc.writeMem(0x71a1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1ebe);
        EXPECT(gbc.pc(), 0x71a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0098
        gbc.setState(0xd5b8, 0xc46b, 0x12c0, 0x51, 0x1df8, 0x732c, 0x0, 0x0);
        gbc.writeMem(0xd5b8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc46b);
        EXPECT(gbc.pc(), 0xd5ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b8), 0xcb);
        EXPECT(gbc.readMem(0xd5b9), 0xb3);
        // CB B3 0099
        gbc.setState(0x3620, 0x9c3d, 0x5100, 0xab76, 0x62ed, 0x6a28, 0x1, 0x1);
        gbc.writeMem(0x3620, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9c3d);
        EXPECT(gbc.pc(), 0x3622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 009A
        gbc.setState(0xcb32, 0x103f, 0xc000, 0xf720, 0x89f8, 0xda6e, 0x0, 0x0);
        gbc.writeMem(0xcb32, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x103f);
        EXPECT(gbc.pc(), 0xcb34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb32), 0xcb);
        EXPECT(gbc.readMem(0xcb33), 0xb3);
        // CB B3 009B
        gbc.setState(0x852e, 0x77ed, 0x23e0, 0x1ad, 0x19e1, 0x5708, 0x1, 0x1);
        gbc.writeMem(0x852e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x77ed);
        EXPECT(gbc.pc(), 0x8530);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x852e), 0xcb);
        EXPECT(gbc.readMem(0x852f), 0xb3);
        // CB B3 009C
        gbc.setState(0x24a, 0xc870, 0x9270, 0x485c, 0xd99b, 0x8961, 0x0, 0x0);
        gbc.writeMem(0x24a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc870);
        EXPECT(gbc.pc(), 0x24c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 009D
        gbc.setState(0x9f1a, 0xd195, 0xd5c0, 0x1a0d, 0x9331, 0x1491, 0x1, 0x1);
        gbc.writeMem(0x9f1a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd195);
        EXPECT(gbc.pc(), 0x9f1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f1a), 0xcb);
        EXPECT(gbc.readMem(0x9f1b), 0xb3);
        // CB B3 009E
        gbc.setState(0x81b4, 0x4398, 0x8350, 0x1922, 0x963b, 0xd622, 0x1, 0x1);
        gbc.writeMem(0x81b4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4398);
        EXPECT(gbc.pc(), 0x81b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81b4), 0xcb);
        EXPECT(gbc.readMem(0x81b5), 0xb3);
        // CB B3 009F
        gbc.setState(0xb0bf, 0x1845, 0x8130, 0xa53f, 0x765c, 0xd248, 0x0, 0x0);
        gbc.writeMem(0xb0bf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1845);
        EXPECT(gbc.pc(), 0xb0c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0bf), 0xcb);
        EXPECT(gbc.readMem(0xb0c0), 0xb3);
        // CB B3 00A0
        gbc.setState(0x1c22, 0xb882, 0xc8d0, 0xe0e4, 0xf978, 0xb331, 0x0, 0x1);
        gbc.writeMem(0x1c22, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb882);
        EXPECT(gbc.pc(), 0x1c24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00A1
        gbc.setState(0x4037, 0xa6c7, 0x84c0, 0xdf0a, 0x14c6, 0xafc4, 0x1, 0x1);
        gbc.writeMem(0x4037, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa6c7);
        EXPECT(gbc.pc(), 0x4039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00A2
        gbc.setState(0xd078, 0xde34, 0x5680, 0x7b9e, 0x18a0, 0x306d, 0x1, 0x1);
        gbc.writeMem(0xd078, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xde34);
        EXPECT(gbc.pc(), 0xd07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd078), 0xcb);
        EXPECT(gbc.readMem(0xd079), 0xb3);
        // CB B3 00A3
        gbc.setState(0x85d4, 0xb87d, 0x1f40, 0x7f65, 0x3e83, 0xc4c7, 0x1, 0x0);
        gbc.writeMem(0x85d4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb87d);
        EXPECT(gbc.pc(), 0x85d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85d4), 0xcb);
        EXPECT(gbc.readMem(0x85d5), 0xb3);
        // CB B3 00A4
        gbc.setState(0xaaea, 0x6787, 0xd3c0, 0xb337, 0xe690, 0x9718, 0x0, 0x0);
        gbc.writeMem(0xaaea, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6787);
        EXPECT(gbc.pc(), 0xaaec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaea), 0xcb);
        EXPECT(gbc.readMem(0xaaeb), 0xb3);
        // CB B3 00A5
        gbc.setState(0xdd45, 0x28f5, 0xee80, 0x2f4d, 0xcb6c, 0xb125, 0x0, 0x0);
        gbc.writeMem(0xdd45, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x28f5);
        EXPECT(gbc.pc(), 0xdd47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd45), 0xcb);
        EXPECT(gbc.readMem(0xdd46), 0xb3);
        // CB B3 00A7
        gbc.setState(0x863b, 0xc98e, 0x5c70, 0x95b8, 0xb008, 0xa746, 0x0, 0x1);
        gbc.writeMem(0x863b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc98e);
        EXPECT(gbc.pc(), 0x863d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863b), 0xcb);
        EXPECT(gbc.readMem(0x863c), 0xb3);
        // CB B3 00A8
        gbc.setState(0x23cd, 0x3c0f, 0x7b10, 0xad1, 0x35a5, 0x4341, 0x1, 0x1);
        gbc.writeMem(0x23cd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3c0f);
        EXPECT(gbc.pc(), 0x23cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00A9
        gbc.setState(0x8dc8, 0xac08, 0xca30, 0x9190, 0xc2b7, 0x8500, 0x0, 0x1);
        gbc.writeMem(0x8dc8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xac08);
        EXPECT(gbc.pc(), 0x8dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dc8), 0xcb);
        EXPECT(gbc.readMem(0x8dc9), 0xb3);
        // CB B3 00AA
        gbc.setState(0x646, 0x9a0d, 0x4a50, 0x7c80, 0x5488, 0x3a18, 0x0, 0x0);
        gbc.writeMem(0x646, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9a0d);
        EXPECT(gbc.pc(), 0x648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00AB
        gbc.setState(0xedb8, 0x3cef, 0xc9a0, 0xc352, 0x5ed1, 0x933b, 0x0, 0x0);
        gbc.writeMem(0xedb8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3cef);
        EXPECT(gbc.pc(), 0xedba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedb8), 0xcb);
        EXPECT(gbc.readMem(0xedb9), 0xb3);
        // CB B3 00AC
        gbc.setState(0x56c5, 0x9c52, 0x2750, 0x960a, 0x69a9, 0x5e31, 0x1, 0x0);
        gbc.writeMem(0x56c5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9c52);
        EXPECT(gbc.pc(), 0x56c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00AD
        gbc.setState(0xcab2, 0xb8b, 0x7310, 0xa3cc, 0xadb8, 0x15ae, 0x1, 0x0);
        gbc.writeMem(0xcab2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb8b);
        EXPECT(gbc.pc(), 0xcab4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcab2), 0xcb);
        EXPECT(gbc.readMem(0xcab3), 0xb3);
        // CB B3 00AE
        gbc.setState(0xdcbf, 0xfd70, 0xf20, 0x2d12, 0x7a6f, 0x9a58, 0x1, 0x0);
        gbc.writeMem(0xdcbf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xfd70);
        EXPECT(gbc.pc(), 0xdcc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcbf), 0xcb);
        EXPECT(gbc.readMem(0xdcc0), 0xb3);
        // CB B3 00AF
        gbc.setState(0x4a5e, 0x4b12, 0x29a0, 0xc210, 0x5868, 0x5c9c, 0x1, 0x0);
        gbc.writeMem(0x4a5e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4b12);
        EXPECT(gbc.pc(), 0x4a60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00B0
        gbc.setState(0x6c83, 0x763b, 0x74d0, 0x9aa7, 0xe254, 0x75aa, 0x1, 0x1);
        gbc.writeMem(0x6c83, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x763b);
        EXPECT(gbc.pc(), 0x6c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00B1
        gbc.setState(0xb8b0, 0xc054, 0x51d0, 0x93d5, 0x67b2, 0x9706, 0x1, 0x1);
        gbc.writeMem(0xb8b0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc054);
        EXPECT(gbc.pc(), 0xb8b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8b0), 0xcb);
        EXPECT(gbc.readMem(0xb8b1), 0xb3);
        // CB B3 00B2
        gbc.setState(0x9309, 0x5cff, 0x9a50, 0xb386, 0xa85a, 0xf1c7, 0x0, 0x1);
        gbc.writeMem(0x9309, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5cff);
        EXPECT(gbc.pc(), 0x930b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9309), 0xcb);
        EXPECT(gbc.readMem(0x930a), 0xb3);
        // CB B3 00B4
        gbc.setState(0x56f8, 0x3d1b, 0xb3e0, 0xf821, 0x18db, 0xd95f, 0x1, 0x1);
        gbc.writeMem(0x56f8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3d1b);
        EXPECT(gbc.pc(), 0x56fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00B5
        gbc.setState(0x72c8, 0xd600, 0xe020, 0xc9ab, 0xba99, 0xba70, 0x1, 0x0);
        gbc.writeMem(0x72c8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd600);
        EXPECT(gbc.pc(), 0x72ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00B6
        gbc.setState(0x94e2, 0x2eb2, 0xe520, 0x5397, 0x91ef, 0xadba, 0x1, 0x0);
        gbc.writeMem(0x94e2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2eb2);
        EXPECT(gbc.pc(), 0x94e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e2), 0xcb);
        EXPECT(gbc.readMem(0x94e3), 0xb3);
        // CB B3 00B7
        gbc.setState(0xa891, 0xa6e1, 0xefc0, 0x164a, 0x1380, 0xdb14, 0x0, 0x1);
        gbc.writeMem(0xa891, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa6e1);
        EXPECT(gbc.pc(), 0xa893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa891), 0xcb);
        EXPECT(gbc.readMem(0xa892), 0xb3);
        // CB B3 00B8
        gbc.setState(0xb40c, 0x6d46, 0x2740, 0x158, 0x329b, 0x5653, 0x0, 0x1);
        gbc.writeMem(0xb40c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6d46);
        EXPECT(gbc.pc(), 0xb40e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb40c), 0xcb);
        EXPECT(gbc.readMem(0xb40d), 0xb3);
        // CB B3 00B9
        gbc.setState(0x449c, 0x4ed3, 0x2580, 0x5f6e, 0x46a3, 0x133, 0x1, 0x1);
        gbc.writeMem(0x449c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4ed3);
        EXPECT(gbc.pc(), 0x449e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00BA
        gbc.setState(0x213a, 0xab8b, 0xcc50, 0xf0e4, 0xd7f6, 0xfb4d, 0x0, 0x0);
        gbc.writeMem(0x213a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xab8b);
        EXPECT(gbc.pc(), 0x213c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00BB
        gbc.setState(0xce41, 0xc7f6, 0x7a90, 0xcb4e, 0xcbf9, 0x12dd, 0x1, 0x1);
        gbc.writeMem(0xce41, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc7f6);
        EXPECT(gbc.pc(), 0xce43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce41), 0xcb);
        EXPECT(gbc.readMem(0xce42), 0xb3);
        // CB B3 00BC
        gbc.setState(0x1f3e, 0xeef1, 0x5fa0, 0xcfac, 0x26a9, 0xdc9c, 0x1, 0x1);
        gbc.writeMem(0x1f3e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xeef1);
        EXPECT(gbc.pc(), 0x1f40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00BD
        gbc.setState(0x4bf8, 0x1594, 0xc300, 0x3b03, 0x533c, 0xa8a5, 0x1, 0x0);
        gbc.writeMem(0x4bf8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x1594);
        EXPECT(gbc.pc(), 0x4bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00BE
        gbc.setState(0xdd66, 0xfc16, 0x4270, 0x3ced, 0xad96, 0x840c, 0x1, 0x0);
        gbc.writeMem(0xdd66, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfc16);
        EXPECT(gbc.pc(), 0xdd68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd66), 0xcb);
        EXPECT(gbc.readMem(0xdd67), 0xb3);
        // CB B3 00BF
        gbc.setState(0xb6df, 0x8743, 0x5cb0, 0x8da6, 0x94c1, 0xb591, 0x1, 0x1);
        gbc.writeMem(0xb6df, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8743);
        EXPECT(gbc.pc(), 0xb6e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6df), 0xcb);
        EXPECT(gbc.readMem(0xb6e0), 0xb3);
        // CB B3 00C0
        gbc.setState(0xe556, 0x2e8b, 0x100, 0xca34, 0x1499, 0xf2d5, 0x0, 0x0);
        gbc.writeMem(0xe556, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2e8b);
        EXPECT(gbc.pc(), 0xe558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe556), 0xcb);
        EXPECT(gbc.readMem(0xe557), 0xb3);
        // CB B3 00C2
        gbc.setState(0x691, 0x4ab8, 0xf790, 0xfab6, 0xcc64, 0x61f8, 0x1, 0x1);
        gbc.writeMem(0x691, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4ab8);
        EXPECT(gbc.pc(), 0x693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00C3
        gbc.setState(0x63ed, 0xb426, 0x53b0, 0x78db, 0xea85, 0x8462, 0x1, 0x1);
        gbc.writeMem(0x63ed, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb426);
        EXPECT(gbc.pc(), 0x63ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00C4
        gbc.setState(0x84b8, 0x44f7, 0x82d0, 0x47da, 0x8b4d, 0xf1a3, 0x1, 0x1);
        gbc.writeMem(0x84b8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x44f7);
        EXPECT(gbc.pc(), 0x84ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b8), 0xcb);
        EXPECT(gbc.readMem(0x84b9), 0xb3);
        // CB B3 00C5
        gbc.setState(0x4c7d, 0x25d0, 0xe720, 0xc7a4, 0x23fa, 0xb6c8, 0x0, 0x0);
        gbc.writeMem(0x4c7d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x25d0);
        EXPECT(gbc.pc(), 0x4c7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00C7
        gbc.setState(0xba2b, 0x7301, 0xdcd0, 0x3661, 0x3894, 0x90c2, 0x0, 0x1);
        gbc.writeMem(0xba2b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7301);
        EXPECT(gbc.pc(), 0xba2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba2b), 0xcb);
        EXPECT(gbc.readMem(0xba2c), 0xb3);
        // CB B3 00C8
        gbc.setState(0x1ed1, 0xf7f7, 0x75d0, 0x17d0, 0xd7cb, 0xf346, 0x1, 0x1);
        gbc.writeMem(0x1ed1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf7f7);
        EXPECT(gbc.pc(), 0x1ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00C9
        gbc.setState(0xde4a, 0xda09, 0x8c40, 0xdeb0, 0xa6b8, 0x6266, 0x0, 0x1);
        gbc.writeMem(0xde4a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xda09);
        EXPECT(gbc.pc(), 0xde4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde4a), 0xcb);
        EXPECT(gbc.readMem(0xde4b), 0xb3);
        // CB B3 00CA
        gbc.setState(0x8488, 0xb3fc, 0x71a0, 0x1cf0, 0xf5ea, 0xf69, 0x1, 0x1);
        gbc.writeMem(0x8488, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb3fc);
        EXPECT(gbc.pc(), 0x848a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8488), 0xcb);
        EXPECT(gbc.readMem(0x8489), 0xb3);
        // CB B3 00CC
        gbc.setState(0x428, 0x312, 0x6490, 0x5846, 0x2b84, 0x1418, 0x1, 0x0);
        gbc.writeMem(0x428, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x312);
        EXPECT(gbc.pc(), 0x42a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00CD
        gbc.setState(0x905f, 0x68cd, 0x90d0, 0x3e9d, 0x8ef, 0xe5df, 0x0, 0x1);
        gbc.writeMem(0x905f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x68cd);
        EXPECT(gbc.pc(), 0x9061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x905f), 0xcb);
        EXPECT(gbc.readMem(0x9060), 0xb3);
        // CB B3 00CE
        gbc.setState(0xce64, 0x8d99, 0xafd0, 0xe9bd, 0xb86, 0xeb4f, 0x1, 0x0);
        gbc.writeMem(0xce64, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8d99);
        EXPECT(gbc.pc(), 0xce66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce64), 0xcb);
        EXPECT(gbc.readMem(0xce65), 0xb3);
        // CB B3 00CF
        gbc.setState(0x5d62, 0x749d, 0xb780, 0x44de, 0x2304, 0xde2c, 0x1, 0x0);
        gbc.writeMem(0x5d62, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x749d);
        EXPECT(gbc.pc(), 0x5d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00D0
        gbc.setState(0xab04, 0xf4d7, 0xc2a0, 0x90c5, 0xb0bd, 0xd8c8, 0x1, 0x0);
        gbc.writeMem(0xab04, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf4d7);
        EXPECT(gbc.pc(), 0xab06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab04), 0xcb);
        EXPECT(gbc.readMem(0xab05), 0xb3);
        // CB B3 00D1
        gbc.setState(0xa673, 0xf6f7, 0x110, 0xee83, 0x23fc, 0xd0ee, 0x0, 0x0);
        gbc.writeMem(0xa673, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf6f7);
        EXPECT(gbc.pc(), 0xa675);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa673), 0xcb);
        EXPECT(gbc.readMem(0xa674), 0xb3);
        // CB B3 00D3
        gbc.setState(0xac72, 0xc348, 0xf7d0, 0x17c0, 0x7355, 0x3de6, 0x0, 0x1);
        gbc.writeMem(0xac72, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc348);
        EXPECT(gbc.pc(), 0xac74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac72), 0xcb);
        EXPECT(gbc.readMem(0xac73), 0xb3);
        // CB B3 00D4
        gbc.setState(0x5345, 0x74cb, 0x5f80, 0xbde9, 0x9910, 0x50d8, 0x0, 0x0);
        gbc.writeMem(0x5345, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x74cb);
        EXPECT(gbc.pc(), 0x5347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00D5
        gbc.setState(0xd4a3, 0x119e, 0x1d60, 0xe652, 0x82da, 0x7a13, 0x0, 0x0);
        gbc.writeMem(0xd4a3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x119e);
        EXPECT(gbc.pc(), 0xd4a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4a3), 0xcb);
        EXPECT(gbc.readMem(0xd4a4), 0xb3);
        // CB B3 00D6
        gbc.setState(0xd90f, 0x72eb, 0x2b90, 0x5ee, 0xacb0, 0x58fe, 0x0, 0x0);
        gbc.writeMem(0xd90f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x72eb);
        EXPECT(gbc.pc(), 0xd911);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd90f), 0xcb);
        EXPECT(gbc.readMem(0xd910), 0xb3);
        // CB B3 00D7
        gbc.setState(0x5bb2, 0x1f6c, 0x4c00, 0x495c, 0x71ef, 0xb9c2, 0x1, 0x0);
        gbc.writeMem(0x5bb2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1f6c);
        EXPECT(gbc.pc(), 0x5bb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00D8
        gbc.setState(0x1531, 0xcb03, 0xfc10, 0xf84f, 0x4d5d, 0x9302, 0x1, 0x0);
        gbc.writeMem(0x1531, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcb03);
        EXPECT(gbc.pc(), 0x1533);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00D9
        gbc.setState(0xbaf, 0x6e1, 0x6270, 0x22ca, 0xd496, 0x85da, 0x1, 0x0);
        gbc.writeMem(0xbaf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6e1);
        EXPECT(gbc.pc(), 0xbb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00DA
        gbc.setState(0xc6d7, 0xaa15, 0x4bc0, 0x7b60, 0x3260, 0xf3a2, 0x1, 0x1);
        gbc.writeMem(0xc6d7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xaa15);
        EXPECT(gbc.pc(), 0xc6d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6d7), 0xcb);
        EXPECT(gbc.readMem(0xc6d8), 0xb3);
        // CB B3 00DD
        gbc.setState(0x68c6, 0xb813, 0x9a30, 0x72bf, 0xc55d, 0xafda, 0x1, 0x0);
        gbc.writeMem(0x68c6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb813);
        EXPECT(gbc.pc(), 0x68c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00DE
        gbc.setState(0x390c, 0x1bfe, 0x430, 0xddb6, 0x34e1, 0x7719, 0x0, 0x1);
        gbc.writeMem(0x390c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x1bfe);
        EXPECT(gbc.pc(), 0x390e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00DF
        gbc.setState(0x7387, 0x7679, 0xed60, 0xb09c, 0x47fe, 0xef8c, 0x0, 0x1);
        gbc.writeMem(0x7387, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7679);
        EXPECT(gbc.pc(), 0x7389);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00E0
        gbc.setState(0xd333, 0xd3c1, 0x4f40, 0xb996, 0x550c, 0xf10, 0x1, 0x0);
        gbc.writeMem(0xd333, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd3c1);
        EXPECT(gbc.pc(), 0xd335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd333), 0xcb);
        EXPECT(gbc.readMem(0xd334), 0xb3);
        // CB B3 00E1
        gbc.setState(0xc78c, 0x6529, 0x9450, 0x998a, 0xf841, 0x56aa, 0x0, 0x0);
        gbc.writeMem(0xc78c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6529);
        EXPECT(gbc.pc(), 0xc78e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc78c), 0xcb);
        EXPECT(gbc.readMem(0xc78d), 0xb3);
        // CB B3 00E2
        gbc.setState(0x4d69, 0x47dc, 0x9bb0, 0xd16, 0xef39, 0x9fb2, 0x0, 0x0);
        gbc.writeMem(0x4d69, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x47dc);
        EXPECT(gbc.pc(), 0x4d6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00E3
        gbc.setState(0x662e, 0xf87a, 0x6dc0, 0x9d75, 0xad9f, 0x6a04, 0x0, 0x0);
        gbc.writeMem(0x662e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf87a);
        EXPECT(gbc.pc(), 0x6630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00E4
        gbc.setState(0x7800, 0xc842, 0xc9f0, 0xd848, 0xfec1, 0xf525, 0x1, 0x0);
        gbc.writeMem(0x7800, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc842);
        EXPECT(gbc.pc(), 0x7802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00E5
        gbc.setState(0x9, 0x8322, 0x29a0, 0xbaa7, 0x534b, 0xa6d1, 0x0, 0x1);
        gbc.writeMem(0x9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8322);
        EXPECT(gbc.pc(), 0xb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00E6
        gbc.setState(0x8d5f, 0x432f, 0xf2f0, 0x9ef8, 0x7e4, 0xf663, 0x0, 0x0);
        gbc.writeMem(0x8d5f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x432f);
        EXPECT(gbc.pc(), 0x8d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d5f), 0xcb);
        EXPECT(gbc.readMem(0x8d60), 0xb3);
        // CB B3 00E7
        gbc.setState(0xbbdd, 0x7baf, 0x1aa0, 0x8046, 0xc5c8, 0x8b1f, 0x1, 0x1);
        gbc.writeMem(0xbbdd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7baf);
        EXPECT(gbc.pc(), 0xbbdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbdd), 0xcb);
        EXPECT(gbc.readMem(0xbbde), 0xb3);
        // CB B3 00E8
        gbc.setState(0x8113, 0x8e5d, 0x71b0, 0x1249, 0xe8b1, 0x5295, 0x0, 0x1);
        gbc.writeMem(0x8113, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8e5d);
        EXPECT(gbc.pc(), 0x8115);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8113), 0xcb);
        EXPECT(gbc.readMem(0x8114), 0xb3);
        // CB B3 00E9
        gbc.setState(0x87c8, 0xf624, 0x3980, 0x2c38, 0x557, 0xe171, 0x1, 0x1);
        gbc.writeMem(0x87c8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf624);
        EXPECT(gbc.pc(), 0x87ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c8), 0xcb);
        EXPECT(gbc.readMem(0x87c9), 0xb3);
        // CB B3 00EA
        gbc.setState(0x52df, 0x9513, 0x8590, 0xceb4, 0x66bb, 0xcdd, 0x1, 0x0);
        gbc.writeMem(0x52df, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9513);
        EXPECT(gbc.pc(), 0x52e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00EB
        gbc.setState(0x6d93, 0xc697, 0xe730, 0x2a37, 0x1188, 0xa8d9, 0x0, 0x0);
        gbc.writeMem(0x6d93, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc697);
        EXPECT(gbc.pc(), 0x6d95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00EC
        gbc.setState(0x9b1c, 0x24df, 0xa240, 0x4c51, 0x5d03, 0x5eb7, 0x1, 0x1);
        gbc.writeMem(0x9b1c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x24df);
        EXPECT(gbc.pc(), 0x9b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1c), 0xcb);
        EXPECT(gbc.readMem(0x9b1d), 0xb3);
        // CB B3 00ED
        gbc.setState(0xaeba, 0x99d6, 0xbd90, 0xd45d, 0x765, 0x96ea, 0x0, 0x1);
        gbc.writeMem(0xaeba, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x99d6);
        EXPECT(gbc.pc(), 0xaebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeba), 0xcb);
        EXPECT(gbc.readMem(0xaebb), 0xb3);
        // CB B3 00EE
        gbc.setState(0x46ee, 0x567e, 0x3780, 0xa7c6, 0x942e, 0x603e, 0x0, 0x0);
        gbc.writeMem(0x46ee, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x567e);
        EXPECT(gbc.pc(), 0x46f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00EF
        gbc.setState(0x78d7, 0xb1b8, 0x8bd0, 0xd44f, 0x2b02, 0xea2d, 0x0, 0x1);
        gbc.writeMem(0x78d7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb1b8);
        EXPECT(gbc.pc(), 0x78d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00F0
        gbc.setState(0xa771, 0x8173, 0xc210, 0xf1f8, 0xb4fb, 0xc1c2, 0x0, 0x0);
        gbc.writeMem(0xa771, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8173);
        EXPECT(gbc.pc(), 0xa773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa771), 0xcb);
        EXPECT(gbc.readMem(0xa772), 0xb3);
        // CB B3 00F2
        gbc.setState(0xbaf9, 0x667c, 0xa830, 0xcc14, 0x4aa3, 0x74f0, 0x1, 0x0);
        gbc.writeMem(0xbaf9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x667c);
        EXPECT(gbc.pc(), 0xbafb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaf9), 0xcb);
        EXPECT(gbc.readMem(0xbafa), 0xb3);
        // CB B3 00F3
        gbc.setState(0x783, 0x9960, 0x4990, 0xac3f, 0x414, 0xaf6e, 0x0, 0x1);
        gbc.writeMem(0x783, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9960);
        EXPECT(gbc.pc(), 0x785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00F4
        gbc.setState(0x9bfc, 0xa167, 0xae80, 0xa983, 0x31ec, 0x6417, 0x0, 0x1);
        gbc.writeMem(0x9bfc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa167);
        EXPECT(gbc.pc(), 0x9bfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bfc), 0xcb);
        EXPECT(gbc.readMem(0x9bfd), 0xb3);
        // CB B3 00F5
        gbc.setState(0x54a2, 0x6406, 0xf030, 0xd498, 0xce89, 0x58f8, 0x1, 0x0);
        gbc.writeMem(0x54a2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6406);
        EXPECT(gbc.pc(), 0x54a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00F6
        gbc.setState(0x5c7e, 0xab33, 0xc7d0, 0x161f, 0x52ed, 0x2aa9, 0x1, 0x0);
        gbc.writeMem(0x5c7e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xab33);
        EXPECT(gbc.pc(), 0x5c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 00F7
        gbc.setState(0x9705, 0x16d9, 0x4510, 0x65c0, 0x723e, 0x92f6, 0x1, 0x0);
        gbc.writeMem(0x9705, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x16d9);
        EXPECT(gbc.pc(), 0x9707);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9705), 0xcb);
        EXPECT(gbc.readMem(0x9706), 0xb3);
        // CB B3 00F9
        gbc.setState(0x9c3c, 0xfecb, 0x6910, 0x7a90, 0x1ba8, 0x23ec, 0x0, 0x0);
        gbc.writeMem(0x9c3c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfecb);
        EXPECT(gbc.pc(), 0x9c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c3c), 0xcb);
        EXPECT(gbc.readMem(0x9c3d), 0xb3);
        // CB B3 00FA
        gbc.setState(0xe921, 0x73ed, 0xdac0, 0x9a3c, 0x9561, 0xa289, 0x1, 0x1);
        gbc.writeMem(0xe921, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x73ed);
        EXPECT(gbc.pc(), 0xe923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe921), 0xcb);
        EXPECT(gbc.readMem(0xe922), 0xb3);
        // CB B3 00FB
        gbc.setState(0x49d1, 0x369e, 0x26e0, 0x9158, 0xcda1, 0x9932, 0x0, 0x0);
        gbc.writeMem(0x49d1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x369e);
        EXPECT(gbc.pc(), 0x49d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 00FD
        gbc.setState(0x8354, 0x244f, 0xa4b0, 0x2001, 0xbffd, 0x38e7, 0x1, 0x0);
        gbc.writeMem(0x8354, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x244f);
        EXPECT(gbc.pc(), 0x8356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8354), 0xcb);
        EXPECT(gbc.readMem(0x8355), 0xb3);
        // CB B3 00FE
        gbc.setState(0xd700, 0x358f, 0x8ba0, 0xd437, 0x4ce1, 0x84fd, 0x0, 0x0);
        gbc.writeMem(0xd700, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x358f);
        EXPECT(gbc.pc(), 0xd702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd700), 0xcb);
        EXPECT(gbc.readMem(0xd701), 0xb3);
        // CB B3 00FF
        gbc.setState(0x7245, 0x1e54, 0x9d80, 0xda7, 0x661a, 0xc430, 0x1, 0x1);
        gbc.writeMem(0x7245, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1e54);
        EXPECT(gbc.pc(), 0x7247);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0100
        gbc.setState(0xb78a, 0x8a7e, 0x7ae0, 0x93fd, 0xbb11, 0xb9ec, 0x1, 0x0);
        gbc.writeMem(0xb78a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8a7e);
        EXPECT(gbc.pc(), 0xb78c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb78a), 0xcb);
        EXPECT(gbc.readMem(0xb78b), 0xb3);
        // CB B3 0101
        gbc.setState(0x9be9, 0xe884, 0x9bc0, 0x6807, 0xebf2, 0x42ee, 0x1, 0x1);
        gbc.writeMem(0x9be9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe884);
        EXPECT(gbc.pc(), 0x9beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be9), 0xcb);
        EXPECT(gbc.readMem(0x9bea), 0xb3);
        // CB B3 0102
        gbc.setState(0xabb3, 0x161e, 0x94b0, 0xde5a, 0x9e69, 0x40bb, 0x1, 0x0);
        gbc.writeMem(0xabb3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x161e);
        EXPECT(gbc.pc(), 0xabb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb3), 0xcb);
        EXPECT(gbc.readMem(0xabb4), 0xb3);
        // CB B3 0103
        gbc.setState(0xab49, 0x60ea, 0x46c0, 0xbdae, 0x262, 0xeb58, 0x0, 0x1);
        gbc.writeMem(0xab49, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x60ea);
        EXPECT(gbc.pc(), 0xab4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab49), 0xcb);
        EXPECT(gbc.readMem(0xab4a), 0xb3);
        // CB B3 0104
        gbc.setState(0xa31, 0x720f, 0xa870, 0x6f5d, 0x6d06, 0xa955, 0x0, 0x1);
        gbc.writeMem(0xa31, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x720f);
        EXPECT(gbc.pc(), 0xa33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0105
        gbc.setState(0xa9a0, 0xc886, 0xbe00, 0xe56c, 0x97bc, 0x534b, 0x0, 0x1);
        gbc.writeMem(0xa9a0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc886);
        EXPECT(gbc.pc(), 0xa9a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a0), 0xcb);
        EXPECT(gbc.readMem(0xa9a1), 0xb3);
        // CB B3 0106
        gbc.setState(0xb087, 0x8fbb, 0xa3e0, 0x482c, 0x6cb8, 0xb4c3, 0x1, 0x0);
        gbc.writeMem(0xb087, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8fbb);
        EXPECT(gbc.pc(), 0xb089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb087), 0xcb);
        EXPECT(gbc.readMem(0xb088), 0xb3);
        // CB B3 0107
        gbc.setState(0xeacc, 0x5ee8, 0x2e90, 0x17e1, 0x72f0, 0x3874, 0x1, 0x1);
        gbc.writeMem(0xeacc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5ee8);
        EXPECT(gbc.pc(), 0xeace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeacc), 0xcb);
        EXPECT(gbc.readMem(0xeacd), 0xb3);
        // CB B3 0109
        gbc.setState(0xc0ee, 0xc50f, 0xbd10, 0xa33a, 0x4701, 0xa02b, 0x0, 0x0);
        gbc.writeMem(0xc0ee, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xc50f);
        EXPECT(gbc.pc(), 0xc0f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ee), 0xcb);
        EXPECT(gbc.readMem(0xc0ef), 0xb3);
        // CB B3 010A
        gbc.setState(0x33f2, 0x389e, 0x5680, 0xbaa0, 0xf158, 0xd0a9, 0x0, 0x1);
        gbc.writeMem(0x33f2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x389e);
        EXPECT(gbc.pc(), 0x33f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 010B
        gbc.setState(0x79da, 0x4cd, 0xb660, 0x635f, 0x9fd, 0x9309, 0x0, 0x1);
        gbc.writeMem(0x79da, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4cd);
        EXPECT(gbc.pc(), 0x79dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 010C
        gbc.setState(0x371e, 0xf4c8, 0x8670, 0xb444, 0xbcd2, 0x8914, 0x1, 0x1);
        gbc.writeMem(0x371e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf4c8);
        EXPECT(gbc.pc(), 0x3720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 010D
        gbc.setState(0x6db1, 0x3eaa, 0x40d0, 0xfab, 0x6a75, 0x5b58, 0x0, 0x1);
        gbc.writeMem(0x6db1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3eaa);
        EXPECT(gbc.pc(), 0x6db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 010E
        gbc.setState(0xba61, 0x17a4, 0x3650, 0xd84b, 0xc214, 0x7f7e, 0x0, 0x1);
        gbc.writeMem(0xba61, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x17a4);
        EXPECT(gbc.pc(), 0xba63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba61), 0xcb);
        EXPECT(gbc.readMem(0xba62), 0xb3);
        // CB B3 010F
        gbc.setState(0x61eb, 0x1a91, 0x5ec0, 0xec32, 0xba76, 0x8e37, 0x0, 0x0);
        gbc.writeMem(0x61eb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1a91);
        EXPECT(gbc.pc(), 0x61ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0110
        gbc.setState(0x1f73, 0x2e8d, 0xe7b0, 0xb01e, 0x80bc, 0x2f67, 0x1, 0x0);
        gbc.writeMem(0x1f73, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2e8d);
        EXPECT(gbc.pc(), 0x1f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0111
        gbc.setState(0xc3d2, 0x462e, 0xada0, 0x44e5, 0x2c92, 0xecda, 0x0, 0x1);
        gbc.writeMem(0xc3d2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x462e);
        EXPECT(gbc.pc(), 0xc3d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d2), 0xcb);
        EXPECT(gbc.readMem(0xc3d3), 0xb3);
        // CB B3 0112
        gbc.setState(0x2b31, 0xb940, 0xad80, 0x4544, 0x2e9b, 0xba2b, 0x0, 0x0);
        gbc.writeMem(0x2b31, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb940);
        EXPECT(gbc.pc(), 0x2b33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0113
        gbc.setState(0x3106, 0x50f7, 0xe190, 0xd893, 0xf9c4, 0x7da4, 0x1, 0x0);
        gbc.writeMem(0x3106, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x50f7);
        EXPECT(gbc.pc(), 0x3108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0114
        gbc.setState(0xde31, 0xf27a, 0x7120, 0xcd5b, 0x7b22, 0x26a1, 0x1, 0x1);
        gbc.writeMem(0xde31, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf27a);
        EXPECT(gbc.pc(), 0xde33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde31), 0xcb);
        EXPECT(gbc.readMem(0xde32), 0xb3);
        // CB B3 0115
        gbc.setState(0xe5f1, 0xbe11, 0x32e0, 0x5a29, 0x1a26, 0x1f30, 0x0, 0x1);
        gbc.writeMem(0xe5f1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbe11);
        EXPECT(gbc.pc(), 0xe5f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f1), 0xcb);
        EXPECT(gbc.readMem(0xe5f2), 0xb3);
        // CB B3 0116
        gbc.setState(0xef3d, 0xf432, 0x5e80, 0x4e81, 0x910c, 0x7bcb, 0x0, 0x0);
        gbc.writeMem(0xef3d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf432);
        EXPECT(gbc.pc(), 0xef3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef3d), 0xcb);
        EXPECT(gbc.readMem(0xef3e), 0xb3);
        // CB B3 0117
        gbc.setState(0x9617, 0x2cba, 0xba70, 0xde64, 0x415f, 0x785a, 0x1, 0x0);
        gbc.writeMem(0x9617, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2cba);
        EXPECT(gbc.pc(), 0x9619);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9617), 0xcb);
        EXPECT(gbc.readMem(0x9618), 0xb3);
        // CB B3 0118
        gbc.setState(0xd0c8, 0xd64a, 0x60f0, 0x87fb, 0x574a, 0x4a42, 0x1, 0x0);
        gbc.writeMem(0xd0c8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd64a);
        EXPECT(gbc.pc(), 0xd0ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0c8), 0xcb);
        EXPECT(gbc.readMem(0xd0c9), 0xb3);
        // CB B3 0119
        gbc.setState(0x67cd, 0xaac4, 0x7850, 0x52a2, 0xc61f, 0xc30d, 0x0, 0x1);
        gbc.writeMem(0x67cd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xaac4);
        EXPECT(gbc.pc(), 0x67cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 011A
        gbc.setState(0xdfe5, 0xc9de, 0x67f0, 0x7c83, 0x9f94, 0xe6e1, 0x1, 0x0);
        gbc.writeMem(0xdfe5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc9de);
        EXPECT(gbc.pc(), 0xdfe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe5), 0xcb);
        EXPECT(gbc.readMem(0xdfe6), 0xb3);
        // CB B3 011B
        gbc.setState(0x8c40, 0x79cd, 0xdf80, 0x9fa2, 0xeea2, 0x96db, 0x1, 0x0);
        gbc.writeMem(0x8c40, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x79cd);
        EXPECT(gbc.pc(), 0x8c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c40), 0xcb);
        EXPECT(gbc.readMem(0x8c41), 0xb3);
        // CB B3 011C
        gbc.setState(0xea63, 0xffeb, 0xb400, 0xb251, 0x61e2, 0x316e, 0x1, 0x0);
        gbc.writeMem(0xea63, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xffeb);
        EXPECT(gbc.pc(), 0xea65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea63), 0xcb);
        EXPECT(gbc.readMem(0xea64), 0xb3);
        // CB B3 011D
        gbc.setState(0xb20, 0x6da9, 0x490, 0x1a5c, 0x6407, 0x3c98, 0x0, 0x1);
        gbc.writeMem(0xb20, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6da9);
        EXPECT(gbc.pc(), 0xb22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 011E
        gbc.setState(0xebeb, 0x6aa1, 0x61b0, 0x5343, 0x9649, 0x244, 0x1, 0x0);
        gbc.writeMem(0xebeb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6aa1);
        EXPECT(gbc.pc(), 0xebed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebeb), 0xcb);
        EXPECT(gbc.readMem(0xebec), 0xb3);
        // CB B3 011F
        gbc.setState(0xc4f1, 0x5f6, 0x8a30, 0xbcc3, 0xcbe5, 0x1f8d, 0x0, 0x1);
        gbc.writeMem(0xc4f1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5f6);
        EXPECT(gbc.pc(), 0xc4f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4f1), 0xcb);
        EXPECT(gbc.readMem(0xc4f2), 0xb3);
        // CB B3 0121
        gbc.setState(0x4634, 0x565b, 0xa100, 0x1c62, 0xc71d, 0x6398, 0x1, 0x0);
        gbc.writeMem(0x4634, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x565b);
        EXPECT(gbc.pc(), 0x4636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0122
        gbc.setState(0xbc42, 0xc0b9, 0x5010, 0x9f, 0x1f0b, 0x5ab4, 0x1, 0x1);
        gbc.writeMem(0xbc42, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc0b9);
        EXPECT(gbc.pc(), 0xbc44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc42), 0xcb);
        EXPECT(gbc.readMem(0xbc43), 0xb3);
        // CB B3 0123
        gbc.setState(0x4d5f, 0x3744, 0x9ba0, 0xe8ed, 0x5eb4, 0x74b0, 0x1, 0x0);
        gbc.writeMem(0x4d5f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3744);
        EXPECT(gbc.pc(), 0x4d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0124
        gbc.setState(0x1cee, 0x818c, 0x64e0, 0xbfef, 0xb405, 0xf2c2, 0x0, 0x1);
        gbc.writeMem(0x1cee, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x818c);
        EXPECT(gbc.pc(), 0x1cf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0125
        gbc.setState(0x5e92, 0xe2bc, 0xf650, 0x9ce3, 0xca0d, 0x8127, 0x1, 0x1);
        gbc.writeMem(0x5e92, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe2bc);
        EXPECT(gbc.pc(), 0x5e94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0126
        gbc.setState(0x87e6, 0xc6d0, 0xb70, 0x3497, 0x6268, 0x98be, 0x1, 0x0);
        gbc.writeMem(0x87e6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc6d0);
        EXPECT(gbc.pc(), 0x87e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e6), 0xcb);
        EXPECT(gbc.readMem(0x87e7), 0xb3);
        // CB B3 0127
        gbc.setState(0xee51, 0xe7a4, 0xce80, 0x26f7, 0x3092, 0xa365, 0x1, 0x1);
        gbc.writeMem(0xee51, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe7a4);
        EXPECT(gbc.pc(), 0xee53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee51), 0xcb);
        EXPECT(gbc.readMem(0xee52), 0xb3);
        // CB B3 0128
        gbc.setState(0xd59c, 0x30e8, 0xd2f0, 0x75fe, 0xe2e3, 0x3f43, 0x1, 0x0);
        gbc.writeMem(0xd59c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x30e8);
        EXPECT(gbc.pc(), 0xd59e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd59c), 0xcb);
        EXPECT(gbc.readMem(0xd59d), 0xb3);
        // CB B3 0129
        gbc.setState(0xa811, 0x9278, 0x8100, 0x5e3d, 0x81e0, 0x830e, 0x0, 0x0);
        gbc.writeMem(0xa811, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9278);
        EXPECT(gbc.pc(), 0xa813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa811), 0xcb);
        EXPECT(gbc.readMem(0xa812), 0xb3);
        // CB B3 012A
        gbc.setState(0x5cb8, 0x283d, 0xc500, 0xc051, 0x1c13, 0x9239, 0x1, 0x1);
        gbc.writeMem(0x5cb8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x283d);
        EXPECT(gbc.pc(), 0x5cba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 012B
        gbc.setState(0xb60d, 0x2cea, 0xbb00, 0x21d1, 0x90b2, 0x9e05, 0x0, 0x1);
        gbc.writeMem(0xb60d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2cea);
        EXPECT(gbc.pc(), 0xb60f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb60d), 0xcb);
        EXPECT(gbc.readMem(0xb60e), 0xb3);
        // CB B3 012C
        gbc.setState(0xac5, 0xf63, 0x5f0, 0x9290, 0xd8ea, 0xf946, 0x1, 0x0);
        gbc.writeMem(0xac5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf63);
        EXPECT(gbc.pc(), 0xac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 012D
        gbc.setState(0x4e87, 0x53a9, 0x3010, 0x2efd, 0x15cc, 0xd0dd, 0x0, 0x0);
        gbc.writeMem(0x4e87, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x53a9);
        EXPECT(gbc.pc(), 0x4e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 012E
        gbc.setState(0x686d, 0xa7e1, 0x6390, 0x75bd, 0xaa30, 0x90a6, 0x0, 0x0);
        gbc.writeMem(0x686d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa7e1);
        EXPECT(gbc.pc(), 0x686f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 012F
        gbc.setState(0x43d4, 0x9682, 0x17b0, 0xeba2, 0x1e38, 0x9451, 0x0, 0x1);
        gbc.writeMem(0x43d4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9682);
        EXPECT(gbc.pc(), 0x43d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0130
        gbc.setState(0x27e1, 0xf794, 0x8810, 0x31d2, 0xa5b, 0x513, 0x1, 0x0);
        gbc.writeMem(0x27e1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf794);
        EXPECT(gbc.pc(), 0x27e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0131
        gbc.setState(0xb68e, 0xeaee, 0xca70, 0x75ef, 0xb495, 0x4e48, 0x1, 0x1);
        gbc.writeMem(0xb68e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xeaee);
        EXPECT(gbc.pc(), 0xb690);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb68e), 0xcb);
        EXPECT(gbc.readMem(0xb68f), 0xb3);
        // CB B3 0132
        gbc.setState(0x78ab, 0x12c1, 0x1a20, 0xbc99, 0x122b, 0x2a87, 0x0, 0x0);
        gbc.writeMem(0x78ab, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x12c1);
        EXPECT(gbc.pc(), 0x78ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0133
        gbc.setState(0xc7dd, 0x3d9, 0xda30, 0xf438, 0x3cf7, 0x63ad, 0x1, 0x0);
        gbc.writeMem(0xc7dd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3d9);
        EXPECT(gbc.pc(), 0xc7df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7dd), 0xcb);
        EXPECT(gbc.readMem(0xc7de), 0xb3);
        // CB B3 0134
        gbc.setState(0xa63d, 0xfcf3, 0x4ad0, 0x3e70, 0x7fd1, 0x58d6, 0x1, 0x1);
        gbc.writeMem(0xa63d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xfcf3);
        EXPECT(gbc.pc(), 0xa63f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa63d), 0xcb);
        EXPECT(gbc.readMem(0xa63e), 0xb3);
        // CB B3 0135
        gbc.setState(0x5e99, 0xffa0, 0x10, 0x4b96, 0x70, 0xcf7f, 0x1, 0x1);
        gbc.writeMem(0x5e99, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xffa0);
        EXPECT(gbc.pc(), 0x5e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0136
        gbc.setState(0x1f57, 0x389c, 0xa2c0, 0x375d, 0xe2ac, 0xad49, 0x1, 0x0);
        gbc.writeMem(0x1f57, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x389c);
        EXPECT(gbc.pc(), 0x1f59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0137
        gbc.setState(0x9f9c, 0xb478, 0x5470, 0xa156, 0xca41, 0x21ff, 0x0, 0x1);
        gbc.writeMem(0x9f9c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb478);
        EXPECT(gbc.pc(), 0x9f9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f9c), 0xcb);
        EXPECT(gbc.readMem(0x9f9d), 0xb3);
        // CB B3 0138
        gbc.setState(0x51ff, 0x9150, 0x1cf0, 0xff6d, 0x914b, 0xca3, 0x0, 0x1);
        gbc.writeMem(0x51ff, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9150);
        EXPECT(gbc.pc(), 0x5201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0139
        gbc.setState(0xef74, 0x1ef7, 0x4620, 0x5f5, 0xa08b, 0x7be2, 0x1, 0x1);
        gbc.writeMem(0xef74, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x1ef7);
        EXPECT(gbc.pc(), 0xef76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef74), 0xcb);
        EXPECT(gbc.readMem(0xef75), 0xb3);
        // CB B3 013A
        gbc.setState(0x21b6, 0x2079, 0xdf20, 0xdd0b, 0x2ff4, 0x8c9a, 0x0, 0x0);
        gbc.writeMem(0x21b6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2079);
        EXPECT(gbc.pc(), 0x21b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 013B
        gbc.setState(0xdb19, 0x6a9e, 0x5220, 0x5094, 0xbda7, 0x4655, 0x0, 0x0);
        gbc.writeMem(0xdb19, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6a9e);
        EXPECT(gbc.pc(), 0xdb1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb19), 0xcb);
        EXPECT(gbc.readMem(0xdb1a), 0xb3);
        // CB B3 013C
        gbc.setState(0x39d7, 0xa4a8, 0xb710, 0x58ac, 0x97c2, 0xbbf2, 0x0, 0x0);
        gbc.writeMem(0x39d7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xa4a8);
        EXPECT(gbc.pc(), 0x39d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 013D
        gbc.setState(0x6095, 0x22b0, 0x1f60, 0x362a, 0xbb08, 0xa6ca, 0x1, 0x0);
        gbc.writeMem(0x6095, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x22b0);
        EXPECT(gbc.pc(), 0x6097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 013E
        gbc.setState(0x7d23, 0xe5a4, 0x3fe0, 0x135c, 0xde9c, 0x5782, 0x0, 0x1);
        gbc.writeMem(0x7d23, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe5a4);
        EXPECT(gbc.pc(), 0x7d25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 013F
        gbc.setState(0xc9d2, 0x630, 0xed60, 0x1b1e, 0xbba4, 0xea7e, 0x0, 0x1);
        gbc.writeMem(0xc9d2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x630);
        EXPECT(gbc.pc(), 0xc9d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d2), 0xcb);
        EXPECT(gbc.readMem(0xc9d3), 0xb3);
        // CB B3 0140
        gbc.setState(0xa57f, 0xf910, 0x74c0, 0x62d5, 0x865f, 0x1b5e, 0x1, 0x1);
        gbc.writeMem(0xa57f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf910);
        EXPECT(gbc.pc(), 0xa581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa57f), 0xcb);
        EXPECT(gbc.readMem(0xa580), 0xb3);
        // CB B3 0141
        gbc.setState(0x1d90, 0xc4d5, 0x54b0, 0xc6ba, 0xdf49, 0xc224, 0x1, 0x1);
        gbc.writeMem(0x1d90, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc4d5);
        EXPECT(gbc.pc(), 0x1d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0142
        gbc.setState(0x532d, 0x257, 0xb6e0, 0x2924, 0x17d8, 0x2889, 0x1, 0x1);
        gbc.writeMem(0x532d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x257);
        EXPECT(gbc.pc(), 0x532f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0143
        gbc.setState(0x5eba, 0xc1d2, 0x3e60, 0xeab0, 0x85fc, 0x1770, 0x0, 0x0);
        gbc.writeMem(0x5eba, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc1d2);
        EXPECT(gbc.pc(), 0x5ebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0144
        gbc.setState(0x51c5, 0x82ae, 0x8040, 0x50c6, 0x6b5c, 0x1770, 0x1, 0x0);
        gbc.writeMem(0x51c5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x82ae);
        EXPECT(gbc.pc(), 0x51c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0145
        gbc.setState(0xc9f5, 0xa58c, 0xa730, 0xbe1a, 0xe9a, 0x3795, 0x1, 0x0);
        gbc.writeMem(0xc9f5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa58c);
        EXPECT(gbc.pc(), 0xc9f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f5), 0xcb);
        EXPECT(gbc.readMem(0xc9f6), 0xb3);
        // CB B3 0146
        gbc.setState(0xb446, 0x4d75, 0x5990, 0xb5e3, 0x7c34, 0x6821, 0x1, 0x1);
        gbc.writeMem(0xb446, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4d75);
        EXPECT(gbc.pc(), 0xb448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb446), 0xcb);
        EXPECT(gbc.readMem(0xb447), 0xb3);
        // CB B3 0147
        gbc.setState(0x910b, 0x3dd2, 0x93c0, 0x35ce, 0xd3f7, 0xaee, 0x1, 0x0);
        gbc.writeMem(0x910b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3dd2);
        EXPECT(gbc.pc(), 0x910d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x910b), 0xcb);
        EXPECT(gbc.readMem(0x910c), 0xb3);
        // CB B3 0148
        gbc.setState(0x2574, 0x5ecf, 0x13e0, 0x2019, 0xa0d7, 0x9bb3, 0x0, 0x1);
        gbc.writeMem(0x2574, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5ecf);
        EXPECT(gbc.pc(), 0x2576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 014A
        gbc.setState(0x3ae6, 0xdcba, 0xa5f0, 0x8476, 0x7078, 0xcd5a, 0x1, 0x0);
        gbc.writeMem(0x3ae6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xdcba);
        EXPECT(gbc.pc(), 0x3ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 014B
        gbc.setState(0x83d1, 0x106c, 0x2240, 0x2d7, 0xe2, 0x9b25, 0x1, 0x1);
        gbc.writeMem(0x83d1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x106c);
        EXPECT(gbc.pc(), 0x83d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83d1), 0xcb);
        EXPECT(gbc.readMem(0x83d2), 0xb3);
        // CB B3 014C
        gbc.setState(0xde5c, 0xd3ae, 0x5df0, 0x9b0d, 0xaf15, 0xe5e6, 0x0, 0x0);
        gbc.writeMem(0xde5c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd3ae);
        EXPECT(gbc.pc(), 0xde5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde5c), 0xcb);
        EXPECT(gbc.readMem(0xde5d), 0xb3);
        // CB B3 014D
        gbc.setState(0x20e2, 0xf71a, 0x2500, 0x32f4, 0xaac7, 0x6c4e, 0x0, 0x0);
        gbc.writeMem(0x20e2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf71a);
        EXPECT(gbc.pc(), 0x20e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 014E
        gbc.setState(0x37c5, 0x8389, 0x730, 0xadf, 0x9ed1, 0x45ba, 0x1, 0x0);
        gbc.writeMem(0x37c5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8389);
        EXPECT(gbc.pc(), 0x37c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 014F
        gbc.setState(0xb8ba, 0x61e5, 0x7820, 0x4fc1, 0xf67b, 0x9c69, 0x0, 0x1);
        gbc.writeMem(0xb8ba, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x61e5);
        EXPECT(gbc.pc(), 0xb8bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ba), 0xcb);
        EXPECT(gbc.readMem(0xb8bb), 0xb3);
        // CB B3 0150
        gbc.setState(0x465e, 0x2a81, 0xb2a0, 0x63c, 0xa139, 0x15d9, 0x0, 0x0);
        gbc.writeMem(0x465e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2a81);
        EXPECT(gbc.pc(), 0x4660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0151
        gbc.setState(0x6020, 0x2241, 0x7800, 0x1c53, 0xddbc, 0x65bb, 0x0, 0x1);
        gbc.writeMem(0x6020, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2241);
        EXPECT(gbc.pc(), 0x6022);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0152
        gbc.setState(0x5ec7, 0x9c31, 0x21d0, 0x592f, 0x7aae, 0xd203, 0x0, 0x1);
        gbc.writeMem(0x5ec7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9c31);
        EXPECT(gbc.pc(), 0x5ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0153
        gbc.setState(0xeda1, 0xa447, 0x5b80, 0x5d0b, 0x305, 0xb20a, 0x1, 0x1);
        gbc.writeMem(0xeda1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa447);
        EXPECT(gbc.pc(), 0xeda3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeda1), 0xcb);
        EXPECT(gbc.readMem(0xeda2), 0xb3);
        // CB B3 0154
        gbc.setState(0x88d5, 0x13cb, 0x8990, 0xf4c7, 0xac81, 0x3c7b, 0x0, 0x0);
        gbc.writeMem(0x88d5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x13cb);
        EXPECT(gbc.pc(), 0x88d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88d5), 0xcb);
        EXPECT(gbc.readMem(0x88d6), 0xb3);
        // CB B3 0155
        gbc.setState(0xe2e, 0xdf8c, 0xd310, 0xc72c, 0xbaf4, 0xea48, 0x1, 0x0);
        gbc.writeMem(0xe2e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdf8c);
        EXPECT(gbc.pc(), 0xe30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0156
        gbc.setState(0x26d2, 0x5810, 0x22e0, 0x55e3, 0xeff8, 0x291, 0x0, 0x1);
        gbc.writeMem(0x26d2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5810);
        EXPECT(gbc.pc(), 0x26d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0157
        gbc.setState(0x125f, 0xb6c0, 0x55c0, 0xc6ff, 0xae71, 0x37a, 0x1, 0x1);
        gbc.writeMem(0x125f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb6c0);
        EXPECT(gbc.pc(), 0x1261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0158
        gbc.setState(0x5689, 0x2bd3, 0x96e0, 0xc53b, 0x6c36, 0xc726, 0x0, 0x1);
        gbc.writeMem(0x5689, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2bd3);
        EXPECT(gbc.pc(), 0x568b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0159
        gbc.setState(0xb63b, 0xadc8, 0xef50, 0x4b39, 0x9f78, 0xe3e6, 0x0, 0x0);
        gbc.writeMem(0xb63b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xadc8);
        EXPECT(gbc.pc(), 0xb63d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb63b), 0xcb);
        EXPECT(gbc.readMem(0xb63c), 0xb3);
        // CB B3 015A
        gbc.setState(0xdf56, 0x85ac, 0xd6c0, 0x2ebd, 0xfd31, 0xb320, 0x0, 0x0);
        gbc.writeMem(0xdf56, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x85ac);
        EXPECT(gbc.pc(), 0xdf58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf56), 0xcb);
        EXPECT(gbc.readMem(0xdf57), 0xb3);
        // CB B3 015B
        gbc.setState(0x4219, 0xaa92, 0xa700, 0xd26e, 0xfd23, 0xe7fe, 0x0, 0x0);
        gbc.writeMem(0x4219, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xaa92);
        EXPECT(gbc.pc(), 0x421b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 015C
        gbc.setState(0xe8b, 0x1d8f, 0xf480, 0xfc00, 0x68c6, 0x8894, 0x0, 0x0);
        gbc.writeMem(0xe8b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1d8f);
        EXPECT(gbc.pc(), 0xe8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 015D
        gbc.setState(0x7842, 0xa055, 0x5710, 0x7670, 0xd067, 0xeedc, 0x1, 0x0);
        gbc.writeMem(0x7842, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa055);
        EXPECT(gbc.pc(), 0x7844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 015E
        gbc.setState(0x1908, 0xa098, 0xc060, 0xc6ed, 0x833c, 0xb358, 0x0, 0x0);
        gbc.writeMem(0x1908, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa098);
        EXPECT(gbc.pc(), 0x190a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 015F
        gbc.setState(0xc939, 0xcc68, 0x5a80, 0x1ecc, 0x479a, 0x2999, 0x1, 0x1);
        gbc.writeMem(0xc939, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcc68);
        EXPECT(gbc.pc(), 0xc93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc939), 0xcb);
        EXPECT(gbc.readMem(0xc93a), 0xb3);
        // CB B3 0160
        gbc.setState(0x2964, 0x5db4, 0xb870, 0x5671, 0x1a, 0x80bc, 0x1, 0x1);
        gbc.writeMem(0x2964, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5db4);
        EXPECT(gbc.pc(), 0x2966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0161
        gbc.setState(0x1132, 0xc692, 0xcb30, 0x80e2, 0xb156, 0x9a56, 0x1, 0x0);
        gbc.writeMem(0x1132, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc692);
        EXPECT(gbc.pc(), 0x1134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0162
        gbc.setState(0x386f, 0x5438, 0x19a0, 0x5c4b, 0x3d14, 0xe1b5, 0x1, 0x0);
        gbc.writeMem(0x386f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5438);
        EXPECT(gbc.pc(), 0x3871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0163
        gbc.setState(0xad1c, 0x6dea, 0x7640, 0x8413, 0x58cd, 0x2bbe, 0x0, 0x1);
        gbc.writeMem(0xad1c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6dea);
        EXPECT(gbc.pc(), 0xad1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1c), 0xcb);
        EXPECT(gbc.readMem(0xad1d), 0xb3);
        // CB B3 0164
        gbc.setState(0x6554, 0xf6e5, 0x34b0, 0xf21c, 0x67ca, 0x8fe1, 0x1, 0x1);
        gbc.writeMem(0x6554, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf6e5);
        EXPECT(gbc.pc(), 0x6556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0165
        gbc.setState(0xa354, 0xa6df, 0x6630, 0x5ba7, 0xdee2, 0x3558, 0x1, 0x1);
        gbc.writeMem(0xa354, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa6df);
        EXPECT(gbc.pc(), 0xa356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa354), 0xcb);
        EXPECT(gbc.readMem(0xa355), 0xb3);
        // CB B3 0166
        gbc.setState(0x2789, 0x416e, 0x43d0, 0x8e89, 0xe473, 0x6c6, 0x0, 0x0);
        gbc.writeMem(0x2789, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x416e);
        EXPECT(gbc.pc(), 0x278b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0167
        gbc.setState(0xecdb, 0x5c3f, 0xb810, 0xee2a, 0xb4e3, 0x1297, 0x0, 0x0);
        gbc.writeMem(0xecdb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5c3f);
        EXPECT(gbc.pc(), 0xecdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecdb), 0xcb);
        EXPECT(gbc.readMem(0xecdc), 0xb3);
        // CB B3 0168
        gbc.setState(0x4cd6, 0x22e0, 0x25d0, 0x78bf, 0x173c, 0x287f, 0x0, 0x1);
        gbc.writeMem(0x4cd6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x22e0);
        EXPECT(gbc.pc(), 0x4cd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0169
        gbc.setState(0xd951, 0x9e50, 0xa3d0, 0x1e04, 0x3182, 0x6cb3, 0x0, 0x1);
        gbc.writeMem(0xd951, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9e50);
        EXPECT(gbc.pc(), 0xd953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd951), 0xcb);
        EXPECT(gbc.readMem(0xd952), 0xb3);
        // CB B3 016A
        gbc.setState(0x1f1a, 0xdfe0, 0x7760, 0x2d5a, 0x7013, 0x7283, 0x0, 0x1);
        gbc.writeMem(0x1f1a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdfe0);
        EXPECT(gbc.pc(), 0x1f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 016B
        gbc.setState(0xe232, 0x6f01, 0x6650, 0x6d34, 0xe70a, 0x90e0, 0x0, 0x0);
        gbc.writeMem(0xe232, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x6f01);
        EXPECT(gbc.pc(), 0xe234);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe232), 0xcb);
        EXPECT(gbc.readMem(0xe233), 0xb3);
        // CB B3 016C
        gbc.setState(0x3a50, 0xfd8c, 0x9350, 0xd942, 0x2330, 0xdc40, 0x1, 0x1);
        gbc.writeMem(0x3a50, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfd8c);
        EXPECT(gbc.pc(), 0x3a52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 016D
        gbc.setState(0xc449, 0x3d7f, 0xdc0, 0x657f, 0xb94d, 0xc430, 0x1, 0x0);
        gbc.writeMem(0xc449, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3d7f);
        EXPECT(gbc.pc(), 0xc44b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc449), 0xcb);
        EXPECT(gbc.readMem(0xc44a), 0xb3);
        // CB B3 016E
        gbc.setState(0xb53d, 0xef54, 0x4a50, 0xb01, 0xdaba, 0xd95, 0x0, 0x0);
        gbc.writeMem(0xb53d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xef54);
        EXPECT(gbc.pc(), 0xb53f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb53d), 0xcb);
        EXPECT(gbc.readMem(0xb53e), 0xb3);
        // CB B3 016F
        gbc.setState(0x8389, 0xf426, 0x43b0, 0xcaf8, 0x62e, 0x944d, 0x0, 0x1);
        gbc.writeMem(0x8389, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf426);
        EXPECT(gbc.pc(), 0x838b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8389), 0xcb);
        EXPECT(gbc.readMem(0x838a), 0xb3);
        // CB B3 0170
        gbc.setState(0x8d2c, 0xc967, 0x8fd0, 0x60d, 0x5b3, 0x6e6, 0x0, 0x0);
        gbc.writeMem(0x8d2c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc967);
        EXPECT(gbc.pc(), 0x8d2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d2c), 0xcb);
        EXPECT(gbc.readMem(0x8d2d), 0xb3);
        // CB B3 0171
        gbc.setState(0x2a2c, 0x23b5, 0xf3a0, 0xbd00, 0x565e, 0xb5df, 0x0, 0x1);
        gbc.writeMem(0x2a2c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x23b5);
        EXPECT(gbc.pc(), 0x2a2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0172
        gbc.setState(0xc592, 0x3d5d, 0xea50, 0x836f, 0x5fd0, 0xc164, 0x0, 0x0);
        gbc.writeMem(0xc592, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3d5d);
        EXPECT(gbc.pc(), 0xc594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc592), 0xcb);
        EXPECT(gbc.readMem(0xc593), 0xb3);
        // CB B3 0173
        gbc.setState(0x32ae, 0xfa4f, 0xd950, 0xde83, 0x209, 0x9b10, 0x1, 0x0);
        gbc.writeMem(0x32ae, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xfa4f);
        EXPECT(gbc.pc(), 0x32b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0174
        gbc.setState(0xd1f5, 0xd5ed, 0x6150, 0x3ebc, 0xf2a3, 0x3168, 0x0, 0x0);
        gbc.writeMem(0xd1f5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd5ed);
        EXPECT(gbc.pc(), 0xd1f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1f5), 0xcb);
        EXPECT(gbc.readMem(0xd1f6), 0xb3);
        // CB B3 0175
        gbc.setState(0x6758, 0xc4c3, 0x61d0, 0x984f, 0xcd0d, 0xa6a6, 0x0, 0x1);
        gbc.writeMem(0x6758, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc4c3);
        EXPECT(gbc.pc(), 0x675a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0176
        gbc.setState(0x3e35, 0xba46, 0x5d0, 0xd6e5, 0xb28c, 0x1745, 0x0, 0x0);
        gbc.writeMem(0x3e35, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xba46);
        EXPECT(gbc.pc(), 0x3e37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0177
        gbc.setState(0x5ed6, 0xad9d, 0xb1c0, 0xc067, 0xc91, 0x91ba, 0x0, 0x0);
        gbc.writeMem(0x5ed6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xad9d);
        EXPECT(gbc.pc(), 0x5ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0178
        gbc.setState(0x6544, 0x17f5, 0x6000, 0xccaa, 0xf913, 0x438, 0x0, 0x1);
        gbc.writeMem(0x6544, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x17f5);
        EXPECT(gbc.pc(), 0x6546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0179
        gbc.setState(0x22d4, 0x474e, 0xc170, 0x6291, 0x159a, 0x48fc, 0x0, 0x1);
        gbc.writeMem(0x22d4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x474e);
        EXPECT(gbc.pc(), 0x22d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 017A
        gbc.setState(0x7cea, 0x7d2, 0x680, 0x2333, 0xa9ff, 0xff02, 0x0, 0x0);
        gbc.writeMem(0x7cea, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7d2);
        EXPECT(gbc.pc(), 0x7cec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 017B
        gbc.setState(0x32b5, 0xa21f, 0xa6c0, 0x6ac6, 0xbb3, 0x653d, 0x1, 0x1);
        gbc.writeMem(0x32b5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa21f);
        EXPECT(gbc.pc(), 0x32b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 017C
        gbc.setState(0xcf30, 0xcfef, 0x2bb0, 0xff47, 0x3d95, 0x37eb, 0x1, 0x0);
        gbc.writeMem(0xcf30, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xcfef);
        EXPECT(gbc.pc(), 0xcf32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf30), 0xcb);
        EXPECT(gbc.readMem(0xcf31), 0xb3);
        // CB B3 017F
        gbc.setState(0x66c3, 0xfe96, 0xd950, 0xd9e0, 0x9ec4, 0xa73c, 0x0, 0x1);
        gbc.writeMem(0x66c3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfe96);
        EXPECT(gbc.pc(), 0x66c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0180
        gbc.setState(0x6608, 0x4d67, 0x4cf0, 0x1c46, 0x6734, 0x4ac8, 0x1, 0x0);
        gbc.writeMem(0x6608, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4d67);
        EXPECT(gbc.pc(), 0x660a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0181
        gbc.setState(0x455a, 0x69b3, 0xc440, 0xfb1, 0x37c7, 0xa06e, 0x1, 0x0);
        gbc.writeMem(0x455a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x69b3);
        EXPECT(gbc.pc(), 0x455c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0182
        gbc.setState(0x56db, 0x4f3e, 0xabe0, 0xae1, 0xa7cd, 0x92cc, 0x1, 0x0);
        gbc.writeMem(0x56db, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4f3e);
        EXPECT(gbc.pc(), 0x56dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0183
        gbc.setState(0x8924, 0x58b5, 0x6580, 0xcb01, 0x54ca, 0x1399, 0x0, 0x1);
        gbc.writeMem(0x8924, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x58b5);
        EXPECT(gbc.pc(), 0x8926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8924), 0xcb);
        EXPECT(gbc.readMem(0x8925), 0xb3);
        // CB B3 0184
        gbc.setState(0xa17a, 0xa54, 0x3520, 0x27d, 0x8402, 0x54ca, 0x1, 0x0);
        gbc.writeMem(0xa17a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa54);
        EXPECT(gbc.pc(), 0xa17c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa17a), 0xcb);
        EXPECT(gbc.readMem(0xa17b), 0xb3);
        // CB B3 0185
        gbc.setState(0x77ac, 0xfce6, 0xdf00, 0x2c66, 0x9278, 0xcadb, 0x1, 0x0);
        gbc.writeMem(0x77ac, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xfce6);
        EXPECT(gbc.pc(), 0x77ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0186
        gbc.setState(0xde92, 0xa5a6, 0x2c50, 0x8391, 0x84a2, 0x4d9e, 0x0, 0x0);
        gbc.writeMem(0xde92, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa5a6);
        EXPECT(gbc.pc(), 0xde94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde92), 0xcb);
        EXPECT(gbc.readMem(0xde93), 0xb3);
        // CB B3 0187
        gbc.setState(0x31ef, 0xb09b, 0x3a00, 0x310, 0xbfa0, 0xb280, 0x1, 0x1);
        gbc.writeMem(0x31ef, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb09b);
        EXPECT(gbc.pc(), 0x31f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0188
        gbc.setState(0x53f1, 0x7c40, 0xa210, 0xa60, 0x3e81, 0xf25b, 0x1, 0x1);
        gbc.writeMem(0x53f1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7c40);
        EXPECT(gbc.pc(), 0x53f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0189
        gbc.setState(0x6118, 0x8b98, 0xfd70, 0x9f93, 0x3a9a, 0xa645, 0x1, 0x1);
        gbc.writeMem(0x6118, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8b98);
        EXPECT(gbc.pc(), 0x611a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 018A
        gbc.setState(0xc108, 0xc6fb, 0xebd0, 0xc10f, 0x6a47, 0x2c25, 0x0, 0x1);
        gbc.writeMem(0xc108, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc6fb);
        EXPECT(gbc.pc(), 0xc10a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc108), 0xcb);
        EXPECT(gbc.readMem(0xc109), 0xb3);
        // CB B3 018B
        gbc.setState(0xede8, 0xcb9c, 0xedd0, 0xbb04, 0x5c94, 0xec9, 0x0, 0x1);
        gbc.writeMem(0xede8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcb9c);
        EXPECT(gbc.pc(), 0xedea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede8), 0xcb);
        EXPECT(gbc.readMem(0xede9), 0xb3);
        // CB B3 018C
        gbc.setState(0xc59b, 0x6f15, 0xadc0, 0x48d0, 0x42d0, 0x472, 0x1, 0x0);
        gbc.writeMem(0xc59b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6f15);
        EXPECT(gbc.pc(), 0xc59d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc59b), 0xcb);
        EXPECT(gbc.readMem(0xc59c), 0xb3);
        // CB B3 018D
        gbc.setState(0x7051, 0xaf49, 0x1890, 0x5ddf, 0x771e, 0x175a, 0x1, 0x0);
        gbc.writeMem(0x7051, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xaf49);
        EXPECT(gbc.pc(), 0x7053);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 018E
        gbc.setState(0x7e66, 0xad81, 0x2b40, 0xc8b5, 0xac7c, 0x2d9b, 0x1, 0x0);
        gbc.writeMem(0x7e66, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xad81);
        EXPECT(gbc.pc(), 0x7e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 018F
        gbc.setState(0xd413, 0x7c6e, 0xfb70, 0xf77b, 0x1b27, 0xf1d9, 0x1, 0x1);
        gbc.writeMem(0xd413, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7c6e);
        EXPECT(gbc.pc(), 0xd415);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd413), 0xcb);
        EXPECT(gbc.readMem(0xd414), 0xb3);
        // CB B3 0190
        gbc.setState(0xd0b1, 0x6b3a, 0x7df0, 0x9e9e, 0x819e, 0xeb6b, 0x1, 0x1);
        gbc.writeMem(0xd0b1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6b3a);
        EXPECT(gbc.pc(), 0xd0b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0b1), 0xcb);
        EXPECT(gbc.readMem(0xd0b2), 0xb3);
        // CB B3 0191
        gbc.setState(0xae, 0x8f2f, 0xc9c0, 0x5be, 0x177d, 0x2cb9, 0x0, 0x0);
        gbc.writeMem(0xae, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8f2f);
        EXPECT(gbc.pc(), 0xb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0192
        gbc.setState(0x6cd3, 0xc75f, 0x99f0, 0x5ad8, 0x5505, 0x1fe3, 0x0, 0x1);
        gbc.writeMem(0x6cd3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc75f);
        EXPECT(gbc.pc(), 0x6cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0193
        gbc.setState(0xa1e4, 0xd9e5, 0xd6e0, 0x6267, 0x6fb6, 0xfd74, 0x1, 0x0);
        gbc.writeMem(0xa1e4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd9e5);
        EXPECT(gbc.pc(), 0xa1e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1e4), 0xcb);
        EXPECT(gbc.readMem(0xa1e5), 0xb3);
        // CB B3 0194
        gbc.setState(0x5b20, 0x6893, 0x9670, 0x98da, 0xf247, 0xad00, 0x1, 0x1);
        gbc.writeMem(0x5b20, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6893);
        EXPECT(gbc.pc(), 0x5b22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0195
        gbc.setState(0xaf46, 0xa6a7, 0x9df0, 0xdf2, 0xa208, 0xcbb3, 0x1, 0x0);
        gbc.writeMem(0xaf46, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa6a7);
        EXPECT(gbc.pc(), 0xaf48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf46), 0xcb);
        EXPECT(gbc.readMem(0xaf47), 0xb3);
        // CB B3 0196
        gbc.setState(0x8715, 0x8ba5, 0x3410, 0xe0e, 0x9acc, 0xf535, 0x0, 0x0);
        gbc.writeMem(0x8715, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8ba5);
        EXPECT(gbc.pc(), 0x8717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8715), 0xcb);
        EXPECT(gbc.readMem(0x8716), 0xb3);
        // CB B3 0197
        gbc.setState(0x8fa1, 0xe5, 0x7360, 0xe7d4, 0x9572, 0x2613, 0x1, 0x0);
        gbc.writeMem(0x8fa1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe5);
        EXPECT(gbc.pc(), 0x8fa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa1), 0xcb);
        EXPECT(gbc.readMem(0x8fa2), 0xb3);
        // CB B3 0198
        gbc.setState(0x599d, 0xb51b, 0xe680, 0x1949, 0x599b, 0x961, 0x1, 0x0);
        gbc.writeMem(0x599d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb51b);
        EXPECT(gbc.pc(), 0x599f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0199
        gbc.setState(0x9394, 0x95ca, 0x28c0, 0x7a9a, 0x7d0f, 0xe953, 0x0, 0x0);
        gbc.writeMem(0x9394, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x95ca);
        EXPECT(gbc.pc(), 0x9396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9394), 0xcb);
        EXPECT(gbc.readMem(0x9395), 0xb3);
        // CB B3 019A
        gbc.setState(0x60, 0x788f, 0x12e0, 0x1a30, 0x92ed, 0x28f7, 0x1, 0x0);
        gbc.writeMem(0x60, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x788f);
        EXPECT(gbc.pc(), 0x62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 019B
        gbc.setState(0x3d0c, 0x7eb2, 0xf050, 0xf3c8, 0x611e, 0x7d6b, 0x0, 0x1);
        gbc.writeMem(0x3d0c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7eb2);
        EXPECT(gbc.pc(), 0x3d0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 019C
        gbc.setState(0xbea0, 0xffaa, 0x2b20, 0x895d, 0xe22b, 0x30ef, 0x0, 0x1);
        gbc.writeMem(0xbea0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xffaa);
        EXPECT(gbc.pc(), 0xbea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea0), 0xcb);
        EXPECT(gbc.readMem(0xbea1), 0xb3);
        // CB B3 019D
        gbc.setState(0xc28e, 0x3c5e, 0x5700, 0x7845, 0x995c, 0x3112, 0x1, 0x1);
        gbc.writeMem(0xc28e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3c5e);
        EXPECT(gbc.pc(), 0xc290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc28e), 0xcb);
        EXPECT(gbc.readMem(0xc28f), 0xb3);
        // CB B3 019F
        gbc.setState(0x71f8, 0xc84b, 0x2ed0, 0xd037, 0x6cd1, 0x9e04, 0x0, 0x1);
        gbc.writeMem(0x71f8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc84b);
        EXPECT(gbc.pc(), 0x71fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01A0
        gbc.setState(0x3358, 0xa397, 0xaff0, 0xcf56, 0xebaa, 0x783e, 0x1, 0x0);
        gbc.writeMem(0x3358, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa397);
        EXPECT(gbc.pc(), 0x335a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01A1
        gbc.setState(0xebcd, 0xb24b, 0x8010, 0x9ab9, 0x43f5, 0xf6e8, 0x1, 0x0);
        gbc.writeMem(0xebcd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb24b);
        EXPECT(gbc.pc(), 0xebcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebcd), 0xcb);
        EXPECT(gbc.readMem(0xebce), 0xb3);
        // CB B3 01A2
        gbc.setState(0x7dfe, 0xcadd, 0xe8e0, 0x71a8, 0x36c, 0x941, 0x0, 0x1);
        gbc.writeMem(0x7dfe, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcadd);
        EXPECT(gbc.pc(), 0x7e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01A3
        gbc.setState(0x5d30, 0x30c0, 0x6770, 0xa4b2, 0x6d4b, 0x31df, 0x1, 0x1);
        gbc.writeMem(0x5d30, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x30c0);
        EXPECT(gbc.pc(), 0x5d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01A4
        gbc.setState(0x9443, 0xc7f0, 0xb530, 0x8be8, 0xc862, 0x1d17, 0x0, 0x1);
        gbc.writeMem(0x9443, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc7f0);
        EXPECT(gbc.pc(), 0x9445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9443), 0xcb);
        EXPECT(gbc.readMem(0x9444), 0xb3);
        // CB B3 01A5
        gbc.setState(0x9a04, 0x34f6, 0xead0, 0xb5f6, 0xe9e0, 0x35d4, 0x0, 0x1);
        gbc.writeMem(0x9a04, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x34f6);
        EXPECT(gbc.pc(), 0x9a06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a04), 0xcb);
        EXPECT(gbc.readMem(0x9a05), 0xb3);
        // CB B3 01A6
        gbc.setState(0x59f1, 0x8139, 0xc840, 0x6411, 0x22bc, 0x7f24, 0x1, 0x1);
        gbc.writeMem(0x59f1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8139);
        EXPECT(gbc.pc(), 0x59f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01A7
        gbc.setState(0x9c3, 0x8cf2, 0xad60, 0xfcc, 0xac26, 0x4efa, 0x0, 0x0);
        gbc.writeMem(0x9c3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8cf2);
        EXPECT(gbc.pc(), 0x9c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01A8
        gbc.setState(0x3035, 0xba62, 0x5810, 0x71f4, 0x7175, 0x1943, 0x1, 0x1);
        gbc.writeMem(0x3035, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xba62);
        EXPECT(gbc.pc(), 0x3037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01A9
        gbc.setState(0x6d98, 0x25fb, 0xb850, 0x35c7, 0xfc0a, 0x22f9, 0x0, 0x1);
        gbc.writeMem(0x6d98, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x25fb);
        EXPECT(gbc.pc(), 0x6d9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01AA
        gbc.setState(0x187f, 0xb318, 0x7eb0, 0x182, 0x636a, 0x2fa4, 0x1, 0x0);
        gbc.writeMem(0x187f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb318);
        EXPECT(gbc.pc(), 0x1881);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01AB
        gbc.setState(0x3484, 0x6cb6, 0xa4f0, 0xb9e, 0x549c, 0x5e09, 0x1, 0x1);
        gbc.writeMem(0x3484, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6cb6);
        EXPECT(gbc.pc(), 0x3486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01AC
        gbc.setState(0x61fe, 0xe7d4, 0x2cd0, 0x2c8e, 0x1717, 0x97fd, 0x0, 0x0);
        gbc.writeMem(0x61fe, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe7d4);
        EXPECT(gbc.pc(), 0x6200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01AD
        gbc.setState(0x392, 0xa91b, 0x2500, 0x3574, 0x8ef8, 0xa423, 0x1, 0x0);
        gbc.writeMem(0x392, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa91b);
        EXPECT(gbc.pc(), 0x394);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01AF
        gbc.setState(0x90b4, 0x7f3f, 0x4f80, 0x1a67, 0x2fd2, 0x7737, 0x0, 0x1);
        gbc.writeMem(0x90b4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7f3f);
        EXPECT(gbc.pc(), 0x90b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90b4), 0xcb);
        EXPECT(gbc.readMem(0x90b5), 0xb3);
        // CB B3 01B0
        gbc.setState(0xea2, 0xd799, 0x3e20, 0xb4e7, 0x1675, 0xaf7e, 0x1, 0x0);
        gbc.writeMem(0xea2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xd799);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01B1
        gbc.setState(0x91b7, 0x9d1b, 0xebb0, 0x19f7, 0x8cb7, 0x11b5, 0x0, 0x0);
        gbc.writeMem(0x91b7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9d1b);
        EXPECT(gbc.pc(), 0x91b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b7), 0xcb);
        EXPECT(gbc.readMem(0x91b8), 0xb3);
        // CB B3 01B2
        gbc.setState(0xeded, 0x9980, 0x5490, 0x8aa4, 0x5dc6, 0x5b46, 0x1, 0x0);
        gbc.writeMem(0xeded, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9980);
        EXPECT(gbc.pc(), 0xedef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeded), 0xcb);
        EXPECT(gbc.readMem(0xedee), 0xb3);
        // CB B3 01B3
        gbc.setState(0x257b, 0x41ae, 0xa6f0, 0x2a6, 0x9943, 0x1a00, 0x1, 0x1);
        gbc.writeMem(0x257b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x41ae);
        EXPECT(gbc.pc(), 0x257d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01B4
        gbc.setState(0xe596, 0xfb41, 0xafd0, 0x8488, 0x1b3b, 0xdf17, 0x1, 0x1);
        gbc.writeMem(0xe596, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfb41);
        EXPECT(gbc.pc(), 0xe598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe596), 0xcb);
        EXPECT(gbc.readMem(0xe597), 0xb3);
        // CB B3 01B5
        gbc.setState(0xb863, 0x76ac, 0x7e50, 0xc868, 0x43e8, 0x963e, 0x1, 0x1);
        gbc.writeMem(0xb863, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x76ac);
        EXPECT(gbc.pc(), 0xb865);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb863), 0xcb);
        EXPECT(gbc.readMem(0xb864), 0xb3);
        // CB B3 01B6
        gbc.setState(0x4e72, 0xee15, 0x3d00, 0x3146, 0xe05e, 0x9ae4, 0x1, 0x0);
        gbc.writeMem(0x4e72, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xee15);
        EXPECT(gbc.pc(), 0x4e74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01B7
        gbc.setState(0xe43e, 0xf73, 0x1ef0, 0xd204, 0x46b4, 0x1814, 0x1, 0x0);
        gbc.writeMem(0xe43e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf73);
        EXPECT(gbc.pc(), 0xe440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe43e), 0xcb);
        EXPECT(gbc.readMem(0xe43f), 0xb3);
        // CB B3 01B8
        gbc.setState(0xb8c8, 0x35f5, 0xda0, 0x76eb, 0xb589, 0xf366, 0x1, 0x0);
        gbc.writeMem(0xb8c8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x35f5);
        EXPECT(gbc.pc(), 0xb8ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8c8), 0xcb);
        EXPECT(gbc.readMem(0xb8c9), 0xb3);
        // CB B3 01BA
        gbc.setState(0x6087, 0x30b4, 0x7550, 0x3798, 0xf564, 0xdd7, 0x0, 0x1);
        gbc.writeMem(0x6087, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x30b4);
        EXPECT(gbc.pc(), 0x6089);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01BB
        gbc.setState(0xd644, 0x9333, 0x2e30, 0xb66, 0x1042, 0x969d, 0x1, 0x0);
        gbc.writeMem(0xd644, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x9333);
        EXPECT(gbc.pc(), 0xd646);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd644), 0xcb);
        EXPECT(gbc.readMem(0xd645), 0xb3);
        // CB B3 01BC
        gbc.setState(0x3ac1, 0x74c, 0xbfc0, 0x9e55, 0xd8b4, 0x83a5, 0x0, 0x1);
        gbc.writeMem(0x3ac1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x74c);
        EXPECT(gbc.pc(), 0x3ac3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01BD
        gbc.setState(0xc01, 0x51ce, 0xd3a0, 0x76be, 0xb03, 0x86a4, 0x1, 0x1);
        gbc.writeMem(0xc01, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x51ce);
        EXPECT(gbc.pc(), 0xc03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01BF
        gbc.setState(0x1f6d, 0xc643, 0x8610, 0xf40, 0xc204, 0x980, 0x0, 0x0);
        gbc.writeMem(0x1f6d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc643);
        EXPECT(gbc.pc(), 0x1f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01C0
        gbc.setState(0x94c3, 0xdb37, 0x6fe0, 0xa309, 0x686, 0x9c18, 0x1, 0x1);
        gbc.writeMem(0x94c3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdb37);
        EXPECT(gbc.pc(), 0x94c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c3), 0xcb);
        EXPECT(gbc.readMem(0x94c4), 0xb3);
        // CB B3 01C1
        gbc.setState(0xeab2, 0xb755, 0x6790, 0x2562, 0xd8af, 0x20c5, 0x1, 0x0);
        gbc.writeMem(0xeab2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb755);
        EXPECT(gbc.pc(), 0xeab4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeab2), 0xcb);
        EXPECT(gbc.readMem(0xeab3), 0xb3);
        // CB B3 01C2
        gbc.setState(0x31e4, 0x80aa, 0xce20, 0x1ec3, 0xfac2, 0x2c54, 0x1, 0x1);
        gbc.writeMem(0x31e4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x80aa);
        EXPECT(gbc.pc(), 0x31e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01C3
        gbc.setState(0x5ffb, 0xacdc, 0xa7a0, 0x96fd, 0x87e2, 0xd6da, 0x0, 0x1);
        gbc.writeMem(0x5ffb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xacdc);
        EXPECT(gbc.pc(), 0x5ffd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01C4
        gbc.setState(0xdcf0, 0xaf63, 0xfda0, 0x6650, 0xcc28, 0x375b, 0x0, 0x1);
        gbc.writeMem(0xdcf0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xaf63);
        EXPECT(gbc.pc(), 0xdcf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf0), 0xcb);
        EXPECT(gbc.readMem(0xdcf1), 0xb3);
        // CB B3 01C5
        gbc.setState(0x7e15, 0x4cfa, 0x8dd0, 0xbfb0, 0x9f9e, 0x6e06, 0x1, 0x0);
        gbc.writeMem(0x7e15, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4cfa);
        EXPECT(gbc.pc(), 0x7e17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01C6
        gbc.setState(0x68fb, 0x1f5a, 0xf1b0, 0x1353, 0x40ff, 0x4b0f, 0x0, 0x0);
        gbc.writeMem(0x68fb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1f5a);
        EXPECT(gbc.pc(), 0x68fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01C7
        gbc.setState(0x28eb, 0x4118, 0x33c0, 0xdc32, 0x2f7f, 0xf14e, 0x1, 0x1);
        gbc.writeMem(0x28eb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4118);
        EXPECT(gbc.pc(), 0x28ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01C8
        gbc.setState(0x462c, 0x7b60, 0x3800, 0x2a39, 0x280d, 0x4c22, 0x0, 0x0);
        gbc.writeMem(0x462c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7b60);
        EXPECT(gbc.pc(), 0x462e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01C9
        gbc.setState(0x2f19, 0xe66a, 0x90f0, 0x3eb1, 0x1cd9, 0xa4d7, 0x0, 0x1);
        gbc.writeMem(0x2f19, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe66a);
        EXPECT(gbc.pc(), 0x2f1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01CA
        gbc.setState(0x5f3f, 0x9a1, 0x81a0, 0x51e2, 0x1bdb, 0xae20, 0x0, 0x1);
        gbc.writeMem(0x5f3f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9a1);
        EXPECT(gbc.pc(), 0x5f41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01CB
        gbc.setState(0x938d, 0xe1f4, 0x6c90, 0xd849, 0x83be, 0xc477, 0x0, 0x0);
        gbc.writeMem(0x938d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe1f4);
        EXPECT(gbc.pc(), 0x938f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x938d), 0xcb);
        EXPECT(gbc.readMem(0x938e), 0xb3);
        // CB B3 01CC
        gbc.setState(0x409c, 0xe77c, 0xa8a0, 0xa150, 0xebb9, 0x7acb, 0x0, 0x0);
        gbc.writeMem(0x409c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe77c);
        EXPECT(gbc.pc(), 0x409e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01CD
        gbc.setState(0x3f95, 0xa842, 0x8870, 0x82d0, 0xd188, 0xe780, 0x0, 0x1);
        gbc.writeMem(0x3f95, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa842);
        EXPECT(gbc.pc(), 0x3f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01CE
        gbc.setState(0x67e3, 0x529c, 0x7830, 0xc248, 0x1a0a, 0xf162, 0x1, 0x1);
        gbc.writeMem(0x67e3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x529c);
        EXPECT(gbc.pc(), 0x67e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01CF
        gbc.setState(0x138a, 0x9f49, 0xb8d0, 0x37bb, 0xa7b3, 0xf209, 0x0, 0x0);
        gbc.writeMem(0x138a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9f49);
        EXPECT(gbc.pc(), 0x138c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01D0
        gbc.setState(0x1e71, 0xc98, 0x8850, 0x7581, 0x7380, 0x6bd5, 0x1, 0x0);
        gbc.writeMem(0x1e71, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc98);
        EXPECT(gbc.pc(), 0x1e73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01D1
        gbc.setState(0xe2e5, 0x80af, 0x3320, 0x20dc, 0x45be, 0xcc0b, 0x1, 0x1);
        gbc.writeMem(0xe2e5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x80af);
        EXPECT(gbc.pc(), 0xe2e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2e5), 0xcb);
        EXPECT(gbc.readMem(0xe2e6), 0xb3);
        // CB B3 01D2
        gbc.setState(0xe61d, 0x9ab4, 0x5220, 0x591f, 0x4230, 0xa57e, 0x0, 0x0);
        gbc.writeMem(0xe61d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9ab4);
        EXPECT(gbc.pc(), 0xe61f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe61d), 0xcb);
        EXPECT(gbc.readMem(0xe61e), 0xb3);
        // CB B3 01D3
        gbc.setState(0xd628, 0x24d9, 0x4860, 0x71cc, 0x145a, 0x6207, 0x0, 0x1);
        gbc.writeMem(0xd628, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x24d9);
        EXPECT(gbc.pc(), 0xd62a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd628), 0xcb);
        EXPECT(gbc.readMem(0xd629), 0xb3);
        // CB B3 01D4
        gbc.setState(0x1e26, 0xb448, 0xafc0, 0x67a5, 0x4b6f, 0x53b3, 0x1, 0x1);
        gbc.writeMem(0x1e26, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb448);
        EXPECT(gbc.pc(), 0x1e28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01D5
        gbc.setState(0x7236, 0x55f4, 0xfd0, 0xac07, 0x7e98, 0x378c, 0x1, 0x0);
        gbc.writeMem(0x7236, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x55f4);
        EXPECT(gbc.pc(), 0x7238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01D6
        gbc.setState(0x5166, 0x896c, 0xf490, 0xe593, 0x611c, 0x31dd, 0x1, 0x0);
        gbc.writeMem(0x5166, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x896c);
        EXPECT(gbc.pc(), 0x5168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01D7
        gbc.setState(0xd6bb, 0xa544, 0x1250, 0xec20, 0x957c, 0x2cf8, 0x0, 0x1);
        gbc.writeMem(0xd6bb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa544);
        EXPECT(gbc.pc(), 0xd6bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6bb), 0xcb);
        EXPECT(gbc.readMem(0xd6bc), 0xb3);
        // CB B3 01D8
        gbc.setState(0xc70f, 0x21da, 0xbc00, 0xcae7, 0xd076, 0xeadf, 0x0, 0x1);
        gbc.writeMem(0xc70f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x21da);
        EXPECT(gbc.pc(), 0xc711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70f), 0xcb);
        EXPECT(gbc.readMem(0xc710), 0xb3);
        // CB B3 01D9
        gbc.setState(0xb03, 0xa642, 0xab0, 0x1024, 0x7009, 0x8ab4, 0x1, 0x1);
        gbc.writeMem(0xb03, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa642);
        EXPECT(gbc.pc(), 0xb05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01DA
        gbc.setState(0xa34d, 0x7c60, 0xc90, 0x764, 0x667b, 0x8f62, 0x0, 0x1);
        gbc.writeMem(0xa34d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x7c60);
        EXPECT(gbc.pc(), 0xa34f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa34d), 0xcb);
        EXPECT(gbc.readMem(0xa34e), 0xb3);
        // CB B3 01DB
        gbc.setState(0x357e, 0x4ba3, 0x2f00, 0x1089, 0xdfd5, 0x7173, 0x0, 0x1);
        gbc.writeMem(0x357e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4ba3);
        EXPECT(gbc.pc(), 0x3580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01DC
        gbc.setState(0x24c7, 0xf9d3, 0x82a0, 0x78a7, 0x1bdf, 0xa112, 0x0, 0x0);
        gbc.writeMem(0x24c7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf9d3);
        EXPECT(gbc.pc(), 0x24c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01DD
        gbc.setState(0x2b22, 0x3b14, 0x9900, 0xff88, 0xd67d, 0xc987, 0x0, 0x0);
        gbc.writeMem(0x2b22, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3b14);
        EXPECT(gbc.pc(), 0x2b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01DE
        gbc.setState(0xcbda, 0xa128, 0x6ca0, 0x97e4, 0xd070, 0x77c0, 0x1, 0x1);
        gbc.writeMem(0xcbda, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa128);
        EXPECT(gbc.pc(), 0xcbdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbda), 0xcb);
        EXPECT(gbc.readMem(0xcbdb), 0xb3);
        // CB B3 01DF
        gbc.setState(0xe128, 0xe139, 0x2ac0, 0xcfc4, 0xbdc3, 0xa356, 0x0, 0x1);
        gbc.writeMem(0xe128, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe139);
        EXPECT(gbc.pc(), 0xe12a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe128), 0xcb);
        EXPECT(gbc.readMem(0xe129), 0xb3);
        // CB B3 01E0
        gbc.setState(0x93b8, 0x5239, 0x9570, 0x3b67, 0x7c7f, 0x1c0d, 0x1, 0x1);
        gbc.writeMem(0x93b8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5239);
        EXPECT(gbc.pc(), 0x93ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93b8), 0xcb);
        EXPECT(gbc.readMem(0x93b9), 0xb3);
        // CB B3 01E1
        gbc.setState(0x8f35, 0xd646, 0xfb00, 0xaad8, 0x8d75, 0x9466, 0x0, 0x1);
        gbc.writeMem(0x8f35, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd646);
        EXPECT(gbc.pc(), 0x8f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f35), 0xcb);
        EXPECT(gbc.readMem(0x8f36), 0xb3);
        // CB B3 01E2
        gbc.setState(0xa39a, 0x9ce2, 0xac70, 0xcfb8, 0xfe0, 0xacf3, 0x1, 0x0);
        gbc.writeMem(0xa39a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9ce2);
        EXPECT(gbc.pc(), 0xa39c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa39a), 0xcb);
        EXPECT(gbc.readMem(0xa39b), 0xb3);
        // CB B3 01E3
        gbc.setState(0x5508, 0x7d9c, 0x3d50, 0xd94f, 0x3f3b, 0xcf5b, 0x1, 0x1);
        gbc.writeMem(0x5508, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7d9c);
        EXPECT(gbc.pc(), 0x550a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01E4
        gbc.setState(0x715e, 0x4828, 0x5020, 0xdf7e, 0x5535, 0xc4ac, 0x1, 0x0);
        gbc.writeMem(0x715e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4828);
        EXPECT(gbc.pc(), 0x7160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01E5
        gbc.setState(0x946e, 0xce9a, 0xc320, 0xd70f, 0xfdbe, 0xfbe3, 0x0, 0x0);
        gbc.writeMem(0x946e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xce9a);
        EXPECT(gbc.pc(), 0x9470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x946e), 0xcb);
        EXPECT(gbc.readMem(0x946f), 0xb3);
        // CB B3 01E7
        gbc.setState(0x8063, 0x233, 0xd2a0, 0x5039, 0xa2d3, 0xd867, 0x0, 0x0);
        gbc.writeMem(0x8063, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x233);
        EXPECT(gbc.pc(), 0x8065);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8063), 0xcb);
        EXPECT(gbc.readMem(0x8064), 0xb3);
        // CB B3 01E8
        gbc.setState(0x910b, 0x2c3e, 0x89a0, 0xe8d, 0xbd7f, 0x2ef0, 0x0, 0x1);
        gbc.writeMem(0x910b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2c3e);
        EXPECT(gbc.pc(), 0x910d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x910b), 0xcb);
        EXPECT(gbc.readMem(0x910c), 0xb3);
        // CB B3 01E9
        gbc.setState(0x24d1, 0xa2bf, 0x5ec0, 0xdcd4, 0xc003, 0x33e2, 0x1, 0x1);
        gbc.writeMem(0x24d1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa2bf);
        EXPECT(gbc.pc(), 0x24d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01EA
        gbc.setState(0x2da6, 0x3ecb, 0x8600, 0x8227, 0xfaca, 0x7457, 0x0, 0x0);
        gbc.writeMem(0x2da6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3ecb);
        EXPECT(gbc.pc(), 0x2da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01EB
        gbc.setState(0x7d5e, 0x4c71, 0x8730, 0xccfd, 0x7e3d, 0x393b, 0x0, 0x1);
        gbc.writeMem(0x7d5e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4c71);
        EXPECT(gbc.pc(), 0x7d60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01EC
        gbc.setState(0x5ac7, 0x4981, 0xcd90, 0x8e86, 0x4f11, 0x69bd, 0x1, 0x1);
        gbc.writeMem(0x5ac7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x4981);
        EXPECT(gbc.pc(), 0x5ac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01ED
        gbc.setState(0x1b2b, 0xd318, 0xc480, 0x56f, 0x3d5f, 0xe930, 0x0, 0x1);
        gbc.writeMem(0x1b2b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd318);
        EXPECT(gbc.pc(), 0x1b2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01EE
        gbc.setState(0xa838, 0x7a9b, 0xaa70, 0x86b3, 0x3ae7, 0x5ba5, 0x1, 0x0);
        gbc.writeMem(0xa838, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7a9b);
        EXPECT(gbc.pc(), 0xa83a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa838), 0xcb);
        EXPECT(gbc.readMem(0xa839), 0xb3);
        // CB B3 01EF
        gbc.setState(0x8181, 0x234b, 0x7180, 0xf527, 0x51e7, 0xa1b1, 0x1, 0x0);
        gbc.writeMem(0x8181, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x234b);
        EXPECT(gbc.pc(), 0x8183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8181), 0xcb);
        EXPECT(gbc.readMem(0x8182), 0xb3);
        // CB B3 01F0
        gbc.setState(0x8c21, 0x4688, 0x5a0, 0x45b6, 0xe741, 0x93e6, 0x1, 0x1);
        gbc.writeMem(0x8c21, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4688);
        EXPECT(gbc.pc(), 0x8c23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c21), 0xcb);
        EXPECT(gbc.readMem(0x8c22), 0xb3);
        // CB B3 01F1
        gbc.setState(0xc3, 0x2dbb, 0x67f0, 0x5ce7, 0x26ea, 0x63d4, 0x0, 0x0);
        gbc.writeMem(0xc3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2dbb);
        EXPECT(gbc.pc(), 0xc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01F2
        gbc.setState(0x9349, 0x9cbd, 0xe9a0, 0xd42d, 0xf94, 0x6964, 0x0, 0x1);
        gbc.writeMem(0x9349, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9cbd);
        EXPECT(gbc.pc(), 0x934b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9349), 0xcb);
        EXPECT(gbc.readMem(0x934a), 0xb3);
        // CB B3 01F3
        gbc.setState(0xe255, 0xb401, 0x6f80, 0x7dc8, 0xb8a5, 0xace6, 0x0, 0x0);
        gbc.writeMem(0xe255, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb401);
        EXPECT(gbc.pc(), 0xe257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe255), 0xcb);
        EXPECT(gbc.readMem(0xe256), 0xb3);
        // CB B3 01F4
        gbc.setState(0x5e71, 0x35a0, 0xef50, 0x9053, 0xd0a0, 0xd618, 0x0, 0x0);
        gbc.writeMem(0x5e71, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x35a0);
        EXPECT(gbc.pc(), 0x5e73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01F6
        gbc.setState(0xd9df, 0xfbaa, 0x91c0, 0xa4a, 0xd7f3, 0x75a7, 0x1, 0x1);
        gbc.writeMem(0xd9df, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfbaa);
        EXPECT(gbc.pc(), 0xd9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9df), 0xcb);
        EXPECT(gbc.readMem(0xd9e0), 0xb3);
        // CB B3 01F7
        gbc.setState(0x253a, 0x6033, 0x4b30, 0xbfbb, 0x670b, 0x5581, 0x1, 0x1);
        gbc.writeMem(0x253a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6033);
        EXPECT(gbc.pc(), 0x253c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01F8
        gbc.setState(0x2687, 0xeef5, 0x9700, 0xd623, 0x5a7b, 0xf3f1, 0x1, 0x1);
        gbc.writeMem(0x2687, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xeef5);
        EXPECT(gbc.pc(), 0x2689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01F9
        gbc.setState(0x40b9, 0x2f0, 0xe430, 0xb7b6, 0x8d6b, 0x2a25, 0x1, 0x1);
        gbc.writeMem(0x40b9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2f0);
        EXPECT(gbc.pc(), 0x40bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 01FA
        gbc.setState(0xafe4, 0xe973, 0xe260, 0xca92, 0x2a7f, 0xfa2b, 0x0, 0x1);
        gbc.writeMem(0xafe4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe973);
        EXPECT(gbc.pc(), 0xafe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe4), 0xcb);
        EXPECT(gbc.readMem(0xafe5), 0xb3);
        // CB B3 01FB
        gbc.setState(0x1556, 0x8bfe, 0x6340, 0x83e1, 0xba6, 0xe102, 0x1, 0x0);
        gbc.writeMem(0x1556, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8bfe);
        EXPECT(gbc.pc(), 0x1558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01FC
        gbc.setState(0x1e03, 0xbb32, 0xbc40, 0x7d37, 0xcbac, 0x9460, 0x0, 0x1);
        gbc.writeMem(0x1e03, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbb32);
        EXPECT(gbc.pc(), 0x1e05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 01FD
        gbc.setState(0x95c2, 0xdba1, 0x1b80, 0xaa5e, 0xbae5, 0x5c97, 0x0, 0x0);
        gbc.writeMem(0x95c2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xdba1);
        EXPECT(gbc.pc(), 0x95c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c2), 0xcb);
        EXPECT(gbc.readMem(0x95c3), 0xb3);
        // CB B3 01FE
        gbc.setState(0x9aea, 0xa9d7, 0xfc50, 0xedfb, 0x20a8, 0xb878, 0x1, 0x0);
        gbc.writeMem(0x9aea, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa9d7);
        EXPECT(gbc.pc(), 0x9aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aea), 0xcb);
        EXPECT(gbc.readMem(0x9aeb), 0xb3);
        // CB B3 01FF
        gbc.setState(0xcffe, 0x772, 0x5020, 0x4fac, 0x417d, 0x24a2, 0x0, 0x0);
        gbc.writeMem(0xcffe, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x772);
        EXPECT(gbc.pc(), 0xd000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcffe), 0xcb);
        EXPECT(gbc.readMem(0xcfff), 0xb3);
        // CB B3 0200
        gbc.setState(0x5051, 0x1bbd, 0x2a90, 0x19cd, 0x179d, 0x3018, 0x0, 0x1);
        gbc.writeMem(0x5051, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1bbd);
        EXPECT(gbc.pc(), 0x5053);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0201
        gbc.setState(0x7f75, 0x4a76, 0x3ec0, 0xda4d, 0x4abb, 0xf604, 0x0, 0x0);
        gbc.writeMem(0x7f75, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4a76);
        EXPECT(gbc.pc(), 0x7f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0202
        gbc.setState(0x6287, 0x789d, 0xeef0, 0x3333, 0xe46f, 0x3c09, 0x0, 0x0);
        gbc.writeMem(0x6287, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x789d);
        EXPECT(gbc.pc(), 0x6289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0203
        gbc.setState(0xabb3, 0x6be8, 0x52b0, 0xd0f4, 0xdad4, 0x165a, 0x1, 0x0);
        gbc.writeMem(0xabb3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6be8);
        EXPECT(gbc.pc(), 0xabb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb3), 0xcb);
        EXPECT(gbc.readMem(0xabb4), 0xb3);
        // CB B3 0204
        gbc.setState(0xcc7f, 0x91c, 0x1c30, 0xa5e0, 0x5a4e, 0xff93, 0x0, 0x1);
        gbc.writeMem(0xcc7f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x91c);
        EXPECT(gbc.pc(), 0xcc81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc7f), 0xcb);
        EXPECT(gbc.readMem(0xcc80), 0xb3);
        // CB B3 0205
        gbc.setState(0x9bb3, 0xab90, 0xa40, 0x18ff, 0x14b5, 0x8725, 0x0, 0x1);
        gbc.writeMem(0x9bb3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xab90);
        EXPECT(gbc.pc(), 0x9bb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb3), 0xcb);
        EXPECT(gbc.readMem(0x9bb4), 0xb3);
        // CB B3 0206
        gbc.setState(0x7b11, 0x2b50, 0x2660, 0xbdfe, 0x771c, 0xc554, 0x0, 0x0);
        gbc.writeMem(0x7b11, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x2b50);
        EXPECT(gbc.pc(), 0x7b13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0207
        gbc.setState(0xde0f, 0xee2d, 0x9c10, 0x5967, 0x8179, 0x4980, 0x0, 0x1);
        gbc.writeMem(0xde0f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xee2d);
        EXPECT(gbc.pc(), 0xde11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde0f), 0xcb);
        EXPECT(gbc.readMem(0xde10), 0xb3);
        // CB B3 0208
        gbc.setState(0x2ab7, 0x269a, 0xfd30, 0xd9ff, 0x7f60, 0x23f9, 0x1, 0x1);
        gbc.writeMem(0x2ab7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x269a);
        EXPECT(gbc.pc(), 0x2ab9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0209
        gbc.setState(0xb6a0, 0x7c0c, 0x54c0, 0x943a, 0x303, 0xb3f4, 0x1, 0x0);
        gbc.writeMem(0xb6a0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7c0c);
        EXPECT(gbc.pc(), 0xb6a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a0), 0xcb);
        EXPECT(gbc.readMem(0xb6a1), 0xb3);
        // CB B3 020A
        gbc.setState(0x7a8f, 0x4988, 0xe410, 0x3646, 0x3878, 0xc137, 0x1, 0x0);
        gbc.writeMem(0x7a8f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x4988);
        EXPECT(gbc.pc(), 0x7a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 020B
        gbc.setState(0xecbe, 0xee22, 0x65a0, 0x9101, 0x5217, 0x4575, 0x1, 0x0);
        gbc.writeMem(0xecbe, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xee22);
        EXPECT(gbc.pc(), 0xecc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbe), 0xcb);
        EXPECT(gbc.readMem(0xecbf), 0xb3);
        // CB B3 020C
        gbc.setState(0x412c, 0xcc69, 0xc750, 0xe2d6, 0x5fa0, 0xec02, 0x1, 0x0);
        gbc.writeMem(0x412c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcc69);
        EXPECT(gbc.pc(), 0x412e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 020D
        gbc.setState(0xab03, 0x4c26, 0x9000, 0x7244, 0xb6a5, 0x3b66, 0x0, 0x0);
        gbc.writeMem(0xab03, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x4c26);
        EXPECT(gbc.pc(), 0xab05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab03), 0xcb);
        EXPECT(gbc.readMem(0xab04), 0xb3);
        // CB B3 020E
        gbc.setState(0x546c, 0x6b35, 0x93a0, 0xff3b, 0x63b9, 0x162e, 0x0, 0x0);
        gbc.writeMem(0x546c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6b35);
        EXPECT(gbc.pc(), 0x546e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 020F
        gbc.setState(0x9443, 0xb61c, 0xcd90, 0xdf2a, 0xa43d, 0x7401, 0x0, 0x1);
        gbc.writeMem(0x9443, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb61c);
        EXPECT(gbc.pc(), 0x9445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9443), 0xcb);
        EXPECT(gbc.readMem(0x9444), 0xb3);
        // CB B3 0210
        gbc.setState(0x3623, 0x4e6d, 0x7ae0, 0x9085, 0xbde4, 0x8dee, 0x0, 0x1);
        gbc.writeMem(0x3623, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4e6d);
        EXPECT(gbc.pc(), 0x3625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0211
        gbc.setState(0x1818, 0xa132, 0x1680, 0xb192, 0x9d6d, 0x4433, 0x0, 0x1);
        gbc.writeMem(0x1818, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa132);
        EXPECT(gbc.pc(), 0x181a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0212
        gbc.setState(0x970c, 0x30c3, 0x9ab0, 0xeb49, 0x670, 0x3ca6, 0x1, 0x1);
        gbc.writeMem(0x970c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x30c3);
        EXPECT(gbc.pc(), 0x970e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x970c), 0xcb);
        EXPECT(gbc.readMem(0x970d), 0xb3);
        // CB B3 0213
        gbc.setState(0x30fb, 0x1431, 0xad10, 0xccd, 0x8ed4, 0x3f1, 0x0, 0x1);
        gbc.writeMem(0x30fb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1431);
        EXPECT(gbc.pc(), 0x30fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0214
        gbc.setState(0x41ad, 0x51f6, 0x93d0, 0xc2fe, 0xde31, 0xf284, 0x1, 0x0);
        gbc.writeMem(0x41ad, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x51f6);
        EXPECT(gbc.pc(), 0x41af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0215
        gbc.setState(0xcba8, 0x926d, 0xa3e0, 0x9ca6, 0xa0f0, 0x26c8, 0x0, 0x0);
        gbc.writeMem(0xcba8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x926d);
        EXPECT(gbc.pc(), 0xcbaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba8), 0xcb);
        EXPECT(gbc.readMem(0xcba9), 0xb3);
        // CB B3 0216
        gbc.setState(0x7ad, 0x7e0f, 0xa440, 0x7565, 0x639, 0xe296, 0x0, 0x0);
        gbc.writeMem(0x7ad, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7e0f);
        EXPECT(gbc.pc(), 0x7af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0217
        gbc.setState(0x8fdc, 0x79d6, 0xf5a0, 0x2ba1, 0xb0b0, 0x7dc6, 0x1, 0x1);
        gbc.writeMem(0x8fdc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x79d6);
        EXPECT(gbc.pc(), 0x8fde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fdc), 0xcb);
        EXPECT(gbc.readMem(0x8fdd), 0xb3);
        // CB B3 0218
        gbc.setState(0x9d9b, 0xa739, 0x3b10, 0x520d, 0x2813, 0x8b62, 0x1, 0x1);
        gbc.writeMem(0x9d9b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa739);
        EXPECT(gbc.pc(), 0x9d9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d9b), 0xcb);
        EXPECT(gbc.readMem(0x9d9c), 0xb3);
        // CB B3 0219
        gbc.setState(0xe025, 0x42fc, 0x25f0, 0x3600, 0x933d, 0xda1c, 0x1, 0x1);
        gbc.writeMem(0xe025, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x42fc);
        EXPECT(gbc.pc(), 0xe027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe025), 0xcb);
        EXPECT(gbc.readMem(0xe026), 0xb3);
        // CB B3 021A
        gbc.setState(0xe5d, 0x71ea, 0xed40, 0x13bb, 0x6887, 0xe0f2, 0x1, 0x1);
        gbc.writeMem(0xe5d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x71ea);
        EXPECT(gbc.pc(), 0xe5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 021B
        gbc.setState(0xab6d, 0xb696, 0x1e60, 0x3d59, 0xdf54, 0xcb8a, 0x0, 0x0);
        gbc.writeMem(0xab6d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb696);
        EXPECT(gbc.pc(), 0xab6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab6d), 0xcb);
        EXPECT(gbc.readMem(0xab6e), 0xb3);
        // CB B3 021C
        gbc.setState(0x68e, 0x4f47, 0xc5e0, 0xfe79, 0xa4c0, 0x636b, 0x1, 0x0);
        gbc.writeMem(0x68e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4f47);
        EXPECT(gbc.pc(), 0x690);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 021D
        gbc.setState(0x4674, 0x815, 0x340, 0x9453, 0xcb1d, 0x5568, 0x0, 0x1);
        gbc.writeMem(0x4674, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x815);
        EXPECT(gbc.pc(), 0x4676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 021E
        gbc.setState(0x2f93, 0x9efd, 0x9bd0, 0x3f0c, 0x9c92, 0xf817, 0x0, 0x1);
        gbc.writeMem(0x2f93, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9efd);
        EXPECT(gbc.pc(), 0x2f95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 021F
        gbc.setState(0x19e5, 0x8a88, 0x8510, 0x32b6, 0x8a4, 0x9a2e, 0x0, 0x1);
        gbc.writeMem(0x19e5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8a88);
        EXPECT(gbc.pc(), 0x19e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0220
        gbc.setState(0x33c1, 0x16a5, 0xc660, 0x969c, 0x6b67, 0x5536, 0x1, 0x0);
        gbc.writeMem(0x33c1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x16a5);
        EXPECT(gbc.pc(), 0x33c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0221
        gbc.setState(0xd9b2, 0x45e7, 0x56e0, 0xcf45, 0x4ef4, 0x8d42, 0x1, 0x0);
        gbc.writeMem(0xd9b2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x45e7);
        EXPECT(gbc.pc(), 0xd9b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9b2), 0xcb);
        EXPECT(gbc.readMem(0xd9b3), 0xb3);
        // CB B3 0222
        gbc.setState(0xe636, 0x7baa, 0x82a0, 0xac44, 0xc76c, 0x7e62, 0x1, 0x1);
        gbc.writeMem(0xe636, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x7baa);
        EXPECT(gbc.pc(), 0xe638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe636), 0xcb);
        EXPECT(gbc.readMem(0xe637), 0xb3);
        // CB B3 0223
        gbc.setState(0xdb25, 0x2b83, 0xdf50, 0x68ba, 0x2bda, 0x1545, 0x1, 0x0);
        gbc.writeMem(0xdb25, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2b83);
        EXPECT(gbc.pc(), 0xdb27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb25), 0xcb);
        EXPECT(gbc.readMem(0xdb26), 0xb3);
        // CB B3 0224
        gbc.setState(0x4073, 0xde4d, 0x24d0, 0xed38, 0x8322, 0x424e, 0x1, 0x0);
        gbc.writeMem(0x4073, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xde4d);
        EXPECT(gbc.pc(), 0x4075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0225
        gbc.setState(0x9807, 0x92f5, 0x8c80, 0x905c, 0x778e, 0xe80d, 0x0, 0x0);
        gbc.writeMem(0x9807, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x92f5);
        EXPECT(gbc.pc(), 0x9809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9807), 0xcb);
        EXPECT(gbc.readMem(0x9808), 0xb3);
        // CB B3 0226
        gbc.setState(0x778, 0xd093, 0x6350, 0x4f07, 0xf28c, 0x9b53, 0x1, 0x0);
        gbc.writeMem(0x778, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd093);
        EXPECT(gbc.pc(), 0x77a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0227
        gbc.setState(0x2083, 0xf8aa, 0x99f0, 0x8922, 0x7aba, 0x6b11, 0x0, 0x1);
        gbc.writeMem(0x2083, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf8aa);
        EXPECT(gbc.pc(), 0x2085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0228
        gbc.setState(0xe53d, 0x43c4, 0xa2f0, 0xd1a9, 0x3285, 0xbfec, 0x0, 0x0);
        gbc.writeMem(0xe53d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x43c4);
        EXPECT(gbc.pc(), 0xe53f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe53d), 0xcb);
        EXPECT(gbc.readMem(0xe53e), 0xb3);
        // CB B3 0229
        gbc.setState(0x1550, 0x8c3f, 0x8b70, 0xb2f8, 0x671d, 0x81c6, 0x0, 0x0);
        gbc.writeMem(0x1550, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8c3f);
        EXPECT(gbc.pc(), 0x1552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 022A
        gbc.setState(0x1fb7, 0xf2c2, 0x77b0, 0x66e, 0xf0f6, 0x44f6, 0x0, 0x1);
        gbc.writeMem(0x1fb7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xf2c2);
        EXPECT(gbc.pc(), 0x1fb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 022B
        gbc.setState(0x4b0f, 0x359f, 0xf330, 0xf3bb, 0x8f23, 0xb452, 0x1, 0x1);
        gbc.writeMem(0x4b0f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x359f);
        EXPECT(gbc.pc(), 0x4b11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 022C
        gbc.setState(0x322, 0x4032, 0xc790, 0xf706, 0x2b, 0x58d0, 0x0, 0x1);
        gbc.writeMem(0x322, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4032);
        EXPECT(gbc.pc(), 0x324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 022D
        gbc.setState(0x4a4e, 0x660a, 0x4040, 0x36d2, 0xe42e, 0x8d50, 0x1, 0x1);
        gbc.writeMem(0x4a4e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x660a);
        EXPECT(gbc.pc(), 0x4a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 022E
        gbc.setState(0xcee3, 0x1c15, 0x22d0, 0x31bd, 0x2be0, 0x9299, 0x1, 0x1);
        gbc.writeMem(0xcee3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1c15);
        EXPECT(gbc.pc(), 0xcee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcee3), 0xcb);
        EXPECT(gbc.readMem(0xcee4), 0xb3);
        // CB B3 022F
        gbc.setState(0x780a, 0xc9d8, 0x4010, 0xe61c, 0xab4b, 0x646, 0x1, 0x0);
        gbc.writeMem(0x780a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc9d8);
        EXPECT(gbc.pc(), 0x780c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0230
        gbc.setState(0x49ef, 0xf86b, 0x7940, 0xd2ec, 0xaeed, 0x5a28, 0x1, 0x0);
        gbc.writeMem(0x49ef, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf86b);
        EXPECT(gbc.pc(), 0x49f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0231
        gbc.setState(0x349a, 0xb089, 0xf290, 0x7aa1, 0x28f6, 0xb7ce, 0x0, 0x0);
        gbc.writeMem(0x349a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb089);
        EXPECT(gbc.pc(), 0x349c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0232
        gbc.setState(0x4f9c, 0x38d1, 0x1ff0, 0x59c4, 0x65a1, 0x5967, 0x1, 0x0);
        gbc.writeMem(0x4f9c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x38d1);
        EXPECT(gbc.pc(), 0x4f9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0233
        gbc.setState(0xe611, 0x9d6, 0xd600, 0x1471, 0x5786, 0xbecf, 0x1, 0x1);
        gbc.writeMem(0xe611, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9d6);
        EXPECT(gbc.pc(), 0xe613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe611), 0xcb);
        EXPECT(gbc.readMem(0xe612), 0xb3);
        // CB B3 0234
        gbc.setState(0xd1, 0x49bb, 0xcd30, 0xb5a3, 0x2e84, 0x4579, 0x1, 0x1);
        gbc.writeMem(0xd1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x49bb);
        EXPECT(gbc.pc(), 0xd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0235
        gbc.setState(0x831b, 0xac8e, 0x8ae0, 0x6ea0, 0x1907, 0x5c2e, 0x0, 0x0);
        gbc.writeMem(0x831b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xac8e);
        EXPECT(gbc.pc(), 0x831d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831b), 0xcb);
        EXPECT(gbc.readMem(0x831c), 0xb3);
        // CB B3 0236
        gbc.setState(0xe659, 0xfa70, 0x1b30, 0x9794, 0x8bbd, 0xa797, 0x0, 0x1);
        gbc.writeMem(0xe659, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xfa70);
        EXPECT(gbc.pc(), 0xe65b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe659), 0xcb);
        EXPECT(gbc.readMem(0xe65a), 0xb3);
        // CB B3 0237
        gbc.setState(0x136b, 0xdbf0, 0x3cc0, 0xafd1, 0x401d, 0x23a6, 0x1, 0x1);
        gbc.writeMem(0x136b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xdbf0);
        EXPECT(gbc.pc(), 0x136d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0238
        gbc.setState(0xa1fd, 0xde57, 0x6120, 0xa4a4, 0xf565, 0xab45, 0x0, 0x1);
        gbc.writeMem(0xa1fd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xde57);
        EXPECT(gbc.pc(), 0xa1ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1fd), 0xcb);
        EXPECT(gbc.readMem(0xa1fe), 0xb3);
        // CB B3 023A
        gbc.setState(0xa0dd, 0x4768, 0x6b00, 0x4e1f, 0x26e4, 0x25cd, 0x1, 0x1);
        gbc.writeMem(0xa0dd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4768);
        EXPECT(gbc.pc(), 0xa0df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0dd), 0xcb);
        EXPECT(gbc.readMem(0xa0de), 0xb3);
        // CB B3 023B
        gbc.setState(0x20dc, 0x4c5, 0x71f0, 0x62cd, 0xf43d, 0x6a47, 0x0, 0x0);
        gbc.writeMem(0x20dc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4c5);
        EXPECT(gbc.pc(), 0x20de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 023C
        gbc.setState(0x4f68, 0x64be, 0x72a0, 0x9b6d, 0x1b07, 0x624b, 0x0, 0x0);
        gbc.writeMem(0x4f68, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x64be);
        EXPECT(gbc.pc(), 0x4f6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 023D
        gbc.setState(0xcb24, 0x5df8, 0x27b0, 0x4458, 0x90ce, 0x278f, 0x0, 0x0);
        gbc.writeMem(0xcb24, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5df8);
        EXPECT(gbc.pc(), 0xcb26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb24), 0xcb);
        EXPECT(gbc.readMem(0xcb25), 0xb3);
        // CB B3 023E
        gbc.setState(0x7301, 0x5e21, 0x6190, 0x2472, 0x2566, 0xcbbe, 0x1, 0x1);
        gbc.writeMem(0x7301, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5e21);
        EXPECT(gbc.pc(), 0x7303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 023F
        gbc.setState(0xe9a5, 0x6657, 0x4020, 0xccc, 0x668, 0x9632, 0x0, 0x0);
        gbc.writeMem(0xe9a5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6657);
        EXPECT(gbc.pc(), 0xe9a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a5), 0xcb);
        EXPECT(gbc.readMem(0xe9a6), 0xb3);
        // CB B3 0240
        gbc.setState(0xcf, 0x13fb, 0xab80, 0x636, 0xb6cf, 0xf5c9, 0x0, 0x1);
        gbc.writeMem(0xcf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x13fb);
        EXPECT(gbc.pc(), 0xd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0241
        gbc.setState(0x4b04, 0xfe78, 0x8430, 0x8d98, 0x4964, 0x8792, 0x1, 0x1);
        gbc.writeMem(0x4b04, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfe78);
        EXPECT(gbc.pc(), 0x4b06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0242
        gbc.setState(0x3681, 0xb2a, 0x63b0, 0x96fb, 0xe6a0, 0x8284, 0x1, 0x0);
        gbc.writeMem(0x3681, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb2a);
        EXPECT(gbc.pc(), 0x3683);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0243
        gbc.setState(0xdd38, 0x5fb3, 0xeaf0, 0x50df, 0xeb48, 0x2a53, 0x1, 0x1);
        gbc.writeMem(0xdd38, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5fb3);
        EXPECT(gbc.pc(), 0xdd3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd38), 0xcb);
        EXPECT(gbc.readMem(0xdd39), 0xb3);
        // CB B3 0244
        gbc.setState(0x121d, 0xc773, 0xa140, 0xc9a0, 0x775a, 0x4163, 0x0, 0x1);
        gbc.writeMem(0x121d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc773);
        EXPECT(gbc.pc(), 0x121f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0245
        gbc.setState(0x50de, 0x5765, 0xdeb0, 0xc3d, 0x3353, 0xf675, 0x0, 0x0);
        gbc.writeMem(0x50de, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5765);
        EXPECT(gbc.pc(), 0x50e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0246
        gbc.setState(0x3d9, 0x8a9f, 0xc0, 0xb855, 0x9294, 0xdcc3, 0x1, 0x0);
        gbc.writeMem(0x3d9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8a9f);
        EXPECT(gbc.pc(), 0x3db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0247
        gbc.setState(0xcc27, 0x1564, 0x4370, 0x91f1, 0x4450, 0x3e3d, 0x0, 0x0);
        gbc.writeMem(0xcc27, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1564);
        EXPECT(gbc.pc(), 0xcc29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc27), 0xcb);
        EXPECT(gbc.readMem(0xcc28), 0xb3);
        // CB B3 0248
        gbc.setState(0xbd39, 0x3843, 0x4340, 0x564f, 0x9b6a, 0x1fbf, 0x1, 0x0);
        gbc.writeMem(0xbd39, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3843);
        EXPECT(gbc.pc(), 0xbd3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd39), 0xcb);
        EXPECT(gbc.readMem(0xbd3a), 0xb3);
        // CB B3 0249
        gbc.setState(0xc49d, 0x71aa, 0x62a0, 0x2e96, 0x6ce8, 0x99ad, 0x0, 0x0);
        gbc.writeMem(0xc49d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x71aa);
        EXPECT(gbc.pc(), 0xc49f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc49d), 0xcb);
        EXPECT(gbc.readMem(0xc49e), 0xb3);
        // CB B3 024A
        gbc.setState(0x932a, 0x2490, 0x14f0, 0x8ec2, 0x9202, 0x351e, 0x0, 0x0);
        gbc.writeMem(0x932a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2490);
        EXPECT(gbc.pc(), 0x932c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932a), 0xcb);
        EXPECT(gbc.readMem(0x932b), 0xb3);
        // CB B3 024B
        gbc.setState(0x2be8, 0xdd82, 0x12e0, 0x8ecb, 0x7e5f, 0xbdeb, 0x1, 0x0);
        gbc.writeMem(0x2be8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdd82);
        EXPECT(gbc.pc(), 0x2bea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 024C
        gbc.setState(0x2cfe, 0x3b79, 0xcb70, 0x9329, 0x84f3, 0xaf79, 0x0, 0x0);
        gbc.writeMem(0x2cfe, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3b79);
        EXPECT(gbc.pc(), 0x2d00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 024D
        gbc.setState(0xdfb7, 0x1c35, 0x8400, 0x2d32, 0x9920, 0x8269, 0x0, 0x1);
        gbc.writeMem(0xdfb7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1c35);
        EXPECT(gbc.pc(), 0xdfb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfb7), 0xcb);
        EXPECT(gbc.readMem(0xdfb8), 0xb3);
        // CB B3 024E
        gbc.setState(0x4d36, 0x5028, 0x3210, 0x5f5, 0xe2f9, 0xaf1a, 0x1, 0x0);
        gbc.writeMem(0x4d36, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5028);
        EXPECT(gbc.pc(), 0x4d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 024F
        gbc.setState(0x4650, 0xb455, 0x20b0, 0xa6d6, 0x431a, 0x78df, 0x1, 0x1);
        gbc.writeMem(0x4650, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb455);
        EXPECT(gbc.pc(), 0x4652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0250
        gbc.setState(0xcb6f, 0x8da, 0xa6e0, 0xd0, 0x51b7, 0xba42, 0x0, 0x0);
        gbc.writeMem(0xcb6f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8da);
        EXPECT(gbc.pc(), 0xcb71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb6f), 0xcb);
        EXPECT(gbc.readMem(0xcb70), 0xb3);
        // CB B3 0251
        gbc.setState(0x6584, 0xdc82, 0xf430, 0x37f, 0xea04, 0x8f8a, 0x0, 0x1);
        gbc.writeMem(0x6584, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xdc82);
        EXPECT(gbc.pc(), 0x6586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0252
        gbc.setState(0xa08, 0x9816, 0x8970, 0x569c, 0x82fe, 0x26b9, 0x1, 0x0);
        gbc.writeMem(0xa08, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9816);
        EXPECT(gbc.pc(), 0xa0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0253
        gbc.setState(0xb14a, 0xb487, 0xa7d0, 0x58cf, 0x74b4, 0x5597, 0x1, 0x1);
        gbc.writeMem(0xb14a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb487);
        EXPECT(gbc.pc(), 0xb14c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb14a), 0xcb);
        EXPECT(gbc.readMem(0xb14b), 0xb3);
        // CB B3 0254
        gbc.setState(0x607c, 0x23c3, 0x7a60, 0xa4ad, 0xe78f, 0x47f9, 0x0, 0x1);
        gbc.writeMem(0x607c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x23c3);
        EXPECT(gbc.pc(), 0x607e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0255
        gbc.setState(0xe699, 0x8147, 0xc3c0, 0xbef9, 0x7991, 0xbb48, 0x0, 0x1);
        gbc.writeMem(0xe699, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8147);
        EXPECT(gbc.pc(), 0xe69b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe699), 0xcb);
        EXPECT(gbc.readMem(0xe69a), 0xb3);
        // CB B3 0256
        gbc.setState(0x54b6, 0x860a, 0x47e0, 0x73d8, 0xbe3, 0x4114, 0x1, 0x0);
        gbc.writeMem(0x54b6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x860a);
        EXPECT(gbc.pc(), 0x54b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0257
        gbc.setState(0x87c6, 0xb32f, 0xd050, 0x423d, 0x6dd7, 0xfa5f, 0x0, 0x0);
        gbc.writeMem(0x87c6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb32f);
        EXPECT(gbc.pc(), 0x87c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87c6), 0xcb);
        EXPECT(gbc.readMem(0x87c7), 0xb3);
        // CB B3 0258
        gbc.setState(0x2110, 0xde88, 0x2140, 0xcaf7, 0x8506, 0xdf4e, 0x0, 0x1);
        gbc.writeMem(0x2110, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xde88);
        EXPECT(gbc.pc(), 0x2112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0259
        gbc.setState(0x9cb1, 0x7ee9, 0xf990, 0x954c, 0xf6a0, 0xb3f, 0x1, 0x0);
        gbc.writeMem(0x9cb1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7ee9);
        EXPECT(gbc.pc(), 0x9cb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb1), 0xcb);
        EXPECT(gbc.readMem(0x9cb2), 0xb3);
        // CB B3 025A
        gbc.setState(0x9638, 0xb32b, 0x62c0, 0xbc83, 0x91a6, 0x9682, 0x0, 0x1);
        gbc.writeMem(0x9638, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb32b);
        EXPECT(gbc.pc(), 0x963a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9638), 0xcb);
        EXPECT(gbc.readMem(0x9639), 0xb3);
        // CB B3 025B
        gbc.setState(0x6fad, 0xaad, 0x5040, 0x4c62, 0xdfdc, 0xbee5, 0x1, 0x1);
        gbc.writeMem(0x6fad, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xaad);
        EXPECT(gbc.pc(), 0x6faf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 025C
        gbc.setState(0xac53, 0xe630, 0x5030, 0xe3d3, 0x70fa, 0x5d05, 0x0, 0x0);
        gbc.writeMem(0xac53, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe630);
        EXPECT(gbc.pc(), 0xac55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac53), 0xcb);
        EXPECT(gbc.readMem(0xac54), 0xb3);
        // CB B3 025D
        gbc.setState(0xd77a, 0x18c8, 0x1320, 0xa94a, 0xb13, 0xc8d2, 0x1, 0x1);
        gbc.writeMem(0xd77a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x18c8);
        EXPECT(gbc.pc(), 0xd77c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd77a), 0xcb);
        EXPECT(gbc.readMem(0xd77b), 0xb3);
        // CB B3 025E
        gbc.setState(0x87cd, 0x85bc, 0xbbd0, 0x4dcd, 0xd983, 0xe630, 0x0, 0x1);
        gbc.writeMem(0x87cd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x85bc);
        EXPECT(gbc.pc(), 0x87cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87cd), 0xcb);
        EXPECT(gbc.readMem(0x87ce), 0xb3);
        // CB B3 025F
        gbc.setState(0xcecb, 0x6a, 0xf540, 0xef2e, 0x7b60, 0xa2b4, 0x1, 0x0);
        gbc.writeMem(0xcecb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6a);
        EXPECT(gbc.pc(), 0xcecd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcecb), 0xcb);
        EXPECT(gbc.readMem(0xcecc), 0xb3);
        // CB B3 0260
        gbc.setState(0x8fa9, 0x62b1, 0x59f0, 0xffad, 0x9b6e, 0x72cd, 0x1, 0x1);
        gbc.writeMem(0x8fa9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x62b1);
        EXPECT(gbc.pc(), 0x8fab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa9), 0xcb);
        EXPECT(gbc.readMem(0x8faa), 0xb3);
        // CB B3 0261
        gbc.setState(0x5517, 0xf0fa, 0x9aa0, 0x96c2, 0x16d8, 0xa0fc, 0x0, 0x0);
        gbc.writeMem(0x5517, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf0fa);
        EXPECT(gbc.pc(), 0x5519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0262
        gbc.setState(0x77bc, 0x4904, 0x5630, 0x5bb7, 0x6f85, 0x55d4, 0x1, 0x0);
        gbc.writeMem(0x77bc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4904);
        EXPECT(gbc.pc(), 0x77be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0263
        gbc.setState(0xe611, 0x8a64, 0x9180, 0x8c00, 0x243, 0x747f, 0x1, 0x0);
        gbc.writeMem(0xe611, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8a64);
        EXPECT(gbc.pc(), 0xe613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe611), 0xcb);
        EXPECT(gbc.readMem(0xe612), 0xb3);
        // CB B3 0264
        gbc.setState(0x194c, 0x81a4, 0xa2a0, 0xe5f4, 0x16b1, 0xaf6c, 0x1, 0x1);
        gbc.writeMem(0x194c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x81a4);
        EXPECT(gbc.pc(), 0x194e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0265
        gbc.setState(0x2a5b, 0x7fa7, 0x2240, 0xb8a7, 0x6506, 0xe3db, 0x0, 0x1);
        gbc.writeMem(0x2a5b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7fa7);
        EXPECT(gbc.pc(), 0x2a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0266
        gbc.setState(0x52a, 0xab4d, 0x2410, 0x203f, 0x9133, 0x4226, 0x0, 0x0);
        gbc.writeMem(0x52a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xab4d);
        EXPECT(gbc.pc(), 0x52c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0267
        gbc.setState(0x7419, 0xa411, 0x8c0, 0x561f, 0xa04e, 0x6969, 0x1, 0x0);
        gbc.writeMem(0x7419, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xa411);
        EXPECT(gbc.pc(), 0x741b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0268
        gbc.setState(0x15e, 0xa4ad, 0xf200, 0xbffd, 0xc511, 0xda4, 0x1, 0x0);
        gbc.writeMem(0x15e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa4ad);
        EXPECT(gbc.pc(), 0x160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0269
        gbc.setState(0x2e22, 0xacbd, 0x3b90, 0x7d53, 0x647b, 0xf0f4, 0x0, 0x0);
        gbc.writeMem(0x2e22, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xacbd);
        EXPECT(gbc.pc(), 0x2e24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 026A
        gbc.setState(0x576d, 0xa300, 0x41a0, 0x77f1, 0x32f9, 0x1d69, 0x1, 0x1);
        gbc.writeMem(0x576d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xa300);
        EXPECT(gbc.pc(), 0x576f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 026B
        gbc.setState(0x814, 0x4a76, 0x5ae0, 0x8c98, 0x9681, 0xcc8c, 0x1, 0x0);
        gbc.writeMem(0x814, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4a76);
        EXPECT(gbc.pc(), 0x816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 026C
        gbc.setState(0x8d66, 0x828f, 0x8fb0, 0x9b97, 0x4ebe, 0x8c01, 0x1, 0x0);
        gbc.writeMem(0x8d66, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x828f);
        EXPECT(gbc.pc(), 0x8d68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d66), 0xcb);
        EXPECT(gbc.readMem(0x8d67), 0xb3);
        // CB B3 026D
        gbc.setState(0x5932, 0x7ceb, 0xceb0, 0x4c08, 0x80fe, 0x4c2a, 0x0, 0x1);
        gbc.writeMem(0x5932, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7ceb);
        EXPECT(gbc.pc(), 0x5934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 026E
        gbc.setState(0x7e68, 0x86e1, 0x6c80, 0x2d3, 0x2f55, 0x1475, 0x0, 0x1);
        gbc.writeMem(0x7e68, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x86e1);
        EXPECT(gbc.pc(), 0x7e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 026F
        gbc.setState(0x45db, 0x881f, 0x7370, 0xa1dd, 0xb93f, 0x878d, 0x1, 0x1);
        gbc.writeMem(0x45db, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x881f);
        EXPECT(gbc.pc(), 0x45dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0270
        gbc.setState(0x778, 0x3375, 0xb260, 0xb77d, 0x1e39, 0x35f9, 0x1, 0x0);
        gbc.writeMem(0x778, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3375);
        EXPECT(gbc.pc(), 0x77a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0271
        gbc.setState(0x8359, 0x971e, 0x9770, 0xcaa4, 0x1f4f, 0x9aa, 0x0, 0x1);
        gbc.writeMem(0x8359, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x971e);
        EXPECT(gbc.pc(), 0x835b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8359), 0xcb);
        EXPECT(gbc.readMem(0x835a), 0xb3);
        // CB B3 0272
        gbc.setState(0xb11c, 0x4d89, 0x2840, 0x131a, 0x387, 0x8716, 0x1, 0x1);
        gbc.writeMem(0xb11c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4d89);
        EXPECT(gbc.pc(), 0xb11e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11c), 0xcb);
        EXPECT(gbc.readMem(0xb11d), 0xb3);
        // CB B3 0273
        gbc.setState(0x5350, 0xa8bc, 0x4da0, 0xd01, 0x6f2b, 0x6b10, 0x1, 0x1);
        gbc.writeMem(0x5350, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa8bc);
        EXPECT(gbc.pc(), 0x5352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0274
        gbc.setState(0x2b1d, 0x4f13, 0xca0, 0x5921, 0xa9fa, 0xc137, 0x1, 0x1);
        gbc.writeMem(0x2b1d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x4f13);
        EXPECT(gbc.pc(), 0x2b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0275
        gbc.setState(0xb8a9, 0x8435, 0x14d0, 0xea0c, 0xd1d0, 0xe57b, 0x1, 0x1);
        gbc.writeMem(0xb8a9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8435);
        EXPECT(gbc.pc(), 0xb8ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a9), 0xcb);
        EXPECT(gbc.readMem(0xb8aa), 0xb3);
        // CB B3 0276
        gbc.setState(0xb375, 0x918b, 0x4cc0, 0x3e54, 0x2799, 0xf2c7, 0x1, 0x0);
        gbc.writeMem(0xb375, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x918b);
        EXPECT(gbc.pc(), 0xb377);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb375), 0xcb);
        EXPECT(gbc.readMem(0xb376), 0xb3);
        // CB B3 0277
        gbc.setState(0xca40, 0x3582, 0xe270, 0xff39, 0x3d90, 0x5840, 0x0, 0x0);
        gbc.writeMem(0xca40, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3582);
        EXPECT(gbc.pc(), 0xca42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca40), 0xcb);
        EXPECT(gbc.readMem(0xca41), 0xb3);
        // CB B3 0278
        gbc.setState(0x4631, 0x9710, 0xb180, 0xdfa6, 0x9901, 0x8c54, 0x0, 0x0);
        gbc.writeMem(0x4631, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9710);
        EXPECT(gbc.pc(), 0x4633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0279
        gbc.setState(0xe5d1, 0x190a, 0x36c0, 0x70a6, 0x48ee, 0x2f86, 0x1, 0x0);
        gbc.writeMem(0xe5d1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x190a);
        EXPECT(gbc.pc(), 0xe5d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d1), 0xcb);
        EXPECT(gbc.readMem(0xe5d2), 0xb3);
        // CB B3 027A
        gbc.setState(0x6647, 0x92de, 0x6080, 0x566e, 0xe824, 0xb212, 0x1, 0x0);
        gbc.writeMem(0x6647, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x92de);
        EXPECT(gbc.pc(), 0x6649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 027B
        gbc.setState(0x4e60, 0xb288, 0xda50, 0x993f, 0x16a2, 0xb0f9, 0x1, 0x1);
        gbc.writeMem(0x4e60, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb288);
        EXPECT(gbc.pc(), 0x4e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 027C
        gbc.setState(0x3f7c, 0x7b3d, 0x1e90, 0xcfd7, 0x2e68, 0x1101, 0x1, 0x0);
        gbc.writeMem(0x3f7c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7b3d);
        EXPECT(gbc.pc(), 0x3f7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 027D
        gbc.setState(0xc3ea, 0xa385, 0xe5d0, 0x68d6, 0x59fd, 0xfea3, 0x1, 0x0);
        gbc.writeMem(0xc3ea, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa385);
        EXPECT(gbc.pc(), 0xc3ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3ea), 0xcb);
        EXPECT(gbc.readMem(0xc3eb), 0xb3);
        // CB B3 027E
        gbc.setState(0xb7, 0x8511, 0xa570, 0x56f7, 0xdc83, 0x70fb, 0x1, 0x1);
        gbc.writeMem(0xb7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8511);
        EXPECT(gbc.pc(), 0xb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0280
        gbc.setState(0xabc0, 0xff52, 0xbf00, 0x6d5e, 0x6dc0, 0x69ab, 0x1, 0x1);
        gbc.writeMem(0xabc0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xff52);
        EXPECT(gbc.pc(), 0xabc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabc0), 0xcb);
        EXPECT(gbc.readMem(0xabc1), 0xb3);
        // CB B3 0281
        gbc.setState(0x393e, 0x73a, 0x1680, 0x76da, 0x24db, 0xab78, 0x0, 0x0);
        gbc.writeMem(0x393e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x73a);
        EXPECT(gbc.pc(), 0x3940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0282
        gbc.setState(0x7b9f, 0x8584, 0x8580, 0x3439, 0x14fd, 0x49ab, 0x1, 0x1);
        gbc.writeMem(0x7b9f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8584);
        EXPECT(gbc.pc(), 0x7ba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0283
        gbc.setState(0x916e, 0xd483, 0xd940, 0xe323, 0x1835, 0xcfae, 0x0, 0x1);
        gbc.writeMem(0x916e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd483);
        EXPECT(gbc.pc(), 0x9170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916e), 0xcb);
        EXPECT(gbc.readMem(0x916f), 0xb3);
        // CB B3 0285
        gbc.setState(0x2788, 0xb800, 0x5410, 0xe865, 0xa735, 0x64a0, 0x1, 0x1);
        gbc.writeMem(0x2788, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb800);
        EXPECT(gbc.pc(), 0x278a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0286
        gbc.setState(0x535, 0xc58, 0xe4c0, 0x3303, 0xf3e, 0x3673, 0x1, 0x1);
        gbc.writeMem(0x535, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc58);
        EXPECT(gbc.pc(), 0x537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0287
        gbc.setState(0xe561, 0xa62c, 0x50c0, 0x8303, 0xfa94, 0x6815, 0x1, 0x1);
        gbc.writeMem(0xe561, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa62c);
        EXPECT(gbc.pc(), 0xe563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe561), 0xcb);
        EXPECT(gbc.readMem(0xe562), 0xb3);
        // CB B3 0288
        gbc.setState(0x2d7a, 0x63d6, 0xe200, 0xb166, 0xbcc8, 0xe212, 0x0, 0x0);
        gbc.writeMem(0x2d7a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x63d6);
        EXPECT(gbc.pc(), 0x2d7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0289
        gbc.setState(0xbdd4, 0x50e6, 0xa1b0, 0x651c, 0x4df6, 0xf1de, 0x0, 0x0);
        gbc.writeMem(0xbdd4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x50e6);
        EXPECT(gbc.pc(), 0xbdd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdd4), 0xcb);
        EXPECT(gbc.readMem(0xbdd5), 0xb3);
        // CB B3 028A
        gbc.setState(0x4945, 0xe666, 0x42f0, 0x76de, 0xef28, 0x21e, 0x0, 0x1);
        gbc.writeMem(0x4945, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe666);
        EXPECT(gbc.pc(), 0x4947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 028B
        gbc.setState(0x6a37, 0xc8, 0x16e0, 0x89a8, 0x8660, 0x9087, 0x1, 0x1);
        gbc.writeMem(0x6a37, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc8);
        EXPECT(gbc.pc(), 0x6a39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 028C
        gbc.setState(0x2410, 0xf360, 0x6a30, 0xdcdc, 0x45ae, 0xad9c, 0x0, 0x0);
        gbc.writeMem(0x2410, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf360);
        EXPECT(gbc.pc(), 0x2412);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 028D
        gbc.setState(0xc2a9, 0x6e77, 0xef30, 0xcfea, 0xd052, 0xf1c7, 0x0, 0x0);
        gbc.writeMem(0xc2a9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6e77);
        EXPECT(gbc.pc(), 0xc2ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a9), 0xcb);
        EXPECT(gbc.readMem(0xc2aa), 0xb3);
        // CB B3 028E
        gbc.setState(0x2bde, 0x6229, 0x3ce0, 0xf755, 0xb8ff, 0x8236, 0x0, 0x1);
        gbc.writeMem(0x2bde, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6229);
        EXPECT(gbc.pc(), 0x2be0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 028F
        gbc.setState(0x6b2b, 0xc1f3, 0xd2b0, 0x1ba, 0x77a9, 0x8bb1, 0x1, 0x1);
        gbc.writeMem(0x6b2b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc1f3);
        EXPECT(gbc.pc(), 0x6b2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0290
        gbc.setState(0xe926, 0x537b, 0x1620, 0x92ae, 0xfb22, 0x4a16, 0x1, 0x1);
        gbc.writeMem(0xe926, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x537b);
        EXPECT(gbc.pc(), 0xe928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe926), 0xcb);
        EXPECT(gbc.readMem(0xe927), 0xb3);
        // CB B3 0291
        gbc.setState(0xc315, 0x540f, 0x4590, 0x7a8b, 0x80bc, 0x8585, 0x1, 0x0);
        gbc.writeMem(0xc315, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x540f);
        EXPECT(gbc.pc(), 0xc317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc315), 0xcb);
        EXPECT(gbc.readMem(0xc316), 0xb3);
        // CB B3 0292
        gbc.setState(0x38b, 0x3a59, 0xe550, 0xfbeb, 0x9e0b, 0xca18, 0x1, 0x1);
        gbc.writeMem(0x38b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3a59);
        EXPECT(gbc.pc(), 0x38d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0293
        gbc.setState(0xcc08, 0x462f, 0x60f0, 0x6acc, 0xa5f1, 0xd32, 0x0, 0x1);
        gbc.writeMem(0xcc08, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x462f);
        EXPECT(gbc.pc(), 0xcc0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc08), 0xcb);
        EXPECT(gbc.readMem(0xcc09), 0xb3);
        // CB B3 0295
        gbc.setState(0xc6b2, 0xedcd, 0x39a0, 0x869, 0xfbe0, 0xfba9, 0x1, 0x0);
        gbc.writeMem(0xc6b2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xedcd);
        EXPECT(gbc.pc(), 0xc6b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6b2), 0xcb);
        EXPECT(gbc.readMem(0xc6b3), 0xb3);
        // CB B3 0296
        gbc.setState(0x3093, 0x9b03, 0x9b60, 0x8e25, 0xb09e, 0xbd2, 0x1, 0x0);
        gbc.writeMem(0x3093, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9b03);
        EXPECT(gbc.pc(), 0x3095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0297
        gbc.setState(0xa222, 0xf73f, 0x3da0, 0x6d08, 0xb816, 0x2a38, 0x1, 0x0);
        gbc.writeMem(0xa222, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf73f);
        EXPECT(gbc.pc(), 0xa224);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa222), 0xcb);
        EXPECT(gbc.readMem(0xa223), 0xb3);
        // CB B3 0298
        gbc.setState(0xdb42, 0x73f0, 0xf850, 0xac28, 0x7c8d, 0xa2a8, 0x1, 0x1);
        gbc.writeMem(0xdb42, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x73f0);
        EXPECT(gbc.pc(), 0xdb44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb42), 0xcb);
        EXPECT(gbc.readMem(0xdb43), 0xb3);
        // CB B3 0299
        gbc.setState(0xb6b2, 0x5e9b, 0xdc80, 0x8b18, 0xa02b, 0xa0e5, 0x1, 0x1);
        gbc.writeMem(0xb6b2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5e9b);
        EXPECT(gbc.pc(), 0xb6b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b2), 0xcb);
        EXPECT(gbc.readMem(0xb6b3), 0xb3);
        // CB B3 029A
        gbc.setState(0x439d, 0x1be6, 0xe040, 0x9c73, 0xcba7, 0xda34, 0x1, 0x1);
        gbc.writeMem(0x439d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1be6);
        EXPECT(gbc.pc(), 0x439f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 029B
        gbc.setState(0xb694, 0x2212, 0x3af0, 0xe970, 0x5d2, 0x1c2b, 0x0, 0x1);
        gbc.writeMem(0xb694, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2212);
        EXPECT(gbc.pc(), 0xb696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb694), 0xcb);
        EXPECT(gbc.readMem(0xb695), 0xb3);
        // CB B3 029C
        gbc.setState(0x1ec8, 0xaa0f, 0x4760, 0x5bf6, 0x9069, 0x1bf, 0x1, 0x1);
        gbc.writeMem(0x1ec8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xaa0f);
        EXPECT(gbc.pc(), 0x1eca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 029D
        gbc.setState(0xc8e8, 0x31cc, 0xdaa0, 0x32f6, 0x81fa, 0x4dee, 0x1, 0x0);
        gbc.writeMem(0xc8e8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x31cc);
        EXPECT(gbc.pc(), 0xc8ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e8), 0xcb);
        EXPECT(gbc.readMem(0xc8e9), 0xb3);
        // CB B3 029E
        gbc.setState(0xe770, 0x4eb9, 0xb780, 0x588a, 0x4844, 0x38, 0x0, 0x0);
        gbc.writeMem(0xe770, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4eb9);
        EXPECT(gbc.pc(), 0xe772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe770), 0xcb);
        EXPECT(gbc.readMem(0xe771), 0xb3);
        // CB B3 029F
        gbc.setState(0x3c00, 0x13df, 0xae70, 0xe66f, 0x9a80, 0x66c5, 0x1, 0x0);
        gbc.writeMem(0x3c00, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x13df);
        EXPECT(gbc.pc(), 0x3c02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02A0
        gbc.setState(0x6f42, 0x2840, 0x8520, 0xb064, 0xffd3, 0x1ce4, 0x0, 0x1);
        gbc.writeMem(0x6f42, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2840);
        EXPECT(gbc.pc(), 0x6f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02A1
        gbc.setState(0xd9fd, 0x4675, 0x4b80, 0xc002, 0x164a, 0x86d3, 0x0, 0x0);
        gbc.writeMem(0xd9fd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4675);
        EXPECT(gbc.pc(), 0xd9ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fd), 0xcb);
        EXPECT(gbc.readMem(0xd9fe), 0xb3);
        // CB B3 02A2
        gbc.setState(0x55be, 0xb39b, 0xb470, 0x5f15, 0x1612, 0x31ee, 0x0, 0x1);
        gbc.writeMem(0x55be, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb39b);
        EXPECT(gbc.pc(), 0x55c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02A4
        gbc.setState(0xb208, 0x234, 0xd440, 0xc80a, 0x1774, 0xee2e, 0x0, 0x1);
        gbc.writeMem(0xb208, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x234);
        EXPECT(gbc.pc(), 0xb20a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb208), 0xcb);
        EXPECT(gbc.readMem(0xb209), 0xb3);
        // CB B3 02A6
        gbc.setState(0x16f3, 0xa001, 0x7400, 0xcee2, 0xd2a0, 0x6539, 0x1, 0x0);
        gbc.writeMem(0x16f3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa001);
        EXPECT(gbc.pc(), 0x16f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02A7
        gbc.setState(0x517d, 0x8f79, 0x83d0, 0x1ca5, 0x5b7a, 0x4641, 0x1, 0x1);
        gbc.writeMem(0x517d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8f79);
        EXPECT(gbc.pc(), 0x517f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02A8
        gbc.setState(0xdb26, 0xfd0e, 0x59d0, 0x1ccf, 0x5740, 0x981b, 0x1, 0x0);
        gbc.writeMem(0xdb26, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xfd0e);
        EXPECT(gbc.pc(), 0xdb28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb26), 0xcb);
        EXPECT(gbc.readMem(0xdb27), 0xb3);
        // CB B3 02A9
        gbc.setState(0x72a, 0x2cc0, 0x1b10, 0x98d6, 0x8ed7, 0xb7b7, 0x1, 0x1);
        gbc.writeMem(0x72a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2cc0);
        EXPECT(gbc.pc(), 0x72c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02AA
        gbc.setState(0x4bf8, 0x8766, 0x1290, 0x6203, 0x5ab2, 0x216b, 0x0, 0x0);
        gbc.writeMem(0x4bf8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8766);
        EXPECT(gbc.pc(), 0x4bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02AB
        gbc.setState(0x61dd, 0x8637, 0xadf0, 0xb49d, 0xf951, 0xb5c3, 0x0, 0x0);
        gbc.writeMem(0x61dd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8637);
        EXPECT(gbc.pc(), 0x61df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02AD
        gbc.setState(0x1c88, 0x32ad, 0xf730, 0xa81, 0x2210, 0xcbef, 0x0, 0x1);
        gbc.writeMem(0x1c88, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x32ad);
        EXPECT(gbc.pc(), 0x1c8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02AE
        gbc.setState(0x3a40, 0x7617, 0x6ff0, 0xdf81, 0xb5a2, 0x3467, 0x0, 0x1);
        gbc.writeMem(0x3a40, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7617);
        EXPECT(gbc.pc(), 0x3a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02AF
        gbc.setState(0x2c8f, 0x4d1a, 0x49d0, 0x3ea0, 0xd5bd, 0x5bce, 0x0, 0x1);
        gbc.writeMem(0x2c8f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4d1a);
        EXPECT(gbc.pc(), 0x2c91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02B0
        gbc.setState(0x93b1, 0x11f, 0xc920, 0x6be4, 0x1fd, 0xce91, 0x0, 0x0);
        gbc.writeMem(0x93b1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x11f);
        EXPECT(gbc.pc(), 0x93b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93b1), 0xcb);
        EXPECT(gbc.readMem(0x93b2), 0xb3);
        // CB B3 02B1
        gbc.setState(0x7d2e, 0x1071, 0x6360, 0x9537, 0x3712, 0x1c05, 0x0, 0x0);
        gbc.writeMem(0x7d2e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1071);
        EXPECT(gbc.pc(), 0x7d30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02B2
        gbc.setState(0x3764, 0xe50f, 0x4300, 0x35e6, 0x671e, 0x1e48, 0x1, 0x0);
        gbc.writeMem(0x3764, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe50f);
        EXPECT(gbc.pc(), 0x3766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02B3
        gbc.setState(0xa2a0, 0x7cae, 0x6a20, 0x39fd, 0x1996, 0x21c8, 0x0, 0x1);
        gbc.writeMem(0xa2a0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7cae);
        EXPECT(gbc.pc(), 0xa2a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2a0), 0xcb);
        EXPECT(gbc.readMem(0xa2a1), 0xb3);
        // CB B3 02B4
        gbc.setState(0x9cb6, 0x84ad, 0x5d10, 0x25d2, 0xfd8f, 0xd2f5, 0x1, 0x1);
        gbc.writeMem(0x9cb6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x84ad);
        EXPECT(gbc.pc(), 0x9cb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb6), 0xcb);
        EXPECT(gbc.readMem(0x9cb7), 0xb3);
        // CB B3 02B5
        gbc.setState(0x5e71, 0xfd9a, 0xc860, 0x3cdd, 0x251f, 0x510b, 0x1, 0x0);
        gbc.writeMem(0x5e71, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfd9a);
        EXPECT(gbc.pc(), 0x5e73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02B6
        gbc.setState(0x599d, 0x5905, 0x3810, 0xe0e, 0x9ee9, 0x6aa9, 0x0, 0x1);
        gbc.writeMem(0x599d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5905);
        EXPECT(gbc.pc(), 0x599f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02B7
        gbc.setState(0x5e5b, 0x3490, 0xafd0, 0x4973, 0xeacc, 0x3844, 0x0, 0x0);
        gbc.writeMem(0x5e5b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x3490);
        EXPECT(gbc.pc(), 0x5e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02B8
        gbc.setState(0x7f53, 0xfc22, 0x4c0, 0x4c57, 0x4d5e, 0x2c65, 0x0, 0x1);
        gbc.writeMem(0x7f53, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xfc22);
        EXPECT(gbc.pc(), 0x7f55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02B9
        gbc.setState(0xd4c, 0xfb0c, 0x11e0, 0x136e, 0x1af7, 0x5c6d, 0x1, 0x1);
        gbc.writeMem(0xd4c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfb0c);
        EXPECT(gbc.pc(), 0xd4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02BA
        gbc.setState(0x6784, 0x27f9, 0x7420, 0x8f9c, 0xf797, 0x4328, 0x1, 0x0);
        gbc.writeMem(0x6784, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x27f9);
        EXPECT(gbc.pc(), 0x6786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02BB
        gbc.setState(0xefc9, 0x5eba, 0xd620, 0x2f66, 0x685b, 0x908d, 0x1, 0x0);
        gbc.writeMem(0xefc9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5eba);
        EXPECT(gbc.pc(), 0xefcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc9), 0xcb);
        EXPECT(gbc.readMem(0xefca), 0xb3);
        // CB B3 02BC
        gbc.setState(0x18d5, 0xf9d9, 0x4b70, 0x6c3e, 0x63df, 0x7138, 0x1, 0x0);
        gbc.writeMem(0x18d5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf9d9);
        EXPECT(gbc.pc(), 0x18d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02BD
        gbc.setState(0x78a5, 0xe9af, 0x8d50, 0x9c05, 0xd6a7, 0xc443, 0x1, 0x1);
        gbc.writeMem(0x78a5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe9af);
        EXPECT(gbc.pc(), 0x78a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02BE
        gbc.setState(0xdcf3, 0xced8, 0x27b0, 0xc753, 0xa780, 0xb76d, 0x0, 0x1);
        gbc.writeMem(0xdcf3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xced8);
        EXPECT(gbc.pc(), 0xdcf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcf3), 0xcb);
        EXPECT(gbc.readMem(0xdcf4), 0xb3);
        // CB B3 02BF
        gbc.setState(0x4813, 0x4f26, 0x3d80, 0xf2a9, 0x355a, 0x1310, 0x0, 0x0);
        gbc.writeMem(0x4813, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4f26);
        EXPECT(gbc.pc(), 0x4815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02C0
        gbc.setState(0xa5f2, 0xb671, 0x3f00, 0x49b4, 0x357f, 0xffce, 0x0, 0x1);
        gbc.writeMem(0xa5f2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb671);
        EXPECT(gbc.pc(), 0xa5f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5f2), 0xcb);
        EXPECT(gbc.readMem(0xa5f3), 0xb3);
        // CB B3 02C1
        gbc.setState(0x5440, 0x3f54, 0xf3e0, 0xd20b, 0x7d12, 0x19ad, 0x0, 0x0);
        gbc.writeMem(0x5440, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3f54);
        EXPECT(gbc.pc(), 0x5442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02C2
        gbc.setState(0xb366, 0x4db7, 0xbaf0, 0xf756, 0x85a7, 0x2c72, 0x0, 0x1);
        gbc.writeMem(0xb366, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4db7);
        EXPECT(gbc.pc(), 0xb368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb366), 0xcb);
        EXPECT(gbc.readMem(0xb367), 0xb3);
        // CB B3 02C3
        gbc.setState(0xe549, 0x5189, 0x6270, 0x4a98, 0xc316, 0x3602, 0x1, 0x1);
        gbc.writeMem(0xe549, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5189);
        EXPECT(gbc.pc(), 0xe54b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe549), 0xcb);
        EXPECT(gbc.readMem(0xe54a), 0xb3);
        // CB B3 02C4
        gbc.setState(0x4e43, 0x6b01, 0xd4c0, 0xe92d, 0x822e, 0xdeb6, 0x1, 0x0);
        gbc.writeMem(0x4e43, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6b01);
        EXPECT(gbc.pc(), 0x4e45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02C5
        gbc.setState(0x83f2, 0x3a62, 0x2510, 0x5615, 0xafff, 0x87a7, 0x1, 0x1);
        gbc.writeMem(0x83f2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3a62);
        EXPECT(gbc.pc(), 0x83f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83f2), 0xcb);
        EXPECT(gbc.readMem(0x83f3), 0xb3);
        // CB B3 02C6
        gbc.setState(0xe499, 0xf904, 0x8390, 0x66d7, 0xf31c, 0x439b, 0x0, 0x0);
        gbc.writeMem(0xe499, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf904);
        EXPECT(gbc.pc(), 0xe49b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe499), 0xcb);
        EXPECT(gbc.readMem(0xe49a), 0xb3);
        // CB B3 02C7
        gbc.setState(0xe8cd, 0xa80c, 0xac0, 0xd15f, 0x31a3, 0x4b57, 0x1, 0x0);
        gbc.writeMem(0xe8cd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa80c);
        EXPECT(gbc.pc(), 0xe8cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8cd), 0xcb);
        EXPECT(gbc.readMem(0xe8ce), 0xb3);
        // CB B3 02C8
        gbc.setState(0x6537, 0xd963, 0x8130, 0x844a, 0x35e9, 0xc1f7, 0x0, 0x0);
        gbc.writeMem(0x6537, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd963);
        EXPECT(gbc.pc(), 0x6539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02C9
        gbc.setState(0xbd33, 0xb098, 0x7160, 0x8de9, 0x211c, 0xf6ce, 0x0, 0x0);
        gbc.writeMem(0xbd33, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb098);
        EXPECT(gbc.pc(), 0xbd35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd33), 0xcb);
        EXPECT(gbc.readMem(0xbd34), 0xb3);
        // CB B3 02CB
        gbc.setState(0x7add, 0xd0a5, 0xa350, 0x8995, 0x9290, 0xba30, 0x0, 0x0);
        gbc.writeMem(0x7add, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd0a5);
        EXPECT(gbc.pc(), 0x7adf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02CC
        gbc.setState(0x41f0, 0x38f3, 0x82e0, 0xb2c0, 0xb925, 0x2e17, 0x0, 0x1);
        gbc.writeMem(0x41f0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x38f3);
        EXPECT(gbc.pc(), 0x41f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02CF
        gbc.setState(0x4012, 0x8f41, 0x9950, 0xad5d, 0x3360, 0xbb22, 0x0, 0x0);
        gbc.writeMem(0x4012, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8f41);
        EXPECT(gbc.pc(), 0x4014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02D0
        gbc.setState(0x6fb8, 0xd2f3, 0x4470, 0x8106, 0x6095, 0x7f95, 0x0, 0x0);
        gbc.writeMem(0x6fb8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd2f3);
        EXPECT(gbc.pc(), 0x6fba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02D1
        gbc.setState(0xb22b, 0xfcd2, 0x2240, 0xc46b, 0x61c4, 0x8602, 0x1, 0x1);
        gbc.writeMem(0xb22b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xfcd2);
        EXPECT(gbc.pc(), 0xb22d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb22b), 0xcb);
        EXPECT(gbc.readMem(0xb22c), 0xb3);
        // CB B3 02D3
        gbc.setState(0x7c72, 0x4f6d, 0x74f0, 0x3fce, 0xaab1, 0x3ae1, 0x0, 0x0);
        gbc.writeMem(0x7c72, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4f6d);
        EXPECT(gbc.pc(), 0x7c74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02D4
        gbc.setState(0x67f9, 0xa060, 0xbef0, 0x4297, 0x8a84, 0xd3ff, 0x0, 0x1);
        gbc.writeMem(0x67f9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa060);
        EXPECT(gbc.pc(), 0x67fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02D5
        gbc.setState(0xd572, 0x7f5f, 0xea00, 0x92df, 0xb116, 0x885d, 0x0, 0x0);
        gbc.writeMem(0xd572, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7f5f);
        EXPECT(gbc.pc(), 0xd574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd572), 0xcb);
        EXPECT(gbc.readMem(0xd573), 0xb3);
        // CB B3 02D6
        gbc.setState(0x57f2, 0x2bfb, 0x8a50, 0xbc9, 0xac5, 0xbd1d, 0x0, 0x1);
        gbc.writeMem(0x57f2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2bfb);
        EXPECT(gbc.pc(), 0x57f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02D7
        gbc.setState(0x1ce2, 0xfcfe, 0x7450, 0x7ee1, 0x8104, 0x942f, 0x0, 0x0);
        gbc.writeMem(0x1ce2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xfcfe);
        EXPECT(gbc.pc(), 0x1ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02D8
        gbc.setState(0x76ec, 0x32d2, 0x7e90, 0xa73b, 0xb124, 0xcb7a, 0x0, 0x1);
        gbc.writeMem(0x76ec, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x32d2);
        EXPECT(gbc.pc(), 0x76ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02D9
        gbc.setState(0xea38, 0x3fcc, 0x96e0, 0xd751, 0x86b6, 0xf92f, 0x0, 0x1);
        gbc.writeMem(0xea38, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3fcc);
        EXPECT(gbc.pc(), 0xea3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea38), 0xcb);
        EXPECT(gbc.readMem(0xea39), 0xb3);
        // CB B3 02DA
        gbc.setState(0x7bd, 0xb705, 0x8800, 0x775b, 0xa320, 0x19d2, 0x1, 0x0);
        gbc.writeMem(0x7bd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xb705);
        EXPECT(gbc.pc(), 0x7bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02DB
        gbc.setState(0x63af, 0xedd8, 0xd850, 0x2bed, 0x161, 0xaf38, 0x1, 0x1);
        gbc.writeMem(0x63af, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xedd8);
        EXPECT(gbc.pc(), 0x63b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02DC
        gbc.setState(0x247, 0x82a0, 0x4df0, 0x5732, 0xf01, 0x8aae, 0x0, 0x1);
        gbc.writeMem(0x247, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x82a0);
        EXPECT(gbc.pc(), 0x249);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02DD
        gbc.setState(0xdfd3, 0xcfb, 0xc600, 0x4af2, 0x686c, 0x6bdb, 0x1, 0x1);
        gbc.writeMem(0xdfd3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xcfb);
        EXPECT(gbc.pc(), 0xdfd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfd3), 0xcb);
        EXPECT(gbc.readMem(0xdfd4), 0xb3);
        // CB B3 02DE
        gbc.setState(0x9fa5, 0x9870, 0x7740, 0xa434, 0x9730, 0x60a0, 0x1, 0x0);
        gbc.writeMem(0x9fa5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x9870);
        EXPECT(gbc.pc(), 0x9fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa5), 0xcb);
        EXPECT(gbc.readMem(0x9fa6), 0xb3);
        // CB B3 02DF
        gbc.setState(0xa924, 0x3a0a, 0x74a0, 0x82d, 0xe83e, 0x3cfb, 0x0, 0x1);
        gbc.writeMem(0xa924, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3a0a);
        EXPECT(gbc.pc(), 0xa926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa924), 0xcb);
        EXPECT(gbc.readMem(0xa925), 0xb3);
        // CB B3 02E0
        gbc.setState(0x4bfc, 0x26df, 0xced0, 0x212f, 0x4b70, 0xa6f7, 0x0, 0x0);
        gbc.writeMem(0x4bfc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x26df);
        EXPECT(gbc.pc(), 0x4bfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02E1
        gbc.setState(0x8cc8, 0xda59, 0x80d0, 0x5a15, 0x5c6b, 0xa589, 0x0, 0x0);
        gbc.writeMem(0x8cc8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xda59);
        EXPECT(gbc.pc(), 0x8cca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cc8), 0xcb);
        EXPECT(gbc.readMem(0x8cc9), 0xb3);
        // CB B3 02E2
        gbc.setState(0x6add, 0xc0d4, 0x8690, 0x2ea8, 0x741, 0xb4ce, 0x0, 0x0);
        gbc.writeMem(0x6add, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc0d4);
        EXPECT(gbc.pc(), 0x6adf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02E3
        gbc.setState(0xabc1, 0x6bfa, 0x14f0, 0x2bd6, 0xe4bd, 0xf95b, 0x0, 0x0);
        gbc.writeMem(0xabc1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6bfa);
        EXPECT(gbc.pc(), 0xabc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabc1), 0xcb);
        EXPECT(gbc.readMem(0xabc2), 0xb3);
        // CB B3 02E4
        gbc.setState(0x2337, 0xa301, 0xb890, 0x25b8, 0xc8c1, 0x64d0, 0x0, 0x1);
        gbc.writeMem(0x2337, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa301);
        EXPECT(gbc.pc(), 0x2339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02E5
        gbc.setState(0xaf62, 0x143e, 0xe7b0, 0x54df, 0xf2de, 0x3018, 0x0, 0x0);
        gbc.writeMem(0xaf62, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x143e);
        EXPECT(gbc.pc(), 0xaf64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf62), 0xcb);
        EXPECT(gbc.readMem(0xaf63), 0xb3);
        // CB B3 02E6
        gbc.setState(0xbed0, 0x3235, 0x38d0, 0x82d6, 0x49b, 0x1bc4, 0x0, 0x0);
        gbc.writeMem(0xbed0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3235);
        EXPECT(gbc.pc(), 0xbed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed0), 0xcb);
        EXPECT(gbc.readMem(0xbed1), 0xb3);
        // CB B3 02E7
        gbc.setState(0xbdf9, 0x44e3, 0xb440, 0xaa6a, 0x211d, 0x4c0d, 0x0, 0x0);
        gbc.writeMem(0xbdf9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x44e3);
        EXPECT(gbc.pc(), 0xbdfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf9), 0xcb);
        EXPECT(gbc.readMem(0xbdfa), 0xb3);
        // CB B3 02E8
        gbc.setState(0xdfde, 0x971f, 0x7ba0, 0x9e8d, 0xb068, 0xea44, 0x0, 0x0);
        gbc.writeMem(0xdfde, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x971f);
        EXPECT(gbc.pc(), 0xdfe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfde), 0xcb);
        EXPECT(gbc.readMem(0xdfdf), 0xb3);
        // CB B3 02E9
        gbc.setState(0x4b83, 0xc67f, 0xa6a0, 0x22fa, 0xf59c, 0xefec, 0x1, 0x1);
        gbc.writeMem(0x4b83, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc67f);
        EXPECT(gbc.pc(), 0x4b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02EA
        gbc.setState(0x3875, 0x6a3f, 0xa700, 0x37d8, 0x33a, 0xabf, 0x0, 0x1);
        gbc.writeMem(0x3875, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6a3f);
        EXPECT(gbc.pc(), 0x3877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02EB
        gbc.setState(0xb98, 0x8835, 0xd0a0, 0x95bb, 0x9910, 0xfec5, 0x1, 0x0);
        gbc.writeMem(0xb98, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8835);
        EXPECT(gbc.pc(), 0xb9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02EC
        gbc.setState(0x6835, 0x2069, 0x6500, 0xfeb7, 0xaa7a, 0x3975, 0x0, 0x0);
        gbc.writeMem(0x6835, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2069);
        EXPECT(gbc.pc(), 0x6837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02ED
        gbc.setState(0xb954, 0xd2d7, 0xcf50, 0x81d3, 0xebf4, 0xc8e0, 0x0, 0x1);
        gbc.writeMem(0xb954, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd2d7);
        EXPECT(gbc.pc(), 0xb956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb954), 0xcb);
        EXPECT(gbc.readMem(0xb955), 0xb3);
        // CB B3 02EE
        gbc.setState(0x2fed, 0x2b96, 0x95d0, 0xf91d, 0x98e0, 0xda62, 0x1, 0x0);
        gbc.writeMem(0x2fed, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2b96);
        EXPECT(gbc.pc(), 0x2fef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02EF
        gbc.setState(0x49c4, 0x531d, 0x7710, 0xa6ff, 0x48a0, 0xf3e5, 0x0, 0x1);
        gbc.writeMem(0x49c4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x531d);
        EXPECT(gbc.pc(), 0x49c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02F0
        gbc.setState(0xd928, 0xadef, 0x7ac0, 0x6c49, 0xbbbc, 0xade3, 0x1, 0x1);
        gbc.writeMem(0xd928, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xadef);
        EXPECT(gbc.pc(), 0xd92a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd928), 0xcb);
        EXPECT(gbc.readMem(0xd929), 0xb3);
        // CB B3 02F1
        gbc.setState(0x97cf, 0x3c3a, 0x8d20, 0x0, 0x6051, 0xae9c, 0x1, 0x0);
        gbc.writeMem(0x97cf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3c3a);
        EXPECT(gbc.pc(), 0x97d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97cf), 0xcb);
        EXPECT(gbc.readMem(0x97d0), 0xb3);
        // CB B3 02F2
        gbc.setState(0x11de, 0xb497, 0xf120, 0x803b, 0x1029, 0xa04, 0x1, 0x1);
        gbc.writeMem(0x11de, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb497);
        EXPECT(gbc.pc(), 0x11e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02F3
        gbc.setState(0xe481, 0x68bf, 0xbdd0, 0xdc0d, 0x4d3, 0xa496, 0x0, 0x0);
        gbc.writeMem(0xe481, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x68bf);
        EXPECT(gbc.pc(), 0xe483);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe481), 0xcb);
        EXPECT(gbc.readMem(0xe482), 0xb3);
        // CB B3 02F4
        gbc.setState(0xbc97, 0xaed1, 0x7500, 0xe0c4, 0x3ba, 0x4334, 0x1, 0x0);
        gbc.writeMem(0xbc97, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xaed1);
        EXPECT(gbc.pc(), 0xbc99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc97), 0xcb);
        EXPECT(gbc.readMem(0xbc98), 0xb3);
        // CB B3 02F5
        gbc.setState(0x2906, 0x2e06, 0x41c0, 0xe8c4, 0x27c8, 0x84f3, 0x0, 0x1);
        gbc.writeMem(0x2906, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2e06);
        EXPECT(gbc.pc(), 0x2908);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 02F6
        gbc.setState(0x8f19, 0x3343, 0x3f50, 0x2862, 0x64f0, 0xa82c, 0x1, 0x1);
        gbc.writeMem(0x8f19, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3343);
        EXPECT(gbc.pc(), 0x8f1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f19), 0xcb);
        EXPECT(gbc.readMem(0x8f1a), 0xb3);
        // CB B3 02F7
        gbc.setState(0x8cac, 0x4d6, 0x5860, 0xc7f7, 0xaaca, 0x714a, 0x0, 0x0);
        gbc.writeMem(0x8cac, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4d6);
        EXPECT(gbc.pc(), 0x8cae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cac), 0xcb);
        EXPECT(gbc.readMem(0x8cad), 0xb3);
        // CB B3 02F8
        gbc.setState(0xb674, 0x27b8, 0xd8f0, 0xa2ec, 0xc04a, 0xcdbd, 0x0, 0x0);
        gbc.writeMem(0xb674, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x27b8);
        EXPECT(gbc.pc(), 0xb676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb674), 0xcb);
        EXPECT(gbc.readMem(0xb675), 0xb3);
        // CB B3 02F9
        gbc.setState(0x132, 0xcd0b, 0x1130, 0x7ee7, 0x70b9, 0x82d7, 0x1, 0x1);
        gbc.writeMem(0x132, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcd0b);
        EXPECT(gbc.pc(), 0x134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02FA
        gbc.setState(0x191d, 0x5286, 0x8b70, 0x417, 0xa228, 0x22b6, 0x0, 0x1);
        gbc.writeMem(0x191d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5286);
        EXPECT(gbc.pc(), 0x191f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02FB
        gbc.setState(0x7bb, 0x5e6a, 0x3850, 0x740, 0xe0c0, 0xf234, 0x0, 0x0);
        gbc.writeMem(0x7bb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5e6a);
        EXPECT(gbc.pc(), 0x7bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02FC
        gbc.setState(0x13c1, 0x866a, 0x20f0, 0x761, 0x34ef, 0xb7e9, 0x0, 0x1);
        gbc.writeMem(0x13c1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x866a);
        EXPECT(gbc.pc(), 0x13c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02FD
        gbc.setState(0x1ff2, 0x62d9, 0x36d0, 0x6a23, 0xb075, 0x646d, 0x0, 0x0);
        gbc.writeMem(0x1ff2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x62d9);
        EXPECT(gbc.pc(), 0x1ff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 02FF
        gbc.setState(0x22fb, 0xdc17, 0xfe60, 0xea4d, 0x1fe3, 0x3731, 0x1, 0x1);
        gbc.writeMem(0x22fb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xdc17);
        EXPECT(gbc.pc(), 0x22fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0300
        gbc.setState(0x4270, 0x6b6, 0x9af0, 0xe264, 0xe0d2, 0x79e, 0x1, 0x0);
        gbc.writeMem(0x4270, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6b6);
        EXPECT(gbc.pc(), 0x4272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0301
        gbc.setState(0xc64d, 0x547b, 0x5e80, 0xabe3, 0x26aa, 0xc5c2, 0x1, 0x1);
        gbc.writeMem(0xc64d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x547b);
        EXPECT(gbc.pc(), 0xc64f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc64d), 0xcb);
        EXPECT(gbc.readMem(0xc64e), 0xb3);
        // CB B3 0304
        gbc.setState(0x6241, 0xcf59, 0xa130, 0x809, 0xeac4, 0xa0d1, 0x0, 0x1);
        gbc.writeMem(0x6241, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xcf59);
        EXPECT(gbc.pc(), 0x6243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0305
        gbc.setState(0x68f0, 0xb51e, 0x38c0, 0x109, 0x688e, 0xe80e, 0x1, 0x0);
        gbc.writeMem(0x68f0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb51e);
        EXPECT(gbc.pc(), 0x68f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0306
        gbc.setState(0x4f7f, 0x5c6c, 0x5b30, 0xf0b, 0xd817, 0x3169, 0x1, 0x0);
        gbc.writeMem(0x4f7f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5c6c);
        EXPECT(gbc.pc(), 0x4f81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0307
        gbc.setState(0x6160, 0x1128, 0xd50, 0x8740, 0xb815, 0xb76d, 0x0, 0x0);
        gbc.writeMem(0x6160, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1128);
        EXPECT(gbc.pc(), 0x6162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0308
        gbc.setState(0x73e3, 0xf5c4, 0xd6f0, 0xbc6d, 0xf308, 0x257d, 0x1, 0x0);
        gbc.writeMem(0x73e3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf5c4);
        EXPECT(gbc.pc(), 0x73e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0309
        gbc.setState(0x27f3, 0x3e5f, 0xb360, 0xb436, 0x511, 0x2567, 0x1, 0x0);
        gbc.writeMem(0x27f3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x3e5f);
        EXPECT(gbc.pc(), 0x27f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 030A
        gbc.setState(0x37ef, 0x2aa, 0x60c0, 0x4eb7, 0x9e44, 0xc214, 0x0, 0x0);
        gbc.writeMem(0x37ef, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2aa);
        EXPECT(gbc.pc(), 0x37f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 030B
        gbc.setState(0x1269, 0xf797, 0xded0, 0x4af6, 0x1f26, 0x5b16, 0x1, 0x1);
        gbc.writeMem(0x1269, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf797);
        EXPECT(gbc.pc(), 0x126b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 030C
        gbc.setState(0x92a9, 0x7459, 0x66b0, 0xb773, 0xc66e, 0xe212, 0x0, 0x0);
        gbc.writeMem(0x92a9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7459);
        EXPECT(gbc.pc(), 0x92ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92a9), 0xcb);
        EXPECT(gbc.readMem(0x92aa), 0xb3);
        // CB B3 030D
        gbc.setState(0x6e38, 0xfa20, 0x2ac0, 0x5190, 0xaad2, 0x1dd3, 0x1, 0x0);
        gbc.writeMem(0x6e38, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xfa20);
        EXPECT(gbc.pc(), 0x6e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 030E
        gbc.setState(0xccde, 0x5971, 0xe6f0, 0x411a, 0x2ab5, 0xd54a, 0x0, 0x1);
        gbc.writeMem(0xccde, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5971);
        EXPECT(gbc.pc(), 0xcce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccde), 0xcb);
        EXPECT(gbc.readMem(0xccdf), 0xb3);
        // CB B3 030F
        gbc.setState(0x6543, 0xcb07, 0xaf40, 0xc24e, 0xe728, 0x6a99, 0x0, 0x1);
        gbc.writeMem(0x6543, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcb07);
        EXPECT(gbc.pc(), 0x6545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0310
        gbc.setState(0x6788, 0x442c, 0x9270, 0x1b4c, 0x6c32, 0xbff0, 0x0, 0x1);
        gbc.writeMem(0x6788, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x442c);
        EXPECT(gbc.pc(), 0x678a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0311
        gbc.setState(0x2a3f, 0x77d4, 0xd730, 0x4f62, 0xc619, 0xebb4, 0x0, 0x1);
        gbc.writeMem(0x2a3f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x77d4);
        EXPECT(gbc.pc(), 0x2a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0312
        gbc.setState(0x793b, 0xaa6, 0xe360, 0xf5fb, 0x5bf0, 0xf1d6, 0x0, 0x1);
        gbc.writeMem(0x793b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xaa6);
        EXPECT(gbc.pc(), 0x793d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0313
        gbc.setState(0x9630, 0xdce0, 0xa090, 0x673f, 0x12b7, 0xc6d2, 0x1, 0x0);
        gbc.writeMem(0x9630, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xdce0);
        EXPECT(gbc.pc(), 0x9632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9630), 0xcb);
        EXPECT(gbc.readMem(0x9631), 0xb3);
        // CB B3 0314
        gbc.setState(0x73e5, 0xbc15, 0xae00, 0x9c9d, 0xc009, 0xd3c6, 0x0, 0x1);
        gbc.writeMem(0x73e5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xbc15);
        EXPECT(gbc.pc(), 0x73e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0315
        gbc.setState(0x23da, 0xa75a, 0xaea0, 0x51cc, 0x6f70, 0x26dd, 0x1, 0x0);
        gbc.writeMem(0x23da, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa75a);
        EXPECT(gbc.pc(), 0x23dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0316
        gbc.setState(0xa7a2, 0x374a, 0x8590, 0xe5df, 0x9a32, 0xb804, 0x0, 0x1);
        gbc.writeMem(0xa7a2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x374a);
        EXPECT(gbc.pc(), 0xa7a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7a2), 0xcb);
        EXPECT(gbc.readMem(0xa7a3), 0xb3);
        // CB B3 0317
        gbc.setState(0xe36b, 0x2ce3, 0xf440, 0xca5c, 0x380, 0x198e, 0x0, 0x0);
        gbc.writeMem(0xe36b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x2ce3);
        EXPECT(gbc.pc(), 0xe36d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe36b), 0xcb);
        EXPECT(gbc.readMem(0xe36c), 0xb3);
        // CB B3 0318
        gbc.setState(0xb99d, 0xbeee, 0xe9e0, 0x7ee7, 0xc4dc, 0xc930, 0x0, 0x1);
        gbc.writeMem(0xb99d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbeee);
        EXPECT(gbc.pc(), 0xb99f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb99d), 0xcb);
        EXPECT(gbc.readMem(0xb99e), 0xb3);
        // CB B3 0319
        gbc.setState(0xa829, 0x63ae, 0xd0a0, 0x15d, 0x96c4, 0xa15, 0x0, 0x0);
        gbc.writeMem(0xa829, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x63ae);
        EXPECT(gbc.pc(), 0xa82b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa829), 0xcb);
        EXPECT(gbc.readMem(0xa82a), 0xb3);
        // CB B3 031A
        gbc.setState(0xcc0d, 0x6282, 0x2400, 0x729f, 0x2715, 0x6d64, 0x1, 0x0);
        gbc.writeMem(0xcc0d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6282);
        EXPECT(gbc.pc(), 0xcc0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc0d), 0xcb);
        EXPECT(gbc.readMem(0xcc0e), 0xb3);
        // CB B3 031B
        gbc.setState(0x1950, 0xee1a, 0x7940, 0x577c, 0x2dc9, 0x4b46, 0x1, 0x0);
        gbc.writeMem(0x1950, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xee1a);
        EXPECT(gbc.pc(), 0x1952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 031C
        gbc.setState(0xda6c, 0x934b, 0x3d80, 0xf582, 0xf936, 0xf9c7, 0x0, 0x0);
        gbc.writeMem(0xda6c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x934b);
        EXPECT(gbc.pc(), 0xda6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda6c), 0xcb);
        EXPECT(gbc.readMem(0xda6d), 0xb3);
        // CB B3 031D
        gbc.setState(0xaef8, 0xb113, 0x9f70, 0x1a62, 0x5581, 0xd7e4, 0x0, 0x1);
        gbc.writeMem(0xaef8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb113);
        EXPECT(gbc.pc(), 0xaefa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef8), 0xcb);
        EXPECT(gbc.readMem(0xaef9), 0xb3);
        // CB B3 031E
        gbc.setState(0x247a, 0xef37, 0x30b0, 0x2c1d, 0x413, 0xbf37, 0x1, 0x1);
        gbc.writeMem(0x247a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xef37);
        EXPECT(gbc.pc(), 0x247c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 031F
        gbc.setState(0xbc48, 0x9e79, 0xa950, 0x9cd4, 0xc2f3, 0xe4a3, 0x1, 0x1);
        gbc.writeMem(0xbc48, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9e79);
        EXPECT(gbc.pc(), 0xbc4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc48), 0xcb);
        EXPECT(gbc.readMem(0xbc49), 0xb3);
        // CB B3 0320
        gbc.setState(0x3730, 0xa985, 0xde20, 0x880d, 0x205, 0xa095, 0x1, 0x0);
        gbc.writeMem(0x3730, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa985);
        EXPECT(gbc.pc(), 0x3732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0321
        gbc.setState(0xdc1d, 0x45f0, 0xad10, 0xa8ab, 0xe8a2, 0xd336, 0x1, 0x1);
        gbc.writeMem(0xdc1d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x45f0);
        EXPECT(gbc.pc(), 0xdc1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc1d), 0xcb);
        EXPECT(gbc.readMem(0xdc1e), 0xb3);
        // CB B3 0322
        gbc.setState(0x3bf6, 0x8b11, 0x94b0, 0x5df8, 0xa71f, 0xc2da, 0x1, 0x1);
        gbc.writeMem(0x3bf6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8b11);
        EXPECT(gbc.pc(), 0x3bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0323
        gbc.setState(0xbe94, 0xfb1e, 0x6f00, 0xa7c7, 0x7fd, 0x8b34, 0x1, 0x0);
        gbc.writeMem(0xbe94, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xfb1e);
        EXPECT(gbc.pc(), 0xbe96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe94), 0xcb);
        EXPECT(gbc.readMem(0xbe95), 0xb3);
        // CB B3 0324
        gbc.setState(0x2076, 0x4ccc, 0xf5f0, 0xdc7f, 0x8762, 0x12c, 0x0, 0x0);
        gbc.writeMem(0x2076, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4ccc);
        EXPECT(gbc.pc(), 0x2078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0325
        gbc.setState(0x5adc, 0x2939, 0x7960, 0xf6dc, 0x3df4, 0x75d2, 0x0, 0x1);
        gbc.writeMem(0x5adc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2939);
        EXPECT(gbc.pc(), 0x5ade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0326
        gbc.setState(0x3fce, 0x85fc, 0xd470, 0xeb6f, 0x9b09, 0xea71, 0x0, 0x1);
        gbc.writeMem(0x3fce, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x85fc);
        EXPECT(gbc.pc(), 0x3fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0327
        gbc.setState(0xd9d3, 0x3076, 0x1960, 0x345, 0x67c7, 0x9bc, 0x1, 0x0);
        gbc.writeMem(0xd9d3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3076);
        EXPECT(gbc.pc(), 0xd9d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9d3), 0xcb);
        EXPECT(gbc.readMem(0xd9d4), 0xb3);
        // CB B3 0328
        gbc.setState(0x6496, 0x599a, 0xf230, 0xe1ad, 0x3a62, 0x37bb, 0x0, 0x1);
        gbc.writeMem(0x6496, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x599a);
        EXPECT(gbc.pc(), 0x6498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 032B
        gbc.setState(0x4923, 0x67f6, 0x5fb0, 0x63e6, 0xe801, 0xb81f, 0x1, 0x1);
        gbc.writeMem(0x4923, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x67f6);
        EXPECT(gbc.pc(), 0x4925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 032C
        gbc.setState(0x6e3c, 0x758c, 0xb1c0, 0xd46b, 0xbeac, 0xa1f3, 0x0, 0x0);
        gbc.writeMem(0x6e3c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x758c);
        EXPECT(gbc.pc(), 0x6e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 032D
        gbc.setState(0xd0d0, 0x9ac4, 0xc8a0, 0x6416, 0xb4f, 0xc6e3, 0x1, 0x0);
        gbc.writeMem(0xd0d0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9ac4);
        EXPECT(gbc.pc(), 0xd0d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0d0), 0xcb);
        EXPECT(gbc.readMem(0xd0d1), 0xb3);
        // CB B3 032E
        gbc.setState(0xef42, 0xc250, 0x9b40, 0x1462, 0x3486, 0x233a, 0x1, 0x0);
        gbc.writeMem(0xef42, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc250);
        EXPECT(gbc.pc(), 0xef44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef42), 0xcb);
        EXPECT(gbc.readMem(0xef43), 0xb3);
        // CB B3 032F
        gbc.setState(0x1e64, 0xfc4a, 0xa9c0, 0x2999, 0x3129, 0xcd70, 0x0, 0x0);
        gbc.writeMem(0x1e64, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xfc4a);
        EXPECT(gbc.pc(), 0x1e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0330
        gbc.setState(0x1680, 0x7f54, 0xcdd0, 0xd18b, 0xe85c, 0xbd8c, 0x1, 0x0);
        gbc.writeMem(0x1680, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7f54);
        EXPECT(gbc.pc(), 0x1682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0331
        gbc.setState(0xa1f5, 0xf5bf, 0x5530, 0xa31b, 0x41ac, 0x539f, 0x0, 0x1);
        gbc.writeMem(0xa1f5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf5bf);
        EXPECT(gbc.pc(), 0xa1f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f5), 0xcb);
        EXPECT(gbc.readMem(0xa1f6), 0xb3);
        // CB B3 0332
        gbc.setState(0x1b28, 0xf536, 0x9820, 0xf32b, 0x9009, 0xf65a, 0x0, 0x0);
        gbc.writeMem(0x1b28, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf536);
        EXPECT(gbc.pc(), 0x1b2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0333
        gbc.setState(0x726e, 0x5102, 0x3510, 0x5b25, 0xc21a, 0xb4ef, 0x0, 0x1);
        gbc.writeMem(0x726e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x5102);
        EXPECT(gbc.pc(), 0x7270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0334
        gbc.setState(0x4e29, 0xa488, 0x8040, 0xd6a8, 0xf495, 0x1f18, 0x1, 0x0);
        gbc.writeMem(0x4e29, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa488);
        EXPECT(gbc.pc(), 0x4e2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0335
        gbc.setState(0xd94d, 0x4cea, 0xcf20, 0xf891, 0x99, 0x2c0c, 0x0, 0x0);
        gbc.writeMem(0xd94d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4cea);
        EXPECT(gbc.pc(), 0xd94f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd94d), 0xcb);
        EXPECT(gbc.readMem(0xd94e), 0xb3);
        // CB B3 0336
        gbc.setState(0x15e2, 0xc5cc, 0x660, 0xe2ca, 0xb95a, 0xaf6b, 0x1, 0x1);
        gbc.writeMem(0x15e2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xc5cc);
        EXPECT(gbc.pc(), 0x15e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0337
        gbc.setState(0xabf6, 0x3292, 0xb0c0, 0xd388, 0x8e0b, 0x7889, 0x1, 0x0);
        gbc.writeMem(0xabf6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3292);
        EXPECT(gbc.pc(), 0xabf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabf6), 0xcb);
        EXPECT(gbc.readMem(0xabf7), 0xb3);
        // CB B3 0338
        gbc.setState(0x531c, 0x6c1c, 0xc630, 0xca64, 0x536e, 0xc7b5, 0x0, 0x1);
        gbc.writeMem(0x531c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6c1c);
        EXPECT(gbc.pc(), 0x531e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0339
        gbc.setState(0xca92, 0x5726, 0xe870, 0xb8ec, 0x985, 0x320f, 0x1, 0x1);
        gbc.writeMem(0xca92, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5726);
        EXPECT(gbc.pc(), 0xca94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca92), 0xcb);
        EXPECT(gbc.readMem(0xca93), 0xb3);
        // CB B3 033A
        gbc.setState(0x8412, 0xc8a0, 0x9030, 0x9ffa, 0x3a9b, 0xd3a0, 0x0, 0x0);
        gbc.writeMem(0x8412, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc8a0);
        EXPECT(gbc.pc(), 0x8414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8412), 0xcb);
        EXPECT(gbc.readMem(0x8413), 0xb3);
        // CB B3 033B
        gbc.setState(0x1e7e, 0x6ce9, 0xe00, 0x29b2, 0x55a7, 0x6321, 0x0, 0x0);
        gbc.writeMem(0x1e7e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6ce9);
        EXPECT(gbc.pc(), 0x1e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 033C
        gbc.setState(0x1eb5, 0x4188, 0x890, 0x20d5, 0x1a6d, 0xe10f, 0x1, 0x0);
        gbc.writeMem(0x1eb5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4188);
        EXPECT(gbc.pc(), 0x1eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 033D
        gbc.setState(0xc097, 0x116e, 0x29f0, 0x9ad, 0xb24d, 0xf4e6, 0x0, 0x0);
        gbc.writeMem(0xc097, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x116e);
        EXPECT(gbc.pc(), 0xc099);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc097), 0xcb);
        EXPECT(gbc.readMem(0xc098), 0xb3);
        // CB B3 033E
        gbc.setState(0x907, 0x7a02, 0xe390, 0xf81e, 0xdbf4, 0xb71, 0x1, 0x1);
        gbc.writeMem(0x907, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7a02);
        EXPECT(gbc.pc(), 0x909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 033F
        gbc.setState(0xd892, 0x8bbf, 0xebe0, 0xd947, 0x68e9, 0x919a, 0x1, 0x1);
        gbc.writeMem(0xd892, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8bbf);
        EXPECT(gbc.pc(), 0xd894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd892), 0xcb);
        EXPECT(gbc.readMem(0xd893), 0xb3);
        // CB B3 0340
        gbc.setState(0x4a18, 0x18e4, 0xbe80, 0x16fe, 0x8b8a, 0x1c20, 0x0, 0x1);
        gbc.writeMem(0x4a18, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x18e4);
        EXPECT(gbc.pc(), 0x4a1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0341
        gbc.setState(0xed76, 0xcfcb, 0x7ef0, 0x1fb6, 0x1918, 0xbd28, 0x1, 0x1);
        gbc.writeMem(0xed76, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xcfcb);
        EXPECT(gbc.pc(), 0xed78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed76), 0xcb);
        EXPECT(gbc.readMem(0xed77), 0xb3);
        // CB B3 0342
        gbc.setState(0x2f8b, 0x4ef7, 0x3190, 0xa73e, 0x6ddf, 0x53e9, 0x0, 0x0);
        gbc.writeMem(0x2f8b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4ef7);
        EXPECT(gbc.pc(), 0x2f8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0343
        gbc.setState(0xb23d, 0xe70e, 0xa080, 0x13e7, 0xf599, 0x567f, 0x0, 0x0);
        gbc.writeMem(0xb23d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe70e);
        EXPECT(gbc.pc(), 0xb23f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb23d), 0xcb);
        EXPECT(gbc.readMem(0xb23e), 0xb3);
        // CB B3 0344
        gbc.setState(0xcc12, 0x5b2e, 0xaa50, 0x4f7a, 0xf43f, 0xc994, 0x1, 0x0);
        gbc.writeMem(0xcc12, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5b2e);
        EXPECT(gbc.pc(), 0xcc14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc12), 0xcb);
        EXPECT(gbc.readMem(0xcc13), 0xb3);
        // CB B3 0345
        gbc.setState(0xb2e1, 0xe43c, 0x6970, 0xbd0, 0x6d82, 0x6b12, 0x0, 0x0);
        gbc.writeMem(0xb2e1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe43c);
        EXPECT(gbc.pc(), 0xb2e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2e1), 0xcb);
        EXPECT(gbc.readMem(0xb2e2), 0xb3);
        // CB B3 0346
        gbc.setState(0x3cc5, 0x2293, 0x1df0, 0x84ea, 0x565d, 0x6544, 0x1, 0x0);
        gbc.writeMem(0x3cc5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2293);
        EXPECT(gbc.pc(), 0x3cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0347
        gbc.setState(0xec, 0x159a, 0x1ce0, 0xd563, 0x40ba, 0xf51e, 0x0, 0x0);
        gbc.writeMem(0xec, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x159a);
        EXPECT(gbc.pc(), 0xee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0348
        gbc.setState(0x5413, 0xe683, 0x6820, 0x1c01, 0xdd0d, 0xede3, 0x0, 0x0);
        gbc.writeMem(0x5413, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe683);
        EXPECT(gbc.pc(), 0x5415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0349
        gbc.setState(0x25, 0x81f0, 0xf0d0, 0x1cab, 0xfd2d, 0xc578, 0x0, 0x1);
        gbc.writeMem(0x25, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x81f0);
        EXPECT(gbc.pc(), 0x27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 034A
        gbc.setState(0x8092, 0x8d42, 0x69e0, 0xf0ec, 0x7acf, 0x3e76, 0x1, 0x0);
        gbc.writeMem(0x8092, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8d42);
        EXPECT(gbc.pc(), 0x8094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8092), 0xcb);
        EXPECT(gbc.readMem(0x8093), 0xb3);
        // CB B3 034C
        gbc.setState(0x7a71, 0xf8d6, 0x2d80, 0x11e, 0x42bd, 0x3723, 0x1, 0x1);
        gbc.writeMem(0x7a71, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf8d6);
        EXPECT(gbc.pc(), 0x7a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 034D
        gbc.setState(0xa71c, 0x382c, 0x1f00, 0xd524, 0xf035, 0x8e39, 0x0, 0x0);
        gbc.writeMem(0xa71c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x382c);
        EXPECT(gbc.pc(), 0xa71e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa71c), 0xcb);
        EXPECT(gbc.readMem(0xa71d), 0xb3);
        // CB B3 034E
        gbc.setState(0xe73, 0x7112, 0x9840, 0xe05f, 0x6ec5, 0xfe71, 0x1, 0x0);
        gbc.writeMem(0xe73, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7112);
        EXPECT(gbc.pc(), 0xe75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 034F
        gbc.setState(0xcc4, 0xd41, 0xbcb0, 0x5e21, 0x1e8f, 0xc3dd, 0x1, 0x1);
        gbc.writeMem(0xcc4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd41);
        EXPECT(gbc.pc(), 0xcc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0350
        gbc.setState(0x6aae, 0x70bc, 0xda60, 0x19cc, 0x6533, 0xe680, 0x1, 0x1);
        gbc.writeMem(0x6aae, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x70bc);
        EXPECT(gbc.pc(), 0x6ab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0351
        gbc.setState(0x7cec, 0x8185, 0xff60, 0xee7, 0x64b, 0x7239, 0x0, 0x1);
        gbc.writeMem(0x7cec, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8185);
        EXPECT(gbc.pc(), 0x7cee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0353
        gbc.setState(0xdf96, 0x9513, 0xc8a0, 0xe823, 0xe47a, 0xe177, 0x0, 0x0);
        gbc.writeMem(0xdf96, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9513);
        EXPECT(gbc.pc(), 0xdf98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf96), 0xcb);
        EXPECT(gbc.readMem(0xdf97), 0xb3);
        // CB B3 0354
        gbc.setState(0xbbea, 0x23ce, 0x58a0, 0xd130, 0xcbab, 0xadc0, 0x0, 0x1);
        gbc.writeMem(0xbbea, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x23ce);
        EXPECT(gbc.pc(), 0xbbec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbea), 0xcb);
        EXPECT(gbc.readMem(0xbbeb), 0xb3);
        // CB B3 0355
        gbc.setState(0xb952, 0x906a, 0xf860, 0xd401, 0x835b, 0xf502, 0x1, 0x0);
        gbc.writeMem(0xb952, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x906a);
        EXPECT(gbc.pc(), 0xb954);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb952), 0xcb);
        EXPECT(gbc.readMem(0xb953), 0xb3);
        // CB B3 0356
        gbc.setState(0xe54c, 0xe974, 0x10a0, 0x199b, 0xdf80, 0x32, 0x1, 0x0);
        gbc.writeMem(0xe54c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe974);
        EXPECT(gbc.pc(), 0xe54e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54c), 0xcb);
        EXPECT(gbc.readMem(0xe54d), 0xb3);
        // CB B3 0357
        gbc.setState(0xa791, 0xa685, 0x5f40, 0x93aa, 0x10de, 0xd305, 0x1, 0x0);
        gbc.writeMem(0xa791, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa685);
        EXPECT(gbc.pc(), 0xa793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa791), 0xcb);
        EXPECT(gbc.readMem(0xa792), 0xb3);
        // CB B3 0358
        gbc.setState(0xe078, 0x7622, 0x6880, 0x7c5f, 0xc7b7, 0xa856, 0x1, 0x1);
        gbc.writeMem(0xe078, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7622);
        EXPECT(gbc.pc(), 0xe07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe078), 0xcb);
        EXPECT(gbc.readMem(0xe079), 0xb3);
        // CB B3 0359
        gbc.setState(0xd67e, 0x3d87, 0x3090, 0x5838, 0x5b4b, 0x494a, 0x0, 0x1);
        gbc.writeMem(0xd67e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3d87);
        EXPECT(gbc.pc(), 0xd680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd67e), 0xcb);
        EXPECT(gbc.readMem(0xd67f), 0xb3);
        // CB B3 035A
        gbc.setState(0x12ce, 0x9b33, 0xec70, 0x5df7, 0xd0c7, 0x4ea1, 0x0, 0x1);
        gbc.writeMem(0x12ce, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9b33);
        EXPECT(gbc.pc(), 0x12d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 035B
        gbc.setState(0x8a2c, 0xb260, 0x72f0, 0x387f, 0xb1ef, 0xdb96, 0x1, 0x1);
        gbc.writeMem(0x8a2c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb260);
        EXPECT(gbc.pc(), 0x8a2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a2c), 0xcb);
        EXPECT(gbc.readMem(0x8a2d), 0xb3);
        // CB B3 035C
        gbc.setState(0xac98, 0x37bc, 0x5bc0, 0x9bc2, 0xcbea, 0x37f7, 0x0, 0x1);
        gbc.writeMem(0xac98, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x37bc);
        EXPECT(gbc.pc(), 0xac9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac98), 0xcb);
        EXPECT(gbc.readMem(0xac99), 0xb3);
        // CB B3 035E
        gbc.setState(0xde92, 0xdceb, 0xe150, 0x6ae4, 0x32e9, 0xf2f4, 0x1, 0x0);
        gbc.writeMem(0xde92, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xdceb);
        EXPECT(gbc.pc(), 0xde94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde92), 0xcb);
        EXPECT(gbc.readMem(0xde93), 0xb3);
        // CB B3 035F
        gbc.setState(0x8d47, 0x81ed, 0x20e0, 0xa9d8, 0x1eb0, 0x66d0, 0x1, 0x0);
        gbc.writeMem(0x8d47, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x81ed);
        EXPECT(gbc.pc(), 0x8d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d47), 0xcb);
        EXPECT(gbc.readMem(0x8d48), 0xb3);
        // CB B3 0360
        gbc.setState(0xeef9, 0xe488, 0x2c80, 0x8df5, 0x54da, 0xbb96, 0x0, 0x0);
        gbc.writeMem(0xeef9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe488);
        EXPECT(gbc.pc(), 0xeefb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeef9), 0xcb);
        EXPECT(gbc.readMem(0xeefa), 0xb3);
        // CB B3 0361
        gbc.setState(0xc956, 0x60b, 0x7de0, 0xdf5d, 0xee2e, 0x20a8, 0x1, 0x0);
        gbc.writeMem(0xc956, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x60b);
        EXPECT(gbc.pc(), 0xc958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc956), 0xcb);
        EXPECT(gbc.readMem(0xc957), 0xb3);
        // CB B3 0362
        gbc.setState(0xe54c, 0x2fdd, 0xd940, 0x2459, 0x9dba, 0x9b8b, 0x0, 0x0);
        gbc.writeMem(0xe54c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2fdd);
        EXPECT(gbc.pc(), 0xe54e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54c), 0xcb);
        EXPECT(gbc.readMem(0xe54d), 0xb3);
        // CB B3 0363
        gbc.setState(0x1563, 0xe06e, 0x3610, 0x78ae, 0xaed2, 0x3ed6, 0x0, 0x0);
        gbc.writeMem(0x1563, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe06e);
        EXPECT(gbc.pc(), 0x1565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0364
        gbc.setState(0x4f40, 0xf35b, 0x29a0, 0x78fc, 0x83b8, 0xc20b, 0x0, 0x0);
        gbc.writeMem(0x4f40, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf35b);
        EXPECT(gbc.pc(), 0x4f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0365
        gbc.setState(0x3824, 0xd18a, 0xcb10, 0xeae8, 0x3a3, 0x3e12, 0x1, 0x1);
        gbc.writeMem(0x3824, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd18a);
        EXPECT(gbc.pc(), 0x3826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0366
        gbc.setState(0xcc4, 0xf923, 0x1d40, 0x295e, 0xdf2f, 0xb63c, 0x0, 0x1);
        gbc.writeMem(0xcc4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xf923);
        EXPECT(gbc.pc(), 0xcc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0367
        gbc.setState(0x728e, 0x1bc5, 0x28a0, 0x5c43, 0x7d22, 0x8d2b, 0x1, 0x1);
        gbc.writeMem(0x728e, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1bc5);
        EXPECT(gbc.pc(), 0x7290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0369
        gbc.setState(0x937f, 0x1826, 0x4d10, 0x84fc, 0xf55c, 0xf702, 0x0, 0x1);
        gbc.writeMem(0x937f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1826);
        EXPECT(gbc.pc(), 0x9381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x937f), 0xcb);
        EXPECT(gbc.readMem(0x9380), 0xb3);
        // CB B3 036A
        gbc.setState(0xf23, 0x613f, 0xee70, 0xa377, 0x1eb, 0x5b1e, 0x1, 0x1);
        gbc.writeMem(0xf23, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x613f);
        EXPECT(gbc.pc(), 0xf25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 036B
        gbc.setState(0xdef8, 0xa5bc, 0x7370, 0xc9a2, 0x601b, 0xf9a1, 0x1, 0x0);
        gbc.writeMem(0xdef8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa5bc);
        EXPECT(gbc.pc(), 0xdefa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef8), 0xcb);
        EXPECT(gbc.readMem(0xdef9), 0xb3);
        // CB B3 036C
        gbc.setState(0x72fe, 0xa7f, 0xcd40, 0x59a7, 0xed46, 0x6f77, 0x0, 0x1);
        gbc.writeMem(0x72fe, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa7f);
        EXPECT(gbc.pc(), 0x7300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 036D
        gbc.setState(0xcdf6, 0xc5de, 0x5ec0, 0x79ab, 0x63d6, 0x4fa6, 0x1, 0x0);
        gbc.writeMem(0xcdf6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc5de);
        EXPECT(gbc.pc(), 0xcdf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf6), 0xcb);
        EXPECT(gbc.readMem(0xcdf7), 0xb3);
        // CB B3 036E
        gbc.setState(0x8a12, 0xe3c6, 0xd4e0, 0x9374, 0x7898, 0xb718, 0x1, 0x0);
        gbc.writeMem(0x8a12, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe3c6);
        EXPECT(gbc.pc(), 0x8a14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a12), 0xcb);
        EXPECT(gbc.readMem(0x8a13), 0xb3);
        // CB B3 036F
        gbc.setState(0xb3ca, 0x9a0c, 0x2a20, 0x50aa, 0x3b40, 0x614c, 0x1, 0x1);
        gbc.writeMem(0xb3ca, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9a0c);
        EXPECT(gbc.pc(), 0xb3cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ca), 0xcb);
        EXPECT(gbc.readMem(0xb3cb), 0xb3);
        // CB B3 0370
        gbc.setState(0x5bba, 0xa960, 0xa0f0, 0xb67f, 0xc2d4, 0xcf26, 0x0, 0x0);
        gbc.writeMem(0x5bba, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa960);
        EXPECT(gbc.pc(), 0x5bbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0371
        gbc.setState(0xeee0, 0x863f, 0x2ff0, 0xfdc7, 0xf0f0, 0xb1fe, 0x1, 0x1);
        gbc.writeMem(0xeee0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x863f);
        EXPECT(gbc.pc(), 0xeee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeee0), 0xcb);
        EXPECT(gbc.readMem(0xeee1), 0xb3);
        // CB B3 0373
        gbc.setState(0x9e8a, 0x7f61, 0xd3f0, 0xd305, 0x8692, 0xe470, 0x0, 0x1);
        gbc.writeMem(0x9e8a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7f61);
        EXPECT(gbc.pc(), 0x9e8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e8a), 0xcb);
        EXPECT(gbc.readMem(0x9e8b), 0xb3);
        // CB B3 0374
        gbc.setState(0x42bc, 0x6439, 0x7c80, 0xf7fa, 0x569b, 0x3dc0, 0x1, 0x1);
        gbc.writeMem(0x42bc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6439);
        EXPECT(gbc.pc(), 0x42be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0375
        gbc.setState(0x2cad, 0x47d1, 0xb4f0, 0x5991, 0x3abf, 0x5048, 0x1, 0x1);
        gbc.writeMem(0x2cad, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x47d1);
        EXPECT(gbc.pc(), 0x2caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0376
        gbc.setState(0xe2d, 0x9cfa, 0xc710, 0x3bc1, 0x132c, 0x2543, 0x0, 0x0);
        gbc.writeMem(0xe2d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9cfa);
        EXPECT(gbc.pc(), 0xe2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0378
        gbc.setState(0x4ecc, 0xb298, 0xc6b0, 0x2b3b, 0x7e75, 0xa0a6, 0x0, 0x1);
        gbc.writeMem(0x4ecc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb298);
        EXPECT(gbc.pc(), 0x4ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0379
        gbc.setState(0x70e7, 0x2b60, 0x23e0, 0x89eb, 0xa3c5, 0x8689, 0x0, 0x0);
        gbc.writeMem(0x70e7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2b60);
        EXPECT(gbc.pc(), 0x70e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 037A
        gbc.setState(0xc6c2, 0x3168, 0x8590, 0x6bf7, 0x9d76, 0x52a9, 0x0, 0x1);
        gbc.writeMem(0xc6c2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3168);
        EXPECT(gbc.pc(), 0xc6c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6c2), 0xcb);
        EXPECT(gbc.readMem(0xc6c3), 0xb3);
        // CB B3 037B
        gbc.setState(0x603a, 0xe1d5, 0xb860, 0x482f, 0xfc98, 0xd66d, 0x0, 0x1);
        gbc.writeMem(0x603a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe1d5);
        EXPECT(gbc.pc(), 0x603c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 037C
        gbc.setState(0xb0eb, 0x57a6, 0x7840, 0x4ded, 0xbdff, 0x495, 0x0, 0x0);
        gbc.writeMem(0xb0eb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x57a6);
        EXPECT(gbc.pc(), 0xb0ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0eb), 0xcb);
        EXPECT(gbc.readMem(0xb0ec), 0xb3);
        // CB B3 037D
        gbc.setState(0xa77c, 0x83e5, 0xde20, 0xaa6f, 0x1512, 0x418a, 0x0, 0x1);
        gbc.writeMem(0xa77c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x83e5);
        EXPECT(gbc.pc(), 0xa77e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77c), 0xcb);
        EXPECT(gbc.readMem(0xa77d), 0xb3);
        // CB B3 037E
        gbc.setState(0x22fd, 0x2f58, 0xca80, 0x5b94, 0x1417, 0x50dd, 0x1, 0x1);
        gbc.writeMem(0x22fd, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2f58);
        EXPECT(gbc.pc(), 0x22ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 037F
        gbc.setState(0xb2be, 0x760e, 0x12b0, 0x106, 0x94c8, 0x1f67, 0x1, 0x0);
        gbc.writeMem(0xb2be, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x760e);
        EXPECT(gbc.pc(), 0xb2c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2be), 0xcb);
        EXPECT(gbc.readMem(0xb2bf), 0xb3);
        // CB B3 0380
        gbc.setState(0x43e3, 0xc654, 0xf2c0, 0x77ab, 0x8160, 0xe5a2, 0x1, 0x1);
        gbc.writeMem(0x43e3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc654);
        EXPECT(gbc.pc(), 0x43e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0381
        gbc.setState(0x6cbc, 0xb455, 0xdc40, 0x2930, 0xec45, 0x5450, 0x0, 0x0);
        gbc.writeMem(0x6cbc, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb455);
        EXPECT(gbc.pc(), 0x6cbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0382
        gbc.setState(0xcaa2, 0x8492, 0x4750, 0x4471, 0xc2a0, 0x7ecb, 0x1, 0x0);
        gbc.writeMem(0xcaa2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8492);
        EXPECT(gbc.pc(), 0xcaa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaa2), 0xcb);
        EXPECT(gbc.readMem(0xcaa3), 0xb3);
        // CB B3 0383
        gbc.setState(0xed97, 0x498a, 0xb840, 0xf0be, 0x9903, 0x1374, 0x1, 0x0);
        gbc.writeMem(0xed97, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x498a);
        EXPECT(gbc.pc(), 0xed99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed97), 0xcb);
        EXPECT(gbc.readMem(0xed98), 0xb3);
        // CB B3 0384
        gbc.setState(0x4130, 0xd6a0, 0x11f0, 0x62b5, 0x3990, 0x1315, 0x0, 0x1);
        gbc.writeMem(0x4130, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd6a0);
        EXPECT(gbc.pc(), 0x4132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0387
        gbc.setState(0xc6eb, 0xa2d2, 0x9890, 0x46a6, 0xd979, 0x9f77, 0x1, 0x0);
        gbc.writeMem(0xc6eb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa2d2);
        EXPECT(gbc.pc(), 0xc6ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6eb), 0xcb);
        EXPECT(gbc.readMem(0xc6ec), 0xb3);
        // CB B3 0388
        gbc.setState(0x4436, 0xed20, 0x1890, 0xe8eb, 0x63db, 0xcb5b, 0x0, 0x1);
        gbc.writeMem(0x4436, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xed20);
        EXPECT(gbc.pc(), 0x4438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0389
        gbc.setState(0x6fa0, 0x8c43, 0x63e0, 0x7b3d, 0x800b, 0xa231, 0x1, 0x0);
        gbc.writeMem(0x6fa0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8c43);
        EXPECT(gbc.pc(), 0x6fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 038A
        gbc.setState(0x3f40, 0xb92a, 0xe3c0, 0x1ef0, 0xfce2, 0x57dd, 0x0, 0x0);
        gbc.writeMem(0x3f40, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb92a);
        EXPECT(gbc.pc(), 0x3f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 038B
        gbc.setState(0x6cae, 0x38f7, 0x4990, 0xafdf, 0xc756, 0xff01, 0x1, 0x0);
        gbc.writeMem(0x6cae, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x38f7);
        EXPECT(gbc.pc(), 0x6cb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 038C
        gbc.setState(0xe54f, 0xd736, 0x2050, 0xb762, 0x8687, 0x2bb, 0x0, 0x0);
        gbc.writeMem(0xe54f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd736);
        EXPECT(gbc.pc(), 0xe551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe54f), 0xcb);
        EXPECT(gbc.readMem(0xe550), 0xb3);
        // CB B3 038D
        gbc.setState(0x94d9, 0x1884, 0xb8c0, 0xc896, 0x30f2, 0x26b, 0x1, 0x1);
        gbc.writeMem(0x94d9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1884);
        EXPECT(gbc.pc(), 0x94db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d9), 0xcb);
        EXPECT(gbc.readMem(0x94da), 0xb3);
        // CB B3 038E
        gbc.setState(0x93ce, 0x38e2, 0x690, 0xaa47, 0xfd, 0x4a95, 0x0, 0x1);
        gbc.writeMem(0x93ce, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x38e2);
        EXPECT(gbc.pc(), 0x93d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ce), 0xcb);
        EXPECT(gbc.readMem(0x93cf), 0xb3);
        // CB B3 038F
        gbc.setState(0x1a1f, 0x6abc, 0x2a30, 0x14d4, 0xad99, 0x77a5, 0x0, 0x1);
        gbc.writeMem(0x1a1f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6abc);
        EXPECT(gbc.pc(), 0x1a21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0390
        gbc.setState(0x95a8, 0x8dc9, 0x67e0, 0xa388, 0xd1e5, 0x12b7, 0x1, 0x1);
        gbc.writeMem(0x95a8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8dc9);
        EXPECT(gbc.pc(), 0x95aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a8), 0xcb);
        EXPECT(gbc.readMem(0x95a9), 0xb3);
        // CB B3 0391
        gbc.setState(0xe6e5, 0xee15, 0x6ef0, 0x9bd0, 0x3e08, 0xcd84, 0x1, 0x0);
        gbc.writeMem(0xe6e5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xee15);
        EXPECT(gbc.pc(), 0xe6e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e5), 0xcb);
        EXPECT(gbc.readMem(0xe6e6), 0xb3);
        // CB B3 0392
        gbc.setState(0x9847, 0xa201, 0xbc60, 0x8004, 0x38d7, 0xb0f0, 0x1, 0x0);
        gbc.writeMem(0x9847, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa201);
        EXPECT(gbc.pc(), 0x9849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9847), 0xcb);
        EXPECT(gbc.readMem(0x9848), 0xb3);
        // CB B3 0393
        gbc.setState(0xd6f1, 0x5ebb, 0x5a50, 0xe3bb, 0x325e, 0x2ff6, 0x0, 0x1);
        gbc.writeMem(0xd6f1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5ebb);
        EXPECT(gbc.pc(), 0xd6f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6f1), 0xcb);
        EXPECT(gbc.readMem(0xd6f2), 0xb3);
        // CB B3 0394
        gbc.setState(0x33d4, 0x7ef2, 0x3b10, 0x6cf, 0x6544, 0x4dc4, 0x0, 0x1);
        gbc.writeMem(0x33d4, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7ef2);
        EXPECT(gbc.pc(), 0x33d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0395
        gbc.setState(0x7a98, 0xde07, 0xd280, 0x5a5, 0x2495, 0x127c, 0x1, 0x0);
        gbc.writeMem(0x7a98, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xde07);
        EXPECT(gbc.pc(), 0x7a9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0396
        gbc.setState(0x67a2, 0x335f, 0xeab0, 0xfeff, 0x1468, 0x90ee, 0x0, 0x1);
        gbc.writeMem(0x67a2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x335f);
        EXPECT(gbc.pc(), 0x67a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 0397
        gbc.setState(0xbd5b, 0x138c, 0x6d20, 0xf721, 0x5b74, 0x7427, 0x0, 0x0);
        gbc.writeMem(0xbd5b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x138c);
        EXPECT(gbc.pc(), 0xbd5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd5b), 0xcb);
        EXPECT(gbc.readMem(0xbd5c), 0xb3);
        // CB B3 0398
        gbc.setState(0x5f9c, 0x3deb, 0xb1c0, 0x941f, 0xec61, 0x7c22, 0x1, 0x0);
        gbc.writeMem(0x5f9c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3deb);
        EXPECT(gbc.pc(), 0x5f9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 0399
        gbc.setState(0x2cd7, 0xf483, 0x9480, 0x51e2, 0xe023, 0x81a3, 0x1, 0x0);
        gbc.writeMem(0x2cd7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xf483);
        EXPECT(gbc.pc(), 0x2cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 039A
        gbc.setState(0x54f6, 0x14cf, 0x5fe0, 0x970e, 0x77bf, 0xe81a, 0x0, 0x1);
        gbc.writeMem(0x54f6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x14cf);
        EXPECT(gbc.pc(), 0x54f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 039B
        gbc.setState(0xdbba, 0xdb53, 0xfcb0, 0x82, 0xdc29, 0xdd99, 0x0, 0x0);
        gbc.writeMem(0xdbba, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xdb53);
        EXPECT(gbc.pc(), 0xdbbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbba), 0xcb);
        EXPECT(gbc.readMem(0xdbbb), 0xb3);
        // CB B3 039C
        gbc.setState(0x9afb, 0xf85e, 0xee00, 0x1010, 0x723f, 0x5640, 0x0, 0x1);
        gbc.writeMem(0x9afb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf85e);
        EXPECT(gbc.pc(), 0x9afd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afb), 0xcb);
        EXPECT(gbc.readMem(0x9afc), 0xb3);
        // CB B3 039D
        gbc.setState(0xe9df, 0x7e27, 0xe1f0, 0x4f1b, 0xe4f4, 0x66d5, 0x1, 0x0);
        gbc.writeMem(0xe9df, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7e27);
        EXPECT(gbc.pc(), 0xe9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9df), 0xcb);
        EXPECT(gbc.readMem(0xe9e0), 0xb3);
        // CB B3 039E
        gbc.setState(0xee5, 0x680f, 0xf960, 0xfc1b, 0x1aca, 0x32cc, 0x1, 0x1);
        gbc.writeMem(0xee5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x680f);
        EXPECT(gbc.pc(), 0xee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 039F
        gbc.setState(0x7584, 0x356, 0x4e0, 0x5d85, 0xff0b, 0x1f2a, 0x0, 0x1);
        gbc.writeMem(0x7584, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x356);
        EXPECT(gbc.pc(), 0x7586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03A0
        gbc.setState(0x319, 0x359e, 0x1810, 0x69ae, 0x176e, 0x3c9f, 0x0, 0x0);
        gbc.writeMem(0x319, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x359e);
        EXPECT(gbc.pc(), 0x31b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03A1
        gbc.setState(0x972b, 0x2549, 0x2a20, 0xba0d, 0xd298, 0xeb9a, 0x1, 0x0);
        gbc.writeMem(0x972b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2549);
        EXPECT(gbc.pc(), 0x972d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x972b), 0xcb);
        EXPECT(gbc.readMem(0x972c), 0xb3);
        // CB B3 03A2
        gbc.setState(0x9311, 0xa4a2, 0xa2d0, 0xc594, 0x6a38, 0x7e4e, 0x0, 0x1);
        gbc.writeMem(0x9311, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa4a2);
        EXPECT(gbc.pc(), 0x9313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9311), 0xcb);
        EXPECT(gbc.readMem(0x9312), 0xb3);
        // CB B3 03A3
        gbc.setState(0x26e0, 0xe503, 0xc880, 0xcae4, 0xe4a4, 0x496c, 0x1, 0x1);
        gbc.writeMem(0x26e0, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe503);
        EXPECT(gbc.pc(), 0x26e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03A5
        gbc.setState(0x5e86, 0xe7b9, 0x6e30, 0xf3c5, 0x6af9, 0x8214, 0x0, 0x1);
        gbc.writeMem(0x5e86, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe7b9);
        EXPECT(gbc.pc(), 0x5e88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03A6
        gbc.setState(0xc4a5, 0x601d, 0x3a40, 0x223b, 0x52eb, 0x493b, 0x0, 0x0);
        gbc.writeMem(0xc4a5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x601d);
        EXPECT(gbc.pc(), 0xc4a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4a5), 0xcb);
        EXPECT(gbc.readMem(0xc4a6), 0xb3);
        // CB B3 03A7
        gbc.setState(0x1983, 0x7f64, 0x5c80, 0xcbe9, 0x113f, 0xe1c, 0x1, 0x0);
        gbc.writeMem(0x1983, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7f64);
        EXPECT(gbc.pc(), 0x1985);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03A8
        gbc.setState(0x789d, 0x7f2b, 0xb910, 0x5a59, 0xca34, 0xbf59, 0x1, 0x0);
        gbc.writeMem(0x789d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7f2b);
        EXPECT(gbc.pc(), 0x789f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03A9
        gbc.setState(0x3565, 0x9a36, 0x4620, 0x9cac, 0xeba2, 0x24c, 0x1, 0x1);
        gbc.writeMem(0x3565, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9a36);
        EXPECT(gbc.pc(), 0x3567);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03AA
        gbc.setState(0x5f14, 0x5a31, 0x5680, 0xfcb6, 0xf15f, 0xdff3, 0x0, 0x0);
        gbc.writeMem(0x5f14, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5a31);
        EXPECT(gbc.pc(), 0x5f16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03AB
        gbc.setState(0x19b3, 0xc4c4, 0x6eb0, 0x34d3, 0x2e43, 0x34c2, 0x1, 0x1);
        gbc.writeMem(0x19b3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xc4c4);
        EXPECT(gbc.pc(), 0x19b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03AD
        gbc.setState(0x32c, 0xa1c6, 0x6a60, 0x414, 0xd974, 0x538d, 0x0, 0x0);
        gbc.writeMem(0x32c, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa1c6);
        EXPECT(gbc.pc(), 0x32e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03AE
        gbc.setState(0xa871, 0xd6cf, 0xb020, 0x6408, 0x7456, 0xd5ef, 0x1, 0x1);
        gbc.writeMem(0xa871, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd6cf);
        EXPECT(gbc.pc(), 0xa873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa871), 0xcb);
        EXPECT(gbc.readMem(0xa872), 0xb3);
        // CB B3 03AF
        gbc.setState(0xa2f1, 0xbe4b, 0xd440, 0x9348, 0x30, 0x147, 0x0, 0x1);
        gbc.writeMem(0xa2f1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbe4b);
        EXPECT(gbc.pc(), 0xa2f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f1), 0xcb);
        EXPECT(gbc.readMem(0xa2f2), 0xb3);
        // CB B3 03B0
        gbc.setState(0xbe67, 0x4d78, 0xba70, 0xb955, 0x7536, 0x1935, 0x0, 0x0);
        gbc.writeMem(0xbe67, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4d78);
        EXPECT(gbc.pc(), 0xbe69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe67), 0xcb);
        EXPECT(gbc.readMem(0xbe68), 0xb3);
        // CB B3 03B1
        gbc.setState(0x6baf, 0x2192, 0x7ae0, 0xb4b9, 0x382f, 0xb5f2, 0x0, 0x0);
        gbc.writeMem(0x6baf, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2192);
        EXPECT(gbc.pc(), 0x6bb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03B2
        gbc.setState(0x68a3, 0x8591, 0x7420, 0x8c4c, 0xe050, 0xaba5, 0x1, 0x1);
        gbc.writeMem(0x68a3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8591);
        EXPECT(gbc.pc(), 0x68a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03B3
        gbc.setState(0x5f0f, 0x1e7d, 0xdfc0, 0x5cbb, 0xfc8f, 0x8d4d, 0x1, 0x0);
        gbc.writeMem(0x5f0f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1e7d);
        EXPECT(gbc.pc(), 0x5f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03B4
        gbc.setState(0x7e87, 0xac9c, 0x1df0, 0xee4d, 0x8d8, 0xfa4c, 0x1, 0x0);
        gbc.writeMem(0x7e87, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xac9c);
        EXPECT(gbc.pc(), 0x7e89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03B5
        gbc.setState(0x602, 0x2240, 0xf20, 0x5b4a, 0x6921, 0xce9c, 0x1, 0x0);
        gbc.writeMem(0x602, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2240);
        EXPECT(gbc.pc(), 0x604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03B6
        gbc.setState(0x91b7, 0x7a51, 0xf980, 0x73f5, 0x1833, 0x4a7d, 0x1, 0x1);
        gbc.writeMem(0x91b7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7a51);
        EXPECT(gbc.pc(), 0x91b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b7), 0xcb);
        EXPECT(gbc.readMem(0x91b8), 0xb3);
        // CB B3 03B7
        gbc.setState(0xc32f, 0xbc16, 0x2cc0, 0x4615, 0x9608, 0x7cba, 0x1, 0x0);
        gbc.writeMem(0xc32f, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbc16);
        EXPECT(gbc.pc(), 0xc331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc32f), 0xcb);
        EXPECT(gbc.readMem(0xc330), 0xb3);
        // CB B3 03B8
        gbc.setState(0xd2e2, 0x4fdc, 0x6c20, 0x23b8, 0xddc2, 0x28bc, 0x0, 0x1);
        gbc.writeMem(0xd2e2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4fdc);
        EXPECT(gbc.pc(), 0xd2e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e2), 0xcb);
        EXPECT(gbc.readMem(0xd2e3), 0xb3);
        // CB B3 03B9
        gbc.setState(0xbde7, 0x6f49, 0xb170, 0x237d, 0xf460, 0x47fe, 0x0, 0x0);
        gbc.writeMem(0xbde7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6f49);
        EXPECT(gbc.pc(), 0xbde9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde7), 0xcb);
        EXPECT(gbc.readMem(0xbde8), 0xb3);
        // CB B3 03BA
        gbc.setState(0xc0a8, 0xfec7, 0xe6e0, 0xa04a, 0xa633, 0x5b56, 0x0, 0x0);
        gbc.writeMem(0xc0a8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xfec7);
        EXPECT(gbc.pc(), 0xc0aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a8), 0xcb);
        EXPECT(gbc.readMem(0xc0a9), 0xb3);
        // CB B3 03BB
        gbc.setState(0x1f36, 0x361, 0xfa60, 0x1a13, 0x720a, 0xd63d, 0x0, 0x1);
        gbc.writeMem(0x1f36, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x361);
        EXPECT(gbc.pc(), 0x1f38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03BC
        gbc.setState(0x88fa, 0x6458, 0x2f30, 0xcdce, 0x3795, 0x8bf0, 0x0, 0x0);
        gbc.writeMem(0x88fa, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6458);
        EXPECT(gbc.pc(), 0x88fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88fa), 0xcb);
        EXPECT(gbc.readMem(0x88fb), 0xb3);
        // CB B3 03BD
        gbc.setState(0x5461, 0xe63a, 0x2f20, 0x7b27, 0x74cb, 0x2f0a, 0x0, 0x0);
        gbc.writeMem(0x5461, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe63a);
        EXPECT(gbc.pc(), 0x5463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03BE
        gbc.setState(0x7976, 0x3f12, 0x6450, 0x72b, 0xda9f, 0xa6c1, 0x0, 0x1);
        gbc.writeMem(0x7976, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3f12);
        EXPECT(gbc.pc(), 0x7978);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03BF
        gbc.setState(0xd956, 0xfdc2, 0xb3c0, 0x7801, 0x406d, 0xbda2, 0x0, 0x0);
        gbc.writeMem(0xd956, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfdc2);
        EXPECT(gbc.pc(), 0xd958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd956), 0xcb);
        EXPECT(gbc.readMem(0xd957), 0xb3);
        // CB B3 03C0
        gbc.setState(0x2c1a, 0xbeba, 0x6fc0, 0x8aaf, 0xaa99, 0x5d47, 0x0, 0x0);
        gbc.writeMem(0x2c1a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbeba);
        EXPECT(gbc.pc(), 0x2c1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03C1
        gbc.setState(0xcd17, 0xbfb6, 0x84f0, 0xbf2e, 0xce22, 0xe1a3, 0x1, 0x1);
        gbc.writeMem(0xcd17, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbfb6);
        EXPECT(gbc.pc(), 0xcd19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd17), 0xcb);
        EXPECT(gbc.readMem(0xcd18), 0xb3);
        // CB B3 03C2
        gbc.setState(0x6dda, 0xc45b, 0x4ba0, 0x904a, 0xe34f, 0x903d, 0x0, 0x1);
        gbc.writeMem(0x6dda, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc45b);
        EXPECT(gbc.pc(), 0x6ddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03C3
        gbc.setState(0x4444, 0x5c74, 0xbdc0, 0xaf56, 0xbe1f, 0xe9d0, 0x1, 0x0);
        gbc.writeMem(0x4444, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5c74);
        EXPECT(gbc.pc(), 0x4446);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03C4
        gbc.setState(0xe797, 0xc3f7, 0x8f0, 0x4d17, 0x2f1f, 0xa234, 0x1, 0x1);
        gbc.writeMem(0xe797, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc3f7);
        EXPECT(gbc.pc(), 0xe799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe797), 0xcb);
        EXPECT(gbc.readMem(0xe798), 0xb3);
        // CB B3 03C5
        gbc.setState(0x43d2, 0xe4a1, 0x7370, 0x1e28, 0x8711, 0x5873, 0x1, 0x1);
        gbc.writeMem(0x43d2, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe4a1);
        EXPECT(gbc.pc(), 0x43d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03C6
        gbc.setState(0xd715, 0xa548, 0xf2a0, 0x2898, 0x57fc, 0xd533, 0x0, 0x1);
        gbc.writeMem(0xd715, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa548);
        EXPECT(gbc.pc(), 0xd717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd715), 0xcb);
        EXPECT(gbc.readMem(0xd716), 0xb3);
        // CB B3 03C7
        gbc.setState(0x65a8, 0x9e8a, 0x9cb0, 0xddcf, 0xb985, 0xfc9b, 0x0, 0x1);
        gbc.writeMem(0x65a8, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9e8a);
        EXPECT(gbc.pc(), 0x65aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03C8
        gbc.setState(0x12ae, 0x4174, 0x38c0, 0x6a20, 0xbdc3, 0x2022, 0x0, 0x1);
        gbc.writeMem(0x12ae, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4174);
        EXPECT(gbc.pc(), 0x12b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03C9
        gbc.setState(0x93d5, 0xbf38, 0x740, 0x67, 0x505b, 0x1073, 0x1, 0x1);
        gbc.writeMem(0x93d5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xbf38);
        EXPECT(gbc.pc(), 0x93d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93d5), 0xcb);
        EXPECT(gbc.readMem(0x93d6), 0xb3);
        // CB B3 03CA
        gbc.setState(0xbb75, 0xadbf, 0xc7d0, 0x91a1, 0xd878, 0x141c, 0x1, 0x1);
        gbc.writeMem(0xbb75, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xadbf);
        EXPECT(gbc.pc(), 0xbb77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb75), 0xcb);
        EXPECT(gbc.readMem(0xbb76), 0xb3);
        // CB B3 03CB
        gbc.setState(0x334b, 0x762, 0xb200, 0x20ca, 0x62f, 0x2281, 0x0, 0x0);
        gbc.writeMem(0x334b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x762);
        EXPECT(gbc.pc(), 0x334d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03CC
        gbc.setState(0xa7c1, 0xae95, 0x5ac0, 0xe22a, 0x9387, 0x5b82, 0x1, 0x0);
        gbc.writeMem(0xa7c1, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xae95);
        EXPECT(gbc.pc(), 0xa7c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c1), 0xcb);
        EXPECT(gbc.readMem(0xa7c2), 0xb3);
        // CB B3 03CD
        gbc.setState(0x3243, 0x2e76, 0xf220, 0x264e, 0x5c78, 0x4147, 0x1, 0x1);
        gbc.writeMem(0x3243, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2e76);
        EXPECT(gbc.pc(), 0x3245);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03CE
        gbc.setState(0x2f21, 0x648a, 0x32d0, 0x8211, 0xf297, 0xc068, 0x1, 0x1);
        gbc.writeMem(0x2f21, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x648a);
        EXPECT(gbc.pc(), 0x2f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03CF
        gbc.setState(0x5888, 0xa570, 0x2be0, 0xd297, 0xe3a, 0x2d1d, 0x0, 0x1);
        gbc.writeMem(0x5888, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa570);
        EXPECT(gbc.pc(), 0x588a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03D0
        gbc.setState(0xd95a, 0x4591, 0x51c0, 0x72cf, 0x1c79, 0x857b, 0x0, 0x1);
        gbc.writeMem(0xd95a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4591);
        EXPECT(gbc.pc(), 0xd95c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd95a), 0xcb);
        EXPECT(gbc.readMem(0xd95b), 0xb3);
        // CB B3 03D1
        gbc.setState(0x16b5, 0xcc69, 0x76c0, 0x34b0, 0xc989, 0x9a5, 0x1, 0x0);
        gbc.writeMem(0x16b5, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcc69);
        EXPECT(gbc.pc(), 0x16b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03D2
        gbc.setState(0x8c03, 0x30af, 0x7560, 0x4347, 0x3658, 0x5e93, 0x1, 0x1);
        gbc.writeMem(0x8c03, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x30af);
        EXPECT(gbc.pc(), 0x8c05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c03), 0xcb);
        EXPECT(gbc.readMem(0x8c04), 0xb3);
        // CB B3 03D3
        gbc.setState(0xe2c9, 0xb851, 0xe650, 0xe0c8, 0xa49d, 0x167c, 0x1, 0x0);
        gbc.writeMem(0xe2c9, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb851);
        EXPECT(gbc.pc(), 0xe2cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2c9), 0xcb);
        EXPECT(gbc.readMem(0xe2ca), 0xb3);
        // CB B3 03D4
        gbc.setState(0x5792, 0x4bd1, 0x1d40, 0x61ed, 0xa89a, 0x3cad, 0x0, 0x1);
        gbc.writeMem(0x5792, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4bd1);
        EXPECT(gbc.pc(), 0x5794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03D5
        gbc.setState(0x17ca, 0xb792, 0xea40, 0xe278, 0x37d7, 0x5c0b, 0x1, 0x0);
        gbc.writeMem(0x17ca, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb792);
        EXPECT(gbc.pc(), 0x17cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03D6
        gbc.setState(0x707, 0xc3ca, 0xaab0, 0x1397, 0x1730, 0x8d4b, 0x0, 0x0);
        gbc.writeMem(0x707, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc3ca);
        EXPECT(gbc.pc(), 0x709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03D7
        gbc.setState(0x3376, 0x841e, 0xadb0, 0x5269, 0xda6b, 0x10e3, 0x0, 0x0);
        gbc.writeMem(0x3376, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x841e);
        EXPECT(gbc.pc(), 0x3378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03D8
        gbc.setState(0x6ad7, 0xb1a3, 0x42b0, 0x439f, 0xe6d2, 0xc0e8, 0x1, 0x0);
        gbc.writeMem(0x6ad7, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb1a3);
        EXPECT(gbc.pc(), 0x6ad9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03D9
        gbc.setState(0xc64, 0x3f24, 0xa700, 0xa4b4, 0x8134, 0xfc05, 0x0, 0x1);
        gbc.writeMem(0xc64, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3f24);
        EXPECT(gbc.pc(), 0xc66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03DA
        gbc.setState(0x5c2d, 0x8763, 0xa9a0, 0x332b, 0x30c8, 0xa3ae, 0x0, 0x1);
        gbc.writeMem(0x5c2d, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8763);
        EXPECT(gbc.pc(), 0x5c2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03DB
        gbc.setState(0xbd44, 0x42d8, 0x1fc0, 0x9273, 0x11fe, 0x3379, 0x0, 0x1);
        gbc.writeMem(0xbd44, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x42d8);
        EXPECT(gbc.pc(), 0xbd46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd44), 0xcb);
        EXPECT(gbc.readMem(0xbd45), 0xb3);
        // CB B3 03DC
        gbc.setState(0x2fff, 0x2ce4, 0x17c0, 0x4333, 0xc8d7, 0xe633, 0x1, 0x0);
        gbc.writeMem(0x2fff, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2ce4);
        EXPECT(gbc.pc(), 0x3001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03DD
        gbc.setState(0x494, 0x9f3a, 0x35b0, 0x1179, 0x1a87, 0xbe2, 0x1, 0x1);
        gbc.writeMem(0x494, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9f3a);
        EXPECT(gbc.pc(), 0x496);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03DE
        gbc.setState(0xd909, 0xf93a, 0x39b0, 0x6dd4, 0x8fde, 0x63d3, 0x0, 0x1);
        gbc.writeMem(0xd909, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf93a);
        EXPECT(gbc.pc(), 0xd90b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd909), 0xcb);
        EXPECT(gbc.readMem(0xd90a), 0xb3);
        // CB B3 03DF
        gbc.setState(0x319b, 0x3f1, 0x33c0, 0x9af, 0x634d, 0x7531, 0x1, 0x1);
        gbc.writeMem(0x319b, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3f1);
        EXPECT(gbc.pc(), 0x319d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB B3 03E0
        gbc.setState(0xce24, 0x8324, 0xcec0, 0x908c, 0xec73, 0x60e8, 0x0, 0x0);
        gbc.writeMem(0xce24, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8324);
        EXPECT(gbc.pc(), 0xce26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce24), 0xcb);
        EXPECT(gbc.readMem(0xce25), 0xb3);
        // CB B3 03E1
        gbc.setState(0xdbe3, 0x5425, 0x4bf0, 0x4512, 0xf972, 0xa357, 0x1, 0x0);
        gbc.writeMem(0xdbe3, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5425);
        EXPECT(gbc.pc(), 0xdbe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe3), 0xcb);
        EXPECT(gbc.readMem(0xdbe4), 0xb3);
        // CB B3 03E2
        gbc.setState(0x99da, 0xc9a0, 0x81d0, 0x4539, 0x46f, 0x5d3c, 0x1, 0x0);
        gbc.writeMem(0x99da, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc9a0);
        EXPECT(gbc.pc(), 0x99dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99da), 0xcb);
        EXPECT(gbc.readMem(0x99db), 0xb3);
        // CB B3 03E3
        gbc.setState(0xaed6, 0xa462, 0x73b0, 0xe1bc, 0x2df, 0xd2b0, 0x1, 0x0);
        gbc.writeMem(0xaed6, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa462);
        EXPECT(gbc.pc(), 0xaed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed6), 0xcb);
        EXPECT(gbc.readMem(0xaed7), 0xb3);
        // CB B3 03E4
        gbc.setState(0xc273, 0x9c8c, 0xeb90, 0xf022, 0x7fec, 0xd35e, 0x1, 0x0);
        gbc.writeMem(0xc273, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9c8c);
        EXPECT(gbc.pc(), 0xc275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc273), 0xcb);
        EXPECT(gbc.readMem(0xc274), 0xb3);
        // CB B3 03E5
        gbc.setState(0xa098, 0x48d0, 0xd9e0, 0xf284, 0xfc12, 0x1243, 0x1, 0x1);
        gbc.writeMem(0xa098, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x48d0);
        EXPECT(gbc.pc(), 0xa09a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa098), 0xcb);
        EXPECT(gbc.readMem(0xa099), 0xb3);
        // CB B3 03E6
        gbc.setState(0xcbb, 0x473, 0xc10, 0xdac7, 0x9e24, 0x56aa, 0x1, 0x0);
        gbc.writeMem(0xcbb, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x473);
        EXPECT(gbc.pc(), 0xcbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB B3 03E7
        gbc.setState(0xc04a, 0x2266, 0x6b10, 0xcee9, 0x8159, 0x7d95, 0x0, 0x0);
        gbc.writeMem(0xc04a, { 0xcb, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2266);
        EXPECT(gbc.pc(), 0xc04c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc04a), 0xcb);
        EXPECT(gbc.readMem(0xc04b), 0xb3);
    }
}
#endif
