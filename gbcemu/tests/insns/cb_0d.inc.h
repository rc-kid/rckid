    TEST(gbcemu, opcode_cb_0d) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 0D 0000
        gbc.setState(0xdcda, 0xc8ff, 0x8ed0, 0xbd, 0xc69e, 0x7bc1, 0x1, 0x1);
        gbc.writeMem(0xdcda, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc8ff);
        EXPECT(gbc.pc(), 0xdcdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcda), 0xcb);
        EXPECT(gbc.readMem(0xdcdb), 0xd);
        // CB 0D 0001
        gbc.setState(0xa423, 0x23f4, 0x3610, 0x30fc, 0x7b55, 0x6a50, 0x0, 0x0);
        gbc.writeMem(0xa423, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x23f4);
        EXPECT(gbc.pc(), 0xa425);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa423), 0xcb);
        EXPECT(gbc.readMem(0xa424), 0xd);
        // CB 0D 0002
        gbc.setState(0xa4e8, 0x8bf3, 0x7230, 0x1aa5, 0x110c, 0xbd01, 0x0, 0x1);
        gbc.writeMem(0xa4e8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8bf3);
        EXPECT(gbc.pc(), 0xa4ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4e8), 0xcb);
        EXPECT(gbc.readMem(0xa4e9), 0xd);
        // CB 0D 0003
        gbc.setState(0x408c, 0xd11c, 0x7200, 0x1d34, 0xbf74, 0xf490, 0x1, 0x0);
        gbc.writeMem(0x408c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd11c);
        EXPECT(gbc.pc(), 0x408e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0004
        gbc.setState(0x8dbc, 0x6ba7, 0x20c0, 0x54d7, 0x54e2, 0x5cb2, 0x1, 0x1);
        gbc.writeMem(0x8dbc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6ba7);
        EXPECT(gbc.pc(), 0x8dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dbc), 0xcb);
        EXPECT(gbc.readMem(0x8dbd), 0xd);
        // CB 0D 0005
        gbc.setState(0x626a, 0x3647, 0xfeb0, 0xfe96, 0x4e7d, 0x7ef5, 0x0, 0x1);
        gbc.writeMem(0x626a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x3647);
        EXPECT(gbc.pc(), 0x626c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0006
        gbc.setState(0x573a, 0x8783, 0xbc60, 0x7223, 0xc595, 0x48f3, 0x1, 0x1);
        gbc.writeMem(0x573a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8783);
        EXPECT(gbc.pc(), 0x573c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0007
        gbc.setState(0xbe63, 0x5334, 0xf810, 0xef98, 0xb500, 0xaaf, 0x0, 0x0);
        gbc.writeMem(0xbe63, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5334);
        EXPECT(gbc.pc(), 0xbe65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe63), 0xcb);
        EXPECT(gbc.readMem(0xbe64), 0xd);
        // CB 0D 0008
        gbc.setState(0x7fed, 0x928, 0x57c0, 0x7c13, 0x970b, 0x2ca5, 0x0, 0x0);
        gbc.writeMem(0x7fed, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x928);
        EXPECT(gbc.pc(), 0x7fef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0009
        gbc.setState(0x5029, 0xdb2f, 0x2290, 0x6c31, 0xa5c7, 0xb896, 0x0, 0x0);
        gbc.writeMem(0x5029, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xdb2f);
        EXPECT(gbc.pc(), 0x502b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 000A
        gbc.setState(0x9c07, 0x9a9f, 0x6fb0, 0xafae, 0x563b, 0x1ab9, 0x1, 0x0);
        gbc.writeMem(0x9c07, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9a9f);
        EXPECT(gbc.pc(), 0x9c09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c07), 0xcb);
        EXPECT(gbc.readMem(0x9c08), 0xd);
        // CB 0D 000B
        gbc.setState(0x9cfb, 0x2106, 0x5f20, 0x94a4, 0xd95b, 0x82ce, 0x0, 0x1);
        gbc.writeMem(0x9cfb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2106);
        EXPECT(gbc.pc(), 0x9cfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cfb), 0xcb);
        EXPECT(gbc.readMem(0x9cfc), 0xd);
        // CB 0D 000C
        gbc.setState(0xa81b, 0xe602, 0x2490, 0xc92d, 0xdbd3, 0xd32c, 0x1, 0x1);
        gbc.writeMem(0xa81b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe602);
        EXPECT(gbc.pc(), 0xa81d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa81b), 0xcb);
        EXPECT(gbc.readMem(0xa81c), 0xd);
        // CB 0D 000D
        gbc.setState(0x339a, 0x88ec, 0x8db0, 0x151f, 0xfb09, 0x45a5, 0x0, 0x1);
        gbc.writeMem(0x339a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x88ec);
        EXPECT(gbc.pc(), 0x339c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 000E
        gbc.setState(0x735b, 0xb523, 0x5ab0, 0x7d0, 0xc1aa, 0x20ca, 0x1, 0x0);
        gbc.writeMem(0x735b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb523);
        EXPECT(gbc.pc(), 0x735d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 000F
        gbc.setState(0xebb3, 0x30b8, 0x4470, 0x97db, 0x54c6, 0x348d, 0x1, 0x1);
        gbc.writeMem(0xebb3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x30b8);
        EXPECT(gbc.pc(), 0xebb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebb3), 0xcb);
        EXPECT(gbc.readMem(0xebb4), 0xd);
        // CB 0D 0010
        gbc.setState(0x1a31, 0x7ee4, 0xf100, 0x4255, 0x3cd, 0xcad4, 0x0, 0x0);
        gbc.writeMem(0x1a31, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7ee4);
        EXPECT(gbc.pc(), 0x1a33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0011
        gbc.setState(0xde68, 0x16e2, 0x18f0, 0x82bd, 0x67ec, 0x41a5, 0x0, 0x0);
        gbc.writeMem(0xde68, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x16e2);
        EXPECT(gbc.pc(), 0xde6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde68), 0xcb);
        EXPECT(gbc.readMem(0xde69), 0xd);
        // CB 0D 0012
        gbc.setState(0x1358, 0x441f, 0xf820, 0x26e3, 0xd49a, 0xe90, 0x1, 0x1);
        gbc.writeMem(0x1358, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x441f);
        EXPECT(gbc.pc(), 0x135a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0013
        gbc.setState(0xf23, 0x3e63, 0x8440, 0x7ab6, 0xcc13, 0xbbd4, 0x1, 0x0);
        gbc.writeMem(0xf23, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3e63);
        EXPECT(gbc.pc(), 0xf25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0015
        gbc.setState(0x4fb3, 0x4e8, 0x64f0, 0xf87a, 0xc19e, 0x9f6f, 0x0, 0x1);
        gbc.writeMem(0x4fb3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4e8);
        EXPECT(gbc.pc(), 0x4fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0016
        gbc.setState(0x3974, 0x4006, 0x49d0, 0x92cc, 0xcfaa, 0x520e, 0x1, 0x1);
        gbc.writeMem(0x3974, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4006);
        EXPECT(gbc.pc(), 0x3976);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0017
        gbc.setState(0x711b, 0x9965, 0x4fd0, 0x10f9, 0x8b8a, 0x56a8, 0x1, 0x0);
        gbc.writeMem(0x711b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9965);
        EXPECT(gbc.pc(), 0x711d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0018
        gbc.setState(0x7703, 0xc4b5, 0x36e0, 0x8a05, 0xd589, 0x6714, 0x0, 0x1);
        gbc.writeMem(0x7703, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc4b5);
        EXPECT(gbc.pc(), 0x7705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 001A
        gbc.setState(0xb4f3, 0xdd0c, 0x1f30, 0xab89, 0x6974, 0x634c, 0x0, 0x0);
        gbc.writeMem(0xb4f3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xdd0c);
        EXPECT(gbc.pc(), 0xb4f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4f3), 0xcb);
        EXPECT(gbc.readMem(0xb4f4), 0xd);
        // CB 0D 001B
        gbc.setState(0xda63, 0x7e55, 0x8d40, 0x4590, 0x2f58, 0xbc55, 0x0, 0x1);
        gbc.writeMem(0xda63, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7e55);
        EXPECT(gbc.pc(), 0xda65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda63), 0xcb);
        EXPECT(gbc.readMem(0xda64), 0xd);
        // CB 0D 001C
        gbc.setState(0x115a, 0xd419, 0xf850, 0xa55b, 0x55e0, 0x2bd7, 0x0, 0x0);
        gbc.writeMem(0x115a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd419);
        EXPECT(gbc.pc(), 0x115c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 001D
        gbc.setState(0xa792, 0xced0, 0x3e60, 0x7ef8, 0x275a, 0x39e9, 0x0, 0x0);
        gbc.writeMem(0xa792, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xced0);
        EXPECT(gbc.pc(), 0xa794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa792), 0xcb);
        EXPECT(gbc.readMem(0xa793), 0xd);
        // CB 0D 001E
        gbc.setState(0x84a8, 0xa7ae, 0x38a0, 0x2d6c, 0xe73b, 0xcfcf, 0x1, 0x0);
        gbc.writeMem(0x84a8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa7ae);
        EXPECT(gbc.pc(), 0x84aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a8), 0xcb);
        EXPECT(gbc.readMem(0x84a9), 0xd);
        // CB 0D 001F
        gbc.setState(0xdae3, 0xed3e, 0x7220, 0x7af0, 0x7eb7, 0xb8cc, 0x0, 0x0);
        gbc.writeMem(0xdae3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xed3e);
        EXPECT(gbc.pc(), 0xdae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae3), 0xcb);
        EXPECT(gbc.readMem(0xdae4), 0xd);
        // CB 0D 0021
        gbc.setState(0x87a6, 0x9ef3, 0x7b70, 0x719f, 0xdbf3, 0x8566, 0x0, 0x1);
        gbc.writeMem(0x87a6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9ef3);
        EXPECT(gbc.pc(), 0x87a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a6), 0xcb);
        EXPECT(gbc.readMem(0x87a7), 0xd);
        // CB 0D 0022
        gbc.setState(0x5ed0, 0x7e0f, 0xa820, 0x8980, 0x4acd, 0x54d0, 0x1, 0x1);
        gbc.writeMem(0x5ed0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7e0f);
        EXPECT(gbc.pc(), 0x5ed2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0023
        gbc.setState(0x8313, 0x71ac, 0xd1a0, 0x191a, 0xc9e6, 0xa23e, 0x0, 0x0);
        gbc.writeMem(0x8313, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x71ac);
        EXPECT(gbc.pc(), 0x8315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8313), 0xcb);
        EXPECT(gbc.readMem(0x8314), 0xd);
        // CB 0D 0024
        gbc.setState(0xa94f, 0x18c, 0x76f0, 0x3af0, 0xdc0b, 0x4d24, 0x1, 0x1);
        gbc.writeMem(0xa94f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x18c);
        EXPECT(gbc.pc(), 0xa951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa94f), 0xcb);
        EXPECT(gbc.readMem(0xa950), 0xd);
        // CB 0D 0025
        gbc.setState(0x8f80, 0xd5b8, 0x1110, 0x1b4a, 0x6c7c, 0xbf28, 0x1, 0x1);
        gbc.writeMem(0x8f80, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd5b8);
        EXPECT(gbc.pc(), 0x8f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f80), 0xcb);
        EXPECT(gbc.readMem(0x8f81), 0xd);
        // CB 0D 0026
        gbc.setState(0xadc5, 0x9ca9, 0x2ce0, 0x62d3, 0x3dd2, 0xd297, 0x1, 0x1);
        gbc.writeMem(0xadc5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9ca9);
        EXPECT(gbc.pc(), 0xadc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc5), 0xcb);
        EXPECT(gbc.readMem(0xadc6), 0xd);
        // CB 0D 0027
        gbc.setState(0x44c0, 0xf46b, 0xfe60, 0x270a, 0x1f9, 0x7836, 0x1, 0x0);
        gbc.writeMem(0x44c0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf46b);
        EXPECT(gbc.pc(), 0x44c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0028
        gbc.setState(0xb31b, 0x1183, 0x2f30, 0x176e, 0x7310, 0x487a, 0x0, 0x1);
        gbc.writeMem(0xb31b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1183);
        EXPECT(gbc.pc(), 0xb31d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb31b), 0xcb);
        EXPECT(gbc.readMem(0xb31c), 0xd);
        // CB 0D 0029
        gbc.setState(0xce71, 0x696a, 0xb600, 0x91a7, 0xba90, 0x27dc, 0x1, 0x0);
        gbc.writeMem(0xce71, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x696a);
        EXPECT(gbc.pc(), 0xce73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce71), 0xcb);
        EXPECT(gbc.readMem(0xce72), 0xd);
        // CB 0D 002A
        gbc.setState(0xc38b, 0x8bbb, 0xdba0, 0xa241, 0x1539, 0xcd36, 0x1, 0x1);
        gbc.writeMem(0xc38b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8bbb);
        EXPECT(gbc.pc(), 0xc38d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc38b), 0xcb);
        EXPECT(gbc.readMem(0xc38c), 0xd);
        // CB 0D 002B
        gbc.setState(0x323c, 0xb801, 0xee10, 0xf148, 0x4485, 0xfd84, 0x0, 0x0);
        gbc.writeMem(0x323c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb801);
        EXPECT(gbc.pc(), 0x323e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 002C
        gbc.setState(0x47ca, 0x1379, 0x8410, 0xed32, 0x710e, 0xbdb2, 0x0, 0x0);
        gbc.writeMem(0x47ca, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1379);
        EXPECT(gbc.pc(), 0x47cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 002D
        gbc.setState(0x8c92, 0x7526, 0xe580, 0xc17f, 0x1915, 0xa0ea, 0x0, 0x0);
        gbc.writeMem(0x8c92, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7526);
        EXPECT(gbc.pc(), 0x8c94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c92), 0xcb);
        EXPECT(gbc.readMem(0x8c93), 0xd);
        // CB 0D 002E
        gbc.setState(0x9e3, 0x6bbc, 0xbab0, 0x9efc, 0xc977, 0xf990, 0x1, 0x1);
        gbc.writeMem(0x9e3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6bbc);
        EXPECT(gbc.pc(), 0x9e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 002F
        gbc.setState(0x6658, 0x13c1, 0x2740, 0x83b, 0xfcec, 0xf4c, 0x1, 0x1);
        gbc.writeMem(0x6658, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x13c1);
        EXPECT(gbc.pc(), 0x665a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0030
        gbc.setState(0xd87c, 0xede, 0xd390, 0x1e3c, 0x3557, 0x3a22, 0x1, 0x0);
        gbc.writeMem(0xd87c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xede);
        EXPECT(gbc.pc(), 0xd87e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd87c), 0xcb);
        EXPECT(gbc.readMem(0xd87d), 0xd);
        // CB 0D 0031
        gbc.setState(0x4cc2, 0x20aa, 0xd150, 0xb4e2, 0x9b53, 0x62db, 0x1, 0x1);
        gbc.writeMem(0x4cc2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x20aa);
        EXPECT(gbc.pc(), 0x4cc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0032
        gbc.setState(0xc88f, 0x3519, 0xb220, 0x3d79, 0x3768, 0xd012, 0x0, 0x0);
        gbc.writeMem(0xc88f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3519);
        EXPECT(gbc.pc(), 0xc891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88f), 0xcb);
        EXPECT(gbc.readMem(0xc890), 0xd);
        // CB 0D 0033
        gbc.setState(0x2a59, 0x9af7, 0x8ef0, 0x76c2, 0x4964, 0x4fe1, 0x0, 0x0);
        gbc.writeMem(0x2a59, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9af7);
        EXPECT(gbc.pc(), 0x2a5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0034
        gbc.setState(0xd58b, 0x4b81, 0x4ac0, 0x5c88, 0x19d5, 0x1b8, 0x0, 0x1);
        gbc.writeMem(0xd58b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4b81);
        EXPECT(gbc.pc(), 0xd58d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd58b), 0xcb);
        EXPECT(gbc.readMem(0xd58c), 0xd);
        // CB 0D 0035
        gbc.setState(0xd289, 0x6d2e, 0xba90, 0x7d2c, 0x5025, 0xd3ce, 0x1, 0x1);
        gbc.writeMem(0xd289, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6d2e);
        EXPECT(gbc.pc(), 0xd28b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd289), 0xcb);
        EXPECT(gbc.readMem(0xd28a), 0xd);
        // CB 0D 0036
        gbc.setState(0xe18a, 0xa6a2, 0x9480, 0xf534, 0x8947, 0xecbf, 0x0, 0x0);
        gbc.writeMem(0xe18a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa6a2);
        EXPECT(gbc.pc(), 0xe18c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe18a), 0xcb);
        EXPECT(gbc.readMem(0xe18b), 0xd);
        // CB 0D 0037
        gbc.setState(0x9805, 0x2699, 0x3c90, 0xb33c, 0x4272, 0xefb2, 0x0, 0x1);
        gbc.writeMem(0x9805, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2699);
        EXPECT(gbc.pc(), 0x9807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9805), 0xcb);
        EXPECT(gbc.readMem(0x9806), 0xd);
        // CB 0D 0038
        gbc.setState(0xb003, 0x6210, 0xd250, 0xebfa, 0xa881, 0xc208, 0x0, 0x1);
        gbc.writeMem(0xb003, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6210);
        EXPECT(gbc.pc(), 0xb005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb003), 0xcb);
        EXPECT(gbc.readMem(0xb004), 0xd);
        // CB 0D 0039
        gbc.setState(0x4ee3, 0x90db, 0x29b0, 0xb798, 0x82ee, 0xb8ae, 0x0, 0x1);
        gbc.writeMem(0x4ee3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x90db);
        EXPECT(gbc.pc(), 0x4ee5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 003A
        gbc.setState(0x8376, 0xc138, 0x1a40, 0xb453, 0x3b55, 0x98e4, 0x0, 0x0);
        gbc.writeMem(0x8376, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc138);
        EXPECT(gbc.pc(), 0x8378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8376), 0xcb);
        EXPECT(gbc.readMem(0x8377), 0xd);
        // CB 0D 003B
        gbc.setState(0x995e, 0x33f0, 0xb040, 0xfc8, 0x4a92, 0x332c, 0x0, 0x0);
        gbc.writeMem(0x995e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x33f0);
        EXPECT(gbc.pc(), 0x9960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x995e), 0xcb);
        EXPECT(gbc.readMem(0x995f), 0xd);
        // CB 0D 003C
        gbc.setState(0x767e, 0x61cb, 0x11a0, 0xab95, 0xf4c8, 0x9514, 0x0, 0x1);
        gbc.writeMem(0x767e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x61cb);
        EXPECT(gbc.pc(), 0x7680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 003D
        gbc.setState(0xb5fd, 0x4556, 0x78a0, 0xa916, 0xfaec, 0x69f8, 0x1, 0x1);
        gbc.writeMem(0xb5fd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4556);
        EXPECT(gbc.pc(), 0xb5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5fd), 0xcb);
        EXPECT(gbc.readMem(0xb5fe), 0xd);
        // CB 0D 003E
        gbc.setState(0x310f, 0xc19c, 0x2690, 0xb6ba, 0x52c4, 0x780f, 0x1, 0x1);
        gbc.writeMem(0x310f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc19c);
        EXPECT(gbc.pc(), 0x3111);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 003F
        gbc.setState(0xd04, 0x2129, 0x8700, 0x94be, 0x38ba, 0x26a4, 0x0, 0x1);
        gbc.writeMem(0xd04, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2129);
        EXPECT(gbc.pc(), 0xd06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0040
        gbc.setState(0x5c3c, 0x4c0b, 0x9840, 0x3f0d, 0xcfca, 0x68f6, 0x0, 0x1);
        gbc.writeMem(0x5c3c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4c0b);
        EXPECT(gbc.pc(), 0x5c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0041
        gbc.setState(0x53fd, 0xd1e, 0x31e0, 0x6850, 0x5556, 0x3126, 0x1, 0x0);
        gbc.writeMem(0x53fd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd1e);
        EXPECT(gbc.pc(), 0x53ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0042
        gbc.setState(0x6e76, 0x7f0a, 0xeff0, 0x2bd7, 0x1759, 0x9114, 0x0, 0x1);
        gbc.writeMem(0x6e76, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7f0a);
        EXPECT(gbc.pc(), 0x6e78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0043
        gbc.setState(0x305d, 0x1392, 0x7800, 0x5536, 0x7543, 0xbb14, 0x1, 0x0);
        gbc.writeMem(0x305d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1392);
        EXPECT(gbc.pc(), 0x305f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0044
        gbc.setState(0x90d3, 0xbf7, 0x1bd0, 0x876c, 0xc0a8, 0x523a, 0x1, 0x0);
        gbc.writeMem(0x90d3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xbf7);
        EXPECT(gbc.pc(), 0x90d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90d3), 0xcb);
        EXPECT(gbc.readMem(0x90d4), 0xd);
        // CB 0D 0045
        gbc.setState(0x4033, 0xa3f8, 0x7770, 0x4f5f, 0x7ec2, 0x5683, 0x1, 0x0);
        gbc.writeMem(0x4033, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa3f8);
        EXPECT(gbc.pc(), 0x4035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0046
        gbc.setState(0x89fe, 0x2bf3, 0x3140, 0x1d62, 0x7514, 0x2351, 0x0, 0x0);
        gbc.writeMem(0x89fe, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2bf3);
        EXPECT(gbc.pc(), 0x8a00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89fe), 0xcb);
        EXPECT(gbc.readMem(0x89ff), 0xd);
        // CB 0D 0047
        gbc.setState(0x610d, 0xe4df, 0x49f0, 0xd93b, 0xe9c7, 0x1891, 0x1, 0x1);
        gbc.writeMem(0x610d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe4df);
        EXPECT(gbc.pc(), 0x610f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0048
        gbc.setState(0xa498, 0xcfb4, 0x3490, 0x5f20, 0xc31f, 0x7604, 0x1, 0x1);
        gbc.writeMem(0xa498, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcfb4);
        EXPECT(gbc.pc(), 0xa49a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa498), 0xcb);
        EXPECT(gbc.readMem(0xa499), 0xd);
        // CB 0D 0049
        gbc.setState(0x4fc6, 0x8939, 0x2ac0, 0x93a5, 0xc4bf, 0xa0d, 0x1, 0x0);
        gbc.writeMem(0x4fc6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8939);
        EXPECT(gbc.pc(), 0x4fc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 004B
        gbc.setState(0xb302, 0x6e19, 0x46b0, 0x93d8, 0xf708, 0x6528, 0x1, 0x0);
        gbc.writeMem(0xb302, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6e19);
        EXPECT(gbc.pc(), 0xb304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb302), 0xcb);
        EXPECT(gbc.readMem(0xb303), 0xd);
        // CB 0D 004C
        gbc.setState(0x7980, 0xf0c9, 0xe880, 0x7c2e, 0xb87d, 0xd936, 0x1, 0x1);
        gbc.writeMem(0x7980, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf0c9);
        EXPECT(gbc.pc(), 0x7982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 004D
        gbc.setState(0x2bfe, 0xa5cb, 0xe750, 0x8107, 0xca96, 0x2eb, 0x1, 0x1);
        gbc.writeMem(0x2bfe, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa5cb);
        EXPECT(gbc.pc(), 0x2c00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 004E
        gbc.setState(0x5eb5, 0xd600, 0xbc70, 0xeb20, 0x8bf0, 0xe117, 0x1, 0x0);
        gbc.writeMem(0x5eb5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd600);
        EXPECT(gbc.pc(), 0x5eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 004F
        gbc.setState(0x1679, 0x11a7, 0x2330, 0xf1cb, 0xbf54, 0x3afd, 0x0, 0x0);
        gbc.writeMem(0x1679, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x11a7);
        EXPECT(gbc.pc(), 0x167b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0050
        gbc.setState(0xa1ba, 0x607f, 0x6ec0, 0x9c8e, 0x5f41, 0xb476, 0x0, 0x0);
        gbc.writeMem(0xa1ba, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x607f);
        EXPECT(gbc.pc(), 0xa1bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ba), 0xcb);
        EXPECT(gbc.readMem(0xa1bb), 0xd);
        // CB 0D 0051
        gbc.setState(0xd34e, 0x1bbc, 0x9040, 0x3d12, 0x727e, 0xfee8, 0x0, 0x1);
        gbc.writeMem(0xd34e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1bbc);
        EXPECT(gbc.pc(), 0xd350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd34e), 0xcb);
        EXPECT(gbc.readMem(0xd34f), 0xd);
        // CB 0D 0052
        gbc.setState(0x40d4, 0xc1bb, 0x9dc0, 0x3fa, 0x4188, 0x8b79, 0x0, 0x0);
        gbc.writeMem(0x40d4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc1bb);
        EXPECT(gbc.pc(), 0x40d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0053
        gbc.setState(0x74cc, 0xc936, 0x9f00, 0xa5cc, 0xd45e, 0x91e9, 0x0, 0x0);
        gbc.writeMem(0x74cc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc936);
        EXPECT(gbc.pc(), 0x74ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0054
        gbc.setState(0x583e, 0x1f13, 0x8480, 0xa9fa, 0xc2b5, 0xde5, 0x1, 0x0);
        gbc.writeMem(0x583e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1f13);
        EXPECT(gbc.pc(), 0x5840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0055
        gbc.setState(0xde1f, 0x4aeb, 0x25e0, 0x58bd, 0x21a5, 0xe4b8, 0x1, 0x0);
        gbc.writeMem(0xde1f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4aeb);
        EXPECT(gbc.pc(), 0xde21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1f), 0xcb);
        EXPECT(gbc.readMem(0xde20), 0xd);
        // CB 0D 0056
        gbc.setState(0x1f3b, 0x83bf, 0x5260, 0xfaf4, 0x845e, 0x6723, 0x1, 0x1);
        gbc.writeMem(0x1f3b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x83bf);
        EXPECT(gbc.pc(), 0x1f3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0057
        gbc.setState(0xadef, 0x3786, 0xc930, 0x4ff4, 0xc125, 0xbcf2, 0x1, 0x1);
        gbc.writeMem(0xadef, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3786);
        EXPECT(gbc.pc(), 0xadf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadef), 0xcb);
        EXPECT(gbc.readMem(0xadf0), 0xd);
        // CB 0D 0058
        gbc.setState(0x6e91, 0x9a18, 0xb480, 0xb104, 0x6266, 0xcc3a, 0x1, 0x0);
        gbc.writeMem(0x6e91, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9a18);
        EXPECT(gbc.pc(), 0x6e93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 005A
        gbc.setState(0x32da, 0xdf2f, 0x8970, 0x2121, 0x2704, 0x53f1, 0x0, 0x0);
        gbc.writeMem(0x32da, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xdf2f);
        EXPECT(gbc.pc(), 0x32dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 005B
        gbc.setState(0xbcb8, 0x159d, 0xd390, 0x9f4f, 0x455c, 0x68dd, 0x1, 0x0);
        gbc.writeMem(0xbcb8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x159d);
        EXPECT(gbc.pc(), 0xbcba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcb8), 0xcb);
        EXPECT(gbc.readMem(0xbcb9), 0xd);
        // CB 0D 005C
        gbc.setState(0x28ff, 0x7d26, 0xc660, 0x628c, 0xe6d6, 0x7fa7, 0x0, 0x0);
        gbc.writeMem(0x28ff, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7d26);
        EXPECT(gbc.pc(), 0x2901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 005D
        gbc.setState(0x3608, 0x12e8, 0xdee0, 0xb778, 0x4080, 0xb4a5, 0x0, 0x1);
        gbc.writeMem(0x3608, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x12e8);
        EXPECT(gbc.pc(), 0x360a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 005E
        gbc.setState(0x822b, 0xba18, 0x39c0, 0xd03, 0xc6ee, 0x6093, 0x1, 0x0);
        gbc.writeMem(0x822b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xba18);
        EXPECT(gbc.pc(), 0x822d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x822b), 0xcb);
        EXPECT(gbc.readMem(0x822c), 0xd);
        // CB 0D 005F
        gbc.setState(0xeea1, 0x519c, 0x57a0, 0x2e3d, 0xb5e2, 0x8db2, 0x1, 0x1);
        gbc.writeMem(0xeea1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x519c);
        EXPECT(gbc.pc(), 0xeea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea1), 0xcb);
        EXPECT(gbc.readMem(0xeea2), 0xd);
        // CB 0D 0060
        gbc.setState(0x2a19, 0xc3e5, 0x8a70, 0xe4fb, 0xd03e, 0xb3fa, 0x1, 0x0);
        gbc.writeMem(0x2a19, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc3e5);
        EXPECT(gbc.pc(), 0x2a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0061
        gbc.setState(0x8b34, 0x8a6c, 0xa9e0, 0x2816, 0xdde, 0x987b, 0x1, 0x0);
        gbc.writeMem(0x8b34, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8a6c);
        EXPECT(gbc.pc(), 0x8b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b34), 0xcb);
        EXPECT(gbc.readMem(0x8b35), 0xd);
        // CB 0D 0062
        gbc.setState(0xbdba, 0x6e93, 0xf450, 0x570, 0x26e0, 0x87d2, 0x1, 0x0);
        gbc.writeMem(0xbdba, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x6e93);
        EXPECT(gbc.pc(), 0xbdbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdba), 0xcb);
        EXPECT(gbc.readMem(0xbdbb), 0xd);
        // CB 0D 0063
        gbc.setState(0x231a, 0x8ec2, 0x3100, 0x8884, 0xa0b5, 0xba06, 0x0, 0x1);
        gbc.writeMem(0x231a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8ec2);
        EXPECT(gbc.pc(), 0x231c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0064
        gbc.setState(0xde1b, 0xe521, 0x7460, 0x6559, 0x33f3, 0x8af0, 0x1, 0x0);
        gbc.writeMem(0xde1b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe521);
        EXPECT(gbc.pc(), 0xde1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1b), 0xcb);
        EXPECT(gbc.readMem(0xde1c), 0xd);
        // CB 0D 0065
        gbc.setState(0xed56, 0xc4ce, 0x55c0, 0x21cb, 0xb3d2, 0xda62, 0x1, 0x0);
        gbc.writeMem(0xed56, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc4ce);
        EXPECT(gbc.pc(), 0xed58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed56), 0xcb);
        EXPECT(gbc.readMem(0xed57), 0xd);
        // CB 0D 0066
        gbc.setState(0x2974, 0x7986, 0x8660, 0x4d6c, 0x3701, 0x4b19, 0x0, 0x1);
        gbc.writeMem(0x2974, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7986);
        EXPECT(gbc.pc(), 0x2976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0067
        gbc.setState(0x5c63, 0xb565, 0xf3c0, 0xb66a, 0xf833, 0x490b, 0x0, 0x1);
        gbc.writeMem(0x5c63, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb565);
        EXPECT(gbc.pc(), 0x5c65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0068
        gbc.setState(0x10e8, 0x7243, 0xc330, 0x2579, 0xec19, 0x9591, 0x0, 0x0);
        gbc.writeMem(0x10e8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7243);
        EXPECT(gbc.pc(), 0x10ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0069
        gbc.setState(0xd2e0, 0x13ac, 0xe340, 0x68ec, 0xfd73, 0x36a6, 0x1, 0x1);
        gbc.writeMem(0xd2e0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x13ac);
        EXPECT(gbc.pc(), 0xd2e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e0), 0xcb);
        EXPECT(gbc.readMem(0xd2e1), 0xd);
        // CB 0D 006A
        gbc.setState(0xbe3b, 0x9bf6, 0xdcd0, 0x72aa, 0x67ca, 0xf80c, 0x0, 0x1);
        gbc.writeMem(0xbe3b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9bf6);
        EXPECT(gbc.pc(), 0xbe3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe3b), 0xcb);
        EXPECT(gbc.readMem(0xbe3c), 0xd);
        // CB 0D 006B
        gbc.setState(0xc4eb, 0xeae1, 0xcb70, 0xe7b3, 0x8c28, 0x94fc, 0x1, 0x1);
        gbc.writeMem(0xc4eb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xeae1);
        EXPECT(gbc.pc(), 0xc4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4eb), 0xcb);
        EXPECT(gbc.readMem(0xc4ec), 0xd);
        // CB 0D 006C
        gbc.setState(0xcb43, 0x23a0, 0x68f0, 0x6600, 0xec8f, 0xc7a5, 0x1, 0x0);
        gbc.writeMem(0xcb43, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x23a0);
        EXPECT(gbc.pc(), 0xcb45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb43), 0xcb);
        EXPECT(gbc.readMem(0xcb44), 0xd);
        // CB 0D 006D
        gbc.setState(0x599c, 0x1445, 0x5e00, 0xcceb, 0x33ba, 0x1d29, 0x1, 0x1);
        gbc.writeMem(0x599c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1445);
        EXPECT(gbc.pc(), 0x599e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 006E
        gbc.setState(0x293c, 0x4a47, 0x85b0, 0x9d3f, 0xcbe9, 0x33ea, 0x0, 0x1);
        gbc.writeMem(0x293c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4a47);
        EXPECT(gbc.pc(), 0x293e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0070
        gbc.setState(0x1772, 0xfca4, 0xb8f0, 0x9c90, 0xcd2, 0xa0d4, 0x1, 0x1);
        gbc.writeMem(0x1772, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfca4);
        EXPECT(gbc.pc(), 0x1774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0071
        gbc.setState(0x3ada, 0xfd10, 0x1340, 0x8b1, 0x9bab, 0xa65d, 0x1, 0x1);
        gbc.writeMem(0x3ada, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xfd10);
        EXPECT(gbc.pc(), 0x3adc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0072
        gbc.setState(0xdd5c, 0xa95d, 0xc930, 0xbb36, 0xfab5, 0x8399, 0x1, 0x0);
        gbc.writeMem(0xdd5c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa95d);
        EXPECT(gbc.pc(), 0xdd5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd5c), 0xcb);
        EXPECT(gbc.readMem(0xdd5d), 0xd);
        // CB 0D 0073
        gbc.setState(0xfad, 0x311a, 0x6610, 0x3726, 0x9046, 0x6a5b, 0x0, 0x1);
        gbc.writeMem(0xfad, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x311a);
        EXPECT(gbc.pc(), 0xfaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0075
        gbc.setState(0x9c20, 0x710e, 0xbf70, 0xfbe8, 0x8132, 0x7627, 0x0, 0x0);
        gbc.writeMem(0x9c20, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x710e);
        EXPECT(gbc.pc(), 0x9c22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c20), 0xcb);
        EXPECT(gbc.readMem(0x9c21), 0xd);
        // CB 0D 0076
        gbc.setState(0x1623, 0x9d9d, 0x39d0, 0x774a, 0xeff6, 0x5846, 0x0, 0x0);
        gbc.writeMem(0x1623, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9d9d);
        EXPECT(gbc.pc(), 0x1625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0077
        gbc.setState(0x9964, 0x6d42, 0xec0, 0x247d, 0xefae, 0xb9ad, 0x1, 0x0);
        gbc.writeMem(0x9964, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6d42);
        EXPECT(gbc.pc(), 0x9966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9964), 0xcb);
        EXPECT(gbc.readMem(0x9965), 0xd);
        // CB 0D 0078
        gbc.setState(0x3353, 0xb24c, 0x21a0, 0xdc, 0xac47, 0xc86e, 0x1, 0x1);
        gbc.writeMem(0x3353, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb24c);
        EXPECT(gbc.pc(), 0x3355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0079
        gbc.setState(0x251c, 0x2b89, 0x3a60, 0xfc57, 0x3ddb, 0xb336, 0x1, 0x0);
        gbc.writeMem(0x251c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2b89);
        EXPECT(gbc.pc(), 0x251e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 007A
        gbc.setState(0xeaf9, 0x65f7, 0x1a90, 0xc840, 0x7ae0, 0xc3a7, 0x0, 0x0);
        gbc.writeMem(0xeaf9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x65f7);
        EXPECT(gbc.pc(), 0xeafb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf9), 0xcb);
        EXPECT(gbc.readMem(0xeafa), 0xd);
        // CB 0D 007B
        gbc.setState(0xc7ba, 0xe83, 0x7f0, 0xb028, 0x718, 0xf289, 0x0, 0x0);
        gbc.writeMem(0xc7ba, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe83);
        EXPECT(gbc.pc(), 0xc7bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ba), 0xcb);
        EXPECT(gbc.readMem(0xc7bb), 0xd);
        // CB 0D 007C
        gbc.setState(0xb22c, 0xd2b5, 0x4520, 0xe89c, 0x87fd, 0xb089, 0x0, 0x0);
        gbc.writeMem(0xb22c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd2b5);
        EXPECT(gbc.pc(), 0xb22e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb22c), 0xcb);
        EXPECT(gbc.readMem(0xb22d), 0xd);
        // CB 0D 007D
        gbc.setState(0x279a, 0x93ce, 0x63d0, 0xcadb, 0xcbc0, 0xf241, 0x1, 0x0);
        gbc.writeMem(0x279a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x93ce);
        EXPECT(gbc.pc(), 0x279c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 007E
        gbc.setState(0x43a3, 0x3006, 0x3c70, 0xa0a5, 0xfce0, 0xd420, 0x0, 0x1);
        gbc.writeMem(0x43a3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3006);
        EXPECT(gbc.pc(), 0x43a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 007F
        gbc.setState(0x8c69, 0x8d56, 0x1a70, 0xa077, 0x8469, 0xebb0, 0x0, 0x0);
        gbc.writeMem(0x8c69, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8d56);
        EXPECT(gbc.pc(), 0x8c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c69), 0xcb);
        EXPECT(gbc.readMem(0x8c6a), 0xd);
        // CB 0D 0080
        gbc.setState(0x4f4a, 0x6760, 0xbee0, 0xdafd, 0xf06c, 0xe6c4, 0x1, 0x0);
        gbc.writeMem(0x4f4a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6760);
        EXPECT(gbc.pc(), 0x4f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0082
        gbc.setState(0x62e8, 0xe6f5, 0x8fc0, 0x7e93, 0x790, 0xdf1c, 0x1, 0x0);
        gbc.writeMem(0x62e8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe6f5);
        EXPECT(gbc.pc(), 0x62ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0084
        gbc.setState(0x7647, 0x86ab, 0xedf0, 0xb070, 0xf0e, 0x25c5, 0x0, 0x0);
        gbc.writeMem(0x7647, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x86ab);
        EXPECT(gbc.pc(), 0x7649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0085
        gbc.setState(0xef35, 0x9f6, 0x4760, 0xe356, 0x9d2, 0xb632, 0x1, 0x0);
        gbc.writeMem(0xef35, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9f6);
        EXPECT(gbc.pc(), 0xef37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef35), 0xcb);
        EXPECT(gbc.readMem(0xef36), 0xd);
        // CB 0D 0086
        gbc.setState(0xa0f6, 0x990f, 0x1e20, 0x17ab, 0x1ec5, 0xad56, 0x1, 0x0);
        gbc.writeMem(0xa0f6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x990f);
        EXPECT(gbc.pc(), 0xa0f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0f6), 0xcb);
        EXPECT(gbc.readMem(0xa0f7), 0xd);
        // CB 0D 0087
        gbc.setState(0xe570, 0xf7dc, 0x80e0, 0x83ec, 0xc029, 0x93f8, 0x1, 0x1);
        gbc.writeMem(0xe570, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf7dc);
        EXPECT(gbc.pc(), 0xe572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe570), 0xcb);
        EXPECT(gbc.readMem(0xe571), 0xd);
        // CB 0D 0088
        gbc.setState(0x1af, 0xdc99, 0x69d0, 0x23c7, 0xc4fb, 0xdb78, 0x0, 0x0);
        gbc.writeMem(0x1af, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xdc99);
        EXPECT(gbc.pc(), 0x1b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0089
        gbc.setState(0xe422, 0x4938, 0xba90, 0xff69, 0xdf67, 0xc349, 0x1, 0x1);
        gbc.writeMem(0xe422, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4938);
        EXPECT(gbc.pc(), 0xe424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe422), 0xcb);
        EXPECT(gbc.readMem(0xe423), 0xd);
        // CB 0D 008A
        gbc.setState(0x7825, 0x9699, 0xd080, 0x6fc5, 0x34ad, 0x653, 0x0, 0x1);
        gbc.writeMem(0x7825, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9699);
        EXPECT(gbc.pc(), 0x7827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 008B
        gbc.setState(0xe5c0, 0xde46, 0xbd80, 0xdfbc, 0x93d7, 0x17f0, 0x0, 0x1);
        gbc.writeMem(0xe5c0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xde46);
        EXPECT(gbc.pc(), 0xe5c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c0), 0xcb);
        EXPECT(gbc.readMem(0xe5c1), 0xd);
        // CB 0D 008C
        gbc.setState(0x13bc, 0x84a1, 0xecc0, 0xff1c, 0xcd29, 0xf4e0, 0x0, 0x1);
        gbc.writeMem(0x13bc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x84a1);
        EXPECT(gbc.pc(), 0x13be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 008D
        gbc.setState(0x6a56, 0xed5a, 0xecb0, 0x6cc9, 0x29ec, 0x706d, 0x0, 0x0);
        gbc.writeMem(0x6a56, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xed5a);
        EXPECT(gbc.pc(), 0x6a58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 008E
        gbc.setState(0x609d, 0xd75c, 0xee50, 0x80e6, 0xe9e7, 0xb0cc, 0x1, 0x1);
        gbc.writeMem(0x609d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd75c);
        EXPECT(gbc.pc(), 0x609f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 008F
        gbc.setState(0x2c1a, 0xa91e, 0xdd90, 0x5207, 0x21d4, 0x1746, 0x1, 0x1);
        gbc.writeMem(0x2c1a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa91e);
        EXPECT(gbc.pc(), 0x2c1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0090
        gbc.setState(0xdbdb, 0xdd09, 0x2c0, 0xd9d4, 0xace8, 0xee2a, 0x0, 0x1);
        gbc.writeMem(0xdbdb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xdd09);
        EXPECT(gbc.pc(), 0xdbdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbdb), 0xcb);
        EXPECT(gbc.readMem(0xdbdc), 0xd);
        // CB 0D 0091
        gbc.setState(0x8df0, 0xdfd2, 0xf3f0, 0xfc69, 0xc590, 0xe437, 0x1, 0x0);
        gbc.writeMem(0x8df0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xdfd2);
        EXPECT(gbc.pc(), 0x8df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df0), 0xcb);
        EXPECT(gbc.readMem(0x8df1), 0xd);
        // CB 0D 0092
        gbc.setState(0x3f9e, 0xf928, 0xd870, 0xd8bc, 0xa851, 0x8cd, 0x0, 0x1);
        gbc.writeMem(0x3f9e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf928);
        EXPECT(gbc.pc(), 0x3fa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0094
        gbc.setState(0xc68f, 0xa56c, 0xa7b0, 0xf629, 0x8a8e, 0x9fe2, 0x0, 0x0);
        gbc.writeMem(0xc68f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa56c);
        EXPECT(gbc.pc(), 0xc691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc68f), 0xcb);
        EXPECT(gbc.readMem(0xc690), 0xd);
        // CB 0D 0095
        gbc.setState(0xa746, 0xe7c0, 0xdd30, 0xeb45, 0x9c8, 0x75a9, 0x1, 0x1);
        gbc.writeMem(0xa746, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe7c0);
        EXPECT(gbc.pc(), 0xa748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa746), 0xcb);
        EXPECT(gbc.readMem(0xa747), 0xd);
        // CB 0D 0096
        gbc.setState(0x6390, 0x3742, 0xb090, 0xf6bb, 0x2f83, 0xfd57, 0x1, 0x1);
        gbc.writeMem(0x6390, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3742);
        EXPECT(gbc.pc(), 0x6392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0097
        gbc.setState(0x5dcd, 0xda26, 0x75a0, 0x1772, 0xe791, 0xa10, 0x1, 0x1);
        gbc.writeMem(0x5dcd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xda26);
        EXPECT(gbc.pc(), 0x5dcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0098
        gbc.setState(0x7512, 0x154a, 0x4e20, 0xed5a, 0x7415, 0x679f, 0x0, 0x1);
        gbc.writeMem(0x7512, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x154a);
        EXPECT(gbc.pc(), 0x7514);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0099
        gbc.setState(0x106c, 0xbb20, 0x24a0, 0xa31a, 0xcd81, 0x8ca, 0x1, 0x0);
        gbc.writeMem(0x106c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xbb20);
        EXPECT(gbc.pc(), 0x106e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 009A
        gbc.setState(0x662, 0x324, 0x5fe0, 0x1dbe, 0x560d, 0x3e57, 0x0, 0x0);
        gbc.writeMem(0x662, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x324);
        EXPECT(gbc.pc(), 0x664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 009B
        gbc.setState(0x90db, 0x286c, 0x3550, 0x7da, 0x96f5, 0x3ce2, 0x1, 0x1);
        gbc.writeMem(0x90db, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x286c);
        EXPECT(gbc.pc(), 0x90dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90db), 0xcb);
        EXPECT(gbc.readMem(0x90dc), 0xd);
        // CB 0D 009C
        gbc.setState(0x5113, 0xc2ce, 0x1c10, 0x726c, 0x640, 0xfbd9, 0x1, 0x0);
        gbc.writeMem(0x5113, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc2ce);
        EXPECT(gbc.pc(), 0x5115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 009D
        gbc.setState(0x865d, 0x1b40, 0xd770, 0x5392, 0xd69b, 0xf2ff, 0x1, 0x0);
        gbc.writeMem(0x865d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1b40);
        EXPECT(gbc.pc(), 0x865f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x865d), 0xcb);
        EXPECT(gbc.readMem(0x865e), 0xd);
        // CB 0D 009E
        gbc.setState(0x6f0b, 0x1db3, 0xb670, 0x9ada, 0x5d59, 0xfe8, 0x1, 0x1);
        gbc.writeMem(0x6f0b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1db3);
        EXPECT(gbc.pc(), 0x6f0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 009F
        gbc.setState(0x2f54, 0xe63b, 0xdd30, 0x5b2e, 0x3ee2, 0xb5df, 0x1, 0x0);
        gbc.writeMem(0x2f54, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe63b);
        EXPECT(gbc.pc(), 0x2f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00A0
        gbc.setState(0x4311, 0xb964, 0x8ea0, 0x5b17, 0xcfd5, 0xf9d8, 0x1, 0x1);
        gbc.writeMem(0x4311, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb964);
        EXPECT(gbc.pc(), 0x4313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00A1
        gbc.setState(0x5549, 0xad65, 0xc880, 0x83a9, 0x3446, 0xcc6f, 0x0, 0x1);
        gbc.writeMem(0x5549, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xad65);
        EXPECT(gbc.pc(), 0x554b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00A2
        gbc.setState(0xb52d, 0x1de5, 0x3990, 0xf951, 0xa816, 0x3aa, 0x1, 0x1);
        gbc.writeMem(0xb52d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1de5);
        EXPECT(gbc.pc(), 0xb52f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb52d), 0xcb);
        EXPECT(gbc.readMem(0xb52e), 0xd);
        // CB 0D 00A4
        gbc.setState(0xdf9a, 0xdea9, 0xc230, 0xeb47, 0x72e5, 0xc0a7, 0x0, 0x0);
        gbc.writeMem(0xdf9a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xdea9);
        EXPECT(gbc.pc(), 0xdf9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf9a), 0xcb);
        EXPECT(gbc.readMem(0xdf9b), 0xd);
        // CB 0D 00A5
        gbc.setState(0xeb20, 0x5a9, 0xd700, 0xde43, 0x4d44, 0xb69f, 0x0, 0x0);
        gbc.writeMem(0xeb20, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5a9);
        EXPECT(gbc.pc(), 0xeb22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb20), 0xcb);
        EXPECT(gbc.readMem(0xeb21), 0xd);
        // CB 0D 00A6
        gbc.setState(0xdb6a, 0x1f89, 0x98b0, 0x4767, 0x290e, 0x7ca4, 0x0, 0x0);
        gbc.writeMem(0xdb6a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1f89);
        EXPECT(gbc.pc(), 0xdb6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb6a), 0xcb);
        EXPECT(gbc.readMem(0xdb6b), 0xd);
        // CB 0D 00A7
        gbc.setState(0xdfab, 0x200c, 0x5f20, 0x8814, 0x50c1, 0xd6b9, 0x1, 0x0);
        gbc.writeMem(0xdfab, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x200c);
        EXPECT(gbc.pc(), 0xdfad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfab), 0xcb);
        EXPECT(gbc.readMem(0xdfac), 0xd);
        // CB 0D 00A8
        gbc.setState(0x9910, 0x8161, 0xba00, 0x704, 0xe9b7, 0xf93f, 0x1, 0x0);
        gbc.writeMem(0x9910, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8161);
        EXPECT(gbc.pc(), 0x9912);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9910), 0xcb);
        EXPECT(gbc.readMem(0x9911), 0xd);
        // CB 0D 00A9
        gbc.setState(0xc8f5, 0xd5fc, 0xa3c0, 0xf61e, 0xf78a, 0xb7eb, 0x1, 0x1);
        gbc.writeMem(0xc8f5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd5fc);
        EXPECT(gbc.pc(), 0xc8f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8f5), 0xcb);
        EXPECT(gbc.readMem(0xc8f6), 0xd);
        // CB 0D 00AA
        gbc.setState(0x7778, 0x2bab, 0x9a90, 0x1cf6, 0xe9d1, 0x7ce7, 0x0, 0x1);
        gbc.writeMem(0x7778, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2bab);
        EXPECT(gbc.pc(), 0x777a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00AB
        gbc.setState(0xe83, 0xcd42, 0x1900, 0xfd4f, 0x134f, 0x8939, 0x1, 0x1);
        gbc.writeMem(0xe83, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xcd42);
        EXPECT(gbc.pc(), 0xe85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00AC
        gbc.setState(0x5175, 0xf49a, 0x8520, 0xdee9, 0xfba4, 0xecb3, 0x1, 0x1);
        gbc.writeMem(0x5175, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf49a);
        EXPECT(gbc.pc(), 0x5177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00AD
        gbc.setState(0x32e4, 0x2aed, 0x2be0, 0x3705, 0xf2a2, 0xd706, 0x0, 0x1);
        gbc.writeMem(0x32e4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2aed);
        EXPECT(gbc.pc(), 0x32e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00AE
        gbc.setState(0x615a, 0x95df, 0x3210, 0xea33, 0x6836, 0xdfdc, 0x0, 0x1);
        gbc.writeMem(0x615a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x95df);
        EXPECT(gbc.pc(), 0x615c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00AF
        gbc.setState(0x5b08, 0x4f48, 0x7b90, 0x677b, 0x57ef, 0xa636, 0x0, 0x1);
        gbc.writeMem(0x5b08, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4f48);
        EXPECT(gbc.pc(), 0x5b0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00B0
        gbc.setState(0xae9b, 0x2d27, 0x9540, 0xabf4, 0x2c99, 0x684c, 0x1, 0x1);
        gbc.writeMem(0xae9b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2d27);
        EXPECT(gbc.pc(), 0xae9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae9b), 0xcb);
        EXPECT(gbc.readMem(0xae9c), 0xd);
        // CB 0D 00B1
        gbc.setState(0xdb4a, 0xbc4, 0x1d50, 0x42e6, 0x94f1, 0xc4e4, 0x0, 0x0);
        gbc.writeMem(0xdb4a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xbc4);
        EXPECT(gbc.pc(), 0xdb4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb4a), 0xcb);
        EXPECT(gbc.readMem(0xdb4b), 0xd);
        // CB 0D 00B2
        gbc.setState(0x4d9d, 0x4574, 0x96a0, 0x5424, 0x220e, 0x3ce6, 0x0, 0x1);
        gbc.writeMem(0x4d9d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4574);
        EXPECT(gbc.pc(), 0x4d9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00B3
        gbc.setState(0xd988, 0xeb36, 0xa670, 0x4ba9, 0x1a80, 0x91a, 0x1, 0x1);
        gbc.writeMem(0xd988, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xeb36);
        EXPECT(gbc.pc(), 0xd98a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd988), 0xcb);
        EXPECT(gbc.readMem(0xd989), 0xd);
        // CB 0D 00B4
        gbc.setState(0x3a51, 0x3284, 0xbe70, 0x7715, 0xddf6, 0xaedc, 0x0, 0x0);
        gbc.writeMem(0x3a51, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x3284);
        EXPECT(gbc.pc(), 0x3a53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00B5
        gbc.setState(0x392d, 0x88e9, 0xf020, 0x8a54, 0x3f2c, 0xc1f3, 0x0, 0x0);
        gbc.writeMem(0x392d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x88e9);
        EXPECT(gbc.pc(), 0x392f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00B7
        gbc.setState(0xd946, 0x1a99, 0xefb0, 0x8308, 0x7f47, 0x465d, 0x1, 0x1);
        gbc.writeMem(0xd946, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1a99);
        EXPECT(gbc.pc(), 0xd948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd946), 0xcb);
        EXPECT(gbc.readMem(0xd947), 0xd);
        // CB 0D 00B8
        gbc.setState(0x720d, 0x7f05, 0x1c30, 0x4496, 0x1b6e, 0x37df, 0x1, 0x0);
        gbc.writeMem(0x720d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x7f05);
        EXPECT(gbc.pc(), 0x720f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00B9
        gbc.setState(0x239a, 0x5566, 0xe9d0, 0x472a, 0xe004, 0xbbe8, 0x0, 0x0);
        gbc.writeMem(0x239a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5566);
        EXPECT(gbc.pc(), 0x239c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00BA
        gbc.setState(0xb0e4, 0xff29, 0x7070, 0x66cd, 0x847a, 0xabc5, 0x1, 0x0);
        gbc.writeMem(0xb0e4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xff29);
        EXPECT(gbc.pc(), 0xb0e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e4), 0xcb);
        EXPECT(gbc.readMem(0xb0e5), 0xd);
        // CB 0D 00BB
        gbc.setState(0x65c, 0x8678, 0xcfc0, 0xcb05, 0xe886, 0xfc80, 0x1, 0x1);
        gbc.writeMem(0x65c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8678);
        EXPECT(gbc.pc(), 0x65e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00BC
        gbc.setState(0x2085, 0x7e49, 0x2e0, 0x9c7, 0x5fcd, 0x4d03, 0x0, 0x0);
        gbc.writeMem(0x2085, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7e49);
        EXPECT(gbc.pc(), 0x2087);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00BD
        gbc.setState(0xad40, 0xe189, 0xc840, 0x458e, 0xeaca, 0x6048, 0x0, 0x0);
        gbc.writeMem(0xad40, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe189);
        EXPECT(gbc.pc(), 0xad42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad40), 0xcb);
        EXPECT(gbc.readMem(0xad41), 0xd);
        // CB 0D 00BE
        gbc.setState(0xa1ef, 0x934f, 0xf8b0, 0x1bb4, 0x814d, 0x129c, 0x0, 0x1);
        gbc.writeMem(0xa1ef, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x934f);
        EXPECT(gbc.pc(), 0xa1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ef), 0xcb);
        EXPECT(gbc.readMem(0xa1f0), 0xd);
        // CB 0D 00BF
        gbc.setState(0xc5e9, 0xad67, 0x9890, 0x5917, 0x65f7, 0xde68, 0x1, 0x0);
        gbc.writeMem(0xc5e9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xad67);
        EXPECT(gbc.pc(), 0xc5eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e9), 0xcb);
        EXPECT(gbc.readMem(0xc5ea), 0xd);
        // CB 0D 00C0
        gbc.setState(0x53fd, 0xefc5, 0xaf40, 0x448c, 0xacb5, 0x93fd, 0x0, 0x1);
        gbc.writeMem(0x53fd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xefc5);
        EXPECT(gbc.pc(), 0x53ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00C2
        gbc.setState(0x2efc, 0xb23, 0x7aa0, 0x2b4c, 0x4ea6, 0xebfb, 0x0, 0x1);
        gbc.writeMem(0x2efc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb23);
        EXPECT(gbc.pc(), 0x2efe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00C3
        gbc.setState(0x9c2d, 0xb17a, 0x3fa0, 0xeda1, 0x1156, 0x20a8, 0x1, 0x1);
        gbc.writeMem(0x9c2d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb17a);
        EXPECT(gbc.pc(), 0x9c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2d), 0xcb);
        EXPECT(gbc.readMem(0x9c2e), 0xd);
        // CB 0D 00C4
        gbc.setState(0x3792, 0xb275, 0x5a60, 0x8c40, 0x2a45, 0xab4e, 0x0, 0x0);
        gbc.writeMem(0x3792, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb275);
        EXPECT(gbc.pc(), 0x3794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00C5
        gbc.setState(0x7ca7, 0x831e, 0x1a00, 0x1aaf, 0xf4ac, 0x5c48, 0x0, 0x0);
        gbc.writeMem(0x7ca7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x831e);
        EXPECT(gbc.pc(), 0x7ca9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00C6
        gbc.setState(0xa7ef, 0x32f7, 0x6e10, 0xc354, 0x8aab, 0x4ba6, 0x0, 0x1);
        gbc.writeMem(0xa7ef, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x32f7);
        EXPECT(gbc.pc(), 0xa7f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ef), 0xcb);
        EXPECT(gbc.readMem(0xa7f0), 0xd);
        // CB 0D 00C7
        gbc.setState(0x6a64, 0xece1, 0x8220, 0xfde7, 0x4ff7, 0xa581, 0x0, 0x1);
        gbc.writeMem(0x6a64, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xece1);
        EXPECT(gbc.pc(), 0x6a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00C8
        gbc.setState(0x4afa, 0xd290, 0xa30, 0xfa74, 0x65e8, 0x6289, 0x1, 0x1);
        gbc.writeMem(0x4afa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd290);
        EXPECT(gbc.pc(), 0x4afc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00C9
        gbc.setState(0x53ff, 0xc1bf, 0xdfc0, 0x3a07, 0x8ce4, 0x34f9, 0x1, 0x0);
        gbc.writeMem(0x53ff, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc1bf);
        EXPECT(gbc.pc(), 0x5401);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00CA
        gbc.setState(0x7703, 0x98f1, 0x47d0, 0xb616, 0x40f8, 0xca17, 0x0, 0x1);
        gbc.writeMem(0x7703, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x98f1);
        EXPECT(gbc.pc(), 0x7705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00CB
        gbc.setState(0x4866, 0x9c2f, 0x67e0, 0xe32f, 0x3e68, 0x9a0f, 0x1, 0x1);
        gbc.writeMem(0x4866, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9c2f);
        EXPECT(gbc.pc(), 0x4868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00CD
        gbc.setState(0xc4cf, 0x665, 0xa680, 0xe11c, 0x5468, 0x59b6, 0x0, 0x1);
        gbc.writeMem(0xc4cf, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x665);
        EXPECT(gbc.pc(), 0xc4d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4cf), 0xcb);
        EXPECT(gbc.readMem(0xc4d0), 0xd);
        // CB 0D 00CE
        gbc.setState(0x96d9, 0xdd66, 0xdf90, 0xdd16, 0x1918, 0x5ebc, 0x1, 0x0);
        gbc.writeMem(0x96d9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xdd66);
        EXPECT(gbc.pc(), 0x96db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d9), 0xcb);
        EXPECT(gbc.readMem(0x96da), 0xd);
        // CB 0D 00CF
        gbc.setState(0x1a8f, 0x38c0, 0x7440, 0x3fe1, 0x113f, 0xdb2d, 0x1, 0x0);
        gbc.writeMem(0x1a8f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x38c0);
        EXPECT(gbc.pc(), 0x1a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00D0
        gbc.setState(0xacc6, 0xd76, 0xe8e0, 0x5215, 0x4486, 0xda24, 0x1, 0x0);
        gbc.writeMem(0xacc6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd76);
        EXPECT(gbc.pc(), 0xacc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc6), 0xcb);
        EXPECT(gbc.readMem(0xacc7), 0xd);
        // CB 0D 00D1
        gbc.setState(0x6c03, 0x2f9c, 0xaaf0, 0x5d25, 0x93b5, 0x155, 0x1, 0x1);
        gbc.writeMem(0x6c03, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x2f9c);
        EXPECT(gbc.pc(), 0x6c05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00D2
        gbc.setState(0xb6d8, 0x76be, 0x6ac0, 0xe198, 0x8efd, 0xedd2, 0x0, 0x0);
        gbc.writeMem(0xb6d8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x76be);
        EXPECT(gbc.pc(), 0xb6da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6d8), 0xcb);
        EXPECT(gbc.readMem(0xb6d9), 0xd);
        // CB 0D 00D3
        gbc.setState(0xd530, 0xf258, 0xd550, 0xb9f0, 0xce6c, 0x69ee, 0x1, 0x1);
        gbc.writeMem(0xd530, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf258);
        EXPECT(gbc.pc(), 0xd532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd530), 0xcb);
        EXPECT(gbc.readMem(0xd531), 0xd);
        // CB 0D 00D4
        gbc.setState(0x5ec1, 0x66b0, 0xb550, 0x2340, 0x277e, 0x184b, 0x0, 0x1);
        gbc.writeMem(0x5ec1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x66b0);
        EXPECT(gbc.pc(), 0x5ec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00D5
        gbc.setState(0x3c9d, 0x5507, 0x8530, 0xb67a, 0xcaf7, 0x1245, 0x1, 0x1);
        gbc.writeMem(0x3c9d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5507);
        EXPECT(gbc.pc(), 0x3c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00D6
        gbc.setState(0x68e5, 0x75a7, 0xa1c0, 0x8f16, 0xf269, 0xb24d, 0x1, 0x1);
        gbc.writeMem(0x68e5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x75a7);
        EXPECT(gbc.pc(), 0x68e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00D7
        gbc.setState(0x7d43, 0xaf1b, 0xa6c0, 0x1264, 0xa17, 0xde8a, 0x0, 0x1);
        gbc.writeMem(0x7d43, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xaf1b);
        EXPECT(gbc.pc(), 0x7d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00D8
        gbc.setState(0x2005, 0xa10c, 0x5e80, 0xf67d, 0xfd9e, 0x79e0, 0x1, 0x1);
        gbc.writeMem(0x2005, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa10c);
        EXPECT(gbc.pc(), 0x2007);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00D9
        gbc.setState(0x7d0e, 0x8291, 0x6980, 0xe5a1, 0xdd80, 0x2e06, 0x1, 0x1);
        gbc.writeMem(0x7d0e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8291);
        EXPECT(gbc.pc(), 0x7d10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00DA
        gbc.setState(0x52a4, 0x9a1f, 0x1a70, 0x1bd6, 0xe2ff, 0x7199, 0x1, 0x1);
        gbc.writeMem(0x52a4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9a1f);
        EXPECT(gbc.pc(), 0x52a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00DB
        gbc.setState(0x801b, 0x163c, 0xe7e0, 0x6e77, 0xd1e2, 0x8830, 0x0, 0x0);
        gbc.writeMem(0x801b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x163c);
        EXPECT(gbc.pc(), 0x801d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x801b), 0xcb);
        EXPECT(gbc.readMem(0x801c), 0xd);
        // CB 0D 00DC
        gbc.setState(0xa148, 0x1cb1, 0xac80, 0x55c9, 0xa63, 0xa47d, 0x1, 0x0);
        gbc.writeMem(0xa148, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1cb1);
        EXPECT(gbc.pc(), 0xa14a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa148), 0xcb);
        EXPECT(gbc.readMem(0xa149), 0xd);
        // CB 0D 00DD
        gbc.setState(0xc3eb, 0x97dd, 0x68a0, 0x25, 0x5585, 0xe42c, 0x0, 0x1);
        gbc.writeMem(0xc3eb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x97dd);
        EXPECT(gbc.pc(), 0xc3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3eb), 0xcb);
        EXPECT(gbc.readMem(0xc3ec), 0xd);
        // CB 0D 00DE
        gbc.setState(0x771c, 0x20ae, 0x82d0, 0x18c2, 0xc3cf, 0x3a3d, 0x1, 0x0);
        gbc.writeMem(0x771c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x20ae);
        EXPECT(gbc.pc(), 0x771e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00E0
        gbc.setState(0x400e, 0x6260, 0xae50, 0xf9f3, 0x4934, 0x60df, 0x0, 0x1);
        gbc.writeMem(0x400e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6260);
        EXPECT(gbc.pc(), 0x4010);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00E1
        gbc.setState(0xc7a1, 0x7a0f, 0x42a0, 0x6932, 0x65e5, 0xff78, 0x1, 0x1);
        gbc.writeMem(0xc7a1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7a0f);
        EXPECT(gbc.pc(), 0xc7a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7a1), 0xcb);
        EXPECT(gbc.readMem(0xc7a2), 0xd);
        // CB 0D 00E2
        gbc.setState(0xba5a, 0x4260, 0xcbe0, 0x772c, 0x4e9c, 0xa89f, 0x0, 0x1);
        gbc.writeMem(0xba5a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4260);
        EXPECT(gbc.pc(), 0xba5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba5a), 0xcb);
        EXPECT(gbc.readMem(0xba5b), 0xd);
        // CB 0D 00E3
        gbc.setState(0x7555, 0xc769, 0xaee0, 0xc5b5, 0xa991, 0x2904, 0x1, 0x1);
        gbc.writeMem(0x7555, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc769);
        EXPECT(gbc.pc(), 0x7557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00E4
        gbc.setState(0x916e, 0xd4a3, 0x44a0, 0x8c05, 0xda4b, 0xe3d, 0x0, 0x1);
        gbc.writeMem(0x916e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd4a3);
        EXPECT(gbc.pc(), 0x9170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x916e), 0xcb);
        EXPECT(gbc.readMem(0x916f), 0xd);
        // CB 0D 00E5
        gbc.setState(0x95fa, 0xee2f, 0xb5a0, 0x64d4, 0x80fc, 0xb45f, 0x1, 0x1);
        gbc.writeMem(0x95fa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xee2f);
        EXPECT(gbc.pc(), 0x95fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95fa), 0xcb);
        EXPECT(gbc.readMem(0x95fb), 0xd);
        // CB 0D 00E6
        gbc.setState(0xf2d, 0x58a5, 0xbf70, 0x20f1, 0xf79d, 0x4ae7, 0x1, 0x0);
        gbc.writeMem(0xf2d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x58a5);
        EXPECT(gbc.pc(), 0xf2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00E7
        gbc.setState(0x7454, 0x4d5d, 0x98a0, 0x331b, 0x4d7f, 0x49e9, 0x0, 0x1);
        gbc.writeMem(0x7454, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4d5d);
        EXPECT(gbc.pc(), 0x7456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00E8
        gbc.setState(0x4ee7, 0x4366, 0x8330, 0x4b7, 0x8afb, 0xe1ee, 0x1, 0x1);
        gbc.writeMem(0x4ee7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4366);
        EXPECT(gbc.pc(), 0x4ee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00E9
        gbc.setState(0x490, 0x1114, 0xac30, 0x50b2, 0x7d21, 0x1b7d, 0x1, 0x1);
        gbc.writeMem(0x490, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1114);
        EXPECT(gbc.pc(), 0x492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00EA
        gbc.setState(0x9e5f, 0xacfd, 0x75c0, 0x141c, 0x2018, 0x1a99, 0x1, 0x1);
        gbc.writeMem(0x9e5f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xacfd);
        EXPECT(gbc.pc(), 0x9e61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e5f), 0xcb);
        EXPECT(gbc.readMem(0x9e60), 0xd);
        // CB 0D 00EB
        gbc.setState(0xc26d, 0xa2a9, 0x5820, 0xa328, 0xb01a, 0x3931, 0x0, 0x0);
        gbc.writeMem(0xc26d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa2a9);
        EXPECT(gbc.pc(), 0xc26f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc26d), 0xcb);
        EXPECT(gbc.readMem(0xc26e), 0xd);
        // CB 0D 00EC
        gbc.setState(0xe6f1, 0x853, 0xb8c0, 0xd159, 0xccc5, 0xfff0, 0x0, 0x1);
        gbc.writeMem(0xe6f1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x853);
        EXPECT(gbc.pc(), 0xe6f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6f1), 0xcb);
        EXPECT(gbc.readMem(0xe6f2), 0xd);
        // CB 0D 00ED
        gbc.setState(0xb4ac, 0xfd23, 0xc460, 0xd3c3, 0x5963, 0x1cab, 0x0, 0x1);
        gbc.writeMem(0xb4ac, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xfd23);
        EXPECT(gbc.pc(), 0xb4ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4ac), 0xcb);
        EXPECT(gbc.readMem(0xb4ad), 0xd);
        // CB 0D 00EF
        gbc.setState(0x5d40, 0xc7fb, 0xaba0, 0x9242, 0x2eab, 0xfda0, 0x0, 0x1);
        gbc.writeMem(0x5d40, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc7fb);
        EXPECT(gbc.pc(), 0x5d42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00F0
        gbc.setState(0x2824, 0xb315, 0x8f50, 0x50c, 0xe43a, 0xc66, 0x0, 0x1);
        gbc.writeMem(0x2824, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb315);
        EXPECT(gbc.pc(), 0x2826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00F1
        gbc.setState(0x7c69, 0x48e2, 0xa730, 0xab4b, 0xb21b, 0xfb37, 0x0, 0x0);
        gbc.writeMem(0x7c69, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x48e2);
        EXPECT(gbc.pc(), 0x7c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00F2
        gbc.setState(0xa7a5, 0xe648, 0xc690, 0x2878, 0x488b, 0xc3fe, 0x1, 0x0);
        gbc.writeMem(0xa7a5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe648);
        EXPECT(gbc.pc(), 0xa7a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a5), 0xcb);
        EXPECT(gbc.readMem(0xa7a6), 0xd);
        // CB 0D 00F3
        gbc.setState(0xddac, 0x49ff, 0x61f0, 0x6ca5, 0xbc7f, 0x3c8a, 0x1, 0x1);
        gbc.writeMem(0xddac, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x49ff);
        EXPECT(gbc.pc(), 0xddae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddac), 0xcb);
        EXPECT(gbc.readMem(0xddad), 0xd);
        // CB 0D 00F4
        gbc.setState(0x2c60, 0x3f3f, 0x4c40, 0x83e6, 0x384d, 0x8186, 0x1, 0x1);
        gbc.writeMem(0x2c60, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3f3f);
        EXPECT(gbc.pc(), 0x2c62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00F5
        gbc.setState(0x45a1, 0xad50, 0x1160, 0x3f25, 0xa830, 0x858f, 0x0, 0x0);
        gbc.writeMem(0x45a1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xad50);
        EXPECT(gbc.pc(), 0x45a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00F6
        gbc.setState(0x8957, 0x8665, 0x6cc0, 0x5233, 0x75dd, 0xe79c, 0x1, 0x0);
        gbc.writeMem(0x8957, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8665);
        EXPECT(gbc.pc(), 0x8959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8957), 0xcb);
        EXPECT(gbc.readMem(0x8958), 0xd);
        // CB 0D 00F7
        gbc.setState(0x7be2, 0x7be2, 0xc950, 0x43e9, 0x5dfd, 0x859b, 0x0, 0x1);
        gbc.writeMem(0x7be2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7be2);
        EXPECT(gbc.pc(), 0x7be4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00F8
        gbc.setState(0x7bb, 0xe59f, 0xf2d0, 0xef55, 0x5e04, 0xeb4b, 0x0, 0x1);
        gbc.writeMem(0x7bb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe59f);
        EXPECT(gbc.pc(), 0x7bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00FA
        gbc.setState(0x2218, 0x3ecc, 0xca60, 0x1e73, 0xdc80, 0x6e94, 0x1, 0x0);
        gbc.writeMem(0x2218, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3ecc);
        EXPECT(gbc.pc(), 0x221a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 00FB
        gbc.setState(0xd58c, 0x4005, 0x6240, 0x24c5, 0x4362, 0xff5f, 0x1, 0x1);
        gbc.writeMem(0xd58c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4005);
        EXPECT(gbc.pc(), 0xd58e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd58c), 0xcb);
        EXPECT(gbc.readMem(0xd58d), 0xd);
        // CB 0D 00FC
        gbc.setState(0xba3c, 0x883e, 0x78c0, 0xe31e, 0x733f, 0x5ce8, 0x0, 0x1);
        gbc.writeMem(0xba3c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x883e);
        EXPECT(gbc.pc(), 0xba3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba3c), 0xcb);
        EXPECT(gbc.readMem(0xba3d), 0xd);
        // CB 0D 00FD
        gbc.setState(0x5618, 0x52ac, 0x1690, 0x818c, 0x69da, 0x78c1, 0x0, 0x0);
        gbc.writeMem(0x5618, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x52ac);
        EXPECT(gbc.pc(), 0x561a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00FE
        gbc.setState(0x283e, 0xb9f6, 0xbd00, 0x2cdc, 0xf447, 0x7f99, 0x1, 0x1);
        gbc.writeMem(0x283e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xb9f6);
        EXPECT(gbc.pc(), 0x2840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 00FF
        gbc.setState(0xbc0, 0x7fa, 0x5200, 0x9ddb, 0x79e4, 0x692c, 0x0, 0x1);
        gbc.writeMem(0xbc0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7fa);
        EXPECT(gbc.pc(), 0xbc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0100
        gbc.setState(0x5a3b, 0x3dd3, 0x61d0, 0xff54, 0x20d5, 0x59f6, 0x0, 0x0);
        gbc.writeMem(0x5a3b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3dd3);
        EXPECT(gbc.pc(), 0x5a3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0101
        gbc.setState(0x3720, 0x33f5, 0x1ea0, 0xb60f, 0x62ef, 0x1524, 0x0, 0x0);
        gbc.writeMem(0x3720, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x33f5);
        EXPECT(gbc.pc(), 0x3722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0102
        gbc.setState(0xbd38, 0xe173, 0x8b80, 0x1e83, 0xbb6a, 0x397d, 0x1, 0x1);
        gbc.writeMem(0xbd38, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe173);
        EXPECT(gbc.pc(), 0xbd3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd38), 0xcb);
        EXPECT(gbc.readMem(0xbd39), 0xd);
        // CB 0D 0103
        gbc.setState(0x71d3, 0x15be, 0x7b60, 0x3999, 0xd9b0, 0xf88f, 0x0, 0x1);
        gbc.writeMem(0x71d3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x15be);
        EXPECT(gbc.pc(), 0x71d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0104
        gbc.setState(0xb528, 0x56fd, 0x9c60, 0xa51f, 0x57b7, 0x1e77, 0x1, 0x0);
        gbc.writeMem(0xb528, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x56fd);
        EXPECT(gbc.pc(), 0xb52a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb528), 0xcb);
        EXPECT(gbc.readMem(0xb529), 0xd);
        // CB 0D 0105
        gbc.setState(0x5cad, 0x2d26, 0x7710, 0x18d2, 0x6a85, 0xf45a, 0x0, 0x1);
        gbc.writeMem(0x5cad, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2d26);
        EXPECT(gbc.pc(), 0x5caf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0106
        gbc.setState(0x39fe, 0xe700, 0x27b0, 0x9866, 0x982a, 0x42, 0x1, 0x0);
        gbc.writeMem(0x39fe, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe700);
        EXPECT(gbc.pc(), 0x3a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0107
        gbc.setState(0x6878, 0xbc71, 0xa310, 0x2acb, 0x52a3, 0xe406, 0x0, 0x1);
        gbc.writeMem(0x6878, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbc71);
        EXPECT(gbc.pc(), 0x687a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0108
        gbc.setState(0x3db4, 0xd227, 0x1ed0, 0xf924, 0xa1a8, 0x596a, 0x1, 0x0);
        gbc.writeMem(0x3db4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd227);
        EXPECT(gbc.pc(), 0x3db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0109
        gbc.setState(0x4eaf, 0x54e1, 0xc5a0, 0xc24b, 0xd750, 0x61, 0x1, 0x0);
        gbc.writeMem(0x4eaf, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x54e1);
        EXPECT(gbc.pc(), 0x4eb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 010A
        gbc.setState(0x4b87, 0xc3f7, 0x8c60, 0xecca, 0x69d3, 0x5bfb, 0x0, 0x1);
        gbc.writeMem(0x4b87, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc3f7);
        EXPECT(gbc.pc(), 0x4b89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 010B
        gbc.setState(0xdb73, 0x5de1, 0xc9b0, 0x2728, 0xd419, 0xccfb, 0x0, 0x1);
        gbc.writeMem(0xdb73, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5de1);
        EXPECT(gbc.pc(), 0xdb75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb73), 0xcb);
        EXPECT(gbc.readMem(0xdb74), 0xd);
        // CB 0D 010C
        gbc.setState(0x1338, 0xe86d, 0x8650, 0x3669, 0xe435, 0x39d3, 0x1, 0x0);
        gbc.writeMem(0x1338, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe86d);
        EXPECT(gbc.pc(), 0x133a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 010D
        gbc.setState(0x3458, 0xae38, 0xab40, 0x86ca, 0xe665, 0xf112, 0x1, 0x1);
        gbc.writeMem(0x3458, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xae38);
        EXPECT(gbc.pc(), 0x345a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 010E
        gbc.setState(0xac3a, 0xae69, 0xbf00, 0xbd6f, 0x379a, 0xfb7e, 0x1, 0x1);
        gbc.writeMem(0xac3a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xae69);
        EXPECT(gbc.pc(), 0xac3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac3a), 0xcb);
        EXPECT(gbc.readMem(0xac3b), 0xd);
        // CB 0D 010F
        gbc.setState(0x983d, 0x99c4, 0xa360, 0x65c4, 0xf55b, 0xe2eb, 0x0, 0x1);
        gbc.writeMem(0x983d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x99c4);
        EXPECT(gbc.pc(), 0x983f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x983d), 0xcb);
        EXPECT(gbc.readMem(0x983e), 0xd);
        // CB 0D 0110
        gbc.setState(0x9ba5, 0xd489, 0x4060, 0x6e43, 0x4ee1, 0xdb28, 0x1, 0x0);
        gbc.writeMem(0x9ba5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd489);
        EXPECT(gbc.pc(), 0x9ba7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba5), 0xcb);
        EXPECT(gbc.readMem(0x9ba6), 0xd);
        // CB 0D 0111
        gbc.setState(0xd15f, 0x9179, 0x4940, 0xae1b, 0xd511, 0xf13c, 0x0, 0x0);
        gbc.writeMem(0xd15f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9179);
        EXPECT(gbc.pc(), 0xd161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15f), 0xcb);
        EXPECT(gbc.readMem(0xd160), 0xd);
        // CB 0D 0112
        gbc.setState(0x1da1, 0xe68f, 0x340, 0x8b5, 0x5979, 0xf99b, 0x1, 0x0);
        gbc.writeMem(0x1da1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe68f);
        EXPECT(gbc.pc(), 0x1da3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0113
        gbc.setState(0x79a5, 0x3ebd, 0x9200, 0xadbc, 0xf522, 0x54a9, 0x0, 0x0);
        gbc.writeMem(0x79a5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3ebd);
        EXPECT(gbc.pc(), 0x79a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0114
        gbc.setState(0x7f35, 0x85a0, 0xaa30, 0x650d, 0x7a12, 0x4ef2, 0x0, 0x1);
        gbc.writeMem(0x7f35, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x85a0);
        EXPECT(gbc.pc(), 0x7f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0115
        gbc.setState(0x56ae, 0x201b, 0xf080, 0xa244, 0x237e, 0x24a8, 0x0, 0x1);
        gbc.writeMem(0x56ae, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x201b);
        EXPECT(gbc.pc(), 0x56b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0116
        gbc.setState(0xe48e, 0x350d, 0xbac0, 0x708a, 0xee6a, 0xc753, 0x0, 0x0);
        gbc.writeMem(0xe48e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x350d);
        EXPECT(gbc.pc(), 0xe490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe48e), 0xcb);
        EXPECT(gbc.readMem(0xe48f), 0xd);
        // CB 0D 0117
        gbc.setState(0x455, 0xe637, 0x4e90, 0x6180, 0xb262, 0x274, 0x1, 0x0);
        gbc.writeMem(0x455, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe637);
        EXPECT(gbc.pc(), 0x457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0118
        gbc.setState(0xe331, 0xb187, 0x6630, 0x9195, 0x1203, 0xc535, 0x1, 0x0);
        gbc.writeMem(0xe331, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xb187);
        EXPECT(gbc.pc(), 0xe333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe331), 0xcb);
        EXPECT(gbc.readMem(0xe332), 0xd);
        // CB 0D 0119
        gbc.setState(0x6bf0, 0x1968, 0xb2d0, 0x2676, 0xd863, 0x9927, 0x0, 0x0);
        gbc.writeMem(0x6bf0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1968);
        EXPECT(gbc.pc(), 0x6bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 011A
        gbc.setState(0x10cc, 0x9d33, 0x9670, 0x9358, 0x707c, 0xf4a4, 0x1, 0x1);
        gbc.writeMem(0x10cc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9d33);
        EXPECT(gbc.pc(), 0x10ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 011B
        gbc.setState(0x5841, 0x2e16, 0x8910, 0x21ad, 0x7b4c, 0x55f6, 0x0, 0x0);
        gbc.writeMem(0x5841, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2e16);
        EXPECT(gbc.pc(), 0x5843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 011C
        gbc.setState(0x4b0e, 0xd6d3, 0x5ce0, 0x846d, 0x7ee6, 0x55a2, 0x0, 0x0);
        gbc.writeMem(0x4b0e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd6d3);
        EXPECT(gbc.pc(), 0x4b10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 011D
        gbc.setState(0xc6a8, 0x9c25, 0x4f50, 0xdceb, 0xf8c0, 0xb6bc, 0x0, 0x1);
        gbc.writeMem(0xc6a8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9c25);
        EXPECT(gbc.pc(), 0xc6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a8), 0xcb);
        EXPECT(gbc.readMem(0xc6a9), 0xd);
        // CB 0D 011E
        gbc.setState(0xec14, 0x6c67, 0x9f0, 0x6f8f, 0x8256, 0xbc86, 0x1, 0x0);
        gbc.writeMem(0xec14, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x6c67);
        EXPECT(gbc.pc(), 0xec16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec14), 0xcb);
        EXPECT(gbc.readMem(0xec15), 0xd);
        // CB 0D 0120
        gbc.setState(0x4229, 0x493e, 0x6030, 0x36cb, 0xbf26, 0xfc6b, 0x1, 0x0);
        gbc.writeMem(0x4229, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x493e);
        EXPECT(gbc.pc(), 0x422b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0122
        gbc.setState(0xb14f, 0xceb, 0x9a50, 0x150a, 0xc364, 0x6cf5, 0x1, 0x1);
        gbc.writeMem(0xb14f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xceb);
        EXPECT(gbc.pc(), 0xb151);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb14f), 0xcb);
        EXPECT(gbc.readMem(0xb150), 0xd);
        // CB 0D 0123
        gbc.setState(0x1c0a, 0x961e, 0xfd10, 0xf972, 0xb4e8, 0x4f7f, 0x1, 0x0);
        gbc.writeMem(0x1c0a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x961e);
        EXPECT(gbc.pc(), 0x1c0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0124
        gbc.setState(0x6388, 0x1728, 0x6190, 0xb191, 0xba82, 0x1fc3, 0x0, 0x0);
        gbc.writeMem(0x6388, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1728);
        EXPECT(gbc.pc(), 0x638a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0125
        gbc.setState(0x8860, 0xdc0b, 0xa0, 0x33bc, 0xd33a, 0x178e, 0x1, 0x1);
        gbc.writeMem(0x8860, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xdc0b);
        EXPECT(gbc.pc(), 0x8862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8860), 0xcb);
        EXPECT(gbc.readMem(0x8861), 0xd);
        // CB 0D 0126
        gbc.setState(0x56ba, 0x7dd7, 0xd3b0, 0x7059, 0x70c0, 0xb512, 0x1, 0x1);
        gbc.writeMem(0x56ba, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7dd7);
        EXPECT(gbc.pc(), 0x56bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0127
        gbc.setState(0x23b2, 0xe869, 0x5860, 0x90c5, 0x2fc3, 0x3ff1, 0x1, 0x0);
        gbc.writeMem(0x23b2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe869);
        EXPECT(gbc.pc(), 0x23b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0128
        gbc.setState(0xbc40, 0xf176, 0xae60, 0xf154, 0xfb6a, 0x3cd7, 0x0, 0x0);
        gbc.writeMem(0xbc40, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf176);
        EXPECT(gbc.pc(), 0xbc42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc40), 0xcb);
        EXPECT(gbc.readMem(0xbc41), 0xd);
        // CB 0D 012A
        gbc.setState(0x5c68, 0xce58, 0xeb30, 0xb71d, 0xf499, 0x735f, 0x0, 0x1);
        gbc.writeMem(0x5c68, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xce58);
        EXPECT(gbc.pc(), 0x5c6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 012B
        gbc.setState(0xdae8, 0x9a16, 0x3b60, 0xe988, 0x570a, 0xa6ca, 0x0, 0x1);
        gbc.writeMem(0xdae8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9a16);
        EXPECT(gbc.pc(), 0xdaea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae8), 0xcb);
        EXPECT(gbc.readMem(0xdae9), 0xd);
        // CB 0D 012C
        gbc.setState(0x624d, 0x18, 0xd8a0, 0xba94, 0x44f3, 0x9499, 0x0, 0x0);
        gbc.writeMem(0x624d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x18);
        EXPECT(gbc.pc(), 0x624f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 012D
        gbc.setState(0x3506, 0x5f45, 0xd8e0, 0x2747, 0x5b1e, 0x5c8e, 0x0, 0x1);
        gbc.writeMem(0x3506, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5f45);
        EXPECT(gbc.pc(), 0x3508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 012E
        gbc.setState(0x8a58, 0xcc32, 0x9c90, 0x4193, 0x1e7d, 0xe688, 0x1, 0x0);
        gbc.writeMem(0x8a58, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcc32);
        EXPECT(gbc.pc(), 0x8a5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a58), 0xcb);
        EXPECT(gbc.readMem(0x8a59), 0xd);
        // CB 0D 012F
        gbc.setState(0xab22, 0xe6f3, 0xad90, 0xdc6d, 0x3d0e, 0xbf7, 0x1, 0x1);
        gbc.writeMem(0xab22, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe6f3);
        EXPECT(gbc.pc(), 0xab24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab22), 0xcb);
        EXPECT(gbc.readMem(0xab23), 0xd);
        // CB 0D 0130
        gbc.setState(0x92e0, 0x138d, 0x6870, 0x44b0, 0x219d, 0xa459, 0x0, 0x1);
        gbc.writeMem(0x92e0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x138d);
        EXPECT(gbc.pc(), 0x92e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92e0), 0xcb);
        EXPECT(gbc.readMem(0x92e1), 0xd);
        // CB 0D 0131
        gbc.setState(0x9c59, 0x3168, 0x8060, 0x4852, 0x3028, 0x833e, 0x1, 0x1);
        gbc.writeMem(0x9c59, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3168);
        EXPECT(gbc.pc(), 0x9c5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c59), 0xcb);
        EXPECT(gbc.readMem(0x9c5a), 0xd);
        // CB 0D 0132
        gbc.setState(0xec7d, 0x6c8a, 0x38b0, 0xa1f9, 0xfaba, 0x9ce8, 0x1, 0x0);
        gbc.writeMem(0xec7d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6c8a);
        EXPECT(gbc.pc(), 0xec7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec7d), 0xcb);
        EXPECT(gbc.readMem(0xec7e), 0xd);
        // CB 0D 0133
        gbc.setState(0x5e8c, 0xbb04, 0x7450, 0xe3a3, 0x1c77, 0x3d81, 0x1, 0x1);
        gbc.writeMem(0x5e8c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xbb04);
        EXPECT(gbc.pc(), 0x5e8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0134
        gbc.setState(0x566c, 0x5b07, 0xb7f0, 0x5c3b, 0x913f, 0x7a40, 0x1, 0x1);
        gbc.writeMem(0x566c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5b07);
        EXPECT(gbc.pc(), 0x566e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0135
        gbc.setState(0xb7d5, 0xe2cb, 0xfdb0, 0x9ae1, 0x2be1, 0x7a2b, 0x0, 0x1);
        gbc.writeMem(0xb7d5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe2cb);
        EXPECT(gbc.pc(), 0xb7d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7d5), 0xcb);
        EXPECT(gbc.readMem(0xb7d6), 0xd);
        // CB 0D 0136
        gbc.setState(0x4ea7, 0x545a, 0x3260, 0x18f, 0x8e56, 0xbedd, 0x1, 0x0);
        gbc.writeMem(0x4ea7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x545a);
        EXPECT(gbc.pc(), 0x4ea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0137
        gbc.setState(0xeeb1, 0xfde0, 0xa9b0, 0x6971, 0xbb8f, 0xe341, 0x1, 0x0);
        gbc.writeMem(0xeeb1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfde0);
        EXPECT(gbc.pc(), 0xeeb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeb1), 0xcb);
        EXPECT(gbc.readMem(0xeeb2), 0xd);
        // CB 0D 0138
        gbc.setState(0x7607, 0x3a3d, 0xe8d0, 0x3097, 0xdb5, 0x481a, 0x1, 0x0);
        gbc.writeMem(0x7607, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3a3d);
        EXPECT(gbc.pc(), 0x7609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0139
        gbc.setState(0xd22c, 0x1ee2, 0x8ea0, 0x4cdc, 0x2de3, 0xf94f, 0x0, 0x1);
        gbc.writeMem(0xd22c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1ee2);
        EXPECT(gbc.pc(), 0xd22e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd22c), 0xcb);
        EXPECT(gbc.readMem(0xd22d), 0xd);
        // CB 0D 013A
        gbc.setState(0x43b, 0xf17b, 0x1d20, 0xa40c, 0x9ac5, 0x2135, 0x0, 0x1);
        gbc.writeMem(0x43b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf17b);
        EXPECT(gbc.pc(), 0x43d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 013B
        gbc.setState(0x72af, 0xe4e6, 0x4ff0, 0x9345, 0xef28, 0xa388, 0x0, 0x1);
        gbc.writeMem(0x72af, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe4e6);
        EXPECT(gbc.pc(), 0x72b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 013C
        gbc.setState(0x3c33, 0x2465, 0x78c0, 0x63c, 0xd703, 0xa2f4, 0x1, 0x1);
        gbc.writeMem(0x3c33, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2465);
        EXPECT(gbc.pc(), 0x3c35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 013D
        gbc.setState(0x1698, 0x578b, 0x7470, 0xfb53, 0x62e6, 0x2e7f, 0x0, 0x1);
        gbc.writeMem(0x1698, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x578b);
        EXPECT(gbc.pc(), 0x169a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 013E
        gbc.setState(0xc356, 0x4baa, 0xdb70, 0xf0d, 0x2718, 0x12bb, 0x0, 0x1);
        gbc.writeMem(0xc356, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4baa);
        EXPECT(gbc.pc(), 0xc358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc356), 0xcb);
        EXPECT(gbc.readMem(0xc357), 0xd);
        // CB 0D 013F
        gbc.setState(0x303e, 0xf55, 0x620, 0xd763, 0x969, 0x1f36, 0x0, 0x0);
        gbc.writeMem(0x303e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf55);
        EXPECT(gbc.pc(), 0x3040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0140
        gbc.setState(0xc10d, 0x578c, 0xe2c0, 0xa5a, 0xf9e9, 0xe944, 0x1, 0x1);
        gbc.writeMem(0xc10d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x578c);
        EXPECT(gbc.pc(), 0xc10f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc10d), 0xcb);
        EXPECT(gbc.readMem(0xc10e), 0xd);
        // CB 0D 0141
        gbc.setState(0x8d77, 0xeb35, 0x78f0, 0xfb1f, 0x7ae3, 0x71dc, 0x0, 0x1);
        gbc.writeMem(0x8d77, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xeb35);
        EXPECT(gbc.pc(), 0x8d79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d77), 0xcb);
        EXPECT(gbc.readMem(0x8d78), 0xd);
        // CB 0D 0142
        gbc.setState(0x66f5, 0xe28d, 0x5640, 0x9aba, 0x96ba, 0x4a31, 0x1, 0x1);
        gbc.writeMem(0x66f5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe28d);
        EXPECT(gbc.pc(), 0x66f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0143
        gbc.setState(0x46d0, 0xe960, 0xb9b0, 0xbef, 0xc8b2, 0x6883, 0x0, 0x0);
        gbc.writeMem(0x46d0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe960);
        EXPECT(gbc.pc(), 0x46d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0144
        gbc.setState(0x1dbc, 0x7a27, 0x90d0, 0xe41d, 0xb2ae, 0x67e8, 0x1, 0x0);
        gbc.writeMem(0x1dbc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7a27);
        EXPECT(gbc.pc(), 0x1dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0145
        gbc.setState(0xa03d, 0x9c6c, 0x2ce0, 0x5cac, 0x4a41, 0x52c8, 0x0, 0x1);
        gbc.writeMem(0xa03d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9c6c);
        EXPECT(gbc.pc(), 0xa03f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03d), 0xcb);
        EXPECT(gbc.readMem(0xa03e), 0xd);
        // CB 0D 0146
        gbc.setState(0x74e8, 0x2723, 0x83c0, 0xc65f, 0x25a8, 0x54c7, 0x0, 0x0);
        gbc.writeMem(0x74e8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2723);
        EXPECT(gbc.pc(), 0x74ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0147
        gbc.setState(0x33e6, 0xfac5, 0xbe90, 0x9d0f, 0x4e49, 0x8a90, 0x0, 0x1);
        gbc.writeMem(0x33e6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfac5);
        EXPECT(gbc.pc(), 0x33e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0148
        gbc.setState(0xa1bd, 0x309b, 0xb8e0, 0x73f6, 0x9b34, 0x6ee3, 0x0, 0x1);
        gbc.writeMem(0xa1bd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x309b);
        EXPECT(gbc.pc(), 0xa1bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1bd), 0xcb);
        EXPECT(gbc.readMem(0xa1be), 0xd);
        // CB 0D 0149
        gbc.setState(0xcfdf, 0x2e6d, 0x11c0, 0xdbc2, 0x805e, 0xb52b, 0x0, 0x0);
        gbc.writeMem(0xcfdf, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2e6d);
        EXPECT(gbc.pc(), 0xcfe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfdf), 0xcb);
        EXPECT(gbc.readMem(0xcfe0), 0xd);
        // CB 0D 014A
        gbc.setState(0x1849, 0x41, 0x99f0, 0xa0d2, 0xb7d9, 0x9e8c, 0x1, 0x0);
        gbc.writeMem(0x1849, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x41);
        EXPECT(gbc.pc(), 0x184b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 014B
        gbc.setState(0x12b0, 0x6232, 0xf0f0, 0xd302, 0x7d0, 0xe44b, 0x0, 0x0);
        gbc.writeMem(0x12b0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6232);
        EXPECT(gbc.pc(), 0x12b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 014D
        gbc.setState(0xbf82, 0x1f32, 0x7930, 0x21ed, 0x7fd1, 0x4b0b, 0x1, 0x0);
        gbc.writeMem(0xbf82, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1f32);
        EXPECT(gbc.pc(), 0xbf84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf82), 0xcb);
        EXPECT(gbc.readMem(0xbf83), 0xd);
        // CB 0D 014E
        gbc.setState(0x1e16, 0xf172, 0xf3d0, 0xe18a, 0x8dac, 0x8a44, 0x0, 0x1);
        gbc.writeMem(0x1e16, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf172);
        EXPECT(gbc.pc(), 0x1e18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 014F
        gbc.setState(0x5b63, 0x8b09, 0xcba0, 0xff14, 0x45a0, 0xf34f, 0x0, 0x0);
        gbc.writeMem(0x5b63, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8b09);
        EXPECT(gbc.pc(), 0x5b65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0150
        gbc.setState(0x1502, 0xa355, 0x33e0, 0x4164, 0xd424, 0xcf0f, 0x0, 0x0);
        gbc.writeMem(0x1502, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa355);
        EXPECT(gbc.pc(), 0x1504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0151
        gbc.setState(0xbe6, 0x6ece, 0x7580, 0x2890, 0x8e5b, 0x1bec, 0x0, 0x1);
        gbc.writeMem(0xbe6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6ece);
        EXPECT(gbc.pc(), 0xbe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0152
        gbc.setState(0xad57, 0x60f5, 0xe340, 0xbfea, 0x72f3, 0x2552, 0x0, 0x0);
        gbc.writeMem(0xad57, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x60f5);
        EXPECT(gbc.pc(), 0xad59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad57), 0xcb);
        EXPECT(gbc.readMem(0xad58), 0xd);
        // CB 0D 0153
        gbc.setState(0x1c8d, 0xace8, 0x3600, 0xa4d4, 0x8759, 0x19a5, 0x1, 0x0);
        gbc.writeMem(0x1c8d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xace8);
        EXPECT(gbc.pc(), 0x1c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0154
        gbc.setState(0x33e2, 0x4367, 0xc740, 0x88d4, 0xfd4b, 0x4a6c, 0x0, 0x1);
        gbc.writeMem(0x33e2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4367);
        EXPECT(gbc.pc(), 0x33e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0155
        gbc.setState(0xa740, 0xa746, 0x8610, 0x831e, 0x975, 0x40b0, 0x1, 0x0);
        gbc.writeMem(0xa740, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa746);
        EXPECT(gbc.pc(), 0xa742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa740), 0xcb);
        EXPECT(gbc.readMem(0xa741), 0xd);
        // CB 0D 0157
        gbc.setState(0xa93e, 0x98f4, 0x8cc0, 0x1aa2, 0xe5ef, 0xcaab, 0x1, 0x1);
        gbc.writeMem(0xa93e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x98f4);
        EXPECT(gbc.pc(), 0xa940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa93e), 0xcb);
        EXPECT(gbc.readMem(0xa93f), 0xd);
        // CB 0D 0158
        gbc.setState(0x4855, 0xc16b, 0x70, 0x9bd5, 0x1209, 0xd73b, 0x1, 0x0);
        gbc.writeMem(0x4855, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc16b);
        EXPECT(gbc.pc(), 0x4857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0159
        gbc.setState(0xbfb7, 0x208d, 0xa080, 0x5d0c, 0x264f, 0x90e0, 0x0, 0x1);
        gbc.writeMem(0xbfb7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x208d);
        EXPECT(gbc.pc(), 0xbfb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb7), 0xcb);
        EXPECT(gbc.readMem(0xbfb8), 0xd);
        // CB 0D 015A
        gbc.setState(0x3def, 0xa630, 0x1070, 0xc1dc, 0x2fd6, 0xafdf, 0x0, 0x1);
        gbc.writeMem(0x3def, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xa630);
        EXPECT(gbc.pc(), 0x3df1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 015B
        gbc.setState(0x8890, 0x25e6, 0xc9a0, 0xe4ad, 0x21e, 0x76b9, 0x1, 0x1);
        gbc.writeMem(0x8890, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x25e6);
        EXPECT(gbc.pc(), 0x8892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8890), 0xcb);
        EXPECT(gbc.readMem(0x8891), 0xd);
        // CB 0D 015C
        gbc.setState(0x1864, 0xf5ec, 0x1e70, 0x980e, 0xfdcf, 0xbc09, 0x0, 0x1);
        gbc.writeMem(0x1864, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf5ec);
        EXPECT(gbc.pc(), 0x1866);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 015D
        gbc.setState(0x6305, 0x4b09, 0x5630, 0x256e, 0x38e0, 0x9c25, 0x1, 0x1);
        gbc.writeMem(0x6305, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4b09);
        EXPECT(gbc.pc(), 0x6307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 015E
        gbc.setState(0x204f, 0xc71, 0xbca0, 0x6d19, 0xdefa, 0xff64, 0x1, 0x1);
        gbc.writeMem(0x204f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc71);
        EXPECT(gbc.pc(), 0x2051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 015F
        gbc.setState(0x7b43, 0x1be8, 0x8c30, 0xa9a7, 0x8893, 0x4984, 0x1, 0x1);
        gbc.writeMem(0x7b43, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1be8);
        EXPECT(gbc.pc(), 0x7b45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0160
        gbc.setState(0x32ab, 0x6aaa, 0x14f0, 0x7d7f, 0x542a, 0x9c4a, 0x1, 0x0);
        gbc.writeMem(0x32ab, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6aaa);
        EXPECT(gbc.pc(), 0x32ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0161
        gbc.setState(0xc27f, 0x748d, 0xf840, 0xe8c9, 0xc7b2, 0x5983, 0x0, 0x1);
        gbc.writeMem(0xc27f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x748d);
        EXPECT(gbc.pc(), 0xc281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc27f), 0xcb);
        EXPECT(gbc.readMem(0xc280), 0xd);
        // CB 0D 0162
        gbc.setState(0x2d10, 0xf0fa, 0xd5c0, 0x1bd1, 0x2b5d, 0x7750, 0x1, 0x1);
        gbc.writeMem(0x2d10, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf0fa);
        EXPECT(gbc.pc(), 0x2d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0164
        gbc.setState(0x469f, 0xd236, 0x4fe0, 0xc75a, 0x7099, 0x74c3, 0x1, 0x1);
        gbc.writeMem(0x469f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd236);
        EXPECT(gbc.pc(), 0x46a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0165
        gbc.setState(0x785d, 0x1c27, 0xb910, 0x9c6b, 0xa4e1, 0xfb89, 0x1, 0x0);
        gbc.writeMem(0x785d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1c27);
        EXPECT(gbc.pc(), 0x785f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0166
        gbc.setState(0x921d, 0xeb7d, 0x4130, 0xa355, 0xdf7b, 0xeed0, 0x1, 0x0);
        gbc.writeMem(0x921d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xeb7d);
        EXPECT(gbc.pc(), 0x921f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x921d), 0xcb);
        EXPECT(gbc.readMem(0x921e), 0xd);
        // CB 0D 0167
        gbc.setState(0x20b7, 0x4fc6, 0x34c0, 0x5031, 0x18d9, 0xe3c1, 0x1, 0x1);
        gbc.writeMem(0x20b7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4fc6);
        EXPECT(gbc.pc(), 0x20b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0168
        gbc.setState(0xd297, 0xb0ad, 0x2e80, 0x11b, 0xd35a, 0xe3b5, 0x0, 0x1);
        gbc.writeMem(0xd297, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb0ad);
        EXPECT(gbc.pc(), 0xd299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd297), 0xcb);
        EXPECT(gbc.readMem(0xd298), 0xd);
        // CB 0D 0169
        gbc.setState(0x9471, 0x7b2e, 0xf670, 0x35b8, 0x42b8, 0x8e71, 0x0, 0x1);
        gbc.writeMem(0x9471, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7b2e);
        EXPECT(gbc.pc(), 0x9473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9471), 0xcb);
        EXPECT(gbc.readMem(0x9472), 0xd);
        // CB 0D 016A
        gbc.setState(0x123d, 0xd212, 0x330, 0x637e, 0x18e, 0x8724, 0x1, 0x1);
        gbc.writeMem(0x123d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd212);
        EXPECT(gbc.pc(), 0x123f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 016B
        gbc.setState(0xb687, 0x7140, 0x67b0, 0x518b, 0xbc07, 0xf8a7, 0x1, 0x0);
        gbc.writeMem(0xb687, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7140);
        EXPECT(gbc.pc(), 0xb689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb687), 0xcb);
        EXPECT(gbc.readMem(0xb688), 0xd);
        // CB 0D 016C
        gbc.setState(0x5f16, 0x1cc2, 0xa6a0, 0xceb7, 0x2eff, 0x72ae, 0x0, 0x1);
        gbc.writeMem(0x5f16, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1cc2);
        EXPECT(gbc.pc(), 0x5f18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 016D
        gbc.setState(0xb484, 0x14dd, 0xd250, 0x6dbc, 0xe5b5, 0xbaec, 0x0, 0x0);
        gbc.writeMem(0xb484, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x14dd);
        EXPECT(gbc.pc(), 0xb486);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb484), 0xcb);
        EXPECT(gbc.readMem(0xb485), 0xd);
        // CB 0D 016E
        gbc.setState(0x974c, 0xdbc8, 0x5260, 0x46c, 0xfb7e, 0xcf3f, 0x1, 0x0);
        gbc.writeMem(0x974c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xdbc8);
        EXPECT(gbc.pc(), 0x974e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x974c), 0xcb);
        EXPECT(gbc.readMem(0x974d), 0xd);
        // CB 0D 016F
        gbc.setState(0x5314, 0x10c1, 0x34e0, 0x74e5, 0xe86a, 0x2d2b, 0x0, 0x1);
        gbc.writeMem(0x5314, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x10c1);
        EXPECT(gbc.pc(), 0x5316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0170
        gbc.setState(0xa290, 0xd70c, 0x40b0, 0x4575, 0xe58c, 0x3521, 0x0, 0x0);
        gbc.writeMem(0xa290, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd70c);
        EXPECT(gbc.pc(), 0xa292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa290), 0xcb);
        EXPECT(gbc.readMem(0xa291), 0xd);
        // CB 0D 0171
        gbc.setState(0x6c14, 0xd9bb, 0xb280, 0x5b07, 0x9c3d, 0x344, 0x0, 0x0);
        gbc.writeMem(0x6c14, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd9bb);
        EXPECT(gbc.pc(), 0x6c16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0172
        gbc.setState(0x8170, 0x5ad0, 0xa000, 0x762c, 0x6b21, 0xe0c7, 0x0, 0x1);
        gbc.writeMem(0x8170, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5ad0);
        EXPECT(gbc.pc(), 0x8172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8170), 0xcb);
        EXPECT(gbc.readMem(0x8171), 0xd);
        // CB 0D 0174
        gbc.setState(0x22f4, 0x798f, 0x3050, 0x60db, 0xec6a, 0x64a5, 0x1, 0x1);
        gbc.writeMem(0x22f4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x798f);
        EXPECT(gbc.pc(), 0x22f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0175
        gbc.setState(0x5f46, 0x4c75, 0x910, 0x751, 0x71a2, 0xb642, 0x0, 0x1);
        gbc.writeMem(0x5f46, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4c75);
        EXPECT(gbc.pc(), 0x5f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0176
        gbc.setState(0xdff9, 0x4afe, 0x9060, 0xb897, 0xa549, 0x6ca, 0x1, 0x0);
        gbc.writeMem(0xdff9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4afe);
        EXPECT(gbc.pc(), 0xdffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdff9), 0xcb);
        EXPECT(gbc.readMem(0xdffa), 0xd);
        // CB 0D 0177
        gbc.setState(0x6845, 0xaa26, 0x2480, 0xd916, 0xdc24, 0x1c4e, 0x1, 0x0);
        gbc.writeMem(0x6845, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xaa26);
        EXPECT(gbc.pc(), 0x6847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0178
        gbc.setState(0x3b0f, 0x6c52, 0x6810, 0xc73a, 0xd1e9, 0x78fd, 0x1, 0x0);
        gbc.writeMem(0x3b0f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6c52);
        EXPECT(gbc.pc(), 0x3b11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0179
        gbc.setState(0x39b5, 0xdcbb, 0xe5b0, 0x14c1, 0xe305, 0x74a4, 0x0, 0x1);
        gbc.writeMem(0x39b5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdcbb);
        EXPECT(gbc.pc(), 0x39b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 017A
        gbc.setState(0x138, 0xd9ba, 0x7b0, 0x456d, 0x867b, 0x8a80, 0x1, 0x0);
        gbc.writeMem(0x138, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd9ba);
        EXPECT(gbc.pc(), 0x13a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 017B
        gbc.setState(0xd240, 0xf186, 0xecb0, 0x4ab6, 0xda71, 0x4417, 0x0, 0x0);
        gbc.writeMem(0xd240, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf186);
        EXPECT(gbc.pc(), 0xd242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd240), 0xcb);
        EXPECT(gbc.readMem(0xd241), 0xd);
        // CB 0D 017D
        gbc.setState(0x28b5, 0xec7c, 0xa7e0, 0x2054, 0xd2f3, 0x555a, 0x1, 0x0);
        gbc.writeMem(0x28b5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xec7c);
        EXPECT(gbc.pc(), 0x28b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 017F
        gbc.setState(0x9402, 0xf4f1, 0xdbc0, 0xad1f, 0xa53e, 0x1773, 0x0, 0x1);
        gbc.writeMem(0x9402, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf4f1);
        EXPECT(gbc.pc(), 0x9404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9402), 0xcb);
        EXPECT(gbc.readMem(0x9403), 0xd);
        // CB 0D 0180
        gbc.setState(0x8c79, 0x1dbd, 0xf90, 0x1009, 0x2b3b, 0xdbc7, 0x1, 0x1);
        gbc.writeMem(0x8c79, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1dbd);
        EXPECT(gbc.pc(), 0x8c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c79), 0xcb);
        EXPECT(gbc.readMem(0x8c7a), 0xd);
        // CB 0D 0181
        gbc.setState(0x542c, 0xf3d7, 0x6e80, 0xcc26, 0x39ca, 0xbc9e, 0x1, 0x1);
        gbc.writeMem(0x542c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf3d7);
        EXPECT(gbc.pc(), 0x542e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0182
        gbc.setState(0x1c0b, 0xd940, 0x5230, 0x2202, 0xf7d3, 0xc108, 0x0, 0x0);
        gbc.writeMem(0x1c0b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd940);
        EXPECT(gbc.pc(), 0x1c0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0183
        gbc.setState(0x64, 0x7dfe, 0x8490, 0x6316, 0x21ee, 0xe569, 0x1, 0x0);
        gbc.writeMem(0x64, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7dfe);
        EXPECT(gbc.pc(), 0x66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0185
        gbc.setState(0x7741, 0x2c8a, 0xaff0, 0x184, 0x44a0, 0x73b0, 0x1, 0x1);
        gbc.writeMem(0x7741, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2c8a);
        EXPECT(gbc.pc(), 0x7743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0186
        gbc.setState(0xac95, 0x522f, 0xe270, 0xb891, 0x4dc9, 0x7b64, 0x1, 0x0);
        gbc.writeMem(0xac95, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x522f);
        EXPECT(gbc.pc(), 0xac97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac95), 0xcb);
        EXPECT(gbc.readMem(0xac96), 0xd);
        // CB 0D 0187
        gbc.setState(0x1de0, 0xf924, 0x8740, 0x90b5, 0x579e, 0xbde1, 0x1, 0x0);
        gbc.writeMem(0x1de0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf924);
        EXPECT(gbc.pc(), 0x1de2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0188
        gbc.setState(0x4407, 0x1fe2, 0xdea0, 0x2f22, 0x31e8, 0x555f, 0x1, 0x0);
        gbc.writeMem(0x4407, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1fe2);
        EXPECT(gbc.pc(), 0x4409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0189
        gbc.setState(0xa4f3, 0x3b97, 0x6ec0, 0xdf17, 0x629b, 0x72bc, 0x1, 0x0);
        gbc.writeMem(0xa4f3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3b97);
        EXPECT(gbc.pc(), 0xa4f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f3), 0xcb);
        EXPECT(gbc.readMem(0xa4f4), 0xd);
        // CB 0D 018A
        gbc.setState(0xd247, 0x5bf5, 0xb4b0, 0xae69, 0x665b, 0xac98, 0x1, 0x0);
        gbc.writeMem(0xd247, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5bf5);
        EXPECT(gbc.pc(), 0xd249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd247), 0xcb);
        EXPECT(gbc.readMem(0xd248), 0xd);
        // CB 0D 018B
        gbc.setState(0xda07, 0x7e39, 0x7050, 0xd7d9, 0x8b00, 0x5ee7, 0x0, 0x0);
        gbc.writeMem(0xda07, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7e39);
        EXPECT(gbc.pc(), 0xda09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda07), 0xcb);
        EXPECT(gbc.readMem(0xda08), 0xd);
        // CB 0D 018C
        gbc.setState(0xeae8, 0x6c9b, 0x31a0, 0x5125, 0xab78, 0xfd98, 0x0, 0x0);
        gbc.writeMem(0xeae8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6c9b);
        EXPECT(gbc.pc(), 0xeaea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeae8), 0xcb);
        EXPECT(gbc.readMem(0xeae9), 0xd);
        // CB 0D 018D
        gbc.setState(0x905b, 0x88a7, 0x54b0, 0x53ae, 0x494a, 0xcd09, 0x0, 0x1);
        gbc.writeMem(0x905b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x88a7);
        EXPECT(gbc.pc(), 0x905d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x905b), 0xcb);
        EXPECT(gbc.readMem(0x905c), 0xd);
        // CB 0D 018F
        gbc.setState(0xed08, 0xbe4b, 0x2c80, 0x1678, 0x26cc, 0xb4c5, 0x0, 0x0);
        gbc.writeMem(0xed08, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xbe4b);
        EXPECT(gbc.pc(), 0xed0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed08), 0xcb);
        EXPECT(gbc.readMem(0xed09), 0xd);
        // CB 0D 0191
        gbc.setState(0x253, 0x867e, 0x2f80, 0xed31, 0x65ca, 0x12bb, 0x0, 0x1);
        gbc.writeMem(0x253, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x867e);
        EXPECT(gbc.pc(), 0x255);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0192
        gbc.setState(0xf02, 0x16cd, 0xd040, 0xf642, 0xf95d, 0x9b77, 0x0, 0x1);
        gbc.writeMem(0xf02, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x16cd);
        EXPECT(gbc.pc(), 0xf04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0193
        gbc.setState(0x9be, 0x627c, 0x1e60, 0x2f3e, 0x7d01, 0xaac6, 0x1, 0x0);
        gbc.writeMem(0x9be, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x627c);
        EXPECT(gbc.pc(), 0x9c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0194
        gbc.setState(0xa6c3, 0x2c9f, 0x880, 0xfbef, 0x3942, 0x95af, 0x1, 0x0);
        gbc.writeMem(0xa6c3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2c9f);
        EXPECT(gbc.pc(), 0xa6c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6c3), 0xcb);
        EXPECT(gbc.readMem(0xa6c4), 0xd);
        // CB 0D 0195
        gbc.setState(0x85eb, 0xd5dc, 0x6c20, 0x3a49, 0x51c7, 0xbaac, 0x1, 0x1);
        gbc.writeMem(0x85eb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd5dc);
        EXPECT(gbc.pc(), 0x85ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85eb), 0xcb);
        EXPECT(gbc.readMem(0x85ec), 0xd);
        // CB 0D 0196
        gbc.setState(0x69b3, 0xf1e9, 0x96b0, 0xc457, 0x17e9, 0x3147, 0x1, 0x1);
        gbc.writeMem(0x69b3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xf1e9);
        EXPECT(gbc.pc(), 0x69b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0197
        gbc.setState(0x6152, 0xb92a, 0x9f60, 0x6846, 0x2d17, 0x1172, 0x1, 0x0);
        gbc.writeMem(0x6152, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb92a);
        EXPECT(gbc.pc(), 0x6154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0198
        gbc.setState(0x42d5, 0xbb00, 0x36f0, 0xe6e0, 0xedca, 0xa165, 0x1, 0x1);
        gbc.writeMem(0x42d5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbb00);
        EXPECT(gbc.pc(), 0x42d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0199
        gbc.setState(0xaa0b, 0xab8b, 0x2200, 0xf0d3, 0x290f, 0xbe0, 0x1, 0x0);
        gbc.writeMem(0xaa0b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xab8b);
        EXPECT(gbc.pc(), 0xaa0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa0b), 0xcb);
        EXPECT(gbc.readMem(0xaa0c), 0xd);
        // CB 0D 019A
        gbc.setState(0x7a28, 0x6807, 0x40d0, 0xa49a, 0xdc7e, 0xe8f8, 0x0, 0x0);
        gbc.writeMem(0x7a28, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6807);
        EXPECT(gbc.pc(), 0x7a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 019B
        gbc.setState(0x3d8, 0x774c, 0xe660, 0x6bd1, 0xca35, 0x41ea, 0x0, 0x1);
        gbc.writeMem(0x3d8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x774c);
        EXPECT(gbc.pc(), 0x3da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 019C
        gbc.setState(0x3b93, 0x71f4, 0x28f0, 0x89c0, 0xd7a5, 0x2bfa, 0x0, 0x0);
        gbc.writeMem(0x3b93, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x71f4);
        EXPECT(gbc.pc(), 0x3b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 019E
        gbc.setState(0x13d0, 0xa177, 0x6a0, 0xa7d6, 0xe13a, 0xbe8d, 0x0, 0x1);
        gbc.writeMem(0x13d0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa177);
        EXPECT(gbc.pc(), 0x13d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 019F
        gbc.setState(0xec43, 0x485c, 0xd3a0, 0x5ce4, 0x8452, 0x1bb8, 0x1, 0x0);
        gbc.writeMem(0xec43, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x485c);
        EXPECT(gbc.pc(), 0xec45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec43), 0xcb);
        EXPECT(gbc.readMem(0xec44), 0xd);
        // CB 0D 01A0
        gbc.setState(0x5306, 0xfc0e, 0x880, 0xaa2a, 0x3b22, 0xef35, 0x0, 0x1);
        gbc.writeMem(0x5306, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xfc0e);
        EXPECT(gbc.pc(), 0x5308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01A1
        gbc.setState(0x91a3, 0xf4be, 0x71f0, 0x6a1b, 0xd686, 0xae31, 0x1, 0x1);
        gbc.writeMem(0x91a3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf4be);
        EXPECT(gbc.pc(), 0x91a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a3), 0xcb);
        EXPECT(gbc.readMem(0x91a4), 0xd);
        // CB 0D 01A2
        gbc.setState(0xa06d, 0x37bf, 0xf0e0, 0xbe13, 0xf126, 0xd413, 0x0, 0x1);
        gbc.writeMem(0xa06d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x37bf);
        EXPECT(gbc.pc(), 0xa06f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa06d), 0xcb);
        EXPECT(gbc.readMem(0xa06e), 0xd);
        // CB 0D 01A3
        gbc.setState(0x2cf1, 0xa074, 0x6b50, 0x9643, 0x87da, 0xd1ec, 0x1, 0x0);
        gbc.writeMem(0x2cf1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa074);
        EXPECT(gbc.pc(), 0x2cf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01A4
        gbc.setState(0xbc13, 0x5653, 0x78f0, 0x6f19, 0xf3c7, 0xcb38, 0x0, 0x0);
        gbc.writeMem(0xbc13, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5653);
        EXPECT(gbc.pc(), 0xbc15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc13), 0xcb);
        EXPECT(gbc.readMem(0xbc14), 0xd);
        // CB 0D 01A5
        gbc.setState(0x90b7, 0xd9d9, 0xd720, 0x4f51, 0xa0cc, 0xd74b, 0x1, 0x1);
        gbc.writeMem(0x90b7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd9d9);
        EXPECT(gbc.pc(), 0x90b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90b7), 0xcb);
        EXPECT(gbc.readMem(0x90b8), 0xd);
        // CB 0D 01A6
        gbc.setState(0xafeb, 0x69a7, 0x59b0, 0xac84, 0xc384, 0xea60, 0x0, 0x1);
        gbc.writeMem(0xafeb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x69a7);
        EXPECT(gbc.pc(), 0xafed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafeb), 0xcb);
        EXPECT(gbc.readMem(0xafec), 0xd);
        // CB 0D 01A7
        gbc.setState(0xcf4d, 0xa24f, 0x8d50, 0x228d, 0x4d3b, 0x1d85, 0x1, 0x1);
        gbc.writeMem(0xcf4d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xa24f);
        EXPECT(gbc.pc(), 0xcf4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf4d), 0xcb);
        EXPECT(gbc.readMem(0xcf4e), 0xd);
        // CB 0D 01A8
        gbc.setState(0x6aa5, 0xcd67, 0x26c0, 0xa0c6, 0x2b31, 0xfac7, 0x0, 0x0);
        gbc.writeMem(0x6aa5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xcd67);
        EXPECT(gbc.pc(), 0x6aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01A9
        gbc.setState(0xd123, 0x1e99, 0x4840, 0x5937, 0x3fa9, 0x9c29, 0x1, 0x0);
        gbc.writeMem(0xd123, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1e99);
        EXPECT(gbc.pc(), 0xd125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd123), 0xcb);
        EXPECT(gbc.readMem(0xd124), 0xd);
        // CB 0D 01AA
        gbc.setState(0x80ff, 0xd725, 0xe6a0, 0xf863, 0x8c5b, 0xe3d5, 0x0, 0x1);
        gbc.writeMem(0x80ff, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd725);
        EXPECT(gbc.pc(), 0x8101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ff), 0xcb);
        EXPECT(gbc.readMem(0x8100), 0xd);
        // CB 0D 01AB
        gbc.setState(0xbbc8, 0x3457, 0xfc80, 0x2bf5, 0x2a7, 0xb95c, 0x1, 0x1);
        gbc.writeMem(0xbbc8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3457);
        EXPECT(gbc.pc(), 0xbbca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbc8), 0xcb);
        EXPECT(gbc.readMem(0xbbc9), 0xd);
        // CB 0D 01AC
        gbc.setState(0xfe2, 0x5172, 0x6750, 0xcfb0, 0xbf5, 0xda66, 0x1, 0x0);
        gbc.writeMem(0xfe2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5172);
        EXPECT(gbc.pc(), 0xfe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01AD
        gbc.setState(0x1776, 0xcb5, 0xd040, 0x5af5, 0x8180, 0xbc21, 0x1, 0x0);
        gbc.writeMem(0x1776, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcb5);
        EXPECT(gbc.pc(), 0x1778);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01AE
        gbc.setState(0x8ea5, 0xc70e, 0xe860, 0xf621, 0x7c11, 0x2c2c, 0x0, 0x1);
        gbc.writeMem(0x8ea5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc70e);
        EXPECT(gbc.pc(), 0x8ea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea5), 0xcb);
        EXPECT(gbc.readMem(0x8ea6), 0xd);
        // CB 0D 01AF
        gbc.setState(0x2a9c, 0x3342, 0x7530, 0xfc70, 0x6ff1, 0xfcbf, 0x0, 0x1);
        gbc.writeMem(0x2a9c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3342);
        EXPECT(gbc.pc(), 0x2a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01B0
        gbc.setState(0xde9a, 0x7a1d, 0xf3a0, 0x8c18, 0xf3c7, 0xb05, 0x0, 0x1);
        gbc.writeMem(0xde9a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7a1d);
        EXPECT(gbc.pc(), 0xde9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde9a), 0xcb);
        EXPECT(gbc.readMem(0xde9b), 0xd);
        // CB 0D 01B1
        gbc.setState(0x6420, 0xfaa8, 0x2d50, 0x9780, 0x97be, 0x52af, 0x1, 0x1);
        gbc.writeMem(0x6420, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xfaa8);
        EXPECT(gbc.pc(), 0x6422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01B2
        gbc.setState(0xecdf, 0xb65f, 0x2210, 0xe76d, 0x914a, 0x2f44, 0x1, 0x0);
        gbc.writeMem(0xecdf, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb65f);
        EXPECT(gbc.pc(), 0xece1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecdf), 0xcb);
        EXPECT(gbc.readMem(0xece0), 0xd);
        // CB 0D 01B3
        gbc.setState(0xdef4, 0xb03b, 0xadb0, 0x430, 0x1080, 0x555f, 0x1, 0x0);
        gbc.writeMem(0xdef4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb03b);
        EXPECT(gbc.pc(), 0xdef6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef4), 0xcb);
        EXPECT(gbc.readMem(0xdef5), 0xd);
        // CB 0D 01B4
        gbc.setState(0xc56c, 0x3d5e, 0xd350, 0xe338, 0x7a8f, 0x1e79, 0x1, 0x0);
        gbc.writeMem(0xc56c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3d5e);
        EXPECT(gbc.pc(), 0xc56e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc56c), 0xcb);
        EXPECT(gbc.readMem(0xc56d), 0xd);
        // CB 0D 01B5
        gbc.setState(0x6a3, 0xd086, 0xcf30, 0x4b7e, 0x6ef3, 0xd22e, 0x0, 0x0);
        gbc.writeMem(0x6a3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd086);
        EXPECT(gbc.pc(), 0x6a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01B6
        gbc.setState(0x3d2b, 0xde93, 0x50e0, 0xceff, 0x5550, 0xbc1e, 0x1, 0x1);
        gbc.writeMem(0x3d2b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xde93);
        EXPECT(gbc.pc(), 0x3d2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01B9
        gbc.setState(0xaa31, 0x19ea, 0xf590, 0xa672, 0x6245, 0x78d6, 0x0, 0x0);
        gbc.writeMem(0xaa31, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x19ea);
        EXPECT(gbc.pc(), 0xaa33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa31), 0xcb);
        EXPECT(gbc.readMem(0xaa32), 0xd);
        // CB 0D 01BA
        gbc.setState(0x1a90, 0xddbb, 0x69c0, 0x52f2, 0xb69, 0xc405, 0x0, 0x0);
        gbc.writeMem(0x1a90, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xddbb);
        EXPECT(gbc.pc(), 0x1a92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01BB
        gbc.setState(0x620e, 0x73b8, 0x5120, 0xbc1c, 0xc1a, 0x1ebe, 0x1, 0x1);
        gbc.writeMem(0x620e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x73b8);
        EXPECT(gbc.pc(), 0x6210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01BC
        gbc.setState(0x696b, 0x3ec9, 0x1430, 0xf40a, 0x6b3, 0x8846, 0x1, 0x1);
        gbc.writeMem(0x696b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3ec9);
        EXPECT(gbc.pc(), 0x696d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01BD
        gbc.setState(0xe178, 0xe02, 0x4530, 0x413a, 0xf483, 0xc48, 0x1, 0x0);
        gbc.writeMem(0xe178, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe02);
        EXPECT(gbc.pc(), 0xe17a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe178), 0xcb);
        EXPECT(gbc.readMem(0xe179), 0xd);
        // CB 0D 01BE
        gbc.setState(0xeede, 0xe8a1, 0x6cd0, 0x7697, 0xb34a, 0xc0c3, 0x1, 0x0);
        gbc.writeMem(0xeede, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe8a1);
        EXPECT(gbc.pc(), 0xeee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeede), 0xcb);
        EXPECT(gbc.readMem(0xeedf), 0xd);
        // CB 0D 01BF
        gbc.setState(0xb6ec, 0x8b7e, 0x6b10, 0xb718, 0x3eb6, 0x6fa3, 0x0, 0x1);
        gbc.writeMem(0xb6ec, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8b7e);
        EXPECT(gbc.pc(), 0xb6ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ec), 0xcb);
        EXPECT(gbc.readMem(0xb6ed), 0xd);
        // CB 0D 01C0
        gbc.setState(0xc11e, 0xe713, 0x6d30, 0x40a8, 0x4840, 0x8dfb, 0x0, 0x1);
        gbc.writeMem(0xc11e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe713);
        EXPECT(gbc.pc(), 0xc120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc11e), 0xcb);
        EXPECT(gbc.readMem(0xc11f), 0xd);
        // CB 0D 01C1
        gbc.setState(0x3d28, 0xfe65, 0x4a30, 0x5b78, 0x50be, 0xc742, 0x0, 0x1);
        gbc.writeMem(0x3d28, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfe65);
        EXPECT(gbc.pc(), 0x3d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01C2
        gbc.setState(0xa678, 0x7bf8, 0x89e0, 0xb3b7, 0x4617, 0x5564, 0x0, 0x1);
        gbc.writeMem(0xa678, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7bf8);
        EXPECT(gbc.pc(), 0xa67a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa678), 0xcb);
        EXPECT(gbc.readMem(0xa679), 0xd);
        // CB 0D 01C3
        gbc.setState(0x8d7, 0xc91e, 0xf1c0, 0xd6de, 0x971c, 0x203, 0x1, 0x1);
        gbc.writeMem(0x8d7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc91e);
        EXPECT(gbc.pc(), 0x8d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01C4
        gbc.setState(0xeba0, 0x36ea, 0x8a20, 0xb586, 0xb224, 0xe49b, 0x0, 0x1);
        gbc.writeMem(0xeba0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x36ea);
        EXPECT(gbc.pc(), 0xeba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeba0), 0xcb);
        EXPECT(gbc.readMem(0xeba1), 0xd);
        // CB 0D 01C5
        gbc.setState(0xb3fc, 0x1290, 0xc230, 0xc467, 0x2d1c, 0x528b, 0x0, 0x1);
        gbc.writeMem(0xb3fc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1290);
        EXPECT(gbc.pc(), 0xb3fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3fc), 0xcb);
        EXPECT(gbc.readMem(0xb3fd), 0xd);
        // CB 0D 01C7
        gbc.setState(0xebfc, 0x61e2, 0xeb40, 0x69df, 0x54df, 0xecc3, 0x1, 0x0);
        gbc.writeMem(0xebfc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x61e2);
        EXPECT(gbc.pc(), 0xebfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebfc), 0xcb);
        EXPECT(gbc.readMem(0xebfd), 0xd);
        // CB 0D 01C8
        gbc.setState(0x8fb3, 0xce12, 0x9820, 0xc880, 0xba04, 0x3611, 0x0, 0x0);
        gbc.writeMem(0x8fb3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xce12);
        EXPECT(gbc.pc(), 0x8fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fb3), 0xcb);
        EXPECT(gbc.readMem(0x8fb4), 0xd);
        // CB 0D 01C9
        gbc.setState(0xe53b, 0x529a, 0x1b30, 0xf168, 0x4312, 0xb8c9, 0x1, 0x1);
        gbc.writeMem(0xe53b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x529a);
        EXPECT(gbc.pc(), 0xe53d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe53b), 0xcb);
        EXPECT(gbc.readMem(0xe53c), 0xd);
        // CB 0D 01CA
        gbc.setState(0xe31d, 0x4d2f, 0x64e0, 0xe1c0, 0xaeef, 0x1163, 0x0, 0x0);
        gbc.writeMem(0xe31d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4d2f);
        EXPECT(gbc.pc(), 0xe31f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe31d), 0xcb);
        EXPECT(gbc.readMem(0xe31e), 0xd);
        // CB 0D 01CB
        gbc.setState(0x7d5b, 0x2f24, 0x4b30, 0xea21, 0x290f, 0x2012, 0x1, 0x1);
        gbc.writeMem(0x7d5b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2f24);
        EXPECT(gbc.pc(), 0x7d5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01CC
        gbc.setState(0x64f8, 0x183d, 0xc670, 0x385b, 0xe50a, 0xfb4e, 0x0, 0x0);
        gbc.writeMem(0x64f8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x183d);
        EXPECT(gbc.pc(), 0x64fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01CD
        gbc.setState(0x7b7b, 0xba1e, 0xa7e0, 0xa592, 0xc474, 0x24de, 0x0, 0x1);
        gbc.writeMem(0x7b7b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xba1e);
        EXPECT(gbc.pc(), 0x7b7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01CE
        gbc.setState(0x8d1f, 0x537f, 0xf870, 0x3cf9, 0x3483, 0x6a07, 0x1, 0x0);
        gbc.writeMem(0x8d1f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x537f);
        EXPECT(gbc.pc(), 0x8d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d1f), 0xcb);
        EXPECT(gbc.readMem(0x8d20), 0xd);
        // CB 0D 01CF
        gbc.setState(0x900a, 0xa32f, 0xf490, 0xc113, 0x26d6, 0x3737, 0x0, 0x1);
        gbc.writeMem(0x900a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa32f);
        EXPECT(gbc.pc(), 0x900c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x900a), 0xcb);
        EXPECT(gbc.readMem(0x900b), 0xd);
        // CB 0D 01D0
        gbc.setState(0x40f6, 0x9c55, 0x88a0, 0xe56a, 0x72e, 0xae59, 0x1, 0x1);
        gbc.writeMem(0x40f6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x9c55);
        EXPECT(gbc.pc(), 0x40f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01D1
        gbc.setState(0xdf43, 0x61f5, 0x23d0, 0xcfc9, 0xb116, 0xd727, 0x1, 0x1);
        gbc.writeMem(0xdf43, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x61f5);
        EXPECT(gbc.pc(), 0xdf45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf43), 0xcb);
        EXPECT(gbc.readMem(0xdf44), 0xd);
        // CB 0D 01D2
        gbc.setState(0x99b9, 0xe872, 0xd670, 0xbbaf, 0x4f65, 0x715f, 0x1, 0x1);
        gbc.writeMem(0x99b9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe872);
        EXPECT(gbc.pc(), 0x99bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b9), 0xcb);
        EXPECT(gbc.readMem(0x99ba), 0xd);
        // CB 0D 01D3
        gbc.setState(0xe590, 0xc60e, 0xa5e0, 0x4900, 0x91ed, 0x83a, 0x0, 0x1);
        gbc.writeMem(0xe590, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc60e);
        EXPECT(gbc.pc(), 0xe592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe590), 0xcb);
        EXPECT(gbc.readMem(0xe591), 0xd);
        // CB 0D 01D4
        gbc.setState(0xccc, 0x14ea, 0x8ef0, 0x3ca2, 0x227d, 0x98da, 0x0, 0x0);
        gbc.writeMem(0xccc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x14ea);
        EXPECT(gbc.pc(), 0xcce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01D5
        gbc.setState(0x2daa, 0x3abf, 0x3bc0, 0x33eb, 0x842e, 0x93f7, 0x1, 0x0);
        gbc.writeMem(0x2daa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3abf);
        EXPECT(gbc.pc(), 0x2dac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01D6
        gbc.setState(0x288, 0x4cc3, 0xc2c0, 0x3515, 0x61d0, 0x658b, 0x0, 0x0);
        gbc.writeMem(0x288, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4cc3);
        EXPECT(gbc.pc(), 0x28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01D7
        gbc.setState(0xede3, 0xd03b, 0x6df0, 0xeb59, 0x395c, 0xba81, 0x1, 0x1);
        gbc.writeMem(0xede3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd03b);
        EXPECT(gbc.pc(), 0xede5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede3), 0xcb);
        EXPECT(gbc.readMem(0xede4), 0xd);
        // CB 0D 01D8
        gbc.setState(0xec12, 0x921e, 0x50d0, 0x3cf0, 0xb6a0, 0x2395, 0x0, 0x0);
        gbc.writeMem(0xec12, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x921e);
        EXPECT(gbc.pc(), 0xec14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec12), 0xcb);
        EXPECT(gbc.readMem(0xec13), 0xd);
        // CB 0D 01DA
        gbc.setState(0xc481, 0x6a61, 0x6730, 0x9254, 0xbcb6, 0x3b0b, 0x1, 0x1);
        gbc.writeMem(0xc481, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6a61);
        EXPECT(gbc.pc(), 0xc483);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc481), 0xcb);
        EXPECT(gbc.readMem(0xc482), 0xd);
        // CB 0D 01DB
        gbc.setState(0xe757, 0x370, 0xf790, 0x9cde, 0x46f5, 0x3c81, 0x1, 0x0);
        gbc.writeMem(0xe757, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x370);
        EXPECT(gbc.pc(), 0xe759);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe757), 0xcb);
        EXPECT(gbc.readMem(0xe758), 0xd);
        // CB 0D 01DC
        gbc.setState(0x73e0, 0x1f6f, 0x2180, 0x711f, 0xad6b, 0x9d38, 0x1, 0x1);
        gbc.writeMem(0x73e0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1f6f);
        EXPECT(gbc.pc(), 0x73e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01DD
        gbc.setState(0x9018, 0x8d06, 0xf640, 0x9ae4, 0xda17, 0x4156, 0x1, 0x0);
        gbc.writeMem(0x9018, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8d06);
        EXPECT(gbc.pc(), 0x901a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9018), 0xcb);
        EXPECT(gbc.readMem(0x9019), 0xd);
        // CB 0D 01DE
        gbc.setState(0xeb63, 0xad21, 0x6760, 0xecc9, 0x5469, 0x45a1, 0x1, 0x1);
        gbc.writeMem(0xeb63, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xad21);
        EXPECT(gbc.pc(), 0xeb65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb63), 0xcb);
        EXPECT(gbc.readMem(0xeb64), 0xd);
        // CB 0D 01DF
        gbc.setState(0x94c8, 0xa836, 0xf910, 0x83c3, 0xdc13, 0x228f, 0x1, 0x0);
        gbc.writeMem(0x94c8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa836);
        EXPECT(gbc.pc(), 0x94ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c8), 0xcb);
        EXPECT(gbc.readMem(0x94c9), 0xd);
        // CB 0D 01E0
        gbc.setState(0xa286, 0x1a3, 0xe550, 0xec1c, 0x530e, 0xb715, 0x1, 0x1);
        gbc.writeMem(0xa286, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1a3);
        EXPECT(gbc.pc(), 0xa288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa286), 0xcb);
        EXPECT(gbc.readMem(0xa287), 0xd);
        // CB 0D 01E1
        gbc.setState(0xcf61, 0x676c, 0xee50, 0x6b48, 0xa4c2, 0x9b5, 0x1, 0x1);
        gbc.writeMem(0xcf61, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x676c);
        EXPECT(gbc.pc(), 0xcf63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf61), 0xcb);
        EXPECT(gbc.readMem(0xcf62), 0xd);
        // CB 0D 01E2
        gbc.setState(0xee93, 0x207c, 0x3d60, 0x4c05, 0xd3d7, 0xedfc, 0x0, 0x0);
        gbc.writeMem(0xee93, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x207c);
        EXPECT(gbc.pc(), 0xee95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee93), 0xcb);
        EXPECT(gbc.readMem(0xee94), 0xd);
        // CB 0D 01E3
        gbc.setState(0x350a, 0x4f25, 0xe560, 0x6a4f, 0xf529, 0x70e0, 0x0, 0x1);
        gbc.writeMem(0x350a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4f25);
        EXPECT(gbc.pc(), 0x350c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01E5
        gbc.setState(0xbe9, 0x4ca6, 0x25e0, 0x503d, 0xa963, 0x3e89, 0x1, 0x0);
        gbc.writeMem(0xbe9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4ca6);
        EXPECT(gbc.pc(), 0xbeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01E6
        gbc.setState(0x51d6, 0x9c69, 0x5f40, 0x790a, 0x3c80, 0x1e0b, 0x0, 0x1);
        gbc.writeMem(0x51d6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9c69);
        EXPECT(gbc.pc(), 0x51d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01E7
        gbc.setState(0x9c33, 0x9805, 0xd5a0, 0x7f1e, 0x854a, 0x1c39, 0x1, 0x0);
        gbc.writeMem(0x9c33, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9805);
        EXPECT(gbc.pc(), 0x9c35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c33), 0xcb);
        EXPECT(gbc.readMem(0x9c34), 0xd);
        // CB 0D 01E8
        gbc.setState(0xa389, 0x6da3, 0xd010, 0x24e8, 0xd8e7, 0x8e0d, 0x1, 0x0);
        gbc.writeMem(0xa389, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6da3);
        EXPECT(gbc.pc(), 0xa38b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa389), 0xcb);
        EXPECT(gbc.readMem(0xa38a), 0xd);
        // CB 0D 01E9
        gbc.setState(0xe616, 0xb93b, 0x4a30, 0xffff, 0x35c0, 0xd195, 0x0, 0x0);
        gbc.writeMem(0xe616, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb93b);
        EXPECT(gbc.pc(), 0xe618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe616), 0xcb);
        EXPECT(gbc.readMem(0xe617), 0xd);
        // CB 0D 01EA
        gbc.setState(0x63e, 0x6c33, 0x3e20, 0xfb7a, 0x1c7d, 0xe9fd, 0x1, 0x1);
        gbc.writeMem(0x63e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6c33);
        EXPECT(gbc.pc(), 0x640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01EB
        gbc.setState(0xa93c, 0x9e40, 0xeb80, 0x886, 0xe365, 0xce9d, 0x1, 0x0);
        gbc.writeMem(0xa93c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9e40);
        EXPECT(gbc.pc(), 0xa93e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa93c), 0xcb);
        EXPECT(gbc.readMem(0xa93d), 0xd);
        // CB 0D 01EC
        gbc.setState(0xee2e, 0x69ce, 0x6a20, 0x2fff, 0xc3f9, 0xe337, 0x1, 0x1);
        gbc.writeMem(0xee2e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x69ce);
        EXPECT(gbc.pc(), 0xee30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee2e), 0xcb);
        EXPECT(gbc.readMem(0xee2f), 0xd);
        // CB 0D 01ED
        gbc.setState(0x6f81, 0xfc9d, 0x8940, 0x8bf6, 0xd4aa, 0x484e, 0x1, 0x0);
        gbc.writeMem(0x6f81, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xfc9d);
        EXPECT(gbc.pc(), 0x6f83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01EE
        gbc.setState(0x3018, 0xe2bb, 0x6b0, 0x5149, 0x28e6, 0xd5e3, 0x1, 0x1);
        gbc.writeMem(0x3018, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe2bb);
        EXPECT(gbc.pc(), 0x301a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01EF
        gbc.setState(0xc464, 0x2c5c, 0x8170, 0x6002, 0x2d1c, 0xf347, 0x0, 0x0);
        gbc.writeMem(0xc464, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2c5c);
        EXPECT(gbc.pc(), 0xc466);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc464), 0xcb);
        EXPECT(gbc.readMem(0xc465), 0xd);
        // CB 0D 01F0
        gbc.setState(0x16a6, 0xafcc, 0xba10, 0xcf19, 0xbd2c, 0xe80b, 0x1, 0x1);
        gbc.writeMem(0x16a6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xafcc);
        EXPECT(gbc.pc(), 0x16a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01F1
        gbc.setState(0xb8ea, 0x8af1, 0xd1d0, 0xc71d, 0xf623, 0x61e, 0x1, 0x1);
        gbc.writeMem(0xb8ea, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8af1);
        EXPECT(gbc.pc(), 0xb8ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ea), 0xcb);
        EXPECT(gbc.readMem(0xb8eb), 0xd);
        // CB 0D 01F2
        gbc.setState(0xafa6, 0xac83, 0x700, 0x83e0, 0xea74, 0x6319, 0x0, 0x1);
        gbc.writeMem(0xafa6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xac83);
        EXPECT(gbc.pc(), 0xafa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa6), 0xcb);
        EXPECT(gbc.readMem(0xafa7), 0xd);
        // CB 0D 01F3
        gbc.setState(0xd2e6, 0x665, 0xd930, 0x962, 0x5ff8, 0x3651, 0x0, 0x1);
        gbc.writeMem(0xd2e6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x665);
        EXPECT(gbc.pc(), 0xd2e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2e6), 0xcb);
        EXPECT(gbc.readMem(0xd2e7), 0xd);
        // CB 0D 01F4
        gbc.setState(0x3365, 0xe6fc, 0x2820, 0x1887, 0xe41c, 0x211c, 0x0, 0x0);
        gbc.writeMem(0x3365, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe6fc);
        EXPECT(gbc.pc(), 0x3367);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01F5
        gbc.setState(0x3f48, 0xff0d, 0x3510, 0xd69f, 0xbe33, 0x241f, 0x1, 0x1);
        gbc.writeMem(0x3f48, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xff0d);
        EXPECT(gbc.pc(), 0x3f4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01F6
        gbc.setState(0xe55a, 0xdc2c, 0xe8c0, 0x219e, 0x295a, 0x7378, 0x0, 0x1);
        gbc.writeMem(0xe55a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xdc2c);
        EXPECT(gbc.pc(), 0xe55c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe55a), 0xcb);
        EXPECT(gbc.readMem(0xe55b), 0xd);
        // CB 0D 01F7
        gbc.setState(0x31c8, 0x7cb8, 0x2d20, 0x5265, 0xb327, 0xd34e, 0x0, 0x1);
        gbc.writeMem(0x31c8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7cb8);
        EXPECT(gbc.pc(), 0x31ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01F8
        gbc.setState(0xfc8, 0x325b, 0x7790, 0x1502, 0x53f8, 0x7690, 0x1, 0x1);
        gbc.writeMem(0xfc8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x325b);
        EXPECT(gbc.pc(), 0xfca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01F9
        gbc.setState(0xed26, 0x5be2, 0xac0, 0xa841, 0xe40c, 0xb32, 0x1, 0x0);
        gbc.writeMem(0xed26, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5be2);
        EXPECT(gbc.pc(), 0xed28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed26), 0xcb);
        EXPECT(gbc.readMem(0xed27), 0xd);
        // CB 0D 01FA
        gbc.setState(0x7d33, 0x16e7, 0x20a0, 0xac50, 0xd74c, 0x655e, 0x1, 0x1);
        gbc.writeMem(0x7d33, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x16e7);
        EXPECT(gbc.pc(), 0x7d35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01FB
        gbc.setState(0x6e7f, 0x9246, 0xf30, 0x32c2, 0xa53e, 0x9c58, 0x1, 0x1);
        gbc.writeMem(0x6e7f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9246);
        EXPECT(gbc.pc(), 0x6e81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 01FC
        gbc.setState(0x4716, 0xa9f8, 0x5770, 0x53ad, 0x49ac, 0x3a61, 0x0, 0x0);
        gbc.writeMem(0x4716, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa9f8);
        EXPECT(gbc.pc(), 0x4718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01FD
        gbc.setState(0x39f4, 0xa7f9, 0x5010, 0x5cb2, 0xb4b3, 0x2f5b, 0x0, 0x0);
        gbc.writeMem(0x39f4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa7f9);
        EXPECT(gbc.pc(), 0x39f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01FE
        gbc.setState(0x30df, 0xa954, 0xb980, 0xdb76, 0x2a48, 0xc16f, 0x0, 0x1);
        gbc.writeMem(0x30df, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa954);
        EXPECT(gbc.pc(), 0x30e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 01FF
        gbc.setState(0xd7f6, 0xa75, 0x1170, 0x43f9, 0x1513, 0xcc3b, 0x1, 0x1);
        gbc.writeMem(0xd7f6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa75);
        EXPECT(gbc.pc(), 0xd7f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f6), 0xcb);
        EXPECT(gbc.readMem(0xd7f7), 0xd);
        // CB 0D 0200
        gbc.setState(0x3a70, 0xb18e, 0x8f10, 0xbd66, 0xa71c, 0xb0ad, 0x1, 0x0);
        gbc.writeMem(0x3a70, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb18e);
        EXPECT(gbc.pc(), 0x3a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0201
        gbc.setState(0x18ee, 0x6a3f, 0x3560, 0xccaf, 0x3741, 0xb883, 0x1, 0x1);
        gbc.writeMem(0x18ee, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6a3f);
        EXPECT(gbc.pc(), 0x18f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0202
        gbc.setState(0x9d70, 0x8c94, 0xb800, 0x1471, 0x6dce, 0x7d56, 0x1, 0x1);
        gbc.writeMem(0x9d70, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8c94);
        EXPECT(gbc.pc(), 0x9d72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d70), 0xcb);
        EXPECT(gbc.readMem(0x9d71), 0xd);
        // CB 0D 0203
        gbc.setState(0xe27e, 0x828f, 0xb390, 0x7c54, 0x2bec, 0xed00, 0x1, 0x1);
        gbc.writeMem(0xe27e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x828f);
        EXPECT(gbc.pc(), 0xe280);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe27e), 0xcb);
        EXPECT(gbc.readMem(0xe27f), 0xd);
        // CB 0D 0204
        gbc.setState(0x6944, 0xf67c, 0xa680, 0x293d, 0xc381, 0xc800, 0x0, 0x1);
        gbc.writeMem(0x6944, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf67c);
        EXPECT(gbc.pc(), 0x6946);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0205
        gbc.setState(0x6728, 0x6193, 0x9930, 0x58fb, 0xbb88, 0xd9ff, 0x0, 0x0);
        gbc.writeMem(0x6728, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6193);
        EXPECT(gbc.pc(), 0x672a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0206
        gbc.setState(0xe975, 0x1d1e, 0xc2c0, 0xc83c, 0x131, 0x3858, 0x1, 0x0);
        gbc.writeMem(0xe975, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1d1e);
        EXPECT(gbc.pc(), 0xe977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe975), 0xcb);
        EXPECT(gbc.readMem(0xe976), 0xd);
        // CB 0D 0207
        gbc.setState(0x6c40, 0xee0d, 0xfd60, 0x3a0c, 0x45e4, 0x19fc, 0x1, 0x0);
        gbc.writeMem(0x6c40, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xee0d);
        EXPECT(gbc.pc(), 0x6c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0208
        gbc.setState(0xa96f, 0x405f, 0x7de0, 0x56ee, 0xe134, 0x3f86, 0x0, 0x0);
        gbc.writeMem(0xa96f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x405f);
        EXPECT(gbc.pc(), 0xa971);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96f), 0xcb);
        EXPECT(gbc.readMem(0xa970), 0xd);
        // CB 0D 0209
        gbc.setState(0x5f5, 0xdc84, 0xca00, 0x5d66, 0x76f6, 0x819b, 0x1, 0x1);
        gbc.writeMem(0x5f5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xdc84);
        EXPECT(gbc.pc(), 0x5f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 020A
        gbc.setState(0xde63, 0xfd19, 0xb000, 0x3b4a, 0x8f23, 0x31d8, 0x0, 0x1);
        gbc.writeMem(0xde63, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfd19);
        EXPECT(gbc.pc(), 0xde65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde63), 0xcb);
        EXPECT(gbc.readMem(0xde64), 0xd);
        // CB 0D 020B
        gbc.setState(0x611c, 0xd7fa, 0x9e30, 0x837e, 0xa9d1, 0xea96, 0x0, 0x0);
        gbc.writeMem(0x611c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd7fa);
        EXPECT(gbc.pc(), 0x611e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 020C
        gbc.setState(0x2bd0, 0xc223, 0x39f0, 0xcc28, 0xb2bb, 0x51cb, 0x0, 0x1);
        gbc.writeMem(0x2bd0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc223);
        EXPECT(gbc.pc(), 0x2bd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 020D
        gbc.setState(0x126c, 0xb177, 0xbca0, 0x8c4d, 0x28e, 0x97ca, 0x0, 0x0);
        gbc.writeMem(0x126c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb177);
        EXPECT(gbc.pc(), 0x126e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 020E
        gbc.setState(0x353e, 0x4181, 0x1350, 0x8d3a, 0x60ff, 0x99d0, 0x0, 0x1);
        gbc.writeMem(0x353e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4181);
        EXPECT(gbc.pc(), 0x3540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 020F
        gbc.setState(0x8476, 0x57ac, 0xa5b0, 0xc2e7, 0x8fd1, 0x563a, 0x1, 0x0);
        gbc.writeMem(0x8476, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x57ac);
        EXPECT(gbc.pc(), 0x8478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8476), 0xcb);
        EXPECT(gbc.readMem(0x8477), 0xd);
        // CB 0D 0210
        gbc.setState(0x5042, 0x3e01, 0x46b0, 0x73e0, 0x5399, 0xccb7, 0x0, 0x1);
        gbc.writeMem(0x5042, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3e01);
        EXPECT(gbc.pc(), 0x5044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0211
        gbc.setState(0x72bb, 0x8dd2, 0x4690, 0xb491, 0x9456, 0xa3ad, 0x1, 0x1);
        gbc.writeMem(0x72bb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8dd2);
        EXPECT(gbc.pc(), 0x72bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0212
        gbc.setState(0xc2f7, 0xf793, 0xd330, 0xa117, 0xaa03, 0x8898, 0x0, 0x1);
        gbc.writeMem(0xc2f7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf793);
        EXPECT(gbc.pc(), 0xc2f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f7), 0xcb);
        EXPECT(gbc.readMem(0xc2f8), 0xd);
        // CB 0D 0213
        gbc.setState(0x713, 0x4147, 0x4bf0, 0x3a6, 0xb8, 0xb138, 0x0, 0x1);
        gbc.writeMem(0x713, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4147);
        EXPECT(gbc.pc(), 0x715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0214
        gbc.setState(0x6666, 0x39, 0x8640, 0x1153, 0x1742, 0xedf0, 0x1, 0x1);
        gbc.writeMem(0x6666, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x39);
        EXPECT(gbc.pc(), 0x6668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0215
        gbc.setState(0x618d, 0x7547, 0x4d40, 0x9c8f, 0x7ea0, 0xe23e, 0x1, 0x0);
        gbc.writeMem(0x618d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7547);
        EXPECT(gbc.pc(), 0x618f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0216
        gbc.setState(0x44f6, 0x2110, 0x4a10, 0x2e7f, 0x7fba, 0x956e, 0x1, 0x1);
        gbc.writeMem(0x44f6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2110);
        EXPECT(gbc.pc(), 0x44f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0217
        gbc.setState(0x9aa8, 0x72c8, 0xdb90, 0xc4f7, 0x43b7, 0x9655, 0x1, 0x0);
        gbc.writeMem(0x9aa8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x72c8);
        EXPECT(gbc.pc(), 0x9aaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa8), 0xcb);
        EXPECT(gbc.readMem(0x9aa9), 0xd);
        // CB 0D 0218
        gbc.setState(0x9f4, 0xdeba, 0x1eb0, 0x3d59, 0x2559, 0x2e70, 0x0, 0x1);
        gbc.writeMem(0x9f4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xdeba);
        EXPECT(gbc.pc(), 0x9f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0219
        gbc.setState(0x4573, 0x2a7f, 0x3f20, 0xac15, 0x6e84, 0x7e4b, 0x1, 0x0);
        gbc.writeMem(0x4573, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2a7f);
        EXPECT(gbc.pc(), 0x4575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 021A
        gbc.setState(0xabd4, 0x398e, 0x59a0, 0xef7a, 0x27f2, 0xc9f8, 0x1, 0x1);
        gbc.writeMem(0xabd4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x398e);
        EXPECT(gbc.pc(), 0xabd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd4), 0xcb);
        EXPECT(gbc.readMem(0xabd5), 0xd);
        // CB 0D 021B
        gbc.setState(0x604a, 0xe8de, 0x970, 0x2146, 0x46f1, 0xe396, 0x0, 0x0);
        gbc.writeMem(0x604a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe8de);
        EXPECT(gbc.pc(), 0x604c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 021C
        gbc.setState(0x7880, 0xdd6e, 0xf380, 0x441c, 0xc19f, 0x3434, 0x1, 0x1);
        gbc.writeMem(0x7880, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xdd6e);
        EXPECT(gbc.pc(), 0x7882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 021D
        gbc.setState(0x11b9, 0x5302, 0x61c0, 0x8138, 0x7cfc, 0xf58c, 0x0, 0x0);
        gbc.writeMem(0x11b9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5302);
        EXPECT(gbc.pc(), 0x11bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 021E
        gbc.setState(0x61f7, 0xdf1e, 0x8dc0, 0x69c3, 0x5d1c, 0x5a21, 0x1, 0x0);
        gbc.writeMem(0x61f7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdf1e);
        EXPECT(gbc.pc(), 0x61f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 021F
        gbc.setState(0xa41a, 0x8b5a, 0x70, 0x8a1e, 0x5575, 0x5d9f, 0x0, 0x1);
        gbc.writeMem(0xa41a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8b5a);
        EXPECT(gbc.pc(), 0xa41c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa41a), 0xcb);
        EXPECT(gbc.readMem(0xa41b), 0xd);
        // CB 0D 0220
        gbc.setState(0x4c16, 0xddb2, 0xe460, 0xae52, 0xfaac, 0x119c, 0x0, 0x0);
        gbc.writeMem(0x4c16, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xddb2);
        EXPECT(gbc.pc(), 0x4c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0221
        gbc.setState(0xc2dc, 0x2410, 0x9b00, 0xf62, 0x3a55, 0x79b6, 0x0, 0x0);
        gbc.writeMem(0xc2dc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2410);
        EXPECT(gbc.pc(), 0xc2de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2dc), 0xcb);
        EXPECT(gbc.readMem(0xc2dd), 0xd);
        // CB 0D 0222
        gbc.setState(0x86a4, 0x8b34, 0xffc0, 0xa3c7, 0xcf03, 0xf137, 0x0, 0x1);
        gbc.writeMem(0x86a4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8b34);
        EXPECT(gbc.pc(), 0x86a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a4), 0xcb);
        EXPECT(gbc.readMem(0x86a5), 0xd);
        // CB 0D 0223
        gbc.setState(0x4e1f, 0x7d63, 0x7210, 0xc499, 0x5176, 0x7793, 0x1, 0x0);
        gbc.writeMem(0x4e1f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7d63);
        EXPECT(gbc.pc(), 0x4e21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0224
        gbc.setState(0x1fc5, 0xd3f2, 0xaf20, 0x8291, 0x827d, 0x7066, 0x1, 0x1);
        gbc.writeMem(0x1fc5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd3f2);
        EXPECT(gbc.pc(), 0x1fc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0225
        gbc.setState(0xa6fc, 0xd619, 0x4920, 0xc02b, 0x6fb7, 0x8100, 0x1, 0x1);
        gbc.writeMem(0xa6fc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd619);
        EXPECT(gbc.pc(), 0xa6fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6fc), 0xcb);
        EXPECT(gbc.readMem(0xa6fd), 0xd);
        // CB 0D 0226
        gbc.setState(0xe908, 0xef68, 0x9500, 0x922a, 0x50d3, 0x6e13, 0x0, 0x1);
        gbc.writeMem(0xe908, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xef68);
        EXPECT(gbc.pc(), 0xe90a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe908), 0xcb);
        EXPECT(gbc.readMem(0xe909), 0xd);
        // CB 0D 0227
        gbc.setState(0x9958, 0x32e0, 0x1830, 0x8970, 0xf2a3, 0x368c, 0x1, 0x1);
        gbc.writeMem(0x9958, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x32e0);
        EXPECT(gbc.pc(), 0x995a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9958), 0xcb);
        EXPECT(gbc.readMem(0x9959), 0xd);
        // CB 0D 0228
        gbc.setState(0x6132, 0x8087, 0x5e70, 0x5182, 0x7f0b, 0xf26d, 0x0, 0x0);
        gbc.writeMem(0x6132, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8087);
        EXPECT(gbc.pc(), 0x6134);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0229
        gbc.setState(0x3a83, 0x7d8d, 0x820, 0xb7d5, 0xc87, 0xa8e9, 0x1, 0x0);
        gbc.writeMem(0x3a83, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7d8d);
        EXPECT(gbc.pc(), 0x3a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 022A
        gbc.setState(0x4f99, 0x9c20, 0x7d80, 0x55a5, 0x4526, 0x5f80, 0x1, 0x0);
        gbc.writeMem(0x4f99, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9c20);
        EXPECT(gbc.pc(), 0x4f9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 022B
        gbc.setState(0x50d3, 0x7b08, 0xa780, 0x1b11, 0x9d64, 0xf69a, 0x0, 0x1);
        gbc.writeMem(0x50d3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7b08);
        EXPECT(gbc.pc(), 0x50d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 022C
        gbc.setState(0x1598, 0x86bb, 0xb1f0, 0xf349, 0xca12, 0x9ed4, 0x1, 0x1);
        gbc.writeMem(0x1598, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x86bb);
        EXPECT(gbc.pc(), 0x159a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 022D
        gbc.setState(0xdc93, 0x19f6, 0xcfb0, 0x9330, 0x2347, 0xf3f0, 0x0, 0x0);
        gbc.writeMem(0xdc93, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x19f6);
        EXPECT(gbc.pc(), 0xdc95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc93), 0xcb);
        EXPECT(gbc.readMem(0xdc94), 0xd);
        // CB 0D 022E
        gbc.setState(0x3cfa, 0xf688, 0xdfc0, 0xba66, 0xc741, 0x50e9, 0x0, 0x1);
        gbc.writeMem(0x3cfa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf688);
        EXPECT(gbc.pc(), 0x3cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0230
        gbc.setState(0xbc8e, 0x14f7, 0x8b60, 0x31ec, 0x1527, 0x1b4a, 0x1, 0x1);
        gbc.writeMem(0xbc8e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x14f7);
        EXPECT(gbc.pc(), 0xbc90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8e), 0xcb);
        EXPECT(gbc.readMem(0xbc8f), 0xd);
        // CB 0D 0231
        gbc.setState(0x178, 0x2476, 0x8100, 0x5086, 0x6d03, 0x7dc7, 0x0, 0x0);
        gbc.writeMem(0x178, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2476);
        EXPECT(gbc.pc(), 0x17a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0232
        gbc.setState(0xd08f, 0xdd3c, 0x9720, 0xbfbd, 0x6437, 0xbb18, 0x0, 0x1);
        gbc.writeMem(0xd08f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xdd3c);
        EXPECT(gbc.pc(), 0xd091);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd08f), 0xcb);
        EXPECT(gbc.readMem(0xd090), 0xd);
        // CB 0D 0233
        gbc.setState(0xc69f, 0xfc03, 0x9cf0, 0x2d81, 0xbbc, 0xabb5, 0x0, 0x1);
        gbc.writeMem(0xc69f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xfc03);
        EXPECT(gbc.pc(), 0xc6a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc69f), 0xcb);
        EXPECT(gbc.readMem(0xc6a0), 0xd);
        // CB 0D 0234
        gbc.setState(0x49b4, 0x3ad5, 0x1100, 0xaa9f, 0xb3a0, 0x2b24, 0x0, 0x0);
        gbc.writeMem(0x49b4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3ad5);
        EXPECT(gbc.pc(), 0x49b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0235
        gbc.setState(0x275a, 0x55b9, 0x9bb0, 0x7314, 0x240c, 0xea51, 0x1, 0x1);
        gbc.writeMem(0x275a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x55b9);
        EXPECT(gbc.pc(), 0x275c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0237
        gbc.setState(0x6757, 0xfd94, 0x7f10, 0x6035, 0xed9, 0xc662, 0x0, 0x1);
        gbc.writeMem(0x6757, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfd94);
        EXPECT(gbc.pc(), 0x6759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0238
        gbc.setState(0xad23, 0xf7e0, 0x3a90, 0x3ed3, 0x8fa4, 0x5460, 0x0, 0x1);
        gbc.writeMem(0xad23, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf7e0);
        EXPECT(gbc.pc(), 0xad25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad23), 0xcb);
        EXPECT(gbc.readMem(0xad24), 0xd);
        // CB 0D 0239
        gbc.setState(0x43ea, 0xbd7e, 0xcd50, 0xb7ed, 0xbbbf, 0x80f0, 0x1, 0x0);
        gbc.writeMem(0x43ea, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xbd7e);
        EXPECT(gbc.pc(), 0x43ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 023A
        gbc.setState(0xd171, 0xf33e, 0x8720, 0xe6d1, 0x334c, 0xa428, 0x0, 0x1);
        gbc.writeMem(0xd171, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf33e);
        EXPECT(gbc.pc(), 0xd173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd171), 0xcb);
        EXPECT(gbc.readMem(0xd172), 0xd);
        // CB 0D 023B
        gbc.setState(0x56e3, 0x7d45, 0xa6f0, 0xadd5, 0x6b2b, 0xe100, 0x0, 0x0);
        gbc.writeMem(0x56e3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7d45);
        EXPECT(gbc.pc(), 0x56e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 023C
        gbc.setState(0x1e9c, 0xd84, 0x23c0, 0x9989, 0x681d, 0x99d7, 0x1, 0x0);
        gbc.writeMem(0x1e9c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd84);
        EXPECT(gbc.pc(), 0x1e9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 023D
        gbc.setState(0x1b70, 0x125a, 0x8bf0, 0xe2a3, 0x7a2a, 0x772, 0x0, 0x1);
        gbc.writeMem(0x1b70, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x125a);
        EXPECT(gbc.pc(), 0x1b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 023E
        gbc.setState(0x1ded, 0xdcc3, 0x350, 0x7245, 0x616, 0xfba4, 0x0, 0x0);
        gbc.writeMem(0x1ded, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdcc3);
        EXPECT(gbc.pc(), 0x1def);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 023F
        gbc.setState(0xba6a, 0x345d, 0xb50, 0xc317, 0x8d48, 0xfdd6, 0x0, 0x0);
        gbc.writeMem(0xba6a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x345d);
        EXPECT(gbc.pc(), 0xba6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba6a), 0xcb);
        EXPECT(gbc.readMem(0xba6b), 0xd);
        // CB 0D 0240
        gbc.setState(0x8b8, 0x437a, 0x7630, 0xf7fd, 0x3375, 0x600b, 0x1, 0x1);
        gbc.writeMem(0x8b8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x437a);
        EXPECT(gbc.pc(), 0x8ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0241
        gbc.setState(0x84, 0xa188, 0x84f0, 0xac61, 0x157b, 0x9f61, 0x0, 0x0);
        gbc.writeMem(0x84, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa188);
        EXPECT(gbc.pc(), 0x86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0242
        gbc.setState(0xe18d, 0xc13d, 0x7bf0, 0x7a08, 0xf5de, 0xa015, 0x1, 0x0);
        gbc.writeMem(0xe18d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc13d);
        EXPECT(gbc.pc(), 0xe18f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe18d), 0xcb);
        EXPECT(gbc.readMem(0xe18e), 0xd);
        // CB 0D 0243
        gbc.setState(0xd1e, 0xd56b, 0xab70, 0x4b0f, 0x2f5a, 0xb805, 0x1, 0x0);
        gbc.writeMem(0xd1e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd56b);
        EXPECT(gbc.pc(), 0xd20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0244
        gbc.setState(0x856a, 0x637a, 0xa120, 0xe00a, 0x5b8d, 0xc5d2, 0x0, 0x0);
        gbc.writeMem(0x856a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x637a);
        EXPECT(gbc.pc(), 0x856c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856a), 0xcb);
        EXPECT(gbc.readMem(0x856b), 0xd);
        // CB 0D 0245
        gbc.setState(0x53f7, 0x7952, 0x2700, 0x6b02, 0xac0d, 0x649d, 0x0, 0x1);
        gbc.writeMem(0x53f7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7952);
        EXPECT(gbc.pc(), 0x53f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0246
        gbc.setState(0xd6, 0x438, 0x66a0, 0xb35f, 0x8680, 0xf2f1, 0x1, 0x1);
        gbc.writeMem(0xd6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x438);
        EXPECT(gbc.pc(), 0xd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0247
        gbc.setState(0x73cc, 0xbe0d, 0xa840, 0x4516, 0x2f8d, 0xf7b1, 0x0, 0x1);
        gbc.writeMem(0x73cc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbe0d);
        EXPECT(gbc.pc(), 0x73ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0248
        gbc.setState(0x141, 0x8049, 0x32c0, 0x542a, 0xd449, 0x475f, 0x1, 0x1);
        gbc.writeMem(0x141, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8049);
        EXPECT(gbc.pc(), 0x143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0249
        gbc.setState(0xc8a8, 0x973c, 0xc600, 0xe138, 0x172d, 0x381d, 0x1, 0x1);
        gbc.writeMem(0xc8a8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x973c);
        EXPECT(gbc.pc(), 0xc8aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a8), 0xcb);
        EXPECT(gbc.readMem(0xc8a9), 0xd);
        // CB 0D 024A
        gbc.setState(0xb8ab, 0x27fb, 0x9580, 0x7f6, 0x11a4, 0x4162, 0x0, 0x1);
        gbc.writeMem(0xb8ab, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x27fb);
        EXPECT(gbc.pc(), 0xb8ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ab), 0xcb);
        EXPECT(gbc.readMem(0xb8ac), 0xd);
        // CB 0D 024B
        gbc.setState(0x9962, 0x7026, 0xa380, 0xda41, 0x557a, 0x7ada, 0x1, 0x1);
        gbc.writeMem(0x9962, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7026);
        EXPECT(gbc.pc(), 0x9964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9962), 0xcb);
        EXPECT(gbc.readMem(0x9963), 0xd);
        // CB 0D 024C
        gbc.setState(0x3cfb, 0x636d, 0xd030, 0x974b, 0xe26f, 0x3fa5, 0x1, 0x1);
        gbc.writeMem(0x3cfb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x636d);
        EXPECT(gbc.pc(), 0x3cfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 024D
        gbc.setState(0xa2c0, 0xc39, 0xbd10, 0xa8b3, 0x9cb5, 0x510b, 0x0, 0x0);
        gbc.writeMem(0xa2c0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc39);
        EXPECT(gbc.pc(), 0xa2c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c0), 0xcb);
        EXPECT(gbc.readMem(0xa2c1), 0xd);
        // CB 0D 024E
        gbc.setState(0xbe98, 0xcc0d, 0x6e40, 0xa0ad, 0x2aaa, 0x73ad, 0x0, 0x0);
        gbc.writeMem(0xbe98, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xcc0d);
        EXPECT(gbc.pc(), 0xbe9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe98), 0xcb);
        EXPECT(gbc.readMem(0xbe99), 0xd);
        // CB 0D 024F
        gbc.setState(0xa3bf, 0x6b2a, 0xe7c0, 0x6145, 0x97c1, 0x7a27, 0x1, 0x1);
        gbc.writeMem(0xa3bf, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6b2a);
        EXPECT(gbc.pc(), 0xa3c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3bf), 0xcb);
        EXPECT(gbc.readMem(0xa3c0), 0xd);
        // CB 0D 0250
        gbc.setState(0xae36, 0xa406, 0xb050, 0xdf83, 0x2766, 0xf63c, 0x0, 0x1);
        gbc.writeMem(0xae36, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa406);
        EXPECT(gbc.pc(), 0xae38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae36), 0xcb);
        EXPECT(gbc.readMem(0xae37), 0xd);
        // CB 0D 0251
        gbc.setState(0x2689, 0x4421, 0x4170, 0x45bf, 0x3082, 0x3c71, 0x1, 0x0);
        gbc.writeMem(0x2689, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4421);
        EXPECT(gbc.pc(), 0x268b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0252
        gbc.setState(0x3104, 0xa1ad, 0x4690, 0x814, 0xf0ef, 0x5e8a, 0x1, 0x1);
        gbc.writeMem(0x3104, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa1ad);
        EXPECT(gbc.pc(), 0x3106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0253
        gbc.setState(0x9e0f, 0xf6eb, 0x81d0, 0x7d0a, 0xd2cd, 0x8849, 0x0, 0x0);
        gbc.writeMem(0x9e0f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf6eb);
        EXPECT(gbc.pc(), 0x9e11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e0f), 0xcb);
        EXPECT(gbc.readMem(0x9e10), 0xd);
        // CB 0D 0254
        gbc.setState(0x8c32, 0x598e, 0x5050, 0x9bea, 0xbaeb, 0x6b07, 0x0, 0x0);
        gbc.writeMem(0x8c32, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x598e);
        EXPECT(gbc.pc(), 0x8c34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c32), 0xcb);
        EXPECT(gbc.readMem(0x8c33), 0xd);
        // CB 0D 0255
        gbc.setState(0x394e, 0xd59d, 0x75e0, 0xaf50, 0xb013, 0x12b9, 0x0, 0x1);
        gbc.writeMem(0x394e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd59d);
        EXPECT(gbc.pc(), 0x3950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0256
        gbc.setState(0x3574, 0x1bcb, 0x18b0, 0x2a69, 0x3fd2, 0x993d, 0x0, 0x1);
        gbc.writeMem(0x3574, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1bcb);
        EXPECT(gbc.pc(), 0x3576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0257
        gbc.setState(0x7dd2, 0x4329, 0x2a40, 0x3ee1, 0xd6e1, 0xb57b, 0x1, 0x0);
        gbc.writeMem(0x7dd2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x4329);
        EXPECT(gbc.pc(), 0x7dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0258
        gbc.setState(0xd59, 0xc459, 0x2700, 0x4067, 0x63aa, 0x125, 0x1, 0x0);
        gbc.writeMem(0xd59, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc459);
        EXPECT(gbc.pc(), 0xd5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0259
        gbc.setState(0xdde4, 0x5a3e, 0x2b00, 0x4f23, 0x9759, 0xbf3a, 0x0, 0x0);
        gbc.writeMem(0xdde4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5a3e);
        EXPECT(gbc.pc(), 0xdde6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdde4), 0xcb);
        EXPECT(gbc.readMem(0xdde5), 0xd);
        // CB 0D 025A
        gbc.setState(0x5ba9, 0xe588, 0x3c10, 0x1332, 0x9d81, 0xd09, 0x0, 0x0);
        gbc.writeMem(0x5ba9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe588);
        EXPECT(gbc.pc(), 0x5bab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 025B
        gbc.setState(0x9696, 0xaf6c, 0x83d0, 0xa235, 0x14d8, 0x3958, 0x0, 0x0);
        gbc.writeMem(0x9696, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xaf6c);
        EXPECT(gbc.pc(), 0x9698);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9696), 0xcb);
        EXPECT(gbc.readMem(0x9697), 0xd);
        // CB 0D 025C
        gbc.setState(0xe04e, 0x5d4f, 0xdf80, 0x8020, 0x544b, 0x1cba, 0x0, 0x1);
        gbc.writeMem(0xe04e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5d4f);
        EXPECT(gbc.pc(), 0xe050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04e), 0xcb);
        EXPECT(gbc.readMem(0xe04f), 0xd);
        // CB 0D 025D
        gbc.setState(0x6c49, 0x3adb, 0x5e0, 0x5fbd, 0xd620, 0xb17a, 0x0, 0x0);
        gbc.writeMem(0x6c49, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3adb);
        EXPECT(gbc.pc(), 0x6c4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 025F
        gbc.setState(0x6161, 0x2959, 0xbe40, 0x6bb6, 0xf3a4, 0x63ec, 0x1, 0x1);
        gbc.writeMem(0x6161, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2959);
        EXPECT(gbc.pc(), 0x6163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0260
        gbc.setState(0x3627, 0x635d, 0xbe40, 0xb236, 0x994b, 0x4104, 0x0, 0x0);
        gbc.writeMem(0x3627, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x635d);
        EXPECT(gbc.pc(), 0x3629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0261
        gbc.setState(0x30fc, 0x190e, 0x9af0, 0x92a, 0xb6a0, 0x5e6c, 0x1, 0x0);
        gbc.writeMem(0x30fc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x190e);
        EXPECT(gbc.pc(), 0x30fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0263
        gbc.setState(0xc499, 0x5968, 0x880, 0x9171, 0xb46e, 0x58ad, 0x1, 0x0);
        gbc.writeMem(0xc499, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5968);
        EXPECT(gbc.pc(), 0xc49b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc499), 0xcb);
        EXPECT(gbc.readMem(0xc49a), 0xd);
        // CB 0D 0264
        gbc.setState(0x1b01, 0x67e2, 0xd550, 0x4375, 0x1330, 0xc0e9, 0x1, 0x1);
        gbc.writeMem(0x1b01, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x67e2);
        EXPECT(gbc.pc(), 0x1b03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0265
        gbc.setState(0x785e, 0xa300, 0x35b0, 0x79e2, 0x8828, 0xd31, 0x0, 0x0);
        gbc.writeMem(0x785e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa300);
        EXPECT(gbc.pc(), 0x7860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0266
        gbc.setState(0xd590, 0x6ab7, 0x24b0, 0x4226, 0x7d6, 0x5b66, 0x1, 0x1);
        gbc.writeMem(0xd590, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6ab7);
        EXPECT(gbc.pc(), 0xd592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd590), 0xcb);
        EXPECT(gbc.readMem(0xd591), 0xd);
        // CB 0D 0267
        gbc.setState(0xb4c9, 0x6f0a, 0xe580, 0xfd47, 0x4f31, 0xb9dd, 0x1, 0x0);
        gbc.writeMem(0xb4c9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6f0a);
        EXPECT(gbc.pc(), 0xb4cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4c9), 0xcb);
        EXPECT(gbc.readMem(0xb4ca), 0xd);
        // CB 0D 0268
        gbc.setState(0x11cd, 0x4209, 0xf1e0, 0x5107, 0x2ea1, 0xe576, 0x0, 0x0);
        gbc.writeMem(0x11cd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4209);
        EXPECT(gbc.pc(), 0x11cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0269
        gbc.setState(0xa6db, 0xdab, 0x1810, 0x17ce, 0x2766, 0xb893, 0x0, 0x1);
        gbc.writeMem(0xa6db, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdab);
        EXPECT(gbc.pc(), 0xa6dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6db), 0xcb);
        EXPECT(gbc.readMem(0xa6dc), 0xd);
        // CB 0D 026A
        gbc.setState(0x67, 0x7651, 0xae90, 0xe39b, 0xb0d1, 0x2000, 0x1, 0x1);
        gbc.writeMem(0x67, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7651);
        EXPECT(gbc.pc(), 0x69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 026C
        gbc.setState(0xcc15, 0xf10, 0xf690, 0x3c1f, 0xb9a2, 0xdf8b, 0x1, 0x1);
        gbc.writeMem(0xcc15, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf10);
        EXPECT(gbc.pc(), 0xcc17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc15), 0xcb);
        EXPECT(gbc.readMem(0xcc16), 0xd);
        // CB 0D 026D
        gbc.setState(0x85fa, 0x148f, 0x2b10, 0xf20c, 0x171d, 0x27c7, 0x1, 0x1);
        gbc.writeMem(0x85fa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x148f);
        EXPECT(gbc.pc(), 0x85fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85fa), 0xcb);
        EXPECT(gbc.readMem(0x85fb), 0xd);
        // CB 0D 026E
        gbc.setState(0x6927, 0x4f44, 0x9710, 0x56f9, 0x3d6b, 0x89a6, 0x1, 0x0);
        gbc.writeMem(0x6927, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4f44);
        EXPECT(gbc.pc(), 0x6929);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 026F
        gbc.setState(0xa4c3, 0x2da4, 0xb740, 0xf3c2, 0x90f7, 0x4ed2, 0x1, 0x1);
        gbc.writeMem(0xa4c3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2da4);
        EXPECT(gbc.pc(), 0xa4c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4c3), 0xcb);
        EXPECT(gbc.readMem(0xa4c4), 0xd);
        // CB 0D 0270
        gbc.setState(0x670b, 0x7bd2, 0xb340, 0xbd1d, 0xc00e, 0x41d9, 0x1, 0x0);
        gbc.writeMem(0x670b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x7bd2);
        EXPECT(gbc.pc(), 0x670d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0271
        gbc.setState(0x3a25, 0x9f99, 0xe3b0, 0xcdfa, 0x5a22, 0xa357, 0x0, 0x1);
        gbc.writeMem(0x3a25, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9f99);
        EXPECT(gbc.pc(), 0x3a27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0272
        gbc.setState(0xdee8, 0xd912, 0x4620, 0xb829, 0xfaa0, 0xaae0, 0x0, 0x0);
        gbc.writeMem(0xdee8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd912);
        EXPECT(gbc.pc(), 0xdeea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdee8), 0xcb);
        EXPECT(gbc.readMem(0xdee9), 0xd);
        // CB 0D 0273
        gbc.setState(0x6097, 0xf03d, 0xbb90, 0xaef5, 0x8ee6, 0x2122, 0x1, 0x0);
        gbc.writeMem(0x6097, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf03d);
        EXPECT(gbc.pc(), 0x6099);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0274
        gbc.setState(0xa49b, 0xfb6a, 0x66a0, 0x1eeb, 0x47de, 0xd512, 0x0, 0x1);
        gbc.writeMem(0xa49b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xfb6a);
        EXPECT(gbc.pc(), 0xa49d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa49b), 0xcb);
        EXPECT(gbc.readMem(0xa49c), 0xd);
        // CB 0D 0275
        gbc.setState(0x2375, 0xa907, 0x7670, 0xd538, 0xbde1, 0x123c, 0x0, 0x0);
        gbc.writeMem(0x2375, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa907);
        EXPECT(gbc.pc(), 0x2377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0276
        gbc.setState(0xc47e, 0x18d4, 0x74c0, 0xb1ae, 0x2dc2, 0x517d, 0x1, 0x1);
        gbc.writeMem(0xc47e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x18d4);
        EXPECT(gbc.pc(), 0xc480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc47e), 0xcb);
        EXPECT(gbc.readMem(0xc47f), 0xd);
        // CB 0D 0277
        gbc.setState(0xd7d8, 0x5c50, 0x21a0, 0x8d71, 0xc25e, 0x6756, 0x1, 0x1);
        gbc.writeMem(0xd7d8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5c50);
        EXPECT(gbc.pc(), 0xd7da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7d8), 0xcb);
        EXPECT(gbc.readMem(0xd7d9), 0xd);
        // CB 0D 0279
        gbc.setState(0xa3cf, 0xb385, 0x58b0, 0xd942, 0x9096, 0xad7f, 0x0, 0x1);
        gbc.writeMem(0xa3cf, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb385);
        EXPECT(gbc.pc(), 0xa3d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3cf), 0xcb);
        EXPECT(gbc.readMem(0xa3d0), 0xd);
        // CB 0D 027A
        gbc.setState(0x947f, 0xf3ec, 0x8c00, 0xa58e, 0xdd27, 0x7eda, 0x0, 0x1);
        gbc.writeMem(0x947f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xf3ec);
        EXPECT(gbc.pc(), 0x9481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x947f), 0xcb);
        EXPECT(gbc.readMem(0x9480), 0xd);
        // CB 0D 027B
        gbc.setState(0x426d, 0xde8, 0x6eb0, 0x878d, 0x58ed, 0x43f5, 0x1, 0x1);
        gbc.writeMem(0x426d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xde8);
        EXPECT(gbc.pc(), 0x426f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 027C
        gbc.setState(0x3a99, 0x56f9, 0x4000, 0x5439, 0xcd00, 0x4416, 0x0, 0x1);
        gbc.writeMem(0x3a99, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x56f9);
        EXPECT(gbc.pc(), 0x3a9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 027D
        gbc.setState(0xac81, 0x29ac, 0x72b0, 0x2089, 0xb128, 0x7542, 0x1, 0x0);
        gbc.writeMem(0xac81, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x29ac);
        EXPECT(gbc.pc(), 0xac83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac81), 0xcb);
        EXPECT(gbc.readMem(0xac82), 0xd);
        // CB 0D 027E
        gbc.setState(0x2978, 0x20bd, 0x3ac0, 0xce81, 0xc339, 0x9134, 0x0, 0x0);
        gbc.writeMem(0x2978, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x20bd);
        EXPECT(gbc.pc(), 0x297a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 027F
        gbc.setState(0x1c8a, 0x87ed, 0xf700, 0x7243, 0x106f, 0x96e5, 0x0, 0x0);
        gbc.writeMem(0x1c8a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x87ed);
        EXPECT(gbc.pc(), 0x1c8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0280
        gbc.setState(0xd8a1, 0x7779, 0x2200, 0x3d5c, 0xda0f, 0x563c, 0x0, 0x1);
        gbc.writeMem(0xd8a1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7779);
        EXPECT(gbc.pc(), 0xd8a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8a1), 0xcb);
        EXPECT(gbc.readMem(0xd8a2), 0xd);
        // CB 0D 0281
        gbc.setState(0x7239, 0xcb70, 0x24e0, 0xc7e8, 0x8cbb, 0x3f78, 0x0, 0x1);
        gbc.writeMem(0x7239, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xcb70);
        EXPECT(gbc.pc(), 0x723b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0282
        gbc.setState(0x44d3, 0x9b25, 0xc540, 0xf7f1, 0x4ecd, 0xc8b4, 0x0, 0x0);
        gbc.writeMem(0x44d3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9b25);
        EXPECT(gbc.pc(), 0x44d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0283
        gbc.setState(0xbb4d, 0xa014, 0xd4c0, 0xae96, 0x3345, 0xe25a, 0x0, 0x1);
        gbc.writeMem(0xbb4d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa014);
        EXPECT(gbc.pc(), 0xbb4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb4d), 0xcb);
        EXPECT(gbc.readMem(0xbb4e), 0xd);
        // CB 0D 0284
        gbc.setState(0xdf5e, 0xb4c2, 0xc70, 0x2bdb, 0x2fe9, 0x651d, 0x0, 0x0);
        gbc.writeMem(0xdf5e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb4c2);
        EXPECT(gbc.pc(), 0xdf60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf5e), 0xcb);
        EXPECT(gbc.readMem(0xdf5f), 0xd);
        // CB 0D 0285
        gbc.setState(0x1c51, 0x732b, 0x4320, 0x43e5, 0x5498, 0xe170, 0x0, 0x1);
        gbc.writeMem(0x1c51, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x732b);
        EXPECT(gbc.pc(), 0x1c53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0286
        gbc.setState(0xa247, 0x8144, 0xde0, 0x3e63, 0xb807, 0xc68c, 0x1, 0x1);
        gbc.writeMem(0xa247, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8144);
        EXPECT(gbc.pc(), 0xa249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa247), 0xcb);
        EXPECT(gbc.readMem(0xa248), 0xd);
        // CB 0D 0287
        gbc.setState(0xc78d, 0x2891, 0x8bc0, 0xa836, 0xea03, 0xbc4, 0x0, 0x0);
        gbc.writeMem(0xc78d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2891);
        EXPECT(gbc.pc(), 0xc78f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc78d), 0xcb);
        EXPECT(gbc.readMem(0xc78e), 0xd);
        // CB 0D 0288
        gbc.setState(0xb40a, 0xd465, 0xc7b0, 0x2f4b, 0x65c1, 0x5623, 0x0, 0x1);
        gbc.writeMem(0xb40a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd465);
        EXPECT(gbc.pc(), 0xb40c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb40a), 0xcb);
        EXPECT(gbc.readMem(0xb40b), 0xd);
        // CB 0D 0289
        gbc.setState(0x49a0, 0xbdb, 0xc7b0, 0x6039, 0x894c, 0xdd15, 0x0, 0x0);
        gbc.writeMem(0x49a0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xbdb);
        EXPECT(gbc.pc(), 0x49a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 028A
        gbc.setState(0xc7d1, 0xe941, 0x88f0, 0xb011, 0xaae7, 0x127, 0x1, 0x1);
        gbc.writeMem(0xc7d1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe941);
        EXPECT(gbc.pc(), 0xc7d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7d1), 0xcb);
        EXPECT(gbc.readMem(0xc7d2), 0xd);
        // CB 0D 028B
        gbc.setState(0x1f6, 0x43a5, 0x4110, 0x1a14, 0xd2da, 0xda42, 0x1, 0x0);
        gbc.writeMem(0x1f6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x43a5);
        EXPECT(gbc.pc(), 0x1f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 028C
        gbc.setState(0xb18f, 0x4e89, 0x440, 0xb633, 0x5c60, 0xf299, 0x1, 0x0);
        gbc.writeMem(0xb18f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4e89);
        EXPECT(gbc.pc(), 0xb191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb18f), 0xcb);
        EXPECT(gbc.readMem(0xb190), 0xd);
        // CB 0D 028E
        gbc.setState(0x4eab, 0x26e3, 0xb7d0, 0xe5cc, 0x97d2, 0xafbb, 0x1, 0x1);
        gbc.writeMem(0x4eab, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x26e3);
        EXPECT(gbc.pc(), 0x4ead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 028F
        gbc.setState(0x5ef, 0x386a, 0xbc40, 0x4371, 0x3e8, 0x845a, 0x0, 0x1);
        gbc.writeMem(0x5ef, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x386a);
        EXPECT(gbc.pc(), 0x5f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0290
        gbc.setState(0x7ce1, 0x9e4f, 0x1180, 0x23c8, 0x5ca9, 0x41b4, 0x0, 0x1);
        gbc.writeMem(0x7ce1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9e4f);
        EXPECT(gbc.pc(), 0x7ce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0291
        gbc.setState(0xef66, 0x1e45, 0x3490, 0x37d, 0xdd8f, 0x265b, 0x1, 0x1);
        gbc.writeMem(0xef66, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1e45);
        EXPECT(gbc.pc(), 0xef68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef66), 0xcb);
        EXPECT(gbc.readMem(0xef67), 0xd);
        // CB 0D 0292
        gbc.setState(0x1dc4, 0xe86f, 0x83a0, 0x8fce, 0x3895, 0xa4b1, 0x1, 0x1);
        gbc.writeMem(0x1dc4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe86f);
        EXPECT(gbc.pc(), 0x1dc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0293
        gbc.setState(0x3c66, 0x21d9, 0xee30, 0x5087, 0xceb6, 0xc9d9, 0x1, 0x1);
        gbc.writeMem(0x3c66, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x21d9);
        EXPECT(gbc.pc(), 0x3c68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0294
        gbc.setState(0x5339, 0xdad5, 0x2fe0, 0x381d, 0x2396, 0xf91, 0x0, 0x1);
        gbc.writeMem(0x5339, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdad5);
        EXPECT(gbc.pc(), 0x533b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0295
        gbc.setState(0x809b, 0xdd10, 0x2260, 0x680f, 0x34f5, 0xff93, 0x0, 0x1);
        gbc.writeMem(0x809b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdd10);
        EXPECT(gbc.pc(), 0x809d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x809b), 0xcb);
        EXPECT(gbc.readMem(0x809c), 0xd);
        // CB 0D 0296
        gbc.setState(0x2b6b, 0x1685, 0xbd0, 0x2e38, 0xb3a5, 0xf7a2, 0x0, 0x0);
        gbc.writeMem(0x2b6b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1685);
        EXPECT(gbc.pc(), 0x2b6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0297
        gbc.setState(0xa8d0, 0xc098, 0xd870, 0xf4e7, 0x49fb, 0x52ac, 0x0, 0x1);
        gbc.writeMem(0xa8d0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc098);
        EXPECT(gbc.pc(), 0xa8d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d0), 0xcb);
        EXPECT(gbc.readMem(0xa8d1), 0xd);
        // CB 0D 0298
        gbc.setState(0xda66, 0x8f9f, 0x50c0, 0xdc9e, 0x6de4, 0x517e, 0x0, 0x1);
        gbc.writeMem(0xda66, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8f9f);
        EXPECT(gbc.pc(), 0xda68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda66), 0xcb);
        EXPECT(gbc.readMem(0xda67), 0xd);
        // CB 0D 0299
        gbc.setState(0xded6, 0xce18, 0x79f0, 0x752a, 0x1809, 0xfb40, 0x1, 0x1);
        gbc.writeMem(0xded6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xce18);
        EXPECT(gbc.pc(), 0xded8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded6), 0xcb);
        EXPECT(gbc.readMem(0xded7), 0xd);
        // CB 0D 029A
        gbc.setState(0x2a28, 0xcf41, 0xcab0, 0xfce2, 0x5b3a, 0xf0, 0x0, 0x1);
        gbc.writeMem(0x2a28, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xcf41);
        EXPECT(gbc.pc(), 0x2a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 029B
        gbc.setState(0x49c6, 0x4b5, 0xc960, 0x7504, 0x61a3, 0x2f6f, 0x1, 0x1);
        gbc.writeMem(0x49c6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4b5);
        EXPECT(gbc.pc(), 0x49c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 029C
        gbc.setState(0xc0ed, 0x92ac, 0x48e0, 0xd774, 0x2284, 0x9bdf, 0x1, 0x0);
        gbc.writeMem(0xc0ed, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x92ac);
        EXPECT(gbc.pc(), 0xc0ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ed), 0xcb);
        EXPECT(gbc.readMem(0xc0ee), 0xd);
        // CB 0D 029D
        gbc.setState(0xc0ae, 0x4a91, 0x70f0, 0xf0b4, 0x799b, 0x8d40, 0x1, 0x0);
        gbc.writeMem(0xc0ae, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4a91);
        EXPECT(gbc.pc(), 0xc0b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ae), 0xcb);
        EXPECT(gbc.readMem(0xc0af), 0xd);
        // CB 0D 029F
        gbc.setState(0xb0b6, 0x3083, 0xf990, 0xa069, 0x2926, 0xe486, 0x1, 0x0);
        gbc.writeMem(0xb0b6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3083);
        EXPECT(gbc.pc(), 0xb0b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0b6), 0xcb);
        EXPECT(gbc.readMem(0xb0b7), 0xd);
        // CB 0D 02A0
        gbc.setState(0x88d5, 0x426c, 0xd0c0, 0x9a33, 0x834b, 0xae30, 0x0, 0x0);
        gbc.writeMem(0x88d5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x426c);
        EXPECT(gbc.pc(), 0x88d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88d5), 0xcb);
        EXPECT(gbc.readMem(0x88d6), 0xd);
        // CB 0D 02A1
        gbc.setState(0x4e6f, 0x607c, 0xf2f0, 0x199c, 0x1d1d, 0x544f, 0x0, 0x0);
        gbc.writeMem(0x4e6f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x607c);
        EXPECT(gbc.pc(), 0x4e71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02A2
        gbc.setState(0xfe8, 0x22c4, 0xe420, 0x9ef3, 0x43d3, 0xac3, 0x1, 0x0);
        gbc.writeMem(0xfe8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x22c4);
        EXPECT(gbc.pc(), 0xfea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02A3
        gbc.setState(0x5ec5, 0x7c3c, 0xabe0, 0xa184, 0x3c67, 0x89bc, 0x1, 0x1);
        gbc.writeMem(0x5ec5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7c3c);
        EXPECT(gbc.pc(), 0x5ec7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02A4
        gbc.setState(0x4b96, 0x1e2a, 0xd5f0, 0xd26d, 0x8932, 0x4154, 0x0, 0x1);
        gbc.writeMem(0x4b96, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1e2a);
        EXPECT(gbc.pc(), 0x4b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02A5
        gbc.setState(0x4c8d, 0xab89, 0x2bf0, 0x480f, 0xf33a, 0x77b4, 0x0, 0x1);
        gbc.writeMem(0x4c8d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xab89);
        EXPECT(gbc.pc(), 0x4c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02A6
        gbc.setState(0x9cfa, 0x64c9, 0xb520, 0x1209, 0xea10, 0xf9f4, 0x0, 0x0);
        gbc.writeMem(0x9cfa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x64c9);
        EXPECT(gbc.pc(), 0x9cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cfa), 0xcb);
        EXPECT(gbc.readMem(0x9cfb), 0xd);
        // CB 0D 02A7
        gbc.setState(0x86fc, 0x94af, 0x38a0, 0x8945, 0x544, 0x486, 0x0, 0x1);
        gbc.writeMem(0x86fc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x94af);
        EXPECT(gbc.pc(), 0x86fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86fc), 0xcb);
        EXPECT(gbc.readMem(0x86fd), 0xd);
        // CB 0D 02A8
        gbc.setState(0x6f91, 0x104d, 0x7150, 0x126c, 0xf52a, 0x6e67, 0x1, 0x1);
        gbc.writeMem(0x6f91, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x104d);
        EXPECT(gbc.pc(), 0x6f93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02A9
        gbc.setState(0x717f, 0xd95e, 0x20, 0x2f56, 0x2150, 0xbe6b, 0x1, 0x1);
        gbc.writeMem(0x717f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd95e);
        EXPECT(gbc.pc(), 0x7181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02AA
        gbc.setState(0xb2aa, 0x17cc, 0x8870, 0xce87, 0xa7b6, 0x93fb, 0x1, 0x1);
        gbc.writeMem(0xb2aa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x17cc);
        EXPECT(gbc.pc(), 0xb2ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2aa), 0xcb);
        EXPECT(gbc.readMem(0xb2ab), 0xd);
        // CB 0D 02AB
        gbc.setState(0xa3ec, 0x390e, 0x61f0, 0xe7bb, 0x484c, 0x2645, 0x0, 0x0);
        gbc.writeMem(0xa3ec, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x390e);
        EXPECT(gbc.pc(), 0xa3ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ec), 0xcb);
        EXPECT(gbc.readMem(0xa3ed), 0xd);
        // CB 0D 02AC
        gbc.setState(0x3ec9, 0x9c74, 0x5880, 0x2025, 0x8302, 0xdc2e, 0x1, 0x1);
        gbc.writeMem(0x3ec9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9c74);
        EXPECT(gbc.pc(), 0x3ecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02AD
        gbc.setState(0x5f30, 0x993c, 0xdca0, 0x3b7b, 0x34d1, 0xd386, 0x1, 0x1);
        gbc.writeMem(0x5f30, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x993c);
        EXPECT(gbc.pc(), 0x5f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02AE
        gbc.setState(0x9264, 0x9d25, 0x6500, 0xd223, 0x990d, 0x383, 0x1, 0x1);
        gbc.writeMem(0x9264, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9d25);
        EXPECT(gbc.pc(), 0x9266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9264), 0xcb);
        EXPECT(gbc.readMem(0x9265), 0xd);
        // CB 0D 02AF
        gbc.setState(0x4ea9, 0xd3da, 0xf180, 0xaf42, 0xed9d, 0x9ef4, 0x1, 0x0);
        gbc.writeMem(0x4ea9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd3da);
        EXPECT(gbc.pc(), 0x4eab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02B0
        gbc.setState(0xc050, 0x87f1, 0xe540, 0xe7a2, 0x6520, 0xc268, 0x0, 0x0);
        gbc.writeMem(0xc050, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x87f1);
        EXPECT(gbc.pc(), 0xc052);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc050), 0xcb);
        EXPECT(gbc.readMem(0xc051), 0xd);
        // CB 0D 02B1
        gbc.setState(0xc3b3, 0x2a21, 0xaf60, 0xb6f4, 0x1bb, 0xdb24, 0x0, 0x0);
        gbc.writeMem(0xc3b3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2a21);
        EXPECT(gbc.pc(), 0xc3b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b3), 0xcb);
        EXPECT(gbc.readMem(0xc3b4), 0xd);
        // CB 0D 02B2
        gbc.setState(0x58e5, 0xda18, 0x4f50, 0xbf72, 0x9553, 0x8f8a, 0x1, 0x1);
        gbc.writeMem(0x58e5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xda18);
        EXPECT(gbc.pc(), 0x58e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02B3
        gbc.setState(0xe6b0, 0x397a, 0xdb10, 0xb2be, 0xab66, 0x737b, 0x1, 0x0);
        gbc.writeMem(0xe6b0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x397a);
        EXPECT(gbc.pc(), 0xe6b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6b0), 0xcb);
        EXPECT(gbc.readMem(0xe6b1), 0xd);
        // CB 0D 02B4
        gbc.setState(0xe9fe, 0x9b77, 0xbb90, 0x94b3, 0x72c6, 0xcd66, 0x1, 0x0);
        gbc.writeMem(0xe9fe, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9b77);
        EXPECT(gbc.pc(), 0xea00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9fe), 0xcb);
        EXPECT(gbc.readMem(0xe9ff), 0xd);
        // CB 0D 02B5
        gbc.setState(0x2cd2, 0x4bc, 0x38a0, 0x21e5, 0xe407, 0x2904, 0x1, 0x1);
        gbc.writeMem(0x2cd2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4bc);
        EXPECT(gbc.pc(), 0x2cd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02B6
        gbc.setState(0x878f, 0xbd43, 0x9e60, 0x6db9, 0xbbc2, 0xe6fd, 0x0, 0x0);
        gbc.writeMem(0x878f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xbd43);
        EXPECT(gbc.pc(), 0x8791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x878f), 0xcb);
        EXPECT(gbc.readMem(0x8790), 0xd);
        // CB 0D 02B7
        gbc.setState(0x5fc5, 0x5857, 0xc460, 0xeff5, 0xb2fb, 0x7920, 0x1, 0x0);
        gbc.writeMem(0x5fc5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5857);
        EXPECT(gbc.pc(), 0x5fc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02B8
        gbc.setState(0x1300, 0xead0, 0x39c0, 0x2314, 0x85b3, 0x20a1, 0x1, 0x0);
        gbc.writeMem(0x1300, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xead0);
        EXPECT(gbc.pc(), 0x1302);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02B9
        gbc.setState(0x3e22, 0xcb2d, 0xc340, 0x3d1a, 0x3e33, 0x21b0, 0x1, 0x0);
        gbc.writeMem(0x3e22, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xcb2d);
        EXPECT(gbc.pc(), 0x3e24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02BA
        gbc.setState(0xc4fb, 0x448f, 0x6d20, 0x928a, 0x5042, 0x5d75, 0x0, 0x0);
        gbc.writeMem(0xc4fb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x448f);
        EXPECT(gbc.pc(), 0xc4fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4fb), 0xcb);
        EXPECT(gbc.readMem(0xc4fc), 0xd);
        // CB 0D 02BB
        gbc.setState(0x6a8a, 0xf62d, 0x3420, 0x5988, 0xbfff, 0xa3cf, 0x0, 0x1);
        gbc.writeMem(0x6a8a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf62d);
        EXPECT(gbc.pc(), 0x6a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02BC
        gbc.setState(0xe477, 0x358a, 0x7f60, 0x5ab6, 0xb2a9, 0xd4fd, 0x1, 0x1);
        gbc.writeMem(0xe477, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x358a);
        EXPECT(gbc.pc(), 0xe479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe477), 0xcb);
        EXPECT(gbc.readMem(0xe478), 0xd);
        // CB 0D 02BD
        gbc.setState(0x2075, 0x306d, 0x3df0, 0x401c, 0xdac3, 0xe84e, 0x0, 0x1);
        gbc.writeMem(0x2075, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x306d);
        EXPECT(gbc.pc(), 0x2077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02BE
        gbc.setState(0x1bcd, 0xd93b, 0x2850, 0x5442, 0x54e7, 0x4d12, 0x1, 0x1);
        gbc.writeMem(0x1bcd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd93b);
        EXPECT(gbc.pc(), 0x1bcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02BF
        gbc.setState(0xbc45, 0x29e4, 0x5850, 0xc37b, 0x4968, 0xd4ee, 0x0, 0x1);
        gbc.writeMem(0xbc45, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x29e4);
        EXPECT(gbc.pc(), 0xbc47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc45), 0xcb);
        EXPECT(gbc.readMem(0xbc46), 0xd);
        // CB 0D 02C0
        gbc.setState(0x218a, 0xb465, 0x46a0, 0xae63, 0x4969, 0x35de, 0x0, 0x0);
        gbc.writeMem(0x218a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb465);
        EXPECT(gbc.pc(), 0x218c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02C1
        gbc.setState(0xcd5d, 0xf03c, 0x3a10, 0x5cca, 0xf568, 0x2bb2, 0x0, 0x0);
        gbc.writeMem(0xcd5d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf03c);
        EXPECT(gbc.pc(), 0xcd5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd5d), 0xcb);
        EXPECT(gbc.readMem(0xcd5e), 0xd);
        // CB 0D 02C2
        gbc.setState(0xc9ba, 0x8036, 0xc450, 0xcb87, 0x7404, 0x3485, 0x0, 0x1);
        gbc.writeMem(0xc9ba, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8036);
        EXPECT(gbc.pc(), 0xc9bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9ba), 0xcb);
        EXPECT(gbc.readMem(0xc9bb), 0xd);
        // CB 0D 02C3
        gbc.setState(0xc5d3, 0xad10, 0x5a40, 0x8765, 0xfc4a, 0x8c6b, 0x0, 0x1);
        gbc.writeMem(0xc5d3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xad10);
        EXPECT(gbc.pc(), 0xc5d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5d3), 0xcb);
        EXPECT(gbc.readMem(0xc5d4), 0xd);
        // CB 0D 02C4
        gbc.setState(0x33d6, 0xd7cb, 0x8920, 0x1228, 0xc1c, 0x69f7, 0x1, 0x1);
        gbc.writeMem(0x33d6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xd7cb);
        EXPECT(gbc.pc(), 0x33d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02C5
        gbc.setState(0x8b74, 0x862b, 0x7760, 0xf76b, 0x3b88, 0xccf7, 0x0, 0x1);
        gbc.writeMem(0x8b74, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x862b);
        EXPECT(gbc.pc(), 0x8b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b74), 0xcb);
        EXPECT(gbc.readMem(0x8b75), 0xd);
        // CB 0D 02C6
        gbc.setState(0x51d9, 0x3071, 0xee50, 0x4b11, 0x95bf, 0xb25e, 0x1, 0x1);
        gbc.writeMem(0x51d9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3071);
        EXPECT(gbc.pc(), 0x51db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02C7
        gbc.setState(0xc976, 0xd7cd, 0x1750, 0xe577, 0x4d38, 0x816d, 0x1, 0x1);
        gbc.writeMem(0xc976, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd7cd);
        EXPECT(gbc.pc(), 0xc978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc976), 0xcb);
        EXPECT(gbc.readMem(0xc977), 0xd);
        // CB 0D 02C8
        gbc.setState(0x9d45, 0xdd88, 0xf970, 0xc202, 0x87d1, 0xc5f5, 0x1, 0x0);
        gbc.writeMem(0x9d45, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdd88);
        EXPECT(gbc.pc(), 0x9d47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d45), 0xcb);
        EXPECT(gbc.readMem(0x9d46), 0xd);
        // CB 0D 02CA
        gbc.setState(0x3179, 0x536e, 0x4f70, 0x70e7, 0x6ab1, 0x7d90, 0x1, 0x1);
        gbc.writeMem(0x3179, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x536e);
        EXPECT(gbc.pc(), 0x317b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02CB
        gbc.setState(0xb2a3, 0x3bf, 0xe820, 0x9d48, 0xc78a, 0xf06e, 0x1, 0x1);
        gbc.writeMem(0xb2a3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3bf);
        EXPECT(gbc.pc(), 0xb2a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a3), 0xcb);
        EXPECT(gbc.readMem(0xb2a4), 0xd);
        // CB 0D 02CC
        gbc.setState(0x219f, 0xefa7, 0xd670, 0xd2c1, 0xfa9b, 0x3fee, 0x1, 0x1);
        gbc.writeMem(0x219f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xefa7);
        EXPECT(gbc.pc(), 0x21a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02CE
        gbc.setState(0xe35, 0x1b37, 0x7a20, 0xc976, 0x43c1, 0x29b, 0x1, 0x1);
        gbc.writeMem(0xe35, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1b37);
        EXPECT(gbc.pc(), 0xe37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02CF
        gbc.setState(0x27c1, 0xf76a, 0x8e70, 0x30bf, 0x4a79, 0x3f11, 0x0, 0x1);
        gbc.writeMem(0x27c1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf76a);
        EXPECT(gbc.pc(), 0x27c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02D0
        gbc.setState(0xa0bc, 0x3089, 0x56d0, 0x89df, 0xcf44, 0x2434, 0x1, 0x1);
        gbc.writeMem(0xa0bc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3089);
        EXPECT(gbc.pc(), 0xa0be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0bc), 0xcb);
        EXPECT(gbc.readMem(0xa0bd), 0xd);
        // CB 0D 02D1
        gbc.setState(0x4797, 0x6a58, 0x560, 0xf72f, 0xa95, 0xd86e, 0x0, 0x1);
        gbc.writeMem(0x4797, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6a58);
        EXPECT(gbc.pc(), 0x4799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02D2
        gbc.setState(0x4764, 0x9980, 0xebf0, 0xebfb, 0x6c67, 0xfd73, 0x1, 0x0);
        gbc.writeMem(0x4764, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9980);
        EXPECT(gbc.pc(), 0x4766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02D4
        gbc.setState(0x23e9, 0x33c, 0xbcc0, 0x6a0, 0x7ff0, 0x20cd, 0x1, 0x0);
        gbc.writeMem(0x23e9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x33c);
        EXPECT(gbc.pc(), 0x23eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02D5
        gbc.setState(0xb248, 0x9ce0, 0x1330, 0x8af1, 0x8985, 0x2f45, 0x0, 0x1);
        gbc.writeMem(0xb248, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9ce0);
        EXPECT(gbc.pc(), 0xb24a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb248), 0xcb);
        EXPECT(gbc.readMem(0xb249), 0xd);
        // CB 0D 02D6
        gbc.setState(0x70eb, 0xde41, 0xe950, 0xbed1, 0xc1fd, 0xeb84, 0x1, 0x1);
        gbc.writeMem(0x70eb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xde41);
        EXPECT(gbc.pc(), 0x70ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02D7
        gbc.setState(0x2053, 0x9f1a, 0x41b0, 0xc55f, 0xa63, 0x99c, 0x1, 0x1);
        gbc.writeMem(0x2053, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9f1a);
        EXPECT(gbc.pc(), 0x2055);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02D8
        gbc.setState(0x7661, 0x9516, 0x8a20, 0x51ea, 0xe396, 0xb6d9, 0x0, 0x1);
        gbc.writeMem(0x7661, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9516);
        EXPECT(gbc.pc(), 0x7663);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02DA
        gbc.setState(0x5398, 0x169f, 0x14c0, 0x73b8, 0xe76, 0xe10, 0x0, 0x0);
        gbc.writeMem(0x5398, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x169f);
        EXPECT(gbc.pc(), 0x539a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02DB
        gbc.setState(0xa431, 0xff89, 0x90, 0x19ef, 0xa24a, 0xe0dc, 0x0, 0x0);
        gbc.writeMem(0xa431, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xff89);
        EXPECT(gbc.pc(), 0xa433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa431), 0xcb);
        EXPECT(gbc.readMem(0xa432), 0xd);
        // CB 0D 02DC
        gbc.setState(0xb15d, 0x9483, 0x8220, 0xee41, 0xdec8, 0x858, 0x1, 0x1);
        gbc.writeMem(0xb15d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9483);
        EXPECT(gbc.pc(), 0xb15f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb15d), 0xcb);
        EXPECT(gbc.readMem(0xb15e), 0xd);
        // CB 0D 02DD
        gbc.setState(0x72a2, 0xdef5, 0xf210, 0xe15a, 0xe9ba, 0x270c, 0x1, 0x1);
        gbc.writeMem(0x72a2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xdef5);
        EXPECT(gbc.pc(), 0x72a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02DE
        gbc.setState(0x519a, 0x17c0, 0xb5d0, 0xd8c7, 0x1680, 0x5968, 0x1, 0x1);
        gbc.writeMem(0x519a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x17c0);
        EXPECT(gbc.pc(), 0x519c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02DF
        gbc.setState(0xce7d, 0x4f8d, 0x2880, 0xa972, 0x47c4, 0xe37f, 0x1, 0x0);
        gbc.writeMem(0xce7d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4f8d);
        EXPECT(gbc.pc(), 0xce7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce7d), 0xcb);
        EXPECT(gbc.readMem(0xce7e), 0xd);
        // CB 0D 02E0
        gbc.setState(0xaa8f, 0x6350, 0xf850, 0x3d08, 0x4ba6, 0x49b, 0x1, 0x0);
        gbc.writeMem(0xaa8f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6350);
        EXPECT(gbc.pc(), 0xaa91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa8f), 0xcb);
        EXPECT(gbc.readMem(0xaa90), 0xd);
        // CB 0D 02E1
        gbc.setState(0x2242, 0x583b, 0x5130, 0x47ce, 0x528, 0xa7f9, 0x1, 0x0);
        gbc.writeMem(0x2242, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x583b);
        EXPECT(gbc.pc(), 0x2244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02E2
        gbc.setState(0x3d48, 0xd564, 0x2100, 0xd994, 0xe363, 0x5eff, 0x0, 0x0);
        gbc.writeMem(0x3d48, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd564);
        EXPECT(gbc.pc(), 0x3d4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02E3
        gbc.setState(0x8c3e, 0x3f41, 0x8510, 0x6897, 0x9547, 0x7e72, 0x1, 0x0);
        gbc.writeMem(0x8c3e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3f41);
        EXPECT(gbc.pc(), 0x8c40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3e), 0xcb);
        EXPECT(gbc.readMem(0x8c3f), 0xd);
        // CB 0D 02E4
        gbc.setState(0x5c, 0xafe3, 0x1a20, 0x8d8c, 0x1c01, 0x98d9, 0x0, 0x0);
        gbc.writeMem(0x5c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xafe3);
        EXPECT(gbc.pc(), 0x5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02E5
        gbc.setState(0x88cf, 0xee65, 0x1c20, 0x1858, 0xefd3, 0xe82e, 0x1, 0x1);
        gbc.writeMem(0x88cf, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xee65);
        EXPECT(gbc.pc(), 0x88d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88cf), 0xcb);
        EXPECT(gbc.readMem(0x88d0), 0xd);
        // CB 0D 02E6
        gbc.setState(0xdff7, 0xb07a, 0x1710, 0xcbaa, 0x5d38, 0xf8a4, 0x0, 0x1);
        gbc.writeMem(0xdff7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb07a);
        EXPECT(gbc.pc(), 0xdff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdff7), 0xcb);
        EXPECT(gbc.readMem(0xdff8), 0xd);
        // CB 0D 02E7
        gbc.setState(0x8b2f, 0x2d63, 0x9c70, 0xf7f0, 0x76e6, 0xd991, 0x1, 0x1);
        gbc.writeMem(0x8b2f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2d63);
        EXPECT(gbc.pc(), 0x8b31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b2f), 0xcb);
        EXPECT(gbc.readMem(0x8b30), 0xd);
        // CB 0D 02E9
        gbc.setState(0x8c8b, 0x836e, 0xdf80, 0xd0de, 0x43b8, 0x7d91, 0x0, 0x0);
        gbc.writeMem(0x8c8b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x836e);
        EXPECT(gbc.pc(), 0x8c8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c8b), 0xcb);
        EXPECT(gbc.readMem(0x8c8c), 0xd);
        // CB 0D 02EA
        gbc.setState(0x7ab8, 0x7695, 0x9b10, 0x4f1b, 0x68f1, 0x90b4, 0x0, 0x1);
        gbc.writeMem(0x7ab8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7695);
        EXPECT(gbc.pc(), 0x7aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02EB
        gbc.setState(0x7da3, 0xf4d8, 0x960, 0x6f20, 0xc072, 0x81d9, 0x0, 0x0);
        gbc.writeMem(0x7da3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf4d8);
        EXPECT(gbc.pc(), 0x7da5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02EC
        gbc.setState(0xae0, 0xfb89, 0x68b0, 0x49fb, 0x278b, 0xe5e8, 0x0, 0x1);
        gbc.writeMem(0xae0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfb89);
        EXPECT(gbc.pc(), 0xae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02ED
        gbc.setState(0x1c3e, 0x62a2, 0xcbf0, 0xcc3f, 0xaed, 0x17ca, 0x0, 0x0);
        gbc.writeMem(0x1c3e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x62a2);
        EXPECT(gbc.pc(), 0x1c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02EE
        gbc.setState(0xbe64, 0x497c, 0xf130, 0xdaaf, 0xa4e7, 0x643c, 0x1, 0x1);
        gbc.writeMem(0xbe64, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x497c);
        EXPECT(gbc.pc(), 0xbe66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe64), 0xcb);
        EXPECT(gbc.readMem(0xbe65), 0xd);
        // CB 0D 02EF
        gbc.setState(0x6b1d, 0x3458, 0xbb60, 0x3833, 0x40ba, 0xb179, 0x1, 0x1);
        gbc.writeMem(0x6b1d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3458);
        EXPECT(gbc.pc(), 0x6b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02F0
        gbc.setState(0x27de, 0xd82c, 0x2ba0, 0x99c2, 0xd3d8, 0x6370, 0x1, 0x0);
        gbc.writeMem(0x27de, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd82c);
        EXPECT(gbc.pc(), 0x27e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02F1
        gbc.setState(0x6327, 0xa256, 0x4ca0, 0xe381, 0xad43, 0xb51, 0x0, 0x1);
        gbc.writeMem(0x6327, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa256);
        EXPECT(gbc.pc(), 0x6329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02F2
        gbc.setState(0xa2db, 0xf70b, 0x85c0, 0xffff, 0xd469, 0xb481, 0x1, 0x0);
        gbc.writeMem(0xa2db, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf70b);
        EXPECT(gbc.pc(), 0xa2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2db), 0xcb);
        EXPECT(gbc.readMem(0xa2dc), 0xd);
        // CB 0D 02F3
        gbc.setState(0x7b2f, 0x415b, 0x3c40, 0x659a, 0xe61c, 0x6aff, 0x0, 0x1);
        gbc.writeMem(0x7b2f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x415b);
        EXPECT(gbc.pc(), 0x7b31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02F4
        gbc.setState(0xc19, 0x9d6f, 0xb640, 0xa11c, 0xd80e, 0x5474, 0x1, 0x1);
        gbc.writeMem(0xc19, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9d6f);
        EXPECT(gbc.pc(), 0xc1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02F5
        gbc.setState(0x7915, 0x83bf, 0x1f80, 0xfee8, 0x43e9, 0xcfc5, 0x1, 0x0);
        gbc.writeMem(0x7915, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x83bf);
        EXPECT(gbc.pc(), 0x7917);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02F6
        gbc.setState(0xcd6, 0x1cca, 0x1500, 0xf971, 0x51f3, 0xd598, 0x0, 0x0);
        gbc.writeMem(0xcd6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1cca);
        EXPECT(gbc.pc(), 0xcd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02F7
        gbc.setState(0x103b, 0x4eeb, 0x9e70, 0x5e11, 0x349f, 0x3043, 0x0, 0x1);
        gbc.writeMem(0x103b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4eeb);
        EXPECT(gbc.pc(), 0x103d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02F8
        gbc.setState(0x618e, 0xca09, 0x3c80, 0x9e39, 0x212e, 0x9ad3, 0x1, 0x0);
        gbc.writeMem(0x618e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xca09);
        EXPECT(gbc.pc(), 0x6190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02F9
        gbc.setState(0x3512, 0x49b7, 0x5e00, 0x19d6, 0x59c3, 0x697e, 0x1, 0x1);
        gbc.writeMem(0x3512, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x49b7);
        EXPECT(gbc.pc(), 0x3514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02FA
        gbc.setState(0x4f8c, 0x119a, 0x2370, 0xc9f, 0xbc3e, 0xdda, 0x0, 0x0);
        gbc.writeMem(0x4f8c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x119a);
        EXPECT(gbc.pc(), 0x4f8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 02FB
        gbc.setState(0xae85, 0x1f78, 0xfd10, 0x3cf8, 0xca6d, 0x66cf, 0x1, 0x0);
        gbc.writeMem(0xae85, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1f78);
        EXPECT(gbc.pc(), 0xae87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae85), 0xcb);
        EXPECT(gbc.readMem(0xae86), 0xd);
        // CB 0D 02FC
        gbc.setState(0xab5f, 0xd9a0, 0xbd80, 0x22de, 0xfa1c, 0x475e, 0x0, 0x0);
        gbc.writeMem(0xab5f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd9a0);
        EXPECT(gbc.pc(), 0xab61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab5f), 0xcb);
        EXPECT(gbc.readMem(0xab60), 0xd);
        // CB 0D 02FD
        gbc.setState(0x5821, 0x5a20, 0xdf20, 0xf981, 0x830f, 0x204b, 0x1, 0x1);
        gbc.writeMem(0x5821, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5a20);
        EXPECT(gbc.pc(), 0x5823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 02FE
        gbc.setState(0xb914, 0x9eff, 0x890, 0x8c59, 0x571, 0x6842, 0x0, 0x1);
        gbc.writeMem(0xb914, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9eff);
        EXPECT(gbc.pc(), 0xb916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb914), 0xcb);
        EXPECT(gbc.readMem(0xb915), 0xd);
        // CB 0D 02FF
        gbc.setState(0xd66d, 0xdacc, 0xafc0, 0x3705, 0xf573, 0xc095, 0x0, 0x0);
        gbc.writeMem(0xd66d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xdacc);
        EXPECT(gbc.pc(), 0xd66f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd66d), 0xcb);
        EXPECT(gbc.readMem(0xd66e), 0xd);
        // CB 0D 0300
        gbc.setState(0xe77b, 0x1f0c, 0x6140, 0x8a51, 0xaef5, 0x283c, 0x0, 0x1);
        gbc.writeMem(0xe77b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1f0c);
        EXPECT(gbc.pc(), 0xe77d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe77b), 0xcb);
        EXPECT(gbc.readMem(0xe77c), 0xd);
        // CB 0D 0301
        gbc.setState(0x7b61, 0x4eb6, 0xbb80, 0x1eda, 0xb8ea, 0x2c16, 0x1, 0x0);
        gbc.writeMem(0x7b61, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4eb6);
        EXPECT(gbc.pc(), 0x7b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0302
        gbc.setState(0x29c, 0xecb0, 0x1bd0, 0xc0c0, 0x59e8, 0x1c43, 0x1, 0x0);
        gbc.writeMem(0x29c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xecb0);
        EXPECT(gbc.pc(), 0x29e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0304
        gbc.setState(0x5a8b, 0x7bb6, 0x4eb0, 0x48f5, 0x980a, 0x7843, 0x1, 0x1);
        gbc.writeMem(0x5a8b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7bb6);
        EXPECT(gbc.pc(), 0x5a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0305
        gbc.setState(0x6519, 0xdf9f, 0x2240, 0xcbdb, 0xd9c5, 0xaf78, 0x0, 0x1);
        gbc.writeMem(0x6519, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xdf9f);
        EXPECT(gbc.pc(), 0x651b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0306
        gbc.setState(0x4b62, 0x5877, 0x1060, 0x87c9, 0xded, 0x8e35, 0x1, 0x1);
        gbc.writeMem(0x4b62, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5877);
        EXPECT(gbc.pc(), 0x4b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0307
        gbc.setState(0xeb45, 0x2720, 0x9180, 0x7158, 0xa70, 0x1fde, 0x0, 0x1);
        gbc.writeMem(0xeb45, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2720);
        EXPECT(gbc.pc(), 0xeb47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb45), 0xcb);
        EXPECT(gbc.readMem(0xeb46), 0xd);
        // CB 0D 0308
        gbc.setState(0x8032, 0xf7bd, 0x7690, 0x415d, 0x15b6, 0x44d7, 0x1, 0x1);
        gbc.writeMem(0x8032, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf7bd);
        EXPECT(gbc.pc(), 0x8034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8032), 0xcb);
        EXPECT(gbc.readMem(0x8033), 0xd);
        // CB 0D 0309
        gbc.setState(0x7f20, 0xecdf, 0x3490, 0xd20d, 0x85ce, 0x452a, 0x1, 0x1);
        gbc.writeMem(0x7f20, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xecdf);
        EXPECT(gbc.pc(), 0x7f22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 030A
        gbc.setState(0x79c2, 0x9187, 0xb130, 0xf128, 0xa860, 0x722, 0x0, 0x0);
        gbc.writeMem(0x79c2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9187);
        EXPECT(gbc.pc(), 0x79c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 030B
        gbc.setState(0x2962, 0xced3, 0x3530, 0xf520, 0xd02b, 0xa1c8, 0x1, 0x1);
        gbc.writeMem(0x2962, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xced3);
        EXPECT(gbc.pc(), 0x2964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 030C
        gbc.setState(0xb7dd, 0xe092, 0x6650, 0x435a, 0x6642, 0xf7f5, 0x1, 0x0);
        gbc.writeMem(0xb7dd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe092);
        EXPECT(gbc.pc(), 0xb7df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7dd), 0xcb);
        EXPECT(gbc.readMem(0xb7de), 0xd);
        // CB 0D 030D
        gbc.setState(0x6013, 0x8f87, 0x2c30, 0xb4c1, 0x1e38, 0xc32f, 0x0, 0x0);
        gbc.writeMem(0x6013, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x8f87);
        EXPECT(gbc.pc(), 0x6015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 030E
        gbc.setState(0x5bd4, 0xbbaa, 0x63f0, 0x1ce9, 0xc2db, 0x552, 0x0, 0x1);
        gbc.writeMem(0x5bd4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbbaa);
        EXPECT(gbc.pc(), 0x5bd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 030F
        gbc.setState(0x11b1, 0xc643, 0x7840, 0x1acf, 0x760d, 0x49b6, 0x1, 0x1);
        gbc.writeMem(0x11b1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc643);
        EXPECT(gbc.pc(), 0x11b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0310
        gbc.setState(0x2c5f, 0x110d, 0x1c0, 0x99e3, 0x966, 0x85ce, 0x1, 0x0);
        gbc.writeMem(0x2c5f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x110d);
        EXPECT(gbc.pc(), 0x2c61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0311
        gbc.setState(0xcfd9, 0x7719, 0xc6b0, 0xa7ba, 0x83ee, 0x6a4, 0x1, 0x0);
        gbc.writeMem(0xcfd9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7719);
        EXPECT(gbc.pc(), 0xcfdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd9), 0xcb);
        EXPECT(gbc.readMem(0xcfda), 0xd);
        // CB 0D 0312
        gbc.setState(0x66af, 0x86d3, 0x8710, 0x2fb8, 0x6c33, 0xdc1c, 0x1, 0x1);
        gbc.writeMem(0x66af, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x86d3);
        EXPECT(gbc.pc(), 0x66b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0313
        gbc.setState(0x6a8d, 0x7cc, 0xd0b0, 0x8d5e, 0xed5d, 0xd168, 0x0, 0x0);
        gbc.writeMem(0x6a8d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7cc);
        EXPECT(gbc.pc(), 0x6a8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0314
        gbc.setState(0x81e1, 0xcfd0, 0xd650, 0xfaee, 0x9ca8, 0x30d8, 0x0, 0x1);
        gbc.writeMem(0x81e1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcfd0);
        EXPECT(gbc.pc(), 0x81e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e1), 0xcb);
        EXPECT(gbc.readMem(0x81e2), 0xd);
        // CB 0D 0315
        gbc.setState(0x815a, 0x3ff3, 0x5b20, 0xe5fe, 0x4875, 0xe4dd, 0x0, 0x1);
        gbc.writeMem(0x815a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3ff3);
        EXPECT(gbc.pc(), 0x815c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x815a), 0xcb);
        EXPECT(gbc.readMem(0x815b), 0xd);
        // CB 0D 0316
        gbc.setState(0xde38, 0x7776, 0x3530, 0x9b34, 0x1ae1, 0x2592, 0x0, 0x0);
        gbc.writeMem(0xde38, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7776);
        EXPECT(gbc.pc(), 0xde3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde38), 0xcb);
        EXPECT(gbc.readMem(0xde39), 0xd);
        // CB 0D 0317
        gbc.setState(0x529e, 0x239e, 0x76d0, 0xf823, 0xd76c, 0xca6f, 0x0, 0x0);
        gbc.writeMem(0x529e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x239e);
        EXPECT(gbc.pc(), 0x52a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0318
        gbc.setState(0x43a8, 0x4921, 0xa070, 0x715e, 0x108f, 0xb8ff, 0x1, 0x1);
        gbc.writeMem(0x43a8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4921);
        EXPECT(gbc.pc(), 0x43aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0319
        gbc.setState(0x6399, 0xd557, 0x3800, 0x6105, 0x1082, 0x483e, 0x1, 0x0);
        gbc.writeMem(0x6399, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xd557);
        EXPECT(gbc.pc(), 0x639b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 031A
        gbc.setState(0xdd52, 0x6d59, 0x2360, 0x6200, 0xc5de, 0xe8b, 0x1, 0x0);
        gbc.writeMem(0xdd52, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6d59);
        EXPECT(gbc.pc(), 0xdd54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd52), 0xcb);
        EXPECT(gbc.readMem(0xdd53), 0xd);
        // CB 0D 031B
        gbc.setState(0xb91d, 0xcb1e, 0xd670, 0xad33, 0x7414, 0x3222, 0x0, 0x1);
        gbc.writeMem(0xb91d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xcb1e);
        EXPECT(gbc.pc(), 0xb91f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb91d), 0xcb);
        EXPECT(gbc.readMem(0xb91e), 0xd);
        // CB 0D 031C
        gbc.setState(0xb59e, 0x4189, 0x11a0, 0xbf0f, 0x3e32, 0x13b2, 0x0, 0x1);
        gbc.writeMem(0xb59e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4189);
        EXPECT(gbc.pc(), 0xb5a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb59e), 0xcb);
        EXPECT(gbc.readMem(0xb59f), 0xd);
        // CB 0D 031D
        gbc.setState(0xccb8, 0x1adb, 0x5380, 0xf9f2, 0xe606, 0xa31b, 0x0, 0x0);
        gbc.writeMem(0xccb8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1adb);
        EXPECT(gbc.pc(), 0xccba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb8), 0xcb);
        EXPECT(gbc.readMem(0xccb9), 0xd);
        // CB 0D 031E
        gbc.setState(0x6553, 0x606f, 0x90f0, 0x813, 0x7f0e, 0xb206, 0x1, 0x1);
        gbc.writeMem(0x6553, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x606f);
        EXPECT(gbc.pc(), 0x6555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 031F
        gbc.setState(0x1e2e, 0x573a, 0xd470, 0x6dd5, 0x7419, 0xa47a, 0x0, 0x0);
        gbc.writeMem(0x1e2e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x573a);
        EXPECT(gbc.pc(), 0x1e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0320
        gbc.setState(0xb418, 0x640f, 0xbe40, 0xbb0f, 0xe21e, 0x1770, 0x0, 0x0);
        gbc.writeMem(0xb418, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x640f);
        EXPECT(gbc.pc(), 0xb41a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb418), 0xcb);
        EXPECT(gbc.readMem(0xb419), 0xd);
        // CB 0D 0321
        gbc.setState(0x4354, 0xf613, 0x2120, 0x5042, 0xab1b, 0x2061, 0x0, 0x0);
        gbc.writeMem(0x4354, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf613);
        EXPECT(gbc.pc(), 0x4356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0322
        gbc.setState(0x3e22, 0xd4a6, 0x1de0, 0x98fd, 0x1869, 0x1dcf, 0x1, 0x0);
        gbc.writeMem(0x3e22, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd4a6);
        EXPECT(gbc.pc(), 0x3e24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0323
        gbc.setState(0xd938, 0xfea6, 0x6760, 0x5252, 0xe59c, 0xed77, 0x0, 0x1);
        gbc.writeMem(0xd938, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xfea6);
        EXPECT(gbc.pc(), 0xd93a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd938), 0xcb);
        EXPECT(gbc.readMem(0xd939), 0xd);
        // CB 0D 0324
        gbc.setState(0x276a, 0x5aee, 0x28c0, 0x70f6, 0xc9e5, 0xbf17, 0x1, 0x1);
        gbc.writeMem(0x276a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5aee);
        EXPECT(gbc.pc(), 0x276c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0325
        gbc.setState(0x3180, 0x5e48, 0x2440, 0xd5bd, 0xe205, 0xf26a, 0x1, 0x0);
        gbc.writeMem(0x3180, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5e48);
        EXPECT(gbc.pc(), 0x3182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0326
        gbc.setState(0x154, 0x86af, 0x6100, 0xd136, 0xabaa, 0x1738, 0x1, 0x0);
        gbc.writeMem(0x154, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x86af);
        EXPECT(gbc.pc(), 0x156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0327
        gbc.setState(0x3792, 0xc2fa, 0x7390, 0xfe34, 0x747a, 0x868d, 0x1, 0x1);
        gbc.writeMem(0x3792, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc2fa);
        EXPECT(gbc.pc(), 0x3794);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0328
        gbc.setState(0x8a8f, 0xc29a, 0x4a20, 0x18e, 0x618a, 0x57ef, 0x1, 0x0);
        gbc.writeMem(0x8a8f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc29a);
        EXPECT(gbc.pc(), 0x8a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a8f), 0xcb);
        EXPECT(gbc.readMem(0x8a90), 0xd);
        // CB 0D 0329
        gbc.setState(0x35e, 0x4ca0, 0xd780, 0xab0a, 0x4550, 0xcb03, 0x0, 0x0);
        gbc.writeMem(0x35e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x4ca0);
        EXPECT(gbc.pc(), 0x360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 032A
        gbc.setState(0xe938, 0xdb57, 0x63e0, 0x8af2, 0xa275, 0xa6a, 0x0, 0x1);
        gbc.writeMem(0xe938, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xdb57);
        EXPECT(gbc.pc(), 0xe93a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe938), 0xcb);
        EXPECT(gbc.readMem(0xe939), 0xd);
        // CB 0D 032B
        gbc.setState(0xbdd8, 0xcef9, 0x7950, 0x6c6b, 0x2f30, 0xaf1d, 0x0, 0x1);
        gbc.writeMem(0xbdd8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xcef9);
        EXPECT(gbc.pc(), 0xbdda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdd8), 0xcb);
        EXPECT(gbc.readMem(0xbdd9), 0xd);
        // CB 0D 032C
        gbc.setState(0x4883, 0xfcfc, 0x8190, 0x107b, 0xe2eb, 0xa108, 0x0, 0x0);
        gbc.writeMem(0x4883, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfcfc);
        EXPECT(gbc.pc(), 0x4885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 032D
        gbc.setState(0xce05, 0x2dc7, 0xf5e0, 0xb7e8, 0x6a71, 0x1b02, 0x1, 0x0);
        gbc.writeMem(0xce05, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2dc7);
        EXPECT(gbc.pc(), 0xce07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce05), 0xcb);
        EXPECT(gbc.readMem(0xce06), 0xd);
        // CB 0D 032E
        gbc.setState(0x13b9, 0x31a5, 0xb950, 0x4a68, 0x7bae, 0x4c73, 0x0, 0x0);
        gbc.writeMem(0x13b9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x31a5);
        EXPECT(gbc.pc(), 0x13bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 032F
        gbc.setState(0xaec4, 0xa95b, 0x2940, 0x731c, 0x7c37, 0x17bd, 0x0, 0x0);
        gbc.writeMem(0xaec4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xa95b);
        EXPECT(gbc.pc(), 0xaec6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec4), 0xcb);
        EXPECT(gbc.readMem(0xaec5), 0xd);
        // CB 0D 0330
        gbc.setState(0x3c44, 0x4e3d, 0x2110, 0xb538, 0x9bde, 0xfdc9, 0x1, 0x0);
        gbc.writeMem(0x3c44, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4e3d);
        EXPECT(gbc.pc(), 0x3c46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0331
        gbc.setState(0xa24a, 0x49ea, 0xd430, 0x7214, 0x3373, 0xa3a3, 0x0, 0x0);
        gbc.writeMem(0xa24a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x49ea);
        EXPECT(gbc.pc(), 0xa24c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24a), 0xcb);
        EXPECT(gbc.readMem(0xa24b), 0xd);
        // CB 0D 0332
        gbc.setState(0x12b8, 0xa7ca, 0xdb50, 0x4714, 0xd126, 0x8822, 0x1, 0x1);
        gbc.writeMem(0x12b8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa7ca);
        EXPECT(gbc.pc(), 0x12ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0333
        gbc.setState(0x67d0, 0xcde, 0xd2b0, 0x7e5c, 0x516c, 0x2af9, 0x1, 0x1);
        gbc.writeMem(0x67d0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xcde);
        EXPECT(gbc.pc(), 0x67d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0334
        gbc.setState(0xe6bb, 0x98f5, 0x2010, 0xc019, 0xec0, 0x3a46, 0x1, 0x1);
        gbc.writeMem(0xe6bb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x98f5);
        EXPECT(gbc.pc(), 0xe6bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6bb), 0xcb);
        EXPECT(gbc.readMem(0xe6bc), 0xd);
        // CB 0D 0335
        gbc.setState(0x6e7a, 0x11d9, 0x88b0, 0xf02f, 0xd3ee, 0xcb9e, 0x0, 0x1);
        gbc.writeMem(0x6e7a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x11d9);
        EXPECT(gbc.pc(), 0x6e7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0336
        gbc.setState(0x8184, 0x65fe, 0x96d0, 0x9a69, 0xfe5c, 0x65c0, 0x0, 0x0);
        gbc.writeMem(0x8184, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x65fe);
        EXPECT(gbc.pc(), 0x8186);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8184), 0xcb);
        EXPECT(gbc.readMem(0x8185), 0xd);
        // CB 0D 0337
        gbc.setState(0x2ce0, 0x8170, 0x2f60, 0xa3ce, 0x7e4b, 0xb830, 0x0, 0x0);
        gbc.writeMem(0x2ce0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8170);
        EXPECT(gbc.pc(), 0x2ce2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0338
        gbc.setState(0x5814, 0xec3c, 0xc170, 0xa7b6, 0x175d, 0x7226, 0x0, 0x1);
        gbc.writeMem(0x5814, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xec3c);
        EXPECT(gbc.pc(), 0x5816);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0339
        gbc.setState(0x9357, 0xfe6b, 0xc330, 0xb01, 0x5ae1, 0xadd0, 0x1, 0x0);
        gbc.writeMem(0x9357, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xfe6b);
        EXPECT(gbc.pc(), 0x9359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9357), 0xcb);
        EXPECT(gbc.readMem(0x9358), 0xd);
        // CB 0D 033A
        gbc.setState(0x8325, 0x1753, 0x7ab0, 0x28d9, 0xd45b, 0xe3ef, 0x0, 0x0);
        gbc.writeMem(0x8325, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1753);
        EXPECT(gbc.pc(), 0x8327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8325), 0xcb);
        EXPECT(gbc.readMem(0x8326), 0xd);
        // CB 0D 033C
        gbc.setState(0x338f, 0xecac, 0x5e60, 0x75bb, 0x6311, 0x3459, 0x0, 0x0);
        gbc.writeMem(0x338f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xecac);
        EXPECT(gbc.pc(), 0x3391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 033D
        gbc.setState(0x72a9, 0x9de2, 0xbcc0, 0xa4de, 0x10c3, 0x59e2, 0x1, 0x0);
        gbc.writeMem(0x72a9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9de2);
        EXPECT(gbc.pc(), 0x72ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 033E
        gbc.setState(0xeed8, 0x21d2, 0xb6f0, 0x6779, 0x205b, 0x6108, 0x0, 0x1);
        gbc.writeMem(0xeed8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x21d2);
        EXPECT(gbc.pc(), 0xeeda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeed8), 0xcb);
        EXPECT(gbc.readMem(0xeed9), 0xd);
        // CB 0D 033F
        gbc.setState(0xe134, 0x1d04, 0x4810, 0x8152, 0xe927, 0x52aa, 0x1, 0x0);
        gbc.writeMem(0xe134, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1d04);
        EXPECT(gbc.pc(), 0xe136);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe134), 0xcb);
        EXPECT(gbc.readMem(0xe135), 0xd);
        // CB 0D 0340
        gbc.setState(0xb312, 0x4ee9, 0xcae0, 0x111e, 0xa7ee, 0xc5bb, 0x1, 0x1);
        gbc.writeMem(0xb312, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4ee9);
        EXPECT(gbc.pc(), 0xb314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb312), 0xcb);
        EXPECT(gbc.readMem(0xb313), 0xd);
        // CB 0D 0341
        gbc.setState(0x5d0a, 0x7609, 0x9cf0, 0x2644, 0x2726, 0x8bd5, 0x0, 0x0);
        gbc.writeMem(0x5d0a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7609);
        EXPECT(gbc.pc(), 0x5d0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0342
        gbc.setState(0x69db, 0x18fa, 0xe1a0, 0xedf4, 0x885, 0xd808, 0x0, 0x1);
        gbc.writeMem(0x69db, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x18fa);
        EXPECT(gbc.pc(), 0x69dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0343
        gbc.setState(0xc7f6, 0x4afc, 0x1e10, 0x7380, 0x51e8, 0xbdee, 0x1, 0x1);
        gbc.writeMem(0xc7f6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4afc);
        EXPECT(gbc.pc(), 0xc7f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7f6), 0xcb);
        EXPECT(gbc.readMem(0xc7f7), 0xd);
        // CB 0D 0344
        gbc.setState(0x2f, 0x9a27, 0xbc80, 0x99b, 0xcc01, 0x47ee, 0x0, 0x0);
        gbc.writeMem(0x2f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9a27);
        EXPECT(gbc.pc(), 0x31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0345
        gbc.setState(0x23c7, 0xb54, 0x2860, 0x36d5, 0xa14f, 0x2642, 0x1, 0x0);
        gbc.writeMem(0x23c7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb54);
        EXPECT(gbc.pc(), 0x23c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0346
        gbc.setState(0x11f9, 0x6da8, 0x100, 0x856e, 0x2436, 0x9aad, 0x1, 0x0);
        gbc.writeMem(0x11f9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6da8);
        EXPECT(gbc.pc(), 0x11fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0348
        gbc.setState(0x7420, 0xd4f8, 0x10a0, 0x3e19, 0x61f6, 0x9934, 0x1, 0x0);
        gbc.writeMem(0x7420, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd4f8);
        EXPECT(gbc.pc(), 0x7422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0349
        gbc.setState(0x6ae2, 0xe9bd, 0xeda0, 0xbca6, 0xd666, 0x5cea, 0x0, 0x0);
        gbc.writeMem(0x6ae2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe9bd);
        EXPECT(gbc.pc(), 0x6ae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 034A
        gbc.setState(0x46ae, 0x2d8a, 0x9c70, 0x28ba, 0x4016, 0x7ee3, 0x0, 0x0);
        gbc.writeMem(0x46ae, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2d8a);
        EXPECT(gbc.pc(), 0x46b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 034B
        gbc.setState(0x1871, 0xbcc8, 0xb760, 0x6be0, 0x47af, 0xa082, 0x0, 0x0);
        gbc.writeMem(0x1871, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbcc8);
        EXPECT(gbc.pc(), 0x1873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 034C
        gbc.setState(0x244d, 0xd02b, 0x4aa0, 0x4934, 0xf7b3, 0xb406, 0x1, 0x0);
        gbc.writeMem(0x244d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd02b);
        EXPECT(gbc.pc(), 0x244f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 034D
        gbc.setState(0xc84c, 0xce86, 0x3630, 0x81fe, 0x5d5a, 0xb72e, 0x1, 0x1);
        gbc.writeMem(0xc84c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xce86);
        EXPECT(gbc.pc(), 0xc84e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc84c), 0xcb);
        EXPECT(gbc.readMem(0xc84d), 0xd);
        // CB 0D 034E
        gbc.setState(0x260d, 0xfbc0, 0x4820, 0xd263, 0x74c9, 0xe99f, 0x1, 0x0);
        gbc.writeMem(0x260d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfbc0);
        EXPECT(gbc.pc(), 0x260f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 034F
        gbc.setState(0x7b31, 0xcc82, 0x9250, 0xcc3a, 0xd534, 0x99a3, 0x0, 0x1);
        gbc.writeMem(0x7b31, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xcc82);
        EXPECT(gbc.pc(), 0x7b33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0350
        gbc.setState(0xc036, 0xc78d, 0xbc80, 0x6d04, 0x5610, 0x5dbd, 0x1, 0x0);
        gbc.writeMem(0xc036, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc78d);
        EXPECT(gbc.pc(), 0xc038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc036), 0xcb);
        EXPECT(gbc.readMem(0xc037), 0xd);
        // CB 0D 0352
        gbc.setState(0xa69b, 0x891b, 0xd10, 0x20ca, 0xb6a5, 0x270b, 0x0, 0x1);
        gbc.writeMem(0xa69b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x891b);
        EXPECT(gbc.pc(), 0xa69d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa69b), 0xcb);
        EXPECT(gbc.readMem(0xa69c), 0xd);
        // CB 0D 0353
        gbc.setState(0x3f79, 0x800e, 0xf950, 0x5ddf, 0xd128, 0x857a, 0x1, 0x0);
        gbc.writeMem(0x3f79, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x800e);
        EXPECT(gbc.pc(), 0x3f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0354
        gbc.setState(0xe0a5, 0x165c, 0xc340, 0xd5d0, 0x30f3, 0x2321, 0x1, 0x1);
        gbc.writeMem(0xe0a5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x165c);
        EXPECT(gbc.pc(), 0xe0a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a5), 0xcb);
        EXPECT(gbc.readMem(0xe0a6), 0xd);
        // CB 0D 0355
        gbc.setState(0xde49, 0xff18, 0xe630, 0x9efd, 0xbde8, 0x1a71, 0x0, 0x0);
        gbc.writeMem(0xde49, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xff18);
        EXPECT(gbc.pc(), 0xde4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde49), 0xcb);
        EXPECT(gbc.readMem(0xde4a), 0xd);
        // CB 0D 0356
        gbc.setState(0xe79, 0xd331, 0xbd20, 0xdad4, 0x4d57, 0x3dbc, 0x1, 0x1);
        gbc.writeMem(0xe79, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd331);
        EXPECT(gbc.pc(), 0xe7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0357
        gbc.setState(0x4c95, 0x67bb, 0x66a0, 0x490d, 0x812d, 0x4188, 0x0, 0x1);
        gbc.writeMem(0x4c95, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x67bb);
        EXPECT(gbc.pc(), 0x4c97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0358
        gbc.setState(0xbcb2, 0xebc8, 0xe2e0, 0x132a, 0x2a9e, 0x777f, 0x0, 0x0);
        gbc.writeMem(0xbcb2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xebc8);
        EXPECT(gbc.pc(), 0xbcb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcb2), 0xcb);
        EXPECT(gbc.readMem(0xbcb3), 0xd);
        // CB 0D 0359
        gbc.setState(0x27b3, 0x2dc8, 0xbd00, 0xa71e, 0x5551, 0x6d11, 0x1, 0x1);
        gbc.writeMem(0x27b3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2dc8);
        EXPECT(gbc.pc(), 0x27b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 035B
        gbc.setState(0x1f79, 0xea74, 0x30f0, 0xdeb8, 0x5097, 0x5eb8, 0x1, 0x1);
        gbc.writeMem(0x1f79, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xea74);
        EXPECT(gbc.pc(), 0x1f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 035C
        gbc.setState(0xc429, 0xadc3, 0x7c20, 0xac35, 0xcbca, 0x75f, 0x0, 0x1);
        gbc.writeMem(0xc429, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xadc3);
        EXPECT(gbc.pc(), 0xc42b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc429), 0xcb);
        EXPECT(gbc.readMem(0xc42a), 0xd);
        // CB 0D 035D
        gbc.setState(0xc354, 0x2ae, 0xf570, 0xa8c, 0xf09d, 0xaa2d, 0x0, 0x0);
        gbc.writeMem(0xc354, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2ae);
        EXPECT(gbc.pc(), 0xc356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc354), 0xcb);
        EXPECT(gbc.readMem(0xc355), 0xd);
        // CB 0D 035F
        gbc.setState(0x7f2e, 0x49bf, 0x5b90, 0xf5ef, 0x8993, 0x992a, 0x0, 0x0);
        gbc.writeMem(0x7f2e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x49bf);
        EXPECT(gbc.pc(), 0x7f30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0360
        gbc.setState(0x98e2, 0xe375, 0x5c10, 0xbdc0, 0x2a41, 0xd8b8, 0x1, 0x1);
        gbc.writeMem(0x98e2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe375);
        EXPECT(gbc.pc(), 0x98e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e2), 0xcb);
        EXPECT(gbc.readMem(0x98e3), 0xd);
        // CB 0D 0361
        gbc.setState(0x6884, 0x4218, 0x24f0, 0x9ec9, 0xeb68, 0x287c, 0x1, 0x1);
        gbc.writeMem(0x6884, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4218);
        EXPECT(gbc.pc(), 0x6886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0362
        gbc.setState(0xb700, 0xdd6e, 0x2230, 0x3992, 0x3c2, 0x9859, 0x1, 0x1);
        gbc.writeMem(0xb700, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdd6e);
        EXPECT(gbc.pc(), 0xb702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb700), 0xcb);
        EXPECT(gbc.readMem(0xb701), 0xd);
        // CB 0D 0363
        gbc.setState(0xd56e, 0xed59, 0x4460, 0xbf35, 0xe419, 0xbf57, 0x1, 0x0);
        gbc.writeMem(0xd56e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xed59);
        EXPECT(gbc.pc(), 0xd570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd56e), 0xcb);
        EXPECT(gbc.readMem(0xd56f), 0xd);
        // CB 0D 0364
        gbc.setState(0xb356, 0xe729, 0xb500, 0x7643, 0xcbac, 0x27cb, 0x1, 0x1);
        gbc.writeMem(0xb356, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe729);
        EXPECT(gbc.pc(), 0xb358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb356), 0xcb);
        EXPECT(gbc.readMem(0xb357), 0xd);
        // CB 0D 0365
        gbc.setState(0x1687, 0xd01e, 0x41b0, 0x85fb, 0x655b, 0x98eb, 0x0, 0x0);
        gbc.writeMem(0x1687, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd01e);
        EXPECT(gbc.pc(), 0x1689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0366
        gbc.setState(0xa1d5, 0x94db, 0x3d40, 0x5606, 0x29d0, 0x3946, 0x0, 0x0);
        gbc.writeMem(0xa1d5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x94db);
        EXPECT(gbc.pc(), 0xa1d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d5), 0xcb);
        EXPECT(gbc.readMem(0xa1d6), 0xd);
        // CB 0D 0367
        gbc.setState(0x5e76, 0xc60f, 0x62a0, 0xdd1e, 0xf8b0, 0x35cb, 0x1, 0x0);
        gbc.writeMem(0x5e76, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc60f);
        EXPECT(gbc.pc(), 0x5e78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0368
        gbc.setState(0x958b, 0x7d5e, 0x8eb0, 0x5526, 0xb34c, 0x456a, 0x0, 0x1);
        gbc.writeMem(0x958b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7d5e);
        EXPECT(gbc.pc(), 0x958d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958b), 0xcb);
        EXPECT(gbc.readMem(0x958c), 0xd);
        // CB 0D 0369
        gbc.setState(0x10e5, 0x771, 0x8c60, 0xba39, 0x4a99, 0x576c, 0x1, 0x1);
        gbc.writeMem(0x10e5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x771);
        EXPECT(gbc.pc(), 0x10e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 036A
        gbc.setState(0xddf, 0xaf02, 0xb2b0, 0x951e, 0xfc83, 0x1395, 0x0, 0x0);
        gbc.writeMem(0xddf, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xaf02);
        EXPECT(gbc.pc(), 0xde1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 036B
        gbc.setState(0x3da, 0xe485, 0xb100, 0x47be, 0x5f0f, 0xc57, 0x0, 0x1);
        gbc.writeMem(0x3da, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe485);
        EXPECT(gbc.pc(), 0x3dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 036C
        gbc.setState(0x4a3d, 0x7334, 0xd5b0, 0x1e95, 0xb4c5, 0xfc90, 0x1, 0x0);
        gbc.writeMem(0x4a3d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7334);
        EXPECT(gbc.pc(), 0x4a3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 036D
        gbc.setState(0xe21a, 0xf622, 0x6f10, 0x89a3, 0x240f, 0xddc6, 0x0, 0x0);
        gbc.writeMem(0xe21a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf622);
        EXPECT(gbc.pc(), 0xe21c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe21a), 0xcb);
        EXPECT(gbc.readMem(0xe21b), 0xd);
        // CB 0D 036E
        gbc.setState(0x98d4, 0xed87, 0x60b0, 0xe71b, 0x44ed, 0xe047, 0x0, 0x1);
        gbc.writeMem(0x98d4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xed87);
        EXPECT(gbc.pc(), 0x98d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98d4), 0xcb);
        EXPECT(gbc.readMem(0x98d5), 0xd);
        // CB 0D 036F
        gbc.setState(0x27b2, 0x1e7b, 0xb4c0, 0xb6bd, 0x8c7a, 0x863d, 0x0, 0x0);
        gbc.writeMem(0x27b2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1e7b);
        EXPECT(gbc.pc(), 0x27b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0370
        gbc.setState(0x1a58, 0x7f6f, 0x42b0, 0x8d2c, 0xc867, 0x9ecc, 0x0, 0x1);
        gbc.writeMem(0x1a58, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7f6f);
        EXPECT(gbc.pc(), 0x1a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0371
        gbc.setState(0xabd1, 0x8261, 0xeb70, 0x2020, 0x57b5, 0xd978, 0x1, 0x0);
        gbc.writeMem(0xabd1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8261);
        EXPECT(gbc.pc(), 0xabd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd1), 0xcb);
        EXPECT(gbc.readMem(0xabd2), 0xd);
        // CB 0D 0372
        gbc.setState(0x204e, 0x7ce7, 0x8f60, 0x1d5a, 0x6f11, 0x2382, 0x1, 0x0);
        gbc.writeMem(0x204e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7ce7);
        EXPECT(gbc.pc(), 0x2050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0373
        gbc.setState(0x91f2, 0x958, 0xd530, 0x4f6f, 0xd1d6, 0xdbca, 0x1, 0x1);
        gbc.writeMem(0x91f2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x958);
        EXPECT(gbc.pc(), 0x91f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f2), 0xcb);
        EXPECT(gbc.readMem(0x91f3), 0xd);
        // CB 0D 0374
        gbc.setState(0xcb2c, 0x40c1, 0x8350, 0xcd92, 0xd29c, 0x218f, 0x1, 0x0);
        gbc.writeMem(0xcb2c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x40c1);
        EXPECT(gbc.pc(), 0xcb2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb2c), 0xcb);
        EXPECT(gbc.readMem(0xcb2d), 0xd);
        // CB 0D 0375
        gbc.setState(0xdb2b, 0x8037, 0xe6a0, 0x8669, 0xe26b, 0x627, 0x0, 0x1);
        gbc.writeMem(0xdb2b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8037);
        EXPECT(gbc.pc(), 0xdb2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb2b), 0xcb);
        EXPECT(gbc.readMem(0xdb2c), 0xd);
        // CB 0D 0377
        gbc.setState(0x6611, 0x309f, 0x6e10, 0xabc9, 0x8699, 0x8256, 0x1, 0x0);
        gbc.writeMem(0x6611, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x309f);
        EXPECT(gbc.pc(), 0x6613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0378
        gbc.setState(0x6802, 0x5c46, 0x82c0, 0x4093, 0xa997, 0x9130, 0x1, 0x1);
        gbc.writeMem(0x6802, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5c46);
        EXPECT(gbc.pc(), 0x6804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0379
        gbc.setState(0xa407, 0x5c39, 0x6d30, 0x2a29, 0xcdb, 0x66ca, 0x0, 0x0);
        gbc.writeMem(0xa407, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5c39);
        EXPECT(gbc.pc(), 0xa409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa407), 0xcb);
        EXPECT(gbc.readMem(0xa408), 0xd);
        // CB 0D 037A
        gbc.setState(0xcd86, 0x1b0, 0x1f10, 0x1a99, 0xe80b, 0xf8b4, 0x0, 0x1);
        gbc.writeMem(0xcd86, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1b0);
        EXPECT(gbc.pc(), 0xcd88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd86), 0xcb);
        EXPECT(gbc.readMem(0xcd87), 0xd);
        // CB 0D 037B
        gbc.setState(0xcf5f, 0xd84f, 0xb420, 0xb273, 0x64c3, 0xf7f9, 0x1, 0x0);
        gbc.writeMem(0xcf5f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd84f);
        EXPECT(gbc.pc(), 0xcf61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf5f), 0xcb);
        EXPECT(gbc.readMem(0xcf60), 0xd);
        // CB 0D 037C
        gbc.setState(0x535, 0x24e1, 0x5ba0, 0x6064, 0xb0ce, 0x2aab, 0x0, 0x0);
        gbc.writeMem(0x535, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x24e1);
        EXPECT(gbc.pc(), 0x537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 037D
        gbc.setState(0xb807, 0x3fee, 0x7470, 0x6be4, 0x486e, 0x9873, 0x1, 0x1);
        gbc.writeMem(0xb807, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3fee);
        EXPECT(gbc.pc(), 0xb809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb807), 0xcb);
        EXPECT(gbc.readMem(0xb808), 0xd);
        // CB 0D 037E
        gbc.setState(0xe7f3, 0x312a, 0xb610, 0xcc93, 0xe21c, 0xae02, 0x0, 0x0);
        gbc.writeMem(0xe7f3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x312a);
        EXPECT(gbc.pc(), 0xe7f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f3), 0xcb);
        EXPECT(gbc.readMem(0xe7f4), 0xd);
        // CB 0D 037F
        gbc.setState(0x6dfe, 0x9bad, 0x4d60, 0x5cf, 0xd29f, 0x9cfe, 0x0, 0x1);
        gbc.writeMem(0x6dfe, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9bad);
        EXPECT(gbc.pc(), 0x6e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0380
        gbc.setState(0x1b8b, 0x8a49, 0xc940, 0xcdf5, 0xa676, 0x717b, 0x1, 0x0);
        gbc.writeMem(0x1b8b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8a49);
        EXPECT(gbc.pc(), 0x1b8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0381
        gbc.setState(0x267d, 0x67a2, 0xe350, 0xf823, 0x4074, 0x3c1c, 0x0, 0x1);
        gbc.writeMem(0x267d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x67a2);
        EXPECT(gbc.pc(), 0x267f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0382
        gbc.setState(0xe91d, 0xc8ab, 0x18c0, 0x5d35, 0xe752, 0xb302, 0x1, 0x0);
        gbc.writeMem(0xe91d, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc8ab);
        EXPECT(gbc.pc(), 0xe91f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91d), 0xcb);
        EXPECT(gbc.readMem(0xe91e), 0xd);
        // CB 0D 0383
        gbc.setState(0xceec, 0x1606, 0xcc80, 0xccae, 0xc9db, 0x9f43, 0x1, 0x0);
        gbc.writeMem(0xceec, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1606);
        EXPECT(gbc.pc(), 0xceee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceec), 0xcb);
        EXPECT(gbc.readMem(0xceed), 0xd);
        // CB 0D 0384
        gbc.setState(0x655a, 0xc8dd, 0x7400, 0xe4f1, 0x6a3, 0x1892, 0x0, 0x0);
        gbc.writeMem(0x655a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc8dd);
        EXPECT(gbc.pc(), 0x655c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0385
        gbc.setState(0xe51b, 0xfa27, 0x20a0, 0x34d1, 0xecce, 0x5142, 0x1, 0x0);
        gbc.writeMem(0xe51b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfa27);
        EXPECT(gbc.pc(), 0xe51d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe51b), 0xcb);
        EXPECT(gbc.readMem(0xe51c), 0xd);
        // CB 0D 0386
        gbc.setState(0xb772, 0xd0cb, 0x1e70, 0xc99, 0x6318, 0xc907, 0x0, 0x1);
        gbc.writeMem(0xb772, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd0cb);
        EXPECT(gbc.pc(), 0xb774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb772), 0xcb);
        EXPECT(gbc.readMem(0xb773), 0xd);
        // CB 0D 0387
        gbc.setState(0x4c6e, 0x65c2, 0x3e0, 0x9583, 0x1963, 0x3fe2, 0x0, 0x0);
        gbc.writeMem(0x4c6e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x65c2);
        EXPECT(gbc.pc(), 0x4c70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0389
        gbc.setState(0xb2db, 0x35a8, 0x84e0, 0xc224, 0xe941, 0x2ec6, 0x1, 0x1);
        gbc.writeMem(0xb2db, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x35a8);
        EXPECT(gbc.pc(), 0xb2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2db), 0xcb);
        EXPECT(gbc.readMem(0xb2dc), 0xd);
        // CB 0D 038A
        gbc.setState(0x4462, 0x951, 0xdd70, 0x8b1e, 0x9471, 0xef31, 0x0, 0x0);
        gbc.writeMem(0x4462, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x951);
        EXPECT(gbc.pc(), 0x4464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 038B
        gbc.setState(0x7fd2, 0xab6c, 0xa1a0, 0xc088, 0xffae, 0xf178, 0x0, 0x0);
        gbc.writeMem(0x7fd2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xab6c);
        EXPECT(gbc.pc(), 0x7fd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 038C
        gbc.setState(0x99fb, 0x188b, 0xbaf0, 0x9abe, 0xa7cc, 0x8b0, 0x0, 0x1);
        gbc.writeMem(0x99fb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x188b);
        EXPECT(gbc.pc(), 0x99fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99fb), 0xcb);
        EXPECT(gbc.readMem(0x99fc), 0xd);
        // CB 0D 038D
        gbc.setState(0xec8e, 0x7970, 0x5630, 0xe1d5, 0x59a9, 0x613b, 0x0, 0x1);
        gbc.writeMem(0xec8e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7970);
        EXPECT(gbc.pc(), 0xec90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec8e), 0xcb);
        EXPECT(gbc.readMem(0xec8f), 0xd);
        // CB 0D 038E
        gbc.setState(0x3f21, 0xcd7a, 0x7e30, 0x2575, 0xf9e4, 0xf356, 0x1, 0x1);
        gbc.writeMem(0x3f21, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xcd7a);
        EXPECT(gbc.pc(), 0x3f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 038F
        gbc.setState(0x68cd, 0x53f1, 0xeec0, 0xf541, 0xba1e, 0xa639, 0x0, 0x0);
        gbc.writeMem(0x68cd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x53f1);
        EXPECT(gbc.pc(), 0x68cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0390
        gbc.setState(0xa516, 0x89c4, 0x9650, 0xa26c, 0x5cad, 0x8cb3, 0x0, 0x0);
        gbc.writeMem(0xa516, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x89c4);
        EXPECT(gbc.pc(), 0xa518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa516), 0xcb);
        EXPECT(gbc.readMem(0xa517), 0xd);
        // CB 0D 0391
        gbc.setState(0xd0c8, 0x4aa9, 0xb100, 0xe87b, 0xdff7, 0xb0b8, 0x1, 0x0);
        gbc.writeMem(0xd0c8, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4aa9);
        EXPECT(gbc.pc(), 0xd0ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0c8), 0xcb);
        EXPECT(gbc.readMem(0xd0c9), 0xd);
        // CB 0D 0392
        gbc.setState(0x19c7, 0xdb03, 0xb820, 0x2173, 0x714d, 0x5b36, 0x0, 0x1);
        gbc.writeMem(0x19c7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xdb03);
        EXPECT(gbc.pc(), 0x19c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0393
        gbc.setState(0xe06b, 0x29fe, 0x4cb0, 0xef6c, 0x67af, 0xd84e, 0x0, 0x0);
        gbc.writeMem(0xe06b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x29fe);
        EXPECT(gbc.pc(), 0xe06d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe06b), 0xcb);
        EXPECT(gbc.readMem(0xe06c), 0xd);
        // CB 0D 0394
        gbc.setState(0x9284, 0xdde2, 0x2230, 0xcd34, 0x6902, 0xb0eb, 0x0, 0x1);
        gbc.writeMem(0x9284, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdde2);
        EXPECT(gbc.pc(), 0x9286);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9284), 0xcb);
        EXPECT(gbc.readMem(0x9285), 0xd);
        // CB 0D 0395
        gbc.setState(0x1cec, 0x29e7, 0xb620, 0x4ee9, 0xfb05, 0x9d55, 0x0, 0x0);
        gbc.writeMem(0x1cec, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x29e7);
        EXPECT(gbc.pc(), 0x1cee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0396
        gbc.setState(0x6f34, 0xa33b, 0xcfe0, 0xd19b, 0x8606, 0x665c, 0x0, 0x0);
        gbc.writeMem(0x6f34, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa33b);
        EXPECT(gbc.pc(), 0x6f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 0397
        gbc.setState(0x54ca, 0x5120, 0x2e40, 0x314e, 0x4d98, 0x5145, 0x1, 0x1);
        gbc.writeMem(0x54ca, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5120);
        EXPECT(gbc.pc(), 0x54cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 0398
        gbc.setState(0xccb9, 0xa90b, 0x9c30, 0x73d6, 0x7b5, 0x5727, 0x1, 0x1);
        gbc.writeMem(0xccb9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa90b);
        EXPECT(gbc.pc(), 0xccbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb9), 0xcb);
        EXPECT(gbc.readMem(0xccba), 0xd);
        // CB 0D 0399
        gbc.setState(0x107a, 0x89f4, 0x78e0, 0x8cab, 0x1f04, 0x6e64, 0x0, 0x1);
        gbc.writeMem(0x107a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x89f4);
        EXPECT(gbc.pc(), 0x107c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 039A
        gbc.setState(0xdd53, 0x2342, 0xc630, 0x4d17, 0xfb9c, 0xc619, 0x1, 0x0);
        gbc.writeMem(0xdd53, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2342);
        EXPECT(gbc.pc(), 0xdd55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd53), 0xcb);
        EXPECT(gbc.readMem(0xdd54), 0xd);
        // CB 0D 039C
        gbc.setState(0xd7c1, 0x7e1b, 0xfe20, 0xf874, 0xfa33, 0xfcc5, 0x0, 0x1);
        gbc.writeMem(0xd7c1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7e1b);
        EXPECT(gbc.pc(), 0xd7c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7c1), 0xcb);
        EXPECT(gbc.readMem(0xd7c2), 0xd);
        // CB 0D 039D
        gbc.setState(0x803a, 0x7347, 0x19f0, 0x11fc, 0xa68e, 0xa98, 0x1, 0x0);
        gbc.writeMem(0x803a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7347);
        EXPECT(gbc.pc(), 0x803c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x803a), 0xcb);
        EXPECT(gbc.readMem(0x803b), 0xd);
        // CB 0D 039E
        gbc.setState(0x8b0, 0xa4db, 0xb000, 0xd792, 0x4790, 0x1da9, 0x0, 0x0);
        gbc.writeMem(0x8b0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa4db);
        EXPECT(gbc.pc(), 0x8b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 039F
        gbc.setState(0xefd3, 0x8322, 0xa10, 0x3bef, 0x1c0d, 0x9ab3, 0x0, 0x0);
        gbc.writeMem(0xefd3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8322);
        EXPECT(gbc.pc(), 0xefd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd3), 0xcb);
        EXPECT(gbc.readMem(0xefd4), 0xd);
        // CB 0D 03A0
        gbc.setState(0x7b82, 0xead9, 0xfff0, 0xd6c9, 0x490c, 0xa661, 0x0, 0x0);
        gbc.writeMem(0x7b82, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xead9);
        EXPECT(gbc.pc(), 0x7b84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03A1
        gbc.setState(0x4cbd, 0xd7a9, 0x8eb0, 0xa5b1, 0x569b, 0xe6a8, 0x0, 0x1);
        gbc.writeMem(0x4cbd, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd7a9);
        EXPECT(gbc.pc(), 0x4cbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03A4
        gbc.setState(0xda76, 0xede8, 0x59c0, 0x93df, 0xd63, 0xdbb, 0x1, 0x0);
        gbc.writeMem(0xda76, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xede8);
        EXPECT(gbc.pc(), 0xda78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda76), 0xcb);
        EXPECT(gbc.readMem(0xda77), 0xd);
        // CB 0D 03A5
        gbc.setState(0xb7dc, 0x58bd, 0x7cc0, 0x4af8, 0x9e41, 0xa4c8, 0x1, 0x0);
        gbc.writeMem(0xb7dc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x58bd);
        EXPECT(gbc.pc(), 0xb7de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7dc), 0xcb);
        EXPECT(gbc.readMem(0xb7dd), 0xd);
        // CB 0D 03A6
        gbc.setState(0x2bcb, 0x6cf, 0x42f0, 0xa16e, 0xe653, 0x122a, 0x1, 0x0);
        gbc.writeMem(0x2bcb, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6cf);
        EXPECT(gbc.pc(), 0x2bcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03A7
        gbc.setState(0x8c6f, 0x4908, 0x5f90, 0xdfb4, 0x2e46, 0xb235, 0x1, 0x0);
        gbc.writeMem(0x8c6f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4908);
        EXPECT(gbc.pc(), 0x8c71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c6f), 0xcb);
        EXPECT(gbc.readMem(0x8c70), 0xd);
        // CB 0D 03A8
        gbc.setState(0x6543, 0x4f89, 0x8860, 0x9fe7, 0x54f3, 0x3377, 0x1, 0x0);
        gbc.writeMem(0x6543, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4f89);
        EXPECT(gbc.pc(), 0x6545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03A9
        gbc.setState(0x847e, 0x4c82, 0x38e0, 0x381e, 0xaa0c, 0xddee, 0x0, 0x1);
        gbc.writeMem(0x847e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4c82);
        EXPECT(gbc.pc(), 0x8480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x847e), 0xcb);
        EXPECT(gbc.readMem(0x847f), 0xd);
        // CB 0D 03AA
        gbc.setState(0x99f1, 0x3f66, 0x3370, 0x1ef2, 0x9b9f, 0xa32a, 0x1, 0x1);
        gbc.writeMem(0x99f1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3f66);
        EXPECT(gbc.pc(), 0x99f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f1), 0xcb);
        EXPECT(gbc.readMem(0x99f2), 0xd);
        // CB 0D 03AB
        gbc.setState(0x6534, 0x64a0, 0x70e0, 0xd87, 0x4f78, 0x3852, 0x0, 0x0);
        gbc.writeMem(0x6534, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x64a0);
        EXPECT(gbc.pc(), 0x6536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03AC
        gbc.setState(0x4c14, 0xfa54, 0xd160, 0x8584, 0xbde6, 0x569e, 0x0, 0x1);
        gbc.writeMem(0x4c14, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xfa54);
        EXPECT(gbc.pc(), 0x4c16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03AD
        gbc.setState(0x46d4, 0xb130, 0xa8f0, 0xa294, 0xb4d, 0x5ad3, 0x1, 0x0);
        gbc.writeMem(0x46d4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb130);
        EXPECT(gbc.pc(), 0x46d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03AE
        gbc.setState(0xef31, 0xca02, 0xfe20, 0x233c, 0xa20, 0x7529, 0x1, 0x0);
        gbc.writeMem(0xef31, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xca02);
        EXPECT(gbc.pc(), 0xef33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef31), 0xcb);
        EXPECT(gbc.readMem(0xef32), 0xd);
        // CB 0D 03AF
        gbc.setState(0x9f0, 0x3649, 0x8670, 0xb8a3, 0x2b58, 0x36ee, 0x1, 0x0);
        gbc.writeMem(0x9f0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3649);
        EXPECT(gbc.pc(), 0x9f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03B0
        gbc.setState(0xa76f, 0xd45, 0xd80, 0x92a, 0xe1a5, 0x96b3, 0x0, 0x1);
        gbc.writeMem(0xa76f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd45);
        EXPECT(gbc.pc(), 0xa771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76f), 0xcb);
        EXPECT(gbc.readMem(0xa770), 0xd);
        // CB 0D 03B1
        gbc.setState(0x17e5, 0xc92c, 0x98b0, 0x8c9a, 0xe9ec, 0xb8db, 0x0, 0x0);
        gbc.writeMem(0x17e5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc92c);
        EXPECT(gbc.pc(), 0x17e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03B2
        gbc.setState(0x1cd4, 0x7fc8, 0x7f20, 0x18d3, 0xd706, 0x5017, 0x1, 0x1);
        gbc.writeMem(0x1cd4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7fc8);
        EXPECT(gbc.pc(), 0x1cd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03B3
        gbc.setState(0x7582, 0x9b2b, 0xa9d0, 0xec0a, 0x1398, 0xc19c, 0x0, 0x0);
        gbc.writeMem(0x7582, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9b2b);
        EXPECT(gbc.pc(), 0x7584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03B4
        gbc.setState(0x14f6, 0xf8bb, 0x9540, 0xdb45, 0x8eb9, 0xfbe7, 0x0, 0x0);
        gbc.writeMem(0x14f6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf8bb);
        EXPECT(gbc.pc(), 0x14f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03B5
        gbc.setState(0xe7f7, 0x3785, 0xcec0, 0x33c1, 0xdcec, 0xef2c, 0x1, 0x1);
        gbc.writeMem(0xe7f7, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3785);
        EXPECT(gbc.pc(), 0xe7f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f7), 0xcb);
        EXPECT(gbc.readMem(0xe7f8), 0xd);
        // CB 0D 03B6
        gbc.setState(0xdea3, 0xbab7, 0xc620, 0x55d9, 0x3d5a, 0xcc39, 0x1, 0x1);
        gbc.writeMem(0xdea3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xbab7);
        EXPECT(gbc.pc(), 0xdea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea3), 0xcb);
        EXPECT(gbc.readMem(0xdea4), 0xd);
        // CB 0D 03B7
        gbc.setState(0xaee9, 0x943, 0xad40, 0x6c94, 0x8da0, 0xa946, 0x0, 0x0);
        gbc.writeMem(0xaee9, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x943);
        EXPECT(gbc.pc(), 0xaeeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaee9), 0xcb);
        EXPECT(gbc.readMem(0xaeea), 0xd);
        // CB 0D 03B8
        gbc.setState(0x7ad4, 0x96ac, 0xa320, 0xeaa7, 0x276d, 0xb32f, 0x1, 0x0);
        gbc.writeMem(0x7ad4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x96ac);
        EXPECT(gbc.pc(), 0x7ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03B9
        gbc.setState(0x3655, 0x76cc, 0x8f40, 0x334f, 0x87ad, 0x9273, 0x1, 0x0);
        gbc.writeMem(0x3655, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x76cc);
        EXPECT(gbc.pc(), 0x3657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03BA
        gbc.setState(0x7126, 0x926b, 0x5fe0, 0x2582, 0x45e5, 0xc2aa, 0x0, 0x0);
        gbc.writeMem(0x7126, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x926b);
        EXPECT(gbc.pc(), 0x7128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03BB
        gbc.setState(0xb39, 0x7e7c, 0x8a70, 0x6df6, 0x3312, 0x52b5, 0x1, 0x1);
        gbc.writeMem(0xb39, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7e7c);
        EXPECT(gbc.pc(), 0xb3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03BC
        gbc.setState(0x6ee4, 0x3053, 0x2240, 0xd052, 0x845d, 0x6140, 0x0, 0x1);
        gbc.writeMem(0x6ee4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3053);
        EXPECT(gbc.pc(), 0x6ee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03BE
        gbc.setState(0x9afa, 0x6a4a, 0x5100, 0xbce7, 0x4e02, 0xc1c4, 0x1, 0x1);
        gbc.writeMem(0x9afa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6a4a);
        EXPECT(gbc.pc(), 0x9afc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afa), 0xcb);
        EXPECT(gbc.readMem(0x9afb), 0xd);
        // CB 0D 03BF
        gbc.setState(0x9397, 0x6f54, 0x60, 0x9fdd, 0xde9e, 0x9aa7, 0x0, 0x0);
        gbc.writeMem(0x9397, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6f54);
        EXPECT(gbc.pc(), 0x9399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9397), 0xcb);
        EXPECT(gbc.readMem(0x9398), 0xd);
        // CB 0D 03C0
        gbc.setState(0xe5aa, 0x4c66, 0x3890, 0x5ad8, 0x7045, 0x9962, 0x1, 0x1);
        gbc.writeMem(0xe5aa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x4c66);
        EXPECT(gbc.pc(), 0xe5ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5aa), 0xcb);
        EXPECT(gbc.readMem(0xe5ab), 0xd);
        // CB 0D 03C1
        gbc.setState(0x59a4, 0x5ec1, 0x3450, 0x71a4, 0xaa6a, 0xa14, 0x0, 0x1);
        gbc.writeMem(0x59a4, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5ec1);
        EXPECT(gbc.pc(), 0x59a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03C2
        gbc.setState(0x159c, 0x82b8, 0x75b0, 0x3632, 0x6e92, 0x4bd0, 0x1, 0x1);
        gbc.writeMem(0x159c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x82b8);
        EXPECT(gbc.pc(), 0x159e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03C4
        gbc.setState(0x7cd0, 0x6d9f, 0x98b0, 0x6d31, 0x34c0, 0xf2d3, 0x1, 0x0);
        gbc.writeMem(0x7cd0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6d9f);
        EXPECT(gbc.pc(), 0x7cd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03C5
        gbc.setState(0x262c, 0xda41, 0x4540, 0xbfdc, 0xe23f, 0xa308, 0x0, 0x0);
        gbc.writeMem(0x262c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xda41);
        EXPECT(gbc.pc(), 0x262e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03C6
        gbc.setState(0x3666, 0xb5ec, 0x66a0, 0xc80f, 0x2978, 0x57f0, 0x1, 0x1);
        gbc.writeMem(0x3666, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb5ec);
        EXPECT(gbc.pc(), 0x3668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03C7
        gbc.setState(0x8c52, 0x45ff, 0xc260, 0xff6f, 0x2231, 0x4cf8, 0x1, 0x0);
        gbc.writeMem(0x8c52, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x45ff);
        EXPECT(gbc.pc(), 0x8c54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c52), 0xcb);
        EXPECT(gbc.readMem(0x8c53), 0xd);
        // CB 0D 03C8
        gbc.setState(0xa3c2, 0xe309, 0xe3d0, 0xde66, 0x3a08, 0x6da0, 0x0, 0x0);
        gbc.writeMem(0xa3c2, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe309);
        EXPECT(gbc.pc(), 0xa3c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c2), 0xcb);
        EXPECT(gbc.readMem(0xa3c3), 0xd);
        // CB 0D 03C9
        gbc.setState(0x4464, 0xb23c, 0x49a0, 0x9d50, 0x307b, 0x8b4c, 0x0, 0x0);
        gbc.writeMem(0x4464, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb23c);
        EXPECT(gbc.pc(), 0x4466);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03CA
        gbc.setState(0x566a, 0x3c8f, 0xc7d0, 0x9d70, 0x62e6, 0x901a, 0x1, 0x1);
        gbc.writeMem(0x566a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3c8f);
        EXPECT(gbc.pc(), 0x566c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03CB
        gbc.setState(0x3733, 0x530c, 0xabc0, 0xb541, 0x5d33, 0x54f8, 0x0, 0x1);
        gbc.writeMem(0x3733, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x530c);
        EXPECT(gbc.pc(), 0x3735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03CC
        gbc.setState(0xd672, 0xd021, 0x4060, 0x3e3e, 0xf76f, 0x248a, 0x1, 0x1);
        gbc.writeMem(0xd672, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd021);
        EXPECT(gbc.pc(), 0xd674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd672), 0xcb);
        EXPECT(gbc.readMem(0xd673), 0xd);
        // CB 0D 03CE
        gbc.setState(0x952b, 0x3cc8, 0xbf20, 0x3302, 0xcf44, 0xcb82, 0x0, 0x1);
        gbc.writeMem(0x952b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3cc8);
        EXPECT(gbc.pc(), 0x952d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952b), 0xcb);
        EXPECT(gbc.readMem(0x952c), 0xd);
        // CB 0D 03CF
        gbc.setState(0xdd6f, 0xe76b, 0x1470, 0x6be9, 0x204f, 0xb432, 0x0, 0x1);
        gbc.writeMem(0xdd6f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe76b);
        EXPECT(gbc.pc(), 0xdd71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6f), 0xcb);
        EXPECT(gbc.readMem(0xdd70), 0xd);
        // CB 0D 03D0
        gbc.setState(0x63b, 0x92fe, 0xf080, 0x9d14, 0xe3c5, 0x1ecd, 0x1, 0x1);
        gbc.writeMem(0x63b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x92fe);
        EXPECT(gbc.pc(), 0x63d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03D1
        gbc.setState(0x7ea1, 0x911c, 0x79a0, 0x647b, 0x4408, 0xf639, 0x0, 0x1);
        gbc.writeMem(0x7ea1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x911c);
        EXPECT(gbc.pc(), 0x7ea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03D2
        gbc.setState(0x7850, 0xf548, 0x65a0, 0xb104, 0x8a60, 0x784e, 0x1, 0x1);
        gbc.writeMem(0x7850, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf548);
        EXPECT(gbc.pc(), 0x7852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03D4
        gbc.setState(0xc8ae, 0x13c8, 0x2bd0, 0x2726, 0x5306, 0xa3be, 0x0, 0x0);
        gbc.writeMem(0xc8ae, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x13c8);
        EXPECT(gbc.pc(), 0xc8b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8ae), 0xcb);
        EXPECT(gbc.readMem(0xc8af), 0xd);
        // CB 0D 03D5
        gbc.setState(0x3a03, 0xbe29, 0xd2f0, 0x875c, 0x7fd1, 0x3d92, 0x1, 0x1);
        gbc.writeMem(0x3a03, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbe29);
        EXPECT(gbc.pc(), 0x3a05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03D6
        gbc.setState(0xb0ef, 0x834c, 0x95f0, 0xfe31, 0xe344, 0x7081, 0x1, 0x0);
        gbc.writeMem(0xb0ef, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x834c);
        EXPECT(gbc.pc(), 0xb0f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ef), 0xcb);
        EXPECT(gbc.readMem(0xb0f0), 0xd);
        // CB 0D 03D7
        gbc.setState(0x7af6, 0x992f, 0x61d0, 0x5dcf, 0x461a, 0xe397, 0x1, 0x1);
        gbc.writeMem(0x7af6, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x992f);
        EXPECT(gbc.pc(), 0x7af8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03D8
        gbc.setState(0xb811, 0xcd8f, 0xcd30, 0xa911, 0x8946, 0xec49, 0x0, 0x1);
        gbc.writeMem(0xb811, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xcd8f);
        EXPECT(gbc.pc(), 0xb813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb811), 0xcb);
        EXPECT(gbc.readMem(0xb812), 0xd);
        // CB 0D 03D9
        gbc.setState(0xbd2b, 0xa932, 0xb1d0, 0x5226, 0xe63d, 0x205, 0x0, 0x0);
        gbc.writeMem(0xbd2b, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa932);
        EXPECT(gbc.pc(), 0xbd2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd2b), 0xcb);
        EXPECT(gbc.readMem(0xbd2c), 0xd);
        // CB 0D 03DA
        gbc.setState(0xcd1f, 0xc0b2, 0xd800, 0xb3ee, 0xcfdf, 0xeb07, 0x1, 0x1);
        gbc.writeMem(0xcd1f, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc0b2);
        EXPECT(gbc.pc(), 0xcd21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd1f), 0xcb);
        EXPECT(gbc.readMem(0xcd20), 0xd);
        // CB 0D 03DB
        gbc.setState(0xbab0, 0x85c5, 0xab50, 0xfe25, 0xd760, 0x32af, 0x0, 0x1);
        gbc.writeMem(0xbab0, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x85c5);
        EXPECT(gbc.pc(), 0xbab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbab0), 0xcb);
        EXPECT(gbc.readMem(0xbab1), 0xd);
        // CB 0D 03DC
        gbc.setState(0x37a, 0x63c4, 0x5340, 0xc526, 0xda50, 0x99bc, 0x1, 0x1);
        gbc.writeMem(0x37a, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x63c4);
        EXPECT(gbc.pc(), 0x37c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03DD
        gbc.setState(0x4a02, 0x762, 0xc2b0, 0x16e5, 0x303a, 0x9b09, 0x0, 0x0);
        gbc.writeMem(0x4a02, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x762);
        EXPECT(gbc.pc(), 0x4a04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03DE
        gbc.setState(0xa2a5, 0xfd2e, 0x68e0, 0xab3d, 0x5359, 0xb74e, 0x0, 0x0);
        gbc.writeMem(0xa2a5, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xfd2e);
        EXPECT(gbc.pc(), 0xa2a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2a5), 0xcb);
        EXPECT(gbc.readMem(0xa2a6), 0xd);
        // CB 0D 03DF
        gbc.setState(0x1e3e, 0xd9fd, 0x7fd0, 0x3fb0, 0xcdfc, 0x77bb, 0x0, 0x1);
        gbc.writeMem(0x1e3e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd9fd);
        EXPECT(gbc.pc(), 0x1e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03E0
        gbc.setState(0x14fa, 0x8541, 0xdc70, 0x36a1, 0x17ef, 0x2940, 0x1, 0x0);
        gbc.writeMem(0x14fa, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8541);
        EXPECT(gbc.pc(), 0x14fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03E2
        gbc.setState(0xabdc, 0x83a8, 0xf20, 0x1384, 0x5e88, 0xd0c, 0x0, 0x1);
        gbc.writeMem(0xabdc, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x83a8);
        EXPECT(gbc.pc(), 0xabde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabdc), 0xcb);
        EXPECT(gbc.readMem(0xabdd), 0xd);
        // CB 0D 03E3
        gbc.setState(0x149e, 0x93f9, 0x2910, 0x3042, 0x5dca, 0x81da, 0x0, 0x1);
        gbc.writeMem(0x149e, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x93f9);
        EXPECT(gbc.pc(), 0x14a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03E4
        gbc.setState(0x464c, 0x2df9, 0x9ab0, 0x51ea, 0xd490, 0x26e9, 0x0, 0x1);
        gbc.writeMem(0x464c, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x2df9);
        EXPECT(gbc.pc(), 0x464e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0D 03E5
        gbc.setState(0x60a1, 0xdc46, 0x1210, 0x48fe, 0x3e54, 0x23ae, 0x1, 0x1);
        gbc.writeMem(0x60a1, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xdc46);
        EXPECT(gbc.pc(), 0x60a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0D 03E6
        gbc.setState(0x7e3, 0xe788, 0xd970, 0x66e4, 0x4067, 0xa553, 0x1, 0x0);
        gbc.writeMem(0x7e3, { 0xcb, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe788);
        EXPECT(gbc.pc(), 0x7e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
