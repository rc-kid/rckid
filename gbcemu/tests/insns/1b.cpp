#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_1b)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_1b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 1B 0000
        gbc.setState(0x59c7, 0x4c3d, 0x3a90, 0x897d, 0x152e, 0xf59a, 0x1, 0x1);
        gbc.writeMem(0x59c7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4c3d);
        EXPECT(gbc.pc(), 0x59c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0001
        gbc.setState(0x9aba, 0x5ccd, 0xb9b0, 0xc443, 0xe9c2, 0xeedb, 0x0, 0x1);
        gbc.writeMem(0x9aba, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5ccd);
        EXPECT(gbc.pc(), 0x9abb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aba), 0x1b);
        // 1B 0002
        gbc.setState(0xc9e6, 0x746b, 0x31a0, 0x414b, 0x99d4, 0xafb8, 0x1, 0x0);
        gbc.writeMem(0xc9e6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x746b);
        EXPECT(gbc.pc(), 0xc9e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e6), 0x1b);
        // 1B 0003
        gbc.setState(0x9382, 0x4559, 0x4b30, 0xf7d3, 0x3d9a, 0xaaa2, 0x0, 0x1);
        gbc.writeMem(0x9382, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4559);
        EXPECT(gbc.pc(), 0x9383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9382), 0x1b);
        // 1B 0004
        gbc.setState(0x2938, 0xdce1, 0x80a0, 0x6fb6, 0xdb3e, 0x8135, 0x0, 0x1);
        gbc.writeMem(0x2938, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xdce1);
        EXPECT(gbc.pc(), 0x2939);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0005
        gbc.setState(0x34c7, 0x998b, 0xae40, 0x8e55, 0x4eb2, 0x7cb8, 0x1, 0x1);
        gbc.writeMem(0x34c7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x998b);
        EXPECT(gbc.pc(), 0x34c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0006
        gbc.setState(0x610a, 0x74e2, 0x8090, 0xe9ba, 0x37eb, 0x4df6, 0x0, 0x1);
        gbc.writeMem(0x610a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x74e2);
        EXPECT(gbc.pc(), 0x610b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0007
        gbc.setState(0xad31, 0xe909, 0x1c00, 0xc904, 0xe319, 0xee9d, 0x1, 0x0);
        gbc.writeMem(0xad31, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe909);
        EXPECT(gbc.pc(), 0xad32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad31), 0x1b);
        // 1B 0008
        gbc.setState(0xdb6c, 0xec16, 0x7280, 0xd432, 0x617c, 0x21b8, 0x1, 0x1);
        gbc.writeMem(0xdb6c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xec16);
        EXPECT(gbc.pc(), 0xdb6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb6c), 0x1b);
        // 1B 0009
        gbc.setState(0xae0, 0xfc31, 0xe020, 0x3465, 0xbe0, 0xcc29, 0x1, 0x1);
        gbc.writeMem(0xae0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfc31);
        EXPECT(gbc.pc(), 0xae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 000A
        gbc.setState(0x984a, 0xbaa0, 0xb780, 0xe527, 0x99d1, 0x4346, 0x0, 0x0);
        gbc.writeMem(0x984a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbaa0);
        EXPECT(gbc.pc(), 0x984b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x984a), 0x1b);
        // 1B 000B
        gbc.setState(0xed87, 0x640a, 0xffc0, 0x6b5d, 0x637e, 0xfe9a, 0x1, 0x0);
        gbc.writeMem(0xed87, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x640a);
        EXPECT(gbc.pc(), 0xed88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed87), 0x1b);
        // 1B 000C
        gbc.setState(0x6f22, 0x38a0, 0xe7b0, 0x5937, 0x337e, 0x8608, 0x0, 0x1);
        gbc.writeMem(0x6f22, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x38a0);
        EXPECT(gbc.pc(), 0x6f23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 000D
        gbc.setState(0x4280, 0xc36d, 0x3180, 0x9acd, 0xc57d, 0x1e10, 0x1, 0x1);
        gbc.writeMem(0x4280, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc36d);
        EXPECT(gbc.pc(), 0x4281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 000E
        gbc.setState(0xca70, 0x5589, 0x78f0, 0x4184, 0xa32f, 0xf048, 0x0, 0x1);
        gbc.writeMem(0xca70, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5589);
        EXPECT(gbc.pc(), 0xca71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca70), 0x1b);
        // 1B 000F
        gbc.setState(0x5ff, 0xb47d, 0xdde0, 0xc7d6, 0x5830, 0xa8ce, 0x1, 0x0);
        gbc.writeMem(0x5ff, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb47d);
        EXPECT(gbc.pc(), 0x600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0010
        gbc.setState(0x9713, 0xe980, 0xd120, 0xa910, 0xa82e, 0x7232, 0x0, 0x1);
        gbc.writeMem(0x9713, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe980);
        EXPECT(gbc.pc(), 0x9714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9713), 0x1b);
        // 1B 0011
        gbc.setState(0x2a29, 0xfc02, 0x6cf0, 0x1c5d, 0x820b, 0xe864, 0x1, 0x0);
        gbc.writeMem(0x2a29, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xfc02);
        EXPECT(gbc.pc(), 0x2a2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0013
        gbc.setState(0xb4ac, 0x7f86, 0x1f60, 0xa341, 0x1d25, 0x2893, 0x1, 0x0);
        gbc.writeMem(0xb4ac, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7f86);
        EXPECT(gbc.pc(), 0xb4ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ac), 0x1b);
        // 1B 0015
        gbc.setState(0xa2e1, 0x38ab, 0x6a50, 0x6b00, 0x2bfa, 0x4f0c, 0x0, 0x1);
        gbc.writeMem(0xa2e1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x38ab);
        EXPECT(gbc.pc(), 0xa2e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2e1), 0x1b);
        // 1B 0016
        gbc.setState(0x28ef, 0xdc71, 0xd540, 0x3522, 0x47fe, 0xa6ce, 0x1, 0x1);
        gbc.writeMem(0x28ef, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xdc71);
        EXPECT(gbc.pc(), 0x28f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0017
        gbc.setState(0x9967, 0xd2b4, 0xa960, 0xb94c, 0xece7, 0x8f24, 0x0, 0x1);
        gbc.writeMem(0x9967, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd2b4);
        EXPECT(gbc.pc(), 0x9968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9967), 0x1b);
        // 1B 0018
        gbc.setState(0x6a78, 0xf615, 0x9e30, 0xaefc, 0x50df, 0xf0d7, 0x0, 0x1);
        gbc.writeMem(0x6a78, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf615);
        EXPECT(gbc.pc(), 0x6a79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0019
        gbc.setState(0x891d, 0xcf38, 0xe2c0, 0x3e1a, 0x2487, 0x4cdf, 0x1, 0x1);
        gbc.writeMem(0x891d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcf38);
        EXPECT(gbc.pc(), 0x891e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x891d), 0x1b);
        // 1B 001A
        gbc.setState(0x4d88, 0xecbb, 0xb2e0, 0xfc4d, 0xf295, 0x4d63, 0x0, 0x0);
        gbc.writeMem(0x4d88, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xecbb);
        EXPECT(gbc.pc(), 0x4d89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 001B
        gbc.setState(0x2f0e, 0x76b8, 0xfa20, 0x90c7, 0x32b5, 0x9d5b, 0x1, 0x1);
        gbc.writeMem(0x2f0e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x76b8);
        EXPECT(gbc.pc(), 0x2f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 001C
        gbc.setState(0xe47c, 0x7c07, 0x6ba0, 0x2ca7, 0xd4e0, 0x8cd4, 0x1, 0x1);
        gbc.writeMem(0xe47c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7c07);
        EXPECT(gbc.pc(), 0xe47d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe47c), 0x1b);
        // 1B 001D
        gbc.setState(0x25, 0x83f8, 0xbf30, 0x214f, 0xfe40, 0x6f1b, 0x1, 0x0);
        gbc.writeMem(0x25, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x83f8);
        EXPECT(gbc.pc(), 0x26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 001E
        gbc.setState(0x3cfe, 0x64c5, 0xc4b0, 0x506b, 0xc5a5, 0x69d3, 0x1, 0x0);
        gbc.writeMem(0x3cfe, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x64c5);
        EXPECT(gbc.pc(), 0x3cff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 001F
        gbc.setState(0x1e2b, 0x15e8, 0xb9a0, 0x592a, 0x181f, 0xb8a0, 0x1, 0x1);
        gbc.writeMem(0x1e2b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x15e8);
        EXPECT(gbc.pc(), 0x1e2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0020
        gbc.setState(0xca8f, 0xbc7d, 0x3260, 0x559b, 0xd5eb, 0x6976, 0x0, 0x0);
        gbc.writeMem(0xca8f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xbc7d);
        EXPECT(gbc.pc(), 0xca90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca8f), 0x1b);
        // 1B 0021
        gbc.setState(0x3e50, 0xa32f, 0x5fc0, 0x44f, 0xdb81, 0x620e, 0x1, 0x0);
        gbc.writeMem(0x3e50, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa32f);
        EXPECT(gbc.pc(), 0x3e51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0022
        gbc.setState(0x76c4, 0x8c6d, 0xf50, 0x1a9d, 0xee20, 0xea02, 0x1, 0x1);
        gbc.writeMem(0x76c4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8c6d);
        EXPECT(gbc.pc(), 0x76c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0023
        gbc.setState(0xa3bd, 0x6264, 0x90a0, 0x32d1, 0xfc63, 0x6903, 0x0, 0x0);
        gbc.writeMem(0xa3bd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6264);
        EXPECT(gbc.pc(), 0xa3be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3bd), 0x1b);
        // 1B 0024
        gbc.setState(0x8046, 0x7b4b, 0x8710, 0x97cf, 0x3a6a, 0x1bae, 0x1, 0x1);
        gbc.writeMem(0x8046, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7b4b);
        EXPECT(gbc.pc(), 0x8047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8046), 0x1b);
        // 1B 0026
        gbc.setState(0xea2e, 0x39e7, 0x7720, 0x5b39, 0x571e, 0x6d4, 0x1, 0x0);
        gbc.writeMem(0xea2e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x39e7);
        EXPECT(gbc.pc(), 0xea2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea2e), 0x1b);
        // 1B 0027
        gbc.setState(0xbbbc, 0x6617, 0xbe20, 0x6b42, 0x989e, 0x91f7, 0x1, 0x1);
        gbc.writeMem(0xbbbc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6617);
        EXPECT(gbc.pc(), 0xbbbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbbc), 0x1b);
        // 1B 0028
        gbc.setState(0xa65a, 0x13fa, 0x2c10, 0x1bd7, 0x2575, 0xf4bc, 0x1, 0x0);
        gbc.writeMem(0xa65a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x13fa);
        EXPECT(gbc.pc(), 0xa65b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa65a), 0x1b);
        // 1B 0029
        gbc.setState(0x3e92, 0xede8, 0xdb70, 0x758a, 0xaed1, 0x6815, 0x0, 0x1);
        gbc.writeMem(0x3e92, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xede8);
        EXPECT(gbc.pc(), 0x3e93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 002A
        gbc.setState(0x1748, 0xd1b5, 0x5640, 0x830d, 0x36da, 0xffb4, 0x0, 0x1);
        gbc.writeMem(0x1748, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd1b5);
        EXPECT(gbc.pc(), 0x1749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 002B
        gbc.setState(0x633f, 0xe0f8, 0xcea0, 0xd75c, 0x2f3c, 0xd564, 0x1, 0x1);
        gbc.writeMem(0x633f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe0f8);
        EXPECT(gbc.pc(), 0x6340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 002C
        gbc.setState(0x74e1, 0xc637, 0x30a0, 0xc34f, 0xd2b2, 0x168e, 0x1, 0x0);
        gbc.writeMem(0x74e1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc637);
        EXPECT(gbc.pc(), 0x74e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 002D
        gbc.setState(0xe48c, 0x8a5a, 0xb080, 0xc3c3, 0x7769, 0xe9e9, 0x0, 0x0);
        gbc.writeMem(0xe48c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8a5a);
        EXPECT(gbc.pc(), 0xe48d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe48c), 0x1b);
        // 1B 002E
        gbc.setState(0x1a85, 0x590c, 0x3460, 0x53be, 0xbeee, 0xccdc, 0x1, 0x0);
        gbc.writeMem(0x1a85, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x590c);
        EXPECT(gbc.pc(), 0x1a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 002F
        gbc.setState(0xebac, 0xf82a, 0x64c0, 0xfa29, 0x3b90, 0xd415, 0x0, 0x0);
        gbc.writeMem(0xebac, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf82a);
        EXPECT(gbc.pc(), 0xebad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebac), 0x1b);
        // 1B 0030
        gbc.setState(0x154d, 0xdbc0, 0x7180, 0x53c7, 0xcc0f, 0x88b1, 0x0, 0x1);
        gbc.writeMem(0x154d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xdbc0);
        EXPECT(gbc.pc(), 0x154e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0031
        gbc.setState(0x121b, 0x9595, 0x1580, 0xfcf3, 0x4190, 0x2e1, 0x0, 0x1);
        gbc.writeMem(0x121b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9595);
        EXPECT(gbc.pc(), 0x121c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0032
        gbc.setState(0x3df7, 0x9788, 0xa110, 0xe452, 0x2ba3, 0x9f16, 0x1, 0x0);
        gbc.writeMem(0x3df7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9788);
        EXPECT(gbc.pc(), 0x3df8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0033
        gbc.setState(0x12b5, 0x50e, 0xebc0, 0x961a, 0xdfa9, 0xf15, 0x1, 0x1);
        gbc.writeMem(0x12b5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x50e);
        EXPECT(gbc.pc(), 0x12b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0034
        gbc.setState(0x7871, 0x686a, 0x2660, 0xc6f4, 0x837a, 0x6a85, 0x1, 0x0);
        gbc.writeMem(0x7871, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x686a);
        EXPECT(gbc.pc(), 0x7872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0035
        gbc.setState(0x367f, 0x2a47, 0xb740, 0x3410, 0x4553, 0x50ab, 0x1, 0x0);
        gbc.writeMem(0x367f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2a47);
        EXPECT(gbc.pc(), 0x3680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0036
        gbc.setState(0x98fd, 0x4df4, 0x7500, 0xde62, 0x79f5, 0xe837, 0x0, 0x1);
        gbc.writeMem(0x98fd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x4df4);
        EXPECT(gbc.pc(), 0x98fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98fd), 0x1b);
        // 1B 0037
        gbc.setState(0x9681, 0x8153, 0x3af0, 0x93ca, 0x8b51, 0x1ef4, 0x1, 0x0);
        gbc.writeMem(0x9681, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8153);
        EXPECT(gbc.pc(), 0x9682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9681), 0x1b);
        // 1B 0038
        gbc.setState(0x65a3, 0xaf8a, 0x1c10, 0x6bae, 0x9ac9, 0x1159, 0x1, 0x0);
        gbc.writeMem(0x65a3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xaf8a);
        EXPECT(gbc.pc(), 0x65a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0039
        gbc.setState(0x2091, 0x5539, 0x5600, 0x3cf0, 0x57db, 0x8264, 0x0, 0x1);
        gbc.writeMem(0x2091, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5539);
        EXPECT(gbc.pc(), 0x2092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 003B
        gbc.setState(0xa315, 0xbab6, 0xbd60, 0x3823, 0x136f, 0x74b0, 0x0, 0x1);
        gbc.writeMem(0xa315, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xbab6);
        EXPECT(gbc.pc(), 0xa316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa315), 0x1b);
        // 1B 003C
        gbc.setState(0x6e5, 0xecdb, 0x2d80, 0x782b, 0x60ce, 0x88bd, 0x1, 0x1);
        gbc.writeMem(0x6e5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xecdb);
        EXPECT(gbc.pc(), 0x6e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 003D
        gbc.setState(0xa25d, 0xfc32, 0x7ee0, 0xf0da, 0x4531, 0xf16e, 0x1, 0x1);
        gbc.writeMem(0xa25d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfc32);
        EXPECT(gbc.pc(), 0xa25e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa25d), 0x1b);
        // 1B 003E
        gbc.setState(0x1fbd, 0xef6b, 0x2a80, 0x116e, 0x8251, 0x37df, 0x1, 0x0);
        gbc.writeMem(0x1fbd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xef6b);
        EXPECT(gbc.pc(), 0x1fbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 003F
        gbc.setState(0x730d, 0xdd02, 0x9f80, 0x56d2, 0xd65d, 0x7df3, 0x1, 0x1);
        gbc.writeMem(0x730d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xdd02);
        EXPECT(gbc.pc(), 0x730e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0040
        gbc.setState(0x9d, 0xb802, 0xc460, 0x8765, 0x3eea, 0x43eb, 0x1, 0x1);
        gbc.writeMem(0x9d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb802);
        EXPECT(gbc.pc(), 0x9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0041
        gbc.setState(0x44b1, 0x1668, 0xabe0, 0xee1b, 0x60a0, 0x770b, 0x0, 0x1);
        gbc.writeMem(0x44b1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1668);
        EXPECT(gbc.pc(), 0x44b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0042
        gbc.setState(0x4126, 0xc2cf, 0x7770, 0xeee6, 0xc27a, 0xbc21, 0x0, 0x0);
        gbc.writeMem(0x4126, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xc2cf);
        EXPECT(gbc.pc(), 0x4127);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0043
        gbc.setState(0x150e, 0xe129, 0xf8d0, 0xbfee, 0x57ca, 0xf655, 0x1, 0x1);
        gbc.writeMem(0x150e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe129);
        EXPECT(gbc.pc(), 0x150f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0044
        gbc.setState(0xcf22, 0x7a75, 0x9ed0, 0xd8d0, 0x4c0, 0x8a7, 0x0, 0x0);
        gbc.writeMem(0xcf22, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7a75);
        EXPECT(gbc.pc(), 0xcf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf22), 0x1b);
        // 1B 0045
        gbc.setState(0x9883, 0x113e, 0xc3e0, 0x3af2, 0x84d9, 0xd5dd, 0x1, 0x0);
        gbc.writeMem(0x9883, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x113e);
        EXPECT(gbc.pc(), 0x9884);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9883), 0x1b);
        // 1B 0046
        gbc.setState(0x591b, 0x2005, 0x400, 0xb3f5, 0xe76, 0xf607, 0x0, 0x1);
        gbc.writeMem(0x591b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2005);
        EXPECT(gbc.pc(), 0x591c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0047
        gbc.setState(0x5809, 0x5af7, 0xf640, 0xb568, 0x9bd2, 0x6dfe, 0x0, 0x0);
        gbc.writeMem(0x5809, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5af7);
        EXPECT(gbc.pc(), 0x580a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0048
        gbc.setState(0x55b2, 0x630d, 0xd580, 0xa584, 0xba11, 0x5961, 0x0, 0x0);
        gbc.writeMem(0x55b2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x630d);
        EXPECT(gbc.pc(), 0x55b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0049
        gbc.setState(0x340e, 0x34e0, 0x7f70, 0x2962, 0x4c41, 0xc96c, 0x0, 0x1);
        gbc.writeMem(0x340e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x34e0);
        EXPECT(gbc.pc(), 0x340f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 004A
        gbc.setState(0x5427, 0xb9b1, 0x590, 0x6e7c, 0x7345, 0xe67a, 0x1, 0x0);
        gbc.writeMem(0x5427, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb9b1);
        EXPECT(gbc.pc(), 0x5428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 004C
        gbc.setState(0xeda4, 0xbe77, 0x1f00, 0x23f6, 0xb5b9, 0x35dd, 0x0, 0x1);
        gbc.writeMem(0xeda4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xbe77);
        EXPECT(gbc.pc(), 0xeda5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeda4), 0x1b);
        // 1B 004D
        gbc.setState(0x471a, 0x423a, 0xed0, 0x2278, 0x7547, 0xa20d, 0x0, 0x1);
        gbc.writeMem(0x471a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x423a);
        EXPECT(gbc.pc(), 0x471b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 004E
        gbc.setState(0x9e37, 0xf0b8, 0x6f90, 0xc1fc, 0x8446, 0x3306, 0x0, 0x0);
        gbc.writeMem(0x9e37, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf0b8);
        EXPECT(gbc.pc(), 0x9e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e37), 0x1b);
        // 1B 004F
        gbc.setState(0x9de4, 0x3f54, 0x650, 0x4ff5, 0x3529, 0xfa1, 0x0, 0x0);
        gbc.writeMem(0x9de4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3f54);
        EXPECT(gbc.pc(), 0x9de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9de4), 0x1b);
        // 1B 0050
        gbc.setState(0x81fa, 0xf188, 0x400, 0x3dc4, 0x6807, 0x2c40, 0x1, 0x0);
        gbc.writeMem(0x81fa, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf188);
        EXPECT(gbc.pc(), 0x81fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81fa), 0x1b);
        // 1B 0051
        gbc.setState(0x1b15, 0x3592, 0x3790, 0xb775, 0xc66e, 0x650c, 0x0, 0x0);
        gbc.writeMem(0x1b15, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3592);
        EXPECT(gbc.pc(), 0x1b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0052
        gbc.setState(0xa2c6, 0x962f, 0x5c20, 0x88ea, 0xf791, 0x8de2, 0x0, 0x1);
        gbc.writeMem(0xa2c6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x962f);
        EXPECT(gbc.pc(), 0xa2c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c6), 0x1b);
        // 1B 0053
        gbc.setState(0xaac5, 0xdbec, 0x4ed0, 0x9715, 0x7c64, 0x1191, 0x1, 0x0);
        gbc.writeMem(0xaac5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xdbec);
        EXPECT(gbc.pc(), 0xaac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaac5), 0x1b);
        // 1B 0054
        gbc.setState(0xd581, 0x20af, 0xb930, 0xc83d, 0x3986, 0x7f3, 0x1, 0x1);
        gbc.writeMem(0xd581, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x20af);
        EXPECT(gbc.pc(), 0xd582);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd581), 0x1b);
        // 1B 0055
        gbc.setState(0xa154, 0x4b25, 0x60a0, 0xf500, 0xb371, 0xf54b, 0x0, 0x1);
        gbc.writeMem(0xa154, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4b25);
        EXPECT(gbc.pc(), 0xa155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa154), 0x1b);
        // 1B 0057
        gbc.setState(0x1ad0, 0x8d77, 0x9e50, 0xa7d6, 0xda16, 0xa70e, 0x0, 0x0);
        gbc.writeMem(0x1ad0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8d77);
        EXPECT(gbc.pc(), 0x1ad1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0058
        gbc.setState(0x29da, 0xe80b, 0xece0, 0xfefc, 0x3aed, 0xb4e, 0x1, 0x0);
        gbc.writeMem(0x29da, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe80b);
        EXPECT(gbc.pc(), 0x29db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0059
        gbc.setState(0x243a, 0xb4ca, 0x3640, 0x8bab, 0x8eb2, 0xf07d, 0x1, 0x1);
        gbc.writeMem(0x243a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb4ca);
        EXPECT(gbc.pc(), 0x243b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 005B
        gbc.setState(0x6db1, 0xcf32, 0x6020, 0x93f1, 0x938c, 0x140d, 0x1, 0x0);
        gbc.writeMem(0x6db1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcf32);
        EXPECT(gbc.pc(), 0x6db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 005C
        gbc.setState(0x3f4b, 0x43c1, 0xc870, 0xdc7b, 0xa184, 0x5d6c, 0x1, 0x1);
        gbc.writeMem(0x3f4b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x43c1);
        EXPECT(gbc.pc(), 0x3f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 005D
        gbc.setState(0x446e, 0xaa69, 0x5a20, 0x75c, 0xb2b1, 0x2126, 0x1, 0x0);
        gbc.writeMem(0x446e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xaa69);
        EXPECT(gbc.pc(), 0x446f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 005E
        gbc.setState(0x915a, 0x528b, 0x1d60, 0x4f, 0x50e4, 0x4d76, 0x0, 0x0);
        gbc.writeMem(0x915a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x528b);
        EXPECT(gbc.pc(), 0x915b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x915a), 0x1b);
        // 1B 005F
        gbc.setState(0x868e, 0xa177, 0xd1a0, 0x1bd, 0x8ad6, 0x4e13, 0x0, 0x0);
        gbc.writeMem(0x868e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa177);
        EXPECT(gbc.pc(), 0x868f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x868e), 0x1b);
        // 1B 0060
        gbc.setState(0x5f1d, 0x69a2, 0x1750, 0x47a2, 0xf7cf, 0xd632, 0x0, 0x1);
        gbc.writeMem(0x5f1d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x69a2);
        EXPECT(gbc.pc(), 0x5f1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0061
        gbc.setState(0x6b0d, 0x56eb, 0xcfc0, 0x7a3c, 0x4bcb, 0x3aa7, 0x1, 0x0);
        gbc.writeMem(0x6b0d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x56eb);
        EXPECT(gbc.pc(), 0x6b0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0062
        gbc.setState(0x2f6b, 0x95f9, 0x710, 0xe34e, 0x70f0, 0xc480, 0x1, 0x0);
        gbc.writeMem(0x2f6b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x95f9);
        EXPECT(gbc.pc(), 0x2f6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0064
        gbc.setState(0x64ff, 0xbf92, 0x49f0, 0x98a3, 0xf25, 0x9ad3, 0x0, 0x1);
        gbc.writeMem(0x64ff, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xbf92);
        EXPECT(gbc.pc(), 0x6500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0065
        gbc.setState(0x1bf0, 0xfe64, 0xaed0, 0x95de, 0x2f25, 0xae, 0x0, 0x1);
        gbc.writeMem(0x1bf0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xfe64);
        EXPECT(gbc.pc(), 0x1bf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0067
        gbc.setState(0x1a4e, 0x5372, 0xe7b0, 0x2d5e, 0x1ca7, 0xb87, 0x1, 0x0);
        gbc.writeMem(0x1a4e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5372);
        EXPECT(gbc.pc(), 0x1a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0068
        gbc.setState(0x6418, 0x365e, 0x9ed0, 0x1ca1, 0x8d0d, 0xe37a, 0x1, 0x0);
        gbc.writeMem(0x6418, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x365e);
        EXPECT(gbc.pc(), 0x6419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0069
        gbc.setState(0x570f, 0xae50, 0xe960, 0x7b11, 0x4f15, 0x18ea, 0x1, 0x1);
        gbc.writeMem(0x570f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xae50);
        EXPECT(gbc.pc(), 0x5710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 006A
        gbc.setState(0x1922, 0x2de5, 0xf260, 0x6493, 0xaef8, 0x4f1c, 0x1, 0x1);
        gbc.writeMem(0x1922, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2de5);
        EXPECT(gbc.pc(), 0x1923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 006B
        gbc.setState(0x3f9, 0x226, 0x9b90, 0x7cca, 0xbd2e, 0xeb7c, 0x0, 0x0);
        gbc.writeMem(0x3f9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x226);
        EXPECT(gbc.pc(), 0x3fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 006C
        gbc.setState(0x7bd, 0x5891, 0x3d40, 0xd7f7, 0xb6d2, 0xc89c, 0x0, 0x1);
        gbc.writeMem(0x7bd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5891);
        EXPECT(gbc.pc(), 0x7be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 006D
        gbc.setState(0xa4b9, 0x31e0, 0x4d90, 0xdd20, 0x4231, 0x241d, 0x0, 0x1);
        gbc.writeMem(0xa4b9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x31e0);
        EXPECT(gbc.pc(), 0xa4ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4b9), 0x1b);
        // 1B 006E
        gbc.setState(0x2daf, 0xb95b, 0xd360, 0xae01, 0x4262, 0xd06d, 0x0, 0x0);
        gbc.writeMem(0x2daf, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xb95b);
        EXPECT(gbc.pc(), 0x2db0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 006F
        gbc.setState(0x6aa6, 0x3c3e, 0x59a0, 0xbee1, 0xd56, 0xc566, 0x1, 0x0);
        gbc.writeMem(0x6aa6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3c3e);
        EXPECT(gbc.pc(), 0x6aa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0070
        gbc.setState(0x97f8, 0x4747, 0x8690, 0x926, 0x96ab, 0xc407, 0x1, 0x1);
        gbc.writeMem(0x97f8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4747);
        EXPECT(gbc.pc(), 0x97f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97f8), 0x1b);
        // 1B 0071
        gbc.setState(0x9b5d, 0xc4f, 0x3f30, 0x6d52, 0x4d24, 0xada4, 0x0, 0x1);
        gbc.writeMem(0x9b5d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc4f);
        EXPECT(gbc.pc(), 0x9b5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b5d), 0x1b);
        // 1B 0072
        gbc.setState(0xd5cd, 0x5c2, 0x8260, 0xe28d, 0x4d65, 0xf861, 0x0, 0x0);
        gbc.writeMem(0xd5cd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5c2);
        EXPECT(gbc.pc(), 0xd5ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5cd), 0x1b);
        // 1B 0073
        gbc.setState(0xaa24, 0xda93, 0x9700, 0x57a9, 0x2a6b, 0x881d, 0x0, 0x1);
        gbc.writeMem(0xaa24, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xda93);
        EXPECT(gbc.pc(), 0xaa25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa24), 0x1b);
        // 1B 0074
        gbc.setState(0x1bad, 0xf021, 0x43a0, 0x8162, 0xfff1, 0x78b3, 0x0, 0x0);
        gbc.writeMem(0x1bad, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf021);
        EXPECT(gbc.pc(), 0x1bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0077
        gbc.setState(0x7b78, 0x2060, 0xfa60, 0x174c, 0x6cdc, 0x4d31, 0x0, 0x1);
        gbc.writeMem(0x7b78, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2060);
        EXPECT(gbc.pc(), 0x7b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0079
        gbc.setState(0x7134, 0x1a92, 0x8490, 0xb93e, 0x95d4, 0x7532, 0x0, 0x0);
        gbc.writeMem(0x7134, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1a92);
        EXPECT(gbc.pc(), 0x7135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 007A
        gbc.setState(0xb9a3, 0xc1f, 0xb0a0, 0x6961, 0x140c, 0x1bc7, 0x1, 0x0);
        gbc.writeMem(0xb9a3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc1f);
        EXPECT(gbc.pc(), 0xb9a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9a3), 0x1b);
        // 1B 007B
        gbc.setState(0xe409, 0x7b09, 0x3180, 0x9d41, 0xc9d8, 0xe2a6, 0x1, 0x1);
        gbc.writeMem(0xe409, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7b09);
        EXPECT(gbc.pc(), 0xe40a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe409), 0x1b);
        // 1B 007C
        gbc.setState(0x73e0, 0xdf8f, 0x7600, 0xa6eb, 0xe7bd, 0x94f6, 0x0, 0x1);
        gbc.writeMem(0x73e0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdf8f);
        EXPECT(gbc.pc(), 0x73e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 007D
        gbc.setState(0xa5dd, 0x1308, 0xa5d0, 0x92e, 0x36b8, 0x9dfe, 0x0, 0x1);
        gbc.writeMem(0xa5dd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1308);
        EXPECT(gbc.pc(), 0xa5de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5dd), 0x1b);
        // 1B 007E
        gbc.setState(0xc302, 0x3df6, 0x830, 0x74ba, 0x22c, 0x4bbe, 0x0, 0x0);
        gbc.writeMem(0xc302, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3df6);
        EXPECT(gbc.pc(), 0xc303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc302), 0x1b);
        // 1B 007F
        gbc.setState(0xb13a, 0x904e, 0x8230, 0xb8a9, 0x394a, 0xa641, 0x0, 0x1);
        gbc.writeMem(0xb13a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x904e);
        EXPECT(gbc.pc(), 0xb13b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb13a), 0x1b);
        // 1B 0080
        gbc.setState(0x5fcd, 0x7b26, 0xbf10, 0x6321, 0x5916, 0xa96, 0x0, 0x1);
        gbc.writeMem(0x5fcd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7b26);
        EXPECT(gbc.pc(), 0x5fce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0081
        gbc.setState(0x654a, 0x661b, 0x7a10, 0x617e, 0x83f7, 0xa887, 0x0, 0x1);
        gbc.writeMem(0x654a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x661b);
        EXPECT(gbc.pc(), 0x654b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0082
        gbc.setState(0xb060, 0xfe5d, 0xba0, 0x34ce, 0x8f92, 0x5ca7, 0x0, 0x0);
        gbc.writeMem(0xb060, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfe5d);
        EXPECT(gbc.pc(), 0xb061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb060), 0x1b);
        // 1B 0083
        gbc.setState(0x27a5, 0x9ea8, 0xc6e0, 0xabc0, 0xeb77, 0x321e, 0x0, 0x1);
        gbc.writeMem(0x27a5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9ea8);
        EXPECT(gbc.pc(), 0x27a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0084
        gbc.setState(0x50d4, 0x1e2, 0xa4f0, 0xf68c, 0xd680, 0x1cdf, 0x0, 0x0);
        gbc.writeMem(0x50d4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x1e2);
        EXPECT(gbc.pc(), 0x50d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0085
        gbc.setState(0xde8, 0x337a, 0xce20, 0xdd3c, 0xdc0b, 0x20b3, 0x1, 0x1);
        gbc.writeMem(0xde8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x337a);
        EXPECT(gbc.pc(), 0xde9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0086
        gbc.setState(0xc370, 0x138b, 0x4ff0, 0x9302, 0x4048, 0x25ea, 0x1, 0x0);
        gbc.writeMem(0xc370, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x138b);
        EXPECT(gbc.pc(), 0xc371);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc370), 0x1b);
        // 1B 0087
        gbc.setState(0x213, 0x6d24, 0x85f0, 0xebc7, 0x9586, 0x3793, 0x0, 0x0);
        gbc.writeMem(0x213, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6d24);
        EXPECT(gbc.pc(), 0x214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0088
        gbc.setState(0xbf1, 0x42c6, 0x3450, 0xe3d0, 0x73e9, 0xd03c, 0x0, 0x0);
        gbc.writeMem(0xbf1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x42c6);
        EXPECT(gbc.pc(), 0xbf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0089
        gbc.setState(0x57eb, 0xf149, 0x5a00, 0x4898, 0x8281, 0x84f3, 0x1, 0x0);
        gbc.writeMem(0x57eb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf149);
        EXPECT(gbc.pc(), 0x57ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 008B
        gbc.setState(0x895a, 0x29d1, 0x4750, 0x6661, 0x8790, 0x6c50, 0x1, 0x1);
        gbc.writeMem(0x895a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x29d1);
        EXPECT(gbc.pc(), 0x895b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895a), 0x1b);
        // 1B 008C
        gbc.setState(0x1332, 0xd306, 0x30e0, 0x36b7, 0xb48d, 0x7a88, 0x1, 0x1);
        gbc.writeMem(0x1332, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd306);
        EXPECT(gbc.pc(), 0x1333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 008D
        gbc.setState(0xdc38, 0x42f0, 0x8e60, 0x6c, 0xe8db, 0x945d, 0x1, 0x1);
        gbc.writeMem(0xdc38, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x42f0);
        EXPECT(gbc.pc(), 0xdc39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc38), 0x1b);
        // 1B 008E
        gbc.setState(0x7772, 0x2317, 0xf810, 0x6c6f, 0x6e0b, 0xc649, 0x0, 0x0);
        gbc.writeMem(0x7772, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x2317);
        EXPECT(gbc.pc(), 0x7773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 008F
        gbc.setState(0x7fd4, 0xc1c3, 0x8a20, 0xac5c, 0x5755, 0x7dbd, 0x0, 0x0);
        gbc.writeMem(0x7fd4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc1c3);
        EXPECT(gbc.pc(), 0x7fd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0090
        gbc.setState(0xb589, 0xe447, 0xc000, 0x1f9f, 0x93eb, 0xb402, 0x0, 0x1);
        gbc.writeMem(0xb589, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe447);
        EXPECT(gbc.pc(), 0xb58a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb589), 0x1b);
        // 1B 0091
        gbc.setState(0xbb7b, 0xd663, 0xa350, 0x61af, 0x9b53, 0xdd70, 0x1, 0x0);
        gbc.writeMem(0xbb7b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd663);
        EXPECT(gbc.pc(), 0xbb7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb7b), 0x1b);
        // 1B 0092
        gbc.setState(0xc319, 0xfae, 0x5c70, 0xb22f, 0x109f, 0x5fa4, 0x0, 0x1);
        gbc.writeMem(0xc319, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xfae);
        EXPECT(gbc.pc(), 0xc31a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc319), 0x1b);
        // 1B 0093
        gbc.setState(0xb0f7, 0x2b20, 0xcc20, 0xe5e1, 0x2c16, 0x492e, 0x1, 0x1);
        gbc.writeMem(0xb0f7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2b20);
        EXPECT(gbc.pc(), 0xb0f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0f7), 0x1b);
        // 1B 0094
        gbc.setState(0xe9f6, 0x869e, 0x6d0, 0xabec, 0x1325, 0xecf1, 0x0, 0x0);
        gbc.writeMem(0xe9f6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x869e);
        EXPECT(gbc.pc(), 0xe9f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f6), 0x1b);
        // 1B 0095
        gbc.setState(0xaa89, 0xb83c, 0xa1e0, 0xf9c2, 0x8359, 0x31ec, 0x0, 0x0);
        gbc.writeMem(0xaa89, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb83c);
        EXPECT(gbc.pc(), 0xaa8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa89), 0x1b);
        // 1B 0096
        gbc.setState(0x6682, 0x8bbb, 0x8970, 0x99e7, 0x275, 0xce46, 0x1, 0x1);
        gbc.writeMem(0x6682, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8bbb);
        EXPECT(gbc.pc(), 0x6683);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0097
        gbc.setState(0xcb89, 0xd21, 0x4f20, 0xf948, 0x5174, 0x5687, 0x1, 0x1);
        gbc.writeMem(0xcb89, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd21);
        EXPECT(gbc.pc(), 0xcb8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb89), 0x1b);
        // 1B 0098
        gbc.setState(0x4b56, 0x3c2e, 0x73c0, 0x5cd9, 0xbf5, 0x45cc, 0x1, 0x1);
        gbc.writeMem(0x4b56, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3c2e);
        EXPECT(gbc.pc(), 0x4b57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0099
        gbc.setState(0x30ab, 0x7c53, 0xc420, 0x9e76, 0x138, 0x3cab, 0x1, 0x1);
        gbc.writeMem(0x30ab, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7c53);
        EXPECT(gbc.pc(), 0x30ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 009A
        gbc.setState(0x8fd1, 0xcbcd, 0xd910, 0xb50e, 0x271f, 0x35a2, 0x1, 0x0);
        gbc.writeMem(0x8fd1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xcbcd);
        EXPECT(gbc.pc(), 0x8fd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fd1), 0x1b);
        // 1B 009B
        gbc.setState(0x95bd, 0x862c, 0xdfb0, 0x41ea, 0xe67b, 0xa48a, 0x1, 0x1);
        gbc.writeMem(0x95bd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x862c);
        EXPECT(gbc.pc(), 0x95be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95bd), 0x1b);
        // 1B 009C
        gbc.setState(0xa9bb, 0x9de8, 0x56c0, 0x1134, 0x68e1, 0xd95c, 0x0, 0x1);
        gbc.writeMem(0xa9bb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9de8);
        EXPECT(gbc.pc(), 0xa9bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9bb), 0x1b);
        // 1B 009D
        gbc.setState(0x5c8e, 0xd3d8, 0x3130, 0x6553, 0x3c56, 0x29e6, 0x0, 0x1);
        gbc.writeMem(0x5c8e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd3d8);
        EXPECT(gbc.pc(), 0x5c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 009E
        gbc.setState(0x690d, 0xc7be, 0x25c0, 0x6993, 0x32a9, 0x1950, 0x0, 0x1);
        gbc.writeMem(0x690d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc7be);
        EXPECT(gbc.pc(), 0x690e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 009F
        gbc.setState(0x4db2, 0x7f55, 0x1110, 0x1c15, 0x2c2f, 0xc4c9, 0x1, 0x1);
        gbc.writeMem(0x4db2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7f55);
        EXPECT(gbc.pc(), 0x4db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00A0
        gbc.setState(0x426c, 0xb580, 0x4110, 0x6d19, 0xd9c2, 0xeb1e, 0x0, 0x1);
        gbc.writeMem(0x426c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb580);
        EXPECT(gbc.pc(), 0x426d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00A1
        gbc.setState(0x94d8, 0x85b0, 0x7bb0, 0xb543, 0xacca, 0xafd8, 0x0, 0x0);
        gbc.writeMem(0x94d8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x85b0);
        EXPECT(gbc.pc(), 0x94d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94d8), 0x1b);
        // 1B 00A2
        gbc.setState(0x1cb9, 0x7f31, 0x83e0, 0xc8ef, 0xa9fa, 0x7ce2, 0x0, 0x0);
        gbc.writeMem(0x1cb9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7f31);
        EXPECT(gbc.pc(), 0x1cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 00A3
        gbc.setState(0x7aab, 0x1631, 0xf890, 0x6ef6, 0xaf8c, 0x3037, 0x1, 0x0);
        gbc.writeMem(0x7aab, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1631);
        EXPECT(gbc.pc(), 0x7aac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00A4
        gbc.setState(0x1f96, 0x17e8, 0xbc40, 0x47ae, 0xb549, 0x9571, 0x0, 0x1);
        gbc.writeMem(0x1f96, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x17e8);
        EXPECT(gbc.pc(), 0x1f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00A6
        gbc.setState(0x5340, 0x94e9, 0x8d00, 0x8630, 0xfa7d, 0xec4e, 0x1, 0x1);
        gbc.writeMem(0x5340, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x94e9);
        EXPECT(gbc.pc(), 0x5341);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00A7
        gbc.setState(0xce43, 0x59ee, 0x1650, 0x1fd1, 0x5d1e, 0x50cd, 0x1, 0x1);
        gbc.writeMem(0xce43, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x59ee);
        EXPECT(gbc.pc(), 0xce44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce43), 0x1b);
        // 1B 00A8
        gbc.setState(0xad42, 0xb0ef, 0xd8c0, 0xf112, 0xef42, 0x4f5b, 0x0, 0x1);
        gbc.writeMem(0xad42, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb0ef);
        EXPECT(gbc.pc(), 0xad43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad42), 0x1b);
        // 1B 00A9
        gbc.setState(0x3cc7, 0xbb76, 0x60b0, 0x31cd, 0xf41e, 0x43c9, 0x0, 0x0);
        gbc.writeMem(0x3cc7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbb76);
        EXPECT(gbc.pc(), 0x3cc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 00AA
        gbc.setState(0xe61e, 0x155d, 0x4800, 0xff7b, 0x2731, 0xeb94, 0x0, 0x1);
        gbc.writeMem(0xe61e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x155d);
        EXPECT(gbc.pc(), 0xe61f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe61e), 0x1b);
        // 1B 00AB
        gbc.setState(0x7bde, 0x2a46, 0x8580, 0x955a, 0x85e1, 0xfa5f, 0x1, 0x1);
        gbc.writeMem(0x7bde, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2a46);
        EXPECT(gbc.pc(), 0x7bdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00AC
        gbc.setState(0x3613, 0xab65, 0xcac0, 0x2661, 0x309b, 0x9898, 0x1, 0x1);
        gbc.writeMem(0x3613, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xab65);
        EXPECT(gbc.pc(), 0x3614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00AE
        gbc.setState(0xa0d4, 0x33f6, 0xec80, 0x5c1a, 0xedf6, 0x7765, 0x1, 0x0);
        gbc.writeMem(0xa0d4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x33f6);
        EXPECT(gbc.pc(), 0xa0d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d4), 0x1b);
        // 1B 00B0
        gbc.setState(0xd535, 0x9e71, 0x1100, 0xe3d2, 0xe4a1, 0x7454, 0x1, 0x0);
        gbc.writeMem(0xd535, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9e71);
        EXPECT(gbc.pc(), 0xd536);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd535), 0x1b);
        // 1B 00B1
        gbc.setState(0xa855, 0x20d0, 0x5e90, 0xf416, 0xdf29, 0xee27, 0x1, 0x0);
        gbc.writeMem(0xa855, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x20d0);
        EXPECT(gbc.pc(), 0xa856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa855), 0x1b);
        // 1B 00B2
        gbc.setState(0xc375, 0x7d16, 0x2da0, 0x7f7, 0x66b0, 0x24ca, 0x1, 0x0);
        gbc.writeMem(0xc375, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x7d16);
        EXPECT(gbc.pc(), 0xc376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc375), 0x1b);
        // 1B 00B3
        gbc.setState(0xb680, 0xad4c, 0xd610, 0xa8ae, 0x6aa2, 0xf3b7, 0x1, 0x0);
        gbc.writeMem(0xb680, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xad4c);
        EXPECT(gbc.pc(), 0xb681);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb680), 0x1b);
        // 1B 00B4
        gbc.setState(0x3040, 0x962, 0xd730, 0xd0b2, 0x642d, 0xda40, 0x0, 0x1);
        gbc.writeMem(0x3040, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x962);
        EXPECT(gbc.pc(), 0x3041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 00B5
        gbc.setState(0x5b3, 0x37c3, 0x6800, 0x8824, 0xfb13, 0xf5a, 0x0, 0x1);
        gbc.writeMem(0x5b3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x37c3);
        EXPECT(gbc.pc(), 0x5b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00B6
        gbc.setState(0x9cf7, 0xe97b, 0x3f40, 0xf538, 0x7a86, 0x33fe, 0x1, 0x0);
        gbc.writeMem(0x9cf7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe97b);
        EXPECT(gbc.pc(), 0x9cf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf7), 0x1b);
        // 1B 00B7
        gbc.setState(0x7afd, 0xf357, 0x3680, 0x597, 0x5ffa, 0xbece, 0x0, 0x1);
        gbc.writeMem(0x7afd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf357);
        EXPECT(gbc.pc(), 0x7afe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00B8
        gbc.setState(0x3931, 0x676c, 0x4dd0, 0xe350, 0xbf7b, 0x952e, 0x1, 0x1);
        gbc.writeMem(0x3931, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x676c);
        EXPECT(gbc.pc(), 0x3932);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00B9
        gbc.setState(0x769d, 0x6254, 0xbf90, 0x3f95, 0x3ff8, 0xaa1b, 0x1, 0x1);
        gbc.writeMem(0x769d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6254);
        EXPECT(gbc.pc(), 0x769e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00BA
        gbc.setState(0x7394, 0x9942, 0xa400, 0xb336, 0xc8c2, 0x7fed, 0x1, 0x0);
        gbc.writeMem(0x7394, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9942);
        EXPECT(gbc.pc(), 0x7395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00BB
        gbc.setState(0xbf81, 0xbcd, 0xacd0, 0x6983, 0x8d76, 0xe7b1, 0x1, 0x0);
        gbc.writeMem(0xbf81, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xbcd);
        EXPECT(gbc.pc(), 0xbf82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf81), 0x1b);
        // 1B 00BC
        gbc.setState(0xaee, 0x5f83, 0xb940, 0xbae7, 0x5e73, 0xd432, 0x0, 0x0);
        gbc.writeMem(0xaee, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5f83);
        EXPECT(gbc.pc(), 0xaef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00BD
        gbc.setState(0x4023, 0x4f33, 0xa000, 0xb071, 0xb9a9, 0x187f, 0x0, 0x1);
        gbc.writeMem(0x4023, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4f33);
        EXPECT(gbc.pc(), 0x4024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00BE
        gbc.setState(0x2a77, 0x8285, 0x5790, 0xd2a3, 0x5582, 0xf4d3, 0x1, 0x1);
        gbc.writeMem(0x2a77, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8285);
        EXPECT(gbc.pc(), 0x2a78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00BF
        gbc.setState(0x4456, 0xfeef, 0xa720, 0xc20d, 0x8a8a, 0x2076, 0x1, 0x1);
        gbc.writeMem(0x4456, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfeef);
        EXPECT(gbc.pc(), 0x4457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 00C0
        gbc.setState(0x81f7, 0xd7e0, 0xa560, 0x9b38, 0xf80f, 0x60c3, 0x1, 0x1);
        gbc.writeMem(0x81f7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd7e0);
        EXPECT(gbc.pc(), 0x81f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81f7), 0x1b);
        // 1B 00C1
        gbc.setState(0x42da, 0x9443, 0x9a0, 0xaf5a, 0x42e, 0xfd43, 0x0, 0x0);
        gbc.writeMem(0x42da, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9443);
        EXPECT(gbc.pc(), 0x42db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 00C2
        gbc.setState(0xdcd8, 0xf686, 0x56f0, 0xbe92, 0xd6b4, 0x2fb0, 0x1, 0x0);
        gbc.writeMem(0xdcd8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf686);
        EXPECT(gbc.pc(), 0xdcd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcd8), 0x1b);
        // 1B 00C3
        gbc.setState(0x16b2, 0x4dac, 0x9730, 0x5e77, 0x3f20, 0xc3e9, 0x1, 0x0);
        gbc.writeMem(0x16b2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4dac);
        EXPECT(gbc.pc(), 0x16b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 00C4
        gbc.setState(0x120c, 0x5411, 0x1fc0, 0xd771, 0xf80c, 0xeafd, 0x0, 0x1);
        gbc.writeMem(0x120c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5411);
        EXPECT(gbc.pc(), 0x120d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00C5
        gbc.setState(0x7fbe, 0xc521, 0xf2c0, 0x128, 0xb232, 0x445b, 0x1, 0x1);
        gbc.writeMem(0x7fbe, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc521);
        EXPECT(gbc.pc(), 0x7fbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00C6
        gbc.setState(0x263a, 0x8443, 0xdf10, 0xe901, 0xf082, 0xa316, 0x0, 0x1);
        gbc.writeMem(0x263a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8443);
        EXPECT(gbc.pc(), 0x263b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00C7
        gbc.setState(0x91cd, 0x5803, 0x9e40, 0x7312, 0x3833, 0x2e9e, 0x0, 0x0);
        gbc.writeMem(0x91cd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5803);
        EXPECT(gbc.pc(), 0x91ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91cd), 0x1b);
        // 1B 00C9
        gbc.setState(0x5e97, 0x214b, 0xcd10, 0x2600, 0x3f9, 0x8126, 0x1, 0x1);
        gbc.writeMem(0x5e97, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x214b);
        EXPECT(gbc.pc(), 0x5e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00CA
        gbc.setState(0x409a, 0xa458, 0x6470, 0x4f4d, 0xb366, 0xcfb5, 0x0, 0x1);
        gbc.writeMem(0x409a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa458);
        EXPECT(gbc.pc(), 0x409b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 00CB
        gbc.setState(0xdd65, 0x4511, 0xaa10, 0xa6b2, 0xe90, 0x2359, 0x1, 0x0);
        gbc.writeMem(0xdd65, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4511);
        EXPECT(gbc.pc(), 0xdd66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd65), 0x1b);
        // 1B 00CC
        gbc.setState(0xad84, 0x8695, 0x6360, 0xdc59, 0x6080, 0xaf45, 0x0, 0x0);
        gbc.writeMem(0xad84, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8695);
        EXPECT(gbc.pc(), 0xad85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad84), 0x1b);
        // 1B 00CD
        gbc.setState(0x3f45, 0x86ec, 0x43b0, 0x706a, 0x251a, 0xf3, 0x0, 0x0);
        gbc.writeMem(0x3f45, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x86ec);
        EXPECT(gbc.pc(), 0x3f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 00CE
        gbc.setState(0x2982, 0x2005, 0xe2b0, 0x2f36, 0x6eb2, 0xac00, 0x0, 0x0);
        gbc.writeMem(0x2982, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2005);
        EXPECT(gbc.pc(), 0x2983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 00CF
        gbc.setState(0xc740, 0x93ec, 0x230, 0x1d4c, 0xce79, 0x3984, 0x0, 0x0);
        gbc.writeMem(0xc740, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x93ec);
        EXPECT(gbc.pc(), 0xc741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc740), 0x1b);
        // 1B 00D0
        gbc.setState(0x107e, 0xcf37, 0xd200, 0x9953, 0xfce4, 0xda, 0x0, 0x1);
        gbc.writeMem(0x107e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xcf37);
        EXPECT(gbc.pc(), 0x107f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00D1
        gbc.setState(0x9b18, 0x283d, 0xe7d0, 0x5538, 0x3e88, 0xc2f2, 0x0, 0x1);
        gbc.writeMem(0x9b18, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x283d);
        EXPECT(gbc.pc(), 0x9b19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b18), 0x1b);
        // 1B 00D2
        gbc.setState(0xae4f, 0x8b3e, 0xfc0, 0xbebf, 0xc33e, 0x2d8a, 0x1, 0x0);
        gbc.writeMem(0xae4f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8b3e);
        EXPECT(gbc.pc(), 0xae50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae4f), 0x1b);
        // 1B 00D3
        gbc.setState(0x6dbc, 0x95b8, 0xff50, 0xa1fd, 0xdb, 0x7c1e, 0x0, 0x1);
        gbc.writeMem(0x6dbc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x95b8);
        EXPECT(gbc.pc(), 0x6dbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00D4
        gbc.setState(0x69fb, 0xa71b, 0x34b0, 0xa459, 0x19e6, 0x6f7e, 0x0, 0x1);
        gbc.writeMem(0x69fb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa71b);
        EXPECT(gbc.pc(), 0x69fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 00D5
        gbc.setState(0x1e66, 0xd1bd, 0x42f0, 0x9ac2, 0xd909, 0xfd, 0x1, 0x0);
        gbc.writeMem(0x1e66, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd1bd);
        EXPECT(gbc.pc(), 0x1e67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 00D6
        gbc.setState(0xc45d, 0x3f3a, 0x4760, 0x574f, 0x6151, 0xd0f0, 0x1, 0x1);
        gbc.writeMem(0xc45d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3f3a);
        EXPECT(gbc.pc(), 0xc45e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc45d), 0x1b);
        // 1B 00D7
        gbc.setState(0x6afd, 0x29f6, 0x6240, 0xfe2c, 0x6e9, 0x244e, 0x1, 0x1);
        gbc.writeMem(0x6afd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x29f6);
        EXPECT(gbc.pc(), 0x6afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00D8
        gbc.setState(0xca2f, 0x2376, 0x4610, 0x1a6d, 0x5001, 0x3384, 0x0, 0x1);
        gbc.writeMem(0xca2f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2376);
        EXPECT(gbc.pc(), 0xca30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca2f), 0x1b);
        // 1B 00D9
        gbc.setState(0xd48b, 0xe5e9, 0xad50, 0x1bf1, 0x71d0, 0x1920, 0x1, 0x0);
        gbc.writeMem(0xd48b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe5e9);
        EXPECT(gbc.pc(), 0xd48c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd48b), 0x1b);
        // 1B 00DA
        gbc.setState(0xb661, 0x3c10, 0x81d0, 0xd170, 0x80c2, 0x412f, 0x0, 0x1);
        gbc.writeMem(0xb661, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3c10);
        EXPECT(gbc.pc(), 0xb662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb661), 0x1b);
        // 1B 00DB
        gbc.setState(0xbd3, 0xfd71, 0xc390, 0x97cc, 0xc83a, 0x51b3, 0x0, 0x0);
        gbc.writeMem(0xbd3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xfd71);
        EXPECT(gbc.pc(), 0xbd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00DC
        gbc.setState(0x8bcd, 0x18e1, 0x470, 0xf975, 0x6459, 0x17cf, 0x1, 0x1);
        gbc.writeMem(0x8bcd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x18e1);
        EXPECT(gbc.pc(), 0x8bce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bcd), 0x1b);
        // 1B 00DD
        gbc.setState(0xc46, 0xdb45, 0x5c80, 0x6e82, 0x2dbe, 0x336a, 0x1, 0x0);
        gbc.writeMem(0xc46, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xdb45);
        EXPECT(gbc.pc(), 0xc47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00DE
        gbc.setState(0x5320, 0xf64a, 0xc480, 0x19bc, 0x65ea, 0x2b43, 0x0, 0x1);
        gbc.writeMem(0x5320, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf64a);
        EXPECT(gbc.pc(), 0x5321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00DF
        gbc.setState(0xea67, 0x730c, 0x6330, 0x360e, 0xc9b0, 0x1a4c, 0x1, 0x0);
        gbc.writeMem(0xea67, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x730c);
        EXPECT(gbc.pc(), 0xea68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea67), 0x1b);
        // 1B 00E0
        gbc.setState(0xc6de, 0x399d, 0x6500, 0xd64f, 0x2d45, 0x9987, 0x1, 0x1);
        gbc.writeMem(0xc6de, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x399d);
        EXPECT(gbc.pc(), 0xc6df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6de), 0x1b);
        // 1B 00E1
        gbc.setState(0xebf1, 0x1e4d, 0x14c0, 0xd32c, 0xaec1, 0xb33c, 0x1, 0x1);
        gbc.writeMem(0xebf1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1e4d);
        EXPECT(gbc.pc(), 0xebf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf1), 0x1b);
        // 1B 00E2
        gbc.setState(0xc271, 0xac32, 0x5750, 0x10f3, 0x8122, 0x675d, 0x1, 0x1);
        gbc.writeMem(0xc271, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xac32);
        EXPECT(gbc.pc(), 0xc272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc271), 0x1b);
        // 1B 00E3
        gbc.setState(0x3939, 0xa434, 0xf460, 0x6ee7, 0x500b, 0xb599, 0x1, 0x1);
        gbc.writeMem(0x3939, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa434);
        EXPECT(gbc.pc(), 0x393a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 00E4
        gbc.setState(0x3c85, 0xc592, 0x36d0, 0x10b, 0x5c46, 0x5b3d, 0x1, 0x0);
        gbc.writeMem(0x3c85, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc592);
        EXPECT(gbc.pc(), 0x3c86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00E5
        gbc.setState(0x9e31, 0xd754, 0xb420, 0x2bd2, 0xbdef, 0xdabb, 0x0, 0x0);
        gbc.writeMem(0x9e31, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd754);
        EXPECT(gbc.pc(), 0x9e32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e31), 0x1b);
        // 1B 00E6
        gbc.setState(0xec91, 0xe5ed, 0x6290, 0x38bd, 0xaf46, 0xd8aa, 0x1, 0x0);
        gbc.writeMem(0xec91, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe5ed);
        EXPECT(gbc.pc(), 0xec92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec91), 0x1b);
        // 1B 00E8
        gbc.setState(0xcbcd, 0xd5d9, 0xed80, 0xfd57, 0xd67d, 0x7d20, 0x1, 0x0);
        gbc.writeMem(0xcbcd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd5d9);
        EXPECT(gbc.pc(), 0xcbce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbcd), 0x1b);
        // 1B 00E9
        gbc.setState(0xb19c, 0xff02, 0xc810, 0xcbdf, 0xa8a2, 0xbef, 0x0, 0x0);
        gbc.writeMem(0xb19c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xff02);
        EXPECT(gbc.pc(), 0xb19d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19c), 0x1b);
        // 1B 00EA
        gbc.setState(0x234e, 0xc232, 0xcc60, 0xa844, 0x37d4, 0x1522, 0x1, 0x0);
        gbc.writeMem(0x234e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc232);
        EXPECT(gbc.pc(), 0x234f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 00EB
        gbc.setState(0x14d5, 0x46e0, 0x2a0, 0x48a9, 0x2f9c, 0xda93, 0x0, 0x0);
        gbc.writeMem(0x14d5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x46e0);
        EXPECT(gbc.pc(), 0x14d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 00EC
        gbc.setState(0xc230, 0x46b2, 0x8c40, 0x4eed, 0x5077, 0x30e4, 0x1, 0x0);
        gbc.writeMem(0xc230, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x46b2);
        EXPECT(gbc.pc(), 0xc231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc230), 0x1b);
        // 1B 00ED
        gbc.setState(0xbe84, 0xf61b, 0x36a0, 0xc258, 0x3bed, 0x85ae, 0x1, 0x0);
        gbc.writeMem(0xbe84, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf61b);
        EXPECT(gbc.pc(), 0xbe85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe84), 0x1b);
        // 1B 00EE
        gbc.setState(0x6285, 0xa21c, 0x27c0, 0x25fd, 0x489e, 0x2e92, 0x1, 0x1);
        gbc.writeMem(0x6285, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa21c);
        EXPECT(gbc.pc(), 0x6286);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00EF
        gbc.setState(0x92ef, 0x29e, 0xcd60, 0xfe8c, 0xa6f7, 0xcd2, 0x1, 0x0);
        gbc.writeMem(0x92ef, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x29e);
        EXPECT(gbc.pc(), 0x92f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ef), 0x1b);
        // 1B 00F0
        gbc.setState(0xb1, 0x753c, 0xc090, 0xe29d, 0xdc24, 0x724d, 0x0, 0x0);
        gbc.writeMem(0xb1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x753c);
        EXPECT(gbc.pc(), 0xb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00F1
        gbc.setState(0xe594, 0xc000, 0x2870, 0x1a13, 0x2d20, 0xba62, 0x0, 0x1);
        gbc.writeMem(0xe594, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc000);
        EXPECT(gbc.pc(), 0xe595);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe594), 0x1b);
        // 1B 00F2
        gbc.setState(0xb631, 0xebb8, 0x3220, 0xf2bd, 0xffd4, 0x9822, 0x1, 0x0);
        gbc.writeMem(0xb631, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xebb8);
        EXPECT(gbc.pc(), 0xb632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb631), 0x1b);
        // 1B 00F3
        gbc.setState(0x378c, 0x7d75, 0x20c0, 0x9704, 0x16b5, 0xe87f, 0x1, 0x1);
        gbc.writeMem(0x378c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7d75);
        EXPECT(gbc.pc(), 0x378d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 00F4
        gbc.setState(0xacf, 0x988e, 0xb910, 0x5d27, 0x9a7d, 0x9814, 0x0, 0x1);
        gbc.writeMem(0xacf, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x988e);
        EXPECT(gbc.pc(), 0xad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00F5
        gbc.setState(0x9aa5, 0x9cf7, 0xa510, 0xba43, 0xbf8a, 0xd4b9, 0x0, 0x1);
        gbc.writeMem(0x9aa5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9cf7);
        EXPECT(gbc.pc(), 0x9aa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa5), 0x1b);
        // 1B 00F6
        gbc.setState(0xcba8, 0x8542, 0x16f0, 0xde37, 0x973e, 0x30c, 0x0, 0x0);
        gbc.writeMem(0xcba8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8542);
        EXPECT(gbc.pc(), 0xcba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba8), 0x1b);
        // 1B 00F7
        gbc.setState(0xede6, 0x6946, 0x1980, 0x5610, 0xbffe, 0x9cac, 0x1, 0x0);
        gbc.writeMem(0xede6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6946);
        EXPECT(gbc.pc(), 0xede7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede6), 0x1b);
        // 1B 00F8
        gbc.setState(0x4fc8, 0x64ca, 0xff10, 0xdcbd, 0xcf0a, 0xbcef, 0x1, 0x0);
        gbc.writeMem(0x4fc8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x64ca);
        EXPECT(gbc.pc(), 0x4fc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00F9
        gbc.setState(0x64ce, 0xa8d2, 0x1390, 0xd67a, 0xf027, 0xa3c9, 0x0, 0x0);
        gbc.writeMem(0x64ce, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa8d2);
        EXPECT(gbc.pc(), 0x64cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00FA
        gbc.setState(0xb79e, 0x1940, 0x3ee0, 0x7cef, 0xd19, 0x31e6, 0x1, 0x0);
        gbc.writeMem(0xb79e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1940);
        EXPECT(gbc.pc(), 0xb79f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79e), 0x1b);
        // 1B 00FC
        gbc.setState(0xb15a, 0xe6c8, 0x9bb0, 0xc217, 0x3100, 0xe181, 0x0, 0x1);
        gbc.writeMem(0xb15a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe6c8);
        EXPECT(gbc.pc(), 0xb15b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb15a), 0x1b);
        // 1B 00FD
        gbc.setState(0x76ad, 0x89f0, 0x2e50, 0x6b2b, 0x790e, 0xbb2b, 0x0, 0x0);
        gbc.writeMem(0x76ad, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x89f0);
        EXPECT(gbc.pc(), 0x76ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 00FE
        gbc.setState(0x7ecd, 0xd472, 0x34e0, 0xb4c7, 0x46e2, 0xac64, 0x1, 0x0);
        gbc.writeMem(0x7ecd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd472);
        EXPECT(gbc.pc(), 0x7ece);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 00FF
        gbc.setState(0x5955, 0x9c13, 0x6150, 0xdbd9, 0x611d, 0x28d5, 0x1, 0x0);
        gbc.writeMem(0x5955, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9c13);
        EXPECT(gbc.pc(), 0x5956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0100
        gbc.setState(0x8612, 0x3dc4, 0xb580, 0x852b, 0x607a, 0xb5b7, 0x1, 0x1);
        gbc.writeMem(0x8612, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3dc4);
        EXPECT(gbc.pc(), 0x8613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8612), 0x1b);
        // 1B 0101
        gbc.setState(0xa5, 0x6ab7, 0x3590, 0x5ede, 0x1dec, 0x7600, 0x1, 0x1);
        gbc.writeMem(0xa5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6ab7);
        EXPECT(gbc.pc(), 0xa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0102
        gbc.setState(0x4a8c, 0x7d95, 0xf620, 0xd24, 0xc073, 0x747, 0x0, 0x1);
        gbc.writeMem(0x4a8c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7d95);
        EXPECT(gbc.pc(), 0x4a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0103
        gbc.setState(0x97e7, 0xdad7, 0xad90, 0xc64d, 0xaafd, 0x90ab, 0x1, 0x1);
        gbc.writeMem(0x97e7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xdad7);
        EXPECT(gbc.pc(), 0x97e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97e7), 0x1b);
        // 1B 0104
        gbc.setState(0xaf37, 0xfe83, 0x2e30, 0xc9a5, 0xa758, 0x73ee, 0x1, 0x1);
        gbc.writeMem(0xaf37, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfe83);
        EXPECT(gbc.pc(), 0xaf38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf37), 0x1b);
        // 1B 0105
        gbc.setState(0x608e, 0xa791, 0x4b80, 0xae59, 0x76ce, 0x21a6, 0x1, 0x1);
        gbc.writeMem(0x608e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa791);
        EXPECT(gbc.pc(), 0x608f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0106
        gbc.setState(0x7295, 0x3f69, 0xea50, 0xcb75, 0x2600, 0xa1fc, 0x0, 0x1);
        gbc.writeMem(0x7295, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3f69);
        EXPECT(gbc.pc(), 0x7296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0107
        gbc.setState(0xe77f, 0x5a8a, 0x67b0, 0xe8bd, 0x39f1, 0x2116, 0x0, 0x1);
        gbc.writeMem(0xe77f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5a8a);
        EXPECT(gbc.pc(), 0xe780);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe77f), 0x1b);
        // 1B 0108
        gbc.setState(0x4a28, 0x8755, 0x34b0, 0x1a8b, 0x6973, 0xb65a, 0x1, 0x0);
        gbc.writeMem(0x4a28, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8755);
        EXPECT(gbc.pc(), 0x4a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0109
        gbc.setState(0xcb72, 0xe030, 0x4100, 0x1c0, 0x78eb, 0x5cb2, 0x0, 0x0);
        gbc.writeMem(0xcb72, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe030);
        EXPECT(gbc.pc(), 0xcb73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb72), 0x1b);
        // 1B 010A
        gbc.setState(0x4d2f, 0xce39, 0x4950, 0xb5e9, 0x7a28, 0xbad6, 0x1, 0x1);
        gbc.writeMem(0x4d2f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xce39);
        EXPECT(gbc.pc(), 0x4d30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 010B
        gbc.setState(0xa72f, 0x3fd2, 0xfd00, 0xbf08, 0x720e, 0x2e0, 0x0, 0x1);
        gbc.writeMem(0xa72f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3fd2);
        EXPECT(gbc.pc(), 0xa730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa72f), 0x1b);
        // 1B 010C
        gbc.setState(0xde7, 0x4130, 0xea0, 0xbcd3, 0x7e32, 0xa077, 0x0, 0x1);
        gbc.writeMem(0xde7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4130);
        EXPECT(gbc.pc(), 0xde8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 010D
        gbc.setState(0x68ac, 0x4155, 0xd8b0, 0x21a7, 0x9a41, 0x1c38, 0x0, 0x1);
        gbc.writeMem(0x68ac, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4155);
        EXPECT(gbc.pc(), 0x68ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 010E
        gbc.setState(0x8bb2, 0x29ca, 0xfba0, 0xc62f, 0x4aee, 0xb8a8, 0x0, 0x1);
        gbc.writeMem(0x8bb2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x29ca);
        EXPECT(gbc.pc(), 0x8bb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb2), 0x1b);
        // 1B 010F
        gbc.setState(0xbc42, 0xe041, 0x9f50, 0x2347, 0x8715, 0x6242, 0x0, 0x0);
        gbc.writeMem(0xbc42, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe041);
        EXPECT(gbc.pc(), 0xbc43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc42), 0x1b);
        // 1B 0110
        gbc.setState(0x8b20, 0x962d, 0x3b00, 0x94c3, 0x1999, 0x8161, 0x1, 0x1);
        gbc.writeMem(0x8b20, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x962d);
        EXPECT(gbc.pc(), 0x8b21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b20), 0x1b);
        // 1B 0111
        gbc.setState(0x6a06, 0x2338, 0x5cb0, 0xcef4, 0x78e0, 0x466b, 0x1, 0x1);
        gbc.writeMem(0x6a06, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2338);
        EXPECT(gbc.pc(), 0x6a07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0112
        gbc.setState(0x1c6d, 0xc2e6, 0xea50, 0x4837, 0xd446, 0x79bb, 0x1, 0x0);
        gbc.writeMem(0x1c6d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc2e6);
        EXPECT(gbc.pc(), 0x1c6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0113
        gbc.setState(0xc09c, 0x3163, 0xe800, 0x1721, 0xdfd9, 0xb89a, 0x0, 0x1);
        gbc.writeMem(0xc09c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3163);
        EXPECT(gbc.pc(), 0xc09d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc09c), 0x1b);
        // 1B 0114
        gbc.setState(0x2ac0, 0xed4b, 0x94b0, 0xceff, 0xca2c, 0xf4ac, 0x0, 0x0);
        gbc.writeMem(0x2ac0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xed4b);
        EXPECT(gbc.pc(), 0x2ac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0115
        gbc.setState(0x5850, 0xb10b, 0xb920, 0xf126, 0x7e00, 0x50a3, 0x1, 0x0);
        gbc.writeMem(0x5850, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb10b);
        EXPECT(gbc.pc(), 0x5851);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0116
        gbc.setState(0x6f9d, 0xfe8, 0x2c00, 0x8992, 0xa20b, 0x109b, 0x0, 0x0);
        gbc.writeMem(0x6f9d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xfe8);
        EXPECT(gbc.pc(), 0x6f9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0117
        gbc.setState(0x8c2b, 0x9a63, 0xe690, 0xc968, 0x2186, 0x1101, 0x0, 0x1);
        gbc.writeMem(0x8c2b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9a63);
        EXPECT(gbc.pc(), 0x8c2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c2b), 0x1b);
        // 1B 0118
        gbc.setState(0x7672, 0xc7f, 0xed30, 0xe518, 0x446c, 0x1dfa, 0x0, 0x0);
        gbc.writeMem(0x7672, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc7f);
        EXPECT(gbc.pc(), 0x7673);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0119
        gbc.setState(0xd01c, 0xa57f, 0xfb0, 0xc47, 0x5c86, 0x842c, 0x0, 0x1);
        gbc.writeMem(0xd01c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa57f);
        EXPECT(gbc.pc(), 0xd01d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd01c), 0x1b);
        // 1B 011A
        gbc.setState(0xe69c, 0xe86a, 0xe9f0, 0xd886, 0x3b9f, 0x492c, 0x0, 0x0);
        gbc.writeMem(0xe69c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe86a);
        EXPECT(gbc.pc(), 0xe69d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe69c), 0x1b);
        // 1B 011B
        gbc.setState(0xe642, 0x18f0, 0x4570, 0xd005, 0x81e8, 0xa58b, 0x1, 0x1);
        gbc.writeMem(0xe642, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x18f0);
        EXPECT(gbc.pc(), 0xe643);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe642), 0x1b);
        // 1B 011C
        gbc.setState(0xb664, 0xaa1e, 0xc720, 0xe5f6, 0xa96a, 0x9800, 0x0, 0x1);
        gbc.writeMem(0xb664, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xaa1e);
        EXPECT(gbc.pc(), 0xb665);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb664), 0x1b);
        // 1B 011D
        gbc.setState(0x9aed, 0x6c81, 0x7020, 0x9785, 0x6d2, 0xc5db, 0x1, 0x0);
        gbc.writeMem(0x9aed, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6c81);
        EXPECT(gbc.pc(), 0x9aee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aed), 0x1b);
        // 1B 011E
        gbc.setState(0x4cc, 0x901e, 0x37d0, 0x8ac7, 0xb993, 0x2e95, 0x0, 0x0);
        gbc.writeMem(0x4cc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x901e);
        EXPECT(gbc.pc(), 0x4cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 011F
        gbc.setState(0x5be, 0x8ce6, 0xc190, 0x7233, 0x4cb8, 0x8aaa, 0x0, 0x1);
        gbc.writeMem(0x5be, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8ce6);
        EXPECT(gbc.pc(), 0x5bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0120
        gbc.setState(0x43a9, 0xf688, 0x2cf0, 0xc4cb, 0x7e73, 0x2ba7, 0x0, 0x0);
        gbc.writeMem(0x43a9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf688);
        EXPECT(gbc.pc(), 0x43aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0121
        gbc.setState(0x1f75, 0x270a, 0xa780, 0x4981, 0x4e76, 0x4607, 0x0, 0x1);
        gbc.writeMem(0x1f75, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x270a);
        EXPECT(gbc.pc(), 0x1f76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0122
        gbc.setState(0x4a97, 0xb61a, 0x9ff0, 0xc5e1, 0x5233, 0xdc33, 0x0, 0x0);
        gbc.writeMem(0x4a97, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb61a);
        EXPECT(gbc.pc(), 0x4a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0123
        gbc.setState(0x987d, 0x964a, 0xd440, 0x2ba2, 0xc8a2, 0x2afc, 0x1, 0x0);
        gbc.writeMem(0x987d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x964a);
        EXPECT(gbc.pc(), 0x987e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x987d), 0x1b);
        // 1B 0124
        gbc.setState(0x84b6, 0x89e2, 0x30d0, 0x2d72, 0x42e3, 0x8f00, 0x1, 0x1);
        gbc.writeMem(0x84b6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x89e2);
        EXPECT(gbc.pc(), 0x84b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b6), 0x1b);
        // 1B 0125
        gbc.setState(0xb3d1, 0x8fd0, 0x1320, 0x547a, 0x87d6, 0xf0c8, 0x0, 0x1);
        gbc.writeMem(0xb3d1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8fd0);
        EXPECT(gbc.pc(), 0xb3d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d1), 0x1b);
        // 1B 0126
        gbc.setState(0x1dbd, 0x9711, 0xf50, 0x400c, 0xc2ef, 0x6d4d, 0x1, 0x0);
        gbc.writeMem(0x1dbd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9711);
        EXPECT(gbc.pc(), 0x1dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0127
        gbc.setState(0x872f, 0xd210, 0xbf60, 0xb8a, 0x4942, 0xd5da, 0x0, 0x1);
        gbc.writeMem(0x872f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd210);
        EXPECT(gbc.pc(), 0x8730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x872f), 0x1b);
        // 1B 0128
        gbc.setState(0x2ed2, 0x3d45, 0x2580, 0xd387, 0x658a, 0xd497, 0x0, 0x1);
        gbc.writeMem(0x2ed2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3d45);
        EXPECT(gbc.pc(), 0x2ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 012A
        gbc.setState(0x8f43, 0x358c, 0x3ea0, 0x3e4b, 0xda4d, 0x3da1, 0x1, 0x1);
        gbc.writeMem(0x8f43, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x358c);
        EXPECT(gbc.pc(), 0x8f44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f43), 0x1b);
        // 1B 012B
        gbc.setState(0x6979, 0x54dc, 0x69d0, 0x6bbc, 0x7b20, 0xf2ce, 0x1, 0x1);
        gbc.writeMem(0x6979, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x54dc);
        EXPECT(gbc.pc(), 0x697a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 012C
        gbc.setState(0x8608, 0x6862, 0x83c0, 0x9dbc, 0x81f6, 0x2939, 0x0, 0x0);
        gbc.writeMem(0x8608, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6862);
        EXPECT(gbc.pc(), 0x8609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8608), 0x1b);
        // 1B 012D
        gbc.setState(0x1a8d, 0xae91, 0xaea0, 0x627c, 0x536, 0x54ae, 0x1, 0x0);
        gbc.writeMem(0x1a8d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xae91);
        EXPECT(gbc.pc(), 0x1a8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 012E
        gbc.setState(0x49da, 0xebe9, 0x1c50, 0xa18c, 0x784a, 0xcd86, 0x0, 0x1);
        gbc.writeMem(0x49da, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xebe9);
        EXPECT(gbc.pc(), 0x49db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 012F
        gbc.setState(0x74c8, 0xa03e, 0xb690, 0x6e75, 0x78c2, 0x2dd1, 0x0, 0x1);
        gbc.writeMem(0x74c8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa03e);
        EXPECT(gbc.pc(), 0x74c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0130
        gbc.setState(0xe1f4, 0x21f1, 0xb6f0, 0xfca5, 0xca15, 0x46c4, 0x0, 0x0);
        gbc.writeMem(0xe1f4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x21f1);
        EXPECT(gbc.pc(), 0xe1f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1f4), 0x1b);
        // 1B 0131
        gbc.setState(0xe2b6, 0xa751, 0xb30, 0x62f5, 0x450d, 0x1ab9, 0x0, 0x1);
        gbc.writeMem(0xe2b6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa751);
        EXPECT(gbc.pc(), 0xe2b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b6), 0x1b);
        // 1B 0132
        gbc.setState(0xba78, 0x850d, 0x9d20, 0x98a1, 0xa51f, 0x500, 0x1, 0x1);
        gbc.writeMem(0xba78, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x850d);
        EXPECT(gbc.pc(), 0xba79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba78), 0x1b);
        // 1B 0133
        gbc.setState(0x5ddf, 0x9525, 0xa490, 0x7a3, 0xa26b, 0xdba1, 0x0, 0x1);
        gbc.writeMem(0x5ddf, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9525);
        EXPECT(gbc.pc(), 0x5de0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0134
        gbc.setState(0xaccd, 0x4afe, 0x7ae0, 0x74e7, 0xb1bb, 0x3d00, 0x1, 0x1);
        gbc.writeMem(0xaccd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4afe);
        EXPECT(gbc.pc(), 0xacce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaccd), 0x1b);
        // 1B 0135
        gbc.setState(0x7279, 0x6b38, 0x4640, 0x41c9, 0xff31, 0xbeb4, 0x0, 0x0);
        gbc.writeMem(0x7279, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6b38);
        EXPECT(gbc.pc(), 0x727a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0136
        gbc.setState(0xb1e5, 0xda2d, 0x7ec0, 0x6fac, 0xd484, 0xc3a0, 0x0, 0x0);
        gbc.writeMem(0xb1e5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xda2d);
        EXPECT(gbc.pc(), 0xb1e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e5), 0x1b);
        // 1B 0137
        gbc.setState(0xeccc, 0xa845, 0x8900, 0x7015, 0x51d6, 0xcc4a, 0x0, 0x0);
        gbc.writeMem(0xeccc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa845);
        EXPECT(gbc.pc(), 0xeccd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeccc), 0x1b);
        // 1B 0138
        gbc.setState(0x526, 0xd1b9, 0x4f0, 0x97a7, 0xb1bf, 0x1f0b, 0x1, 0x1);
        gbc.writeMem(0x526, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd1b9);
        EXPECT(gbc.pc(), 0x527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0139
        gbc.setState(0x8757, 0x52c8, 0xfd90, 0xea56, 0x429a, 0x8d4, 0x0, 0x1);
        gbc.writeMem(0x8757, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x52c8);
        EXPECT(gbc.pc(), 0x8758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8757), 0x1b);
        // 1B 013A
        gbc.setState(0x777e, 0x9932, 0x9750, 0xcf7c, 0xc361, 0xf41e, 0x0, 0x0);
        gbc.writeMem(0x777e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9932);
        EXPECT(gbc.pc(), 0x777f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 013B
        gbc.setState(0xd23a, 0xede9, 0x9fb0, 0xa71a, 0x7d7, 0x8cbf, 0x0, 0x1);
        gbc.writeMem(0xd23a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xede9);
        EXPECT(gbc.pc(), 0xd23b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd23a), 0x1b);
        // 1B 013C
        gbc.setState(0x9a0d, 0x23bc, 0xba40, 0x1204, 0xa5c1, 0x9186, 0x0, 0x0);
        gbc.writeMem(0x9a0d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x23bc);
        EXPECT(gbc.pc(), 0x9a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a0d), 0x1b);
        // 1B 013D
        gbc.setState(0x6c56, 0x6d83, 0xcaf0, 0x3c16, 0x1c03, 0x2e08, 0x0, 0x1);
        gbc.writeMem(0x6c56, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6d83);
        EXPECT(gbc.pc(), 0x6c57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 013E
        gbc.setState(0xeb92, 0xc59b, 0xfef0, 0x4b9d, 0x57a3, 0xa746, 0x0, 0x0);
        gbc.writeMem(0xeb92, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc59b);
        EXPECT(gbc.pc(), 0xeb93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb92), 0x1b);
        // 1B 013F
        gbc.setState(0x373e, 0xc0ad, 0x43b0, 0x5284, 0x3fab, 0xce3, 0x0, 0x0);
        gbc.writeMem(0x373e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc0ad);
        EXPECT(gbc.pc(), 0x373f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0140
        gbc.setState(0x490f, 0xcc0, 0x9c10, 0xf7d8, 0xca2d, 0x6d06, 0x1, 0x1);
        gbc.writeMem(0x490f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcc0);
        EXPECT(gbc.pc(), 0x4910);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0141
        gbc.setState(0x36d, 0xe374, 0x3740, 0xdc01, 0x4fb9, 0x4d87, 0x1, 0x1);
        gbc.writeMem(0x36d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe374);
        EXPECT(gbc.pc(), 0x36e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0142
        gbc.setState(0x1000, 0xa6b1, 0x68a0, 0x5614, 0xe592, 0x26df, 0x0, 0x1);
        gbc.writeMem(0x1000, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa6b1);
        EXPECT(gbc.pc(), 0x1001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0143
        gbc.setState(0xe638, 0x4589, 0x5be0, 0x79b4, 0xfeee, 0x41e0, 0x0, 0x0);
        gbc.writeMem(0xe638, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4589);
        EXPECT(gbc.pc(), 0xe639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe638), 0x1b);
        // 1B 0144
        gbc.setState(0x444f, 0xc678, 0x9f0, 0x7d2, 0x70ae, 0xadf4, 0x1, 0x1);
        gbc.writeMem(0x444f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc678);
        EXPECT(gbc.pc(), 0x4450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0145
        gbc.setState(0x708e, 0xf8f9, 0xf830, 0x36e7, 0x33c3, 0x988, 0x1, 0x0);
        gbc.writeMem(0x708e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf8f9);
        EXPECT(gbc.pc(), 0x708f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0146
        gbc.setState(0x1357, 0xadf0, 0x2380, 0xa410, 0xa44d, 0xd1d7, 0x0, 0x0);
        gbc.writeMem(0x1357, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xadf0);
        EXPECT(gbc.pc(), 0x1358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0148
        gbc.setState(0x7486, 0x5605, 0xa0, 0x6258, 0xe33d, 0x1404, 0x1, 0x1);
        gbc.writeMem(0x7486, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5605);
        EXPECT(gbc.pc(), 0x7487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0149
        gbc.setState(0xb123, 0x80f9, 0xbee0, 0x31b9, 0x9259, 0x8eed, 0x0, 0x0);
        gbc.writeMem(0xb123, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x80f9);
        EXPECT(gbc.pc(), 0xb124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb123), 0x1b);
        // 1B 014A
        gbc.setState(0x95fd, 0x341c, 0x21e0, 0x752e, 0xc3fb, 0x9542, 0x1, 0x1);
        gbc.writeMem(0x95fd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x341c);
        EXPECT(gbc.pc(), 0x95fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fd), 0x1b);
        // 1B 014B
        gbc.setState(0x95e0, 0x585a, 0xb560, 0xb944, 0x1521, 0x96db, 0x0, 0x0);
        gbc.writeMem(0x95e0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x585a);
        EXPECT(gbc.pc(), 0x95e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e0), 0x1b);
        // 1B 014C
        gbc.setState(0xbb, 0x2656, 0xa280, 0x28, 0xbe5, 0xac77, 0x0, 0x0);
        gbc.writeMem(0xbb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2656);
        EXPECT(gbc.pc(), 0xbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 014D
        gbc.setState(0x2d73, 0xec3b, 0x1240, 0x8cd3, 0x696, 0x1dc4, 0x1, 0x1);
        gbc.writeMem(0x2d73, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xec3b);
        EXPECT(gbc.pc(), 0x2d74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 014E
        gbc.setState(0x85a9, 0x761f, 0x6950, 0x726d, 0x9e24, 0x8910, 0x0, 0x1);
        gbc.writeMem(0x85a9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x761f);
        EXPECT(gbc.pc(), 0x85aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85a9), 0x1b);
        // 1B 014F
        gbc.setState(0x12f1, 0x1a3a, 0x2750, 0xd1f0, 0x59ae, 0xda32, 0x0, 0x1);
        gbc.writeMem(0x12f1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1a3a);
        EXPECT(gbc.pc(), 0x12f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0150
        gbc.setState(0x572a, 0x155c, 0x6240, 0x4f6a, 0x3f8f, 0xbacf, 0x1, 0x0);
        gbc.writeMem(0x572a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x155c);
        EXPECT(gbc.pc(), 0x572b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0151
        gbc.setState(0xd7da, 0x27dc, 0xaf60, 0x97ea, 0x13dd, 0x6185, 0x1, 0x1);
        gbc.writeMem(0xd7da, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x27dc);
        EXPECT(gbc.pc(), 0xd7db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7da), 0x1b);
        // 1B 0152
        gbc.setState(0x9f44, 0xc27, 0xa660, 0xde22, 0x3003, 0x5aea, 0x1, 0x0);
        gbc.writeMem(0x9f44, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc27);
        EXPECT(gbc.pc(), 0x9f45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f44), 0x1b);
        // 1B 0153
        gbc.setState(0xec56, 0x8ef5, 0x7dd0, 0x7ebd, 0xe036, 0x84e5, 0x1, 0x0);
        gbc.writeMem(0xec56, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x8ef5);
        EXPECT(gbc.pc(), 0xec57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec56), 0x1b);
        // 1B 0154
        gbc.setState(0x8691, 0x6a11, 0xf6c0, 0x1e4, 0x9ae8, 0x225a, 0x0, 0x1);
        gbc.writeMem(0x8691, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6a11);
        EXPECT(gbc.pc(), 0x8692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8691), 0x1b);
        // 1B 0155
        gbc.setState(0x5cc2, 0x748a, 0xc520, 0x78fe, 0x3a9f, 0x8f6e, 0x1, 0x0);
        gbc.writeMem(0x5cc2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x748a);
        EXPECT(gbc.pc(), 0x5cc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0156
        gbc.setState(0xdba1, 0x38a7, 0xc30, 0xe2de, 0x2e02, 0x1b02, 0x1, 0x0);
        gbc.writeMem(0xdba1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x38a7);
        EXPECT(gbc.pc(), 0xdba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdba1), 0x1b);
        // 1B 0157
        gbc.setState(0xee4a, 0xb74e, 0x5d50, 0x859b, 0x901e, 0x3483, 0x1, 0x1);
        gbc.writeMem(0xee4a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb74e);
        EXPECT(gbc.pc(), 0xee4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee4a), 0x1b);
        // 1B 0158
        gbc.setState(0xc1bd, 0xb3c, 0x7b90, 0x82b5, 0x998, 0x5c03, 0x0, 0x1);
        gbc.writeMem(0xc1bd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb3c);
        EXPECT(gbc.pc(), 0xc1be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1bd), 0x1b);
        // 1B 0159
        gbc.setState(0x7f35, 0xb5bf, 0x7820, 0x59ce, 0x8d0e, 0xb50a, 0x1, 0x0);
        gbc.writeMem(0x7f35, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb5bf);
        EXPECT(gbc.pc(), 0x7f36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 015A
        gbc.setState(0xb87f, 0x3d70, 0xe380, 0xa34b, 0xfd17, 0xa485, 0x0, 0x1);
        gbc.writeMem(0xb87f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3d70);
        EXPECT(gbc.pc(), 0xb880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb87f), 0x1b);
        // 1B 015B
        gbc.setState(0x8205, 0x3669, 0x7740, 0xcc3e, 0xd45e, 0x4ebe, 0x1, 0x1);
        gbc.writeMem(0x8205, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3669);
        EXPECT(gbc.pc(), 0x8206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8205), 0x1b);
        // 1B 015C
        gbc.setState(0x9cba, 0x30ae, 0x7930, 0xb421, 0xb59e, 0xaa9, 0x0, 0x1);
        gbc.writeMem(0x9cba, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x30ae);
        EXPECT(gbc.pc(), 0x9cbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cba), 0x1b);
        // 1B 015D
        gbc.setState(0x5e5, 0x2a1e, 0x9560, 0x5cbc, 0x5453, 0x109f, 0x1, 0x0);
        gbc.writeMem(0x5e5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2a1e);
        EXPECT(gbc.pc(), 0x5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 015E
        gbc.setState(0xda4a, 0xf998, 0xfee0, 0x35cb, 0x1866, 0x8a6b, 0x0, 0x1);
        gbc.writeMem(0xda4a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf998);
        EXPECT(gbc.pc(), 0xda4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda4a), 0x1b);
        // 1B 015F
        gbc.setState(0xc231, 0xe32a, 0xc010, 0x6539, 0xd829, 0x5dc5, 0x0, 0x1);
        gbc.writeMem(0xc231, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe32a);
        EXPECT(gbc.pc(), 0xc232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc231), 0x1b);
        // 1B 0160
        gbc.setState(0x4e89, 0xcaac, 0x4d70, 0xaff1, 0x9874, 0x2cd5, 0x0, 0x0);
        gbc.writeMem(0x4e89, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcaac);
        EXPECT(gbc.pc(), 0x4e8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0161
        gbc.setState(0xb492, 0x2ce1, 0x1630, 0xb77f, 0xa37a, 0x8e43, 0x0, 0x1);
        gbc.writeMem(0xb492, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2ce1);
        EXPECT(gbc.pc(), 0xb493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb492), 0x1b);
        // 1B 0162
        gbc.setState(0x772b, 0x1660, 0x8520, 0x81cb, 0xce3c, 0xcddd, 0x1, 0x0);
        gbc.writeMem(0x772b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1660);
        EXPECT(gbc.pc(), 0x772c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0163
        gbc.setState(0xbbd1, 0xe523, 0xb010, 0x60b0, 0x703, 0x9962, 0x1, 0x1);
        gbc.writeMem(0xbbd1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe523);
        EXPECT(gbc.pc(), 0xbbd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbd1), 0x1b);
        // 1B 0164
        gbc.setState(0xb218, 0x87b3, 0x41e0, 0x3976, 0x1979, 0x19af, 0x1, 0x1);
        gbc.writeMem(0xb218, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x87b3);
        EXPECT(gbc.pc(), 0xb219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb218), 0x1b);
        // 1B 0165
        gbc.setState(0x9812, 0xa6b7, 0x4ae0, 0xf382, 0xc745, 0x13fe, 0x0, 0x0);
        gbc.writeMem(0x9812, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa6b7);
        EXPECT(gbc.pc(), 0x9813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9812), 0x1b);
        // 1B 0166
        gbc.setState(0xc6da, 0x8fdd, 0x5290, 0xcabf, 0x4907, 0x269a, 0x1, 0x1);
        gbc.writeMem(0xc6da, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8fdd);
        EXPECT(gbc.pc(), 0xc6db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6da), 0x1b);
        // 1B 0167
        gbc.setState(0x2e23, 0x2293, 0x4470, 0xec48, 0xfbed, 0xd646, 0x1, 0x1);
        gbc.writeMem(0x2e23, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2293);
        EXPECT(gbc.pc(), 0x2e24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0168
        gbc.setState(0xe0f, 0x9184, 0xec70, 0x41d0, 0x920c, 0xc23a, 0x0, 0x0);
        gbc.writeMem(0xe0f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9184);
        EXPECT(gbc.pc(), 0xe10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0169
        gbc.setState(0xbf16, 0x47db, 0xc0b0, 0xa638, 0xe444, 0x9718, 0x1, 0x1);
        gbc.writeMem(0xbf16, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x47db);
        EXPECT(gbc.pc(), 0xbf17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf16), 0x1b);
        // 1B 016A
        gbc.setState(0xd8f7, 0x1e61, 0x90c0, 0x9c84, 0x571b, 0x1613, 0x1, 0x0);
        gbc.writeMem(0xd8f7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1e61);
        EXPECT(gbc.pc(), 0xd8f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f7), 0x1b);
        // 1B 016B
        gbc.setState(0x8862, 0x8d72, 0x7050, 0xa61d, 0x4e11, 0xaf8f, 0x0, 0x0);
        gbc.writeMem(0x8862, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8d72);
        EXPECT(gbc.pc(), 0x8863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8862), 0x1b);
        // 1B 016C
        gbc.setState(0x8646, 0x9459, 0x3a70, 0x90f3, 0x8747, 0x1607, 0x0, 0x0);
        gbc.writeMem(0x8646, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9459);
        EXPECT(gbc.pc(), 0x8647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8646), 0x1b);
        // 1B 016D
        gbc.setState(0x1054, 0x52ca, 0x8950, 0xc784, 0x6357, 0xc8fd, 0x1, 0x0);
        gbc.writeMem(0x1054, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x52ca);
        EXPECT(gbc.pc(), 0x1055);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 016E
        gbc.setState(0x181a, 0x2ce4, 0x3020, 0xfe6e, 0x5cd8, 0x85c7, 0x0, 0x1);
        gbc.writeMem(0x181a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2ce4);
        EXPECT(gbc.pc(), 0x181b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 016F
        gbc.setState(0x592, 0x1f81, 0xad60, 0xfbef, 0x9178, 0xc6d5, 0x1, 0x1);
        gbc.writeMem(0x592, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x1f81);
        EXPECT(gbc.pc(), 0x593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0170
        gbc.setState(0x480c, 0x64a6, 0x1a80, 0xd60b, 0xadd8, 0x91c0, 0x1, 0x0);
        gbc.writeMem(0x480c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x64a6);
        EXPECT(gbc.pc(), 0x480d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0171
        gbc.setState(0x5358, 0xea7d, 0xcac0, 0x2891, 0x1707, 0xc091, 0x0, 0x0);
        gbc.writeMem(0x5358, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xea7d);
        EXPECT(gbc.pc(), 0x5359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0172
        gbc.setState(0x6899, 0x82fe, 0xe0f0, 0x53d, 0x4c6b, 0xd37b, 0x1, 0x1);
        gbc.writeMem(0x6899, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x82fe);
        EXPECT(gbc.pc(), 0x689a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0174
        gbc.setState(0x5569, 0xfaf9, 0xca00, 0xeaf6, 0x7f3a, 0x2474, 0x0, 0x1);
        gbc.writeMem(0x5569, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfaf9);
        EXPECT(gbc.pc(), 0x556a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0175
        gbc.setState(0x36b6, 0xbd77, 0x2b40, 0x1ea6, 0x8d91, 0x1b0b, 0x1, 0x1);
        gbc.writeMem(0x36b6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xbd77);
        EXPECT(gbc.pc(), 0x36b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0176
        gbc.setState(0x5ea6, 0x9170, 0x8650, 0x6034, 0xd647, 0x2292, 0x0, 0x0);
        gbc.writeMem(0x5ea6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9170);
        EXPECT(gbc.pc(), 0x5ea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0177
        gbc.setState(0x2746, 0xdd11, 0x81f0, 0x35f, 0xcfab, 0xe70b, 0x1, 0x1);
        gbc.writeMem(0x2746, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xdd11);
        EXPECT(gbc.pc(), 0x2747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0178
        gbc.setState(0x702, 0x3776, 0xac50, 0x2414, 0x5437, 0x25fe, 0x0, 0x1);
        gbc.writeMem(0x702, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3776);
        EXPECT(gbc.pc(), 0x703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0179
        gbc.setState(0xca27, 0x930a, 0x84b0, 0x934a, 0x554f, 0xc118, 0x0, 0x1);
        gbc.writeMem(0xca27, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x930a);
        EXPECT(gbc.pc(), 0xca28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca27), 0x1b);
        // 1B 017A
        gbc.setState(0x816a, 0xd359, 0xfd60, 0xd753, 0xe3a0, 0x361b, 0x0, 0x0);
        gbc.writeMem(0x816a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd359);
        EXPECT(gbc.pc(), 0x816b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x816a), 0x1b);
        // 1B 017B
        gbc.setState(0xdcad, 0x5098, 0x5e30, 0xf1fe, 0x2c4e, 0xe385, 0x1, 0x0);
        gbc.writeMem(0xdcad, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5098);
        EXPECT(gbc.pc(), 0xdcae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcad), 0x1b);
        // 1B 017C
        gbc.setState(0xa184, 0xd2a8, 0x9be0, 0xaa8f, 0x1bc3, 0xff02, 0x0, 0x1);
        gbc.writeMem(0xa184, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd2a8);
        EXPECT(gbc.pc(), 0xa185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa184), 0x1b);
        // 1B 017D
        gbc.setState(0x2364, 0x9304, 0xf880, 0x36f6, 0xbf1e, 0xe30e, 0x0, 0x0);
        gbc.writeMem(0x2364, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9304);
        EXPECT(gbc.pc(), 0x2365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 017E
        gbc.setState(0x845f, 0xa3c0, 0x8e10, 0x2f85, 0xa1ad, 0x4bd7, 0x0, 0x0);
        gbc.writeMem(0x845f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xa3c0);
        EXPECT(gbc.pc(), 0x8460);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x845f), 0x1b);
        // 1B 017F
        gbc.setState(0xa084, 0x258f, 0xe160, 0x597c, 0x2176, 0x5fa3, 0x0, 0x1);
        gbc.writeMem(0xa084, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x258f);
        EXPECT(gbc.pc(), 0xa085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa084), 0x1b);
        // 1B 0180
        gbc.setState(0x2739, 0x90d4, 0x45d0, 0xab4d, 0x4376, 0xac59, 0x1, 0x0);
        gbc.writeMem(0x2739, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x90d4);
        EXPECT(gbc.pc(), 0x273a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0181
        gbc.setState(0x683f, 0x57f1, 0x9090, 0xb55f, 0xf215, 0xb0ac, 0x0, 0x1);
        gbc.writeMem(0x683f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x57f1);
        EXPECT(gbc.pc(), 0x6840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0182
        gbc.setState(0xb653, 0xb75b, 0x1740, 0x9a0a, 0xf859, 0xedc4, 0x0, 0x0);
        gbc.writeMem(0xb653, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb75b);
        EXPECT(gbc.pc(), 0xb654);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb653), 0x1b);
        // 1B 0183
        gbc.setState(0x5c8, 0x355d, 0x6460, 0x6cb3, 0x215a, 0xbaeb, 0x0, 0x0);
        gbc.writeMem(0x5c8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x355d);
        EXPECT(gbc.pc(), 0x5c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0184
        gbc.setState(0xb8c4, 0x8136, 0x4820, 0xcd0d, 0x586d, 0xc6ec, 0x0, 0x1);
        gbc.writeMem(0xb8c4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8136);
        EXPECT(gbc.pc(), 0xb8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8c4), 0x1b);
        // 1B 0185
        gbc.setState(0xbac8, 0x3ac, 0xd080, 0x85b5, 0x2f72, 0x2f56, 0x0, 0x1);
        gbc.writeMem(0xbac8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3ac);
        EXPECT(gbc.pc(), 0xbac9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac8), 0x1b);
        // 1B 0186
        gbc.setState(0x4ac2, 0x3bd8, 0x9ce0, 0x7c17, 0xb2a4, 0x5103, 0x1, 0x1);
        gbc.writeMem(0x4ac2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3bd8);
        EXPECT(gbc.pc(), 0x4ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0187
        gbc.setState(0x50a9, 0xeace, 0x57c0, 0x3e59, 0x1ac6, 0x870e, 0x0, 0x1);
        gbc.writeMem(0x50a9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xeace);
        EXPECT(gbc.pc(), 0x50aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0188
        gbc.setState(0x8451, 0xd4f9, 0xd3e0, 0xd62d, 0x9cc8, 0xd726, 0x1, 0x1);
        gbc.writeMem(0x8451, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd4f9);
        EXPECT(gbc.pc(), 0x8452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8451), 0x1b);
        // 1B 0189
        gbc.setState(0x171c, 0x45a9, 0x3780, 0x4380, 0xe6cc, 0x818b, 0x0, 0x0);
        gbc.writeMem(0x171c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x45a9);
        EXPECT(gbc.pc(), 0x171d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 018A
        gbc.setState(0x54f2, 0x7448, 0xc000, 0x360d, 0xdc5e, 0x3dd3, 0x0, 0x1);
        gbc.writeMem(0x54f2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7448);
        EXPECT(gbc.pc(), 0x54f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 018D
        gbc.setState(0xebf8, 0x5b74, 0xec0, 0x504c, 0x1e9d, 0xecbd, 0x0, 0x0);
        gbc.writeMem(0xebf8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5b74);
        EXPECT(gbc.pc(), 0xebf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf8), 0x1b);
        // 1B 018E
        gbc.setState(0xa2b, 0x59c7, 0x94e0, 0x2f0d, 0x19cf, 0x5ce, 0x0, 0x1);
        gbc.writeMem(0xa2b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x59c7);
        EXPECT(gbc.pc(), 0xa2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 018F
        gbc.setState(0x567b, 0xb137, 0xcbf0, 0x732f, 0xfde, 0x191d, 0x1, 0x0);
        gbc.writeMem(0x567b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb137);
        EXPECT(gbc.pc(), 0x567c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0190
        gbc.setState(0xe9c4, 0x8613, 0xc840, 0x2b76, 0x83ce, 0xb7be, 0x0, 0x1);
        gbc.writeMem(0xe9c4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8613);
        EXPECT(gbc.pc(), 0xe9c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c4), 0x1b);
        // 1B 0191
        gbc.setState(0xb8e0, 0x1ebc, 0x63f0, 0xe29f, 0x922b, 0x27e9, 0x0, 0x0);
        gbc.writeMem(0xb8e0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1ebc);
        EXPECT(gbc.pc(), 0xb8e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8e0), 0x1b);
        // 1B 0192
        gbc.setState(0xb1e, 0xa361, 0xfbd0, 0xfeb4, 0x70aa, 0x18b3, 0x1, 0x0);
        gbc.writeMem(0xb1e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa361);
        EXPECT(gbc.pc(), 0xb1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0193
        gbc.setState(0x1abb, 0x9e9f, 0xbc40, 0x831f, 0xd0f3, 0x31d1, 0x1, 0x1);
        gbc.writeMem(0x1abb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9e9f);
        EXPECT(gbc.pc(), 0x1abc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0194
        gbc.setState(0x7993, 0x4793, 0x280, 0xc055, 0xa282, 0x607, 0x1, 0x1);
        gbc.writeMem(0x7993, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4793);
        EXPECT(gbc.pc(), 0x7994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0195
        gbc.setState(0xce96, 0xe171, 0x3900, 0x2fab, 0x251d, 0x26c7, 0x1, 0x0);
        gbc.writeMem(0xce96, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe171);
        EXPECT(gbc.pc(), 0xce97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce96), 0x1b);
        // 1B 0196
        gbc.setState(0x2bf, 0x4a92, 0xe520, 0x307f, 0xa7e1, 0x7552, 0x1, 0x1);
        gbc.writeMem(0x2bf, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4a92);
        EXPECT(gbc.pc(), 0x2c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0197
        gbc.setState(0xaf2a, 0xc9c9, 0x7bb0, 0x6f27, 0x1020, 0xdc1b, 0x1, 0x0);
        gbc.writeMem(0xaf2a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc9c9);
        EXPECT(gbc.pc(), 0xaf2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf2a), 0x1b);
        // 1B 0198
        gbc.setState(0x9a2d, 0x16ef, 0x5c10, 0xdfd, 0xe244, 0x769f, 0x1, 0x1);
        gbc.writeMem(0x9a2d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x16ef);
        EXPECT(gbc.pc(), 0x9a2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a2d), 0x1b);
        // 1B 0199
        gbc.setState(0x94e2, 0xdb0e, 0x2d40, 0x4d1e, 0x281c, 0xf417, 0x1, 0x0);
        gbc.writeMem(0x94e2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xdb0e);
        EXPECT(gbc.pc(), 0x94e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e2), 0x1b);
        // 1B 019A
        gbc.setState(0x53e8, 0x5278, 0x6ba0, 0x8641, 0x2b6c, 0x3d, 0x0, 0x0);
        gbc.writeMem(0x53e8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5278);
        EXPECT(gbc.pc(), 0x53e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 019C
        gbc.setState(0x1c3d, 0xaa36, 0xc570, 0xfffe, 0xb201, 0x2945, 0x0, 0x0);
        gbc.writeMem(0x1c3d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xaa36);
        EXPECT(gbc.pc(), 0x1c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 019D
        gbc.setState(0xe943, 0xa93a, 0x40f0, 0x59bf, 0xec47, 0x5b41, 0x0, 0x0);
        gbc.writeMem(0xe943, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa93a);
        EXPECT(gbc.pc(), 0xe944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe943), 0x1b);
        // 1B 019E
        gbc.setState(0xa2e4, 0xd7c, 0x6650, 0x89f1, 0xe296, 0x49db, 0x1, 0x1);
        gbc.writeMem(0xa2e4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xd7c);
        EXPECT(gbc.pc(), 0xa2e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2e4), 0x1b);
        // 1B 019F
        gbc.setState(0x3519, 0x35ab, 0xe3c0, 0xa41a, 0x2d8e, 0x2526, 0x1, 0x0);
        gbc.writeMem(0x3519, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x35ab);
        EXPECT(gbc.pc(), 0x351a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01A0
        gbc.setState(0x307a, 0x26f7, 0xb000, 0xc063, 0xd162, 0x6c15, 0x1, 0x1);
        gbc.writeMem(0x307a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x26f7);
        EXPECT(gbc.pc(), 0x307b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01A1
        gbc.setState(0x8f40, 0xdaad, 0x5f20, 0x8e1, 0x8098, 0x68f4, 0x0, 0x1);
        gbc.writeMem(0x8f40, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xdaad);
        EXPECT(gbc.pc(), 0x8f41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f40), 0x1b);
        // 1B 01A2
        gbc.setState(0xc3a1, 0xc508, 0xf350, 0x69e9, 0x8674, 0x6612, 0x1, 0x0);
        gbc.writeMem(0xc3a1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc508);
        EXPECT(gbc.pc(), 0xc3a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3a1), 0x1b);
        // 1B 01A4
        gbc.setState(0xd55f, 0xfcdd, 0x8800, 0x96f, 0x32f4, 0xf5e, 0x0, 0x1);
        gbc.writeMem(0xd55f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfcdd);
        EXPECT(gbc.pc(), 0xd560);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd55f), 0x1b);
        // 1B 01A5
        gbc.setState(0x8af8, 0x8997, 0xc110, 0x4c7d, 0x4fad, 0xe17b, 0x0, 0x1);
        gbc.writeMem(0x8af8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8997);
        EXPECT(gbc.pc(), 0x8af9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8af8), 0x1b);
        // 1B 01A6
        gbc.setState(0xb331, 0x4062, 0x25d0, 0xf60d, 0xbf9, 0xd31c, 0x1, 0x0);
        gbc.writeMem(0xb331, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4062);
        EXPECT(gbc.pc(), 0xb332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb331), 0x1b);
        // 1B 01A7
        gbc.setState(0x7643, 0x667e, 0x24e0, 0x82eb, 0x5c5, 0x36f4, 0x0, 0x1);
        gbc.writeMem(0x7643, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x667e);
        EXPECT(gbc.pc(), 0x7644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01A8
        gbc.setState(0xa84b, 0xc4de, 0xe8a0, 0x1d41, 0xdbca, 0x59bd, 0x1, 0x1);
        gbc.writeMem(0xa84b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc4de);
        EXPECT(gbc.pc(), 0xa84c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84b), 0x1b);
        // 1B 01A9
        gbc.setState(0x3917, 0x4fdd, 0x48c0, 0xd430, 0xf26, 0x4c93, 0x0, 0x0);
        gbc.writeMem(0x3917, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4fdd);
        EXPECT(gbc.pc(), 0x3918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01AA
        gbc.setState(0xbeec, 0xd716, 0x5300, 0x4ca9, 0x8fb8, 0xa356, 0x0, 0x1);
        gbc.writeMem(0xbeec, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd716);
        EXPECT(gbc.pc(), 0xbeed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeec), 0x1b);
        // 1B 01AC
        gbc.setState(0x2794, 0x13e5, 0x1f00, 0xeefa, 0x5352, 0x348a, 0x1, 0x0);
        gbc.writeMem(0x2794, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x13e5);
        EXPECT(gbc.pc(), 0x2795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01AD
        gbc.setState(0xee18, 0x5d77, 0xc290, 0x503c, 0xfcf7, 0x6ff4, 0x1, 0x0);
        gbc.writeMem(0xee18, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5d77);
        EXPECT(gbc.pc(), 0xee19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee18), 0x1b);
        // 1B 01AE
        gbc.setState(0x49de, 0xdaaa, 0x3b10, 0x8871, 0x4622, 0x7ac9, 0x1, 0x0);
        gbc.writeMem(0x49de, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdaaa);
        EXPECT(gbc.pc(), 0x49df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 01AF
        gbc.setState(0x9003, 0x673c, 0x4a30, 0x9171, 0xbc58, 0xb2e1, 0x0, 0x1);
        gbc.writeMem(0x9003, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x673c);
        EXPECT(gbc.pc(), 0x9004);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9003), 0x1b);
        // 1B 01B1
        gbc.setState(0x3942, 0xf2c3, 0xcc60, 0xe44, 0x1380, 0x28f2, 0x1, 0x1);
        gbc.writeMem(0x3942, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf2c3);
        EXPECT(gbc.pc(), 0x3943);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01B2
        gbc.setState(0x51a9, 0x4e31, 0x2750, 0xff12, 0xd5fd, 0x4a08, 0x0, 0x1);
        gbc.writeMem(0x51a9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4e31);
        EXPECT(gbc.pc(), 0x51aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 01B3
        gbc.setState(0xc739, 0x747, 0xfb70, 0xb2a5, 0xe01c, 0x9ae, 0x1, 0x1);
        gbc.writeMem(0xc739, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x747);
        EXPECT(gbc.pc(), 0xc73a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc739), 0x1b);
        // 1B 01B4
        gbc.setState(0x1d15, 0x361e, 0xb1f0, 0xf7e8, 0x3b37, 0x1fd3, 0x1, 0x1);
        gbc.writeMem(0x1d15, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x361e);
        EXPECT(gbc.pc(), 0x1d16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01B5
        gbc.setState(0xe8eb, 0xbb2e, 0xe540, 0x4a21, 0x29eb, 0xdecf, 0x0, 0x1);
        gbc.writeMem(0xe8eb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xbb2e);
        EXPECT(gbc.pc(), 0xe8ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8eb), 0x1b);
        // 1B 01B6
        gbc.setState(0xb05d, 0xaf54, 0x4a80, 0x974d, 0xf98c, 0xd144, 0x1, 0x0);
        gbc.writeMem(0xb05d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaf54);
        EXPECT(gbc.pc(), 0xb05e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb05d), 0x1b);
        // 1B 01B7
        gbc.setState(0x9d5b, 0x4a94, 0xe8a0, 0x2712, 0x18b, 0x898e, 0x1, 0x1);
        gbc.writeMem(0x9d5b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4a94);
        EXPECT(gbc.pc(), 0x9d5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d5b), 0x1b);
        // 1B 01B8
        gbc.setState(0x7d9f, 0xba29, 0x32e0, 0xf41c, 0xb52a, 0x4907, 0x0, 0x0);
        gbc.writeMem(0x7d9f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xba29);
        EXPECT(gbc.pc(), 0x7da0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01B9
        gbc.setState(0x8cde, 0x14e9, 0x4da0, 0x7677, 0x1bcf, 0x97b0, 0x0, 0x0);
        gbc.writeMem(0x8cde, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x14e9);
        EXPECT(gbc.pc(), 0x8cdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cde), 0x1b);
        // 1B 01BA
        gbc.setState(0xecdf, 0xbd90, 0x2ad0, 0xd16d, 0xa423, 0xa794, 0x1, 0x1);
        gbc.writeMem(0xecdf, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbd90);
        EXPECT(gbc.pc(), 0xece0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecdf), 0x1b);
        // 1B 01BB
        gbc.setState(0xee18, 0xbe90, 0xfb80, 0x90c9, 0x930c, 0x59c9, 0x0, 0x1);
        gbc.writeMem(0xee18, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbe90);
        EXPECT(gbc.pc(), 0xee19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee18), 0x1b);
        // 1B 01BC
        gbc.setState(0x65e3, 0x5c5a, 0xe390, 0xe114, 0x9948, 0x2464, 0x0, 0x1);
        gbc.writeMem(0x65e3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5c5a);
        EXPECT(gbc.pc(), 0x65e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 01BD
        gbc.setState(0x165c, 0x9e43, 0x2bc0, 0x439b, 0xed67, 0x7bea, 0x0, 0x1);
        gbc.writeMem(0x165c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9e43);
        EXPECT(gbc.pc(), 0x165d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01BE
        gbc.setState(0xc1ab, 0xa503, 0x55c0, 0xf909, 0x2fbb, 0x6308, 0x0, 0x0);
        gbc.writeMem(0xc1ab, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa503);
        EXPECT(gbc.pc(), 0xc1ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ab), 0x1b);
        // 1B 01BF
        gbc.setState(0x360c, 0x3d3, 0xee30, 0x7cfa, 0x6f33, 0x6165, 0x0, 0x0);
        gbc.writeMem(0x360c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3d3);
        EXPECT(gbc.pc(), 0x360d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01C1
        gbc.setState(0xd853, 0x8d72, 0xb950, 0x8dca, 0x9ef6, 0x1393, 0x1, 0x1);
        gbc.writeMem(0xd853, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8d72);
        EXPECT(gbc.pc(), 0xd854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd853), 0x1b);
        // 1B 01C2
        gbc.setState(0xc1d5, 0x4c2b, 0x4720, 0x91d, 0xc2c5, 0xb32c, 0x1, 0x0);
        gbc.writeMem(0xc1d5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4c2b);
        EXPECT(gbc.pc(), 0xc1d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1d5), 0x1b);
        // 1B 01C3
        gbc.setState(0x5310, 0xac7a, 0xe7a0, 0xae9f, 0x28c2, 0x6ad5, 0x0, 0x1);
        gbc.writeMem(0x5310, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xac7a);
        EXPECT(gbc.pc(), 0x5311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01C4
        gbc.setState(0xce70, 0x21cf, 0xc1b0, 0xb26a, 0xaf72, 0xa604, 0x0, 0x0);
        gbc.writeMem(0xce70, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x21cf);
        EXPECT(gbc.pc(), 0xce71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce70), 0x1b);
        // 1B 01C5
        gbc.setState(0xa963, 0x660, 0x4260, 0xbbed, 0x3de4, 0xe66a, 0x1, 0x1);
        gbc.writeMem(0xa963, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x660);
        EXPECT(gbc.pc(), 0xa964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa963), 0x1b);
        // 1B 01C6
        gbc.setState(0x3c36, 0xb637, 0xed90, 0x8f66, 0xc94b, 0xcc43, 0x0, 0x1);
        gbc.writeMem(0x3c36, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb637);
        EXPECT(gbc.pc(), 0x3c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 01C7
        gbc.setState(0x9806, 0x1d82, 0x9420, 0x5452, 0xc1f, 0xc959, 0x1, 0x0);
        gbc.writeMem(0x9806, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1d82);
        EXPECT(gbc.pc(), 0x9807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9806), 0x1b);
        // 1B 01C8
        gbc.setState(0x6f46, 0x3d30, 0x7c80, 0xc91e, 0xd827, 0x8df9, 0x0, 0x1);
        gbc.writeMem(0x6f46, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3d30);
        EXPECT(gbc.pc(), 0x6f47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01C9
        gbc.setState(0x21e9, 0x1b0b, 0xbcc0, 0x427e, 0xe11b, 0x941, 0x0, 0x0);
        gbc.writeMem(0x21e9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1b0b);
        EXPECT(gbc.pc(), 0x21ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01CA
        gbc.setState(0x794a, 0x7418, 0x9600, 0xb43b, 0x3e1e, 0xb3ba, 0x1, 0x1);
        gbc.writeMem(0x794a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x7418);
        EXPECT(gbc.pc(), 0x794b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01CB
        gbc.setState(0xd7e4, 0xeec0, 0x2220, 0x3890, 0x8eb0, 0xffc3, 0x0, 0x1);
        gbc.writeMem(0xd7e4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xeec0);
        EXPECT(gbc.pc(), 0xd7e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7e4), 0x1b);
        // 1B 01CC
        gbc.setState(0x951f, 0xc593, 0x4950, 0xac03, 0x1125, 0xe6c3, 0x0, 0x0);
        gbc.writeMem(0x951f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc593);
        EXPECT(gbc.pc(), 0x9520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x951f), 0x1b);
        // 1B 01CD
        gbc.setState(0x44f, 0xed90, 0xf620, 0xc8b8, 0xf7ba, 0xabb0, 0x1, 0x0);
        gbc.writeMem(0x44f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xed90);
        EXPECT(gbc.pc(), 0x450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01CE
        gbc.setState(0x8880, 0xcf17, 0x9920, 0x1ddd, 0x1d23, 0x464c, 0x1, 0x1);
        gbc.writeMem(0x8880, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xcf17);
        EXPECT(gbc.pc(), 0x8881);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8880), 0x1b);
        // 1B 01D0
        gbc.setState(0x44f1, 0xc97a, 0x3070, 0x1085, 0xff07, 0xbf4c, 0x1, 0x0);
        gbc.writeMem(0x44f1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xc97a);
        EXPECT(gbc.pc(), 0x44f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01D2
        gbc.setState(0x3a80, 0x61d5, 0x3a30, 0xb426, 0x778a, 0xeef5, 0x0, 0x0);
        gbc.writeMem(0x3a80, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x61d5);
        EXPECT(gbc.pc(), 0x3a81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01D4
        gbc.setState(0x22b7, 0x5cac, 0x3b40, 0xda7a, 0x1f09, 0x359, 0x0, 0x1);
        gbc.writeMem(0x22b7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5cac);
        EXPECT(gbc.pc(), 0x22b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01D5
        gbc.setState(0x9307, 0x7e91, 0x3460, 0xb7cc, 0x2017, 0x351f, 0x1, 0x0);
        gbc.writeMem(0x9307, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7e91);
        EXPECT(gbc.pc(), 0x9308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9307), 0x1b);
        // 1B 01D6
        gbc.setState(0x9b3c, 0xfcfb, 0xfb40, 0xf385, 0x7c5e, 0x7e5, 0x0, 0x1);
        gbc.writeMem(0x9b3c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xfcfb);
        EXPECT(gbc.pc(), 0x9b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b3c), 0x1b);
        // 1B 01D7
        gbc.setState(0x346e, 0x405, 0xdfb0, 0xc35d, 0xa946, 0x4c1f, 0x0, 0x0);
        gbc.writeMem(0x346e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x405);
        EXPECT(gbc.pc(), 0x346f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01D9
        gbc.setState(0x4043, 0xd0bb, 0x8f40, 0xbd1f, 0x72a6, 0xfe75, 0x0, 0x1);
        gbc.writeMem(0x4043, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd0bb);
        EXPECT(gbc.pc(), 0x4044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01DA
        gbc.setState(0x7f03, 0x2c59, 0x18e0, 0x1621, 0x28d1, 0xab8b, 0x1, 0x1);
        gbc.writeMem(0x7f03, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2c59);
        EXPECT(gbc.pc(), 0x7f04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01DB
        gbc.setState(0x83cd, 0x7e9e, 0x36e0, 0x88d3, 0xd7ff, 0xc092, 0x0, 0x0);
        gbc.writeMem(0x83cd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7e9e);
        EXPECT(gbc.pc(), 0x83ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83cd), 0x1b);
        // 1B 01DC
        gbc.setState(0xf53, 0x2c6f, 0x33e0, 0x8c6e, 0xd7b2, 0x4c9b, 0x0, 0x0);
        gbc.writeMem(0xf53, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2c6f);
        EXPECT(gbc.pc(), 0xf54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01DD
        gbc.setState(0x9dbc, 0x6b, 0x3f50, 0x4a64, 0xa06c, 0x4ed0, 0x0, 0x1);
        gbc.writeMem(0x9dbc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6b);
        EXPECT(gbc.pc(), 0x9dbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dbc), 0x1b);
        // 1B 01DE
        gbc.setState(0xba3a, 0xb7af, 0x2eb0, 0x7a1b, 0xefa9, 0x5d76, 0x0, 0x1);
        gbc.writeMem(0xba3a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb7af);
        EXPECT(gbc.pc(), 0xba3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba3a), 0x1b);
        // 1B 01DF
        gbc.setState(0x3667, 0x4202, 0x2c20, 0xd72c, 0xcf, 0x700b, 0x1, 0x1);
        gbc.writeMem(0x3667, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4202);
        EXPECT(gbc.pc(), 0x3668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01E0
        gbc.setState(0xa1ea, 0xbc06, 0x2300, 0x322f, 0xe531, 0xb4c8, 0x0, 0x0);
        gbc.writeMem(0xa1ea, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xbc06);
        EXPECT(gbc.pc(), 0xa1eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ea), 0x1b);
        // 1B 01E2
        gbc.setState(0xad71, 0xf289, 0x7ea0, 0x1aa0, 0x2429, 0x8104, 0x0, 0x0);
        gbc.writeMem(0xad71, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf289);
        EXPECT(gbc.pc(), 0xad72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad71), 0x1b);
        // 1B 01E4
        gbc.setState(0x4114, 0xd705, 0xdee0, 0xa629, 0x7aa5, 0xffb5, 0x1, 0x0);
        gbc.writeMem(0x4114, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd705);
        EXPECT(gbc.pc(), 0x4115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01E5
        gbc.setState(0xcb3d, 0xcfeb, 0x7f70, 0xccbe, 0x4dde, 0x64ed, 0x1, 0x0);
        gbc.writeMem(0xcb3d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcfeb);
        EXPECT(gbc.pc(), 0xcb3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb3d), 0x1b);
        // 1B 01E6
        gbc.setState(0x4cff, 0xa82c, 0x53b0, 0xfb2, 0x2acc, 0xf6f8, 0x1, 0x0);
        gbc.writeMem(0x4cff, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa82c);
        EXPECT(gbc.pc(), 0x4d00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01E7
        gbc.setState(0x1ef6, 0x3940, 0x6e60, 0x9a57, 0xbbae, 0x489b, 0x0, 0x1);
        gbc.writeMem(0x1ef6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3940);
        EXPECT(gbc.pc(), 0x1ef7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01E8
        gbc.setState(0x878c, 0x4c52, 0x47f0, 0xed6c, 0xf221, 0x3d5f, 0x1, 0x0);
        gbc.writeMem(0x878c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4c52);
        EXPECT(gbc.pc(), 0x878d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x878c), 0x1b);
        // 1B 01E9
        gbc.setState(0x2e19, 0x555e, 0xa660, 0x4b65, 0xaf58, 0xaa0e, 0x0, 0x1);
        gbc.writeMem(0x2e19, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x555e);
        EXPECT(gbc.pc(), 0x2e1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01EA
        gbc.setState(0x766c, 0x7c96, 0x9a20, 0x972d, 0xf88b, 0x84e6, 0x0, 0x1);
        gbc.writeMem(0x766c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7c96);
        EXPECT(gbc.pc(), 0x766d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01EB
        gbc.setState(0x95b3, 0x5424, 0x31e0, 0x6f27, 0xaa7d, 0x740a, 0x1, 0x0);
        gbc.writeMem(0x95b3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5424);
        EXPECT(gbc.pc(), 0x95b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b3), 0x1b);
        // 1B 01EC
        gbc.setState(0x641b, 0x8886, 0xb80, 0xc09a, 0x9844, 0x44bf, 0x1, 0x1);
        gbc.writeMem(0x641b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8886);
        EXPECT(gbc.pc(), 0x641c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01ED
        gbc.setState(0x9b81, 0x2c22, 0xcd60, 0x73a1, 0x504f, 0xca19, 0x1, 0x1);
        gbc.writeMem(0x9b81, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2c22);
        EXPECT(gbc.pc(), 0x9b82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b81), 0x1b);
        // 1B 01EE
        gbc.setState(0xb77, 0xeb60, 0x22d0, 0x9a72, 0x7e0e, 0x5bdc, 0x0, 0x1);
        gbc.writeMem(0xb77, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xeb60);
        EXPECT(gbc.pc(), 0xb78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 01EF
        gbc.setState(0x68f3, 0x7529, 0xd8b0, 0x49f7, 0x8afb, 0xdcd2, 0x0, 0x1);
        gbc.writeMem(0x68f3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7529);
        EXPECT(gbc.pc(), 0x68f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01F0
        gbc.setState(0xe804, 0xa59c, 0xbec0, 0x7111, 0xaadc, 0xacc2, 0x1, 0x1);
        gbc.writeMem(0xe804, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xa59c);
        EXPECT(gbc.pc(), 0xe805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe804), 0x1b);
        // 1B 01F1
        gbc.setState(0x1df7, 0x3219, 0x8850, 0x8721, 0x7e6b, 0x220e, 0x0, 0x1);
        gbc.writeMem(0x1df7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3219);
        EXPECT(gbc.pc(), 0x1df8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 01F2
        gbc.setState(0x448d, 0x40b0, 0x8730, 0x7cf6, 0x908d, 0x224f, 0x1, 0x1);
        gbc.writeMem(0x448d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x40b0);
        EXPECT(gbc.pc(), 0x448e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01F3
        gbc.setState(0x2c64, 0x1b1f, 0xb720, 0x5102, 0x5149, 0x38b4, 0x0, 0x1);
        gbc.writeMem(0x2c64, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1b1f);
        EXPECT(gbc.pc(), 0x2c65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 01F4
        gbc.setState(0xbcf5, 0x3beb, 0xff10, 0x93ad, 0xb1b4, 0xc6ff, 0x1, 0x0);
        gbc.writeMem(0xbcf5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3beb);
        EXPECT(gbc.pc(), 0xbcf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcf5), 0x1b);
        // 1B 01F5
        gbc.setState(0xe8b0, 0xa86a, 0x4090, 0xa6eb, 0x1a49, 0xa235, 0x1, 0x1);
        gbc.writeMem(0xe8b0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa86a);
        EXPECT(gbc.pc(), 0xe8b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8b0), 0x1b);
        // 1B 01F6
        gbc.setState(0x5c4e, 0xf8b2, 0x8b40, 0x27c6, 0xa073, 0xd35d, 0x0, 0x0);
        gbc.writeMem(0x5c4e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf8b2);
        EXPECT(gbc.pc(), 0x5c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 01F7
        gbc.setState(0x9afb, 0xe341, 0xe40, 0x1b6b, 0xcae2, 0xf87b, 0x0, 0x1);
        gbc.writeMem(0x9afb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe341);
        EXPECT(gbc.pc(), 0x9afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afb), 0x1b);
        // 1B 01F8
        gbc.setState(0xec23, 0xbcb0, 0x21f0, 0x3057, 0x150a, 0xf980, 0x0, 0x0);
        gbc.writeMem(0xec23, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbcb0);
        EXPECT(gbc.pc(), 0xec24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec23), 0x1b);
        // 1B 01F9
        gbc.setState(0x7bea, 0xc0be, 0xad30, 0xa98, 0x7aa3, 0xe746, 0x1, 0x0);
        gbc.writeMem(0x7bea, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc0be);
        EXPECT(gbc.pc(), 0x7beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 01FA
        gbc.setState(0xde0f, 0x9c42, 0xe840, 0x13e1, 0xbdac, 0x542d, 0x1, 0x0);
        gbc.writeMem(0xde0f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9c42);
        EXPECT(gbc.pc(), 0xde10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde0f), 0x1b);
        // 1B 01FB
        gbc.setState(0xa6d6, 0x77c9, 0x6f10, 0x3130, 0xee4c, 0xd3f5, 0x0, 0x1);
        gbc.writeMem(0xa6d6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x77c9);
        EXPECT(gbc.pc(), 0xa6d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6d6), 0x1b);
        // 1B 01FC
        gbc.setState(0x5342, 0x8cca, 0x4ad0, 0x30aa, 0xef53, 0x10d3, 0x1, 0x1);
        gbc.writeMem(0x5342, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8cca);
        EXPECT(gbc.pc(), 0x5343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 01FD
        gbc.setState(0xdcb5, 0x1802, 0x1480, 0x68f2, 0xa2af, 0x157a, 0x0, 0x1);
        gbc.writeMem(0xdcb5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1802);
        EXPECT(gbc.pc(), 0xdcb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb5), 0x1b);
        // 1B 01FF
        gbc.setState(0xdd61, 0xa09c, 0x1990, 0x2ff7, 0xb40c, 0x552f, 0x0, 0x0);
        gbc.writeMem(0xdd61, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa09c);
        EXPECT(gbc.pc(), 0xdd62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd61), 0x1b);
        // 1B 0200
        gbc.setState(0x71d0, 0xcfba, 0x4740, 0xb282, 0x57be, 0x8065, 0x0, 0x1);
        gbc.writeMem(0x71d0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xcfba);
        EXPECT(gbc.pc(), 0x71d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0201
        gbc.setState(0x214f, 0xb95f, 0x3950, 0x526b, 0xd7a0, 0x92a4, 0x1, 0x1);
        gbc.writeMem(0x214f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb95f);
        EXPECT(gbc.pc(), 0x2150);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0202
        gbc.setState(0xe115, 0x62a, 0x8030, 0xfa2, 0x25f2, 0xfd1, 0x1, 0x1);
        gbc.writeMem(0xe115, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x62a);
        EXPECT(gbc.pc(), 0xe116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe115), 0x1b);
        // 1B 0203
        gbc.setState(0xb006, 0x91be, 0x6820, 0x2a2a, 0x8fc7, 0x4b46, 0x1, 0x1);
        gbc.writeMem(0xb006, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x91be);
        EXPECT(gbc.pc(), 0xb007);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb006), 0x1b);
        // 1B 0204
        gbc.setState(0x4880, 0x3cb9, 0x83c0, 0xa4b7, 0x5a1b, 0x7c6d, 0x0, 0x0);
        gbc.writeMem(0x4880, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3cb9);
        EXPECT(gbc.pc(), 0x4881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0205
        gbc.setState(0x5ec1, 0x7dfd, 0xfa30, 0xbd0e, 0x60eb, 0x962d, 0x1, 0x0);
        gbc.writeMem(0x5ec1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7dfd);
        EXPECT(gbc.pc(), 0x5ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0206
        gbc.setState(0xaf1f, 0x2b6d, 0xc250, 0x23cd, 0x29bc, 0x9dc3, 0x1, 0x0);
        gbc.writeMem(0xaf1f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2b6d);
        EXPECT(gbc.pc(), 0xaf20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf1f), 0x1b);
        // 1B 0207
        gbc.setState(0x64f2, 0xe964, 0x64b0, 0x3fbe, 0x26fc, 0x4ad2, 0x1, 0x0);
        gbc.writeMem(0x64f2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe964);
        EXPECT(gbc.pc(), 0x64f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0208
        gbc.setState(0xe4dc, 0x7b1, 0xe770, 0x493d, 0xc6e7, 0x23c4, 0x0, 0x1);
        gbc.writeMem(0xe4dc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7b1);
        EXPECT(gbc.pc(), 0xe4dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4dc), 0x1b);
        // 1B 0209
        gbc.setState(0x6bb0, 0x8621, 0xd9a0, 0x1911, 0x3174, 0x178a, 0x1, 0x1);
        gbc.writeMem(0x6bb0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8621);
        EXPECT(gbc.pc(), 0x6bb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 020A
        gbc.setState(0xae08, 0x9c62, 0x4da0, 0x29c0, 0x2209, 0x79e0, 0x1, 0x1);
        gbc.writeMem(0xae08, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9c62);
        EXPECT(gbc.pc(), 0xae09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae08), 0x1b);
        // 1B 020B
        gbc.setState(0x6cc, 0x22df, 0x83f0, 0x3e1a, 0x8de2, 0xfd3e, 0x0, 0x0);
        gbc.writeMem(0x6cc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x22df);
        EXPECT(gbc.pc(), 0x6cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 020C
        gbc.setState(0xb9a8, 0xfa68, 0x5a60, 0xaaea, 0xf75a, 0xaf2d, 0x1, 0x0);
        gbc.writeMem(0xb9a8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfa68);
        EXPECT(gbc.pc(), 0xb9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9a8), 0x1b);
        // 1B 020D
        gbc.setState(0x896d, 0x6ec5, 0x9090, 0x2eb1, 0x9245, 0x7a5a, 0x0, 0x1);
        gbc.writeMem(0x896d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6ec5);
        EXPECT(gbc.pc(), 0x896e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x896d), 0x1b);
        // 1B 020F
        gbc.setState(0xcce4, 0x811e, 0xf220, 0xce37, 0x1239, 0xff13, 0x0, 0x0);
        gbc.writeMem(0xcce4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x811e);
        EXPECT(gbc.pc(), 0xcce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce4), 0x1b);
        // 1B 0210
        gbc.setState(0x594d, 0x18a5, 0xca10, 0xbf9a, 0x752c, 0xd985, 0x1, 0x0);
        gbc.writeMem(0x594d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x18a5);
        EXPECT(gbc.pc(), 0x594e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0211
        gbc.setState(0x4879, 0xe824, 0x6d00, 0x848f, 0xcbf1, 0x8a27, 0x1, 0x0);
        gbc.writeMem(0x4879, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe824);
        EXPECT(gbc.pc(), 0x487a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0212
        gbc.setState(0xd668, 0xedf2, 0x7690, 0xd94a, 0x453c, 0x3db1, 0x1, 0x1);
        gbc.writeMem(0xd668, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xedf2);
        EXPECT(gbc.pc(), 0xd669);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd668), 0x1b);
        // 1B 0213
        gbc.setState(0x56a8, 0xfd39, 0xb970, 0x1183, 0x7264, 0x6319, 0x0, 0x0);
        gbc.writeMem(0x56a8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfd39);
        EXPECT(gbc.pc(), 0x56a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0214
        gbc.setState(0x2df3, 0xdab1, 0x25e0, 0x1d07, 0x4d1e, 0xd63, 0x1, 0x1);
        gbc.writeMem(0x2df3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xdab1);
        EXPECT(gbc.pc(), 0x2df4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0215
        gbc.setState(0x801, 0x2da1, 0x2e40, 0x1955, 0x2cbc, 0x6831, 0x0, 0x0);
        gbc.writeMem(0x801, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2da1);
        EXPECT(gbc.pc(), 0x802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0216
        gbc.setState(0x1b7a, 0x4f42, 0xcf00, 0x8931, 0x1c72, 0x72b5, 0x0, 0x1);
        gbc.writeMem(0x1b7a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4f42);
        EXPECT(gbc.pc(), 0x1b7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0217
        gbc.setState(0x31f7, 0xce70, 0x5b70, 0xd509, 0xa48, 0xf67c, 0x0, 0x0);
        gbc.writeMem(0x31f7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xce70);
        EXPECT(gbc.pc(), 0x31f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0218
        gbc.setState(0x2473, 0xd1e2, 0x1060, 0x77a3, 0x99ab, 0x2912, 0x1, 0x1);
        gbc.writeMem(0x2473, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd1e2);
        EXPECT(gbc.pc(), 0x2474);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0219
        gbc.setState(0x3f86, 0x969e, 0x2b80, 0x3bf, 0xd00f, 0x727d, 0x0, 0x0);
        gbc.writeMem(0x3f86, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x969e);
        EXPECT(gbc.pc(), 0x3f87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 021A
        gbc.setState(0xb7e2, 0xcfea, 0xd110, 0x32b6, 0xb6b, 0x8e89, 0x1, 0x0);
        gbc.writeMem(0xb7e2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xcfea);
        EXPECT(gbc.pc(), 0xb7e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7e2), 0x1b);
        // 1B 021B
        gbc.setState(0x7163, 0x98ac, 0x75a0, 0xbc1e, 0xeb69, 0xe95f, 0x1, 0x1);
        gbc.writeMem(0x7163, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x98ac);
        EXPECT(gbc.pc(), 0x7164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 021C
        gbc.setState(0x859f, 0x4180, 0xfef0, 0xb639, 0xf3dd, 0x2e90, 0x1, 0x0);
        gbc.writeMem(0x859f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4180);
        EXPECT(gbc.pc(), 0x85a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x859f), 0x1b);
        // 1B 021D
        gbc.setState(0xc94c, 0x19df, 0xc3c0, 0x919a, 0x5503, 0xe93, 0x0, 0x0);
        gbc.writeMem(0xc94c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x19df);
        EXPECT(gbc.pc(), 0xc94d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94c), 0x1b);
        // 1B 021E
        gbc.setState(0xb7d7, 0xab23, 0x560, 0x25b0, 0x4e33, 0xb4c1, 0x1, 0x0);
        gbc.writeMem(0xb7d7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xab23);
        EXPECT(gbc.pc(), 0xb7d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d7), 0x1b);
        // 1B 021F
        gbc.setState(0xad73, 0x8633, 0xf600, 0x1a10, 0x53fb, 0x1fc4, 0x0, 0x0);
        gbc.writeMem(0xad73, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x8633);
        EXPECT(gbc.pc(), 0xad74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad73), 0x1b);
        // 1B 0220
        gbc.setState(0xe1fd, 0x77a2, 0xe0d0, 0x81a5, 0xeafb, 0xda3f, 0x0, 0x0);
        gbc.writeMem(0xe1fd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x77a2);
        EXPECT(gbc.pc(), 0xe1fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1fd), 0x1b);
        // 1B 0221
        gbc.setState(0xd0f0, 0xc2bf, 0xe390, 0x9e54, 0xfc2f, 0xa90, 0x0, 0x1);
        gbc.writeMem(0xd0f0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc2bf);
        EXPECT(gbc.pc(), 0xd0f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0f0), 0x1b);
        // 1B 0222
        gbc.setState(0xd5f5, 0x9d8d, 0xd760, 0x6f2d, 0x607d, 0x39a2, 0x0, 0x1);
        gbc.writeMem(0xd5f5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9d8d);
        EXPECT(gbc.pc(), 0xd5f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f5), 0x1b);
        // 1B 0223
        gbc.setState(0x6199, 0x8456, 0x89a0, 0xa387, 0x8448, 0x1a94, 0x1, 0x0);
        gbc.writeMem(0x6199, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8456);
        EXPECT(gbc.pc(), 0x619a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0224
        gbc.setState(0xb0c7, 0x29f1, 0x3100, 0xa1e6, 0xbb7c, 0xd356, 0x0, 0x1);
        gbc.writeMem(0xb0c7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x29f1);
        EXPECT(gbc.pc(), 0xb0c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c7), 0x1b);
        // 1B 0225
        gbc.setState(0x57dc, 0xe154, 0x1700, 0x794d, 0x722e, 0xf56d, 0x0, 0x0);
        gbc.writeMem(0x57dc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe154);
        EXPECT(gbc.pc(), 0x57dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0226
        gbc.setState(0xd633, 0x938d, 0xf6b0, 0xc1ac, 0xacf1, 0xa62c, 0x1, 0x0);
        gbc.writeMem(0xd633, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x938d);
        EXPECT(gbc.pc(), 0xd634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd633), 0x1b);
        // 1B 0227
        gbc.setState(0xa659, 0x61fe, 0xf210, 0xbee4, 0xe706, 0x4f22, 0x1, 0x1);
        gbc.writeMem(0xa659, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x61fe);
        EXPECT(gbc.pc(), 0xa65a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa659), 0x1b);
        // 1B 0228
        gbc.setState(0x2fe4, 0xa353, 0xd900, 0xcae0, 0xde32, 0x3acd, 0x0, 0x1);
        gbc.writeMem(0x2fe4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa353);
        EXPECT(gbc.pc(), 0x2fe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0229
        gbc.setState(0xe75c, 0x8806, 0x98f0, 0xedc9, 0x2e42, 0xcfb9, 0x0, 0x0);
        gbc.writeMem(0xe75c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8806);
        EXPECT(gbc.pc(), 0xe75d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe75c), 0x1b);
        // 1B 022A
        gbc.setState(0xf82, 0xc9ee, 0xd30, 0x8a6e, 0xf765, 0x16b2, 0x0, 0x0);
        gbc.writeMem(0xf82, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc9ee);
        EXPECT(gbc.pc(), 0xf83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 022B
        gbc.setState(0xe6ba, 0xb9e, 0x32b0, 0xfc60, 0x65a8, 0xe5ae, 0x0, 0x1);
        gbc.writeMem(0xe6ba, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb9e);
        EXPECT(gbc.pc(), 0xe6bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6ba), 0x1b);
        // 1B 022C
        gbc.setState(0x16e6, 0x6a15, 0x71e0, 0x1bd3, 0xa809, 0x1330, 0x0, 0x0);
        gbc.writeMem(0x16e6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6a15);
        EXPECT(gbc.pc(), 0x16e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 022D
        gbc.setState(0xcc90, 0xe47f, 0xf910, 0x3fa5, 0x4f8d, 0x8590, 0x1, 0x1);
        gbc.writeMem(0xcc90, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe47f);
        EXPECT(gbc.pc(), 0xcc91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc90), 0x1b);
        // 1B 022E
        gbc.setState(0xdb9b, 0xce2, 0x5010, 0x85aa, 0x7000, 0x3b3d, 0x0, 0x0);
        gbc.writeMem(0xdb9b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xce2);
        EXPECT(gbc.pc(), 0xdb9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb9b), 0x1b);
        // 1B 022F
        gbc.setState(0x71a9, 0x4b, 0x3b60, 0x5ad7, 0x5b1e, 0x93f3, 0x1, 0x1);
        gbc.writeMem(0x71a9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4b);
        EXPECT(gbc.pc(), 0x71aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0230
        gbc.setState(0x2c9a, 0xa942, 0xe8c0, 0x3268, 0xf38, 0xef8e, 0x1, 0x1);
        gbc.writeMem(0x2c9a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa942);
        EXPECT(gbc.pc(), 0x2c9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0231
        gbc.setState(0x2604, 0x3470, 0x9950, 0x5511, 0x14f2, 0x7bec, 0x1, 0x1);
        gbc.writeMem(0x2604, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3470);
        EXPECT(gbc.pc(), 0x2605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0232
        gbc.setState(0xddb3, 0x1807, 0xb210, 0x9cb2, 0xee8, 0x3b39, 0x1, 0x1);
        gbc.writeMem(0xddb3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x1807);
        EXPECT(gbc.pc(), 0xddb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddb3), 0x1b);
        // 1B 0233
        gbc.setState(0x1834, 0xdac0, 0x8110, 0xf200, 0x60e, 0xda5, 0x0, 0x1);
        gbc.writeMem(0x1834, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xdac0);
        EXPECT(gbc.pc(), 0x1835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0234
        gbc.setState(0x7d43, 0x1c19, 0x3920, 0x52ad, 0x24cd, 0xdcd9, 0x0, 0x1);
        gbc.writeMem(0x7d43, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1c19);
        EXPECT(gbc.pc(), 0x7d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0235
        gbc.setState(0xe679, 0x806c, 0x9730, 0x550, 0x43e9, 0x4f48, 0x1, 0x0);
        gbc.writeMem(0xe679, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x806c);
        EXPECT(gbc.pc(), 0xe67a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe679), 0x1b);
        // 1B 0236
        gbc.setState(0xadaa, 0x2df9, 0x53b0, 0x34af, 0xbe3a, 0x5b7e, 0x1, 0x0);
        gbc.writeMem(0xadaa, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2df9);
        EXPECT(gbc.pc(), 0xadab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadaa), 0x1b);
        // 1B 0237
        gbc.setState(0xb12d, 0xcc3a, 0xaad0, 0x8b04, 0xee4d, 0x1aec, 0x1, 0x1);
        gbc.writeMem(0xb12d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xcc3a);
        EXPECT(gbc.pc(), 0xb12e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb12d), 0x1b);
        // 1B 0239
        gbc.setState(0xd8c4, 0xb7fa, 0x30d0, 0x3702, 0xf3d4, 0x6ed0, 0x1, 0x0);
        gbc.writeMem(0xd8c4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb7fa);
        EXPECT(gbc.pc(), 0xd8c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8c4), 0x1b);
        // 1B 023A
        gbc.setState(0xbc43, 0x29b6, 0xdf0, 0x4927, 0x3ef8, 0xc2df, 0x0, 0x1);
        gbc.writeMem(0xbc43, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x29b6);
        EXPECT(gbc.pc(), 0xbc44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc43), 0x1b);
        // 1B 023B
        gbc.setState(0x15a4, 0xf890, 0x2c70, 0x131f, 0x5d58, 0xb0e2, 0x0, 0x1);
        gbc.writeMem(0x15a4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf890);
        EXPECT(gbc.pc(), 0x15a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 023C
        gbc.setState(0x5333, 0x5571, 0xeb60, 0x2632, 0xe314, 0x56e2, 0x0, 0x1);
        gbc.writeMem(0x5333, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5571);
        EXPECT(gbc.pc(), 0x5334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 023D
        gbc.setState(0x81d7, 0x7b83, 0xdd50, 0x343d, 0x362, 0x9fb6, 0x1, 0x1);
        gbc.writeMem(0x81d7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7b83);
        EXPECT(gbc.pc(), 0x81d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81d7), 0x1b);
        // 1B 023E
        gbc.setState(0x2f35, 0x14a6, 0x8390, 0x3788, 0x4f11, 0xc2e5, 0x1, 0x1);
        gbc.writeMem(0x2f35, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x14a6);
        EXPECT(gbc.pc(), 0x2f36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0240
        gbc.setState(0x7831, 0x9b0f, 0x6e40, 0x865c, 0x332c, 0xac10, 0x0, 0x1);
        gbc.writeMem(0x7831, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9b0f);
        EXPECT(gbc.pc(), 0x7832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0241
        gbc.setState(0x84d7, 0x749f, 0x5ae0, 0x9b4a, 0x718a, 0xd228, 0x1, 0x1);
        gbc.writeMem(0x84d7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x749f);
        EXPECT(gbc.pc(), 0x84d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d7), 0x1b);
        // 1B 0242
        gbc.setState(0x8a8d, 0xbf91, 0x1740, 0xb561, 0x3af, 0x7308, 0x1, 0x0);
        gbc.writeMem(0x8a8d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xbf91);
        EXPECT(gbc.pc(), 0x8a8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a8d), 0x1b);
        // 1B 0243
        gbc.setState(0x6c39, 0x9dab, 0x9d80, 0x2b2e, 0x4d60, 0x52f4, 0x0, 0x1);
        gbc.writeMem(0x6c39, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9dab);
        EXPECT(gbc.pc(), 0x6c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0244
        gbc.setState(0x4857, 0xfa15, 0xf0, 0xf1b4, 0x11b9, 0xcaf4, 0x0, 0x1);
        gbc.writeMem(0x4857, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfa15);
        EXPECT(gbc.pc(), 0x4858);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0245
        gbc.setState(0x6024, 0xd5f4, 0x48b0, 0x64ac, 0x98d8, 0x7fcc, 0x0, 0x0);
        gbc.writeMem(0x6024, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd5f4);
        EXPECT(gbc.pc(), 0x6025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0246
        gbc.setState(0x2334, 0xacac, 0x76a0, 0x3343, 0xf766, 0xb761, 0x1, 0x1);
        gbc.writeMem(0x2334, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xacac);
        EXPECT(gbc.pc(), 0x2335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0247
        gbc.setState(0x6996, 0x63df, 0x6850, 0x797f, 0xb77, 0xddb6, 0x1, 0x1);
        gbc.writeMem(0x6996, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x63df);
        EXPECT(gbc.pc(), 0x6997);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0248
        gbc.setState(0xed26, 0x79f8, 0xe7b0, 0x480a, 0xf44b, 0xcef5, 0x0, 0x0);
        gbc.writeMem(0xed26, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x79f8);
        EXPECT(gbc.pc(), 0xed27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed26), 0x1b);
        // 1B 024A
        gbc.setState(0x3d4, 0xc6b5, 0x5960, 0xd093, 0x7ac5, 0x325d, 0x0, 0x1);
        gbc.writeMem(0x3d4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc6b5);
        EXPECT(gbc.pc(), 0x3d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 024B
        gbc.setState(0x9456, 0x99f, 0x6d00, 0x4d58, 0xc269, 0x1134, 0x1, 0x1);
        gbc.writeMem(0x9456, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x99f);
        EXPECT(gbc.pc(), 0x9457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9456), 0x1b);
        // 1B 024C
        gbc.setState(0xed1b, 0xf01c, 0x5a40, 0xa3ea, 0x2c24, 0x243b, 0x0, 0x0);
        gbc.writeMem(0xed1b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf01c);
        EXPECT(gbc.pc(), 0xed1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed1b), 0x1b);
        // 1B 024D
        gbc.setState(0xbd86, 0xe390, 0xe030, 0x4e0e, 0xdf0a, 0xb666, 0x1, 0x0);
        gbc.writeMem(0xbd86, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe390);
        EXPECT(gbc.pc(), 0xbd87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd86), 0x1b);
        // 1B 024E
        gbc.setState(0xab9f, 0x560e, 0x9670, 0x9439, 0x271b, 0x71dc, 0x0, 0x1);
        gbc.writeMem(0xab9f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x560e);
        EXPECT(gbc.pc(), 0xaba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9f), 0x1b);
        // 1B 024F
        gbc.setState(0x2507, 0x8f38, 0x9ca0, 0x3c75, 0x7f88, 0x4720, 0x0, 0x1);
        gbc.writeMem(0x2507, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8f38);
        EXPECT(gbc.pc(), 0x2508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0250
        gbc.setState(0xb866, 0x6a88, 0xe810, 0x73cb, 0x5350, 0x491, 0x1, 0x0);
        gbc.writeMem(0xb866, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6a88);
        EXPECT(gbc.pc(), 0xb867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb866), 0x1b);
        // 1B 0251
        gbc.setState(0x7599, 0xe060, 0xee80, 0xedea, 0x5ceb, 0x7a17, 0x1, 0x1);
        gbc.writeMem(0x7599, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe060);
        EXPECT(gbc.pc(), 0x759a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0252
        gbc.setState(0x2294, 0x92ff, 0x20e0, 0xae06, 0xc7ea, 0x9445, 0x1, 0x1);
        gbc.writeMem(0x2294, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x92ff);
        EXPECT(gbc.pc(), 0x2295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0253
        gbc.setState(0x35e1, 0x636a, 0x2370, 0x5940, 0x3c2a, 0x7b8a, 0x1, 0x1);
        gbc.writeMem(0x35e1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x636a);
        EXPECT(gbc.pc(), 0x35e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0254
        gbc.setState(0x1e06, 0xb29c, 0xddb0, 0x51df, 0x6c07, 0x7105, 0x0, 0x1);
        gbc.writeMem(0x1e06, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb29c);
        EXPECT(gbc.pc(), 0x1e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0255
        gbc.setState(0x9ec5, 0xa5b4, 0xb6f0, 0x76e3, 0x60a5, 0xbdcd, 0x1, 0x1);
        gbc.writeMem(0x9ec5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa5b4);
        EXPECT(gbc.pc(), 0x9ec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ec5), 0x1b);
        // 1B 0256
        gbc.setState(0xcad4, 0x54ef, 0xdf40, 0xe4c2, 0x4, 0x7f60, 0x0, 0x0);
        gbc.writeMem(0xcad4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x54ef);
        EXPECT(gbc.pc(), 0xcad5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad4), 0x1b);
        // 1B 0257
        gbc.setState(0x9c47, 0xd012, 0x2a80, 0xf326, 0xd4e1, 0xd560, 0x0, 0x0);
        gbc.writeMem(0x9c47, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd012);
        EXPECT(gbc.pc(), 0x9c48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c47), 0x1b);
        // 1B 0258
        gbc.setState(0x7bf1, 0x51be, 0xd6c0, 0x7906, 0x7fed, 0x20b8, 0x1, 0x0);
        gbc.writeMem(0x7bf1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x51be);
        EXPECT(gbc.pc(), 0x7bf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0259
        gbc.setState(0x1560, 0x3cbf, 0x28a0, 0x1d36, 0x33b8, 0xccc, 0x0, 0x1);
        gbc.writeMem(0x1560, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3cbf);
        EXPECT(gbc.pc(), 0x1561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 025A
        gbc.setState(0xc08d, 0xe631, 0xe840, 0xc86f, 0x7c45, 0x2c19, 0x1, 0x1);
        gbc.writeMem(0xc08d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe631);
        EXPECT(gbc.pc(), 0xc08e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc08d), 0x1b);
        // 1B 025B
        gbc.setState(0x1be4, 0x58a4, 0x1150, 0x5131, 0x7c1b, 0x687b, 0x1, 0x0);
        gbc.writeMem(0x1be4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x58a4);
        EXPECT(gbc.pc(), 0x1be5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 025C
        gbc.setState(0x23bb, 0xd57b, 0xb020, 0x565d, 0xacc0, 0x4f48, 0x1, 0x0);
        gbc.writeMem(0x23bb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd57b);
        EXPECT(gbc.pc(), 0x23bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 025D
        gbc.setState(0x8c5a, 0xf522, 0xa400, 0x1e11, 0x94bd, 0x44e3, 0x0, 0x0);
        gbc.writeMem(0x8c5a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf522);
        EXPECT(gbc.pc(), 0x8c5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c5a), 0x1b);
        // 1B 025E
        gbc.setState(0x8a99, 0x95c7, 0x9d40, 0x46f4, 0xdec, 0xcf22, 0x0, 0x0);
        gbc.writeMem(0x8a99, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x95c7);
        EXPECT(gbc.pc(), 0x8a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a99), 0x1b);
        // 1B 025F
        gbc.setState(0x3287, 0x7ae6, 0x1320, 0x6378, 0x7b23, 0xbc1, 0x1, 0x1);
        gbc.writeMem(0x3287, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7ae6);
        EXPECT(gbc.pc(), 0x3288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0260
        gbc.setState(0x96dd, 0x6f2e, 0xaa40, 0x55c9, 0x48e9, 0xd745, 0x0, 0x1);
        gbc.writeMem(0x96dd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6f2e);
        EXPECT(gbc.pc(), 0x96de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96dd), 0x1b);
        // 1B 0261
        gbc.setState(0x65, 0x8d28, 0x3a80, 0x1498, 0x4dc2, 0x9556, 0x1, 0x1);
        gbc.writeMem(0x65, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8d28);
        EXPECT(gbc.pc(), 0x66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0262
        gbc.setState(0xbc78, 0x876a, 0x7e90, 0xb794, 0x6ceb, 0xf61f, 0x1, 0x1);
        gbc.writeMem(0xbc78, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x876a);
        EXPECT(gbc.pc(), 0xbc79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc78), 0x1b);
        // 1B 0263
        gbc.setState(0x1bd1, 0xd3f3, 0xc6e0, 0xd55d, 0x91d6, 0x8d23, 0x1, 0x1);
        gbc.writeMem(0x1bd1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd3f3);
        EXPECT(gbc.pc(), 0x1bd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0264
        gbc.setState(0x5b17, 0xb81f, 0x38b0, 0x9166, 0xb010, 0xd0d5, 0x1, 0x1);
        gbc.writeMem(0x5b17, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb81f);
        EXPECT(gbc.pc(), 0x5b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0265
        gbc.setState(0x107f, 0x867e, 0x3900, 0x973f, 0x6b19, 0x7c7a, 0x1, 0x1);
        gbc.writeMem(0x107f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x867e);
        EXPECT(gbc.pc(), 0x1080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0266
        gbc.setState(0x2521, 0xbf57, 0xcb80, 0x6a6f, 0x9f3e, 0x2465, 0x1, 0x0);
        gbc.writeMem(0x2521, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xbf57);
        EXPECT(gbc.pc(), 0x2522);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0267
        gbc.setState(0x9b02, 0x51ff, 0x86f0, 0xa0ae, 0x8b83, 0x283f, 0x0, 0x0);
        gbc.writeMem(0x9b02, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x51ff);
        EXPECT(gbc.pc(), 0x9b03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b02), 0x1b);
        // 1B 0268
        gbc.setState(0x1dc2, 0xe04c, 0xe8e0, 0xf478, 0xa32d, 0xa4c0, 0x0, 0x0);
        gbc.writeMem(0x1dc2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe04c);
        EXPECT(gbc.pc(), 0x1dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0269
        gbc.setState(0x88e4, 0xdb79, 0x52d0, 0xfe0, 0x373a, 0x1e4, 0x1, 0x0);
        gbc.writeMem(0x88e4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xdb79);
        EXPECT(gbc.pc(), 0x88e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88e4), 0x1b);
        // 1B 026A
        gbc.setState(0x3b4d, 0x297a, 0xfb00, 0x92bf, 0xf043, 0x46c6, 0x1, 0x1);
        gbc.writeMem(0x3b4d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x297a);
        EXPECT(gbc.pc(), 0x3b4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 026B
        gbc.setState(0x62c0, 0x1c7c, 0xad90, 0xa777, 0xf904, 0x571e, 0x1, 0x1);
        gbc.writeMem(0x62c0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1c7c);
        EXPECT(gbc.pc(), 0x62c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 026D
        gbc.setState(0xc8e5, 0x44a1, 0xe6a0, 0x1d58, 0x6886, 0xad62, 0x0, 0x1);
        gbc.writeMem(0xc8e5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x44a1);
        EXPECT(gbc.pc(), 0xc8e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e5), 0x1b);
        // 1B 026E
        gbc.setState(0xab71, 0xdb5, 0x9570, 0x81d6, 0xfaf2, 0x88d6, 0x1, 0x0);
        gbc.writeMem(0xab71, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xdb5);
        EXPECT(gbc.pc(), 0xab72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab71), 0x1b);
        // 1B 026F
        gbc.setState(0x248e, 0xc4e6, 0x4760, 0x7c8c, 0x9e85, 0x850d, 0x0, 0x1);
        gbc.writeMem(0x248e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc4e6);
        EXPECT(gbc.pc(), 0x248f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0270
        gbc.setState(0xc736, 0x854a, 0xbe60, 0x56c3, 0x62dc, 0x947b, 0x1, 0x0);
        gbc.writeMem(0xc736, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x854a);
        EXPECT(gbc.pc(), 0xc737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc736), 0x1b);
        // 1B 0271
        gbc.setState(0x100a, 0xa1bd, 0xe990, 0xc211, 0x6c0f, 0xc41e, 0x1, 0x1);
        gbc.writeMem(0x100a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa1bd);
        EXPECT(gbc.pc(), 0x100b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0272
        gbc.setState(0x898b, 0x807e, 0x75b0, 0xd86a, 0x1925, 0x7041, 0x0, 0x1);
        gbc.writeMem(0x898b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x807e);
        EXPECT(gbc.pc(), 0x898c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x898b), 0x1b);
        // 1B 0273
        gbc.setState(0xb4a, 0x75e8, 0x840, 0x42a8, 0x5728, 0xbc1d, 0x0, 0x1);
        gbc.writeMem(0xb4a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x75e8);
        EXPECT(gbc.pc(), 0xb4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0274
        gbc.setState(0x87e7, 0x2d10, 0x6070, 0x5881, 0xeb3d, 0x323f, 0x0, 0x0);
        gbc.writeMem(0x87e7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2d10);
        EXPECT(gbc.pc(), 0x87e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e7), 0x1b);
        // 1B 0275
        gbc.setState(0xbd72, 0xe976, 0x43c0, 0xebd5, 0x5214, 0x5000, 0x0, 0x1);
        gbc.writeMem(0xbd72, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe976);
        EXPECT(gbc.pc(), 0xbd73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd72), 0x1b);
        // 1B 0276
        gbc.setState(0x7ec3, 0xcaf6, 0xccc0, 0x5172, 0x28c5, 0x97d7, 0x0, 0x1);
        gbc.writeMem(0x7ec3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcaf6);
        EXPECT(gbc.pc(), 0x7ec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0277
        gbc.setState(0x4ad9, 0x2bbb, 0x9f10, 0x49c5, 0xbf85, 0xd2fb, 0x1, 0x0);
        gbc.writeMem(0x4ad9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2bbb);
        EXPECT(gbc.pc(), 0x4ada);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0278
        gbc.setState(0xbb07, 0x526, 0xbc40, 0x69f1, 0x3c2c, 0x97ac, 0x0, 0x0);
        gbc.writeMem(0xbb07, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x526);
        EXPECT(gbc.pc(), 0xbb08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb07), 0x1b);
        // 1B 0279
        gbc.setState(0xf73, 0x3b25, 0x3e00, 0x2055, 0x6bc4, 0x8e22, 0x1, 0x0);
        gbc.writeMem(0xf73, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3b25);
        EXPECT(gbc.pc(), 0xf74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 027A
        gbc.setState(0xfa0, 0x4f03, 0x9360, 0x12ef, 0xa86d, 0x8e69, 0x0, 0x1);
        gbc.writeMem(0xfa0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4f03);
        EXPECT(gbc.pc(), 0xfa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 027B
        gbc.setState(0x1e29, 0x62f, 0xea40, 0xe309, 0xce7c, 0x4d00, 0x0, 0x0);
        gbc.writeMem(0x1e29, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x62f);
        EXPECT(gbc.pc(), 0x1e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 027C
        gbc.setState(0xd9de, 0x761e, 0xb560, 0xaff7, 0xca1d, 0x9ca4, 0x1, 0x1);
        gbc.writeMem(0xd9de, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x761e);
        EXPECT(gbc.pc(), 0xd9df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9de), 0x1b);
        // 1B 027D
        gbc.setState(0x33cb, 0x5c98, 0x3090, 0xf773, 0xaeb7, 0xb7b7, 0x0, 0x1);
        gbc.writeMem(0x33cb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5c98);
        EXPECT(gbc.pc(), 0x33cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 027E
        gbc.setState(0x55f0, 0x7799, 0x71b0, 0x3bab, 0x1e94, 0xeed7, 0x1, 0x0);
        gbc.writeMem(0x55f0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x7799);
        EXPECT(gbc.pc(), 0x55f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 027F
        gbc.setState(0x4c5e, 0x9726, 0x440, 0xbcb0, 0x7232, 0xe2f3, 0x0, 0x0);
        gbc.writeMem(0x4c5e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9726);
        EXPECT(gbc.pc(), 0x4c5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0280
        gbc.setState(0x5221, 0xa705, 0x1070, 0xa57a, 0x21bf, 0x6017, 0x0, 0x1);
        gbc.writeMem(0x5221, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa705);
        EXPECT(gbc.pc(), 0x5222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0281
        gbc.setState(0x84d4, 0xed88, 0x2990, 0xa792, 0x4cee, 0xd5ab, 0x0, 0x0);
        gbc.writeMem(0x84d4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xed88);
        EXPECT(gbc.pc(), 0x84d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d4), 0x1b);
        // 1B 0282
        gbc.setState(0x1c97, 0xd4a9, 0xe6c0, 0x6390, 0xe359, 0x14a9, 0x0, 0x1);
        gbc.writeMem(0x1c97, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd4a9);
        EXPECT(gbc.pc(), 0x1c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0283
        gbc.setState(0xb890, 0xbd55, 0x2920, 0x566, 0x8724, 0xb1f7, 0x1, 0x0);
        gbc.writeMem(0xb890, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xbd55);
        EXPECT(gbc.pc(), 0xb891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb890), 0x1b);
        // 1B 0284
        gbc.setState(0xbfc1, 0x91b, 0x9630, 0xea93, 0x1bc7, 0xe218, 0x0, 0x0);
        gbc.writeMem(0xbfc1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x91b);
        EXPECT(gbc.pc(), 0xbfc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfc1), 0x1b);
        // 1B 0285
        gbc.setState(0xe95a, 0x119b, 0x2590, 0xbfba, 0xa447, 0xd8a6, 0x1, 0x0);
        gbc.writeMem(0xe95a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x119b);
        EXPECT(gbc.pc(), 0xe95b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe95a), 0x1b);
        // 1B 0286
        gbc.setState(0x5b31, 0x23d9, 0x3830, 0xd3c7, 0x4e7d, 0x3c11, 0x1, 0x1);
        gbc.writeMem(0x5b31, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x23d9);
        EXPECT(gbc.pc(), 0x5b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0287
        gbc.setState(0xbcca, 0x91eb, 0xfe10, 0xd652, 0x14a1, 0xe99f, 0x0, 0x0);
        gbc.writeMem(0xbcca, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x91eb);
        EXPECT(gbc.pc(), 0xbccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcca), 0x1b);
        // 1B 0288
        gbc.setState(0xba3c, 0x91a9, 0x62d0, 0xc9cc, 0x3bda, 0xb10c, 0x1, 0x1);
        gbc.writeMem(0xba3c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x91a9);
        EXPECT(gbc.pc(), 0xba3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba3c), 0x1b);
        // 1B 0289
        gbc.setState(0xb22f, 0x5c30, 0x2f40, 0x2009, 0x6e2a, 0xab6a, 0x1, 0x1);
        gbc.writeMem(0xb22f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5c30);
        EXPECT(gbc.pc(), 0xb230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb22f), 0x1b);
        // 1B 028A
        gbc.setState(0x9f9b, 0xc23c, 0xaba0, 0xd662, 0xf86e, 0x20fc, 0x1, 0x0);
        gbc.writeMem(0x9f9b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc23c);
        EXPECT(gbc.pc(), 0x9f9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f9b), 0x1b);
        // 1B 028B
        gbc.setState(0xa788, 0x6bc5, 0xffc0, 0xc727, 0x8a82, 0xf7e5, 0x0, 0x0);
        gbc.writeMem(0xa788, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6bc5);
        EXPECT(gbc.pc(), 0xa789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa788), 0x1b);
        // 1B 028C
        gbc.setState(0xb2de, 0x15d6, 0xecc0, 0x73a7, 0xaac8, 0xade2, 0x1, 0x1);
        gbc.writeMem(0xb2de, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x15d6);
        EXPECT(gbc.pc(), 0xb2df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2de), 0x1b);
        // 1B 028D
        gbc.setState(0xb385, 0xd3e, 0xcc60, 0xd4c2, 0xe57e, 0x7f6f, 0x1, 0x1);
        gbc.writeMem(0xb385, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd3e);
        EXPECT(gbc.pc(), 0xb386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb385), 0x1b);
        // 1B 028E
        gbc.setState(0xbf11, 0x7c55, 0x16e0, 0x5564, 0x16f5, 0x264, 0x0, 0x1);
        gbc.writeMem(0xbf11, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7c55);
        EXPECT(gbc.pc(), 0xbf12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf11), 0x1b);
        // 1B 0290
        gbc.setState(0xc107, 0xc2f3, 0xa4c0, 0x8209, 0x6ad9, 0x3c82, 0x1, 0x1);
        gbc.writeMem(0xc107, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc2f3);
        EXPECT(gbc.pc(), 0xc108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc107), 0x1b);
        // 1B 0291
        gbc.setState(0x6f8a, 0x1cb9, 0xdb10, 0x4fa5, 0xb342, 0x1161, 0x1, 0x0);
        gbc.writeMem(0x6f8a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1cb9);
        EXPECT(gbc.pc(), 0x6f8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0292
        gbc.setState(0xdc6, 0x8ff2, 0x9210, 0x2643, 0xe3bd, 0x806, 0x1, 0x1);
        gbc.writeMem(0xdc6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8ff2);
        EXPECT(gbc.pc(), 0xdc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0293
        gbc.setState(0x5f2a, 0x8947, 0x9580, 0x85be, 0xec5d, 0x9dc7, 0x1, 0x1);
        gbc.writeMem(0x5f2a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x8947);
        EXPECT(gbc.pc(), 0x5f2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0294
        gbc.setState(0x668a, 0x5016, 0x75b0, 0xce37, 0xfb5a, 0xf48e, 0x1, 0x0);
        gbc.writeMem(0x668a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5016);
        EXPECT(gbc.pc(), 0x668b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0295
        gbc.setState(0x7060, 0xff6d, 0x1f90, 0xfcdb, 0x299d, 0x595, 0x0, 0x0);
        gbc.writeMem(0x7060, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xff6d);
        EXPECT(gbc.pc(), 0x7061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0296
        gbc.setState(0xb31b, 0x71e, 0xd800, 0x7171, 0x79a0, 0xda23, 0x0, 0x0);
        gbc.writeMem(0xb31b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x71e);
        EXPECT(gbc.pc(), 0xb31c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb31b), 0x1b);
        // 1B 0297
        gbc.setState(0x5399, 0xd0c7, 0x7e70, 0xd02b, 0x687c, 0x5468, 0x1, 0x0);
        gbc.writeMem(0x5399, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd0c7);
        EXPECT(gbc.pc(), 0x539a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0298
        gbc.setState(0x975d, 0xb6d4, 0x4290, 0x55b9, 0xdf05, 0x3ded, 0x0, 0x1);
        gbc.writeMem(0x975d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb6d4);
        EXPECT(gbc.pc(), 0x975e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x975d), 0x1b);
        // 1B 0299
        gbc.setState(0xc324, 0x449c, 0x2650, 0x7ae5, 0xf319, 0xcd4d, 0x1, 0x0);
        gbc.writeMem(0xc324, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x449c);
        EXPECT(gbc.pc(), 0xc325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc324), 0x1b);
        // 1B 029B
        gbc.setState(0xbaac, 0x3c7, 0xd6e0, 0xc354, 0xec2e, 0x457c, 0x1, 0x1);
        gbc.writeMem(0xbaac, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3c7);
        EXPECT(gbc.pc(), 0xbaad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaac), 0x1b);
        // 1B 029C
        gbc.setState(0x3b4f, 0x98fb, 0x6e80, 0x62a4, 0x133a, 0x6eab, 0x1, 0x0);
        gbc.writeMem(0x3b4f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x98fb);
        EXPECT(gbc.pc(), 0x3b50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 029D
        gbc.setState(0x8a51, 0x5ffe, 0x8010, 0xad78, 0xf35, 0x72fd, 0x0, 0x1);
        gbc.writeMem(0x8a51, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5ffe);
        EXPECT(gbc.pc(), 0x8a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a51), 0x1b);
        // 1B 029E
        gbc.setState(0xf38, 0x8a35, 0x9f10, 0x9206, 0xa6a9, 0x225, 0x0, 0x0);
        gbc.writeMem(0xf38, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8a35);
        EXPECT(gbc.pc(), 0xf39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 029F
        gbc.setState(0x59b4, 0x601f, 0xd980, 0xcb60, 0x6b5c, 0xbc48, 0x1, 0x0);
        gbc.writeMem(0x59b4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x601f);
        EXPECT(gbc.pc(), 0x59b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02A0
        gbc.setState(0xad08, 0x1e0a, 0x3e10, 0x1ea3, 0xf25, 0x557a, 0x1, 0x0);
        gbc.writeMem(0xad08, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1e0a);
        EXPECT(gbc.pc(), 0xad09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad08), 0x1b);
        // 1B 02A1
        gbc.setState(0x325f, 0xee04, 0x4ae0, 0x7da, 0xaa7b, 0xbb19, 0x0, 0x0);
        gbc.writeMem(0x325f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xee04);
        EXPECT(gbc.pc(), 0x3260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02A2
        gbc.setState(0x6d63, 0xc497, 0x810, 0x94af, 0xcec2, 0x7a30, 0x1, 0x1);
        gbc.writeMem(0x6d63, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc497);
        EXPECT(gbc.pc(), 0x6d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02A3
        gbc.setState(0xa71, 0xdb5a, 0x400, 0x36da, 0x9bc6, 0xba08, 0x0, 0x0);
        gbc.writeMem(0xa71, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xdb5a);
        EXPECT(gbc.pc(), 0xa72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02A4
        gbc.setState(0x7fea, 0xb8c6, 0xcbb0, 0xc9e0, 0xaede, 0x4777, 0x0, 0x0);
        gbc.writeMem(0x7fea, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb8c6);
        EXPECT(gbc.pc(), 0x7feb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02A5
        gbc.setState(0xc63c, 0x4acd, 0xe040, 0xe5fe, 0x7101, 0xb6e2, 0x0, 0x0);
        gbc.writeMem(0xc63c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4acd);
        EXPECT(gbc.pc(), 0xc63d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc63c), 0x1b);
        // 1B 02A6
        gbc.setState(0x3dac, 0x2940, 0x2e50, 0x8941, 0xd1c5, 0xa845, 0x1, 0x0);
        gbc.writeMem(0x3dac, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2940);
        EXPECT(gbc.pc(), 0x3dad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02A7
        gbc.setState(0x2282, 0x6708, 0x7dd0, 0x9b14, 0xc95b, 0xd535, 0x1, 0x0);
        gbc.writeMem(0x2282, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x6708);
        EXPECT(gbc.pc(), 0x2283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02A8
        gbc.setState(0x10af, 0xf3d1, 0x62b0, 0xef3d, 0xb65a, 0xd2fb, 0x1, 0x0);
        gbc.writeMem(0x10af, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf3d1);
        EXPECT(gbc.pc(), 0x10b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02A9
        gbc.setState(0x808b, 0xd312, 0xe0e0, 0x769, 0x5a70, 0x4271, 0x0, 0x0);
        gbc.writeMem(0x808b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd312);
        EXPECT(gbc.pc(), 0x808c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808b), 0x1b);
        // 1B 02AA
        gbc.setState(0x61b0, 0x13df, 0xb8a0, 0x1491, 0xd766, 0xa96f, 0x1, 0x1);
        gbc.writeMem(0x61b0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x13df);
        EXPECT(gbc.pc(), 0x61b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02AB
        gbc.setState(0x300c, 0xe58, 0xef70, 0x4982, 0x4adc, 0xc5cb, 0x1, 0x1);
        gbc.writeMem(0x300c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe58);
        EXPECT(gbc.pc(), 0x300d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02AC
        gbc.setState(0x47d0, 0xd0c3, 0xbf00, 0xb17b, 0x9a98, 0x80a8, 0x1, 0x1);
        gbc.writeMem(0x47d0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd0c3);
        EXPECT(gbc.pc(), 0x47d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02AD
        gbc.setState(0x4b8f, 0xe8fa, 0xa5d0, 0x3a17, 0xa214, 0x79db, 0x1, 0x0);
        gbc.writeMem(0x4b8f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe8fa);
        EXPECT(gbc.pc(), 0x4b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02AE
        gbc.setState(0x7bc, 0x27f0, 0xa130, 0x67aa, 0x2faa, 0xc300, 0x0, 0x0);
        gbc.writeMem(0x7bc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x27f0);
        EXPECT(gbc.pc(), 0x7bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02AF
        gbc.setState(0xb84b, 0x223b, 0x8e10, 0xc57f, 0xed3, 0xb776, 0x1, 0x0);
        gbc.writeMem(0xb84b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x223b);
        EXPECT(gbc.pc(), 0xb84c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb84b), 0x1b);
        // 1B 02B0
        gbc.setState(0x7493, 0x399e, 0x8260, 0x1c48, 0xdf52, 0x246b, 0x0, 0x0);
        gbc.writeMem(0x7493, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x399e);
        EXPECT(gbc.pc(), 0x7494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02B1
        gbc.setState(0x8df7, 0x72d1, 0xe310, 0x9908, 0x26ca, 0xc99b, 0x0, 0x0);
        gbc.writeMem(0x8df7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x72d1);
        EXPECT(gbc.pc(), 0x8df8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df7), 0x1b);
        // 1B 02B2
        gbc.setState(0x186f, 0x2d5d, 0x1800, 0xe0e4, 0x6b31, 0xc683, 0x0, 0x1);
        gbc.writeMem(0x186f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2d5d);
        EXPECT(gbc.pc(), 0x1870);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02B3
        gbc.setState(0x90fa, 0xe1ef, 0xda50, 0x7390, 0x25b7, 0x6688, 0x1, 0x1);
        gbc.writeMem(0x90fa, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe1ef);
        EXPECT(gbc.pc(), 0x90fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90fa), 0x1b);
        // 1B 02B4
        gbc.setState(0x3bb8, 0xe404, 0x5d50, 0x584d, 0x490c, 0x175b, 0x0, 0x0);
        gbc.writeMem(0x3bb8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe404);
        EXPECT(gbc.pc(), 0x3bb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02B6
        gbc.setState(0xbab4, 0x4c5, 0x8b50, 0x5972, 0xce3b, 0x989e, 0x1, 0x0);
        gbc.writeMem(0xbab4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x4c5);
        EXPECT(gbc.pc(), 0xbab5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbab4), 0x1b);
        // 1B 02B7
        gbc.setState(0x33df, 0x3ed2, 0x4090, 0xb31b, 0x8ddb, 0x3eee, 0x0, 0x1);
        gbc.writeMem(0x33df, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3ed2);
        EXPECT(gbc.pc(), 0x33e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02B8
        gbc.setState(0x8a22, 0x83e8, 0xeb50, 0x8319, 0xe03d, 0x673b, 0x1, 0x1);
        gbc.writeMem(0x8a22, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x83e8);
        EXPECT(gbc.pc(), 0x8a23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a22), 0x1b);
        // 1B 02B9
        gbc.setState(0xea66, 0x8f52, 0xe260, 0x49e2, 0x5230, 0xa486, 0x1, 0x0);
        gbc.writeMem(0xea66, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8f52);
        EXPECT(gbc.pc(), 0xea67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea66), 0x1b);
        // 1B 02BA
        gbc.setState(0x5548, 0xd48, 0x7910, 0xdb16, 0x811e, 0x29ac, 0x1, 0x1);
        gbc.writeMem(0x5548, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd48);
        EXPECT(gbc.pc(), 0x5549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02BB
        gbc.setState(0xca2c, 0x6e6f, 0x28a0, 0x50a4, 0xc6e6, 0x7dd, 0x0, 0x0);
        gbc.writeMem(0xca2c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6e6f);
        EXPECT(gbc.pc(), 0xca2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca2c), 0x1b);
        // 1B 02BC
        gbc.setState(0x7193, 0x87f8, 0x6900, 0x718e, 0x4359, 0xaaef, 0x0, 0x0);
        gbc.writeMem(0x7193, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x87f8);
        EXPECT(gbc.pc(), 0x7194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02BD
        gbc.setState(0x7c, 0x9833, 0x2590, 0x16c6, 0xa3fe, 0x23b2, 0x1, 0x0);
        gbc.writeMem(0x7c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9833);
        EXPECT(gbc.pc(), 0x7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02BE
        gbc.setState(0x9b97, 0x8caa, 0xef00, 0xab31, 0xf8ed, 0xa4bd, 0x1, 0x0);
        gbc.writeMem(0x9b97, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8caa);
        EXPECT(gbc.pc(), 0x9b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b97), 0x1b);
        // 1B 02C0
        gbc.setState(0x7963, 0xcb3a, 0x1980, 0x802c, 0x5c9d, 0x671e, 0x0, 0x1);
        gbc.writeMem(0x7963, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xcb3a);
        EXPECT(gbc.pc(), 0x7964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02C1
        gbc.setState(0x1f87, 0xe045, 0x95c0, 0x835, 0xef59, 0x66ad, 0x1, 0x0);
        gbc.writeMem(0x1f87, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe045);
        EXPECT(gbc.pc(), 0x1f88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02C2
        gbc.setState(0xcc4, 0x7c5e, 0x5200, 0x996b, 0xf6c8, 0x9986, 0x1, 0x0);
        gbc.writeMem(0xcc4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7c5e);
        EXPECT(gbc.pc(), 0xcc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02C3
        gbc.setState(0xef3f, 0x478e, 0x5120, 0x5430, 0x680f, 0xc585, 0x1, 0x0);
        gbc.writeMem(0xef3f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x478e);
        EXPECT(gbc.pc(), 0xef40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef3f), 0x1b);
        // 1B 02C4
        gbc.setState(0x207c, 0xf4b4, 0x4ae0, 0x4fe1, 0x4edd, 0xc83c, 0x0, 0x0);
        gbc.writeMem(0x207c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xf4b4);
        EXPECT(gbc.pc(), 0x207d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02C5
        gbc.setState(0x3bc4, 0x1f, 0x8390, 0xbcc9, 0xc418, 0xe924, 0x0, 0x0);
        gbc.writeMem(0x3bc4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1f);
        EXPECT(gbc.pc(), 0x3bc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02C7
        gbc.setState(0xc8, 0x3bca, 0xfea0, 0x2e7a, 0xe222, 0xf21d, 0x1, 0x1);
        gbc.writeMem(0xc8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3bca);
        EXPECT(gbc.pc(), 0xc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02C8
        gbc.setState(0x73f6, 0x5add, 0xf380, 0x9ce3, 0x8122, 0x136b, 0x1, 0x1);
        gbc.writeMem(0x73f6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5add);
        EXPECT(gbc.pc(), 0x73f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02C9
        gbc.setState(0x16e3, 0xd0c7, 0x9420, 0xcb34, 0xc69a, 0x834c, 0x0, 0x0);
        gbc.writeMem(0x16e3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd0c7);
        EXPECT(gbc.pc(), 0x16e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02CA
        gbc.setState(0x9589, 0x6cfe, 0x41a0, 0x93fd, 0x9529, 0x79c3, 0x1, 0x0);
        gbc.writeMem(0x9589, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6cfe);
        EXPECT(gbc.pc(), 0x958a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9589), 0x1b);
        // 1B 02CB
        gbc.setState(0x9de7, 0xa264, 0xda40, 0x2b0e, 0x4a08, 0xfe00, 0x1, 0x0);
        gbc.writeMem(0x9de7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa264);
        EXPECT(gbc.pc(), 0x9de8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9de7), 0x1b);
        // 1B 02CC
        gbc.setState(0x7e6f, 0x2262, 0x59c0, 0xee7, 0xcb9a, 0x83c9, 0x1, 0x0);
        gbc.writeMem(0x7e6f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2262);
        EXPECT(gbc.pc(), 0x7e70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02CD
        gbc.setState(0x666b, 0xeefb, 0x3c00, 0xc00f, 0x10da, 0x82b3, 0x1, 0x0);
        gbc.writeMem(0x666b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xeefb);
        EXPECT(gbc.pc(), 0x666c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02CE
        gbc.setState(0x3ab2, 0x603f, 0xfb00, 0x7848, 0x58f, 0xe5ad, 0x1, 0x0);
        gbc.writeMem(0x3ab2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x603f);
        EXPECT(gbc.pc(), 0x3ab3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02CF
        gbc.setState(0x76c5, 0xfffb, 0x1970, 0x4385, 0x28e6, 0x89a2, 0x0, 0x1);
        gbc.writeMem(0x76c5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfffb);
        EXPECT(gbc.pc(), 0x76c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02D0
        gbc.setState(0x7ef7, 0x5f74, 0x9080, 0x1d65, 0xae69, 0x640b, 0x1, 0x0);
        gbc.writeMem(0x7ef7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x5f74);
        EXPECT(gbc.pc(), 0x7ef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02D1
        gbc.setState(0x1263, 0x9964, 0x9010, 0xa5a1, 0x5c25, 0x2b3d, 0x0, 0x1);
        gbc.writeMem(0x1263, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9964);
        EXPECT(gbc.pc(), 0x1264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02D2
        gbc.setState(0x89e2, 0x9e14, 0x9bd0, 0x74ee, 0xcc71, 0x568, 0x1, 0x0);
        gbc.writeMem(0x89e2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9e14);
        EXPECT(gbc.pc(), 0x89e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e2), 0x1b);
        // 1B 02D4
        gbc.setState(0x82ea, 0x3931, 0x6970, 0xba14, 0xdaef, 0xfdbc, 0x1, 0x0);
        gbc.writeMem(0x82ea, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3931);
        EXPECT(gbc.pc(), 0x82eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ea), 0x1b);
        // 1B 02D5
        gbc.setState(0x7602, 0x402f, 0xdd10, 0xddd2, 0x82dc, 0x9f1d, 0x0, 0x0);
        gbc.writeMem(0x7602, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x402f);
        EXPECT(gbc.pc(), 0x7603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02D6
        gbc.setState(0xe309, 0x54, 0x6c70, 0x6ed3, 0x1bd6, 0x3daf, 0x0, 0x1);
        gbc.writeMem(0xe309, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x54);
        EXPECT(gbc.pc(), 0xe30a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe309), 0x1b);
        // 1B 02D7
        gbc.setState(0xa6e8, 0x9015, 0x2d10, 0x3090, 0xb7be, 0xfd9, 0x0, 0x1);
        gbc.writeMem(0xa6e8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9015);
        EXPECT(gbc.pc(), 0xa6e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6e8), 0x1b);
        // 1B 02D8
        gbc.setState(0xe579, 0x8f40, 0x5630, 0x9778, 0xc2a5, 0x474f, 0x1, 0x1);
        gbc.writeMem(0xe579, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8f40);
        EXPECT(gbc.pc(), 0xe57a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe579), 0x1b);
        // 1B 02D9
        gbc.setState(0xb022, 0xc84d, 0x30f0, 0xbb08, 0xe9b1, 0x5241, 0x1, 0x1);
        gbc.writeMem(0xb022, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc84d);
        EXPECT(gbc.pc(), 0xb023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb022), 0x1b);
        // 1B 02DA
        gbc.setState(0xb993, 0xfb81, 0x6b40, 0x6160, 0xe2d4, 0xa0f6, 0x1, 0x0);
        gbc.writeMem(0xb993, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfb81);
        EXPECT(gbc.pc(), 0xb994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb993), 0x1b);
        // 1B 02DB
        gbc.setState(0x2ce1, 0x7b59, 0x4870, 0x1971, 0x4f99, 0xc4c3, 0x1, 0x1);
        gbc.writeMem(0x2ce1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7b59);
        EXPECT(gbc.pc(), 0x2ce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02DC
        gbc.setState(0xc068, 0x141b, 0xa470, 0xc02c, 0x123a, 0xdab7, 0x1, 0x0);
        gbc.writeMem(0xc068, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x141b);
        EXPECT(gbc.pc(), 0xc069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc068), 0x1b);
        // 1B 02DD
        gbc.setState(0x35ff, 0xcb77, 0xb850, 0xf89b, 0x6038, 0xf3a4, 0x1, 0x0);
        gbc.writeMem(0x35ff, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xcb77);
        EXPECT(gbc.pc(), 0x3600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02DE
        gbc.setState(0x4e2d, 0xbae3, 0x9780, 0xa28e, 0x2407, 0xe093, 0x1, 0x1);
        gbc.writeMem(0x4e2d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xbae3);
        EXPECT(gbc.pc(), 0x4e2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02DF
        gbc.setState(0xa911, 0xb230, 0xe8d0, 0xcb1b, 0xa94, 0xff19, 0x1, 0x0);
        gbc.writeMem(0xa911, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb230);
        EXPECT(gbc.pc(), 0xa912);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa911), 0x1b);
        // 1B 02E1
        gbc.setState(0x8fec, 0xa1ff, 0x4e40, 0x7a93, 0xb1b9, 0x7638, 0x1, 0x1);
        gbc.writeMem(0x8fec, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa1ff);
        EXPECT(gbc.pc(), 0x8fed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fec), 0x1b);
        // 1B 02E2
        gbc.setState(0xa0da, 0xf620, 0xe080, 0x8f78, 0xeec5, 0xd072, 0x0, 0x1);
        gbc.writeMem(0xa0da, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf620);
        EXPECT(gbc.pc(), 0xa0db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0da), 0x1b);
        // 1B 02E4
        gbc.setState(0x6d9d, 0xb44d, 0x6490, 0xcfb2, 0x20ad, 0x8b93, 0x0, 0x1);
        gbc.writeMem(0x6d9d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb44d);
        EXPECT(gbc.pc(), 0x6d9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02E5
        gbc.setState(0xd88e, 0x4570, 0x8c90, 0xeeb6, 0x686f, 0x92a8, 0x1, 0x1);
        gbc.writeMem(0xd88e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4570);
        EXPECT(gbc.pc(), 0xd88f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd88e), 0x1b);
        // 1B 02E6
        gbc.setState(0x1619, 0xf7a, 0xd3b0, 0x8c14, 0x6b3d, 0x2f5, 0x0, 0x0);
        gbc.writeMem(0x1619, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf7a);
        EXPECT(gbc.pc(), 0x161a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02E7
        gbc.setState(0x6316, 0x88d0, 0x59e0, 0x8dab, 0x68f8, 0x7799, 0x0, 0x1);
        gbc.writeMem(0x6316, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x88d0);
        EXPECT(gbc.pc(), 0x6317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02E8
        gbc.setState(0x4c40, 0x6fe0, 0x2660, 0xb55d, 0x4c32, 0xf307, 0x0, 0x1);
        gbc.writeMem(0x4c40, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6fe0);
        EXPECT(gbc.pc(), 0x4c41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02E9
        gbc.setState(0xa6a1, 0x8baf, 0x10a0, 0x2f09, 0xa951, 0xd45b, 0x0, 0x0);
        gbc.writeMem(0xa6a1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8baf);
        EXPECT(gbc.pc(), 0xa6a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a1), 0x1b);
        // 1B 02EA
        gbc.setState(0x5f80, 0x7c14, 0x4d70, 0xcc50, 0xd02a, 0x7c7, 0x0, 0x0);
        gbc.writeMem(0x5f80, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7c14);
        EXPECT(gbc.pc(), 0x5f81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02EB
        gbc.setState(0xd414, 0x148, 0xbaf0, 0xf5db, 0x6540, 0xf4cc, 0x1, 0x1);
        gbc.writeMem(0xd414, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x148);
        EXPECT(gbc.pc(), 0xd415);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd414), 0x1b);
        // 1B 02EC
        gbc.setState(0xe45e, 0x461a, 0x24b0, 0xe22, 0x1641, 0x744e, 0x0, 0x1);
        gbc.writeMem(0xe45e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x461a);
        EXPECT(gbc.pc(), 0xe45f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe45e), 0x1b);
        // 1B 02ED
        gbc.setState(0x2f25, 0x70f, 0x9790, 0xeb35, 0x2a60, 0x4d96, 0x1, 0x1);
        gbc.writeMem(0x2f25, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x70f);
        EXPECT(gbc.pc(), 0x2f26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02EE
        gbc.setState(0x9ac2, 0x9e0e, 0x6bb0, 0xed1a, 0x67c7, 0xae44, 0x1, 0x0);
        gbc.writeMem(0x9ac2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9e0e);
        EXPECT(gbc.pc(), 0x9ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac2), 0x1b);
        // 1B 02EF
        gbc.setState(0x7fc8, 0xa263, 0x30a0, 0x50ee, 0x8640, 0x830d, 0x1, 0x0);
        gbc.writeMem(0x7fc8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa263);
        EXPECT(gbc.pc(), 0x7fc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02F0
        gbc.setState(0xce0b, 0x2f33, 0xe80, 0x4d03, 0xd574, 0x40e6, 0x1, 0x1);
        gbc.writeMem(0xce0b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2f33);
        EXPECT(gbc.pc(), 0xce0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce0b), 0x1b);
        // 1B 02F1
        gbc.setState(0x4eff, 0xfe57, 0xc0e0, 0x49cd, 0xbd04, 0x4f4f, 0x0, 0x1);
        gbc.writeMem(0x4eff, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xfe57);
        EXPECT(gbc.pc(), 0x4f00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02F2
        gbc.setState(0x5a0e, 0x7ca9, 0x6810, 0x8b33, 0x9b72, 0x7808, 0x1, 0x1);
        gbc.writeMem(0x5a0e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7ca9);
        EXPECT(gbc.pc(), 0x5a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 02F3
        gbc.setState(0x3d49, 0xc44a, 0x560, 0xc9f, 0x8440, 0x853, 0x1, 0x1);
        gbc.writeMem(0x3d49, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc44a);
        EXPECT(gbc.pc(), 0x3d4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02F4
        gbc.setState(0x8a19, 0x1560, 0x7610, 0xc956, 0x55d5, 0xe1ea, 0x0, 0x1);
        gbc.writeMem(0x8a19, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1560);
        EXPECT(gbc.pc(), 0x8a1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a19), 0x1b);
        // 1B 02F5
        gbc.setState(0xdd31, 0x76a, 0x92a0, 0xc567, 0xae3e, 0xc1fd, 0x0, 0x0);
        gbc.writeMem(0xdd31, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x76a);
        EXPECT(gbc.pc(), 0xdd32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd31), 0x1b);
        // 1B 02F6
        gbc.setState(0x41ff, 0x5664, 0x6ae0, 0x45fa, 0xcdeb, 0x5742, 0x1, 0x0);
        gbc.writeMem(0x41ff, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5664);
        EXPECT(gbc.pc(), 0x4200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02F7
        gbc.setState(0xb333, 0xada2, 0x560, 0xb81c, 0x8680, 0x5bfb, 0x0, 0x1);
        gbc.writeMem(0xb333, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xada2);
        EXPECT(gbc.pc(), 0xb334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb333), 0x1b);
        // 1B 02F9
        gbc.setState(0xb656, 0xe75f, 0x9200, 0xbcf4, 0xd01e, 0x1699, 0x0, 0x1);
        gbc.writeMem(0xb656, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe75f);
        EXPECT(gbc.pc(), 0xb657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb656), 0x1b);
        // 1B 02FA
        gbc.setState(0x4963, 0xbb80, 0xb900, 0x9229, 0x3ef0, 0xca86, 0x1, 0x1);
        gbc.writeMem(0x4963, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbb80);
        EXPECT(gbc.pc(), 0x4964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 02FB
        gbc.setState(0xae50, 0x6663, 0xa7a0, 0x8e9e, 0x4fc6, 0xba47, 0x1, 0x0);
        gbc.writeMem(0xae50, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6663);
        EXPECT(gbc.pc(), 0xae51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae50), 0x1b);
        // 1B 02FC
        gbc.setState(0x9257, 0x12e9, 0x7550, 0xe353, 0x8129, 0x1a71, 0x1, 0x1);
        gbc.writeMem(0x9257, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x12e9);
        EXPECT(gbc.pc(), 0x9258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9257), 0x1b);
        // 1B 02FD
        gbc.setState(0x1251, 0x1117, 0xac30, 0xb834, 0x4081, 0xb22e, 0x0, 0x0);
        gbc.writeMem(0x1251, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1117);
        EXPECT(gbc.pc(), 0x1252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 02FE
        gbc.setState(0x63fa, 0xb918, 0xf1a0, 0x1c3c, 0x9313, 0x4591, 0x1, 0x1);
        gbc.writeMem(0x63fa, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb918);
        EXPECT(gbc.pc(), 0x63fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 02FF
        gbc.setState(0xcdec, 0xe936, 0x7710, 0xaf57, 0x1a6e, 0xd669, 0x0, 0x1);
        gbc.writeMem(0xcdec, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe936);
        EXPECT(gbc.pc(), 0xcded);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdec), 0x1b);
        // 1B 0300
        gbc.setState(0x2fb, 0x3b20, 0x4d70, 0x50e4, 0xcbbb, 0xd9b9, 0x1, 0x1);
        gbc.writeMem(0x2fb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3b20);
        EXPECT(gbc.pc(), 0x2fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0301
        gbc.setState(0x2472, 0x42e4, 0x7840, 0x5349, 0x90eb, 0x7ddd, 0x0, 0x1);
        gbc.writeMem(0x2472, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x42e4);
        EXPECT(gbc.pc(), 0x2473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0302
        gbc.setState(0x903c, 0xe439, 0x97c0, 0xb147, 0x4d38, 0xa8a1, 0x1, 0x1);
        gbc.writeMem(0x903c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe439);
        EXPECT(gbc.pc(), 0x903d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903c), 0x1b);
        // 1B 0303
        gbc.setState(0x89bc, 0xe30, 0xe330, 0x3b19, 0xa011, 0x92f5, 0x0, 0x0);
        gbc.writeMem(0x89bc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe30);
        EXPECT(gbc.pc(), 0x89bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89bc), 0x1b);
        // 1B 0304
        gbc.setState(0x9d6c, 0x3299, 0xf2a0, 0xdfc0, 0x764d, 0x8fa2, 0x1, 0x1);
        gbc.writeMem(0x9d6c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x3299);
        EXPECT(gbc.pc(), 0x9d6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d6c), 0x1b);
        // 1B 0305
        gbc.setState(0x1b7, 0xbb34, 0x9a0, 0xae1f, 0xf6ca, 0x4381, 0x1, 0x0);
        gbc.writeMem(0x1b7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbb34);
        EXPECT(gbc.pc(), 0x1b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0306
        gbc.setState(0xc1ad, 0x3b4a, 0x4550, 0x8e70, 0x210f, 0x8b3d, 0x0, 0x1);
        gbc.writeMem(0xc1ad, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3b4a);
        EXPECT(gbc.pc(), 0xc1ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ad), 0x1b);
        // 1B 0307
        gbc.setState(0x175f, 0xb175, 0xd6a0, 0xfb54, 0x3255, 0x92ec, 0x1, 0x1);
        gbc.writeMem(0x175f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb175);
        EXPECT(gbc.pc(), 0x1760);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0308
        gbc.setState(0xf96, 0x21f0, 0xab30, 0xacd0, 0xcdb3, 0xc9c6, 0x1, 0x0);
        gbc.writeMem(0xf96, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x21f0);
        EXPECT(gbc.pc(), 0xf97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0309
        gbc.setState(0x28ce, 0xf4a0, 0xa500, 0x88d6, 0xf6bb, 0x244b, 0x1, 0x0);
        gbc.writeMem(0x28ce, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf4a0);
        EXPECT(gbc.pc(), 0x28cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 030A
        gbc.setState(0x9a97, 0x8df6, 0xe660, 0x8d0f, 0xe944, 0xaf52, 0x1, 0x1);
        gbc.writeMem(0x9a97, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8df6);
        EXPECT(gbc.pc(), 0x9a98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a97), 0x1b);
        // 1B 030C
        gbc.setState(0x64fd, 0x29a7, 0xaf60, 0x2d94, 0x92dd, 0xdd07, 0x1, 0x0);
        gbc.writeMem(0x64fd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x29a7);
        EXPECT(gbc.pc(), 0x64fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 030D
        gbc.setState(0xe103, 0x37ae, 0x540, 0x1548, 0x71a4, 0xa02a, 0x1, 0x1);
        gbc.writeMem(0xe103, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x37ae);
        EXPECT(gbc.pc(), 0xe104);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe103), 0x1b);
        // 1B 030E
        gbc.setState(0xa353, 0x2324, 0x4500, 0x7702, 0x4df2, 0x66cf, 0x0, 0x0);
        gbc.writeMem(0xa353, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2324);
        EXPECT(gbc.pc(), 0xa354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa353), 0x1b);
        // 1B 030F
        gbc.setState(0xe9a5, 0x3cd1, 0x8a50, 0x9a45, 0x1cc9, 0xc355, 0x1, 0x0);
        gbc.writeMem(0xe9a5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3cd1);
        EXPECT(gbc.pc(), 0xe9a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a5), 0x1b);
        // 1B 0310
        gbc.setState(0x4954, 0x54f, 0xdf00, 0x994a, 0x4004, 0xe247, 0x1, 0x1);
        gbc.writeMem(0x4954, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x54f);
        EXPECT(gbc.pc(), 0x4955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0311
        gbc.setState(0x867f, 0xc7b4, 0xdbc0, 0x89bd, 0x8d16, 0x64d, 0x1, 0x0);
        gbc.writeMem(0x867f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc7b4);
        EXPECT(gbc.pc(), 0x8680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x867f), 0x1b);
        // 1B 0312
        gbc.setState(0xa58, 0xa089, 0xc6b0, 0x92c6, 0x47c8, 0xe8ca, 0x1, 0x0);
        gbc.writeMem(0xa58, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa089);
        EXPECT(gbc.pc(), 0xa59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0313
        gbc.setState(0x4709, 0x64ec, 0x24c0, 0xb2ae, 0xbc3b, 0x5448, 0x1, 0x0);
        gbc.writeMem(0x4709, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x64ec);
        EXPECT(gbc.pc(), 0x470a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0314
        gbc.setState(0x7817, 0x1f0f, 0xfd90, 0xd24, 0xd1b, 0x880f, 0x0, 0x0);
        gbc.writeMem(0x7817, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1f0f);
        EXPECT(gbc.pc(), 0x7818);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0315
        gbc.setState(0x4d91, 0x3aee, 0xd6a0, 0x3188, 0x2a1e, 0x1cf0, 0x1, 0x0);
        gbc.writeMem(0x4d91, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3aee);
        EXPECT(gbc.pc(), 0x4d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0316
        gbc.setState(0x63c6, 0xa646, 0x6ec0, 0x8f15, 0xe2ed, 0xbe6, 0x1, 0x0);
        gbc.writeMem(0x63c6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa646);
        EXPECT(gbc.pc(), 0x63c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0317
        gbc.setState(0xb2b1, 0x993d, 0xa880, 0x48bf, 0xdb3f, 0xdd7, 0x1, 0x0);
        gbc.writeMem(0xb2b1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x993d);
        EXPECT(gbc.pc(), 0xb2b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2b1), 0x1b);
        // 1B 0318
        gbc.setState(0xc26c, 0x5a7e, 0xe710, 0x1704, 0x17ff, 0x29a3, 0x0, 0x1);
        gbc.writeMem(0xc26c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5a7e);
        EXPECT(gbc.pc(), 0xc26d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc26c), 0x1b);
        // 1B 0319
        gbc.setState(0x3a8e, 0x8e2a, 0x36c0, 0x50d0, 0xeafc, 0x5537, 0x1, 0x0);
        gbc.writeMem(0x3a8e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8e2a);
        EXPECT(gbc.pc(), 0x3a8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 031A
        gbc.setState(0x493e, 0x8588, 0x2d0, 0x138d, 0x4dad, 0x551, 0x0, 0x1);
        gbc.writeMem(0x493e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8588);
        EXPECT(gbc.pc(), 0x493f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 031B
        gbc.setState(0xba45, 0x5e25, 0x88a0, 0xa876, 0xc5ec, 0xa8d, 0x1, 0x1);
        gbc.writeMem(0xba45, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5e25);
        EXPECT(gbc.pc(), 0xba46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba45), 0x1b);
        // 1B 031C
        gbc.setState(0xcfce, 0x9b69, 0x7700, 0xfce, 0x50c2, 0xe24e, 0x0, 0x1);
        gbc.writeMem(0xcfce, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9b69);
        EXPECT(gbc.pc(), 0xcfcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfce), 0x1b);
        // 1B 031D
        gbc.setState(0x1653, 0xeed, 0x150, 0xd244, 0x200d, 0x1f88, 0x0, 0x0);
        gbc.writeMem(0x1653, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xeed);
        EXPECT(gbc.pc(), 0x1654);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 031E
        gbc.setState(0x7138, 0x52c1, 0xea20, 0x9f42, 0x908e, 0x7d28, 0x1, 0x0);
        gbc.writeMem(0x7138, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x52c1);
        EXPECT(gbc.pc(), 0x7139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 031F
        gbc.setState(0xc9a8, 0xfc62, 0xd0, 0x9796, 0x845b, 0x993c, 0x1, 0x0);
        gbc.writeMem(0xc9a8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfc62);
        EXPECT(gbc.pc(), 0xc9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a8), 0x1b);
        // 1B 0320
        gbc.setState(0x933, 0xc255, 0xf2a0, 0xa30d, 0xb45, 0x4e42, 0x1, 0x0);
        gbc.writeMem(0x933, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc255);
        EXPECT(gbc.pc(), 0x934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0321
        gbc.setState(0x60b9, 0x638a, 0x340, 0xd15d, 0x4c7c, 0x819f, 0x0, 0x0);
        gbc.writeMem(0x60b9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x638a);
        EXPECT(gbc.pc(), 0x60ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0322
        gbc.setState(0x766a, 0x2323, 0x2220, 0x2f6, 0x113d, 0x2684, 0x1, 0x1);
        gbc.writeMem(0x766a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2323);
        EXPECT(gbc.pc(), 0x766b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0323
        gbc.setState(0x67ae, 0xc773, 0x2490, 0x5914, 0xd2d3, 0xe2da, 0x1, 0x0);
        gbc.writeMem(0x67ae, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc773);
        EXPECT(gbc.pc(), 0x67af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0325
        gbc.setState(0x59ab, 0x76cb, 0x5a40, 0x3e06, 0x5888, 0x2c92, 0x0, 0x0);
        gbc.writeMem(0x59ab, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x76cb);
        EXPECT(gbc.pc(), 0x59ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0326
        gbc.setState(0x44f0, 0xee24, 0x4000, 0x950d, 0x62bb, 0xf697, 0x1, 0x0);
        gbc.writeMem(0x44f0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xee24);
        EXPECT(gbc.pc(), 0x44f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0327
        gbc.setState(0x3d03, 0x71de, 0x7aa0, 0xa16, 0x68c9, 0xdc51, 0x1, 0x1);
        gbc.writeMem(0x3d03, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x71de);
        EXPECT(gbc.pc(), 0x3d04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0328
        gbc.setState(0x8426, 0xdd44, 0x5e10, 0x4efa, 0x177, 0xe775, 0x1, 0x0);
        gbc.writeMem(0x8426, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdd44);
        EXPECT(gbc.pc(), 0x8427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8426), 0x1b);
        // 1B 0329
        gbc.setState(0x475b, 0x1f01, 0x3b80, 0x69a5, 0x2652, 0x747, 0x1, 0x1);
        gbc.writeMem(0x475b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1f01);
        EXPECT(gbc.pc(), 0x475c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 032A
        gbc.setState(0x6b14, 0xfcb3, 0xbf50, 0xbc68, 0x7714, 0xeb97, 0x0, 0x1);
        gbc.writeMem(0x6b14, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xfcb3);
        EXPECT(gbc.pc(), 0x6b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 032B
        gbc.setState(0xa884, 0x1e0a, 0xcc40, 0xda42, 0xa40b, 0xcfac, 0x1, 0x0);
        gbc.writeMem(0xa884, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1e0a);
        EXPECT(gbc.pc(), 0xa885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa884), 0x1b);
        // 1B 032C
        gbc.setState(0x9686, 0x2188, 0x6f80, 0x5baf, 0x4968, 0xca29, 0x0, 0x0);
        gbc.writeMem(0x9686, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2188);
        EXPECT(gbc.pc(), 0x9687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9686), 0x1b);
        // 1B 032D
        gbc.setState(0x3ca, 0xc295, 0xb920, 0x3a4c, 0x4f3, 0x86bd, 0x0, 0x1);
        gbc.writeMem(0x3ca, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc295);
        EXPECT(gbc.pc(), 0x3cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 032E
        gbc.setState(0xe864, 0xf3dc, 0xa6b0, 0x512e, 0x40d6, 0x2565, 0x0, 0x1);
        gbc.writeMem(0xe864, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf3dc);
        EXPECT(gbc.pc(), 0xe865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe864), 0x1b);
        // 1B 032F
        gbc.setState(0x294f, 0x6433, 0x44c0, 0xb401, 0x11ed, 0xe0e9, 0x0, 0x0);
        gbc.writeMem(0x294f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6433);
        EXPECT(gbc.pc(), 0x2950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0330
        gbc.setState(0xb4fe, 0x4b10, 0x63e0, 0x4f5e, 0x2691, 0xc4, 0x0, 0x0);
        gbc.writeMem(0xb4fe, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4b10);
        EXPECT(gbc.pc(), 0xb4ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4fe), 0x1b);
        // 1B 0331
        gbc.setState(0x729e, 0xa763, 0x8c40, 0xc5, 0x946e, 0x8af2, 0x1, 0x0);
        gbc.writeMem(0x729e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xa763);
        EXPECT(gbc.pc(), 0x729f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0332
        gbc.setState(0x5b14, 0x7881, 0x9e20, 0x6a30, 0xd14c, 0x6c11, 0x0, 0x0);
        gbc.writeMem(0x5b14, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7881);
        EXPECT(gbc.pc(), 0x5b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0333
        gbc.setState(0xe385, 0x51e8, 0xe5f0, 0xe05a, 0x7485, 0xb30d, 0x0, 0x0);
        gbc.writeMem(0xe385, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x51e8);
        EXPECT(gbc.pc(), 0xe386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe385), 0x1b);
        // 1B 0334
        gbc.setState(0xef26, 0x366a, 0x5980, 0xdd1e, 0xd0a7, 0x5f1f, 0x1, 0x1);
        gbc.writeMem(0xef26, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x366a);
        EXPECT(gbc.pc(), 0xef27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef26), 0x1b);
        // 1B 0335
        gbc.setState(0x7c69, 0xdef, 0x52b0, 0xad6c, 0x9fe1, 0xafc, 0x0, 0x0);
        gbc.writeMem(0x7c69, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xdef);
        EXPECT(gbc.pc(), 0x7c6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0336
        gbc.setState(0xbb0f, 0x2379, 0xcce0, 0xd92e, 0x35c0, 0xa2b0, 0x1, 0x0);
        gbc.writeMem(0xbb0f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2379);
        EXPECT(gbc.pc(), 0xbb10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb0f), 0x1b);
        // 1B 0337
        gbc.setState(0x6bf0, 0xb941, 0xa760, 0xec25, 0xa506, 0xc7d0, 0x0, 0x0);
        gbc.writeMem(0x6bf0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb941);
        EXPECT(gbc.pc(), 0x6bf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0338
        gbc.setState(0xe195, 0x9e5f, 0x2dc0, 0xeb99, 0xd8d6, 0x434c, 0x0, 0x1);
        gbc.writeMem(0xe195, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9e5f);
        EXPECT(gbc.pc(), 0xe196);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe195), 0x1b);
        // 1B 0339
        gbc.setState(0xc7d9, 0xd507, 0x76c0, 0x306b, 0x563a, 0x39d2, 0x0, 0x0);
        gbc.writeMem(0xc7d9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd507);
        EXPECT(gbc.pc(), 0xc7da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d9), 0x1b);
        // 1B 033B
        gbc.setState(0x2871, 0xf022, 0xb940, 0xa450, 0xaff3, 0x625a, 0x1, 0x1);
        gbc.writeMem(0x2871, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf022);
        EXPECT(gbc.pc(), 0x2872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 033C
        gbc.setState(0x9a80, 0xa34b, 0xb0, 0x4122, 0x6921, 0xb51a, 0x0, 0x1);
        gbc.writeMem(0x9a80, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa34b);
        EXPECT(gbc.pc(), 0x9a81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a80), 0x1b);
        // 1B 033E
        gbc.setState(0xeafb, 0x9f95, 0x9b90, 0xa0c5, 0x7bf7, 0x9f0b, 0x0, 0x1);
        gbc.writeMem(0xeafb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9f95);
        EXPECT(gbc.pc(), 0xeafc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeafb), 0x1b);
        // 1B 033F
        gbc.setState(0xbde0, 0xf86b, 0x55a0, 0x28c4, 0x8907, 0x8e76, 0x1, 0x0);
        gbc.writeMem(0xbde0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf86b);
        EXPECT(gbc.pc(), 0xbde1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbde0), 0x1b);
        // 1B 0340
        gbc.setState(0x3c15, 0x6c86, 0xea40, 0xd34d, 0x31a1, 0x1533, 0x1, 0x0);
        gbc.writeMem(0x3c15, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6c86);
        EXPECT(gbc.pc(), 0x3c16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0341
        gbc.setState(0x5f7c, 0xda19, 0x1400, 0x2f02, 0xe9d1, 0xdf69, 0x1, 0x1);
        gbc.writeMem(0x5f7c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xda19);
        EXPECT(gbc.pc(), 0x5f7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0342
        gbc.setState(0xc6ef, 0x6f6f, 0x7140, 0xa5ac, 0xb7bc, 0x60c5, 0x0, 0x1);
        gbc.writeMem(0xc6ef, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6f6f);
        EXPECT(gbc.pc(), 0xc6f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ef), 0x1b);
        // 1B 0343
        gbc.setState(0x1b7e, 0x271a, 0x58f0, 0x417d, 0x84bb, 0x661, 0x1, 0x1);
        gbc.writeMem(0x1b7e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x271a);
        EXPECT(gbc.pc(), 0x1b7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0344
        gbc.setState(0x14c9, 0x6a63, 0x2040, 0xff9e, 0xb5d4, 0xf630, 0x1, 0x0);
        gbc.writeMem(0x14c9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6a63);
        EXPECT(gbc.pc(), 0x14ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0345
        gbc.setState(0xa743, 0x3c11, 0x3f20, 0x4deb, 0x2fef, 0x13e3, 0x0, 0x1);
        gbc.writeMem(0xa743, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3c11);
        EXPECT(gbc.pc(), 0xa744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa743), 0x1b);
        // 1B 0346
        gbc.setState(0xc4a2, 0x619e, 0x5e90, 0x8654, 0xaa10, 0xb9ef, 0x0, 0x0);
        gbc.writeMem(0xc4a2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x619e);
        EXPECT(gbc.pc(), 0xc4a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4a2), 0x1b);
        // 1B 0347
        gbc.setState(0xc23, 0xdc58, 0x2770, 0xf23a, 0x991d, 0x809a, 0x0, 0x0);
        gbc.writeMem(0xc23, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdc58);
        EXPECT(gbc.pc(), 0xc24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0348
        gbc.setState(0x5aed, 0x6e16, 0xd7e0, 0x8a9a, 0x681f, 0xec40, 0x1, 0x0);
        gbc.writeMem(0x5aed, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6e16);
        EXPECT(gbc.pc(), 0x5aee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0349
        gbc.setState(0xc6f0, 0x530e, 0x4800, 0x6025, 0x2cd8, 0x58d5, 0x0, 0x0);
        gbc.writeMem(0xc6f0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x530e);
        EXPECT(gbc.pc(), 0xc6f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f0), 0x1b);
        // 1B 034A
        gbc.setState(0x6f31, 0xa6ae, 0x22e0, 0x9a44, 0x704b, 0xb10f, 0x1, 0x0);
        gbc.writeMem(0x6f31, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa6ae);
        EXPECT(gbc.pc(), 0x6f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 034B
        gbc.setState(0xdf30, 0x969c, 0xe4c0, 0xcc8f, 0x2d75, 0x1e05, 0x0, 0x0);
        gbc.writeMem(0xdf30, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x969c);
        EXPECT(gbc.pc(), 0xdf31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf30), 0x1b);
        // 1B 034C
        gbc.setState(0xb6ea, 0x7d85, 0xf0e0, 0x1706, 0xd0f2, 0x7004, 0x1, 0x1);
        gbc.writeMem(0xb6ea, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7d85);
        EXPECT(gbc.pc(), 0xb6eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ea), 0x1b);
        // 1B 034D
        gbc.setState(0x4f4c, 0x6600, 0xffb0, 0xa31c, 0x88de, 0x28ce, 0x1, 0x1);
        gbc.writeMem(0x4f4c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6600);
        EXPECT(gbc.pc(), 0x4f4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 034E
        gbc.setState(0x5ec8, 0x9b2e, 0xd560, 0x86da, 0xc7f5, 0xdda1, 0x1, 0x0);
        gbc.writeMem(0x5ec8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9b2e);
        EXPECT(gbc.pc(), 0x5ec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 034F
        gbc.setState(0x58f, 0xc6e9, 0x3e10, 0x76c0, 0xcfb6, 0x34f4, 0x1, 0x0);
        gbc.writeMem(0x58f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc6e9);
        EXPECT(gbc.pc(), 0x590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0350
        gbc.setState(0x78e2, 0xfbe7, 0xd8d0, 0x3505, 0x4df6, 0xbf80, 0x0, 0x1);
        gbc.writeMem(0x78e2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xfbe7);
        EXPECT(gbc.pc(), 0x78e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0351
        gbc.setState(0x287e, 0xb936, 0x83a0, 0x7f75, 0x5958, 0xa861, 0x0, 0x0);
        gbc.writeMem(0x287e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb936);
        EXPECT(gbc.pc(), 0x287f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0352
        gbc.setState(0x53c0, 0x6d56, 0xc270, 0xcaf9, 0xc1ff, 0xd8b1, 0x1, 0x1);
        gbc.writeMem(0x53c0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6d56);
        EXPECT(gbc.pc(), 0x53c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0355
        gbc.setState(0x84a, 0x3171, 0x2c60, 0xcf22, 0x56f0, 0xf97a, 0x1, 0x0);
        gbc.writeMem(0x84a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3171);
        EXPECT(gbc.pc(), 0x84b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0356
        gbc.setState(0xcda9, 0x582f, 0xc3f0, 0x1e3c, 0x714, 0x2622, 0x0, 0x0);
        gbc.writeMem(0xcda9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x582f);
        EXPECT(gbc.pc(), 0xcdaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcda9), 0x1b);
        // 1B 0357
        gbc.setState(0xbdfc, 0xeaf, 0xa3e0, 0x43ec, 0x51d3, 0xcd57, 0x0, 0x0);
        gbc.writeMem(0xbdfc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xeaf);
        EXPECT(gbc.pc(), 0xbdfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdfc), 0x1b);
        // 1B 0359
        gbc.setState(0xcbd8, 0xc438, 0x8120, 0xc8d1, 0xe93e, 0xb4b3, 0x1, 0x1);
        gbc.writeMem(0xcbd8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc438);
        EXPECT(gbc.pc(), 0xcbd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd8), 0x1b);
        // 1B 035A
        gbc.setState(0x9ea1, 0x1c1f, 0xe2c0, 0x5df6, 0x7b6b, 0x9c5c, 0x1, 0x1);
        gbc.writeMem(0x9ea1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1c1f);
        EXPECT(gbc.pc(), 0x9ea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea1), 0x1b);
        // 1B 035B
        gbc.setState(0x9707, 0xbb83, 0xe3c0, 0xf39e, 0x6203, 0xf1ae, 0x1, 0x0);
        gbc.writeMem(0x9707, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xbb83);
        EXPECT(gbc.pc(), 0x9708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9707), 0x1b);
        // 1B 035C
        gbc.setState(0xd990, 0xb318, 0xab50, 0xe87b, 0xb5f0, 0x8d67, 0x0, 0x0);
        gbc.writeMem(0xd990, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb318);
        EXPECT(gbc.pc(), 0xd991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd990), 0x1b);
        // 1B 035D
        gbc.setState(0x10d1, 0x37f6, 0x7ee0, 0x3fc7, 0xf0c9, 0x615, 0x0, 0x1);
        gbc.writeMem(0x10d1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x37f6);
        EXPECT(gbc.pc(), 0x10d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 035E
        gbc.setState(0x7d1f, 0x5fc2, 0xdc00, 0x2b62, 0x1f6, 0x7085, 0x0, 0x0);
        gbc.writeMem(0x7d1f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5fc2);
        EXPECT(gbc.pc(), 0x7d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 035F
        gbc.setState(0x8cf4, 0xc532, 0x53c0, 0x72e, 0xe810, 0x78b8, 0x0, 0x0);
        gbc.writeMem(0x8cf4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc532);
        EXPECT(gbc.pc(), 0x8cf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cf4), 0x1b);
        // 1B 0360
        gbc.setState(0x83bb, 0xf4f8, 0xcdd0, 0x14c6, 0x7060, 0x4a1d, 0x0, 0x1);
        gbc.writeMem(0x83bb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf4f8);
        EXPECT(gbc.pc(), 0x83bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83bb), 0x1b);
        // 1B 0361
        gbc.setState(0x69fc, 0xc64b, 0x7110, 0x2b02, 0xf598, 0xee41, 0x0, 0x1);
        gbc.writeMem(0x69fc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc64b);
        EXPECT(gbc.pc(), 0x69fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0362
        gbc.setState(0xa00d, 0xd395, 0xe8d0, 0xf2b, 0x840e, 0xcf52, 0x0, 0x0);
        gbc.writeMem(0xa00d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd395);
        EXPECT(gbc.pc(), 0xa00e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa00d), 0x1b);
        // 1B 0363
        gbc.setState(0x598e, 0x8dfd, 0xb470, 0x1576, 0xc9e6, 0x1655, 0x1, 0x1);
        gbc.writeMem(0x598e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8dfd);
        EXPECT(gbc.pc(), 0x598f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0364
        gbc.setState(0x26e2, 0xd79c, 0x9ea0, 0xd4f9, 0x5cbf, 0xc0aa, 0x1, 0x0);
        gbc.writeMem(0x26e2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd79c);
        EXPECT(gbc.pc(), 0x26e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0365
        gbc.setState(0x1b7d, 0xece7, 0xd880, 0xb612, 0x33ab, 0x2eef, 0x0, 0x1);
        gbc.writeMem(0x1b7d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xece7);
        EXPECT(gbc.pc(), 0x1b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0366
        gbc.setState(0x7185, 0xd4c9, 0x7520, 0xd5ae, 0x59de, 0x947b, 0x1, 0x1);
        gbc.writeMem(0x7185, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd4c9);
        EXPECT(gbc.pc(), 0x7186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0367
        gbc.setState(0x555, 0xfcb9, 0xd8f0, 0x8403, 0x4bac, 0x22e9, 0x1, 0x0);
        gbc.writeMem(0x555, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xfcb9);
        EXPECT(gbc.pc(), 0x556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0368
        gbc.setState(0x5746, 0x42b1, 0x9b0, 0xe14f, 0xb7a, 0x90ea, 0x1, 0x1);
        gbc.writeMem(0x5746, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x42b1);
        EXPECT(gbc.pc(), 0x5747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0369
        gbc.setState(0xc6f5, 0x8dd6, 0xbef0, 0x37bb, 0xe764, 0xdade, 0x1, 0x1);
        gbc.writeMem(0xc6f5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8dd6);
        EXPECT(gbc.pc(), 0xc6f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6f5), 0x1b);
        // 1B 036A
        gbc.setState(0x9ca3, 0x263f, 0x33c0, 0x89a7, 0x4766, 0xf774, 0x0, 0x1);
        gbc.writeMem(0x9ca3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x263f);
        EXPECT(gbc.pc(), 0x9ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca3), 0x1b);
        // 1B 036B
        gbc.setState(0xe276, 0xd29c, 0x3a20, 0x21d2, 0xc85f, 0x7a12, 0x1, 0x1);
        gbc.writeMem(0xe276, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd29c);
        EXPECT(gbc.pc(), 0xe277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe276), 0x1b);
        // 1B 036C
        gbc.setState(0x94f1, 0x5d4, 0x2b80, 0x4812, 0x64c8, 0xe6a3, 0x1, 0x0);
        gbc.writeMem(0x94f1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5d4);
        EXPECT(gbc.pc(), 0x94f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f1), 0x1b);
        // 1B 036D
        gbc.setState(0xae70, 0xa945, 0x9490, 0x13ff, 0x4c39, 0x6647, 0x0, 0x1);
        gbc.writeMem(0xae70, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa945);
        EXPECT(gbc.pc(), 0xae71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae70), 0x1b);
        // 1B 036E
        gbc.setState(0xbc24, 0x1d01, 0x8140, 0xffe7, 0xf226, 0x294, 0x1, 0x0);
        gbc.writeMem(0xbc24, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1d01);
        EXPECT(gbc.pc(), 0xbc25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc24), 0x1b);
        // 1B 036F
        gbc.setState(0x2294, 0xc336, 0xee30, 0xa276, 0x4742, 0x2ca, 0x1, 0x1);
        gbc.writeMem(0x2294, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc336);
        EXPECT(gbc.pc(), 0x2295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0370
        gbc.setState(0x1498, 0x1816, 0xa030, 0x89fc, 0x6127, 0x2d53, 0x1, 0x1);
        gbc.writeMem(0x1498, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1816);
        EXPECT(gbc.pc(), 0x1499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0371
        gbc.setState(0x9d29, 0xe4b7, 0x4220, 0x7a14, 0x11c7, 0x57d1, 0x1, 0x1);
        gbc.writeMem(0x9d29, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe4b7);
        EXPECT(gbc.pc(), 0x9d2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d29), 0x1b);
        // 1B 0372
        gbc.setState(0xc3c, 0x1796, 0xdad0, 0xb9d5, 0xb303, 0x8c22, 0x0, 0x0);
        gbc.writeMem(0xc3c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1796);
        EXPECT(gbc.pc(), 0xc3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0373
        gbc.setState(0x8bdf, 0x4771, 0xceb0, 0xb67c, 0xf1d2, 0x1de1, 0x0, 0x1);
        gbc.writeMem(0x8bdf, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4771);
        EXPECT(gbc.pc(), 0x8be0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bdf), 0x1b);
        // 1B 0374
        gbc.setState(0xd01c, 0xe639, 0x70a0, 0x317b, 0x174c, 0x6ea4, 0x1, 0x1);
        gbc.writeMem(0xd01c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe639);
        EXPECT(gbc.pc(), 0xd01d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd01c), 0x1b);
        // 1B 0375
        gbc.setState(0x5817, 0x51ed, 0xc2f0, 0xe214, 0x41ae, 0x4e3f, 0x1, 0x0);
        gbc.writeMem(0x5817, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x51ed);
        EXPECT(gbc.pc(), 0x5818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0376
        gbc.setState(0xbdee, 0xaa57, 0x1c80, 0xc018, 0xe845, 0xd781, 0x1, 0x1);
        gbc.writeMem(0xbdee, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xaa57);
        EXPECT(gbc.pc(), 0xbdef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdee), 0x1b);
        // 1B 0377
        gbc.setState(0xa0e3, 0x920, 0x74b0, 0x8a8f, 0x48db, 0x819c, 0x0, 0x1);
        gbc.writeMem(0xa0e3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x920);
        EXPECT(gbc.pc(), 0xa0e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e3), 0x1b);
        // 1B 0378
        gbc.setState(0xeb4e, 0x1c5b, 0x5600, 0xa2ce, 0x8bbe, 0xc60c, 0x1, 0x1);
        gbc.writeMem(0xeb4e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1c5b);
        EXPECT(gbc.pc(), 0xeb4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb4e), 0x1b);
        // 1B 0379
        gbc.setState(0x2a81, 0xf90d, 0x8140, 0x3eea, 0xc534, 0x2a1a, 0x0, 0x1);
        gbc.writeMem(0x2a81, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf90d);
        EXPECT(gbc.pc(), 0x2a82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 037A
        gbc.setState(0x89c9, 0x9cae, 0x8ef0, 0x62bf, 0x27b7, 0x785a, 0x1, 0x1);
        gbc.writeMem(0x89c9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9cae);
        EXPECT(gbc.pc(), 0x89ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c9), 0x1b);
        // 1B 037B
        gbc.setState(0xc2fb, 0xbc16, 0x5e00, 0x6cf4, 0x4517, 0x9eb6, 0x0, 0x0);
        gbc.writeMem(0xc2fb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xbc16);
        EXPECT(gbc.pc(), 0xc2fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2fb), 0x1b);
        // 1B 037C
        gbc.setState(0x9491, 0xf238, 0xdb90, 0x284f, 0xabbc, 0x8c40, 0x0, 0x1);
        gbc.writeMem(0x9491, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf238);
        EXPECT(gbc.pc(), 0x9492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9491), 0x1b);
        // 1B 037D
        gbc.setState(0x17f8, 0x27cf, 0xbb70, 0x665d, 0xa5b8, 0xcd65, 0x0, 0x1);
        gbc.writeMem(0x17f8, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x27cf);
        EXPECT(gbc.pc(), 0x17f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 037E
        gbc.setState(0x9726, 0x94dd, 0x39e0, 0x7383, 0xf736, 0xc9a0, 0x1, 0x0);
        gbc.writeMem(0x9726, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x94dd);
        EXPECT(gbc.pc(), 0x9727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9726), 0x1b);
        // 1B 037F
        gbc.setState(0x16f9, 0x3b23, 0xb320, 0xa336, 0xefb6, 0x351a, 0x0, 0x0);
        gbc.writeMem(0x16f9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3b23);
        EXPECT(gbc.pc(), 0x16fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0380
        gbc.setState(0x9a3e, 0x1790, 0xc4c0, 0xb433, 0xe895, 0xc931, 0x0, 0x1);
        gbc.writeMem(0x9a3e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1790);
        EXPECT(gbc.pc(), 0x9a3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a3e), 0x1b);
        // 1B 0381
        gbc.setState(0xed8f, 0x9115, 0x91a0, 0x3f18, 0x59fc, 0x2572, 0x0, 0x1);
        gbc.writeMem(0xed8f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9115);
        EXPECT(gbc.pc(), 0xed90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed8f), 0x1b);
        // 1B 0382
        gbc.setState(0x6d08, 0x216a, 0xb990, 0x47e6, 0x2237, 0xb876, 0x1, 0x0);
        gbc.writeMem(0x6d08, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x216a);
        EXPECT(gbc.pc(), 0x6d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0383
        gbc.setState(0x4910, 0x2de4, 0xaff0, 0x3613, 0x3a96, 0x327b, 0x1, 0x0);
        gbc.writeMem(0x4910, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2de4);
        EXPECT(gbc.pc(), 0x4911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0384
        gbc.setState(0xf05, 0xef62, 0xae40, 0x854c, 0xdb02, 0xcf4e, 0x0, 0x0);
        gbc.writeMem(0xf05, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xef62);
        EXPECT(gbc.pc(), 0xf06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0385
        gbc.setState(0x2a7b, 0x1f78, 0x2050, 0xad9a, 0xda1c, 0x6b83, 0x0, 0x1);
        gbc.writeMem(0x2a7b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1f78);
        EXPECT(gbc.pc(), 0x2a7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0386
        gbc.setState(0xa488, 0xd65a, 0x33c0, 0x1e11, 0xca9f, 0x2e1a, 0x1, 0x0);
        gbc.writeMem(0xa488, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd65a);
        EXPECT(gbc.pc(), 0xa489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa488), 0x1b);
        // 1B 0387
        gbc.setState(0xd4f3, 0x7692, 0x95c0, 0xd8a, 0xe57e, 0x3b9, 0x0, 0x0);
        gbc.writeMem(0xd4f3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7692);
        EXPECT(gbc.pc(), 0xd4f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f3), 0x1b);
        // 1B 0388
        gbc.setState(0x6b97, 0xa609, 0x6060, 0x590a, 0x7fde, 0x95a1, 0x0, 0x0);
        gbc.writeMem(0x6b97, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa609);
        EXPECT(gbc.pc(), 0x6b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 0389
        gbc.setState(0x88fd, 0x974a, 0x8470, 0x54f1, 0x9d93, 0x77d5, 0x0, 0x1);
        gbc.writeMem(0x88fd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x974a);
        EXPECT(gbc.pc(), 0x88fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88fd), 0x1b);
        // 1B 038A
        gbc.setState(0xc8c1, 0xf36f, 0xf330, 0xb571, 0xcb61, 0xdded, 0x0, 0x1);
        gbc.writeMem(0xc8c1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf36f);
        EXPECT(gbc.pc(), 0xc8c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8c1), 0x1b);
        // 1B 038C
        gbc.setState(0xb3e1, 0xcc94, 0x2480, 0x7288, 0xadea, 0xda9f, 0x0, 0x0);
        gbc.writeMem(0xb3e1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xcc94);
        EXPECT(gbc.pc(), 0xb3e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3e1), 0x1b);
        // 1B 038D
        gbc.setState(0x3637, 0x75c6, 0x13e0, 0xf69d, 0xb491, 0x9a71, 0x0, 0x1);
        gbc.writeMem(0x3637, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x75c6);
        EXPECT(gbc.pc(), 0x3638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 038E
        gbc.setState(0x6c85, 0x9d53, 0x8c50, 0x55c3, 0x2e4d, 0x66f0, 0x0, 0x0);
        gbc.writeMem(0x6c85, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9d53);
        EXPECT(gbc.pc(), 0x6c86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 038F
        gbc.setState(0x1f1c, 0xf10a, 0xd890, 0xd9d, 0xe976, 0x23b, 0x0, 0x1);
        gbc.writeMem(0x1f1c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf10a);
        EXPECT(gbc.pc(), 0x1f1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 0390
        gbc.setState(0x3526, 0x9860, 0xadb0, 0x1670, 0xd309, 0xa671, 0x1, 0x0);
        gbc.writeMem(0x3526, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9860);
        EXPECT(gbc.pc(), 0x3527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0391
        gbc.setState(0xa484, 0x19ad, 0xb650, 0xbbd, 0x2fee, 0xa039, 0x1, 0x0);
        gbc.writeMem(0xa484, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x19ad);
        EXPECT(gbc.pc(), 0xa485);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa484), 0x1b);
        // 1B 0392
        gbc.setState(0x9b67, 0x8b2, 0x8b10, 0x31b1, 0xc94e, 0x8b71, 0x0, 0x1);
        gbc.writeMem(0x9b67, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8b2);
        EXPECT(gbc.pc(), 0x9b68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b67), 0x1b);
        // 1B 0393
        gbc.setState(0xecf3, 0xac61, 0xe960, 0xe684, 0xa8e6, 0xf33d, 0x1, 0x1);
        gbc.writeMem(0xecf3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xac61);
        EXPECT(gbc.pc(), 0xecf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecf3), 0x1b);
        // 1B 0395
        gbc.setState(0x628a, 0xa029, 0xedc0, 0x934c, 0xfb7e, 0xfe27, 0x0, 0x1);
        gbc.writeMem(0x628a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa029);
        EXPECT(gbc.pc(), 0x628b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0396
        gbc.setState(0xbcef, 0x346b, 0xacd0, 0x29e1, 0xbd36, 0x4661, 0x0, 0x0);
        gbc.writeMem(0xbcef, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x346b);
        EXPECT(gbc.pc(), 0xbcf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcef), 0x1b);
        // 1B 0397
        gbc.setState(0x2b74, 0xc0a2, 0xc970, 0xfafc, 0xce09, 0x495c, 0x1, 0x1);
        gbc.writeMem(0x2b74, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc0a2);
        EXPECT(gbc.pc(), 0x2b75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 0398
        gbc.setState(0x2af6, 0xb5ad, 0xbdc0, 0xf249, 0xc4bc, 0x6292, 0x0, 0x0);
        gbc.writeMem(0x2af6, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xb5ad);
        EXPECT(gbc.pc(), 0x2af7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 0399
        gbc.setState(0xc45f, 0x334b, 0x9530, 0x129c, 0x4543, 0x9b9e, 0x1, 0x1);
        gbc.writeMem(0xc45f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x334b);
        EXPECT(gbc.pc(), 0xc460);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc45f), 0x1b);
        // 1B 039A
        gbc.setState(0xc707, 0xc809, 0x66d0, 0xb70b, 0x76c2, 0x4a05, 0x1, 0x0);
        gbc.writeMem(0xc707, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc809);
        EXPECT(gbc.pc(), 0xc708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc707), 0x1b);
        // 1B 039B
        gbc.setState(0xefa1, 0x73ec, 0xaad0, 0xe9cf, 0xdbf3, 0x5bba, 0x1, 0x0);
        gbc.writeMem(0xefa1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x73ec);
        EXPECT(gbc.pc(), 0xefa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefa1), 0x1b);
        // 1B 039C
        gbc.setState(0xbaaa, 0x7d13, 0xc6e0, 0xf509, 0x6d3f, 0x31cc, 0x1, 0x1);
        gbc.writeMem(0xbaaa, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7d13);
        EXPECT(gbc.pc(), 0xbaab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaaa), 0x1b);
        // 1B 039D
        gbc.setState(0xb9f9, 0x7015, 0xd890, 0x6ae4, 0xa530, 0xa33c, 0x1, 0x1);
        gbc.writeMem(0xb9f9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7015);
        EXPECT(gbc.pc(), 0xb9fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9f9), 0x1b);
        // 1B 039E
        gbc.setState(0xd39a, 0xd430, 0x7020, 0x55f9, 0x7be, 0xdd64, 0x0, 0x0);
        gbc.writeMem(0xd39a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd430);
        EXPECT(gbc.pc(), 0xd39b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd39a), 0x1b);
        // 1B 039F
        gbc.setState(0xb3ab, 0x7c7, 0xaad0, 0xa21, 0x2cfe, 0xd77b, 0x0, 0x1);
        gbc.writeMem(0xb3ab, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7c7);
        EXPECT(gbc.pc(), 0xb3ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3ab), 0x1b);
        // 1B 03A0
        gbc.setState(0x632b, 0x83a8, 0xdaf0, 0x889f, 0x9d65, 0x11fd, 0x1, 0x0);
        gbc.writeMem(0x632b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x83a8);
        EXPECT(gbc.pc(), 0x632c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03A1
        gbc.setState(0xdb41, 0xb7bb, 0x8e40, 0xd142, 0x5d46, 0x6077, 0x0, 0x0);
        gbc.writeMem(0xdb41, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb7bb);
        EXPECT(gbc.pc(), 0xdb42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb41), 0x1b);
        // 1B 03A2
        gbc.setState(0x166, 0x839, 0x5f60, 0x63bd, 0xd20b, 0xf251, 0x0, 0x1);
        gbc.writeMem(0x166, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x839);
        EXPECT(gbc.pc(), 0x167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 03A3
        gbc.setState(0x118c, 0x84b7, 0x85c0, 0x405f, 0xe1ad, 0x65b3, 0x1, 0x1);
        gbc.writeMem(0x118c, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x84b7);
        EXPECT(gbc.pc(), 0x118d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03A4
        gbc.setState(0x80d2, 0x2c83, 0x6130, 0xd70b, 0x3ccd, 0xb1a9, 0x1, 0x0);
        gbc.writeMem(0x80d2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2c83);
        EXPECT(gbc.pc(), 0x80d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d2), 0x1b);
        // 1B 03A5
        gbc.setState(0x1017, 0x19f9, 0x25c0, 0x306e, 0x4593, 0xb452, 0x0, 0x1);
        gbc.writeMem(0x1017, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x19f9);
        EXPECT(gbc.pc(), 0x1018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03A6
        gbc.setState(0x4c9e, 0xbf40, 0xa420, 0xcd82, 0xeef9, 0xea70, 0x1, 0x0);
        gbc.writeMem(0x4c9e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xbf40);
        EXPECT(gbc.pc(), 0x4c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 03A7
        gbc.setState(0x4814, 0xc738, 0xc830, 0x703a, 0x42a3, 0x528e, 0x1, 0x1);
        gbc.writeMem(0x4814, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc738);
        EXPECT(gbc.pc(), 0x4815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03A8
        gbc.setState(0xd3aa, 0x28b0, 0x6e00, 0x5869, 0xd202, 0x1a9, 0x1, 0x1);
        gbc.writeMem(0xd3aa, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x28b0);
        EXPECT(gbc.pc(), 0xd3ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3aa), 0x1b);
        // 1B 03A9
        gbc.setState(0x150e, 0x91aa, 0x380, 0x5e97, 0xb580, 0x6366, 0x1, 0x1);
        gbc.writeMem(0x150e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x91aa);
        EXPECT(gbc.pc(), 0x150f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03AA
        gbc.setState(0xe445, 0x134, 0x16b0, 0xd7ed, 0xcfc2, 0xe0cd, 0x1, 0x1);
        gbc.writeMem(0xe445, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x134);
        EXPECT(gbc.pc(), 0xe446);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe445), 0x1b);
        // 1B 03AB
        gbc.setState(0xa175, 0x55bc, 0xf2e0, 0x1166, 0xd43a, 0x98ad, 0x1, 0x1);
        gbc.writeMem(0xa175, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x55bc);
        EXPECT(gbc.pc(), 0xa176);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa175), 0x1b);
        // 1B 03AC
        gbc.setState(0x29d5, 0xa608, 0xae60, 0xf3ed, 0xd7f9, 0xadcf, 0x0, 0x0);
        gbc.writeMem(0x29d5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa608);
        EXPECT(gbc.pc(), 0x29d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 03AD
        gbc.setState(0x57c7, 0xd4ca, 0xfdf0, 0xeefd, 0x9ced, 0xfe69, 0x0, 0x1);
        gbc.writeMem(0x57c7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd4ca);
        EXPECT(gbc.pc(), 0x57c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03AE
        gbc.setState(0x4843, 0x55c2, 0xfc20, 0xe246, 0xd964, 0x9c19, 0x1, 0x1);
        gbc.writeMem(0x4843, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x55c2);
        EXPECT(gbc.pc(), 0x4844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 03AF
        gbc.setState(0x85e4, 0x6523, 0x73b0, 0x6daf, 0x13be, 0x105b, 0x0, 0x0);
        gbc.writeMem(0x85e4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6523);
        EXPECT(gbc.pc(), 0x85e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e4), 0x1b);
        // 1B 03B0
        gbc.setState(0x6916, 0x11fd, 0x3df0, 0x90c8, 0x58e8, 0xe18d, 0x0, 0x1);
        gbc.writeMem(0x6916, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x11fd);
        EXPECT(gbc.pc(), 0x6917);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03B1
        gbc.setState(0x78bf, 0x9beb, 0xca50, 0x67f, 0x8e25, 0x5ade, 0x0, 0x0);
        gbc.writeMem(0x78bf, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9beb);
        EXPECT(gbc.pc(), 0x78c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 03B2
        gbc.setState(0xa3d7, 0x5f9a, 0xfae0, 0xba9f, 0x5867, 0xb164, 0x1, 0x0);
        gbc.writeMem(0xa3d7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5f9a);
        EXPECT(gbc.pc(), 0xa3d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d7), 0x1b);
        // 1B 03B3
        gbc.setState(0x273, 0xb0dc, 0xd890, 0xb740, 0x4446, 0x72fa, 0x0, 0x1);
        gbc.writeMem(0x273, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb0dc);
        EXPECT(gbc.pc(), 0x274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 03B4
        gbc.setState(0x3721, 0x312d, 0x31b0, 0xc59f, 0x68b, 0xf266, 0x0, 0x1);
        gbc.writeMem(0x3721, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x312d);
        EXPECT(gbc.pc(), 0x3722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03B5
        gbc.setState(0xa22, 0x22d7, 0xe8b0, 0x9698, 0x1ddc, 0x7c91, 0x0, 0x0);
        gbc.writeMem(0xa22, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x22d7);
        EXPECT(gbc.pc(), 0xa23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03B6
        gbc.setState(0x9f13, 0x4db3, 0xe100, 0x9a2c, 0x184b, 0x95a7, 0x1, 0x1);
        gbc.writeMem(0x9f13, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4db3);
        EXPECT(gbc.pc(), 0x9f14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f13), 0x1b);
        // 1B 03B7
        gbc.setState(0x21ee, 0xd2ac, 0xe150, 0xbeeb, 0x6d4a, 0x5a38, 0x0, 0x1);
        gbc.writeMem(0x21ee, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd2ac);
        EXPECT(gbc.pc(), 0x21ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 03B8
        gbc.setState(0xcca, 0xfbe2, 0x5580, 0x5130, 0xe9ed, 0x6c92, 0x0, 0x1);
        gbc.writeMem(0xcca, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfbe2);
        EXPECT(gbc.pc(), 0xccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03B9
        gbc.setState(0x4247, 0xf82b, 0xd8a0, 0x9990, 0xdb51, 0x7d1d, 0x0, 0x0);
        gbc.writeMem(0x4247, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf82b);
        EXPECT(gbc.pc(), 0x4248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 03BA
        gbc.setState(0x8a0, 0x53ca, 0xf1c0, 0x9d96, 0xe1b, 0x350e, 0x0, 0x0);
        gbc.writeMem(0x8a0, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x53ca);
        EXPECT(gbc.pc(), 0x8a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03BB
        gbc.setState(0x400d, 0xac0, 0x7530, 0xd7c9, 0x27be, 0xac19, 0x1, 0x0);
        gbc.writeMem(0x400d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xac0);
        EXPECT(gbc.pc(), 0x400e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03BC
        gbc.setState(0x8194, 0x3143, 0x4ff0, 0x4354, 0x799c, 0x517c, 0x1, 0x0);
        gbc.writeMem(0x8194, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3143);
        EXPECT(gbc.pc(), 0x8195);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8194), 0x1b);
        // 1B 03BD
        gbc.setState(0xc25f, 0x5915, 0xa520, 0x8306, 0xe00e, 0xe384, 0x1, 0x1);
        gbc.writeMem(0xc25f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5915);
        EXPECT(gbc.pc(), 0xc260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25f), 0x1b);
        // 1B 03BE
        gbc.setState(0xd2c3, 0x642c, 0x9c60, 0xe012, 0x81bc, 0x667f, 0x0, 0x0);
        gbc.writeMem(0xd2c3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x642c);
        EXPECT(gbc.pc(), 0xd2c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2c3), 0x1b);
        // 1B 03BF
        gbc.setState(0x68b2, 0x50c1, 0x6170, 0xc3af, 0xccc5, 0xf62e, 0x0, 0x1);
        gbc.writeMem(0x68b2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x50c1);
        EXPECT(gbc.pc(), 0x68b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03C0
        gbc.setState(0x2642, 0x90f3, 0xf6a0, 0x18fa, 0x193, 0xd6a5, 0x0, 0x0);
        gbc.writeMem(0x2642, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x90f3);
        EXPECT(gbc.pc(), 0x2643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 03C1
        gbc.setState(0xb8d7, 0xcf50, 0x76c0, 0xffb2, 0xf987, 0xc57d, 0x1, 0x0);
        gbc.writeMem(0xb8d7, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xcf50);
        EXPECT(gbc.pc(), 0xb8d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8d7), 0x1b);
        // 1B 03C2
        gbc.setState(0x2163, 0x19ca, 0x2330, 0x8bc2, 0x9f96, 0xa90f, 0x1, 0x0);
        gbc.writeMem(0x2163, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x19ca);
        EXPECT(gbc.pc(), 0x2164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03C3
        gbc.setState(0xab4a, 0xca58, 0xeb70, 0x3279, 0xaf09, 0x70c5, 0x0, 0x0);
        gbc.writeMem(0xab4a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xca58);
        EXPECT(gbc.pc(), 0xab4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab4a), 0x1b);
        // 1B 03C5
        gbc.setState(0x2a6b, 0xa7a9, 0x4000, 0xacdc, 0xf918, 0x869d, 0x1, 0x1);
        gbc.writeMem(0x2a6b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa7a9);
        EXPECT(gbc.pc(), 0x2a6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03C6
        gbc.setState(0xa1c9, 0x2c06, 0xd6a0, 0x1508, 0x685, 0xd191, 0x1, 0x0);
        gbc.writeMem(0xa1c9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2c06);
        EXPECT(gbc.pc(), 0xa1ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c9), 0x1b);
        // 1B 03C8
        gbc.setState(0x6904, 0xd110, 0x6cf0, 0x3a06, 0xae7f, 0x10ee, 0x1, 0x0);
        gbc.writeMem(0x6904, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd110);
        EXPECT(gbc.pc(), 0x6905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03C9
        gbc.setState(0x9cfe, 0x7111, 0xf150, 0xe2ad, 0x9b, 0x2767, 0x0, 0x0);
        gbc.writeMem(0x9cfe, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7111);
        EXPECT(gbc.pc(), 0x9cff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cfe), 0x1b);
        // 1B 03CA
        gbc.setState(0x57cf, 0x1445, 0x9cf0, 0x3d9, 0x7741, 0x5b8, 0x0, 0x0);
        gbc.writeMem(0x57cf, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1445);
        EXPECT(gbc.pc(), 0x57d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03CB
        gbc.setState(0x74a5, 0x3af4, 0xb5e0, 0x7c53, 0xcf42, 0xd811, 0x0, 0x0);
        gbc.writeMem(0x74a5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3af4);
        EXPECT(gbc.pc(), 0x74a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 1B 03CC
        gbc.setState(0x6f54, 0x4fa2, 0x7cb0, 0xa85d, 0xb121, 0x74de, 0x1, 0x1);
        gbc.writeMem(0x6f54, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4fa2);
        EXPECT(gbc.pc(), 0x6f55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03CD
        gbc.setState(0x1931, 0xeb95, 0x6fc0, 0x2a31, 0x2b42, 0x8c64, 0x1, 0x1);
        gbc.writeMem(0x1931, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xeb95);
        EXPECT(gbc.pc(), 0x1932);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03CE
        gbc.setState(0x5738, 0xc194, 0x2030, 0x27d4, 0xd205, 0x4186, 0x0, 0x1);
        gbc.writeMem(0x5738, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc194);
        EXPECT(gbc.pc(), 0x5739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03CF
        gbc.setState(0xb7c3, 0x8407, 0xfb0, 0x6be8, 0x9fa5, 0xefd2, 0x1, 0x1);
        gbc.writeMem(0xb7c3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8407);
        EXPECT(gbc.pc(), 0xb7c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7c3), 0x1b);
        // 1B 03D0
        gbc.setState(0xe99b, 0x86c3, 0x6690, 0x445c, 0xeafd, 0x27f2, 0x0, 0x1);
        gbc.writeMem(0xe99b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x86c3);
        EXPECT(gbc.pc(), 0xe99c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe99b), 0x1b);
        // 1B 03D1
        gbc.setState(0x94b1, 0xdb98, 0x1890, 0xf283, 0xeeee, 0x70ab, 0x1, 0x1);
        gbc.writeMem(0x94b1, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xdb98);
        EXPECT(gbc.pc(), 0x94b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94b1), 0x1b);
        // 1B 03D2
        gbc.setState(0x369f, 0x87bb, 0xf200, 0x8d7a, 0xd2cb, 0xde25, 0x1, 0x0);
        gbc.writeMem(0x369f, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x87bb);
        EXPECT(gbc.pc(), 0x36a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03D3
        gbc.setState(0x15d3, 0x7be, 0xfed0, 0x2bc7, 0xb5df, 0xd753, 0x1, 0x0);
        gbc.writeMem(0x15d3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7be);
        EXPECT(gbc.pc(), 0x15d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 03D4
        gbc.setState(0x963a, 0xd93b, 0x47b0, 0xc65, 0xdca4, 0xa9fd, 0x1, 0x1);
        gbc.writeMem(0x963a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd93b);
        EXPECT(gbc.pc(), 0x963b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x963a), 0x1b);
        // 1B 03D5
        gbc.setState(0x1c8d, 0x8e8c, 0xb4f0, 0x33a3, 0xefd3, 0x7c9b, 0x0, 0x0);
        gbc.writeMem(0x1c8d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8e8c);
        EXPECT(gbc.pc(), 0x1c8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03D6
        gbc.setState(0x68b4, 0x7561, 0x2c00, 0xdfca, 0xe97a, 0xe3dc, 0x1, 0x0);
        gbc.writeMem(0x68b4, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x7561);
        EXPECT(gbc.pc(), 0x68b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03D7
        gbc.setState(0xef4d, 0x532e, 0xec20, 0xbbd4, 0xfe45, 0x3099, 0x0, 0x0);
        gbc.writeMem(0xef4d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x532e);
        EXPECT(gbc.pc(), 0xef4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4d), 0x1b);
        // 1B 03D8
        gbc.setState(0xbb65, 0xe525, 0xee10, 0x4395, 0x1fd5, 0xed3a, 0x1, 0x1);
        gbc.writeMem(0xbb65, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe525);
        EXPECT(gbc.pc(), 0xbb66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb65), 0x1b);
        // 1B 03D9
        gbc.setState(0xee22, 0x231c, 0xec90, 0xfba5, 0x165c, 0xb7d6, 0x0, 0x1);
        gbc.writeMem(0xee22, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x231c);
        EXPECT(gbc.pc(), 0xee23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee22), 0x1b);
        // 1B 03DB
        gbc.setState(0xe4f9, 0xdff1, 0x9f20, 0x6233, 0xc2f6, 0x1737, 0x0, 0x0);
        gbc.writeMem(0xe4f9, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdff1);
        EXPECT(gbc.pc(), 0xe4fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f9), 0x1b);
        // 1B 03DC
        gbc.setState(0x9b4a, 0xfb3b, 0xcc90, 0xede5, 0x7486, 0x8770, 0x1, 0x0);
        gbc.writeMem(0x9b4a, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xfb3b);
        EXPECT(gbc.pc(), 0x9b4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b4a), 0x1b);
        // 1B 03DD
        gbc.setState(0x8ff3, 0x8abc, 0x5850, 0xd15, 0x9295, 0xe60e, 0x1, 0x0);
        gbc.writeMem(0x8ff3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8abc);
        EXPECT(gbc.pc(), 0x8ff4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ff3), 0x1b);
        // 1B 03DE
        gbc.setState(0xc6f2, 0x6c20, 0x7e80, 0xe9de, 0x5c18, 0xc4fd, 0x1, 0x0);
        gbc.writeMem(0xc6f2, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6c20);
        EXPECT(gbc.pc(), 0xc6f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f2), 0x1b);
        // 1B 03DF
        gbc.setState(0x5f1b, 0xa54a, 0xc510, 0xc351, 0xe906, 0x7cda, 0x1, 0x1);
        gbc.writeMem(0x5f1b, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa54a);
        EXPECT(gbc.pc(), 0x5f1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 1B 03E0
        gbc.setState(0x6ffd, 0xc982, 0x770, 0x9f7c, 0x4af3, 0xce57, 0x1, 0x0);
        gbc.writeMem(0x6ffd, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xc982);
        EXPECT(gbc.pc(), 0x6ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03E1
        gbc.setState(0x1e05, 0x514e, 0x3740, 0x9b41, 0x47f6, 0xd0c3, 0x0, 0x0);
        gbc.writeMem(0x1e05, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x514e);
        EXPECT(gbc.pc(), 0x1e06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 1B 03E2
        gbc.setState(0xd2eb, 0x6c28, 0xd0c0, 0x9482, 0x2f3c, 0xd62e, 0x0, 0x0);
        gbc.writeMem(0xd2eb, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6c28);
        EXPECT(gbc.pc(), 0xd2ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2eb), 0x1b);
        // 1B 03E3
        gbc.setState(0xe326, 0x6aba, 0xddc0, 0xdec2, 0xb9c1, 0x1556, 0x1, 0x1);
        gbc.writeMem(0xe326, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x6aba);
        EXPECT(gbc.pc(), 0xe327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe326), 0x1b);
        // 1B 03E4
        gbc.setState(0x17fe, 0xaeb7, 0x5df0, 0x7fe2, 0x9542, 0x7d2b, 0x1, 0x0);
        gbc.writeMem(0x17fe, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xaeb7);
        EXPECT(gbc.pc(), 0x17ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03E5
        gbc.setState(0x89d3, 0xf440, 0x250, 0xa4ad, 0x30ce, 0xb1c3, 0x1, 0x1);
        gbc.writeMem(0x89d3, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf440);
        EXPECT(gbc.pc(), 0x89d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89d3), 0x1b);
        // 1B 03E6
        gbc.setState(0x1710, 0x72b2, 0x1bf0, 0x9b1c, 0x869c, 0x50bc, 0x0, 0x1);
        gbc.writeMem(0x1710, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x72b2);
        EXPECT(gbc.pc(), 0x1711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 1B 03E7
        gbc.setState(0x630e, 0xb4bb, 0x3490, 0x19e9, 0x117d, 0x7579, 0x0, 0x0);
        gbc.writeMem(0x630e, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb4bb);
        EXPECT(gbc.pc(), 0x630f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
